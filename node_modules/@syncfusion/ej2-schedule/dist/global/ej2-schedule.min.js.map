{"version":3,"file":"ej2-schedule.min.js","sources":["../../src/schedule/base/util.js","../../src/recurrence-editor/date-generator.js","../../src/schedule/base/constant.js","../../src/schedule/base/css-constant.js","../../src/schedule/renderer/header-renderer.js","../../src/schedule/actions/scroll.js","../../src/schedule/actions/touch.js","../../src/schedule/actions/keyboard.js","../../src/schedule/actions/data.js","../../src/common/calendar-util.js","../../src/schedule/timezone/timezone.js","../../src/schedule/event-renderer/event-base.js","../../src/schedule/event-renderer/vertical-view.js","../../src/schedule/event-renderer/month.js","../../src/schedule/event-renderer/timeline-view.js","../../src/schedule/event-renderer/inline-edit.js","../../src/schedule/popups/form-validator.js","../../src/schedule/popups/quick-popups.js","../../src/schedule/popups/event-tooltip.js","../../src/recurrence-editor/recurrence-editor.js","../../src/schedule/popups/event-window.js","../../src/schedule/actions/virtual-scroll.js","../../src/schedule/renderer/renderer.js","../../src/schedule/models/work-hours.js","../../src/schedule/models/time-scale.js","../../src/schedule/models/quick-info-templates.js","../../src/schedule/models/header-rows.js","../../src/schedule/actions/crud.js","../../src/schedule/actions/work-cells.js","../../src/schedule/models/field-options.js","../../src/schedule/models/fields.js","../../src/schedule/models/event-settings.js","../../src/schedule/models/group.js","../../src/schedule/models/resources.js","../../src/schedule/base/resource.js","../../src/schedule/base/schedule.js","../../src/schedule/actions/action-base.js","../../src/schedule/actions/resize.js","../../src/schedule/event-renderer/year.js","../../src/schedule/actions/drag.js","../../src/schedule/renderer/view-base.js","../../src/schedule/renderer/vertical-view.js","../../src/schedule/renderer/day.js","../../src/schedule/renderer/week.js","../../src/schedule/renderer/work-week.js","../../src/schedule/renderer/month.js","../../src/schedule/renderer/year.js","../../src/schedule/event-renderer/agenda-base.js","../../src/schedule/renderer/agenda.js","../../src/schedule/renderer/month-agenda.js","../../src/schedule/renderer/timeline-header-row.js","../../src/schedule/renderer/timeline-view.js","../../src/schedule/renderer/timeline-month.js","../../src/schedule/renderer/timeline-year.js","../../src/schedule/exports/calendar-export.js","../../src/schedule/exports/calendar-import.js","../../src/schedule/exports/excel-export.js","../../src/schedule/exports/print.js","../../src/global.js"],"sourcesContent":["import { createElement, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Schedule common utilities\n */\nexport var WEEK_LENGTH = 7;\nexport var MS_PER_DAY = 86400000;\nexport var MS_PER_MINUTE = 60000;\nexport function getElementHeightFromClass(container, elementClass) {\n    var height = 0;\n    var el = createElement('div', { className: elementClass }).cloneNode();\n    el.style.visibility = 'hidden';\n    el.style.position = 'absolute';\n    container.appendChild(el);\n    height = el.getBoundingClientRect().height;\n    remove(el);\n    return height;\n}\nexport function getTranslateY(element) {\n    var style = getComputedStyle(element);\n    return window.WebKitCSSMatrix ?\n        new WebKitCSSMatrix(style.webkitTransform).m42 : 0;\n}\nexport function getWeekFirstDate(date1, firstDayOfWeek) {\n    var date = new Date(date1.getTime());\n    firstDayOfWeek = (firstDayOfWeek - date.getDay() + 7 * (-1)) % 7;\n    return new Date(date.setDate(date.getDate() + firstDayOfWeek));\n}\nexport function getWeekLastDate(date, firstDayOfWeek) {\n    var weekFirst = getWeekFirstDate(date, firstDayOfWeek);\n    var weekLast = new Date(weekFirst.getFullYear(), weekFirst.getMonth(), weekFirst.getDate() + 6);\n    return new Date(weekLast.getTime());\n}\nexport function firstDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth());\n}\nexport function lastDateOfMonth(dt) {\n    return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n}\nexport function getWeekNumber(dt) {\n    var date = new Date(dt.getFullYear(), 0, 1).valueOf();\n    var currentDate = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate()).valueOf();\n    var dayOfYear = ((currentDate - date + MS_PER_DAY) / MS_PER_DAY);\n    return Math.ceil(dayOfYear / 7);\n}\nexport function getWeekMiddleDate(weekFirst, weekLast) {\n    var date = new Date(weekLast.valueOf() - ((weekLast.valueOf() - weekFirst.valueOf()) / 2));\n    return date;\n}\nexport function setTime(date, time) {\n    var tzOffsetBefore = date.getTimezoneOffset();\n    var d = new Date(date.getTime() + time);\n    var tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;\n    date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n    return date;\n}\nexport function resetTime(date) {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\nexport function getDateInMs(date) {\n    var sysDateOffset = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTimezoneOffset();\n    var dateOffset = date.getTimezoneOffset();\n    var tzOffsetDiff = dateOffset - sysDateOffset;\n    return ((date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime())\n        - (tzOffsetDiff * 60 * 1000));\n}\nexport function getDateCount(startDate, endDate) {\n    return Math.ceil((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);\n}\nexport function addDays(date, i) {\n    date = new Date('' + date);\n    return new Date(date.setDate(date.getDate() + i));\n}\nexport function addMonths(date, i) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setMonth(date.getMonth() + i);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\nexport function addYears(date, i) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setFullYear(date.getFullYear() + i);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\nexport function getStartEndHours(date, startHour, endHour) {\n    var date1 = new Date(date.getTime());\n    date1.setHours(startHour.getHours());\n    date1.setMinutes(startHour.getMinutes());\n    date1.setSeconds(startHour.getSeconds());\n    var date2 = new Date(date.getTime());\n    if (endHour.getHours() === 0) {\n        date2 = addDays(date2, 1);\n    }\n    else {\n        date2.setHours(endHour.getHours());\n        date2.setMinutes(endHour.getMinutes());\n        date2.setSeconds(endHour.getSeconds());\n    }\n    return { startHour: date1, endHour: date2 };\n}\nexport function getMaxDays(d) {\n    var date = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n    return date.getDate();\n}\nexport function getDaysCount(startDate, endDate) {\n    var strTime = resetTime(new Date(startDate));\n    var endTime = resetTime(new Date(endDate));\n    return Math.round((endTime.getTime() - strTime.getTime()) / MS_PER_DAY);\n}\nexport function getDateFromString(date) {\n    return date.indexOf('Date') !== -1 ? new Date(parseInt(date.match(/\\d+/g).toString(), 10)) :\n        date.indexOf('T') !== -1 ? new Date(date) : new Date(date.replace(/-/g, '/'));\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    var ratio = (devicePixelRatio) ? (devicePixelRatio.toFixed(2) === '1.10' || devicePixelRatio <= 1) ?\n        Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0;\n    value = (divNode.offsetWidth - divNode.clientWidth - ratio) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\nexport function findIndexInData(data, property, value, event, resourceCollection) {\n    for (var i = 0, length_1 = data.length; i < length_1; i++) {\n        if (data[i][property] === value) {\n            if (event) {\n                var field = resourceCollection.slice(-2)[0].field;\n                var res = (event[field] instanceof Array ? event[field] : [event[field]]);\n                var resData = res.join(',');\n                // tslint:disable-next-line:no-any\n                if (resData.includes(data[i][resourceCollection.slice(-1)[0].groupIDField])) {\n                    return i;\n                }\n            }\n            else {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\nexport function getOuterHeight(element) {\n    var style = getComputedStyle(element);\n    return element.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);\n}\nexport function removeChildren(element) {\n    var elementChildren = [].slice.call(element.children);\n    for (var _i = 0, elementChildren_1 = elementChildren; _i < elementChildren_1.length; _i++) {\n        var elementChild = elementChildren_1[_i];\n        if (!elementChild.classList.contains('blazor-template')) {\n            element.removeChild(elementChild);\n        }\n    }\n}\nexport function isDaylightSavingTime(date) {\n    var jan = new Date(date.getFullYear(), 0, 1);\n    var jul = new Date(date.getFullYear(), 6, 1);\n    return date.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());\n}\nexport function addLocalOffset(date) {\n    return date;\n}\nexport function addLocalOffsetToEvent(event, eventFields) {\n    return event;\n}\nexport function isIPadDevice() {\n    var deviceCheck = window.navigator.userAgent.toLowerCase();\n    return deviceCheck.indexOf('ipad') > -1;\n}\nexport function capitalizeFirstWord(inputString, type) {\n    switch (type) {\n        case 'multiple':\n            inputString = inputString.split(' ').map(function (e) { return e.charAt(0).toLocaleUpperCase() + e.substring(1); }).join(' ');\n            break;\n        case 'single':\n            if (inputString[0] >= '0' && inputString[0] <= '9') {\n                var array = inputString.match(/[a-zA-Z]/);\n                inputString = isNullOrUndefined(array) ? inputString :\n                    inputString.slice(0, array.index) + inputString[array.index].toLocaleUpperCase() + inputString.slice(array.index + 1);\n            }\n            inputString = inputString[0].toLocaleUpperCase() + inputString.slice(1);\n            break;\n    }\n    return inputString;\n}\n","import { isNullOrUndefined, getDefaultDateObject, getValue, cldrData } from '@syncfusion/ej2-base';\nimport { MS_PER_DAY, addDays, resetTime, capitalizeFirstWord } from '../schedule/base/util';\nimport { Islamic, Gregorian } from '../common/calendar-util';\nimport { Timezone } from '../schedule/timezone/timezone';\n/**\n * Date Generator from Recurrence Rule\n */\nexport function generateSummary(rule, localeObject, locale, calendarType) {\n    if (calendarType === void 0) { calendarType = 'Gregorian'; }\n    var ruleObject = extractObjectFromRule(rule);\n    var summary = localeObject.getConstant(EVERY) + ' ';\n    var cldrObj;\n    var cldrObj1;\n    var calendarMode = calendarType.toLowerCase();\n    if (locale === 'en' || locale === 'en-US') {\n        var nameSpace1 = 'months.stand-alone.abbreviated';\n        var nameSpace = 'days.stand-alone.abbreviated';\n        cldrObj1 = (getValue(nameSpace1, getDefaultDateObject(calendarMode)));\n        cldrObj = (getValue(nameSpace, getDefaultDateObject(calendarMode)));\n    }\n    else {\n        var nameSpace1 = 'main.' + locale + '.dates.calendars.' + calendarMode + '.months.stand-alone.abbreviated';\n        var nameSpace = 'main.' + locale + '.dates.calendars.' + calendarMode + '.days.stand-alone.abbreviated';\n        cldrObj1 =\n            (getValue(nameSpace1, cldrData));\n        cldrObj =\n            (getValue(nameSpace, cldrData));\n    }\n    if (ruleObject.interval > 1) {\n        summary += ruleObject.interval + ' ';\n    }\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            summary += localeObject.getConstant(DAYS);\n            break;\n        case 'WEEKLY':\n            summary += localeObject.getConstant(WEEKS) + ' ' + localeObject.getConstant(ON) + ' ';\n            ruleObject.day.forEach(function (day, index) {\n                summary += capitalizeFirstWord(getValue(DAYINDEXOBJECT[day], cldrObj), 'single');\n                summary += (((ruleObject.day.length - 1) === index) ? '' : ', ');\n            });\n            break;\n        case 'MONTHLY':\n            summary += localeObject.getConstant(MONTHS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n        case 'YEARLY':\n            summary += localeObject.getConstant(YEARS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += capitalizeFirstWord(getValue((ruleObject.month[0]).toString(), cldrObj1), 'single') + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n    }\n    if (ruleObject.count) {\n        summary += ', ' + (ruleObject.count) + ' ' + localeObject.getConstant(TIMES);\n    }\n    else if (ruleObject.until) {\n        var tempDate = ruleObject.until;\n        summary += ', ' + localeObject.getConstant(UNTIL)\n            + ' ' + tempDate.getDate()\n            + ' ' + capitalizeFirstWord(getValue((tempDate.getMonth() + 1).toString(), cldrObj1), 'single')\n            + ' ' + tempDate.getFullYear();\n    }\n    return summary;\n}\nfunction getMonthSummary(ruleObject, cldrObj, localeObj) {\n    var summary = '';\n    if (ruleObject.monthDay.length) {\n        summary += ruleObject.monthDay[0];\n    }\n    else if (ruleObject.day) {\n        var pos = ruleObject.setPosition - 1;\n        summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : (WEEKPOS.length - 1)])\n            + ' ' + capitalizeFirstWord(getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj), 'single');\n    }\n    return summary;\n}\nexport function generate(startDate, rule, excludeDate, startDayOfWeek, maximumCount, viewDate, calendarMode, oldTimezone, newTimezone) {\n    if (maximumCount === void 0) { maximumCount = MAXOCCURRENCE; }\n    if (viewDate === void 0) { viewDate = null; }\n    if (calendarMode === void 0) { calendarMode = 'Gregorian'; }\n    if (oldTimezone === void 0) { oldTimezone = null; }\n    if (newTimezone === void 0) { newTimezone = null; }\n    var ruleObject = extractObjectFromRule(rule);\n    var cacheDate;\n    calendarUtil = getCalendarUtil(calendarMode);\n    var data = [];\n    var modifiedDate = new Date(startDate.getTime());\n    tempExcludeDate = [];\n    var tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(',');\n    var tz = new Timezone();\n    tempDate.forEach(function (content) {\n        var parsedDate = getDateFromRecurrenceDateString(content);\n        if (oldTimezone && newTimezone) {\n            parsedDate = tz.convert(new Date(parsedDate.getTime()), oldTimezone, newTimezone);\n        }\n        tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));\n    });\n    ruleObject.recExceptionCount = !isNullOrUndefined(ruleObject.count) ? tempExcludeDate.length : 0;\n    if (viewDate && viewDate > startDate && !ruleObject.count) {\n        tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));\n    }\n    else {\n        tempViewDate = null;\n    }\n    if (!ruleObject.until && tempViewDate) {\n        cacheDate = new Date(tempViewDate.getTime());\n        cacheDate.setDate(tempViewDate.getDate() + maximumCount * (ruleObject.interval));\n        ruleObject.until = cacheDate;\n    }\n    if (ruleObject.until && startDate > ruleObject.until) {\n        return data;\n    }\n    maxOccurrence = maximumCount;\n    setFirstDayOfWeek(DAYINDEX[startDayOfWeek]);\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            dailyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'WEEKLY':\n            weeklyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'MONTHLY':\n            monthlyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'YEARLY':\n            yearlyType(modifiedDate, ruleObject.until, data, ruleObject);\n    }\n    return data;\n}\nexport function getDateFromRecurrenceDateString(recDateString) {\n    return new Date(recDateString.substr(0, 4) +\n        '-' + recDateString.substr(4, 2) +\n        '-' + recDateString.substr(6, 5) +\n        ':' + recDateString.substr(11, 2) +\n        ':' + recDateString.substr(13));\n}\nfunction excludeDateHandler(data, date) {\n    var zeroIndex = new Date(date).setHours(0, 0, 0, 0);\n    if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {\n        data.push(date);\n    }\n}\nfunction getDateCount(startDate, ruleObject) {\n    var count = maxOccurrence;\n    if (ruleObject.count) {\n        count = ruleObject.count;\n    }\n    else if (ruleObject.until) {\n        if (ruleObject.freq === 'DAILY' || ruleObject.freq === 'WEEKLY') {\n            count = Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1;\n        }\n        else if (ruleObject.freq === 'MONTHLY' || ruleObject.freq === 'YEARLY') {\n            count = Math.floor(((ruleObject.until.getMonth() + 12 * ruleObject.until.getFullYear()) -\n                (startDate.getMonth() + 12 * startDate.getFullYear())) / ruleObject.interval) +\n                (ruleObject.day.length > 1 ? (Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1) : 1);\n            if (ruleObject.freq === 'YEARLY') {\n                count = ruleObject.month.length > 1 ? (count * ruleObject.month.length) : count;\n            }\n        }\n    }\n    return count;\n}\nfunction dailyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var expectedDays = ruleObject.day;\n    while (compareDates(tempDate, endDate)) {\n        state = true;\n        state = validateRules(tempDate, ruleObject);\n        if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {\n            excludeDateHandler(data, tempDate.getTime());\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n        }\n        tempDate.setDate(tempDate.getDate() + interval);\n    }\n}\nfunction weeklyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    if (!ruleObject.day.length) {\n        ruleObject.day.push(DAYINDEX[startDate.getDay()]);\n    }\n    var interval = ruleObject.interval;\n    var expectedDays = ruleObject.day;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var weekState = true;\n    var wkstIndex;\n    var weekCollection = [];\n    if (expectedDays.length > 1) {\n        if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === '') {\n            ruleObject.wkst = dayIndex[0];\n        }\n        wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);\n        while (compareDates(tempDate, endDate)) {\n            var startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;\n            startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;\n            var weekstartDate = addDays(tempDate, -startDateDiff);\n            var weekendDate = addDays(weekstartDate, 6);\n            var compareTempDate = new Date(tempDate.getTime());\n            resetTime(weekendDate);\n            resetTime(compareTempDate);\n            while (weekendDate >= compareTempDate) {\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    weekCollection.push([tempDate.getTime()]);\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    break;\n                }\n                tempDate.setDate(tempDate.getDate() + 1);\n                compareTempDate = new Date(tempDate.getTime());\n                resetTime(compareTempDate);\n            }\n            tempDate.setDate(tempDate.getDate() - 1);\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate((tempDate.getDate()) + 1 + ((interval - 1) * 7));\n            insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n            weekCollection = [];\n        }\n    }\n    else {\n        tempDate = getStartDateForWeek(startDate, ruleObject.day);\n        while (compareDates(tempDate, endDate)) {\n            weekState = validateRules(tempDate, ruleObject);\n            if (weekState && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1)) {\n                excludeDateHandler(data, tempDate.getTime());\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate(tempDate.getDate() + (interval * 7));\n        }\n        insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n        weekCollection = [];\n    }\n}\nfunction monthlyType(startDate, endDate, data, ruleObject) {\n    // Set monthday value if BYDAY, BYMONTH and Month day property is not set based on start date\n    if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n        if (ruleObject.freq === 'YEARLY') {\n            ruleObject.month.push(startDate.getMonth() + 1);\n        }\n    }\n    else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n    }\n    var ruleType = validateMonthlyRuleType(ruleObject);\n    switch (ruleType) {\n        case 'day':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDayTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n        case 'both':\n        case 'date':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDateTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n    }\n}\nfunction yearlyType(startDate, endDate, data, ruleObject) {\n    var typeValue = checkYearlyType(ruleObject);\n    switch (typeValue) {\n        case 'MONTH':\n            monthlyType(startDate, endDate, data, ruleObject);\n            break;\n        case 'WEEKNO':\n            processWeekNo(startDate, endDate, data, ruleObject);\n            break;\n        case 'YEARDAY':\n            processYearDay(startDate, endDate, data, ruleObject);\n            break;\n    }\n}\nfunction processWeekNo(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var startDay;\n    var firstWeekSpan;\n    var weekNos = ruleObject.weekNo;\n    var weekNo;\n    var maxDate;\n    var minDate;\n    var weekCollection = [];\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);\n        firstWeekSpan = (6 - startDay) + 1;\n        for (var index = 0; index < weekNos.length; index++) {\n            weekNo = weekNos[index];\n            weekNo = (weekNo > 0) ? weekNo : 53 + weekNo + 1;\n            maxDate = (weekNo === 1) ? firstWeekSpan : firstWeekSpan + ((weekNo - 1) * 7);\n            minDate = (weekNo === 1) ? firstWeekSpan - 7 : firstWeekSpan + ((weekNo - 2) * 7);\n            while (minDate < maxDate) {\n                tempDate = new Date(stDate.getTime() + (MS_PER_DAY * minDate));\n                if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                    }\n                    else {\n                        weekCollection.push([tempDate.getTime()]);\n                    }\n                }\n                minDate++;\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        weekCollection = [];\n    }\n}\nfunction processYearDay(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var dateCollection = [];\n    var date;\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        for (var index = 0; index < ruleObject.yearDay.length; index++) {\n            date = ruleObject.yearDay[index];\n            tempDate = new Date(stDate.getTime());\n            if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) &&\n                (!calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1))) {\n                tempDate.setDate(tempDate.getDate() + 1);\n                continue;\n            }\n            tempDate.setDate(tempDate.getDate() + ((date < 0) ?\n                calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));\n            if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                if (ruleObject.setPosition == null) {\n                    insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                }\n                else {\n                    dateCollection.push([tempDate.getTime()]);\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        dateCollection = [];\n    }\n}\nfunction checkYearlyType(ruleObject) {\n    if (ruleObject.yearDay.length) {\n        return 'YEARDAY';\n    }\n    else if (ruleObject.weekNo.length) {\n        return 'WEEKNO';\n    }\n    return 'MONTH';\n}\nfunction initializeRecRuleVariables(startDate, ruleObject) {\n    var ruleData = {\n        monthCollection: [],\n        index: 0,\n        tempDate: new Date(startDate.getTime()),\n        mainDate: new Date(startDate.getTime()),\n        expectedCount: getDateCount(startDate, ruleObject),\n        monthInit: 0,\n        dateCollection: [],\n    };\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());\n    }\n    return ruleData;\n}\nfunction monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {\n    if (ruleObject.month.length) {\n        monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    var currentMonthDate;\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    while (compareDates(ruleData.tempDate, endDate)) {\n        currentMonthDate = new Date(ruleData.tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) &&\n            (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) <= ruleData.expectedCount)) {\n            if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month))) {\n                processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);\n                ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n                ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n            }\n            else {\n                calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n                ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n                break;\n            }\n        }\n        ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(ruleData.tempDate)) {\n            calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n            ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);\n        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\nfunction monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    if (((ruleObject.freq === 'MONTHLY' && ruleObject.interval === 12) || (ruleObject.freq === 'YEARLY')) &&\n        calendarUtil.getMonthDaysCount(startDate) < ruleObject.monthDay[0]) {\n        return;\n    }\n    while (compareDates(ruleData.tempDate, endDate)) {\n        ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n// To process date collection for Monthly & Yearly based on BYMONTH Day property\nfunction processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {\n    for (var index = 0; index < ruleObject.monthDay.length; index++) {\n        recRuleVariables.date = ruleObject.monthDay[index];\n        recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);\n        var maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);\n        recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : (maxDate + recRuleVariables.date + 1);\n        if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate)\n            && (recRuleVariables.date > 0)) {\n            calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);\n            if (endDate && recRuleVariables.tempDate > endDate) {\n                return;\n            }\n            if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {\n                if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && (recRuleVariables.expectedCount\n                    && (data.length + ruleObject.recExceptionCount) < recRuleVariables.expectedCount)) {\n                    insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());\n                }\n                else {\n                    recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);\n                }\n            }\n        }\n    }\n}\nfunction setNextValidDate(tempDate, ruleObject, monthInit, beginDate, interval) {\n    if (beginDate === void 0) { beginDate = null; }\n    var monthData = beginDate ? beginDate.getMonth() : 0;\n    var startDate = calendarUtil.getMonthStartDate(tempDate);\n    interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;\n    tempDate.setFullYear(startDate.getFullYear());\n    tempDate.setMonth(startDate.getMonth());\n    tempDate.setDate(startDate.getDate());\n    if (ruleObject.month.length) {\n        monthInit++;\n        monthInit = monthInit % ruleObject.month.length;\n        calendarUtil.setMonth(tempDate, ruleObject.month[monthInit], 1);\n        if (monthInit === 0) {\n            calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);\n        }\n    }\n    else {\n        if (beginDate && (beginDate.getFullYear() < tempDate.getFullYear())) {\n            monthData = tempDate.getMonth() - 1;\n        }\n        calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);\n    }\n    return monthInit;\n}\n// To get month collection when BYDAY property having more than one value in list.\nfunction getMonthCollection(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var tempDate = new Date(startDate.getTime());\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var monthCollection = [];\n    var dateCollection = [];\n    var dates = [];\n    var index;\n    var state;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var monthInit = 0;\n    var beginDate;\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)\n        && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        var currentMonthDate = new Date(tempDate.getTime());\n        var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n        if (isHavingNumber.indexOf(true) > -1) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                var expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n                var position = parseInt(expectedDaysArray[0], 10);\n                tempDate = new Date(tempDate.getTime());\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, expectedDays);\n                currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {\n                    if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {\n                        monthCollection.push([currentMonthDate.getTime()]);\n                    }\n                    currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                }\n                currentMonthDate.setDate(currentMonthDate.getDate() - (1));\n                if (expectedDaysArray[0].indexOf('-') > -1) {\n                    index = monthCollection.length - (-1 * position);\n                }\n                else {\n                    index = position - 1;\n                }\n                index = isNaN(index) ? 0 : index;\n                if (monthCollection.length > 0) {\n                    (isNullOrUndefined(ruleObject.setPosition)) ?\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) :\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, dates))];\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n                monthCollection = [];\n            }\n            if (!isNullOrUndefined(ruleObject.setPosition)) {\n                insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n                dates = [];\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n        else {\n            var weekCollection = [];\n            var dayCycleData = processWeekDays(expectedDays);\n            currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n            var initialDate = new Date(tempDate.getTime());\n            beginDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameMonth(initialDate, tempDate)) {\n                weekCollection.push(tempDate.getTime());\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    monthCollection.push(weekCollection);\n                    weekCollection = [];\n                }\n                tempDate.setDate(tempDate.getDate()\n                    + dayCycleData[DAYINDEX[tempDate.getDay()]]);\n            }\n            index = ((ruleObject.setPosition < 1) ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n            if (isNullOrUndefined(ruleObject.setPosition)) {\n                index = 0;\n                var datas = [];\n                for (var week = 0; week < monthCollection.length; week++) {\n                    for (var row = 0; row < monthCollection[week].length; row++) {\n                        datas.push(monthCollection[week][row]);\n                    }\n                }\n                monthCollection = [datas];\n            }\n            if (monthCollection.length > 0) {\n                insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                return;\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n    }\n}\n// To process monday day type for FREQ=MONTHLY\nfunction monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    // When BYDAY property having more than 1 value.\n    if (expectedDays.length > 1) {\n        getMonthCollection(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var monthCollection = [];\n    var beginDate;\n    var monthInit = 0;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate) && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        beginDate = new Date(tempDate.getTime());\n        var currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {\n            monthCollection.push([currentMonthDate.getTime()]);\n            currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n        }\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n// To process monday day type for FREQ=YEARLY\nfunction monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n    // If BYDAY property having more than 1 value in list\n    if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {\n        processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);\n        return;\n    }\n    else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {\n        monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var currentMonthDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n    }\n    // Set the date as start date of the yeear if yearly freq having ByDay property alone\n    if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {\n        tempDate.setFullYear(startDate.getFullYear(), 0, 1);\n    }\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n            (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n            currentMonthDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                    && !calendarUtil.checkMonth(tempDate, ruleObject.month))) {\n                    if (expectedDays.length > 1) {\n                        if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                    }\n                    else {\n                        // If BYDAY property having 1 value in list\n                        if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        var newstr = getDayString(expectedDays[0]);\n                        if (DAYINDEX[currentMonthDate.getDay()] === newstr\n                            && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0)\n                                > new Date(startDate.getFullYear())) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n                    }\n                }\n                else {\n                    calendarUtil.setValidDate(tempDate, 1, 1);\n                    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    break;\n                }\n            }\n        }\n        tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        }\n        tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n// To process the recurrence rule when BYDAY property having values with integer\nfunction processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    var dateCollection = [];\n    var index;\n    var state;\n    var monthInit = 0;\n    var currentMonthDate;\n    var currentDate;\n    var beginDate;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var datas = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        for (var i = 0; i <= ruleObject.month.length; i++) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                monthCollection = [];\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n                    (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n                    while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                        currentMonthDate = new Date(tempDate.getTime());\n                        if (ruleObject.month.length === 0 ||\n                            (ruleObject.month.length > 0 && ruleObject.month[i] === calendarUtil.getMonth(currentMonthDate))) {\n                            var expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n                            var position = parseInt(expectedDaysArray[0], 10);\n                            currentDate = new Date(tempDate.getTime());\n                            while (calendarUtil.isSameYear(currentDate, tempDate)\n                                && calendarUtil.isSameMonth(currentDate, tempDate)) {\n                                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {\n                                    monthCollection.push([currentDate.getTime()]);\n                                }\n                                currentDate.setDate(currentDate.getDate() + (1));\n                            }\n                            currentDate.setDate(currentDate.getDate() - (1));\n                            if (expectedDaysArray[0].indexOf('-') > -1) {\n                                index = monthCollection.length - (-1 * position);\n                            }\n                            else {\n                                index = position - 1;\n                            }\n                            index = isNaN(index) ? 0 : index;\n                        }\n                        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);\n                        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    }\n                }\n                tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());\n                if (monthCollection.length > 0) {\n                    (isNullOrUndefined(ruleObject.setPosition)) ?\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) :\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n            datas = [];\n        }\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        }\n        else {\n            tempDate.setFullYear(tempDate.getFullYear() + interval);\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        if (ruleObject.month.length) {\n            calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n        }\n    }\n}\n// To get recurrence collection if BYSETPOS is null\nfunction getRecurrenceCollection(monthCollection, expectedDays) {\n    var index;\n    var recurrenceCollectionObject = {\n        monthCollection: [],\n        index: 0,\n    };\n    if (expectedDays.length === 1) {\n        // To split numeric value from BYDAY property value\n        var expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);\n        var arrPosition = void 0;\n        if (expectedDaysArrays.length > 1) {\n            arrPosition = parseInt(expectedDaysArrays[0], 10);\n            index = ((arrPosition < 1) ? (monthCollection.length + arrPosition) : arrPosition - 1);\n        }\n        else {\n            index = 0;\n            monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n        }\n    }\n    else {\n        index = 0;\n        monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n    }\n    recurrenceCollectionObject.monthCollection = monthCollection;\n    recurrenceCollectionObject.index = index;\n    return recurrenceCollectionObject;\n}\nfunction insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {\n    var index = ((ruleObject.setPosition < 1) ?\n        (dateCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n    if (isNullOrUndefined(ruleObject.setPosition)) {\n        index = 0;\n        dateCollection = getDateCollectionforBySetPosNull(dateCollection);\n    }\n    if (dateCollection.length > 0) {\n        insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);\n    }\n}\n// To process month collection if BYSETPOS is null\nfunction getDateCollectionforBySetPosNull(monthCollection) {\n    var datas = [];\n    for (var week = 0; week < monthCollection.length; week++) {\n        for (var row = 0; row < monthCollection[week].length; row++) {\n            datas.push(new Date(monthCollection[week][row]).getTime());\n        }\n    }\n    monthCollection = datas.length > 0 ? [datas] : [];\n    return monthCollection;\n}\n// To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\nfunction insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var index;\n    var state;\n    var datas = [];\n    var dateCollection = [];\n    var recurrenceCollections;\n    recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);\n    monthCollection = recurrenceCollections.monthCollection;\n    index = recurrenceCollections.index;\n    if (ruleObject.setPosition != null) {\n        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n    }\n    else {\n        if (monthCollection.length > 0) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n        }\n    }\n    datas = [];\n}\n// To filter date collection when BYDAY property having values with number\nfunction filterDateCollectionByIndex(monthCollection, index, datas) {\n    for (var week = 0; week < monthCollection[index].length; week++) {\n        datas.push(monthCollection[index][week]);\n    }\n    return datas;\n}\n// To insert processed date collection in final array element\nfunction insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var chDate = new Date(dayData);\n    state = validateRules(chDate, ruleObject);\n    if ((chDate >= startDate) && compareDates(chDate, endDate) && state\n        && expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount) {\n        excludeDateHandler(data, dayData);\n    }\n}\n/**\n * Return the last week number of given month and year.\n *\n * @param {number} Year Accepts the Year in number format\n * @param {number} startDayOfWeek Accepts the start date\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {number} week Accepts the week in number format\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction weekCount(year, startDayOfWeek, monthCollection, week, ruleObject) {\n    var firstDayOfWeek = startDayOfWeek || 0;\n    var firstOfMonth = new Date(year, ruleObject.month[0] - 1, 1);\n    var lastOfMonth = new Date(year, ruleObject.month[0] - 1, 0);\n    var numberOfDaysInMonth = lastOfMonth.getDate();\n    var firstWeekDay = (firstOfMonth.getDay() - firstDayOfWeek + 7) % 7;\n    var used = firstWeekDay + numberOfDaysInMonth;\n    var count = Math.ceil(used / 7) - 1;\n    var dayData = monthCollection[week][count];\n    var chDate = new Date(dayData);\n    var state = validateRules(chDate, ruleObject);\n    return (state) ? count : count - 1;\n}\n/**\n * To process date collection based on Byset position after process the collection based on BYDAY property value index: EX:BYDAY=1SUm-1SU\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {\n    if (monthCollection.length > 0) {\n        for (var week = 0; week < monthCollection.length; week++) {\n            monthCollection[week].sort();\n            var expectedDays = ruleObject.day;\n            var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n            var weekIndex = (ruleObject.freq === 'YEARLY' && (ruleObject.validRules.indexOf('BYMONTH') > -1) &&\n                !(isHavingNumber.indexOf(true) > -1)) ?\n                weekCount(new Date(monthCollection[0][0]).getFullYear(), 0, monthCollection, week, ruleObject)\n                : (monthCollection[week].length + ruleObject.setPosition);\n            var index = ((ruleObject.setPosition < 1) ? weekIndex : ruleObject.setPosition - 1);\n            var dayData = monthCollection[week][index];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n// To insert datas into existing collection which is processed from previous loop.\nfunction insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {\n    if (monthCollection.length > 0) {\n        index = !isNullOrUndefined(index) ? index :\n            ((ruleObject.setPosition < 1)\n                ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n        monthCollection[index].sort();\n        for (var week = 0; week < monthCollection[index].length; week++) {\n            var dayData = monthCollection[index][week];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\nfunction compareDates(startDate, endDate) {\n    return endDate ? (startDate <= endDate) : true;\n}\nfunction getDayString(expectedDays) {\n    // To get BYDAY value without numeric value\n    var newstr = expectedDays.replace(REMOVENUMBERINSTRING, '');\n    return newstr;\n}\nfunction checkDayIndex(day, expectedDays) {\n    var sortedExpectedDays = [];\n    expectedDays.forEach(function (element) {\n        var expectedDaysNumberSplit = element.match(SPLITNUMBERANDSTRING);\n        if (expectedDaysNumberSplit.length === 2) {\n            sortedExpectedDays.push(expectedDaysNumberSplit[1]);\n        }\n        else {\n            sortedExpectedDays.push(expectedDaysNumberSplit[0]);\n        }\n    });\n    return (sortedExpectedDays.indexOf(DAYINDEX[day]) === -1);\n}\nfunction getStartDateForWeek(startDate, expectedDays) {\n    var tempDate = new Date(startDate.getTime());\n    var newstr;\n    if (expectedDays.length > 0) {\n        var expectedDaysArr = [];\n        for (var i = 0; i <= expectedDays.length - 1; i++) {\n            newstr = getDayString(expectedDays[i]);\n            expectedDaysArr.push(newstr);\n        }\n        if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {\n            do {\n                tempDate.setDate(tempDate.getDate() + 1);\n            } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);\n        }\n    }\n    return tempDate;\n}\nexport function extractObjectFromRule(rules) {\n    var ruleObject = {\n        freq: null,\n        interval: 1,\n        count: null,\n        until: null,\n        day: [],\n        wkst: null,\n        month: [],\n        weekNo: [],\n        monthDay: [],\n        yearDay: [],\n        setPosition: null,\n        validRules: []\n    };\n    var rulesList = rules.split(';');\n    var splitData = [];\n    var temp;\n    rulesList.forEach(function (data) {\n        splitData = data.split('=');\n        switch (splitData[0]) {\n            case 'UNTIL':\n                temp = splitData[1];\n                ruleObject.until = getDateFromRecurrenceDateString(temp);\n                break;\n            case 'BYDAY':\n                ruleObject.day = splitData[1].split(',');\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTHDAY':\n                ruleObject.monthDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTH':\n                ruleObject.month = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYYEARDAY':\n                ruleObject.yearDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYWEEKNO':\n                ruleObject.weekNo = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'INTERVAL':\n                ruleObject.interval = parseInt(splitData[1], 10);\n                break;\n            case 'COUNT':\n                ruleObject.count = parseInt(splitData[1], 10);\n                break;\n            case 'BYSETPOS':\n                ruleObject.setPosition = parseInt(splitData[1], 10) > 4 ? -1 : parseInt(splitData[1], 10);\n                break;\n            case 'FREQ':\n                ruleObject.freq = splitData[1];\n                break;\n            case 'WKST':\n                ruleObject.wkst = splitData[1];\n                break;\n        }\n    });\n    if ((ruleObject.freq === 'MONTHLY') && (ruleObject.monthDay.length === 0)) {\n        var index = ruleObject.validRules.indexOf('BYDAY');\n        ruleObject.validRules.splice(index, 1);\n    }\n    return ruleObject;\n}\nfunction validateProperDate(tempDate, data, startDate) {\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    return (data <= maxDate) && (tempDate >= startDate);\n}\nfunction processWeekDays(expectedDays) {\n    var dayCycle = {};\n    expectedDays.forEach(function (element, index) {\n        if (index === expectedDays.length - 1) {\n            var startIndex = dayIndex.indexOf(element);\n            var temp = startIndex;\n            while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {\n                temp++;\n            }\n            dayCycle[element] = temp - startIndex;\n        }\n        else {\n            dayCycle[element] = dayIndex.indexOf(expectedDays[(index + 1)]) - dayIndex.indexOf(element);\n        }\n    });\n    return dayCycle;\n}\nfunction checkDate(tempDate, expectedDate) {\n    var temp = expectedDate.slice(0);\n    var data;\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + maxDate + 1;\n        }\n        if (data === tempDate.getDate()) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\nfunction checkYear(tempDate, expectedyearDay) {\n    var temp = expectedyearDay.slice(0);\n    var data;\n    var yearDay = getYearDay(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;\n        }\n        if (data === yearDay) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\nfunction getYearDay(currentDate) {\n    if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {\n        startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);\n    }\n    var tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];\n    var diff = currentDate.getTime() - tempDate.getTime();\n    return Math.ceil(diff / MS_PER_DAY);\n}\nfunction validateMonthlyRuleType(ruleObject) {\n    if (ruleObject.monthDay.length && !ruleObject.day.length) {\n        return 'date';\n    }\n    else if (!ruleObject.monthDay.length && ruleObject.day.length) {\n        return 'day';\n    }\n    return 'both';\n}\nfunction rotate(days) {\n    var data = days.shift();\n    days.push(data);\n}\nfunction setFirstDayOfWeek(day) {\n    while (dayIndex[0] !== day) {\n        rotate(dayIndex);\n    }\n}\nfunction validateRules(tempDate, ruleObject) {\n    var state = true;\n    var expectedDays = ruleObject.day;\n    var expectedMonth = ruleObject.month;\n    var expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);\n    var expectedyearDay = ruleObject.yearDay;\n    ruleObject.validRules.forEach(function (rule) {\n        switch (rule) {\n            case 'BYDAY':\n                if (checkDayIndex(tempDate.getDay(), expectedDays)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTH':\n                if (calendarUtil.checkMonth(tempDate, expectedMonth)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTHDAY':\n                if (checkDate(tempDate, expectedDate)) {\n                    state = false;\n                }\n                break;\n            case 'BYYEARDAY':\n                if (checkYear(tempDate, expectedyearDay)) {\n                    state = false;\n                }\n                break;\n        }\n    });\n    return state;\n}\nexport function getCalendarUtil(calendarMode) {\n    if (calendarMode === 'Islamic') {\n        return new Islamic();\n    }\n    return new Gregorian();\n}\nvar startDateCollection = {};\nvar tempExcludeDate;\nvar dayIndex = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar maxOccurrence;\nvar tempViewDate;\nvar calendarUtil;\nvar DAYINDEX = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar MAXOCCURRENCE = 43;\nvar WEEKPOS = ['first', 'second', 'third', 'fourth', 'last'];\nvar TIMES = 'summaryTimes';\nvar ON = 'summaryOn';\nvar EVERY = 'every';\nvar UNTIL = 'summaryUntil';\nvar DAYS = 'summaryDay';\nvar WEEKS = 'summaryWeek';\nvar MONTHS = 'summaryMonth';\nvar YEARS = 'summaryYear';\nvar DAYINDEXOBJECT = {\n    SU: 'sun',\n    MO: 'mon',\n    TU: 'tue',\n    WE: 'wed',\n    TH: 'thu',\n    FR: 'fri',\n    SA: 'sat'\n};\n// To check string has number\nvar HASNUMBER = /\\d/;\n// To find the numbers in string\nvar REMOVENUMBERINSTRING = /[^A-Z]+/;\n// To split number and string\nvar SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;\nexport function getRecurrenceStringFromDate(date) {\n    return [date.getUTCFullYear(),\n        roundDateValues(date.getUTCMonth() + 1),\n        roundDateValues(date.getUTCDate()),\n        'T',\n        roundDateValues(date.getUTCHours()),\n        roundDateValues(date.getUTCMinutes()),\n        roundDateValues(date.getUTCSeconds()),\n        'Z'].join('');\n}\nfunction roundDateValues(date) {\n    return ('0' + date).slice(-2);\n}\n","/**\n * Constants\n */\n/** @hidden */\nexport var cellClick = 'cellClick';\n/** @hidden */\nexport var cellDoubleClick = 'cellDoubleClick';\n/** @hidden */\nexport var moreEventsClick = 'moreEventsClick';\n/** @hidden */\nexport var select = 'select';\n/** @hidden */\nexport var hover = 'hover';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var navigating = 'navigating';\n/** @hidden */\nexport var renderCell = 'renderCell';\n/** @hidden */\nexport var eventClick = 'eventClick';\n/** @hidden */\nexport var eventRendered = 'eventRendered';\n/** @hidden */\nexport var dataBinding = 'dataBinding';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var popupOpen = 'popupOpen';\n/** @hidden */\nexport var popupClose = 'popupClose';\n/** @hidden */\nexport var dragStart = 'dragStart';\n/** @hidden */\nexport var drag = 'drag';\n/** @hidden */\nexport var dragStop = 'dragStop';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var resizing = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var inlineClick = 'inlineClick';\n/**\n * Specifies schedule internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var eventsLoaded = 'events-loaded';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var virtualScroll = 'virtual-scroll';\n/** @hidden */\nexport var scrollUiUpdate = 'scroll-ui-update';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var documentClick = 'document-click';\n/** @hidden */\nexport var cellMouseDown = 'cell-mouse-down';\n","/**\n * CSS Constants\n */\n/** @hidden */\nexport var ROOT = 'e-schedule';\n/** @hidden */\nexport var RTL = 'e-rtl';\n/** @hidden */\nexport var DEVICE_CLASS = 'e-device';\n/** @hidden */\nexport var ICON = 'e-icons';\n/** @hidden */\nexport var ENABLE_CLASS = 'e-enable';\n/** @hidden */\nexport var DISABLE_CLASS = 'e-disable';\n/** @hidden */\nexport var TABLE_CONTAINER_CLASS = 'e-table-container';\n/** @hidden */\nexport var SCHEDULE_TABLE_CLASS = 'e-schedule-table';\n/** @hidden */\nexport var ALLDAY_CELLS_CLASS = 'e-all-day-cells';\n/** @hidden */\nexport var HEADER_POPUP_CLASS = 'e-header-popup';\n/** @hidden */\nexport var HEADER_CALENDAR_CLASS = 'e-header-calendar';\n/** @hidden */\nexport var ALLDAY_ROW_CLASS = 'e-all-day-row';\n/** @hidden */\nexport var CONTENT_TABLE_CLASS = 'e-content-table';\n/** @hidden */\nexport var WORK_CELLS_CLASS = 'e-work-cells';\n/** @hidden */\nexport var WORK_HOURS_CLASS = 'e-work-hours';\n/** @hidden */\nexport var POPUP_OPEN = 'e-popup-open';\n/** @hidden */\nexport var POPUP_CLOSE = 'e-popup-close';\n/** @hidden */\nexport var DATE_HEADER_WRAP_CLASS = 'e-date-header-wrap';\n/** @hidden */\nexport var DATE_HEADER_CONTAINER_CLASS = 'e-date-header-container';\n/** @hidden */\nexport var HEADER_CELLS_CLASS = 'e-header-cells';\n/** @hidden */\nexport var WORKDAY_CLASS = 'e-work-days';\n/** @hidden */\nexport var OTHERMONTH_CLASS = 'e-other-month';\n/** @hidden */\nexport var CURRENT_DAY_CLASS = 'e-current-day';\n/** @hidden */\nexport var CURRENTDATE_CLASS = 'e-current-date';\n/** @hidden */\nexport var CURRENT_PANEL_CLASS = 'e-current-panel';\n/** @hidden */\nexport var PREVIOUS_PANEL_CLASS = 'e-previous-panel';\n/** @hidden */\nexport var NEXT_PANEL_CLASS = 'e-next-panel';\n/** @hidden */\nexport var PREVIOUS_DATE_CLASS = 'e-prev';\n/** @hidden */\nexport var NEXT_DATE_CLASS = 'e-next';\n/** @hidden */\nexport var TRANSLATE_CLASS = 'e-translate';\n/** @hidden */\nexport var LEFT_INDENT_CLASS = 'e-left-indent';\n/** @hidden */\nexport var LEFT_INDENT_WRAP_CLASS = 'e-left-indent-wrap';\n/** @hidden */\nexport var EVENT_TABLE_CLASS = 'e-event-table';\n/** @hidden */\nexport var RESOURCE_LEFT_TD_CLASS = 'e-resource-left-td';\n/** @hidden */\nexport var RESOURCE_GROUP_CELLS_CLASS = 'e-resource-group-cells';\n/** @hidden */\nexport var RESOURCE_TEXT_CLASS = 'e-resource-text';\n/** @hidden */\nexport var RESOURCE_COLUMN_WRAP_CLASS = 'e-resource-column-wrap';\n/** @hidden */\nexport var RESOURCE_COLUMN_TABLE_CLASS = 'e-resource-column-table';\n/** @hidden */\nexport var RESOURCE_CHILD_CLASS = 'e-child-node';\n/** @hidden */\nexport var RESOURCE_PARENT_CLASS = 'e-parent-node';\n/** @hidden */\nexport var RESOURCE_EXPAND_CLASS = 'e-resource-expand';\n/** @hidden */\nexport var RESOURCE_COLLAPSE_CLASS = 'e-resource-collapse';\n/** @hidden */\nexport var RESOURCE_TREE_ICON_CLASS = 'e-resource-tree-icon';\n/** @hidden */\nexport var RESOURCE_CELLS_CLASS = 'e-resource-cells';\n/** @hidden */\nexport var TIME_CELLS_WRAP_CLASS = 'e-time-cells-wrap';\n/** @hidden */\nexport var TIME_CELLS_CLASS = 'e-time-cells';\n/** @hidden */\nexport var TIME_SLOT_CLASS = 'e-time-slots';\n/** @hidden */\nexport var ALTERNATE_CELLS_CLASS = 'e-alternate-cells';\n/** @hidden */\nexport var CURRENT_TIME_CLASS = 'e-current-time';\n/** @hidden */\nexport var CURRENT_TIMELINE_CLASS = 'e-current-timeline';\n/** @hidden */\nexport var PREVIOUS_TIMELINE_CLASS = 'e-previous-timeline';\n/** @hidden */\nexport var HIDE_CHILDS_CLASS = 'e-hide-childs';\n/** @hidden */\nexport var SCROLL_CONTAINER_CLASS = 'e-scroll-container';\n/** @hidden */\nexport var WRAPPER_CLASS = 'e-wrapper';\n/** @hidden */\nexport var TIMELINE_WRAPPER_CLASS = 'e-timeline-wrapper';\n/** @hidden */\nexport var APPOINTMENT_WRAPPER_CLASS = 'e-appointment-wrapper';\n/** @hidden */\nexport var DAY_WRAPPER_CLASS = 'e-day-wrapper';\n/** @hidden */\nexport var TOOLBAR_CONTAINER = 'e-schedule-toolbar-container';\n/** @hidden */\nexport var RESOURCE_TOOLBAR_CONTAINER = 'e-schedule-resource-toolbar-container';\n/** @hidden */\nexport var HEADER_TOOLBAR = 'e-schedule-toolbar';\n/** @hidden */\nexport var RESOURCE_HEADER_TOOLBAR = 'e-schedule-resource-toolbar';\n/** @hidden */\nexport var SELECTED_CELL_CLASS = 'e-selected-cell';\n/** @hidden */\nexport var WEEK_NUMBER_WRAPPER_CLASS = 'e-week-number-wrapper';\n/** @hidden */\nexport var WEEK_NUMBER_CLASS = 'e-week-number';\n/** @hidden */\nexport var APPOINTMENT_WRAP_CLASS = 'e-appointment-wrap';\n/** @hidden */\nexport var WRAPPER_CONTAINER_CLASS = 'e-wrapper-container';\n/** @hidden */\nexport var APPOINTMENT_CONTAINER_CLASS = 'e-appointment-container';\n/** @hidden */\nexport var APPOINTMENT_CLASS = 'e-appointment';\n/** @hidden */\nexport var BLOCK_APPOINTMENT_CLASS = 'e-block-appointment';\n/** @hidden */\nexport var BLOCK_INDICATOR_CLASS = 'e-block-indicator';\n/** @hidden */\nexport var APPOINTMENT_BORDER = 'e-appointment-border';\n/** @hidden */\nexport var APPOINTMENT_DETAILS = 'e-appointment-details';\n/** @hidden */\nexport var SUBJECT_WRAP = 'e-subject-wrap';\n/** @hidden */\nexport var RESOURCE_NAME = 'e-resource-name';\n/** @hidden */\nexport var APPOINTMENT_TIME = 'e-time';\n/** @hidden */\nexport var TABLE_WRAP_CLASS = 'e-table-wrap';\n/** @hidden */\nexport var OUTER_TABLE_CLASS = 'e-outer-table';\n/** @hidden */\nexport var CONTENT_WRAP_CLASS = 'e-content-wrap';\n/** @hidden */\nexport var VIRTUAL_TRACK_CLASS = 'e-virtual-track';\n/** @hidden */\nexport var AGENDA_CELLS_CLASS = 'e-agenda-cells';\n/** @hidden */\nexport var AGENDA_CURRENT_DAY_CLASS = 'e-current-day';\n/** @hidden */\nexport var AGENDA_SELECTED_CELL = 'e-active-appointment-agenda';\n/** @hidden */\nexport var MONTH_HEADER_CLASS = 'e-month-header';\n/** @hidden */\nexport var AGENDA_HEADER_CLASS = 'e-day-date-header';\n/** @hidden */\nexport var AGENDA_RESOURCE_CLASS = 'e-resource-column';\n/** @hidden */\nexport var AGENDA_DATE_CLASS = 'e-date-column';\n/** @hidden */\nexport var NAVIGATE_CLASS = 'e-navigate';\n/** @hidden */\nexport var DATE_HEADER_CLASS = 'e-date-header';\n/** @hidden */\nexport var AGENDA_DAY_BORDER_CLASS = 'e-day-border';\n/** @hidden */\nexport var DATE_BORDER_CLASS = 'e-date-border';\n/** @hidden */\nexport var AGENDA_DAY_PADDING_CLASS = 'e-day-padding';\n/** @hidden */\nexport var DATE_TIME_CLASS = 'e-date-time';\n/** @hidden */\nexport var DATE_TIME_WRAPPER_CLASS = 'e-date-time-wrapper';\n/** @hidden */\nexport var AGENDA_EMPTY_EVENT_CLASS = 'e-empty-event';\n/** @hidden */\nexport var AGENDA_NO_EVENT_CLASS = 'e-no-event';\n/** @hidden */\nexport var APPOINTMENT_INDICATOR_CLASS = 'e-appointment-indicator';\n/** @hidden */\nexport var EVENT_INDICATOR_CLASS = 'e-indicator';\n/** @hidden */\nexport var EVENT_ICON_UP_CLASS = 'e-up-icon';\n/** @hidden */\nexport var EVENT_ICON_DOWN_CLASS = 'e-down-icon';\n/** @hidden */\nexport var EVENT_ICON_LEFT_CLASS = 'e-left-icon';\n/** @hidden */\nexport var EVENT_ICON_RIGHT_CLASS = 'e-right-icon';\n/** @hidden */\nexport var EVENT_ACTION_CLASS = 'e-event-action';\n/** @hidden */\nexport var NEW_EVENT_CLASS = 'e-new-event';\n/** @hidden */\nexport var CLONE_ELEMENT_CLASS = 'e-schedule-event-clone';\n/** @hidden */\nexport var MONTH_CLONE_ELEMENT_CLASS = 'e-month-event';\n/** @hidden */\nexport var CLONE_TIME_INDICATOR_CLASS = 'e-clone-time-indicator';\n/** @hidden */\nexport var DRAG_CLONE_CLASS = 'e-drag-clone';\n/** @hidden */\nexport var EVENT_RESIZE_CLASS = 'e-event-resize';\n/** @hidden */\nexport var RESIZE_CLONE_CLASS = 'e-resize-clone';\n/** @hidden */\nexport var LEFT_RESIZE_HANDLER = 'e-left-handler';\n/** @hidden */\nexport var RIGHT_RESIZE_HANDLER = 'e-right-handler';\n/** @hidden */\nexport var TOP_RESIZE_HANDLER = 'e-top-handler';\n/** @hidden */\nexport var BOTTOM_RESIZE_HANDLER = 'e-bottom-handler';\n/** @hidden */\nexport var EVENT_RECURRENCE_ICON_CLASS = 'e-recurrence-icon';\n/** @hidden */\nexport var EVENT_RECURRENCE_EDIT_ICON_CLASS = 'e-recurrence-edit-icon';\n/** @hidden */\nexport var HEADER_ROW_CLASS = 'e-header-row';\n/** @hidden */\nexport var ALLDAY_APPOINTMENT_WRAPPER_CLASS = 'e-all-day-appointment-wrapper';\n/** @hidden */\nexport var ALLDAY_APPOINTMENT_CLASS = 'e-all-day-appointment';\n/** @hidden */\nexport var EVENT_COUNT_CLASS = 'e-appointment-hide';\n/** @hidden */\nexport var ROW_COUNT_WRAPPER_CLASS = 'e-row-count-wrapper';\n/** @hidden */\nexport var ALLDAY_APPOINTMENT_SECTION_CLASS = 'e-all-day-appointment-section';\n/** @hidden */\nexport var APPOINTMENT_ROW_EXPAND_CLASS = 'e-appointment-expand';\n/** @hidden */\nexport var APPOINTMENT_ROW_COLLAPSE_CLASS = 'e-appointment-collapse';\n/** @hidden */\nexport var MORE_INDICATOR_CLASS = 'e-more-indicator';\n/** @hidden */\nexport var CELL_POPUP_CLASS = 'e-cell-popup';\n/** @hidden */\nexport var EVENT_POPUP_CLASS = 'e-event-popup';\n/** @hidden */\nexport var MULTIPLE_EVENT_POPUP_CLASS = 'e-multiple-event-popup';\n/** @hidden */\nexport var POPUP_HEADER_CLASS = 'e-popup-header';\n/** @hidden */\nexport var POPUP_HEADER_ICON_WRAPPER = 'e-header-icon-wrapper';\n/** @hidden */\nexport var POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @hidden */\nexport var POPUP_FOOTER_CLASS = 'e-popup-footer';\n/** @hidden */\nexport var DATE_TIME_DETAILS_CLASS = 'e-date-time-details';\n/** @hidden */\nexport var RECURRENCE_SUMMARY_CLASS = 'e-recurrence-summary';\n/** @hidden */\nexport var QUICK_POPUP_EVENT_DETAILS_CLASS = 'e-event-details';\n/** @hidden */\nexport var EVENT_CREATE_CLASS = 'e-event-create';\n/** @hidden */\nexport var EDIT_EVENT_CLASS = 'e-event-edit';\n/** @hidden */\nexport var DELETE_EVENT_CLASS = 'e-event-delete';\n/** @hidden */\nexport var TEXT_ELLIPSIS = 'e-text-ellipsis';\n/** @hidden */\nexport var MORE_POPUP_WRAPPER_CLASS = 'e-more-popup-wrapper';\n/** @hidden */\nexport var MORE_EVENT_POPUP_CLASS = 'e-more-event-popup';\n/** @hidden */\nexport var MORE_EVENT_HEADER_CLASS = 'e-more-event-header';\n/** @hidden */\nexport var MORE_EVENT_DATE_HEADER_CLASS = 'e-more-event-date-header';\n/** @hidden */\nexport var MORE_EVENT_HEADER_DAY_CLASS = 'e-header-day';\n/** @hidden */\nexport var MORE_EVENT_HEADER_DATE_CLASS = 'e-header-date';\n/** @hidden */\nexport var MORE_EVENT_CLOSE_CLASS = 'e-more-event-close';\n/** @hidden */\nexport var MORE_EVENT_CONTENT_CLASS = 'e-more-event-content';\n/** @hidden */\nexport var MORE_EVENT_WRAPPER_CLASS = 'e-more-appointment-wrapper';\n/** @hidden */\nexport var QUICK_DIALOG_CLASS = 'e-quick-dialog';\n/** @hidden */\nexport var QUICK_DIALOG_OCCURRENCE_CLASS = 'e-quick-dialog-occurrence-event';\n/** @hidden */\nexport var QUICK_DIALOG_SERIES_CLASS = 'e-quick-dialog-series-event';\n/** @hidden */\nexport var QUICK_DIALOG_FOLLOWING_EVENTS_CLASS = 'e-quick-dialog-following-events';\n/** @hidden */\nexport var FOLLOWING_EVENTS_DIALOG = 'e-following-events-dialog';\n/** @hidden */\nexport var QUICK_DIALOG_DELETE_CLASS = 'e-quick-dialog-delete';\n/** @hidden */\nexport var QUICK_DIALOG_CANCEL_CLASS = 'e-quick-dialog-cancel';\n/** @hidden */\nexport var QUICK_DIALOG_ALERT_OK = 'e-quick-alertok';\n/** @hidden */\nexport var QUICK_DIALOG_ALERT_CANCEL = 'e-quick-alertcancel';\n/** @hidden */\nexport var QUICK_DIALOG_ALERT_FOLLOWING = 'e-quick-alertfollowing';\n/** @hidden */\nexport var QUICK_DIALOG_ALERT_BTN_CLASS = 'e-quick-dialog-alert-btn';\n/** @hidden */\nexport var EVENT_WINDOW_DIALOG_CLASS = 'e-schedule-dialog';\n/** @hidden */\nexport var FORM_CONTAINER_CLASS = 'e-form-container';\n/** @hidden */\nexport var FORM_CLASS = 'e-schedule-form';\n/** @hidden */\nexport var EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = 'e-all-day-time-zone-row';\n/** @hidden */\nexport var EVENT_WINDOW_ALL_DAY_CLASS = 'e-all-day';\n/** @hidden */\nexport var TIME_ZONE_CLASS = 'e-time-zone';\n/** @hidden */\nexport var TIME_ZONE_ICON_CLASS = 'e-time-zone-icon';\n/** @hidden */\nexport var TIME_ZONE_DETAILS_CLASS = 'e-time-zone-details';\n/** @hidden */\nexport var EVENT_WINDOW_REPEAT_DIV_CLASS = 'e-repeat-parent-row';\n/** @hidden */\nexport var EVENT_WINDOW_REPEAT_CLASS = 'e-repeat';\n/** @hidden */\nexport var EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = 'e-title-location-row';\n/** @hidden */\nexport var SUBJECT_CLASS = 'e-subject';\n/** @hidden */\nexport var LOCATION_CLASS = 'e-location';\n/** @hidden */\nexport var LOCATION_ICON_CLASS = 'e-location-icon';\n/** @hidden */\nexport var LOCATION_DETAILS_CLASS = 'e-location-details';\n/** @hidden */\nexport var EVENT_WINDOW_START_END_DIV_CLASS = 'e-start-end-row';\n/** @hidden */\nexport var EVENT_WINDOW_START_CLASS = 'e-start';\n/** @hidden */\nexport var EVENT_WINDOW_END_CLASS = 'e-end';\n/** @hidden */\nexport var EVENT_WINDOW_RESOURCES_DIV_CLASS = 'e-resources-row';\n/** @hidden */\nexport var DESCRIPTION_CLASS = 'e-description';\n/** @hidden */\nexport var DESCRIPTION_ICON_CLASS = 'e-description-icon';\n/** @hidden */\nexport var DESCRIPTION_DETAILS_CLASS = 'e-description-details';\n/** @hidden */\nexport var EVENT_WINDOW_TIME_ZONE_DIV_CLASS = 'e-time-zone-row';\n/** @hidden */\nexport var EVENT_WINDOW_START_TZ_CLASS = 'e-start-time-zone';\n/** @hidden */\nexport var EVENT_WINDOW_END_TZ_CLASS = 'e-end-time-zone';\n/** @hidden */\nexport var EVENT_WINDOW_BACK_ICON_CLASS = 'e-back-icon';\n/** @hidden */\nexport var EVENT_WINDOW_SAVE_ICON_CLASS = 'e-save-icon';\n/** @hidden */\nexport var EVENT_WINDOW_CANCEL_BUTTON_CLASS = 'e-event-cancel';\n/** @hidden */\nexport var EVENT_WINDOW_SAVE_BUTTON_CLASS = 'e-event-save';\n/** @hidden */\nexport var EVENT_WINDOW_DIALOG_PARENT_CLASS = 'e-dialog-parent';\n/** @hidden */\nexport var EVENT_WINDOW_TITLE_TEXT_CLASS = 'e-title-text';\n/** @hidden */\nexport var EVENT_WINDOW_ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @hidden */\nexport var EDIT_CLASS = 'e-edit';\n/** @hidden */\nexport var EDIT_ICON_CLASS = 'e-edit-icon';\n/** @hidden */\nexport var DELETE_CLASS = 'e-delete';\n/** @hidden */\nexport var DELETE_ICON_CLASS = 'e-delete-icon';\n/** @hidden */\nexport var CLOSE_CLASS = 'e-close';\n/** @hidden */\nexport var CLOSE_ICON_CLASS = 'e-close-icon';\n/** @hidden */\nexport var ERROR_VALIDATION_CLASS = 'e-schedule-error';\n/** @hidden */\nexport var EVENT_TOOLTIP_ROOT_CLASS = 'e-schedule-event-tooltip';\n/** @hidden */\nexport var ALLDAY_ROW_ANIMATE_CLASS = 'e-animate';\n/** @hidden */\nexport var TIMESCALE_DISABLE = 'e-timescale-disable';\n/** @hidden */\nexport var DISABLE_DATE = 'e-disable-date';\n/** @hidden */\nexport var HIDDEN_CLASS = 'e-hidden';\n/** @hidden */\nexport var DISABLE_DATES = 'e-disable-dates';\n/** @hidden */\nexport var POPUP_WRAPPER_CLASS = 'e-quick-popup-wrapper';\n/** @hidden */\nexport var POPUP_TABLE_CLASS = 'e-popup-table';\n/** @hidden */\nexport var RESOURCE_MENU = 'e-resource-menu';\n/** @hidden */\nexport var RESOURCE_MENU_ICON = 'e-icon-menu';\n/** @hidden */\nexport var RESOURCE_LEVEL_TITLE = 'e-resource-level-title';\n/** @hidden */\nexport var RESOURCE_TREE = 'e-resource-tree';\n/** @hidden */\nexport var RESOURCE_TREE_POPUP_OVERLAY = 'e-resource-tree-popup-overlay';\n/** @hidden */\nexport var RESOURCE_TREE_POPUP = 'e-resource-tree-popup';\n/** @hidden */\nexport var RESOURCE_CLASS = 'e-resource';\n/** @hidden */\nexport var RESOURCE_ICON_CLASS = 'e-resource-icon';\n/** @hidden */\nexport var RESOURCE_DETAILS_CLASS = 'e-resource-details';\n/** @hidden */\nexport var DATE_TIME_ICON_CLASS = 'e-date-time-icon';\n/** @hidden */\nexport var VIRTUAL_SCROLL_CLASS = 'e-virtual-scroll';\n/** @hidden */\nexport var ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @hidden */\nexport var AUTO_HEIGHT = 'e-auto-height';\n/** @hidden */\nexport var IGNORE_WHITESPACE = 'e-ignore-whitespace';\n/** @hidden */\nexport var EVENT_TEMPLATE = 'e-template';\n/** @hidden */\nexport var READ_ONLY = 'e-read-only';\n/** @hidden */\nexport var MONTH_HEADER_WRAPPER = 'e-month-header-wrapper';\n/** @hidden */\nexport var INLINE_SUBJECT_CLASS = 'e-inline-subject';\n/** @hidden */\nexport var INLINE_APPOINTMENT_CLASS = 'e-inline-appointment';\n/** @hidden */\nexport var SCROLL_HIDDEN = 'e-scroll-hidden';\n","import { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Header module\n */\nvar HeaderRenderer = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function HeaderRenderer(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.renderHeader();\n        this.addEventListener();\n    }\n    HeaderRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n    };\n    HeaderRenderer.prototype.removeEventListener = function () {\n        this.parent.off(events.documentClick, this.closeHeaderPopup);\n    };\n    HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n        var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-selected');\n        var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n        var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.isAdaptive) {\n            if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') ||\n                closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') &&\n                this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\n                addClass([contentWrap], cls.SCROLL_HIDDEN);\n            }\n            else {\n                removeClass([contentWrap], cls.SCROLL_HIDDEN);\n                var popupObj = this.element.querySelector('.e-toolbar-pop').ej2_instances[0];\n                if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') &&\n                    this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\n                    popupObj.hide();\n                }\n            }\n        }\n        if (!isNullOrUndefined(closestEle)) {\n            return;\n        }\n        this.hideHeaderPopup();\n    };\n    /** @hidden */\n    HeaderRenderer.prototype.hideHeaderPopup = function () {\n        if (this.headerPopup) {\n            this.headerPopup.hide();\n        }\n    };\n    HeaderRenderer.prototype.renderHeader = function () {\n        this.element = createElement('div', { className: cls.TOOLBAR_CONTAINER });\n        var toolbarEle = createElement('div', { className: cls.HEADER_TOOLBAR });\n        this.element.appendChild(toolbarEle);\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n        this.renderToolbar();\n    };\n    HeaderRenderer.prototype.renderToolbar = function () {\n        var items = this.getItems();\n        var args = { requestType: 'toolbarItemRendering', items: items };\n        this.parent.trigger(events.actionBegin, args);\n        this.toolbarObj = new Toolbar({\n            items: args.items,\n            overflowMode: 'Popup',\n            clicked: this.toolbarClickHandler.bind(this),\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale\n        });\n        this.toolbarObj.isStringTemplate = true;\n        this.toolbarObj.appendTo(this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        if (prevNavEle) {\n            prevNavEle.firstElementChild.setAttribute('title', this.l10n.getConstant('previous'));\n        }\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        if (nextNavEle) {\n            nextNavEle.firstElementChild.setAttribute('title', this.l10n.getConstant('next'));\n        }\n        this.updateActiveView();\n        this.parent.trigger(events.actionComplete, {\n            requestType: 'toolBarItemRendered', items: this.toolbarObj.items\n        });\n    };\n    HeaderRenderer.prototype.updateItems = function () {\n        if (this.toolbarObj) {\n            var items = this.getItems();\n            var args = { requestType: 'toolbarItemRendering', items: items };\n            this.parent.trigger(events.actionBegin, args);\n            this.toolbarObj.items = args.items;\n            this.toolbarObj.dataBind();\n            this.parent.trigger(events.actionComplete, {\n                requestType: 'toolBarItemRendered',\n                items: this.toolbarObj.items\n            });\n        }\n    };\n    HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n        if (this.parent.isAdaptive) {\n            return this.toolbarObj.element;\n        }\n        return this.element.querySelector('.e-date-range');\n    };\n    HeaderRenderer.prototype.setDayOfWeek = function (index) {\n        if (this.headerCalendar) {\n            this.headerCalendar.firstDayOfWeek = index;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarDate = function (date) {\n        if (this.headerCalendar) {\n            this.headerCalendar.value = date;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.min = this.parent.minDate;\n            this.headerCalendar.max = this.parent.maxDate;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.getCalendarView = function () {\n        if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n            return 'Year';\n        }\n        else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n            return 'Decade';\n        }\n        else {\n            return 'Month';\n        }\n    };\n    HeaderRenderer.prototype.setCalendarView = function () {\n        if (this.headerCalendar) {\n            var calendarView = this.getCalendarView();\n            this.headerCalendar.depth = calendarView;\n            this.headerCalendar.start = calendarView;\n            this.headerCalendar.refresh();\n        }\n    };\n    HeaderRenderer.prototype.updateActiveView = function () {\n        var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n        removeClass(selEle, ['e-active-view']);\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n        }\n    };\n    HeaderRenderer.prototype.updateDateRange = function (text) {\n        var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (selEle) {\n            selEle.setAttribute('aria-label', text);\n            selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n            this.toolbarObj.refreshOverflow();\n        }\n    };\n    HeaderRenderer.prototype.getDateRangeText = function () {\n        return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    HeaderRenderer.prototype.getItems = function () {\n        var items = [];\n        var showInPopup = this.parent.isAdaptive;\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n            cssClass: 'e-prev', htmlAttributes: { 'aria-label': 'previous period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n            cssClass: 'e-next', htmlAttributes: { 'aria-label': 'next period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n            overflow: 'Show',\n            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title', 'role': 'navigation' }\n        });\n        if (this.parent.isAdaptive) {\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-add', text: this.l10n.getConstant('newEvent'),\n                cssClass: 'e-add', overflow: 'Show'\n            });\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-today', text: this.l10n.getConstant('today'),\n                cssClass: 'e-today', overflow: 'Show'\n            });\n        }\n        else {\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-day', text: this.l10n.getConstant('today'),\n                cssClass: 'e-today', overflow: 'Show'\n            });\n            if (this.parent.views.length > 1) {\n                items.push({\n                    align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator'\n                });\n            }\n        }\n        if (this.parent.views.length > 1) {\n            for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n                var item = _a[_i];\n                typeof (item) === 'string' ? items.push(this.getItemObject(item)) :\n                    items.push(this.getItemObject(item));\n            }\n        }\n        return items;\n    };\n    HeaderRenderer.prototype.getItemObject = function (item) {\n        var viewName;\n        var displayName;\n        if (typeof (item) === 'string') {\n            viewName = item.toLowerCase();\n            displayName = null;\n        }\n        else {\n            viewName = item.option.toLowerCase();\n            displayName = item.displayName;\n        }\n        var view;\n        var showInPopup = this.parent.isAdaptive;\n        switch (viewName) {\n            case 'day':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-day',\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\n                };\n                break;\n            case 'week':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-week',\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\n                };\n                break;\n            case 'workweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-workweek',\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\n                };\n                break;\n            case 'month':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-month',\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\n                };\n                break;\n            case 'year':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-year',\n                    text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\n                };\n                break;\n            case 'agenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-agenda',\n                    text: displayName || this.l10n.getConstant('agenda'), cssClass: 'e-views e-agenda'\n                };\n                break;\n            case 'monthagenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-month-agenda',\n                    text: displayName || this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\n                };\n                break;\n            case 'timelineday':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-day',\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\n                };\n                break;\n            case 'timelineweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-week',\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\n                };\n                break;\n            case 'timelineworkweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-workweek',\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\n                };\n                break;\n            case 'timelinemonth':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-month',\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\n                };\n                break;\n            case 'timelineyear':\n                var orientationClass = (item.orientation === 'Vertical') ? 'vertical' : 'horizontal';\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n                    text: displayName || this.l10n.getConstant('timelineYear'), cssClass: 'e-views e-timeline-year'\n                };\n                break;\n        }\n        return view;\n    };\n    HeaderRenderer.prototype.renderHeaderPopup = function () {\n        var headerPopupEle = createElement('div', { className: cls.HEADER_POPUP_CLASS });\n        var headerCalendarEle = createElement('div', { className: cls.HEADER_CALENDAR_CLASS });\n        headerPopupEle.appendChild(headerCalendarEle);\n        this.element.appendChild(headerPopupEle);\n        this.headerPopup = new Popup(headerPopupEle, {\n            actionOnScroll: 'hide',\n            targetType: 'relative',\n            relateTo: this.getPopUpRelativeElement(),\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl\n        });\n        this.headerPopup.isStringTemplate = true;\n        var calendarView = this.getCalendarView();\n        this.headerCalendar = new Calendar({\n            value: this.parent.selectedDate,\n            min: this.parent.minDate,\n            max: this.parent.maxDate,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            depth: calendarView,\n            start: calendarView,\n            calendarMode: this.parent.calendarMode,\n            change: this.calendarChange.bind(this)\n        });\n        this.headerCalendar.isStringTemplate = true;\n        this.setCalendarTimezone();\n        this.headerCalendar.appendTo(headerCalendarEle);\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calendarChange = function (args) {\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n            var calendarDate = util.resetTime(new Date(args.value));\n            this.parent.changeDate(calendarDate);\n        }\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.setCalendarTimezone = function () {\n        if (this.headerCalendar) {\n            // tslint:disable-next-line:no-any\n            this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        }\n    };\n    HeaderRenderer.prototype.calculateViewIndex = function (args) {\n        var target = closest(args.originalEvent.target, '.e-views');\n        var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n        return views.indexOf(target);\n    };\n    HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n        if (!args.item) {\n            return;\n        }\n        var strClass = args.item.cssClass.replace('e-views ', '');\n        switch (strClass) {\n            case 'e-date-range':\n                if (!this.headerPopup) {\n                    this.renderHeaderPopup();\n                }\n                if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n                    this.headerPopup.hide();\n                }\n                else {\n                    this.headerPopup.show();\n                }\n                break;\n            case 'e-day':\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-week':\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-work-week':\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month':\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-year':\n                this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-agenda':\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month-agenda':\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-day':\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-week':\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-work-week':\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-month':\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-year':\n                this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-today':\n                if (!this.parent.isSelectedDate(util.resetTime(this.parent.getCurrentTime()))) {\n                    this.parent.changeDate(util.resetTime(this.parent.getCurrentTime()), args.originalEvent);\n                }\n                break;\n            case 'e-prev':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n                break;\n            case 'e-next':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n                break;\n            case 'e-add':\n                var data = void 0;\n                var isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n                if (this.parent.activeCellsData && !isSameTime) {\n                    data = this.parent.activeCellsData;\n                }\n                else {\n                    var interval = this.parent.activeViewOptions.timeScale.interval;\n                    var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n                    var msInterval = (interval * util.MS_PER_MINUTE) / slotCount;\n                    var startTime = new Date(this.parent.selectedDate.getTime());\n                    var currentTime = this.parent.getCurrentTime();\n                    startTime.\n                        setHours(currentTime.getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\n                    var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\n                }\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\n                break;\n        }\n        if (isNullOrUndefined(this.toolbarObj)) {\n            return;\n        }\n        var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n        if (toolbarPopUp && args.item.type !== 'Input') {\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\n        }\n    };\n    HeaderRenderer.prototype.getHeaderElement = function () {\n        return this.toolbarObj.element;\n    };\n    HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (prevNavEle) {\n            (classType === 'add') ? addClass([prevNavEle], cls.HIDDEN_CLASS) : removeClass([prevNavEle], cls.HIDDEN_CLASS);\n        }\n        if (nextNavEle) {\n            (classType === 'add') ? addClass([nextNavEle], cls.HIDDEN_CLASS) : removeClass([nextNavEle], cls.HIDDEN_CLASS);\n        }\n        if (dateRangeEle) {\n            (classType === 'add') ? addClass([dateRangeEle], cls.TEXT_ELLIPSIS) : removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n        }\n    };\n    HeaderRenderer.prototype.previousNextIconHandler = function () {\n        var dates = (this.parent.currentView === 'Agenda' ?\n            [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates());\n        var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\n        var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\n        var firstDate = new Date(dates[0].getTime());\n        var lastDate = new Date(dates[dates.length - 1].getTime());\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n            lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n        }\n        if (this.parent.currentView === 'Month') {\n            firstDate = util.firstDateOfMonth(this.parent.selectedDate);\n            var lastMonthFirstDate = util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1);\n            lastDate = util.lastDateOfMonth(lastMonthFirstDate);\n        }\n        if (!isNullOrUndefined(prevNavEle)) {\n            this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n        }\n        if (!isNullOrUndefined(nextNavEle)) {\n            this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n        }\n        this.setCalendarMinMaxDate();\n    };\n    /**\n     * Get module name.\n     */\n    HeaderRenderer.prototype.getModuleName = function () {\n        return 'headerbar';\n    };\n    /**\n     * To destroy the headerbar.\n     * @return {void}\n     * @private\n     */\n    HeaderRenderer.prototype.destroy = function () {\n        if (this.headerPopup && !this.headerPopup.isDestroyed) {\n            this.headerPopup.destroy();\n            this.headerPopup = null;\n        }\n        if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n            this.headerCalendar.destroy();\n            this.headerCalendar = null;\n        }\n        if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n            this.toolbarObj.destroy();\n            this.removeEventListener();\n            remove(this.element);\n            this.toolbarObj = null;\n        }\n    };\n    return HeaderRenderer;\n}());\nexport { HeaderRenderer };\n","import { formatUnit } from '@syncfusion/ej2-base';\nimport { contentReady, uiUpdate, scrollUiUpdate } from '../base/constant';\n/**\n * `Scroll` module\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        this.parent.element.style.height = formatUnit(this.parent.height);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        this.parent.on(contentReady, this.setDimensions, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        this.parent.off(contentReady, this.setDimensions);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setDimensions = function () {\n        this.setWidth();\n        this.setHeight();\n        var data = { cssProperties: this.parent.getCssProperties(), module: this.getModuleName() };\n        this.parent.notify(scrollUiUpdate, data);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.onPropertyChanged = function (e) {\n        this.setDimensions();\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","import { addClass, removeClass, Touch, remove, EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * `touch` module is used to handle touch interactions.\n */\nvar ScheduleTouch = /** @class */ (function () {\n    function ScheduleTouch(parent) {\n        this.parent = parent;\n        this.element = this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS);\n        this.touchObj = new Touch(this.element, {\n            scroll: this.scrollHandler.bind(this),\n            swipe: this.swipeHandler.bind(this),\n            tapHold: this.tapHoldHandler.bind(this),\n            swipeSettings: { swipeThresholdDistance: 1 }\n        });\n        EventHandler.add(this.element, 'transitionend', this.onTransitionEnd, this);\n        this.touchLeftDirection = this.parent.enableRtl ? 'Right' : 'Left';\n        this.touchRightDirection = this.parent.enableRtl ? 'Left' : 'Right';\n    }\n    ScheduleTouch.prototype.scrollHandler = function (e) {\n        if (this.parent.currentView === 'Agenda' || this.parent.uiStateValues.action ||\n            (e.originalEvent && (e.originalEvent.target.classList.contains(cls.APPOINTMENT_CLASS) ||\n                closest(e.originalEvent.target, '.' + cls.APPOINTMENT_CLASS)))) {\n            return;\n        }\n        if (!this.timeStampStart) {\n            this.timeStampStart = Date.now();\n        }\n        if (this.element.classList.contains(cls.TRANSLATE_CLASS)) {\n            this.onTransitionEnd();\n        }\n        if (e.scrollDirection === 'Left' || e.scrollDirection === 'Right') {\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            var scrollDiv = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {\n                return;\n            }\n            else {\n                this.isScrollTriggered = true;\n                e.originalEvent.preventDefault();\n                e.originalEvent.stopPropagation();\n            }\n        }\n        if (e.scrollDirection === this.touchLeftDirection) {\n            if (!this.nextPanel) {\n                this.renderPanel(cls.NEXT_PANEL_CLASS, 'next');\n                this.nextPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime())\n                };\n                this.setDimensions(this.nextPanel.element);\n            }\n            var x = this.parent.enableRtl ? e.distanceX : -e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n        else if (e.scrollDirection === this.touchRightDirection) {\n            var prevWidth = 0;\n            if (!this.previousPanel) {\n                this.renderPanel(cls.PREVIOUS_PANEL_CLASS, 'previous');\n                this.previousPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime())\n                };\n                this.setDimensions(this.previousPanel.element);\n                prevWidth = this.previousPanel.element.offsetWidth;\n            }\n            var x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n    };\n    ScheduleTouch.prototype.swipeHandler = function (e) {\n        if (!this.isScrollTriggered || this.parent.uiStateValues.action) {\n            return;\n        }\n        this.isScrollTriggered = false;\n        var swipeDate = e.swipeDirection === 'Left' ?\n            this.parent.activeView.renderDates[0] : this.parent.activeView.renderDates.slice(-1)[0];\n        if ((e.swipeDirection === 'Left' && swipeDate < this.parent.maxDate) ||\n            (e.swipeDirection === 'Right' && swipeDate >= this.parent.minDate)) {\n            var time = Date.now() - this.timeStampStart;\n            var offsetDist = (e.distanceX * (Browser.isDevice ? 6 : 1.66));\n            if (offsetDist > time || (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                this.swapPanels(e.swipeDirection);\n                if (offsetDist > time && (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                    this.element.style.transitionDuration = ((offsetDist / time) / 10) + 's';\n                }\n                this.confirmSwipe(e.swipeDirection);\n            }\n            else {\n                this.cancelSwipe();\n            }\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(events.actionComplete, args);\n        }\n        else {\n            this.cancelSwipe();\n        }\n        this.timeStampStart = null;\n    };\n    ScheduleTouch.prototype.tapHoldHandler = function (e) {\n        var target = closest(e.originalEvent.target, '.' + cls.APPOINTMENT_CLASS);\n        if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n            this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);\n            return;\n        }\n    };\n    ScheduleTouch.prototype.renderPanel = function (clsName, nextPrevType) {\n        if (!this.currentPanel) {\n            this.currentPanel = {\n                element: this.parent.activeView.getPanel(),\n                selectedDate: new Date(this.parent.selectedDate.getTime())\n            };\n            this.setDimensions(this.currentPanel.element);\n        }\n        else {\n            this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        }\n        this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType) }, true);\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n        }\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.renderLayout(clsName);\n    };\n    ScheduleTouch.prototype.swapPanels = function (direction) {\n        if (direction === this.touchLeftDirection) {\n            var temp = this.nextPanel;\n            this.nextPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n        else {\n            var temp = this.previousPanel;\n            this.previousPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n    };\n    ScheduleTouch.prototype.confirmSwipe = function (swipeDirection) {\n        var _this = this;\n        var previousDate = swipeDirection === this.touchLeftDirection ? this.nextPanel.selectedDate : this.previousPanel.selectedDate;\n        var args = {\n            action: 'date', cancel: false, previousDate: previousDate, currentDate: this.currentPanel.selectedDate\n        };\n        this.parent.trigger(events.navigating, args, function (navArgs) {\n            if (navArgs.cancel) {\n                _this.swapPanels(swipeDirection);\n                _this.cancelSwipe();\n            }\n            else {\n                _this.parent.activeView.setPanel(_this.currentPanel.element);\n                _this.parent.setProperties({ selectedDate: _this.currentPanel.selectedDate }, true);\n                var translateX = void 0;\n                if (_this.parent.enableRtl) {\n                    translateX = swipeDirection === _this.touchLeftDirection ?\n                        (_this.previousPanel ? _this.previousPanel.element.offsetLeft : _this.currentPanel.element.offsetWidth) : 0;\n                }\n                else {\n                    translateX = swipeDirection === _this.touchLeftDirection ? -_this.currentPanel.element.offsetLeft : 0;\n                }\n                addClass([_this.element], cls.TRANSLATE_CLASS);\n                _this.element.style.transform = 'translatex(' + translateX + 'px)';\n                if (_this.parent.headerModule) {\n                    _this.parent.headerModule.updateDateRange(_this.parent.activeView.getDateRangeText());\n                }\n                _this.parent.renderTemplates();\n                _this.parent.renderModule.refreshDataManager();\n            }\n        });\n    };\n    ScheduleTouch.prototype.cancelSwipe = function () {\n        this.parent.activeView.setPanel(this.currentPanel.element);\n        this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.generateColumnLevels();\n        addClass([this.element], cls.TRANSLATE_CLASS);\n        var prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;\n        this.element.style.transform = 'translatex(' + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + 'px)';\n    };\n    ScheduleTouch.prototype.onTransitionEnd = function () {\n        removeClass([this.element], cls.TRANSLATE_CLASS);\n        this.element.style.transitionDuration = '';\n        this.element.style.transform = '';\n        if (this.previousPanel) {\n            remove(this.previousPanel.element);\n            this.previousPanel = null;\n            removeClass([this.currentPanel.element], cls.PREVIOUS_PANEL_CLASS);\n            addClass([this.currentPanel.element], cls.CURRENT_PANEL_CLASS);\n        }\n        if (this.nextPanel) {\n            remove(this.nextPanel.element);\n            this.nextPanel = null;\n            removeClass([this.currentPanel.element], cls.NEXT_PANEL_CLASS);\n            addClass([this.currentPanel.element], cls.CURRENT_PANEL_CLASS);\n        }\n        this.currentPanel = null;\n        this.parent.activeView.getPanel().style.width = '';\n    };\n    ScheduleTouch.prototype.getTranslateX = function (element) {\n        var style = window.getComputedStyle(element);\n        return new WebKitCSSMatrix(style.webkitTransform).m41;\n    };\n    ScheduleTouch.prototype.setDimensions = function (element) {\n        element.style.width = (this.parent.element.clientWidth) + 'px';\n    };\n    ScheduleTouch.prototype.resetValues = function () {\n        this.currentPanel = null;\n        this.previousPanel = null;\n        this.nextPanel = null;\n        this.timeStampStart = null;\n        this.element.style.transform = '';\n        util.removeChildren(this.element);\n        removeClass([this.element], cls.TRANSLATE_CLASS);\n    };\n    /**\n     * @hidden\n     */\n    ScheduleTouch.prototype.destroy = function () {\n        this.touchObj.destroy();\n        EventHandler.remove(this.element, 'transitionend', this.onTransitionEnd);\n        this.resetValues();\n    };\n    return ScheduleTouch;\n}());\nexport { ScheduleTouch };\n","import { KeyboardEvents, closest, EventHandler, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Keyboard interaction\n */\nvar KeyboardInteraction = /** @class */ (function () {\n    function KeyboardInteraction(parent) {\n        this.selectedCells = [];\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDownArrow: 'shift+downarrow',\n            shiftUpArrow: 'shift+uparrow',\n            shiftRightArrow: 'shift+rightarrow',\n            shiftLeftArrow: 'shift+leftarrow',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow',\n            altOne: 'alt+1',\n            altTwo: 'alt+2',\n            altThree: 'alt+3',\n            altFour: 'alt+4',\n            altFive: 'alt+5',\n            altSix: 'alt+6',\n            altSeven: 'alt+7',\n            altEight: 'alt+8',\n            altNine: 'alt+9',\n            enter: 'enter',\n            escape: 'escape',\n            delete: 'delete',\n            home: 'home',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            ctrlShiftUpArrow: 'ctrl+shift+uparrow',\n            ctrlShiftDownArrow: 'ctrl+shift+downarrow',\n            ctrlShiftLeftArrow: 'ctrl+shift+leftarrow',\n            ctrlShiftRightArrow: 'ctrl+shift+rightarrow'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.addEventListener();\n    }\n    KeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'downArrow':\n            case 'shiftDownArrow':\n                this.processDown(e, e.shiftKey);\n                break;\n            case 'upArrow':\n            case 'shiftUpArrow':\n                this.processUp(e, e.shiftKey);\n                break;\n            case 'leftArrow':\n            case 'shiftLeftArrow':\n                this.processLeft(e, e.shiftKey);\n                break;\n            case 'rightArrow':\n            case 'shiftRightArrow':\n                this.processRight(e, e.shiftKey);\n                break;\n            case 'ctrlLeftArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-prev button').focus();\n                }\n                break;\n            case 'ctrlRightArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-next button').focus();\n                }\n                break;\n            case 'altOne':\n            case 'altTwo':\n            case 'altThree':\n            case 'altFour':\n            case 'altFive':\n            case 'altSix':\n            case 'altSeven':\n            case 'altEight':\n            case 'altNine':\n                this.processViewNavigation(e);\n                break;\n            case 'enter':\n                this.processEnter(e);\n                break;\n            case 'home':\n                this.focusFirstCell();\n                break;\n            case 'tab':\n            case 'shiftTab':\n                this.processTab(e, e.shiftKey);\n                break;\n            case 'delete':\n                this.processDelete(e);\n                break;\n            case 'ctrlShiftUpArrow':\n            case 'ctrlShiftDownArrow':\n            case 'ctrlShiftLeftArrow':\n            case 'ctrlShiftRightArrow':\n                this.processCtrlShiftNavigationArrows(e);\n                break;\n            case 'escape':\n                this.processEscape();\n        }\n    };\n    KeyboardInteraction.prototype.addEventListener = function () {\n        this.parent.on(event.cellMouseDown, this.onCellMouseDown, this);\n    };\n    KeyboardInteraction.prototype.removeEventListener = function () {\n        this.parent.off(event.cellMouseDown, this.onCellMouseDown);\n    };\n    KeyboardInteraction.prototype.onCellMouseDown = function (e) {\n        if (e.event.shiftKey) {\n            return;\n        }\n        this.initialTarget = this.getClosestCell(e.event);\n        if (this.parent.activeViewOptions.readonly || this.parent.currentView === 'MonthAgenda' || !this.initialTarget) {\n            return;\n        }\n        if (e.event.target.classList.contains(cls.WORK_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            EventHandler.add(this.parent.getContentTable(), 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(this.parent.getContentTable(), 'mouseup', this.onMoveup, this);\n        }\n        if (e.event.target.classList.contains(cls.ALLDAY_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.add(allDayRow, 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(allDayRow, 'mouseup', this.onMoveup, this);\n        }\n    };\n    KeyboardInteraction.prototype.onMouseSelection = function (e) {\n        var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        addClass(appointments, 'e-allow-select');\n        var selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);\n        if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var yInBounds = parent_1.offsetHeight <= parent_1.scrollHeight && parent_1.scrollTop >= 0 &&\n                parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n            var xInBounds = parent_1.offsetWidth <= parent_1.scrollWidth && parent_1.scrollLeft >= 0 &&\n                parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n            if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {\n                parent_1.scrollTop += selectionEdges.top ? -e.target.offsetHeight : e.target.offsetHeight;\n            }\n            if (xInBounds && (selectionEdges.left || selectionEdges.right)) {\n                parent_1.scrollLeft += selectionEdges.left ? -e.target.offsetWidth : e.target.offsetWidth;\n            }\n        }\n        var target = this.getClosestCell(e);\n        if (target) {\n            this.selectCells(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.getClosestCell = function (e) {\n        return closest(e.target, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n    };\n    KeyboardInteraction.prototype.onMoveup = function (e) {\n        var _this = this;\n        var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        removeClass(appointments, 'e-allow-select');\n        if (e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            EventHandler.remove(this.parent.getContentTable(), 'mousemove', this.onMouseSelection);\n            EventHandler.remove(this.parent.getContentTable(), 'mouseup', this.onMoveup);\n        }\n        if (e.target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.remove(allDayRow, 'mousemove', this.onMouseSelection);\n            EventHandler.remove(allDayRow, 'mouseup', this.onMoveup);\n        }\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        this.parent.activeCellsData = this.getSelectedElements(target);\n        var cellData = {};\n        if (this.parent.eventWindow) {\n            this.parent.eventWindow.convertToEventData(this.parent.activeCellsData, cellData);\n        }\n        var args = {\n            data: cellData, element: this.parent.activeCellsData.element, event: e,\n            requestType: 'cellSelect', showQuickPopup: false\n        };\n        this.parent.trigger(event.select, args, function (selectArgs) {\n            var isPopupShow = selectArgs.showQuickPopup || _this.parent.quickInfoOnSelectionEnd;\n            if (isPopupShow) {\n                var cellArgs = extend(_this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n                _this.parent.notify(event.cellClick, cellArgs);\n            }\n        });\n    };\n    KeyboardInteraction.prototype.processEnter = function (e) {\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e)) {\n            return;\n        }\n        var target = e.target;\n        if (closest(target, '.' + cls.POPUP_WRAPPER_CLASS)) {\n            if (target.classList.contains(cls.QUICK_POPUP_EVENT_DETAILS_CLASS) ||\n                target.classList.contains(cls.EVENT_CREATE_CLASS) ||\n                target.classList.contains(cls.EDIT_EVENT_CLASS) ||\n                target.classList.contains(cls.DELETE_EVENT_CLASS) ||\n                target.classList.contains(cls.CLOSE_CLASS)) {\n                target.click();\n                e.preventDefault();\n            }\n            else if (target.classList.contains(cls.SUBJECT_CLASS)) {\n                this.parent.element.querySelector('.' + cls.EVENT_CREATE_CLASS).click();\n                e.preventDefault();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.RESOURCE_CELLS_CLASS) && target.classList.contains(cls.RESOURCE_PARENT_CLASS)) {\n            var resourceIcon = target.querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n            if (resourceIcon) {\n                resourceIcon.click();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            this.parent.activeCellsData = this.getSelectedElements(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e });\n            if (this.parent.allowInline) {\n                var inlineArgs = {\n                    element: args.element,\n                    groupIndex: args.groupIndex, type: 'Cell'\n                };\n                this.parent.notify(event.inlineClick, inlineArgs);\n            }\n            else {\n                this.parent.notify(event.cellClick, args);\n            }\n            return;\n        }\n        if (target.classList.contains(cls.INLINE_SUBJECT_CLASS)) {\n            this.parent.inlineModule.inlineCrudActions(target);\n            return;\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS) || target.classList.contains(cls.MORE_EVENT_CLOSE_CLASS) ||\n            target.classList.contains(cls.ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            target.click();\n            return;\n        }\n        if (target.classList.contains(cls.MORE_EVENT_HEADER_DATE_CLASS)) {\n            this.parent.setScheduleProperties({ selectedDate: this.parent.getDateFromElement(target) });\n            this.parent.changeView(this.parent.getNavigateView(), e);\n            this.processEscape();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.getSelectedElements = function (target) {\n        var cellDetails;\n        if (this.selectedCells.length > 1 && target.classList.contains(cls.SELECTED_CELL_CLASS)) {\n            var start = this.parent.getCellDetails(this.selectedCells[0]);\n            var end = this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);\n            start.endTime = end.endTime;\n            start.element = target;\n            cellDetails = start;\n        }\n        else {\n            cellDetails = this.parent.getCellDetails(target);\n        }\n        return cellDetails;\n    };\n    KeyboardInteraction.prototype.getCells = function (isInverseTable, start, end) {\n        var tableEle = this.parent.getContentTable();\n        var cells = [].slice.call(tableEle.querySelectorAll('td'));\n        var maxRow = tableEle.rows.length;\n        var maxColumn = tableEle.rows[0].cells.length;\n        if (start.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            cells = [].slice.call(allDayRow.cells);\n            maxRow = 1;\n            maxColumn = allDayRow.cells.length;\n        }\n        var startIndex = cells.indexOf(start);\n        var endIndex = cells.indexOf(end);\n        var inverseCells = [];\n        if (isInverseTable) {\n            for (var i = 0; i < maxColumn; i++) {\n                for (var j = 0; j < maxRow; j++) {\n                    inverseCells.push(cells[maxColumn * j + i]);\n                }\n            }\n            startIndex = inverseCells.indexOf(start);\n            endIndex = inverseCells.indexOf(end);\n        }\n        if (startIndex > endIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        var sCells = isInverseTable ? inverseCells : cells;\n        return sCells.slice(startIndex, endIndex + 1);\n    };\n    KeyboardInteraction.prototype.focusFirstCell = function () {\n        if (this.parent.currentView === 'Agenda') {\n            var focusCell = this.parent.getContentTable().querySelector('.' + cls.AGENDA_CELLS_CLASS);\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        if (this.parent.activeView.isTimelineView()) {\n            var cell = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS +\n                ' tr:not(.' + cls.HIDDEN_CLASS + ') .' + cls.WORK_CELLS_CLASS + ':not(.' + cls.RESOURCE_GROUP_CELLS_CLASS + ')');\n            this.selectCells(false, cell);\n        }\n        else {\n            this.selectCells(false, this.parent.getWorkCellElements()[0]);\n        }\n    };\n    KeyboardInteraction.prototype.isInverseTableSelect = function () {\n        return this.parent.activeView.isInverseTableSelect;\n    };\n    /** @hidden */\n    KeyboardInteraction.prototype.selectCells = function (isMultiple, targetCell) {\n        var _this = this;\n        this.parent.removeSelectedClass();\n        var target = (targetCell instanceof Array) ? targetCell.slice(-1)[0] : targetCell;\n        if (isMultiple) {\n            var initialId_1;\n            var views_1 = ['Day', 'Week', 'WorkWeek', 'Month', 'TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'];\n            var args = { element: targetCell, requestType: 'mousemove', allowMultipleRow: true };\n            this.parent.inlineModule.removeInlineAppointmentElement();\n            this.parent.trigger(event.select, args, function (selectArgs) {\n                var allowMultipleRow = (!selectArgs.allowMultipleRow) || (!_this.parent.allowMultiRowSelection);\n                if (allowMultipleRow && (views_1.indexOf(_this.parent.currentView) > -1)) {\n                    target = target.parentElement.children[_this.initialTarget.cellIndex];\n                }\n                var selectedCells = _this.getCells(_this.isInverseTableSelect(), _this.initialTarget, target);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    initialId_1 = _this.initialTarget.getAttribute('data-group-index');\n                    var resourceSelectedCells = [];\n                    for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n                        var cell = selectedCells_1[_i];\n                        if (cell.getAttribute('data-group-index') === initialId_1) {\n                            resourceSelectedCells.push(cell);\n                        }\n                    }\n                    selectedCells = resourceSelectedCells;\n                }\n                if (!_this.parent.allowMultiCellSelection) {\n                    selectedCells = [_this.initialTarget];\n                }\n                _this.selectedCells = selectedCells;\n                if (selectedCells.length > 2 && !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n                    var allDayCells = _this.getAllDayCells(selectedCells);\n                    if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                        var resourceAllDayCells = [];\n                        for (var _a = 0, allDayCells_1 = allDayCells; _a < allDayCells_1.length; _a++) {\n                            var cell = allDayCells_1[_a];\n                            if (cell.getAttribute('data-group-index') === initialId_1) {\n                                resourceAllDayCells.push(cell);\n                            }\n                        }\n                        allDayCells = resourceAllDayCells;\n                    }\n                    selectedCells = selectedCells.concat(allDayCells);\n                }\n                if ((target.getAttribute('data-group-index') !== initialId_1) && _this.parent.activeViewOptions.group.resources.length > 0) {\n                    target = _this.selectedCells[_this.selectedCells.length - 1];\n                }\n                _this.parent.addSelectedClass(selectedCells, target);\n            });\n        }\n        else {\n            this.initialTarget = target;\n            this.selectedCells = [target];\n            this.parent.addSelectedClass([target], target);\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointment = function (isReverse, target) {\n        var appointments = this.getAppointmentElements();\n        if (appointments.length < 0) {\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        var nextAppEle;\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var targetIndex = appointments.indexOf(target);\n            nextAppEle = appointments[(isReverse ? targetIndex - 1 : targetIndex + 1)];\n        }\n        else {\n            nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];\n        }\n        if (nextAppEle) {\n            this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n            nextAppEle.focus();\n            addClass([nextAppEle], cls.AGENDA_SELECTED_CELL);\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointmentElementFromWorkCell = function (isReverse, target) {\n        var _this = this;\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        this.parent.removeSelectedClass();\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var appointmentElements_1 = this.getUniqueAppointmentElements();\n            var filteredElements_1 = [];\n            var selectedDate_1 = this.parent.getDateFromElement(target).getTime();\n            var selectedSeriesEvents = this.parent.eventsProcessed.filter(function (eventObject) {\n                return (!isReverse ? (eventObject[_this.parent.eventFields.startTime].getTime() >= selectedDate_1) :\n                    (eventObject[_this.parent.eventFields.startTime].getTime() <= selectedDate_1));\n            });\n            selectedSeriesEvents.filter(function (event) {\n                appointmentElements_1.filter(function (element) {\n                    if (JSON.stringify(event.Guid) === JSON.stringify(element.getAttribute('data-guid'))) {\n                        filteredElements_1.push(element);\n                    }\n                });\n            });\n            if (filteredElements_1.length > 0) {\n                var selectedElement = isReverse ? filteredElements_1[filteredElements_1.length - 1] : filteredElements_1[0];\n                var focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute('data-guid'));\n                this.parent.eventBase.addSelectedAppointments(focusElements);\n                (focusElements[focusElements.length - 1]).focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.getAllDayCells = function (cells) {\n        var allDayRow = this.parent.getAllDayRow();\n        if (!allDayRow) {\n            return [];\n        }\n        var startCell = cells[0];\n        var endCell = cells[cells.length - 1];\n        var start = this.parent.getCellDetails(startCell);\n        var end = this.parent.getCellDetails(endCell);\n        if (end.endTime.getTime() - start.startTime.getTime() >= util.MS_PER_DAY) {\n            var allDayCells = [].slice.call(allDayRow.cells);\n            return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);\n        }\n        return [];\n    };\n    KeyboardInteraction.prototype.getAppointmentElements = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n    };\n    KeyboardInteraction.prototype.getAppointmentElementsByGuid = function (guid) {\n        return [].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]'));\n    };\n    KeyboardInteraction.prototype.getUniqueAppointmentElements = function () {\n        var appointments = this.getAppointmentElements();\n        var appointmentElements = [];\n        appointments.map(function (value) { return value.getAttribute('data-guid'); }).filter(function (value, index, self) {\n            if (self.indexOf(value) === index) {\n                appointmentElements.push(appointments[index]);\n            }\n        });\n        return appointmentElements;\n    };\n    KeyboardInteraction.prototype.getWorkCellFromAppointmentElement = function (target) {\n        var selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute('data-guid'));\n        return this.parent.eventBase.selectWorkCellByTime([selectedObject]);\n    };\n    KeyboardInteraction.prototype.processViewNavigation = function (e) {\n        var index = parseInt(e.key, 10) - 1;\n        if (index < this.parent.views.length) {\n            var view = this.parent.viewCollections[index].option;\n            this.parent.changeView(view, e, undefined, index);\n            if (this.parent.headerModule) {\n                this.parent.headerModule.element.querySelector('.e-active-view button').focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processUp = function (e, isMultiple) {\n        if ((isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda'))) {\n            return;\n        }\n        var target = (e.target);\n        var selectedElements = this.parent.getSelectedElements();\n        var selectedEventElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedElements.length > 0 && !e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            target = selectedElements[selectedElements.length - 1];\n        }\n        if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(cls.POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(cls.POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + cls.POPUP_OPEN)) {\n            var tableRows = this.parent.getTableRows();\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            if (curRowIndex > 0 && curRowIndex < tableRows.length) {\n                this.selectCells(isMultiple, (tableRows[curRowIndex - 1]).cells[target.cellIndex]);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.processDown = function (e, isMultiple) {\n        if (isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda')) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedElements();\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedCells.length > 0 && !e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(cls.POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(cls.POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        var tableRows = this.parent.getTableRows();\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + cls.POPUP_OPEN)) {\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            if (curRowIndex >= 0 && curRowIndex < tableRows.length - 1) {\n                this.selectCells(isMultiple, (tableRows[curRowIndex + 1]).cells[target.cellIndex]);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(false, target);\n        }\n    };\n    KeyboardInteraction.prototype.processLeftRight = function (target) {\n        var tableEle = this.parent.getContentTable();\n        var curRowIndex = target.parentNode.sectionRowIndex;\n        var key = {\n            element: tableEle,\n            rowIndex: curRowIndex,\n            columnIndex: target.cellIndex,\n            maxIndex: tableEle.rows[curRowIndex].cells.length\n        };\n        return key;\n    };\n    KeyboardInteraction.prototype.getQuickPopupElement = function () {\n        return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n    };\n    KeyboardInteraction.prototype.isCancelLeftRightAction = function (e, isMultiple) {\n        if (this.parent.currentView === 'Agenda' || (isMultiple && this.parent.currentView === 'MonthAgenda')) {\n            return true;\n        }\n        if (this.isPreventAction(e) && isMultiple) {\n            return true;\n        }\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (moreEventWrapper.classList.contains(cls.POPUP_OPEN) || quickPopupWrapper.classList.contains(cls.POPUP_OPEN)) {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processRight = function (e, isMultiple) {\n        if (this.isCancelLeftRightAction(e, isMultiple)) {\n            return;\n        }\n        var selectedCells = this.parent.getSelectedElements();\n        var targetCell;\n        var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n        var target = (e.target);\n        if (selectedCells.length > 0 && !target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedAppointments.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            (e.target).classList.contains(cls.WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], 'right');\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === key.maxIndex - 1) {\n                if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], 'right');\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                    var tableEle = this.parent.getContentTable();\n                    this.selectCells(false, tableEle.rows[rowIndex].cells[0]);\n                }\n            }\n        }\n        else if (target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);\n            }\n            else if (curColIndex === maxColIndex - 1 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                var allDayRow_1 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_1.cells[0]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processLeft = function (e, isMultiple) {\n        if (this.isCancelLeftRightAction(e, isMultiple)) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedElements();\n        var targetCell;\n        if (selectedCells.length > 0 && !target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if ((e.target).classList.contains(cls.WORK_CELLS_CLASS) &&\n            target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            if (key.columnIndex > 0 && key.columnIndex < key.maxIndex) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], 'left');\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === 0) {\n                if (!this.isInverseTableSelect() && key.rowIndex > 0) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], 'left');\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                    var tableEle = this.parent.getContentTable();\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;\n                    this.selectCells(false, tableEle.rows[rowIndex].cells[key.maxIndex - 1]);\n                }\n            }\n        }\n        else if (target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex > 0 && curColIndex < maxColIndex) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);\n            }\n            else if (curColIndex === 0 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                var allDayRow_2 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_2.cells[maxColIndex - 1]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.calculateNextPrevDate = function (currentCell, target, type) {\n        var initialId = this.initialTarget.getAttribute('data-group-index');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === 'Month') {\n            if (currentCell && target && target.getAttribute('data-group-index') !== initialId) {\n                var currentDate = this.parent.getDateFromElement(currentCell);\n                var nextPrevDate = (type === 'right') ? new Date(currentDate.setDate(currentDate.getDate() + 1))\n                    : new Date(currentDate.setDate(currentDate.getDate() - 1));\n                target = [].slice.call(this.parent.element.querySelectorAll('td[data-date=\"'\n                    + this.parent.getMsFromDate(nextPrevDate).toString() + '\"]' + '[data-group-index=\"' + initialId + '\"]'))[0];\n            }\n        }\n        return target;\n    };\n    KeyboardInteraction.prototype.getFocusableElements = function (container) {\n        var queryString = 'a[href]:not([tabindex=\"-1\"]),input:not([disabled]):not([tabindex=\"-1\"]),' +\n            'textarea:not([disabled]):not([tabindex=\"-1\"]),button:not([disabled]):not([tabindex=\"-1\"]),' +\n            'select:not([disabled]):not([tabindex=\"-1\"]),[tabindex]:not([tabindex=\"-1\"]),[contentEditable=true]:not([tabindex=\"-1\"])';\n        return [].slice.call(container.querySelectorAll(queryString));\n    };\n    KeyboardInteraction.prototype.processTabOnPopup = function (e, popupElement) {\n        var _this = this;\n        var focusableElements = this.getFocusableElements(popupElement);\n        focusableElements = focusableElements.filter(function (element) {\n            var footerEle = _this.parent.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n            if (footerEle && footerEle.offsetParent) {\n                return !(element.classList.contains(cls.EDIT_CLASS) || element.classList.contains(cls.DELETE_CLASS));\n            }\n            else {\n                return !(element.classList.contains(cls.EDIT_EVENT_CLASS) || element.classList.contains(cls.DELETE_EVENT_CLASS));\n            }\n        });\n        var firstEle = focusableElements[0];\n        var lastEle = focusableElements[focusableElements.length - 1];\n        if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {\n            e.preventDefault();\n            firstEle.focus();\n        }\n        if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {\n            e.preventDefault();\n            lastEle.focus();\n        }\n    };\n    KeyboardInteraction.prototype.processTab = function (e, isReverse) {\n        var target = e.target;\n        var popupWrapper = closest(target, '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        if (popupWrapper && popupWrapper.classList.contains(cls.POPUP_OPEN)) {\n            if (popupWrapper.classList.contains(cls.MORE_POPUP_WRAPPER_CLASS)) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n            }\n            this.processTabOnPopup(e, popupWrapper);\n            return;\n        }\n        if (target.classList.contains(cls.ROOT)) {\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            return;\n        }\n        if (target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            var index = parseInt(target.getAttribute('data-group-index'), 10);\n            var appSelector = \".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index - 1 : index) + \"\\\"]\";\n            var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                var focusAppointment = isReverse ? appElements.slice(-1)[0] : appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment]);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n            else if (index + 1 === this.parent.resourceBase.lastResourceLevel.length) {\n                this.parent.element.focus();\n                e.preventDefault();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n            if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n                var index = parseInt(target.getAttribute('data-group-index'), 10);\n                appElements = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n                var resCellSelector = \".\" + cls.RESOURCE_CELLS_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index : index + 1) + \"\\\"]\";\n                var resourceCell = this.parent.element.querySelector(resCellSelector);\n                if (resourceCell && (isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid') ||\n                    !isReverse && target.getAttribute('data-guid') === appElements.slice(-1)[0].getAttribute('data-guid'))) {\n                    this.parent.eventBase.removeSelectedAppointmentClass();\n                    resourceCell.focus();\n                    e.preventDefault();\n                    return;\n                }\n            }\n            var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n            if (selectedAppointments.length > 0) {\n                target = selectedAppointments[selectedAppointments.length - 1];\n            }\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!isReverse && target.getAttribute('data-guid') === appElements[appElements.length - 1].getAttribute('data-guid') ||\n                isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid')) {\n                return;\n            }\n            if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n                this.selectAppointment(isReverse, target);\n                e.preventDefault();\n            }\n            return;\n        }\n        var selectedCells = this.parent.getSelectedElements();\n        if (selectedCells.length > 0 && !target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n            this.selectAppointmentElementFromWorkCell(isReverse, target);\n            e.preventDefault();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.processDelete = function (e) {\n        var activeEle = document.activeElement;\n        if (this.parent.currentView === 'MonthAgenda') {\n            var selectedEle = this.parent.eventBase.getSelectedEvents().element;\n            activeEle = ((selectedEle && isNullOrUndefined(selectedEle.length)) ? selectedEle : selectedEle[0]);\n        }\n        if (activeEle && activeEle.classList.contains(cls.APPOINTMENT_CLASS)) {\n            addClass([activeEle], cls.APPOINTMENT_BORDER);\n            this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n            if (this.parent.activeViewOptions.readonly || activeEle.classList.contains(cls.READ_ONLY)) {\n                return;\n            }\n            this.parent.quickPopup.deleteClick();\n        }\n    };\n    KeyboardInteraction.prototype.processCtrlShiftNavigationArrows = function (e) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && document.activeElement.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var groupIndex = parseInt(document.activeElement.getAttribute('data-group-index'), 10);\n            var index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? groupIndex - 1 : groupIndex + 1;\n            index = index < 0 ? 0 : index > this.parent.resourceBase.lastResourceLevel.length ?\n                this.parent.resourceBase.lastResourceLevel.length : index;\n            var eventEle = [];\n            while (eventEle.length === 0 && index >= 0 && index <= this.parent.resourceBase.lastResourceLevel.length) {\n                eventEle = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n                index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? index - 1 : index + 1;\n            }\n            var nextAppEle = eventEle[0];\n            if (nextAppEle) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n                nextAppEle.focus();\n            }\n        }\n        else if (this.parent.activeViewOptions.group.resources.length > 0 &&\n            !document.activeElement.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var index = this.parent.resourceBase.renderedResources[0].groupIndex;\n            var appSelector = \".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\";\n            var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                var focusAppointment = appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment]);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processEscape = function () {\n        this.parent.quickPopup.onClosePopup();\n        this.parent.quickPopup.morePopup.hide();\n        if (this.parent.headerModule) {\n            this.parent.headerModule.hideHeaderPopup();\n        }\n        if (this.parent.inlineModule) {\n            this.parent.inlineModule.removeInlineAppointmentElement();\n        }\n    };\n    KeyboardInteraction.prototype.isPreventAction = function (e) {\n        var target = closest(e.target, '.' + cls.RESOURCE_GROUP_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Get module name.\n     */\n    KeyboardInteraction.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * To destroy the keyboard module.\n     * @return {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.destroy = function () {\n        this.removeEventListener();\n        this.keyboardModule.destroy();\n    };\n    return KeyboardInteraction;\n}());\nexport { KeyboardInteraction };\n","import { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module\n     * @private\n     */\n    function Data(dataSource, query) {\n        this.initDataManager(dataSource, query);\n    }\n    /**\n     * The function used to initialize dataManager and query\n     * @return {void}\n     * @private\n     */\n    Data.prototype.initDataManager = function (dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     * @return {void}\n     * @private\n     */\n    Data.prototype.generateQuery = function (startDate, endDate) {\n        var query = this.query.clone();\n        if (startDate) {\n            query.addParams('StartDate', startDate.toISOString());\n        }\n        if (endDate) {\n            query.addParams('EndDate', endDate.toISOString());\n        }\n        return query;\n    };\n    /**\n     * The function used to get dataSource by executing given Query\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @return {void}\n     * @private\n     */\n    Data.prototype.getData = function (query) {\n        return this.dataManager.executeQuery(query);\n    };\n    return Data;\n}());\nexport { Data };\n","import { HijriParser, isNullOrUndefined } from '@syncfusion/ej2-base';\n/** @hidden */\nvar Gregorian = /** @class */ (function () {\n    function Gregorian() {\n    }\n    Gregorian.prototype.firstDateOfMonth = function (date) {\n        return new Date(date.getFullYear(), date.getMonth());\n    };\n    Gregorian.prototype.lastDateOfMonth = function (dt) {\n        return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n    };\n    Gregorian.prototype.isMonthStart = function (date) {\n        return (date.getDate() === 1);\n    };\n    Gregorian.prototype.getLeapYearDaysCount = function () {\n        return 366;\n    };\n    Gregorian.prototype.getYearDaysCount = function (date, interval) {\n        return ((date.getFullYear() + interval) % 4 === 0) ? 366 : 365;\n    };\n    Gregorian.prototype.getDate = function (date) {\n        return date.getDate();\n    };\n    Gregorian.prototype.getMonth = function (date) {\n        return (date.getMonth() + 1);\n    };\n    Gregorian.prototype.getFullYear = function (date) {\n        return date.getFullYear();\n    };\n    Gregorian.prototype.getYearLastDate = function (date, interval) {\n        return new Date(date.getFullYear() + interval, 0, 0);\n    };\n    Gregorian.prototype.getMonthDaysCount = function (date) {\n        return this.lastDateOfMonth(date).getDate();\n    };\n    Gregorian.prototype.getMonthStartDate = function (date) {\n        return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());\n    };\n    Gregorian.prototype.getMonthEndDate = function (date) {\n        date.setDate(1);\n        return new Date(date.setMonth(date.getMonth() + 1));\n    };\n    Gregorian.prototype.getExpectedDays = function (date, days) {\n        return days;\n    };\n    Gregorian.prototype.setDate = function (dateObj, date) {\n        dateObj.setDate(date);\n    };\n    Gregorian.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        if (!isNullOrUndefined(beginDate)) {\n            date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);\n        }\n        else {\n            date.setMonth(date.getMonth() + interval, startDate);\n        }\n    };\n    Gregorian.prototype.setMonth = function (date, interval, startDate) {\n        date.setFullYear(date.getFullYear());\n        date.setMonth(interval - 1);\n        date.setDate(startDate);\n    };\n    Gregorian.prototype.addYears = function (date, interval) {\n        date.setFullYear(date.getFullYear() + interval);\n    };\n    Gregorian.prototype.isSameMonth = function (date1, date2) {\n        return (date1.getMonth() === date2.getMonth());\n    };\n    Gregorian.prototype.checkMonth = function (date, months) {\n        return (months.indexOf(date.getMonth() + 1) === -1);\n    };\n    Gregorian.prototype.compareMonth = function (date1, date2) {\n        return (date1.getMonth() > date2.getMonth());\n    };\n    Gregorian.prototype.isSameYear = function (date1, date2) {\n        return (date1.getFullYear() === date2.getFullYear());\n    };\n    Gregorian.prototype.isLastMonth = function (date) {\n        return (date.getMonth() === 11);\n    };\n    Gregorian.prototype.isLeapYear = function (year, interval) {\n        return ((year + interval) % 4 === 0);\n    };\n    return Gregorian;\n}());\nexport { Gregorian };\n/** @hidden */\nvar Islamic = /** @class */ (function () {\n    function Islamic() {\n    }\n    Islamic.prototype.firstDateOfMonth = function (date) {\n        var hDate = HijriParser.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);\n        return gDate;\n    };\n    Islamic.prototype.lastDateOfMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, this.getDaysInMonth(hDate.month, hDate.year));\n        var finalGDate = new Date(gDate.getTime());\n        new Date(finalGDate.setDate(finalGDate.getDate() + 1));\n        var finalHDate = this.getHijriDate(finalGDate);\n        if (hDate.month === finalHDate.month) {\n            return finalGDate;\n        }\n        finalHDate = HijriParser.getHijriDate(gDate);\n        if (hDate.month === finalHDate.month) {\n            return gDate;\n        }\n        return new Date(gDate.setDate(gDate.getDate() - 1));\n    };\n    Islamic.prototype.isMonthStart = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return (hijriDate.date === 1);\n    };\n    Islamic.prototype.getLeapYearDaysCount = function () {\n        return 355;\n    };\n    Islamic.prototype.getYearDaysCount = function (date, interval) {\n        var hDate = this.getHijriDate(date);\n        return this.isLeapYear(hDate.year, interval) ? 355 : 354;\n    };\n    Islamic.prototype.getDate = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.month;\n    };\n    Islamic.prototype.getFullYear = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.year;\n    };\n    Islamic.prototype.getYearLastDate = function (date, interval) {\n        var hDate = HijriParser.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);\n        return gDate;\n    };\n    Islamic.prototype.getMonthDaysCount = function (date) {\n        var maxDate = this.lastDateOfMonth(date);\n        var hijriDate = this.getHijriDate(maxDate);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonthStartDate = function (date) {\n        var firstDate = this.firstDateOfMonth(date);\n        return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());\n    };\n    Islamic.prototype.getMonthEndDate = function (date) {\n        var lastDate = this.lastDateOfMonth(date);\n        lastDate.setDate(lastDate.getDate() + 1);\n        return new Date(lastDate.setMonth(lastDate.getMonth()));\n    };\n    Islamic.prototype.getExpectedDays = function (date, days) {\n        var hDate = this.getHijriDate(date);\n        var day = [];\n        for (var i = 0; i < days.length; i++) {\n            var gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[i]);\n            day.push(gDate.getDate());\n        }\n        return day;\n    };\n    Islamic.prototype.setDate = function (dateObj, date) {\n        var hDate = HijriParser.getHijriDate(dateObj);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);\n        this.updateDateObj(dateObj, gDate);\n    };\n    Islamic.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        var firstDate = (!isNullOrUndefined(beginDate)) ? this.firstDateOfMonth(beginDate) : date;\n        var hDate = HijriParser.getHijriDate(firstDate);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.setMonth = function (date, interval, startDate) {\n        var hDate = HijriParser.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.addYears = function (date, interval, monthValue) {\n        var hDate = HijriParser.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.isSameMonth = function (date1, date2) {\n        var currentHijri = this.getHijriDate(date1);\n        var tempHijri = this.getHijriDate(date2);\n        return (currentHijri.month === tempHijri.month);\n    };\n    Islamic.prototype.checkMonth = function (date, months) {\n        var hDate = this.getHijriDate(date);\n        return (months.indexOf(hDate.month) === -1);\n    };\n    Islamic.prototype.compareMonth = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.month > hDate1.month);\n    };\n    Islamic.prototype.isSameYear = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.year === hDate1.year);\n    };\n    Islamic.prototype.isLastMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return (hDate.month === 12);\n    };\n    Islamic.prototype.updateDateObj = function (date, gDate) {\n        date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());\n    };\n    Islamic.prototype.isLeapYear = function (year, interval) {\n        return (14 + 11 * (year + interval)) % 30 < 11;\n    };\n    Islamic.prototype.getDaysInMonth = function (month, year) {\n        var length = 0;\n        length = 29 + ((month + 1) % 2);\n        if (month === 11 && this.isLeapYear(year, 0)) {\n            length++;\n        }\n        return length;\n    };\n    Islamic.prototype.getHijriDate = function (date) {\n        return HijriParser.getHijriDate(date);\n    };\n    return Islamic;\n}());\nexport { Islamic };\n","/**\n * Time zone\n */\nvar Timezone = /** @class */ (function () {\n    function Timezone() {\n    }\n    Timezone.prototype.offset = function (date, timezone) {\n        var localOffset = date.getTimezoneOffset();\n        try {\n            var convertedDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));\n            if (!isNaN(convertedDate.getTime())) {\n                return ((date.getTime() - convertedDate.getTime()) / 60000) + localOffset;\n            }\n            return 0;\n        }\n        catch (error) {\n            return 0;\n        }\n    };\n    Timezone.prototype.convert = function (date, fromOffset, toOffset) {\n        if (typeof fromOffset === 'string') {\n            fromOffset = this.offset(date, fromOffset);\n        }\n        if (typeof toOffset === 'string') {\n            toOffset = this.offset(date, toOffset);\n        }\n        var fromLocalOffset = date.getTimezoneOffset();\n        date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n        var toLocalOffset = date.getTimezoneOffset();\n        return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 60000);\n    };\n    Timezone.prototype.add = function (date, timezone) {\n        return this.convert(date, date.getTimezoneOffset(), timezone);\n    };\n    Timezone.prototype.remove = function (date, timezone) {\n        return this.convert(date, timezone, date.getTimezoneOffset());\n    };\n    Timezone.prototype.removeLocalOffset = function (date) {\n        return new Date(+date - (date.getTimezoneOffset() * 60000));\n    };\n    Timezone.prototype.getLocalTimezoneName = function () {\n        return window.Intl ?\n            Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC' : 'UTC';\n    };\n    return Timezone;\n}());\nexport { Timezone };\nexport var timezoneData = [\n    { Value: 'Pacific/Niue', Text: '(UTC-11:00) Niue' },\n    { Value: 'Pacific/Pago_Pago', Text: '(UTC-11:00) Pago Pago' },\n    { Value: 'Pacific/Honolulu', Text: '(UTC-10:00) Hawaii Time' },\n    { Value: 'Pacific/Rarotonga', Text: '(UTC-10:00) Rarotonga' },\n    { Value: 'Pacific/Tahiti', Text: '(UTC-10:00) Tahiti' },\n    { Value: 'Pacific/Marquesas', Text: '(UTC-09:30) Marquesas' },\n    { Value: 'America/Anchorage', Text: '(UTC-09:00) Alaska Time' },\n    { Value: 'Pacific/Gambier', Text: '(UTC-09:00) Gambier' },\n    { Value: 'America/Los_Angeles', Text: '(UTC-08:00) Pacific Time' },\n    { Value: 'America/Tijuana', Text: '(UTC-08:00) Pacific Time - Tijuana' },\n    { Value: 'America/Vancouver', Text: '(UTC-08:00) Pacific Time - Vancouver' },\n    { Value: 'America/Whitehorse', Text: '(UTC-08:00) Pacific Time - Whitehorse' },\n    { Value: 'Pacific/Pitcairn', Text: '(UTC-08:00) Pitcairn' },\n    { Value: 'America/Denver', Text: '(UTC-07:00) Mountain Time' },\n    { Value: 'America/Phoenix', Text: '(UTC-07:00) Mountain Time - Arizona' },\n    { Value: 'America/Mazatlan', Text: '(UTC-07:00) Mountain Time - Chihuahua, Mazatlan' },\n    { Value: 'America/Dawson_Creek', Text: '(UTC-07:00) Mountain Time - Dawson Creek' },\n    { Value: 'America/Edmonton', Text: '(UTC-07:00) Mountain Time - Edmonton' },\n    { Value: 'America/Hermosillo', Text: '(UTC-07:00) Mountain Time - Hermosillo' },\n    { Value: 'America/Yellowknife', Text: '(UTC-07:00) Mountain Time - Yellowknife' },\n    { Value: 'America/Belize', Text: '(UTC-06:00) Belize' },\n    { Value: 'America/Chicago', Text: '(UTC-06:00) Central Time' },\n    { Value: 'America/Mexico_City', Text: '(UTC-06:00) Central Time - Mexico City' },\n    { Value: 'America/Regina', Text: '(UTC-06:00) Central Time - Regina' },\n    { Value: 'America/Tegucigalpa', Text: '(UTC-06:00) Central Time - Tegucigalpa' },\n    { Value: 'America/Winnipeg', Text: '(UTC-06:00) Central Time - Winnipeg' },\n    { Value: 'America/Costa_Rica', Text: '(UTC-06:00) Costa Rica' },\n    { Value: 'America/El_Salvador', Text: '(UTC-06:00) El Salvador' },\n    { Value: 'Pacific/Galapagos', Text: '(UTC-06:00) Galapagos' },\n    { Value: 'America/Guatemala', Text: '(UTC-06:00) Guatemala' },\n    { Value: 'America/Managua', Text: '(UTC-06:00) Managua' },\n    { Value: 'America/Cancun', Text: '(UTC-05:00) America Cancun' },\n    { Value: 'America/Bogota', Text: '(UTC-05:00) Bogota' },\n    { Value: 'Pacific/Easter', Text: '(UTC-05:00) Easter Island' },\n    { Value: 'America/New_York', Text: '(UTC-05:00) Eastern Time' },\n    { Value: 'America/Iqaluit', Text: '(UTC-05:00) Eastern Time - Iqaluit' },\n    { Value: 'America/Toronto', Text: '(UTC-05:00) Eastern Time - Toronto' },\n    { Value: 'America/Guayaquil', Text: '(UTC-05:00) Guayaquil' },\n    { Value: 'America/Havana', Text: '(UTC-05:00) Havana' },\n    { Value: 'America/Jamaica', Text: '(UTC-05:00) Jamaica' },\n    { Value: 'America/Lima', Text: '(UTC-05:00) Lima' },\n    { Value: 'America/Nassau', Text: '(UTC-05:00) Nassau' },\n    { Value: 'America/Panama', Text: '(UTC-05:00) Panama' },\n    { Value: 'America/Port-au-Prince', Text: '(UTC-05:00) Port-au-Prince' },\n    { Value: 'America/Rio_Branco', Text: '(UTC-05:00) Rio Branco' },\n    { Value: 'America/Halifax', Text: '(UTC-04:00) Atlantic Time - Halifax' },\n    { Value: 'America/Barbados', Text: '(UTC-04:00) Barbados' },\n    { Value: 'Atlantic/Bermuda', Text: '(UTC-04:00) Bermuda' },\n    { Value: 'America/Boa_Vista', Text: '(UTC-04:00) Boa Vista' },\n    { Value: 'America/Caracas', Text: '(UTC-04:00) Caracas' },\n    { Value: 'America/Curacao', Text: '(UTC-04:00) Curacao' },\n    { Value: 'America/Grand_Turk', Text: '(UTC-04:00) Grand Turk' },\n    { Value: 'America/Guyana', Text: '(UTC-04:00) Guyana' },\n    { Value: 'America/La_Paz', Text: '(UTC-04:00) La Paz' },\n    { Value: 'America/Manaus', Text: '(UTC-04:00) Manaus' },\n    { Value: 'America/Martinique', Text: '(UTC-04:00) Martinique' },\n    { Value: 'America/Port_of_Spain', Text: '(UTC-04:00) Port of Spain' },\n    { Value: 'America/Porto_Velho', Text: '(UTC-04:00) Porto Velho' },\n    { Value: 'America/Puerto_Rico', Text: '(UTC-04:00) Puerto Rico' },\n    { Value: 'America/Santo_Domingo', Text: '(UTC-04:00) Santo Domingo' },\n    { Value: 'America/Thule', Text: '(UTC-04:00) Thule' },\n    { Value: 'America/St_Johns', Text: '(UTC-03:30) Newfoundland Time - St. Johns' },\n    { Value: 'America/Araguaina', Text: '(UTC-03:00) Araguaina' },\n    { Value: 'America/Asuncion', Text: '(UTC-03:00) Asuncion' },\n    { Value: 'America/Belem', Text: '(UTC-03:00) Belem' },\n    { Value: 'America/Argentina/Buenos_Aires', Text: '(UTC-03:00) Buenos Aires' },\n    { Value: 'America/Campo_Grande', Text: '(UTC-03:00) Campo Grande' },\n    { Value: 'America/Cayenne', Text: '(UTC-03:00) Cayenne' },\n    { Value: 'America/Cuiaba', Text: '(UTC-03:00) Cuiaba' },\n    { Value: 'America/Fortaleza', Text: '(UTC-03:00) Fortaleza' },\n    { Value: 'America/Godthab', Text: '(UTC-03:00) Godthab' },\n    { Value: 'America/Maceio', Text: '(UTC-03:00) Maceio' },\n    { Value: 'America/Miquelon', Text: '(UTC-03:00) Miquelon' },\n    { Value: 'America/Montevideo', Text: '(UTC-03:00) Montevideo' },\n    { Value: 'Antarctica/Palmer', Text: '(UTC-03:00) Palmer' },\n    { Value: 'America/Paramaribo', Text: '(UTC-03:00) Paramaribo' },\n    { Value: 'America/Punta_Arenas', Text: '(UTC-03:00) Punta Arenas' },\n    { Value: 'America/Recife', Text: '(UTC-03:00) Recife' },\n    { Value: 'Antarctica/Rothera', Text: '(UTC-03:00) Rothera' },\n    { Value: 'America/Bahia', Text: '(UTC-03:00) Salvador' },\n    { Value: 'America/Santiago', Text: '(UTC-03:00) Santiago' },\n    { Value: 'Atlantic/Stanley', Text: '(UTC-03:00) Stanley' },\n    { Value: 'America/Noronha', Text: '(UTC-02:00) Noronha' },\n    { Value: 'America/Sao_Paulo', Text: '(UTC-02:00) Sao Paulo' },\n    { Value: 'Atlantic/South_Georgia', Text: '(UTC-02:00) South Georgia' },\n    { Value: 'Atlantic/Azores', Text: '(UTC-01:00) Azores' },\n    { Value: 'Atlantic/Cape_Verde', Text: '(UTC-01:00) Cape Verde' },\n    { Value: 'America/Scoresbysund', Text: '(UTC-01:00) Scoresbysund' },\n    { Value: 'Africa/Abidjan', Text: '(UTC+00:00) Abidjan' },\n    { Value: 'Africa/Accra', Text: '(UTC+00:00) Accra' },\n    { Value: 'Africa/Bissau', Text: '(UTC+00:00) Bissau' },\n    { Value: 'Atlantic/Canary', Text: '(UTC+00:00) Canary Islands' },\n    { Value: 'Africa/Casablanca', Text: '(UTC+00:00) Casablanca' },\n    { Value: 'America/Danmarkshavn', Text: '(UTC+00:00) Danmarkshavn' },\n    { Value: 'Europe/Dublin', Text: '(UTC+00:00) Dublin' },\n    { Value: 'Africa/El_Aaiun', Text: '(UTC+00:00) El Aaiun' },\n    { Value: 'Atlantic/Faroe', Text: '(UTC+00:00) Faeroe' },\n    { Value: 'Etc/UTC', Text: '(UTC+00:00) UTC (no daylight saving)' },\n    { Value: 'Europe/Lisbon', Text: '(UTC+00:00) Lisbon' },\n    { Value: 'Europe/London', Text: '(UTC+00:00) London' },\n    { Value: 'Africa/Monrovia', Text: '(UTC+00:00) Monrovia' },\n    { Value: 'Atlantic/Reykjavik', Text: '(UTC+00:00) Reykjavik' },\n    { Value: 'UTC', Text: 'UTC' },\n    { Value: 'Africa/Algiers', Text: '(UTC+01:00) Algiers' },\n    { Value: 'Europe/Amsterdam', Text: '(UTC+01:00) Amsterdam' },\n    { Value: 'Europe/Andorra', Text: '(UTC+01:00) Andorra' },\n    { Value: 'Europe/Berlin', Text: '(UTC+01:00) Berlin' },\n    { Value: 'Europe/Brussels', Text: '(UTC+01:00) Brussels' },\n    { Value: 'Europe/Budapest', Text: '(UTC+01:00) Budapest' },\n    { Value: 'Europe/Belgrade', Text: '(UTC+01:00) Central European Time - Belgrade' },\n    { Value: 'Europe/Prague', Text: '(UTC+01:00) Central European Time - Prague' },\n    { Value: 'Africa/Ceuta', Text: '(UTC+01:00) Ceuta' },\n    { Value: 'Europe/Copenhagen', Text: '(UTC+01:00) Copenhagen' },\n    { Value: 'Europe/Gibraltar', Text: '(UTC+01:00) Gibraltar' },\n    { Value: 'Africa/Lagos', Text: '(UTC+01:00) Lagos' },\n    { Value: 'Europe/Luxembourg', Text: '(UTC+01:00) Luxembourg' },\n    { Value: 'Europe/Madrid', Text: '(UTC+01:00) Madrid' },\n    { Value: 'Europe/Malta', Text: '(UTC+01:00) Malta' },\n    { Value: 'Europe/Monaco', Text: '(UTC+01:00) Monaco' },\n    { Value: 'Africa/Ndjamena', Text: '(UTC+01:00) Ndjamena' },\n    { Value: 'Europe/Oslo', Text: '(UTC+01:00) Oslo' },\n    { Value: 'Europe/Paris', Text: '(UTC+01:00) Paris' },\n    { Value: 'Europe/Rome', Text: '(UTC+01:00) Rome' },\n    { Value: 'Europe/Stockholm', Text: '(UTC+01:00) Stockholm' },\n    { Value: 'Europe/Tirane', Text: '(UTC+01:00) Tirane' },\n    { Value: 'Africa/Tunis', Text: '(UTC+01:00) Tunis' },\n    { Value: 'Europe/Vienna', Text: '(UTC+01:00) Vienna' },\n    { Value: 'Europe/Warsaw', Text: '(UTC+01:00) Warsaw' },\n    { Value: 'Europe/Zurich', Text: '(UTC+01:00) Zurich' },\n    { Value: 'Asia/Amman', Text: '(UTC+02:00) Amman' },\n    { Value: 'Europe/Athens', Text: '(UTC+02:00) Athens' },\n    { Value: 'Asia/Beirut', Text: '(UTC+02:00) Beirut' },\n    { Value: 'Europe/Bucharest', Text: '(UTC+02:00) Bucharest' },\n    { Value: 'Africa/Cairo', Text: '(UTC+02:00) Cairo' },\n    { Value: 'Europe/Chisinau', Text: '(UTC+02:00) Chisinau' },\n    { Value: 'Asia/Damascus', Text: '(UTC+02:00) Damascus' },\n    { Value: 'Asia/Gaza', Text: '(UTC+02:00) Gaza' },\n    { Value: 'Europe/Helsinki', Text: '(UTC+02:00) Helsinki' },\n    { Value: 'Asia/Jerusalem', Text: '(UTC+02:00) Jerusalem' },\n    { Value: 'Africa/Johannesburg', Text: '(UTC+02:00) Johannesburg' },\n    { Value: 'Africa/Khartoum', Text: '(UTC+02:00) Khartoum' },\n    { Value: 'Europe/Kiev', Text: '(UTC+02:00) Kiev' },\n    { Value: 'Africa/Maputo', Text: '(UTC+02:00) Maputo' },\n    { Value: 'Europe/Kaliningrad', Text: '(UTC+02:00) Moscow-01 - Kaliningrad' },\n    { Value: 'Asia/Nicosia', Text: '(UTC+02:00) Nicosia' },\n    { Value: 'Europe/Riga', Text: '(UTC+02:00) Riga' },\n    { Value: 'Europe/Sofia', Text: '(UTC+02:00) Sofia' },\n    { Value: 'Europe/Tallinn', Text: '(UTC+02:00) Tallinn' },\n    { Value: 'Africa/Tripoli', Text: '(UTC+02:00) Tripoli' },\n    { Value: 'Europe/Vilnius', Text: '(UTC+02:00) Vilnius' },\n    { Value: 'Africa/Windhoek', Text: '(UTC+02:00) Windhoek' },\n    { Value: 'Asia/Baghdad', Text: '(UTC+03:00) Baghdad' },\n    { Value: 'Europe/Istanbul', Text: '(UTC+03:00) Istanbul' },\n    { Value: 'Europe/Minsk', Text: '(UTC+03:00) Minsk' },\n    { Value: 'Europe/Moscow', Text: '(UTC+03:00) Moscow+00 - Moscow' },\n    { Value: 'Africa/Nairobi', Text: '(UTC+03:00) Nairobi' },\n    { Value: 'Asia/Qatar', Text: '(UTC+03:00) Qatar' },\n    { Value: 'Asia/Riyadh', Text: '(UTC+03:00) Riyadh' },\n    { Value: 'Antarctica/Syowa', Text: '(UTC+03:00) Syowa' },\n    { Value: 'Asia/Tehran', Text: '(UTC+03:30) Tehran' },\n    { Value: 'Asia/Baku', Text: '(UTC+04:00) Baku' },\n    { Value: 'Asia/Dubai', Text: '(UTC+04:00) Dubai' },\n    { Value: 'Indian/Mahe', Text: '(UTC+04:00) Mahe' },\n    { Value: 'Indian/Mauritius', Text: '(UTC+04:00) Mauritius' },\n    { Value: 'Europe/Samara', Text: '(UTC+04:00) Moscow+01 - Samara' },\n    { Value: 'Indian/Reunion', Text: '(UTC+04:00) Reunion' },\n    { Value: 'Asia/Tbilisi', Text: '(UTC+04:00) Tbilisi' },\n    { Value: 'Asia/Yerevan', Text: '(UTC+04:00) Yerevan' },\n    { Value: 'Asia/Kabul', Text: '(UTC+04:30) Kabul' },\n    { Value: 'Asia/Aqtau', Text: '(UTC+05:00) Aqtau' },\n    { Value: 'Asia/Aqtobe', Text: '(UTC+05:00) Aqtobe' },\n    { Value: 'Asia/Ashgabat', Text: '(UTC+05:00) Ashgabat' },\n    { Value: 'Asia/Dushanbe', Text: '(UTC+05:00) Dushanbe' },\n    { Value: 'Asia/Karachi', Text: '(UTC+05:00) Karachi' },\n    { Value: 'Indian/Kerguelen', Text: '(UTC+05:00) Kerguelen' },\n    { Value: 'Indian/Maldives', Text: '(UTC+05:00) Maldives' },\n    { Value: 'Antarctica/Mawson', Text: '(UTC+05:00) Mawson' },\n    { Value: 'Asia/Yekaterinburg', Text: '(UTC+05:00) Moscow+02 - Yekaterinburg' },\n    { Value: 'Asia/Tashkent', Text: '(UTC+05:00) Tashkent' },\n    { Value: 'Asia/Colombo', Text: '(UTC+05:30) Colombo' },\n    { Value: 'Asia/Kolkata', Text: '(UTC+05:30) India Standard Time' },\n    { Value: 'Asia/Katmandu', Text: '(UTC+05:45) Katmandu' },\n    { Value: 'Asia/Almaty', Text: '(UTC+06:00) Almaty' },\n    { Value: 'Asia/Bishkek', Text: '(UTC+06:00) Bishkek' },\n    { Value: 'Indian/Chagos', Text: '(UTC+06:00) Chagos' },\n    { Value: 'Asia/Dhaka', Text: '(UTC+06:00) Dhaka' },\n    { Value: 'Asia/Omsk', Text: '(UTC+06:00) Moscow+03 - Omsk' },\n    { Value: 'Asia/Thimphu', Text: '(UTC+06:00) Thimphu' },\n    { Value: 'Antarctica/Vostok', Text: '(UTC+06:00) Vostok' },\n    { Value: 'Indian/Cocos', Text: '(UTC+06:30) Cocos' },\n    { Value: 'Asia/Yangon', Text: '(UTC+06:30) Rangoon' },\n    { Value: 'Asia/Bangkok', Text: '(UTC+07:00) Bangkok' },\n    { Value: 'Indian/Christmas', Text: '(UTC+07:00) Christmas' },\n    { Value: 'Antarctica/Davis', Text: '(UTC+07:00) Davis' },\n    { Value: 'Asia/Saigon', Text: '(UTC+07:00) Hanoi' },\n    { Value: 'Asia/Hovd', Text: '(UTC+07:00) Hovd' },\n    { Value: 'Asia/Jakarta', Text: '(UTC+07:00) Jakarta' },\n    { Value: 'Asia/Krasnoyarsk', Text: '(UTC+07:00) Moscow+04 - Krasnoyarsk' },\n    { Value: 'Asia/Brunei', Text: '(UTC+08:00) Brunei' },\n    { Value: 'Asia/Shanghai', Text: '(UTC+08:00) China Time - Beijing' },\n    { Value: 'Asia/Choibalsan', Text: '(UTC+08:00) Choibalsan' },\n    { Value: 'Asia/Hong_Kong', Text: '(UTC+08:00) Hong Kong' },\n    { Value: 'Asia/Kuala_Lumpur', Text: '(UTC+08:00) Kuala Lumpur' },\n    { Value: 'Asia/Macau', Text: '(UTC+08:00) Macau' },\n    { Value: 'Asia/Makassar', Text: '(UTC+08:00) Makassar' },\n    { Value: 'Asia/Manila', Text: '(UTC+08:00) Manila' },\n    { Value: 'Asia/Irkutsk', Text: '(UTC+08:00) Moscow+05 - Irkutsk' },\n    { Value: 'Asia/Singapore', Text: '(UTC+08:00) Singapore' },\n    { Value: 'Asia/Taipei', Text: '(UTC+08:00) Taipei' },\n    { Value: 'Asia/Ulaanbaatar', Text: '(UTC+08:00) Ulaanbaatar' },\n    { Value: 'Australia/Perth', Text: '(UTC+08:00) Western Time - Perth' },\n    { Value: 'Asia/Pyongyang', Text: '(UTC+08:30) Pyongyang' },\n    { Value: 'Asia/Dili', Text: '(UTC+09:00) Dili' },\n    { Value: 'Asia/Jayapura', Text: '(UTC+09:00) Jayapura' },\n    { Value: 'Asia/Yakutsk', Text: '(UTC+09:00) Moscow+06 - Yakutsk' },\n    { Value: 'Pacific/Palau', Text: '(UTC+09:00) Palau' },\n    { Value: 'Asia/Seoul', Text: '(UTC+09:00) Seoul' },\n    { Value: 'Asia/Tokyo', Text: '(UTC+09:00) Tokyo' },\n    { Value: 'Australia/Darwin', Text: '(UTC+09:30) Central Time - Darwin' },\n    { Value: 'Antarctica/DumontDUrville', Text: '(UTC+10:00) Dumont D\"Urville' },\n    { Value: 'Australia/Brisbane', Text: '(UTC+10:00) Eastern Time - Brisbane' },\n    { Value: 'Pacific/Guam', Text: '(UTC+10:00) Guam' },\n    { Value: 'Asia/Vladivostok', Text: '(UTC+10:00) Moscow+07 - Vladivostok' },\n    { Value: 'Pacific/Port_Moresby', Text: '(UTC+10:00) Port Moresby' },\n    { Value: 'Pacific / Chuuk', Text: '(UTC+10:00) Truk' },\n    { Value: 'Australia/Adelaide', Text: '(UTC+10:30) Central Time - Adelaide' },\n    { Value: 'Antarctica/Casey', Text: '(UTC+11:00) Casey' },\n    { Value: 'Australia/Hobart', Text: '(UTC+11:00) Eastern Time - Hobart' },\n    { Value: 'Australia/Sydney', Text: '(UTC+11:00) Eastern Time - Melbourne, Sydney' },\n    { Value: 'Pacific/Efate', Text: '(UTC+11:00) Efate' },\n    { Value: 'Pacific/Guadalcanal', Text: '(UTC+11:00) Guadalcanal' },\n    { Value: 'Pacific/Kosrae', Text: '(UTC+11:00) Kosrae' },\n    { Value: 'Asia/Magadan', Text: '(UTC+11:00) Moscow+08 - Magadan' },\n    { Value: 'Pacific / Norfolk', Text: '(UTC+11:00) Norfolk' },\n    { Value: 'Pacific/Noumea', Text: '(UTC+11:00) Noumea' },\n    { Value: 'Pacific/Pohnpei', Text: '(UTC+11:00) Ponape' },\n    { Value: 'Pacific/Funafuti', Text: '(UTC+12:00) Funafuti' },\n    { Value: 'Pacific/Kwajalein', Text: '(UTC+12:00) Kwajalein' },\n    { Value: 'Pacific/Majuro', Text: '(UTC+12:00) Majuro' },\n    { Value: 'Asia/Kamchatka', Text: '(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy' },\n    { Value: 'Pacific / Nauru', Text: '(UTC+12:00) Nauru' },\n    { Value: 'Pacific/Tarawa', Text: '(UTC+12:00) Tarawa' },\n    { Value: 'Pacific/Wake', Text: '(UTC+12:00) Wake' },\n    { Value: 'Pacific/Wallis', Text: '(UTC+12:00) Wallis' },\n    { Value: 'Pacific/Auckland', Text: '(UTC+13:00) Auckland' },\n    { Value: 'Pacific/Enderbury', Text: '(UTC+13:00) Enderbury' },\n    { Value: 'Pacific/Fakaofo', Text: '(UTC+13:00) Fakaofo' },\n    { Value: 'Pacific/Fiji', Text: '(UTC+13:00) Fiji' },\n    { Value: 'Pacific/Tongatapu', Text: '(UTC+13:00) Tongatapu' },\n    { Value: 'Pacific/Apia', Text: '(UTC+14:00) Apia' },\n    { Value: 'Pacific/Kiritimati', Text: '(UTC+14:00) Kiritimati' }\n];\n","import { isNullOrUndefined, closest, extend, EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, prepend, append, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\nimport { generate, getDateFromRecurrenceDateString } from '../../recurrence-editor/date-generator';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\n/**\n * EventBase for appointment rendering\n */\nvar EventBase = /** @class */ (function () {\n    /**\n     * Constructor for EventBase\n     */\n    function EventBase(parent) {\n        this.slots = [];\n        this.isDoubleTapped = false;\n        this.parent = parent;\n    }\n    EventBase.prototype.processData = function (events, timeZonePropChanged, oldTimezone) {\n        var _this = this;\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var fields = this.parent.eventFields;\n        var processed = [];\n        var temp = 1;\n        var generateID = false;\n        var resourceCollection = this.parent.resourceBase ? this.parent.resourceBase.resourceCollection : [];\n        if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {\n            generateID = true;\n        }\n        var _loop_1 = function (event_1) {\n            if (generateID) {\n                event_1[fields.id] = temp++;\n            }\n            if (typeof event_1[fields.startTime] === 'string') {\n                event_1[fields.startTime] = util.getDateFromString(event_1[fields.startTime]);\n            }\n            if (typeof event_1[fields.endTime] === 'string') {\n                event_1[fields.endTime] = util.getDateFromString(event_1[fields.endTime]);\n            }\n            if (timeZonePropChanged) {\n                this_1.processTimezoneChange(event_1, oldTimezone);\n            }\n            else {\n                event_1 = this_1.processTimezone(event_1);\n            }\n            for (var level = 0; level < resourceCollection.length; level++) {\n                if (event_1[resourceCollection[level].field] === null || event_1[resourceCollection[level].field] === 0) {\n                    event_1[resourceCollection[level].field] = undefined;\n                }\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && event_1[fields.recurrenceRule] === '') {\n                event_1[fields.recurrenceRule] = null;\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID]) &&\n                !(this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction)) {\n                processed = processed.concat(this_1.generateOccurrence(event_1, null, oldTimezone, true));\n            }\n            else {\n                if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction) {\n                    var recEvent = void 0;\n                    var app = void 0;\n                    if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID])) {\n                        recEvent = this_1.generateOccurrence(event_1, null, oldTimezone, true);\n                        for (var k = 0; k < recEvent.length; k++) {\n                            event_1 = recEvent[k];\n                            app = this_1.parent.eventsProcessed.filter(function (data) {\n                                return (data[_this.parent.eventFields.startTime].getTime() -\n                                    event_1[_this.parent.eventFields.startTime].getTime() === 0 &&\n                                    data[_this.parent.eventFields.id] === event_1[_this.parent.eventFields.id]);\n                            });\n                            event_1.Guid = (app.length > 0) ? app[0].Guid : this_1.generateGuid();\n                            processed.push(event_1);\n                        }\n                    }\n                    else {\n                        app = this_1.parent.eventsProcessed.filter(function (data) {\n                            return data[_this.parent.eventFields.id] === event_1[_this.parent.eventFields.id];\n                        });\n                        event_1.Guid = (app.length > 0) ? app[0].Guid : this_1.generateGuid();\n                        processed.push(event_1);\n                    }\n                }\n                else {\n                    event_1.Guid = this_1.generateGuid();\n                    processed.push(event_1);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            _loop_1(event_1);\n        }\n        this.parent.eventsProcessed = [];\n        var eventData = processed.filter(function (data) { return !data[_this.parent.eventFields.isBlock]; });\n        this.parent.eventsProcessed = this.filterEvents(start, end, eventData);\n        var blockData = processed.filter(function (data) { return data[_this.parent.eventFields.isBlock]; });\n        for (var i = 0, len = blockData.length; i < len; i++) {\n            var eventObj = blockData[i];\n            if (eventObj[fields.isAllDay]) {\n                var isDifferentDate = util.resetTime(new Date(eventObj[fields.startTime].getTime())) <\n                    util.resetTime(new Date(eventObj[fields.endTime].getTime()));\n                if (!isDifferentDate) {\n                    eventObj[fields.startTime] = util.resetTime(eventObj[fields.startTime]);\n                    eventObj[fields.endTime] = util.addDays(util.resetTime(eventObj[fields.endTime]), 1);\n                }\n            }\n        }\n        this.parent.blockProcessed = blockData;\n        return eventData;\n    };\n    EventBase.prototype.getProcessedEvents = function (eventCollection) {\n        if (eventCollection === void 0) { eventCollection = this.parent.eventsData; }\n        var processed = [];\n        for (var _i = 0, _a = eventCollection; _i < _a.length; _i++) {\n            var event_2 = _a[_i];\n            if (!isNullOrUndefined(event_2[this.parent.eventFields.recurrenceRule]) &&\n                isNullOrUndefined(event_2[this.parent.eventFields.recurrenceID])) {\n                processed = processed.concat(this.generateOccurrence(event_2));\n            }\n            else {\n                processed.push(event_2);\n            }\n        }\n        return processed;\n    };\n    EventBase.prototype.timezonePropertyChange = function (oldTimezone) {\n        var data = this.parent.eventsData.concat(this.parent.blockData);\n        var processed = this.processData(data, true, oldTimezone);\n        this.parent.notify(event.dataReady, { processedData: processed });\n    };\n    /** @private */\n    EventBase.prototype.timezoneConvert = function (eventData) {\n        var fields = this.parent.eventFields;\n        eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];\n        eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];\n        if (this.parent.timezone) {\n            var startTz = eventData[fields.startTimezone];\n            var endTz = eventData[fields.endTimezone];\n            eventData[fields.startTime] = this.parent.tzModule.convert(eventData[fields.startTime], this.parent.timezone, startTz);\n            eventData[fields.endTime] = this.parent.tzModule.convert(eventData[fields.endTime], this.parent.timezone, endTz);\n        }\n    };\n    EventBase.prototype.processTimezoneChange = function (event, oldTimezone) {\n        var fields = this.parent.eventFields;\n        if (event[fields.isAllDay]) {\n            return;\n        }\n        if (oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], oldTimezone, this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], oldTimezone, this.parent.timezone);\n        }\n        else if (!oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n        }\n        else if (oldTimezone && !this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], oldTimezone);\n            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], oldTimezone);\n        }\n    };\n    EventBase.prototype.processTimezone = function (event, isReverse) {\n        if (isReverse === void 0) { isReverse = false; }\n        var fields = this.parent.eventFields;\n        if (event[fields.startTimezone] || event[fields.endTimezone]) {\n            var startTimezone = event[fields.startTimezone] || event[fields.endTimezone];\n            var endTimezone = event[fields.endTimezone] || event[fields.startTimezone];\n            if (isReverse) {\n                if (this.parent.timezone) {\n                    event[fields.startTime] =\n                        this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n                }\n                else {\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], startTimezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], endTimezone);\n                }\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], startTimezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], endTimezone);\n                if (this.parent.timezone) {\n                    event[fields.startTime] =\n                        this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                }\n            }\n        }\n        else if (this.parent.timezone) {\n            if (isReverse) {\n                event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n            }\n        }\n        return event;\n    };\n    EventBase.prototype.filterBlockEvents = function (eventObj) {\n        var eStart = eventObj[this.parent.eventFields.startTime];\n        var eEnd = eventObj[this.parent.eventFields.endTime];\n        var resourceData;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var data = this.getGroupIndexFromEvent(eventObj);\n            resourceData = this.parent.resourceBase.lastResourceLevel[data];\n        }\n        return this.filterEvents(eStart, eEnd, this.parent.blockProcessed, resourceData);\n    };\n    EventBase.prototype.filterEvents = function (startDate, endDate, appointments, resourceTdData) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var fieldMapping = this.parent.eventFields;\n        var predicate = new Predicate(fieldMapping.startTime, 'greaterthanorequal', startDate).\n            and(new Predicate(fieldMapping.endTime, 'greaterthanorequal', startDate)).\n            and(new Predicate(fieldMapping.startTime, 'lessthan', endDate)).\n            or(new Predicate(fieldMapping.startTime, 'lessthanorequal', startDate).\n            and(new Predicate(fieldMapping.endTime, 'greaterthan', startDate)));\n        var filter = new DataManager({ json: appointments }).executeLocal(new Query().where(predicate));\n        if (resourceTdData) {\n            filter = this.filterEventsByResource(resourceTdData, filter);\n        }\n        return this.sortByTime(filter);\n    };\n    EventBase.prototype.filterEventsByRange = function (eventCollection, startDate, endDate) {\n        var _this = this;\n        var filteredEvents = [];\n        if (startDate && endDate) {\n            filteredEvents = this.filterEvents(startDate, endDate, eventCollection);\n        }\n        else if (startDate && !endDate) {\n            filteredEvents = eventCollection.filter(function (e) { return e[_this.parent.eventFields.startTime] >= startDate; });\n        }\n        else if (!startDate && endDate) {\n            filteredEvents = eventCollection.filter(function (e) { return e[_this.parent.eventFields.endTime] <= endDate; });\n        }\n        else {\n            filteredEvents = eventCollection;\n        }\n        return this.sortByTime(filteredEvents);\n    };\n    EventBase.prototype.filterEventsByResource = function (resourceTdData, appointments) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var predicate = {};\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var level = 0; level < resourceCollection.length; level++) {\n            predicate[resourceCollection[level].field] = resourceTdData.groupOrder[level];\n        }\n        var keys = Object.keys(predicate);\n        var filteredCollection = appointments.filter(function (eventObj) { return keys.every(function (key) {\n            if (eventObj[key] instanceof Array) {\n                return eventObj[key].indexOf(predicate[key]) > -1;\n            }\n            else {\n                return eventObj[key] === predicate[key];\n            }\n        }); });\n        return filteredCollection;\n    };\n    EventBase.prototype.sortByTime = function (appointments) {\n        var fieldMapping = this.parent.eventFields;\n        appointments.sort(function (a, b) {\n            var d1 = a[fieldMapping.startTime];\n            var d2 = b[fieldMapping.startTime];\n            return d1.getTime() - d2.getTime();\n        });\n        return appointments;\n    };\n    EventBase.prototype.sortByDateTime = function (appointments) {\n        var fieldMapping = this.parent.eventFields;\n        appointments.sort(function (object1, object2) {\n            var d3 = object1[fieldMapping.startTime];\n            var d4 = object2[fieldMapping.startTime];\n            var d5 = object1[fieldMapping.endTime];\n            var d6 = object2[fieldMapping.endTime];\n            var d1 = d5.getTime() - d3.getTime();\n            var d2 = d6.getTime() - d4.getTime();\n            return (d3.getTime() - d4.getTime() || d2 - d1);\n        });\n        return appointments;\n    };\n    EventBase.prototype.getSmallestMissingNumber = function (array) {\n        var large = Math.max.apply(Math, array);\n        for (var i = 0; i < large; i++) {\n            if (array.indexOf(i) === -1) {\n                return i;\n            }\n        }\n        return large + 1;\n    };\n    EventBase.prototype.splitEventByDay = function (event) {\n        var eventFields = this.parent.eventFields;\n        var data = [];\n        var eventStartTime = event[eventFields.startTime];\n        var eventEndTime = event[eventFields.endTime];\n        var isDifferentDate = util.resetTime(new Date(eventStartTime.getTime())) <\n            util.resetTime(new Date(eventEndTime.getTime()));\n        if (isDifferentDate) {\n            var start = new Date(eventStartTime.getTime());\n            var end = util.addDays(util.resetTime(new Date(eventStartTime.getTime())), 1);\n            var endDate = (eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0) ?\n                eventEndTime : util.addDays(eventEndTime, 1);\n            var index = 1;\n            var eventLength = util.getDaysCount(eventStartTime.getTime(), endDate.getTime());\n            while (end <= eventEndTime && start.getTime() !== end.getTime()) {\n                var app = extend({}, event);\n                app[eventFields.startTime] = start;\n                app[eventFields.endTime] = end;\n                app.data = { index: index, count: eventLength };\n                app.Guid = this.generateGuid();\n                app.isSpanned = true;\n                data.push(app);\n                start = end;\n                if ((util.resetTime(new Date(start.getTime())).getTime() === util.resetTime(new Date(eventEndTime.getTime())).getTime())\n                    && !(end.getTime() === eventEndTime.getTime())) {\n                    end = new Date(start.getTime());\n                    end = new Date(end.setHours(eventEndTime.getHours(), eventEndTime.getMinutes(), eventEndTime.getSeconds()));\n                }\n                else {\n                    end = util.addDays(util.resetTime(new Date(start.getTime())), 1);\n                }\n                index++;\n            }\n        }\n        else {\n            data.push(event);\n        }\n        return data;\n    };\n    EventBase.prototype.splitEvent = function (event, dateRender) {\n        var fields = this.parent.eventFields;\n        var start = util.resetTime(new Date(event[fields.startTime] + '')).getTime();\n        var end = util.resetTime(new Date(event[fields.endTime] + '')).getTime();\n        if (util.getDateInMs(event[fields.endTime]) <= 0) {\n            var temp = util.addDays(util.resetTime(new Date(event[fields.endTime] + '')), -1).getTime();\n            end = start > temp ? start : temp;\n        }\n        var orgStart = start;\n        var orgEnd = end;\n        var ranges = [];\n        if (start !== end) {\n            if (start < dateRender[0].getTime()) {\n                start = dateRender[0].getTime();\n            }\n            if (end > dateRender[dateRender.length - 1].getTime()) {\n                end = dateRender[dateRender.length - 1].getTime();\n            }\n            var cStart = start;\n            for (var level = 0; level < this.slots.length; level++) {\n                var slot = this.slots[level];\n                if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek'\n                    || this.parent.activeViewOptions.group.byDate || this.parent.activeViewOptions.showWeekend) {\n                    var slotDates = [];\n                    for (var _i = 0, slot_1 = slot; _i < slot_1.length; _i++) {\n                        var s = slot_1[_i];\n                        slotDates.push(new Date(s));\n                    }\n                    var renderedDates = this.getRenderedDates(slotDates);\n                    if (!isNullOrUndefined(renderedDates) && renderedDates.length > 0) {\n                        slot = [];\n                        for (var _a = 0, renderedDates_1 = renderedDates; _a < renderedDates_1.length; _a++) {\n                            var date = renderedDates_1[_a];\n                            slot.push(date.getTime());\n                        }\n                    }\n                }\n                var firstSlot = slot[0];\n                cStart = (cStart <= firstSlot && end >= firstSlot) ? firstSlot : cStart;\n                if (cStart > end || firstSlot > end) {\n                    break;\n                }\n                if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend &&\n                    this.parent.currentView !== 'WorkWeek' && this.parent.currentView !== 'TimelineWorkWeek') {\n                    var startIndex = slot.indexOf(cStart);\n                    if (startIndex !== -1) {\n                        var endIndex = slot.indexOf(end);\n                        var hasBreak = endIndex !== -1;\n                        endIndex = hasBreak ? endIndex : slot.length - 1;\n                        var count = ((endIndex - startIndex) + 1);\n                        var isLeft = (slot[startIndex] !== orgStart);\n                        var isRight = (slot[endIndex] !== orgEnd);\n                        ranges.push(this.cloneEventObject(event, slot[startIndex], slot[endIndex], count, isLeft, isRight));\n                        if (hasBreak) {\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {\n                        var availSlot = [];\n                        for (var i = 0; i < slot.length; i++) {\n                            if (this.dateInRange(slot[i], orgStart, orgEnd)) {\n                                availSlot.push(slot[i]);\n                            }\n                        }\n                        if (availSlot.length > 0) {\n                            if (!this.parent.activeViewOptions.group.byDate) {\n                                var isLeft = (availSlot[0] !== orgStart);\n                                var isRight = (availSlot[availSlot.length - 1] !== orgEnd);\n                                ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, isLeft, isRight));\n                            }\n                            else {\n                                for (var _b = 0, availSlot_1 = availSlot; _b < availSlot_1.length; _b++) {\n                                    var slot_2 = availSlot_1[_b];\n                                    ranges.push(this.cloneEventObject(event, slot_2, slot_2, 1, (slot_2 !== orgStart), (slot_2 !== orgEnd)));\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            ranges.push(this.cloneEventObject(event, start, end, 1, false, false));\n        }\n        return ranges;\n    };\n    EventBase.prototype.cloneEventObject = function (event, start, end, count, isLeft, isRight) {\n        var fields = this.parent.eventFields;\n        var e = extend({}, event, null, true);\n        var data = { count: count, isLeft: isLeft, isRight: isRight };\n        data[fields.startTime] = event[fields.startTime];\n        data[fields.endTime] = event[fields.endTime];\n        e.data = data;\n        e[fields.startTime] = new Date(start);\n        e[fields.endTime] = new Date(end);\n        return e;\n    };\n    EventBase.prototype.dateInRange = function (date, start, end) {\n        return start <= date && date <= end;\n    };\n    EventBase.prototype.getSelectedEventElements = function (target) {\n        this.removeSelectedAppointmentClass();\n        if (this.parent.selectedElements.length <= 0) {\n            this.parent.selectedElements.push(target);\n        }\n        else {\n            var isAlreadySelected = this.parent.selectedElements.filter(function (element) {\n                return element.getAttribute('data-guid') === target.getAttribute('data-guid');\n            });\n            if (isAlreadySelected.length <= 0) {\n                var elementSelector = 'div[data-guid=\"' + target.getAttribute('data-guid') + '\"]';\n                var focusElements = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n                for (var _i = 0, focusElements_1 = focusElements; _i < focusElements_1.length; _i++) {\n                    var element = focusElements_1[_i];\n                    this.parent.selectedElements.push(element);\n                }\n            }\n            else {\n                var selectedElements = this.parent.selectedElements.filter(function (element) {\n                    return element.getAttribute('data-guid') !== target.getAttribute('data-guid');\n                });\n                this.parent.selectedElements = selectedElements;\n            }\n        }\n        if (target && this.parent.selectedElements.length > 0) {\n            this.addSelectedAppointments(this.parent.selectedElements);\n        }\n        return this.parent.selectedElements;\n    };\n    EventBase.prototype.getSelectedEvents = function () {\n        var _this = this;\n        var eventSelect = [];\n        var elementSelect = [];\n        var selectAppointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER));\n        selectAppointments.filter(function (element) {\n            var isAlreadyAdded = eventSelect.filter(function (event) {\n                return event.Guid === element.getAttribute('data-guid');\n            });\n            if (isAlreadyAdded.length === 0) {\n                eventSelect.push(_this.getEventByGuid(element.getAttribute('data-guid')));\n            }\n            elementSelect.push(element);\n        });\n        return {\n            event: eventSelect.length > 1 ? eventSelect : eventSelect[0],\n            element: elementSelect.length > 1 ? elementSelect : elementSelect[0]\n        };\n    };\n    EventBase.prototype.removeSelectedAppointmentClass = function () {\n        var selectedAppointments = this.getSelectedAppointments();\n        for (var _i = 0, selectedAppointments_1 = selectedAppointments; _i < selectedAppointments_1.length; _i++) {\n            var appointment = selectedAppointments_1[_i];\n            appointment.setAttribute('aria-selected', 'false');\n        }\n        removeClass(selectedAppointments, cls.APPOINTMENT_BORDER);\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            removeClass(selectedAppointments, cls.AGENDA_SELECTED_CELL);\n        }\n    };\n    EventBase.prototype.addSelectedAppointments = function (cells) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            cell.setAttribute('aria-selected', 'true');\n        }\n        if (this.parent.currentView !== 'MonthAgenda') {\n            this.parent.removeSelectedClass();\n        }\n        addClass(cells, cls.APPOINTMENT_BORDER);\n    };\n    EventBase.prototype.getSelectedAppointments = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER + ',.' + cls.APPOINTMENT_CLASS + ':focus'));\n    };\n    EventBase.prototype.focusElement = function () {\n        if (this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible) {\n            return;\n        }\n        var selectedCell = this.parent.getSelectedElements();\n        if (selectedCell.length > 0) {\n            if (this.parent.keyboardInteractionModule) {\n                var target = ((!isNullOrUndefined(this.parent.activeCellsData) &&\n                    this.parent.activeCellsData.element) || selectedCell[selectedCell.length - 1]);\n                this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);\n            }\n            return;\n        }\n        var selectedAppointments = this.getSelectedAppointments();\n        if (selectedAppointments.length > 0) {\n            selectedAppointments[selectedAppointments.length - 1].focus();\n            return;\n        }\n    };\n    EventBase.prototype.selectWorkCellByTime = function (eventsData) {\n        var target;\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            return target;\n        }\n        if (eventsData.length > 0) {\n            var selectedObject = eventsData[eventsData.length - 1];\n            var eventStartTime = selectedObject[this.parent.eventFields.startTime];\n            var nearestTime = new Date(+eventStartTime).setMinutes(0, 0, 0);\n            var isAllDay = this.isAllDayAppointment(selectedObject);\n            if (this.parent.currentView === 'Month' || isAllDay) {\n                nearestTime = new Date(+eventStartTime).setHours(0, 0, 0, 0);\n            }\n            var targetArea = void 0;\n            if (isAllDay && ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) {\n                targetArea = this.parent.getAllDayRow();\n            }\n            else {\n                targetArea = this.parent.getContentTable();\n            }\n            var queryString = '[data-date=\"' + this.parent.getMsFromDate(new Date(nearestTime)) + '\"]';\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                queryString += '[data-group-index=\"' + this.getGroupIndexFromEvent(selectedObject) + '\"]';\n            }\n            target = targetArea.querySelector(queryString);\n            if (target) {\n                this.parent.activeCellsData = this.parent.getCellDetails(target);\n                if (this.parent.keyboardInteractionModule) {\n                    this.parent.keyboardInteractionModule.selectCells(false, target);\n                }\n                return target;\n            }\n        }\n        return target;\n    };\n    EventBase.prototype.getGroupIndexFromEvent = function (eventData) {\n        var levelIndex;\n        var resource;\n        var levelName;\n        var idField;\n        for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n            var resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n            if (!isNullOrUndefined(resourceData)) {\n                resource = this.parent.resourceBase.resourceCollection[i];\n                levelIndex = i;\n                levelName = resource.name;\n                idField = resource.field;\n                break;\n            }\n        }\n        if (isNullOrUndefined(levelName) && isNullOrUndefined(levelIndex)) {\n            levelName = this.parent.resourceCollection.slice(-1)[0].name;\n            levelIndex = this.parent.resourceCollection.length - 1;\n            idField = this.parent.resourceCollection.slice(-1)[0].field;\n            resource = this.parent.resourceCollection.filter(function (e, index) {\n                if (e.name === levelName) {\n                    levelIndex = index;\n                    return e;\n                }\n                return null;\n            })[0];\n        }\n        var id = ((eventData[idField] instanceof Array) ?\n            eventData[idField][0] : eventData[idField]);\n        if (levelIndex > 0) {\n            var parentField = this.parent.resourceCollection[levelIndex - 1].field;\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource, eventData, parentField);\n        }\n        else {\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource);\n        }\n    };\n    EventBase.prototype.isAllDayAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var isAllDay = event[fieldMapping.isAllDay];\n        var isFullDay = ((event[fieldMapping.endTime].getTime() - event[fieldMapping.startTime].getTime())\n            / util.MS_PER_DAY) >= 1;\n        return (isAllDay || isFullDay) ? true : false;\n    };\n    EventBase.prototype.addEventListener = function () {\n        this.parent.on(event.documentClick, this.appointmentBorderRemove, this);\n    };\n    EventBase.prototype.appointmentBorderRemove = function (event) {\n        var element = event.event.target;\n        if (closest(element, '.' + cls.APPOINTMENT_CLASS)) {\n            if (this.parent.currentView !== 'MonthAgenda') {\n                this.parent.removeSelectedClass();\n            }\n        }\n        else if (!closest(element, '.' + cls.POPUP_OPEN)) {\n            this.removeSelectedAppointmentClass();\n        }\n    };\n    EventBase.prototype.wireAppointmentEvents = function (element, event, isPreventCrud) {\n        if (isPreventCrud === void 0) { isPreventCrud = false; }\n        var isReadOnly = (!isNullOrUndefined(event)) ? event[this.parent.eventFields.isReadonly] : false;\n        EventHandler.add(element, 'click', this.eventClick, this);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'touchstart', this.eventTouchClick, this);\n        }\n        if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {\n            EventHandler.add(element, 'dblclick', this.eventDoubleClick, this);\n        }\n        if (!this.parent.activeViewOptions.readonly && !isReadOnly && !isPreventCrud) {\n            if (this.parent.resizeModule) {\n                this.parent.resizeModule.wireResizeEvent(element);\n            }\n            if (this.parent.dragAndDropModule) {\n                this.parent.dragAndDropModule.wireDragEvent(element);\n            }\n        }\n    };\n    EventBase.prototype.eventTouchClick = function (e) {\n        var _this = this;\n        setTimeout(function () { return _this.isDoubleTapped = false; }, 250);\n        e.preventDefault();\n        if (this.isDoubleTapped) {\n            this.eventDoubleClick(e);\n        }\n        else if (!this.isDoubleTapped) {\n            this.isDoubleTapped = true;\n            this.eventClick(e);\n        }\n    };\n    EventBase.prototype.renderResizeHandler = function (element, spanEvent, isReadOnly) {\n        if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(spanEvent); _i < _a.length; _i++) {\n            var resizeEdge = _a[_i];\n            var resizeHandler = createElement('div', { className: cls.EVENT_RESIZE_CLASS });\n            switch (resizeEdge) {\n                case 'isLeft':\n                    if (!spanEvent.isLeft) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? cls.RIGHT_RESIZE_HANDLER : cls.LEFT_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isRight':\n                    if (!spanEvent.isRight) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? cls.LEFT_RESIZE_HANDLER : cls.RIGHT_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n                case 'isTop':\n                    if (!spanEvent.isTop) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], cls.TOP_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isBottom':\n                    if (!spanEvent.isBottom) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], cls.BOTTOM_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n            }\n        }\n    };\n    EventBase.prototype.eventClick = function (eventData) {\n        var _this = this;\n        var target = eventData.target;\n        if (target.classList.contains(cls.DRAG_CLONE_CLASS) || target.classList.contains(cls.RESIZE_CLONE_CLASS)) {\n            return;\n        }\n        if (eventData.ctrlKey && eventData.which === 1 && this.parent.keyboardInteractionModule) {\n            this.parent.quickPopup.quickPopup.hide();\n            this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER));\n            var target_1 = closest(eventData.target, '.' + cls.APPOINTMENT_CLASS);\n            this.getSelectedEventElements(target_1);\n            this.activeEventData(eventData, false);\n            var selectArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(event.select, selectArgs);\n            var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(event.eventClick, args);\n        }\n        else {\n            this.removeSelectedAppointmentClass();\n            this.activeEventData(eventData, true);\n            var selectEventArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(event.select, selectEventArgs);\n            var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(event.eventClick, args, function (eventClickArgs) {\n                if (eventClickArgs.cancel) {\n                    _this.removeSelectedAppointmentClass();\n                    if (_this.parent.quickPopup) {\n                        _this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n                else {\n                    if (_this.parent.currentView === 'Agenda' || _this.parent.currentView === 'MonthAgenda') {\n                        addClass([_this.parent.activeEventData.element], cls.AGENDA_SELECTED_CELL);\n                    }\n                    if (_this.parent.allowInline) {\n                        var inlineArgs = {\n                            data: eventClickArgs.event,\n                            element: eventClickArgs.element,\n                            type: 'Event'\n                        };\n                        _this.parent.notify(event.inlineClick, inlineArgs);\n                    }\n                    else {\n                        _this.parent.notify(event.eventClick, eventClickArgs);\n                    }\n                }\n            });\n        }\n    };\n    EventBase.prototype.eventDoubleClick = function (e) {\n        this.parent.quickPopup.quickPopupHide(true);\n        if (e.type === 'touchstart') {\n            this.activeEventData(e, true);\n        }\n        this.removeSelectedAppointmentClass();\n        if (this.parent.activeEventData.element.classList.contains(cls.INLINE_APPOINTMENT_CLASS) ||\n            this.parent.activeEventData.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS)) {\n            return;\n        }\n        if (!isNullOrUndefined(this.parent.activeEventData.event) &&\n            isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])) {\n            this.parent.eventWindow.openEditor(this.parent.activeEventData.event, 'Save');\n        }\n        else {\n            this.parent.currentAction = 'EditOccurrence';\n            this.parent.quickPopup.openRecurrenceAlert();\n        }\n    };\n    EventBase.prototype.getEventByGuid = function (guid) {\n        return this.parent.eventsProcessed.filter(function (data) { return data.Guid === guid; })[0];\n    };\n    EventBase.prototype.getEventById = function (id) {\n        var _this = this;\n        return this.parent.eventsData.filter(function (data) {\n            return data[_this.parent.eventFields.id] === id;\n        })[0];\n    };\n    EventBase.prototype.generateGuid = function () {\n        return 'xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0;\n            var v = (c === 'x') ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    };\n    EventBase.prototype.getEventIDType = function () {\n        if (this.parent.eventsData.length !== 0) {\n            return typeof (this.parent.eventsData[0][this.parent.eventFields.id]);\n        }\n        if (this.parent.blockData.length !== 0) {\n            return typeof (this.parent.blockData[0][this.parent.eventFields.id]);\n        }\n        return 'string';\n    };\n    EventBase.prototype.getEventMaxID = function (resourceId) {\n        var _this = this;\n        if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {\n            return 1;\n        }\n        var eventId;\n        var idType = this.getEventIDType();\n        if (idType === 'string') {\n            eventId = this.generateGuid();\n        }\n        if (idType === 'number') {\n            var datas = this.parent.eventsData.concat(this.parent.blockData);\n            var maxId = Math.max.apply(Math, datas.map(function (event) { return event[_this.parent.eventFields.id]; }));\n            maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;\n            eventId = maxId + 1;\n        }\n        return eventId;\n    };\n    EventBase.prototype.activeEventData = function (eventData, isMultiple) {\n        var _this = this;\n        var target = closest(eventData.target, '.' + cls.APPOINTMENT_CLASS);\n        var guid = target.getAttribute('data-guid');\n        if (isMultiple) {\n            this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]')));\n            target.focus();\n        }\n        var eventObject = this.getEventByGuid(guid);\n        if (eventObject && eventObject.isSpanned) {\n            eventObject = this.parent.eventsData.filter(function (obj) {\n                return obj[_this.parent.eventFields.id] === eventObject[_this.parent.eventFields.id];\n            })[0];\n        }\n        this.parent.activeEventData = { event: eventObject, element: target };\n    };\n    EventBase.prototype.generateOccurrence = function (event, viewDate, oldTimezone, isMaxCount) {\n        var startDate = event[this.parent.eventFields.startTime];\n        var endDate = event[this.parent.eventFields.endTime];\n        var eventRule = event[this.parent.eventFields.recurrenceRule];\n        var duration = endDate.getTime() - startDate.getTime();\n        viewDate = new Date((viewDate || this.parent.activeView.startDate()).getTime() - duration);\n        var exception = event[this.parent.eventFields.recurrenceException];\n        var maxCount;\n        if (this.parent.currentView !== 'Agenda' && isMaxCount) {\n            maxCount = util.getDateCount(this.parent.activeView.startDate(), this.parent.activeView.endDate()) + 1;\n        }\n        var newTimezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        var firstDay = this.parent.activeViewOptions.firstDayOfWeek;\n        var calendarMode = this.parent.calendarMode;\n        var dates = generate(startDate, eventRule, exception, firstDay, maxCount, viewDate, calendarMode, oldTimezone, newTimezone);\n        if (this.parent.currentView === 'Agenda' && eventRule.indexOf('COUNT') === -1 && eventRule.indexOf('UNTIL') === -1) {\n            if (isNullOrUndefined(event.generatedDates)) {\n                event.generatedDates = { start: new Date(dates[0]), end: new Date(dates[dates.length - 1]) };\n            }\n            else {\n                if (dates[0] < event.generatedDates.start.getTime()) {\n                    event.generatedDates.start = new Date(dates[0]);\n                }\n                if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {\n                    event.generatedDates.end = new Date(dates[dates.length - 1]);\n                }\n            }\n        }\n        var occurrenceCollection = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            var clonedObject = extend({}, event, null, true);\n            clonedObject[this.parent.eventFields.startTime] = new Date(date);\n            clonedObject[this.parent.eventFields.endTime] = new Date(new Date(date).setMilliseconds(duration));\n            clonedObject[this.parent.eventFields.recurrenceID] = clonedObject[this.parent.eventFields.id];\n            delete clonedObject[this.parent.eventFields.recurrenceException];\n            delete clonedObject[this.parent.eventFields.followingID];\n            clonedObject.Guid = this.generateGuid();\n            occurrenceCollection.push(clonedObject);\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getParentEvent = function (eventObj, isParent) {\n        if (isParent === void 0) { isParent = false; }\n        var parentEvent;\n        do {\n            eventObj = this.getFollowingEvent(eventObj);\n            if (eventObj) {\n                parentEvent = extend({}, eventObj, null, true);\n            }\n        } while (eventObj && isParent);\n        if (isParent && parentEvent) {\n            var collection = this.getEventCollections(parentEvent);\n            var followObj = collection.follow.slice(-1)[0];\n            if (collection.occurrence.length > 0 && !parentEvent[this.parent.eventFields.recurrenceException]) {\n                followObj = collection.occurrence.slice(-1)[0];\n            }\n            if (followObj) {\n                parentEvent[this.parent.eventFields.recurrenceRule] = followObj[this.parent.eventFields.recurrenceRule];\n            }\n        }\n        return parentEvent;\n    };\n    EventBase.prototype.getEventCollections = function (parentObj, childObj) {\n        var followingCollection = [];\n        var occurrenceCollection = [];\n        var followingEvent = parentObj;\n        do {\n            followingEvent = this.getFollowingEvent(followingEvent, true);\n            if (followingEvent) {\n                followingCollection.push(followingEvent);\n            }\n            occurrenceCollection = occurrenceCollection.concat(this.getOccurrenceEvent(followingEvent || parentObj));\n        } while (followingEvent);\n        var collections = {};\n        if (childObj) {\n            var fields_1 = this.parent.eventFields;\n            collections = {\n                follow: followingCollection.filter(function (eventData) {\n                    return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n                }),\n                occurrence: occurrenceCollection.filter(function (eventData) {\n                    return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n                })\n            };\n        }\n        else {\n            collections = { follow: followingCollection, occurrence: occurrenceCollection };\n        }\n        return collections;\n    };\n    EventBase.prototype.getFollowingEvent = function (parentObj, isReverse) {\n        var fields = this.parent.eventFields;\n        var fieldValue;\n        if (isReverse) {\n            fieldValue = parentObj[fields.id];\n        }\n        else {\n            fieldValue = (parentObj[fields.recurrenceID] || parentObj[fields.followingID]);\n        }\n        var parentApp = this.parent.eventsData.filter(function (data) {\n            return data[isReverse ? fields.followingID : fields.id] === fieldValue;\n        });\n        return parentApp.shift();\n    };\n    EventBase.prototype.isFollowingEvent = function (parentObj, childObj) {\n        var parentStart = parentObj[this.parent.eventFields.startTime];\n        var childStart = childObj[this.parent.eventFields.startTime];\n        return parentStart.getHours() === childStart.getHours() && parentStart.getMinutes() === childStart.getMinutes() &&\n            parentStart.getSeconds() === childStart.getSeconds();\n    };\n    EventBase.prototype.getOccurrenceEvent = function (eventObj, isGuid, isFollowing) {\n        if (isGuid === void 0) { isGuid = false; }\n        if (isFollowing === void 0) { isFollowing = false; }\n        var idField = isGuid ? 'Guid' : (isFollowing) ? this.parent.eventFields.followingID : this.parent.eventFields.recurrenceID;\n        var fieldKey = isGuid ? 'Guid' : this.parent.eventFields.id;\n        var dataSource = isGuid ? this.parent.eventsProcessed : this.parent.eventsData;\n        return dataSource.filter(function (data) { return data[idField] === eventObj[fieldKey]; });\n    };\n    EventBase.prototype.getOccurrencesByID = function (id) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        var parentObject = this.parent.eventsData.filter(function (obj) { return obj[fields.id] === id; });\n        for (var _i = 0, _a = parentObject; _i < _a.length; _i++) {\n            var event_3 = _a[_i];\n            if (!isNullOrUndefined(event_3[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_3));\n            }\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_4 = _a[_i];\n            if (!isNullOrUndefined(event_4[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_4));\n            }\n        }\n        var filter = occurrenceCollection.filter(function (obj) {\n            return obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]);\n        });\n        return filter;\n    };\n    EventBase.prototype.getDeletedOccurrences = function (recurrenceData) {\n        var fields = this.parent.eventFields;\n        var parentObject;\n        var deletedOccurrences = [];\n        if (typeof recurrenceData === 'string' || typeof recurrenceData === 'number') {\n            parentObject = this.parent.eventsData.filter(function (obj) {\n                return obj[fields.id] === recurrenceData;\n            })[0];\n        }\n        else {\n            parentObject = extend({}, recurrenceData, null, true);\n        }\n        if (parentObject[fields.recurrenceException]) {\n            var exDateString_1 = parentObject[fields.recurrenceException].split(',');\n            var _loop_2 = function (i, len) {\n                var edited = this_2.parent.eventsData.filter(function (eventObj) {\n                    return eventObj[fields.recurrenceID] === parentObject[fields.id] && eventObj[fields.recurrenceException] === exDateString_1[i];\n                });\n                if (edited.length === 0) {\n                    var exDate = getDateFromRecurrenceDateString(exDateString_1[i]);\n                    var childObject = extend({}, recurrenceData, null, true);\n                    childObject[fields.recurrenceID] = parentObject[fields.id];\n                    delete childObject[fields.followingID];\n                    childObject[fields.recurrenceException] = exDateString_1[i];\n                    var startDate = new Date(exDate.getTime());\n                    var time = parentObject[fields.endTime].getTime() - parentObject[fields.startTime].getTime();\n                    var endDate = new Date(startDate.getTime());\n                    endDate.setMilliseconds(time);\n                    childObject[fields.startTime] = new Date(startDate.getTime());\n                    childObject[fields.endTime] = new Date(endDate.getTime());\n                    deletedOccurrences.push(childObject);\n                }\n            };\n            var this_2 = this;\n            for (var i = 0, len = exDateString_1.length; i < len; i++) {\n                _loop_2(i, len);\n            }\n        }\n        return deletedOccurrences;\n    };\n    EventBase.prototype.applyResourceColor = function (element, data, type, index, alpha) {\n        if (!this.parent.resourceBase) {\n            return;\n        }\n        var alphaColor = function (color, alpha) {\n            color = color.replace('#', '');\n            var r = parseInt(color.substring(0, color.length / 3), 16);\n            var g = parseInt(color.substring(color.length / 3, 2 * color.length / 3), 16);\n            var b = parseInt(color.substring(2 * color.length / 3, 3 * color.length / 3), 16);\n            return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n        };\n        // index refers groupOrder\n        var color = this.parent.resourceBase.getResourceColor(data, index);\n        if (color) {\n            // tslint:disable-next-line:no-any\n            element.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;\n        }\n    };\n    EventBase.prototype.createBlockAppointmentElement = function (record, resIndex) {\n        var eventSubject = (record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: cls.BLOCK_APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.parent.eventFields.id],\n                'aria-readonly': 'true', 'aria-selected': 'false'\n            }\n        });\n        var templateElement;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            var templateArgs = util.addLocalOffsetToEvent(record, this.parent.eventFields);\n            templateElement = this.parent.getAppointmentTemplate()(templateArgs, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var appointmentSubject = createElement('div', {\n                className: cls.SUBJECT_CLASS, innerHTML: eventSubject\n            });\n            templateElement = [appointmentSubject];\n        }\n        append(templateElement, appointmentWrapper);\n        this.setWrapperAttributes(appointmentWrapper, resIndex);\n        return appointmentWrapper;\n    };\n    EventBase.prototype.setWrapperAttributes = function (appointmentWrapper, resIndex) {\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n    };\n    EventBase.prototype.getReadonlyAttribute = function (event) {\n        return (event[this.parent.eventFields.isReadonly] || this.parent.readonly).toString();\n    };\n    EventBase.prototype.isBlockRange = function (eventData) {\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var isBlockAlert = false;\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = eventCollection; _i < _a.length; _i++) {\n            var event_5 = _a[_i];\n            var dataCol = [];\n            if (!isNullOrUndefined(event_5[fields.recurrenceRule]) &&\n                (isNullOrUndefined(event_5[fields.recurrenceID]) || event_5[fields.id] === event_5[fields.recurrenceID])) {\n                dataCol = this.generateOccurrence(event_5);\n            }\n            else {\n                dataCol.push(event_5);\n            }\n            for (var _b = 0, dataCol_1 = dataCol; _b < dataCol_1.length; _b++) {\n                var data = dataCol_1[_b];\n                var filterBlockEvents = this.filterBlockEvents(data);\n                if (filterBlockEvents.length > 0) {\n                    isBlockAlert = true;\n                    break;\n                }\n            }\n        }\n        this.parent.uiStateValues.isBlock = isBlockAlert;\n        return isBlockAlert;\n    };\n    EventBase.prototype.getFilterEventsList = function (dataSource, query) {\n        return new DataManager(dataSource).executeLocal(new Query().where(query));\n    };\n    EventBase.prototype.getSeriesEvents = function (parentEvent, startTime) {\n        var fields = this.parent.eventFields;\n        startTime = isNullOrUndefined(startTime) ? parentEvent[fields.startTime] : startTime;\n        var deleteFutureEditEvents;\n        var futureEvents;\n        var deleteFutureEditEventList = [];\n        var delId = parentEvent[fields.id];\n        var followingId = parentEvent[fields.followingID];\n        var deleteFutureEvent;\n        var startTimeQuery = this.parent.currentAction === 'EditSeries' ? 'greaterthan' : 'greaterthanorequal';\n        do {\n            deleteFutureEvent = ((new Predicate(fields.followingID, 'equal', delId))).\n                and(new Predicate(fields.startTime, startTimeQuery, startTime));\n            futureEvents = this.getFilterEventsList(this.parent.eventsData, deleteFutureEvent);\n            deleteFutureEditEvents = futureEvents.slice(-1)[0];\n            if (!isNullOrUndefined(deleteFutureEditEvents) && deleteFutureEditEvents[fields.id] !== followingId) {\n                deleteFutureEditEventList.push(deleteFutureEditEvents);\n                delId = deleteFutureEditEvents[fields.id];\n                followingId = deleteFutureEditEvents[fields.followingID];\n            }\n            else {\n                followingId = null;\n            }\n        } while (futureEvents.length === 1 && !isNullOrUndefined(deleteFutureEditEvents[fields.followingID]));\n        return deleteFutureEditEventList;\n    };\n    EventBase.prototype.getEditedOccurrences = function (deleteFutureEditEventList, startTime) {\n        var fields = this.parent.eventFields;\n        var deleteRecurrenceEventList = [];\n        var delEditedEvents;\n        for (var _i = 0, deleteFutureEditEventList_1 = deleteFutureEditEventList; _i < deleteFutureEditEventList_1.length; _i++) {\n            var event_6 = deleteFutureEditEventList_1[_i];\n            var delEventQuery = new Predicate(fields.recurrenceID, 'equal', event_6[fields.id]).\n                or(new Predicate(fields.recurrenceID, 'equal', event_6[fields.followingID]).\n                and(new Predicate(fields.recurrenceID, 'notequal', undefined)).\n                and(new Predicate(fields.recurrenceID, 'notequal', null)));\n            if (this.parent.currentAction === 'EditFollowingEvents' || this.parent.currentAction === 'DeleteFollowingEvents') {\n                delEventQuery = delEventQuery.and(new Predicate(fields.startTime, 'greaterthanorequal', startTime));\n            }\n            delEditedEvents = this.getFilterEventsList(this.parent.eventsData, delEventQuery);\n            deleteRecurrenceEventList = deleteRecurrenceEventList.concat(delEditedEvents);\n        }\n        return deleteRecurrenceEventList;\n    };\n    EventBase.prototype.getRenderedDates = function (dateRender) {\n        var firstDate = 0;\n        var lastDate = dateRender.length;\n        var filteredDates;\n        if (dateRender[0] < this.parent.minDate && dateRender[dateRender.length - 1] > this.parent.maxDate) {\n            for (var i = 0; i < dateRender.length; i++) {\n                if (util.resetTime(dateRender[i]).getTime() === util.resetTime(new Date(this.parent.minDate)).getTime()) {\n                    firstDate = i;\n                }\n                if (util.resetTime(dateRender[i]).getTime() === util.resetTime(new Date(this.parent.maxDate)).getTime()) {\n                    lastDate = i;\n                }\n            }\n            filteredDates = dateRender.filter(function (date) { return date >= dateRender[firstDate] && date <= dateRender[lastDate]; });\n        }\n        return filteredDates;\n    };\n    EventBase.prototype.isValidEvent = function (eventObj, start, end, schedule) {\n        var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n        var isSameRange = schedule.startHour.getTime() <= start.getTime() &&\n            eventObj[this.parent.eventFields.startTime].getTime() >= schedule.startHour.getTime() &&\n            eventObj[this.parent.eventFields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n        return isHourRange || isSameRange;\n    };\n    return EventBase;\n}());\nexport { EventBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { append, createElement, extend, EventHandler, prepend, Animation, formatUnit } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Vertical view appointment rendering\n */\nvar VerticalEvent = /** @class */ (function (_super) {\n    __extends(VerticalEvent, _super);\n    /**\n     * Constructor for vertical view\n     */\n    function VerticalEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dateRender = [];\n        _this.renderedEvents = [];\n        _this.renderedAllDayEvents = [];\n        _this.overlapEvents = [];\n        _this.moreEvents = [];\n        _this.overlapList = [];\n        _this.allDayEvents = [];\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.allDayLevel = 0;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.animation = new Animation({ progress: _this.animationUiUpdate.bind(_this) });\n        _this.addEventListener();\n        return _this;\n    }\n    VerticalEvent.prototype.renderAppointments = function () {\n        var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS +\n            ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        var isDragging = (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) ? true : false;\n        for (var _i = 0, wrapperElements_1 = wrapperElements; _i < wrapperElements_1.length; _i++) {\n            var wrapper = wrapperElements_1[_i];\n            if (isDragging && !(wrapper.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ||\n                wrapper.classList.contains(cls.ROW_COUNT_WRAPPER_CLASS))) {\n                var groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n                for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n                    if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[j].groupIndex ||\n                        groupIndex === this.parent.crudModule.crudObj.targetEvent[j].groupIndex) {\n                        remove(wrapper);\n                    }\n                }\n            }\n            else {\n                remove(wrapper);\n            }\n        }\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n        this.setAllDayRowHeight(0);\n        if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n            return;\n        }\n        var expandCollapse = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n        EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.initializeValues();\n        this.processBlockEvents();\n        this.renderEvents('normalEvents');\n        if (this.allDayEvents.length > 0) {\n            this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.Guid; }).indexOf(item.Guid);\n            });\n            removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n            this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            this.renderEvents('allDayEvents');\n        }\n        this.parent.notify(events.contentReady, {});\n        addClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        if (isDragging) {\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        this.parent.renderTemplates();\n    };\n    VerticalEvent.prototype.initializeValues = function () {\n        this.resources = (this.parent.activeViewOptions.group.resources.length > 0) ? this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel : [];\n        this.cellHeight =\n            parseFloat(this.parent.element.querySelector('.e-content-wrap tbody tr').getBoundingClientRect().height.toFixed(2));\n        this.dateRender[0] = this.parent.activeView.renderDates;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var i = 0, len = this.resources.length; i < len; i++) {\n                this.dateRender[i] = this.resources[i].renderDates;\n            }\n        }\n    };\n    VerticalEvent.prototype.getHeight = function (start, end) {\n        var appHeight = (end.getTime() - start.getTime()) / (60 * 1000) * (this.cellHeight * this.slotCount) / this.interval;\n        appHeight = (appHeight <= 0) ? this.cellHeight : appHeight;\n        return appHeight;\n    };\n    VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n        var appointmentWrap = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.enableRtl) {\n            setStyleAttribute(appointmentElement, { 'right': appLeft });\n        }\n        else {\n            setStyleAttribute(appointmentElement, { 'left': appLeft });\n        }\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var args = {\n            data: extend({}, eventObj, null, true),\n            element: appointmentElement, cancel: false, type: eventType\n        };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                appointmentWrap[index].appendChild(appointmentElement);\n            }\n        });\n    };\n    VerticalEvent.prototype.processBlockEvents = function () {\n        var resources = this.getResourceList();\n        var dateCount = 0;\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var resource = resources_1[_i];\n            var renderDates = this.dateRender[resource];\n            for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n                var startDate = new Date(renderDates[day].getTime());\n                var endDate = util.addDays(renderDates[day], 1);\n                var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[resource]);\n                for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n                    var event_1 = filterEvents_1[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_1, resource);\n                    }\n                    this.renderBlockEvents(event_1, day, resource, dateCount);\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = spannedData[this.fields.startTime];\n        var eEnd = spannedData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule)) {\n            var blockTop = void 0;\n            var blockHeight = void 0;\n            if (spannedData[this.fields.isAllDay]) {\n                var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                blockHeight = formatUnit(contentWrap.offsetHeight);\n                blockTop = formatUnit(0);\n            }\n            else {\n                blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n                blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n            }\n            var appointmentElement = this.createBlockAppointmentElement(eventObj, resource);\n            setStyleAttribute(appointmentElement, { 'width': '100%', 'height': blockHeight, 'top': blockTop });\n            var index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement, index, '0px');\n        }\n    };\n    VerticalEvent.prototype.renderEvents = function (eventType) {\n        removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        var eventCollection = (eventType === 'allDayEvents') ? this.sortByDateTime(this.allDayEvents) : undefined;\n        var resources = this.getResourceList();\n        var dateCount = 0;\n        var isRender;\n        var _loop_1 = function (resource) {\n            isRender = true;\n            if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents') {\n                if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0 &&\n                    this_1.parent.crudModule.crudObj.targetEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0) {\n                    isRender = false;\n                }\n            }\n            this_1.slots = [];\n            var renderDates = this_1.dateRender[resource];\n            var renderedDate = this_1.getRenderedDates(renderDates) || renderDates;\n            this_1.slots.push(renderDates.map(function (date) { return +date; }));\n            for (var day = 0, length_2 = renderDates.length; day < length_2 &&\n                renderDates[day] <= renderedDate[renderedDate.length - 1]; day++) {\n                this_1.renderedEvents = [];\n                var startDate = new Date(renderDates[day].getTime());\n                var endDate = util.addDays(renderDates[day], 1);\n                var filterEvents = this_1.filterEvents(startDate, endDate, eventCollection, this_1.resources[resource]);\n                if (isRender) {\n                    for (var _i = 0, filterEvents_2 = filterEvents; _i < filterEvents_2.length; _i++) {\n                        var event_2 = filterEvents_2[_i];\n                        if (this_1.parent.resourceBase) {\n                            this_1.setValues(event_2, resource);\n                        }\n                        if (eventType === 'allDayEvents') {\n                            this_1.renderAllDayEvents(event_2, day, resource, dateCount);\n                        }\n                        else {\n                            if (this_1.isAllDayAppointment(event_2)) {\n                                this_1.allDayEvents.push(extend({}, event_2, null, true));\n                            }\n                            else {\n                                if (this_1.parent.eventSettings.enableMaxHeight) {\n                                    if (this_1.getOverlapIndex(event_2, day, false, resource) > 0) {\n                                        continue;\n                                    }\n                                }\n                                this_1.renderNormalEvents(event_2, day, resource, dateCount);\n                            }\n                        }\n                        this_1.cssClass = null;\n                        this_1.groupOrder = null;\n                    }\n                }\n                else {\n                    for (var _a = 0, filterEvents_3 = filterEvents; _a < filterEvents_3.length; _a++) {\n                        var event_3 = filterEvents_3[_a];\n                        if (this_1.isAllDayAppointment(event_3)) {\n                            this_1.allDayEvents.push(extend({}, event_3, null, true));\n                        }\n                    }\n                }\n                dateCount += 1;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            _loop_1(resource);\n        }\n    };\n    VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.cssClass = this.resources[resourceIndex].cssClass;\n            this.groupOrder = this.resources[resourceIndex].groupOrder;\n        }\n        else {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n        }\n    };\n    VerticalEvent.prototype.getResourceList = function () {\n        var resources = Array.apply(null, {\n            length: (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) ?\n                this.resources.length : 1\n        }).map(function (value, index) { return index; });\n        return resources;\n    };\n    VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n        var fieldMapping = this.parent.eventFields;\n        var recordSubject = (record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[fieldMapping.id],\n                'data-guid': record.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-selected': 'false',\n                'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnocementString(record)\n            }\n        });\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n        }\n        var templateElement;\n        var eventData = data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var elementId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = elementId + viewName + 'eventTemplate';\n            var templateArgs = util.addLocalOffsetToEvent(record, this.parent.eventFields);\n            templateElement = this.parent.getAppointmentTemplate()(templateArgs, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: recordSubject });\n            if (isAllDay) {\n                if (record[fieldMapping.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    var appointmentStartTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n                    });\n                    var appointmentEndTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.endTime]),\n                    });\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' +\n                    this.parent.getTimeString(record[fieldMapping.endTime]);\n                var appointmentTime = createElement('div', {\n                    className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                    innerHTML: timeStr,\n                });\n                var appointmentLocation = createElement('div', {\n                    className: cls.LOCATION_CLASS,\n                    innerHTML: (record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || '')\n                });\n                templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        if (!this.parent.isAdaptive &&\n            (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n            var iconClass = (record[fieldMapping.id] === record[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            var recurrenceIcon = createElement('div', { className: cls.ICON + ' ' + iconClass });\n            isAllDay ? appointmentDetails.appendChild(recurrenceIcon) : appointmentWrapper.appendChild(recurrenceIcon);\n        }\n        this.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n        this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n        var index = currentDay + count;\n        var countWrapper = allDayRow[index];\n        if (countWrapper.childElementCount <= 0) {\n            var innerCountWrap = createElement('div', {\n                className: cls.ROW_COUNT_WRAPPER_CLASS,\n                id: cls.ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n            });\n            var moreIndicatorElement = createElement('div', {\n                className: cls.MORE_INDICATOR_CLASS,\n                attrs: { 'tabindex': '0', 'role': 'list', 'data-index': index.toString(), 'data-count': '1' },\n                innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n            });\n            innerCountWrap.appendChild(moreIndicatorElement);\n            countWrapper.appendChild(innerCountWrap);\n            EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n        }\n        else {\n            var countCell = countWrapper.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n            var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n            countCell.setAttribute('data-count', moreCount.toString());\n            countCell.innerHTML = '+' + moreCount + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n        }\n    };\n    VerticalEvent.prototype.renderSpannedIcon = function (element, spanEvent) {\n        var iconElement = createElement('div', { className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON });\n        if (spanEvent.isLeft) {\n            var iconLeft = iconElement.cloneNode();\n            addClass([iconLeft], cls.EVENT_ICON_LEFT_CLASS);\n            prepend([iconLeft], element);\n        }\n        if (spanEvent.isRight) {\n            var iconRight = iconElement.cloneNode();\n            addClass([iconRight], cls.EVENT_ICON_RIGHT_CLASS);\n            append([iconRight], element);\n        }\n        if (spanEvent.isTop) {\n            var iconTop = iconElement.cloneNode();\n            addClass([iconTop], cls.EVENT_ICON_UP_CLASS);\n            prepend([iconTop], element);\n        }\n        if (spanEvent.isBottom) {\n            var iconBottom = iconElement.cloneNode();\n            addClass([iconBottom], cls.EVENT_ICON_DOWN_CLASS);\n            append([iconBottom], element);\n        }\n    };\n    VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n        var currentDate = util.resetTime(this.dateRender[resource][day]);\n        var renderedDate = this.getRenderedDates(this.dateRender[resource]) || [currentDate];\n        var currentDay = renderedDate.filter(function (date) { return date.getDay() === day; });\n        if (currentDay.length === 0) {\n            currentDate = util.resetTime(renderedDate[0]);\n        }\n        var fieldMapping = this.parent.eventFields;\n        var startEndHours = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var event = extend({}, record, null, true);\n        event.isSpanned = { isBottom: false, isTop: false };\n        if (record[fieldMapping.startTime].getTime() < startEndHours.startHour.getTime()) {\n            event[fieldMapping.startTime] = startEndHours.startHour;\n            event.isSpanned.isTop = true;\n        }\n        if (record[fieldMapping.endTime].getTime() > startEndHours.endHour.getTime()) {\n            event[fieldMapping.endTime] = startEndHours.endHour;\n            event.isSpanned.isBottom = true;\n        }\n        return event;\n    };\n    VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n        var _this = this;\n        var currentDates = this.getRenderedDates(this.dateRender[resource]) || this.dateRender[resource];\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.slots[0] = [this.dateRender[resource][dayIndex].getTime()];\n            currentDates = [this.dateRender[resource][dayIndex]];\n        }\n        var record = this.splitEvent(eventObj, currentDates)[0];\n        var allDayRowCell = this.element.querySelector('.' + cls.ALLDAY_CELLS_CLASS + ':first-child');\n        var cellTop = allDayRowCell.offsetTop;\n        var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n        var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n        var appWidth = 0;\n        var appLeft = '0%';\n        var topValue = 1;\n        var appLevel = 0;\n        var isDateRange = currentDates[0].getTime() <= eStart.getTime() &&\n            util.addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n        if (eStart <= eEnd && isDateRange) {\n            var isAlreadyRendered = [];\n            if (this.renderedAllDayEvents[resource]) {\n                isAlreadyRendered = this.renderedAllDayEvents[resource].filter(function (event) {\n                    return event.Guid === eventObj.Guid;\n                });\n                if (this.parent.activeViewOptions.group.byDate) {\n                    isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n                        return event[_this.parent.eventFields.startTime] >= currentDates[dayIndex] &&\n                            event[_this.parent.eventFields.endTime] <= util.addDays(new Date(+currentDates[dayIndex]), 1);\n                    });\n                }\n            }\n            if (isAlreadyRendered.length === 0) {\n                var allDayDifference_1 = record.data.count;\n                var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n                record.Index = allDayIndex_1;\n                this.allDayLevel = (this.allDayLevel < allDayIndex_1) ? allDayIndex_1 : this.allDayLevel;\n                var widthAdjustment = record.data.isRight ? 0 :\n                    this.parent.currentView === 'Day' ? 4 : 7;\n                if (allDayDifference_1 >= 0) {\n                    appWidth = (allDayDifference_1 * 100) - widthAdjustment;\n                }\n                if (isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                    this.renderedAllDayEvents[resource] = [];\n                }\n                this.renderedAllDayEvents[resource].push(extend({}, record, null, true));\n                var allDayRow_1 = [].slice.call(this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).children);\n                var wIndex_1 = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n                var eventWrapper_1 = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS +\n                    ':nth-child(' + (wIndex_1 + 1) + ')');\n                var appointmentElement_1;\n                if (inline) {\n                    appointmentElement_1 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n                }\n                else {\n                    appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n                }\n                addClass([appointmentElement_1], cls.ALLDAY_APPOINTMENT_CLASS);\n                var args = { data: eventObj, element: appointmentElement_1, cancel: false };\n                this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        eventWrapper_1.appendChild(appointmentElement_1);\n                        var appHeight = appointmentElement_1.offsetHeight;\n                        topValue += (allDayIndex_1 === 0 ? cellTop : (cellTop + (allDayIndex_1 * appHeight))) + 1;\n                        setStyleAttribute(appointmentElement_1, { 'width': appWidth + '%', 'top': formatUnit(topValue) });\n                        if (allDayIndex_1 > 1) {\n                            _this.moreEvents.push(appointmentElement_1);\n                            for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n                            }\n                        }\n                        allDayRowCell.setAttribute('data-count', _this.allDayLevel.toString());\n                        var allDayRowHeight = ((!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ?\n                            (3 * appHeight) : ((_this.allDayLevel + 1) * appHeight)) + 4;\n                        _this.setAllDayRowHeight(allDayRowHeight);\n                        _this.addOrRemoveClass();\n                        _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n                    }\n                });\n            }\n        }\n    };\n    VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n        var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = record[this.fields.startTime];\n        var eEnd = record[this.fields.endTime];\n        var appWidth = '0%';\n        var appLeft = '0%';\n        var topValue = 0;\n        var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n        if (eStart <= eEnd && isValidEvent) {\n            var appHeight = this.getHeight(eStart, eEnd);\n            if (eStart.getTime() > schedule.startHour.getTime()) {\n                topValue = this.getTopValue(eStart, dayIndex, resource);\n            }\n            var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n            record.Index = appIndex;\n            this.overlapList.push(record);\n            if (this.overlapList.length > 1) {\n                if (isNullOrUndefined(this.overlapEvents[appIndex])) {\n                    this.overlapEvents[appIndex] = [];\n                }\n                this.overlapEvents[appIndex].push(record);\n            }\n            else {\n                this.overlapEvents = [];\n                this.overlapEvents.push([record]);\n            }\n            appWidth = this.getEventWidth();\n            var argsData = {\n                index: appIndex, left: appLeft, width: appWidth,\n                day: dayIndex, dayIndex: dayCount, record: record, resource: resource\n            };\n            var tempData = this.adjustOverlapElements(argsData);\n            appWidth = (tempData.appWidth);\n            if (isNullOrUndefined(this.renderedEvents[resource])) {\n                this.renderedEvents[resource] = [];\n            }\n            this.renderedEvents[resource].push(extend({}, record, null, true));\n            var appointmentElement_2;\n            if (inline) {\n                appointmentElement_2 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n            }\n            else {\n                appointmentElement_2 = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n            }\n            setStyleAttribute(appointmentElement_2, {\n                'width': (this.parent.eventSettings.enableMaxHeight ? '100%' : tempData.appWidth),\n                'height': appHeight + 'px', 'top': topValue + 'px'\n            });\n            var iconHeight = appointmentElement_2.querySelectorAll('.' + cls.EVENT_INDICATOR_CLASS).length * 15;\n            var maxHeight = appHeight - 40 - iconHeight;\n            var subjectElement = appointmentElement_2.querySelector('.' + cls.SUBJECT_CLASS);\n            if (!this.parent.isAdaptive && subjectElement) {\n                subjectElement.style.maxHeight = formatUnit(maxHeight);\n            }\n            var index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement_2, index, tempData.appLeft);\n            this.wireAppointmentEvents(appointmentElement_2, eventObj);\n            if (appointmentElement_2.offsetHeight < this.cellHeight) {\n                var resizeHandlers = [].slice.call(appointmentElement_2.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n                resizeHandlers.forEach(function (resizeHandler) {\n                    resizeHandler.style.height = Math.ceil(appointmentElement_2.offsetHeight / resizeHandler.offsetHeight) + 'px';\n                });\n            }\n        }\n    };\n    VerticalEvent.prototype.getEventWidth = function () {\n        var width = this.parent.currentView === 'Day' ? 97 : 94;\n        var tempWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length);\n        return (tempWidth < 0 ? 0 : tempWidth) + '%';\n    };\n    VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n        var tempLeft = (parseFloat(appWidth) + 1) * index;\n        return (tempLeft > 99 ? 99 : tempLeft) + '%';\n    };\n    VerticalEvent.prototype.getTopValue = function (date, day, resource) {\n        var startEndHours = util.getStartEndHours(util.resetTime(this.dateRender[resource][day]), this.startHour, this.endHour);\n        var startHour = startEndHours.startHour;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (this.parent.activeViewOptions.timeScale.enable) ? ((diffInMinutes * this.cellHeight * this.slotCount) / this.interval) : 0;\n    };\n    VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n        var _this = this;\n        var fieldMapping = this.parent.eventFields;\n        var eventsList = [];\n        var appIndex = -1;\n        this.overlapEvents = [];\n        if (isAllDay) {\n            if (!isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                var date_1 = util.resetTime(new Date(this.dateRender[resource][day].getTime()));\n                eventsList = this.renderedAllDayEvents[resource].filter(function (app) {\n                    return util.resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() &&\n                        util.resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n                });\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    eventsList = this.filterEventsByResource(this.resources[resource], eventsList);\n                }\n            }\n        }\n        else {\n            var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[resource]) ? this.renderedEvents[resource] : [];\n            var appointment_1 = [];\n            var recordStart_1 = record[fieldMapping.startTime];\n            var recordEnd_1 = record[fieldMapping.endTime];\n            this.overlapList = appointmentList_1.filter(function (data) {\n                return (data[fieldMapping.endTime] > recordStart_1 && data[fieldMapping.startTime] <= recordEnd_1) ||\n                    (data[fieldMapping.startTime] >= recordEnd_1 && data[fieldMapping.endTime] <= recordStart_1);\n            });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.overlapList = this.filterEventsByResource(this.resources[resource], this.overlapList);\n            }\n            this.overlapList.forEach(function (obj) {\n                var filterList = appointmentList_1.filter(function (data) {\n                    return data[fieldMapping.endTime] > obj[fieldMapping.startTime] && data[fieldMapping.startTime] <= obj[fieldMapping.endTime];\n                });\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    filterList = _this.filterEventsByResource(_this.resources[resource], filterList);\n                }\n                var collection = filterList.filter(function (val) {\n                    return _this.overlapList.indexOf(val) === -1;\n                });\n                if (collection.length > 0) {\n                    appointment_1 = appointment_1.concat(collection);\n                }\n            });\n            for (var i = 0; i < appointment_1.length - 1; i++) {\n                for (var j = i + 1; j < appointment_1.length; j++) {\n                    if (appointment_1[i].Id === appointment_1[j].Id) {\n                        appointment_1.splice(j, 0);\n                        j--;\n                    }\n                }\n            }\n            this.overlapList = this.overlapList.concat(appointment_1);\n            eventsList = this.overlapList;\n            for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n                var event_4 = eventsList_1[_i];\n                var record_1 = event_4;\n                var index = record_1.Index;\n                (isNullOrUndefined(this.overlapEvents[index])) ? this.overlapEvents[index] = [event_4] :\n                    this.overlapEvents[index].push(event_4);\n            }\n        }\n        if (!isAllDay) {\n            eventsList = eventsList.filter(function (obj) {\n                return obj[fieldMapping.startTime] === record[fieldMapping.startTime] &&\n                    obj[fieldMapping.endTime] > record[fieldMapping.endTime] ||\n                    obj[fieldMapping.endTime] > record[fieldMapping.startTime] &&\n                        obj[fieldMapping.startTime] < record[fieldMapping.endTime] ||\n                    obj[fieldMapping.endTime] === record[fieldMapping.startTime] &&\n                        obj[fieldMapping.startTime] === record[fieldMapping.endTime];\n            });\n        }\n        if (eventsList.length > 0) {\n            var appLevel = eventsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    VerticalEvent.prototype.adjustOverlapElements = function (args) {\n        var data = { appWidth: args.width, appLeft: args.left };\n        for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n            if (!isNullOrUndefined(this.overlapEvents[i])) {\n                for (var j = 0, length2 = this.overlapEvents[i].length; j < length2; j++) {\n                    var dayCount = this.parent.activeViewOptions.group.byDate ? (this.resources.length * args.day) + args.resource :\n                        args.dayIndex;\n                    var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n                    if (element.childElementCount > 0) {\n                        var eleGuid = this.overlapEvents[i][j].Guid;\n                        if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                            var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n                            if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                                (this.parent.enableRtl) ? apps.style.right = this.getEventLeft(args.width, i) :\n                                    apps.style.left = this.getEventLeft(args.width, i);\n                                apps.style.width = ((parseFloat(args.width))) + '%';\n                                data.appWidth = apps.style.width;\n                            }\n                            else {\n                                data.appWidth = apps.style.width;\n                            }\n                        }\n                        else {\n                            var appWidth = args.width;\n                            if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                                appWidth = this.getEventWidth();\n                            }\n                            data.appWidth = appWidth;\n                            data.appLeft = this.getEventLeft(appWidth, args.index);\n                        }\n                    }\n                }\n            }\n        }\n        return data;\n    };\n    VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n        for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.height = (height / 12) + 'em';\n        }\n        this.animation.animate(this.allDayElement[0]);\n    };\n    VerticalEvent.prototype.addOrRemoveClass = function () {\n        var _this = this;\n        this.moreEvents.filter(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                addClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '-1');\n            }\n            else {\n                removeClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '0');\n            }\n        });\n        var moreEventCount = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        if (this.parent.uiStateValues.expand) {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n        }\n        else {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        }\n        (this.allDayLevel > 2) ? removeClass([moreEventCount], cls.DISABLE_CLASS) : addClass([moreEventCount], cls.DISABLE_CLASS);\n        var countCell = [].slice.call(this.element.querySelectorAll('.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        countCell.filter(function (element) {\n            (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ? removeClass([element], cls.DISABLE_CLASS) :\n                addClass([element], cls.DISABLE_CLASS);\n        });\n    };\n    VerticalEvent.prototype.getEventHeight = function () {\n        var eventElement = createElement('div', { className: cls.APPOINTMENT_CLASS, styles: 'visibility:hidden' });\n        var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n        eventWrapper.appendChild(eventElement);\n        var height = eventElement.offsetHeight;\n        remove(eventElement);\n        return height;\n    };\n    VerticalEvent.prototype.rowExpandCollapse = function () {\n        var target = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        this.parent.uiStateValues.expand = target.classList.contains(cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        var rowHeight;\n        if (this.parent.uiStateValues.expand) {\n            target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n            target.setAttribute('aria-label', 'Collapse section');\n            rowHeight = ((this.allDayLevel + 1) * this.getEventHeight()) + 4;\n        }\n        else {\n            target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n            target.setAttribute('aria-label', 'Expand section');\n            rowHeight = (3 * this.getEventHeight()) + 4;\n        }\n        this.setAllDayRowHeight(rowHeight);\n        this.addOrRemoveClass();\n        this.animation.animate(target);\n    };\n    VerticalEvent.prototype.animationUiUpdate = function () {\n        this.parent.notify(events.contentReady, {});\n    };\n    return VerticalEvent;\n}(EventBase));\nexport { VerticalEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { append, prepend, createElement, extend, EventHandler, closest, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @class */ (function (_super) {\n    __extends(MonthEvent, _super);\n    /**\n     * Constructor for month events\n     */\n    function MonthEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.renderedEvents = [];\n        _this.monthHeaderHeight = 0;\n        _this.moreIndicatorHeight = 19;\n        _this.renderType = 'day';\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.maxOrIndicator = (_this.maxHeight || _this.withIndicator);\n        _this.moreIndicatorHeight =\n            (_this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace) ? 0 : _this.moreIndicatorHeight;\n        _this.addEventListener();\n        return _this;\n    }\n    MonthEvent.prototype.removeEventWarapper = function (appElement) {\n        if (appElement.length > 0) {\n            appElement = (this.parent.currentView === 'Month') ? appElement : [appElement[0]];\n            for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n                var wrap = appElement_1[_i];\n                if (!wrap.classList.contains('e-more-indicator') && wrap.parentElement && wrap.parentElement.parentNode) {\n                    remove(wrap.parentElement);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.renderAppointments = function () {\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.rowAutoHeight) {\n            this.parent.uiStateValues.top = conWrap.scrollTop;\n            this.parent.uiStateValues.left = conWrap.scrollLeft;\n        }\n        var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                    this.parent.crudModule.crudObj.sourceEvent[i].groupIndex + '\"]'));\n                this.removeEventWarapper(appElement);\n                if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                        this.parent.crudModule.crudObj.targetEvent[i].groupIndex + '\"]'));\n                    this.removeEventWarapper(ele);\n                }\n            }\n        }\n        else {\n            for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n                var wrap = appointmentWrapper_1[_i];\n                remove(wrap);\n            }\n        }\n        this.removeHeightProperty(cls.CONTENT_TABLE_CLASS);\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        this.eventHeight = util.getElementHeightFromClass(this.element, cls.APPOINTMENT_CLASS);\n        var scrollTop = conWrap.scrollTop;\n        if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !isNullOrUndefined(this.parent.currentAction)) {\n            conWrap.scrollTop = conWrap.scrollTop - 1;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.renderResourceEvents();\n        }\n        else {\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n        }\n        if (this.parent.rowAutoHeight) {\n            this.updateBlockElements();\n            var data = {\n                cssProperties: this.parent.getCssProperties(),\n                module: this.parent.getModuleName(),\n                isPreventScrollUpdate: true,\n                scrollPosition: { left: this.parent.uiStateValues.left, top: this.parent.uiStateValues.top }\n            };\n            if (this.parent.virtualScrollModule) {\n                if (this.parent.currentAction) {\n                    conWrap.scrollTop = scrollTop;\n                    this.parent.currentAction = null;\n                }\n                else {\n                    this.parent.virtualScrollModule.updateVirtualScrollHeight();\n                }\n            }\n            this.parent.notify(events.scrollUiUpdate, data);\n            if (!this.parent.enablePersistence) {\n                this.parent.notify(events.contentReady, {});\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n        this.renderedEvents = [];\n        var eventsList;\n        var blockList;\n        var resIndex = 0;\n        if (resData) {\n            resIndex = resData.groupIndex;\n            this.cssClass = resData.cssClass;\n            this.groupOrder = resData.groupOrder;\n            eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n            blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n        }\n        else {\n            eventsList = this.parent.eventsProcessed;\n            blockList = this.parent.blockProcessed;\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        }\n        this.sortByDateTime(eventsList);\n        this.sortByDateTime(blockList);\n        if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight) {\n            var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n            var height_1 = this.parent.element.querySelector('.e-schedule-table').clientHeight / totalCells.length;\n            totalCells.forEach(function (cell) {\n                setStyleAttribute(cell, { 'height': height_1 + 'px' });\n            });\n        }\n        var cellDetail = this.workCells.slice(-1)[0].getBoundingClientRect();\n        this.cellWidth = cellDetail.width;\n        this.cellHeight = cellDetail.height;\n        this.dateRender = dateRender;\n        var filteredDates = this.getRenderedDates(dateRender);\n        this.getSlotDates(workDays);\n        this.processBlockEvents(blockList, resIndex, resData);\n        for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n            var event_1 = eventsList_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n            }\n            var splittedEvents = this.splitEvent(event_1, filteredDates || this.dateRender);\n            for (var _a = 0, splittedEvents_1 = splittedEvents; _a < splittedEvents_1.length; _a++) {\n                var event_2 = splittedEvents_1[_a];\n                if (this.maxHeight) {\n                    var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] :\n                        this.getStartTime(event_2, event_2.data);\n                    if (this.getIndex(sDate) > 0) {\n                        continue;\n                    }\n                }\n                this.updateIndicatorIcon(event_2);\n                this.renderEvents(event_2, resIndex, eventsList);\n            }\n        }\n        this.cssClass = null;\n        this.groupOrder = null;\n    };\n    MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var event_3 = blockEvents_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n            }\n            var blockSpannedList = [];\n            if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n                var temp = extend({}, event_3, null, true);\n                var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                temp.isBlockIcon = isSameDate;\n                if (!isSameDate && util.getDateInMs(temp[this.fields.startTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.endTime] = util.addDays(util.resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n                    e.isBlockIcon = true;\n                    temp[this.fields.startTime] = e[this.fields.endTime];\n                    blockSpannedList.push(e);\n                }\n                isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                if (!isSameDate && util.getDateInMs(temp[this.fields.endTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.startTime] = util.resetTime(new Date(event_3[this.fields.endTime] + ''));\n                    e.isBlockIcon = true;\n                    blockSpannedList.push(e);\n                    temp[this.fields.endTime] = e[this.fields.startTime];\n                }\n                blockSpannedList.push(temp);\n            }\n            else {\n                blockSpannedList.push(event_3);\n            }\n            for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n                var blockEvent = blockSpannedList_1[_a];\n                var splittedEvents = this.splitEvent(blockEvent, this.dateRender);\n                for (var _b = 0, splittedEvents_2 = splittedEvents; _b < splittedEvents_2.length; _b++) {\n                    var event_4 = splittedEvents_2[_b];\n                    this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.isSameDate = function (start, end) {\n        return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    };\n    MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n        var eventData = event.data;\n        var startTime = this.getStartTime(event, eventData);\n        var endTime = this.getEndTime(event, eventData);\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (day < 0 || startTime > endTime) {\n            return;\n        }\n        var cellTd = this.getCellTd(day);\n        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n        if (!isIcon) {\n            var diffInDays = eventData.count;\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth;\n            var appLeft = (this.parent.enableRtl) ? 0 : position;\n            var appRight = (this.parent.enableRtl) ? position : 0;\n            this.renderWrapperElement(cellTd);\n            var appHeight = this.cellHeight - this.monthHeaderHeight;\n            var appTop = this.getRowTop(resIndex);\n            var blockElement = this.createBlockAppointmentElement(event, resIndex);\n            setStyleAttribute(blockElement, {\n                'width': appWidth + 'px', 'height': appHeight + 'px', 'left': appLeft + 'px',\n                'right': appRight + 'px', 'top': appTop + 'px'\n            });\n            this.renderEventElement(event, blockElement, cellTd);\n        }\n        else {\n            this.renderBlockIndicator(cellTd, position, resIndex);\n        }\n    };\n    MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n        if (isNullOrUndefined(cellTd.querySelector('.' + cls.BLOCK_INDICATOR_CLASS))) {\n            cellTd.appendChild(blockIndicator);\n        }\n    };\n    MonthEvent.prototype.getStartTime = function (event, eventData) {\n        return event[this.fields.startTime];\n    };\n    MonthEvent.prototype.getEndTime = function (event, eventData) {\n        return event[this.fields.endTime];\n    };\n    MonthEvent.prototype.getCellTd = function (day) {\n        return this.workCells[day];\n    };\n    MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        return count * this.cellWidth - 1;\n    };\n    MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        return 0;\n    };\n    MonthEvent.prototype.getRowTop = function (resIndex) {\n        return 0;\n    };\n    MonthEvent.prototype.updateIndicatorIcon = function (event) {\n        if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth'\n            || event[this.fields.isAllDay]) {\n            return;\n        }\n        var cloneData = event.data;\n        var startHour = util.getStartEndHours(event[this.fields.startTime], this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        var endHour = util.getStartEndHours(event[this.fields.endTime], this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        cloneData.isLeft = cloneData.isLeft || cloneData[this.fields.startTime].getTime() < startHour.startHour.getTime();\n        cloneData.isRight = cloneData.isRight || cloneData[this.fields.endTime].getTime() > endHour.endHour.getTime();\n    };\n    MonthEvent.prototype.renderResourceEvents = function () {\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var sourceRes = this.parent.crudModule.crudObj.sourceEvent[i];\n                this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n                if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[i];\n                    this.renderEventsHandler(target.renderDates, target.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n                var slotData = resources_1[_i];\n                this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n            }\n        }\n    };\n    MonthEvent.prototype.getSlotDates = function (workDays) {\n        this.slots = [];\n        var dates = this.dateRender.map(function (date) { return +date; });\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        while (dates.length > 0) {\n            this.slots.push(dates.splice(0, noOfDays));\n        }\n    };\n    MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n        if (isCloneElement === void 0) { isCloneElement = false; }\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default);\n        var newRecord = extend({}, record, record.data, true);\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'role': 'button', 'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnocementString(newRecord, eventSubject)\n            }\n        });\n        if (!isCloneElement) {\n            appointmentWrapper.setAttribute('data-guid', record.Guid);\n        }\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement;\n        var eventData = record.data;\n        var eventObj = this.getEventData(record);\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            var templateArgs = util.addLocalOffsetToEvent(eventObj, this.parent.eventFields);\n            templateElement = this.parent.getAppointmentTemplate()(templateArgs, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var eventLocation = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var appointmentSubject = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (eventLocation ? ';&nbsp' + eventLocation : ''))\n            });\n            var appointmentStartTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n            });\n            var appointmentEndTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n            });\n            if (this.parent.currentView === 'Month') {\n                if (record[this.fields.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                    addClass([appointmentSubject], 'e-text-center');\n                }\n                else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n                    templateElement = [appointmentStartTime, appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var innerElement = void 0;\n                if (record[this.fields.isAllDay]) {\n                    var allDayString = createElement('div', {\n                        className: cls.APPOINTMENT_TIME, innerHTML: this.parent.localeObj.getConstant('allDay')\n                    });\n                    innerElement = [appointmentSubject, allDayString];\n                }\n                else {\n                    var timeString = this.parent.getTimeString(eventData[this.fields.startTime])\n                        + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n                    var appTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''), innerHTML: timeString,\n                    });\n                    var appLocation = createElement('div', { className: cls.LOCATION_CLASS, innerHTML: eventLocation });\n                    innerElement = [appointmentSubject, appTime, appLocation];\n                }\n                var wrap = createElement('div', { className: 'e-inner-wrap' });\n                append(innerElement, wrap);\n                templateElement = [wrap];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        this.appendEventIcons(record, appointmentDetails);\n        this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n        var eventData = record.data;\n        if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n            var iconClass = (record[this.fields.id] === record[this.fields.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appointmentDetails.appendChild(createElement('div', {\n                className: cls.ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : '')\n            }));\n        }\n        if (eventData.isLeft) {\n            var iconLeft = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_LEFT_CLASS\n            });\n            prepend([iconLeft], appointmentDetails);\n        }\n        if (eventData.isRight) {\n            var iconRight = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_RIGHT_CLASS\n            });\n            append([iconRight], appointmentDetails);\n        }\n    };\n    MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(startTime));\n        if (day < 0) {\n            return;\n        }\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var appHeight = this.eventHeight;\n        this.renderedEvents.push(extend({}, event, null, true));\n        var diffInDays = event.data.count;\n        if (startTime.getTime() <= endTime.getTime()) {\n            var appWidth = (diffInDays * this.cellWidth) - 5;\n            var cellTd = this.workCells[day];\n            var appTop = (overlapCount * (appHeight + EVENT_GAP));\n            this.renderWrapperElement(cellTd);\n            var height = this.monthHeaderHeight + ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || enableAppRender) {\n                var appointmentElement = void 0;\n                if (this.inlineValue) {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                else {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                this.wireAppointmentEvents(appointmentElement, event);\n                setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'top': appTop + 'px' });\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    var firstChild = cellTd.parentElement.firstElementChild;\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var cellTd_1 = this.workCells[day + i];\n                    if (cellTd_1 && isNullOrUndefined(cellTd_1.querySelector('.' + cls.MORE_INDICATOR_CLASS))) {\n                        var startDate = new Date(this.dateRender[day + i].getTime());\n                        var endDate = util.addDays(this.dateRender[day + i], 1);\n                        var groupIndex = cellTd_1.getAttribute('data-group-index');\n                        var filterEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n                        var appArea = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight;\n                        appHeight = this.withIndicator ? appArea : appHeight;\n                        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n                        var count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n                        var moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n                        if (!isNullOrUndefined(groupIndex)) {\n                            moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                        }\n                        moreIndicatorElement.style.top = appArea + 'px';\n                        moreIndicatorElement.style.width = cellTd_1.offsetWidth - 2 + 'px';\n                        this.renderElement(cellTd_1, moreIndicatorElement);\n                        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                    }\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n        }\n    };\n    MonthEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var target = closest(element, 'tr');\n            this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n            element.style.height = ((target.offsetHeight - 1) - this.monthHeaderHeight) + 'px';\n            var firstChild = target.firstElementChild;\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n    };\n    MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n        var filteredEvents;\n        if (isNullOrUndefined(groupIndex)) {\n            filteredEvents = this.filterEvents(startDate, endDate);\n        }\n        else {\n            var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n        }\n        return filteredEvents;\n    };\n    MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            if ((util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(date).getTime()) &&\n                (util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(date).getTime())) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    MonthEvent.prototype.getIndex = function (date) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapEvents(date, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    MonthEvent.prototype.moreIndicatorClick = function (event) {\n        var _this = this;\n        var target = closest(event.target, '.' + cls.MORE_INDICATOR_CLASS);\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n        var groupIndex = target.getAttribute('data-group-index');\n        var moreArgs = {\n            cancel: false, event: event, element: target, isPopupOpen: true,\n            startTime: startDate, endTime: endDate, viewName: this.parent.getNavigateView()\n        };\n        if (groupIndex) {\n            moreArgs.groupIndex = parseInt(groupIndex, 10);\n        }\n        this.parent.trigger(events.moreEventsClick, moreArgs, function (clickArgs) {\n            if (!clickArgs.cancel) {\n                if (clickArgs.isPopupOpen) {\n                    var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n                    var moreEventArgs = { date: startDate, event: filteredEvents, element: event.target };\n                    _this.parent.quickPopup.moreEventClick(moreEventArgs, endDate, groupIndex);\n                }\n                else {\n                    _this.parent.setScheduleProperties({ selectedDate: startDate });\n                    _this.parent.changeView(clickArgs.viewName, event);\n                }\n            }\n        });\n    };\n    MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n        var _this = this;\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var isAppointment = appointmentElement.classList.contains(cls.APPOINTMENT_CLASS);\n        var eventObj = this.getEventData(event);\n        var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (eventArgs.cancel) {\n                _this.renderedEvents.pop();\n            }\n            else {\n                _this.renderElement(cellTd, appointmentElement, isAppointment);\n            }\n        });\n    };\n    MonthEvent.prototype.getEventData = function (event) {\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n        eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n        return eventObj;\n    };\n    MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (this.maxOrIndicator && isAppointment) {\n            this.setMaxEventHeight(element, cellTd);\n        }\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    MonthEvent.prototype.renderWrapperElement = function (cellTd) {\n        var element = cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!isNullOrUndefined(element)) {\n            this.monthHeaderHeight = element.offsetTop - cellTd.offsetTop;\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            cellTd.appendChild(wrapper);\n            this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n        }\n    };\n    MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n        var moreIndicatorElement = createElement('div', {\n            className: cls.MORE_INDICATOR_CLASS,\n            innerHTML: '+' + count + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more')),\n            attrs: {\n                'tabindex': '0',\n                'data-start-date': startDate.getTime().toString(),\n                'data-end-date': endDate.getTime().toString(),\n                'role': 'list'\n            }\n        });\n        return moreIndicatorElement;\n    };\n    MonthEvent.prototype.removeHeightProperty = function (selector) {\n        var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n        var headerHeight = util.getOuterHeight(cell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var height = (cell.offsetHeight - headerHeight) - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n        setStyleAttribute(event, { 'height': height + 'px', 'align-items': 'center' });\n    };\n    return MonthEvent;\n}(EventBase));\nexport { MonthEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, setStyleAttribute, extend, EventHandler, createElement } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nimport { MonthEvent } from './month';\nvar EVENT_GAP = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\nvar TimelineEvent = /** @class */ (function (_super) {\n    __extends(TimelineEvent, _super);\n    /**\n     * Constructor for timeline views\n     */\n    function TimelineEvent(parent, type) {\n        var _this = _super.call(this, parent) || this;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.day = 0;\n        _this.rowIndex = 0;\n        _this.renderType = type;\n        _this.eventContainers = [].slice.call(_this.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var tr = [].slice.call(_this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n        _this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n        _this.content = _this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        return _this;\n    }\n    TimelineEvent.prototype.getSlotDates = function () {\n        this.slots = [];\n        this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.headerRows.length > 0 &&\n            this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour') {\n            this.renderType = 'day';\n            this.cellWidth = this.content.offsetWidth / this.dateRender.length;\n            this.slotsPerDay = 1;\n        }\n        else {\n            this.slotsPerDay = (this.dayLength / this.dateRender.length);\n        }\n    };\n    TimelineEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        if (this.renderType === 'day') {\n            for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n                var app = appointments_1[_i];\n                if ((util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(new Date(date.getTime())).getTime()) &&\n                    (util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(new Date(date.getTime())).getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        else {\n            for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {\n                var app = appointments_2[_a];\n                var eventData = app.data;\n                if (eventData.trimStartTime.getTime() <= date.getTime() &&\n                    eventData.trimEndTime.getTime() > date.getTime()) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    TimelineEvent.prototype.renderResourceEvents = function () {\n        this.removeHeightProperty(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var source = this.parent.crudModule.crudObj.sourceEvent[i];\n                this.rowIndex = source.groupIndex;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n                if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[i];\n                    this.rowIndex = target.groupIndex;\n                    this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var i = 0; i < resources.length; i++) {\n                this.rowIndex = i;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[i]);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    TimelineEvent.prototype.renderEvents = function (event, resIndex, appointmentsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var eventData = event.data;\n        startTime = this.getStartTime(event, eventData);\n        endTime = this.getEndTime(event, eventData);\n        this.day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (this.day < 0) {\n            return;\n        }\n        var cellTd = this.getCellTd();\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var elem = this.element.querySelector('.' + cls.APPOINTMENT_CLASS);\n        var eleHeight = (elem) ? elem.getBoundingClientRect().height : 0;\n        var appHeight = (elem && eleHeight > 0) ? eleHeight : this.eventHeight;\n        var diffInDays = eventData.count;\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n        eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[this.day].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n        if (startTime <= endTime && isValidEvent) {\n            var appWidth_1 = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth_1 = this.renderType === 'day' ? appWidth_1 - 2 : appWidth_1;\n            var appLeft = 0;\n            var appRight = 0;\n            var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n            appWidth_1 = (appWidth_1 <= 0) ? this.cellWidth : appWidth_1; // appWidth 0 when start and end time as same\n            this.renderedEvents.push(extend({}, event, null, true));\n            var top_1 = this.getRowTop(resIndex);\n            var appTop = (top_1 + (this.maxHeight ? 0 : EVENT_GAP)) + (overlapCount * (appHeight + EVENT_GAP));\n            appLeft = (this.parent.enableRtl) ? 0 : position;\n            appRight = (this.parent.enableRtl) ? position : 0;\n            var height = ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var renderApp = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || renderApp) {\n                var appointmentElement = void 0;\n                if (isNullOrUndefined(this.inlineValue)) {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                else {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                setStyleAttribute(appointmentElement, {\n                    'width': appWidth_1 + 'px', 'left': appLeft + 'px', 'right': appRight + 'px', 'top': appTop + 'px'\n                });\n                this.wireAppointmentEvents(appointmentElement, event);\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    var firstChild = this.getFirstChild(resIndex);\n                    this.updateCellHeight(firstChild, height);\n                }\n                if (this.parent.activeViewOptions.option !== 'TimelineMonth' && this.parent.activeViewOptions.timeScale.enable\n                    && appWidth_1 < this.cellWidth) {\n                    var resizeHandlers = [].slice.call(appointmentElement.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n                    resizeHandlers.forEach(function (resizeHandler) {\n                        resizeHandler.style.width = Math.ceil(appWidth_1 / resizeHandler.getBoundingClientRect().width) + 'px';\n                    });\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var moreIndicator = cellTd.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n                    var appPos = (this.parent.enableRtl) ? appRight : appLeft;\n                    appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n                    if ((cellTd && isNullOrUndefined(moreIndicator)) ||\n                        (!this.isAlreadyAvail(appPos, cellTd))) {\n                        var interval = this.interval / this.slotCount;\n                        var startDate = new Date(this.dateRender[this.day + i].getTime());\n                        var endDate = util.addDays(this.dateRender[this.day + i], 1);\n                        var startDateTime = new Date(+startTime);\n                        var slotStartTime = (new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval)));\n                        var slotEndTime = new Date(slotStartTime.getTime() + (60000 * interval));\n                        var groupIndex = void 0;\n                        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n                            groupIndex = resIndex.toString();\n                        }\n                        var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n                        var appArea = this.cellHeight - this.moreIndicatorHeight;\n                        appHeight = this.withIndicator ? appArea - EVENT_GAP : appHeight;\n                        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n                        var count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n                        var moreIndicatorElement = void 0;\n                        if (this.renderType === 'day') {\n                            moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n                        }\n                        else {\n                            moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n                        }\n                        if (!isNullOrUndefined(groupIndex)) {\n                            moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                        }\n                        moreIndicatorElement.style.top = top_1 + appArea + 'px';\n                        moreIndicatorElement.style.width = this.cellWidth + 'px';\n                        moreIndicatorElement.style.left = (Math.floor(appLeft / this.cellWidth) * this.cellWidth) + 'px';\n                        moreIndicatorElement.style.right = (Math.floor(appRight / this.cellWidth) * this.cellWidth) + 'px';\n                        this.renderElement(cellTd, moreIndicatorElement);\n                        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                    }\n                }\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    TimelineEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.getBoundingClientRect().height)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var resourceCell = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' +\n                    cell.getAttribute('data-group-index') + '\"]');\n                if (resourceCell) {\n                    setStyleAttribute(resourceCell, { 'height': height + 'px' });\n                }\n            }\n            var monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' +\n                (cell.parentElement.rowIndex + 1) + ') td');\n            if (monthHeader) {\n                setStyleAttribute(monthHeader, { 'height': height + 'px' });\n            }\n        }\n    };\n    TimelineEvent.prototype.getFirstChild = function (index) {\n        var query = '.' + cls.CONTENT_TABLE_CLASS + ' tbody td';\n        var groupIndex = '';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n        }\n        var td = this.parent.element.querySelector(query + groupIndex);\n        return td;\n    };\n    TimelineEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            var firstChild = this.getFirstChild(resIndex);\n            element.style.height = firstChild.offsetHeight + 'px';\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n        var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_INDICATOR_CLASS));\n        for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {\n            var element = blockIndicator_1[_a];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            element.style.top = this.getRowTop(resIndex) +\n                this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        }\n    };\n    TimelineEvent.prototype.getStartTime = function (event, eventData) {\n        var startTime = event[this.fields.startTime];\n        var schedule = util.getStartEndHours(startTime, this.startHour, this.endHour);\n        if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n            startTime = schedule.startHour;\n        }\n        else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n            startTime = this.getNextDay(schedule.startHour, eventData);\n        }\n        else {\n            startTime = eventData[this.fields.startTime];\n        }\n        // To overcome the overflow\n        eventData.trimStartTime = (event[this.fields.isAllDay]) ? schedule.startHour : eventData[this.fields.startTime];\n        return startTime;\n    };\n    TimelineEvent.prototype.getNextDay = function (startTime, eventData) {\n        var startDate;\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            startDate = util.addDays(startTime, i);\n            if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n                eventData.count = eventData.count - 1;\n                return startDate;\n            }\n        }\n        return startDate;\n    };\n    TimelineEvent.prototype.getEndTime = function (event, eventData) {\n        var endTime = event[this.fields.endTime];\n        var schedule = util.getStartEndHours(endTime, this.startHour, this.endHour);\n        if (schedule.endHour.getTime() <= eventData[this.fields.endTime]) {\n            endTime = schedule.endHour;\n        }\n        else {\n            endTime = eventData[this.fields.endTime];\n        }\n        // To overcome the overflow\n        eventData.trimEndTime = (event[this.fields.isAllDay]) ? schedule.endHour : eventData[this.fields.endTime];\n        return endTime;\n    };\n    TimelineEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (count * this.slotsPerDay) * this.cellWidth;\n        }\n        if (this.isSameDay(startDate, endDate)) {\n            return this.getSameDayEventsWidth(startDate, endDate);\n        }\n        else {\n            return this.getSpannedEventsWidth(startDate, endDate, count);\n        }\n    };\n    TimelineEvent.prototype.getSameDayEventsWidth = function (startDate, endDate) {\n        return (((endDate.getTime() - startDate.getTime())) / (60 * 1000) * (this.cellWidth * this.slotCount) / this.interval);\n    };\n    TimelineEvent.prototype.getSpannedEventsWidth = function (startDate, endDate, diffInDays) {\n        var width = (diffInDays * this.slotsPerDay) * this.cellWidth;\n        var startWidth;\n        var endWidth;\n        var start = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n        startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n        if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endDate.getTime()))) === -1) {\n            endWidth = 0;\n        }\n        else {\n            var end = util.getStartEndHours(util.resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n            endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n            endWidth = ((this.slotsPerDay * this.cellWidth) === endWidth) ? 0 : endWidth;\n        }\n        var spannedWidth = startWidth + endWidth;\n        return (width > spannedWidth) ? width - spannedWidth : endWidth - startWidth;\n    };\n    TimelineEvent.prototype.isSameDay = function (startTime, endTime) {\n        var startDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        var endDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endTime.getTime())));\n        return (startDay === endDay);\n    };\n    TimelineEvent.prototype.getAppointmentLeft = function (schedule, startTime, day) {\n        var slotTd = (this.isSameDay(startTime, schedule.startHour)) ?\n            ((startTime.getTime() - schedule.startHour.getTime()) / ((60 * 1000) * this.interval)) * this.slotCount : 0;\n        if (day === 0) {\n            return slotTd;\n        }\n        else {\n            var daySlot = Math.round((((schedule.endHour.getTime() - schedule.startHour.getTime()) / (60 * 1000)) / this.interval) * this.slotCount);\n            return (daySlot * day) + slotTd;\n        }\n    };\n    TimelineEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (day * this.slotsPerDay) * this.cellWidth;\n        }\n        var currentDate = util.resetTime(new Date(this.dateRender[day].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var cellIndex;\n        if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else if (schedule.endHour.getTime() <= endTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        else if (schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        return cellIndex * this.cellWidth;\n    };\n    //tslint:disable-next-line:max-line-length\n    TimelineEvent.prototype.getFilterEvents = function (startDate, endDate, startTime, endTime, gIndex, eventsList) {\n        if (this.renderType === 'day') {\n            return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n        }\n        else {\n            return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n        }\n    };\n    TimelineEvent.prototype.isAlreadyAvail = function (appPos, cellTd) {\n        var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + cls.MORE_INDICATOR_CLASS));\n        for (var i = 0; i < moreIndicator.length; i++) {\n            var indicatorPos = void 0;\n            if (moreIndicator) {\n                indicatorPos = (this.parent.enableRtl) ? moreIndicator[i].style.right : moreIndicator[i].style.left;\n            }\n            if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    TimelineEvent.prototype.getCellHeight = function (resIndex) {\n        var heightValue = 0;\n        for (var i = 0; i < resIndex; i++) {\n            heightValue += this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS +\n                '[data-group-index=\"' + i.toString() + '\"]').offsetHeight;\n        }\n        return heightValue;\n    };\n    TimelineEvent.prototype.getRowTop = function (resIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return ((this.parent.activeViewOptions.group.resources.length > 1 || this.parent.virtualScrollModule ||\n                this.parent.rowAutoHeight) ? this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop : this.getCellHeight(resIndex));\n        }\n        return 0;\n    };\n    TimelineEvent.prototype.getCellTd = function () {\n        var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n        return this.eventContainers[wrapIndex];\n    };\n    TimelineEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        // No need to render block icon for Year, Month and Week header rows\n        if (this.parent.headerRows.length > 0 &&\n            (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' ||\n                this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n            return;\n        }\n        position = (Math.floor(position / this.cellWidth) * this.cellWidth) + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n        if (!this.isAlreadyAvail(position, cellTd)) {\n            var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                blockIndicator.setAttribute('data-group-index', resIndex.toString());\n            }\n            if (this.parent.enableRtl) {\n                blockIndicator.style.right = position + 'px';\n            }\n            else {\n                blockIndicator.style.left = position + 'px';\n            }\n            blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n            this.renderElement(cellTd, blockIndicator);\n        }\n    };\n    TimelineEvent.prototype.setMaxEventHeight = function (event, cell) {\n        setStyleAttribute(event, {\n            'height': (this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP) -\n                (this.maxHeight ? 0 : this.moreIndicatorHeight)) + 'px'\n        });\n    };\n    return TimelineEvent;\n}(MonthEvent));\nexport { TimelineEvent };\n","import { addClass, createElement, closest, remove, removeClass } from '@syncfusion/ej2-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\n/**\n * Inline Edit interactions\n */\nvar InlineEdit = /** @class */ (function () {\n    /**\n     * Constructor for InlineEdit\n     */\n    function InlineEdit(parent) {\n        this.parent = parent;\n        this.parent.on(events.inlineClick, this.inlineEdit, this);\n    }\n    InlineEdit.prototype.inlineEdit = function (args) {\n        this.parent.quickPopup.quickPopupHide();\n        var moreWrapper = this.parent.element.querySelector('.e-more-popup-wrapper ');\n        if (moreWrapper && moreWrapper.classList.contains(cls.POPUP_OPEN)) {\n            this.parent.quickPopup.morePopup.hide();\n        }\n        if (args.type === 'Cell') {\n            this.removeInlineAppointmentElement();\n            this.cellEdit(args);\n        }\n        else {\n            if (this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS) !==\n                args.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS)) {\n                this.removeInlineAppointmentElement();\n            }\n            this.eventEdit(args);\n        }\n    };\n    InlineEdit.prototype.cellEdit = function (args) {\n        var saveObj = this.generateEventData();\n        var cellIndex = args.element.cellIndex;\n        var count = this.getEventDaysCount(saveObj);\n        if (count > 1) {\n            count = Math.round(count);\n            count--;\n            cellIndex = cellIndex - count;\n        }\n        var start = util.resetTime(new Date('' + saveObj[this.parent.eventFields.startTime])).getTime();\n        var end = util.resetTime(new Date('' + saveObj[this.parent.eventFields.endTime])).getTime();\n        var resIndex = args.groupIndex || 0;\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            var dayIndex = saveObj[this.parent.eventFields.startTime].getDay();\n            this.createVerticalViewInline(saveObj, dayIndex, resIndex, cellIndex);\n        }\n        else if (this.parent.currentView === 'Month') {\n            this.createMonthViewInline(saveObj, resIndex, start, end);\n        }\n        else {\n            this.createTimelineViewInline(saveObj, start, end, resIndex);\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            inlineSubject.focus();\n        }\n    };\n    InlineEdit.prototype.eventEdit = function (args) {\n        var inlineSubject = args.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        var subject;\n        if (inlineSubject) {\n            subject = inlineSubject.value;\n        }\n        else {\n            var subEle = args.element.querySelector('.' + cls.SUBJECT_CLASS);\n            var timeEle = args.element.querySelector('.' + cls.APPOINTMENT_TIME);\n            subject = subEle.innerText;\n            inlineSubject = createElement('input', { className: cls.INLINE_SUBJECT_CLASS, attrs: { value: subject } });\n            addClass([subEle], cls.DISABLE_CLASS);\n            if (closest(args.element, '.' + cls.MORE_POPUP_WRAPPER_CLASS)) {\n                args.element.insertBefore(inlineSubject, subEle);\n            }\n            else if (['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n                var subjectWrap = args.element.querySelector('.' + cls.SUBJECT_WRAP);\n                subjectWrap.insertBefore(inlineSubject, subjectWrap.firstChild);\n            }\n            else {\n                var elementSelector = ['TimelineWeek', 'TimelineMonth'].indexOf(this.parent.currentView) > -1 ?\n                    '.e-inner-wrap' : '.e-appointment-details';\n                args.element.querySelector(elementSelector).insertBefore(inlineSubject, timeEle);\n            }\n        }\n        inlineSubject.focus();\n        inlineSubject.setSelectionRange(subject.length, subject.length);\n    };\n    InlineEdit.prototype.createVerticalViewInline = function (saveObj, dayIndex, resIndex, daysCount) {\n        var count = this.getEventDaysCount(saveObj);\n        var verticalEvent = new VerticalEvent(this.parent);\n        verticalEvent.initializeValues();\n        var index = verticalEvent.dateRender[resIndex].map(function (date) { return date.getDay(); }).indexOf(dayIndex);\n        if (count >= 1) {\n            verticalEvent.allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n            verticalEvent.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            var allDayElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_APPOINTMENT_CLASS));\n            var allDayLevel = 0;\n            if (allDayElements.length > 0) {\n                allDayLevel = Math.floor(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).getBoundingClientRect().height /\n                    allDayElements[0].offsetHeight) - 1;\n            }\n            verticalEvent.allDayLevel = allDayLevel;\n            verticalEvent.renderAllDayEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n        }\n        else {\n            verticalEvent.renderNormalEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n        }\n    };\n    InlineEdit.prototype.createMonthViewInline = function (saveObj, index, start, end) {\n        var count = this.getEventDaysCount(saveObj);\n        var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        var monthEvent = new MonthEvent(this.parent);\n        monthEvent.dateRender = this.parent.activeView.renderDates;\n        monthEvent.inlineValue = this.parent.allowInline;\n        var renderDates = this.parent.activeView.renderDates;\n        var workDays = this.parent.activeViewOptions.workDays;\n        var monthCellSelector = '.' + cls.WORK_CELLS_CLASS;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            monthCellSelector += '[data-group-index=\"' + index + '\"]';\n            var resourceData = this.parent.resourceBase.lastResourceLevel[index];\n            renderDates = resourceData.renderDates;\n            workDays = resourceData.workDays;\n        }\n        monthEvent.workCells = [].slice.call(this.parent.element.querySelectorAll(monthCellSelector));\n        monthEvent.cellWidth = monthEvent.workCells[0].offsetWidth;\n        monthEvent.cellHeight = monthEvent.workCells[0].offsetHeight;\n        monthEvent.eventHeight = util.getElementHeightFromClass(this.parent.monthModule.element, cls.APPOINTMENT_CLASS);\n        monthEvent.getSlotDates(workDays);\n        var filteredDates = monthEvent.getRenderedDates(renderDates);\n        var splittedEvents = monthEvent.splitEvent(saveObject, filteredDates || renderDates);\n        for (var _i = 0, splittedEvents_1 = splittedEvents; _i < splittedEvents_1.length; _i++) {\n            var eventData = splittedEvents_1[_i];\n            monthEvent.renderEvents(eventData, index);\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        inlineSubject.focus();\n    };\n    InlineEdit.prototype.createTimelineViewInline = function (saveObj, start, end, resIndex) {\n        var count = this.getEventDaysCount(saveObj);\n        var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        var timelineView = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        timelineView.dateRender = this.parent.activeView.renderDates;\n        timelineView.eventContainers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        timelineView.inlineValue = this.parent.allowInline;\n        timelineView.cellWidth = workCell.offsetWidth;\n        timelineView.cellHeight = workCell.offsetHeight;\n        var dayLength = this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr').length === 0 ?\n            0 : this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr')[0].children.length;\n        timelineView.slotsPerDay = dayLength / timelineView.dateRender.length;\n        timelineView.eventHeight = util.getElementHeightFromClass(timelineView.element, cls.APPOINTMENT_CLASS);\n        timelineView.renderEvents(saveObject, resIndex);\n    };\n    InlineEdit.prototype.getEventDaysCount = function (saveObj) {\n        var startDate = saveObj[this.parent.eventFields.startTime];\n        var endDate = saveObj[this.parent.eventFields.endTime];\n        var daysCount = Math.abs(endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY;\n        return daysCount;\n    };\n    InlineEdit.prototype.generateEventData = function (target) {\n        var inlineElement = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        var subject = inlineElement ? inlineElement.value : target ? target.innerHTML : '';\n        var saveObj = {};\n        saveObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n        saveObj[this.parent.eventFields.subject] = subject;\n        saveObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        saveObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        saveObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        this.parent.eventWindow.setDefaultValueToObject(saveObj);\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.setResourceValues(saveObj, this.parent.activeCellsData.groupIndex);\n        }\n        return saveObj;\n    };\n    InlineEdit.prototype.documentClick = function () {\n        var target = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (target && target.value !== '') {\n            this.inlineCrudActions(target);\n        }\n    };\n    InlineEdit.prototype.inlineCrudActions = function (target) {\n        if (closest(target, '.' + cls.INLINE_APPOINTMENT_CLASS)) {\n            var saveObj = this.generateEventData(target);\n            this.parent.addEvent(saveObj);\n        }\n        else {\n            var eventTarget = closest(target, '.' + cls.APPOINTMENT_CLASS);\n            var eventDetails = this.parent.getEventDetails(eventTarget);\n            eventDetails[this.parent.eventFields.subject] = target.value;\n            var currentAction = void 0;\n            if (eventDetails[this.parent.eventFields.id] === eventDetails[this.parent.eventFields.recurrenceID]) {\n                currentAction = 'EditOccurrence';\n                eventDetails[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n            }\n            this.parent.saveEvent(eventDetails, currentAction);\n        }\n        this.removeInlineAppointmentElement();\n    };\n    InlineEdit.prototype.createInlineAppointmentElement = function (inlineData) {\n        var inlineAppointmentElement = createElement('div', {\n            className: cls.APPOINTMENT_CLASS + ' ' + cls.INLINE_APPOINTMENT_CLASS\n        });\n        var inlineDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        inlineAppointmentElement.appendChild(inlineDetails);\n        var inline = createElement('input', { className: cls.INLINE_SUBJECT_CLASS });\n        inlineDetails.appendChild(inline);\n        if (inlineData) {\n            this.parent.eventBase.applyResourceColor(inlineAppointmentElement, inlineData, 'backgroundColor');\n        }\n        return inlineAppointmentElement;\n    };\n    InlineEdit.prototype.removeInlineAppointmentElement = function () {\n        var inlineAppointment = [].slice.call(this.parent.element.querySelectorAll('.' + cls.INLINE_APPOINTMENT_CLASS));\n        if (inlineAppointment.length > 0) {\n            inlineAppointment.forEach(function (node) { return remove(node); });\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            var appointmentSubject = closest(inlineSubject, '.' + cls.APPOINTMENT_CLASS);\n            removeClass([appointmentSubject.querySelector('.' + cls.SUBJECT_CLASS)], cls.DISABLE_CLASS);\n            remove(inlineSubject);\n        }\n    };\n    InlineEdit.prototype.destroy = function () {\n        this.parent.off(events.inlineClick, this.inlineEdit);\n    };\n    return InlineEdit;\n}());\nexport { InlineEdit };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport * as cls from '../base/css-constant';\n/**\n * Appointment window field validation\n */\nvar FieldValidator = /** @class */ (function () {\n    function FieldValidator() {\n    }\n    FieldValidator.prototype.renderFormValidator = function (form, rules, element) {\n        var _this = this;\n        this.element = element;\n        this.formObj = new FormValidator(form, {\n            customPlacement: function (inputElement, error) {\n                _this.errorPlacement(inputElement, error);\n            },\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            focusout: function (args) {\n                _this.focusOut(args);\n            }\n        });\n    };\n    FieldValidator.prototype.focusOut = function (args) {\n        var target = args.relatedTarget;\n        if (target && (target.classList.contains('e-dlg-closeicon-btn') || target.classList.contains('e-close')\n            || target.classList.contains(cls.ALLDAY_CELLS_CLASS) || target.classList.contains(cls.HEADER_CELLS_CLASS)\n            || target.classList.contains(cls.QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(cls.WORK_CELLS_CLASS)\n            || target.classList.contains(cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS))) {\n            this.ignoreError = true;\n        }\n        else {\n            this.ignoreError = false;\n        }\n    };\n    FieldValidator.prototype.validationComplete = function (args) {\n        var elem = this.element.querySelector('#' + args.inputName + '_Error');\n        if (elem) {\n            elem.style.display = (args.status === 'failure') ? '' : 'none';\n        }\n    };\n    FieldValidator.prototype.errorPlacement = function (inputElement, error) {\n        var id = error.getAttribute('for');\n        var elem = this.element.querySelector('#' + id + '_Error');\n        if (!elem && !this.ignoreError) {\n            this.createTooltip(inputElement, error, id, '');\n        }\n    };\n    FieldValidator.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.getBoundingClientRect();\n        if (this.element.classList.contains(cls.POPUP_WRAPPER_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-schedule-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    FieldValidator.prototype.destroyToolTip = function () {\n        if (this.element) {\n            var elements = [].slice.call(this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS));\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var elem = elements_1[_i];\n                remove(elem);\n            }\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    /**\n     * @hidden\n     */\n    FieldValidator.prototype.destroy = function () {\n        if (this.formObj && this.formObj.element && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n    };\n    return FieldValidator;\n}());\nexport { FieldValidator };\n","import { closest, EventHandler, isNullOrUndefined, formatUnit, append, isBlazor } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, createElement, remove, extend, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { getElement } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { FieldValidator } from './form-validator';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @class */ (function () {\n    /**\n     * Constructor for QuickPopups\n     */\n    function QuickPopups(parent) {\n        this.isMultipleEventSelect = false;\n        this.isCrudAction = false;\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fieldValidator = new FieldValidator();\n        this.render();\n        this.addEventListener();\n    }\n    QuickPopups.prototype.render = function () {\n        this.renderQuickPopup();\n        this.renderMorePopup();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.renderQuickPopup = function () {\n        var quickPopupWrapper = createElement('div', { className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close' });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(quickPopupWrapper);\n            addClass([quickPopupWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(quickPopupWrapper);\n        }\n        this.quickPopup = new Popup(quickPopupWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            open: this.quickPopupOpen.bind(this),\n            close: this.quickPopupClose.bind(this),\n            hideAnimation: (this.parent.isAdaptive ? { name: 'ZoomOut' } : { name: 'FadeOut', duration: 150 }),\n            showAnimation: (this.parent.isAdaptive ? { name: 'ZoomIn' } : { name: 'FadeIn', duration: 150 }),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'none', Y: 'fit' })),\n            position: (this.parent.isAdaptive || this.parent.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1004 : 3)\n        });\n        this.quickPopup.isStringTemplate = true;\n    };\n    QuickPopups.prototype.renderMorePopup = function () {\n        var moreEventPopup = \"<div class=\\\"\" + cls.MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_CLASS + \"\\\">\" +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_DAY_CLASS + \"\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_HEADER_DATE_CLASS + \" \" + cls.NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\"></div></div></div></div>\");\n        var moreEventWrapper = createElement('div', {\n            className: cls.MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n            innerHTML: moreEventPopup\n        });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(moreEventWrapper);\n            addClass([moreEventWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(moreEventWrapper);\n        }\n        this.morePopup = new Popup(moreEventWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'ZoomOut', duration: 300 },\n            showAnimation: { name: 'ZoomIn', duration: 300 },\n            open: this.morePopupOpen.bind(this),\n            close: this.morePopupClose.bind(this),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'flip', Y: 'flip' })),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1002 : 2)\n        });\n        this.morePopup.isStringTemplate = true;\n        var closeButton = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CLOSE_CLASS);\n        this.renderButton('e-round', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n        EventHandler.add(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    };\n    QuickPopups.prototype.renderQuickDialog = function () {\n        var buttonModel = [\n            { buttonModel: { cssClass: 'e-quick-alertok e-flat', isPrimary: true }, click: this.dialogButtonClick.bind(this) },\n            { buttonModel: { cssClass: 'e-quick-alertcancel e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this) },\n            {\n                buttonModel: { cssClass: 'e-quick-dialog-cancel e-disable e-flat', isPrimary: false },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (this.parent.eventSettings.editFollowingEvents) {\n            var followingSeriesButton = {\n                buttonModel: { cssClass: 'e-quick-alertfollowing e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this)\n            };\n            buttonModel.splice(1, 0, followingSeriesButton);\n        }\n        this.quickDialog = new Dialog({\n            animationSettings: { effect: 'Zoom' },\n            buttons: buttonModel,\n            cssClass: cls.QUICK_DIALOG_CLASS,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            beforeClose: this.beforeQuickDialogClose.bind(this),\n            isModal: true,\n            position: { X: 'center', Y: 'center' },\n            showCloseIcon: true,\n            target: document.body,\n            visible: false,\n            width: 'auto'\n        });\n        var dialogElement = createElement('div', { id: this.parent.element.id + 'QuickDialog' });\n        this.parent.element.appendChild(dialogElement);\n        this.quickDialog.appendTo(dialogElement);\n        this.quickDialog.isStringTemplate = true;\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n    };\n    QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n        var buttonObj = new Button({\n            cssClass: className,\n            disabled: isDisabled,\n            enableRtl: this.parent.enableRtl,\n            iconCss: iconName\n        });\n        buttonObj.appendTo(element);\n        buttonObj.isStringTemplate = true;\n        EventHandler.add(element, 'click', clickEvent, this);\n    };\n    QuickPopups.prototype.quickDialogClass = function (action) {\n        var classList = [\n            cls.QUICK_DIALOG_OCCURRENCE_CLASS, cls.QUICK_DIALOG_SERIES_CLASS, cls.QUICK_DIALOG_DELETE_CLASS,\n            cls.QUICK_DIALOG_CANCEL_CLASS, cls.QUICK_DIALOG_ALERT_BTN_CLASS, cls.DISABLE_CLASS\n        ];\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        removeClass([okButton, cancelButton], classList);\n        addClass([this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS)], cls.DISABLE_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n            addClass([followingEventButton], cls.DISABLE_CLASS);\n            removeClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n        }\n        switch (action) {\n            case 'Recurrence':\n                addClass([okButton], cls.QUICK_DIALOG_OCCURRENCE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_SERIES_CLASS);\n                if (this.parent.eventSettings.editFollowingEvents) {\n                    removeClass([followingEventButton], cls.DISABLE_CLASS);\n                    addClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n                    addClass([followingEventButton], cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n                }\n                break;\n            case 'Delete':\n                addClass([okButton], cls.QUICK_DIALOG_DELETE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n                break;\n            case 'Alert':\n                addClass([okButton], [cls.QUICK_DIALOG_ALERT_OK, cls.QUICK_DIALOG_ALERT_BTN_CLASS]);\n                addClass([cancelButton], [cls.QUICK_DIALOG_ALERT_CANCEL, cls.DISABLE_CLASS]);\n                break;\n        }\n    };\n    QuickPopups.prototype.applyFormValidation = function () {\n        var form = this.quickPopup.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n        this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element);\n    };\n    QuickPopups.prototype.openRecurrenceAlert = function () {\n        var editDeleteOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (editDeleteOnly) {\n            editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n            editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n        }\n        var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        if (editFollowingEventsOnly) {\n            editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n            editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n        }\n        var editDeleteSeries = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (editDeleteSeries) {\n            editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n            editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n        }\n        this.quickDialog.content = this.l10n.getConstant('editContent');\n        this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n        this.quickDialogClass('Recurrence');\n        var activeEvent = this.parent.activeEventData.event;\n        if (this.parent.eventSettings.editFollowingEvents && this.parent.currentAction === 'EditOccurrence'\n            && !isNullOrUndefined(activeEvent[this.parent.eventFields.recurrenceID]) && activeEvent[this.parent.eventFields.recurrenceID]\n            !== activeEvent[this.parent.eventFields.id]) {\n            var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n            addClass([followingEventButton], cls.DISABLE_CLASS);\n        }\n        this.showQuickDialog('RecurrenceAlert');\n    };\n    QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n        this.quickDialogClass('Alert');\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        switch (type) {\n            case 'wrongPattern':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n                break;\n            case 'createError':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('createError');\n                break;\n            case 'sameDayAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n                break;\n            case 'seriesChangeAlert':\n                var dialogCancel = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS);\n                removeClass([cancelButton, dialogCancel], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n                okButton.innerHTML = this.l10n.getConstant('yes');\n                cancelButton.innerHTML = this.l10n.getConstant('no');\n                dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n                break;\n        }\n        if ((!this.parent.enableRecurrenceValidation && type === 'wrongPattern') || this.parent.enableRecurrenceValidation) {\n            this.showQuickDialog('RecurrenceValidationAlert');\n        }\n    };\n    QuickPopups.prototype.openDeleteAlert = function () {\n        if (this.parent.activeViewOptions.readonly) {\n            return;\n        }\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('delete');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialog.content = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n        this.quickDialog.header = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n        this.quickDialogClass('Delete');\n        this.showQuickDialog('DeleteAlert');\n    };\n    QuickPopups.prototype.openValidationError = function (type, eventData) {\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        this.quickDialog.content = this.l10n.getConstant(type);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('ok');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            okButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialogClass('Alert');\n        this.showQuickDialog('ValidationAlert', eventData);\n    };\n    QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n        var _this = this;\n        this.quickDialog.dataBind();\n        var eventProp = {\n            type: popupType, cancel: false, data: extend({}, (eventData || this.parent.activeEventData.event), null, true),\n            element: this.quickDialog.element\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.quickDialog.show();\n            }\n        });\n    };\n    QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var moreEventContentEle = createElement('div', { className: cls.MORE_EVENT_CONTENT_CLASS });\n        var moreEventWrapperEle = createElement('div', { className: cls.MORE_EVENT_WRAPPER_CLASS });\n        if (eventCollection.length === 0) {\n            moreEventWrapperEle = createElement('div', {\n                className: cls.MORE_EVENT_CONTENT_CLASS,\n                innerHTML: this.l10n.getConstant('emptyContainer')\n            });\n        }\n        else {\n            var _loop_1 = function (eventData) {\n                var eventText = (eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default);\n                var appointmentElement = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS,\n                    attrs: {\n                        'data-id': '' + eventData[fields.id],\n                        'data-guid': eventData.Guid, 'role': 'button', 'tabindex': '0',\n                        'aria-readonly': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n                        'aria-selected': 'false', 'aria-grabbed': 'true', 'aria-label': this_1.parent.getAnnocementString(eventData)\n                    }\n                });\n                var templateElement = void 0;\n                if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n                    var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n                    var templateArgs = util.addLocalOffsetToEvent(eventData, this_1.parent.eventFields);\n                    templateElement = this_1.parent.getAppointmentTemplate()(templateArgs, this_1.parent, 'eventTemplate', tempId, false);\n                    append(templateElement, appointmentElement);\n                }\n                else {\n                    appointmentElement.appendChild(createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: eventText }));\n                }\n                if (!isNullOrUndefined(groupIndex)) {\n                    appointmentElement.setAttribute('data-group-index', groupIndex);\n                }\n                if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n                    var iconClass = (eventData[fields.id] === eventData[fields.recurrenceID]) ?\n                        cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                    appointmentElement.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                }\n                var args = {\n                    data: extend({}, eventData, null, true),\n                    element: appointmentElement, cancel: false\n                };\n                this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        moreEventWrapperEle.appendChild(appointmentElement);\n                        var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n                        _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n                        _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n                var eventData = eventCollection_1[_i];\n                _loop_1(eventData);\n            }\n        }\n        moreEventContentEle.appendChild(moreEventWrapperEle);\n        return moreEventContentEle;\n    };\n    QuickPopups.prototype.tapHoldEventPopup = function (e) {\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS);\n        this.isMultipleEventSelect = false;\n        this.parent.selectedElements = [];\n        this.isMultipleEventSelect = true;\n        this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        var guid = target.getAttribute('data-guid');\n        var eventObj = this.parent.eventBase.getEventByGuid(guid);\n        if (isNullOrUndefined(eventObj)) {\n            return;\n        }\n        var eventTitle = (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle'));\n        var eventTemplate = \"<div class=\\\"\" + cls.MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\">\" +\n            (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") +\n            (\"<div class=\\\"\" + cls.SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") +\n            (\"<button class=\\\"\" + cls.EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n            (\"<button class=\\\"\" + cls.DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n        this.quickPopup.element.innerHTML = eventTemplate;\n        var closeIcon = this.quickPopup.element.querySelector('.' + cls.CLOSE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n        var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n        var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, readonly, editIcon, this.editClick);\n        var deleteIcon = this.quickPopup.element.querySelector('.' + cls.DELETE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, readonly, deleteIcon, this.deleteClick);\n        this.beforeQuickPopupOpen(target);\n    };\n    QuickPopups.prototype.isCellBlocked = function (args) {\n        var tempObj = {};\n        tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n            var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n        }\n        return this.parent.eventBase.isBlockRange(tempObj);\n    };\n    // tslint:disable-next-line:max-func-body-length\n    QuickPopups.prototype.cellClick = function (args) {\n        var date = new Date(args.startTime.getTime());\n        if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding ||\n            this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) ||\n            !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n            this.quickPopupHide();\n            return;\n        }\n        var targetEle = args.event.target;\n        if (this.parent.isAdaptive) {\n            this.quickPopupHide();\n            var newEventClone = this.parent.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n            if (isNullOrUndefined(newEventClone)) {\n                newEventClone = createElement('div', {\n                    className: cls.NEW_EVENT_CLASS,\n                    innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n                });\n            }\n            var targetCell = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n            if (targetCell) {\n                targetCell.appendChild(newEventClone);\n            }\n            return;\n        }\n        var target = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS);\n        if (isNullOrUndefined(target) || targetEle.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            return;\n        }\n        var isSameTarget = this.quickPopup.relateTo === target;\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var subjectElement_1 = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement_1) {\n                subjectElement_1.focus();\n            }\n            return;\n        }\n        this.resetQuickPopupTemplates();\n        var temp = {};\n        temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        var quickCellPopup = createElement('div', { className: cls.CELL_POPUP_CLASS });\n        quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n        quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n        quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n        var subjectElement = quickCellPopup.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectElement) {\n            Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant('addTitle') } });\n        }\n        if (this.parent.eventSettings.fields.subject.default !== 'Add title') {\n            subjectElement.value = this.parent.eventSettings.fields.subject.default;\n        }\n        else {\n            subjectElement.value = this.l10n.getConstant('addTitle');\n        }\n        var closeIcon = quickCellPopup.querySelector('.' + cls.CLOSE_CLASS);\n        if (closeIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n        }\n        var moreButton = quickCellPopup.querySelector('.' + cls.QUICK_POPUP_EVENT_DETAILS_CLASS);\n        if (moreButton) {\n            this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n        }\n        var saveButton = quickCellPopup.querySelector('.' + cls.EVENT_CREATE_CLASS);\n        if (saveButton) {\n            this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n        }\n        this.quickPopup.content = quickCellPopup;\n        this.quickPopup.dataBind();\n        this.applyFormValidation();\n        if (this.morePopup) {\n            this.morePopup.hide();\n        }\n        this.quickPopup.relateTo = target;\n        this.beforeQuickPopupOpen(target);\n    };\n    QuickPopups.prototype.isSameEventClick = function (events) {\n        var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n            if (!this.parent.isAdaptive) {\n                var editButton = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n                if (editButton) {\n                    editButton.focus();\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    QuickPopups.prototype.isQuickTemplate = function (type) {\n        return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n    };\n    QuickPopups.prototype.eventClick = function (events) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        if (!this.parent.showQuickInfo) {\n            return;\n        }\n        if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n            this.updateTapHoldEventPopup(closest(events.element, '.' + cls.APPOINTMENT_CLASS));\n        }\n        else {\n            var isSameTarget = this.isSameEventClick(events);\n            if (isSameTarget) {\n                return;\n            }\n            this.resetQuickPopupTemplates();\n            var eventData = events.event;\n            var quickEventPopup = createElement('div', { className: cls.EVENT_POPUP_CLASS });\n            quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n            quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n            quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n            var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n            var editAction = !this.parent.eventSettings.allowEditing || readonly;\n            var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n            var editIcon = quickEventPopup.querySelector('.' + cls.EDIT_CLASS);\n            var buttonClass = 'e-flat e-round e-small';\n            if (editIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n            }\n            var deleteIcon = quickEventPopup.querySelector('.' + cls.DELETE_CLASS);\n            if (deleteIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n            }\n            var closeIcon = quickEventPopup.querySelector('.' + cls.CLOSE_CLASS);\n            if (closeIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n            }\n            var editButton = quickEventPopup.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editButton) {\n                this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n            }\n            var deleteButton = quickEventPopup.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            if (deleteButton) {\n                this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n            }\n            this.quickPopup.content = quickEventPopup;\n            this.quickPopup.dataBind();\n            if (this.morePopup && !closest(events.element, '.' + cls.MORE_EVENT_WRAPPER_CLASS)) {\n                this.morePopup.hide();\n            }\n            this.quickPopup.relateTo = this.parent.isAdaptive ? document.body :\n                closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n            this.beforeQuickPopupOpen(events.element);\n        }\n    };\n    QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n        var headerTemplate = createElement('div', { className: cls.POPUP_HEADER_CLASS });\n        if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n            var headerArgs = extend({}, headerData, !isBlazor() ? { elementType: headerType.toLowerCase() } :\n                {\n                    elementType: headerType.toLowerCase(),\n                    startTimeValue: util.addLocalOffset(headerData[this.parent.eventFields.startTime]),\n                    endTimeValue: util.addLocalOffset(headerData[this.parent.eventFields.endTime])\n                }, true);\n            var templateId = this.parent.element.id;\n            var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n            append([].slice.call(headerTemp), headerTemplate);\n        }\n        else {\n            var header = void 0;\n            switch (headerType) {\n                case 'Cell':\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n                    break;\n                case 'Event':\n                    var args = this.getFormattedString(headerData);\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" +\n                        (\"<button class=\\\"\" + (cls.EDIT_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + (cls.DELETE_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") +\n                        (\"<div class=\\\"\" + cls.SUBJECT_WRAP + \"\\\"><div class=\\\"\" + cls.SUBJECT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" \") +\n                        (\"title=\\\"\" + args.eventSubject + \"\\\">\" + args.eventSubject + \"</div></div >\");\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: header });\n            append([].slice.call(templateWrapper.childNodes), headerTemplate);\n        }\n        return headerTemplate;\n    };\n    QuickPopups.prototype.getPopupContent = function (type, args, data) {\n        var contentTemplate = createElement('div', { className: cls.POPUP_CONTENT_CLASS });\n        if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n            var contentArgs = extend({}, data, !isBlazor() ? { elementType: type.toLowerCase() } :\n                {\n                    elementType: type.toLowerCase(),\n                    startTimeValue: util.addLocalOffset(data[this.parent.eventFields.startTime]),\n                    endTimeValue: util.addLocalOffset(data[this.parent.eventFields.endTime])\n                }, true);\n            var templateId = this.parent.element.id;\n            var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n            append([].slice.call(contentTemp), contentTemplate);\n        }\n        else {\n            var content = void 0;\n            var resourceText = this.getResourceText(args, type.toLowerCase());\n            switch (type) {\n                case 'Cell':\n                    var cellDetails = this.getFormattedString(data);\n                    content = \"<table class=\\\"\" + cls.POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + cls.FORM_CLASS + \"\\\" onsubmit=\" +\n                        (\"\\\"return false;\\\"><input class=\\\"\" + cls.SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") +\n                        (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\") +\n                        (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \") +\n                        (cls.TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") +\n                        ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\">\" +\n                            (\"<div class=\\\"\" + cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \" \\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \") +\n                            (cls.TEXT_ELLIPSIS + \"\\\">\" + resourceText + \"</div></div>\") : '') + \"</td></tr></tbody></table>\");\n                    break;\n                case 'Event':\n                    var args_1 = this.getFormattedString(data);\n                    content = '<div class=\"' + cls.DATE_TIME_CLASS + '\"><div class=\"' + cls.DATE_TIME_ICON_CLASS + ' ' + cls.ICON +\n                        '\"></div><div class=\"' + cls.DATE_TIME_WRAPPER_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"><div class=\"' +\n                        cls.DATE_TIME_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + args_1.details + '</div>';\n                    if (data[this.parent.eventFields.recurrenceRule]) {\n                        content += '<div class=\"' + cls.RECURRENCE_SUMMARY_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getRecurrenceSummary(data) + '</div>';\n                    }\n                    content += '</div></div>';\n                    if (data[this.parent.eventFields.location]) {\n                        content += '<div class=\"' + cls.LOCATION_CLASS + '\"><div class=\"' + cls.LOCATION_ICON_CLASS + ' ' +\n                            cls.ICON + '\"></div><div class=\"' + cls.LOCATION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            data[this.parent.eventFields.location] + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n                        content += '<div class=\"' + cls.TIME_ZONE_CLASS + '\"><div class=\"' + cls.TIME_ZONE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.TIME_ZONE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getTimezone(data) + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.description]) {\n                        content += '<div class=\"' + cls.DESCRIPTION_CLASS + '\"><div class=\"' + cls.DESCRIPTION_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.DESCRIPTION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            data[this.parent.eventFields.description] + '</div></div>';\n                    }\n                    if (this.parent.resourceCollection.length > 0) {\n                        content += '<div class=\"' + cls.RESOURCE_CLASS + '\"><div class=\"' + cls.RESOURCE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.RESOURCE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            resourceText + '</div></div>';\n                    }\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: content });\n            append([].slice.call(templateWrapper.childNodes), contentTemplate);\n        }\n        return contentTemplate;\n    };\n    QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n        var footerTemplate = createElement('div', { className: cls.POPUP_FOOTER_CLASS });\n        if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n            var footerArgs = extend({}, footerData, !isBlazor() ? { elementType: footerType.toLowerCase() } :\n                {\n                    elementType: footerType.toLowerCase(),\n                    startTimeValue: util.addLocalOffset(footerData[this.parent.eventFields.startTime]),\n                    endTimeValue: util.addLocalOffset(footerData[this.parent.eventFields.endTime])\n                }, true);\n            var templateId = this.parent.element.id;\n            var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n            append([].slice.call(footerTemp), footerTemplate);\n        }\n        else {\n            var footer = void 0;\n            switch (footerType) {\n                case 'Cell':\n                    footer = \"<button class=\\\"\" + (cls.QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS) + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.EVENT_CREATE_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") +\n                        (this.l10n.getConstant('save') + \"</button>\");\n                    break;\n                case 'Event':\n                    footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + cls.EDIT_EVENT_CLASS + \" \" +\n                        (cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.DELETE_EVENT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") +\n                        (this.l10n.getConstant('delete') + \"</button>\"));\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: footer });\n            append([].slice.call(templateWrapper.childNodes), footerTemplate);\n        }\n        return footerTemplate;\n    };\n    QuickPopups.prototype.getResourceText = function (args, type) {\n        if (this.parent.resourceCollection.length === 0) {\n            return null;\n        }\n        var resourceValue = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            var resourceData = resourceCollection_1.dataSource;\n            var resourceIndex = 0;\n            if (type === 'event') {\n                var eventData = args.event;\n                var _loop_2 = function (data) {\n                    var resourceId = eventData[resourceCollection_1.field];\n                    if (resourceId instanceof Array) {\n                        if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n                            var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n                            var resource = resourceData.filter(function (e) {\n                                return e[resourceCollection_1.idField] === id_1;\n                            })[0];\n                            resourceValue += (resourceValue === '') ? resource[resourceCollection_1.textField] :\n                                ', ' + resource[resourceCollection_1.textField];\n                        }\n                    }\n                    else if (data[resourceCollection_1.idField] === resourceId) {\n                        resourceValue = data[resourceCollection_1.textField].toString();\n                    }\n                };\n                for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n                    var data = resourceData_1[_i];\n                    _loop_2(data);\n                }\n            }\n            else {\n                resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n            }\n        }\n        else {\n            if (type === 'event') {\n                var eventData = args.event;\n                var resourceData = void 0;\n                var lastResource_1;\n                for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n                    resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n                    if (!isNullOrUndefined(resourceData)) {\n                        lastResource_1 = this.parent.resourceBase.resourceCollection[i];\n                        break;\n                    }\n                }\n                if (!Array.isArray(resourceData)) {\n                    resourceData = [resourceData];\n                }\n                var resNames_1 = [];\n                var lastResourceData_1 = lastResource_1.dataSource;\n                resourceData.map(function (value) {\n                    var text;\n                    var i = util.findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n                    if (i > -1) {\n                        text = lastResourceData_1[i][lastResource_1.textField];\n                    }\n                    if (text) {\n                        resNames_1.push(text);\n                    }\n                });\n                resourceValue = resNames_1.join(', ');\n            }\n            else {\n                var argsData = args;\n                var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n                var resourceDetails = this.parent.resourceBase.lastResourceLevel[groupIndex];\n                resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n            }\n        }\n        return resourceValue;\n    };\n    QuickPopups.prototype.getFormattedString = function (eventData) {\n        var fields = this.parent.eventFields;\n        this.parent.eventWindow.subjectValue(eventData);\n        var eventSubject = (eventData[fields.subject] || this.l10n.getConstant('addTitle'));\n        var startDate = eventData[fields.startTime];\n        var endDate = eventData[fields.endTime];\n        var format = 'MMMM d, y';\n        var startDateDetails = this.getDateFormat(startDate, 'long', format);\n        var endDateDetails = (eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0) ?\n            this.getDateFormat(util.addDays(new Date(endDate.getTime()), -1), 'long', format) :\n            this.getDateFormat(endDate, 'long', format);\n        var startTimeDetail = this.parent.getTimeString(startDate);\n        var endTimeDetail = this.parent.getTimeString(endDate);\n        var details = '';\n        var spanLength = endDate.getDate() !== startDate.getDate() &&\n            (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n        if (eventData[fields.isAllDay]) {\n            details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            if (((endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY) > 1) {\n                details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            }\n        }\n        else if ((((endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY) >= 1) || spanLength > 0) {\n            details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n        }\n        else {\n            details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n        }\n        return { eventSubject: eventSubject, details: details };\n    };\n    QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n        var _this = this;\n        this.quickPopupHide(true);\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var selectedDate = ((data.date).getTime()).toString();\n        var target = closest(data.element, '.' + cls.MORE_INDICATOR_CLASS + ',.' + cls.WORK_CELLS_CLASS);\n        var day = this.parent.globalize.formatDate(data.date, { format: 'E', calendar: this.parent.getCalendarMode() });\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DAY_CLASS).innerHTML = util.capitalizeFirstWord(day, 'single');\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        dateElement.innerHTML = this.getDateFormat(data.date, 'd', 'd');\n        dateElement.setAttribute('data-date', selectedDate);\n        dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            dateElement.setAttribute('data-group-index', groupIndex);\n            groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n        }\n        var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n        removeClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        if (util.resetTime(data.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n            addClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        }\n        if (!this.parent.isAdaptive) {\n            if (this.parent.currentView.indexOf('Timeline') !== -1) {\n                var gIndex = target.getAttribute('data-group-index');\n                var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n                startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n                var tdDate = this.parent.getMsFromDate(startDate).toString();\n                if (isNullOrUndefined(gIndex)) {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-date=\"' + tdDate + '\"]');\n                }\n                else {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n                    if (isNullOrUndefined(this.morePopup.relateTo)) {\n                        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS +\n                            ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n                        for (var i = 0; i < workCells.length; i++) {\n                            var date = workCells[i].getAttribute('data-date');\n                            if (date < tdDate) {\n                                this.morePopup.relateTo = workCells[i];\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                this.morePopup.relateTo = closest(target, '.' + cls.WORK_CELLS_CLASS);\n            }\n        }\n        this.parent.renderTemplates();\n        var eventProp = { type: 'EventContainer', cancel: false, element: this.morePopup.element };\n        if (!isBlazor()) {\n            eventProp.data = data;\n        }\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.morePopup.show();\n            }\n        });\n    };\n    QuickPopups.prototype.saveClick = function () {\n        this.isCrudAction = true;\n        this.quickPopupHide();\n    };\n    QuickPopups.prototype.detailsClick = function () {\n        var subjectEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectEle && subjectEle.value !== '') {\n            var args = extend(this.parent.activeCellsData, { subject: subjectEle.value });\n        }\n        this.isCrudAction = false;\n        this.fieldValidator.destroyToolTip();\n        this.quickPopupHide();\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    };\n    QuickPopups.prototype.editClick = function () {\n        this.quickPopupHide(true);\n        var data = this.parent.activeEventData.event;\n        this.parent.currentAction = 'EditSeries';\n        if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'EditOccurrence';\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n        }\n    };\n    QuickPopups.prototype.deleteClick = function () {\n        this.quickPopupHide(true);\n        this.parent.currentAction = 'Delete';\n        if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.openDeleteAlert();\n        }\n    };\n    QuickPopups.prototype.updateMoreEventContent = function () {\n        if (this.morePopup.element.classList.contains('e-popup-close')) {\n            return;\n        }\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n        var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n        var groupIndex = dateElement.getAttribute('data-group-index');\n        var data;\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            groupOrder = data.groupOrder;\n        }\n        var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n        var moreElement = this.createMoreEventList(filteredEvents, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    };\n    QuickPopups.prototype.closeClick = function () {\n        this.quickPopupHide();\n        this.morePopup.hide();\n    };\n    QuickPopups.prototype.dialogButtonClick = function (event) {\n        this.quickDialog.hide();\n        var target = event.target;\n        var cancelBtn = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var eventData = this.parent.activeEventData.event;\n        if (target.classList.contains(cls.QUICK_DIALOG_OCCURRENCE_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteOccurrence' : 'EditOccurrence';\n            switch (this.parent.currentAction) {\n                case 'EditOccurrence':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteOccurrence':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n            switch (this.parent.currentAction) {\n                case 'EditFollowingEvents':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteFollowingEvents':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_SERIES_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteSeries' : 'EditSeries';\n            switch (this.parent.currentAction) {\n                case 'EditSeries':\n                    this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n                    break;\n                case 'DeleteSeries':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_DELETE_CLASS)) {\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n        }\n        else if (!cancelBtn.classList.contains(cls.DISABLE_CLASS) && (target.classList.contains(cls.QUICK_DIALOG_ALERT_OK) ||\n            (target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(cls.QUICK_DIALOG_CANCEL_CLASS)))) {\n            this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL);\n            this.parent.eventWindow.eventSave(this.l10n.getConstant('ok'));\n        }\n    };\n    QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n        var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        if (selectedElements.length > 0) {\n            var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n            var titleContent = (selectedElements.length === 1) ?\n                (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle')) :\n                '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n            this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS).innerHTML = titleContent;\n            if (selectedElements.length > 1) {\n                addClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n        }\n        else {\n            this.parent.selectedElements = [];\n            this.quickPopupHide();\n        }\n    };\n    QuickPopups.prototype.getTimezone = function (event) {\n        var zoneDetails = '';\n        zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n        zoneDetails += zoneDetails === '' ? '' : ' - ';\n        zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n        return zoneDetails;\n    };\n    QuickPopups.prototype.getRecurrenceSummary = function (event) {\n        var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n        if (recurrenceEditor) {\n            var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n            return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n        }\n        return '';\n    };\n    QuickPopups.prototype.getDateFormat = function (date, skeletonString, formatString) {\n        return util.capitalizeFirstWord(isBlazor() ? this.parent.globalize.formatDate(date, { format: formatString, calendar: this.parent.getCalendarMode() }) :\n            this.parent.globalize.formatDate(date, { skeleton: skeletonString, calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    QuickPopups.prototype.getDataFromTarget = function (target) {\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            return this.parent.activeEventData.event;\n        }\n        // Depricated cells data in quick popups\n        var eventObj = {\n            startTime: this.parent.activeCellsData.startTime,\n            endTime: this.parent.activeCellsData.endTime,\n            isAllDay: this.parent.activeCellsData.isAllDay,\n            groupIndex: this.parent.activeCellsData.groupIndex\n        };\n        var cellsData = this.parent.activeCellsData;\n        this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n        return eventObj;\n    };\n    QuickPopups.prototype.beforeQuickDialogClose = function () {\n        var _this = this;\n        var args = {\n            type: (isNullOrUndefined(this.parent.activeEventData.event)) ? 'ValidationAlert' :\n                !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) ? 'RecurrenceAlert' : 'DeleteAlert',\n            cancel: false, data: this.parent.activeEventData.event, element: this.quickDialog.element\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            popupCloseArgs = _this.serializingData(popupCloseArgs);\n            if (!popupCloseArgs.cancel) {\n                _this.parent.eventBase.focusElement();\n            }\n        });\n    };\n    QuickPopups.prototype.beforeQuickPopupOpen = function (target, success) {\n        var _this = this;\n        if (isBlazor() && this.isQuickInfoTemplates() && isNullOrUndefined(success)) {\n            this.updateQuickPopupTemplates(target);\n            return;\n        }\n        this.parent.renderTemplates();\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var popupType = this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n        var eventProp = {\n            type: popupType, cancel: false, data: extend({}, this.getDataFromTarget(target), null, true),\n            target: target, element: this.quickPopup.element\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (popupArgs.cancel) {\n                _this.quickPopupHide();\n                _this.destroyButtons();\n                if (popupArgs.element.classList.contains(cls.POPUP_OPEN)) {\n                    _this.quickPopupClose();\n                }\n                _this.resetQuickPopupTemplates();\n                util.removeChildren(_this.quickPopup.element);\n                _this.isMultipleEventSelect = false;\n            }\n            else {\n                var display = _this.quickPopup.element.style.display;\n                _this.quickPopup.element.style.display = 'block';\n                if (_this.parent.isAdaptive) {\n                    _this.quickPopup.element.removeAttribute('style');\n                    _this.quickPopup.element.style.display = 'block';\n                    _this.quickPopup.element.style.height = formatUnit((popupType === 'EditEventInfo') ? 65 : window.innerHeight);\n                }\n                else {\n                    _this.quickPopup.offsetX = 10;\n                    _this.quickPopup.collision = { X: _this.parent.enableRtl ? 'flip' : 'none', Y: 'fit' };\n                    _this.quickPopup.position = { X: _this.parent.enableRtl ? 'left' : 'right', Y: 'top' };\n                    _this.quickPopup.dataBind();\n                    _this.quickPopup.refreshPosition(null, true);\n                    var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n                    if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n                        _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n                        _this.quickPopup.dataBind();\n                        var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n                        if (leftCollide.indexOf('left') > -1) {\n                            _this.quickPopup.position = { X: 'center', Y: 'center' };\n                            _this.quickPopup.collision = { X: 'fit', Y: 'fit' };\n                            _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n                            _this.quickPopup.dataBind();\n                        }\n                    }\n                    if (_this.parent.virtualScrollModule && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n                        var element = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                        var translateY = util.getTranslateY(element);\n                        _this.quickPopup.offsetY = translateY;\n                        _this.quickPopup.dataBind();\n                    }\n                }\n                if (isEventPopup) {\n                    _this.applyEventColor();\n                }\n                _this.quickPopup.element.style.display = display;\n                _this.quickPopup.dataBind();\n                _this.quickPopup.show();\n            }\n        });\n    };\n    QuickPopups.prototype.isQuickInfoTemplates = function () {\n        if (!isNullOrUndefined(this.parent.quickInfoTemplates.header || this.parent.quickInfoTemplates.content\n            || this.parent.quickInfoTemplates.footer)) {\n            return true;\n        }\n        return false;\n    };\n    QuickPopups.prototype.applyEventColor = function () {\n        var colorField = '';\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n        }\n        else {\n            colorField = 'background-color';\n        }\n        // tslint:disable-next-line:no-any\n        var color = this.parent.activeEventData.element.style[colorField];\n        if (color === '') {\n            return;\n        }\n        var colorEle = this.quickPopup.element.querySelector('.' + cls.POPUP_HEADER_CLASS);\n        var footerEle = this.quickPopup.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n        if (footerEle && footerEle.offsetParent) {\n            colorEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (colorEle) {\n                colorEle.style.borderLeftColor = color;\n                color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n            }\n        }\n        if (colorEle) {\n            colorEle.style.backgroundColor = color;\n        }\n    };\n    QuickPopups.prototype.quickPopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.quickPopup.element.style.top = '0px';\n            return;\n        }\n        if (this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS)) {\n            var subjectElement = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n        }\n        else {\n            var editElement = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editElement) {\n                editElement.focus();\n            }\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n        }\n    };\n    QuickPopups.prototype.updateQuickPopupTemplates = function (target) {\n        var _this = this;\n        var templateReady = {\n            header: this.parent.quickInfoTemplates.header ? false : true,\n            content: this.parent.quickInfoTemplates.content ? false : true,\n            footer: this.parent.quickInfoTemplates.footer ? false : true\n        };\n        if (this.parent.quickInfoTemplates.header) {\n            updateBlazorTemplate(this.parent.element.id + '_headerTemplate', 'HeaderTemplate', this.parent.quickInfoTemplates, null, function () {\n                templateReady.header = true;\n                _this.quickPopupShow(templateReady, target);\n            });\n        }\n        if (this.parent.quickInfoTemplates.content) {\n            updateBlazorTemplate(this.parent.element.id + '_contentTemplate', 'ContentTemplate', this.parent.quickInfoTemplates, null, function () {\n                templateReady.content = true;\n                _this.quickPopupShow(templateReady, target);\n            });\n        }\n        if (this.parent.quickInfoTemplates.footer) {\n            updateBlazorTemplate(this.parent.element.id + '_footerTemplate', 'FooterTemplate', this.parent.quickInfoTemplates, null, function () {\n                templateReady.footer = true;\n                _this.quickPopupShow(templateReady, target);\n            });\n        }\n    };\n    QuickPopups.prototype.quickPopupShow = function (templateReady, target) {\n        if (templateReady.header && templateReady.content && templateReady.footer) {\n            this.beforeQuickPopupOpen(target, true);\n        }\n    };\n    QuickPopups.prototype.resetQuickPopupTemplates = function () {\n        if (isBlazor() && this.isQuickInfoTemplates()) {\n            removeClass([this.quickPopup.element], cls.POPUP_OPEN);\n            addClass([this.quickPopup.element], cls.POPUP_CLOSE);\n            if (this.parent.quickInfoTemplates.header) {\n                resetBlazorTemplate(this.parent.element.id + '_headerTemplate', 'HeaderTemplate');\n            }\n            if (this.parent.quickInfoTemplates.content) {\n                resetBlazorTemplate(this.parent.element.id + '_contentTemplate', 'ContentTemplate');\n            }\n            if (this.parent.quickInfoTemplates.footer) {\n                resetBlazorTemplate(this.parent.element.id + '_footerTemplate', 'FooterTemplate');\n            }\n            this.parent.resetTemplates();\n        }\n    };\n    QuickPopups.prototype.quickPopupClose = function () {\n        this.resetQuickPopupTemplates();\n        this.parent.eventBase.focusElement();\n        this.quickPopup.relateTo = cls.WORK_CELLS_CLASS;\n        this.fieldValidator.destroyToolTip();\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.destroyButtons();\n        util.removeChildren(this.quickPopup.element);\n    };\n    QuickPopups.prototype.morePopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.morePopup.element.style.top = '0px';\n            this.morePopup.element.style.left = '0px';\n            this.morePopup.element.style.height = formatUnit(window.innerHeight);\n            return;\n        }\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS).focus();\n        this.morePopup.refreshPosition();\n    };\n    QuickPopups.prototype.morePopupClose = function () {\n        var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_EVENT_WRAPPER_CLASS);\n        if (moreWrapper) {\n            remove(moreWrapper);\n        }\n    };\n    QuickPopups.prototype.popupClose = function () {\n        this.isCrudAction = false;\n        this.quickPopupHide(true);\n    };\n    QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n        var _this = this;\n        if (!this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            return;\n        }\n        var isCellPopup = this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS);\n        var popupData;\n        if (isCellPopup) {\n            var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n            if (this.isCrudAction && formvalidator && !formvalidator.ej2_instances[0].validate()) {\n                return;\n            }\n            var fields = this.parent.eventFields;\n            var saveObj = this.parent.eventWindow.getObjectFromFormData(cls.POPUP_WRAPPER_CLASS);\n            this.parent.eventWindow.setDefaultValueToObject(saveObj);\n            saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n            saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n            saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n            saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.setResourceValues(saveObj);\n            }\n            popupData = saveObj;\n        }\n        else {\n            popupData = this.parent.activeEventData.event;\n        }\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var args = {\n            type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n            cancel: false, data: popupData, element: this.quickPopup.element,\n            target: (isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            popupCloseArgs = _this.serializingData(popupCloseArgs);\n            if (!popupCloseArgs.cancel) {\n                if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n                    if (isCellPopup && _this.isCrudAction) {\n                        _this.parent.currentAction = 'Add';\n                        _this.parent.crudModule.addEvent(popupCloseArgs.data);\n                    }\n                    if (hideAnimation) {\n                        var animation = _this.quickPopup.hideAnimation;\n                        _this.quickPopup.hideAnimation = null;\n                        _this.quickPopup.hide();\n                        _this.quickPopup.hideAnimation = animation;\n                    }\n                    else {\n                        _this.quickPopup.hide();\n                    }\n                    _this.isMultipleEventSelect = false;\n                    _this.isCrudAction = false;\n                }\n            }\n        });\n    };\n    QuickPopups.prototype.serializingData = function (popupCloseArgs) {\n        if (isBlazor()) {\n            var eventFields = this.parent.eventFields;\n            if (popupCloseArgs.data) {\n                var eventObj = popupCloseArgs.data;\n                eventObj[eventFields.startTime] = this.parent.getDateTime(eventObj[eventFields.startTime]);\n                eventObj[eventFields.endTime] = this.parent.getDateTime(eventObj[eventFields.endTime]);\n            }\n            if (popupCloseArgs.element) {\n                popupCloseArgs.element = getElement(popupCloseArgs.element);\n            }\n            if (popupCloseArgs.target) {\n                popupCloseArgs.target = getElement(popupCloseArgs.target);\n            }\n        }\n        return popupCloseArgs;\n    };\n    QuickPopups.prototype.navigationClick = function (e) {\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        if (!isNullOrUndefined(navigateEle)) {\n            var date = this.parent.getDateFromElement(e.currentTarget);\n            if (this.parent.isServerRenderer()) {\n                date = new Date(+date - (date.getTimezoneOffset() * 60000));\n            }\n            if (!isNullOrUndefined(date)) {\n                this.closeClick();\n                this.parent.setScheduleProperties({ selectedDate: date });\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    QuickPopups.prototype.documentClick = function (e) {\n        var target = e.event.target;\n        var classNames = '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.HEADER_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS +\n            ',.' + cls.WORK_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.e-popup';\n        var popupWrap = this.parent.element.querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n        if (popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames)) {\n            this.quickPopupHide();\n        }\n        var tar = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (tar && tar !== target && this.parent.allowInline) {\n            this.parent.inlineModule.documentClick();\n        }\n        if (closest(target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.HEADER_CELLS_CLASS)) {\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, classNames)) {\n            this.quickPopupHide();\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS) && (target.classList &&\n            !target.classList.contains(cls.MORE_INDICATOR_CLASS))\n            && (!closest(target, '.' + cls.POPUP_OPEN)) && !closest(target, '.' + cls.WORK_CELLS_CLASS)) {\n            this.morePopup.hide();\n        }\n    };\n    QuickPopups.prototype.onClosePopup = function () {\n        this.quickPopupHide();\n        this.parent.eventBase.focusElement();\n    };\n    QuickPopups.prototype.addEventListener = function () {\n        this.parent.on(event.cellClick, this.cellClick, this);\n        this.parent.on(event.eventClick, this.eventClick, this);\n        this.parent.on(event.documentClick, this.documentClick, this);\n        this.parent.on(event.dataReady, this.updateMoreEventContent, this);\n    };\n    QuickPopups.prototype.removeEventListner = function () {\n        this.parent.off(event.cellClick, this.cellClick);\n        this.parent.off(event.eventClick, this.eventClick);\n        this.parent.off(event.documentClick, this.documentClick);\n        this.parent.off(event.dataReady, this.updateMoreEventContent);\n    };\n    QuickPopups.prototype.destroyButtons = function () {\n        var buttonCollections = [].slice.call(this.quickPopup.element.querySelectorAll('.e-control.e-btn'));\n        for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n            var button = buttonCollections_1[_i];\n            var instance = button.ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n        }\n    };\n    QuickPopups.prototype.refreshQuickDialog = function () {\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog.element = null;\n        }\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.refreshQuickPopup = function () {\n        if (this.quickPopup.element) {\n            this.quickPopup.destroy();\n            remove(this.quickPopup.element);\n            this.quickPopup.element = null;\n        }\n        this.renderQuickPopup();\n    };\n    QuickPopups.prototype.refreshMorePopup = function () {\n        if (this.morePopup.element) {\n            this.morePopup.destroy();\n            remove(this.morePopup.element);\n            this.morePopup.element = null;\n        }\n        this.renderMorePopup();\n    };\n    QuickPopups.prototype.destroy = function () {\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.removeEventListner();\n        this.destroyButtons();\n        this.quickPopup.destroy();\n        remove(this.quickPopup.element);\n        this.morePopup.destroy();\n        remove(this.morePopup.element);\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog.element = null;\n        }\n    };\n    return QuickPopups;\n}());\nexport { QuickPopups };\n","import { isNullOrUndefined, append, createElement, addClass } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Tooltip for Schedule\n */\nvar EventTooltip = /** @class */ (function () {\n    function EventTooltip(parent) {\n        this.parent = parent;\n        this.tooltipObj = new Tooltip({\n            animation: { close: { effect: 'FadeOut' } },\n            content: 'No title',\n            position: 'BottomRight',\n            offsetY: 10,\n            mouseTrail: this.parent.isAdaptive ? false : true,\n            showTipPointer: false,\n            cssClass: this.parent.cssClass + ' ' + cls.EVENT_TOOLTIP_ROOT_CLASS,\n            target: this.getTargets(),\n            beforeRender: this.onBeforeRender.bind(this),\n            beforeClose: this.onBeforeClose.bind(this),\n            enableRtl: this.parent.enableRtl\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n        this.tooltipObj.isStringTemplate = true;\n    }\n    EventTooltip.prototype.getTargets = function () {\n        var targets = [];\n        if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n            targets.push('.' + cls.RESOURCE_CELLS_CLASS);\n        }\n        if (this.parent.eventSettings.enableTooltip) {\n            targets.push('.' + cls.APPOINTMENT_CLASS);\n        }\n        return targets.join(',');\n    };\n    // tslint:disable-next-line:max-func-body-length\n    EventTooltip.prototype.onBeforeRender = function (args) {\n        if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n            return;\n        }\n        if (args.target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n            var resCollection = void 0;\n            if (this.parent.activeView.isTimelineView()) {\n                var index = parseInt(args.target.getAttribute('data-group-index'), 0);\n                resCollection = this.parent.resourceBase.lastResourceLevel[index];\n            }\n            else {\n                var rowIndex = args.target.parentNode.sectionRowIndex;\n                var cellIndex = args.target.cellIndex;\n                resCollection = this.parent.activeView.getColumnLevels()[rowIndex][cellIndex];\n            }\n            var data = {\n                resource: resCollection.resource,\n                resourceData: resCollection.resourceData\n            };\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_headerTooltipTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n            this.parent.renderTemplates();\n            return;\n        }\n        var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n        if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            var templateArgs = util.addLocalOffsetToEvent(record, this.parent.eventFields);\n            var tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(templateArgs, this.parent, 'tooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n        }\n        else {\n            var globalize = this.parent.globalize;\n            var fields = this.parent.eventFields;\n            var eventStart = new Date('' + record[fields.startTime]);\n            var eventEnd = new Date('' + record[fields.endTime]);\n            eventEnd = (eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0) ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n            var startDate = util.resetTime(new Date('' + eventStart));\n            var endDate = util.resetTime(new Date('' + eventEnd));\n            var tooltipSubject = (record[fields.subject] || this.parent.eventSettings.fields.subject.default);\n            var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n            var startMonthDate = '';\n            var startMonthYearDate = '';\n            var endMonthYearDate = '';\n            startMonthDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'MMMd', calendar: this.parent.getCalendarMode()\n            });\n            startMonthYearDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            endMonthYearDate = globalize.formatDate(eventEnd, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            startMonthDate = util.capitalizeFirstWord(startMonthDate, 'single');\n            startMonthYearDate = util.capitalizeFirstWord(startMonthYearDate, 'single');\n            endMonthYearDate = util.capitalizeFirstWord(endMonthYearDate, 'single');\n            var skeleton = 'short';\n            var startTime = globalize.formatDate(eventStart, {\n                type: 'time', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var endTime = globalize.formatDate(eventEnd, {\n                type: 'time', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var tooltipDetails = void 0;\n            if (startDate.getTime() === endDate.getTime()) {\n                tooltipDetails =\n                    globalize.formatDate(eventStart, {\n                        type: 'date', skeleton: 'long', calendar: this.parent.getCalendarMode()\n                    });\n                tooltipDetails = util.capitalizeFirstWord(tooltipDetails, 'single');\n            }\n            else {\n                tooltipDetails = (startDate.getFullYear() === endDate.getFullYear()) ? (startMonthDate + ' - ' + endMonthYearDate) :\n                    (startMonthYearDate + ' - ' + endMonthYearDate);\n            }\n            var tooltipTime = (record[fields.isAllDay]) ? this.parent.localeObj.getConstant('allDay') :\n                (startTime + ' - ' + endTime);\n            var content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' +\n                '<div class=\"e-location\">' + tooltipLocation + '</div>' +\n                '<div class=\"e-details\">' + tooltipDetails + '</div>' +\n                '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n            this.setContent(content);\n        }\n        this.parent.renderTemplates();\n    };\n    EventTooltip.prototype.onBeforeClose = function () {\n        this.parent.resetTemplates(['tooltipTemplate', 'headerTooltipTemplate']);\n    };\n    EventTooltip.prototype.setContent = function (content) {\n        this.tooltipObj.setProperties({ content: content }, true);\n    };\n    EventTooltip.prototype.close = function () {\n        this.tooltipObj.close();\n    };\n    /**\n     * To destroy the event tooltip.\n     * @return {void}\n     * @private\n     */\n    EventTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n    };\n    return EventTooltip;\n}());\nexport { EventTooltip };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, NotifyPropertyChanges, Event, Browser } from '@syncfusion/ej2-base';\nimport { getDefaultDateObject, getValue, cldrData, L10n, isNullOrUndefined, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\nimport { Button, RadioButton } from '@syncfusion/ej2-buttons';\nimport { EventHandler, classList } from '@syncfusion/ej2-base';\nimport { extractObjectFromRule, generate, generateSummary, getRecurrenceStringFromDate, getCalendarUtil } from './date-generator';\nimport { capitalizeFirstWord } from '../schedule/base/util';\nvar HEADER = 'e-editor';\nvar INPUTWARAPPER = 'e-input-wrapper';\nvar INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nvar REPEATELEMENT = 'e-repeat-element';\nvar REPEATINTERVAL = 'e-repeat-interval';\nvar INTERVALCLASS = 'e-interval';\nvar DAYWRAPPER = 'e-days';\nvar WEEKWRAPPER = 'e-non-week';\nvar WEEKPOSITION = 'e-week-position';\nvar YEAREXPANDERWRAPPER = 'e-year-expander';\nvar YEAREXPANDERELEMENT = 'e-year-expander-element';\nvar MONETHEXPANDERWRAPPER = 'e-month-expander';\nvar MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nvar MONTHEXPANDERELEMENT = 'e-month-expander-element';\nvar MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nvar FORMLEFT = 'e-form-left';\nvar FORMRIGHT = 'e-form-right';\nvar MONTHDAYWRAPPER = 'e-month-day';\nvar MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nvar MONTHPOS = 'e-month-pos';\nvar MONTHWEEK = 'e-month-week';\nvar ENDON = 'e-end-on';\nvar MONTHEXPANDERLABEL = 'e-month-expander-label';\nvar WEEKEXPANDERLABEL = 'e-week-expander-label';\nvar ENDONLABEL = 'e-end-on-label';\nvar ENDONLEFT = 'e-end-on-left';\nvar MONTHDAYELEMENT = 'e-monthday-element';\nvar ENDONELEMENT = 'e-end-on-element';\nvar ENDONDATE = 'e-end-on-date';\nvar UNTILDATE = 'e-until-date';\nvar ENDONCOUNTWRAPPER = 'e-end-on-count';\nvar ENDONCOUNT = 'e-recurrence-count';\nvar HIDEWRAPPER = 'e-hide-recurrence-element';\nvar RTLCLASS = 'e-rtl';\nvar PRIMARY = 'e-primary';\nvar ACTIVE = 'e-active';\nvar RECURRENCETABLE = 'e-recurrence-table';\nvar REPEATCONTENT = 'e-repeat-content';\nvar REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nvar NONE = 'none';\nvar DAILY = 'daily';\nvar WEEKLY = 'weekly';\nvar MONTHLY = 'monthly';\nvar YEARLY = 'yearly';\nvar NEVER = 'never';\nvar UNTIL = 'until';\nvar COUNT = 'count';\nvar TEXTFIELD = 'text';\nvar VALUEFIELD = 'value';\nvar LAST = 'last';\nvar REPEAT = 'repeat';\nvar REPEATEVERY = 'repeatEvery';\nvar ON = 'on';\nvar END = 'end';\nvar RADIOLABEL = 'onDay';\nvar RULEUNTIL = 'UNTIL';\nvar RULEBYDAY = 'BYDAY';\nvar RULEBYMONTHDAY = 'BYMONTHDAY';\nvar RULEBYMONTH = 'BYMONTH';\nvar RULEINTERVAL = 'INTERVAL';\nvar RULECOUNT = 'COUNT';\nvar RULESETPOS = 'BYSETPOS';\nvar RULEFREQ = 'FREQ';\nvar RULEDAILY = 'DAILY';\nvar RULEWEEKLY = 'WEEKLY';\nvar RULEMONTHLY = 'MONTHLY';\nvar RULEYEARLY = 'YEARLY';\nvar RULESUNDAY = 'SU';\nvar RULEMONDAY = 'MO';\nvar RULETUESDAY = 'TU';\nvar RULEWEDNESDAY = 'WE';\nvar RULETHURSDAY = 'TH';\nvar RULEFRIDAY = 'FR';\nvar RULESATURDAY = 'SA';\nvar KEYSUNDAY = 'sun';\nvar KEYMONDAY = 'mon';\nvar KEYTUESDAY = 'tue';\nvar KEYWEDNESDAY = 'wed';\nvar KEYTHURSDAY = 'thu';\nvar KEYFRIDAY = 'fri';\nvar KEYSATURDAY = 'sat';\nvar EQUAL = '=';\nvar SEMICOLON = ';';\nvar COMMA = ',';\nvar FIRST = 'first';\nvar SECOND = 'second';\nvar THIRD = 'third';\nvar FOURTH = 'fourth';\nvar contentType = {\n    none: '',\n    daily: 'days',\n    weekly: 'weeks',\n    monthly: 'months',\n    yearly: 'years'\n};\nvar valueData = {\n    'sun': RULESUNDAY,\n    'mon': RULEMONDAY,\n    'tue': RULETUESDAY,\n    'wed': RULEWEDNESDAY,\n    'thu': RULETHURSDAY,\n    'fri': RULEFRIDAY,\n    'sat': RULESATURDAY\n};\nvar neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar weekClassList = [WEEKWRAPPER];\nvar monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nvar yearClassList = [DAYWRAPPER];\nvar dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nvar endOnCountClassList = [ENDONDATE];\nvar endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\nvar RecurrenceEditor = /** @class */ (function (_super) {\n    __extends(RecurrenceEditor, _super);\n    /**\n     * Constructor for creating the widget\n     * @param  {object} options?\n     */\n    function RecurrenceEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.defaultLocale = {\n            none: 'None',\n            daily: 'Daily',\n            weekly: 'Weekly',\n            monthly: 'Monthly',\n            month: 'Month',\n            yearly: 'Yearly',\n            never: 'Never',\n            until: 'Until',\n            count: 'Count',\n            first: 'First',\n            second: 'Second',\n            third: 'Third',\n            fourth: 'Fourth',\n            last: 'Last',\n            repeat: 'Repeat',\n            repeatEvery: 'Repeat every',\n            on: 'Repeat On',\n            end: 'End',\n            onDay: 'Day',\n            days: 'Day(s)',\n            weeks: 'Week(s)',\n            months: 'Month(s)',\n            years: 'Year(s)',\n            every: 'every',\n            summaryTimes: 'time(s)',\n            summaryOn: 'on',\n            summaryUntil: 'until',\n            summaryRepeat: 'Repeats',\n            summaryDay: 'day(s)',\n            summaryWeek: 'week(s)',\n            summaryMonth: 'month(s)',\n            summaryYear: 'year(s)',\n            monthWeek: 'Month Week',\n            monthPosition: 'Month Position',\n            monthExpander: 'Month Expander',\n            yearExpander: 'Year Expander',\n            repeatInterval: 'Repeat Interval'\n        };\n        _this.renderStatus = false;\n        _this.dayButtons = [];\n        _this.monthButtons = [];\n        _this.calendarUtil = getCalendarUtil(_this.calendarMode);\n        return _this;\n    }\n    RecurrenceEditor.prototype.startState = function (freq, endOn, startDate) {\n        this.showFormElement();\n        this.updateForm(freq);\n        this.freshOnEndForm();\n        this.updateEndOnForm(endOn);\n        this.selectMonthDay(startDate);\n        this.updateUntilDate(startDate);\n        this.onMonthDay.setProperties({ checked: true });\n    };\n    RecurrenceEditor.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        // pre render code snippets\n    };\n    RecurrenceEditor.prototype.applyCustomClass = function (cssClass) {\n        if (cssClass) {\n            addClass([this.element], cssClass.split(' '));\n        }\n    };\n    RecurrenceEditor.prototype.initialize = function () {\n        addClass([this.element], 'e-' + this.getModuleName());\n        this.renderComponent();\n        if (!isNullOrUndefined(this.value) && this.value !== '') {\n            this.setRecurrenceRule(this.value);\n        }\n        else {\n            if (!isNullOrUndefined(this.repeatType.value)) {\n                this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);\n                this.updateForm(this.repeatType.value.toString());\n            }\n            if (this.selectedType > 0) {\n                this.setProperties({ value: this.getRecurrenceRule() }, false);\n            }\n        }\n        this.applyCustomClass(this.cssClass);\n    };\n    RecurrenceEditor.prototype.triggerChangeEvent = function () {\n        var _this = this;\n        if (this.renderStatus) {\n            var value = this.getRecurrenceRule();\n            this.trigger('change', { value: value }, function (args) { return _this.setProperties({ value: args.value }, false); });\n        }\n    };\n    RecurrenceEditor.prototype.resetDayButton = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        elements.forEach(function (element) { return removeClass([element], [ACTIVE, PRIMARY]); });\n    };\n    RecurrenceEditor.prototype.daySelection = function (dayIndex) {\n        this.resetDayButton();\n        var days = [0, 1, 2, 3, 4, 5, 6];\n        this.rotateArray(days, this.firstDayOfWeek);\n        var element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n        if (element) {\n            addClass([element], [ACTIVE, PRIMARY]);\n        }\n    };\n    RecurrenceEditor.prototype.rtlClass = function (status) {\n        if (status) {\n            addClass([this.element], RTLCLASS);\n        }\n        else {\n            removeClass([this.element], RTLCLASS);\n        }\n    };\n    RecurrenceEditor.prototype.updateUntilDate = function (date) {\n        var tempDate = new Date(date.getTime());\n        tempDate.setDate(tempDate.getDate() + 60);\n        this.untilDateObj.setProperties({ value: tempDate });\n    };\n    RecurrenceEditor.prototype.selectMonthDay = function (date) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        this.monthDate.setProperties({ value: this.calendarUtil.getDate(date) });\n        this.monthWeekDays.setProperties({ value: valueData[weekday[date.getDay()]] });\n        this.monthValue.setProperties({ value: '' + this.calendarUtil.getMonth(date) });\n        this.monthWeekPos.setProperties({ value: this.getDayPosition(date) });\n        this.daySelection(date.getDay());\n    };\n    RecurrenceEditor.prototype.updateForm = function (state) {\n        var _this = this;\n        this.repeatType.setProperties({ value: state });\n        var end = this.element.querySelector('.' + ENDON);\n        if (state === DAILY) {\n            classList(end, [FORMLEFT], [FORMRIGHT]);\n        }\n        else {\n            classList(end, [FORMRIGHT], [FORMLEFT]);\n        }\n        switch (state) {\n            case NONE:\n                neverClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case WEEKLY:\n                weekClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case MONTHLY:\n                monthClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case YEARLY:\n                yearClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case DAILY:\n                dailyClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.updateEndOnForm = function (state) {\n        var _this = this;\n        this.endType.setProperties({ value: state });\n        switch (state) {\n            case NEVER:\n                noEndClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case UNTIL:\n                endOnDateClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case COUNT:\n                endOnCountClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.freshOnEndForm = function () {\n        var _this = this;\n        noEndClassList.forEach(function (className) {\n            var element = _this.element.querySelector('.' + className);\n            if (element) {\n                removeClass([element], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.showFormElement = function () {\n        var _this = this;\n        neverClassList.forEach(function (className) {\n            var hideElement = _this.element.querySelector('.' + className);\n            if (hideElement) {\n                removeClass([hideElement], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.renderDropdowns = function () {\n        var _this = this;\n        var self = this;\n        this.repeatType = new DropDownList({\n            //set the data to dataSource property\n            dataSource: this.getRepeatData(),\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: this.selectedType,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            placeholder: this.localeObj.getConstant(REPEAT),\n            htmlAttributes: { 'title': this.localeObj.getConstant(REPEAT) },\n            change: function (args) {\n                self.setProperties({ selectedType: _this.frequencies.indexOf(args.value) }, false);\n                self.element.querySelector('.' + REPEATCONTENT).innerHTML =\n                    self.localeObj.getConstant(contentType[args.value]);\n                self.showFormElement();\n                self.updateForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        // set placeholder to DropDownList input element\n        this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n        this.endType = new DropDownList({\n            dataSource: this.getEndData(),\n            popupWidth: this.getPopupWidth(),\n            enableRtl: this.enableRtl,\n            index: 1,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            change: function (args) {\n                self.freshOnEndForm();\n                self.updateEndOnForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT));\n        var renderDropDownList = function (dropDownData) {\n            return new DropDownList({\n                dataSource: dropDownData,\n                popupWidth: _this.getPopupWidth(),\n                enableRtl: _this.enableRtl,\n                fields: {\n                    text: TEXTFIELD,\n                    value: VALUEFIELD\n                },\n                index: 1,\n                change: function (args) {\n                    self.onWeekDay.setProperties({ checked: true });\n                    self.resetFormValues();\n                    self.triggerChangeEvent();\n                }\n            });\n        };\n        this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n        this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n        this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n        this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n        this.monthValue = new DropDownList({\n            dataSource: this.getMonthData(),\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: 7,\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n    };\n    RecurrenceEditor.prototype.setDefaultValue = function () {\n        var formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(REPEATINTERVAL)) {\n                instance.value = 1;\n                instance.dataBind();\n            }\n            else if (instance.element.classList.contains(ENDONCOUNT)) {\n                instance.value = 10;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.resetFormValues = function () {\n        var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n        for (var _i = 0, recurreneElement_1 = recurreneElement; _i < recurreneElement_1.length; _i++) {\n            var element = recurreneElement_1[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances[0];\n                if (instance.value) {\n                    instance.value = instance.value;\n                    instance.dataBind();\n                }\n                else {\n                    this.updateUntilDate(this.startDate);\n                }\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances[0];\n                instance.index = instance.index || 0;\n                instance.dataBind();\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances[0];\n                var value = void 0;\n                if (instance.element.classList.contains(REPEATINTERVAL)) {\n                    value = 1;\n                }\n                else if (instance.element.classList.contains(ENDONCOUNT)) {\n                    value = 10;\n                }\n                else {\n                    value = this.startDate.getDate();\n                }\n                instance.value = instance.value || value;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.getPopupWidth = function () {\n        return Browser.isDevice ? '100%' : 'auto';\n    };\n    RecurrenceEditor.prototype.renderDatePickers = function () {\n        var self = this;\n        this.untilDateObj = new DatePicker({\n            firstDayOfWeek: this.firstDayOfWeek,\n            enableRtl: this.enableRtl,\n            locale: this.locale,\n            min: this.minDate,\n            max: this.maxDate,\n            format: (isNullOrUndefined(this.dateFormat) ?\n                this.getFormat('dateFormats') : this.dateFormat),\n            change: function (args) {\n                if (args.value) {\n                    self.triggerChangeEvent();\n                }\n            }\n        });\n        this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n    };\n    RecurrenceEditor.prototype.getFormat = function (formatType) {\n        var format;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.getCalendarMode()));\n        }\n        else {\n            format = getValue(\n            // tslint:disable-next-line:max-line-length\n            'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.' + formatType + '.short', cldrData);\n        }\n        return format;\n    };\n    RecurrenceEditor.prototype.dayButtonRender = function () {\n        var _this = this;\n        var btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        var self = this;\n        for (var _i = 0, btns_1 = btns; _i < btns_1.length; _i++) {\n            var btn = btns_1[_i];\n            var button = new Button({ isToggle: true, enableRtl: this.enableRtl }, btn);\n            this.dayButtons.push(button);\n            EventHandler.add(btn, 'click', function (args) {\n                var btns = [].slice.call(_this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n                var element = args.target;\n                if (!element.classList.contains(PRIMARY)) {\n                    addClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n                else if (btns.length > 1) {\n                    removeClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n            });\n        }\n    };\n    RecurrenceEditor.prototype.radioButtonRender = function () {\n        var self = this;\n        this.onMonthDay = new RadioButton({\n            label: this.localeObj.getConstant(RADIOLABEL),\n            enableRtl: this.enableRtl,\n            name: 'monthType',\n            value: 'day',\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n        this.monthButtons.push(this.onMonthDay);\n        this.onWeekDay = new RadioButton({\n            label: '',\n            name: 'monthType',\n            enableRtl: this.enableRtl,\n            value: 'daypos',\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n        this.monthButtons.push(this.onWeekDay);\n    };\n    RecurrenceEditor.prototype.numericTextboxRender = function () {\n        var self = this;\n        this.recurrenceCount = new NumericTextBox({\n            value: 10,\n            format: '#',\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            min: 1,\n            max: 999,\n            change: function (args) {\n                self.triggerChangeEvent();\n            }\n        });\n        this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n        this.monthDate = new NumericTextBox({\n            value: 1,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 31,\n            change: function (args) {\n                self.onMonthDay.setProperties({ checked: true });\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n        this.repeatInterval = new NumericTextBox({\n            value: 1,\n            format: '#',\n            min: 1,\n            max: 999,\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            placeholder: this.localeObj.getConstant(REPEATEVERY),\n            change: function (args) {\n                self.triggerChangeEvent();\n            }\n        });\n        this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n    };\n    RecurrenceEditor.prototype.renderComponent = function () {\n        this.setTemplate();\n        this.renderDropdowns();\n        this.renderDatePickers();\n        this.dayButtonRender();\n        this.radioButtonRender();\n        this.numericTextboxRender();\n    };\n    RecurrenceEditor.prototype.rotateArray = function (data, count) {\n        var temp;\n        for (var index = 0; index < count; index++) {\n            temp = data.shift();\n            data.push(temp);\n        }\n    };\n    RecurrenceEditor.prototype.getEndData = function () {\n        var endData = [NEVER, UNTIL, COUNT];\n        var self = this;\n        var dataSource = [];\n        endData.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: data });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayPosition = function (date) {\n        var temp = new Date(date.getTime());\n        var endDate = new Date(date.getTime());\n        var day = date.getDay();\n        var positionCollection = [];\n        temp = this.calendarUtil.getMonthStartDate(temp);\n        endDate = this.calendarUtil.getMonthEndDate(endDate);\n        while (temp < endDate) {\n            if (temp.getDay() === day) {\n                positionCollection.push(temp.getTime());\n            }\n            temp.setDate(temp.getDate() + 1);\n        }\n        if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n            return -1;\n        }\n        return (positionCollection.indexOf(date.getTime()) + 1);\n    };\n    RecurrenceEditor.prototype.getRepeatData = function () {\n        var data = [];\n        var self = this;\n        this.frequencies.forEach(function (element) {\n            var textValue = (element === NONE) ? NEVER : element;\n            data.push({ text: self.localeObj.getConstant(textValue), value: element });\n        });\n        return data;\n    };\n    RecurrenceEditor.prototype.getMonthPosData = function () {\n        var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n        var monthposValue = {\n            first: 1,\n            second: 2,\n            third: 3,\n            fourth: 4,\n            last: -1\n        };\n        var self = this;\n        var dataSource = [];\n        monthpos.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: monthposValue[data] });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayData = function (format) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        var dayData = [];\n        var cldrObj;\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            var nameSpaceString = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpaceString + format, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.stand-alone.' + format;\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (var _i = 0, weekday_1 = weekday; _i < weekday_1.length; _i++) {\n            var obj = weekday_1[_i];\n            var day = getValue(obj, cldrObj);\n            dayData.push({ text: format === 'narrow' ? day : capitalizeFirstWord(day, 'single'), value: valueData[obj] });\n        }\n        return dayData;\n    };\n    RecurrenceEditor.prototype.getMonthData = function () {\n        var monthData = [];\n        var cldrObj;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            var nameSpaceString = 'months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            monthData.push({\n                text: capitalizeFirstWord(getValue(obj, cldrObj), 'single'),\n                value: obj\n            });\n        }\n        return monthData;\n    };\n    RecurrenceEditor.prototype.setTemplate = function () {\n        var dayData = this.getDayData('narrow');\n        var fullDay = this.getDayData('wide');\n        this.element.innerHTML = '<div class=\"' + HEADER + '\">' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT +\n            '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' +\n            '</div><div class=\"' + INPUTWARAPPER + ' ' +\n            INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"><tr>' +\n            '<td><input type=\"text\" tabindex=\"0\" class=\"' + REPEATINTERVAL +\n            '\"title=\"' + this.localeObj.getConstant('repeatEvery') + '\" /></td>' +\n            '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' +\n            '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' +\n            '<div class=\"' + YEAREXPANDERWRAPPER + '\">' +\n            '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' +\n            this.localeObj.getConstant('yearExpander') + '\"/>' +\n            '</div>' +\n            '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' +\n            '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\"><tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' +\n            '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' +\n            this.localeObj.getConstant('on') + '\" />' +\n            '</div></td></tr>' +\n            '<tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' +\n            '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + '\" style=\"min-width: 120px;\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' +\n            '</div></td></tr></table>' +\n            '</div></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' +\n            '<div class=' + ENDONLABEL + '>' + this.localeObj.getConstant(END) + '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' +\n            '</div></div>' +\n            '</div></div>';\n    };\n    RecurrenceEditor.prototype.getSelectedDaysData = function () {\n        var ruleData = RULEBYDAY + EQUAL;\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var index = 0; index < elements.length; index++) {\n            ruleData += weekday[parseInt(elements[index].getAttribute('data-index'), 10)] + (index === (elements.length - 1) ? '' : COMMA);\n        }\n        return ruleData + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getSelectedMonthData = function () {\n        var ruleData;\n        if (this.onWeekDay.checked) {\n            ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON\n                + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n        }\n        else {\n            ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.getIntervalData = function () {\n        return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getEndOnCount = function () {\n        return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getYearMonthRuleData = function () {\n        return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.updateWeekButton = function (keys) {\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var _i = 0, _a = this.dayButtons; _i < _a.length; _i++) {\n            var obj = _a[_i];\n            var index = parseInt(obj.element.getAttribute('data-index'), 10);\n            if (keys.indexOf(weekday[index]) !== -1) {\n                obj.setProperties({ isPrimary: true });\n            }\n            else {\n                obj.setProperties({ isPrimary: false });\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateMonthUI = function () {\n        if (this.ruleObject.monthDay.length) {\n            this.monthDate.setProperties({ value: this.ruleObject.monthDay[0] });\n            this.onMonthDay.setProperties({ checked: true });\n        }\n        else {\n            this.onWeekDay.setProperties({ checked: true });\n            this.monthWeekPos.setProperties({ value: this.ruleObject.setPosition });\n            for (var _i = 0, _a = Object.keys(valueData); _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (valueData[key] === this.ruleObject.day[0]) {\n                    this.monthWeekDays.setProperties({ value: this.ruleObject.day[0] });\n                    break;\n                }\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateUI = function (repeat, state) {\n        this.repeatInterval.setProperties({ value: this.ruleObject.interval });\n        switch (state) {\n            case UNTIL:\n                this.untilDateObj.setProperties({ value: this.ruleObject.until });\n                break;\n            case COUNT:\n                this.recurrenceCount.setProperties({ value: this.ruleObject.count });\n                break;\n        }\n        switch (repeat) {\n            case WEEKLY:\n                this.updateWeekButton(this.ruleObject.day);\n                break;\n            case YEARLY:\n                this.monthValue.setProperties({ index: (this.ruleObject.month[0] - 1) });\n                this.updateMonthUI();\n                break;\n            case MONTHLY:\n                this.updateMonthUI();\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.getUntilData = function () {\n        if (!this.untilDateObj.value) {\n            return '';\n        }\n        var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n        return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.destroyComponents = function () {\n        if (!this.recurrenceCount.isDestroyed) {\n            this.recurrenceCount.destroy();\n        }\n        if (!this.monthDate.isDestroyed) {\n            this.monthDate.destroy();\n        }\n        if (!this.repeatInterval.isDestroyed) {\n            this.repeatInterval.destroy();\n        }\n        if (!this.untilDateObj.isDestroyed) {\n            this.untilDateObj.destroy();\n        }\n        if (!this.repeatType.isDestroyed) {\n            this.repeatType.destroy();\n        }\n        if (!this.endType.isDestroyed) {\n            this.endType.destroy();\n        }\n        if (!this.monthWeekPos.isDestroyed) {\n            this.monthWeekPos.destroy();\n        }\n        if (!this.monthWeekDays.isDestroyed) {\n            this.monthWeekDays.destroy();\n        }\n        if (!this.monthValue.isDestroyed) {\n            this.monthValue.destroy();\n        }\n        this.dayButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.dayButtons = [];\n        this.monthButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.monthButtons = [];\n    };\n    /** @hidden */\n    RecurrenceEditor.prototype.resetFields = function () {\n        this.startState(NONE, NEVER, this.startDate);\n        this.setDefaultValue();\n    };\n    RecurrenceEditor.prototype.updateRuleUntilDate = function (startDate) {\n        if (this.untilDateObj.value && startDate) {\n            var untilDate = this.untilDateObj.value;\n            var newUntilDate = new Date(untilDate.getFullYear(), untilDate.getMonth(), untilDate.getDate(), startDate.getHours(), startDate.getMinutes(), startDate.getMilliseconds());\n            this.untilDateObj.setProperties({ value: newUntilDate });\n        }\n    };\n    RecurrenceEditor.prototype.getCalendarMode = function () {\n        return this.calendarMode.toLowerCase();\n    };\n    RecurrenceEditor.prototype.getRuleSummary = function (rule) {\n        if (rule === void 0) { rule = this.getRecurrenceRule(); }\n        return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceDates = function (startDate, rule, excludeDate, maximumCount, viewDate) {\n        viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n        return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceRule = function () {\n        var ruleData = RULEFREQ + EQUAL;\n        switch (this.repeatType.value) {\n            case DAILY:\n                ruleData += RULEDAILY + SEMICOLON;\n                break;\n            case WEEKLY:\n                ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n                break;\n            case MONTHLY:\n                ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n                break;\n            case YEARLY:\n                ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n                break;\n            case NONE:\n                return '';\n        }\n        ruleData += this.getIntervalData();\n        switch (this.endType.value) {\n            case UNTIL:\n                ruleData += this.getUntilData();\n                break;\n            case COUNT:\n                ruleData += this.getEndOnCount();\n                break;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.setRecurrenceRule = function (rule, startDate) {\n        if (startDate === void 0) { startDate = this.startDate; }\n        if (!rule) {\n            this.repeatType.setProperties({ value: NONE });\n            return;\n        }\n        this.renderStatus = false;\n        this.ruleObject = extractObjectFromRule(rule);\n        var endon = this.ruleObject.count ? COUNT : (this.ruleObject.until ? UNTIL : NEVER);\n        switch (this.ruleObject.freq) {\n            case RULEDAILY:\n                this.startState(DAILY, endon, startDate);\n                this.updateUI(DAILY, endon);\n                break;\n            case RULEWEEKLY:\n                this.startState(WEEKLY, endon, startDate);\n                this.updateUI(WEEKLY, endon);\n                break;\n            case RULEMONTHLY:\n                this.startState(MONTHLY, endon, startDate);\n                this.updateUI(MONTHLY, endon);\n                break;\n            case RULEYEARLY:\n                this.startState(YEARLY, endon, startDate);\n                this.updateUI(YEARLY, endon);\n                break;\n        }\n        this.renderStatus = true;\n        this.triggerChangeEvent();\n    };\n    /**\n     * Destroys the widget.\n     * @returns void\n     */\n    RecurrenceEditor.prototype.destroy = function () {\n        this.destroyComponents();\n        _super.prototype.destroy.call(this);\n        var removeClasses = ['e-' + this.getModuleName()];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n        while (this.element.firstElementChild) {\n            this.element.removeChild(this.element.firstElementChild);\n        }\n    };\n    /**\n     * Get component name.\n     * @returns string\n     * @private\n     */\n    RecurrenceEditor.prototype.getModuleName = function () {\n        return 'recurrenceeditor';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @returns string\n     */\n    RecurrenceEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Initialize the control rendering\n     * @returns void\n     * @private\n     */\n    RecurrenceEditor.prototype.render = function () {\n        this.initialize();\n        this.rtlClass(this.enableRtl);\n        this.renderStatus = true;\n        this.renderComplete();\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     * @private\n     */\n    RecurrenceEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'startDate':\n                    this.selectMonthDay(newProp.startDate);\n                    this.updateUntilDate(newProp.startDate);\n                    this.endType.setProperties({ index: 0 });\n                    break;\n                case 'enableRtl':\n                    this.rtlClass(newProp.enableRtl);\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'selectedType':\n                    this.repeatType.setProperties({ index: this.selectedType });\n                    break;\n                case 'minDate':\n                    this.untilDateObj.setProperties({ minDate: this.minDate });\n                    break;\n                case 'maxDate':\n                    this.untilDateObj.setProperties({ maxDate: this.maxDate });\n                    break;\n                case 'value':\n                    if (this.getRecurrenceRule() !== this.value) {\n                        this.setRecurrenceRule(this.value);\n                    }\n                    break;\n                case 'calendarMode':\n                    this.calendarMode = newProp.calendarMode;\n                    this.calendarUtil = getCalendarUtil(newProp.calendarMode);\n                    break;\n                case 'locale':\n                case 'frequencies':\n                case 'firstDayOfWeek':\n                    this.refresh();\n                    break;\n                case 'dateFormat':\n                    this.untilDateObj.setProperties({ format: newProp.dateFormat });\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])\n    ], RecurrenceEditor.prototype, \"frequencies\", void 0);\n    __decorate([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property(new Date())\n    ], RecurrenceEditor.prototype, \"startDate\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], RecurrenceEditor.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"value\", void 0);\n    __decorate([\n        Property(new Date(1900, 0, 1))\n    ], RecurrenceEditor.prototype, \"minDate\", void 0);\n    __decorate([\n        Property(new Date(2099, 11, 31))\n    ], RecurrenceEditor.prototype, \"maxDate\", void 0);\n    __decorate([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"selectedType\", void 0);\n    __decorate([\n        Event()\n    ], RecurrenceEditor.prototype, \"change\", void 0);\n    RecurrenceEditor = __decorate([\n        NotifyPropertyChanges\n    ], RecurrenceEditor);\n    return RecurrenceEditor;\n}(Component));\nexport { RecurrenceEditor };\n","import { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, getElement, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { updateBlazorTemplate, resetBlazorTemplate, isBlazor, IntlBase } from '@syncfusion/ej2-base';\nimport { Query, Deferred } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { timezoneData } from '../timezone/timezone';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nvar EventWindow = /** @class */ (function () {\n    /**\n     * Constructor for event window\n     */\n    function EventWindow(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fields = this.parent.eventFields;\n        this.eventWindowTime = { startTime: new Date(), endTime: new Date() };\n        this.fieldValidator = new FieldValidator();\n        this.renderEventWindow();\n    }\n    EventWindow.prototype.renderEventWindow = function () {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            animationSettings: { effect: 'Zoom' },\n            content: this.getEventWindowContent(),\n            cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            height: this.parent.isAdaptive ? '100%' : 'auto',\n            minHeight: '300px',\n            isModal: true,\n            showCloseIcon: this.parent.isAdaptive ? false : true,\n            target: document.body,\n            visible: false,\n            width: '500px',\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        };\n        if (this.parent.isAdaptive) {\n            dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\n            dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n        }\n        else {\n            dialogModel.buttons = [{\n                    buttonModel: {\n                        content: this.l10n.getConstant('deleteButton'), cssClass: cls.DELETE_EVENT_CLASS,\n                        disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n                    },\n                    click: this.eventDelete.bind(this)\n                }, {\n                    buttonModel: {\n                        content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n                        isPrimary: true, disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n                    },\n                    click: this.eventSave.bind(this)\n                }, {\n                    buttonModel: { cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\n                    click: this.dialogClose.bind(this)\n                }];\n            dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n        }\n        this.dialogObject = new Dialog(dialogModel, this.element);\n        this.dialogObject.isStringTemplate = true;\n        if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n        addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n        if (this.parent.isAdaptive) {\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n        }\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.updateEditorTemplate = function () {\n        if (this.parent.editorTemplate) {\n            updateBlazorTemplate(this.parent.element.id + '_editorTemplate', 'EditorTemplate', this.parent);\n        }\n    };\n    EventWindow.prototype.resetEditorTemplate = function () {\n        if (this.parent.editorTemplate) {\n            resetBlazorTemplate(this.parent.element.id + '_editorTemplate', 'EditorTemplate');\n        }\n    };\n    EventWindow.prototype.refresh = function () {\n        this.destroy();\n        this.renderEventWindow();\n    };\n    EventWindow.prototype.refreshRecurrenceEditor = function () {\n        if (this.recurrenceEditor) {\n            var recurrenceEditor = this.recurrenceEditor.element;\n            this.recurrenceEditor.destroy();\n            this.createRecurrenceEditor(recurrenceEditor);\n        }\n    };\n    EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        if (this.parent.editorTemplate) {\n            this.recurrenceEditor = recurrenceEditor;\n        }\n    };\n    EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n        this.parent.currentAction = type;\n        this.parent.removeNewEventElement();\n        this.parent.quickPopup.quickPopupHide(true);\n        this.parent.inlineModule.removeInlineAppointmentElement();\n        if (type === 'Add') {\n            var eventObj = {};\n            this.cellClickAction = !isEventData;\n            this.parent.activeCellsData = data;\n            var event_1 = data;\n            if (this.cellClickAction) {\n                this.convertToEventData(event_1, eventObj);\n            }\n            else {\n                this.parent.activeCellsData = {\n                    startTime: (event_1.startTime || event_1[this.fields.startTime]),\n                    endTime: (event_1.endTime || event_1[this.fields.endTime]),\n                    isAllDay: (event_1.isAllDay || event_1[this.fields.isAllDay]),\n                    element: event_1.element,\n                    groupIndex: event_1.groupIndex\n                };\n                eventObj = event_1;\n            }\n            data = eventObj;\n        }\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n        }\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n        }\n        switch (type) {\n            case 'Add':\n                this.onCellDetailsUpdate(data, repeatType);\n                break;\n            case 'Save':\n            case 'EditOccurrence':\n            case 'EditSeries':\n            case 'EditFollowingEvents':\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n                }\n                this.cellClickAction = false;\n                this.onEventDetailsUpdate(data);\n                break;\n        }\n    };\n    EventWindow.prototype.setDialogContent = function () {\n        this.dialogObject.content = this.getEventWindowContent();\n        this.dialogObject.dataBind();\n    };\n    EventWindow.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        if (this.cellClickAction) {\n            eventProp.duration = this.getSlotDuration();\n        }\n        var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        if (saveObj) {\n            saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n            saveObj.dataBind();\n        }\n        var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\n        if (deleteObj) {\n            deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n            deleteObj.dataBind();\n        }\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n            _this.refreshDateTimePicker(_this.duration);\n            if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n                var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n                var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n                endObj.value = new Date(startObj.value.getTime() + (util.MS_PER_MINUTE * popupArgs.duration));\n                endObj.dataBind();\n            }\n            if (!isBlazor() && _this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n                _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.onBeforeClose = function (args) {\n        var _this = this;\n        if (args.isInteracted) {\n            this.isCrudAction = false;\n        }\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventCrudData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\n            if (isBlazor()) {\n                var eventFields = _this.parent.eventFields;\n                if (popupArgs.data) {\n                    var eventObj = popupArgs.data;\n                    eventObj[eventFields.startTime] = _this.parent.getDateTime(eventObj[eventFields.startTime]);\n                    eventObj[eventFields.endTime] = _this.parent.getDateTime(eventObj[eventFields.endTime]);\n                }\n                if (popupArgs.element) {\n                    popupArgs.element = getElement(popupArgs.element);\n                }\n                if (popupArgs.target) {\n                    popupArgs.target = getElement(popupArgs.target);\n                }\n            }\n            args.cancel = popupArgs.cancel;\n            if (!popupArgs.cancel) {\n                _this.resetEditorTemplate();\n                _this.updateEditorTemplate();\n                if (_this.isCrudAction) {\n                    args.cancel = _this.processCrudActions(popupArgs.data);\n                    _this.isCrudAction = args.cancel;\n                }\n                if (!_this.isCrudAction) {\n                    _this.resetForm();\n                    _this.parent.eventBase.focusElement();\n                    _this.eventCrudData = null;\n                }\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.getEventWindowContent = function () {\n        var container = createElement('div', { className: cls.FORM_CONTAINER_CLASS });\n        var form = createElement('form', {\n            id: this.parent.element.id + 'EditForm',\n            className: cls.FORM_CLASS,\n            attrs: { onsubmit: 'return false;' }\n        });\n        this.renderFormElements(form);\n        container.appendChild(form);\n        return container;\n    };\n    EventWindow.prototype.renderFormElements = function (form, args) {\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            if (args) {\n                // tslint:disable-next-line:no-any\n                if (!this.parent.isReact) {\n                    if (this.recurrenceEditor) {\n                        this.recurrenceEditor.destroy();\n                        this.recurrenceEditor = null;\n                    }\n                    this.destroyComponents();\n                }\n                var formElements = [].slice.call(form.children);\n                for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n                    var element = formElements_1[_i];\n                    remove(element);\n                }\n            }\n            if (!isBlazor() || (isBlazor() && args)) {\n                var templateId = this.parent.element.id + '_editorTemplate';\n                var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n                append(tempEle, form);\n                this.parent.renderTemplates();\n                this.updateEditorTemplate();\n            }\n        }\n        else {\n            form.appendChild(this.getDefaultEventWindowContent());\n        }\n    };\n    EventWindow.prototype.getDefaultEventWindowContent = function () {\n        var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n        var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n        parentDiv.appendChild(titleLocationDiv);\n        titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\n        titleLocationDiv.querySelector('.' + cls.SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n        titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\n        titleLocationDiv.querySelector('.' + cls.LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n        var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n        parentDiv.appendChild(startEndDateTimeDiv);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n        startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\n        startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n        var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n        parentDiv.appendChild(allDayTimezoneDiv);\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\n        var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        parentDiv.appendChild(timezoneParentDiv);\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\n        var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n        parentDiv.appendChild(repeatParentDiv);\n        var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n        var repeatEditConainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\n        var button = createElement('button', {\n            className: REPEAT_BUTTON_CLASS,\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\n        });\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\n        repeatEditConainer.appendChild(button);\n        this.buttonObj.appendTo(button);\n        this.buttonObj.isStringTemplate = true;\n        repeatDiv.appendChild(repeatEditConainer);\n        repeatParentDiv.appendChild(repeatDiv);\n        if (this.parent.isAdaptive) {\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n        }\n        else {\n            this.createRecurrenceEditor(parentDiv);\n        }\n        if (this.parent.resourceCollection.length > 0) {\n            var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n            for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n            }\n            parentDiv.appendChild(resourceParentDiv);\n        }\n        var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n        description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\n        description.querySelector('.' + cls.DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n        parentDiv.appendChild(description);\n        var submit = createElement('button', { attrs: { type: 'hidden', title: 'submit', style: 'display:none' } });\n        parentDiv.appendChild(submit);\n        return parentDiv;\n    };\n    EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n        var recurrenceEditor = this.createDivElement();\n        parentDiv.appendChild(recurrenceEditor);\n        this.recurrenceEditor = this.renderRecurrenceEditor();\n        this.recurrenceEditor.appendTo(recurrenceEditor);\n        this.updateMinMaxDateToEditor();\n    };\n    EventWindow.prototype.createDivElement = function (className) {\n        return createElement('div', { className: className });\n    };\n    EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', name: fieldName, value: '', id: fieldName,\n                title: ((this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))) === '') ?\n                    fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n            }\n        });\n    };\n    EventWindow.prototype.getSlotDuration = function () {\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    };\n    EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n        var dateTimeDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        dateTimeDiv.appendChild(dateTimeInput);\n        var dateTimePicker = new DateTimePicker({\n            change: changeEvent,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            calendarMode: this.parent.calendarMode,\n            min: this.parent.minDate,\n            max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            floatLabelType: 'Always',\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.getFormat('timeFormats'),\n            placeholder: this.getFieldLabel(value),\n            step: this.getSlotDuration(),\n            width: '100%'\n        });\n        dateTimePicker.isStringTemplate = true;\n        dateTimePicker.appendTo(dateTimeInput);\n        return dateTimeDiv;\n    };\n    EventWindow.prototype.refreshDateTimePicker = function (duration) {\n        var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\n        var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n            var element = startEndElement_1[_i];\n            var instance = element.ej2_instances[0];\n            instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n            instance.step = duration || this.getSlotDuration();\n            instance.dataBind();\n        }\n    };\n    EventWindow.prototype.onTimeChange = function () {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n            var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n            var duration = 0;\n            if (this.cellClickAction) {\n                duration = util.MS_PER_MINUTE * this.duration;\n                this.eventWindowTime.startTime = startObj.value;\n            }\n            else {\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n            }\n            var endDate = (isNullOrUndefined(startObj.value)) ? null : new Date(startObj.value.getTime() + duration);\n            if (this.cellClickAction) {\n                this.eventWindowTime.endTime = endDate;\n            }\n            endObj.value = endDate;\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n        }\n    };\n    EventWindow.prototype.renderResourceDetails = function (resourceData) {\n        var fieldName = resourceData.field;\n        var value = 'e-' + fieldName;\n        var labelValue = resourceData.title;\n        var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n        var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        resourceDiv.appendChild(resourceInput);\n        var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' +\n            resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n        if (resourceData.allowMultiple) {\n            var listObj = new MultiSelect({\n                cssClass: this.parent.cssClass || '',\n                dataSource: resourceData.dataSource,\n                change: this.onMultiselectResourceChange.bind(this),\n                itemTemplate: resourceTemplate,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                mode: 'Box'\n            });\n            listObj.appendTo(resourceInput);\n            listObj.isStringTemplate = true;\n        }\n        else {\n            var drowDownList = new DropDownList({\n                cssClass: this.parent.cssClass || '',\n                change: this.onDropdownResourceChange.bind(this),\n                dataSource: resourceData.dataSource,\n                enableRtl: this.parent.enableRtl,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                itemTemplate: resourceTemplate\n            });\n            drowDownList.appendTo(resourceInput);\n            drowDownList.isStringTemplate = true;\n        }\n        return resourceDiv;\n    };\n    EventWindow.prototype.renderDropDown = function (value) {\n        var fieldName = this.getFieldName(value);\n        var timezoneDiv = this.createDivElement(value + '-container');\n        var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        timezoneDiv.appendChild(timezoneInput);\n        var drowDownList = new DropDownList({\n            allowFiltering: true,\n            change: this.onTimezoneChange.bind(this),\n            cssClass: this.parent.cssClass || '',\n            dataSource: timezoneData,\n            enableRtl: this.parent.enableRtl,\n            fields: { text: 'Text', value: 'Value' },\n            filterBarPlaceholder: 'Search Timezone',\n            filtering: function (e) {\n                var query = new Query();\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\n                e.updateData(timezoneData, query);\n            },\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName },\n            floatLabelType: 'Always',\n            placeholder: this.getFieldLabel(value),\n            popupHeight: '230px',\n        });\n        drowDownList.appendTo(timezoneInput);\n        drowDownList.isStringTemplate = true;\n        return timezoneDiv;\n    };\n    EventWindow.prototype.onMultiselectResourceChange = function (args) {\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n            return;\n        }\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\n                var resObject = this.createInstance(i);\n                var datasource = [];\n                var _loop_1 = function (j) {\n                    var resourceModel = resourceCollection[i + 1];\n                    var filter = resourceModel.dataSource.filter(function (data) {\n                        return data[resourceModel.groupIDField] === args.value[j];\n                    })[0];\n                    var groupId = filter[resourceCollection[i + 1].groupIDField];\n                    var filterRes = this_1.filterDatasource(i, groupId);\n                    datasource = datasource.concat(filterRes);\n                };\n                var this_1 = this;\n                for (var j = 0; j < args.value.length; j++) {\n                    _loop_1(j);\n                }\n                resObject.dataSource = datasource;\n                resObject.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.createInstance = function (index) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var resObject = this.element.querySelector('.e-' + resourceData.field).\n            ej2_instances[0];\n        return resObject;\n    };\n    EventWindow.prototype.onDropdownResourceChange = function (args) {\n        if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n            return;\n        }\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if ((i < resourceCollection.length - 1) && resourceCollection[i].field === fieldName) {\n                var resObj = this.createInstance(i);\n                var groupId = args.itemData[resourceCollection[i].idField];\n                resObj.dataSource = this.filterDatasource(i, groupId);\n                resObj.dataBind();\n                var resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\n                resObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.filterDatasource = function (index, groupId) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var filter = resourceData.dataSource.filter(function (data) {\n            return data[resourceData.groupIDField] === groupId;\n        });\n        return filter;\n    };\n    EventWindow.prototype.onTimezoneChange = function (args) {\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        if (fieldName === this.parent.eventFields.startTimezone) {\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            endTimezoneObj.value = startTimezoneObj.value;\n            endTimezoneObj.dataBind();\n        }\n    };\n    EventWindow.prototype.renderCheckBox = function (value) {\n        var checkBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        checkBoxDiv.appendChild(checkBoxInput);\n        var checkBox = new CheckBox({\n            change: this.onChange.bind(this),\n            cssClass: value + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            label: this.getFieldLabel(value)\n        });\n        checkBox.appendTo(checkBoxInput);\n        checkBox.isStringTemplate = true;\n        checkBoxInput.setAttribute('name', fieldName);\n        if (fieldName === 'Repeat') {\n            this.repeatStatus = checkBox;\n        }\n        return checkBoxDiv;\n    };\n    EventWindow.prototype.renderTextBox = function (value) {\n        var textBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var elementType = (value === cls.DESCRIPTION_CLASS) ? 'textarea' : 'input';\n        var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n        textBoxDiv.appendChild(textBoxInput);\n        Input.createInput({\n            element: textBoxInput,\n            floatLabelType: 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl,\n                placeholder: this.getFieldLabel(value)\n            }\n        });\n        return textBoxDiv;\n    };\n    EventWindow.prototype.getFieldName = function (name) {\n        var fieldName = '';\n        switch (name) {\n            case cls.SUBJECT_CLASS:\n                fieldName = this.fields.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                fieldName = this.fields.location;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                fieldName = this.fields.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                fieldName = this.fields.endTime;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                fieldName = this.fields.description;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                fieldName = this.fields.isAllDay;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                fieldName = this.fields.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                fieldName = this.fields.endTimezone;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                fieldName = 'Timezone';\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                fieldName = 'Repeat';\n                break;\n        }\n        return fieldName;\n    };\n    EventWindow.prototype.getFieldLabel = function (fieldName) {\n        var labelText = '';\n        switch (fieldName) {\n            case cls.SUBJECT_CLASS:\n                labelText = this.parent.editorTitles.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                labelText = this.parent.editorTitles.location;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                labelText = this.parent.editorTitles.description;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                labelText = this.parent.editorTitles.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                labelText = this.parent.editorTitles.endTime;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                labelText = this.parent.editorTitles.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                labelText = this.parent.editorTitles.endTimezone;\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                labelText = this.parent.editorTitles.recurrenceRule;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                labelText = this.parent.editorTitles.isAllDay;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                labelText = this.l10n.getConstant('timezone');\n                break;\n        }\n        return labelText;\n    };\n    EventWindow.prototype.onChange = function (args) {\n        var target = (args.event.target);\n        if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n            this.onAllDayChange(args.checked);\n        }\n        else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n            this.timezoneChangeStyle(args.checked);\n        }\n        else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n            this.onRepeatChange(args.checked);\n        }\n    };\n    EventWindow.prototype.renderRepeatDialog = function () {\n        var element = createElement('div');\n        this.repeatDialogObject = new Dialog({\n            header: this.l10n.getConstant('recurrence'),\n            visible: false,\n            content: '<div class=\"e-rec-editor\"></div>',\n            closeOnEscape: true,\n            width: '90%',\n            buttons: [{\n                    click: this.repeatSaveDialog.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\n                },\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\n            target: this.element,\n            animationSettings: { effect: 'Zoom' },\n            enableRtl: this.parent.enableRtl,\n            isModal: true,\n            cssClass: REPEAT_DIALOG_CLASS,\n            open: this.repeatOpenDialog.bind(this)\n        });\n        this.element.appendChild(element);\n        this.repeatDialogObject.appendTo(element);\n        this.repeatDialogObject.isStringTemplate = true;\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    };\n    EventWindow.prototype.loadRecurrenceEditor = function () {\n        this.repeatDialogObject.show();\n        if (this.recurrenceEditor && this.repeatRule) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        }\n    };\n    EventWindow.prototype.onRepeatChange = function (state) {\n        if (state) {\n            if (!this.repeatDialogObject) {\n                this.renderRepeatDialog();\n            }\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\n            this.loadRecurrenceEditor();\n        }\n        else {\n            if (this.repeatDialogObject) {\n                this.repeatDialogObject.hide();\n            }\n            this.repeatRule = '';\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n                this.updateRepeatLabel(this.repeatRule);\n            }\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n        }\n    };\n    EventWindow.prototype.repeatSaveDialog = function () {\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        if (this.recurrenceEditor.getRecurrenceRule()) {\n            removeClass([element], HIDE_STYLE_CLASS);\n        }\n        else {\n            addClass([element], HIDE_STYLE_CLASS);\n            this.repeatStatus.setProperties({ checked: false });\n        }\n        this.updateRepeatLabel(this.repeatRule);\n        this.closeRepeatDialog();\n    };\n    EventWindow.prototype.closeRepeatDialog = function () {\n        this.repeatDialogObject.hide();\n    };\n    EventWindow.prototype.repeatCancelDialog = function () {\n        this.closeRepeatDialog();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n        }\n        if (!this.repeatTempRule) {\n            this.repeatStatus.setProperties({ checked: false });\n        }\n    };\n    EventWindow.prototype.repeatOpenDialog = function () {\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    };\n    EventWindow.prototype.subjectValue = function (eventObj) {\n        if (this.parent.eventSettings.fields.subject.default !== 'Add title') {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default;\n        }\n        else {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.l10n.getConstant('addTitle');\n        }\n    };\n    EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n        if (!this.parent.eventSettings.allowAdding) {\n            return;\n        }\n        this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n        eventObj.Timezone = false;\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        this.subjectValue(eventObj);\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n            eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n            eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n        if (deleteButton) {\n            addClass([deleteButton], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({\n                startDate: eventObj[this.fields.startTime],\n                selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ?\n                    this.recurrenceEditor.selectedType : 0\n            });\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        else {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            this.disableButton(saveButton, false);\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n        if (cellsData.subject) {\n            eventObj[this.fields.subject] = cellsData.subject;\n        }\n        eventObj[this.fields.startTime] = cellsData.startTime;\n        eventObj[this.fields.endTime] = cellsData.endTime;\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n        if (cellsData.RecurrenceRule) {\n            eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n        }\n        if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.setResourceValues(eventObj);\n        }\n    };\n    EventWindow.prototype.applyFormValidation = function () {\n        var getValidationRule = function (rules) { return (rules && Object.keys(rules).length > 0) ? rules : undefined; };\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n        rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\n        rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n        rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n        rules[this.parent.eventSettings.fields.description.name] =\n            getValidationRule(this.parent.eventSettings.fields.description.validation);\n        this.fieldValidator.renderFormValidator(form, rules, this.element);\n    };\n    EventWindow.prototype.showDetails = function (eventData) {\n        var eventObj = extend({}, eventData, null, true);\n        if (eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n            this.trimAllDay(eventObj);\n        }\n        this.eventData = eventObj;\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        var keyNames = Object.keys(eventObj);\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var curElement = formelement_1[_i];\n            var columnName = curElement.name || this.getColumnName(curElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                if (keyNames.indexOf(columnName) !== -1) {\n                    this.setValueToElement(curElement, eventObj[columnName]);\n                }\n                else {\n                    this.setDefaultValueToElement(curElement);\n                }\n            }\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n                timezoneObj.checked = true;\n                timezoneObj.dataBind();\n            }\n            this.timezoneChangeStyle(timezoneObj.checked);\n            delete eventObj.Timezone;\n        }\n    };\n    EventWindow.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist')) {\n                fieldSelector = 'e-ddl';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                fieldSelector = 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-datetimepicker')) {\n                fieldSelector = 'e-datetimepicker';\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                fieldSelector = 'e-datepicker';\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                fieldSelector = 'e-checkbox';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n        var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n        var format;\n        if (allDayStatus) {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n            addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            addClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n                removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        else {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' + this.getFormat('timeFormats') :\n                this.parent.dateFormat + ' ' + this.getFormat('timeFormats');\n            removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            removeClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n                addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        if (this.cellClickAction) {\n            this.updateDateTime(allDayStatus, startObj, endObj);\n        }\n        startObj.dataBind();\n        endObj.dataBind();\n        if (!isNullOrUndefined(this.recurrenceEditor)) {\n            this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n        }\n    };\n    EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n        var startDate;\n        var endDate;\n        if (allDayStatus) {\n            startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n            if (this.parent.activeCellsData.isAllDay) {\n                var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n                endDate = (+this.eventWindowTime.startTime > temp) ? this.eventWindowTime.endTime : new Date(temp);\n            }\n            else {\n                endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n            }\n        }\n        else {\n            var start = this.parent.activeCellsData.startTime;\n            startDate = new Date(this.eventWindowTime.startTime.getTime());\n            startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n            if (this.parent.activeCellsData.isAllDay) {\n                var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n            }\n            else {\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n            }\n        }\n        this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };\n        startObj.value = startDate;\n        endObj.value = endDate;\n        startObj.dataBind();\n        endObj.dataBind();\n    };\n    EventWindow.prototype.getFormat = function (formatType) {\n        if (isBlazor()) {\n            if (formatType === 'dateFormats') {\n                return IntlBase.compareBlazorDateFormats({ skeleton: 'd' }, this.parent.locale).format;\n            }\n            return IntlBase.compareBlazorDateFormats({ skeleton: 't' }, this.parent.locale).format;\n        }\n        var format;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            format = getValue(\n            // tslint:disable-next-line:max-line-length\n            'main.' + '' + this.parent.locale + '.dates.calendars.' + this.parent.getCalendarMode() + '.' + formatType + '.short', cldrData);\n        }\n        return format;\n    };\n    EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n        if (!this.parent.eventSettings.allowEditing) {\n            return;\n        }\n        if (!this.parent.isAdaptive) {\n            removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\n        }\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n        this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            eventObj = extend({}, eventObj, null, true);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            var timezoneValue = void 0;\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n                timezoneValue = true;\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            else {\n                timezoneValue = false;\n            }\n            eventObj.Timezone = timezoneValue;\n            timezoneObj.checked = timezoneValue;\n            timezoneObj.dataBind();\n        }\n        this.subjectValue(eventObj);\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });\n            this.recurrenceEditor.setRecurrenceRule('');\n        }\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (eventObj[this.fields.recurrenceRule]) {\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            }\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule]) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        var isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\n        if (!this.parent.isAdaptive) {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            this.disableButton(saveButton, isDisable);\n            this.disableButton(deleteButton, isDisable);\n        }\n        else {\n            var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n            if (saveIcon) {\n                if (isDisable) {\n                    addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n                else {\n                    removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n            }\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.disableButton = function (element, value) {\n        if (element) {\n            element.ej2_instances[0].disabled = value;\n        }\n    };\n    EventWindow.prototype.renderRecurrenceEditor = function () {\n        return new RecurrenceEditor({\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            dateFormat: this.parent.dateFormat,\n            enableRtl: this.parent.enableRtl,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            locale: this.parent.locale\n        });\n    };\n    EventWindow.prototype.updateMinMaxDateToEditor = function () {\n        var startDate = this.element.querySelector('.e-start');\n        var endDate = this.element.querySelector('.e-end');\n        if (startDate && endDate) {\n            var startObj = startDate.ej2_instances[0];\n            var endObj = endDate.ej2_instances[0];\n            startObj.min = this.parent.minDate;\n            startObj.max = this.parent.maxDate;\n            endObj.min = this.parent.minDate;\n            endObj.max = this.parent.maxDate;\n            startObj.dataBind();\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n            if (untilDate) {\n                var untilObj = untilDate.ej2_instances[0];\n                untilObj.min = this.parent.minDate;\n                untilObj.max = this.parent.maxDate;\n                untilObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        var data = repeatRule ?\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\n        this.repeatStatus.setProperties({ label: data });\n    };\n    EventWindow.prototype.dialogClose = function () {\n        this.isCrudAction = false;\n        this.parent.activeEventData = { event: undefined, element: undefined };\n        this.parent.currentAction = null;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.resetForm = function () {\n        this.fieldValidator.destroyToolTip();\n        this.resetFormFields();\n        if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n            this.recurrenceEditor.resetFields();\n        }\n    };\n    EventWindow.prototype.timezoneChangeStyle = function (value) {\n        var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n        if (value) {\n            addClass([timezoneDiv], cls.ENABLE_CLASS);\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            var timezone = startTimezoneObj.dataSource;\n            if (!startTimezoneObj.value || !this.parent.timezone) {\n                var found = timezone.some(function (tz) { return tz.Value === localTimezoneName; });\n                if (!found) {\n                    timezone.push({ Value: localTimezoneName, Text: localTimezoneName });\n                    startTimezoneObj.dataSource = timezone;\n                    endTimezoneObj.dataSource = timezone;\n                    startTimezoneObj.dataBind();\n                    endTimezoneObj.dataBind();\n                }\n            }\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n        }\n        else {\n            removeClass([timezoneDiv], cls.ENABLE_CLASS);\n        }\n    };\n    EventWindow.prototype.resetFormFields = function () {\n        var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n            var currentElement = formElement_1[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                this.setDefaultValueToElement(currentElement);\n            }\n        }\n    };\n    EventWindow.prototype.eventSave = function (alert) {\n        var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\n            !formElement.ej2_instances[0].validate()) {\n            return;\n        }\n        var dataCollection = this.getEventDataFromEditor();\n        if (this.processEventValidation(dataCollection.tempData, alert)) {\n            return;\n        }\n        this.eventCrudData = dataCollection.eventData;\n        this.isCrudAction = true;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.getEventDataFromEditor = function () {\n        var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n        if (!eventObj.Timezone) {\n            eventObj[this.fields.startTimezone] = null;\n            eventObj[this.fields.endTimezone] = null;\n        }\n        delete eventObj.Timezone;\n        delete eventObj.Repeat;\n        this.setDefaultValueToObject(eventObj);\n        eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n        var tempObj = extend({}, eventObj, null, true);\n        if (eventObj[this.fields.isAllDay]) {\n            eventObj[this.fields.startTime] = (isNullOrUndefined(eventObj[this.fields.startTime])) ? null\n                : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n            eventObj[this.fields.endTime] = (isNullOrUndefined(eventObj[this.fields.endTime])) ? null\n                : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n        }\n        return { eventData: eventObj, tempData: tempObj };\n    };\n    EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n        var alertType;\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('invalidDateError');\n                return true;\n            }\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('startEndError');\n                return true;\n            }\n        }\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n            alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n            var isShowAlert = true;\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n                isShowAlert = false;\n            }\n            if (!isNullOrUndefined(alertType) && isShowAlert\n                && ((!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern') || this.parent.enableRecurrenceValidation)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.processCrudActions = function (eventObj) {\n        var _this = this;\n        this.parent.uiStateValues.isBlock = false;\n        var resourceData = this.getResourceData(eventObj);\n        var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 ||\n            this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !isNullOrUndefined(resourceData);\n        var eventId = this.getEventIdFromForm();\n        if (!isNullOrUndefined(eventId)) {\n            var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n            var editedData = this.parent.eventsData.filter(function (data) {\n                return data[_this.fields.id] === eveId_1;\n            })[0];\n            if (isNullOrUndefined(editedData)) {\n                editedData = this.parent.blockData.filter(function (data) {\n                    return data[_this.fields.id] === eveId_1;\n                })[0];\n            }\n            eventObj = extend({}, editedData, eventObj);\n            if (eventObj[this.fields.isReadonly]) {\n                return false;\n            }\n            var currentAction = void 0;\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n                currentAction = this.parent.currentAction;\n                eventObj.Guid = this.parent.activeEventData.event.Guid;\n                if (this.parent.currentAction === 'EditOccurrence') {\n                    if (!eventObj[this.fields.recurrenceID]) {\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\n                    }\n                    else {\n                        eveId_1 = eventObj[this.fields.recurrenceID];\n                        currentAction = null;\n                    }\n                    if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n                        this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                        return true;\n                    }\n                }\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n                }\n                else if (this.parent.currentAction === 'EditFollowingEvents') {\n                    eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                    eventObj[this.fields.followingID] = editedData[this.fields.id];\n                }\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\n            }\n            else {\n                this.parent.saveEvent(eventObj, currentAction);\n            }\n        }\n        else {\n            this.parent.currentAction = 'Add';\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\n            }\n            else {\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                this.parent.addEvent(eventObj);\n            }\n        }\n        return this.parent.uiStateValues.isBlock;\n    };\n    EventWindow.prototype.getResourceData = function (eventObj) {\n        var resourceData = null;\n        if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection)\n            && this.parent.resourceBase.resourceCollection.length > 0) {\n            var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            resourceData = eventObj[lastResouceData.field];\n        }\n        return resourceData;\n    };\n    EventWindow.prototype.getObjectFromFormData = function (className) {\n        var formElement = this.getFormElements(className);\n        var eventObj = {};\n        for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n            var currentElement = formElement_2[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                eventObj[columnName] = this.getValueFromElement(currentElement);\n            }\n        }\n        return eventObj;\n    };\n    EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n            this.subjectValue(eventObj);\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n        }\n    };\n    EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n        var alertMessage;\n        var recEditor = this.recurrenceEditor;\n        var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n        if (alert !== this.l10n.getConstant('ok')) {\n            var activeEvent = this.parent.activeEventData.event;\n            var excludedEvents = [];\n            if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents')\n                && !isNullOrUndefined(activeEvent)) {\n                var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n                var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n                if (seriesEvents.length > 0) {\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n                }\n                else {\n                    var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n                }\n                if (this.parent.currentAction === 'EditSeries'\n                    && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n                    excludedEvents.push(this.eventData);\n                }\n            }\n            if (excludedEvents.length > 0) {\n                alertMessage = 'seriesChangeAlert';\n            }\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n                alertMessage = 'wrongPattern';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\n                    case 'DAILY':\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) > (interval * 24))) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'WEEKLY':\n                        var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                        var obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\n                        var temp = [];\n                        var tempDiff = [];\n                        for (var index = 0; index < types.length * (interval + 1); index++) {\n                            temp[index] = (types.length > index) ? obj[types[index]] : temp[index - types.length] + (7 * interval);\n                        }\n                        var tempvalue = temp.sort(function (a, b) { return a - b; });\n                        for (var index = 1; index < tempvalue.length; index++) {\n                            tempDiff.push(tempvalue[index] - tempvalue[index - 1]);\n                        }\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min.apply(Math, tempDiff) * 24)\n                            || isNullOrUndefined(interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'MONTHLY':\n                        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'YEARLY':\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                }\n            }\n        }\n        else {\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                this.parent.quickPopup.quickDialog.hide();\n            }\n        }\n        return alertMessage;\n    };\n    EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n        var recIndex;\n        for (var index = 0; index < recColl.length; index++) {\n            if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\n                recIndex = index;\n                break;\n            }\n        }\n        return recIndex;\n    };\n    EventWindow.prototype.trimAllDay = function (data) {\n        if (data[this.fields.isAllDay]) {\n            var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\n        }\n    };\n    EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n        var _this = this;\n        if (editData === void 0) {\n            editData = this.eventData;\n        }\n        var recurColl = this.parent.getOccurrencesByID(eventId);\n        var excludedDatas = this.parent.eventsData.filter(function (data) {\n            return data[_this.fields.recurrenceID] === eventId;\n        });\n        excludedDatas.map(function (data) { return recurColl.push(extend({}, data)); });\n        currentData = extend({}, currentData);\n        this.trimAllDay(currentData);\n        for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n            var data = recurColl_1[_i];\n            this.trimAllDay(data);\n        }\n        this.parent.eventBase.sortByTime(recurColl);\n        var index = this.getRecurrenceIndex(recurColl, editData);\n        if (isNullOrUndefined(index)) {\n            return false;\n        }\n        if (index === 0) {\n            if (!isNullOrUndefined(recurColl[index + 1])) {\n                return (!(new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) >\n                    new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0)));\n            }\n            return false;\n        }\n        else {\n            if (index === recurColl.length - 1) {\n                if (!(new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) <\n                    new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0))) {\n                    return true;\n                }\n            }\n            else if (!((new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) <\n                new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0)) &&\n                (new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) >\n                    new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0)))) {\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n        var _this = this;\n        var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        var resourceData = eventObj[lastResouceData.field];\n        resourceData = (resourceData instanceof Array) ? resourceData : [resourceData];\n        var lastlevel = this.parent.resourceBase.lastResourceLevel;\n        var eventList = [];\n        var _loop_2 = function (i) {\n            var events = extend({}, eventObj, null, true);\n            events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n            var temp = [];\n            var addValues = function () {\n                if (action === 'Save' && i === resourceData.length - 1) {\n                    if (temp.length > 0) {\n                        temp[0][_this.fields.id] = eventObj[_this.fields.id];\n                        for (var k = 1; k < temp.length; k++) {\n                            temp[k][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                            eventList.push(temp[k]);\n                            _this.parent.saveEvent(temp[0], currentAction);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = eventObj[_this.fields.id];\n                        _this.parent.saveEvent(events, currentAction);\n                    }\n                }\n                else {\n                    if (temp.length > 0) {\n                        for (var j = 0; j < temp.length; j++) {\n                            temp[j][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n                            eventList.push(temp[j]);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                        eventList.push(events);\n                    }\n                }\n            };\n            if (this_2.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastlevel))) {\n                var lastResource = lastResouceData.dataSource;\n                var resCol = this_2.parent.resourceCollection;\n                var index = void 0;\n                if (resCol.length > 1) {\n                    index =\n                        util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i], events, resCol);\n                }\n                else {\n                    index = util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i]);\n                }\n                if (index < 0) {\n                    return { value: void 0 };\n                }\n                var groupId_1 = lastResource[index][lastResouceData.groupIDField];\n                var filter = lastlevel.filter(function (obj) { return obj.resourceData[lastResouceData.idField] === resourceData[i]; }).\n                    filter(function (obj) { return obj.resourceData[lastResouceData.groupIDField] === groupId_1; })[0];\n                var groupOrder = filter.groupOrder;\n                for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[index_1].field;\n                    events[field] = (groupOrder[index_1] instanceof Array) ? groupOrder[index_1][0] : groupOrder[index_1];\n                }\n                addValues();\n            }\n            else {\n                for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[index].field;\n                    if (events[field] instanceof Array && events[field].length > 1) {\n                        for (var k = 0; k < events[field].length; k++) {\n                            var event_3 = extend({}, events, null, true);\n                            event_3[field] = eventObj[field][k];\n                            event_3[lastResouceData.field] = resourceData[i];\n                            temp.push(event_3);\n                        }\n                    }\n                    else {\n                        if (temp.length === 0) {\n                            events[field] = (eventObj[field] instanceof Array) ?\n                                eventObj[field][0] : eventObj[field];\n                            events[lastResouceData.field] = resourceData[i];\n                        }\n                        else {\n                            for (var l = 0; l < temp.length; l++) {\n                                temp[l][field] = (eventObj[field] instanceof Array) ?\n                                    eventObj[field][0] : eventObj[field];\n                            }\n                        }\n                    }\n                }\n                events[lastResouceData.field] = resourceData[i];\n                addValues();\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < resourceData.length; i++) {\n            var state_1 = _loop_2(i);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        if (eventList.length > 0) {\n            for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n                var event_4 = eventList_1[_i];\n                event_4[this.fields.recurrenceException] = null;\n                event_4[this.fields.recurrenceID] = null;\n            }\n            this.parent.addEvent(eventList);\n        }\n    };\n    EventWindow.prototype.getEventIdFromForm = function () {\n        return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n    };\n    EventWindow.prototype.getFormElements = function (className) {\n        var elements = [];\n        if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n            elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n        }\n        else {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n        }\n        if (!isBlazor()) {\n            return elements;\n        }\n        var validElements = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            if (element.classList.contains('e-control')) {\n                validElements.push(element);\n            }\n            else if (element.querySelector('.e-control')) {\n                validElements.push(element.querySelector('.e-control'));\n            }\n            else {\n                validElements.push(element);\n            }\n        }\n        return validElements;\n    };\n    EventWindow.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-datepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = SanitizeHtmlHelper.sanitize(element.value);\n            }\n        }\n        return value;\n    };\n    EventWindow.prototype.setValueToElement = function (element, value) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\n                this.eventWindowTime.startTime = new Date('' + value);\n            }\n            else {\n                this.eventWindowTime.endTime = new Date('' + value);\n            }\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.value = ((value instanceof Array) ? value : [value]);\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = value;\n            instance.dataBind();\n        }\n        else {\n            if (element.type !== 'checkbox') {\n                element.value = value || '';\n            }\n            else {\n                element.checked = value;\n            }\n        }\n    };\n    EventWindow.prototype.setDefaultValueToElement = function (element) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = this.parent.getCurrentTime();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            var dateValue = this.parent.getCurrentTime();\n            this.eventWindowTime = { startTime: dateValue, endTime: dateValue };\n            instance.value = dateValue;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = false;\n            instance.dataBind();\n        }\n        else {\n            if (element.type === 'checkbox') {\n                element.checked = false;\n            }\n            else {\n                element.value = '';\n            }\n        }\n    };\n    EventWindow.prototype.getInstance = function (className) {\n        var element = this.element.querySelector('.' + className);\n        return element ? element.ej2_instances[0] : null;\n    };\n    EventWindow.prototype.eventDelete = function () {\n        switch (this.parent.currentAction) {\n            case 'EditOccurrence':\n                var fields = this.parent.eventFields;\n                if (!isNullOrUndefined(this.parent.activeEventData.event[fields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteOccurrence';\n                }\n                else {\n                    this.parent.currentAction = 'Delete';\n                }\n                break;\n            case 'EditSeries':\n                this.parent.currentAction = 'DeleteSeries';\n                break;\n            case 'Save':\n                this.parent.currentAction = 'Delete';\n                break;\n        }\n        this.isCrudAction = false;\n        this.dialogObject.hide();\n        this.parent.quickPopup.openDeleteAlert();\n    };\n    EventWindow.prototype.getRecurrenceEditorInstance = function () {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        return this.recurrenceEditor;\n    };\n    EventWindow.prototype.destroyComponents = function () {\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formelement_2 = formelement; _i < formelement_2.length; _i++) {\n            var element = formelement_2[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datetimepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                instance = element.ej2_instances;\n            }\n            if (instance && instance[0]) {\n                instance[0].destroy();\n            }\n        }\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n    };\n    /**\n     * To destroy the event window.\n     * @return {void}\n     * @private\n     */\n    EventWindow.prototype.destroy = function () {\n        if (!this.parent.isDestroyed) {\n            this.resetEditorTemplate();\n            this.updateEditorTemplate();\n            this.parent.resetTemplates(['editorTemplate']);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n        }\n        this.destroyComponents();\n        this.fieldValidator.destroy();\n        if (this.repeatDialogObject) {\n            this.repeatDialogObject.destroy();\n            remove(this.repeatDialogObject.element);\n        }\n        if (this.dialogObject) {\n            this.dialogObject.destroy();\n            this.dialogObject = null;\n        }\n        if (this.element) {\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return EventWindow;\n}());\nexport { EventWindow };\n","import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.startIndex = 0;\n        this.isScrollHeightNull = true;\n        this.previousTop = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n    };\n    VirtualScroll.prototype.triggerScrolling = function () {\n        this.parent.showSpinner();\n        // tslint:disable-next-line:no-any\n        var scheduleObj = this.parent;\n        var adaptor = 'interopAdaptor';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        scheduleObj[adaptor][invokeMethodAsync]('OnContentUpdate', this.startIndex);\n    };\n    VirtualScroll.prototype.setTranslateValue = function () {\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        this.renderVirtualTrackHeight(conWrap, resWrap);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n    };\n    VirtualScroll.prototype.renderVirtualTrackHeight = function (contentWrap, resourceWrap) {\n        this.parent.resourceBase.setExpandedResources();\n        if (this.isScrollHeightNull) {\n            var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n            var resWrap = [].slice.call((resourceWrap).querySelectorAll('table td'));\n            var startIndex_1 = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n            var endIndex_1 = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n                return (resource.groupIndex >= startIndex_1 && resource.groupIndex <= endIndex_1);\n            });\n            this.setItemSize();\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n            this.isScrollHeightNull = false;\n            var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n            if (!isNullOrUndefined(virtual)) {\n                remove(virtual);\n            }\n            contentWrap.appendChild(wrap);\n        }\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResConut = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResConut = (renderedResConut > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResConut;\n            wrap.style.height = (renderedResConut * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    };\n    VirtualScroll.prototype.beforeInvoke = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        //code\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.parent.notify(events.dataReady, {});\n        this.parent.notify(events.contentReady, {});\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        this.parent.quickPopup.quickPopupHide();\n        this.parent.quickPopup.morePopup.hide();\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        this.renderedLength = resWrap.querySelector('tbody').children.length;\n        var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n        var scrollHeight = this.parent.rowAutoHeight ?\n            (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n        addClass([conWrap], 'e-transition');\n        var resCollection = [];\n        if ((conWrap.scrollTop) - this.translateY < 0) {\n            resCollection = this.upScroll(conWrap, firstTDIndex);\n            this.beforeInvoke(resWrap, conWrap, eventWrap, timeIndicator);\n        }\n        else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n            resCollection = this.downScroll(conWrap, firstTDIndex);\n            if (!(this.previousTop === conWrap.scrollTop)) {\n                this.beforeInvoke(resWrap, conWrap, eventWrap, timeIndicator);\n            }\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            this.parent.showSpinner();\n            this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n            this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n            if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                this.parent.dragAndDropModule.navigationWrapper();\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLenth = resWrap.querySelector('tbody').children.length;\n        for (var i = 0; i < renderedLenth; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        setStyleAttribute(conWrap.querySelector('table'), {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        setStyleAttribute(eventWrap, {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, {\n                transform: \"translateY(\" + this.translateY + \"px)\"\n            });\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, extend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { VirtualScroll } from '../actions/virtual-scroll';\nimport { EventTooltip } from '../popups/event-tooltip';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule DOM rendering\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render\n     */\n    function Render(parent) {\n        this.parent = parent;\n    }\n    Render.prototype.render = function (viewName, isDataRefresh) {\n        if (isDataRefresh === void 0) { isDataRefresh = true; }\n        this.initializeLayout(viewName);\n        if (this.parent.activeView && isDataRefresh && !this.parent.isServerRenderer()) {\n            this.refreshDataManager();\n        }\n    };\n    Render.prototype.initializeLayout = function (viewName) {\n        if (this.parent.activeView) {\n            this.parent.resetTemplates();\n            this.parent.activeView.removeEventListener();\n            this.parent.activeView.destroy();\n        }\n        switch (viewName) {\n            case 'Day':\n                this.parent.activeView = this.parent.dayModule;\n                break;\n            case 'Week':\n                this.parent.activeView = this.parent.weekModule;\n                break;\n            case 'WorkWeek':\n                this.parent.activeView = this.parent.workWeekModule;\n                break;\n            case 'Month':\n                this.parent.activeView = this.parent.monthModule;\n                break;\n            case 'Year':\n                this.parent.activeView = this.parent.yearModule;\n                break;\n            case 'Agenda':\n                this.parent.activeView = this.parent.agendaModule;\n                break;\n            case 'MonthAgenda':\n                this.parent.activeView = this.parent.monthAgendaModule;\n                break;\n            case 'TimelineDay':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-day-view';\n                break;\n            case 'TimelineWorkWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-work-week-view';\n                break;\n            case 'TimelineWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-week-view';\n                break;\n            case 'TimelineMonth':\n                this.parent.activeView = this.parent.timelineMonthModule;\n                break;\n            case 'TimelineYear':\n                this.parent.activeView = this.parent.timelineYearModule;\n                break;\n        }\n        if (isNullOrUndefined(this.parent.activeView)) {\n            var firstView = this.parent.viewCollections[0].option;\n            if (firstView) {\n                this.parent.setScheduleProperties({ currentView: firstView });\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.updateActiveView();\n                    this.parent.headerModule.setCalendarView();\n                }\n                return this.initializeLayout(firstView);\n            }\n            throw Error('Inject required modules');\n        }\n        this.parent.activeView.viewIndex = this.parent.viewIndex;\n        this.updateLabelText(viewName);\n        this.parent.activeView.addEventListener();\n        this.parent.activeView.getRenderDates();\n        this.parent.uiStateValues.isGroupAdaptive = this.parent.isAdaptive && this.parent.activeViewOptions.group.resources.length > 0 &&\n            this.parent.activeViewOptions.group.enableCompactView;\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.destroy();\n            this.parent.virtualScrollModule = null;\n        }\n        if (this.parent.currentView.indexOf('Timeline') !== -1 && this.parent.currentView.indexOf('Year') === -1\n            && this.parent.activeViewOptions.allowVirtualScrolling\n            && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.virtualScrollModule = new VirtualScroll(this.parent);\n            this.parent.uiStateValues.top = 0;\n        }\n        this.updateHeader();\n        this.parent.activeView.renderLayout(cls.CURRENT_PANEL_CLASS);\n        this.parent.renderTemplates();\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.destroy();\n            this.parent.eventTooltip = null;\n        }\n        if (this.parent.eventSettings.enableTooltip || (this.parent.activeViewOptions.group.resources.length > 0\n            && this.parent.activeViewOptions.group.headerTooltipTemplate)) {\n            this.parent.eventTooltip = new EventTooltip(this.parent);\n        }\n    };\n    Render.prototype.updateHeader = function () {\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek);\n            if (this.parent.activeViewOptions.readonly) {\n                addClass([this.parent.element], cls.READ_ONLY);\n            }\n            else if (this.parent.element.classList.contains(cls.READ_ONLY)) {\n                removeClass([this.parent.element], cls.READ_ONLY);\n            }\n            this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n            this.parent.headerModule.updateHeaderItems('remove');\n        }\n    };\n    Render.prototype.updateLabelText = function (view) {\n        var content = this.parent.activeView.getLabelText(view);\n        this.parent.element.setAttribute('role', 'main');\n        this.parent.element.setAttribute('aria-label', content);\n    };\n    Render.prototype.refreshDataManager = function () {\n        var _this = this;\n        if (!this.parent.activeView) {\n            return;\n        }\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e); }).catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    Render.prototype.dataManagerSuccess = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.dataBinding, e, function (args) {\n            var resultData = extend([], args.result, null, true);\n            _this.parent.eventsData = resultData.filter(function (data) { return !data[_this.parent.eventFields.isBlock]; });\n            _this.parent.blockData = resultData.filter(function (data) { return data[_this.parent.eventFields.isBlock]; });\n            var processed = _this.parent.eventBase.processData(resultData);\n            _this.parent.notify(events.dataReady, { processedData: processed });\n            if (_this.parent.dragAndDropModule && _this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                _this.parent.dragAndDropModule.navigationWrapper();\n            }\n            _this.parent.renderCompleted();\n            _this.parent.trigger(events.dataBound, null, function () { return _this.parent.hideSpinner(); });\n        });\n    };\n    Render.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        // tslint:disable:no-any\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n        // tslint:disable:no-any\n    };\n    return Render;\n}());\nexport { Render };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the configuration of working hours related options of scheduler.\n */\nvar WorkHours = /** @class */ (function (_super) {\n    __extends(WorkHours, _super);\n    function WorkHours() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], WorkHours.prototype, \"highlight\", void 0);\n    __decorate([\n        Property('09:00')\n    ], WorkHours.prototype, \"start\", void 0);\n    __decorate([\n        Property('18:00')\n    ], WorkHours.prototype, \"end\", void 0);\n    return WorkHours;\n}(ChildProperty));\nexport { WorkHours };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the configuration of options related to timescale on scheduler.\n */\nvar TimeScale = /** @class */ (function (_super) {\n    __extends(TimeScale, _super);\n    function TimeScale() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], TimeScale.prototype, \"enable\", void 0);\n    __decorate([\n        Property(60)\n    ], TimeScale.prototype, \"interval\", void 0);\n    __decorate([\n        Property(2)\n    ], TimeScale.prototype, \"slotCount\", void 0);\n    __decorate([\n        Property()\n    ], TimeScale.prototype, \"minorSlotTemplate\", void 0);\n    __decorate([\n        Property()\n    ], TimeScale.prototype, \"majorSlotTemplate\", void 0);\n    return TimeScale;\n}(ChildProperty));\nexport { TimeScale };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that defines the template options available to customize the quick popup of scheduler.\n */\nvar QuickInfoTemplates = /** @class */ (function (_super) {\n    __extends(QuickInfoTemplates, _super);\n    function QuickInfoTemplates() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], QuickInfoTemplates.prototype, \"templateType\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"header\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"content\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"footer\", void 0);\n    return QuickInfoTemplates;\n}(ChildProperty));\nexport { QuickInfoTemplates };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the header rows related configurations on timeline views.\n */\nvar HeaderRows = /** @class */ (function (_super) {\n    __extends(HeaderRows, _super);\n    function HeaderRows() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], HeaderRows.prototype, \"option\", void 0);\n    __decorate([\n        Property()\n    ], HeaderRows.prototype, \"template\", void 0);\n    return HeaderRows;\n}(ChildProperty));\nexport { HeaderRows };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getRecurrenceStringFromDate, generate } from '../../recurrence-editor/date-generator';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\n/**\n * Schedule CRUD operations\n */\nvar Crud = /** @class */ (function () {\n    function Crud(parent) {\n        this.parent = parent;\n        this.crudObj = { sourceEvent: null, targetEvent: null, isCrudAction: false };\n    }\n    Crud.prototype.getQuery = function () {\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        return this.parent.dataModule.generateQuery(start, end);\n    };\n    Crud.prototype.getTable = function () {\n        if (this.parent.eventSettings.query) {\n            var query = this.parent.eventSettings.query.clone();\n            return query.fromTable;\n        }\n        return null;\n    };\n    Crud.prototype.refreshData = function (args) {\n        var _this = this;\n        var actionArgs = {\n            requestType: args.requestType, cancel: false, data: args.data,\n            addedRecords: args.editParms.addedRecords, changedRecords: args.editParms.changedRecords,\n            deletedRecords: args.editParms.deletedRecords\n        };\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj && this.parent.dragAndDropModule.actionObj.element) {\n            this.parent.dragAndDropModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.resizeModule && this.parent.resizeModule.actionObj && this.parent.resizeModule.actionObj.element) {\n            this.parent.resizeModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !this.parent.rowAutoHeight && !this.parent.virtualScrollModule && this.parent.activeViewOptions.group.byGroupID) {\n            if (args.requestType === 'eventCreated' || args.requestType === 'eventRemoved') {\n                this.crudObj.isCrudAction = true;\n                this.crudObj.sourceEvent = [];\n                var crudData = args.data instanceof Array ? (args.data.length === 0 &&\n                    // tslint:disable:no-any\n                    args.requestType === 'eventRemoved' ? args.promise.deletedRecords : args.data) :\n                    ((typeof args.data === 'string' || typeof args.data === 'number') && args.requestType === 'eventRemoved') ?\n                        args.editParms.deletedRecords : [args.data];\n                var _loop_1 = function (data) {\n                    this_1.crudObj.isCrudAction = !(args.requestType === 'eventRemoved' && !isNullOrUndefined(data.parent));\n                    var groupIndex = this_1.parent.eventBase.getGroupIndexFromEvent(data);\n                    if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (tdData) { return tdData.groupIndex === groupIndex; }).length === 0\n                        && this_1.crudObj.isCrudAction) {\n                        this_1.crudObj.sourceEvent.push(this_1.parent.resourceBase.lastResourceLevel[groupIndex]);\n                    }\n                };\n                var this_1 = this;\n                for (var _i = 0, crudData_1 = crudData; _i < crudData_1.length; _i++) {\n                    var data = crudData_1[_i];\n                    _loop_1(data);\n                }\n                this.crudObj.targetEvent = this.crudObj.sourceEvent;\n            }\n        }\n        if (this.parent.dataModule.dataManager.dataSource.offline) {\n            this.parent.trigger(events.actionComplete, actionArgs, function (offlineArgs) {\n                if (!offlineArgs.cancel) {\n                    _this.parent.renderModule.refreshDataManager();\n                }\n            });\n        }\n        else {\n            args.promise.then(function (e) {\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(events.actionComplete, actionArgs, function (onlineArgs) {\n                    if (!onlineArgs.cancel) {\n                        _this.parent.renderModule.refreshDataManager();\n                    }\n                });\n            }).catch(function (e) {\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                // tslint:disable:no-any\n                _this.parent.trigger(events.actionFailure, { error: e });\n                // tslint:disable:no-any\n            });\n        }\n    };\n    Crud.prototype.addEvent = function (eventData) {\n        var _this = this;\n        if (this.parent.eventSettings.allowAdding) {\n            if (!this.isBlockEvent(eventData) &&\n                this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', (eventData instanceof Array) ? [eventData] : eventData);\n                return;\n            }\n            var addEvents = (eventData instanceof Array) ? eventData : [eventData];\n            var args = {\n                requestType: 'eventCreate', cancel: false,\n                addedRecords: addEvents, changedRecords: [], deletedRecords: []\n            };\n            args.data = addEvents;\n            this.parent.trigger(events.actionBegin, args, function (addArgs) {\n                if (!addArgs.cancel) {\n                    var fields = _this.parent.eventFields;\n                    var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                    var promise = void 0;\n                    if (addArgs.addedRecords instanceof Array) {\n                        for (var _i = 0, _a = addArgs.addedRecords; _i < _a.length; _i++) {\n                            var event_1 = _a[_i];\n                            editParms.addedRecords.push(_this.parent.eventBase.processTimezone(event_1, true));\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        promise = _this.parent.dataModule.dataManager.saveChanges(editParms, fields.id, _this.getTable(), _this.getQuery());\n                    }\n                    else {\n                        var event_2 = _this.parent.eventBase.processTimezone(addArgs.addedRecords, true);\n                        editParms.addedRecords.push(event_2);\n                        promise = _this.parent.dataModule.dataManager.insert(event_2, _this.getTable(), _this.getQuery());\n                    }\n                    var crudArgs = {\n                        requestType: 'eventCreated', cancel: false, data: addArgs.addedRecords, promise: promise, editParms: editParms\n                    };\n                    _this.refreshData(crudArgs);\n                }\n            });\n        }\n    };\n    Crud.prototype.saveEvent = function (eventData, action) {\n        var _this = this;\n        if (this.parent.eventSettings.allowEditing) {\n            if (this.parent.currentAction !== 'EditFollowingEvents' && !this.isBlockEvent(eventData)\n                && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', (eventData instanceof Array) ? [eventData] : eventData);\n                return;\n            }\n            this.parent.currentAction = action;\n            if (action) {\n                switch (action) {\n                    case 'EditOccurrence':\n                        this.processOccurrences(eventData, action);\n                        break;\n                    case 'EditFollowingEvents':\n                        this.processFollowSeries(eventData, action);\n                        break;\n                    case 'EditSeries':\n                        this.processEntireSeries(eventData, action);\n                        break;\n                }\n            }\n            else {\n                var updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n                var args = {\n                    requestType: 'eventChange', cancel: false,\n                    addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n                };\n                args.data = eventData;\n                this.parent.trigger(events.actionBegin, args, function (saveArgs) {\n                    if (!saveArgs.cancel) {\n                        var promise = void 0;\n                        var fields = _this.parent.eventFields;\n                        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (saveArgs.changedRecords instanceof Array) {\n                            for (var _i = 0, _a = saveArgs.changedRecords; _i < _a.length; _i++) {\n                                var event_3 = _a[_i];\n                                editParms.changedRecords.push(_this.parent.eventBase.processTimezone(event_3, true));\n                            }\n                            // tslint:disable-next-line:max-line-length\n                            promise = _this.parent.dataModule.dataManager.saveChanges(editParms, fields.id, _this.getTable(), _this.getQuery());\n                        }\n                        else {\n                            var event_4 = _this.parent.eventBase.processTimezone(saveArgs.changedRecords, true);\n                            editParms.changedRecords.push(event_4);\n                            // tslint:disable-next-line:max-line-length\n                            promise = _this.parent.dataModule.dataManager.update(fields.id, event_4, _this.getTable(), _this.getQuery());\n                        }\n                        var crudArgs = {\n                            requestType: 'eventChanged', cancel: false,\n                            data: saveArgs.changedRecords, promise: promise, editParms: editParms\n                        };\n                        _this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    };\n    Crud.prototype.deleteEvent = function (eventData, action) {\n        var _this = this;\n        if (this.parent.eventSettings.allowDeleting) {\n            this.parent.currentAction = action;\n            var deleteEvents = [];\n            if (typeof eventData === 'string' || typeof eventData === 'number') {\n                deleteEvents = this.parent.eventsData.filter(function (eventObj) {\n                    return eventObj[_this.parent.eventFields.id] === eventData;\n                });\n            }\n            else {\n                deleteEvents = (eventData instanceof Array ? eventData : [eventData]);\n            }\n            if (action) {\n                switch (action) {\n                    case 'Delete':\n                        this.processEventDelete(deleteEvents);\n                        break;\n                    case 'DeleteOccurrence':\n                        this.processOccurrences(deleteEvents, action);\n                        break;\n                    case 'DeleteFollowingEvents':\n                        this.processFollowSeries(deleteEvents, action);\n                        break;\n                    case 'DeleteSeries':\n                        this.processEntireSeries(deleteEvents, action);\n                        break;\n                }\n            }\n            else {\n                var args = {\n                    requestType: 'eventRemove', cancel: false,\n                    addedRecords: [], changedRecords: [], deletedRecords: deleteEvents\n                };\n                args.data = eventData;\n                this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n                    if (!deleteArgs.cancel) {\n                        var promise = void 0;\n                        var fields = _this.parent.eventFields;\n                        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (deleteArgs.deletedRecords.length > 1) {\n                            editParms.deletedRecords = editParms.deletedRecords.concat(deleteArgs.deletedRecords);\n                            // tslint:disable-next-line:max-line-length\n                            promise = _this.parent.dataModule.dataManager.saveChanges(editParms, fields.id, _this.getTable(), _this.getQuery());\n                        }\n                        else {\n                            editParms.deletedRecords.push(deleteArgs.deletedRecords[0]);\n                            // tslint:disable-next-line:max-line-length\n                            promise = _this.parent.dataModule.dataManager.remove(fields.id, deleteArgs.deletedRecords[0], _this.getTable(), _this.getQuery());\n                        }\n                        _this.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);\n                        var crudArgs = {\n                            requestType: 'eventRemoved', cancel: false,\n                            data: deleteArgs.deletedRecords, promise: promise, editParms: editParms\n                        };\n                        _this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    };\n    Crud.prototype.processOccurrences = function (eventData, action) {\n        var _this = this;\n        var occurenceData = [];\n        var isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_1 = eventData; _i < eventData_1.length; _i++) {\n                var event_5 = eventData_1[_i];\n                occurenceData.push({ occurrence: event_5, parent: this.getParentEvent(event_5) });\n            }\n        }\n        else {\n            occurenceData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        var updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditOccurrence' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n        };\n        args.data = occurenceData;\n        this.parent.trigger(events.actionBegin, args, function (occurenceArgs) {\n            if (!occurenceArgs.cancel) {\n                var fields = _this.parent.eventFields;\n                var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var occurrenceEvents = (occurenceData instanceof Array ? occurenceData : [occurenceData]);\n                var _loop_2 = function (a, count) {\n                    var childEvent = occurenceArgs.changedRecords[a];\n                    var parentEvent = occurrenceEvents[a].parent;\n                    var parentException = parentEvent[fields.recurrenceException];\n                    switch (action) {\n                        case 'EditOccurrence':\n                            var editedData = _this.parent.eventsProcessed.filter(function (event) { return event.Guid === childEvent.Guid; })[0];\n                            var exceptionDate = _this.excludeDateCheck(editedData[fields.startTime], parentException);\n                            if (exceptionDate !== parentEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] = exceptionDate;\n                                childEvent[fields.recurrenceException] = getRecurrenceStringFromDate(editedData[fields.startTime]);\n                                childEvent[fields.recurrenceID] = parentEvent[fields.id];\n                                childEvent[fields.followingID] = null;\n                                editParms.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                                editParms.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            else {\n                                editParms.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            break;\n                        case 'DeleteOccurrence':\n                            if (!childEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] =\n                                    _this.excludeDateCheck(childEvent[fields.startTime], parentException);\n                                editParms.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            }\n                            if (childEvent[fields.id] !== parentEvent[fields.id]) {\n                                editParms.deletedRecords.push(childEvent);\n                                isDeletedRecords = true;\n                            }\n                            break;\n                    }\n                };\n                for (var a = 0, count = occurenceArgs.changedRecords.length; a < count; a++) {\n                    _loop_2(a, count);\n                }\n                // tslint:disable-next-line:max-line-length\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParms, fields.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(occurenceArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditOccurrence' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? occurenceArgs.deletedRecords : occurenceArgs.changedRecords,\n                    promise: promise, editParms: editParms\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processFollowSeries = function (eventData, action) {\n        var _this = this;\n        var followData = [];\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_2 = eventData; _i < eventData_2.length; _i++) {\n                var event_6 = eventData_2[_i];\n                followData.push({ occurrence: event_6, parent: this.getParentEvent(event_6) });\n            }\n        }\n        else {\n            followData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        var updateFollowEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditFollowingEvents' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateFollowEvents, deletedRecords: []\n        };\n        args.data = followData;\n        this.parent.trigger(events.actionBegin, args, function (followArgs) {\n            if (!followArgs.cancel) {\n                var fields_1 = _this.parent.eventFields;\n                var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var followEvents = (followData instanceof Array ? followData : [followData]);\n                var _loop_3 = function (a, count) {\n                    var childEvent = followArgs.changedRecords[a];\n                    var parentEvent = followEvents[a].parent;\n                    var followData_1 = _this.parent.eventBase.getEventCollections(parentEvent, childEvent);\n                    switch (action) {\n                        case 'EditFollowingEvents':\n                            _this.processRecurrenceRule(parentEvent, childEvent);\n                            var isSplitted = !_this.parent.eventBase.isFollowingEvent(parentEvent, childEvent);\n                            childEvent[fields_1.followingID] = isSplitted ? null : parentEvent[fields_1.id];\n                            childEvent[fields_1.recurrenceID] = null;\n                            editParms.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            editParms.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            if (!_this.parent.uiStateValues.isIgnoreOccurrence) {\n                                childEvent[fields_1.recurrenceException] = null;\n                                if (followData_1.occurrence.length > 0) {\n                                    var rule = followData_1.occurrence.slice(-1)[0][fields_1.recurrenceRule];\n                                    if (rule.indexOf('COUNT') === -1) {\n                                        childEvent[fields_1.recurrenceRule] = rule;\n                                    }\n                                }\n                                if (followData_1.follow.length > 0) {\n                                    childEvent[fields_1.recurrenceRule] =\n                                        followData_1.follow.slice(-1)[0][fields_1.recurrenceRule];\n                                    editParms.deletedRecords = editParms.deletedRecords.concat(followData_1.follow);\n                                }\n                                if (isSplitted) {\n                                    followData_1.occurrence = followData_1.occurrence.filter(function (eventObj) {\n                                        return eventObj[fields_1.recurrenceID] === childEvent[fields_1.id];\n                                    });\n                                }\n                                editParms.deletedRecords = editParms.deletedRecords.concat(followData_1.occurrence);\n                            }\n                            break;\n                        case 'DeleteFollowingEvents':\n                            _this.processRecurrenceRule(parentEvent, childEvent[fields_1.startTime]);\n                            editParms.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            editParms.deletedRecords = editParms.deletedRecords.concat(followData_1.occurrence).concat(followData_1.follow);\n                            break;\n                    }\n                };\n                for (var a = 0, count = followArgs.changedRecords.length; a < count; a++) {\n                    _loop_3(a, count);\n                }\n                // tslint:disable-next-line:max-line-length\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParms, fields_1.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(followArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditFollowingEvents' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: followArgs.changedRecords, promise: promise, editParms: editParms\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processEntireSeries = function (eventData, action) {\n        var _this = this;\n        var seriesData = [];\n        var isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_3 = eventData; _i < eventData_3.length; _i++) {\n                var event_7 = eventData_3[_i];\n                seriesData.push(this.getParentEvent(event_7, true));\n            }\n        }\n        else {\n            seriesData = this.getParentEvent(eventData, true);\n        }\n        var updateSeriesEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditSeries' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateSeriesEvents, deletedRecords: []\n        };\n        args.data = seriesData;\n        this.parent.trigger(events.actionBegin, args, function (seriesArgs) {\n            if (!seriesArgs.cancel) {\n                var fields_2 = _this.parent.eventFields;\n                var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var seriesEvents = (seriesData instanceof Array ? seriesData : [seriesData]);\n                var _loop_4 = function (a, count) {\n                    var childEvent = seriesArgs.changedRecords[a];\n                    var parentEvent = seriesEvents[a];\n                    var eventCollections = _this.parent.eventBase.getEventCollections(parentEvent);\n                    var deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);\n                    switch (action) {\n                        case 'EditSeries':\n                            if ((childEvent[fields_2.startTime] > parentEvent[fields_2.startTime]) && childEvent[fields_2.recurrenceRule]) {\n                                _this.processRecurrenceRule(parentEvent, childEvent);\n                            }\n                            childEvent[fields_2.id] = parentEvent[fields_2.id];\n                            childEvent[fields_2.recurrenceID] = null;\n                            childEvent[fields_2.followingID] = null;\n                            if (_this.parent.uiStateValues.isIgnoreOccurrence && childEvent[fields_2.recurrenceException]) {\n                                var originalParent = _this.parent.eventsData.filter(function (eventObj) {\n                                    return eventObj[fields_2.id] === childEvent[fields_2.id];\n                                });\n                                if (originalParent.length > 0) {\n                                    childEvent[fields_2.recurrenceRule] = originalParent[0][fields_2.recurrenceRule];\n                                }\n                            }\n                            else {\n                                childEvent[fields_2.recurrenceException] = null;\n                                editParms.deletedRecords = editParms.deletedRecords.concat(deletedEvents);\n                            }\n                            editParms.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            _this.parent.uiStateValues.isIgnoreOccurrence = false;\n                            break;\n                        case 'DeleteSeries':\n                            editParms.deletedRecords = editParms.deletedRecords.concat(deletedEvents.concat(parentEvent));\n                            isDeletedRecords = true;\n                            break;\n                    }\n                };\n                for (var a = 0, count = seriesArgs.changedRecords.length; a < count; a++) {\n                    _loop_4(a, count);\n                }\n                // tslint:disable-next-line:max-line-length\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParms, fields_2.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(seriesArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditSeries' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? seriesArgs.deletedRecords : seriesArgs.changedRecords,\n                    promise: promise, editParms: editParms\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processEventDelete = function (eventData) {\n        var _this = this;\n        var deleteData = [];\n        for (var _i = 0, eventData_4 = eventData; _i < eventData_4.length; _i++) {\n            var eventObj = eventData_4[_i];\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                deleteData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                deleteData.push(eventObj);\n            }\n        }\n        var args = {\n            requestType: 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: [], deletedRecords: eventData\n        };\n        args.data = deleteData;\n        this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n                var fields_3 = _this.parent.eventFields;\n                var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var _loop_5 = function (a, count) {\n                    var isDelete = isNullOrUndefined(deleteArgs.deletedRecords[a][_this.parent.eventFields.recurrenceRule]);\n                    if (!isDelete) {\n                        var parentEvent_1 = deleteData[a].parent;\n                        var isEdited = editParms.changedRecords.filter(function (obj) {\n                            return obj[fields_3.id] === parentEvent_1[fields_3.id];\n                        });\n                        var editedDate = deleteArgs.deletedRecords[a][fields_3.startTime];\n                        if (isEdited.length > 0) {\n                            var editedData = isEdited[0];\n                            editedData[fields_3.recurrenceException] =\n                                _this.excludeDateCheck(editedDate, editedData[fields_3.recurrenceException]);\n                        }\n                        else {\n                            parentEvent_1[fields_3.recurrenceException] =\n                                _this.excludeDateCheck(editedDate, parentEvent_1[fields_3.recurrenceException]);\n                        }\n                        if (isEdited.length === 0) {\n                            editParms.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent_1, true));\n                        }\n                        isDelete = (deleteArgs.deletedRecords[a][fields_3.id] !== parentEvent_1[fields_3.id]);\n                    }\n                    if (isDelete) {\n                        editParms.deletedRecords.push(deleteArgs.deletedRecords[a]);\n                    }\n                };\n                for (var a = 0, count = deleteArgs.deletedRecords.length; a < count; a++) {\n                    _loop_5(a, count);\n                }\n                // tslint:disable-next-line:max-line-length\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParms, fields_3.id, _this.getTable(), _this.getQuery());\n                var crudArgs = {\n                    requestType: 'eventRemoved', cancel: false, data: deleteArgs.deletedRecords, promise: promise, editParms: editParms\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.getParentEvent = function (event, isParent) {\n        if (isParent === void 0) { isParent = false; }\n        var parentEvent = this.parent.eventBase.getParentEvent(event, isParent) || event;\n        if (parentEvent[this.parent.eventFields.startTimezone] || parentEvent[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(parentEvent);\n        }\n        return parentEvent;\n    };\n    Crud.prototype.excludeDateCheck = function (eventStartTime, exceptionDateList) {\n        var exDate = getRecurrenceStringFromDate(eventStartTime);\n        if (!isNullOrUndefined(exceptionDateList)) {\n            if (exceptionDateList.indexOf(exDate) === -1) {\n                exceptionDateList = !(isNullOrUndefined(exceptionDateList)) ? exceptionDateList + ',' + exDate : exDate;\n            }\n        }\n        else {\n            exceptionDateList = exDate;\n        }\n        return exceptionDateList;\n    };\n    Crud.prototype.processRecurrenceRule = function (parentEvent, followEvent) {\n        var fields = this.parent.eventFields;\n        var recurrenceRule = parentEvent[fields.recurrenceRule];\n        var endDate;\n        if (followEvent instanceof Date) {\n            endDate = new Date(+followEvent);\n        }\n        else {\n            endDate = new Date(+followEvent[fields.startTime]);\n            var newRecurrenceRule = followEvent[fields.recurrenceRule];\n            var startDate = parentEvent[fields.startTime];\n            var ruleException = (this.parent.currentAction === 'DeleteFollowingEvents') ? followEvent[fields.recurrenceException] : null;\n            var dateCollection = generate(startDate, newRecurrenceRule, ruleException, this.parent.activeViewOptions.firstDayOfWeek);\n            var untilDate = new Date(dateCollection.slice(-1)[0]);\n            untilDate.setHours(endDate.getHours(), endDate.getMinutes(), endDate.getSeconds());\n            endDate.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds());\n            followEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(newRecurrenceRule, new Date(+untilDate), false);\n        }\n        parentEvent[fields.recurrenceRule] =\n            this.getUpdatedRecurrenceRule(recurrenceRule, util.addDays(new Date(endDate.getTime()), -1), true);\n    };\n    Crud.prototype.getUpdatedRecurrenceRule = function (recurrenceRule, untilDate, isParent) {\n        var splitRule = recurrenceRule.split(';');\n        var updatedRule = '';\n        for (var _i = 0, splitRule_1 = splitRule; _i < splitRule_1.length; _i++) {\n            var rule = splitRule_1[_i];\n            if (rule !== '') {\n                var ruleKey = rule.split('=')[0];\n                var ruleValue = rule.split('=')[1];\n                if (ruleKey === 'COUNT' || ruleKey === 'UNTIL') {\n                    ruleValue = getRecurrenceStringFromDate(untilDate);\n                    rule = rule.replace(rule, 'UNTIL=' + ruleValue);\n                }\n                updatedRule += rule + ';';\n            }\n        }\n        if (isParent && updatedRule.indexOf('UNTIL') === -1) {\n            updatedRule += 'UNTIL=' + getRecurrenceStringFromDate(untilDate);\n        }\n        return updatedRule;\n    };\n    Crud.prototype.isBlockEvent = function (eventData) {\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var value = false;\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_8 = eventCollection_1[_i];\n            value = event_8[this.parent.eventFields.isBlock] || false;\n        }\n        return value;\n    };\n    return Crud;\n}());\nexport { Crud };\n","import { extend, closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Work cell interactions\n */\nvar WorkCellInteraction = /** @class */ (function () {\n    function WorkCellInteraction(parent) {\n        this.parent = parent;\n        EventHandler.add(this.parent.element, 'mouseover', this.onHover, this);\n    }\n    WorkCellInteraction.prototype.cellMouseDown = function (e) {\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        this.parent.notify(event.cellMouseDown, { event: e });\n    };\n    WorkCellInteraction.prototype.cellClick = function (e) {\n        var _this = this;\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (isNullOrUndefined(target)) {\n            return;\n        }\n        if (!isNullOrUndefined(closest(e.target, '.' + cls.NEW_EVENT_CLASS))) {\n            this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n            return;\n        }\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        var navigateView = this.parent.getNavigateView();\n        var sameView = this.parent.currentView === navigateView;\n        if (isNullOrUndefined(navigateEle) || sameView ||\n            isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {\n            if (this.parent.activeViewOptions.readonly && this.parent.currentView !== 'MonthAgenda') {\n                this.parent.quickPopup.quickPopupHide();\n                return;\n            }\n            if (this.parent.isAdaptive && (e.target.classList.contains(cls.MORE_INDICATOR_CLASS) ||\n                closest(e.target, '.' + cls.MORE_INDICATOR_CLASS))) {\n                return;\n            }\n            var isWorkCell_1 = target.classList.contains(cls.WORK_CELLS_CLASS) ||\n                target.classList.contains(cls.ALLDAY_CELLS_CLASS);\n            if (isWorkCell_1 && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {\n                this.parent.keyboardInteractionModule.onMouseSelection(e);\n                return;\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(event.cellClick, args, function (clickArgs) {\n                clickArgs = _this.serializingData(clickArgs, e);\n                if (!clickArgs.cancel) {\n                    if (isWorkCell_1) {\n                        _this.parent.selectCell(target);\n                    }\n                    if (_this.parent.allowInline) {\n                        var inlineArgs = {\n                            element: clickArgs.element,\n                            groupIndex: clickArgs.groupIndex, type: 'Cell'\n                        };\n                        _this.parent.notify(event.inlineClick, inlineArgs);\n                    }\n                    else {\n                        _this.parent.notify(event.cellClick, clickArgs);\n                    }\n                }\n                else {\n                    if (_this.parent.quickPopup) {\n                        _this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n            });\n        }\n        else {\n            var date = this.parent.getDateFromElement(target);\n            if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n                this.parent.setScheduleProperties({ selectedDate: date });\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    WorkCellInteraction.prototype.cellDblClick = function (e) {\n        var _this = this;\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e)) {\n            return;\n        }\n        var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellDoubleClick' });\n        this.parent.trigger(event.cellDoubleClick, args, function (clickArgs) {\n            clickArgs = _this.serializingData(clickArgs, e);\n            var date = new Date(clickArgs.startTime.getTime());\n            if (!_this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n                return;\n            }\n            if (!clickArgs.cancel) {\n                _this.parent.eventWindow.openEditor(_this.parent.activeCellsData, 'Add');\n            }\n        });\n    };\n    WorkCellInteraction.prototype.serializingData = function (clickArgs, e) {\n        return clickArgs;\n    };\n    WorkCellInteraction.prototype.onHover = function (e) {\n        var targetSelector = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.TIME_SLOT_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS + ',.' + cls.RESOURCE_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.WEEK_NUMBER_CLASS +\n            ',.' + cls.MONTH_HEADER_CLASS;\n        var hoverTarget = closest(e.target, targetSelector);\n        if (hoverTarget) {\n            var hoverArgs = { element: hoverTarget, event: e };\n            this.parent.trigger(event.hover, hoverArgs);\n        }\n    };\n    WorkCellInteraction.prototype.isPreventAction = function (e) {\n        if (closest(e.target, '.' + cls.NAVIGATE_CLASS)) {\n            return false;\n        }\n        if (closest(e.target, '.' + cls.APPOINTMENT_WRAPPER_CLASS) &&\n            !closest(e.target, '.' + cls.MORE_INDICATOR_CLASS)) {\n            return true;\n        }\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.RESOURCE_GROUP_CELLS_CLASS);\n        if (!isNullOrUndefined(target)) {\n            return true;\n        }\n        target = closest(e.target, '.' + cls.HEADER_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    WorkCellInteraction.prototype.destroy = function () {\n        EventHandler.remove(this.parent.element, 'mouseover', this.onHover);\n    };\n    return WorkCellInteraction;\n}());\nexport { WorkCellInteraction };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configuration that applies on each appointment field options of scheduler.\n */\nvar FieldOptions = /** @class */ (function (_super) {\n    __extends(FieldOptions, _super);\n    function FieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"default\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"title\", void 0);\n    __decorate([\n        Property({})\n    ], FieldOptions.prototype, \"validation\", void 0);\n    return FieldOptions;\n}(ChildProperty));\nexport { FieldOptions };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { FieldOptions } from './field-options';\n/**\n * A Class that holds the collection of event fields that requires to be mapped with the dataSource\n * fields along with its available configuration settings. Each field in it accepts both string and Object\n *  data type. When each of the field is assigned with simple `string` value, it is assumed that the dataSource field\n *  name is mapped with it. If the `object` type is defined on each fields, then the validation related settings and mapping of\n *  those fields with dataSource can be given altogether within it.\n */\nvar Field = /** @class */ (function (_super) {\n    __extends(Field, _super);\n    function Field() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Id')\n    ], Field.prototype, \"id\", void 0);\n    __decorate([\n        Property('IsBlock')\n    ], Field.prototype, \"isBlock\", void 0);\n    __decorate([\n        Complex({ name: 'Subject', default: 'Add title' }, FieldOptions)\n    ], Field.prototype, \"subject\", void 0);\n    __decorate([\n        Complex({ name: 'StartTime' }, FieldOptions)\n    ], Field.prototype, \"startTime\", void 0);\n    __decorate([\n        Complex({ name: 'EndTime' }, FieldOptions)\n    ], Field.prototype, \"endTime\", void 0);\n    __decorate([\n        Complex({ name: 'StartTimezone' }, FieldOptions)\n    ], Field.prototype, \"startTimezone\", void 0);\n    __decorate([\n        Complex({ name: 'EndTimezone' }, FieldOptions)\n    ], Field.prototype, \"endTimezone\", void 0);\n    __decorate([\n        Complex({ name: 'Location' }, FieldOptions)\n    ], Field.prototype, \"location\", void 0);\n    __decorate([\n        Complex({ name: 'Description' }, FieldOptions)\n    ], Field.prototype, \"description\", void 0);\n    __decorate([\n        Complex({ name: 'IsAllDay' }, FieldOptions)\n    ], Field.prototype, \"isAllDay\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceID' }, FieldOptions)\n    ], Field.prototype, \"recurrenceID\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceRule' }, FieldOptions)\n    ], Field.prototype, \"recurrenceRule\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceException' }, FieldOptions)\n    ], Field.prototype, \"recurrenceException\", void 0);\n    __decorate([\n        Property('IsReadonly')\n    ], Field.prototype, \"isReadonly\", void 0);\n    __decorate([\n        Property('FollowingID')\n    ], Field.prototype, \"followingID\", void 0);\n    return Field;\n}(ChildProperty));\nexport { Field };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { Field } from './fields';\n/**\n * Holds the configuration of event related options and dataSource binding to Schedule.\n */\nvar EventSettings = /** @class */ (function (_super) {\n    __extends(EventSettings, _super);\n    function EventSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property([])\n    ], EventSettings.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"query\", void 0);\n    __decorate([\n        Complex({}, Field)\n    ], EventSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableTooltip\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"tooltipTemplate\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"resourceColorField\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"editFollowingEvents\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableMaxHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableIndicator\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"ignoreWhitespace\", void 0);\n    return EventSettings;\n}(ChildProperty));\nexport { EventSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that holds the resource grouping related configurations on Schedule.\n */\nvar Group = /** @class */ (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"byDate\", void 0);\n    __decorate([\n        Property(true)\n    ], Group.prototype, \"byGroupID\", void 0);\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"allowGroupEdit\", void 0);\n    __decorate([\n        Property([])\n    ], Group.prototype, \"resources\", void 0);\n    __decorate([\n        Property(true)\n    ], Group.prototype, \"enableCompactView\", void 0);\n    __decorate([\n        Property()\n    ], Group.prototype, \"headerTooltipTemplate\", void 0);\n    return Group;\n}(ChildProperty));\nexport { Group };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the resource related configurations and its data binding options.\n */\nvar Resources = /** @class */ (function (_super) {\n    __extends(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Resources.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"title\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"name\", void 0);\n    __decorate([\n        Property(false)\n    ], Resources.prototype, \"allowMultiple\", void 0);\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"query\", void 0);\n    __decorate([\n        Property('Id')\n    ], Resources.prototype, \"idField\", void 0);\n    __decorate([\n        Property('Text')\n    ], Resources.prototype, \"textField\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Resources.prototype, \"expandedField\", void 0);\n    __decorate([\n        Property('GroupID')\n    ], Resources.prototype, \"groupIDField\", void 0);\n    __decorate([\n        Property('Color')\n    ], Resources.prototype, \"colorField\", void 0);\n    __decorate([\n        Property('StartHour')\n    ], Resources.prototype, \"startHourField\", void 0);\n    __decorate([\n        Property('EndHour')\n    ], Resources.prototype, \"endHourField\", void 0);\n    __decorate([\n        Property('WorkDays')\n    ], Resources.prototype, \"workDaysField\", void 0);\n    __decorate([\n        Property('CssClass')\n    ], Resources.prototype, \"cssClassField\", void 0);\n    return Resources;\n}(ChildProperty));\nexport { Resources };\n","import { extend, isNullOrUndefined, createElement, EventHandler, addClass, append, removeClass, remove, closest, classList } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Data } from '../actions/data';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar ResourceBase = /** @class */ (function () {\n    function ResourceBase(parent) {\n        this.resourceCollection = [];\n        this.leftPixel = 25;\n        this.parent = parent;\n    }\n    ResourceBase.prototype.renderResourceHeaderIndent = function (tr) {\n        var resColTd = createElement('td', { className: cls.RESOURCE_LEFT_TD_CLASS });\n        var resColDiv = createElement('div', { className: cls.RESOURCE_TEXT_CLASS });\n        resColTd.appendChild(resColDiv);\n        var args = { elementType: 'emptyCells', element: resColTd };\n        this.parent.trigger(events.renderCell, args);\n        tr.appendChild(resColTd);\n    };\n    ResourceBase.prototype.hideResourceRows = function (tBody) {\n        if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n            return;\n        }\n        var trCount = this.lastResourceLevel.length;\n        for (var i = 0; i < trCount; i++) {\n            var resData = this.lastResourceLevel[i].resourceData;\n            var res = this.lastResourceLevel[i].resource;\n            if (resData.ClassName === cls.RESOURCE_PARENT_CLASS && !resData[res.expandedField] &&\n                !isNullOrUndefined(resData[res.expandedField])) {\n                var trCollection = [].slice.call(tBody.children);\n                var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 0) + 1));\n                addClass(slicedCollection, cls.HIDDEN_CLASS);\n            }\n        }\n    };\n    ResourceBase.prototype.createResourceColumn = function () {\n        var resColl = this.resourceCollection;\n        var resDiv = createElement('div', { className: cls.RESOURCE_COLUMN_WRAP_CLASS });\n        var tbl = this.parent.activeView.createTableLayout(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([tbl], cls.AUTO_HEIGHT);\n        }\n        var tBody = tbl.querySelector('tbody');\n        var resData = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n        if (this.parent.virtualScrollModule) {\n            var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n            this.setExpandedResources();\n            resData = this.expandedResources.slice(0, resourceCount);\n            this.renderedResources = resData;\n        }\n        append(this.getContentRows(resData), tBody);\n        this.hideResourceRows(tBody);\n        tbl.appendChild(tBody);\n        resDiv.appendChild(tbl);\n        return resDiv;\n    };\n    ResourceBase.prototype.setRenderedResources = function () {\n        var resColl = this.resourceCollection;\n        this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n    };\n    ResourceBase.prototype.setExpandedResources = function () {\n        var resources = [];\n        for (var i = 0; i < this.lastResourceLevel.length; i++) {\n            var resource = this.lastResourceLevel[i].resourceData;\n            var count = resource.Count;\n            resources.push(this.lastResourceLevel[i]);\n            var isExpanded = resource[this.lastResourceLevel[i].resource.expandedField];\n            if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n                i = i + count;\n            }\n        }\n        this.expandedResources = resources;\n    };\n    ResourceBase.prototype.getContentRows = function (resData) {\n        var resRows = [];\n        var left;\n        var rIndex;\n        var resColl = this.resourceCollection;\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { tabindex: '0' } });\n        for (var i = 0; i < resData.length; i++) {\n            var ntd = td.cloneNode();\n            rIndex = util.findIndexInData(resColl, 'name', resData[i].resource.name);\n            if (rIndex === resColl.length - 1) {\n                extend(resData[i].resourceData, { ClassName: cls.RESOURCE_CHILD_CLASS });\n                this.renderedResources[i].className = [cls.RESOURCE_CHILD_CLASS];\n            }\n            else {\n                extend(resData[i].resourceData, { ClassName: cls.RESOURCE_PARENT_CLASS });\n                this.renderedResources[i].className = [cls.RESOURCE_PARENT_CLASS];\n            }\n            left = (rIndex * this.leftPixel) + 'px';\n            if (resData[i].resourceData.ClassName === cls.RESOURCE_PARENT_CLASS\n                && !isNullOrUndefined(resData[i].resourceData.Count) && (resData[i].resourceData.Count > 0)) {\n                var iconClass = void 0;\n                if (resData[i].resourceData[resColl[rIndex].expandedField] ||\n                    isNullOrUndefined(resData[i].resourceData[resColl[rIndex].expandedField])) {\n                    iconClass = cls.RESOURCE_COLLAPSE_CLASS;\n                }\n                else {\n                    iconClass = cls.RESOURCE_EXPAND_CLASS;\n                }\n                var iconDiv = createElement('div');\n                addClass([iconDiv], [cls.RESOURCE_TREE_ICON_CLASS, iconClass]);\n                this.setMargin(iconDiv, left);\n                ntd.appendChild(iconDiv);\n                if (this.resourceCollection.length > 1) {\n                    EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n                }\n            }\n            this.parent.activeView.setResourceHeaderContent(ntd, resData[i], cls.RESOURCE_TEXT_CLASS);\n            ntd.setAttribute('data-group-index', resData[i].groupIndex.toString());\n            ntd.setAttribute('aria-label', resData[i].resourceData[resData[i].resource.textField] + ' resource');\n            if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n                this.setMargin(ntd.querySelector('.' + cls.RESOURCE_TEXT_CLASS), left);\n            }\n            var classCollection = [cls.RESOURCE_CELLS_CLASS, resData[i].resourceData.ClassName];\n            addClass([ntd], classCollection);\n            var args = { elementType: 'resourceHeader', element: ntd, groupIndex: resData[i].groupIndex };\n            this.parent.trigger(events.renderCell, args);\n            var ntr = tr.cloneNode();\n            ntr.appendChild(ntd);\n            resRows.push(ntr);\n        }\n        return resRows;\n    };\n    ResourceBase.prototype.setMargin = function (element, value) {\n        if (!this.parent.enableRtl) {\n            element.style.marginLeft = value;\n        }\n        else {\n            element.style.marginRight = value;\n        }\n    };\n    ResourceBase.prototype.countCalculation = function (parentCollection, wholeCollection) {\n        var collection;\n        for (var y = 0; y < parentCollection.length; y++) {\n            var data = parentCollection[parentCollection.length - (y + 1)]\n                .dataSource;\n            for (var x = 0; x < data.length; x++) {\n                var totalCount = 0;\n                if (this.parent.activeViewOptions.group.byGroupID) {\n                    collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource)\n                        .executeLocal(new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[x][parentCollection[parentCollection.length - (y + 1)].idField]));\n                }\n                else {\n                    collection = wholeCollection[wholeCollection.length - 1].dataSource;\n                }\n                for (var z = 0; z < collection.length; z++) {\n                    totalCount = totalCount + parseInt(collection[z].Count, 0);\n                }\n                totalCount = totalCount + parseInt(data[x].Count, 0);\n                extend(data[x], { Count: totalCount });\n            }\n            wholeCollection = wholeCollection.slice(0, -1);\n        }\n    };\n    ResourceBase.prototype.onTreeIconClick = function (e) {\n        var _this = this;\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        var target = e.target;\n        var hide;\n        var trElement = closest(target, '.' + cls.RESOURCE_PARENT_CLASS)\n            .parentElement;\n        var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n        var args = {\n            cancel: false, event: e, groupIndex: index,\n            requestType: !target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse',\n        };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS)) {\n                    classList(target, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                    hide = true;\n                }\n                else {\n                    classList(target, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                    hide = false;\n                }\n                var eventElements = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n                for (var _i = 0, eventElements_1 = eventElements; _i < eventElements_1.length; _i++) {\n                    var element = eventElements_1[_i];\n                    remove(element);\n                }\n                if (_this.parent.virtualScrollModule) {\n                    _this.updateVirtualContent(index, hide, e, target);\n                }\n                else {\n                    _this.updateContent(index, hide);\n                }\n                var data = { cssProperties: _this.parent.getCssProperties(), module: 'scroll' };\n                _this.parent.notify(events.scrollUiUpdate, data);\n                args = {\n                    cancel: false, event: e, groupIndex: index,\n                    requestType: target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed',\n                };\n                _this.parent.notify(events.dataReady, {});\n                _this.parent.trigger(events.actionComplete, args);\n            }\n        });\n    };\n    ResourceBase.prototype.updateContent = function (index, hide) {\n        var rowCollection = [];\n        var workCellCollection = [];\n        var headerRowCollection = [];\n        var pNode;\n        var clickedRes = this.lastResourceLevel[index].resourceData;\n        var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n        var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n        var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' .' + cls.APPOINTMENT_CONTAINER_CLASS));\n        for (var j = 0; j < clickedRes.Count; j++) {\n            rowCollection.push(resRows[index + j + 1]);\n            workCellCollection.push(contentRows[index + j + 1]);\n            headerRowCollection.push(eventRows[index + j + 1]);\n        }\n        var clonedCollection = this.lastResourceLevel;\n        for (var i = 0; i < rowCollection.length; i++) {\n            var expanded = true;\n            pNode = rowCollection[i].children[0].classList.contains(cls.RESOURCE_PARENT_CLASS);\n            clonedCollection[index].resourceData[clonedCollection[index].resource.expandedField] = !hide;\n            if (hide) {\n                if (pNode) {\n                    var trElem = rowCollection[i].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                    if (trElem) {\n                        classList(trElem, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                    }\n                }\n                if (!rowCollection[i].classList.contains(cls.HIDDEN_CLASS)) {\n                    addClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], cls.HIDDEN_CLASS);\n                }\n            }\n            else {\n                if (pNode) {\n                    var rowIndex = rowCollection[i].rowIndex;\n                    if (!clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField]\n                        && !isNullOrUndefined(clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField])) {\n                        rowCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 0)));\n                        workCellCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 0)));\n                        headerRowCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 0)));\n                        expanded = false;\n                    }\n                    if (expanded) {\n                        var trElem = rowCollection[i].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                        if (trElem) {\n                            classList(trElem, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                        }\n                    }\n                }\n                if (rowCollection[i].classList.contains(cls.HIDDEN_CLASS)) {\n                    removeClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], cls.HIDDEN_CLASS);\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.updateVirtualContent = function (index, expand, e, target) {\n        this.lastResourceLevel[index].resourceData[this.lastResourceLevel[index].resource.expandedField] = !expand;\n        this.setExpandedResources();\n        var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n        var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n        this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n        if (this.renderedResources.length < resourceCount) {\n            var sIndex = this.expandedResources.length - resourceCount;\n            sIndex = (sIndex > 0) ? sIndex : 0;\n            this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n        }\n        var virtualTrack = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n        var resTable = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n        var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'table');\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        if (!isNullOrUndefined(timeIndicator)) {\n            timeIndicator.style.height =\n                this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight + 'px';\n        }\n    };\n    ResourceBase.prototype.renderResourceHeader = function () {\n        var resourceWrapper = createElement('div', { className: cls.RESOURCE_TOOLBAR_CONTAINER });\n        resourceWrapper.innerHTML = '<div class=\"' + cls.RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + cls.RESOURCE_MENU + '\">' +\n            '<div class=\"e-icons ' + cls.RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + cls.RESOURCE_LEVEL_TITLE + '\"></div></div>';\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            target.insertBefore(resourceWrapper, target.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        this.renderResourceHeaderText();\n        EventHandler.add(resourceWrapper.querySelector('.' + cls.RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n    };\n    ResourceBase.prototype.renderResourceTree = function () {\n        this.popupOverlay = createElement('div', { className: cls.RESOURCE_TREE_POPUP_OVERLAY });\n        var treeWrapper = createElement('div', { className: cls.RESOURCE_TREE_POPUP + ' e-popup-close' });\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n            target.insertBefore(treeWrapper, target.children[0]);\n            target.appendChild(this.popupOverlay);\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n        }\n        var resourceTree = createElement('div', { className: cls.RESOURCE_TREE });\n        treeWrapper.appendChild(resourceTree);\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            fields: {\n                dataSource: [].slice.call(this.generateTreeData()),\n                id: 'resourceId',\n                text: 'resourceName',\n                child: 'resourceChild'\n            },\n            nodeTemplate: this.parent.resourceHeaderTemplate,\n            nodeClicked: this.resourceClick.bind(this)\n        });\n        this.treeViewObj.appendTo(resourceTree);\n        this.treeViewObj.expandAll();\n        this.treePopup = new Popup(treeWrapper, {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            content: this.treeViewObj.element,\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ?\n                cls.WRAPPER_CONTAINER_CLASS : cls.TABLE_CONTAINER_CLASS))\n        });\n        this.parent.on(events.documentClick, this.documentClick, this);\n    };\n    ResourceBase.prototype.generateTreeData = function (isTimeLine) {\n        var _this = this;\n        var treeCollection = [];\n        var resTreeColl = [];\n        var groupIndex = 0;\n        var _loop_1 = function (i, len) {\n            var treeHandler = function (treeLevel, index, levelId) {\n                var resource = _this.resourceCollection[index];\n                var treeArgs;\n                var resObj;\n                if (!isTimeLine) {\n                    treeArgs = {\n                        resourceId: levelId,\n                        resourceName: treeLevel.resourceData[resource.textField],\n                        resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData\n                    };\n                }\n                else {\n                    resObj = {\n                        type: 'resourceHeader', resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData, groupIndex: groupIndex,\n                        groupOrder: treeLevel.groupOrder\n                    };\n                    resTreeColl.push(resObj);\n                    groupIndex++;\n                }\n                if (treeLevel.child.length > 0 && !isTimeLine) {\n                    treeArgs.resourceChild = [];\n                }\n                var count = 1;\n                for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {\n                    var tree = _a[_i];\n                    if (!isTimeLine) {\n                        treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n                    }\n                    else {\n                        treeHandler(tree, index + 1, levelId + '-' + count);\n                    }\n                    count += 1;\n                }\n                if (isTimeLine) {\n                    extend(resObj.resourceData, { Count: count - 1 });\n                }\n                return treeArgs;\n            };\n            if (!isTimeLine) {\n                treeCollection.push(treeHandler(this_1.resourceTreeLevel[i], 0, (i + 1).toString()));\n            }\n            else {\n                treeHandler(this_1.resourceTreeLevel[i], 0, (i + 1).toString());\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        if (isTimeLine) {\n            this.lastResourceLevel = resTreeColl;\n            return resTreeColl;\n        }\n        else {\n            return treeCollection;\n        }\n    };\n    ResourceBase.prototype.renderResourceHeaderText = function () {\n        var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var headerCollection = [];\n        var _loop_2 = function (i, len) {\n            var resourceLevel = this_2.resourceCollection[i];\n            var resourceText = resourceLevel.dataSource.filter(function (resData) {\n                return resData[resourceLevel.idField] === resource.groupOrder[i];\n            });\n            var resourceName = createElement('div', {\n                className: cls.RESOURCE_NAME,\n                innerHTML: resourceText[0][resourceLevel.textField]\n            });\n            headerCollection.push(resourceName);\n            var levelIcon = createElement('div', { className: 'e-icons e-icon-next' });\n            headerCollection.push(levelIcon);\n        };\n        var this_2 = this;\n        for (var i = 0, len = resource.groupOrder.length; i < len; i++) {\n            _loop_2(i, len);\n        }\n        headerCollection.pop();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        var headerWrapper = target.querySelector('.' + cls.RESOURCE_LEVEL_TITLE);\n        util.removeChildren(headerWrapper);\n        for (var _i = 0, headerCollection_1 = headerCollection; _i < headerCollection_1.length; _i++) {\n            var header = headerCollection_1[_i];\n            headerWrapper.appendChild(header);\n        }\n        if (this.lastResourceLevel.length === 1) {\n            addClass([this.parent.element.querySelector('.' + cls.RESOURCE_MENU)], cls.DISABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.menuClick = function (event) {\n        if (this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP).classList.contains(cls.POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n        else {\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.resourceClick = function (event) {\n        var _this = this;\n        if (!event.node.classList.contains('e-has-child')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            this.parent.uiStateValues.groupIndex = treeNodes.indexOf(event.node);\n            if (this.parent.isServerRenderer()) {\n                // tslint:disable-next-line:no-any\n                this.parent.interopAdaptor.invokeMethodAsync('OnResourceClick', this.parent.uiStateValues.groupIndex).then(function () {\n                    if (_this.parent.isDestroyed) {\n                        return;\n                    }\n                    _this.renderResourceHeaderText();\n                    _this.parent.activeView.serverRenderLayout();\n                    var processed = _this.parent.eventBase.processData(_this.parent.eventsData);\n                    _this.parent.notify(events.dataReady, { processedData: processed });\n                }).catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e); });\n            }\n            else {\n                this.parent.renderModule.render(this.parent.currentView, false);\n                var processed = this.parent.eventBase.processData(this.parent.blockData.concat(this.parent.eventsData));\n                this.parent.notify(events.dataReady, { processedData: processed });\n            }\n        }\n        event.event.preventDefault();\n    };\n    ResourceBase.prototype.documentClick = function (args) {\n        if (closest(args.event.target, '.' + cls.RESOURCE_TREE_POPUP)) {\n            return;\n        }\n        var treeWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP);\n        if (treeWrapper && treeWrapper.classList.contains(cls.POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.bindResourcesData = function (isSetModel) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promises = [];\n        for (var i = 0; i < this.parent.resources.length; i++) {\n            var dataModule = new Data(this.parent.resources[i].dataSource, this.parent.resources[i].query);\n            promises.push(dataModule.getData(dataModule.generateQuery()));\n        }\n        Promise.all(promises).then(function (e) { return _this.dataManagerSuccess(e, isSetModel); })\n            .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e); });\n    };\n    ResourceBase.prototype.dataManagerSuccess = function (e, isSetModel) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.resourceCollection = [];\n        for (var i = 0, length_1 = e.length; i < length_1; i++) {\n            var resource = this.parent.resources[i];\n            var resourceObj = this.getResourceModel(resource, e[i].result);\n            this.parent.resourceCollection.push(resourceObj);\n        }\n        this.refreshLayout(isSetModel);\n    };\n    ResourceBase.prototype.getResourceModel = function (resource, resourceData) {\n        var resourceObj = {\n            field: resource.field,\n            title: resource.title,\n            name: resource.name,\n            allowMultiple: resource.allowMultiple,\n            dataSource: resourceData || resource.dataSource,\n            idField: resource.idField,\n            textField: resource.textField,\n            groupIDField: resource.groupIDField,\n            colorField: resource.colorField,\n            startHourField: resource.startHourField,\n            endHourField: resource.endHourField,\n            workDaysField: resource.workDaysField,\n            expandedField: resource.expandedField,\n            cssClassField: resource.cssClassField\n        };\n        return resourceObj;\n    };\n    ResourceBase.prototype.refreshLayout = function (isSetModel) {\n        if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !(this.parent.enablePersistence)) {\n            this.parent.uiStateValues.groupIndex = 0;\n        }\n        this.parent.renderElements(isSetModel);\n    };\n    ResourceBase.prototype.setResourceCollection = function () {\n        var requiredResources = [];\n        this.resourceCollection = [];\n        this.colorIndex = null;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index_1 = util.findIndexInData(this.parent.resourceCollection, 'name', resource);\n                if (index_1 >= 0) {\n                    requiredResources.push(this.parent.resourceCollection[index_1]);\n                }\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            requiredResources = this.parent.resourceCollection;\n        }\n        var index = 0;\n        for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {\n            var resource = requiredResources_1[_b];\n            var resources = this.getResourceModel(resource);\n            if (resource.name === this.parent.eventSettings.resourceColorField) {\n                this.colorIndex = index;\n            }\n            index++;\n            this.resourceCollection.push(resources);\n        }\n        if (isNullOrUndefined(this.colorIndex)) {\n            this.colorIndex = this.resourceCollection.length - 1;\n        }\n    };\n    ResourceBase.prototype.generateResourceLevels = function (innerDates, isTimeLine) {\n        var _this = this;\n        var resources = this.resourceCollection;\n        var resTreeGroup = [];\n        var lastColumnDates = [];\n        var group = function (resources, index, prevResource, prevResourceData, prevOrder) {\n            var resTree = [];\n            var resource = resources[0];\n            if (resource) {\n                var data = void 0;\n                if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {\n                    var id_1 = prevResourceData[prevResource.idField];\n                    data = resource.dataSource.filter(function (e) { return e[resource.groupIDField] === id_1; });\n                }\n                else {\n                    data = resource.dataSource;\n                }\n                for (var i = 0; i < data.length; i++) {\n                    var groupOrder = [];\n                    if (prevOrder && prevOrder.length > 0) {\n                        groupOrder = groupOrder.concat(prevOrder);\n                    }\n                    groupOrder.push(data[i][resource.idField]);\n                    var items = group(resources.slice(1), index + 1, resource, data[i], groupOrder);\n                    // Here validate child item empty top level resource only\n                    if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {\n                        continue;\n                    }\n                    var dateCol = [];\n                    var renderDates = _this.parent.activeView.renderDates;\n                    var resWorkDays = void 0;\n                    if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {\n                        var workDays = data[i][resource.workDaysField];\n                        var resStartHour = data[i][resource.startHourField];\n                        var resEndHour = data[i][resource.endHourField];\n                        if (workDays && workDays.length > 0) {\n                            renderDates = _this.parent.activeView.getRenderDates(workDays);\n                            resWorkDays = workDays;\n                            dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);\n                        }\n                        else {\n                            resWorkDays = _this.parent.activeViewOptions.workDays;\n                            dateCol = innerDates;\n                        }\n                        var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n                        lastColumnDates = lastColumnDates.concat(dateSlots);\n                    }\n                    var resCssClass = data[i][resource.cssClassField];\n                    var slotData = {\n                        type: 'resourceHeader', className: ['e-resource-cells'],\n                        resourceLevelIndex: index, groupOrder: groupOrder,\n                        resource: resource, resourceData: data[i],\n                        colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n                        renderDates: renderDates, workDays: resWorkDays, cssClass: resCssClass,\n                        child: items\n                    };\n                    resTree.push(slotData);\n                }\n                if (!resTreeGroup[index]) {\n                    resTreeGroup[index] = [];\n                }\n                if (resTree.length > 0) {\n                    resTreeGroup[index].push(resTree);\n                }\n                return resTree;\n            }\n            return [];\n        };\n        this.resourceTreeLevel = group(resources, 0);\n        return (isTimeLine) ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n    };\n    ResourceBase.prototype.generateCustomHours = function (renderDates, startHour, endHour, groupOrder) {\n        var dateSlots = extend([], renderDates, null, true);\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var dateSlot = dateSlots_1[_i];\n            if (startHour) {\n                dateSlot.startHour = this.parent.getStartEndTime(startHour);\n            }\n            if (endHour) {\n                dateSlot.endHour = this.parent.getStartEndTime(endHour);\n            }\n            if (groupOrder) {\n                dateSlot.groupOrder = groupOrder;\n            }\n        }\n        return dateSlots;\n    };\n    ResourceBase.prototype.generateHeaderLevels = function (resTreeGroup, lastColumnDates, headerDates) {\n        var headerLevels = [];\n        for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n            var temp = 0;\n            for (var _i = 0, _a = resTreeGroup[i]; _i < _a.length; _i++) {\n                var currentLevelChilds = _a[_i];\n                for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {\n                    var currentLevelChild = currentLevelChilds_1[_b];\n                    if (resTreeGroup[i + 1]) {\n                        var nextLevelChilds = resTreeGroup[i + 1][temp];\n                        var colSpan = 0;\n                        for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {\n                            var nextLevelChild = nextLevelChilds_1[_c];\n                            if (!this.parent.activeViewOptions.group.byGroupID || (this.parent.activeViewOptions.group.byGroupID &&\n                                nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] ===\n                                    currentLevelChild.resourceData[currentLevelChild.resource.idField])) {\n                                colSpan += nextLevelChild.colSpan;\n                            }\n                        }\n                        currentLevelChild.colSpan = colSpan;\n                    }\n                    currentLevelChild.groupIndex = temp;\n                    temp++;\n                    headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n                    headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n                }\n            }\n        }\n        this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n        if (!this.parent.activeViewOptions.group.byDate) {\n            var index = 0;\n            for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {\n                var lastLevelResource = _e[_d];\n                for (var i = 0; i < lastLevelResource.colSpan; i++) {\n                    lastColumnDates[index].groupIndex = lastLevelResource.groupIndex;\n                    index++;\n                }\n            }\n            headerLevels.push(lastColumnDates);\n            return headerLevels;\n        }\n        var dateHeaderLevels = [];\n        var levels = extend([], headerLevels, null, true);\n        var dateColSpan = 0;\n        for (var _f = 0, _g = levels[0]; _f < _g.length; _f++) {\n            var firstRowTd = _g[_f];\n            dateColSpan += firstRowTd.colSpan;\n        }\n        var datesColumn = [];\n        for (var _h = 0, headerDates_1 = headerDates; _h < headerDates_1.length; _h++) {\n            var headerDate = headerDates_1[_h];\n            headerDate.colSpan = dateColSpan;\n            datesColumn.push(headerDate);\n            var resGroup = extend([], levels, null, true);\n            for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {\n                if (k === resGroup.length - 1) {\n                    for (var _j = 0, _k = resGroup[k]; _j < _k.length; _j++) {\n                        var resTd = _k[_j];\n                        resTd.date = headerDate.date;\n                        resTd.workDays = headerDate.workDays;\n                        resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) ||\n                            headerDate.endHour;\n                    }\n                }\n                if (!dateHeaderLevels[k]) {\n                    dateHeaderLevels[k] = [];\n                }\n                dateHeaderLevels[k] = dateHeaderLevels[k].concat(resGroup[k]);\n            }\n        }\n        dateHeaderLevels.unshift(datesColumn);\n        return dateHeaderLevels;\n    };\n    ResourceBase.prototype.setResourceValues = function (eventObj, groupIndex) {\n        var _this = this;\n        var setValues = function (index, field, value) {\n            if (_this.resourceCollection[index].allowMultiple && _this.parent.activeViewOptions.group.allowGroupEdit) {\n                eventObj[field] = [value];\n            }\n            else {\n                eventObj[field] = value;\n            }\n        };\n        if (groupIndex === void 0) {\n            groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                this.parent.activeCellsData.groupIndex;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n            var groupOrder = this.lastResourceLevel[groupIndex].groupOrder;\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                setValues(index, this.resourceCollection[index].field, groupOrder[index]);\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                var data = this.resourceCollection[index].dataSource[0];\n                if (data) {\n                    setValues(index, this.resourceCollection[index].field, data[this.resourceCollection[index].idField]);\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.getResourceColor = function (eventObj, groupOrder) {\n        var colorFieldIndex = (!isNullOrUndefined(groupOrder) &&\n            this.colorIndex > groupOrder.length - 1) ? groupOrder.length - 1 : this.colorIndex;\n        var resource = this.resourceCollection[colorFieldIndex];\n        if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[colorFieldIndex];\n        var data = this.filterData(resource.dataSource, resource.idField, id);\n        if (data.length > 0) {\n            return data[0][resource.colorField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getCssClass = function (eventObj) {\n        var resource = this.resourceCollection.slice(-1)[0];\n        if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n        if (data.length > 0) {\n            return data[0][resource.cssClassField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getResourceRenderDates = function () {\n        var resourceDates = [].concat.apply([], this.lastResourceLevel.map(function (e) { return e.renderDates; }));\n        var removeDuplicateDates = function (dateColl) { return dateColl.filter(function (date, index, dates) {\n            return dates.map(function (dateObj) { return dateObj.getTime(); }).indexOf(date.getTime()) === index;\n        }); };\n        var renderDates = removeDuplicateDates(resourceDates);\n        renderDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        return renderDates;\n    };\n    ResourceBase.prototype.filterData = function (dataSource, field, value) {\n        return dataSource.filter(function (data) { return data[field] === value; });\n    };\n    ResourceBase.prototype.getResourceData = function (eventObj, index, groupEditIndex) {\n        if (this.parent.activeViewOptions.group.allowGroupEdit) {\n            var resourceObj = {};\n            for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {\n                var groupIndex = groupEditIndex_1[_i];\n                var resourceLevel = this.lastResourceLevel[groupIndex].groupOrder;\n                for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {\n                    var fieldName = this.resourceCollection[level].field;\n                    if (isNullOrUndefined(resourceObj[fieldName])) {\n                        resourceObj[fieldName] = [];\n                    }\n                    resourceObj[fieldName].push(resourceLevel[level]);\n                }\n            }\n            eventObj = extend(eventObj, resourceObj);\n        }\n        else {\n            for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {\n                eventObj[this.resourceCollection[level].field] = this.lastResourceLevel[index].groupOrder[level];\n            }\n        }\n    };\n    ResourceBase.prototype.addResource = function (resources, name, index) {\n        var resourceCollection = (resources instanceof Array) ? resources : [resources];\n        var _loop_3 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (addObj, i) {\n                    return new DataManager({ json: resource.dataSource }).insert(addObj, null, null, index + i);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_1 = _loop_3(resource);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.removeResource = function (resourceId, name) {\n        var resourceCollection = (resourceId instanceof Array) ? resourceId : [resourceId];\n        var _loop_4 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (removeObj) {\n                    return new DataManager({ json: resource.dataSource }).remove(resource.idField, removeObj);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_2 = _loop_4(resource);\n            if (state_2 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.getIndexFromResourceId = function (id, name, resourceData, event, parentField) {\n        var resource = resourceData.dataSource.filter(function (e) {\n            if (event && e[resourceData.idField] === id) {\n                if (e[resourceData.groupIDField] === event[parentField]) {\n                    return e[resourceData.idField] === id;\n                }\n                return null;\n            }\n            else {\n                return e[resourceData.idField] === id;\n            }\n        })[0];\n        return (this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resource));\n    };\n    ResourceBase.prototype.resourceExpand = function (id, name, hide) {\n        var resource = this.parent.resourceCollection.filter(function (e) {\n            if (e.name === name) {\n                return e;\n            }\n            return null;\n        })[0];\n        var index = 0;\n        var resourceData = resource.dataSource.filter(function (e) {\n            return e[resource.idField] === id;\n        })[0];\n        if (!this.parent.activeViewOptions.group.byGroupID) {\n            index = this.getIndexFromResourceId(id, name, resource);\n        }\n        else {\n            index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n        }\n        var target = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + (\"[data-group-index=\\\"\" + index + \"\\\"]\") +\n            ' ' + '.' + cls.RESOURCE_TREE_ICON_CLASS);\n        if (target) {\n            if (target.classList.contains(cls.RESOURCE_EXPAND_CLASS) && !hide) {\n                target.click();\n            }\n            else if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) && hide) {\n                target.click();\n            }\n        }\n    };\n    ResourceBase.prototype.resourceScroll = function (id, name) {\n        if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n            return;\n        }\n        var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n        var levelIndex = this.parent.resourceCollection.length - 1;\n        var resource = this.parent.resourceCollection.filter(function (e, index) {\n            if (e.name === levelName) {\n                levelIndex = index;\n                return e;\n            }\n            return null;\n        })[0];\n        var scrollElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var index = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                var resourceData = resource.dataSource.filter(function (e) {\n                    return e[resource.idField] === id;\n                })[0];\n                index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n            }\n            if (this.parent.virtualScrollModule) {\n                var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n                var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n                if (this.parent.rowAutoHeight) {\n                    scrollElement.scrollTop = 0;\n                    this.parent.virtualScrollModule.virtualScrolling();\n                }\n                scrollElement.scrollTop = (index * averageRowHeight)\n                    - (((this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight));\n                this.parent.virtualScrollModule.virtualScrolling();\n                if (this.parent.rowAutoHeight) {\n                    var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                    if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n                        scrollElement.scrollTop =\n                            (scrollElement.scrollTop < td.offsetTop) ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n                    }\n                }\n                else {\n                    scrollElement.scrollTop = (index * averageRowHeight);\n                }\n            }\n            else {\n                var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n                    scrollElement.scrollTop = td.offsetTop;\n                }\n            }\n        }\n        else {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n                    index = this.lastResourceLevel.map(function (e) {\n                        return e.resourceData[resource.idField];\n                    }).indexOf(id);\n                }\n                else {\n                    index = resource.dataSource.map(function (e) { return e[resource.idField]; }).indexOf(id);\n                }\n            }\n            var offsetTarget = this.parent.element.querySelector(\".\" + cls.HEADER_ROW_CLASS + \":nth-child(\" + (levelIndex + 1) + \")\");\n            var offset = [].slice.call(offsetTarget.children).map(function (node) { return node.offsetLeft; });\n            scrollElement.scrollLeft = offset[index];\n        }\n    };\n    ResourceBase.prototype.destroy = function () {\n        this.parent.off(events.documentClick, this.documentClick);\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP));\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP_OVERLAY));\n        }\n        var resToolBarEle = this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER);\n        if (resToolBarEle) {\n            remove(resToolBarEle);\n        }\n    };\n    return ResourceBase;\n}());\nexport { ResourceBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, Event, Animation, Collection } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, Internationalization, getDefaultDateObject, cldrData, L10n } from '@syncfusion/ej2-base';\nimport { getValue, compile, extend, isNullOrUndefined, NotifyPropertyChanges, Complex } from '@syncfusion/ej2-base';\nimport { getElement, removeClass, addClass, classList, remove } from '@syncfusion/ej2-base';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { HeaderRenderer } from '../renderer/header-renderer';\nimport { Scroll } from '../actions/scroll';\nimport { ScheduleTouch } from '../actions/touch';\nimport { KeyboardInteraction } from '../actions/keyboard';\nimport { Data } from '../actions/data';\nimport { EventBase } from '../event-renderer/event-base';\nimport { InlineEdit } from '../event-renderer/inline-edit';\nimport { QuickPopups } from '../popups/quick-popups';\nimport { EventTooltip } from '../popups/event-tooltip';\nimport { EventWindow } from '../popups/event-window';\nimport { Render } from '../renderer/renderer';\nimport { WorkHours } from '../models/work-hours';\nimport { TimeScale } from '../models/time-scale';\nimport { QuickInfoTemplates } from '../models/quick-info-templates';\nimport { HeaderRows } from '../models/header-rows';\nimport { Crud } from '../actions/crud';\nimport { WorkCellInteraction } from '../actions/work-cells';\nimport { EventSettings } from '../models/event-settings';\nimport { Group } from '../models/group';\nimport { Resources } from '../models/resources';\nimport { Gregorian, Islamic } from '../../common/calendar-util';\nimport { ResourceBase } from '../base/resource';\nimport { Timezone } from '../timezone/timezone';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Represents the Schedule component that displays a list of events scheduled against specific date and timings,\n * thus helping us to plan and manage it properly.\n * ```html\n * <div id=\"schedule\"></div>\n * ```\n * ```typescript\n * <script>\n *   var scheduleObj = new Schedule();\n *   scheduleObj.appendTo(\"#schedule\");\n * </script>\n * ```\n */\nvar Schedule = /** @class */ (function (_super) {\n    __extends(Schedule, _super);\n    /**\n     * Constructor for creating the Schedule widget\n     * @hidden\n     */\n    function Schedule(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Core method that initializes the control rendering.\n     * @private\n     */\n    Schedule.prototype.render = function () {\n        var addClasses = [];\n        var removeClasses = [];\n        addClasses.push(cls.ROOT);\n        if (this.enableRtl) {\n            addClasses.push(cls.RTL);\n        }\n        else {\n            removeClasses.push(cls.RTL);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(cls.DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(cls.DEVICE_CLASS);\n        }\n        if (this.cssClass) {\n            var cssClass = this.cssClass.split(' ');\n            for (var _i = 0, cssClass_1 = cssClass; _i < cssClass_1.length; _i++) {\n                var cls_1 = cssClass_1[_i];\n                addClasses.push(cls_1);\n            }\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.validateDate();\n        this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n        this.editorTemplateFn = this.templateParser(this.editorTemplate);\n        this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n        this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n        this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n        createSpinner({ target: this.element });\n        this.scrollModule = new Scroll(this);\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        this.renderModule = new Render(this);\n        this.eventBase = new EventBase(this);\n        this.workCellAction = new WorkCellInteraction(this);\n        if (this.allowKeyboardInteraction) {\n            this.keyboardInteractionModule = new KeyboardInteraction(this);\n        }\n        this.inlineModule = new InlineEdit(this);\n        this.initializeDataModule();\n        this.renderTableContainer();\n        this.activeViewOptions = this.getActiveViewOptions();\n        this.initializeResources();\n        this.wireEvents();\n    };\n    Schedule.prototype.renderTableContainer = function () {\n        if (!this.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS)) {\n            this.element.appendChild(this.createElement('div', { className: cls.TABLE_CONTAINER_CLASS }));\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.isServerRenderer = function (view) {\n        if (view === void 0) { view = this.currentView; }\n        // tslint:disable-next-line:max-line-length\n        var views = ['Day', 'Week', 'WorkWeek', 'Month', 'MonthAgenda', 'TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'];\n        return false;\n    };\n    /** @hidden */\n    Schedule.prototype.renderCompleted = function () {\n        this.renderComplete();\n    };\n    /** @hidden */\n    Schedule.prototype.layoutReady = function (resourceCollection, isFirstRender, isSetModel) {\n        if (resourceCollection && resourceCollection.length > 0 && (isFirstRender || isSetModel)) {\n            this.resourceCollection = resourceCollection;\n            if (this.resourceBase) {\n                this.resourceBase.refreshLayout(isSetModel);\n            }\n        }\n        if (!this.isServerRenderer()) {\n            return;\n        }\n        if (this.activeView) {\n            this.activeView.serverRenderLayout();\n            if (this.renderModule) {\n                this.renderModule.refreshDataManager();\n            }\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.refreshLayout = function (args) {\n        this.uiStateValues.groupIndex = 0;\n        this.resourceCollection = args;\n        this.renderElements(true);\n        this.layoutReady();\n    };\n    /**\n     * To render the react templates\n     *  @hidden\n     */\n    Schedule.prototype.renderTemplates = function () {\n        // tslint:disable-next-line:no-any\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * To reset the react templates\n     *  @hidden\n     */\n    Schedule.prototype.resetTemplates = function (templates) {\n        // tslint:disable-next-line:no-any\n        if (this.isAngular || this.isReact) {\n            this.clearTemplate(templates);\n        }\n    };\n    Schedule.prototype.initializeResources = function (isSetModel) {\n        if (isSetModel === void 0) { isSetModel = false; }\n        if (this.resources.length > 0) {\n            this.resourceBase = new ResourceBase(this);\n            this.resourceBase.bindResourcesData(isSetModel);\n        }\n        else {\n            this.resourceBase = null;\n            this.resourceCollection = [];\n            this.renderElements(isSetModel);\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.renderElements = function (isLayoutOnly) {\n        if (isLayoutOnly) {\n            this.initializeView(this.currentView);\n            this.eventWindow.refresh();\n            return;\n        }\n        this.destroyHeaderModule();\n        if (this.showHeaderBar) {\n            this.headerModule = new HeaderRenderer(this);\n        }\n        this.renderTableContainer();\n        if (Browser.isDevice || Browser.isTouch) {\n            this.scheduleTouchModule = new ScheduleTouch(this);\n        }\n        this.initializeView(this.currentView);\n        this.destroyPopups();\n        this.initializePopups();\n    };\n    Schedule.prototype.validateDate = function (selectedDate) {\n        if (selectedDate === void 0) { selectedDate = this.selectedDate; }\n        // persist the selected date value\n        var date = selectedDate instanceof Date ? new Date(selectedDate.getTime()) : new Date(selectedDate);\n        var minDate = this.minDate instanceof Date ? new Date(this.minDate.getTime()) : new Date(this.minDate);\n        var maxDate = this.maxDate instanceof Date ? new Date(this.maxDate.getTime()) : new Date(this.maxDate);\n        if (minDate <= maxDate) {\n            if (date < minDate) {\n                date = minDate;\n            }\n            if (date > maxDate) {\n                date = maxDate;\n            }\n            this.setScheduleProperties({ selectedDate: new Date('' + date), minDate: new Date('' + minDate), maxDate: new Date('' + maxDate) });\n            if (this.eventWindow) {\n                this.eventWindow.updateMinMaxDateToEditor();\n            }\n        }\n        else {\n            throw Error('minDate should be equal or less than maxDate');\n        }\n    };\n    Schedule.prototype.getViewIndex = function (viewName) {\n        for (var item = 0; item < this.viewCollections.length; item++) {\n            var checkIndex = this.viewCollections[item].option;\n            if (checkIndex === viewName) {\n                return item;\n            }\n        }\n        return -1;\n    };\n    Schedule.prototype.setViewOptions = function (isModuleLoad) {\n        if (isModuleLoad === void 0) { isModuleLoad = false; }\n        this.viewOptions = {};\n        this.viewCollections = [];\n        var viewName;\n        var selectedView;\n        var prevIndex = this.viewIndex;\n        var count = 0;\n        this.viewIndex = -1;\n        for (var _i = 0, _a = this.views; _i < _a.length; _i++) {\n            var view = _a[_i];\n            var isOptions = (typeof view === 'string') ? false : true;\n            if (typeof view === 'string') {\n                viewName = view;\n                if (this.currentView === viewName) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            else {\n                viewName = view.option;\n                if (view.isSelected) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            var obj = extend({ option: viewName }, isOptions ? view : {});\n            var fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n            obj.cellHeaderTemplateName = obj.cellHeaderTemplate ? obj.option : '';\n            obj.dateHeaderTemplateName = obj.dateHeaderTemplate ? obj.option : '';\n            obj.cellTemplateName = obj.cellTemplate ? obj.option : '';\n            obj.resourceHeaderTemplateName = obj.resourceHeaderTemplate ? obj.option : '';\n            obj.eventTemplateName = obj.eventTemplate ? obj.option : '';\n            if (!isNullOrUndefined(obj.firstDayOfWeek) && obj.firstDayOfWeek === 0) {\n                delete obj.firstDayOfWeek;\n            }\n            if (!isNullOrUndefined(obj.interval) && obj.interval === 1) {\n                delete obj.interval;\n            }\n            this.viewCollections.push(obj);\n            if (isNullOrUndefined(this.viewOptions[fieldViewName])) {\n                this.viewOptions[fieldViewName] = [obj];\n            }\n            else {\n                this.viewOptions[fieldViewName].push(obj);\n            }\n            count++;\n        }\n        if (!isModuleLoad && selectedView) {\n            this.setScheduleProperties({ currentView: selectedView });\n        }\n        if (this.viewIndex === -1) {\n            var currentIndex = this.getViewIndex(this.currentView);\n            this.viewIndex = ((typeof this.views[0] !== 'string') && (!isNullOrUndefined(prevIndex) && prevIndex !== -1)) ? prevIndex :\n                (currentIndex === -1) ? 0 : currentIndex;\n        }\n    };\n    Schedule.prototype.getActiveViewOptions = function () {\n        var timeScale = {\n            enable: this.timeScale.enable,\n            interval: this.timeScale.interval,\n            slotCount: this.timeScale.slotCount,\n            majorSlotTemplate: this.timeScale.majorSlotTemplate,\n            minorSlotTemplate: this.timeScale.minorSlotTemplate\n        };\n        var group = {\n            byDate: this.group.byDate,\n            byGroupID: this.group.byGroupID,\n            allowGroupEdit: this.group.allowGroupEdit,\n            resources: this.group.resources,\n            headerTooltipTemplate: this.group.headerTooltipTemplate,\n            enableCompactView: this.group.enableCompactView\n        };\n        var workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;\n        var scheduleOptions = {\n            dateFormat: this.dateFormat,\n            endHour: this.endHour,\n            isSelected: false,\n            option: null,\n            readonly: this.readonly,\n            startHour: this.startHour,\n            allowVirtualScrolling: false,\n            cellHeaderTemplate: this.cellHeaderTemplate,\n            cellTemplate: this.cellTemplate,\n            eventTemplate: this.eventSettings.template,\n            dateHeaderTemplate: this.dateHeaderTemplate,\n            resourceHeaderTemplate: this.resourceHeaderTemplate,\n            firstDayOfWeek: this.firstDayOfWeek,\n            workDays: workDays,\n            showWeekend: this.showWeekend,\n            showWeekNumber: this.showWeekNumber,\n            displayName: null,\n            interval: 1,\n            timeScale: timeScale,\n            group: group,\n            headerRows: this.headerRows,\n            orientation: 'Horizontal'\n        };\n        var viewOptions = this.viewCollections[this.viewIndex];\n        var viewsData = extend(scheduleOptions, viewOptions, undefined, true);\n        if (this.firstDayOfWeek !== 0 && viewOptions.firstDayOfWeek && this.firstDayOfWeek !== viewOptions.firstDayOfWeek) {\n            viewsData.firstDayOfWeek = this.firstDayOfWeek;\n        }\n        return viewsData;\n    };\n    Schedule.prototype.initializeDataModule = function () {\n        this.eventFields = {\n            id: this.eventSettings.fields.id,\n            isBlock: this.eventSettings.fields.isBlock,\n            subject: this.eventSettings.fields.subject.name,\n            startTime: this.eventSettings.fields.startTime.name,\n            endTime: this.eventSettings.fields.endTime.name,\n            startTimezone: this.eventSettings.fields.startTimezone.name,\n            endTimezone: this.eventSettings.fields.endTimezone.name,\n            location: this.eventSettings.fields.location.name,\n            description: this.eventSettings.fields.description.name,\n            isAllDay: this.eventSettings.fields.isAllDay.name,\n            recurrenceID: this.eventSettings.fields.recurrenceID.name,\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.name,\n            recurrenceException: this.eventSettings.fields.recurrenceException.name,\n            isReadonly: this.eventSettings.fields.isReadonly,\n            followingID: this.eventSettings.fields.followingID,\n        };\n        this.setEditorTitles();\n        this.dataModule = new Data(this.eventSettings.dataSource, this.eventSettings.query);\n        this.crudModule = new Crud(this);\n    };\n    Schedule.prototype.setEditorTitles = function () {\n        this.editorTitles = {\n            subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant('title'),\n            startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant('start'),\n            endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant('end'),\n            isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant('allDay'),\n            startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant('startTimezone'),\n            endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant('endTimezone'),\n            location: this.eventSettings.fields.location.title || this.localeObj.getConstant('location'),\n            description: this.eventSettings.fields.description.title || this.localeObj.getConstant('description'),\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant('repeat')\n        };\n    };\n    Schedule.prototype.initializeView = function (viewName) {\n        this.showSpinner();\n        this.activeViewOptions = this.getActiveViewOptions();\n        if (this.resourceBase) {\n            this.resourceBase.setResourceCollection();\n        }\n        this.initializeTemplates();\n        this.renderModule.render(viewName);\n    };\n    Schedule.prototype.initializeTemplates = function () {\n        this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n        this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n        this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n        this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);\n        this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);\n        this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n        this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n        this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n    };\n    Schedule.prototype.initializePopups = function () {\n        this.eventWindow = new EventWindow(this);\n        this.quickPopup = new QuickPopups(this);\n    };\n    /** @hidden */\n    Schedule.prototype.getDayNames = function (type) {\n        var culShortNames = [];\n        var cldrObj;\n        var nameSpace = '';\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            nameSpace = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpace + type, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            nameSpace =\n                'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.format.' + type;\n            cldrObj = (getValue(nameSpace, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            culShortNames.push(getValue(obj, cldrObj));\n        }\n        return culShortNames;\n    };\n    Schedule.prototype.setCldrTimeFormat = function () {\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            this.timeFormat = (getValue('timeFormats.short', getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            this.timeFormat = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.timeFormats.short', cldrData));\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.getCalendarMode = function () {\n        return this.calendarMode.toLowerCase();\n    };\n    /** @hidden */\n    Schedule.prototype.getTimeString = function (date) {\n        var time = this.globalize.formatDate(date, { format: this.timeFormat, type: 'time', calendar: this.getCalendarMode() });\n        return time.toLocaleUpperCase();\n    };\n    /** @hidden */\n    Schedule.prototype.getDateTime = function (date) {\n        return date instanceof Date ? new Date(date.getTime()) : new Date(date);\n    };\n    Schedule.prototype.setCalendarMode = function () {\n        if (this.calendarMode === 'Islamic') {\n            this.calendarUtil = new Islamic();\n        }\n        else {\n            this.calendarUtil = new Gregorian();\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.setScheduleProperties = function (properties) {\n        this.allowServerDataBinding = false;\n        this.setProperties(properties, true);\n        this.allowServerDataBinding = true;\n    };\n    /** @hidden */\n    Schedule.prototype.changeView = function (view, event, muteOnChange, index) {\n        var _this = this;\n        if (isNullOrUndefined(index)) {\n            index = this.getViewIndex(view);\n        }\n        if (!muteOnChange && index === this.viewIndex && this.currentView === view || index < 0) {\n            return;\n        }\n        this.viewIndex = index;\n        var args = { requestType: 'viewNavigate', cancel: false, event: event };\n        this.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var navArgs = {\n                    action: 'view', cancel: false, previousView: _this.currentView, currentView: view, viewIndex: _this.viewIndex\n                };\n                _this.trigger(events.navigating, navArgs, function (navigationArgs) {\n                    if (!navigationArgs.cancel) {\n                        _this.viewIndex = navigationArgs.viewIndex;\n                        _this.setScheduleProperties({ currentView: view });\n                        if (_this.headerModule) {\n                            _this.headerModule.updateActiveView();\n                            _this.headerModule.setCalendarDate(_this.selectedDate);\n                            _this.headerModule.setCalendarView();\n                        }\n                        _this.initializeView(_this.currentView);\n                        _this.animateLayout();\n                        args = { requestType: 'viewNavigate', cancel: false, event: event };\n                        _this.trigger(events.actionComplete, args);\n                    }\n                });\n            }\n        });\n    };\n    /** @hidden */\n    Schedule.prototype.changeDate = function (selectedDate, event) {\n        var _this = this;\n        var args = { requestType: 'dateNavigate', cancel: false, event: event };\n        this.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var navArgs = {\n                    action: 'date', cancel: false,\n                    previousDate: _this.selectedDate, currentDate: selectedDate\n                };\n                _this.trigger(events.navigating, navArgs, function (navigationArgs) {\n                    if (!navigationArgs.cancel) {\n                        _this.uiStateValues.isInitial = _this.activeView.isTimelineView() ? true : _this.uiStateValues.isInitial;\n                        _this.validateDate(navigationArgs.currentDate);\n                        if (_this.headerModule) {\n                            _this.headerModule.setCalendarDate(navigationArgs.currentDate);\n                        }\n                        _this.initializeView(_this.currentView);\n                        _this.animateLayout();\n                        args = { requestType: 'dateNavigate', cancel: false, event: event };\n                        _this.trigger(events.actionComplete, args);\n                    }\n                });\n            }\n        });\n    };\n    /** @hidden */\n    Schedule.prototype.resetScrollTop = function () {\n        var resWrap = this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (!isNullOrUndefined(conWrap)) {\n            conWrap.scrollTop = 0;\n        }\n        if (!isNullOrUndefined(resWrap)) {\n            resWrap.scrollTop = 0;\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.isMinMaxDate = function (date) {\n        if (date === void 0) { date = this.selectedDate; }\n        return ((date.getTime() >= this.minDate.getTime()) && (date.getTime() <= this.maxDate.getTime()));\n    };\n    /** @hidden */\n    Schedule.prototype.isSelectedDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date('' + this.selectedDate).setHours(0, 0, 0, 0);\n    };\n    /** @hidden */\n    Schedule.prototype.getCurrentTime = function (date) {\n        if (date === void 0) { date = new Date(); }\n        if (this.timezone) {\n            return this.tzModule.convert(date, this.tzModule.getLocalTimezoneName(), this.timezone);\n        }\n        return date;\n    };\n    /** @hidden */\n    Schedule.prototype.getNavigateView = function () {\n        if (this.activeView.isTimelineView()) {\n            return this.currentView === 'TimelineMonth' || this.currentView === 'TimelineYear' ? 'TimelineDay' : 'Agenda';\n        }\n        return 'Day';\n    };\n    Schedule.prototype.animateLayout = function () {\n        if (!this.activeView.element) {\n            return;\n        }\n        new Animation({ duration: 600, name: 'FadeIn', timingFunction: 'easeIn' }).animate(this.activeView.element);\n    };\n    /**\n     * To provide the array of modules needed for control rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Schedule.prototype.requiredModules = function () {\n        var modules = [];\n        this.setViewOptions(true);\n        for (var _i = 0, _a = Object.keys(this.viewOptions); _i < _a.length; _i++) {\n            var view = _a[_i];\n            view = (view === 'timelineDay' || view === 'timelineWeek' || view === 'timelineWorkWeek') ? 'timelineViews' : view;\n            modules.push({ member: view, args: [this] });\n        }\n        if (this.allowDragAndDrop) {\n            modules.push({ member: 'dragAndDrop', args: [this] });\n        }\n        if (this.allowResizing) {\n            modules.push({ member: 'resize', args: [this] });\n        }\n        modules.push({ member: 'excelExport', args: [this] });\n        modules.push({ member: 'iCalendarExport', args: [this] });\n        modules.push({ member: 'iCalendarImport', args: [this] });\n        modules.push({ member: 'print', args: [this] });\n        return modules;\n    };\n    /**\n     * Initializes the values of private members.\n     * @private\n     */\n    Schedule.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice || util.isIPadDevice();\n        this.globalize = new Internationalization(this.locale);\n        this.tzModule = new Timezone();\n        if (this && isNullOrUndefined(this.uiStateValues) || !(this.enablePersistence)) {\n            this.uiStateValues = {\n                expand: false, isInitial: true, left: 0, top: 0, isGroupAdaptive: false,\n                isIgnoreOccurrence: false, groupIndex: 0, action: false, isBlock: false\n            };\n        }\n        this.activeCellsData = { startTime: this.getCurrentTime(), endTime: this.getCurrentTime(), isAllDay: false };\n        this.activeEventData = { event: undefined, element: undefined };\n        this.getDefaultLocale();\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.setCldrTimeFormat();\n        this.setCalendarMode();\n        this.eventsData = [];\n        this.eventsProcessed = [];\n        this.blockData = [];\n        this.blockProcessed = [];\n        this.resourceCollection = [];\n        this.currentAction = null;\n        this.selectedElements = [];\n        this.setViewOptions();\n    };\n    Schedule.prototype.getDefaultLocale = function () {\n        this.defaultLocale = {\n            day: 'Day',\n            week: 'Week',\n            workWeek: 'Work Week',\n            month: 'Month',\n            year: 'Year',\n            agenda: 'Agenda',\n            weekAgenda: 'Week Agenda',\n            workWeekAgenda: 'Work Week Agenda',\n            monthAgenda: 'Month Agenda',\n            today: 'Today',\n            noEvents: 'No events',\n            emptyContainer: 'There are no events scheduled on this day.',\n            allDay: 'All day',\n            start: 'Start',\n            end: 'End',\n            more: 'more',\n            close: 'Close',\n            cancel: 'Cancel',\n            noTitle: '(No Title)',\n            delete: 'Delete',\n            deleteEvent: 'Delete Event',\n            deleteMultipleEvent: 'Delete Multiple Events',\n            selectedItems: 'Items selected',\n            deleteSeries: 'Entire Series',\n            edit: 'Edit',\n            editSeries: 'Entire Series',\n            editEvent: 'Edit Event',\n            createEvent: 'Create',\n            subject: 'Subject',\n            addTitle: 'Add title',\n            moreDetails: 'More Details',\n            save: 'Save',\n            editContent: 'How would you like to change the appointment in the series?',\n            deleteContent: 'Are you sure you want to delete this event?',\n            deleteMultipleContent: 'Are you sure you want to delete the selected events?',\n            newEvent: 'New Event',\n            title: 'Title',\n            location: 'Location',\n            description: 'Description',\n            timezone: 'Timezone',\n            startTimezone: 'Start Timezone',\n            endTimezone: 'End Timezone',\n            repeat: 'Repeat',\n            saveButton: 'Save',\n            cancelButton: 'Cancel',\n            deleteButton: 'Delete',\n            recurrence: 'Recurrence',\n            wrongPattern: 'The recurrence pattern is not valid.',\n            seriesChangeAlert: 'Do you want to cancel the changes made to specific ' +\n                'instances of this series and match it to the whole series again?',\n            createError: 'The duration of the event must be shorter than how frequently it occurs. ' +\n                'Shorten the duration, or change the recurrence pattern in the recurrence event editor.',\n            sameDayAlert: 'Two occurrences of the same event cannot occur on the same day.',\n            editRecurrence: 'Edit Recurrence',\n            repeats: 'Repeats',\n            alert: 'Alert',\n            startEndError: 'The selected end date occurs before the start date.',\n            invalidDateError: 'The entered date value is invalid.',\n            blockAlert: 'Events cannot be scheduled within the blocked time range.',\n            ok: 'Ok',\n            yes: 'Yes',\n            no: 'No',\n            occurrence: 'Occurrence',\n            series: 'Series',\n            previous: 'Previous',\n            next: 'Next',\n            timelineDay: 'Timeline Day',\n            timelineWeek: 'Timeline Week',\n            timelineWorkWeek: 'Timeline Work Week',\n            timelineMonth: 'Timeline Month',\n            timelineYear: 'Timeline Year',\n            editFollowingEvent: 'Following Events',\n            deleteTitle: 'Delete Event',\n            editTitle: 'Edit Event',\n            beginFrom: 'Begin From',\n            endAt: 'Ends At',\n            expandAllDaySection: 'Expand-all-day-section',\n            collapseAllDaySection: 'Collapse-all-day-section'\n        };\n    };\n    /**\n     * Binding events to the Schedule element.\n     * @hidden\n     */\n    Schedule.prototype.wireEvents = function () {\n        EventHandler.add(window, 'resize', this.onScheduleResize, this);\n        EventHandler.add(window, 'orientationchange', this.onScheduleResize, this);\n        EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);\n    };\n    /** @hidden */\n    Schedule.prototype.removeSelectedClass = function () {\n        var selectedCells = this.getSelectedElements();\n        for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n            var cell = selectedCells_1[_i];\n            cell.setAttribute('aria-selected', 'false');\n            cell.removeAttribute('tabindex');\n        }\n        removeClass(selectedCells, cls.SELECTED_CELL_CLASS);\n    };\n    /** @hidden */\n    Schedule.prototype.addSelectedClass = function (cells, focusCell) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            cell.setAttribute('aria-selected', 'true');\n        }\n        addClass(cells, cls.SELECTED_CELL_CLASS);\n        if (focusCell) {\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.selectCell = function (element) {\n        this.removeSelectedClass();\n        this.addSelectedClass([element], element);\n    };\n    /** @hidden */\n    Schedule.prototype.getAllDayRow = function () {\n        return this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n    };\n    /** @hidden */\n    Schedule.prototype.getContentTable = function () {\n        return this.activeView.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    };\n    /** @hidden */\n    Schedule.prototype.getTableRows = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr:not(.' + cls.HIDDEN_CLASS + ')'));\n    };\n    /** @hidden */\n    Schedule.prototype.getWorkCellElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    };\n    /** @hidden */\n    Schedule.prototype.getIndexOfDate = function (collection, date) {\n        return collection.map(Number).indexOf(+date);\n    };\n    /** @hidden */\n    Schedule.prototype.isAllDayCell = function (td) {\n        if (['Month', 'TimelineMonth', 'TimelineYear', 'MonthAgenda'].indexOf(this.currentView) > -1 ||\n            td.classList.contains(cls.ALLDAY_CELLS_CLASS) ||\n            td.classList.contains(cls.HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {\n            return true;\n        }\n        if (this.activeView.isTimelineView() && this.activeViewOptions.headerRows.length > 0 &&\n            this.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return true;\n        }\n        return false;\n    };\n    /** @hidden */\n    Schedule.prototype.getDateFromElement = function (td) {\n        var dateString = td.getAttribute('data-date');\n        if (!isNullOrUndefined(dateString)) {\n            var dateInMS = parseInt(dateString, 10);\n            var date = new Date(dateInMS);\n            if (this.isServerRenderer()) {\n                var localDate = new Date(+date + (date.getTimezoneOffset() * 60000));\n                return new Date(localDate.getTime() + (localDate.getTimezoneOffset() - date.getTimezoneOffset()) * 60000);\n            }\n            return date;\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Schedule.prototype.getMsFromDate = function (date) {\n        if (this.isServerRenderer()) {\n            return new Date(+date - (date.getTimezoneOffset() * 60000)).getTime();\n        }\n        return date.getTime();\n    };\n    /** @hidden */\n    Schedule.prototype.getTargetElement = function (selector, left, top) {\n        var element = document.elementFromPoint(left, top);\n        var targetElement;\n        if (element) {\n            targetElement = element.closest(selector);\n        }\n        return (targetElement) ? [targetElement] : null;\n    };\n    /** @hidden */\n    Schedule.prototype.getCellHeaderTemplate = function () {\n        return this.cellHeaderTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getCellTemplate = function () {\n        return this.cellTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getDateHeaderTemplate = function () {\n        return this.dateHeaderTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getMajorSlotTemplate = function () {\n        return this.majorSlotTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getMinorSlotTemplate = function () {\n        return this.minorSlotTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getAppointmentTemplate = function () {\n        return this.appointmentTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getEventTooltipTemplate = function () {\n        return this.eventTooltipTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getHeaderTooltipTemplate = function () {\n        return this.headerTooltipTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getEditorTemplate = function () {\n        return this.editorTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getQuickInfoTemplatesHeader = function () {\n        return this.quickInfoTemplatesHeaderFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getQuickInfoTemplatesContent = function () {\n        return this.quickInfoTemplatesContentFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getQuickInfoTemplatesFooter = function () {\n        return this.quickInfoTemplatesFooterFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getResourceHeaderTemplate = function () {\n        return this.resourceHeaderTemplateFn;\n    };\n    /** @hidden */\n    Schedule.prototype.getCssProperties = function () {\n        var cssProps = {\n            border: this.enableRtl ? 'borderLeftWidth' : 'borderRightWidth',\n            padding: this.enableRtl ? 'paddingLeft' : 'paddingRight',\n            rtlBorder: this.enableRtl ? 'borderRightWidth' : 'borderLeftWidth',\n            rtlPadding: this.enableRtl ? 'paddingRight' : 'paddingLeft'\n        };\n        return cssProps;\n    };\n    /** @hidden */\n    Schedule.prototype.removeNewEventElement = function () {\n        var eventClone = this.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n        if (!isNullOrUndefined(eventClone)) {\n            remove(eventClone);\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.getStartEndTime = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = util.resetTime(this.getCurrentTime());\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return null;\n    };\n    Schedule.prototype.onDocumentClick = function (args) {\n        this.notify(events.documentClick, { event: args });\n    };\n    Schedule.prototype.onScheduleResize = function () {\n        if (isNullOrUndefined(this.activeView)) {\n            return;\n        }\n        if (this.quickPopup) {\n            this.quickPopup.onClosePopup();\n        }\n        if (this.currentView === 'Month' || ((this.currentView !== 'Agenda' && this.currentView !== 'MonthAgenda')\n            && !this.activeViewOptions.timeScale.enable) || this.activeView.isTimelineView()) {\n            this.activeView.resetColWidth();\n            this.notify(events.scrollUiUpdate, { cssProperties: this.getCssProperties(), isPreventScrollUpdate: true });\n            this.notify(events.dataReady, {});\n        }\n    };\n    /** @hidden */\n    Schedule.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Schedule.prototype.getAnnocementString = function (event, subject) {\n        var resourceName;\n        if (this.quickPopup && this.activeViewOptions.group.resources.length > 0) {\n            var constantText = '\"s event - ';\n            resourceName = this.quickPopup.getResourceText({ event: event }, 'event') + constantText;\n        }\n        var recordSubject = (subject || (event[this.eventFields.subject] || this.eventSettings.fields.subject.default));\n        var skeleton = 'full';\n        var startDateText = this.globalize.formatDate(event[this.eventFields.startTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        var endDateText = this.globalize.formatDate(event[this.eventFields.endTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        var annocementString = recordSubject + ' ' + this.localeObj.getConstant('beginFrom') + ' '\n            + startDateText + ' ' + this.localeObj.getConstant('endAt') + ' ' + endDateText;\n        if (resourceName) {\n            annocementString = resourceName + ' ' + annocementString;\n        }\n        return annocementString;\n    };\n    /** @hidden */\n    Schedule.prototype.boundaryValidation = function (pageY, pageX) {\n        var autoScrollDistance = 30;\n        var scrollEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            scrollEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            scrollEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            scrollEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            scrollEdges.right = true;\n        }\n        return scrollEdges;\n    };\n    /**\n     * Unbinding events from the element on widget destroy.\n     * @hidden\n     */\n    Schedule.prototype.unwireEvents = function () {\n        EventHandler.remove(window, 'resize', this.onScheduleResize);\n        EventHandler.remove(window, 'orientationchange', this.onScheduleResize);\n        EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);\n    };\n    /**\n     * Core method to return the component name.\n     * @private\n     */\n    Schedule.prototype.getModuleName = function () {\n        return 'schedule';\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     * @private\n     */\n    Schedule.prototype.getPersistData = function () {\n        return this.addOnPersist(['currentView', 'selectedDate', 'scrollTop', 'scrollLeft']);\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     * @private\n     */\n    Schedule.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var state = { isRefresh: false, isResource: false, isDate: false, isView: false, isLayout: false, isDataManager: false };\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'views':\n                    this.setViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateItems();\n                    }\n                    state.isView = true;\n                    break;\n                case 'currentView':\n                    state.isView = true;\n                    break;\n                case 'minDate':\n                case 'maxDate':\n                case 'selectedDate':\n                    state.isDate = true;\n                    break;\n                case 'dateFormat':\n                    this.activeViewOptions = this.getActiveViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                    }\n                    break;\n                case 'showHeaderBar':\n                    this.destroyHeaderModule();\n                    if (newProp.showHeaderBar) {\n                        this.headerModule = new HeaderRenderer(this);\n                        this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                    }\n                    this.notify(events.scrollUiUpdate, { cssProperties: this.getCssProperties() });\n                    if (this.activeView.isTimelineView()) {\n                        this.notify(events.dataReady, {});\n                    }\n                    break;\n                case 'showWeekend':\n                case 'workDays':\n                case 'startHour':\n                case 'endHour':\n                case 'workHours':\n                case 'readonly':\n                case 'headerRows':\n                case 'showWeekNumber':\n                case 'rowAutoHeight':\n                    state.isLayout = true;\n                    break;\n                case 'locale':\n                case 'calendarMode':\n                    this.globalize = new Internationalization(this.locale);\n                    this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n                    this.setCldrTimeFormat();\n                    this.setCalendarMode();\n                    state.isRefresh = true;\n                    break;\n                case 'firstDayOfWeek':\n                    this.activeViewOptions.firstDayOfWeek = newProp.firstDayOfWeek;\n                    if (this.eventWindow) {\n                        this.eventWindow.refreshRecurrenceEditor();\n                    }\n                    state.isLayout = true;\n                    break;\n                case 'showTimeIndicator':\n                    if (this.activeViewOptions.timeScale.enable && this.activeView) {\n                        this.activeView.highlightCurrentTime();\n                    }\n                    break;\n                case 'cellHeaderTemplate':\n                    this.activeViewOptions.cellHeaderTemplate = newProp.cellHeaderTemplate;\n                    this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'cellTemplate':\n                    this.activeViewOptions.cellTemplate = newProp.cellTemplate;\n                    this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dateHeaderTemplate':\n                    this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;\n                    this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'resourceHeaderTemplate':\n                    this.activeViewOptions.resourceHeaderTemplate = newProp.resourceHeaderTemplate;\n                    this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'timezone':\n                    this.eventBase.timezonePropertyChange(oldProp.timezone);\n                    this.headerModule.setCalendarTimezone();\n                    break;\n                case 'enableRtl':\n                    this.setRtlClass();\n                    state.isRefresh = true;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, oldProp, state);\n                    break;\n            }\n        }\n        this.propertyChangeAction(state);\n    };\n    Schedule.prototype.propertyChangeAction = function (state) {\n        if (state.isRefresh) {\n            this.refresh();\n        }\n        else if (state.isResource) {\n            this.initializeResources(true);\n        }\n        else if (state.isView) {\n            this.changeView(this.currentView, null, true);\n        }\n        else if (state.isDate) {\n            this.changeDate(this.selectedDate);\n        }\n        else if (state.isLayout) {\n            this.initializeView(this.currentView);\n        }\n        else if (state.isDataManager && this.renderModule) {\n            if (this.dragAndDropModule) {\n                this.dragAndDropModule.actionObj.action = '';\n                removeClass([this.element], cls.EVENT_ACTION_CLASS);\n            }\n            this.renderModule.refreshDataManager();\n        }\n    };\n    Schedule.prototype.extendedPropertyChange = function (prop, newProp, oldProp, state) {\n        switch (prop) {\n            case 'width':\n            case 'height':\n                this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                break;\n            case 'cssClass':\n                if (oldProp.cssClass) {\n                    removeClass([this.element], oldProp.cssClass.split(' '));\n                }\n                if (newProp.cssClass) {\n                    addClass([this.element], newProp.cssClass.split(' '));\n                }\n                break;\n            case 'hideEmptyAgendaDays':\n            case 'agendaDaysCount':\n                this.activeViewOptions = this.getActiveViewOptions();\n                state.isView = true;\n                break;\n            case 'eventSettings':\n                this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);\n                break;\n            case 'allowKeyboardInteraction':\n                if (this.keyboardInteractionModule) {\n                    this.keyboardInteractionModule.destroy();\n                    this.keyboardInteractionModule = null;\n                }\n                if (newProp.allowKeyboardInteraction) {\n                    this.keyboardInteractionModule = new KeyboardInteraction(this);\n                }\n                break;\n            case 'editorTemplate':\n                if (!isNullOrUndefined(this.editorTemplate)) {\n                    this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                }\n                if (this.eventWindow) {\n                    this.eventWindow.setDialogContent();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickInfoTemplates.header) {\n                    this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                }\n                if (this.quickInfoTemplates.content) {\n                    this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                }\n                if (this.quickInfoTemplates.footer) {\n                    this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                }\n                break;\n            case 'group':\n                this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);\n                break;\n            case 'resources':\n                state.isResource = true;\n                break;\n            case 'timeScale':\n                this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;\n                this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'allowDragAndDrop':\n            case 'allowResizing':\n                this.notify(events.dataReady, {\n                    processedData: this.eventBase.processData(this.eventsData)\n                });\n                break;\n            case 'eventDragArea':\n                this.notify(events.dataReady, {});\n                break;\n            case 'weekRule':\n                state.isLayout = true;\n                break;\n        }\n    };\n    Schedule.prototype.setRtlClass = function () {\n        if (this.enableRtl) {\n            addClass([this.element], 'e-rtl');\n        }\n        else {\n            removeClass([this.element], 'e-rtl');\n        }\n    };\n    /**\n     * Refreshes the Scheduler\n     * @method refresh\n     * @returns {void}\n     */\n    Schedule.prototype.refresh = function () {\n        if (!this.isServerRenderer()) {\n            // Temp resource collecgtion required for blazor alone\n            this.tempResourceCollection = this.resourceCollection;\n            _super.prototype.refresh.call(this);\n            this.tempResourceCollection = null;\n        }\n        else {\n            this.setEditorTitles();\n            this.destroyHeaderModule();\n            if (this.showHeaderBar) {\n                this.headerModule = new HeaderRenderer(this);\n                this.renderModule.updateHeader();\n            }\n            this.destroyPopups();\n            this.initializePopups();\n            this.notify(events.scrollUiUpdate, { cssProperties: this.getCssProperties() });\n            this.notify(events.dataReady, {});\n        }\n    };\n    Schedule.prototype.onGroupSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            if (prop === 'headerTooltipTemplate') {\n                this.headerTooltipTemplateFn = this.templateParser(newProp[prop]);\n            }\n            else {\n                state.isLayout = true;\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n            }\n        }\n    };\n    Schedule.prototype.onEventSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'dataSource':\n                case 'query':\n                case 'fields':\n                    this.initializeDataModule();\n                    state.isDataManager = true;\n                    break;\n                case 'template':\n                    this.activeViewOptions.eventTemplate = newProp.template;\n                    this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                    state.isDataManager = true;\n                    break;\n                case 'enableTooltip':\n                    if (this.eventTooltip) {\n                        this.eventTooltip.destroy();\n                        this.eventTooltip = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.eventTooltip = new EventTooltip(this);\n                    }\n                    break;\n                case 'tooltipTemplate':\n                    this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                    break;\n                case 'resourceColorField':\n                    if (this.resourceBase) {\n                        this.resourceBase.setResourceCollection();\n                    }\n                    state.isDataManager = true;\n                    break;\n                case 'editFollowingEvents':\n                    if (this.quickPopup) {\n                        this.quickPopup.refreshQuickDialog();\n                    }\n                    break;\n                case 'allowAdding':\n                case 'allowEditing':\n                case 'allowDeleting':\n                    if (this.eventWindow) {\n                        this.eventWindow.refresh();\n                    }\n                    break;\n                case 'enableMaxHeight':\n                case 'enableIndicator':\n                    this.notify(events.dataReady, {\n                        processedData: this.eventBase.processData(this.eventsData)\n                    });\n                    break;\n                case 'ignoreWhitespace':\n                    state.isLayout = true;\n                    break;\n            }\n        }\n    };\n    Schedule.prototype.destroyHeaderModule = function () {\n        if (this.headerModule) {\n            this.headerModule.destroy();\n            this.headerModule = null;\n        }\n    };\n    Schedule.prototype.destroyPopups = function () {\n        if (this.quickPopup) {\n            this.quickPopup.destroy();\n            this.quickPopup = null;\n        }\n        if (this.eventWindow) {\n            this.eventWindow.destroy();\n            this.eventWindow = null;\n        }\n    };\n    /**\n     * Allows to show the spinner on schedule at the required scenarios.\n     * @method showSpinner\n     * @returns {void}\n     */\n    Schedule.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * When the spinner is shown manually using `showSpinner` method, it can be hidden using this `hideSpinner` method.\n     * @method hideSpinner\n     * @returns {void}\n     */\n    Schedule.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    /**\n     * Sets different working hours on the required working days by accepting the required start and end time as well as the date collection\n     *  as its parameters.\n     * @method setWorkHours\n     * @param {date} dates Collection of dates on which the given start and end hour range needs to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.setWorkHours = function (dates, start, end, groupIndex) {\n        var cells = [];\n        cells = this.getWorkHourCells(dates, start, end, groupIndex);\n        addClass(cells, cls.WORK_HOURS_CLASS);\n    };\n    /**\n     * Removes or resets different working hours on the required working days by accepting the required start and end time as well as the\n     * date collection as its parameters.\n     * if no parameters has been passed to this function, it will remove all the work hours.\n     * @param {date} dates Collection of dates on which the given start and end hour range need to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.resetWorkHours = function (dates, start, end, groupIndex) {\n        if (dates === void 0) { dates = this.activeView.renderDates; }\n        if (dates && start && end) {\n            var cells = this.getWorkHourCells(dates, start, end, groupIndex);\n            removeClass(cells, cls.WORK_HOURS_CLASS);\n        }\n        else {\n            var workHourCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_HOURS_CLASS));\n            removeClass(workHourCells, cls.WORK_HOURS_CLASS);\n        }\n    };\n    Schedule.prototype.getWorkHourCells = function (dates, start, end, groupIndex) {\n        if (['Agenda', 'MonthAgenda', 'Month', 'TimelineMonth'].indexOf(this.currentView) > -1) {\n            return [];\n        }\n        var startHour = this.getStartEndTime(start);\n        var endHour = this.getStartEndTime(end);\n        var tableEle = this.getContentTable();\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {\n            return [];\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        var viewStartHour = this.activeView.getStartHour();\n        if (startHour < viewStartHour) {\n            startHour = viewStartHour;\n        }\n        var viewEndHour = this.activeView.getEndHour();\n        if (endHour > viewEndHour) {\n            endHour = viewEndHour;\n        }\n        var msMajorInterval = this.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;\n        var startIndex = Math.round((startHour.getTime() - viewStartHour.getTime()) / msInterval);\n        var endIndex = Math.ceil((endHour.getTime() - viewStartHour.getTime()) / msInterval);\n        var tempStartIndex = startIndex;\n        var tempEndIndex = endIndex;\n        var cells = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            date = this.getDateTime(date);\n            util.resetTime(date);\n            var renderDates = this.activeView.renderDates;\n            if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {\n                renderDates = this.resourceBase.lastResourceLevel[groupIndex].renderDates;\n            }\n            var colIndex = this.getIndexOfDate(renderDates, date);\n            if (colIndex >= 0) {\n                if (this.activeView.isTimelineView()) {\n                    var slotsPerDay = Math.round((viewEndHour.getTime() - viewStartHour.getTime()) / msInterval);\n                    startIndex = tempStartIndex + (colIndex * slotsPerDay);\n                    endIndex = tempEndIndex + (colIndex * slotsPerDay);\n                }\n                for (var i = startIndex; i < endIndex; i++) {\n                    if (this.activeView.isTimelineView()) {\n                        var rowIndex = (!isNullOrUndefined(groupIndex)) ? groupIndex : 0;\n                        cells.push(tableEle.rows[rowIndex].cells[i]);\n                    }\n                    else {\n                        if (!isNullOrUndefined(groupIndex)) {\n                            var tds = [].slice.call(tableEle.rows[i].querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + groupIndex + '\"]'));\n                            cells.push(tds[colIndex]);\n                        }\n                        else {\n                            cells.push(tableEle.rows[i].cells[colIndex]);\n                        }\n                    }\n                }\n            }\n        }\n        return cells;\n    };\n    /**\n     * Retrieves the start and end time information of the specific cell element.\n     * @method getCellDetails\n     * @param  {Element} td The cell element whose start and end time details are to be retrieved.\n     * @returns {CellClickEventArgs} Object An object holding the startTime, endTime and all-day information along with the target HTML\n     *  element will be returned.\n     */\n    Schedule.prototype.getCellDetails = function (tdCol) {\n        var td = (tdCol instanceof Array) ? tdCol : [tdCol];\n        var firstTd = getElement(td[0]);\n        var lastTd = getElement(td.slice(-1)[0]);\n        var startTime = this.getDateFromElement(firstTd);\n        var endTime = this.getDateFromElement(lastTd);\n        if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {\n            return undefined;\n        }\n        var endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute('colSpan')) &&\n            this.headerRows.length > 0;\n        var duration = endDateFromColSpan ? parseInt(lastTd.getAttribute('colSpan'), 10) : 1;\n        if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(cls.ALLDAY_CELLS_CLASS) ||\n            lastTd.classList.contains(cls.HEADER_CELLS_CLASS)) {\n            endTime = util.addDays(new Date(endTime.getTime()), duration);\n        }\n        else {\n            endTime = this.activeView.getEndDateFromStartDate(endTime);\n        }\n        var data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: this.isAllDayCell(firstTd),\n            element: tdCol\n        };\n        var groupIndex = firstTd.getAttribute('data-group-index');\n        if (!isNullOrUndefined(groupIndex)) {\n            data.groupIndex = parseInt(groupIndex, 10);\n        }\n        return data;\n    };\n    /**\n     * Retrieves the selected cell elements.\n     * @method getSelectedElements\n     * @returns {Element[]} The elements of currently selected cells will be returned.\n     */\n    Schedule.prototype.getSelectedElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.SELECTED_CELL_CLASS));\n    };\n    /**\n     * To get the resource collection\n     * @method getResourceCollections\n     * @return {ResourcesModel[]}\n     */\n    Schedule.prototype.getResourceCollections = function () {\n        return this.resourceCollection;\n    };\n    /**\n     * To set the resource collection\n     * @method setResourceCollections\n     * @param {ResourcesModel[]} resourceCol Accepts the resource collections in ResourcesModel type\n     */\n    Schedule.prototype.setResourceCollections = function (resourceCol) {\n        this.setProperties({ resources: resourceCol }, false);\n    };\n    /**\n     * Current View could be change based on the provided parameters.\n     * @method changeCurrentView\n     * @param {View} viewName Accept the view in the viewCollections.\n     * @param {number} viewIndex Accept the viewIndex in the viewCollections.\n     * @public\n     */\n    Schedule.prototype.changeCurrentView = function (viewName, viewIndex) {\n        var index = this.getViewIndex(viewName);\n        var view = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n        var viewOptions = this.viewOptions[view];\n        if (viewOptions) {\n            index = this.viewCollections.indexOf(viewOptions[viewIndex || 0]);\n        }\n        if (index === -1 || index === this.viewIndex) {\n            return;\n        }\n        this.changeView(viewName, null, null, index);\n    };\n    /**\n     * Return the current view Index.\n     * @method getCurrentViewIndex\n     * @returns {number}\n     */\n    Schedule.prototype.getCurrentViewIndex = function () {\n        return this.viewIndex;\n    };\n    /**\n     * Retrieves the resource details based on the provided resource index.\n     * @param {number} index index of the resources at the last level.\n     * @returns {ResourceDetails} Object An object holding the details of resource and resourceData.\n     * @isGenericType true\n     */\n    Schedule.prototype.getResourcesByIndex = function (index) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {\n                return undefined;\n            }\n            var data = this.resourceBase.lastResourceLevel[index];\n            var groupData = {};\n            this.resourceBase.setResourceValues(groupData, index);\n            return { resource: data.resource, resourceData: data.resourceData, groupData: groupData };\n        }\n        return undefined;\n    };\n    /**\n     * This method allows to expand the resource that available on the scheduler.\n     * @method expandResource\n     * @param {string} resourceId Accepts the resource id in string type\n     * @param {number} resourceId Accepts the resource id in number type\n     * @param {string} name Accepts the name of the resource collection\n     */\n    Schedule.prototype.expandResource = function (resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, false);\n        }\n    };\n    /**\n     * This method allows to collapse the resource that available on the scheduler.\n     * @method collapseResource\n     * @param {string} resourceId Accepts the resource id in string type\n     * @param {number} resourceId Accepts the resource id in number type\n     * @param {string} name Accepts the name of the resource collection\n     */\n    Schedule.prototype.collapseResource = function (resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, true);\n        }\n    };\n    /**\n     * Scrolls the Schedule content area to the specified time.\n     * @method scrollTo\n     * @param {string} hour Accepts the time value in the skeleton format of 'Hm'.\n     * @param {Date} scrollDate Accepts the date object value.\n     * @returns {void}\n     */\n    Schedule.prototype.scrollTo = function (hour, scrollDate) {\n        if (this.activeView.scrollToDate && isNullOrUndefined(hour) && scrollDate) {\n            this.activeView.scrollToDate(scrollDate);\n        }\n        else if (this.activeView.scrollToHour) {\n            this.activeView.scrollToHour(hour, scrollDate);\n        }\n    };\n    /**\n     * This method allows scroll to the position of the any resources that available on the scheduler.\n     * This method is applicable for without Agenda and Month agenda views of the schedule.\n     * @method scrollToResource\n     * @param {string} resourceId Accepts the id in string type\n     * @param {number} resourceId Accepts the id in number type\n     * @param {string} groupName Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.scrollToResource = function (resourceId, groupName) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            this.resourceBase.resourceScroll(resourceId, groupName);\n        }\n    };\n    /**\n     * Exports the Scheduler events to a calendar (.ics) file. By default, the calendar is exported with a file name `Calendar.ics`.\n     * To change this file name on export, pass the custom string value as `fileName` to get the file downloaded with this provided name.\n     * @method exportToICalendar\n     * @param {string} fileName Accepts the string value.\n     * @returns {void}\n     */\n    Schedule.prototype.exportToICalendar = function (fileName, customData) {\n        if (this.iCalendarExportModule) {\n            this.iCalendarExportModule.initializeCalendarExport(fileName, customData);\n        }\n        else {\n            throw Error('Inject ICalendarExport module');\n        }\n    };\n    /**\n     * Imports the events from an .ics file downloaded from any of the calendars like Google or Outlook into the Scheduler.\n     * This method accepts the blob object or string format of an .ics file to be imported as a mandatory argument.\n     * @method importICalendar\n     * @param {Blob | string} fileContent Accepts the file object or string format of an .ics file.\n     * @returns {void}\n     */\n    Schedule.prototype.importICalendar = function (fileContent) {\n        if (this.iCalendarImportModule) {\n            this.iCalendarImportModule.initializeCalendarImport(fileContent);\n        }\n        else {\n            throw Error('Inject ICalendarImport module');\n        }\n    };\n    /**\n     * Adds the newly created event into the Schedule dataSource.\n     * @method addEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be added into Schedule.\n     * @returns {void}\n     */\n    Schedule.prototype.addEvent = function (data) {\n        this.crudModule.addEvent(data);\n    };\n    /**\n     * Allows the Scheduler events data to be exported as an Excel file either in .xlsx or .csv file formats.\n     * By default, the whole event collection bound to the Scheduler gets exported as an Excel file.\n     * To export only the specific events of Scheduler, you need to pass the custom data collection as\n     * a parameter to this `exportToExcel` method. This method accepts the export options as arguments such as fileName,\n     * exportType, fields, customData, and includeOccurrences. The `fileName` denotes the name to be given for the exported\n     * file and the `exportType` allows you to set the format of an Excel file to be exported either as .xlsx or .csv.\n     * The custom or specific field collection of event dataSource to be exported can be provided through `fields` option\n     * and the custom data collection can be exported by passing them through the `customData` option. There also exists\n     * option to export each individual instances of the recurring events to an Excel file, by setting true or false to the\n     * `includeOccurrences` option, denoting either to include or exclude the occurrences as separate instances on an exported Excel file.\n     * @method exportToExcel\n     * @param  {ExportOptions} excelExportOptions The export options to be set before start with\n     * exporting the Scheduler events to an Excel file.\n     * @return {void}\n     */\n    Schedule.prototype.exportToExcel = function (excelExportOptions) {\n        if (this.excelExportModule) {\n            this.excelExportModule.initializeExcelExport(excelExportOptions || {});\n        }\n        else {\n            throw Error('Inject ExcelExport module');\n        }\n    };\n    /** print function */\n    Schedule.prototype.print = function () {\n        if (this.printModule) {\n            this.printModule.printScheduler();\n        }\n        else {\n            throw Error('Inject Print module');\n        }\n    };\n    /**\n     * Updates the changes made in the event object by passing it as an parameter into the dataSource.\n     * @method saveEvent\n     * @param {[key: string]: Object} data Single or collection of event objects to be saved into Schedule.\n     * @param {CurrentAction} currentAction Denotes the action that takes place either for editing occurrence or series.\n     *  The valid current action names are `EditOccurrence` or `EditSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.saveEvent = function (data, currentAction) {\n        this.crudModule.saveEvent(data, currentAction);\n    };\n    /**\n     * Deletes the events based on the provided ID or event collection in the argument list.\n     * @method deleteEvent\n     * @param {{[key: string]: Object}} id Single event objects to be removed from the Schedule.\n     * @param {{[key: string]: Object }[]} id Collection of event objects to be removed from the Schedule.\n     * @param {string | number} id Accepts the ID of the event object which needs to be removed from the Schedule.\n     * @param {CurrentAction} currentAction Denotes the delete action that takes place either on occurrence or series events.\n     *  The valid current action names are `Delete`, `DeleteOccurrence` or `DeleteSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.deleteEvent = function (id, currentAction) {\n        this.crudModule.deleteEvent(id, currentAction);\n    };\n    /**\n     * Retrieves the entire collection of events bound to the Schedule.\n     * @method getEvents\n     * @returns {Object[]} Returns the collection of event objects from the Schedule.\n     * @isGenericType true\n     */\n    Schedule.prototype.getEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents();\n        }\n        else {\n            eventCollections = this.eventsData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the entire collection of events bound to the Schedule.\n     * @method getBlockEvents\n     * @returns {Object[]} Returns the collection of block event objects from the Schedule.\n     * @isGenericType true\n     */\n    Schedule.prototype.getBlockEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents(this.blockData);\n        }\n        else {\n            eventCollections = this.blockData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the occurrences of a single recurrence event based on the provided parent ID.\n     * @method getOccurrencesByID\n     * @param {number} eventID ID of the parent recurrence data from which the occurrences are fetched.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     * @isGenericType true\n     */\n    Schedule.prototype.getOccurrencesByID = function (eventID) {\n        return this.eventBase.getOccurrencesByID(eventID);\n    };\n    /**\n     * Retrieves all the occurrences that lies between the specific start and end time range.\n     * @method getOccurrencesByRange\n     * @param {Date} startTime Denotes the start time range.\n     * @param {Date} endTime Denotes the end time range.\n     * @returns {Object[]} Returns the collection of occurrence event objects that lies between the provided start and end time.\n     * @isGenericType true\n     */\n    Schedule.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        startTime = this.getDateTime(startTime);\n        endTime = this.getDateTime(endTime);\n        return this.eventBase.getOccurrencesByRange(startTime, endTime);\n    };\n    /**\n     * Retrieves the dates that lies on active view of Schedule.\n     * @method getCurrentViewDates\n     * @returns {Date[]} Returns the collection of dates.\n     */\n    Schedule.prototype.getCurrentViewDates = function () {\n        return this.activeView ? this.activeView.renderDates : [];\n    };\n    /**\n     * Set the recurrence editor instance from custom editor template.\n     * @method setRecurrenceEditor\n     * @param {RecurrenceEditor} recurrenceEditor instance has passed to fetch the instance in event window.\n     * @returns {void}\n     * @deprecated\n     */\n    Schedule.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        this.eventWindow.setRecurrenceEditor(recurrenceEditor);\n    };\n    /**\n     * Get the maximum id of an event.\n     * @method getEventMaxID\n     * @returns {number | string}\n     */\n    Schedule.prototype.getEventMaxID = function () {\n        return this.eventBase.getEventMaxID();\n    };\n    /**\n     * Get deleted occurrences from given recurrence series.\n     * @method getDeletedOccurrences\n     * @param {{[key: string]: Object}} recurrenceData Accepts the parent event object.\n     * @param {string | number} recurrenceData Accepts the parent ID of the event object.\n     * @returns {Object[]} Returns the collection of deleted occurrence events.\n     * @isGenericType true\n     */\n    Schedule.prototype.getDeletedOccurrences = function (recurrenceData) {\n        return this.eventBase.getDeletedOccurrences(recurrenceData);\n    };\n    /**\n     * Retrieves the events that lies on the current date range of the active view of Schedule.\n     * @method getCurrentViewEvents\n     * @returns {Object[]} Returns the collection of events.\n     * @isGenericType true\n     */\n    Schedule.prototype.getCurrentViewEvents = function () {\n        return this.eventsProcessed;\n    };\n    /**\n     * Refreshes the event dataSource. This method may be useful when the events alone in the schedule needs to be re-rendered.\n     * @method refreshEvents\n     * @returns {void}\n     */\n    Schedule.prototype.refreshEvents = function () {\n        if (this.dragAndDropModule) {\n            this.dragAndDropModule.actionObj.action = '';\n            removeClass([this.element], cls.EVENT_ACTION_CLASS);\n        }\n        this.renderModule.refreshDataManager();\n    };\n    /**\n     * To retrieve the appointment object from element.\n     * @method getEventDetails\n     * @param {Element} element Denotes the event UI element on the Schedule.\n     * @returns {Object} Returns the event details.\n     * @isGenericType true\n     */\n    Schedule.prototype.getEventDetails = function (element) {\n        element = getElement(element);\n        var guid = element.getAttribute('data-guid');\n        if (guid) {\n            return this.eventBase.getEventByGuid(guid);\n        }\n        return {};\n    };\n    /**\n     * To check whether the given time range slots are available for event creation or already occupied by other events.\n     * @method isSlotAvailable\n     * @param {Date | Object} startTime Denotes the start time of the slot.\n     * @param {Date} endTime Denotes the end time of the slot.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {boolean} Returns true, if the slot that lies in the provided time range does not contain any other events.\n     */\n    Schedule.prototype.isSlotAvailable = function (startTime, endTime, groupIndex) {\n        var _this = this;\n        var eventStart;\n        var eventEnd;\n        var eventObj = this.activeEventData.event;\n        if (startTime instanceof Date || typeof (startTime) === 'string') {\n            eventStart = startTime;\n            eventEnd = endTime;\n        }\n        else {\n            eventObj = startTime;\n            eventStart = startTime[this.eventFields.startTime];\n            eventEnd = startTime[this.eventFields.endTime];\n            if (this.resourceBase) {\n                groupIndex = this.eventBase.getGroupIndexFromEvent(startTime);\n            }\n        }\n        if (isNullOrUndefined(eventStart) || isNullOrUndefined(eventEnd)) {\n            return true;\n        }\n        eventStart = this.getDateTime(eventStart);\n        eventEnd = this.getDateTime(eventEnd);\n        var eventCollection = this.eventBase.filterEvents(eventStart, eventEnd);\n        if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {\n            eventCollection = this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[groupIndex], eventCollection);\n        }\n        if (eventObj) {\n            if (eventObj.Guid) {\n                eventCollection = eventCollection.filter(function (event) { return event.Guid !== eventObj.Guid; });\n            }\n            else {\n                eventCollection = eventCollection.filter(function (event) {\n                    return event[_this.eventFields.id] !== eventObj[_this.eventFields.id];\n                });\n            }\n        }\n        return (eventCollection.length > 0) ? false : true;\n    };\n    /**\n     * To manually open the event editor on specific time or on certain events.\n     * @method openEditor\n     * @param {Object} data It can be either cell data or event data.\n     * @param {CurrentAction} action Defines the action for which the editor needs to be opened such as either for new event creation or\n     *  for editing of existing events. The applicable action names that can be used here are `Add`, `Save`, `EditOccurrence`\n     *  and `EditSeries`.\n     * @param {boolean} isEventData It allows to decide whether the editor needs to be opened with the clicked cell details or with the\n     *  passed event details.\n     * @param {number} repeatType It opens the editor with the recurrence options based on the provided repeat type.\n     * @returns {void}\n     */\n    Schedule.prototype.openEditor = function (data, action, isEventData, repeatType) {\n        if (action === 'Add' && !isEventData) {\n            data.startTime = this.getDateTime(data.startTime);\n            data.endTime = this.getDateTime(data.endTime);\n            if (!isNullOrUndefined(data.element)) {\n                data.element = getElement(data.element);\n            }\n        }\n        else {\n            data[this.eventFields.startTime] =\n                this.getDateTime(data[this.eventFields.startTime]);\n            data[this.eventFields.endTime] =\n                this.getDateTime(data[this.eventFields.endTime]);\n        }\n        this.currentAction = action;\n        if (action !== 'Add') {\n            this.activeEventData.event = data;\n        }\n        this.eventWindow.openEditor(data, action, isEventData, repeatType);\n    };\n    /**\n     * To manually close the event editor window\n     * @method closeEditor\n     * @return {void}\n     */\n    Schedule.prototype.closeEditor = function () {\n        if (this.eventWindow) {\n            this.eventWindow.dialogClose();\n        }\n    };\n    /**\n     * To manually close the quick info popup\n     * @method closeQuickInfoPopup\n     * @return {void}\n     */\n    Schedule.prototype.closeQuickInfoPopup = function () {\n        if (this.quickPopup) {\n            this.quickPopup.quickPopupHide(true);\n        }\n    };\n    /**\n     * Adds the resources to the specified index.\n     * @param resources\n     * @param {string} name Name of the resource defined in resources collection.\n     * @param {number} index Index or position where the resource should be added.\n     * @deprecated\n     */\n    Schedule.prototype.addResource = function (resources, name, index) {\n        this.resourceBase.addResource(resources, name, index);\n    };\n    /**\n     * Removes the specified resource.\n     * @param resourceId Specifies the resource id to be removed.\n     * @param name Specifies the resource name from which the id should be referred.\n     * @deprecated\n     */\n    Schedule.prototype.removeResource = function (resourceId, name) {\n        this.resourceBase.removeResource(resourceId, name);\n    };\n    /**\n     * Destroys the Schedule component.\n     * @method destroy\n     * @return {void}\n     */\n    Schedule.prototype.destroy = function () {\n        if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n        }\n        this.destroyPopups();\n        this.unwireEvents();\n        this.destroyHeaderModule();\n        this.workCellAction.destroy();\n        this.inlineModule.destroy();\n        if (this.keyboardInteractionModule) {\n            this.keyboardInteractionModule.destroy();\n        }\n        if (this.scrollModule) {\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n        if (this.activeView) {\n            this.resetTemplates();\n            this.activeView.removeEventListener();\n            this.activeView.destroy();\n            this.activeView = null;\n        }\n        if (this.scheduleTouchModule) {\n            this.scheduleTouchModule.destroy();\n            this.scheduleTouchModule = null;\n        }\n        _super.prototype.destroy.call(this);\n        util.removeChildren(this.element);\n        var removeClasses = [cls.ROOT];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n    };\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"height\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showHeaderBar\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showTimeIndicator\", void 0);\n    __decorate([\n        Property('Week')\n    ], Schedule.prototype, \"currentView\", void 0);\n    __decorate([\n        Property(['Day', 'Week', 'WorkWeek', 'Month', 'Agenda'])\n    ], Schedule.prototype, \"views\", void 0);\n    __decorate([\n        Property(new Date())\n    ], Schedule.prototype, \"selectedDate\", void 0);\n    __decorate([\n        Property(new Date(1900, 0, 1))\n    ], Schedule.prototype, \"minDate\", void 0);\n    __decorate([\n        Property(new Date(2099, 11, 31))\n    ], Schedule.prototype, \"maxDate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], Schedule.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showWeekend\", void 0);\n    __decorate([\n        Property(0)\n    ], Schedule.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property('FirstDay')\n    ], Schedule.prototype, \"weekRule\", void 0);\n    __decorate([\n        Property([1, 2, 3, 4, 5])\n    ], Schedule.prototype, \"workDays\", void 0);\n    __decorate([\n        Property('00:00')\n    ], Schedule.prototype, \"startHour\", void 0);\n    __decorate([\n        Property('24:00')\n    ], Schedule.prototype, \"endHour\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Complex({}, WorkHours)\n    ], Schedule.prototype, \"workHours\", void 0);\n    __decorate([\n        Complex({}, TimeScale)\n    ], Schedule.prototype, \"timeScale\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowKeyboardInteraction\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showQuickInfo\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"allowInline\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowMultiCellSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowMultiRowSelection\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"quickInfoOnSelectionEnd\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"showWeekNumber\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"rowAutoHeight\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"editorTemplate\", void 0);\n    __decorate([\n        Complex({}, QuickInfoTemplates)\n    ], Schedule.prototype, \"quickInfoTemplates\", void 0);\n    __decorate([\n        Property(7)\n    ], Schedule.prototype, \"agendaDaysCount\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"hideEmptyAgendaDays\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"enableRecurrenceValidation\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"timezone\", void 0);\n    __decorate([\n        Complex({}, EventSettings)\n    ], Schedule.prototype, \"eventSettings\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"resourceHeaderTemplate\", void 0);\n    __decorate([\n        Complex({}, Group)\n    ], Schedule.prototype, \"group\", void 0);\n    __decorate([\n        Collection([], Resources)\n    ], Schedule.prototype, \"resources\", void 0);\n    __decorate([\n        Collection([], HeaderRows)\n    ], Schedule.prototype, \"headerRows\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"eventDragArea\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"moreEventsClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"hover\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"navigating\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"renderCell\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventRendered\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBinding\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupOpen\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupClose\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBound\", void 0);\n    Schedule = __decorate([\n        NotifyPropertyChanges\n    ], Schedule);\n    return Schedule;\n}(Component));\nexport { Schedule };\n","import { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */ (function () {\n    function ActionBase(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function () {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            var indexCol = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n            if (indexCol.indexOf(this.actionObj.groupIndex) === -1) {\n                var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                indexCol = indexCol.filter(function (index) { return index !== cloneIndex_1; });\n                indexCol.push(this.actionObj.groupIndex);\n                this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol);\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs) {\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        var eventObj = eventArgs.data;\n        var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n            parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n            +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n            return;\n        }\n        var currentAction;\n        if (eventObj[this.parent.eventFields.recurrenceRule]) {\n            var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n            if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                currentAction = 'EditOccurrence';\n            }\n            if (this.parent.enableRecurrenceValidation\n                && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                return;\n            }\n        }\n        if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(eventObj);\n        }\n        this.parent.crudModule.saveEvent(eventObj, currentAction);\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var intervalTime = new Date(+date);\n        intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n        return intervalTime;\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date) {\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n            if (timeElement) {\n                timeElement.innerHTML = this.parent.getTimeString(this.actionObj.start) + ' - ' +\n                    this.parent.getTimeString(this.actionObj.end);\n            }\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: cls.CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView()) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneWrapper = createElement('div', { innerHTML: element.outerHTML });\n        var cloneElement = cloneWrapper.children[0];\n        var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], cls.EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag') {\n            document.querySelector(this.parent.eventDragArea).appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElementClasses = function () {\n        var elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n        }\n        removeClass(elements, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement = [];\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            if (!isNullOrUndefined(cloneElement.parentNode)) {\n                remove(cloneElement);\n            }\n        }\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function (e) {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation(e) && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0\n                        && _this.actionObj.groupIndex < 0) {\n                        return;\n                    }\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(e);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(e);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n        var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        addClass(elements, cls.EVENT_ACTION_CLASS);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n        var event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    };\n    ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n        if (isResize === void 0) { isResize = false; }\n        var appWidth = this.actionObj.cellWidth - 7;\n        if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n            appWidth = this.actionObj.cellWidth * event.count;\n        }\n        if (!isResize && (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            var month = event[this.parent.eventFields.startTime].getMonth();\n            var eventObj = this.yearEvent.isSpannedEvent(event, month);\n            if (eventObj[this.parent.eventFields.startTime].getTime() ===\n                eventObj[this.parent.eventFields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex);\n        appointmentElement.setAttribute('drag', 'true');\n        addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n        setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none',\n            'position': 'absolute', 'overflow': 'hidden', 'padding': '3px'\n        });\n        if (this.actionObj.clone.style.backgroundColor !== '') {\n            setStyleAttribute(appointmentElement, { 'backgroundColor': this.actionObj.clone.style.backgroundColor });\n        }\n        var date = util.addLocalOffset(util.resetTime(event[this.parent.eventFields.startTime])).getTime();\n        var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        var cellTd = this.parent.element.querySelector(query);\n        if (isResize) {\n            var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n            var appHeight = this.actionObj.cellHeight * event.count -\n                (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n            if (this.resizeEdges.right || this.resizeEdges.left) {\n                appHeight = parseInt(this.actionObj.clone.style.height, 10);\n            }\n            setStyleAttribute(appointmentElement, { 'height': appHeight + 'px' });\n        }\n        this.renderDynamicElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n    };\n    ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    ActionBase.prototype.createAppointmentElement = function (resIndex) {\n        var appDetails = this.actionObj.clone.querySelector('.e-appointment-details') ?\n            this.actionObj.clone.querySelector('.e-appointment-details') : this.actionObj.clone.querySelector('.e-subject');\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            innerHTML: appDetails.innerText\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        return appointmentWrapper;\n    };\n    ActionBase.prototype.dynamicEventsRendering = function (event) {\n        var _this = this;\n        var dateRender = this.parent.activeView.renderDates;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        var workDays = this.parent.activeViewOptions.workDays;\n        var groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            dateRender = resources[0].renderDates;\n            var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n            workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        var splittedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (var _a = 0, splittedEvents_1 = splittedEvents; _a < splittedEvents_1.length; _a++) {\n            var event_1 = splittedEvents_1[_a];\n            var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n            var diffInDays = event_1.data.count;\n            var appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n            this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            var cellTd = workCells[day];\n            this.monthEvent.renderElement(cellTd, appointmentElement, true);\n            this.actionObj.cloneElement.push(appointmentElement);\n        }\n    };\n    /**\n     * To destroy the action base module.\n     * @return {void}\n     * @private\n     */\n    ActionBase.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\nexport { ActionBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, Browser, EventHandler, remove, closest, extend, formatUnit, setStyleAttribute, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule events resize actions\n */\nvar Resize = /** @class */ (function (_super) {\n    __extends(Resize, _super);\n    function Resize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Resize.prototype.wireResizeEvent = function (element) {\n        var resizeElement = [].slice.call(element.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n        for (var _i = 0, resizeElement_1 = resizeElement; _i < resizeElement_1.length; _i++) {\n            var element_1 = resizeElement_1[_i];\n            EventHandler.add(element_1, Browser.touchStartEvent, this.resizeStart, this);\n        }\n    };\n    Resize.prototype.resizeHelper = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n            for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n                var cloneElement = this.createCloneElement(this.actionObj.originalElement[i]);\n                this.actionObj.cloneElement[i] = cloneElement;\n                if (this.actionObj.element === this.actionObj.originalElement[i]) {\n                    this.actionObj.clone = cloneElement;\n                }\n            }\n        }\n        else {\n            this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n            this.actionObj.cloneElement = [this.actionObj.clone];\n            this.actionObj.originalElement = [this.actionObj.element];\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        this.actionObj.action = 'resize';\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var resizeTarget = closest(e.target, '.' + cls.EVENT_RESIZE_CLASS);\n        this.actionObj.element = closest(resizeTarget, '.' + cls.APPOINTMENT_CLASS);\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            interval: this.actionObj.interval,\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(event.resizeStart, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.resizeEdges = {\n                left: resizeTarget.classList.contains(cls.LEFT_RESIZE_HANDLER),\n                right: resizeTarget.classList.contains(cls.RIGHT_RESIZE_HANDLER),\n                top: resizeTarget.classList.contains(cls.TOP_RESIZE_HANDLER),\n                bottom: resizeTarget.classList.contains(cls.BOTTOM_RESIZE_HANDLER)\n            };\n            _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n            var workCell = _this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n            _this.actionObj.cellWidth = workCell.offsetWidth;\n            _this.actionObj.cellHeight = workCell.offsetHeight;\n            var headerRows = _this.parent.activeViewOptions.headerRows.map(function (row) {\n                return row.option;\n            });\n            if (_this.parent.activeView.isTimelineView() && headerRows.length > 0 &&\n                ['Date', 'Hour'].indexOf(headerRows.slice(-1)[0]) < 0) {\n                var tr = _this.parent.getContentTable().querySelector('tr');\n                var noOfDays = 0;\n                var tdCollections = [].slice.call(tr.children);\n                for (var _i = 0, tdCollections_1 = tdCollections; _i < tdCollections_1.length; _i++) {\n                    var td = tdCollections_1[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                _this.actionObj.cellWidth = tr.offsetWidth / noOfDays;\n                _this.actionObj.cellHeight = tr.offsetHeight;\n            }\n            var pages = _this.getPageCoordinates(e);\n            _this.actionObj.X = pages.pageX;\n            _this.actionObj.Y = pages.pageY;\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = resizeEventArgs.interval;\n            _this.actionObj.scroll = resizeEventArgs.scroll;\n            _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n            _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n            _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n            if (_this.parent.currentView === 'Month') {\n                _this.daysVariation = -1;\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n            EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n        });\n    };\n    Resize.prototype.resizing = function (e) {\n        this.parent.quickPopup.quickPopupHide();\n        if (this.parent.element.querySelectorAll('.' + cls.RESIZE_CLONE_CLASS).length === 0) {\n            this.resizeHelper();\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var pages = this.getPageCoordinates(e);\n        this.actionObj.pageX = pages.pageX;\n        this.actionObj.pageY = pages.pageY;\n        this.updateScrollPosition(e);\n        this.updateResizingDirection(e);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        if (this.parent.group.resources.length > 0) {\n            resizeArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(event.resizing, resizeArgs);\n    };\n    Resize.prototype.updateResizingDirection = function (e) {\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            this.monthResizing();\n            return;\n        }\n        var resizeValidation = this.resizeValidation(e);\n        if (this.resizeEdges.left) {\n            if (resizeValidation) {\n                var leftStyles = this.getLeftRightStyles(e, true);\n                if (parseInt(leftStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n                    var cloneElement = _a[_i];\n                    setStyleAttribute(cloneElement, leftStyles);\n                    addClass([cloneElement], cls.LEFT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(!this.parent.enableRtl);\n        }\n        if (this.resizeEdges.right) {\n            if (resizeValidation) {\n                var rightStyles = this.getLeftRightStyles(e, false);\n                if (parseInt(rightStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n                    var cloneElement = _c[_b];\n                    setStyleAttribute(cloneElement, rightStyles);\n                    addClass([cloneElement], cls.RIGHT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(this.parent.enableRtl);\n        }\n        if (this.resizeEdges.top) {\n            if (resizeValidation) {\n                var topStyles = this.getTopBottomStyles(e, true);\n                if (parseInt(topStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n                    var cloneElement = _e[_d];\n                    setStyleAttribute(cloneElement, topStyles);\n                    addClass([cloneElement], cls.TOP_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(true);\n        }\n        if (this.resizeEdges.bottom) {\n            if (resizeValidation) {\n                var bottomStyles = this.getTopBottomStyles(e, false);\n                if (parseInt(bottomStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n                    var cloneElement = _g[_f];\n                    setStyleAttribute(cloneElement, bottomStyles);\n                    addClass([cloneElement], cls.BOTTOM_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(false);\n        }\n    };\n    Resize.prototype.monthResizing = function () {\n        this.removeCloneElement();\n        var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n        if (isNullOrUndefined(td)) {\n            return;\n        }\n        var resizeTime = this.parent.getDateFromElement(td);\n        var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ?\n            parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        if ((!this.parent.enableRtl && this.resizeEdges.left) || (this.parent.enableRtl && this.resizeEdges.right)\n            || this.resizeEdges.top) {\n            startTime = resizeTime;\n        }\n        else if ((!this.parent.enableRtl && this.resizeEdges.right) || (this.parent.enableRtl && this.resizeEdges.left)\n            || this.resizeEdges.bottom) {\n            endTime = util.addDays(resizeTime, 1);\n        }\n        if (isSameCell && startTime < endTime) {\n            this.actionObj.start = startTime;\n            this.actionObj.end = endTime;\n            var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n            if (this.parent.currentView === 'TimelineYear') {\n                this.yearEventsRendering(event_1);\n            }\n            else {\n                this.dynamicEventsRendering(event_1);\n            }\n            this.updateOriginalElement(this.actionObj.clone);\n        }\n    };\n    Resize.prototype.yearEventsRendering = function (event) {\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        var endDate = new Date(event[this.parent.eventFields.endTime]);\n        var monthDiff = 0;\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], util.addDays(endDate, -1));\n        }\n        for (var i = 0; i <= monthDiff; i++) {\n            var eventObj = void 0;\n            if (this.parent.activeViewOptions.group.resources.length === 0) {\n                eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n            }\n            else {\n                eventObj = extend({}, event, null, true);\n                endDate = this.resizeEdges.left || this.resizeEdges.right ? util.addDays(endDate, -1) : endDate;\n                eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n            }\n            this.dynamicYearlyEventsRendering(eventObj, true);\n        }\n    };\n    Resize.prototype.getMonthDiff = function (startDate, endDate) {\n        var months;\n        months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n        months -= startDate.getMonth();\n        months += endDate.getMonth();\n        return months <= 0 ? 0 : months;\n    };\n    Resize.prototype.getEventCount = function (eventObj, month) {\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.parent.eventFields.startTime];\n        var eventEnd = eventData[this.parent.eventFields.endTime];\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n        var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n        var count = 1;\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.parent.eventFields.startTime] = monthStart;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.parent.eventFields.endTime] = monthEnd;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() -\n                eventData[this.parent.eventFields.startTime].getTime()) / util.MS_PER_DAY);\n        }\n        eventData.count = count;\n        return eventData;\n    };\n    Resize.prototype.resizeStop = function (e) {\n        var _this = this;\n        EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        var resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };\n        this.parent.trigger(event.resizeStop, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.activeViewOptions.group.resources.length > 0 && !_this.parent.rowAutoHeight\n                && !_this.parent.activeViewOptions.group.allowGroupEdit && !_this.parent.virtualScrollModule\n                && _this.parent.activeViewOptions.group.byGroupID) {\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n                _this.parent.crudModule.crudObj.targetEvent = _this.parent.crudModule.crudObj.sourceEvent;\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n            }\n            _this.saveChangedData(resizeEventArgs);\n        });\n    };\n    Resize.prototype.verticalResizing = function (isTop) {\n        var offsetValue = this.actionObj.clone.offsetTop;\n        if (!isTop) {\n            offsetValue += this.actionObj.clone.offsetHeight;\n        }\n        var minutes = (offsetValue / this.actionObj.cellHeight) * this.actionObj.slotInterval;\n        var element = this.actionObj.clone.offsetParent;\n        if (isNullOrUndefined(element)) {\n            return;\n        }\n        var resizeTime = util.resetTime(this.parent.getDateFromElement(element));\n        resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n        resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n        if (isTop) {\n            this.actionObj.start = this.calculateIntervalTime(resizeTime);\n        }\n        else {\n            this.actionObj.end = this.calculateIntervalTime(resizeTime);\n        }\n        this.updateTimePosition(resizeTime);\n    };\n    Resize.prototype.horizontalResizing = function (isLeft) {\n        var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        var resizeTime;\n        if (this.parent.activeView.isTimelineView()) {\n            var tr = this.parent.getContentTable().querySelector('tr');\n            var headerName = this.parent.currentView;\n            if (this.parent.activeViewOptions.headerRows.length > 0) {\n                var rows = this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n                headerName = rows.slice(-1)[0];\n                if (this.parent.currentView === 'TimelineMonth' && headerName === 'Hour') {\n                    headerName = rows.slice(-2)[0] || 'Month';\n                }\n            }\n            resizeTime = isLeft ? eventStart : eventEnd;\n            var cellIndex = 0;\n            var tdCollections = [].slice.call(tr.children);\n            var isLastCell = false;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                var noOfDays = 0;\n                for (var _i = 0, tdCollections_2 = tdCollections; _i < tdCollections_2.length; _i++) {\n                    var td = tdCollections_2[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) :\n                    parseInt(this.actionObj.clone.style.left, 10);\n                if (!isLeft) {\n                    offsetValue += (this.actionObj.clone.offsetWidth - this.actionObj.cellWidth);\n                }\n                cellIndex = Math.floor(offsetValue / Math.floor(tr.offsetWidth / noOfDays));\n                cellIndex = isLeft ? cellIndex : this.parent.currentView === 'TimelineMonth' ? cellIndex + 1 : cellIndex;\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = (cellIndex < 0) ? 0 : (cellIndex >= noOfDays) ? noOfDays - 1 : cellIndex;\n            }\n            else {\n                var cellWidth = this.actionObj.cellWidth;\n                cellIndex = isLeft ? Math.floor(this.actionObj.clone.offsetLeft / this.actionObj.cellWidth) :\n                    Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth - cellWidth)) /\n                        this.actionObj.cellWidth);\n                if (this.parent.enableRtl) {\n                    var cellOffsetWidth = 0;\n                    if (headerName === 'TimelineMonth' || (!this.parent.activeViewOptions.timeScale.enable &&\n                        this.parent.currentView !== 'TimelineMonth')) {\n                        cellOffsetWidth = this.actionObj.cellWidth;\n                    }\n                    var offsetWidth = (Math.floor(parseInt(this.actionObj.clone.style.right, 10) / this.actionObj.cellWidth) *\n                        this.actionObj.cellWidth) + (isLeft ? 0 : this.actionObj.clone.offsetWidth - cellOffsetWidth);\n                    cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n                }\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = this.getIndex(cellIndex);\n            }\n            var resizeDate = void 0;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n            }\n            else {\n                resizeDate = this.parent.getDateFromElement(tr.children[cellIndex]);\n            }\n            if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n                !this.parent.activeViewOptions.timeScale.enable) {\n                resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n            }\n            else {\n                var offsetValue = this.parent.enableRtl ? parseFloat(this.actionObj.clone.style.right) :\n                    parseFloat(this.actionObj.clone.style.left);\n                if (!isLeft) {\n                    offsetValue += this.actionObj.clone.offsetWidth;\n                }\n                var spanMinutes = Math.ceil((this.actionObj.slotInterval / this.actionObj.cellWidth) *\n                    (offsetValue - Math.floor(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n                spanMinutes = (isLastCell || (!isLeft && spanMinutes === 0)) ? this.actionObj.slotInterval : spanMinutes;\n                resizeTime = new Date(resizeDate.getTime());\n                resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n                this.updateTimePosition(resizeTime);\n            }\n        }\n        else {\n            var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n            var originalWidth = Math.ceil((isLeft ? this.actionObj.element.offsetWidth : 0) / this.actionObj.cellWidth) *\n                this.actionObj.cellWidth;\n            var noOfDays = Math.ceil((this.actionObj.clone.offsetWidth - originalWidth) / this.actionObj.cellWidth);\n            var tr = closest(this.actionObj.clone, 'tr');\n            var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n            dayIndex = this.getIndex(dayIndex);\n            resizeTime = this.parent.getDateFromElement(tr.children[dayIndex]);\n            if (isLeft) {\n                resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            }\n            else {\n                resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n            }\n        }\n        if (isLeft) {\n            if ((this.actionObj.event[this.parent.eventFields.endTime].getTime() - resizeTime.getTime()) <= 0) {\n                resizeTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n            }\n            this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n        }\n        else {\n            var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n                this.parent.activeViewOptions.timeScale.enable;\n            var resizeEnd = (!isTimeViews && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0) ?\n                util.addDays(resizeTime, 1) : resizeTime;\n            this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ?\n                this.calculateIntervalTime(resizeEnd) : resizeEnd;\n        }\n    };\n    Resize.prototype.getTopBottomStyles = function (e, isTop) {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var slotInterval = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) :\n            this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n        var clnTop = isTop ? this.actionObj.element.offsetTop -\n            (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n        clnHeight = (clnTop < 0) ? this.actionObj.clone.offsetHeight :\n            (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) > this.scrollArgs.height ?\n                this.actionObj.clone.offsetHeight : clnHeight;\n        clnTop = (clnTop < 0) ? 0 : clnTop;\n        clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n        clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop :\n            Math.ceil(clnHeight / slotInterval) * slotInterval;\n        var styles = {\n            height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n            top: formatUnit((clnHeight < this.actionObj.cellHeight && isTop) ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n            left: '0px', right: '0px', width: '100%'\n        };\n        return styles;\n    };\n    Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n        var styles = {};\n        var isTimelineView = this.parent.activeView.isTimelineView();\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n            this.parent.activeViewOptions.timeScale.enable;\n        var slotInterval = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n        var pageWidth = isLeft ? (this.actionObj.X - this.actionObj.pageX) : (this.actionObj.pageX - this.actionObj.X);\n        var targetWidth = isTimelineView ?\n            (this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n            this.parent.currentView === 'Month' ? this.actionObj.element.offsetWidth :\n                Math.ceil(this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var offsetWidth = targetWidth + (Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth);\n        var left = (this.parent.enableRtl) ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;\n        if (isTimeViews) {\n            offsetWidth = targetWidth + (isLeft ? (Math.ceil(pageWidth / slotInterval) * slotInterval) :\n                (Math.floor(pageWidth / slotInterval) * slotInterval));\n            this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n        }\n        var width = !isLeft && ((offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width)) ?\n            this.actionObj.clone.offsetWidth : (offsetWidth < this.actionObj.cellWidth) ? offsetWidth : offsetWidth;\n        if (this.parent.enableRtl) {\n            var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) :\n                -(offsetWidth - this.actionObj.cellWidth);\n            rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n            if (isTimelineView && !isLeft) {\n                rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.offsetWidth +\n                    (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n                rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n            }\n            rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n            styles.right = formatUnit(rightValue);\n            width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.offsetWidth : width;\n        }\n        else {\n            var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) :\n                this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n            if (isTimelineView) {\n                offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n                if (this.parent.enableRtl) {\n                    offsetLeft = !isLeft ? (this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.offsetWidth) ?\n                        parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n                }\n                else {\n                    offsetLeft = isLeft ? (this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.offsetWidth &&\n                        this.actionObj.clone.offsetWidth === this.actionObj.cellWidth) ?\n                        parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n                }\n            }\n            var leftValue = offsetLeft;\n            offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft :\n                Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (offsetLeft < 0) {\n                offsetLeft = 0;\n                width = this.actionObj.clone.offsetWidth;\n            }\n            var cloneWidth = Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (isLeft) {\n                styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft :\n                    (Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth) : offsetLeft);\n            }\n        }\n        styles.width = formatUnit(width);\n        return styles;\n    };\n    Resize.prototype.resizeValidation = function (e) {\n        var pages = this.getPageCoordinates(e);\n        var viewDimension = this.getContentAreaDimension();\n        var resizeValidation = false;\n        if (this.resizeEdges.left) {\n            resizeValidation = (pages.pageX - this.actionObj.cellWidth) >= viewDimension.left;\n        }\n        if (this.resizeEdges.right) {\n            resizeValidation = (pages.pageX + this.actionObj.cellWidth) <= viewDimension.right;\n        }\n        if (this.resizeEdges.top) {\n            resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n        }\n        if (this.resizeEdges.bottom) {\n            resizeValidation = (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) <= this.scrollArgs.height;\n        }\n        return resizeValidation;\n    };\n    /**\n     * Get module name.\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    return Resize;\n}(ActionBase));\nexport { Resize };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */ (function (_super) {\n    __extends(YearEvent, _super);\n    /**\n     * Constructor for year events\n     */\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.APPOINTMENT_CLASS :\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        for (var month = 0; month < 12; month++) {\n            var queryString = \".e-month-calendar:nth-child(\" + (month + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, this.parent.selectedDate.getDate());\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = util.resetTime(new Date(startDate.getTime()));\n                var end = util.addDays(new Date(start.getTime()), 1);\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[index];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\n                    }\n                }\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        for (var row = 0; row < 12; row++) {\n            var wrapper = wrapperCollection[row];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), row, 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[dayIndex];\n                    td = dayIndex + 1;\n                    var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper_1) {\n                        eventWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper_1);\n                    }\n                    this.parent.enableRtl ? (rightValue = row * this.cellWidth) : (leftValue = row * this.cellWidth);\n                }\n                else {\n                    this.parent.enableRtl ? (rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth) :\n                        (leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth);\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[index], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (index + 1)) + EVENT_GAP + this_1.moreIndicatorHeight;\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n                    if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, dayIndex);\n                        this_1.updateCellHeight(rowTd, availedHeight);\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicatior(eventWrapper, count - index, dayStart, moreIndex, leftValue, rightValue);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            for (var a = index; a < dayEvents.length; a++) {\n                                var moreData = extend({}, dayEvents[a], { Index: overlapIndex + a }, true);\n                                this_1.renderedEvents.push(moreData);\n                                isSpannedCollection.push(eventData);\n                            }\n                        }\n                        return \"break\";\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    var state_1 = _loop_1(index, count);\n                    if (state_1 === \"break\")\n                        break;\n                }\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth())) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < 12; month++) {\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < 12; month++) {\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i);\n                }\n            }\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index) {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthStart = util.firstDateOfMonth(new Date(this.parent.selectedDate.getFullYear(), month, 1));\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var data = eventDatas[a];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this.isSpannedEvent(eventData, month);\n                overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this.cellHeader + (this.eventHeight * (a + 1)) + EVENT_GAP + this.moreIndicatorHeight;\n            var leftValue = (this.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this.cellWidth : index * this.cellWidth;\n            if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n                this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, index);\n                this.updateCellHeight(td, availedHeight);\n            }\n            else {\n                var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this.renderMoreIndicatior(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        var moreData = extend({}, eventDatas[i], { Index: overlapIndex + i }, true);\n                        this.renderedEvents.push(moreData);\n                    }\n                }\n                break;\n            }\n        }\n    };\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, row);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (!eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight\n                    || eventObj.isSpanned.isLeft)\n                    && _this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    YearEvent.prototype.renderMoreIndicatior = function (wrapper, count, startDate, row, left, right, index) {\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default);\n        var eventWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnocementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], cls.READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            var templateArgs = util.addLocalOffsetToEvent(eventObj, this.parent.eventFields);\n            templateElement = this.parent.getAppointmentTemplate()(templateArgs, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, month) {\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n        var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.fields.startTime] = monthStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.fields.endTime] = monthEnd;\n            isSpanned.isRight = true;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            isSpanned.count = Math.ceil((eventData[this.fields.endTime].getTime() -\n                eventData[this.fields.startTime].getTime()) / util.MS_PER_DAY);\n        }\n        eventData.isSpanned = isSpanned;\n        if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, _a = appointments; _i < _a.length; _i++) {\n            var app = _a[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            if (this.parent.activeViewOptions.orientation === 'Vertical' &&\n                this.parent.activeViewOptions.group.resources.length > 0) {\n                if ((util.resetTime(appStart).getTime() >= dateStart)\n                    && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n            else {\n                if (this.parent.rowAutoHeight && (((util.resetTime(appStart).getTime() <= dateStart)\n                    && (util.resetTime(appEnd).getTime() >= dateEnd)) || (util.resetTime(appStart).getTime() >= dateStart)\n                    && (util.resetTime(appEnd).getTime() <= dateEnd))) {\n                    appointmentsList.push(app);\n                }\n                if (!this.parent.rowAutoHeight && (util.resetTime(appStart).getTime() <= dateStart)\n                    && (util.resetTime(appEnd).getTime() >= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    return YearEvent;\n}(TimelineEvent));\nexport { YearEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, closest, Draggable, extend, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, remove, removeClass, setStyleAttribute, Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { YearEvent } from '../event-renderer/year';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\nvar DragAndDrop = /** @class */ (function (_super) {\n    __extends(DragAndDrop, _super);\n    function DragAndDrop() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.widthUptoCursorPoint = 0;\n        _this.heightUptoCursorPoint = 0;\n        _this.cursorPointIndex = 0;\n        _this.isHeaderRows = false;\n        _this.isTimelineDayProcess = false;\n        _this.widthPerMinute = 0;\n        _this.heightPerMinute = 0;\n        _this.minDiff = 0;\n        _this.isStepDragging = false;\n        _this.isMorePopupOpened = false;\n        _this.isAllDayDrag = false;\n        return _this;\n    }\n    DragAndDrop.prototype.wireDragEvent = function (element) {\n        var dragObj = new Draggable(element, {\n            abort: '.' + cls.EVENT_RESIZE_CLASS,\n            clone: true,\n            isDragScroll: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: (this.parent.eventDragArea) ? true : false,\n            cursorAt: (this.parent.eventDragArea) ? { left: -20, top: -20 } : { left: 0, top: 0 },\n            dragArea: (this.parent.eventDragArea) ?\n                document.querySelector(this.parent.eventDragArea) :\n                this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS),\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this),\n            queryPositionInfo: this.dragPosition.bind(this)\n        });\n        if (!(dragObj.enableTapHold && Browser.isDevice && Browser.isTouch)) {\n            // tslint:disable-next-line:no-any\n            EventHandler.remove(element, 'touchstart', dragObj.initialize);\n        }\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        this.setDragActionDefaultValues();\n        this.actionObj.element = e.element;\n        this.actionObj.action = 'drag';\n        this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n        if (!this.parent.eventDragArea && this.parent.currentView !== 'Month' &&\n            this.parent.timeScale.enable && !this.parent.activeView.isTimelineView() &&\n            !this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n            setStyleAttribute(this.actionObj.clone, { cursor: 'move', left: '0%', right: '0%', width: '100%' });\n        }\n        this.actionObj.clone.style.top = formatUnit(this.actionObj.element.offsetTop);\n        this.actionObj.cloneElement = [this.actionObj.clone];\n        this.actionObj.originalElement = [this.actionObj.element];\n        return this.actionObj.clone;\n    };\n    DragAndDrop.prototype.dragPosition = function (e) {\n        if (this.parent.eventDragArea) {\n            return { left: e.left, top: e.top };\n        }\n        var cellHeight = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var leftValue = formatUnit(0);\n        if (this.parent.currentView === 'Month') {\n            leftValue = e.left;\n        }\n        if (this.parent.activeView.isTimelineView()) {\n            leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n        }\n        var topValue;\n        if ((this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable ||\n            (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n                this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)))) {\n            topValue = formatUnit(this.actionObj.clone.offsetTop);\n        }\n        else if (this.parent.currentView === 'Month') {\n            topValue = formatUnit(0);\n        }\n        else if (this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n            topValue = formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop);\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n                right: this.parent.enableRtl && formatUnit(0)\n            });\n        }\n        else {\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                !this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                setStyleAttribute(this.actionObj.clone, {\n                    height: formatUnit(this.actionObj.cellHeight),\n                    width: formatUnit(this.actionObj.cellWidth - 1),\n                    pointerEvents: 'none'\n                });\n            }\n            var top_1 = parseInt(e.top, 10);\n            top_1 = top_1 < 0 ? 0 : top_1;\n            topValue = formatUnit(Math.ceil(top_1 / cellHeight) * cellHeight);\n            var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n            var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n            if (cloneBottom > scrollHeight) {\n                topValue = (parseInt(topValue, 10) - (cloneBottom - scrollHeight)) + 'px';\n            }\n        }\n        return { left: leftValue, top: topValue };\n    };\n    DragAndDrop.prototype.setDragActionDefaultValues = function () {\n        this.actionObj.action = 'drag';\n        this.actionObj.isAllDay = null;\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.actionObj.cellWidth = workCell.offsetWidth;\n        this.actionObj.cellHeight = workCell.offsetHeight;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        var eventGuid = this.actionObj.element.getAttribute('data-guid');\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var dragArgs = {\n            cancel: false,\n            data: eventObj,\n            event: e,\n            excludeSelectors: null,\n            element: this.actionObj.element,\n            interval: this.actionObj.interval,\n            navigation: { enable: false, timeDelay: 2000 },\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel || (!isNullOrUndefined(_this.actionObj.element) &&\n                isNullOrUndefined(_this.actionObj.element.parentElement))) {\n                var dragObj = _this.actionObj.element.ej2_instances[0];\n                if (!isNullOrUndefined(dragObj)) {\n                    dragObj.intDestroy(e.event);\n                }\n                _this.actionObj.action = '';\n                _this.removeCloneElementClasses();\n                _this.removeCloneElement();\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.actionObj.start = eventObj[_this.parent.eventFields.startTime];\n            _this.actionObj.end = eventObj[_this.parent.eventFields.endTime];\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = dragEventArgs.interval;\n            _this.actionObj.navigation = dragEventArgs.navigation;\n            _this.actionObj.scroll = dragEventArgs.scroll;\n            _this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            _this.widthPerMinute = (_this.actionObj.cellWidth / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.heightPerMinute = (_this.actionObj.cellHeight / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.widthUptoCursorPoint = 0;\n            _this.heightUptoCursorPoint = 0;\n            _this.cursorPointIndex = -1;\n            _this.isHeaderRows = false;\n            _this.isTimelineDayProcess = false;\n            _this.minDiff = 0;\n            _this.isMorePopupOpened = false;\n            _this.daysVariation = -1;\n            if ((_this.parent.activeView.isTimelineView() || !_this.parent.timeScale.enable) && _this.parent.currentView !== 'TimelineYear') {\n                if (!isNullOrUndefined(_this.actionObj.clone.offsetParent) &&\n                    _this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n                    _this.isMorePopupOpened = true;\n                }\n                var rows = _this.parent.activeViewOptions.headerRows;\n                _this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' &&\n                    rows[rows.length - 1].option !== 'Date';\n                _this.isTimelineDayProcess = !_this.parent.activeViewOptions.timeScale.enable || _this.isHeaderRows ||\n                    _this.parent.currentView === 'TimelineMonth' || (rows.length > 0 && rows[rows.length - 1].option === 'Date');\n                _this.isStepDragging = !_this.isTimelineDayProcess && (_this.actionObj.slotInterval !== _this.actionObj.interval);\n                if (_this.isTimelineDayProcess) {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'day');\n                }\n                else {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'hour');\n                }\n            }\n            if (_this.parent.currentView === 'TimelineYear') {\n                _this.yearEvent = new YearEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Month') {\n                _this.updateOriginalElement(_this.actionObj.clone);\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Day' || _this.parent.currentView === 'Week' || _this.parent.currentView === 'WorkWeek') {\n                _this.verticalEvent = new VerticalEvent(_this.parent);\n            }\n        });\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        this.parent.quickPopup.quickPopupHide(true);\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventArgs = this.getPageCoordinates(e);\n        this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n        this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n        this.actionObj.target = e.target;\n        this.widthUptoCursorPoint = (this.widthUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute)) *\n                this.widthPerMinute : this.widthUptoCursorPoint;\n        this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n        this.heightUptoCursorPoint = (this.heightUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute)) *\n                this.heightPerMinute : this.heightUptoCursorPoint;\n        this.isAllDayDrag = (this.parent.activeViewOptions.timeScale.enable) ?\n            this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) :\n            this.actionObj.event[this.parent.eventFields.isAllDay];\n        if (this.isStepDragging && this.minDiff === 0) {\n            this.calculateMinutesDiff(eventObj);\n        }\n        if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n            var date = this.parent.getDateFromElement(this.actionObj.target);\n            if (!isNullOrUndefined(date)) {\n                var currentDate = util.resetTime(date);\n                var startDate = util.resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n                this.daysVariation = (currentDate.getTime() - startDate.getTime()) / util.MS_PER_DAY;\n            }\n            else {\n                this.daysVariation = 0;\n            }\n        }\n        else {\n            this.daysVariation = 0;\n        }\n        if (this.parent.eventDragArea) {\n            var targetElement = eventArgs.target;\n            this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n            this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n            var currentTarget = closest(targetElement, '.' + cls.ROOT);\n            if (!currentTarget) {\n                this.actionObj.clone.style.height = '';\n                this.actionObj.clone.style.width = '';\n            }\n            else {\n                if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek'\n                    || this.parent.currentView === 'Day')) {\n                    this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n                }\n            }\n        }\n        this.updateScrollPosition(e);\n        this.updateNavigatingPosition(e);\n        this.updateDraggingDateTime(e);\n        var dragArgs = {\n            data: eventObj, event: e, element: this.actionObj.element, startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        if (this.parent.group.resources.length > 0) {\n            dragArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(events.drag, dragArgs);\n    };\n    DragAndDrop.prototype.calculateMinutesDiff = function (eventObj) {\n        if (this.parent.enableRtl) {\n            this.minDiff =\n                ((this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute) * this.actionObj.interval;\n        }\n        else {\n            this.minDiff = (this.widthUptoCursorPoint / this.widthPerMinute) * this.actionObj.interval;\n        }\n        var startDate = eventObj[this.parent.eventFields.startTime];\n        var startTime = this.parent.activeView.renderDates[0];\n        var startEndHours = util.getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        if (startEndHours.startHour.getTime() > startDate.getTime()) {\n            this.minDiff = this.minDiff + ((startEndHours.startHour.getTime() - startDate.getTime()) / util.MS_PER_MINUTE);\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        clearInterval(this.actionObj.navigationInterval);\n        this.actionObj.navigationInterval = null;\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        this.actionObj.action = null;\n        if (this.isAllowDrop(e)) {\n            return;\n        }\n        var target = ((!e.target.classList.contains('e-work-cells') && this.parent.cellTemplate) ?\n            closest(e.target, '.e-work-cells') : e.target);\n        var dragArgs = {\n            cancel: false, data: this.getChangedData(),\n            event: e, element: this.actionObj.element, target: target\n        };\n        this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.activeViewOptions.group.resources.length > 0 && !_this.parent.activeViewOptions.group.allowGroupEdit\n                && !_this.parent.rowAutoHeight && !_this.parent.virtualScrollModule && _this.parent.activeViewOptions.group.byGroupID) {\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n                var currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || _this.actionObj.groupIndex;\n                _this.parent.crudModule.crudObj.targetEvent = [_this.parent.resourceBase.lastResourceLevel[currentGroupIndex]];\n            }\n            _this.saveChangedData(dragEventArgs);\n        });\n    };\n    DragAndDrop.prototype.updateNavigatingPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.navigation.enable) {\n            var currentDate_1 = this.parent.getCurrentTime();\n            if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n                this.actionObj.navigationInterval = window.setInterval(function () {\n                    if (currentDate_1) {\n                        var crtDate = _this.parent.getCurrentTime();\n                        var end = crtDate.getSeconds();\n                        var start = currentDate_1.getSeconds() + (_this.actionObj.navigation.timeDelay / 1000);\n                        start = (start >= 60) ? start - 60 : start;\n                        if (start === end) {\n                            currentDate_1 = _this.parent.getCurrentTime();\n                            _this.viewNavigation(e);\n                            _this.updateDraggingDateTime(e);\n                        }\n                    }\n                }, this.actionObj.navigation.timeDelay);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateDraggingDateTime = function (e) {\n        if (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n            this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n            this.morePopupEventDragging(e);\n        }\n        else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n            this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n            this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n            this.timelineEventModule.getSlotDates();\n            this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth : this.actionObj.cellWidth;\n            this.calculateTimelineTime(e);\n        }\n        else {\n            if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n                this.calculateVerticalDate(e);\n            }\n            else {\n                this.calculateVerticalTime(e);\n            }\n        }\n    };\n    DragAndDrop.prototype.navigationWrapper = function () {\n        if (!this.parent.activeView.isTimelineView()) {\n            if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n                var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                this.actionObj.index = (this.parent.activeView.renderDates.length < this.actionObj.index) ?\n                    this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n                var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                if (!targetWrapper) {\n                    targetWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                    outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n                }\n                targetWrapper.appendChild(this.actionObj.clone);\n            }\n            else {\n                var wrapperClass = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ?\n                    '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n                this.parent.element.querySelectorAll(wrapperClass)\n                    .item(this.actionObj.index).appendChild(this.actionObj.clone);\n                if (wrapperClass === '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n                    var elementHeight = this.getAllDayEventHeight();\n                    var event_2 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n                    if (event_2[0].offsetHeight < elementHeight) {\n                        for (var _i = 0, event_1 = event_2; _i < event_1.length; _i++) {\n                            var e = event_1[_i];\n                            e.style.height = ((elementHeight + 2) / 12) + 'em';\n                        }\n                    }\n                    this.actionObj.clone.style.height = formatUnit(elementHeight);\n                }\n                this.actionObj.height = parseInt(this.actionObj.clone.style.height, 0);\n            }\n        }\n        else {\n            var outWrapper = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n            }\n            else {\n                outWrapper = this.parent.element.querySelector('.' + cls.APPOINTMENT_CONTAINER_CLASS);\n            }\n            var tarWrapper = outWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n            if (!tarWrapper) {\n                tarWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                outWrapper.appendChild(tarWrapper);\n            }\n            tarWrapper.appendChild(this.actionObj.clone);\n        }\n    };\n    DragAndDrop.prototype.viewNavigation = function (e) {\n        var navigationType;\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (dragArea && ((!this.scrollEdges.top && !this.scrollEdges.bottom) ||\n            closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n            if ((dragArea.scrollLeft === 0) &&\n                (Math.round(this.actionObj.X) <=\n                    Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'next' : 'previous';\n            }\n            else if ((Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth) &&\n                (Math.round(this.actionObj.X) >=\n                    Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'previous' : 'next';\n            }\n            if (navigationType) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n            }\n        }\n    };\n    DragAndDrop.prototype.morePopupEventDragging = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'td')))) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(e.target, 'td');\n        if (this.parent.currentView === 'TimelineYear' && !td.classList.contains('e-work-cells')) {\n            return;\n        }\n        var dragStart = this.parent.getDateFromElement(td);\n        var dragEnd = new Date(dragStart.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        this.actionObj.start = new Date(dragStart.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n        this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n        this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n        var eventContainer = td;\n        var eventWrapper;\n        if (this.parent.activeView.isTimelineView()) {\n            var rowIndex = closest(td, 'tr').rowIndex;\n            eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n        }\n        eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n    };\n    DragAndDrop.prototype.calculateVerticalTime = function (e) {\n        if (isNullOrUndefined(this.actionObj.target) ||\n            (this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr'))) ||\n            (!(closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS)) &&\n                !(closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)))) {\n            return;\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.swapDragging(e);\n        }\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventStart = eventObj[this.parent.eventFields.startTime];\n        var eventEnd = eventObj[this.parent.eventFields.endTime];\n        var eventDuration = eventEnd.getTime() - eventStart.getTime();\n        var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight)\n            * this.actionObj.cellHeight;\n        offsetTop = offsetTop < 0 ? 0 : offsetTop;\n        if (this.scrollEdges.top || this.scrollEdges.bottom) {\n            offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint +\n                this.actionObj.cellHeight + window.pageYOffset :\n                (dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset) +\n                    (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n            offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n            this.actionObj.clone.style.top = formatUnit(offsetTop);\n        }\n        var rowIndex = (this.parent.activeViewOptions.timeScale.enable) ? (offsetTop / this.actionObj.cellHeight) : 0;\n        var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n        var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n        var tr;\n        if (this.isAllDayDrag) {\n            tr = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n        }\n        else {\n            var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n            tr = trCollections[rowIndex];\n        }\n        var index;\n        if (closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS) ||\n            closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            index = closest(this.actionObj.target, 'td').cellIndex;\n        }\n        var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n        this.actionObj.index = colIndex;\n        if (isNullOrUndefined(tr)) {\n            return;\n        }\n        var td = tr.children[colIndex];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        var dragStart;\n        var dragEnd;\n        if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            dragStart = this.parent.getDateFromElement(td);\n            dragStart.setMinutes(dragStart.getMinutes() + (diffInMinutes / heightPerMinute));\n            dragEnd = new Date(dragStart.getTime());\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n            }\n            else {\n                dragEnd.setMilliseconds(eventDuration);\n            }\n        }\n        else {\n            dragStart = this.parent.getDateFromElement(td);\n            dragStart.setDate(dragStart.getDate() - this.daysVariation);\n            dragStart.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            dragEnd = new Date(dragStart.getTime());\n            dragEnd.setMilliseconds(eventDuration);\n            if (!this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd = util.addDays(util.resetTime(dragEnd), 1);\n            }\n            this.updateAllDayEvents(dragStart, dragEnd, this.parent.activeViewOptions.group.byDate ? colIndex : undefined);\n        }\n        this.actionObj.start = new Date(+dragStart);\n        this.actionObj.end = new Date(+dragEnd);\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        this.updateEventHeight(event);\n        this.updateTimePosition(this.actionObj.start);\n    };\n    DragAndDrop.prototype.updateEventHeight = function (event) {\n        this.verticalEvent.initializeValues();\n        var datesCount = 0;\n        for (var i = 0; i < this.actionObj.groupIndex; i++) {\n            datesCount = datesCount + this.verticalEvent.dateRender[i].length;\n        }\n        var target = (this.parent.activeViewOptions.group.byDate &&\n            !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target))) ? true : false;\n        if (target || !this.parent.activeViewOptions.group.byDate) {\n            var dayIndex = !this.parent.activeViewOptions.group.byDate ? this.actionObj.index - datesCount\n                : this.parent.getIndexOfDate(this.verticalEvent.dateRender[this.actionObj.groupIndex], util.resetTime(this.parent.getDateFromElement(this.actionObj.target)));\n            var record = this.verticalEvent.isSpannedEvent(event, dayIndex, this.actionObj.groupIndex);\n            var eStart = record[this.verticalEvent.fields.startTime];\n            var eEnd = record[this.verticalEvent.fields.endTime];\n            var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) :\n                this.actionObj.element.offsetHeight;\n            var topValue = this.parent.activeViewOptions.timeScale.enable ?\n                this.verticalEvent.getTopValue(eStart, dayIndex, this.actionObj.groupIndex) : this.actionObj.element.offsetTop;\n            this.actionObj.clone.style.top = formatUnit(topValue);\n            this.actionObj.clone.style.height = formatUnit(appHeight);\n        }\n    };\n    DragAndDrop.prototype.updateAllDayEvents = function (startDate, endDate, colIndex) {\n        var _this = this;\n        this.parent.eventBase.slots = [];\n        var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n        var renderDates = this.parent.activeView.renderDates;\n        this.parent.eventBase.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.eventBase.slots = [];\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            renderDates = resources[0].renderDates;\n            this.parent.eventBase.slots.push(renderDates.map(function (date) { return +date; }));\n        }\n        var events = this.parent.eventBase.splitEvent(event, renderDates);\n        var query = '.e-all-day-cells[data-date=\"' +\n            this.parent.getMsFromDate(events[0][this.parent.eventFields.startTime]) + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n        }\n        var cell = [].slice.call(this.parent.element.querySelectorAll(query));\n        if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n            var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n            this.appendCloneElement(this.getEventWrapper(cellIndex));\n            this.actionObj.clone.style.width =\n                formatUnit(events[0].data.count * this.actionObj.cellWidth);\n        }\n    };\n    DragAndDrop.prototype.swapDragging = function (e) {\n        var colIndex = closest(this.actionObj.target, 'td').cellIndex;\n        if (closest(this.actionObj.target, '.' + cls.DATE_HEADER_WRAP_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n            addClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = true;\n            var eventHeight = this.getAllDayEventHeight();\n            var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n            if (allDayElement[0].offsetHeight < eventHeight) {\n                for (var _i = 0, allDayElement_1 = allDayElement; _i < allDayElement_1.length; _i++) {\n                    var element = allDayElement_1[_i];\n                    element.style.height = ((eventHeight + 2) / 12) + 'em';\n                }\n            }\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(this.actionObj.cellWidth),\n                height: formatUnit(eventHeight),\n                top: formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop)\n            });\n        }\n        if (closest(this.actionObj.target, '.' + cls.WORK_CELLS_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.DAY_WRAPPER_CLASS)) {\n            removeClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = false;\n            var height = (this.actionObj.element.offsetHeight === 0) ? this.actionObj.height : this.actionObj.element.offsetHeight;\n            setStyleAttribute(this.actionObj.clone, {\n                left: formatUnit(0),\n                height: formatUnit(height),\n                width: formatUnit(this.actionObj.cellWidth)\n            });\n        }\n    };\n    DragAndDrop.prototype.calculateVerticalDate = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'tr'))) ||\n            (e.target && e.target.tagName === 'DIV')) {\n            return;\n        }\n        this.removeCloneElement();\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(this.actionObj.target, 'td');\n        if (!isNullOrUndefined(td)) {\n            var tr = td.parentElement;\n            this.actionObj.index = (tr.rowIndex * tr.children.length) + td.cellIndex;\n            var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n            td = workCells[this.actionObj.index];\n            var currentDate = this.parent.getDateFromElement(td);\n            if (!isNullOrUndefined(currentDate)) {\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n                }\n                var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n                var dragStart = new Date(timeString.getTime());\n                var dragEnd = new Date(dragStart.getTime());\n                var startTimeDiff = eventObj[this.parent.eventFields.startTime].getTime() -\n                    (util.resetTime(new Date(+eventObj[this.parent.eventFields.startTime]))).getTime();\n                dragStart = new Date(dragStart.getTime() + startTimeDiff);\n                dragEnd = new Date(dragStart.getTime() + eventDuration);\n                this.actionObj.start = new Date(dragStart.getTime());\n                this.actionObj.end = new Date(dragEnd.getTime());\n            }\n        }\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        if (this.parent.currentView === 'TimelineYear') {\n            this.dynamicYearlyEventsRendering(event);\n        }\n        else {\n            this.dynamicEventsRendering(event);\n        }\n    };\n    DragAndDrop.prototype.calculateTimelineTime = function (e) {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth :\n            parseInt(this.actionObj.clone.style.left, 10);\n        offsetLeft = Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var rightOffset;\n        if (this.parent.enableRtl) {\n            rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n            this.actionObj.clone.style.right = formatUnit(rightOffset);\n        }\n        offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n        var colIndex = this.getColumnIndex(offsetLeft);\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var leftVal = (this.parent.eventDragArea) ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n        var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n        if (this.parent.enableRtl) {\n            cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) /\n                this.actionObj.cellWidth)) - 1;\n        }\n        if (this.cursorPointIndex < 0) {\n            this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n        }\n        var tr = this.parent.getContentTable().querySelector('tr');\n        var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n        index = index < 0 ? 0 : index;\n        var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[index].getTime()) :\n            this.parent.getDateFromElement(tr.children[index]);\n        if (this.isStepDragging) {\n            var widthDiff = this.getWidthDiff(tr, index);\n            if (widthDiff !== 0) {\n                var timeDiff = Math.round(widthDiff / this.widthPerMinute);\n                eventStart.setMinutes(eventStart.getMinutes() + (timeDiff * this.actionObj.interval));\n                eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n            }\n            else {\n                eventStart = this.actionObj.start;\n            }\n        }\n        else {\n            eventStart.setMinutes(eventStart.getMinutes() -\n                (this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval)));\n        }\n        eventStart = this.calculateIntervalTime(eventStart);\n        if (this.isTimelineDayProcess) {\n            var eventSrt = eventObj[this.parent.eventFields.startTime];\n            eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n        }\n        var eventEnd = new Date(eventStart.getTime());\n        eventEnd.setMilliseconds(eventDuration);\n        var event = this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event);\n        var events = this.timelineEventModule.splitEvent(event, this.timelineEventModule.dateRender);\n        var eventData = events[0].data;\n        var startTime = this.timelineEventModule.getStartTime(events[0], eventData);\n        var endTime = this.timelineEventModule.getEndTime(events[0], eventData);\n        var width = this.timelineEventModule.\n            getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count);\n        var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, util.resetTime(new Date(startTime.getTime())));\n        day = day < 0 ? 0 : day;\n        var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n        if (this.parent.enableRtl) {\n            this.actionObj.clone.style.right = formatUnit(left);\n        }\n        else {\n            this.actionObj.clone.style.left = formatUnit(left);\n        }\n        if (!this.isMorePopupOpened) {\n            this.actionObj.clone.style.width = formatUnit(width);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.calculateResourceGroupingPosition(e);\n        }\n        this.actionObj.start = new Date(eventStart.getTime());\n        this.actionObj.end = new Date(eventEnd.getTime());\n        this.updateTimePosition(this.actionObj.start);\n    };\n    DragAndDrop.prototype.getOffsetValue = function (offsetLeft, rightOffset) {\n        if (this.scrollEdges.left || this.scrollEdges.right) {\n            var viewEle = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (this.parent.enableRtl) {\n                rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n                if (this.scrollEdges.right) {\n                    rightOffset = (rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth) -\n                        (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                else {\n                    rightOffset = rightOffset + this.widthUptoCursorPoint;\n                    if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n                        this.actionObj.clone.style.width =\n                            formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n                        rightOffset = (viewEle.scrollLeft - viewEle.scrollWidth);\n                    }\n                }\n                this.actionObj.clone.style.left = formatUnit(rightOffset);\n            }\n            else {\n                if (this.scrollEdges.left) {\n                    offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n                    if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n                        viewEle.scrollLeft = viewEle.scrollLeft - 1;\n                    }\n                    else if (this.actionObj.clone.offsetLeft === 0) {\n                        offsetLeft = viewEle.scrollLeft;\n                    }\n                }\n                else {\n                    offsetLeft = (viewEle.scrollLeft + viewEle.offsetWidth -\n                        this.actionObj.clone.offsetWidth) + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n                this.actionObj.clone.style.left = formatUnit(offsetLeft);\n            }\n        }\n        return offsetLeft;\n    };\n    DragAndDrop.prototype.getWidthDiff = function (tr, index) {\n        var pages = this.scrollArgs.element.getBoundingClientRect();\n        if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n            var targetLeft = tr.children[index].offsetLeft;\n            var pageX = this.actionObj.pageX - pages.left;\n            if (this.parent.enableRtl) {\n                return (targetLeft + this.actionObj.cellWidth) - (this.scrollArgs.element.scrollLeft + pageX);\n            }\n            else {\n                return (this.scrollArgs.element.scrollLeft + pageX) - targetLeft;\n            }\n        }\n        return 0;\n    };\n    DragAndDrop.prototype.getColumnIndex = function (offsetLeft) {\n        var index = Math.floor(offsetLeft / this.actionObj.cellWidth);\n        if (this.isHeaderRows) {\n            return index;\n        }\n        return this.getIndex(index);\n    };\n    DragAndDrop.prototype.getCursorCurrentIndex = function (colIndex, cloneIndex, tr) {\n        var index = colIndex + cloneIndex;\n        if (this.isHeaderRows) {\n            var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n            return (index > dateLength - 1) ? dateLength - 1 : index;\n        }\n        return (index > tr.children.length - 1) ? tr.children.length - 1 : index;\n    };\n    DragAndDrop.prototype.cursorIndex = function (e, event, left, index) {\n        var td = closest(e.target, '.e-work-cells');\n        if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n            var targetDate = this.parent.getDateFromElement(td);\n            if (this.isHeaderRows) {\n                var currentIndex = Math.floor(left / this.actionObj.cellWidth);\n                targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n            }\n            var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n            if (this.isTimelineDayProcess) {\n                this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / (util.MS_PER_DAY)));\n            }\n            else {\n                var widthDiff = Math.floor((timeDiff / util.MS_PER_MINUTE) / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n                this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n                this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n            }\n        }\n        else {\n            this.cursorPointIndex = 0;\n        }\n    };\n    DragAndDrop.prototype.calculateResourceGroupingPosition = function (e) {\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n        var translateY = util.getTranslateY(dragArea.querySelector('table'));\n        translateY = (isNullOrUndefined(translateY)) ? 0 : translateY;\n        var rowHeight = (this.parent.rowAutoHeight) ?\n            ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n        var rowIndex = Math.floor(Math.floor((this.actionObj.Y + (dragArea.scrollTop - translateY - window.scrollY)) -\n            dragArea.getBoundingClientRect().top) / rowHeight);\n        rowIndex = (rowIndex < 0) ? 0 : (rowIndex > trCollection.length - 1) ? trCollection.length - 1 : rowIndex;\n        this.actionObj.index = rowIndex;\n        var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n        var eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n        var td = closest(this.actionObj.target, 'td');\n        this.actionObj.groupIndex = (td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)))\n            ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n        var top = trCollection[rowIndex].offsetTop;\n        if (this.parent.rowAutoHeight) {\n            var cursorElement = this.getCursorElement(e);\n            if (cursorElement) {\n                top = cursorElement.classList.contains(cls.WORK_CELLS_CLASS) ? cursorElement.offsetTop :\n                    cursorElement.offsetParent.classList.contains(cls.APPOINTMENT_CLASS) ?\n                        cursorElement.offsetParent.offsetTop : top;\n            }\n        }\n        this.actionObj.clone.style.top = formatUnit(top);\n    };\n    DragAndDrop.prototype.appendCloneElement = function (element) {\n        if (this.parent.eventDragArea) {\n            document.querySelector(this.parent.eventDragArea).appendChild(this.actionObj.clone);\n        }\n        else {\n            element.appendChild(this.actionObj.clone);\n        }\n    };\n    DragAndDrop.prototype.getEventWrapper = function (index) {\n        var eventWrapper;\n        var isAllDayDrag = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var wrapperClass = isAllDayDrag ? '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n            eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n        }\n        else {\n            var targetWrapper = this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS).item(index);\n            eventWrapper = targetWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n            if (!eventWrapper) {\n                eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                targetWrapper.appendChild(eventWrapper);\n            }\n        }\n        return eventWrapper;\n    };\n    DragAndDrop.prototype.getAllDayEventHeight = function () {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_CLASS });\n        this.parent.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n        var eventHeight = eventWrapper.offsetHeight;\n        remove(eventWrapper);\n        return eventHeight;\n    };\n    DragAndDrop.prototype.isAllowDrop = function (e) {\n        if (!this.actionObj.excludeSelectors) {\n            return false;\n        }\n        var dropSelectors = this.actionObj.excludeSelectors.split(',');\n        var isAllowDrop = false;\n        for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {\n            var selector = dropSelectors_1[_i];\n            if (e.target.classList.contains(selector)) {\n                isAllowDrop = true;\n                break;\n            }\n        }\n        return isAllowDrop;\n    };\n    /**\n     * Get module name.\n     */\n    DragAndDrop.prototype.getModuleName = function () {\n        return 'dragAndDrop';\n    };\n    return DragAndDrop;\n}(ActionBase));\nexport { DragAndDrop };\n","import { createElement, append, prepend, isNullOrUndefined, getValue, getDefaultDateObject, cldrData, addClass, setStyleAttribute, formatUnit, EventHandler } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * view base\n */\nexport var ViewHelper;\n(function (ViewHelper) {\n    ViewHelper.getDayName = function (proxy, date) {\n        return proxy.getDayNames('abbreviated')[date.getDay()];\n    };\n    ViewHelper.getDate = function (proxy, date) {\n        return proxy.globalize.formatDate(date, { format: 'd', calendar: proxy.getCalendarMode() });\n    };\n    ViewHelper.getTime = function (proxy, date) {\n        if (proxy.isAdaptive) {\n            if (proxy.timeFormat === 'HH:mm' || proxy.timeFormat === 'HH.mm') {\n                return proxy.globalize.formatDate(date, { format: 'H', calendar: proxy.getCalendarMode() });\n            }\n            return proxy.globalize.formatDate(date, { skeleton: 'h', calendar: proxy.getCalendarMode() });\n        }\n        return proxy.getTimeString(date);\n    };\n    ViewHelper.getTimelineDate = function (proxy, date) {\n        var skeleton = 'MMMd';\n        var text = proxy.globalize.formatDate(date, { skeleton: skeleton, calendar: proxy.getCalendarMode() }) + ', ' +\n            proxy.getDayNames('wide')[date.getDay()];\n        return util.capitalizeFirstWord(text, 'multiple');\n    };\n    ViewHelper.getWeekNumberContent = function (proxy, dates) {\n        var weekNumber;\n        if (proxy.weekRule === 'FirstDay') {\n            var weekNumberDate = util.getWeekLastDate(dates.slice(-1)[0], proxy.firstDayOfWeek);\n            weekNumber = util.getWeekNumber(weekNumberDate);\n        }\n        else if (proxy.weekRule === 'FirstFourDayWeek') {\n            var weekFirstDate = util.getWeekFirstDate(dates.slice(-1)[0], proxy.firstDayOfWeek);\n            var weekLastDate = util.getWeekLastDate(dates.slice(-1)[0], proxy.firstDayOfWeek);\n            var weekMidDate = util.getWeekMiddleDate(weekFirstDate, weekLastDate);\n            weekNumber = util.getWeekNumber(weekMidDate);\n        }\n        else if (proxy.weekRule === 'FirstFullWeek') {\n            var weekFirstDate = util.getWeekFirstDate(dates.slice(-1)[0], proxy.firstDayOfWeek);\n            weekNumber = util.getWeekNumber(weekFirstDate);\n        }\n        return weekNumber;\n    };\n})(ViewHelper || (ViewHelper = {}));\nvar ViewBase = /** @class */ (function () {\n    /**\n     * Constructor\n     */\n    function ViewBase(parent) {\n        this.parent = parent;\n    }\n    ViewBase.prototype.isTimelineView = function () {\n        return this.parent.currentView.indexOf('Timeline') !== -1;\n    };\n    ViewBase.prototype.getContentRows = function () {\n        return [];\n    };\n    ViewBase.prototype.serverRenderLayout = function () {\n        // Need only for layout server rendering\n    };\n    ViewBase.prototype.createEventTable = function (trCount) {\n        var eventTable = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        append(this.getEventRows(trCount), eventTable);\n        return eventTable;\n    };\n    ViewBase.prototype.getEventRows = function (trCount) {\n        var eventRows = [];\n        var eventContainer;\n        for (var row = 0; row < trCount; row++) {\n            eventContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n                eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[row].groupIndex.toString());\n            }\n            eventRows.push(eventContainer);\n        }\n        return eventRows;\n    };\n    ViewBase.prototype.collapseRows = function (wrap) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + cls.EVENT_TABLE_CLASS));\n        }\n    };\n    ViewBase.prototype.createTableLayout = function (className) {\n        var clsName = className || '';\n        var table = createElement('table', { className: cls.SCHEDULE_TABLE_CLASS + ' ' + clsName });\n        var tbody = createElement('tbody');\n        table.appendChild(tbody);\n        return table;\n    };\n    ViewBase.prototype.createColGroup = function (table, lastRow) {\n        var length = lastRow.length;\n        if (lastRow[0] && lastRow[0].colSpan) {\n            length = lastRow.map(function (value) { return value.colSpan; }).reduce(function (prev, next) { return prev + next; });\n        }\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < length; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        prepend([colGroupEle], table);\n    };\n    ViewBase.prototype.getScrollXIndent = function (content) {\n        return content.offsetHeight - content.clientHeight > 0 ? util.getScrollBarWidth() : 0;\n    };\n    ViewBase.prototype.scrollTopPanel = function (target) {\n        this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n    };\n    ViewBase.prototype.scrollHeaderLabels = function (target) {\n        var headerTable = this.element.querySelector('.e-date-header-wrap table');\n        var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n        var applyLeft = function (headerCells, isRtl) {\n            var currentCell;\n            var tdLeft = 0;\n            var colSpan = 0;\n            var hiddenLeft = isRtl ? target.scrollWidth - target.offsetWidth - target.scrollLeft : target.scrollLeft;\n            for (var _i = 0, headerCells_2 = headerCells; _i < headerCells_2.length; _i++) {\n                var cell = headerCells_2[_i];\n                colSpan += parseInt(cell.getAttribute('colSpan'), 10);\n                if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n                    currentCell = cell;\n                    break;\n                }\n                tdLeft += cell.offsetWidth;\n            }\n            if (!isNullOrUndefined(currentCell)) {\n                currentCell.children[0].style[isRtl ? 'right' : 'left'] = (hiddenLeft - tdLeft) + 'px';\n            }\n        };\n        var classNames = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n        for (var _i = 0, classNames_1 = classNames; _i < classNames_1.length; _i++) {\n            var className = classNames_1[_i];\n            var headerCells = [].slice.call(this.element.querySelectorAll(className));\n            if (headerCells.length > 0) {\n                for (var _a = 0, headerCells_1 = headerCells; _a < headerCells_1.length; _a++) {\n                    var element = headerCells_1[_a];\n                    element.children[0].style[this.parent.enableRtl ? 'right' : 'left'] = '';\n                }\n                applyLeft(headerCells, this.parent.enableRtl);\n            }\n        }\n    };\n    ViewBase.prototype.addAttributes = function (td, element) {\n        if (td.template) {\n            append(td.template, element);\n        }\n        if (td.colSpan) {\n            element.setAttribute('colspan', td.colSpan.toString());\n        }\n        if (td.className) {\n            addClass([element], td.className);\n        }\n    };\n    ViewBase.prototype.getHeaderBarHeight = function () {\n        var headerBarHeight = 2;\n        if (this.parent.headerModule) {\n            headerBarHeight += util.getOuterHeight(this.parent.headerModule.getHeaderElement());\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resHeader = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n            if (resHeader) {\n                headerBarHeight += resHeader.offsetHeight;\n            }\n        }\n        return headerBarHeight;\n    };\n    ViewBase.prototype.renderPanel = function (type) {\n        if (type === cls.PREVIOUS_PANEL_CLASS) {\n            prepend([this.element], this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        }\n    };\n    ViewBase.prototype.setPanel = function (panel) {\n        this.element = panel;\n    };\n    ViewBase.prototype.getPanel = function () {\n        return this.element;\n    };\n    ViewBase.prototype.getDatesHeaderElement = function () {\n        return this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n    };\n    ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n        // Here getDateSlots only need in vertical and month views\n        return [];\n    };\n    ViewBase.prototype.generateColumnLevels = function () {\n        // Here generateColumnLevels only need in vertical and month views\n        return [];\n    };\n    ViewBase.prototype.getColumnLevels = function () {\n        return this.colLevels;\n    };\n    ViewBase.prototype.highlightCurrentTime = function () {\n        // Here showTimeIndicator functionalities\n    };\n    ViewBase.prototype.startDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.endDate = function () {\n        return util.addDays(this.renderDates[this.renderDates.length - 1], 1);\n    };\n    ViewBase.prototype.getStartHour = function () {\n        var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n        if (isNullOrUndefined(startHour)) {\n            startHour = new Date(2000, 0, 0, 0);\n        }\n        return startHour;\n    };\n    ViewBase.prototype.getEndHour = function () {\n        var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n        if (isNullOrUndefined(endHour)) {\n            endHour = new Date(2000, 0, 0, 0);\n        }\n        return endHour;\n    };\n    ViewBase.prototype.isCurrentDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === this.parent.getCurrentTime().setHours(0, 0, 0, 0);\n    };\n    ViewBase.prototype.isCurrentMonth = function (date) {\n        return date.getFullYear() ===\n            this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n    };\n    ViewBase.prototype.isWorkDay = function (date, workDays) {\n        if (workDays === void 0) { workDays = this.parent.activeViewOptions.workDays; }\n        if (workDays.indexOf(date.getDay()) >= 0) {\n            return true;\n        }\n        return false;\n    };\n    ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n            return false;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        return !(util.getDateInMs(date) < util.getDateInMs(startHour) || util.getDateInMs(date) >= util.getDateInMs(endHour) ||\n            !this.isWorkDay(date, workDays));\n    };\n    ViewBase.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        // Due to same code for vertical and time line, week & work week views, if condition has used\n        if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n            var selectedDate = util.resetTime(this.parent.selectedDate);\n            var start = util.getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_1 = util.WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = util.addDays(start, 1);\n            }\n        }\n        else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            var start = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_2 = util.WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n                start = util.addDays(start, 1);\n            }\n        }\n        else {\n            var dayCount = this.parent.currentView === 'Agenda' ? this.parent.agendaDaysCount :\n                this.parent.activeViewOptions.interval;\n            var start = util.resetTime(this.parent.selectedDate);\n            do {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = util.addDays(start, 1);\n            } while (dayCount !== renderDates.length);\n        }\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    ViewBase.prototype.getNextPreviousDate = function (type) {\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n            if (this.parent.activeViewOptions.showWeekend) {\n                var daysCount = this.parent.activeViewOptions.interval;\n                return util.addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n            }\n            else {\n                var date = void 0;\n                if (type === 'next') {\n                    date = util.addDays(this.renderDates.slice(-1)[0], 1);\n                    while (!this.isWorkDay(date)) {\n                        date = util.addDays(date, 1);\n                    }\n                }\n                else {\n                    date = util.addDays(this.renderDates[0], -1);\n                    var count = 0;\n                    do {\n                        if (this.isWorkDay(date)) {\n                            count += 1;\n                        }\n                        if (this.parent.activeViewOptions.interval !== count) {\n                            date = util.addDays(date, -1);\n                        }\n                    } while (this.parent.activeViewOptions.interval !== count);\n                }\n                return date;\n            }\n        }\n        var weekLength = type === 'next' ? util.WEEK_LENGTH : -util.WEEK_LENGTH;\n        return util.addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);\n    };\n    ViewBase.prototype.getLabelText = function (view) {\n        var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n        return this.parent.localeObj.getConstant(viewStr) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'long', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    ViewBase.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive) {\n            var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n    };\n    ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n        var globalize = this.parent.globalize;\n        var mode = this.parent.getCalendarMode();\n        if (startDate === endDate) {\n            endDate = null;\n        }\n        if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var text = '';\n            if (!endDate) {\n                text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });\n                return util.capitalizeFirstWord(text, 'multiple');\n            }\n            text = (globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }) +\n                ' - ' + globalize.formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }));\n            return util.capitalizeFirstWord(text, 'multiple');\n        }\n        var formattedStr;\n        var longDateFormat;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n        }\n        else {\n            longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n        }\n        if (!endDate) {\n            return util.capitalizeFirstWord(globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }), 'single');\n        }\n        var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n        if (dateFormat.substr(0, 1) === 'd') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMMM yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd MMM', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.formatDate(startDate, { format: 'dd MMM yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n            }\n        }\n        else if (dateFormat.substr(0, 1) === 'm') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd, yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.\n                    formatDate(startDate, { format: 'MMM dd, yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n            }\n        }\n        else {\n            formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }) + ' - ' +\n                globalize.formatDate(endDate, { format: longDateFormat, calendar: mode });\n        }\n        return util.capitalizeFirstWord(formattedStr, 'multiple');\n    };\n    ViewBase.prototype.getMobileDateElement = function (date, className) {\n        var wrap = createElement('div', {\n            className: className,\n            innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() }) + '</div>' + '<div class=\"e-m-day\">' +\n                util.capitalizeFirstWord(this.parent.globalize.formatDate(date, { format: 'E', calendar: this.parent.getCalendarMode() }), 'single') + '</div>'\n        });\n        return wrap;\n    };\n    ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n        if (className === void 0) { className = cls.TEXT_ELLIPSIS; }\n        if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n            var data = { resource: tdData.resource, resourceData: tdData.resourceData };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n            var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n            append(quickTemplate, tdElement);\n        }\n        else {\n            tdElement.appendChild(createElement('div', {\n                className: className, innerHTML: tdData.resourceData[tdData.resource.textField]\n            }));\n        }\n    };\n    ViewBase.prototype.renderResourceMobileLayout = function () {\n        if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n            return;\n        }\n        this.parent.resourceBase.renderResourceHeader();\n        this.parent.resourceBase.renderResourceTree();\n    };\n    ViewBase.prototype.addAutoHeightClass = function (element) {\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([element], cls.AUTO_HEIGHT);\n        }\n    };\n    ViewBase.prototype.getColElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' col, .' + cls.DATE_HEADER_WRAP_CLASS + ' col'));\n    };\n    ViewBase.prototype.setColWidth = function (content) {\n        if (this.isTimelineView()) {\n            var colElements = this.getColElements();\n            var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n            var colWidth_1 = Math.ceil(contentBody.offsetWidth / (colElements.length / 2));\n            colElements.forEach(function (col) { return setStyleAttribute(col, { 'width': formatUnit(colWidth_1) }); });\n            if (content.offsetHeight !== content.clientHeight) {\n                var resourceColumn = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n                if (!isNullOrUndefined(resourceColumn)) {\n                    setStyleAttribute(resourceColumn, { 'height': formatUnit(content.clientHeight) });\n                }\n            }\n        }\n    };\n    ViewBase.prototype.resetColWidth = function () {\n        var colElements = this.getColElements();\n        for (var _i = 0, colElements_1 = colElements; _i < colElements_1.length; _i++) {\n            var col = colElements_1[_i];\n            col.style.width = '';\n        }\n    };\n    ViewBase.prototype.getContentAreaElement = function () {\n        return this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    };\n    ViewBase.prototype.wireExpandCollapseIconEvents = function () {\n        if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n            var treeIcons = [].slice.call(this.element.querySelectorAll('.' + cls.RESOURCE_TREE_ICON_CLASS));\n            for (var _i = 0, treeIcons_1 = treeIcons; _i < treeIcons_1.length; _i++) {\n                var icon = treeIcons_1[_i];\n                EventHandler.clearEvents(icon);\n                EventHandler.add(icon, 'click', this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);\n            }\n        }\n    };\n    ViewBase.prototype.scrollToDate = function (scrollDate) {\n        if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        var scrollWrap = this.getContentAreaElement();\n        var tdDate = this.parent.getMsFromDate(new Date(util.resetTime(new Date(+scrollDate)).getTime()));\n        var dateElement = scrollWrap.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + tdDate + \"\\\"]\");\n        if (this.parent.currentView === 'Month' && dateElement) {\n            scrollWrap.scrollTop = dateElement.offsetTop;\n        }\n        if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n            if (!this.parent.enableRtl) {\n                scrollWrap.scrollLeft = dateElement.offsetLeft;\n            }\n            else {\n                scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n            }\n        }\n    };\n    ViewBase.prototype.setPersistence = function () {\n        if (this.parent.enablePersistence) {\n            var contentWrap = this.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(contentWrap)) {\n                this.parent.scrollLeft = contentWrap.scrollLeft;\n                this.parent.scrollTop = contentWrap.scrollTop;\n            }\n        }\n    };\n    ViewBase.prototype.retainScrollPosition = function () {\n        if (this.parent.enablePersistence) {\n            var conWrap = this.parent.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {\n                conWrap.scrollTop = this.parent.scrollTop;\n                conWrap.scrollLeft = this.parent.scrollLeft;\n            }\n        }\n    };\n    return ViewBase;\n}());\nexport { ViewBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase, ViewHelper } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    /**\n     * Constructor for vertical view\n     */\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        return _this;\n    }\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n        this.parent.off(event.dataReady, this.renderEvents);\n    };\n    VerticalView.prototype.renderEvents = function () {\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var appointment = new VerticalEvent(this.parent);\n            appointment.renderAppointments();\n        }\n        else {\n            var appointment = new MonthEvent(this.parent);\n            appointment.renderAppointments();\n        }\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    };\n    VerticalView.prototype.onApaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onApaptiveScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.uiStateValues.top = e.target.scrollTop;\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timecells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setColWidth(content);\n        this.setContentHeight(content, timecells, scrollerHeight);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // tslint:disable:no-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        // tslint:enable:no-any\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timecells) {\n                    timecells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (isNullOrUndefined(date) || !isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        if (this.parent.isServerRenderer()) {\n            var curEle = [].slice.call(this.element.querySelectorAll('.' + cls.CURRENT_DAY_CLASS));\n            if (curEle.length > 0) {\n                removeClass(curEle, cls.CURRENT_DAY_CLASS);\n            }\n            var curDate = util.addLocalOffset(new Date(new Date().setHours(0, 0, 0, 0)));\n            var queryString = '.' + cls.DATE_HEADER_CLASS + '[data-date=\"' + curDate.getTime().toString() + '\"]';\n            curEle = [].slice.call(this.element.querySelectorAll(queryString));\n            for (var _i = 0, curEle_1 = curEle; _i < curEle_1.length; _i++) {\n                var ele = curEle_1[_i];\n                addClass([ele], cls.CURRENT_DAY_CLASS);\n            }\n        }\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                if (workCells.length > 0) {\n                    this.changeCurrentTimePosition();\n                }\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            for (var _i = 0, _a = this.parent.resourceBase.lastResourceLevel; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(this.parent.getCurrentTime()));\n                if (index >= 0) {\n                    var resIndex = this.parent.activeViewOptions.group.byDate ?\n                        (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                    currentDateIndex.push(resIndex);\n                }\n                count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) ?\n                this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n            var indicator = timeIndicator_1[_i];\n            remove(indicator);\n        }\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[i].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            curTimeWrap[day].appendChild(createElement('div', { className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n            addClass([timeTrs[rowIndex].lastElementChild], cls.HIDE_CHILDS_CLASS);\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartHour();\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return this.element.querySelector('.' + cls.WORK_CELLS_CLASS).offsetHeight;\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        var dateValue = util.addLocalOffset(date);\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: dateValue, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + ViewHelper.getTimelineDate(this.parent, date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(ViewHelper.getDayName(this.parent, date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + ViewHelper.getDate(this.parent, date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: dateValue, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + ViewHelper.getTime(this.parent, date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: dateValue, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = '&nbsp;';\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: dateValue, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.serverRenderLayout = function () {\n        this.setPanel(this.parent.element.querySelector('.' + cls.TABLE_WRAP_CLASS));\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        var headerCells = [].slice.call(this.element.querySelectorAll('.' + cls.DATE_HEADER_WRAP_CLASS + ' td.' + cls.HEADER_CELLS_CLASS));\n        for (var _i = 0, headerCells_1 = headerCells; _i < headerCells_1.length; _i++) {\n            var cell = headerCells_1[_i];\n            EventHandler.clearEvents(cell);\n            this.wireMouseEvents(cell);\n        }\n        var alldayCells = [].slice.call(this.element.querySelectorAll('.' + cls.DATE_HEADER_WRAP_CLASS + ' td.' + cls.ALLDAY_CELLS_CLASS));\n        for (var _a = 0, alldayCells_1 = alldayCells; _a < alldayCells_1.length; _a++) {\n            var cell = alldayCells_1[_a];\n            EventHandler.clearEvents(cell);\n            this.wireCellEvents(cell);\n        }\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.setTranslateValue();\n        }\n        var wrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        EventHandler.clearEvents(contentBody);\n        this.wireCellEvents(contentBody);\n        EventHandler.clearEvents(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onApaptiveMove, this);\n        this.wireExpandCollapseIconEvents();\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        if (this.parent.isServerRenderer()) {\n            this.colLevels = this.generateColumnLevels();\n            if (this.parent.resourceBase && this.parent.activeViewOptions.group.resources.length > 0 &&\n                !this.parent.uiStateValues.isGroupAdaptive && this.parent.activeView.isTimelineView()) {\n                this.parent.resourceBase.setRenderedResources();\n            }\n            return;\n        }\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onApaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onApaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            workTd.appendChild(this.renderContentArea());\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[i][0] && this.colLevels[i][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNo = ViewHelper.getWeekNumberContent(this.parent, this.renderDates);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            ntr_1.appendChild(this.createTd(data_1));\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false', 'aria-label': 'Expand section'\n            },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS,\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        var nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            addClass([ntr], cls.HEADER_ROW_CLASS);\n            var level = this.colLevels[i];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[j]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr');\n        addClass([ntr], cls.ALLDAY_ROW_CLASS);\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[j]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], cls.DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onApaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var _this = this;\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var tbody = table.querySelector('tbody');\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var ntd = _this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            tbody.appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + tdData.date)))) {\n            clsName.push(cls.DISABLE_DATES);\n        }\n        var cellDate = util.resetTime(new Date('' + tdData.date));\n        util.setTime(cellDate, util.getDateInMs(r.date));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var dateValue = util.addLocalOffset(cellDate);\n            var args_1 = { date: dateValue, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createEventWrapper = function (type) {\n        if (type === void 0) { type = ''; }\n        var tr = createElement('tr');\n        var levels = this.colLevels.slice(-1)[0];\n        for (var i = 0, len = levels.length; i < len; i++) {\n            var col = levels[i];\n            var appointmentWrap = createElement('td', {\n                className: (type === 'allDay') ? cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : (type === 'timeIndicator') ?\n                    cls.TIMELINE_WRAPPER_CLASS : cls.DAY_WRAPPER_CLASS, attrs: { 'data-date': col.date.getTime().toString() }\n            });\n            if (!isNullOrUndefined(col.groupIndex)) {\n                appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n            }\n            if (type === '') {\n                var innerWrapper = createElement('div', {\n                    id: cls.APPOINTMENT_WRAPPER_CLASS + '-' + i.toString(),\n                    className: cls.APPOINTMENT_WRAPPER_CLASS\n                });\n                appointmentWrap.appendChild(innerWrapper);\n            }\n            tr.appendChild(appointmentWrap);\n        }\n        return tr;\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            length = (Math.abs(msEndHour - msStartHour) / msInterval) - ((new Date(msEndHour).getTimezoneOffset()\n                - new Date(msStartHour).getTimezoneOffset()) / (60 / this.parent.activeViewOptions.timeScale.slotCount));\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    /**\n     * Get module name.\n     */\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    /**\n     * To destroy the vertical view.\n     * @return {void}\n     * @private\n     */\n    VerticalView.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * day view\n */\nvar Day = /** @class */ (function (_super) {\n    __extends(Day, _super);\n    /**\n     * Constructor for day view\n     */\n    function Day(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    Day.prototype.getModuleName = function () {\n        return 'day';\n    };\n    return Day;\n}(VerticalView));\nexport { Day };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * week view\n */\nvar Week = /** @class */ (function (_super) {\n    __extends(Week, _super);\n    /**\n     * Constructor for week view\n     */\n    function Week(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-week-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    Week.prototype.getModuleName = function () {\n        return 'week';\n    };\n    return Week;\n}(VerticalView));\nexport { Week };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\nimport * as util from '../base/util';\n/**\n * work week view\n */\nvar WorkWeek = /** @class */ (function (_super) {\n    __extends(WorkWeek, _super);\n    /**\n     * Constructor for work week view\n     */\n    function WorkWeek(par) {\n        var _this = _super.call(this, par) || this;\n        _this.viewClass = 'e-work-week-view';\n        return _this;\n    }\n    WorkWeek.prototype.startDate = function () {\n        var startDate = this.renderDates[0];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            startDate = this.parent.resourceBase.getResourceRenderDates()[0];\n        }\n        return startDate;\n    };\n    WorkWeek.prototype.endDate = function () {\n        var endDate = util.addDays(this.renderDates[this.renderDates.length - 1], 1);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            endDate = util.addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);\n        }\n        return endDate;\n    };\n    /**\n     * Get module name.\n     */\n    WorkWeek.prototype.getModuleName = function () {\n        return 'workWeek';\n    };\n    return WorkWeek;\n}(VerticalView));\nexport { WorkWeek };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase, ViewHelper } from './view-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month view\n */\nvar Month = /** @class */ (function (_super) {\n    __extends(Month, _super);\n    /**\n     * Constructor for month view\n     */\n    function Month(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'wide';\n        _this.viewClass = 'e-month-view';\n        _this.isInverseTableSelect = false;\n        _this.monthDates = {};\n        return _this;\n    }\n    Month.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUIUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n        this.parent.on(event.cellClick, this.onCellClick, this);\n    };\n    Month.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onScrollUIUpdate);\n        this.parent.off(event.dataReady, this.onDataReady);\n        this.parent.off(event.cellClick, this.onCellClick);\n    };\n    Month.prototype.onDataReady = function (args) {\n        var monthEvent = new MonthEvent(this.parent);\n        monthEvent.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    Month.prototype.onCellClick = function (event) {\n        // Here cell click\n    };\n    Month.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollTopPanel(e.target);\n        this.scrollLeftPanel(e.target);\n        this.setPersistence();\n    };\n    Month.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (leftPanel) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    Month.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS);\n    };\n    Month.prototype.onScrollUIUpdate = function (args) {\n        var headerHeight = this.getHeaderBarHeight();\n        var header = this.getDatesHeaderElement();\n        var content = this.getContentAreaElement();\n        var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n        var leftPanel = this.getLeftPanelElement();\n        this.setContentHeight(content, leftPanel, height);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // tslint:disable:no-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        // tslint:enable:no-any\n        this.setColWidth(content);\n        if (args.scrollPosition) {\n            if (leftPanel) {\n                leftPanel.scrollTop = args.scrollPosition.top;\n            }\n            content.scrollTop = args.scrollPosition.top;\n            content.scrollLeft = args.scrollPosition.left;\n        }\n        else {\n            var headerCell = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"'\n                + this.parent.getMsFromDate(this.parent.selectedDate) + '\"]');\n            if (!isNullOrUndefined(headerCell)) {\n                content.scrollLeft = !this.parent.enableRtl ?\n                    headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n            }\n            else {\n                content.scrollLeft = 0;\n            }\n        }\n        this.retainScrollPosition();\n    };\n    Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        content.style.height = 'auto';\n        if (this.parent.currentView === 'Month') {\n            content.style.height = formatUnit(height);\n        }\n        if (leftPanelElement) {\n            if (this.parent.currentView === 'MonthAgenda') {\n                height = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n            }\n            leftPanelElement.style.height = 'auto';\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n    };\n    Month.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.currentView === 'MonthAgenda') {\n                colLevels = [level];\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Month.prototype.getDateSlots = function (renderDates, workDays) {\n        var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        var dateSlots = [];\n        for (var col = 0; col < count; col++) {\n            var classList = [cls.HEADER_CELLS_CLASS];\n            var currentDateIndex = renderDates.slice(0, count).map(function (date) { return date.getDay(); });\n            if (this.isCurrentMonth(this.parent.selectedDate) && currentDateIndex.indexOf(this.parent.getCurrentTime().getDay()) === col) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: renderDates[col], type: 'monthDay', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    Month.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n            return 'abbreviated';\n        }\n        return 'wide';\n    };\n    Month.prototype.serverRenderLayout = function () {\n        var curElem = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CURRENT_DAY_CLASS));\n        if (curElem.length > 0) {\n            removeClass(curElem, cls.CURRENT_DAY_CLASS);\n        }\n        var curDate = util.addLocalOffset(new Date(new Date().setHours(0, 0, 0, 0)));\n        var queryString = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + curDate.getTime().toString() + '\"]';\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'MonthAgenda') {\n            curElem = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CURRENTDATE_CLASS));\n            if (curElem.length > 0) {\n                removeClass(curElem, cls.CURRENTDATE_CLASS);\n            }\n            var curEle = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            for (var _i = 0, curEle_1 = curEle; _i < curEle_1.length; _i++) {\n                var ele = curEle_1[_i];\n                var index = ele.cellIndex;\n                var curHeader = [].slice.call(this.parent.element.querySelectorAll('.' + cls.HEADER_CELLS_CLASS))[index];\n                addClass([ele], cls.CURRENTDATE_CLASS);\n                addClass([curHeader], cls.CURRENT_DAY_CLASS);\n            }\n        }\n        if (this.parent.currentView === 'TimelineMonth') {\n            var curEle = this.parent.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + curDate.getTime().toString() + '\"]');\n            if (!isNullOrUndefined(curEle)) {\n                addClass([curEle], cls.CURRENT_DAY_CLASS);\n            }\n        }\n        this.setPanel(this.parent.element.querySelector('.' + cls.TABLE_WRAP_CLASS));\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        var headerCells = [].slice.call(this.element.querySelectorAll('.' + cls.DATE_HEADER_WRAP_CLASS + ' td.' + cls.HEADER_CELLS_CLASS));\n        for (var _a = 0, headerCells_1 = headerCells; _a < headerCells_1.length; _a++) {\n            var cell = headerCells_1[_a];\n            EventHandler.clearEvents(cell);\n            this.wireCellEvents(cell);\n        }\n        var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        EventHandler.clearEvents(contentBody);\n        this.wireCellEvents(contentBody);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.setTranslateValue();\n        }\n        var wrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        EventHandler.clearEvents(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        this.wireExpandCollapseIconEvents();\n        this.renderAppointmentContainer();\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Month.prototype.renderLayout = function (type) {\n        this.dayNameFormat = this.getDayNameFormat();\n        if (this.parent.isServerRenderer()) {\n            this.colLevels = this.generateColumnLevels();\n            if (this.parent.activeView.isTimelineView() && this.parent.resourceBase &&\n                this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.parent.resourceBase.setRenderedResources();\n            }\n            return;\n        }\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        addClass([this.element], clsList);\n        this.renderPanel(type);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Month.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    Month.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        this.renderLeftIndent(tr);\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    Month.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('td', { className: 'e-left-indent' }));\n        }\n    };\n    Month.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(this.renderWeekNumberContent());\n        }\n        var workTd = createElement('td');\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var contentArea = this.renderContentArea();\n        if (this.parent.currentView === 'Month') {\n            wrap.appendChild(contentArea);\n        }\n        else {\n            var monthAgendaWrapper = createElement('div', { className: cls.TABLE_CONTAINER_CLASS });\n            monthAgendaWrapper.appendChild(contentArea);\n            wrap.appendChild(monthAgendaWrapper);\n        }\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        this.element.querySelector('tbody').appendChild(tr);\n        this.renderAppointmentContainer();\n    };\n    Month.prototype.renderWeekNumberContent = function () {\n        var dateCol = this.renderDates.map(function (date) { return new Date(+date); });\n        var td = createElement('td');\n        var contentWrapper = createElement('div', { className: cls.WEEK_NUMBER_WRAPPER_CLASS });\n        td.appendChild(contentWrapper);\n        var contentWrapTable = this.createTableLayout();\n        contentWrapper.appendChild(contentWrapTable);\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n            this.parent.activeViewOptions.workDays.length;\n        for (var i = 0, length_1 = (this.renderDates.length / noOfDays); i < length_1; i++) {\n            var dates = dateCol.splice(0, noOfDays);\n            var weekNumber = ViewHelper.getWeekNumberContent(this.parent, dates).toString();\n            contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n        }\n        return td;\n    };\n    Month.prototype.renderAppointmentContainer = function () {\n        //Here needs to render mobile view appointment details on selected date\n    };\n    Month.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var table = this.createTableLayout();\n        this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n        var trEle = createElement('tr');\n        for (var i = 0; i < this.colLevels.length; i++) {\n            var level = this.colLevels[i];\n            var ntr = trEle.cloneNode();\n            for (var j = 0; j < level.length; j++) {\n                var td = level[j];\n                ntr.appendChild(this.createHeaderCell(td));\n            }\n            table.querySelector('tbody').appendChild(ntr);\n        }\n        wrap.appendChild(table);\n        return container;\n    };\n    Month.prototype.createHeaderCell = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.type === 'monthDay') {\n            var ele = createElement('span', { innerHTML: util.capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single') });\n            tdEle.appendChild(ele);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader') {\n            addClass([tdEle], cls.DATE_HEADER_CLASS);\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                var dateValue = util.addLocalOffset(td.date);\n                var cellArgs = { date: dateValue, type: td.type };\n                var elementId = this.parent.element.id + '_';\n                var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                var templateId = elementId + viewName + 'dateHeaderTemplate';\n                var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n                if (dateTemplate && dateTemplate.length) {\n                    append(dateTemplate, tdEle);\n                }\n            }\n            else {\n                var ele = createElement('span', { className: cls.NAVIGATE_CLASS });\n                var skeleton = 'full';\n                var title = this.parent.globalize.formatDate(td.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n                ele.setAttribute('title', util.capitalizeFirstWord(title, 'multiple'));\n                var innerText = (this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive) ?\n                    this.parent.globalize.formatDate(td.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                    this.parent.globalize.formatDate(td.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n                ele.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n                tdEle.appendChild(ele);\n            }\n            this.wireCellEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    Month.prototype.getContentSlots = function () {\n        if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n            return [];\n        }\n        var slotDatas = [];\n        var prepareSlots = function (rowIndex, renderDate, resData, classList) {\n            var data = {\n                date: new Date(+renderDate), groupIndex: resData.groupIndex, workDays: resData.workDays,\n                type: 'monthCells', className: classList || [cls.WORK_CELLS_CLASS]\n            };\n            if (!slotDatas[rowIndex]) {\n                slotDatas[rowIndex] = [];\n            }\n            slotDatas[rowIndex].push(data);\n        };\n        var includeResource = this.parent.currentView !== 'MonthAgenda' &&\n            this.parent.activeViewOptions.group.resources.length > 0;\n        if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n                var res = _a[_i];\n                var dates = res.renderDates.map(function (date) { return new Date(+date); });\n                var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : res.workDays.length;\n                for (var i = 0; i < (res.renderDates.length / count); i++) {\n                    var colDates = dates.splice(0, count);\n                    for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n                        var colDate = colDates_1[_b];\n                        prepareSlots(i, colDate, res);\n                    }\n                }\n            }\n        }\n        else {\n            var dates = this.renderDates.map(function (date) { return new Date(+date); });\n            var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n                this.parent.activeViewOptions.workDays.length;\n            for (var i = 0; i < (this.renderDates.length / count); i++) {\n                var colDates = dates.splice(0, count);\n                for (var _c = 0, colDates_2 = colDates; _c < colDates_2.length; _c++) {\n                    var colDate = colDates_2[_c];\n                    if (includeResource) {\n                        var lastRow = this.colLevels[(this.colLevels.length - 1)];\n                        var resourcesTd = lastRow.slice(0, lastRow.length / count);\n                        for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                            var clsList = void 0;\n                            if (resIndex !== 0) {\n                                clsList = [cls.WORK_CELLS_CLASS, cls.DISABLE_DATE];\n                            }\n                            prepareSlots(i, colDate, resourcesTd[resIndex], clsList);\n                        }\n                    }\n                    else {\n                        prepareSlots(i, colDate, this.colLevels[this.colLevels.length - 1][0]);\n                    }\n                }\n            }\n        }\n        return slotDatas;\n    };\n    Month.prototype.updateClassList = function (data) {\n        if (this.isOtherMonth(data.date)) {\n            data.className.push(cls.OTHERMONTH_CLASS);\n        }\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n        if (this.parent.currentView === 'MonthAgenda' && this.parent.isSelectedDate(data.date)) {\n            data.className.push(cls.SELECTED_CELL_CLASS);\n        }\n    };\n    Month.prototype.isOtherMonth = function (date) {\n        return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    };\n    Month.prototype.renderContentArea = function () {\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        if (this.parent.currentView === 'TimelineMonth') {\n            this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n        }\n        var monthDate = new Date(this.parent.selectedDate.getTime());\n        this.monthDates = {\n            start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n            end: this.parent.calendarUtil.lastDateOfMonth(util.addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n        };\n        var tBody = tbl.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.wireCellEvents(tBody);\n        return tbl;\n    };\n    Month.prototype.getContentRows = function () {\n        var trows = [];\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var slotDatas = this.getContentSlots();\n        for (var row = 0; row < slotDatas.length; row++) {\n            var ntr = tr.cloneNode();\n            for (var col = 0; col < slotDatas[row].length; col++) {\n                var ntd = this.createContentTd(slotDatas[row][col], td);\n                ntr.appendChild(ntd);\n            }\n            trows.push(ntr);\n        }\n        return trows;\n    };\n    Month.prototype.createContentTd = function (data, td) {\n        var ntd = td.cloneNode();\n        if (data.colSpan) {\n            ntd.setAttribute('colspan', data.colSpan.toString());\n        }\n        this.updateClassList(data);\n        var type = data.type;\n        if (data.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            data.className.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n            data.className.push(cls.WORKDAY_CLASS);\n        }\n        if (this.isCurrentDate(data.date)) {\n            data.className.push(cls.CURRENTDATE_CLASS);\n        }\n        addClass([ntd], data.className);\n        ntd.setAttribute('data-date', data.date.getTime().toString());\n        if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                data.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        this.renderDateHeaderElement(data, ntd);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var dateValue = util.addLocalOffset(data.date);\n            var args_1 = { date: dateValue, type: type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(cellTemplate, ntd);\n        }\n        var args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    Month.prototype.renderDateHeaderElement = function (data, ntd) {\n        if (this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var dateHeader = createElement('div', { className: cls.DATE_HEADER_CLASS });\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n            var dateValue = util.addLocalOffset(data.date);\n            var args = { date: dateValue, type: data.type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n            var cellheaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n            append(cellheaderTemplate, dateHeader);\n        }\n        else {\n            var innerText = (this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive) ?\n                this.parent.globalize.formatDate(data.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                this.parent.globalize.formatDate(data.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n            dateHeader.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n        }\n        ntd.appendChild(dateHeader);\n        if (this.getModuleName() === 'month') {\n            addClass([dateHeader], cls.NAVIGATE_CLASS);\n            var skeleton = 'full';\n            var annocementText = this.parent.globalize.formatDate(data.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            dateHeader.setAttribute('aria-label', annocementText);\n        }\n    };\n    Month.prototype.getMonthStart = function (currentDate) {\n        var monthStart = util.getWeekFirstDate(this.parent.calendarUtil.firstDateOfMonth(currentDate), this.parent.activeViewOptions.firstDayOfWeek);\n        var start = new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n        return start;\n    };\n    Month.prototype.getMonthEnd = function (currentDate) {\n        var endDate = util.addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n        var lastWeekOfMonth = util.getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n        var monthEnd = util.addDays(lastWeekOfMonth, util.WEEK_LENGTH - 1);\n        return monthEnd;\n    };\n    Month.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        var currentDate = util.resetTime(this.parent.selectedDate);\n        var start = this.getMonthStart(currentDate);\n        var monthEnd = this.getMonthEnd(currentDate);\n        do {\n            if (this.parent.activeViewOptions.showWeekend) {\n                renderDates.push(start);\n            }\n            else {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n            }\n            start = util.addDays(start, 1);\n            if (start.getHours() > 0) {\n                start = util.resetTime(start);\n            }\n        } while (start.getTime() <= monthEnd.getTime());\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    Month.prototype.getNextPreviousDate = function (type) {\n        if (type === 'next') {\n            return util.addMonths(this.parent.selectedDate, this.parent.activeViewOptions.interval);\n        }\n        else {\n            return util.addMonths(this.parent.selectedDate, -(this.parent.activeViewOptions.interval));\n        }\n    };\n    Month.prototype.getEndDateFromStartDate = function (start) {\n        return util.addDays(new Date(start.getTime()), 1);\n    };\n    Month.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            if (this.parent.activeViewOptions.interval > 1) {\n                var endDate = util.addMonths(util.lastDateOfMonth(this.parent.selectedDate), this.parent.activeViewOptions.interval - 1);\n                if (this.parent.selectedDate.getFullYear() === endDate.getFullYear()) {\n                    var monthNames = (this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' - ' +\n                        (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                        endDate.getFullYear();\n                    return util.capitalizeFirstWord(monthNames, 'single');\n                }\n                var text = (this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' ' +\n                    this.parent.selectedDate.getFullYear() + ' - ' + (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                    endDate.getFullYear();\n                return util.capitalizeFirstWord(text, 'single');\n            }\n            var format = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: format, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.parent.selectedDate);\n    };\n    Month.prototype.getLabelText = function (view) {\n        return this.parent.localeObj.getConstant(view) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    Month.prototype.createWeekNumberElement = function (text) {\n        var tr = createElement('tr');\n        var td = createElement('td', {\n            className: cls.WEEK_NUMBER_CLASS,\n            attrs: { 'title': (text ? this.parent.localeObj.getConstant('week') + ' ' + text : '') },\n            innerHTML: (text || '')\n        });\n        tr.appendChild(td);\n        var args = { elementType: 'weekNumberCell', element: td };\n        this.parent.trigger(event.renderCell, args);\n        return tr;\n    };\n    Month.prototype.unwireEvents = function () {\n        // No scroller events for month view\n    };\n    /**\n     * Get module name.\n     */\n    Month.prototype.getModuleName = function () {\n        return 'month';\n    };\n    /**\n     * To destroy the month.\n     * @return {void}\n     * @private\n     */\n    Month.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unwireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n        }\n    };\n    return Month;\n}(ViewBase));\nexport { Month };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, formatUnit, remove, createElement, addClass, closest, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase, ViewHelper } from './view-base';\nimport { YearEvent } from '../event-renderer/year';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * year view\n */\nvar Year = /** @class */ (function (_super) {\n    __extends(Year, _super);\n    /**\n     * Constructor for year view\n     */\n    function Year(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-year-view';\n        _this.isInverseTableSelect = false;\n        return _this;\n    }\n    Year.prototype.renderLayout = function (className) {\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n        addClass([this.element], [this.viewClass, viewTypeClass, className]);\n        this.renderPanel(className);\n        var calendarTable = this.createTableLayout(cls.OUTER_TABLE_CLASS);\n        this.element.appendChild(calendarTable);\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        var calendarTBody = calendarTable.querySelector('tbody');\n        this.rowCount = this.getRowColumnCount('row');\n        this.columnCount = this.getRowColumnCount('column');\n        this.renderHeader(calendarTBody);\n        this.renderContent(calendarTBody);\n        if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n            this.generateColumnLevels();\n            this.renderResourceMobileLayout();\n        }\n        this.wireEvents(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), 'scroll');\n        this.parent.notify(event.contentReady, {});\n    };\n    // tslint:disable-next-line:no-empty\n    Year.prototype.renderHeader = function (headerWrapper) {\n    };\n    Year.prototype.renderContent = function (content) {\n        var tr = createElement('tr');\n        content.appendChild(tr);\n        var td = createElement('td');\n        tr.appendChild(td);\n        this.element.querySelector('tbody').appendChild(tr);\n        var contentWrapper = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        td.appendChild(contentWrapper);\n        var calendarTable = this.createTableLayout('e-calendar-table');\n        contentWrapper.appendChild(calendarTable);\n        var cTr = createElement('tr');\n        calendarTable.querySelector('tbody').appendChild(cTr);\n        var cTd = createElement('td');\n        cTr.appendChild(cTd);\n        var calendarWrapper = createElement('div', { className: 'e-calendar-wrapper' });\n        cTd.appendChild(calendarWrapper);\n        var monthCollection = Array.apply(null, { length: 12 }).map(function (value, index) { return index; });\n        for (var _i = 0, monthCollection_1 = monthCollection; _i < monthCollection_1.length; _i++) {\n            var month = monthCollection_1[_i];\n            var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var calendarElement = createElement('div', {\n                className: 'e-month-calendar e-calendar',\n                attrs: { 'data-role': 'calendar' }\n            });\n            calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n            calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n            calendarWrapper.appendChild(calendarElement);\n        }\n    };\n    Year.prototype.renderCalendarHeader = function (currentDate) {\n        var headerWrapper = createElement('div', { className: 'e-header e-month' });\n        var headerContent = createElement('div', { className: 'e-day e-title', innerHTML: this.getMonthName(currentDate) });\n        headerWrapper.appendChild(headerContent);\n        this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: headerContent, date: currentDate });\n        return headerWrapper;\n    };\n    Year.prototype.renderCalendarContent = function (currentDate) {\n        var dateCollection = this.getMonthDates(currentDate);\n        var contentWrapper = createElement('div', { className: 'e-content e-month' });\n        var contentTable = this.createTableLayout('e-calendar-table ' + cls.CONTENT_TABLE_CLASS);\n        contentWrapper.appendChild(contentTable);\n        var thead = createElement('thead', { className: 'e-week-header' });\n        var tr = createElement('tr');\n        var currentWeek = util.getWeekFirstDate(util.firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('th'));\n        }\n        for (var i = 0; i < util.WEEK_LENGTH; i++) {\n            tr.appendChild(createElement('th', { innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()] }));\n            currentWeek = new Date(currentWeek.getTime() + util.MS_PER_DAY);\n        }\n        thead.appendChild(tr);\n        prepend([thead], contentTable);\n        var tbody = contentTable.querySelector('tbody');\n        while (dateCollection.length > 0) {\n            var weekDates = dateCollection.splice(0, util.WEEK_LENGTH);\n            var tr_1 = createElement('tr', { attrs: { 'role': 'row' } });\n            if (this.parent.activeViewOptions.showWeekNumber) {\n                var weekNumber = ViewHelper.getWeekNumberContent(this.parent, weekDates);\n                var td = createElement('td', {\n                    className: 'e-week-number',\n                    attrs: { 'role': 'gridcell', 'title': 'Week ' + weekNumber },\n                    innerHTML: weekNumber.toString()\n                });\n                tr_1.appendChild(td);\n                this.parent.trigger(event.renderCell, { elementType: 'weekNumberCells', element: td });\n            }\n            for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n                var date = weekDates_1[_i];\n                var td = createElement('td', {\n                    className: 'e-cell ' + cls.WORK_CELLS_CLASS,\n                    attrs: { 'role': 'gridcell', 'aria-selected': 'false', 'data-date': date.getTime().toString() }\n                });\n                td.appendChild(createElement('span', { className: 'e-day', innerHTML: date.getDate().toString() }));\n                var classList = [];\n                if (currentDate.getMonth() !== date.getMonth()) {\n                    classList.push(cls.OTHERMONTH_CLASS);\n                }\n                if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n                    classList = classList.concat(['e-today', 'e-selected']);\n                }\n                if (classList.length > 0) {\n                    addClass([td], classList);\n                }\n                tr_1.appendChild(td);\n                this.wireEvents(td, 'cell');\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n            tbody.appendChild(tr_1);\n        }\n        return contentWrapper;\n    };\n    Year.prototype.createTableColGroup = function (count) {\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < count; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        return colGroupEle;\n    };\n    Year.prototype.getMonthName = function (date) {\n        var month = this.parent.globalize.formatDate(date, {\n            format: this.parent.activeViewOptions.dateFormat || 'MMMM',\n            calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(month, 'multiple');\n    };\n    Year.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        colLevels.pop();\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n        if (startHour === void 0) { startHour = this.parent.workHours.start; }\n        if (endHour === void 0) { endHour = this.parent.workHours.end; }\n        var dateCol = [{\n                date: renderDates[0], type: 'dateHeader', className: [cls.HEADER_CELLS_CLASS], colSpan: 1, workDays: workDays,\n                startHour: new Date(+this.parent.globalize.parseDate(startHour, { skeleton: 'Hm' })),\n                endHour: new Date(+this.parent.globalize.parseDate(endHour, { skeleton: 'Hm' }))\n            }];\n        return dateCol;\n    };\n    Year.prototype.getMonthDates = function (date) {\n        var startDate = util.getWeekFirstDate(util.firstDateOfMonth(date), this.parent.firstDayOfWeek);\n        var endDate = util.addDays(new Date(+startDate), (6 * util.WEEK_LENGTH));\n        var dateCollection = [];\n        for (var start = startDate; start.getTime() < endDate.getTime(); start = util.addDays(start, 1)) {\n            dateCollection.push(util.resetTime(new Date(start)));\n        }\n        return dateCollection;\n    };\n    Year.prototype.getRowColumnCount = function (type) {\n        var monthCount = 12;\n        var year = this.parent.selectedDate.getFullYear();\n        var months = [];\n        for (var month = 0; month < monthCount; month++) {\n            months.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n        }\n        var maxCount = Math.max.apply(Math, months);\n        var count;\n        if (type === 'row') {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? monthCount : maxCount;\n            if (!this.parent.activeViewOptions.timeScale.enable && this.parent.activeViewOptions.orientation === 'Vertical') {\n                count = 1;\n            }\n        }\n        else {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : monthCount;\n        }\n        return count;\n    };\n    Year.prototype.isCurrentDate = function (date) {\n        return util.resetTime(new Date()).getTime() === util.resetTime(new Date(date.getTime())).getTime();\n    };\n    Year.prototype.onCellClick = function (e) {\n        var target = closest(e.target, '.' + cls.WORK_CELLS_CLASS);\n        var startDate = this.parent.getDateFromElement(target);\n        var endDate = util.addDays(new Date(startDate.getTime()), 1);\n        var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n        var moreEventArgs = { date: startDate, event: filteredEvents, element: e.target };\n        this.parent.quickPopup.moreEventClick(moreEventArgs, new Date());\n    };\n    Year.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var headerWrapper = this.getDatesHeaderElement();\n        if (headerWrapper) {\n            headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n        }\n        var scrollTopSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n        var scrollTopElement = this.element.querySelector(scrollTopSelector);\n        if (scrollTopElement) {\n            scrollTopElement.scrollTop = target.scrollTop;\n        }\n        this.setPersistence();\n    };\n    Year.prototype.onScrollUiUpdate = function (args) {\n        var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n        var headerWrapper = this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n        if (headerWrapper) {\n            height -= headerWrapper.offsetHeight;\n        }\n        var contentWrapper = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (contentWrapper) {\n            contentWrapper.style.height = formatUnit(height);\n        }\n        var leftPanelSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n        var leftPanelElement = this.element.querySelector(leftPanelSelector);\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(contentWrapper));\n        }\n        if (!this.parent.isAdaptive && headerWrapper) {\n            var scrollBarWidth = util.getScrollBarWidth();\n            // tslint:disable:no-any\n            if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n                headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n            }\n            else {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n                headerWrapper.style[args.cssProperties.padding] = '';\n            }\n            // tslint:enable:no-any\n        }\n        this.setColWidth(this.getContentAreaElement());\n        this.retainScrollPosition();\n    };\n    Year.prototype.startDate = function () {\n        var startDate = new Date(this.parent.selectedDate.getFullYear(), 0, 1);\n        return util.getWeekFirstDate(startDate, this.parent.firstDayOfWeek);\n    };\n    Year.prototype.endDate = function () {\n        var endDate = new Date(this.parent.selectedDate.getFullYear(), 11, 31);\n        return util.addDays(util.getWeekLastDate(endDate, this.parent.firstDayOfWeek), 1);\n    };\n    Year.prototype.getEndDateFromStartDate = function (start) {\n        var date = new Date(start.getTime());\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            date = util.lastDateOfMonth(date);\n        }\n        return util.addDays(new Date(date.getTime()), 1);\n    };\n    Year.prototype.getNextPreviousDate = function (type) {\n        return util.addYears(this.parent.selectedDate, ((type === 'next') ? 1 : -1));\n    };\n    Year.prototype.getDateRangeText = function () {\n        return this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'y' });\n    };\n    Year.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n    };\n    Year.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onScrollUiUpdate);\n        this.parent.off(event.dataReady, this.onDataReady);\n    };\n    Year.prototype.onDataReady = function (args) {\n        var yearEventModule = new YearEvent(this.parent);\n        yearEventModule.renderAppointments();\n        this.parent.notify('events-loaded', args);\n    };\n    Year.prototype.wireEvents = function (element, type) {\n        if (type === 'cell') {\n            if (this.parent.currentView !== 'TimelineYear') {\n                EventHandler.add(element, 'click', this.onCellClick, this);\n            }\n            else {\n                EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n                if (!this.parent.isAdaptive) {\n                    EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n                }\n            }\n        }\n        else {\n            EventHandler.add(element, 'scroll', this.onContentScroll, this);\n        }\n    };\n    /**\n     * Get module name.\n     */\n    Year.prototype.getModuleName = function () {\n        return 'year';\n    };\n    /**\n     * To destroy the year.\n     * @return {void}\n     * @private\n     */\n    Year.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return Year;\n}(ViewBase));\nexport { Year };\n","import { isNullOrUndefined, addClass, createElement, append, EventHandler, extend, remove } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { ViewBase } from '../renderer/view-base';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nvar AgendaBase = /** @class */ (function () {\n    /**\n     * Constructor for AgendaBase\n     */\n    function AgendaBase(parent) {\n        this.parent = parent;\n        this.viewBase = new ViewBase(parent);\n    }\n    AgendaBase.prototype.createAgendaContentElement = function (type, listData, aTd, groupOrder, groupIndex) {\n        var listElement;\n        var fieldMapping = this.parent.eventFields;\n        if (type === 'noEvents') {\n            var noEvents = [{ 'subject': this.parent.localeObj.getConstant('noEvents') }];\n            listElement = ListBase.createList(this.parent.createElement, noEvents, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass,\n                template: '<div class=' + cls.AGENDA_NO_EVENT_CLASS + '>${subject}</div>'\n            });\n        }\n        else {\n            listElement = ListBase.createList(this.parent.createElement, listData, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass\n            });\n            var _loop_1 = function (li, length_1) {\n                var appWrapper = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS, attrs: {\n                        'data-id': 'Appointment_' + listData[li][this_1.parent.eventFields.id],\n                        'data-guid': listData[li].Guid,\n                        'role': 'button',\n                        'tabindex': '0',\n                        'aria-readonly': this_1.parent.eventBase.getReadonlyAttribute(listData[li]),\n                        'aria-selected': 'false',\n                        'aria-grabbed': 'true',\n                        'aria-label': this_1.parent.getAnnocementString(listData[li])\n                    }\n                });\n                if (!isNullOrUndefined(groupIndex)) {\n                    appWrapper.setAttribute('data-group-index', groupIndex.toString());\n                }\n                this_1.parent.eventBase.applyResourceColor(appWrapper, listData[li], 'borderColor', groupOrder);\n                var templateEle = void 0;\n                if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n                    addClass([appWrapper], cls.EVENT_TEMPLATE);\n                    var scheduleId = this_1.parent.element.id + '_';\n                    var viewName = this_1.parent.activeViewOptions.eventTemplateName;\n                    var templateId = scheduleId + viewName + 'eventTemplate';\n                    var templateArgs = util.addLocalOffsetToEvent(listData[li], this_1.parent.eventFields);\n                    templateEle = this_1.parent.getAppointmentTemplate()(templateArgs, this_1.parent, 'eventTemplate', templateId, false);\n                    if (!isNullOrUndefined(listData[li][fieldMapping.recurrenceRule])) {\n                        var iconClass = (listData[li][fieldMapping.id] === listData[li][fieldMapping.recurrenceID]) ?\n                            cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                        appWrapper.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                    }\n                }\n                else {\n                    templateEle = this_1.createAppointment(listData[li]);\n                }\n                append([].slice.call(templateEle), appWrapper);\n                util.removeChildren(listElement.children[li]);\n                listElement.children[li].appendChild(appWrapper);\n                var args = {\n                    data: extend({}, listData[li], null, true),\n                    element: listElement.children[li], cancel: false\n                };\n                this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (eventArgs.cancel) {\n                        remove(listElement.children[li]);\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var li = 0, length_1 = listData.length; li < length_1; li++) {\n                _loop_1(li, length_1);\n            }\n        }\n        aTd.appendChild(listElement);\n        if ((this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0)\n            || this.parent.currentView === 'Agenda') {\n            addClass([aTd], cls.AGENDA_DAY_BORDER_CLASS);\n        }\n        this.parent.renderTemplates();\n        return aTd;\n    };\n    AgendaBase.prototype.createAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var eventSubject = (event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default);\n        var eventLocation = (event[fieldMapping.location] || this.parent.eventSettings.fields.location.default);\n        var appSubjectWrap = createElement('div', { className: cls.SUBJECT_WRAP });\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            eventSubject += ',';\n        }\n        appSubjectWrap.appendChild(createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: eventSubject }));\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            appSubjectWrap.appendChild(createElement('div', { className: cls.LOCATION_CLASS, innerHTML: eventLocation }));\n        }\n        if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n            var iconClass = (event[fieldMapping.id] === event[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appSubjectWrap.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n        }\n        var strDate = event[fieldMapping.startTime];\n        var endDate = event[fieldMapping.endTime];\n        var isAllDay = event[fieldMapping.isAllDay];\n        var allDayStr = this.parent.localeObj.getConstant('allDay');\n        var timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n        if (!isNullOrUndefined(event.data)) {\n            var milliSeconds = (endDate.getTimezoneOffset() !== strDate.getTimezoneOffset()) ?\n                (endDate.getTime() - strDate.getTime() + 3600000) : (endDate.getTime() - strDate.getTime());\n            var eventString = (milliSeconds / util.MS_PER_DAY) >= 1 ? allDayStr : timeStr;\n            allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' '\n                + event.data.index + '/' + event.data.count + ')';\n        }\n        var displayStr = (!isNullOrUndefined(event.data) || isAllDay) ? allDayStr : timeStr;\n        var appDateTime = createElement('div', { className: cls.DATE_TIME_CLASS, innerHTML: displayStr });\n        return [appSubjectWrap, appDateTime];\n    };\n    AgendaBase.prototype.processAgendaEvents = function (events) {\n        var eventsProcessed = [];\n        if (isNullOrUndefined(events)) {\n            return eventsProcessed;\n        }\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            var splited = this.parent.eventBase.splitEventByDay(event_1);\n            eventsProcessed = eventsProcessed.concat(splited.length > 1 ? splited : event_1);\n        }\n        return eventsProcessed;\n    };\n    AgendaBase.prototype.wireEventActions = function () {\n        var eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        for (var _i = 0, eventElement_1 = eventElement; _i < eventElement_1.length; _i++) {\n            var element = eventElement_1[_i];\n            this.parent.eventBase.wireAppointmentEvents(element, null, true);\n        }\n        var dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n        for (var _a = 0, dateHeaderElement_1 = dateHeaderElement; _a < dateHeaderElement_1.length; _a++) {\n            var element = dateHeaderElement_1[_a];\n            EventHandler.add(element, 'click', this.parent.agendaModule.dayNavigationClick, this);\n        }\n    };\n    AgendaBase.prototype.calculateResourceTableElement = function (tBody, noOfDays, agendaDate) {\n        if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n            var level = this.viewBase.getDateSlots(this.viewBase.renderDates, this.parent.activeViewOptions.workDays);\n            this.parent.resourceBase.generateResourceLevels(level);\n        }\n        var agendaLastDate = util.addDays(new Date(agendaDate.getTime()), noOfDays);\n        var days = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n        var resColl = this.parent.resourceBase.resourceCollection;\n        var resData = this.parent.resourceBase.lastResourceLevel;\n        var initialDate = agendaDate;\n        for (var i = 0; i < days; i++) {\n            var lastLevelInfo = [];\n            var tempLastLevelInfo = [];\n            var tempIndex = 0;\n            var eventObj = void 0;\n            var dateObj = void 0;\n            var firstDate = util.addDays(initialDate, i);\n            var finalDate = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda')\n                ? util.addDays(firstDate, 1) : agendaLastDate;\n            var agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n            if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                for (var res = 0; res < resData.length; res++) {\n                    noOfDays = (!this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n                    var data = [];\n                    agendaDate = firstDate;\n                    var resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[res]);\n                    if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                        for (var r = 0; r < noOfDays; r++) {\n                            var resDayCollection = this.parent.eventBase.filterEvents(agendaDate, util.addDays(agendaDate, 1), resDataCollection, undefined);\n                            if (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays ||\n                                this.parent.currentView === 'MonthAgenda') {\n                                data.push(resDayCollection[0]);\n                                eventObj = {\n                                    rowSpan: 1, type: 'eventColumn', resource: resColl[resColl.length - 1],\n                                    groupIndex: resData[res].groupIndex, groupOrder: resData[res].groupOrder,\n                                    resourceData: resData[res].resourceData, eventData: resDayCollection, date: agendaDate\n                                };\n                                dateObj = {\n                                    rowSpan: 1, type: 'dateColumn', resource: resColl[resColl.length - 1],\n                                    groupOrder: resData[res].groupOrder, resourceData: resData[res].resourceData,\n                                    date: agendaDate\n                                };\n                                if (!lastLevelInfo[tempIndex]) {\n                                    lastLevelInfo[tempIndex] = [];\n                                }\n                                lastLevelInfo[tempIndex].push(eventObj);\n                                lastLevelInfo[tempIndex].push(dateObj);\n                                tempIndex++;\n                            }\n                            agendaDate = util.addDays(agendaDate, 1);\n                            if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate\n                                || this.parent.currentView === 'MonthAgenda') {\n                                lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = cls.AGENDA_DAY_BORDER_CLASS;\n                                var tempObj = {\n                                    rowSpan: data.length, type: 'resourceColumn', resource: resColl[resColl.length - 1],\n                                    groupOrder: resData[res].groupOrder.slice(0, -1), resourceData: resData[res].resourceData,\n                                    groupIndex: (lastLevelInfo.length - data.length), className: [cls.RESOURCE_NAME],\n                                    date: agendaDate\n                                };\n                                lastLevelInfo[lastLevelInfo.length - data.length].push(tempObj);\n                                tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                                break;\n                            }\n                        }\n                    }\n                }\n                var topResources = resColl.slice(0, -1);\n                var tempGroupedData = [];\n                var totalRowSpan = 0;\n                for (var y = 0; y < topResources.length; y++) {\n                    var data = topResources[topResources.length - (y + 1)]\n                        .dataSource;\n                    for (var x = 0; x < data.length; x++) {\n                        var z = 0;\n                        for (var u = 0; u < tempLastLevelInfo.length; u++) {\n                            if (tempLastLevelInfo[u].groupOrder[topResources.length - (y + 1)] === data[x][topResources[topResources.length - (y + 1)].idField]) {\n                                totalRowSpan = totalRowSpan + tempLastLevelInfo[u].rowSpan;\n                                tempGroupedData.push(extend({}, tempLastLevelInfo[u], null, true));\n                            }\n                            if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                                tempGroupedData[0].rowSpan = totalRowSpan;\n                                tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                                tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                                tempGroupedData[0].resourceData = data[x];\n                                tempGroupedData[0].date = agendaDate;\n                                lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                                tempGroupedData = [];\n                                totalRowSpan = 0;\n                            }\n                        }\n                    }\n                }\n                this.createResourceTableRow(lastLevelInfo, tBody);\n            }\n        }\n        var totalCollection = this.parent.eventBase.filterEvents(initialDate, agendaLastDate);\n        if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            this.renderEmptyContent(tBody, initialDate);\n        }\n    };\n    AgendaBase.prototype.createResourceTableRow = function (tContent, tBody) {\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var ntr;\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var tempData;\n        var rowSpan = 0;\n        var level;\n        if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            var tContentCollection = [];\n            var parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n            for (var w = 0; w < tContent.length; w++) {\n                tContentCollection = tContentCollection.concat(tContent[w]);\n            }\n            level = (parentCollection.length > 0) ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n            var rowSpanCollection = tContentCollection.filter(function (data) { return data.type === level; });\n            for (var x = 0; x < rowSpanCollection.length; x++) {\n                rowSpan = rowSpan + rowSpanCollection[x].rowSpan;\n            }\n        }\n        for (var row = 0; row < tContent.length; row++) {\n            ntr = tr.cloneNode();\n            for (var col = tContent[row].length - 1; col >= 0; col--) {\n                var data = tContent[row][col];\n                var ntd = td.cloneNode();\n                if (data.type === 'dateColumn') {\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        tempData = tContent[row][col];\n                        continue;\n                    }\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    ntd.appendChild(this.createDateHeaderElement(data.date));\n                    var className = [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS];\n                    if (data.cssClass) {\n                        className.push(data.cssClass);\n                    }\n                    addClass([ntd], className);\n                    ntr.appendChild(ntd);\n                }\n                else if (data.type === 'eventColumn') {\n                    var elementType = (data.eventData.length === 0) ? 'noEvents' : 'data';\n                    ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DAY_PADDING_CLASS]);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else {\n                    ntd.setAttribute('rowspan', data.rowSpan.toString());\n                    addClass([ntd], cls.AGENDA_RESOURCE_CLASS);\n                    this.viewBase.setResourceHeaderContent(ntd, data, data.className[0]);\n                    ntr.appendChild(ntd);\n                }\n            }\n            if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n                var ntd = td.cloneNode();\n                ntd.setAttribute('data-date', tempData.date.getTime().toString());\n                ntd.setAttribute('rowspan', rowSpan.toString());\n                ntd.appendChild(this.createDateHeaderElement(tempData.date));\n                addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS, cls.DATE_BORDER_CLASS]);\n                var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n                ntr.setAttribute('aria-rowindex', daysCount.toString());\n                if (this.parent.element.querySelector(\".e-agenda-view tr[aria-rowindex=\\\"\" + daysCount + \"\\\"]\")) {\n                    break;\n                }\n                ntr.insertBefore(ntd, ntr.childNodes[0]);\n            }\n            tBody.appendChild(ntr);\n        }\n    };\n    AgendaBase.prototype.createDateHeaderElement = function (date) {\n        var dateHeader;\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n            dateHeader = createElement('div', { className: cls.AGENDA_HEADER_CLASS });\n            var dateValue = util.addLocalOffset(date);\n            var args = { date: dateValue, type: 'dateHeader' };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'dateHeaderTemplate';\n            var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, 'dateHeaderTemplate', templateId, false));\n            append(dateTemplate, dateHeader);\n        }\n        else {\n            dateHeader = this.viewBase.getMobileDateElement(date, cls.AGENDA_HEADER_CLASS);\n        }\n        return dateHeader;\n    };\n    AgendaBase.prototype.renderEmptyContent = function (tBody, agendaDate) {\n        var eTr = this.createTableRowElement(agendaDate, 'noEvents');\n        var eTd = eTr.children[0];\n        var noEvents = createElement('div', {\n            className: cls.AGENDA_EMPTY_EVENT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noEvents')\n        });\n        eTd.appendChild(noEvents);\n        tBody.appendChild(eTr);\n    };\n    AgendaBase.prototype.createTableRowElement = function (date, type) {\n        var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n        var tr = createElement('tr', { attrs: { 'role': 'row', 'aria-rowindex': daysCount.toString() } });\n        var td = createElement('td', {\n            attrs: {\n                'class': (type === 'monthHeader') ? cls.MONTH_HEADER_CLASS : cls.AGENDA_CELLS_CLASS,\n                'role': 'gridcell',\n                'aria-selected': 'false',\n                'aria-colindex': daysCount.toString(),\n                'data-date': date.getTime().toString()\n            }\n        });\n        var dTd = td.cloneNode();\n        var aTd = td.cloneNode();\n        tr.appendChild(dTd);\n        if (type !== 'noEvents') {\n            tr.appendChild(aTd);\n        }\n        return tr;\n    };\n    return AgendaBase;\n}());\nexport { AgendaBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { ViewBase } from './view-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */ (function (_super) {\n    __extends(Agenda, _super);\n    /**\n     * Constructor for agenda view\n     */\n    function Agenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-agenda-view';\n        _this.isInverseTableSelect = false;\n        _this.agendaDates = {};\n        _this.virtualScrollTop = 1;\n        _this.agendaBase = new AgendaBase(parent);\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    Agenda.prototype.getModuleName = function () {\n        return 'agenda';\n    };\n    Agenda.prototype.renderLayout = function () {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: cls.TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        var eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        var workTd = createElement('td');\n        eTr.appendChild(workTd);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        wrap.appendChild(tbl);\n        var tBody = tbl.querySelector('tbody');\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        this.agendaBase.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Agenda.prototype.eventLoad = function (args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            delete event_1.generatedDates;\n        }\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        util.removeChildren(tBody);\n        this.renderInitialContent(tBody, agendaDate);\n        this.agendaBase.wireEventActions();\n        var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n        this.parent.notify(event.eventsLoaded, {});\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.retainScrollPosition();\n        }\n    };\n    Agenda.prototype.refreshEvent = function (refreshDate) {\n        var processedData = [];\n        for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n            var eventData = _a[_i];\n            var fields = this.parent.eventFields;\n            var data = eventData;\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.agendaBase.processAgendaEvents(processedData));\n    };\n    Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        // Initial rendering, to load previous date events upto scroll bar enable\n        if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n            var contentArea = this.getContentAreaElement();\n            var contentChild = contentArea.querySelector('.e-content-table');\n            while (contentArea.offsetWidth <= contentArea.clientWidth) {\n                if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n                    break;\n                }\n                var emptyTBody_1 = createElement('tbody');\n                lastDate = firstDate;\n                firstDate = util.addDays(lastDate, -this.parent.agendaDaysCount);\n                this.renderContent(emptyTBody_1, firstDate, lastDate);\n                prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n                if (firstDate <= this.parent.minDate) {\n                    break;\n                }\n            }\n        }\n        if (tBody.childNodes.length <= 0) {\n            this.agendaBase.renderEmptyContent(tBody, agendaDate);\n        }\n    };\n    Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n        var fieldMapping = this.parent.eventFields;\n        var firstDate = new Date(agendaDate.getTime());\n        var isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            var appoint = isObject;\n            agendaDate = appoint[0][fieldMapping.startTime];\n            agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n            this.updateHeaderText(appoint[0][fieldMapping.startTime]);\n        }\n        var endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                var date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.agendaBase.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n            }\n            else {\n                for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n                    var filterData = [];\n                    filterData = this.appointmentFiltering(agendaDate);\n                    var nTr = this.agendaBase.createTableRowElement(agendaDate, 'data');\n                    if (this.element.querySelector('tr[aria-rowindex=\"' + parseInt(nTr.getAttribute('aria-rowindex'), 10)\n                        + '\"]')) {\n                        continue;\n                    }\n                    // if (this.isMonthFirstDate(agendaDate)) {\n                    //     tBody.appendChild(this.renderMonthHeader(this.createTableRowElement(agendaDate, 'monthHeader')));\n                    // }\n                    var dTd = nTr.children[0];\n                    var aTd = nTr.children[1];\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        var elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.agendaBase.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        var cTd = this.agendaBase.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = util.addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    };\n    // private renderMonthHeader(mTr: Element): Element {\n    //     mTr.removeAttribute('aria-rowindex');\n    //     for (let td of [].slice.call(mTr.childNodes)) {\n    //         td.removeAttribute('aria-colindex');\n    //     }\n    //     let headerDate: Date = new Date(parseInt(mTr.children[0].getAttribute('data-date'), 10));\n    //     let div: Element = createElement('div', {\n    //         className: cls.DATE_HEADER_CLASS,\n    //         innerHTML: headerDate.toLocaleString(this.parent.locale, { month: 'long' }) + '&nbsp' + headerDate.getFullYear()\n    //     });\n    //     mTr.lastElementChild.appendChild(div);\n    //     return mTr;\n    // }\n    Agenda.prototype.agendaScrolling = function (event) {\n        this.parent.quickPopup.quickPopupHide();\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.setPersistence();\n        }\n    };\n    Agenda.prototype.virtualScrolling = function (event) {\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        var tBody = target.querySelector('tbody');\n        var emptyTBody = createElement('tbody');\n        var topElement = this.getElementFromScrollerPosition(event, direction);\n        var scrollDate = this.parent.getDateFromElement(topElement);\n        var filterDate;\n        var filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.agendaBase.wireEventActions();\n                for (var s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[s].getAttribute('aria-rowindex') === topElement.getAttribute('aria-colindex')) {\n                        var scrollToValue = element[s].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight === scrollHeight) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.agendaBase.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    };\n    Agenda.prototype.getElementFromScrollerPosition = function (event, direction) {\n        var filterElement;\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        var li;\n        var liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n                    li = liCollection[a];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    };\n    Agenda.prototype.updateHeaderText = function (date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(this.getDateRangeText(date));\n        }\n    };\n    Agenda.prototype.getPreviousNextDate = function (date, type) {\n        var currentDate = new Date(date.getTime());\n        var firstDate = this.getStartDateFromEndDate(date);\n        var lastDate = this.getEndDateFromStartDate(date);\n        var daysCount = 0;\n        do {\n            var filterData = this.appointmentFiltering(currentDate);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                daysCount++;\n            }\n            currentDate = util.addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        var endDate = util.addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: util.addDays(endDate, 1) } : { start: endDate, end: util.addDays(date, 1) };\n    };\n    Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n        var dateStart;\n        var dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = util.resetTime(new Date(startDate.getTime()));\n            dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    };\n    Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                var date = a[fieldMapping.startTime];\n                return date.getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.parent.minDate;\n        }\n        return util.resetTime(filterDate);\n    };\n    Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                var date = a[fieldMapping.endTime];\n                return date.getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.parent.maxDate;\n        }\n        return util.resetTime(util.addDays(filterDate, 1));\n    };\n    Agenda.prototype.getNextPreviousDate = function (type) {\n        var noOfDays = (type === 'next') ? 1 : -1;\n        return util.addDays(this.parent.selectedDate, noOfDays);\n    };\n    Agenda.prototype.startDate = function () {\n        return util.resetTime(this.parent.selectedDate);\n    };\n    Agenda.prototype.endDate = function () {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    };\n    Agenda.prototype.getDateRangeText = function (date) {\n        var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'multiple');\n        }\n        else {\n            var startDate = this.parent.selectedDate;\n            var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    };\n    Agenda.prototype.dayNavigationClick = function (e) {\n        var date = this.parent.getDateFromElement(closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS));\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n            this.parent.setScheduleProperties({ selectedDate: date });\n            this.parent.changeView('Day', e);\n        }\n    };\n    // private isMonthFirstDate(date: Date): boolean {\n    //     return date.getDate() === 1;\n    // }\n    Agenda.prototype.wireEvents = function () {\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n    };\n    Agenda.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n        var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n            var element = dateHeaderElement_1[_i];\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    };\n    Agenda.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.eventLoad, this);\n    };\n    Agenda.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n        this.parent.off(event.dataReady, this.eventLoad);\n    };\n    Agenda.prototype.onAgendaScrollUiUpdate = function () {\n        var headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n    };\n    /**\n     * To destroy the agenda.\n     * @return {void}\n     * @private\n     */\n    Agenda.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            remove(this.element);\n            this.element = null;\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n    };\n    return Agenda;\n}(ViewBase));\nexport { Agenda };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, addClass, formatUnit, remove } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { Month } from './month';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month agenda view\n */\nvar MonthAgenda = /** @class */ (function (_super) {\n    __extends(MonthAgenda, _super);\n    /**\n     * Constructor\n     */\n    function MonthAgenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'narrow';\n        _this.viewClass = 'e-month-agenda-view';\n        _this.agendaDates = {};\n        _this.agendaBase = new AgendaBase(parent);\n        _this.monthAgendaDate = new Date('' + parent.selectedDate);\n        return _this;\n    }\n    MonthAgenda.prototype.renderAppointmentContainer = function () {\n        if (this.parent.isServerRenderer()) {\n            this.setEventWrapperHeight();\n            return;\n        }\n        var contentArea = this.getContentAreaElement();\n        var wrapperContainer = createElement('div', { className: cls.WRAPPER_CONTAINER_CLASS });\n        contentArea.appendChild(wrapperContainer);\n        var appWrap = createElement('div', { className: cls.APPOINTMENT_WRAP_CLASS });\n        wrapperContainer.appendChild(appWrap);\n        this.appendAppContainer(appWrap);\n        this.setEventWrapperHeight();\n    };\n    MonthAgenda.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive) {\n            return 'narrow';\n        }\n        return 'abbreviated';\n    };\n    MonthAgenda.prototype.setEventWrapperHeight = function () {\n        var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n        var resourceWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n        if (resourceWrapper) {\n            headerHeight += resourceWrapper.offsetHeight;\n        }\n        var contentArea = this.getContentAreaElement().firstElementChild;\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var availableHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\n        var wrapperContainer = this.element.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n        var eventWrapper = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availableHeight);\n    };\n    MonthAgenda.prototype.onDataReady = function (args) {\n        this.setEventWrapperHeight();\n        this.clearElements();\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var count = 0;\n        for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n            var date = _a[_i];\n            var filterData = this.appointmentFiltering(date);\n            var workCell = this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS)[count];\n            if (filterData.length > 0) {\n                if (!workCell.querySelector('.' + cls.APPOINTMENT_INDICATOR_CLASS)) {\n                    workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_INDICATOR_CLASS }));\n                }\n                if (date.getTime() === util.resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n                    this.onEventRender(filterData, date);\n                }\n            }\n            count++;\n        }\n        this.parent.notify(events.eventsLoaded, {});\n    };\n    MonthAgenda.prototype.onCellClick = function (event) {\n        this.parent.quickPopup.quickPopupHide();\n        var filterData = this.appointmentFiltering(event.startTime);\n        this.onEventRender(filterData, event.startTime);\n        this.parent.notify(events.eventsLoaded, {});\n        this.monthAgendaDate = new Date('' + event.startTime);\n    };\n    MonthAgenda.prototype.onEventRender = function (events, date) {\n        var appWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        util.removeChildren(appWrap);\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n            if (events.length > 0) {\n                var appContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n                appWrap.appendChild(this.agendaBase.\n                    createAgendaContentElement('data', events, appContainer));\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        else {\n            if (events.length > 0) {\n                var table = this.createTableLayout();\n                var tBody = table.querySelector('tbody');\n                this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n                table.appendChild(tBody);\n                appWrap.appendChild(table);\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        this.agendaBase.wireEventActions();\n    };\n    MonthAgenda.prototype.appointmentFiltering = function (date) {\n        var dateStart = util.resetTime(new Date(date.getTime()));\n        var dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    };\n    MonthAgenda.prototype.clearElements = function () {\n        var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_INDICATOR_CLASS));\n        for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n            var appointmentIndicator = appointmentIndicators_1[_i];\n            remove(appointmentIndicator);\n        }\n        this.appendAppContainer(this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS));\n    };\n    MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n        var app = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n        addClass([app], cls.AGENDA_NO_EVENT_CLASS);\n        app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n        util.removeChildren(appWrap);\n        appWrap.appendChild(app);\n    };\n    MonthAgenda.prototype.getNextPreviousDate = function (type) {\n        var selectedDate = this.parent.selectedDate;\n        var interval = (type === 'next') ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n        var navigateDate = util.addMonths(this.parent.selectedDate, interval);\n        var month = (type === 'next') ? 2 : 0;\n        var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n        var date = (lastDate >= this.monthAgendaDate.getDate()) ? this.monthAgendaDate.getDate() : lastDate;\n        this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n        return this.monthAgendaDate;\n    };\n    /**\n     * Get module name.\n     */\n    MonthAgenda.prototype.getModuleName = function () {\n        return 'monthAgenda';\n    };\n    return MonthAgenda;\n}(Month));\nexport { MonthAgenda };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { ViewHelper } from './view-base';\nimport { MS_PER_DAY, capitalizeFirstWord } from '../base/util';\n/**\n * timeline header\n */\nvar TimelineHeaderRow = /** @class */ (function () {\n    function TimelineHeaderRow(parent, renderDates) {\n        this.parent = parent;\n        this.renderDates = renderDates;\n    }\n    TimelineHeaderRow.prototype.groupByYear = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var d = dates_1[_i];\n            var key = d.getFullYear();\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByMonth = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_2 = dates; _i < dates_2.length; _i++) {\n            var d = dates_2[_i];\n            var key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByWeek = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_3 = dates; _i < dates_3.length; _i++) {\n            var d = dates_3[_i];\n            var jsDate = +new Date(1970, 0, 1);\n            var tzOffsetDiff = d.getTimezoneOffset() - new Date(1970, 0, 1).getTimezoneOffset();\n            var key = Math.ceil(((((+d - jsDate) - (tzOffsetDiff * 60 * 1000)) / MS_PER_DAY) + new Date(jsDate).getDay() + 1) / 7);\n            if (this.parent.firstDayOfWeek && this.parent.firstDayOfWeek > new Date(+d).getDay()) {\n                key = key - 1;\n            }\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.generateSlots = function (data, colspan, row, cls, type) {\n        var _this = this;\n        var dateParser = function (date, format) {\n            return _this.parent.globalize.formatDate(date, { format: format, calendar: _this.parent.getCalendarMode() });\n        };\n        var tdDatas = [];\n        var keys = Object.keys(data);\n        for (var i = 0; i < keys.length; i++) {\n            var dates = data[keys[i]];\n            var htmlCol = void 0;\n            if (row.template) {\n                var args = { date: dates[0], type: type };\n                var templateId = this.parent.element.id + '_headerRowTemplate';\n                htmlCol = [].slice.call(this.parent.templateParser(row.template)(args, this.parent, 'template', templateId, false));\n            }\n            else {\n                var viewTemplate = void 0;\n                switch (row.option) {\n                    case 'Year':\n                        viewTemplate = \"<span class=\\\"e-header-year\\\">\" + dateParser(dates[0], 'y') + \"</span>\";\n                        break;\n                    case 'Month':\n                        viewTemplate = \"<span class=\\\"e-header-month\\\">\" + capitalizeFirstWord(dateParser(dates[0], 'MMMM'), 'single') + \"</span>\";\n                        break;\n                    case 'Week':\n                        var weekNumberDate = ViewHelper.getWeekNumberContent(this.parent, dates);\n                        viewTemplate = \"<span class=\\\"e-header-week\\\">\" + weekNumberDate + \"</span>\";\n                }\n                var headerWrapper = createElement('div', { innerHTML: viewTemplate });\n                htmlCol = [].slice.call(headerWrapper.childNodes);\n            }\n            tdDatas.push({ date: dates[0], type: type, className: [cls], colSpan: dates.length * colspan, template: htmlCol });\n        }\n        return tdDatas;\n    };\n    TimelineHeaderRow.prototype.generateColumnLevels = function (dateSlots, hourSlots) {\n        var levels = [];\n        var rows = this.parent.activeViewOptions.headerRows;\n        var lastLevelColspan = 1;\n        if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n            lastLevelColspan = hourSlots.length / dateSlots.length;\n        }\n        var tdDatas = [];\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            switch (row.option) {\n                case 'Year':\n                    var byYear = this.groupByYear(this.renderDates);\n                    tdDatas = this.generateSlots(byYear, lastLevelColspan, row, 'e-header-year-cell', 'yearHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Month':\n                    var byMonth = this.groupByMonth(this.renderDates);\n                    tdDatas = this.generateSlots(byMonth, lastLevelColspan, row, 'e-header-month-cell', 'monthHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Week':\n                    var byWeek = this.groupByWeek(this.renderDates);\n                    tdDatas = this.generateSlots(byWeek, lastLevelColspan, row, 'e-header-week-cell', 'weekHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Date':\n                    tdDatas = dateSlots;\n                    tdDatas = tdDatas.map(function (value) {\n                        value.colSpan = lastLevelColspan;\n                        return value;\n                    });\n                    levels.push(tdDatas);\n                    break;\n                case 'Hour':\n                    if (hourSlots.length > 0) {\n                        levels.push(hourSlots);\n                    }\n                    break;\n            }\n        }\n        return levels;\n    };\n    return TimelineHeaderRow;\n}());\nexport { TimelineHeaderRow };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, createElement, prepend, extend, formatUnit, append, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { VerticalView } from './vertical-view';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { TimelineHeaderRow } from './timeline-header-row';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * timeline view\n */\nvar TimelineViews = /** @class */ (function (_super) {\n    __extends(TimelineViews, _super);\n    function TimelineViews(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.baseCssClass = 'e-timeline-view';\n        return _this;\n    }\n    TimelineViews.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineViews.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineViews.prototype.scrollToWorkHour = function () {\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight &&\n            !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes(), 0, 0)\n            : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n        var queryString = '[data-date=\"' + this.parent.getMsFromDate(new Date(currDateTime)) + '\"]';\n        var firstWorkHourCell = this.element.querySelector(queryString);\n        if (firstWorkHourCell) {\n            this.getScrollableElement().scrollLeft = firstWorkHourCell.offsetLeft;\n        }\n    };\n    TimelineViews.prototype.scrollToHour = function (hour, scrollDate) {\n        var date;\n        var index;\n        if (scrollDate) {\n            index = this.parent.getIndexOfDate(this.renderDates, util.resetTime(scrollDate));\n            if (index >= 0) {\n                var timeString = hour.split(':');\n                if (timeString.length === 2) {\n                    date = new Date(scrollDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0));\n                }\n            }\n        }\n        date = isNullOrUndefined(scrollDate) ? this.parent.getStartEndTime(hour) : date;\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        var scrollLeft = isNullOrUndefined(scrollDate) ? this.getLeftFromDateTime(null, date) : this.getLeftFromDateTime([index], date);\n        this.getScrollableElement().scrollLeft = !this.parent.enableRtl ? scrollLeft : -scrollLeft;\n    };\n    TimelineViews.prototype.generateColumnLevels = function () {\n        var levels = [];\n        var dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        levels.push(dateSlots);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n            levels.push(hourSlots);\n        }\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n        }\n        return levels;\n    };\n    TimelineViews.prototype.generateTimeSlots = function (dateSlots) {\n        var _this = this;\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.first ? [cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS, cls.TIME_CELLS_CLASS];\n            r.workDays = _this.parent.activeViewOptions.workDays;\n            return r;\n        };\n        var timeSlotData = this.getTimeSlotRows(handler);\n        var slots = [];\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var data = dateSlots_1[_i];\n            data.colSpan = timeSlotData.length;\n            var tempTimeSlots = extend([], timeSlotData, null, true);\n            for (var _a = 0, tempTimeSlots_1 = tempTimeSlots; _a < tempTimeSlots_1.length; _a++) {\n                var slot = tempTimeSlots_1[_a];\n                var cellDate = util.resetTime(new Date('' + data.date));\n                slot.date = util.setTime(cellDate, util.getDateInMs(slot.date));\n                slots.push(slot);\n            }\n        }\n        return slots;\n    };\n    TimelineViews.prototype.changeCurrentTimePosition = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var left = this.getLeftFromDateTime(currentDateIndex, this.parent.getCurrentTime());\n        var height = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n        var headerWrap = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var contentWrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        contentWrap.appendChild(createElement('div', {\n            className: cls.CURRENT_TIMELINE_CLASS,\n            styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n        }));\n        if (this.parent.virtualScrollModule) {\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var element = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n            setStyleAttribute(timeIndicator, {\n                transform: element.style.transform\n            });\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS\n        });\n        headerWrap.appendChild(currentTimeEle);\n        currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - (currentTimeEle.offsetWidth / 2));\n    };\n    TimelineViews.prototype.getLeftFromDateTime = function (currentDateIndex, date) {\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var diffInDates = 0;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        if (!isNullOrUndefined(currentDateIndex)) {\n            var end = (endHour.getHours() === 0) ? 24 : endHour.getHours();\n            if (currentDateIndex[0] !== 0) {\n                diffInDates = (currentDateIndex[0]) * ((end - startHour.getHours()) * 60) + (endHour.getMinutes() - startHour.getMinutes());\n            }\n            diffInMinutes = diffInDates + diffInMinutes;\n        }\n        return (diffInMinutes * this.getWorkCellWidth() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    TimelineViews.prototype.getWorkCellWidth = function () {\n        return this.element.querySelector('.e-work-cells').getBoundingClientRect().width;\n    };\n    TimelineViews.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    TimelineViews.prototype.createAllDayRow = function (table, tdData) {\n        // For current time indicator wrapper\n    };\n    TimelineViews.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        var index = this.parent.getIndexOfDate(this.renderDates, util.resetTime(this.parent.getCurrentTime()));\n        if (index >= 0) {\n            currentDateIndex.push(index);\n        }\n        return currentDateIndex;\n    };\n    TimelineViews.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            tr.appendChild(resTd);\n        }\n        var workTd = createElement('td');\n        var wrap = this.renderContentArea();\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    TimelineViews.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineViews.prototype.getResourceTdData = function (i, tdData) {\n        var resLevel = this.parent.resourceBase.renderedResources[i];\n        var resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n        var resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n        tdData.startHour = this.parent.getStartEndTime(resSHr);\n        tdData.endHour = this.parent.getStartEndTime(resEHr);\n        tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n        tdData.className = resLevel.className;\n        tdData.groupIndex = resLevel.groupIndex;\n        tdData.groupOrder = resLevel.groupOrder;\n        return tdData;\n    };\n    TimelineViews.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n    };\n    TimelineViews.prototype.getContentRows = function () {\n        var rows = [];\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var trCount = this.getRowCount();\n        for (var i = 0; i < trCount; i++) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    tdData = this.getResourceTdData(i, tdData);\n                }\n                var ntd = this.createContentTd(tdData, tdData, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n        }\n        return rows;\n    };\n    TimelineViews.prototype.getContentTdClass = function (r) {\n        return (r.first || !this.parent.activeViewOptions.timeScale.enable) ? [cls.WORK_CELLS_CLASS] :\n            [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    TimelineViews.prototype.renderEvents = function () {\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var appointment = new TimelineEvent(this.parent, 'hour');\n            appointment.renderAppointments();\n        }\n        else {\n            var appointment = new TimelineEvent(this.parent, 'day');\n            appointment.renderAppointments();\n        }\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    TimelineViews.prototype.getModuleName = function () {\n        return 'timelineViews';\n    };\n    return TimelineViews;\n}(VerticalView));\nexport { TimelineViews };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, createElement, formatUnit } from '@syncfusion/ej2-base';\nimport { Month } from './month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { TimelineHeaderRow } from './timeline-header-row';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * timeline month view\n */\nvar TimelineMonth = /** @class */ (function (_super) {\n    __extends(TimelineMonth, _super);\n    /**\n     * Constructor for timeline month view\n     */\n    function TimelineMonth(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-month-view';\n        _this.isInverseTableSelect = true;\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    TimelineMonth.prototype.getModuleName = function () {\n        return 'timelineMonth';\n    };\n    TimelineMonth.prototype.onDataReady = function (args) {\n        var appointment = new TimelineEvent(this.parent, 'day');\n        appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    TimelineMonth.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineMonth.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineMonth.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n        content.style.height = formatUnit(height);\n    };\n    TimelineMonth.prototype.getDateSlots = function (renderDates, workDays) {\n        var dateSlots = [];\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: col, type: 'dateHeader', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    TimelineMonth.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n    };\n    TimelineMonth.prototype.renderContent = function () {\n        var contentTr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            contentTr.appendChild(resTd);\n        }\n        var contentTd = createElement('td');\n        this.element.querySelector('tbody').appendChild(contentTr);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        wrap.appendChild(this.renderContentArea());\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        contentTd.appendChild(wrap);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        contentTr.appendChild(contentTd);\n    };\n    TimelineMonth.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineMonth.prototype.getContentSlots = function () {\n        var slotDatas = [];\n        for (var row = 0; row < this.getRowCount(); row++) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var data = _a[_i];\n                data.className = [cls.WORK_CELLS_CLASS];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    var resLevel = this.parent.resourceBase.renderedResources[row];\n                    data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n                    data.className = data.className.concat(resLevel.className);\n                    data.groupIndex = resLevel.groupIndex;\n                    data.groupOrder = resLevel.groupOrder;\n                }\n                var slotData = {\n                    date: new Date(+data.date), colSpan: data.colSpan, groupIndex: data.groupIndex, workDays: data.workDays,\n                    type: 'monthCells', className: data.className\n                };\n                if (!slotDatas[row]) {\n                    slotDatas[row] = [];\n                }\n                slotDatas[row].push(slotData);\n            }\n        }\n        return slotDatas;\n    };\n    TimelineMonth.prototype.updateClassList = function (data) {\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n    };\n    TimelineMonth.prototype.unwireEvents = function () {\n        EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n    };\n    TimelineMonth.prototype.getMonthStart = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    TimelineMonth.prototype.getMonthEnd = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return this.parent.calendarUtil.lastDateOfMonth(util.addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n    };\n    TimelineMonth.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        colLevels.push(level);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            colLevels = renderGn.generateColumnLevels(level, hourSlots);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    return TimelineMonth;\n}(Month));\nexport { TimelineMonth };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { append, addClass, createElement } from '@syncfusion/ej2-base';\nimport { Year } from './year';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * timeline year view\n */\nvar TimelineYear = /** @class */ (function (_super) {\n    __extends(TimelineYear, _super);\n    /**\n     * Constructor for timeline year view\n     */\n    function TimelineYear(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-year-view';\n        _this.isInverseTableSelect = true;\n        return _this;\n    }\n    /**\n     * Get module name.\n     */\n    TimelineYear.prototype.getModuleName = function () {\n        return 'timelineYear';\n    };\n    TimelineYear.prototype.renderHeader = function (headerWrapper) {\n        var tr = createElement('tr');\n        headerWrapper.appendChild(tr);\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        else {\n            var leftHeaderCells = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            tr.appendChild(leftHeaderCells);\n            leftHeaderCells.appendChild(this.renderResourceHeader(cls.LEFT_INDENT_WRAP_CLASS));\n        }\n        var td = createElement('td');\n        tr.appendChild(td);\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        td.appendChild(container);\n        if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            container.appendChild(this.renderResourceHeader(cls.DATE_HEADER_WRAP_CLASS));\n            this.columnCount = this.colLevels.slice(-1)[0].length;\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n            container.appendChild(wrapper);\n            var table = this.createTableLayout();\n            wrapper.appendChild(table);\n            table.appendChild(this.createTableColGroup(this.columnCount));\n            var innerTr = createElement('tr');\n            table.querySelector('tbody').appendChild(innerTr);\n            for (var column = 0; column < this.columnCount; column++) {\n                var innerTd = createElement('td', { className: cls.HEADER_CELLS_CLASS });\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    innerTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[column % 7] + \"</span>\";\n                }\n                else {\n                    var date = new Date(this.parent.selectedDate.getFullYear(), column, 1);\n                    innerTd.innerHTML = \"<span>\" + this.getMonthName(date) + \"</span>\";\n                    innerTd.setAttribute('data-date', date.getTime().toString());\n                }\n                innerTr.appendChild(innerTd);\n                this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: innerTd });\n            }\n        }\n    };\n    TimelineYear.prototype.renderResourceHeader = function (className) {\n        var wrap = createElement('div', { className: className });\n        var tbl = this.createTableLayout();\n        wrap.appendChild(tbl);\n        var trEle = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.colLevels = this.generateColumnLevels();\n        }\n        else {\n            var colData = [{ className: [cls.HEADER_CELLS_CLASS], type: 'headerCell' }];\n            this.colLevels = [colData];\n        }\n        for (var _i = 0, _a = this.colLevels; _i < _a.length; _i++) {\n            var col = _a[_i];\n            var ntr = trEle.cloneNode();\n            var count = className === cls.DATE_HEADER_WRAP_CLASS ? col : [col[0]];\n            for (var _b = 0, count_1 = count; _b < count_1.length; _b++) {\n                var c = count_1[_b];\n                var tdEle = createElement('td');\n                if (c.className) {\n                    addClass([tdEle], c.className);\n                }\n                if (className === cls.DATE_HEADER_WRAP_CLASS) {\n                    if (c.template) {\n                        append(c.template, tdEle);\n                    }\n                    if (c.colSpan) {\n                        tdEle.setAttribute('colspan', c.colSpan.toString());\n                    }\n                    this.setResourceHeaderContent(tdEle, c);\n                }\n                var args = { elementType: c.type, element: tdEle, date: c.date, groupIndex: c.groupIndex };\n                this.parent.trigger(event.renderCell, args);\n                ntr.appendChild(tdEle);\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        if (className === cls.DATE_HEADER_WRAP_CLASS) {\n            tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\n        }\n        return wrap;\n    };\n    TimelineYear.prototype.renderContent = function (contentWrapper) {\n        var tr = createElement('tr');\n        contentWrapper.appendChild(tr);\n        var firstTd = createElement('td');\n        var lastTd = createElement('td');\n        var tdCollection = [];\n        var monthTBody;\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            tdCollection.push(firstTd);\n            firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            this.rowCount = this.parent.resourceBase.lastResourceLevel.length;\n        }\n        else {\n            tdCollection.push(firstTd);\n            var monthWrapper = createElement('div', { className: cls.MONTH_HEADER_WRAPPER });\n            firstTd.appendChild(monthWrapper);\n            monthWrapper.appendChild(this.createTableLayout());\n            monthTBody = monthWrapper.querySelector('tbody');\n        }\n        tdCollection.push(lastTd);\n        append(tdCollection, tr);\n        var content = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        lastTd.appendChild(content);\n        var contentTable = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        content.appendChild(contentTable);\n        var eventWrapper = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        content.appendChild(eventWrapper);\n        var contentTBody = contentTable.querySelector('tbody');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            if (this.parent.rowAutoHeight) {\n                addClass([contentTable], cls.AUTO_HEIGHT);\n            }\n            var colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : 12;\n            contentTable.appendChild(this.createTableColGroup(colCount));\n            this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\n        }\n        else {\n            contentTable.appendChild(this.createTableColGroup(this.columnCount));\n            this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\n        }\n    };\n    TimelineYear.prototype.renderDefaultContent = function (wrapper, monthBody, contentBody) {\n        for (var month = 0; month < this.rowCount; month++) {\n            wrapper.appendChild(createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS }));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var tr = createElement('tr', { attrs: { 'role': 'row' } });\n            var monthTr = tr.cloneNode();\n            monthBody.appendChild(monthTr);\n            var contentTr = tr.cloneNode();\n            contentBody.appendChild(contentTr);\n            var monthTd = createElement('td', { className: cls.MONTH_HEADER_CLASS, attrs: { 'role': 'gridcell' } });\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                monthTd.setAttribute('data-date', monthDate.getTime().toString());\n                monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n            }\n            else {\n                monthTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[month % 7] + \"</span>\";\n            }\n            monthTr.appendChild(monthTd);\n            this.parent.trigger(event.renderCell, { elementType: 'leftHeaderCells', element: monthTd });\n            var date = new Date(monthStart.getTime());\n            for (var column = 0; column < this.columnCount; column++) {\n                var isDateAvail = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), column, 1);\n                    monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                    monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n                    var dayDate = (month - monthStart.getDay()) + 1;\n                    date = new Date(this.parent.selectedDate.getFullYear(), column, dayDate);\n                    isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\n                }\n                else {\n                    isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\n                }\n                var td = createElement('td', {\n                    className: cls.WORK_CELLS_CLASS,\n                    attrs: { 'role': 'gridcell', 'aria-selected': 'false' }\n                });\n                contentTr.appendChild(td);\n                var dateHeader = createElement('div', {\n                    className: cls.DATE_HEADER_CLASS + ' ' + cls.NAVIGATE_CLASS,\n                    innerHTML: (isDateAvail) ? date.getDate().toString() : ''\n                });\n                var skeleton = 'full';\n                var annocementText = this.parent.globalize.formatDate(date, {\n                    skeleton: skeleton,\n                    calendar: this.parent.getCalendarMode()\n                });\n                dateHeader.setAttribute('aria-label', annocementText);\n                if (isDateAvail) {\n                    var tds = [td];\n                    var classList = [];\n                    if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\n                        classList.push(cls.WORKDAY_CLASS);\n                    }\n                    if (this.isCurrentDate(date)) {\n                        classList.push(cls.CURRENT_DAY_CLASS);\n                        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                            tds.push(this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + (\":nth-child(\" + (column + 1) + \")\")));\n                        }\n                        else {\n                            tds.push(this.element.querySelectorAll('.' + cls.MONTH_HEADER_CLASS).item(month));\n                        }\n                    }\n                    if (classList.length > 0) {\n                        addClass(tds, classList);\n                    }\n                }\n                else {\n                    addClass([td], cls.OTHERMONTH_CLASS);\n                }\n                td.appendChild(dateHeader);\n                if (isDateAvail) {\n                    td.setAttribute('data-date', date.getTime().toString());\n                    this.wireEvents(td, 'cell');\n                }\n                this.renderCellTemplate({ date: date, type: 'workCells' }, td);\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n                if (isDateAvail) {\n                    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                        date = util.addDays(new Date(date.getTime()), 1);\n                    }\n                }\n            }\n        }\n    };\n    TimelineYear.prototype.renderResourceContent = function (wrapper, monthBody, contentBody) {\n        for (var row = 0; row < this.rowCount; row++) {\n            wrapper.appendChild(createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS }));\n            var tr = createElement('tr', { attrs: { 'role': 'row' } });\n            contentBody.appendChild(tr);\n            var resData = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                resData = this.parent.resourceBase.lastResourceLevel[row];\n            }\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), row, 1);\n            var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                var monthTr = tr.cloneNode();\n                monthBody.appendChild(monthTr);\n                var monthTd = createElement('td', {\n                    className: cls.MONTH_HEADER_CLASS,\n                    innerHTML: \"<span>\" + this.getMonthName(monthDate) + \"</span>\",\n                    attrs: { 'role': 'gridcell', 'data-date': date.getTime().toString() }\n                });\n                monthTr.appendChild(monthTd);\n            }\n            for (var month = 0; month < this.columnCount; month++) {\n                var classList = [];\n                var groupIndex = row;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    classList = classList.concat(resData.className);\n                    if (classList.indexOf(cls.RESOURCE_PARENT_CLASS) > -1) {\n                        classList.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n                    }\n                    else {\n                        classList.push(cls.WORKDAY_CLASS);\n                    }\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n                    date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                }\n                else {\n                    groupIndex = this.colLevels.slice(-1)[0][month].groupIndex;\n                    classList.push(cls.WORKDAY_CLASS);\n                }\n                var td = createElement('td', {\n                    className: cls.WORK_CELLS_CLASS,\n                    attrs: {\n                        'role': 'gridcell', 'aria-selected': 'false',\n                        'data-date': date.getTime().toString()\n                    }\n                });\n                addClass([td], classList);\n                td.setAttribute('data-group-index', groupIndex.toString());\n                this.renderCellTemplate({ date: date, type: 'workCells', groupIndex: groupIndex }, td);\n                this.wireEvents(td, 'cell');\n                tr.appendChild(td);\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            this.collapseRows(this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS));\n        }\n    };\n    TimelineYear.prototype.renderCellTemplate = function (data, td) {\n        if (!this.parent.activeViewOptions.cellTemplate) {\n            return;\n        }\n        var dateValue = util.addLocalOffset(data.date);\n        var args = { date: dateValue, type: data.type };\n        if (data.groupIndex) {\n            args.groupIndex = data.groupIndex;\n        }\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.cellTemplateName;\n        var templateId = scheduleId + viewName + 'cellTemplate';\n        var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n        append(cellTemplate, td);\n    };\n    TimelineYear.prototype.scrollToDate = function (scrollDate) {\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var date = +new Date(util.resetTime(scrollDate));\n            var element = this.element.querySelector('[data-date=\"' + date + '\"]');\n            if (element) {\n                this.getScrollableElement().scrollLeft = element.offsetLeft;\n                this.getScrollableElement().scrollTop = element.offsetTop;\n            }\n        }\n    };\n    TimelineYear.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    return TimelineYear;\n}(Year));\nexport { TimelineYear };\n","import { extend } from '@syncfusion/ej2-base';\nimport { getDateFromRecurrenceDateString, getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\n/**\n * ICalendar Export Module\n */\nvar ICalendarExport = /** @class */ (function () {\n    function ICalendarExport(parent) {\n        this.parent = parent;\n    }\n    ICalendarExport.prototype.initializeCalendarExport = function (fileName, customData) {\n        var _this = this;\n        var eventsData = (customData) ? customData : extend([], this.parent.eventsData, null, true);\n        eventsData = this.parent.eventBase.sortByTime(eventsData);\n        var SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n        var iCalendarEvents = [];\n        var filterCollection = [];\n        var timeZone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        var fields = this.parent.eventFields;\n        eventsData.forEach(function (eventObj) {\n            var uId = _this.parent.eventBase.generateGuid();\n            var editedExDate = [];\n            if (eventObj[fields.recurrenceID]) {\n                var filter = _this.filterEvents(filterCollection, fields.id, eventObj[fields.recurrenceID]);\n                uId = filter[0].UID;\n            }\n            if (!eventObj[fields.recurrenceID] && eventObj[fields.recurrenceRule] && eventObj[fields.recurrenceException]) {\n                var exceptionDateList = void 0;\n                var exDate = (eventObj[fields.recurrenceException]).split(',');\n                var editedObj = _this.filterEvents(eventsData, fields.recurrenceID, eventObj[fields.id]);\n                editedObj.forEach(function (edited) {\n                    editedExDate.push(getRecurrenceStringFromDate(edited[fields.startTime]));\n                });\n                exceptionDateList = exDate.filter(function (value) { return (editedExDate.indexOf(value) === -1); });\n                eventObj[fields.recurrenceException] = (exceptionDateList.length > 0) ? (exceptionDateList.join(',') + ',') : '';\n            }\n            var startZone = (eventObj[fields.startTimezone] || timeZone);\n            var endZone = (eventObj[fields.endTimezone] || timeZone);\n            var calendarEvent = [\n                'BEGIN:VEVENT',\n                'LOCATION:' + (eventObj[fields.location] || ''),\n                'SUMMARY:' + (eventObj[fields.subject] || ''),\n                'UID:' + uId,\n                'DESCRIPTION:' + (eventObj[fields.description] || ''),\n                'END:VEVENT'\n            ];\n            if (eventObj[fields.isAllDay]) {\n                calendarEvent.splice(4, 0, 'DTEND;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.endTime], true));\n                calendarEvent.splice(4, 0, 'DTSTART;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.startTime], true));\n            }\n            else if (!eventObj[fields.isAllDay] && !eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'DTEND:' + _this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART:' + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            else {\n                calendarEvent.splice(4, 0, 'DTEND;TZID=\"' + endZone + '\":' + _this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            if (eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'RRULE:' + eventObj[fields.recurrenceRule]);\n            }\n            if (eventObj[fields.recurrenceException]) {\n                var exDate = eventObj[fields.recurrenceException].split(',');\n                for (var i = 0; i < exDate.length - 1; i++) {\n                    calendarEvent.splice(5, 0, 'EXDATE:' +\n                        _this.convertDateToString(getDateFromRecurrenceDateString(exDate[i]), eventObj[fields.isAllDay]));\n                }\n            }\n            if (eventObj[fields.recurrenceID]) {\n                calendarEvent.splice(4, 0, 'RECURRENCE-ID;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime], eventObj[fields.isAllDay]));\n            }\n            var customFields = _this.customFieldFilter(eventObj, fields);\n            if (customFields.length > 0) {\n                customFields.forEach(function (customField) {\n                    return calendarEvent.splice(4, 0, customField + ':' + (eventObj[customField] || ''));\n                });\n            }\n            var app = extend({}, eventObj);\n            app.UID = uId;\n            filterCollection.push(app);\n            iCalendarEvents.push(calendarEvent.join(SEPARATOR));\n        });\n        var iCalendar = [\n            'BEGIN:VCALENDAR',\n            'PRODID:-//Syncfusion Inc//Scheduler//EN',\n            'VERSION:2.0',\n            'CALSCALE:GREGORIAN',\n            'METHOD:PUBLISH',\n            'X-WR-CALNAME:' + (fileName || 'Calendar'),\n            'X-WR-TIMEZONE:' + timeZone,\n        ].join(SEPARATOR);\n        var icsString = iCalendar + SEPARATOR + iCalendarEvents.join(SEPARATOR) + SEPARATOR + 'END:VCALENDAR';\n        this.download(icsString, fileName);\n    };\n    ICalendarExport.prototype.customFieldFilter = function (eventObj, fields) {\n        var defaultFields = Object.keys(fields).map(function (key) { return fields[key]; });\n        var eventFields = Object.keys(eventObj);\n        return eventFields.filter(function (value) { return (defaultFields.indexOf(value) === -1) && (value !== 'Guid'); });\n    };\n    ICalendarExport.prototype.convertDateToString = function (eventDate, allDay) {\n        var year = ('0000' + (eventDate.getFullYear().toString())).slice(-4);\n        var month = ('00' + ((eventDate.getMonth() + 1).toString())).slice(-2);\n        var date = ('00' + ((eventDate.getDate()).toString())).slice(-2);\n        var hours = ('00' + (eventDate.getHours().toString())).slice(-2);\n        var minutes = ('00' + (eventDate.getMinutes().toString())).slice(-2);\n        var seconds = ('00' + (eventDate.getSeconds().toString())).slice(-2);\n        var timeString = (allDay) ? year + month + date : year + month + date + 'T' + hours + minutes + seconds;\n        return timeString;\n    };\n    ICalendarExport.prototype.download = function (icsString, fileName) {\n        var buffer = new Blob([icsString], { type: 'data:text/calendar;charset=utf8' });\n        fileName = (fileName || 'Calendar') + '.ics';\n        if (!(!navigator.msSaveBlob)) {\n            navigator.msSaveBlob(buffer, fileName);\n        }\n        else {\n            var downloadLink_1 = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n            downloadLink_1.download = fileName;\n            downloadLink_1.href = URL.createObjectURL(buffer);\n            var event_1 = document.createEvent('MouseEvent');\n            event_1.initEvent('click', true, true);\n            downloadLink_1.dispatchEvent(event_1);\n            setTimeout(function () {\n                URL.revokeObjectURL(downloadLink_1.href);\n                downloadLink_1.href = undefined;\n            });\n        }\n    };\n    ICalendarExport.prototype.filterEvents = function (data, field, value) {\n        return data.filter(function (e) { return e[field] === value; });\n    };\n    /**\n     * Get module name.\n     */\n    ICalendarExport.prototype.getModuleName = function () {\n        return 'iCalendarExport';\n    };\n    /**\n     * To destroy the ICalendarExport.\n     * @return {void}\n     * @private\n     */\n    ICalendarExport.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent = null;\n    };\n    return ICalendarExport;\n}());\nexport { ICalendarExport };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\n/**\n * ICalendar Import Module\n */\nvar ICalendarImport = /** @class */ (function () {\n    function ICalendarImport(parent) {\n        this.allDay = false;\n        this.parent = parent;\n    }\n    ICalendarImport.prototype.initializeCalendarImport = function (fileContent) {\n        var _this = this;\n        if (fileContent && fileContent instanceof Blob) {\n            var fileReader_1 = new FileReader();\n            fileReader_1.onload = function (event) {\n                var iCalString = fileReader_1.result;\n                _this.iCalendarParser(iCalString);\n            };\n            fileReader_1.readAsText(fileContent, 'UTF-8');\n        }\n        else if (fileContent && typeof fileContent === 'string') {\n            this.iCalendarParser(fileContent);\n        }\n    };\n    ICalendarImport.prototype.iCalendarParser = function (iCalString) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var events = [];\n        var uId = 'UID';\n        var calArray = iCalString.replace(new RegExp('\\\\r', 'g'), '').split('\\n');\n        var isEvent = false;\n        var curEvent = null;\n        var id = this.parent.eventBase.getEventMaxID();\n        calArray.forEach(function (element) {\n            var index;\n            var type;\n            var value;\n            if (!isEvent && element === 'BEGIN:VEVENT') {\n                isEvent = true;\n                curEvent = {};\n            }\n            if (isEvent && element === 'END:VEVENT') {\n                isEvent = false;\n                events.push(curEvent);\n                curEvent = null;\n            }\n            if (isEvent) {\n                index = element.indexOf(':');\n                type = element.substr(0, index).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                value = element.substr(index + 1, element.length - (index + 1)).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                if (element.indexOf('SUMMARY') !== -1) {\n                    type = 'SUMMARY';\n                }\n                if (element.indexOf('DTSTART') !== -1) {\n                    curEvent[fields.startTime] = _this.dateParsing(element);\n                    curEvent[fields.isAllDay] = _this.allDay;\n                    _this.allDay = false;\n                }\n                else if (element.indexOf('DTEND') !== -1) {\n                    curEvent[fields.endTime] = _this.dateParsing(element);\n                }\n                else if (element.indexOf('EXDATE') !== -1) {\n                    value = getRecurrenceStringFromDate(_this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = (isNullOrUndefined(curEvent[fields.recurrenceException])) ?\n                        value : curEvent[fields.recurrenceException] + ',' + value;\n                }\n                else if (element.indexOf('RECURRENCE-ID') !== -1) {\n                    value = getRecurrenceStringFromDate(_this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = value;\n                    curEvent[fields.recurrenceID] = value;\n                }\n                else {\n                    switch (type) {\n                        case 'BEGIN':\n                            break;\n                        case 'UID':\n                            curEvent[uId] = value;\n                            curEvent[fields.id] = id++;\n                            break;\n                        case 'SUMMARY':\n                            curEvent[fields.subject] = value;\n                            break;\n                        case 'LOCATION':\n                            curEvent[fields.location] = value;\n                            break;\n                        case 'DESCRIPTION':\n                            curEvent[fields.description] = value;\n                            break;\n                        case 'RRULE':\n                            curEvent[fields.recurrenceRule] = value;\n                            break;\n                        default:\n                            curEvent[type] = value;\n                    }\n                }\n            }\n        });\n        var app = extend([], events, null, true);\n        this.parent.addEvent(this.processOccurrence(app));\n    };\n    ICalendarImport.prototype.processOccurrence = function (app) {\n        var appoint = [];\n        var uId = 'UID';\n        var fields = this.parent.eventFields;\n        app.forEach(function (eventObj) {\n            var parentObj;\n            var id;\n            if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                parentObj = eventObj;\n                id = eventObj[fields.id];\n            }\n            var data = app.filter(function (data) {\n                return data.UID === eventObj[uId];\n            });\n            if (data.length > 1 && isNullOrUndefined(eventObj[fields.recurrenceID])) {\n                for (var i = 0; i < data.length; i++) {\n                    if (data[i].hasOwnProperty(fields.recurrenceID)) {\n                        var exdate = data[i][fields.recurrenceID];\n                        data[i][fields.recurrenceID] = id;\n                        data[i][fields.recurrenceException] = null;\n                        parentObj[fields.recurrenceException] = (isNullOrUndefined(parentObj[fields.recurrenceException])) ?\n                            exdate : parentObj[fields.recurrenceException] + ',' + exdate;\n                        appoint.push(data[i]);\n                    }\n                }\n                appoint.push(parentObj);\n            }\n            else if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                appoint.push(eventObj);\n            }\n        });\n        return appoint;\n    };\n    ICalendarImport.prototype.getDateString = function (value) {\n        value = value || '';\n        return (value\n            .replace(/\\\\\\,/g, ',')\n            .replace(/\\\\\\;/g, ';')\n            .replace(/\\\\[nN]/g, '\\n')\n            .replace(/\\\\\\\\/g, '\\\\'));\n    };\n    ICalendarImport.prototype.dateParsing = function (element) {\n        var expression = /([^':;]+)((?:;(?:[^':;]+)(?:=(?:(?:'[^']*')|(?:[^':;]+))))*):(.*)/;\n        var split = (element.match(expression)).slice(1);\n        var value = split[split.length - 1];\n        var newDate = new Date(this.getDateString(value));\n        if (element && element.indexOf('VALUE=DATE') > -1) {\n            var data_1 = /^(\\d{4})(\\d{2})(\\d{2})$/.exec(value);\n            if (data_1 !== null) {\n                newDate = new Date(parseInt(data_1[1], 10), parseInt(data_1[2], 10) - 1, parseInt(data_1[3], 10));\n            }\n            if (element.indexOf('DTSTART') > -1) {\n                this.allDay = true;\n            }\n        }\n        var data = /^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})(Z)?$/.exec(value);\n        if (data !== null) {\n            if (data[7] === 'Z') {\n                newDate = new Date(Date.UTC(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10)));\n            }\n            else {\n                newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10));\n            }\n        }\n        return newDate;\n    };\n    /**\n     * Get module name.\n     */\n    ICalendarImport.prototype.getModuleName = function () {\n        return 'iCalendarImport';\n    };\n    /**\n     * To destroy the ICalendarImport.\n     * @return {void}\n     * @private\n     */\n    ICalendarImport.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n    };\n    return ICalendarImport;\n}());\nexport { ICalendarImport };\n","import { Workbook } from '@syncfusion/ej2-excel-export';\nimport { extend } from '@syncfusion/ej2-base';\n/**\n * Excel Export Module\n */\nvar ExcelExport = /** @class */ (function () {\n    function ExcelExport(parent) {\n        this.parent = parent;\n    }\n    ExcelExport.prototype.initializeExcelExport = function (excelExportOptions) {\n        var _this = this;\n        var exportFields = excelExportOptions.fields || Object.keys(this.parent.eventFields).map(function (field) {\n            return _this.parent.eventFields[field];\n        });\n        var exportName = excelExportOptions.fileName || 'Schedule';\n        var exportType = excelExportOptions.exportType || 'xlsx';\n        var isIncludeOccurrences = excelExportOptions.includeOccurrences || false;\n        var eventCollection;\n        if (excelExportOptions.customData) {\n            eventCollection = !isIncludeOccurrences ? excelExportOptions.customData :\n                this.parent.eventBase.getProcessedEvents(excelExportOptions.customData);\n        }\n        else {\n            eventCollection = (!isIncludeOccurrences ? this.parent.eventsData : this.parent.eventsProcessed);\n        }\n        this.processWorkbook(exportFields, exportName, exportType, eventCollection);\n    };\n    ExcelExport.prototype.processWorkbook = function (fields, name, type, eventCollection) {\n        var _this = this;\n        var columns = [];\n        var rows = [];\n        var columnHeader = [];\n        fields.forEach(function (field, i) { return columns.push({ index: i + 1, width: (field === 'Id' ? 20 : 150) }); });\n        var style = { fontSize: 12, borders: { color: '#E0E0E0' }, bold: true };\n        fields.forEach(function (field, i) { return columnHeader.push({ index: i + 1, value: field, style: style }); });\n        rows.push({ index: 1, cells: columnHeader });\n        var i = 2;\n        var _loop_1 = function (event_1) {\n            var columnData = [];\n            fields.forEach(function (field, n) {\n                var columnRule = { index: n + 1, value: event_1[field] || '' };\n                if (field === _this.parent.eventFields.startTime || field === _this.parent.eventFields.endTime) {\n                    var styleRule = { fontSize: 12, numberFormat: 'm/d/yyyy h:mm AM/PM' };\n                    columnRule = extend({}, columnRule, { style: styleRule }, true);\n                }\n                columnData.push(columnRule);\n            });\n            rows.push({ index: i, cells: columnData });\n            i++;\n        };\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_1 = eventCollection_1[_i];\n            _loop_1(event_1);\n        }\n        var workSheet = [{ columns: columns, rows: rows }];\n        var book = new Workbook({ worksheets: workSheet }, type, this.parent.locale);\n        book.save(name + '.' + type);\n    };\n    ExcelExport.prototype.getModuleName = function () {\n        return 'excelExport';\n    };\n    ExcelExport.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * Print Module\n */\nvar Print = /** @class */ (function () {\n    function Print(parent) {\n        this.parent = parent;\n    }\n    Print.prototype.printScheduler = function () {\n        var clone = this.parent.element.cloneNode(true);\n        clone.id = this.parent.element.id + '_print';\n        document.body.appendChild(clone);\n        var scrollableEle = this.getScrollableElement(this.parent.element);\n        this.print(clone, scrollableEle.scrollTop, scrollableEle.scrollLeft);\n    };\n    Print.prototype.getScrollableElement = function (element) {\n        if (this.parent.currentView === 'MonthAgenda') {\n            return element.querySelector('.e-appointment-wrap');\n        }\n        return element.querySelector('.e-content-wrap');\n    };\n    Print.prototype.print = function (clone, top, left) {\n        var _this = this;\n        var links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('link, style'));\n        var reference = '';\n        for (var i = 0, len = links.length; i < len; i++) {\n            reference += links[i].outerHTML;\n        }\n        var div = createElement('div');\n        clone.style.width = this.parent.element.offsetWidth + 'px';\n        var elementWidth = Math.round((parseInt(clone.style.width, 10)) / 100) * 100;\n        div.appendChild(clone);\n        var printWindow = window.open('', 'print', 'height=550,width=' + elementWidth + ',tabbar=no');\n        printWindow.document.write('<!DOCTYPE html> <html><head>' + reference + '</head><body>' + div.innerHTML +\n            '<script> (function() { window.ready = true; })(); </script>' + '</body></html>');\n        printWindow.document.close();\n        printWindow.focus();\n        setTimeout(function () {\n            // tslint:disable-next-line:no-any\n            if (printWindow.ready) {\n                _this.scrolledScheduler(printWindow, top, left);\n                printWindow.print();\n                printWindow.close();\n            }\n        }, 500);\n    };\n    Print.prototype.scrolledScheduler = function (printWindow, top, left) {\n        var scrollableEle = this.getScrollableElement(printWindow.document.body);\n        scrollableEle.scrollLeft = left;\n        scrollableEle.scrollTop = top;\n        var headerTimeCellsScroll = printWindow.document.querySelector('.e-date-header-wrap');\n        if (this.parent.activeView.isTimelineView()) {\n            headerTimeCellsScroll.scrollLeft = left;\n        }\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            var timeCellsScroll = printWindow.document.querySelector('.e-time-cells-wrap');\n            timeCellsScroll.scrollTop = top;\n            headerTimeCellsScroll.scrollLeft = left;\n        }\n        if (this.parent.currentView === 'Month') {\n            headerTimeCellsScroll.scrollLeft = left;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return Print;\n}());\nexport { Print };\n","import * as index from './index';\nindex.Schedule.Inject(index.Day, index.Week, index.WorkWeek, index.Month, index.Year, index.Agenda, index.MonthAgenda, index.TimelineViews, index.TimelineMonth, index.TimelineYear, index.Resize, index.DragAndDrop, index.ExcelExport, index.ICalendarExport, index.ICalendarImport, index.Print);\nexport * from './index';\n"],"names":["getElementHeightFromClass","container","elementClass","height","el","createElement","className","cloneNode","style","visibility","position","appendChild","getBoundingClientRect","remove","getTranslateY","element","getComputedStyle","window","WebKitCSSMatrix","webkitTransform","m42","getWeekFirstDate","date1","firstDayOfWeek","date","Date","getTime","getDay","setDate","getDate","getWeekLastDate","weekFirst","weekLast","getFullYear","getMonth","firstDateOfMonth","lastDateOfMonth","dt","getWeekNumber","valueOf","dayOfYear","MS_PER_DAY","Math","ceil","getWeekMiddleDate","setTime","time","tzOffsetBefore","getTimezoneOffset","d","tzOffsetDiff","MS_PER_MINUTE","resetTime","getDateInMs","sysDateOffset","getDateCount","startDate","endDate","addDays","i","addMonths","day","setMonth","min","getMaxDays","addYears","setFullYear","getStartEndHours","startHour","endHour","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","date2","getDaysCount","strTime","endTime","round","getDateFromString","indexOf","parseInt","match","toString","replace","getScrollBarWidth","scrollWidth","divNode","value","cssText","document","body","ratio","devicePixelRatio","toFixed","floor","offsetWidth","clientWidth","removeChild","findIndexInData","data","property","event","resourceCollection","length_1","length","field","slice","Array","join","includes","groupIDField","getOuterHeight","offsetHeight","marginTop","marginBottom","removeChildren","_i","elementChildren_1","call","children","elementChild","classList","contains","isDaylightSavingTime","jan","jul","max","addLocalOffset","addLocalOffsetToEvent","eventFields","isIPadDevice","navigator","userAgent","toLowerCase","capitalizeFirstWord","inputString","type","split","map","e","charAt","toLocaleUpperCase","substring","array","isNullOrUndefined","index","generateSummary","rule","localeObject","locale","calendarType","cldrObj","cldrObj1","ruleObject","extractObjectFromRule","summary","getConstant","EVERY","calendarMode","nameSpace1","nameSpace","getValue","getDefaultDateObject","cldrData","interval","freq","DAYS","WEEKS","ON","forEach","DAYINDEXOBJECT","MONTHS","getMonthSummary","YEARS","month","count","TIMES","until","tempDate","UNTIL","localeObj","monthDay","pos","setPosition","WEEKPOS","generate","excludeDate","startDayOfWeek","maximumCount","viewDate","oldTimezone","newTimezone","MAXOCCURRENCE","cacheDate","calendarUtil","getCalendarUtil","modifiedDate","tempExcludeDate","tz","Timezone","content","parsedDate","getDateFromRecurrenceDateString","convert","push","recExceptionCount","tempViewDate","maxOccurrence","setFirstDayOfWeek","DAYINDEX","dailyType","weeklyType","monthlyType","yearlyType","recDateString","substr","excludeDateHandler","zeroIndex","expectedCount","expectedDays","compareDates","validateRules","wkstIndex","weekState","weekCollection","wkst","dayIndex","startDateDiff","weekendDate","compareTempDate","insertDataCollection","getStartDateForWeek","validateMonthlyRuleType","monthlyDayTypeProcessforMonthFreq","monthlyDayTypeProcess","monthlyDateTypeProcessforMonthFreq","monthlyDateTypeProcess","checkYearlyType","processWeekNo","processYearDay","firstWeekSpan","weekNo","maxDate","minDate","stDate","getYearLastDate","weekNos","insertDateCollection","state","insertDatasIntoExistingCollection","dateCollection","yearDay","getLeapYearDaysCount","isLeapYear","getYearDaysCount","initializeRecRuleVariables","ruleData","monthCollection","mainDate","monthInit","currentMonthDate","getMonthStartDate","isSameYear","checkMonth","setValidDate","processDateCollectionForByMonthDay","beginDate","setNextValidDate","isLastMonth","getMonthDaysCount","recRuleVariables","isByMonth","validateProperDate","monthData","getMonthCollection","dates","item","HASNUMBER","test","j","expectedDaysArray","SPLITNUMBERANDSTRING","isSameMonth","isNaN","filterDateCollectionByIndex","insertDateCollectionBasedonBySetPos","dayCycleData","processWeekDays","initialDate","datas","week","row","insertDateCollectionBasedonIndex","isHavingNumber","processDateCollectionforByDayWithInteger","compareMonth","newstr","getDayString","currentDate","getRecurrenceCollection","recurrenceCollectionObject","expectedDaysArrays","arrPosition","getDateCollectionforBySetPosNull","recurrenceCollections","dayData","chDate","weekCount","year","firstOfMonth","numberOfDaysInMonth","used","sort","weekIndex","validRules","REMOVENUMBERINSTRING","checkDayIndex","sortedExpectedDays","expectedDaysNumberSplit","expectedDaysArr","rules","temp","splitData","Number","splice","dayCycle","startIndex","checkDate","expectedDate","shift","checkYear","expectedyearDay","getYearDay","startDateCollection","diff","rotate","days","expectedMonth","getExpectedDays","Islamic","Gregorian","getRecurrenceStringFromDate","getUTCFullYear","roundDateValues","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","actionBegin","renderCell","inlineClick","dataReady","contentReady","scrollUiUpdate","ROOT","ICON","TABLE_CONTAINER_CLASS","CONTENT_TABLE_CLASS","POPUP_OPEN","RESOURCE_TOOLBAR_CONTAINER","APPOINTMENT_CONTAINER_CLASS","TEXT_ELLIPSIS","FORM_CLASS","EVENT_TOOLTIP_ROOT_CLASS","HeaderRenderer","parent","this","l10n","renderHeader","addEventListener","prototype","on","closeHeaderPopup","removeEventListener","off","closestEle","closest","target","closestPop","contentWrap","querySelector","isAdaptive","cls.POPUP_OPEN","removeClass","popupObj","ej2_instances","hide","addClass","hideHeaderPopup","headerPopup","toolbarEle","insertBefore","firstElementChild","renderToolbar","args","requestType","items","getItems","trigger","events.actionBegin","toolbarObj","Toolbar","overflowMode","clicked","toolbarClickHandler","bind","enableRtl","isStringTemplate","appendTo","prevNavEle","setAttribute","nextNavEle","updateActiveView","updateItems","dataBind","getPopUpRelativeElement","setDayOfWeek","headerCalendar","setCalendarDate","setCalendarMinMaxDate","getCalendarView","currentView","setCalendarView","calendarView","depth","start","refresh","selEle","querySelectorAll","viewIndex","updateDateRange","text","innerHTML","refreshOverflow","getDateRangeText","util.capitalizeFirstWord","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","showInPopup","align","prefixIcon","tooltipText","overflow","cssClass","htmlAttributes","aria-label","role","suffixIcon","aria-atomic","aria-live","showAlwaysInPopup","views","_a","getItemObject","viewName","displayName","option","view","orientation","renderHeaderPopup","headerPopupEle","headerCalendarEle","Popup","actionOnScroll","targetType","relateTo","X","Y","Calendar","activeViewOptions","change","calendarChange","setCalendarTimezone","calendarDate","util.resetTime","changeDate","timezone","tzModule","getLocalTimezoneName","calculateViewIndex","originalEvent","show","changeView","undefined","isSelectedDate","getCurrentTime","activeView","getNextPreviousDate","isSameTime","activeCellsData","startTime","timeScale","slotCount","msInterval","util.MS_PER_MINUTE","currentTime","setMilliseconds","getMilliseconds","isAllDay","eventWindow","openEditor","extend","cancel","toolbarPopUp","name","duration","getHeaderElement","updateHeaderItems","classType","dateRangeEle","cls.TEXT_ELLIPSIS","previousNextIconHandler","getCurrentViewDates","firstDate","lastDate","util.addDays","util.getWeekFirstDate","util.lastDateOfMonth","util.addMonths","util.firstDateOfMonth","enableItems","getModuleName","destroy","isDestroyed","Scroll","setWidth","width","formatUnit","setHeight","setDimensions","onPropertyChanged","cssProperties","getCssProperties","module","notify","ScheduleTouch","cls.TABLE_CONTAINER_CLASS","touchObj","Touch","scroll","scrollHandler","swipe","swipeHandler","tapHold","tapHoldHandler","swipeSettings","swipeThresholdDistance","EventHandler","add","onTransitionEnd","touchLeftDirection","touchRightDirection","uiStateValues","action","timeStampStart","now","scrollDirection","scrollDiv","isScrollTriggered","preventDefault","stopPropagation","nextPanel","renderPanel","getPanel","x","distanceX","transform","getTranslateX","prevWidth","previousPanel","swipeDate","swipeDirection","renderDates","offsetDist","Browser","isDevice","swapPanels","transitionDuration","confirmSwipe","cancelSwipe","quickPopup","tapHoldEventPopup","clsName","nextPrevType","currentPanel","setProperties","headerModule","getRenderDates","renderLayout","direction","_this","previousDate","navArgs","setPanel","translateX","offsetLeft","renderTemplates","renderModule","refreshDataManager","generateColumnLevels","m41","resetValues","util.removeChildren","KeyboardInteraction","selectedCells","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDownArrow","shiftUpArrow","shiftRightArrow","shiftLeftArrow","ctrlLeftArrow","ctrlRightArrow","altOne","altTwo","altThree","altFour","altFive","altSix","altSeven","altEight","altNine","enter","escape","delete","home","pageUp","pageDown","tab","shiftTab","ctrlShiftUpArrow","ctrlShiftDownArrow","ctrlShiftLeftArrow","ctrlShiftRightArrow","tabIndex","keyboardModule","KeyboardEvents","keyAction","keyActionHandler","eventName","processDown","shiftKey","processUp","processLeft","processRight","focus","processViewNavigation","processEnter","focusFirstCell","processTab","processDelete","processCtrlShiftNavigationArrows","processEscape","onCellMouseDown","initialTarget","getClosestCell","readonly","which","removeSelectedClass","getContentTable","onMouseSelection","onMoveup","allDayRow","getAllDayRow","appointments","selectionEdges","boundaryValidation","pageY","pageX","bottom","top","left","right","parent_1","yInBounds","scrollHeight","scrollTop","xInBounds","scrollLeft","selectCells","isPreventAction","getSelectedElements","cellData","convertToEventData","showQuickPopup","selectArgs","quickInfoOnSelectionEnd","cellArgs","click","resourceIcon","inlineModule","inlineCrudActions","setScheduleProperties","getDateFromElement","getNavigateView","allowInline","inlineArgs","groupIndex","event.inlineClick","cellDetails","getCellDetails","end","getCells","isInverseTable","tableEle","cells","maxRow","rows","maxColumn","endIndex","inverseCells","focusCell","eventBase","removeSelectedAppointmentClass","isTimelineView","cell","cls.CONTENT_TABLE_CLASS","getWorkCellElements","isInverseTableSelect","isMultiple","targetCell","initialId_1","views_1","allowMultipleRow","removeInlineAppointmentElement","allowMultiRowSelection","parentElement","cellIndex","group","resources","getAttribute","resourceSelectedCells","selectedCells_1","allowMultiCellSelection","allDayCells","getAllDayCells","resourceAllDayCells","allDayCells_1","concat","addSelectedClass","selectAppointment","isReverse","getAppointmentElements","nextAppEle","targetIndex","addSelectedAppointments","selectAppointmentElementFromWorkCell","appointmentElements_1","getUniqueAppointmentElements","filteredElements_1","selectedDate_1","eventsProcessed","filter","eventObject","JSON","stringify","Guid","selectedElement","focusElements","getAppointmentElementsByGuid","startCell","endCell","util.MS_PER_DAY","guid","appointmentElements","self","getWorkCellFromAppointmentElement","selectedObject","getEventByGuid","selectWorkCellByTime","key","viewCollections","selectedElements","selectedEventElements","getSelectedAppointments","moreEventWrapper","quickPopupWrapper","getQuickPopupElement","tableRows","getTableRows","curRowIndex","processLeftRight","parentNode","sectionRowIndex","rowIndex","columnIndex","maxIndex","isCancelLeftRightAction","selectedAppointments","calculateNextPrevDate","curColIndex","maxColIndex","allDayRow_1","allDayRow_2","currentCell","initialId","nextPrevDate","getMsFromDate","getFocusableElements","processTabOnPopup","popupElement","focusableElements","firstEle","footerEle","offsetParent","lastEle","activeElement","popupWrapper","cls.ROOT","appElements","resCellSelector","resourceCell","appSelector","focusAppointment","resourceBase","lastResourceLevel","activeEle","selectedEle","getSelectedEvents","activeEventData","deleteClick","eventEle","renderedResources","onClosePopup","morePopup","Data","dataSource","query","initDataManager","dataManager","DataManager","Query","generateQuery","clone","addParams","toISOString","getData","executeQuery","isMonthStart","getMonthEndDate","dateObj","monthValue","months","hDate","HijriParser","getHijriDate","toGregorian","gDate","getDaysInMonth","finalGDate","finalHDate","updateDateObj","currentHijri","tempHijri","hDate1","offset","localOffset","convertedDate","toLocaleString","timeZone","error","fromOffset","toOffset","fromLocalOffset","toLocalOffset","removeLocalOffset","Intl","DateTimeFormat","resolvedOptions","timezoneData","Value","Text","SU","MO","TU","WE","TH","FR","SA","EventBase","slots","isDoubleTapped","processData","events","timeZonePropChanged","fields","processed","generateID","id","this_1","events_1","event_1","util.getDateFromString","processTimezoneChange","processTimezone","level","recurrenceRule","recurrenceID","crudModule","crudObj","isCrudAction","recEvent","app","generateOccurrence","k","generateGuid","eventData","isBlock","filterEvents","blockData","len","eventObj","blockProcessed","getProcessedEvents","eventCollection","eventsData","event_2","timezonePropertyChange","event.dataReady","processedData","timezoneConvert","startTimezone","endTimezone","startTz","endTz","filterBlockEvents","resourceData","eStart","eEnd","getGroupIndexFromEvent","resourceTdData","fieldMapping","predicate","Predicate","and","or","json","executeLocal","where","filterEventsByResource","sortByTime","filterEventsByRange","filteredEvents","groupOrder","keys","Object","every","a","b","d1","d2","sortByDateTime","object1","object2","d3","d4","d5","d6","getSmallestMissingNumber","large","apply","splitEventByDay","eventStartTime","eventEndTime","eventLength","util.getDaysCount","isSpanned","splitEvent","dateRender","util.getDateInMs","orgStart","orgEnd","ranges","cStart","slot","byDate","showWeekend","slotDates","slot_1","s","renderedDates","getRenderedDates","renderedDates_1","firstSlot","hasBreak","isLeft","isRight","cloneEventObject","dateInRange","availSlot","_b","availSlot_1","slot_2","getSelectedEventElements","elementSelector","focusElements_1","eventSelect","elementSelect","selectedAppointments_1","cells_1","focusElement","dialogObject","visible","selectedCell","keyboardInteractionModule","nearestTime","isAllDayAppointment","targetArea","queryString","levelIndex","resource","levelName","idField","parentField","getIndexFromResourceId","isFullDay","appointmentBorderRemove","wireAppointmentEvents","isPreventCrud","isReadOnly","isReadonly","eventClick","eventTouchClick","eventDoubleClick","resizeModule","wireResizeEvent","dragAndDropModule","wireDragEvent","setTimeout","renderResizeHandler","spanEvent","allowResizing","resizeEdge","resizeHandler","prepend","append","isTop","isBottom","ctrlKey","target_1","selectEventArgs","eventClickArgs","quickPopupHide","currentAction","openRecurrenceAlert","getEventById","c","r","random","getEventIDType","getEventMaxID","resourceId","eventId","idType","maxId","obj","isMaxCount","eventRule","maxCount","exception","recurrenceException","util.getDateCount","generatedDates","occurrenceCollection","dates_1","clonedObject","followingID","getParentEvent","isParent","parentEvent","getFollowingEvent","collection","getEventCollections","followObj","follow","occurrence","parentObj","childObj","followingCollection","followingEvent","getOccurrenceEvent","collections","fields_1","fieldValue","isFollowingEvent","parentStart","childStart","isGuid","isFollowing","fieldKey","getOccurrencesByID","event_3","getOccurrencesByRange","event_4","getDeletedOccurrences","recurrenceData","parentObject","deletedOccurrences","exDateString_1","this_2","exDate","childObject","applyResourceColor","alpha","color","getResourceColor","createBlockAppointmentElement","record","resIndex","templateElement","eventSubject","subject","eventSettings","default","appointmentWrapper","attrs","data-id","aria-readonly","aria-selected","eventTemplate","templateId","eventTemplateName","templateArgs","util.addLocalOffsetToEvent","getAppointmentTemplate","setWrapperAttributes","getReadonlyAttribute","isBlockRange","isBlockAlert","event_5","dataCol","dataCol_1","getFilterEventsList","getSeriesEvents","deleteFutureEditEvents","futureEvents","deleteFutureEvent","deleteFutureEditEventList","delId","followingId","startTimeQuery","getEditedOccurrences","delEditedEvents","deleteRecurrenceEventList","deleteFutureEditEventList_1","event_6","delEventQuery","filteredDates","isValidEvent","schedule","isHourRange","isSameRange","__extends","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","VerticalEvent","_super","renderedEvents","renderedAllDayEvents","overlapEvents","moreEvents","overlapList","allDayEvents","allDayLevel","getStartHour","getEndHour","animation","Animation","progress","animationUiUpdate","renderAppointments","wrapperElements","isDragging","wrapperElements_1","wrapper","sourceEvent","targetEvent","allDayElement","setAllDayRowHeight","expandCollapse","rowExpandCollapse","initializeValues","processBlockEvents","renderEvents","arr","events.contentReady","isGroupAdaptive","cellHeight","parseFloat","getHeight","appHeight","appendEvent","appointmentElement","appLeft","appointmentWrap","setStyleAttribute","eventType","eventArgs","dateCount","resources_1","getResourceList","filterEvents_1","setValues","renderBlockEvents","dayCount","spannedData","isSpannedEvent","util.getStartEndHours","blockTop","blockHeight","getTopValue","isRender","resources_2","renderedDate","length_2","filterEvents_2","renderAllDayEvents","enableMaxHeight","getOverlapIndex","renderNormalEvents","filterEvents_3","resourceIndex","getCssClass","createAppointmentElement","recordSubject","data-guid","tabindex","aria-grabbed","getAnnocementString","appointmentDetails","appointmentSubject","appointmentStartTime","getTimeString","appointmentEndTime","timeStr","location","iconClass","recurrenceIcon","cls.ICON","renderSpannedIcon","createMoreIndicator","currentDay","countWrapper","childElementCount","innerCountWrap","cls.ROW_COUNT_WRAPPER_CLASS","moreIndicatorElement","data-index","data-count","countCell","moreCount","iconElement","cls.EVENT_INDICATOR_CLASS","iconLeft","iconRight","iconTop","iconBottom","startEndHours","inline","currentDates","allDayRowCell","cellTop","offsetTop","appWidth","topValue","isDateRange","isAlreadyRendered","allDayDifference_1","allDayIndex_1","Index","widthAdjustment","appointmentElement_1","wIndex_1","eventWrapper_1","createInlineAppointmentElement","length_3","allDayRowHeight","expand","addOrRemoveClass","appIndex","argsData","getEventWidth","tempData","adjustOverlapElements","appointmentElement_2","maxHeight","subjectElement","tempWidth","getEventLeft","tempLeft","diffInMinutes","eventsList","date_1","appointmentList_1","appointment_1","recordStart_1","recordEnd_1","filterList","val","Id","eventsList_1","appLevel","length1","length2","eleGuid","apps","animate","moreEventCount","getEventHeight","eventElement","styles","rowHeight","MonthEvent","monthHeaderHeight","moreIndicatorHeight","renderType","enableIndicator","rowAutoHeight","withIndicator","maxOrIndicator","ignoreWhitespace","removeEventWarapper","appElement","appElement_1","wrap","conWrap","ele","appointmentWrapper_1","removeHeightProperty","eventHeight","util.getElementHeightFromClass","virtualScrollModule","renderResourceEvents","renderEventsHandler","workDays","updateBlockElements","isPreventScrollUpdate","scrollPosition","updateVirtualScrollHeight","events.scrollUiUpdate","enablePersistence","resData","blockList","workCells","totalCells","height_1","clientHeight","cellDetail","cellWidth","getSlotDates","splittedEvents_1","sDate","getStartTime","getIndex","updateIndicatorIcon","blockEvents","blockEvents_1","blockSpannedList","isSameDate","isBlockIcon","blockSpannedList_1","blockEvent","splittedEvents_2","isIcon","getEndTime","getIndexOfDate","cellTd","getCellTd","getPosition","renderBlockIndicator","diffInDays","appRight","renderWrapperElement","appTop","getRowTop","blockElement","renderEventElement","blockIndicator","cloneData","sourceRes","slotData","noOfDays","isCloneElement","newRecord","getEventData","eventLocation","innerElement","timeString","appendEventIcons","overlapCount","enableAppRender","inlineValue","firstChild","updateCellHeight","cellTd_1","getFilteredEvents","appArea","renderedAppCount","getMoreIndicatorElement","renderElement","moreIndicatorClick","blockElement_1","getOverlapEvents","appointmentsList","appointments_1","moreArgs","isPopupOpen","clickArgs","moreEventArgs","moreEventClick","isAppointment","pop","setMaxEventHeight","data-start-date","data-end-date","selector","rows_1","headerHeight","util.getOuterHeight","align-items","TimelineEvent","eventContainers","cls.APPOINTMENT_CONTAINER_CLASS","tr","dayLength","headerRows","slotsPerDay","appointments_2","trimStartTime","trimEndTime","source","elem","eleHeight","appWidth_1","top_1","renderApp","getFirstChild","enable","moreIndicator","appPos","isAlreadyAvail","startDateTime","slotStartTime","slotEndTime","getFilterEvents","monthHeader","blockIndicator_1","getNextDay","isSameDay","getSameDayEventsWidth","getSpannedEventsWidth","startWidth","endWidth","spannedWidth","getAppointmentLeft","slotTd","gIndex","indicatorPos","getCellHeight","heightValue","wrapIndex","InlineEdit","events.inlineClick","inlineEdit","moreWrapper","cellEdit","eventEdit","saveObj","generateEventData","getEventDaysCount","createVerticalViewInline","createMonthViewInline","createTimelineViewInline","inlineSubject","subEle","timeEle","innerText","subjectWrap","setSelectionRange","daysCount","verticalEvent","allDayElements","saveObject","monthEvent","monthCellSelector","monthModule","timelineView","workCell","abs","inlineElement","setDefaultValueToObject","setResourceValues","documentClick","addEvent","eventTarget","eventDetails","getEventDetails","saveEvent","inlineData","inlineAppointmentElement","cls.APPOINTMENT_CLASS","inlineDetails","inlineAppointment","node","FieldValidator","renderFormValidator","form","formObj","FormValidator","customPlacement","inputElement","errorPlacement","validationComplete","focusout","focusOut","relatedTarget","ignoreError","inputName","display","status","createTooltip","dlgContent","client","inputClient","div","arrow","destroyToolTip","elements_1","reset","QuickPopups","isMultipleEventSelect","fieldValidator","render","renderQuickPopup","renderMorePopup","renderQuickDialog","cls.POPUP_WRAPPER_CLASS","open","quickPopupOpen","close","quickPopupClose","hideAnimation","showAnimation","collision","viewPortElement","zIndex","moreEventPopup","cls.MORE_POPUP_WRAPPER_CLASS","morePopupOpen","morePopupClose","closeButton","renderButton","closeClick","navigationClick","buttonModel","isPrimary","dialogButtonClick","editFollowingEvents","followingSeriesButton","quickDialog","Dialog","animationSettings","effect","buttons","closeOnEscape","beforeClose","beforeQuickDialogClose","isModal","showCloseIcon","dialogElement","okButton","cancelButton","iconName","isDisabled","clickEvent","buttonObj","Button","disabled","iconCss","quickDialogClass","followingEventButton","applyFormValidation","cls.FORM_CLASS","validation","editDeleteOnly","editFollowingEventsOnly","editDeleteSeries","header","activeEvent","showQuickDialog","openRecurrenceValidationAlert","dialogCancel","enableRecurrenceValidation","openDeleteAlert","openValidationError","popupType","eventProp","popupArgs","createMoreEventList","moreEventContentEle","moreEventWrapperEle","eventCollection_1","eventText","tempId","eventTitle","closeIcon","editIcon","editClick","deleteIcon","beforeQuickPopupOpen","isCellBlocked","tempObj","cellClick","showQuickInfo","allowAdding","isMinMaxDate","targetEle","newEventClone","subjectElement_1","resetQuickPopupTemplates","quickCellPopup","getPopupHeader","getPopupContent","getPopupFooter","Input","createInput","properties","placeholder","popupClose","moreButton","detailsClick","saveButton","saveClick","isSameEventClick","editButton","isQuickTemplate","quickInfoTemplates","templateType","eventTooltip","updateTapHoldEventPopup","quickEventPopup","editAction","allowEditing","deleteAction","allowDeleting","buttonClass","deleteButton","headerType","headerData","headerTemplate","headerArgs","isBlazor","elementType","startTimeValue","util.addLocalOffset","endTimeValue","headerTemp","getQuickInfoTemplatesHeader","getFormattedString","templateWrapper","childNodes","contentTemplate","contentArgs","contentTemp","getQuickInfoTemplatesContent","resourceText","getResourceText","details","getRecurrenceSummary","getTimezone","description","footerType","footerData","footerTemplate","footer","footerArgs","footerTemp","getQuickInfoTemplatesFooter","resourceValue","resourceCollection_1","resourceData_1","id_1","textField","lastResource_1","isArray","resNames_1","lastResourceData_1","util.findIndexInData","resourceDetails","subjectValue","startDateDetails","getDateFormat","endDateDetails","startTimeDetail","endTimeDetail","spanLength","dateElement","moreEventElements","tdDate","subjectEle","updateMoreEventContent","moreElement","cancelBtn","deleteEvent","isIgnoreOccurrence","eventSave","titleContent","zoneDetails","recurrenceEditor","getRecurrenceEditorInstance","ruleSummary","getRuleSummary","toUpperCase","skeletonString","formatString","skeleton","getDataFromTarget","cellsData","popupCloseArgs","serializingData","success","isQuickInfoTemplates","updateQuickPopupTemplates","isEventPopup","destroyButtons","removeAttribute","innerHeight","offsetX","refreshPosition","collide","isCollide","translateY","util.getTranslateY","offsetY","applyEventColor","colorField","colorEle","borderLeftColor","backgroundColor","editElement","templateReady","updateBlazorTemplate","quickPopupShow","resetBlazorTemplate","resetTemplates","popupData","isCellPopup","formvalidator","validate","getObjectFromFormData","getDateTime","getElement","navigateEle","currentTarget","isServerRenderer","classNames","popupWrap","tar","removeNewEventElement","removeEventListner","buttonCollections_1","instance","refreshQuickDialog","refreshQuickPopup","refreshMorePopup","EventTooltip","tooltipObj","Tooltip","mouseTrail","showTipPointer","cls.EVENT_TOOLTIP_ROOT_CLASS","getTargets","beforeRender","onBeforeRender","onBeforeClose","targets","headerTooltipTemplate","enableTooltip","resCollection","getColumnLevels","contentContainer","tooltipTemplate","getHeaderTooltipTemplate","setContent","eventStart","eventEnd","tooltipSubject","tooltipLocation","startMonthDate","startMonthYearDate","endMonthYearDate","tooltipDetails","getEventTooltipTemplate","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","INPUTWARAPPER","FORMLEFT","ENDONCOUNT","HIDEWRAPPER","PRIMARY","contentType","none","daily","weekly","monthly","yearly","valueData","sun","mon","tue","wed","thu","fri","sat","neverClassList","weekClassList","monthClassList","yearClassList","dailyClassList","noEndClassList","endOnCountClassList","endOnDateClassList","RecurrenceEditor","options","defaultLocale","never","first","second","third","fourth","last","repeat","repeatEvery","onDay","weeks","years","summaryTimes","summaryOn","summaryUntil","summaryRepeat","summaryDay","summaryWeek","summaryMonth","summaryYear","monthWeek","monthPosition","monthExpander","yearExpander","repeatInterval","renderStatus","dayButtons","monthButtons","startState","endOn","showFormElement","updateForm","freshOnEndForm","updateEndOnForm","selectMonthDay","updateUntilDate","onMonthDay","checked","preRender","L10n","applyCustomClass","initialize","renderComponent","repeatType","selectedType","getRecurrenceRule","setRecurrenceRule","triggerChangeEvent","resetDayButton","daySelection","rotateArray","rtlClass","untilDateObj","weekday","monthDate","monthWeekDays","monthWeekPos","getDayPosition","endType","hideElement","renderDropdowns","DropDownList","getRepeatData","floatLabelType","title","frequencies","resetFormValues","getEndData","popupWidth","getPopupWidth","renderDropDownList","dropDownData","onWeekDay","getMonthPosData","getDayData","getMonthData","setDefaultValue","formelement_1","recurreneElement_1","renderDatePickers","DatePicker","dateFormat","getFormat","formatType","dayButtonRender","btns_1","btn","button","isToggle","btns","radioButtonRender","RadioButton","label","numericTextboxRender","recurrenceCount","NumericTextBox","setTemplate","positionCollection","textValue","monthposValue","nameSpaceString","weekday_1","fullDay","getSelectedDaysData","RULEBYDAY","elements","getSelectedMonthData","RULEBYMONTHDAY","getIntervalData","RULEINTERVAL","getEndOnCount","RULECOUNT","getYearMonthRuleData","RULEBYMONTH","updateWeekButton","updateMonthUI","updateUI","getUntilData","RULEUNTIL","destroyComponents","resetFields","updateRuleUntilDate","untilDate","newUntilDate","getRecurrenceDates","RULEFREQ","RULEDAILY","RULEWEEKLY","RULEMONTHLY","RULEYEARLY","endon","removeClasses","getPersistData","addOnPersist","renderComplete","newProp","oldProp","Property","Event","NotifyPropertyChanges","Component","EventWindow","eventWindowTime","renderEventWindow","dialogModel","getEventWindowContent","minHeight","beforeOpen","onBeforeOpen","cls.EVENT_WINDOW_DIALOG_CLASS","eventDelete","dialogClose","updateEditorTemplate","editorTemplate","resetEditorTemplate","refreshRecurrenceEditor","createRecurrenceEditor","setRecurrenceEditor","isEventData","cellClickAction","renderFormElements","onCellDetailsUpdate","onEventDetailsUpdate","setDialogContent","getSlotDuration","getInstance","deleteObj","callBackPromise","Deferred","refreshDateTimePicker","startObj","endObj","resolve","isInteracted","eventCrudData","processCrudActions","resetForm","onsubmit","getDefaultEventWindowContent","isReact","formElements_1","tempEle","getEditorTemplate","parentDiv","createDivElement","titleLocationDiv","renderTextBox","editorTitles","startEndDateTimeDiv","renderDateTimePicker","onTimeChange","allDayTimezoneDiv","renderCheckBox","timezoneParentDiv","renderDropDown","repeatParentDiv","repeatDiv","repeatEditConainer","REPEAT_BUTTON_ICON_CLASS","loadRecurrenceEditor","resourceParentDiv","renderResourceDetails","cls.DESCRIPTION_CLASS","submit","renderRecurrenceEditor","updateMinMaxDateToEditor","createInputElement","fieldName","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","dateTimePicker","DateTimePicker","getFieldLabel","step","startEndElement_1","labelValue","resourceDiv","resourceInput","resourceTemplate","allowMultiple","listObj","MultiSelect","onMultiselectResourceChange","itemTemplate","popupHeight","mode","drowDownList","onDropdownResourceChange","timezoneDiv","timezoneInput","allowFiltering","onTimezoneChange","filterBarPlaceholder","filtering","updateData","byGroupID","getColumnName","resObject","createInstance","datasource","resourceModel","groupId","filterRes","filterDatasource","resObj","itemData","resValue","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","CheckBox","onChange","repeatStatus","textBoxDiv","textBoxInput","labelText","onAllDayChange","timezoneChangeStyle","onRepeatChange","renderRepeatDialog","repeatDialogObject","repeatSaveDialog","repeatCancelDialog","repeatOpenDialog","repeatRule","repeatStartDate","updateRepeatLabel","closeRepeatDialog","repeatTempRule","showDetails","disableButton","RecurrenceRule","getValidationRule","trimAllDay","formelement","getFormElements","keyNames","curElement","columnName","setValueToElement","setDefaultValueToElement","timezoneObj","cls.TIME_ZONE_CLASS","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","updateDateTime","getStartEndTime","workHours","IntlBase","compareBlazorDateFormats","timezoneValue","isDisable","saveIcon","untilObj","resetFormFields","localTimezoneName","some","formElement_1","currentElement","alert","formElement","dataCollection","getEventDataFromEditor","processEventValidation","Repeat","alertType","isShowAlert","recurrenceValidation","getResourceData","isResourceEventExpand","allowGroupEdit","getEventIdFromForm","resourceSaveEvent","eveId_1","editedData","editOccurrenceValidation","formElement_2","getValueFromElement","alertMessage","recEditor","excludedEvents","seriesEvents","types","tempDiff","tempvalue","getRecurrenceIndex","recColl","recIndex","currentData","editData","recurColl","recurColl_1","lastResouceData","lastlevel","eventList","state_1","addValues","lastResource","resCol","groupId_1","index_1","l","eventList_1","validElements","SanitizeHtmlHelper","sanitize","dateValue","formelement_2","VirtualScroll","itemSize","bufferCount","renderedLength","averageRowHeight","isScrollHeightNull","previousTop","virtualScrolling","getRenderedCount","setItemSize","triggerScrolling","showSpinner","setTranslateValue","resWrap","eventWrap","timeIndicator","renderVirtualTrackHeight","setTranslate","resourceWrap","setExpandedResources","startIndex_1","endIndex_1","expandedResources","virtual","renderVirtualTrack","lastResourceIndex","conTable","updateVirtualTrackHeight","resourceCount","lastRenderIndex","renderedResConut","beforeInvoke","events.dataReady","hideSpinner","firstTDIndex","upScroll","downScroll","updateContent","actionObj","navigationWrapper","clearTimeout","timeValue","prevSetCollection","getBufferCollection","nextSetResIndex","lastIndex","nextSetCollection","renderedLenth","resourceRows","getContentRows","contentRows","eventRows","getEventRows","Render","isDataRefresh","initializeLayout","dayModule","weekModule","workWeekModule","yearModule","agendaModule","monthAgendaModule","timelineViewsModule","viewClass","timelineMonthModule","timelineYearModule","firstView","Error","updateLabelText","enableCompactView","allowVirtualScrolling","updateHeader","getLabelText","dataModule","then","dataManagerSuccess","catch","dataManagerFailure","resultData","result","renderCompleted","WorkHours","ChildProperty","TimeScale","QuickInfoTemplates","HeaderRows","Crud","getQuery","getTable","fromTable","refreshData","actionArgs","addedRecords","editParms","changedRecords","deletedRecords","crudData_1","promise","tdData","offline","offlineArgs","onlineArgs","isBlockEvent","addEvents","addArgs","saveChanges","insert","crudArgs","processOccurrences","processFollowSeries","processEntireSeries","saveArgs","update","deleteEvents","processEventDelete","deleteArgs","occurenceData","isDeletedRecords","eventData_1","updateEvents","occurenceArgs","occurrenceEvents","childEvent","parentException","exceptionDate","excludeDateCheck","followData","eventData_2","updateFollowEvents","followArgs","followEvents","followData_1","processRecurrenceRule","isSplitted","seriesData","eventData_3","event_7","updateSeriesEvents","seriesArgs","fields_2","eventCollections","deletedEvents","originalParent","deleteData","eventData_4","fields_3","isDelete","parentEvent_1","isEdited","editedDate","exceptionDateList","followEvent","newRecurrenceRule","getUpdatedRecurrenceRule","updatedRule","splitRule_1","ruleKey","ruleValue","WorkCellInteraction","onHover","cellMouseDown","navigateView","sameView","viewOptions","isWorkCell_1","selectCell","cellDblClick","hoverTarget","hoverArgs","FieldOptions","Field","Complex","EventSettings","Group","Resources","ResourceBase","leftPixel","renderResourceHeaderIndent","resColTd","resColDiv","events.renderCell","hideResourceRows","tBody","trCount","res","ClassName","expandedField","slicedCollection","Count","createResourceColumn","resColl","resDiv","tbl","createTableLayout","generateTreeData","countCalculation","setRenderedResources","isExpanded","rIndex","resRows","td","ntd","iconDiv","setMargin","onTreeIconClick","setResourceHeaderContent","resourceHeaderTemplate","classCollection","ntr","marginRight","marginLeft","parentCollection","wholeCollection","y","totalCount","z","trElement","eventElements_1","updateVirtualContent","pNode","rowCollection","workCellCollection","headerRowCollection","clickedRes","clonedCollection","expanded","trElem","sIndex","virtualTrack","resTable","contentTable","eventTable","renderResourceHeader","resourceWrapper","cls.RESOURCE_TOOLBAR_CONTAINER","renderResourceHeaderText","menuClick","renderResourceTree","popupOverlay","treeWrapper","cls.RESOURCE_TREE_POPUP","resourceTree","treeViewObj","TreeView","child","nodeTemplate","nodeClicked","resourceClick","expandAll","treePopup","isTimeLine","treeCollection","resTreeColl","resourceTreeLevel","treeHandler","treeLevel","levelId","treeArgs","resourceName","resourceChild","tree","headerCollection","resourceLevel","levelIcon","headerWrapper","headerCollection_1","treeNodes","interopAdaptor","invokeMethodAsync","serverRenderLayout","bindResourcesData","isSetModel","promises","Promise","all","resourceObj","getResourceModel","refreshLayout","startHourField","endHourField","workDaysField","cssClassField","renderElements","setResourceCollection","requiredResources","colorIndex","requiredResources_1","resourceColorField","generateResourceLevels","innerDates","resTreeGroup","lastColumnDates","prevResource","prevResourceData","prevOrder","resTree","dateCol","resWorkDays","resStartHour","resEndHour","getDateSlots","dateSlots","generateCustomHours","resCssClass","resourceLevelIndex","colSpan","generateHeaderLevels","dateSlots_1","dateSlot","headerDates","headerLevels","currentLevelChilds_1","currentLevelChild","_c","nextLevelChilds_1","nextLevelChild","_d","_e","lastLevelResource","dateHeaderLevels","levels","dateColSpan","_f","_g","datesColumn","_h","headerDates_1","headerDate","resGroup","_j","_k","resTd","unshift","colorFieldIndex","filterData","getResourceRenderDates","dateColl","groupEditIndex","groupEditIndex_1","length_4","addResource","addObj","removeResource","removeObj","resourceExpand","resourceScroll","scrollElement","offsetTarget","resToolBarEle","Schedule","addClasses","cssClass_1","cls_1","validateDate","eventTooltipTemplateFn","templateParser","editorTemplateFn","quickInfoTemplatesHeaderFn","quickInfoTemplatesContentFn","quickInfoTemplatesFooterFn","createSpinner","scrollModule","workCellAction","allowKeyboardInteraction","initializeDataModule","renderTableContainer","getActiveViewOptions","initializeResources","wireEvents","layoutReady","isFirstRender","renderReactTemplates","templates","isAngular","clearTemplate","isLayoutOnly","initializeView","destroyHeaderModule","showHeaderBar","isTouch","scheduleTouchModule","destroyPopups","initializePopups","getViewIndex","setViewOptions","isModuleLoad","selectedView","prevIndex","isOptions","isSelected","fieldViewName","cellHeaderTemplateName","cellHeaderTemplate","dateHeaderTemplateName","dateHeaderTemplate","cellTemplateName","cellTemplate","resourceHeaderTemplateName","currentIndex","majorSlotTemplate","minorSlotTemplate","scheduleOptions","template","showWeekNumber","viewsData","setEditorTitles","initializeTemplates","cellHeaderTemplateFn","cellTemplateFn","dateHeaderTemplateFn","majorSlotTemplateFn","minorSlotTemplateFn","appointmentTemplateFn","resourceHeaderTemplateFn","headerTooltipTemplateFn","getDayNames","culShortNames","setCldrTimeFormat","timeFormat","setCalendarMode","allowServerDataBinding","muteOnChange","previousView","navigationArgs","animateLayout","isInitial","resetScrollTop","timingFunction","requiredModules","modules","member","allowDragAndDrop","util.isIPadDevice","Internationalization","getDefaultLocale","workWeek","agenda","weekAgenda","workWeekAgenda","monthAgenda","today","noEvents","emptyContainer","allDay","more","noTitle","deleteMultipleEvent","selectedItems","deleteSeries","edit","editSeries","editEvent","createEvent","addTitle","moreDetails","save","editContent","deleteContent","deleteMultipleContent","newEvent","recurrence","wrongPattern","seriesChangeAlert","createError","sameDayAlert","editRecurrence","repeats","startEndError","invalidDateError","blockAlert","ok","yes","no","series","previous","next","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","timelineYear","editFollowingEvent","deleteTitle","editTitle","beginFrom","endAt","expandAllDaySection","collapseAllDaySection","onScheduleResize","touchStartEvent","onDocumentClick","isAllDayCell","dateString","dateInMS","localDate","getTargetElement","targetElement","elementFromPoint","getCellHeaderTemplate","getCellTemplate","getDateHeaderTemplate","getMajorSlotTemplate","getMinorSlotTemplate","getResourceHeaderTemplate","border","padding","rtlBorder","rtlPadding","eventClone","startEndTime","startEndDate","resetColWidth","compile","trim","startDateText","endDateText","annocementString","scrollEdges","viewBoundaries","pageYOffset","pageXOffset","unwireEvents","isRefresh","isResource","isDate","isView","isLayout","isDataManager","prop","highlightCurrentTime","setRtlClass","extendedPropertyChange","propertyChangeAction","onEventSettingsPropertyChanged","onGroupSettingsPropertyChanged","tempResourceCollection","setWorkHours","getWorkHourCells","resetWorkHours","workHourCells","viewStartHour","viewEndHour","tempStartIndex","tempEndIndex","colIndex","tds","tdCol","firstTd","lastTd","endDateFromColSpan","getEndDateFromStartDate","getResourceCollections","setResourceCollections","resourceCol","changeCurrentView","getCurrentViewIndex","getResourcesByIndex","groupData","expandResource","collapseResource","scrollTo","hour","scrollDate","scrollToDate","scrollToHour","scrollToResource","groupName","exportToICalendar","fileName","customData","iCalendarExportModule","initializeCalendarExport","importICalendar","fileContent","iCalendarImportModule","initializeCalendarImport","exportToExcel","excelExportOptions","excelExportModule","initializeExcelExport","print","printModule","printScheduler","getEvents","includeOccurrences","getBlockEvents","eventID","getCurrentViewEvents","refreshEvents","isSlotAvailable","closeEditor","closeQuickInfoPopup","Collection","ActionBase","daysVariation","slotInterval","actionIndex","cloneElement","originalElement","excludeSelectors","navigationInterval","scrollInterval","scrollArgs","resizeEdges","getChangedData","indexCol","getOriginalElement","cloneIndex_1","saveChangedData","isSameResource","eveId","calculateIntervalTime","intervalTime","getContentAreaDimension","viewElement","getResourceElements","leftOffset","rightOffset","getPageCoordinates","changedTouches","contentElements","indexes","minIndex","groupElements","updateTimePosition","timeElement","wrapperClass","offsetValue","rightValue","leftValue","table","createCloneElement","outerHTML","cloneClassLists","eventDragArea","removeCloneElementClasses","removeCloneElement","getCursorElement","pages","clientX","clientY","autoScroll","yIsScrollable","xIsScrollable","scrollBy","autoScrollValidation","actionClass","updateScrollPosition","setInterval","updateDraggingDateTime","updateResizingDirection","timeDelay","updateOriginalElement","eventWrappers","getUpdatedEvent","parse","dynamicYearlyEventsRendering","isResize","yearEvent","pointer-events","dateHeader","renderDynamicElement","appDetails","dynamicEventsRendering","eventWrappers_1","Resize","resizeElement_1","element_1","resizeStart","resizeHelper","resizeTarget","resizeArgs","resizeEventArgs","tdCollections_1","touchMoveEvent","resizing","touchEndEvent","resizeStop","monthResizing","resizeValidation","leftStyles","getLeftRightStyles","horizontalResizing","rightStyles","topStyles","getTopBottomStyles","verticalResizing","bottomStyles","resizeTime","isSameCell","yearEventsRendering","monthDiff","getMonthDiff","getEventCount","monthStart","monthEnd","clearInterval","minutes","headerName","tdCollections","isLastCell","tdCollections_2","cellOffsetWidth","resizeDate","spanMinutes","cloneIndex","originalWidth","resizeEnd","clnHeight","clnTop","isTimeViews","pageWidth","targetWidth","cloneWidth","viewDimension","YearEvent","yearViewEvents","removeCellHeight","timelineResourceEvents","timelineYearViewEvents","util.getWeekLastDate","cellHeader","wrapperCollection","eventWrapper","isSpannedCollection","wrapper_1","rowTd","dayStart","dayEnd","dayEvents","updateSpannedEvents","overlapIndex","availedHeight","isRendered","moreIndex","renderMoreIndicatior","moreData","renderEvent","isLeftRightResize","renderResourceEvent","eventDatas","createEventElement","locationEle","startTimeEle","endTimeEle","dateStart","dateEnd","appStart","appEnd","DragAndDrop","widthUptoCursorPoint","heightUptoCursorPoint","cursorPointIndex","isHeaderRows","isTimelineDayProcess","widthPerMinute","heightPerMinute","minDiff","isStepDragging","isMorePopupOpened","isAllDayDrag","dragObj","Draggable","abort","isDragScroll","enableTapHold","enableTailMode","cursorAt","dragArea","dragStart","drag","dragStop","enableAutoScroll","helper","dragHelper","queryPositionInfo","dragPosition","setDragActionDefaultValues","cursor","pointerEvents","cloneBottom","eventGuid","dragArgs","navigation","dragEventArgs","intDestroy","timelineEventModule","calculateMinutesDiff","updateNavigatingPosition","isAllowDrop","currentGroupIndex","currentDate_1","viewNavigation","morePopupEventDragging","calculateTimelineTime","calculateVerticalDate","calculateVerticalTime","outWrapper","tarWrapper","elementHeight","getAllDayEventHeight","outerWrapperCls","targetWrapper","navigationType","eventDuration","dragEnd","eventContainer","appendCloneElement","swapDragging","getEventWrapper","updateAllDayEvents","updateEventHeight","datesCount","allDayElement_1","tagName","startTimeDiff","getOffsetValue","getColumnIndex","leftVal","cursorIndex","getCursorCurrentIndex","widthDiff","getWidthDiff","timeDiff","eventSrt","calculateResourceGroupingPosition","viewEle","targetLeft","dateLength","targetDate","trCollection","scrollY","cursorElement","dropSelectors_1","ViewHelper","getDayName","proxy","getTimelineDate","getWeekNumberContent","weekNumber","weekRule","util.getWeekNumber","util.getWeekMiddleDate","weekFirstDate","ViewBase","createEventTable","collapseRows","cls.SCHEDULE_TABLE_CLASS","tbody","createColGroup","lastRow","reduce","prev","colGroupEle","getScrollXIndent","util.getScrollBarWidth","scrollTopPanel","getDatesHeaderElement","scrollHeaderLabels","headerTable","colWidth","classNames_1","headerCells","headerCells_1","isRtl","tdLeft","hiddenLeft","headerCells_2","addAttributes","getHeaderBarHeight","headerBarHeight","resHeader","panel","colLevels","isCurrentDate","isCurrentMonth","isWorkDay","isWorkHour","agendaDaysCount","weekLength","viewStr","formatDateRange","formattedStr","longDateFormat","toLocaleLowerCase","getMobileDateElement","tdElement","quickTemplate","renderResourceMobileLayout","addAutoHeightClass","getColElements","setColWidth","colElements","contentBody","colWidth_1","col","resourceColumn","colElements_1","getContentAreaElement","wireExpandCollapseIconEvents","treeIcons_1","icon","clearEvents","scrollWrap","setPersistence","retainScrollPosition","VerticalView","baseCssClass","event.scrollUiUpdate","appointment","onContentScroll","scrollLeftPanel","onApaptiveMove","onApaptiveScroll","leftPanel","getLeftPanelElement","timecells","getScrollableElement","scrollerHeight","setContentHeight","scrollBarWidth","scrollToWorkHour","leftPanelElement","highlight","firstWorkHourCell","getTopFromDateTime","columnLevels","workStartHour","workEndHour","renderDates_1","isWorkHourRange","curEle","curEle_1","showTimeIndicator","getCurrentTimeIndicatorIndex","changeCurrentTimePosition","currentTimeIndicatorTimer","clearCurrentTimeIndicatorTimer","currentDateIndex","removeCurrentTimeIndicatorElements","timeIndicator_1","indicator","firstRow","topInPx","timeCellsWrap","timeTrs","curTimeWrap","currentDateIndex_1","currentTimeEle","lastElementChild","getWorkCellHeight","getTdContent","cntEle","templateName","wireMouseEvents","alldayCells_1","wireCellEvents","event.contentReady","clsList","renderContent","dateTd","renderDatesHeader","indentTd","renderLeftIndent","workTd","scrollContainer","renderTimeCells","renderContentArea","timesTd","trEle","rowCount","ntr_1","data_1","createTd","appointmentExpandCollapse","aria-disabled","cls.ALLDAY_APPOINTMENT_SECTION_CLASS","nth","lastLevel","createAllDayRow","thead","createEventWrapper","tdEle","event.renderCell","handler","getTimeSlotRows","renderContentTable","createContentTd","renderContentTableHeader","getContentTdClass","cellDate","util.setTime","args_1","data-date","innerWrapper","cls.APPOINTMENT_WRAPPER_CLASS","msMajorInterval","msStartHour","msEndHour","util.isDaylightSavingTime","timeOffset","majorTickDivider","middle","contentScrollableEle","Day","Week","WorkWeek","par","Month","dayNameFormat","monthDates","onScrollUIUpdate","onDataReady","onCellClick","headerCell","getDayNameFormat","curElem","curDate","curHeader","renderAppointmentContainer","renderWeekNumberContent","contentArea","monthAgendaWrapper","contentWrapper","contentWrapTable","createWeekNumberElement","createHeaderCell","dateTemplate","getContentSlots","slotDatas","prepareSlots","renderDate","includeResource","colDates","colDates_2","colDate","resourcesTd","colDates_1","updateClassList","isOtherMonth","trows","renderDateHeaderElement","cellheaderTemplate","annocementText","getMonthStart","getMonthEnd","util.WEEK_LENGTH","Year","viewTypeClass","calendarTable","calendarTBody","getRowColumnCount","columnCount","cTr","cTd","calendarWrapper","monthCollection_1","currentMonth","calendarElement","data-role","renderCalendarHeader","renderCalendarContent","headerContent","getMonthName","getMonthDates","currentWeek","weekDates","tr_1","weekDates_1","createTableColGroup","parseDate","scrollTopElement","onScrollUiUpdate","util.addYears","AgendaBase","viewBase","createAgendaContentElement","listData","aTd","listElement","ListBase","createList","moduleName","listClass","itemClass","li","appWrapper","templateEle","createAppointment","appSubjectWrap","strDate","allDayStr","displayStr","processAgendaEvents","splited","wireEventActions","eventElement_1","dateHeaderElement_1","dayNavigationClick","calculateResourceTableElement","agendaDate","agendaLastDate","lastLevelInfo","tempLastLevelInfo","tempIndex","finalDate","agendaCollection","hideEmptyAgendaDays","resDataCollection","resDayCollection","rowSpan","topResources","tempGroupedData","totalRowSpan","u","createResourceTableRow","renderEmptyContent","tContent","tContentCollection","w","rowSpanCollection","createDateHeaderElement","eTr","createTableRowElement","eTd","aria-rowindex","class","aria-colindex","dTd","Agenda","agendaDates","virtualScrollTop","agendaBase","eventLoad","renderInitialContent","refreshEvent","refreshDate","emptyTBody","contentChild","emptyTBody_1","isObject","appointmentFiltering","appoint","updateHeaderText","nTr","agendaScrolling","filterDate","totalHeight","topElement","getElementFromScrollerPosition","getPreviousNextDate","scrollToValue","filterElement","liCollection","getStartDateFromEndDate","unWireEvents","onAgendaScrollUiUpdate","MonthAgenda","monthAgendaDate","setEventWrapperHeight","wrapperContainer","appWrap","appendAppContainer","availableHeight","clearElements","onEventRender","appContainer","appointmentIndicators_1","appointmentIndicator","navigateDate","TimelineHeaderRow","groupByYear","groupByMonth","dates_2","groupByWeek","dates_3","jsDate","generateSlots","colspan","cls","dateParser","tdDatas","htmlCol","viewTemplate","hourSlots","lastLevelColspan","byYear","byMonth","byWeek","TimelineViews","currDateTime","getLeftFromDateTime","generateTimeSlots","timeSlotData","tempTimeSlots_1","headerWrap","diffInDates","getWorkCellWidth","getRowCount","getResourceTdData","resLevel","resSHr","resEHr","TimelineMonth","contentTr","contentTd","TimelineYear","leftHeaderCells","innerTr","column","innerTd","colData","count_1","monthTBody","tdCollection","monthWrapper","contentTBody","colCount","renderResourceContent","renderDefaultContent","monthBody","monthTr","monthTd","isDateAvail","dayDate","cls.DATE_HEADER_CLASS","renderCellTemplate","ICalendarExport","SEPARATOR","appVersion","iCalendarEvents","filterCollection","uId","editedExDate","UID","edited","startZone","endZone","calendarEvent","convertDateToString","customFields","customFieldFilter","customField","icsString","download","defaultFields","eventDate","hours","seconds","buffer","Blob","msSaveBlob","downloadLink_1","createElementNS","href","URL","createObjectURL","initEvent","dispatchEvent","revokeObjectURL","ICalendarImport","fileReader_1","FileReader","onload","iCalString","iCalendarParser","readAsText","calArray","RegExp","isEvent","curEvent","dateParsing","processOccurrence","exdate","getDateString","newDate","exec","UTC","ExcelExport","exportFields","exportName","exportType","isIncludeOccurrences","processWorkbook","columns","columnHeader","fontSize","borders","bold","columnData","n","columnRule","styleRule","numberFormat","workSheet","Workbook","worksheets","Print","scrollableEle","links","getElementsByTagName","reference","elementWidth","printWindow","write","ready","scrolledScheduler","headerTimeCellsScroll","index.Schedule","Inject","index.Day","index.Week","index.WorkWeek","index.Month","index.Year","index.Agenda","index.MonthAgenda","index.TimelineViews","index.TimelineMonth","index.TimelineYear","index.Resize","index.DragAndDrop","index.ExcelExport","index.ICalendarExport","index.ICalendarImport","index.Print"],"mappings":"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noE,UAAW,qBAAkB,IACzC45C,IACI8K,WAAS,aACVyjB,EAASnoE,UAAW,eAAY,IACnC45C,IACI8K,YAAU,EAAG,EAAG,EAAG,EAAG,KACvByjB,EAASnoE,UAAW,eAAY,IACnC45C,IACI8K,WAAS,UACVyjB,EAASnoE,UAAW,gBAAa,IACpC45C,IACI8K,WAAS,UACVyjB,EAASnoE,UAAW,cAAW,IAClC45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,oBAAiB,IACxC45C,IACIqjB,aAAY1F,KACb4Q,EAASnoE,UAAW,gBAAa,IACpC45C,IACIqjB,aAAYxF,KACb0Q,EAASnoE,UAAW,gBAAa,IACpC45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,+BAA4B,IACnD45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,uBAAoB,IAC3C45C,IACI8K,cACDyjB,EAASnoE,UAAW,yBAAsB,IAC7C45C,IACI8K,cACDyjB,EAASnoE,UAAW,yBAAsB,IAC7C45C,IACI8K,cACDyjB,EAASnoE,UAAW,mBAAgB,IACvC45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,eAAY,IACnC45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,oBAAiB,IACxC45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,kBAAe,IACtC45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,8BAA2B,IAClD45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,6BAA0B,IACjD45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,8BAA2B,IAClD45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,qBAAkB,IACzC45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,oBAAiB,IACxC45C,IACI8K,cACDyjB,EAASnoE,UAAW,qBAAkB,IACzC45C,IACIqjB,aAAYvF,KACbyQ,EAASnoE,UAAW,yBAAsB,IAC7C45C,IACI8K,WAAS,IACVyjB,EAASnoE,UAAW,sBAAmB,IAC1C45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,0BAAuB,IAC9C45C,IACI8K,YAAS,IACVyjB,EAASnoE,UAAW,iCAA8B,IACrD45C,IACI8K,cACDyjB,EAASnoE,UAAW,eAAY,IACnC45C,IACIqjB,aAAYC,KACbiL,EAASnoE,UAAW,oBAAiB,IACxC45C,IACI8K,cACDyjB,EAASnoE,UAAW,6BAA0B,IACjD45C,IACIqjB,aAAYE,KACbgL,EAASnoE,UAAW,YAAS,IAChC45C,IACI09B,gBAAela,KAChB+K,EAASnoE,UAAW,gBAAa,IACpC45C,IACI09B,gBAAe3f,KAChBwQ,EAASnoE,UAAW,iBAAc,IACrC45C,IACI8K,cACDyjB,EAASnoE,UAAW,eAAY,IACnC45C,IACI8K,cACDyjB,EAASnoE,UAAW,oBAAiB,IACxC45C,IACI+K,WACDwjB,EAASnoE,UAAW,cAAW,IAClC45C,IACI+K,WACDwjB,EAASnoE,UAAW,gBAAa,IACpC45C,IACI+K,WACDwjB,EAASnoE,UAAW,gBAAa,IACpC45C,IACI+K,WACDwjB,EAASnoE,UAAW,sBAAmB,IAC1C45C,IACI+K,WACDwjB,EAASnoE,UAAW,sBAAmB,IAC1C45C,IACI+K,WACDwjB,EAASnoE,UAAW,YAAS,IAChC45C,IACI+K,WACDwjB,EAASnoE,UAAW,aAAU,IACjC45C,IACI+K,WACDwjB,EAASnoE,UAAW,kBAAe,IACtC45C,IACI+K,WACDwjB,EAASnoE,UAAW,qBAAkB,IACzC45C,IACI+K,WACDwjB,EAASnoE,UAAW,oBAAiB,IACxC45C,IACI+K,WACDwjB,EAASnoE,UAAW,iBAAc,IACrC45C,IACI+K,WACDwjB,EAASnoE,UAAW,iBAAc,IACrC45C,IACI+K,WACDwjB,EAASnoE,UAAW,iBAAc,IACrC45C,IACI+K,WACDwjB,EAASnoE,UAAW,oBAAiB,IACxC45C,IACI+K,WACDwjB,EAASnoE,UAAW,kBAAe,IACtC45C,IACI+K,WACDwjB,EAASnoE,UAAW,gBAAa,IACpC45C,IACI+K,WACDwjB,EAASnoE,UAAW,iBAAc,IACrC45C,IACI+K,WACDwjB,EAASnoE,UAAW,gBAAa,IACpC45C,IACI+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"}