{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\StaffPlus\\\\AddStaffSkill\\\\index.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport { getStaffPlus, updateEmpSkillList, getEmpSkillList } from \"redux/actions/staffPlus\";\nimport { NormalSelect, NormalButton, NormalMultiSelect } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { withTranslation } from \"react-i18next\";\n\nclass AddStaffSkillClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      staffOptions: [],\n      selectedStaff: \"\",\n      jobOptions: [],\n      selectedJobOption: \"\",\n      skillList: [],\n      skillCategories: [],\n      selectedSkillCategory: \"\",\n      skills: [],\n      selectedSkills: [],\n      isLoading: true,\n      isMounted: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.getData = async () => {\n      await this.props.getJobtitle();\n      var skillCatRes = await this.props.getCommonApi(\"SkillsItemTypeList/\");\n      let {\n        jobtitleList\n      } = this.props;\n      let {\n        jobOptions,\n        skillCategories\n      } = this.state;\n\n      for (let key of skillCatRes.skillsTypes) {\n        skillCategories.push({\n          value: key.itm_id,\n          label: key.itm_name\n        });\n      }\n\n      for (let key of jobtitleList) {\n        jobOptions.push({\n          value: key.id,\n          label: key.level_desc\n        });\n      }\n\n      this.updateState({\n        jobOptions,\n        skillCategories\n      });\n    };\n\n    this.getStaff = async () => {\n      let {\n        selectedJobOption,\n        staffOptions\n      } = this.state;\n      await this.props.getStaffPlus(`?limit=100&EMP_TYPEid=${selectedJobOption}`);\n      let {\n        staffDetails\n      } = this.props;\n\n      for (let key of staffDetails.dataList) {\n        staffOptions.push({\n          value: key.id,\n          label: key.display_name\n        });\n      }\n\n      this.updateState({\n        staffOptions\n      });\n    };\n\n    this.getStaffDetails = async () => {\n      await this.props.getEmpSkillList(this.state.selectedStaff);\n      let {\n        empSkillList\n      } = this.props;\n      let skills = empSkillList.skills;\n      this.updateState({\n        skills,\n        isLoading: false\n      });\n    };\n\n    this.getSkills = async () => {\n      let skillSetRes = await this.props.getCommonApi(`SkillsView?item_type=${this.state.selectedSkillCategory}`);\n      let skillList = [];\n\n      for (let e of skillSetRes.data) {\n        skillList.push({\n          label: e.item_desc,\n          value: e.item_code,\n          item_code: e.item_code,\n          item_name: e.item_name\n        });\n      }\n\n      this.updateState({\n        skillList\n      });\n    };\n\n    this.handleJobChange = e => {\n      if (e.target.value == this.state.selectedJobOption) return;\n      this.state.selectedJobOption = e.target.value;\n      this.updateState({\n        isLoading: true,\n        selectedStaff: \"\",\n        staffOptions: []\n      });\n      if (e.target.value != \"\") this.getStaff();\n    };\n\n    this.handleStaffChange = e => {\n      if (e.target.value == this.state.selectedStaff) return;\n      this.state.selectedStaff = e.target.value;\n      this.updateState({\n        skills: [],\n        isLoading: true\n      });\n      if (e.target.value != \"\") this.getStaffDetails();\n    };\n\n    this.handleSkillCategoryChange = e => {\n      if (e.target.value == this.state.selectedSkillCategory) return;\n      this.state.selectedSkillCategory = e.target.value;\n      this.updateState({});\n      if (e.target.value != \"\") this.getSkills();\n    };\n\n    this.handleSubmit = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      let data = {};\n      data.skillsCodeList = this.state.skills.map(e => e.item_code);\n      await this.props.updateEmpSkillList(this.state.selectedStaff, JSON.stringify(data));\n      this.updateState({\n        isLoading: false\n      });\n    };\n\n    this.handleDeleteSkill = id => {\n      this.state.skills = this.state.skills.filter(e => e.item_code != id);\n      this.updateState({});\n    };\n\n    this.handleAddSkills = () => {\n      for (let e of this.state.selectedSkills) {\n        if (this.state.skills.filter(element => element.item_code == e.item_code).length == 0) this.state.skills.push(e);\n      }\n\n      this.state.selectedSkills = [];\n      this.updateState({});\n    };\n\n    this.handleMultiSelect = e => {\n      this.state.selectedSkills = e;\n      this.updateState({});\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    let {\n      isLoading,\n      jobOptions,\n      selectedJobOption,\n      staffOptions,\n      selectedStaff,\n      skillCategories,\n      selectedSkillCategory,\n      skills,\n      skillList\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fuild\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head-label-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"category fw-500\",\n      onClick: () => this.props.history.push(\"/admin/staffplus\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, t(\"Staff\")), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-right mx-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sub-category\",\n      onClick: () => this.props.history.push(\"/admin/staffplus/skills\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, t(\"Staff Skill\")), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-right mx-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sub-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, t(\"Add\"), \"/\", t(\"Edit\"), \" \", t(\"Skill\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-lg mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, t(\"Add\"), \"/\", t(\"Edit\"), \" \", t(\"Skill\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group pb-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, t(\"Select Skill Category\")), /*#__PURE__*/React.createElement(NormalSelect, {\n      options: skillCategories,\n      value: selectedSkillCategory,\n      onChange: this.handleSkillCategoryChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group pb-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, t(\"Select Employee Type\")), /*#__PURE__*/React.createElement(NormalSelect, {\n      options: jobOptions,\n      value: selectedJobOption,\n      onChange: this.handleJobChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group pb-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, t(\"Select Staff\")), /*#__PURE__*/React.createElement(NormalSelect, {\n      options: staffOptions,\n      value: selectedStaff,\n      onChange: this.handleStaffChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    })))), isLoading ? null : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group pb-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, t(\"Add Skills\")), /*#__PURE__*/React.createElement(NormalMultiSelect, {\n      options: skillList,\n      handleMultiSelect: this.handleMultiSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-4 pt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      label: \"Add Selected Skills\",\n      onClick: this.handleAddSkills,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group pb-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }\n    }, t(\"Skills Assigned\")), skills.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 27\n      }\n    }, index + 1, \". \", item.item_name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"16\",\n      height: \"16\",\n      fill: \"currentColor\",\n      class: \"bi bi-trash-fill cursor-pointer\",\n      onClick: e => this.handleDeleteSkill(item.item_code),\n      viewBox: \"0 0 16 16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 29\n      }\n    })))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pt-5 d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/admin/staffplus/skills\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Cancel\",\n      className: \"mr-2 bg-danger text-light col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Save\",\n      success: true,\n      className: \"mr-2 col-12\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  jobtitleList: state.common.jobtitleList,\n  staffDetails: state.staffPlus.staffPlusDetail,\n  empSkillList: state.staffPlus.staffPlustEmpSkillList\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getJobtitle,\n    getStaffPlus,\n    getCommonApi,\n    updateEmpSkillList,\n    getEmpSkillList\n  }, dispatch);\n};\n\nexport const AddStaffSkill = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(AddStaffSkillClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/StaffPlus/AddStaffSkill/index.js"],"names":["React","Link","getJobtitle","getCommonApi","getStaffPlus","updateEmpSkillList","getEmpSkillList","NormalSelect","NormalButton","NormalMultiSelect","connect","bindActionCreators","withTranslation","AddStaffSkillClass","Component","state","staffOptions","selectedStaff","jobOptions","selectedJobOption","skillList","skillCategories","selectedSkillCategory","skills","selectedSkills","isLoading","isMounted","updateState","data","setState","getData","props","skillCatRes","jobtitleList","key","skillsTypes","push","value","itm_id","label","itm_name","id","level_desc","getStaff","staffDetails","dataList","display_name","getStaffDetails","empSkillList","getSkills","skillSetRes","e","item_desc","item_code","item_name","handleJobChange","target","handleStaffChange","handleSkillCategoryChange","handleSubmit","skillsCodeList","map","JSON","stringify","handleDeleteSkill","filter","handleAddSkills","element","length","handleMultiSelect","componentWillUnmount","componentDidMount","render","t","history","item","index","mapStateToProps","common","staffPlus","staffPlusDetail","staffPlustEmpSkillList","mapDispatchToProps","dispatch","AddStaffSkill"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\r\nimport {\r\n  getStaffPlus,\r\n  updateEmpSkillList,\r\n  getEmpSkillList,\r\n} from \"redux/actions/staffPlus\";\r\nimport {\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalMultiSelect,\r\n} from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass AddStaffSkillClass extends React.Component {\r\n  state = {\r\n    staffOptions: [],\r\n    selectedStaff: \"\",\r\n    jobOptions: [],\r\n    selectedJobOption: \"\",\r\n    skillList: [],\r\n    skillCategories: [],\r\n    selectedSkillCategory: \"\",\r\n    skills: [],\r\n    selectedSkills: [],\r\n    isLoading: true,\r\n    isMounted: true,\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n  getData = async () => {\r\n    await this.props.getJobtitle();\r\n    var skillCatRes = await this.props.getCommonApi(\"SkillsItemTypeList/\");\r\n    let { jobtitleList } = this.props;\r\n    let { jobOptions, skillCategories } = this.state;\r\n    for (let key of skillCatRes.skillsTypes) {\r\n      skillCategories.push({ value: key.itm_id, label: key.itm_name });\r\n    }\r\n    for (let key of jobtitleList) {\r\n      jobOptions.push({ value: key.id, label: key.level_desc });\r\n    }\r\n    this.updateState({ jobOptions, skillCategories });\r\n  };\r\n  getStaff = async () => {\r\n    let { selectedJobOption, staffOptions } = this.state;\r\n    await this.props.getStaffPlus(`?limit=100&EMP_TYPEid=${selectedJobOption}`);\r\n    let { staffDetails } = this.props;\r\n    for (let key of staffDetails.dataList) {\r\n      staffOptions.push({ value: key.id, label: key.display_name });\r\n    }\r\n    this.updateState({ staffOptions });\r\n  };\r\n  getStaffDetails = async () => {\r\n    await this.props.getEmpSkillList(this.state.selectedStaff);\r\n    let { empSkillList } = this.props;\r\n    let skills = empSkillList.skills;\r\n    this.updateState({ skills, isLoading: false });\r\n  };\r\n  getSkills = async () => {\r\n    let skillSetRes = await this.props.getCommonApi(\r\n      `SkillsView?item_type=${this.state.selectedSkillCategory}`\r\n    );\r\n    let skillList = [];\r\n    for (let e of skillSetRes.data) {\r\n      skillList.push({\r\n        label: e.item_desc,\r\n        value: e.item_code,\r\n        item_code: e.item_code,\r\n        item_name: e.item_name,\r\n      });\r\n    }\r\n    this.updateState({ skillList });\r\n  };\r\n  handleJobChange = e => {\r\n    if (e.target.value == this.state.selectedJobOption) return;\r\n    this.state.selectedJobOption = e.target.value;\r\n    this.updateState({\r\n      isLoading: true,\r\n      selectedStaff: \"\",\r\n      staffOptions: [],\r\n    });\r\n    if (e.target.value != \"\") this.getStaff();\r\n  };\r\n  handleStaffChange = e => {\r\n    if (e.target.value == this.state.selectedStaff) return;\r\n    this.state.selectedStaff = e.target.value;\r\n    this.updateState({\r\n      skills: [],\r\n      isLoading: true,\r\n    });\r\n    if (e.target.value != \"\") this.getStaffDetails();\r\n  };\r\n  handleSkillCategoryChange = e => {\r\n    if (e.target.value == this.state.selectedSkillCategory) return;\r\n    this.state.selectedSkillCategory = e.target.value;\r\n    this.updateState({});\r\n    if (e.target.value != \"\") this.getSkills();\r\n  };\r\n  handleSubmit = async () => {\r\n    this.updateState({ isLoading: true });\r\n    let data = {};\r\n    data.skillsCodeList = this.state.skills.map(e => e.item_code);\r\n    await this.props.updateEmpSkillList(\r\n      this.state.selectedStaff,\r\n      JSON.stringify(data)\r\n    );\r\n    this.updateState({ isLoading: false });\r\n  };\r\n  handleDeleteSkill = id => {\r\n    this.state.skills = this.state.skills.filter(e => e.item_code != id);\r\n    this.updateState({});\r\n  };\r\n  handleAddSkills = () => {\r\n    for (let e of this.state.selectedSkills) {\r\n      if (\r\n        this.state.skills.filter(element => element.item_code == e.item_code)\r\n          .length == 0\r\n      )\r\n        this.state.skills.push(e);\r\n    }\r\n    this.state.selectedSkills = [];\r\n    this.updateState({});\r\n  };\r\n  handleMultiSelect = e => {\r\n    this.state.selectedSkills = e;\r\n    this.updateState({});\r\n  };\r\n  render() {\r\n    let {\r\n      isLoading,\r\n      jobOptions,\r\n      selectedJobOption,\r\n      staffOptions,\r\n      selectedStaff,\r\n      skillCategories,\r\n      selectedSkillCategory,\r\n      skills,\r\n      skillList,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"container-fuild\">\r\n        <div className=\"head-label-nav\">\r\n          <p\r\n            className=\"category fw-500\"\r\n            onClick={() => this.props.history.push(\"/admin/staffplus\")}\r\n          >\r\n            {t(\"Staff\")}\r\n          </p>\r\n          <i className=\"icon-right mx-md-3\"></i>\r\n          <p\r\n            className=\"sub-category\"\r\n            onClick={() => this.props.history.push(\"/admin/staffplus/skills\")}\r\n          >\r\n            {t(\"Staff Skill\")}\r\n          </p>\r\n          <i className=\"icon-right mx-md-3\"></i>\r\n          <p className=\"sub-category\">\r\n            {t(\"Add\")}/{t(\"Edit\")} {t(\"Skill\")}\r\n          </p>\r\n        </div>\r\n        <div className=\"container-lg mt-5\">\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col-md-12 mb-4\">\r\n              <h3>\r\n                {t(\"Add\")}/{t(\"Edit\")} {t(\"Skill\")}\r\n              </h3>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group pb-2 mb-4\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12 mb-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Select Skill Category\")}\r\n                </label>\r\n                <NormalSelect\r\n                  options={skillCategories}\r\n                  value={selectedSkillCategory}\r\n                  onChange={this.handleSkillCategoryChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group pb-2 mb-4\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12 mb-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Select Employee Type\")}\r\n                </label>\r\n                <NormalSelect\r\n                  options={jobOptions}\r\n                  value={selectedJobOption}\r\n                  onChange={this.handleJobChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group pb-2 mb-4\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12 mb-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Select Staff\")}\r\n                </label>\r\n                <NormalSelect\r\n                  options={staffOptions}\r\n                  value={selectedStaff}\r\n                  onChange={this.handleStaffChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {isLoading ? null : (\r\n            <>\r\n              <div className=\"form-group pb-2 mb-4\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-8 \">\r\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                      {t(\"Add Skills\")}\r\n                    </label>\r\n                    <NormalMultiSelect\r\n                      options={skillList}\r\n                      handleMultiSelect={this.handleMultiSelect}\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-md-4 mb-4 pt-5\">\r\n                    <NormalButton\r\n                      mainbg={true}\r\n                      label=\"Add Selected Skills\"\r\n                      onClick={this.handleAddSkills}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group pb-2 mb-4\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-8 \">\r\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                      {t(\"Skills Assigned\")}\r\n                    </label>\r\n                    {skills.map((item, index) => (\r\n                      <div className=\"row w-100\">\r\n                        <div className=\"col-10\">\r\n                          <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                            {index + 1}. {item.item_name}\r\n                          </label>\r\n                        </div>\r\n                        <div className=\"col-2\">\r\n                          <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            width=\"16\"\r\n                            height=\"16\"\r\n                            fill=\"currentColor\"\r\n                            class=\"bi bi-trash-fill cursor-pointer\"\r\n                            onClick={e =>\r\n                              this.handleDeleteSkill(item.item_code)\r\n                            }\r\n                            viewBox=\"0 0 16 16\"\r\n                          >\r\n                            <path d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\" />\r\n                          </svg>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group mb-4 pb-2\">\r\n                <div className=\"pt-5 d-flex justify-content-center\">\r\n                  <div className=\"col-2\">\r\n                    <Link to=\"/admin/staffplus/skills\">\r\n                      <NormalButton\r\n                        label=\"Cancel\"\r\n                        className=\"mr-2 bg-danger text-light col-12\"\r\n                      />\r\n                    </Link>\r\n                  </div>\r\n                  <div className=\"col-2\">\r\n                    <NormalButton\r\n                      label=\"Save\"\r\n                      success={true}\r\n                      className=\"mr-2 col-12\"\r\n                      onClick={this.handleSubmit}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => ({\r\n  jobtitleList: state.common.jobtitleList,\r\n  staffDetails: state.staffPlus.staffPlusDetail,\r\n  empSkillList: state.staffPlus.staffPlustEmpSkillList,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getJobtitle,\r\n      getStaffPlus,\r\n      getCommonApi,\r\n      updateEmpSkillList,\r\n      getEmpSkillList,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const AddStaffSkill = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(AddStaffSkillClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}