{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton,NormalSelect,InputSearch,TableWrapper}from\"component/common\";import{getCommonApi,getJobtitle}from\"redux/actions/common\";import{getSkillList}from\"redux/actions/staffPlus\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{withTranslation}from\"react-i18next\";import _ from\"lodash\";import\"./styles.scss\";export var StaffSkillListClass=/*#__PURE__*/function(_React$Component){_inherits(StaffSkillListClass,_React$Component);var _super=_createSuper(StaffSkillListClass);function StaffSkillListClass(){var _this;_classCallCheck(this,StaffSkillListClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],header:[],skillList:[],jobOptions:[],selectedJobOption:\"\",skillSOptions:[],selectedSkillOption:\"\",isLoading:true,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.getDatafromStore=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var skillListRes,jobtitleList,_this$state,jobOptions,skillSOptions,selectedJobOption,selectedSkillOption,_iterator,_step,key,_iterator2,_step2,_key2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.getJobtitle();case 2:_context.next=4;return _this.props.getCommonApi(\"SkillsItemTypeList\");case 4:skillListRes=_context.sent;jobtitleList=_this.props.jobtitleList;_this$state=_this.state,jobOptions=_this$state.jobOptions,skillSOptions=_this$state.skillSOptions,selectedJobOption=_this$state.selectedJobOption,selectedSkillOption=_this$state.selectedSkillOption;_iterator=_createForOfIteratorHelper(jobtitleList);try{for(_iterator.s();!(_step=_iterator.n()).done;){key=_step.value;jobOptions.push({value:key.id,label:key.level_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_iterator2=_createForOfIteratorHelper(skillListRes.skillsTypes);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_key2=_step2.value;skillSOptions.push({value:_key2.itm_id,label:_key2.itm_name});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}selectedJobOption=jobOptions[0].value;selectedSkillOption=skillSOptions[0].value;_this.updateState({jobOptions:jobOptions,skillSOptions:skillSOptions,selectedJobOption:selectedJobOption,selectedSkillOption:selectedSkillOption});_this.loadData();case 15:case\"end\":return _context.stop();}}},_callee);}));_this.loadData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$props$empSkillL;var _this$state2,data,selectedJobOption,selectedSkillOption,skillList,skillSetRes,header,_iterator3,_step3,key;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.updateState({isLoading:true});_this$state2=_this.state,data=_this$state2.data,selectedJobOption=_this$state2.selectedJobOption,selectedSkillOption=_this$state2.selectedSkillOption,skillList=_this$state2.skillList;if(!(selectedJobOption==\"\"||selectedSkillOption==\"\")){_context2.next=4;break;}return _context2.abrupt(\"return\",_this.updateState({data:[],skillListRes:[],isLoading:false}));case 4:_context2.next=6;return _this.props.getCommonApi(\"SkillsView?item_type=\".concat(selectedSkillOption));case 6:skillSetRes=_context2.sent;_context2.next=9;return _this.props.getSkillList(\"?emp_type=\".concat(selectedJobOption,\"&item_type=\").concat(selectedSkillOption));case 9:skillList=skillSetRes.data;data=_this.props.empSkillList.data;header=[{label:\"\"}];_iterator3=_createForOfIteratorHelper((_this$props$empSkillL=_this.props.empSkillList)===null||_this$props$empSkillL===void 0?void 0:_this$props$empSkillL.data);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){key=_step3.value;header.push({label:key.staffname});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.updateState({header:header,skillList:skillList,data:data,isLoading:false});case 15:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleChange=function(e){_this.state[e.target.name]=e.target.value;_this.updateState();_this.loadData();};return _this;}_createClass(StaffSkillListClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentWillMount\",value:function componentWillMount(){this.getDatafromStore();}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,data=_this$state3.data,header=_this$state3.header,jobOptions=_this$state3.jobOptions,selectedJobOption=_this$state3.selectedJobOption,skillSOptions=_this$state3.skillSOptions,selectedSkillOption=_this$state3.selectedSkillOption,skillList=_this$state3.skillList,isLoading=_this$state3.isLoading;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"staffList-container col-xl\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"h3\",null,t(\"Staff Skill Listing\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},t(\"Employee Type\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:jobOptions,value:selectedJobOption,name:\"selectedJobOption\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},t(\"Skill Type\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:skillSOptions,value:selectedSkillOption,name:\"selectedSkillOption\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 mb-4\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Skill\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-sm-12\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Staff Skill\",onClick:function onClick(){return _this2.props.history.push(\"/admin/staffplus/skills/add\");}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},isLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))):data.length==0?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},t(\"No Data\")):/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{className:\"tableFixHeads\",headerDetails:header},skillList?skillList.map(function(_ref3){var item_no=_ref3.item_no,item_desc=_ref3.item_desc;return/*#__PURE__*/React.createElement(\"tr\",{key:item_no},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_desc)),data.map(function(key){return/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center checkbox-container\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",disabled:true,checked:key.skills.filter(function(e){return e.item_no==item_no;}).length>0?true:false}),/*#__PURE__*/React.createElement(\"span\",{class:\"checkmark\"}))));}));}):\"\")))))));}}]);return StaffSkillListClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{jobtitleList:state.common.jobtitleList,empSkillList:state.staffPlus.staffPlusSkillList};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,getJobtitle:getJobtitle,getSkillList:getSkillList},dispatch);};export var StaffSkillList=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(StaffSkillListClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/StaffPlus/StaffSkillList/index.js"],"names":["React","NormalButton","NormalSelect","InputSearch","TableWrapper","getCommonApi","getJobtitle","getSkillList","connect","bindActionCreators","withTranslation","_","StaffSkillListClass","state","data","header","skillList","jobOptions","selectedJobOption","skillSOptions","selectedSkillOption","isLoading","isMounted","updateState","setState","getDatafromStore","props","skillListRes","jobtitleList","key","push","value","id","label","level_desc","skillsTypes","itm_id","itm_name","loadData","skillSetRes","empSkillList","staffname","handleChange","e","target","name","t","history","length","map","item_no","item_desc","skills","filter","Component","mapStateToProps","common","staffPlus","staffPlusSkillList","mapDispatchToProps","dispatch","StaffSkillList"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  NormalButton,\n  NormalSelect,\n  InputSearch,\n  TableWrapper,\n} from \"component/common\";\nimport { getCommonApi, getJobtitle } from \"redux/actions/common\";\nimport { getSkillList } from \"redux/actions/staffPlus\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { withTranslation } from \"react-i18next\";\nimport _ from \"lodash\";\nimport \"./styles.scss\";\n\nexport class StaffSkillListClass extends React.Component {\n  state = {\n    data: [],\n    header: [],\n    skillList: [],\n    jobOptions: [],\n    selectedJobOption: \"\",\n    skillSOptions: [],\n    selectedSkillOption: \"\",\n    isLoading: true,\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentWillMount() {\n    this.getDatafromStore();\n  }\n\n  getDatafromStore = async () => {\n    await this.props.getJobtitle();\n    var skillListRes = await this.props.getCommonApi(\"SkillsItemTypeList\");\n    let { jobtitleList } = this.props;\n    let { jobOptions, skillSOptions, selectedJobOption, selectedSkillOption } =\n      this.state;\n    for (let key of jobtitleList) {\n      jobOptions.push({ value: key.id, label: key.level_desc });\n    }\n    for (let key of skillListRes.skillsTypes) {\n      skillSOptions.push({ value: key.itm_id, label: key.itm_name });\n    }\n    selectedJobOption = jobOptions[0].value;\n    selectedSkillOption = skillSOptions[0].value;\n    this.updateState({\n      jobOptions,\n      skillSOptions,\n      selectedJobOption,\n      selectedSkillOption,\n    });\n\n    this.loadData();\n  };\n\n  loadData = async () => {\n    this.updateState({ isLoading: true });\n    let { data, selectedJobOption, selectedSkillOption, skillList } =\n      this.state;\n    if (selectedJobOption == \"\" || selectedSkillOption == \"\")\n      return this.updateState({ data: [], skillListRes: [], isLoading: false });\n    let skillSetRes = await this.props.getCommonApi(\n      `SkillsView?item_type=${selectedSkillOption}`\n    );\n    await this.props.getSkillList(\n      `?emp_type=${selectedJobOption}&item_type=${selectedSkillOption}`\n    );\n    skillList = skillSetRes.data;\n    data = this.props.empSkillList.data;\n    let header = [{ label: \"\" }];\n    for (let key of this.props.empSkillList?.data) {\n      header.push({ label: key.staffname });\n    }\n    this.updateState({ header, skillList, data, isLoading: false });\n  };\n\n  handleChange = (e) => {\n    this.state[e.target.name] = e.target.value;\n    this.updateState();\n    this.loadData();\n  };\n\n  render() {\n    let {\n      data,\n      header,\n      jobOptions,\n      selectedJobOption,\n      skillSOptions,\n      selectedSkillOption,\n      skillList,\n      isLoading,\n    } = this.state;\n    let { t } = this.props;\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"staffList-container col-xl\">\n            <div className=\"row align-items-center\">\n              <div className=\"col-md-4\">\n                <h3>{t(\"Staff Skill Listing\")}</h3>\n              </div>\n            </div>\n            <div className=\"row mt-4\">\n              <div className=\"col-6 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  {t(\"Employee Type\")}\n                </label>\n                <div className=\"input-group\">\n                  <NormalSelect\n                    options={jobOptions}\n                    value={selectedJobOption}\n                    name=\"selectedJobOption\"\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"row mt-4\">\n              <div className=\"col-6 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  {t(\"Skill Type\")}\n                </label>\n                <div className=\"input-group\">\n                  <NormalSelect\n                    options={skillSOptions}\n                    value={selectedSkillOption}\n                    name=\"selectedSkillOption\"\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"row mt-4\">\n              <div className=\"col-md-8 mb-4\">\n                <InputSearch\n                  className=\"\"\n                  placeholder=\"Search Skill\"\n                  onChange={this.handleChange}\n                />\n              </div>\n              <div className=\"col-md-4 col-sm-12\">\n                <NormalButton\n                  mainbg={true}\n                  className=\"col-12 fs-15 float-right\"\n                  label=\"Add Staff Skill\"\n                  onClick={() =>\n                    this.props.history.push(\"/admin/staffplus/skills/add\")\n                  }\n                />\n              </div>\n            </div>\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                {isLoading ? (\n                  <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                    <div class=\"spinner-border\" role=\"status\">\n                      <span class=\"sr-only\">Loading...</span>\n                    </div>\n                  </div>\n                ) : data.length == 0 ? (\n                  <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                    {t(\"No Data\")}\n                  </div>\n                ) : (\n                  <div className=\"table-container\">\n                    <TableWrapper\n                      className=\"tableFixHeads\"\n                      headerDetails={header}\n                    >\n                      {skillList\n                        ? skillList.map(({ item_no, item_desc }) => {\n                            return (\n                              <tr key={item_no}>\n                                <td>\n                                  <div className=\"d-flex align-items-center justify-content-center\">\n                                    {item_desc}\n                                  </div>\n                                </td>\n                                {data.map((key) => {\n                                  return (\n                                    <td>\n                                      <div className=\"d-flex align-items-center justify-content-center\">\n                                        <div className=\"d-flex align-items-center justify-content-center checkbox-container\">\n                                          <input\n                                            type=\"checkbox\"\n                                            disabled\n                                            checked={\n                                              key.skills.filter(\n                                                (e) => e.item_no == item_no\n                                              ).length > 0\n                                                ? true\n                                                : false\n                                            }\n                                          />\n                                          <span class=\"checkmark\"></span>\n                                        </div>\n                                      </div>\n                                    </td>\n                                  );\n                                })}\n                              </tr>\n                            );\n                          })\n                        : \"\"}\n                    </TableWrapper>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  jobtitleList: state.common.jobtitleList,\n  empSkillList: state.staffPlus.staffPlusSkillList,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      getCommonApi,\n      getJobtitle,\n      getSkillList,\n    },\n    dispatch\n  );\n};\n\nexport const StaffSkillList = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(StaffSkillListClass)\n);\n"]},"metadata":{},"sourceType":"module"}