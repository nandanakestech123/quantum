{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalButton,NormalInput,TableWrapper}from\"component/common\";import _ from\"lodash\";import{history}from\"helpers\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,commonCreateApi}from\"redux/actions/common\";import SimpleReactValidator from\"simple-react-validator\";import{Toast}from\"service/toast\";import{withTranslation}from\"react-i18next\";export var TransactionPriceChangeClass=/*#__PURE__*/function(_Component){_inherits(TransactionPriceChangeClass,_Component);var _super=_createSuper(TransactionPriceChangeClass);function TransactionPriceChangeClass(){var _this;_classCallCheck(this,TransactionPriceChangeClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"S. No\",sortKey:false,divClass:\"justify-content-end text-right\"},{label:\"Type\",sortKey:false},{label:\"Item Code\"},{label:\"Description\",sortKey:false},{label:\"Price\",sortKey:false,width:\"150px\",divClass:\"justify-content-center\"},{label:\"Discount Amount\",sortKey:false,width:\"150px\",divClass:\"justify-content-center\"},{label:\"Price After Disc\",sortKey:false,width:\"150px\",divClass:\"justify-content-center\"},{label:\"Qty\",sortKey:false,divClass:\"justify-content-end text-right\"},{label:\"Total Amount\",sortKey:false,width:\"150px\",divClass:\"justify-content-center\"},{label:\"Paid Amount\",sortKey:false,width:\"150px\",divClass:\"justify-content-center\"},{label:\"Staff\",sortKey:false}],TransactionPrice:{transaction_no:\"\",customer_name:\"\",date:\"\",paid_amount:\"\",total_amount:\"\",priceChangeList:[]},sumTotal:\"\",balanceTotal:\"\",sumPaid:\"\",balancePaid:\"\",changeTextIndex:\"\",changeTextLabel:\"\"};_this.componentDidMount=function(){_this.getSelectedTransactions();};_this.getSelectedTransactions=function(){try{var _this$state=_this.state,TransactionPrice=_this$state.TransactionPrice,sumPaid=_this$state.sumPaid,sumTotal=_this$state.sumTotal,balanceTotal=_this$state.balanceTotal,balancePaid=_this$state.balancePaid;_this.props.getCommonApi(\"transactionhistory/\".concat(_this.props.match.params.id)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var status,data,sumofpaid,sumoftotal,balPaid,balTotal;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=res.status,data=res.data;if(status==200){TransactionPrice[\"customer_name\"]=data.customer_name;TransactionPrice[\"date\"]=data.date;TransactionPrice[\"paid_amount\"]=data.paid_amount;TransactionPrice[\"total_amount\"]=data.total_amount;TransactionPrice[\"transaction_no\"]=data.transaction_no;TransactionPrice[\"priceChangeList\"]=data.daud_lines?data.daud_lines:[];if(data.daud_lines.length>0){sumPaid=0;sumTotal=0;data.daud_lines.forEach(function(e){sumPaid+=Number(e.dt_deposit);sumTotal+=Number(e.dt_transacamt);});sumofpaid=Number(sumPaid).toFixed(2);sumoftotal=Number(sumTotal).toFixed(2);balPaid=Number(TransactionPrice.paid_amount)-Number(sumPaid);balTotal=Number(TransactionPrice.total_amount)-Number(sumTotal);balancePaid=Number(balPaid).toFixed(2);balanceTotal=Number(balTotal).toFixed(2);sumPaid=Number(sumofpaid).toFixed(2);sumTotal=Number(sumoftotal).toFixed(2);}else{sumPaid=Number(data.paid_amount).toFixed(2);sumTotal=Number(data.total_amount).toFixed(2);balancePaid=\"0.00\";balanceTotal=\"0.00\";}_this.setState({TransactionPrice:TransactionPrice,sumTotal:sumTotal,sumPaid:sumPaid,balanceTotal:balanceTotal,balancePaid:balancePaid});}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}catch(e){console.log(e,\"catchexforpricechange\");}};_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e,index){var TransactionPrice,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({changeTextLabel:e.target.name,changeTextIndex:index});case 2:_context3.prev=2;TransactionPrice=_this.state.TransactionPrice;data=e.target.value;TransactionPrice.priceChangeList[index][e.target.name]=Number(data);_context3.next=8;return _this.setState({TransactionPrice:TransactionPrice});case 8:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.handleChangeValue();case 1:case\"end\":return _context2.stop();}}},_callee2);})),500);}_this.debouncedFn();_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](2);console.log(_context3.t0,\"pricechangecatchlog\");case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[2,12]]);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this.handleChangeValue=function(){var changeTextLabel=_this.state.changeTextLabel;if(changeTextLabel==\"dt_promoprice\"){_this.handlepromopriceChange();}else if(changeTextLabel==\"dt_discamt\"){_this.handlediscountpriceChange();}else if(changeTextLabel==\"dt_transacamt\"){_this.handleTotalpriceChange();}else if(changeTextLabel==\"dt_price\"){_this.handleUnitpriceChange();}else if(changeTextLabel==\"dt_deposit\"){_this.handleBalanceUpdate();}};_this.handleUnitpriceChange=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this$state2,TransactionPrice,changeTextIndex,final;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$state2=_this.state,TransactionPrice=_this$state2.TransactionPrice,changeTextIndex=_this$state2.changeTextIndex;final=TransactionPrice.priceChangeList[changeTextIndex];final[\"dt_promoprice\"]=Number(final[\"dt_price\"]).toFixed(2);final[\"dt_discamt\"]=Number(0).toFixed(2);final[\"dt_transacamt\"]=Number(Number(final[\"dt_promoprice\"])*Number(final[\"dt_qty\"])).toFixed(2);_context4.next=7;return _this.setState({final:final});case 7:_this.handleBalanceUpdate();case 8:case\"end\":return _context4.stop();}}},_callee4);}));_this.handleTotalpriceChange=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _this$state3,TransactionPrice,changeTextIndex,final;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this$state3=_this.state,TransactionPrice=_this$state3.TransactionPrice,changeTextIndex=_this$state3.changeTextIndex;final=TransactionPrice.priceChangeList[changeTextIndex];final[\"dt_promoprice\"]=Number(Number(final[\"dt_transacamt\"])/Number(final[\"dt_qty\"])).toFixed(2);final[\"dt_discamt\"]=Number(0).toFixed(2);final[\"dt_price\"]=Number(Number(final[\"dt_transacamt\"])/Number(final[\"dt_qty\"])).toFixed(2);_context5.next=7;return _this.setState({final:final});case 7:_this.handleBalanceUpdate();case 8:case\"end\":return _context5.stop();}}},_callee5);}));_this.handlediscountpriceChange=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _this$state4,TransactionPrice,changeTextIndex,final;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$state4=_this.state,TransactionPrice=_this$state4.TransactionPrice,changeTextIndex=_this$state4.changeTextIndex;final=TransactionPrice.priceChangeList[changeTextIndex];final[\"dt_promoprice\"]=Number(Number(final[\"dt_price\"])-Number(final[\"dt_discamt\"])).toFixed(2);final[\"dt_transacamt\"]=Number((Number(final[\"dt_price\"])-Number(final[\"dt_discamt\"]))*Number(final[\"dt_qty\"])).toFixed(2);_context6.next=6;return _this.setState({final:final});case 6:_this.handleBalanceUpdate();case 7:case\"end\":return _context6.stop();}}},_callee6);}));_this.handlepromopriceChange=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var _this$state5,TransactionPrice,changeTextIndex,final;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_this$state5=_this.state,TransactionPrice=_this$state5.TransactionPrice,changeTextIndex=_this$state5.changeTextIndex;final=TransactionPrice.priceChangeList[changeTextIndex];final[\"dt_discamt\"]=Number(Number(final[\"dt_price\"])-Number(final[\"dt_promoprice\"])).toFixed(2);final[\"dt_transacamt\"]=Number(Number(final[\"dt_promoprice\"])*Number(final[\"dt_qty\"])).toFixed(2);_context7.next=6;return _this.setState({final:final});case 6:_this.handleBalanceUpdate();case 7:case\"end\":return _context7.stop();}}},_callee7);}));_this.handleBalanceUpdate=function(){var _this$state6=_this.state,TransactionPrice=_this$state6.TransactionPrice,balancePaid=_this$state6.balancePaid,sumPaid=_this$state6.sumPaid,sumTotal=_this$state6.sumTotal,balanceTotal=_this$state6.balanceTotal;if(TransactionPrice.priceChangeList.length>0){sumPaid=0;sumTotal=0;TransactionPrice.priceChangeList.forEach(function(e){sumPaid+=Number(e.dt_deposit);sumTotal+=Number(e.dt_transacamt);});var sumofpaid=Number(sumPaid).toFixed(2);var sumoftotal=Number(sumTotal).toFixed(2);var balPaid=Number(TransactionPrice.paid_amount)-Number(sumPaid);var balTotal=Number(TransactionPrice.total_amount)-Number(sumTotal);balancePaid=Number(balPaid).toFixed(2);balanceTotal=Number(balTotal).toFixed(2);sumPaid=Number(sumofpaid).toFixed(2);sumTotal=Number(sumoftotal).toFixed(2);_this.setState({balancePaid:balancePaid,sumPaid:sumPaid,sumTotal:sumTotal,balanceTotal:balanceTotal});}};_this.handleupdate=function(){var _this$state7=_this.state,TransactionPrice=_this$state7.TransactionPrice,balanceTotal=_this$state7.balanceTotal,balancePaid=_this$state7.balancePaid;if(Number(balancePaid)==0&&Number(balanceTotal)==0){if(TransactionPrice.priceChangeList.length>0){try{var payload=[];TransactionPrice.priceChangeList.forEach(function(e){payload.push({id:e.id,dt_price:e.dt_price,dt_discamt:e.dt_discamt,dt_promoprice:e.dt_promoprice,dt_transacamt:e.dt_transacamt,dt_deposit:e.dt_deposit});});_this.props.commonCreateApi(\"transactionhistory/changeprice/\",payload).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(res){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(res.status===201){history.push(\"/admin/transactionhistory\");}case 1:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x4){return _ref8.apply(this,arguments);};}());}catch(e){console.log(\"pricechangeupdate\",e);}}}else{Toast({type:\"error\",message:\"Amount difference should be 0\"});}};return _this;}_createClass(TransactionPriceChangeClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state8=this.state,headerDetails=_this$state8.headerDetails,TransactionPrice=_this$state8.TransactionPrice,sumTotal=_this$state8.sumTotal,balanceTotal=_this$state8.balanceTotal,sumPaid=_this$state8.sumPaid,balancePaid=_this$state8.balancePaid;var transaction_no=TransactionPrice.transaction_no,customer_name=TransactionPrice.customer_name,date=TransactionPrice.date,paid_amount=TransactionPrice.paid_amount,total_amount=TransactionPrice.total_amount,priceChangeList=TransactionPrice.priceChangeList;var tra;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap mb-2 mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-10 col-12 header\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-16 font-700 mb-3 title\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fw-600\",onClick:function onClick(){return history.push(\"/admin/transactionhistory/\");}},t(\"Transaction History\")),\"\\xA0 >\\xA0\",t(\"Price Change\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",submitBtn:true,label:\"Update\",outline:false,onClick:function onClick(){return _this2.handleupdate();}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap p-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2 fw-500\"},t(\"Transaction No\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},transaction_no)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 common-label-text mr-2 fw-500\"},t(\"Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 common-label-text mr-2\"},date)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2 fw-500\"},t(\"Customer Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},customer_name)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2 fw-500\"},t(\"Total Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},total_amount)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2 fw-500\"},t(\"Paid Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},paid_amount))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination// pageMeta={pageMeta}\n// isEmpty={tstaffList.length === 0 ? true:false}\n},priceChangeList.length>0?priceChangeList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},index+1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.record_detail_type)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.item_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.item_desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"dt_price\",value:item.dt_price,onChange:function onChange(e){return _this2.handleChange(e,index);},disabled:item.is_edit?false:true,className:\"text-right\"}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"dt_discamt\",value:item.dt_discamt,onChange:function onChange(e){return _this2.handleChange(e,index);},disabled:item.is_edit?false:true,className:\"text-right\"}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"dt_promoprice\",value:item.dt_promoprice,onChange:function onChange(e){return _this2.handleChange(e,index);},disabled:item.is_edit?false:true,className:\"text-right\"}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.dt_qty)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"dt_transacamt\",value:item.dt_transacamt,onChange:function onChange(e){return _this2.handleChange(e,index);},disabled:item.is_edit?false:true,className:\"text-right\"}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"dt_deposit\",value:item.dt_deposit,onChange:function onChange(e){return _this2.handleChange(e,index);},disabled:item.is_edit?false:true,className:\"text-right\"}))),/*#__PURE__*/React.createElement(\"td\",{className:\"text-left\"},item.staff_name));}):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-12\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 col-12 p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-end p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},t(\"Original Invoice Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"text\",name:\"total_amount\",value:total_amount,onChange:function onChange(){},disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},t(\"Sum of Current Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"text\",name:\"sumTotal\",value:sumTotal,onChange:function onChange(){},disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},t(\"Difference\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(NormalInput,{className:\"\".concat(Number(balanceTotal)!==0?\"text-danger\":\"\",\" form-control\"),type:\"text\",name:\"balanceTotal\",value:balanceTotal,onChange:function onChange(){},disabled:true})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},t(\"Original Paid Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"text\",name:\"paid_amount\",value:paid_amount,onChange:function onChange(){},disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},t(\"Current Paid Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"text\",name:\"sumPaid\",value:sumPaid,onChange:function onChange(){},disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},t(\"Difference\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(NormalInput,{className:\"\".concat(Number(balancePaid)!==0?\"text-danger\":\"\",\" form-control\"),type:\"text\",name:\"balancePaid\",value:balancePaid,onChange:function onChange(){},disabled:true}))))))));}}]);return TransactionPriceChangeClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{selected_cstomer:state.common.selected_cstomer,basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,commonCreateApi:commonCreateApi},dispatch);};export var TransactionPriceChange=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(TransactionPriceChangeClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/TransactionHistory/TransactionPriceChange.js"],"names":["React","Component","NormalButton","NormalInput","TableWrapper","_","history","connect","bindActionCreators","getCommonApi","commonCreateApi","SimpleReactValidator","Toast","withTranslation","TransactionPriceChangeClass","state","headerDetails","label","sortKey","divClass","width","TransactionPrice","transaction_no","customer_name","date","paid_amount","total_amount","priceChangeList","sumTotal","balanceTotal","sumPaid","balancePaid","changeTextIndex","changeTextLabel","componentDidMount","getSelectedTransactions","props","match","params","id","then","res","status","data","daud_lines","length","forEach","e","Number","dt_deposit","dt_transacamt","sumofpaid","toFixed","sumoftotal","balPaid","balTotal","setState","console","log","handleChange","index","target","name","value","debouncedFn","debounce","handleChangeValue","handlepromopriceChange","handlediscountpriceChange","handleTotalpriceChange","handleUnitpriceChange","handleBalanceUpdate","final","handleupdate","payload","push","dt_price","dt_discamt","dt_promoprice","type","message","tra","t","handlePagination","map","item","record_detail_type","item_code","item_desc","is_edit","dt_qty","staff_name","mapStateToProps","selected_cstomer","common","basicApptDetail","appointment","mapDispatchToProps","dispatch","TransactionPriceChange"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { NormalButton, NormalInput, TableWrapper } from \"component/common\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, commonCreateApi } from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { Toast } from \"service/toast\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class TransactionPriceChangeClass extends Component {\r\n  state = {\r\n    headerDetails: [\r\n      {\r\n        label: \"S. No\",\r\n        sortKey: false,\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Type\", sortKey: false },\r\n      { label: \"Item Code\" },\r\n      { label: \"Description\", sortKey: false },\r\n      {\r\n        label: \"Price\",\r\n        sortKey: false,\r\n        width: \"150px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Discount Amount\",\r\n        sortKey: false,\r\n        width: \"150px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Price After Disc\",\r\n        sortKey: false,\r\n        width: \"150px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Qty\",\r\n        sortKey: false,\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Total Amount\",\r\n        sortKey: false,\r\n        width: \"150px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Paid Amount\",\r\n        sortKey: false,\r\n        width: \"150px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      { label: \"Staff\", sortKey: false },\r\n    ],\r\n    TransactionPrice: {\r\n      transaction_no: \"\",\r\n      customer_name: \"\",\r\n      date: \"\",\r\n      paid_amount: \"\",\r\n      total_amount: \"\",\r\n      priceChangeList: [],\r\n    },\r\n    sumTotal: \"\",\r\n    balanceTotal: \"\",\r\n    sumPaid: \"\",\r\n    balancePaid: \"\",\r\n    changeTextIndex: \"\",\r\n    changeTextLabel: \"\",\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.getSelectedTransactions();\r\n  };\r\n  getSelectedTransactions = () => {\r\n    try {\r\n      let { TransactionPrice, sumPaid, sumTotal, balanceTotal, balancePaid } =\r\n        this.state;\r\n\r\n      this.props\r\n        .getCommonApi(`transactionhistory/${this.props.match.params.id}`)\r\n\r\n        .then(async res => {\r\n          let { status, data } = res;\r\n          if (status == 200) {\r\n            TransactionPrice[\"customer_name\"] = data.customer_name;\r\n            TransactionPrice[\"date\"] = data.date;\r\n            TransactionPrice[\"paid_amount\"] = data.paid_amount;\r\n            TransactionPrice[\"total_amount\"] = data.total_amount;\r\n            TransactionPrice[\"transaction_no\"] = data.transaction_no;\r\n            TransactionPrice[\"priceChangeList\"] = data.daud_lines\r\n              ? data.daud_lines\r\n              : [];\r\n\r\n            if (data.daud_lines.length > 0) {\r\n              sumPaid = 0;\r\n              sumTotal = 0;\r\n              data.daud_lines.forEach(e => {\r\n                sumPaid += Number(e.dt_deposit);\r\n                sumTotal += Number(e.dt_transacamt);\r\n              });\r\n\r\n              let sumofpaid = Number(sumPaid).toFixed(2);\r\n              let sumoftotal = Number(sumTotal).toFixed(2);\r\n              let balPaid =\r\n                Number(TransactionPrice.paid_amount) - Number(sumPaid);\r\n              let balTotal =\r\n                Number(TransactionPrice.total_amount) - Number(sumTotal);\r\n\r\n              balancePaid = Number(balPaid).toFixed(2);\r\n              balanceTotal = Number(balTotal).toFixed(2);\r\n              sumPaid = Number(sumofpaid).toFixed(2);\r\n              sumTotal = Number(sumoftotal).toFixed(2);\r\n            } else {\r\n              sumPaid = Number(data.paid_amount).toFixed(2);\r\n              sumTotal = Number(data.total_amount).toFixed(2);\r\n              balancePaid = \"0.00\";\r\n              balanceTotal = \"0.00\";\r\n            }\r\n            this.setState({\r\n              TransactionPrice,\r\n              sumTotal,\r\n              sumPaid,\r\n              balanceTotal,\r\n              balancePaid,\r\n            });\r\n          }\r\n        });\r\n    } catch (e) {\r\n      console.log(e, \"catchexforpricechange\");\r\n    }\r\n  };\r\n\r\n  handleChange = async (e, index) => {\r\n    await this.setState({\r\n      changeTextLabel: e.target.name,\r\n      changeTextIndex: index,\r\n    });\r\n    try {\r\n      let { TransactionPrice } = this.state;\r\n\r\n      let data = e.target.value;\r\n      TransactionPrice.priceChangeList[index][e.target.name] = Number(data);\r\n\r\n      await this.setState({\r\n        TransactionPrice,\r\n      });\r\n      if (!this.debouncedFn) {\r\n        this.debouncedFn = _.debounce(async () => {\r\n          this.handleChangeValue();\r\n        }, 500);\r\n      }\r\n      this.debouncedFn();\r\n    } catch (e) {\r\n      console.log(e, \"pricechangecatchlog\");\r\n    }\r\n  };\r\n  handleChangeValue = () => {\r\n    let { changeTextLabel } = this.state;\r\n    if (changeTextLabel == \"dt_promoprice\") {\r\n      this.handlepromopriceChange();\r\n    } else if (changeTextLabel == \"dt_discamt\") {\r\n      this.handlediscountpriceChange();\r\n    } else if (changeTextLabel == \"dt_transacamt\") {\r\n      this.handleTotalpriceChange();\r\n    } else if (changeTextLabel == \"dt_price\") {\r\n      this.handleUnitpriceChange();\r\n    } else if (changeTextLabel == \"dt_deposit\") {\r\n      this.handleBalanceUpdate();\r\n    }\r\n  };\r\n  handleUnitpriceChange = async () => {\r\n    let { TransactionPrice, changeTextIndex } = this.state;\r\n    let final = TransactionPrice.priceChangeList[changeTextIndex];\r\n\r\n    final[\"dt_promoprice\"] = Number(final[\"dt_price\"]).toFixed(2);\r\n    final[\"dt_discamt\"] = Number(0).toFixed(2);\r\n    final[\"dt_transacamt\"] = Number(\r\n      Number(final[\"dt_promoprice\"]) * Number(final[\"dt_qty\"])\r\n    ).toFixed(2);\r\n    await this.setState({\r\n      final,\r\n    });\r\n    this.handleBalanceUpdate();\r\n  };\r\n\r\n  handleTotalpriceChange = async () => {\r\n    let { TransactionPrice, changeTextIndex } = this.state;\r\n    let final = TransactionPrice.priceChangeList[changeTextIndex];\r\n    final[\"dt_promoprice\"] = Number(\r\n      Number(final[\"dt_transacamt\"]) / Number(final[\"dt_qty\"])\r\n    ).toFixed(2);\r\n    final[\"dt_discamt\"] = Number(0).toFixed(2);\r\n    final[\"dt_price\"] = Number(\r\n      Number(final[\"dt_transacamt\"]) / Number(final[\"dt_qty\"])\r\n    ).toFixed(2);\r\n    await this.setState({\r\n      final,\r\n    });\r\n    this.handleBalanceUpdate();\r\n  };\r\n\r\n  handlediscountpriceChange = async () => {\r\n    let { TransactionPrice, changeTextIndex } = this.state;\r\n    let final = TransactionPrice.priceChangeList[changeTextIndex];\r\n    final[\"dt_promoprice\"] = Number(\r\n      Number(final[\"dt_price\"]) - Number(final[\"dt_discamt\"])\r\n    ).toFixed(2);\r\n    final[\"dt_transacamt\"] = Number(\r\n      (Number(final[\"dt_price\"]) - Number(final[\"dt_discamt\"])) *\r\n        Number(final[\"dt_qty\"])\r\n    ).toFixed(2);\r\n    await this.setState({\r\n      final,\r\n    });\r\n    this.handleBalanceUpdate();\r\n  };\r\n\r\n  handlepromopriceChange = async () => {\r\n    let { TransactionPrice, changeTextIndex } = this.state;\r\n    let final = TransactionPrice.priceChangeList[changeTextIndex];\r\n    final[\"dt_discamt\"] = Number(\r\n      Number(final[\"dt_price\"]) - Number(final[\"dt_promoprice\"])\r\n    ).toFixed(2);\r\n    final[\"dt_transacamt\"] = Number(\r\n      Number(final[\"dt_promoprice\"]) * Number(final[\"dt_qty\"])\r\n    ).toFixed(2);\r\n    await this.setState({\r\n      final,\r\n    });\r\n    this.handleBalanceUpdate();\r\n  };\r\n\r\n  handleBalanceUpdate = () => {\r\n    let { TransactionPrice, balancePaid, sumPaid, sumTotal, balanceTotal } =\r\n      this.state;\r\n\r\n    if (TransactionPrice.priceChangeList.length > 0) {\r\n      sumPaid = 0;\r\n      sumTotal = 0;\r\n      TransactionPrice.priceChangeList.forEach(e => {\r\n        sumPaid += Number(e.dt_deposit);\r\n        sumTotal += Number(e.dt_transacamt);\r\n      });\r\n      let sumofpaid = Number(sumPaid).toFixed(2);\r\n      let sumoftotal = Number(sumTotal).toFixed(2);\r\n      let balPaid = Number(TransactionPrice.paid_amount) - Number(sumPaid);\r\n      let balTotal = Number(TransactionPrice.total_amount) - Number(sumTotal);\r\n\r\n      balancePaid = Number(balPaid).toFixed(2);\r\n      balanceTotal = Number(balTotal).toFixed(2);\r\n      sumPaid = Number(sumofpaid).toFixed(2);\r\n      sumTotal = Number(sumoftotal).toFixed(2);\r\n\r\n      this.setState({ balancePaid, sumPaid, sumTotal, balanceTotal });\r\n    }\r\n  };\r\n\r\n  handleupdate = () => {\r\n    let { TransactionPrice, balanceTotal, balancePaid } = this.state;\r\n    if (Number(balancePaid) == 0 && Number(balanceTotal) == 0) {\r\n      if (TransactionPrice.priceChangeList.length > 0) {\r\n        try {\r\n          let payload = [];\r\n          TransactionPrice.priceChangeList.forEach(e => {\r\n            payload.push({\r\n              id: e.id,\r\n              dt_price: e.dt_price,\r\n              dt_discamt: e.dt_discamt,\r\n              dt_promoprice: e.dt_promoprice,\r\n              dt_transacamt: e.dt_transacamt,\r\n              dt_deposit: e.dt_deposit,\r\n            });\r\n          });\r\n\r\n          this.props\r\n            .commonCreateApi(`transactionhistory/changeprice/`, payload)\r\n            .then(async res => {\r\n              if (res.status === 201) {\r\n                history.push(\"/admin/transactionhistory\");\r\n              }\r\n            });\r\n        } catch (e) {\r\n          console.log(\"pricechangeupdate\", e);\r\n        }\r\n      }\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Amount difference should be 0\",\r\n      });\r\n    }\r\n  };\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      TransactionPrice,\r\n      sumTotal,\r\n      balanceTotal,\r\n      sumPaid,\r\n      balancePaid,\r\n    } = this.state;\r\n    let {\r\n      transaction_no,\r\n      customer_name,\r\n      date,\r\n      paid_amount,\r\n      total_amount,\r\n      priceChangeList,\r\n    } = TransactionPrice;\r\n    let tra;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"d-flex flex-wrap mb-2 mt-2\">\r\n          <div className=\"col-md-10 col-12 header\">\r\n            <p className=\"fs-16 font-700 mb-3 title\">\r\n              <span\r\n                className=\"fw-600\"\r\n                onClick={() => history.push(`/admin/transactionhistory/`)}\r\n              >\r\n                {t(\"Transaction History\")}\r\n              </span>\r\n              &nbsp; &gt;&nbsp;\r\n              {t(\"Price Change\")}\r\n            </p>\r\n          </div>\r\n          <div className=\"col-md-2 col-12\">\r\n            <div className=\"col text-right\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                submitBtn={true}\r\n                label=\"Update\"\r\n                outline={false}\r\n                onClick={() => this.handleupdate()}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex flex-wrap p-2\">\r\n          <div className=\"col-md-2 col-12\">\r\n            <div className=\"\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2 fw-500\">\r\n                {t(\"Transaction No\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {transaction_no}\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-2 col-12\">\r\n            <div className=\"\">\r\n              <label className=\"text-left w-100 common-label-text mr-2 fw-500\">\r\n                {t(\"Date\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <label className=\"text-left w-100 common-label-text mr-2\">\r\n                  {date}\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-3 col-12\">\r\n            <div className=\"\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2 fw-500\">\r\n                {t(\"Customer Name\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {customer_name}\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-2 col-12\">\r\n            <div className=\"\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2 fw-500\">\r\n                {t(\"Total Amount\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {total_amount}\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-2 col-12\">\r\n            <div className=\"\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2 fw-500\">\r\n                {t(\"Paid Amount\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {paid_amount}\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`d-flex`}>\r\n          <TableWrapper\r\n            headerDetails={headerDetails}\r\n            queryHandler={this.handlePagination}\r\n            // pageMeta={pageMeta}\r\n            // isEmpty={tstaffList.length === 0 ? true:false}\r\n          >\r\n            {priceChangeList.length > 0\r\n              ? priceChangeList.map((item, index) => {\r\n                  return (\r\n                    <tr key={index}>\r\n                      <td className=\"position-relative status-type\">\r\n                        <div className=\"text-right\">{index + 1}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-left\">\r\n                          {item.record_detail_type}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-left\">{item.item_code}</div>\r\n                      </td>\r\n\r\n                      <td>\r\n                        <div className=\"text-left\">{item.item_desc}</div>\r\n                      </td>\r\n\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          <NormalInput\r\n                            type=\"number\"\r\n                            name=\"dt_price\"\r\n                            value={item.dt_price}\r\n                            onChange={e => this.handleChange(e, index)}\r\n                            disabled={item.is_edit ? false : true}\r\n                            className=\"text-right\"\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          <NormalInput\r\n                            type=\"number\"\r\n                            name=\"dt_discamt\"\r\n                            value={item.dt_discamt}\r\n                            onChange={e => this.handleChange(e, index)}\r\n                            disabled={item.is_edit ? false : true}\r\n                            className=\"text-right\"\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          <NormalInput\r\n                            type=\"number\"\r\n                            name=\"dt_promoprice\"\r\n                            value={item.dt_promoprice}\r\n                            onChange={e => this.handleChange(e, index)}\r\n                            disabled={item.is_edit ? false : true}\r\n                            className=\"text-right\"\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-right\">{item.dt_qty}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          <NormalInput\r\n                            type=\"number\"\r\n                            name=\"dt_transacamt\"\r\n                            value={item.dt_transacamt}\r\n                            onChange={e => this.handleChange(e, index)}\r\n                            disabled={item.is_edit ? false : true}\r\n                            className=\"text-right\"\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          <NormalInput\r\n                            type=\"number\"\r\n                            name=\"dt_deposit\"\r\n                            value={item.dt_deposit}\r\n                            onChange={e => this.handleChange(e, index)}\r\n                            disabled={item.is_edit ? false : true}\r\n                            className=\"text-right\"\r\n                          />\r\n                        </div>\r\n                      </td>\r\n\r\n                      <td className=\"text-left\">{item.staff_name}</td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              : null}\r\n          </TableWrapper>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-md-5 col-12\"></div>\r\n          <div className=\"col-md-7 col-12 p-1\">\r\n            <div className=\"d-flex flex-wrap justify-content-end p-1\">\r\n              <div className=\"col-md-6 col-12\">\r\n                <div className=\"d-flex p-1\">\r\n                  <div className=\"col-7\">{t(\"Original Invoice Amount\")}</div>\r\n                  <div className=\"col-5\">\r\n                    <NormalInput\r\n                      type=\"text\"\r\n                      name=\"total_amount\"\r\n                      value={total_amount}\r\n                      onChange={() => {}}\r\n                      disabled={true}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"d-flex p-1\">\r\n                  <div className=\"col-7\">{t(\"Sum of Current Amount\")}</div>\r\n                  <div className=\"col-5\">\r\n                    <NormalInput\r\n                      type=\"text\"\r\n                      name=\"sumTotal\"\r\n                      value={sumTotal}\r\n                      onChange={() => {}}\r\n                      disabled={true}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"d-flex justify-content-start p-1\">\r\n                  <div className=\"col-7\">{t(\"Difference\")}</div>\r\n                  <div className=\"col-5\">\r\n                    <NormalInput\r\n                      className={`${\r\n                        Number(balanceTotal) !== 0 ? `text-danger` : ``\r\n                      } form-control`}\r\n                      type=\"text\"\r\n                      name=\"balanceTotal\"\r\n                      value={balanceTotal}\r\n                      onChange={() => {}}\r\n                      disabled={true}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-6 col-12\">\r\n                <div className=\"d-flex p-1\">\r\n                  <div className=\"col-7\">{t(\"Original Paid Amount\")}</div>\r\n                  <div className=\"col-5\">\r\n                    <NormalInput\r\n                      type=\"text\"\r\n                      name=\"paid_amount\"\r\n                      value={paid_amount}\r\n                      onChange={() => {}}\r\n                      disabled={true}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"d-flex p-1\">\r\n                  <div className=\"col-7\">{t(\"Current Paid Amount\")}</div>\r\n                  <div className=\"col-5\">\r\n                    <NormalInput\r\n                      type=\"text\"\r\n                      name=\"sumPaid\"\r\n                      value={sumPaid}\r\n                      onChange={() => {}}\r\n                      disabled={true}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"d-flex p-1\">\r\n                  <div className=\"col-7\">{t(\"Difference\")}</div>\r\n                  <div className=\"col-5\">\r\n                    <NormalInput\r\n                      className={`${\r\n                        Number(balancePaid) !== 0 ? `text-danger` : ``\r\n                      } form-control`}\r\n                      type=\"text\"\r\n                      name=\"balancePaid\"\r\n                      value={balancePaid}\r\n                      onChange={() => {}}\r\n                      disabled={true}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      commonCreateApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TransactionPriceChange = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(TransactionPriceChangeClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}