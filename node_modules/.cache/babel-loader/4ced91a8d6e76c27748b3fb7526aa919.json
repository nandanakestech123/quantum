{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\CustomerPlus\\\\AddCustomerPlus\\\\index.js\";\nimport React, { Component } from \"react\";\nimport \"./style.scss\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCustomerPlusSettings, updateCustomerPlus, CreateCustomerPlus, getCustomerPlus } from \"redux/actions/customerPlus\";\nimport { NormalInput, NormalDateTime, NormalSelect, NormalMultiSelect, NormalButton, LayoutEditor } from \"component/common\";\nimport { withTranslation } from \"react-i18next\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { history } from \"helpers\";\nimport { updateForm } from \"redux/actions/common\";\nexport class AddCustomerPlusClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formFields: {},\n      fields: [{\n        id: 1,\n        field_name: \"cust_dob\",\n        display_field_name: \"Customer DOB\",\n        visible_in_registration: true,\n        visible_in_listing: true,\n        visible_in_profile: true,\n        mandatory: true,\n        data_type: \"Dat\",\n        selection: null\n      }],\n      isLoading: true,\n      isMounted: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.loadData = async () => {\n      await this.props.getCustomerPlusSettings(\"details\");\n      this.state.fields = this.props.customerPlusSettings.filter(e => e.visible_in_registration);\n      this.state.formFields = this.state.fields.reduce((map, obj) => {\n        if (obj.data_type == \"date\") map[obj.field_name] = dateFormat(new Date());else if (obj.data_type == \"datetime\") map[obj.field_name] = new Date().toISOString();else map[obj.field_name] = null;\n        return map;\n      }, {});\n\n      if (this.props.match.params.id) {\n        await this.props.getCustomerPlus(this.props.match.params.id);\n        this.state.formFields = this.props.customerPlusDetail;\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.handleSubmit = async type => {\n      debugger;\n      if (!this.validator.allValid()) return this.validator.showMessages();\n      this.setState({\n        isLoading: true\n      });\n      console.log(this.state.formFields);\n\n      try {\n        this.state.fields.filter(e => e.data_type == \"date\").forEach(e => {\n          if (this.state.formFields[e.field_name]) {\n            this.state.formFields[e.field_name] = dateFormat(this.state.formFields[e.field_name]);\n          }\n        });\n        this.state.fields.filter(e => e.data_type == \"datetime\").forEach(e => {\n          if (this.state.formFields[e.field_name]) {\n            let date = new Date(this.state.formFields[e.field_name]);\n            this.state.formFields[e.field_name] = date.toISOString();\n          }\n        });\n\n        if (this.props.match.params.id) {\n          var formFields = {};\n          this.state.fields.forEach(e => {\n            formFields[e.field_name] = this.state.formFields[e.field_name];\n          });\n          var res = await this.props.updateCustomerPlus(this.props.match.params.id + \"/\", JSON.stringify(formFields));\n\n          if (res.status == 200) {\n            if (type == \"catalog\") {\n              let formField = {\n                custId: 0,\n                custName: \"\"\n              };\n              formField[\"custId\"] = res.data.id;\n              formField[\"custName\"] = res.data.cust_name;\n              this.setState({\n                isLoading: false\n              });\n              this.props.updateForm(\"basicApptDetail\", formField);\n              history.push(\"/admin/cart\");\n            } else {\n              history.push(`/admin/customerplus/${this.props.match.params.id}/details`);\n            }\n          }\n        } else {\n          var res = await this.props.CreateCustomerPlus(JSON.stringify(this.state.formFields));\n\n          if (type == \"catalog\") {\n            let formField = {\n              custId: 0,\n              custName: \"\"\n            };\n            formField[\"custId\"] = res.data.id;\n            formField[\"custName\"] = res.data.cust_name;\n            this.props.updateForm(\"basicApptDetail\", formField);\n            history.push(\"/admin/cart\");\n          } else {\n            history.push(`/admin/customerPlus`);\n          }\n        }\n      } catch (e) {\n        console.log(e, \"catchmessage\");\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.handleCancel = () => {\n      if (this.props.match.params.id) {\n        this.props.history.push(`/admin/customerplus/${this.props.match.params.id}/details`);\n      } else {\n        this.props.history.push(`/admin/customerplus`);\n      }\n    };\n\n    this.handleChange = ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let formFields = Object.assign({}, this.state.formFields);\n      formFields[name] = value;\n      this.setState({\n        formFields\n      });\n    };\n\n    this.handleMultiSelect = (field, e) => {\n      let formFields = Object.assign({}, this.state.formFields);\n      formFields[field] = e;\n      this.setState({\n        formFields\n      });\n    };\n\n    this.handleChangeBox = event => {\n      let formFields = Object.assign({}, this.state.formFields);\n      formFields[event.target.name] = event.target.checked;\n      this.setState({\n        formFields\n      });\n    };\n\n    this.handleDatePick = async (name, value) => {\n      let {\n        formFields\n      } = this.state;\n      formFields[name] = value;\n      await this.setState({\n        formFields\n      });\n    };\n\n    this.renderLayout = () => {\n      let {\n        t\n      } = this.props;\n      let filtered = this.state.fields;\n\n      const renderFormData = (e, index) => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"input-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 11\n          }\n        }, e.data_type == \"text\" ? /*#__PURE__*/React.createElement(NormalInput, {\n          placeholder: \"Enter here\",\n          value: this.state.formFields[e.field_name],\n          name: e.field_name,\n          onChange: this.handleChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }\n        }) : e.data_type == \"date\" ? /*#__PURE__*/React.createElement(NormalDateTime, {\n          onChange: this.handleDatePick,\n          value: this.state.formFields[e.field_name] ? new Date(this.state.formFields[e.field_name]) : new Date(),\n          name: e.field_name,\n          showYearDropdown: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }\n        }) : e.data_type == \"datetime\" ? /*#__PURE__*/React.createElement(NormalDateTime, {\n          onChange: this.handleDatePick,\n          value: this.state.formFields[e.field_name] ? new Date(this.state.formFields[e.field_name]) : new Date(),\n          name: e.field_name,\n          showYearDropdown: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }\n        }) : e.data_type == \"selection\" ? /*#__PURE__*/React.createElement(NormalSelect, {\n          options: e.selection,\n          value: this.state.formFields[e.field_name],\n          name: e.field_name,\n          onChange: this.handleChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }\n        }) : e.data_type == \"multiSelect\" ? /*#__PURE__*/React.createElement(NormalMultiSelect, {\n          options: e.selection,\n          defaultValue: this.state.formFields[e.field_name],\n          name: e.field_name,\n          handleMultiSelect: e => this.handleMultiSelect(e.field_name, e),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }\n        }) : e.data_type == \"boolean\" ? /*#__PURE__*/React.createElement(\"input\", {\n          type: \"checkbox\",\n          checked: this.state.formFields[e.field_name],\n          name: e.field_name,\n          onChange: this.handleChangeBox,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }\n        }) : e.data_type == \"number\" ? /*#__PURE__*/React.createElement(NormalInput, {\n          type: \"number\",\n          placeholder: \"Enter here\",\n          value: this.state.formFields[e.field_name],\n          name: e.field_name,\n          onChange: this.handleChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }\n        }) : t(\"NO FILED RENDER DATA FOUND\")), e.mandatory ? this.validator.message(e.display_field_name, this.state.formFields[e.field_name], \"required\") : null);\n      };\n\n      return filtered.map(e => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: `${e.id}`,\n          style: e.data_type == \"date\" || e.data_type == \"datetime\" ? {\n            zIndex: 1\n          } : {},\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 9\n          }\n        }, e.showLabel && /*#__PURE__*/React.createElement(\"label\", {\n          className: \"text-left text-black common-label-text fs-17 p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }\n        }, t(e.display_field_name), e.mandatory && /*#__PURE__*/React.createElement(\"label\", {\n          className: \"text-danger p-0 m-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 31\n          }\n        }, \"*\")), renderFormData(e));\n      });\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  componentDidMount() {\n    this.validator = new SimpleReactValidator({\n      validators: {},\n      element: message => /*#__PURE__*/React.createElement(\"span\", {\n        className: \"error-message text-danger validNo fs14\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }\n      }, message),\n      autoForceUpdate: this\n    });\n    this.loadData();\n  }\n\n  render() {\n    let {\n      isLoading\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-customer-section container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-customerplus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head-label-nav p-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"category\",\n      onClick: () => {\n        this.props.match.params.id ? this.props.history.push(`/admin/customerplus/${this.props.match.params.id}/details`) : this.props.history.push(`/admin/customerplus/`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 13\n      }\n    }, t(\"Customer\")), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-right mx-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sub-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 13\n      }\n    }, t((this.props.match.params.id ? \"Edit\" : \"Add\") + \" New Customer\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customer-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 11\n      }\n    }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 19\n      }\n    }, \"Loading...\"))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2 row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(LayoutEditor, {\n      fields: this.state.fields,\n      editable: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 19\n      }\n    }, this.renderLayout())), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      onClick: this.handleCancel,\n      label: \"CANCEL\",\n      danger: true,\n      className: \"mr-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      onClick: () => this.handleSubmit(),\n      label: \"SAVE\",\n      success: true,\n      className: \"mr-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      onClick: () => this.handleSubmit(\"catalog\"),\n      label: \"SAVE & CATALOG\",\n      success: true,\n      className: \"mr-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 21\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  customerPlusDetail: state.customerPlus.customerPlusDetail,\n  customerPlusSettings: state.customerPlus.customerPlusSettings\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCustomerPlusSettings,\n    updateCustomerPlus,\n    CreateCustomerPlus,\n    getCustomerPlus,\n    updateForm\n  }, dispatch);\n};\n\nexport const AddCustomerPlus = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(AddCustomerPlusClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/AddCustomerPlus/index.js"],"names":["React","Component","SimpleReactValidator","connect","bindActionCreators","getCustomerPlusSettings","updateCustomerPlus","CreateCustomerPlus","getCustomerPlus","NormalInput","NormalDateTime","NormalSelect","NormalMultiSelect","NormalButton","LayoutEditor","withTranslation","dateFormat","history","updateForm","AddCustomerPlusClass","state","formFields","fields","id","field_name","display_field_name","visible_in_registration","visible_in_listing","visible_in_profile","mandatory","data_type","selection","isLoading","isMounted","updateState","data","setState","loadData","props","customerPlusSettings","filter","e","reduce","map","obj","Date","toISOString","match","params","customerPlusDetail","handleSubmit","type","validator","allValid","showMessages","console","log","forEach","date","res","JSON","stringify","status","formField","custId","custName","cust_name","push","handleCancel","handleChange","target","value","name","Object","assign","handleMultiSelect","field","handleChangeBox","event","checked","handleDatePick","renderLayout","t","filtered","renderFormData","index","message","zIndex","showLabel","componentWillUnmount","componentDidMount","validators","element","autoForceUpdate","render","mapStateToProps","customerPlus","mapDispatchToProps","dispatch","AddCustomerPlus"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./style.scss\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport {\n  getCustomerPlusSettings,\n  updateCustomerPlus,\n  CreateCustomerPlus,\n  getCustomerPlus,\n} from \"redux/actions/customerPlus\";\nimport {\n  NormalInput,\n  NormalDateTime,\n  NormalSelect,\n  NormalMultiSelect,\n  NormalButton,\n  LayoutEditor,\n} from \"component/common\";\nimport { withTranslation } from \"react-i18next\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { history } from \"helpers\";\nimport { updateForm } from \"redux/actions/common\";\n\nexport class AddCustomerPlusClass extends Component {\n  state = {\n    formFields: {},\n    fields: [\n      {\n        id: 1,\n        field_name: \"cust_dob\",\n        display_field_name: \"Customer DOB\",\n        visible_in_registration: true,\n        visible_in_listing: true,\n        visible_in_profile: true,\n        mandatory: true,\n        data_type: \"Dat\",\n        selection: null,\n      },\n    ],\n    isLoading: true,\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = data => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount() {\n    this.validator = new SimpleReactValidator({\n      validators: {},\n      element: message => (\n        <span className=\"error-message text-danger validNo fs14\">\n          {message}\n        </span>\n      ),\n      autoForceUpdate: this,\n    });\n    this.loadData();\n  }\n\n  loadData = async () => {\n    await this.props.getCustomerPlusSettings(\"details\");\n    this.state.fields = this.props.customerPlusSettings.filter(\n      e => e.visible_in_registration\n    );\n    this.state.formFields = this.state.fields.reduce((map, obj) => {\n      if (obj.data_type == \"date\") map[obj.field_name] = dateFormat(new Date());\n      else if (obj.data_type == \"datetime\")\n        map[obj.field_name] = new Date().toISOString();\n      else map[obj.field_name] = null;\n      return map;\n    }, {});\n    if (this.props.match.params.id) {\n      await this.props.getCustomerPlus(this.props.match.params.id);\n      this.state.formFields = this.props.customerPlusDetail;\n    }\n    this.setState({ isLoading: false });\n  };\n\n  handleSubmit = async type => {\n    debugger;\n    if (!this.validator.allValid()) return this.validator.showMessages();\n    this.setState({ isLoading: true });\n    console.log(this.state.formFields);\n    try {\n      this.state.fields\n        .filter(e => e.data_type == \"date\")\n        .forEach(e => {\n          if (this.state.formFields[e.field_name]) {\n            this.state.formFields[e.field_name] = dateFormat(\n              this.state.formFields[e.field_name]\n            );\n          }\n        });\n      this.state.fields\n        .filter(e => e.data_type == \"datetime\")\n        .forEach(e => {\n          if (this.state.formFields[e.field_name]) {\n            let date = new Date(this.state.formFields[e.field_name]);\n            this.state.formFields[e.field_name] = date.toISOString();\n          }\n        });\n      if (this.props.match.params.id) {\n        var formFields = {};\n        this.state.fields.forEach(e => {\n          formFields[e.field_name] = this.state.formFields[e.field_name];\n        });\n        var res = await this.props.updateCustomerPlus(\n          this.props.match.params.id + \"/\",\n          JSON.stringify(formFields)\n        );\n        if (res.status == 200) {\n          if (type == \"catalog\") {\n            let formField = { custId: 0, custName: \"\" };\n            formField[\"custId\"] = res.data.id;\n            formField[\"custName\"] = res.data.cust_name;\n            this.setState({ isLoading: false });\n            this.props.updateForm(\"basicApptDetail\", formField);\n            history.push(\"/admin/cart\");\n          } else {\n            history.push(\n              `/admin/customerplus/${this.props.match.params.id}/details`\n            );\n          }\n        }\n      } else {\n        var res = await this.props.CreateCustomerPlus(\n          JSON.stringify(this.state.formFields)\n        );\n        if (type == \"catalog\") {\n          let formField = { custId: 0, custName: \"\" };\n          formField[\"custId\"] = res.data.id;\n          formField[\"custName\"] = res.data.cust_name;\n          this.props.updateForm(\"basicApptDetail\", formField);\n          history.push(\"/admin/cart\");\n        } else {\n          history.push(`/admin/customerPlus`);\n        }\n      }\n    } catch (e) {\n      console.log(e, \"catchmessage\");\n    }\n    this.setState({ isLoading: false });\n  };\n\n  handleCancel = () => {\n    if (this.props.match.params.id) {\n      this.props.history.push(\n        `/admin/customerplus/${this.props.match.params.id}/details`\n      );\n    } else {\n      this.props.history.push(`/admin/customerplus`);\n    }\n  };\n\n  handleChange = ({ target: { value, name } }) => {\n    let formFields = Object.assign({}, this.state.formFields);\n\n    formFields[name] = value;\n\n    this.setState({\n      formFields,\n    });\n  };\n\n  handleMultiSelect = (field, e) => {\n    let formFields = Object.assign({}, this.state.formFields);\n\n    formFields[field] = e;\n\n    this.setState({\n      formFields,\n    });\n  };\n\n  handleChangeBox = event => {\n    let formFields = Object.assign({}, this.state.formFields);\n\n    formFields[event.target.name] = event.target.checked;\n\n    this.setState({\n      formFields,\n    });\n  };\n\n  handleDatePick = async (name, value) => {\n    let { formFields } = this.state;\n    formFields[name] = value;\n    await this.setState({\n      formFields,\n    });\n  };\n\n  renderLayout = () => {\n    let { t } = this.props;\n    let filtered = this.state.fields;\n    const renderFormData = (e, index) => {\n      return (\n        <div key={index}>\n          <div className=\"input-group\">\n            {e.data_type == \"text\" ? (\n              <NormalInput\n                placeholder=\"Enter here\"\n                value={this.state.formFields[e.field_name]}\n                name={e.field_name}\n                onChange={this.handleChange}\n              />\n            ) : e.data_type == \"date\" ? (\n              <NormalDateTime\n                onChange={this.handleDatePick}\n                value={\n                  this.state.formFields[e.field_name]\n                    ? new Date(this.state.formFields[e.field_name])\n                    : new Date()\n                }\n                name={e.field_name}\n                showYearDropdown={true}\n              />\n            ) : e.data_type == \"datetime\" ? (\n              <NormalDateTime\n                onChange={this.handleDatePick}\n                value={\n                  this.state.formFields[e.field_name]\n                    ? new Date(this.state.formFields[e.field_name])\n                    : new Date()\n                }\n                name={e.field_name}\n                showYearDropdown={true}\n              />\n            ) : e.data_type == \"selection\" ? (\n              <NormalSelect\n                options={e.selection}\n                value={this.state.formFields[e.field_name]}\n                name={e.field_name}\n                onChange={this.handleChange}\n              />\n            ) : e.data_type == \"multiSelect\" ? (\n              <NormalMultiSelect\n                options={e.selection}\n                defaultValue={this.state.formFields[e.field_name]}\n                name={e.field_name}\n                handleMultiSelect={e => this.handleMultiSelect(e.field_name, e)}\n              />\n            ) : e.data_type == \"boolean\" ? (\n              <input\n                type=\"checkbox\"\n                checked={this.state.formFields[e.field_name]}\n                name={e.field_name}\n                onChange={this.handleChangeBox}\n              />\n            ) : e.data_type == \"number\" ? (\n              <NormalInput\n                type=\"number\"\n                placeholder=\"Enter here\"\n                value={this.state.formFields[e.field_name]}\n                name={e.field_name}\n                onChange={this.handleChange}\n              />\n            ) : (\n              t(\"NO FILED RENDER DATA FOUND\")\n            )}\n          </div>\n          {e.mandatory\n            ? this.validator.message(\n                e.display_field_name,\n                this.state.formFields[e.field_name],\n                \"required\"\n              )\n            : null}\n        </div>\n      );\n    };\n    return filtered.map(e => {\n      return (\n        <div\n          key={`${e.id}`}\n          style={\n            e.data_type == \"date\" || e.data_type == \"datetime\"\n              ? { zIndex: 1 }\n              : {}\n          }\n        >\n          {e.showLabel && (\n            <label className=\"text-left text-black common-label-text fs-17 p-0\">\n              {t(e.display_field_name)}\n              {e.mandatory && <label className=\"text-danger p-0 m-0\">*</label>}\n            </label>\n          )}\n          {renderFormData(e)}\n        </div>\n      );\n    });\n  };\n\n  render() {\n    let { isLoading } = this.state;\n    let { t } = this.props;\n    return (\n      <div className=\"create-customer-section container-fluid\">\n        {/* <p className=\"list-heading pb-4\"> {id ? \"Edit\" : \"Add\"} Customer</p> */}\n        <div className=\"create-customerplus\">\n          <div className=\"head-label-nav p-2\">\n            <p\n              className=\"category\"\n              onClick={() => {\n                this.props.match.params.id\n                  ? this.props.history.push(\n                      `/admin/customerplus/${this.props.match.params.id}/details`\n                    )\n                  : this.props.history.push(`/admin/customerplus/`);\n              }}\n            >\n              {t(\"Customer\")}\n            </p>\n            <i className=\"icon-right mx-md-3\"></i>\n            <p className=\"sub-category\">\n              {t(\n                (this.props.match.params.id ? \"Edit\" : \"Add\") + \" New Customer\"\n              )}\n            </p>\n          </div>\n          <div className=\"customer-detail\">\n            {isLoading ? (\n              <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                <div class=\"spinner-border\" role=\"status\">\n                  <span class=\"sr-only\">Loading...</span>\n                </div>\n              </div>\n            ) : (\n              <>\n                <div className=\"form-group mb-4 pb-2 row\">\n                  <LayoutEditor fields={this.state.fields} editable={false}>\n                    {this.renderLayout()}\n                  </LayoutEditor>\n                </div>\n                <div className=\"row d-flex justify-content-center\">\n                  <div className=\"col-md-4 col-sm-12 mb-4\">\n                    <NormalButton\n                      onClick={this.handleCancel}\n                      label=\"CANCEL\"\n                      danger={true}\n                      className=\"mr-2 col-12\"\n                    />\n                  </div>\n                  <div className=\"col-md-4 col-sm-12 mb-4\">\n                    <NormalButton\n                      onClick={() => this.handleSubmit()}\n                      label=\"SAVE\"\n                      success={true}\n                      className=\"mr-2 col-12\"\n                    />\n                  </div>\n                  <div className=\"col-md-4 col-sm-12 mb-4\">\n                    <NormalButton\n                      onClick={() => this.handleSubmit(\"catalog\")}\n                      label=\"SAVE &amp; CATALOG\"\n                      success={true}\n                      className=\"mr-2 col-12\"\n                    />\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  customerPlusDetail: state.customerPlus.customerPlusDetail,\n  customerPlusSettings: state.customerPlus.customerPlusSettings,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      getCustomerPlusSettings,\n      updateCustomerPlus,\n      CreateCustomerPlus,\n      getCustomerPlus,\n      updateForm,\n    },\n    dispatch\n  );\n};\n\nexport const AddCustomerPlus = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(AddCustomerPlusClass)\n);\n"]},"metadata":{},"sourceType":"module"}