{"ast":null,"code":"/**\r\n * DevExtreme (ui/text_box/ui.text_editor.mask.rule.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.StubMaskRule = exports.MaskRule = exports.EmptyMaskRule = void 0;\n\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _common = require(\"../../core/utils/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar EMPTY_CHAR = \" \";\n\nvar BaseMaskRule = _class.default.inherit({\n  ctor: function ctor(config) {\n    this._value = EMPTY_CHAR;\n    (0, _extend.extend)(this, config);\n  },\n  next: function next(rule) {\n    if (!arguments.length) {\n      return this._next;\n    }\n\n    this._next = rule;\n  },\n  text: _common.noop,\n  value: _common.noop,\n  rawValue: _common.noop,\n  handle: _common.noop,\n  _prepareHandlingArgs: function _prepareHandlingArgs(args, config) {\n    config = config || {};\n    var handlingProperty = Object.prototype.hasOwnProperty.call(args, \"value\") ? \"value\" : \"text\";\n    args[handlingProperty] = (0, _type.isDefined)(config.str) ? config.str : args[handlingProperty];\n    args.start = (0, _type.isDefined)(config.start) ? config.start : args.start;\n    args.length = (0, _type.isDefined)(config.length) ? config.length : args.length;\n    args.index = args.index + 1;\n    return args;\n  },\n  reset: _common.noop,\n  clear: _common.noop,\n  first: function first(index) {\n    index = index || 0;\n    return this.next().first(index + 1);\n  },\n  isAccepted: function isAccepted() {\n    return false;\n  },\n  adjustedCaret: function adjustedCaret(caret, isForwardDirection, char) {\n    return isForwardDirection ? this._adjustedForward(caret, 0, char) : this._adjustedBackward(caret, 0, char);\n  },\n  _adjustedForward: _common.noop,\n  _adjustedBackward: _common.noop,\n  isValid: _common.noop\n});\n\nvar EmptyMaskRule = BaseMaskRule.inherit({\n  next: _common.noop,\n  handle: function handle() {\n    return 0;\n  },\n  text: function text() {\n    return \"\";\n  },\n  value: function value() {\n    return \"\";\n  },\n  first: function first() {\n    return 0;\n  },\n  rawValue: function rawValue() {\n    return \"\";\n  },\n  adjustedCaret: function adjustedCaret() {\n    return 0;\n  },\n  isValid: function isValid() {\n    return true;\n  }\n});\nexports.EmptyMaskRule = EmptyMaskRule;\nvar MaskRule = BaseMaskRule.inherit({\n  text: function text() {\n    return (this._value !== EMPTY_CHAR ? this._value : this.maskChar) + this.next().text();\n  },\n  value: function value() {\n    return this._value + this.next().value();\n  },\n  rawValue: function rawValue() {\n    return this._value + this.next().rawValue();\n  },\n  handle: function handle(args) {\n    var str = Object.prototype.hasOwnProperty.call(args, \"value\") ? args.value : args.text;\n\n    if (!str || !str.length || !args.length) {\n      return 0;\n    }\n\n    if (args.start) {\n      return this.next().handle(this._prepareHandlingArgs(args, {\n        start: args.start - 1\n      }));\n    }\n\n    var char = str[0];\n    var rest = str.substring(1);\n\n    this._tryAcceptChar(char, args);\n\n    return this._accepted() ? this.next().handle(this._prepareHandlingArgs(args, {\n      str: rest,\n      length: args.length - 1\n    })) + 1 : this.handle(this._prepareHandlingArgs(args, {\n      str: rest,\n      length: args.length - 1\n    }));\n  },\n  clear: function clear(args) {\n    this._tryAcceptChar(EMPTY_CHAR, args);\n\n    this.next().clear(this._prepareHandlingArgs(args));\n  },\n  reset: function reset() {\n    this._accepted(false);\n\n    this.next().reset();\n  },\n  _tryAcceptChar: function _tryAcceptChar(char, args) {\n    this._accepted(false);\n\n    if (!this._isAllowed(char, args)) {\n      return;\n    }\n\n    var acceptedChar = char === EMPTY_CHAR ? this.maskChar : char;\n    args.fullText = args.fullText.substring(0, args.index) + acceptedChar + args.fullText.substring(args.index + 1);\n\n    this._accepted(true);\n\n    this._value = char;\n  },\n  _accepted: function _accepted(value) {\n    if (!arguments.length) {\n      return !!this._isAccepted;\n    }\n\n    this._isAccepted = !!value;\n  },\n  first: function first(index) {\n    return this._value === EMPTY_CHAR ? index || 0 : this.callBase(index);\n  },\n  _isAllowed: function _isAllowed(char, args) {\n    if (char === EMPTY_CHAR) {\n      return true;\n    }\n\n    return this._isValid(char, args);\n  },\n  _isValid: function _isValid(char, args) {\n    var allowedChars = this.allowedChars;\n\n    if (allowedChars instanceof RegExp) {\n      return allowedChars.test(char);\n    }\n\n    if ((0, _type.isFunction)(allowedChars)) {\n      return allowedChars(char, args.index, args.fullText);\n    }\n\n    if (Array.isArray(allowedChars)) {\n      return (0, _array.inArray)(char, allowedChars) > -1;\n    }\n\n    return allowedChars === char;\n  },\n  isAccepted: function isAccepted(caret) {\n    return 0 === caret ? this._accepted() : this.next().isAccepted(caret - 1);\n  },\n  _adjustedForward: function _adjustedForward(caret, index, char) {\n    if (index >= caret) {\n      return index;\n    }\n\n    return this.next()._adjustedForward(caret, index + 1, char) || index + 1;\n  },\n  _adjustedBackward: function _adjustedBackward(caret, index) {\n    if (index >= caret - 1) {\n      return caret;\n    }\n\n    return this.next()._adjustedBackward(caret, index + 1) || index + 1;\n  },\n  isValid: function isValid(args) {\n    return this._isValid(this._value, args) && this.next().isValid(this._prepareHandlingArgs(args));\n  }\n});\nexports.MaskRule = MaskRule;\nvar StubMaskRule = MaskRule.inherit({\n  value: function value() {\n    return this.next().value();\n  },\n  handle: function handle(args) {\n    var hasValueProperty = Object.prototype.hasOwnProperty.call(args, \"value\");\n    var str = hasValueProperty ? args.value : args.text;\n\n    if (!str.length || !args.length) {\n      return 0;\n    }\n\n    if (args.start || hasValueProperty) {\n      return this.next().handle(this._prepareHandlingArgs(args, {\n        start: args.start && args.start - 1\n      }));\n    }\n\n    var char = str[0];\n    var rest = str.substring(1);\n\n    this._tryAcceptChar(char);\n\n    var nextArgs = this._isAllowed(char) ? this._prepareHandlingArgs(args, {\n      str: rest,\n      length: args.length - 1\n    }) : args;\n    return this.next().handle(nextArgs) + 1;\n  },\n  clear: function clear(args) {\n    this._accepted(false);\n\n    this.next().clear(this._prepareHandlingArgs(args));\n  },\n  _tryAcceptChar: function _tryAcceptChar(char) {\n    this._accepted(this._isValid(char));\n  },\n  _isValid: function _isValid(char) {\n    return char === this.maskChar;\n  },\n  first: function first(index) {\n    index = index || 0;\n    return this.next().first(index + 1);\n  },\n  _adjustedForward: function _adjustedForward(caret, index, char) {\n    if (index >= caret && char === this.maskChar) {\n      return index;\n    }\n\n    if (caret === index + 1 && this._accepted()) {\n      return caret;\n    }\n\n    return this.next()._adjustedForward(caret, index + 1, char);\n  },\n  _adjustedBackward: function _adjustedBackward(caret, index) {\n    if (index >= caret - 1) {\n      return 0;\n    }\n\n    return this.next()._adjustedBackward(caret, index + 1);\n  },\n  isValid: function isValid(args) {\n    return this.next().isValid(this._prepareHandlingArgs(args));\n  }\n});\nexports.StubMaskRule = StubMaskRule;","map":{"version":3,"sources":["F:/webfe/node_modules/devextreme/ui/text_box/ui.text_editor.mask.rule.js"],"names":["exports","StubMaskRule","MaskRule","EmptyMaskRule","_class","_interopRequireDefault","require","_extend","_array","_type","_common","obj","__esModule","EMPTY_CHAR","BaseMaskRule","default","inherit","ctor","config","_value","extend","next","rule","arguments","length","_next","text","noop","value","rawValue","handle","_prepareHandlingArgs","args","handlingProperty","Object","prototype","hasOwnProperty","call","isDefined","str","start","index","reset","clear","first","isAccepted","adjustedCaret","caret","isForwardDirection","char","_adjustedForward","_adjustedBackward","isValid","maskChar","rest","substring","_tryAcceptChar","_accepted","_isAllowed","acceptedChar","fullText","_isAccepted","callBase","_isValid","allowedChars","RegExp","test","isFunction","Array","isArray","inArray","hasValueProperty","nextArgs"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/text_box/ui.text_editor.mask.rule.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.StubMaskRule = exports.MaskRule = exports.EmptyMaskRule = void 0;\r\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _common = require(\"../../core/utils/common\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar EMPTY_CHAR = \" \";\r\nvar BaseMaskRule = _class.default.inherit({\r\n    ctor: function(config) {\r\n        this._value = EMPTY_CHAR;\r\n        (0, _extend.extend)(this, config)\r\n    },\r\n    next: function(rule) {\r\n        if (!arguments.length) {\r\n            return this._next\r\n        }\r\n        this._next = rule\r\n    },\r\n    text: _common.noop,\r\n    value: _common.noop,\r\n    rawValue: _common.noop,\r\n    handle: _common.noop,\r\n    _prepareHandlingArgs: function(args, config) {\r\n        config = config || {};\r\n        var handlingProperty = Object.prototype.hasOwnProperty.call(args, \"value\") ? \"value\" : \"text\";\r\n        args[handlingProperty] = (0, _type.isDefined)(config.str) ? config.str : args[handlingProperty];\r\n        args.start = (0, _type.isDefined)(config.start) ? config.start : args.start;\r\n        args.length = (0, _type.isDefined)(config.length) ? config.length : args.length;\r\n        args.index = args.index + 1;\r\n        return args\r\n    },\r\n    reset: _common.noop,\r\n    clear: _common.noop,\r\n    first: function(index) {\r\n        index = index || 0;\r\n        return this.next().first(index + 1)\r\n    },\r\n    isAccepted: function() {\r\n        return false\r\n    },\r\n    adjustedCaret: function(caret, isForwardDirection, char) {\r\n        return isForwardDirection ? this._adjustedForward(caret, 0, char) : this._adjustedBackward(caret, 0, char)\r\n    },\r\n    _adjustedForward: _common.noop,\r\n    _adjustedBackward: _common.noop,\r\n    isValid: _common.noop\r\n});\r\nvar EmptyMaskRule = BaseMaskRule.inherit({\r\n    next: _common.noop,\r\n    handle: function() {\r\n        return 0\r\n    },\r\n    text: function() {\r\n        return \"\"\r\n    },\r\n    value: function() {\r\n        return \"\"\r\n    },\r\n    first: function() {\r\n        return 0\r\n    },\r\n    rawValue: function() {\r\n        return \"\"\r\n    },\r\n    adjustedCaret: function() {\r\n        return 0\r\n    },\r\n    isValid: function() {\r\n        return true\r\n    }\r\n});\r\nexports.EmptyMaskRule = EmptyMaskRule;\r\nvar MaskRule = BaseMaskRule.inherit({\r\n    text: function() {\r\n        return (this._value !== EMPTY_CHAR ? this._value : this.maskChar) + this.next().text()\r\n    },\r\n    value: function() {\r\n        return this._value + this.next().value()\r\n    },\r\n    rawValue: function() {\r\n        return this._value + this.next().rawValue()\r\n    },\r\n    handle: function(args) {\r\n        var str = Object.prototype.hasOwnProperty.call(args, \"value\") ? args.value : args.text;\r\n        if (!str || !str.length || !args.length) {\r\n            return 0\r\n        }\r\n        if (args.start) {\r\n            return this.next().handle(this._prepareHandlingArgs(args, {\r\n                start: args.start - 1\r\n            }))\r\n        }\r\n        var char = str[0];\r\n        var rest = str.substring(1);\r\n        this._tryAcceptChar(char, args);\r\n        return this._accepted() ? this.next().handle(this._prepareHandlingArgs(args, {\r\n            str: rest,\r\n            length: args.length - 1\r\n        })) + 1 : this.handle(this._prepareHandlingArgs(args, {\r\n            str: rest,\r\n            length: args.length - 1\r\n        }))\r\n    },\r\n    clear: function(args) {\r\n        this._tryAcceptChar(EMPTY_CHAR, args);\r\n        this.next().clear(this._prepareHandlingArgs(args))\r\n    },\r\n    reset: function() {\r\n        this._accepted(false);\r\n        this.next().reset()\r\n    },\r\n    _tryAcceptChar: function(char, args) {\r\n        this._accepted(false);\r\n        if (!this._isAllowed(char, args)) {\r\n            return\r\n        }\r\n        var acceptedChar = char === EMPTY_CHAR ? this.maskChar : char;\r\n        args.fullText = args.fullText.substring(0, args.index) + acceptedChar + args.fullText.substring(args.index + 1);\r\n        this._accepted(true);\r\n        this._value = char\r\n    },\r\n    _accepted: function(value) {\r\n        if (!arguments.length) {\r\n            return !!this._isAccepted\r\n        }\r\n        this._isAccepted = !!value\r\n    },\r\n    first: function(index) {\r\n        return this._value === EMPTY_CHAR ? index || 0 : this.callBase(index)\r\n    },\r\n    _isAllowed: function(char, args) {\r\n        if (char === EMPTY_CHAR) {\r\n            return true\r\n        }\r\n        return this._isValid(char, args)\r\n    },\r\n    _isValid: function(char, args) {\r\n        var allowedChars = this.allowedChars;\r\n        if (allowedChars instanceof RegExp) {\r\n            return allowedChars.test(char)\r\n        }\r\n        if ((0, _type.isFunction)(allowedChars)) {\r\n            return allowedChars(char, args.index, args.fullText)\r\n        }\r\n        if (Array.isArray(allowedChars)) {\r\n            return (0, _array.inArray)(char, allowedChars) > -1\r\n        }\r\n        return allowedChars === char\r\n    },\r\n    isAccepted: function(caret) {\r\n        return 0 === caret ? this._accepted() : this.next().isAccepted(caret - 1)\r\n    },\r\n    _adjustedForward: function(caret, index, char) {\r\n        if (index >= caret) {\r\n            return index\r\n        }\r\n        return this.next()._adjustedForward(caret, index + 1, char) || index + 1\r\n    },\r\n    _adjustedBackward: function(caret, index) {\r\n        if (index >= caret - 1) {\r\n            return caret\r\n        }\r\n        return this.next()._adjustedBackward(caret, index + 1) || index + 1\r\n    },\r\n    isValid: function(args) {\r\n        return this._isValid(this._value, args) && this.next().isValid(this._prepareHandlingArgs(args))\r\n    }\r\n});\r\nexports.MaskRule = MaskRule;\r\nvar StubMaskRule = MaskRule.inherit({\r\n    value: function() {\r\n        return this.next().value()\r\n    },\r\n    handle: function(args) {\r\n        var hasValueProperty = Object.prototype.hasOwnProperty.call(args, \"value\");\r\n        var str = hasValueProperty ? args.value : args.text;\r\n        if (!str.length || !args.length) {\r\n            return 0\r\n        }\r\n        if (args.start || hasValueProperty) {\r\n            return this.next().handle(this._prepareHandlingArgs(args, {\r\n                start: args.start && args.start - 1\r\n            }))\r\n        }\r\n        var char = str[0];\r\n        var rest = str.substring(1);\r\n        this._tryAcceptChar(char);\r\n        var nextArgs = this._isAllowed(char) ? this._prepareHandlingArgs(args, {\r\n            str: rest,\r\n            length: args.length - 1\r\n        }) : args;\r\n        return this.next().handle(nextArgs) + 1\r\n    },\r\n    clear: function(args) {\r\n        this._accepted(false);\r\n        this.next().clear(this._prepareHandlingArgs(args))\r\n    },\r\n    _tryAcceptChar: function(char) {\r\n        this._accepted(this._isValid(char))\r\n    },\r\n    _isValid: function(char) {\r\n        return char === this.maskChar\r\n    },\r\n    first: function(index) {\r\n        index = index || 0;\r\n        return this.next().first(index + 1)\r\n    },\r\n    _adjustedForward: function(caret, index, char) {\r\n        if (index >= caret && char === this.maskChar) {\r\n            return index\r\n        }\r\n        if (caret === index + 1 && this._accepted()) {\r\n            return caret\r\n        }\r\n        return this.next()._adjustedForward(caret, index + 1, char)\r\n    },\r\n    _adjustedBackward: function(caret, index) {\r\n        if (index >= caret - 1) {\r\n            return 0\r\n        }\r\n        return this.next()._adjustedBackward(caret, index + 1)\r\n    },\r\n    isValid: function(args) {\r\n        return this.next().isValid(this._prepareHandlingArgs(args))\r\n    }\r\n});\r\nexports.StubMaskRule = StubMaskRule;\r\n"]},"metadata":{},"sourceType":"script"}