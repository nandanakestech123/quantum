{"ast":null,"code":"import _objectSpread from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalButton,NormalModal,NormalSelect,NormalDate,NormalDateTime,NormalCheckbox,NormalInput,NormalTextarea}from\"component/common\";import closeIcon from\"assets/images/close.png\";import{getCustomer,getCommonApi,commonCreateApi,commonPatchApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{Toast}from\"service/toast\";import{dateFormat}from\"service/helperFunctions\";import SimpleReactValidator from\"simple-react-validator\";import logicon from\"assets/images/logicon.png\";import{AppointmentLog}from\"../../CommonModal/Appointmentlog\";export var BlockPopupClass=/*#__PURE__*/function(_Component){_inherits(BlockPopupClass,_Component);var _super=_createSuper(BlockPopupClass);function BlockPopupClass(){var _this;_classCallCheck(this,BlockPopupClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={selectedList:[],filterDate:new Date(),staffSortlist:[],formFields:{startDate:new Date(),endDate:new Date(),startTime:\"\",endTime:\"\",duration:\"\",reason:\"\",description:\"\",active:true,staffId:0},duration:[],selectAll:false,reasonList:[],Employeelist:[],appointmentId:0,isAppointmentLogModal:false};_this.handleDialog=function(){_this.setState({selectedList:[],Employeelist:[],formFields:{startDate:new Date(),endDate:new Date(),startTime:\"\",endTime:\"\",duration:\"\",reason:\"\",description:\"\"},appointmentId:0});_this.props.handleBlockDialog();};_this.getDateformat=function(inputdate){var appt_Date=inputdate;var date=appt_Date.split(\"/\");var finaldate=date[2]+\"-\"+date[1]+\"-\"+date[0];return finaldate;};_this.getBlockedDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var _this$state,appointmentId,formFields,selected;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.setState({appointmentId:data});case 2:_this$state=_this.state,appointmentId=_this$state.appointmentId,formFields=_this$state.formFields,selected=_this$state.selected;_this.props.getCommonApi(\"appointmentblock/\".concat(appointmentId,\"/\")).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var status,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=key.status,data=key.data;if(!(status===200)){_context.next=12;break;}formFields[\"startDate\"]=_this.getDateformat(data.start_date);formFields[\"endDate\"]=_this.getDateformat(data.end_date);formFields[\"startTime\"]=data.appt_fr_time;formFields[\"endTime\"]=data.appt_to_time;formFields[\"duration\"]=data.duration;formFields[\"reason\"]=data.reason_id;formFields[\"description\"]=data.appt_remark;formFields[\"staffId\"]=data.emp_noid;_context.next=12;return _this.setState({formFields:formFields});case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.getStaffList=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this$state2,filterDate,staffSortlist,formFields;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.setState({staffSortlist:[]});case 2:_this$state2=_this.state,filterDate=_this$state2.filterDate,staffSortlist=_this$state2.staffSortlist,formFields=_this$state2.formFields;_this.props.getCommonApi(\"appointmentsort/?date=\".concat(dateFormat(filterDate,\"yyyy-mm-dd\"))).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(key){var status,data,_iterator,_step,value,selectedid,selectedstaff;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:status=key.status,data=key.data;if(!(status===200)){_context3.next=6;break;}_iterator=_createForOfIteratorHelper(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){value=_step.value;selectedid=value.id;selectedstaff=false;if(selectedid===formFields.staffId){selectedstaff=true;}else{selectedstaff=false;}staffSortlist.push({value:value.id,label:value.display_name,emp_code:value.emp_code,selected:selectedstaff});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_context3.next=6;return _this.setState({staffSortlist:staffSortlist});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}());case 4:case\"end\":return _context4.stop();}}},_callee4);}));_this.handleSelectAllCheckbox=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref5){var _ref5$target,value,name,staffSortlist,_iterator2,_step2,item;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;staffSortlist=_this.state.staffSortlist;_context5.next=4;return _this.setState({selectAll:value});case 4:_iterator2=_createForOfIteratorHelper(staffSortlist);_context5.prev=5;_iterator2.s();case 7:if((_step2=_iterator2.n()).done){_context5.next=14;break;}item=_step2.value;item[\"selected\"]=value;_context5.next=12;return _this.setState(_objectSpread(_objectSpread({},_this.state.staffSortlist),{},{item:item}));case 12:_context5.next=7;break;case 14:_context5.next=19;break;case 16:_context5.prev=16;_context5.t0=_context5[\"catch\"](5);_iterator2.e(_context5.t0);case 19:_context5.prev=19;_iterator2.f();return _context5.finish(19);case 22:_context5.next=24;return _this.setState({staffSortlist:staffSortlist});case 24:if(!value){_context5.next=29;break;}_context5.next=27;return _this.setState({selectedList:staffSortlist});case 27:_context5.next=31;break;case 29:_context5.next=31;return _this.setState({selectedList:[]});case 31:case\"end\":return _context5.stop();}}},_callee5,null,[[5,16,19,22]]);}));return function(_x4){return _ref6.apply(this,arguments);};}();_this.handleActiveCheckbox=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref7){var _ref7$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref7$target=_ref7.target,value=_ref7$target.value,name=_ref7$target.name;formFields=_this.state.formFields;formFields[name]=value;_context6.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x5){return _ref8.apply(this,arguments);};}();_this.handleCheckbox=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_ref9,item){var _ref9$target,value,name,_this$state3,selectedList,staffSortlist,stafflistCheckbox,filterList,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_ref9$target=_ref9.target,value=_ref9$target.value,name=_ref9$target.name;_this$state3=_this.state,selectedList=_this$state3.selectedList,staffSortlist=_this$state3.staffSortlist;stafflistCheckbox=staffSortlist.find(function(acc){return acc.value===item.value;});if(!stafflistCheckbox){_context7.next=7;break;}stafflistCheckbox[\"selected\"]=value;_context7.next=7;return _this.setState(_objectSpread(_objectSpread({},_this.state.staffSortlist),{},{stafflistCheckbox:stafflistCheckbox}));case 7:filterList=selectedList.find(function(account){return account.value===item.value;});if(!filterList){_context7.next=21;break;}filterList[\"value\"]=item.value;filterList[\"label\"]=item.label;filterList[\"selected\"]=value;if(!value){_context7.next=17;break;}_context7.next=15;return _this.setState(_objectSpread(_objectSpread({},_this.state.selectedList),{},{filterList:filterList}));case 15:_context7.next=19;break;case 17:_context7.next=19;return _this.setState(function(data){return{selectedList:data.selectedList.filter(function(x){return x.value!=item.value;})};});case 19:_context7.next=28;break;case 21:data={};data[\"value\"]=item.value;data[\"label\"]=item.label;data[\"selected\"]=value;selectedList.push(data);_context7.next=28;return _this.setState(_objectSpread(_objectSpread({},selectedList),{},{selectedList:selectedList}));case 28:if(!(_this.state.selectedList.length==_this.state.staffSortlist.length)){_context7.next=33;break;}_context7.next=31;return _this.setState({selectAll:true});case 31:_context7.next=35;break;case 33:_context7.next=35;return _this.setState({selectAll:false});case 35:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x6,_x7){return _ref10.apply(this,arguments);};}();_this.timeToMins=function(time){var b=time.split(\":\");return b[0]*60+ +b[1];};_this.timeFromMins=function(mins){function z(n){return(n<10?\"0\":\"\")+n;}var h=(mins/60|0)%24;var m=mins%60;return z(h)+\":\"+z(m);};_this.getHoursFromDate=function(date){var hour=date.getHours();var minute=date.getMinutes();var hours=hour>9?hour:\"0\"+hour;var minutes=minute>9?minute:\"0\"+minute;return hours+\":\"+minutes;};_this.addTimes=function(t0,t1){return _this.timeFromMins(_this.timeToMins(t0)+_this.timeToMins(t1));};_this.handleTimePick=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(name,value){var formFields,time,duration;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:formFields=_this.state.formFields;time=_this.getHoursFromDate(value);formFields[\"startTime\"]=time;if(time){formFields[\"endTime\"]=time;}duration=\"0:0\";if(formFields.duration!==\"\"&&formFields.duration!==null){duration=formFields.duration;}if(formFields.endTime!==\"\"){formFields[\"endTime\"]=_this.addTimes(time,duration);}_context8.next=9;return _this.setState({formFields:formFields});case 9:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x8,_x9){return _ref11.apply(this,arguments);};}();_this.handleDurationChange=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(_ref12){var _ref12$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_ref12$target=_ref12.target,value=_ref12$target.value,name=_ref12$target.name;formFields=_this.state.formFields;formFields[\"duration\"]=value;if(formFields.endTime){formFields[\"endTime\"]=_this.addTimes(formFields[\"startTime\"],value);}_context9.next=6;return _this.setState({formFields:formFields});case 6:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x10){return _ref13.apply(this,arguments);};}();_this.handleSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var _this$state4,formFields,selectedList,Employeelist,_iterator3,_step3,item,value,data;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this.setState({Employeelist:[]});case 2:_this$state4=_this.state,formFields=_this$state4.formFields,selectedList=_this$state4.selectedList,Employeelist=_this$state4.Employeelist;_iterator3=_createForOfIteratorHelper(selectedList);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){item=_step3.value;value=item.value;Employeelist.push(value);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState({Employeelist:Employeelist});if(_this.validator.allValid()){if(selectedList.length>0){data={start_date:dateFormat(new Date(formFields.startDate),\"yyyy-mm-dd\"),end_date:dateFormat(new Date(formFields.endDate),\"yyyy-mm-dd\"),appt_fr_time:formFields.startTime,appt_to_time:formFields.endTime,reason_id:formFields.reason,duration:formFields.duration,appt_remark:formFields.description,appt_isactive:formFields.active,emp_ids:Employeelist};_this.props.commonCreateApi(\"appointmentblock/\",data).then(/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(res){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(res.status===201){_this.handleDialog();_this.props.handleChange();}case 1:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x11){return _ref15.apply(this,arguments);};}());}else{Toast({type:\"error\",message:\"Please select Staff\"});}}else{_this.validator.showMessages();}case 7:case\"end\":return _context11.stop();}}},_callee11);}));_this.handleUpdate=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var _this$state5,formFields,Employeelist,appointmentId,data;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return _this.setState({Employeelist:[]});case 2:_this$state5=_this.state,formFields=_this$state5.formFields,Employeelist=_this$state5.Employeelist,appointmentId=_this$state5.appointmentId;Employeelist.push(formFields.staffId);_this.setState({Employeelist:Employeelist});if(_this.validator.allValid()){data={start_date:dateFormat(new Date(formFields.startDate),\"yyyy-mm-dd\"),end_date:dateFormat(new Date(formFields.endDate),\"yyyy-mm-dd\"),appt_fr_time:formFields.startTime,appt_to_time:formFields.endTime,reason_id:formFields.reason,duration:formFields.duration,appt_remark:formFields.description,appt_isactive:formFields.active,emp_ids:Employeelist};console.log(data,\"Blockupdatedata\");_this.props.commonPatchApi(\"appointmentblock/\".concat(appointmentId,\"/\"),data).then(/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(res){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(res.status===200){_this.handleDialog();_this.props.handleChange();}case 1:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x12){return _ref17.apply(this,arguments);};}());}else{_this.validator.showMessages();}case 6:case\"end\":return _context13.stop();}}},_callee13);}));_this.handleChange=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(_ref18){var _ref18$target,value,name,formFields,startdate,enddate;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_ref18$target=_ref18.target,value=_ref18$target.value,name=_ref18$target.name;formFields=_this.state.formFields;formFields[name]=value;if(name===\"startDate\"){formFields[\"endDate\"]=value;}if(name===\"endDate\"){startdate=new Date(dateFormat(formFields.startDate));enddate=new Date(dateFormat(value));if(enddate<startdate){Toast({type:\"error\",message:\"Please enter valid date\"});formFields[\"endDate\"]=formFields.startDate;}}_context14.next=7;return _this.setState({formFields:formFields});case 7:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x13){return _ref19.apply(this,arguments);};}();_this.handleLogClick=function(){debugger;_this.setState(function(prevState){return{isAppointmentLogModal:!prevState.isAppointmentLogModal};});};return _this;}_createClass(BlockPopupClass,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:this,validators:{date:{// name the rule\nmessage:\"The :attribute must be grater than today.\",rule:function rule(val,params,validator){var date1=new Date(dateFormat(new Date()));var date2=new Date(dateFormat(val));return date1.getTime()<=date2.getTime();},required:true// optional\n}}});this.setState({filterDate:this.props.filterDate});var duration=this.state.duration;this.props.getCommonApi(\"treatment/Duration/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator4=_createForOfIteratorHelper(data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var value=_step4.value;duration.push({value:value,label:value});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this2.setState({duration:duration});}});this.props.getCommonApi(\"blockreason/\").then(function(res){var reasonList=_this2.state.reasonList;var status=res.status,data=res.data;if(status===200){var _iterator5=_createForOfIteratorHelper(data),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var value=_step5.value;reasonList.push({value:value.id,label:value.b_reason});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_this2.setState({reasonList:reasonList});}});if(this.props.appointmentId&&this.props.appointmentId>0){this.getBlockedDetail(this.props.appointmentId);this.getStaffList();}else{this.getStaffList();}}},{key:\"render\",value:function render(){var _this3=this;var isOpenBlockModal=this.props.isOpenBlockModal;var _this$state6=this.state,staffSortlist=_this$state6.staffSortlist,formFields=_this$state6.formFields,duration=_this$state6.duration,selectAll=_this$state6.selectAll,reasonList=_this$state6.reasonList,appointmentId=_this$state6.appointmentId,isAppointmentLogModal=_this$state6.isAppointmentLogModal;return/*#__PURE__*/React.createElement(NormalModal,{className:\"select-category Block-popup\",style:{minWidth:\"55%\"},modal:isOpenBlockModal,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return _this3.handleDialog();},className:\"close\",src:closeIcon,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex px-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start col-9 h4\"},\"Block Schedule\",\" \"),appointmentId&&appointmentId>0?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end align-items-center bg-white col-3\",onClick:this.handleLogClick},/*#__PURE__*/React.createElement(\"img\",{src:logicon,alt:\"\",width:\"35px\",height:\"35px\"})):null),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-start p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Start Date\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},appointmentId&&appointmentId>0?/*#__PURE__*/React.createElement(NormalDate,{className:\"customer-name status py-1 col-12\",value:new Date(formFields.startDate),name:\"startDate\",type:\"date\",onChange:this.handleChange,minDate:new Date(),showDisabledMonthNavigation:true,disabled:true}):/*#__PURE__*/React.createElement(NormalDate,{className:\"customer-name status py-1 col-12\",value:new Date(formFields.startDate),name:\"startDate\",type:\"date\",onChange:this.handleChange,minDate:new Date(),showDisabledMonthNavigation:true})),this.validator.message(\"startDate\",formFields.startDate,\"required|date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"End Date\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},appointmentId&&appointmentId>0?/*#__PURE__*/React.createElement(NormalDate,{className:\"customer-name status py-1 col-12\",value:new Date(formFields.endDate),name:\"endDate\",type:\"date\",onChange:this.handleChange,minDate:new Date(),showDisabledMonthNavigation:true,disabled:true}):/*#__PURE__*/React.createElement(NormalDate,{className:\"customer-name status py-1 col-12\",value:new Date(formFields.endDate),name:\"endDate\",type:\"date\",onChange:this.handleChange,minDate:new Date(),showDisabledMonthNavigation:true})),this.validator.message(\"endDate\",formFields.endDate,\"required|date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Select Time\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleTimePick,label:\"newStartTime\",name:\"newStartTime\",timeOnly:true,dateFormat:\"hh:mm aa\",showTime:true,selected:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},\" \",/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Start Time\",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{label:\"startTime\",name:\"startTime\",value:formFields.startTime,className:\"customer-name status py-1 col-12\",disabled:true})),this.validator.message(\"startTime\",formFields.startTime,\"required\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},\" \",/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Duration\",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:duration,value:formFields.duration,name:\"duration\",onChange:function onChange(e){return _this3.handleDurationChange(e);},className:\"customer-name status py-1 col-12\"})),this.validator.message(\"duration\",formFields.duration,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},\" \",/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"End Time\",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{label:\"endTime\",name:\"endTime\",value:formFields.endTime,className:\"customer-name status py-1 col-12\",disabled:true})),this.validator.message(\"endTime\",formFields.endTime,\"required\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Reason\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:reasonList,value:formFields.reason//\n,name:\"reason\",onChange:this.handleChange,className:\"py-1\"}),this.validator.message(\"reason\",formFields.reason,\"required\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Description\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalTextarea,{value:formFields.description//\n,name:\"description\",onChange:this.handleChange,className:\"customer-name status py-1 col-12\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center p-3 mb-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mt-1 mb-2 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row table-header m-0 fw-500\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},\"Select All\",\" \",/*#__PURE__*/React.createElement(\"span\",null,\" \",appointmentId&&appointmentId>0?/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleSelectAllCheckbox(e);},value:selectAll,name:\"selectAll\",checked:selectAll,disabled:true}):/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleSelectAllCheckbox(e);},value:selectAll,name:\"selectAll\",checked:selectAll}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},\"Employee Code\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Display Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100 fw-500 multiselectList-height\"},staffSortlist&&staffSortlist.length>0?staffSortlist.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start m-0 table-body w-100 p-1 border border-secondary staff-sort-list \".concat(item.selected?\"active\":\"\",\" \"),key:item.value},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 text-center\"},appointmentId&&appointmentId>0?/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleCheckbox(e,item);},value:item.selected,name:\"selected\",checked:item.selected,disabled:true}):/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleCheckbox(e,item);},value:item.selected,name:\"selected\",checked:item.selected})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},item.emp_code),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},item.label));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},\"Active\",/*#__PURE__*/React.createElement(\"span\",null,\" \",appointmentId&&appointmentId>0?/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleActiveCheckbox(e);},value:formFields.active,name:\"active\",checked:formFields.active}):/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleActiveCheckbox(e);},value:formFields.active,name:\"active\",checked:formFields.active,disabled:true})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6\"},appointmentId&&appointmentId>0?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"w-100  p-0\",mainbg:true,className:\" fs-20 confirm\",label:\"Update\",outline:false,onClick:function onClick(){return _this3.handleUpdate();}}):/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"w-100  p-0\",mainbg:true,className:\" fs-20 confirm\",label:\"Save\",outline:false,onClick:function onClick(){return _this3.handleSubmit();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"w-100 p-0\",mainbg:true,className:\" fs-12 confirm\",label:\"Cancel\",outline:false,onClick:function onClick(){return _this3.handleDialog();}}))),isAppointmentLogModal?/*#__PURE__*/React.createElement(AppointmentLog,{isAppointmentLogModal:isAppointmentLogModal,handleLogClick:this.handleLogClick,appointmentId:appointmentId}):null);}}]);return BlockPopupClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomer:getCustomer,getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi},dispatch);};export var BlockPopup=connect(mapStateToProps,mapDispatchToProps)(BlockPopupClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/NewAppointment/NewListAppointment/modal/BlockPopup.js"],"names":["React","Component","NormalButton","NormalModal","NormalSelect","NormalDate","NormalDateTime","NormalCheckbox","NormalInput","NormalTextarea","closeIcon","getCustomer","getCommonApi","commonCreateApi","commonPatchApi","connect","bindActionCreators","Toast","dateFormat","SimpleReactValidator","logicon","AppointmentLog","BlockPopupClass","state","selectedList","filterDate","Date","staffSortlist","formFields","startDate","endDate","startTime","endTime","duration","reason","description","active","staffId","selectAll","reasonList","Employeelist","appointmentId","isAppointmentLogModal","handleDialog","setState","props","handleBlockDialog","getDateformat","inputdate","appt_Date","date","split","finaldate","getBlockedDetail","data","selected","then","key","status","start_date","end_date","appt_fr_time","appt_to_time","reason_id","appt_remark","emp_noid","getStaffList","value","selectedid","id","selectedstaff","push","label","display_name","emp_code","handleSelectAllCheckbox","target","name","item","handleActiveCheckbox","handleCheckbox","stafflistCheckbox","find","acc","filterList","account","filter","x","length","timeToMins","time","b","timeFromMins","mins","z","n","h","m","getHoursFromDate","hour","getHours","minute","getMinutes","hours","minutes","addTimes","t0","t1","handleTimePick","handleDurationChange","handleSubmit","validator","allValid","appt_isactive","emp_ids","res","handleChange","type","message","showMessages","handleUpdate","console","log","startdate","enddate","handleLogClick","prevState","element","autoForceUpdate","validators","rule","val","params","date1","date2","getTime","required","b_reason","isOpenBlockModal","minWidth","e","map","index","mapStateToProps","basicApptDetail","appointment","mapDispatchToProps","dispatch","BlockPopup"],"mappings":"opCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OACEC,YADF,CAEEC,WAFF,CAGEC,YAHF,CAIEC,UAJF,CAKEC,cALF,CAMEC,cANF,CAOEC,WAPF,CAQEC,cARF,KASO,kBATP,CAUA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,OACEC,WADF,CAEEC,YAFF,CAGEC,eAHF,CAIEC,cAJF,KAKO,sBALP,CAMA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,KAAT,KAAsB,eAAtB,CACA,OAASC,UAAT,KAA2B,yBAA3B,CACA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,OAASC,cAAT,KAA+B,kCAA/B,CAEA,UAAaC,CAAAA,eAAb,+VACEC,KADF,CACU,CACNC,YAAY,CAAE,EADR,CAENC,UAAU,CAAE,GAAIC,CAAAA,IAAJ,EAFN,CAGNC,aAAa,CAAE,EAHT,CAINC,UAAU,CAAE,CACVC,SAAS,CAAE,GAAIH,CAAAA,IAAJ,EADD,CAEVI,OAAO,CAAE,GAAIJ,CAAAA,IAAJ,EAFC,CAGVK,SAAS,CAAE,EAHD,CAIVC,OAAO,CAAE,EAJC,CAKVC,QAAQ,CAAE,EALA,CAMVC,MAAM,CAAE,EANE,CAOVC,WAAW,CAAE,EAPH,CAQVC,MAAM,CAAE,IARE,CASVC,OAAO,CAAE,CATC,CAJN,CAeNJ,QAAQ,CAAE,EAfJ,CAgBNK,SAAS,CAAE,KAhBL,CAiBNC,UAAU,CAAE,EAjBN,CAkBNC,YAAY,CAAE,EAlBR,CAmBNC,aAAa,CAAE,CAnBT,CAoBNC,qBAAqB,CAAE,KApBjB,CADV,OAuBEC,YAvBF,CAuBiB,UAAM,CACnB,MAAKC,QAAL,CAAc,CACZpB,YAAY,CAAE,EADF,CAEZgB,YAAY,CAAE,EAFF,CAGZZ,UAAU,CAAE,CACVC,SAAS,CAAE,GAAIH,CAAAA,IAAJ,EADD,CAEVI,OAAO,CAAE,GAAIJ,CAAAA,IAAJ,EAFC,CAGVK,SAAS,CAAE,EAHD,CAIVC,OAAO,CAAE,EAJC,CAKVC,QAAQ,CAAE,EALA,CAMVC,MAAM,CAAE,EANE,CAOVC,WAAW,CAAE,EAPH,CAHA,CAYZM,aAAa,CAAE,CAZH,CAAd,EAcA,MAAKI,KAAL,CAAWC,iBAAX,GACD,CAvCH,OA2FEC,aA3FF,CA2FkB,SAAAC,SAAS,CAAI,CAC3B,GAAIC,CAAAA,SAAS,CAAGD,SAAhB,CACA,GAAIE,CAAAA,IAAI,CAAGD,SAAS,CAACE,KAAV,CAAgB,GAAhB,CAAX,CACA,GAAIC,CAAAA,SAAS,CAAGF,IAAI,CAAC,CAAD,CAAJ,CAAU,GAAV,CAAgBA,IAAI,CAAC,CAAD,CAApB,CAA0B,GAA1B,CAAgCA,IAAI,CAAC,CAAD,CAApD,CACA,MAAOE,CAAAA,SAAP,CACD,CAhGH,OAkGEC,gBAlGF,0FAkGqB,kBAAMC,IAAN,+LACX,OAAKV,QAAL,CAAc,CAAEH,aAAa,CAAEa,IAAjB,CAAd,CADW,oBAE6B,MAAK/B,KAFlC,CAEXkB,aAFW,aAEXA,aAFW,CAEIb,UAFJ,aAEIA,UAFJ,CAEgB2B,QAFhB,aAEgBA,QAFhB,CAGjB,MAAKV,KAAL,CACGjC,YADH,4BACoC6B,aADpC,OAEGe,IAFH,2FAEQ,iBAAMC,GAAN,kIACEC,MADF,CACmBD,GADnB,CACEC,MADF,CACUJ,IADV,CACmBG,GADnB,CACUH,IADV,MAEAI,MAAM,GAAK,GAFX,2BAGF9B,UAAU,CAAC,WAAD,CAAV,CAA0B,MAAKmB,aAAL,CAAmBO,IAAI,CAACK,UAAxB,CAA1B,CACA/B,UAAU,CAAC,SAAD,CAAV,CAAwB,MAAKmB,aAAL,CAAmBO,IAAI,CAACM,QAAxB,CAAxB,CACAhC,UAAU,CAAC,WAAD,CAAV,CAA0B0B,IAAI,CAACO,YAA/B,CACAjC,UAAU,CAAC,SAAD,CAAV,CAAwB0B,IAAI,CAACQ,YAA7B,CACAlC,UAAU,CAAC,UAAD,CAAV,CAAyB0B,IAAI,CAACrB,QAA9B,CACAL,UAAU,CAAC,QAAD,CAAV,CAAuB0B,IAAI,CAACS,SAA5B,CACAnC,UAAU,CAAC,aAAD,CAAV,CAA4B0B,IAAI,CAACU,WAAjC,CACApC,UAAU,CAAC,SAAD,CAAV,CAAwB0B,IAAI,CAACW,QAA7B,CAVE,uBAWI,OAAKrB,QAAL,CAAc,CAAEhB,UAAU,CAAVA,UAAF,CAAd,CAXJ,wDAFR,kEAHiB,wDAlGrB,qEAsHEsC,YAtHF,sEAsHiB,oNACP,OAAKtB,QAAL,CAAc,CAAEjB,aAAa,CAAE,EAAjB,CAAd,CADO,qBAEmC,MAAKJ,KAFxC,CAEPE,UAFO,cAEPA,UAFO,CAEKE,aAFL,cAEKA,aAFL,CAEoBC,UAFpB,cAEoBA,UAFpB,CAGb,MAAKiB,KAAL,CACGjC,YADH,iCAE6BM,UAAU,CAACO,UAAD,CAAa,YAAb,CAFvC,GAIG+B,IAJH,2FAIQ,kBAAMC,GAAN,qLACEC,MADF,CACmBD,GADnB,CACEC,MADF,CACUJ,IADV,CACmBG,GADnB,CACUH,IADV,MAEAI,MAAM,GAAK,GAFX,gEAGgBJ,IAHhB,MAGF,+CAAwB,CAAfa,KAAe,aAClBC,UADkB,CACLD,KAAK,CAACE,EADD,CAElBC,aAFkB,CAEF,KAFE,CAGtB,GAAIF,UAAU,GAAKxC,UAAU,CAACS,OAA9B,CAAuC,CACrCiC,aAAa,CAAG,IAAhB,CACD,CAFD,IAEO,CACLA,aAAa,CAAG,KAAhB,CACD,CACD3C,aAAa,CAAC4C,IAAd,CAAmB,CACjBJ,KAAK,CAAEA,KAAK,CAACE,EADI,CAEjBG,KAAK,CAAEL,KAAK,CAACM,YAFI,CAGjBC,QAAQ,CAAEP,KAAK,CAACO,QAHC,CAIjBnB,QAAQ,CAAEe,aAJO,CAAnB,EAMD,CAjBC,4EAkBI,OAAK1B,QAAL,CAAc,CAAEjB,aAAa,CAAbA,aAAF,CAAd,CAlBJ,yDAJR,kEAHa,wDAtHjB,SAoJEgD,uBApJF,2FAoJ4B,iOAASC,MAAT,CAAmBT,KAAnB,cAAmBA,KAAnB,CAA0BU,IAA1B,cAA0BA,IAA1B,CAClBlD,aADkB,CACA,MAAKJ,KADL,CAClBI,aADkB,wBAElB,OAAKiB,QAAL,CAAc,CAAEN,SAAS,CAAE6B,KAAb,CAAd,CAFkB,8CAGPxC,aAHO,mGAGfmD,IAHe,cAItBA,IAAI,CAAC,UAAD,CAAJ,CAAmBX,KAAnB,CAJsB,wBAKhB,OAAKvB,QAAL,gCAAmB,MAAKrB,KAAL,CAAWI,aAA9B,MAA6CmD,IAAI,CAAJA,IAA7C,GALgB,6PAOlB,OAAKlC,QAAL,CAAc,CAAEjB,aAAa,CAAbA,aAAF,CAAd,CAPkB,aAQpBwC,KARoB,mDAShB,OAAKvB,QAAL,CAAc,CAAEpB,YAAY,CAAEG,aAAhB,CAAd,CATgB,iEAWhB,OAAKiB,QAAL,CAAc,CAAEpB,YAAY,CAAE,EAAhB,CAAd,CAXgB,8EApJ5B,uEAkKEuD,oBAlKF,2FAkKyB,uMAASH,MAAT,CAAmBT,KAAnB,cAAmBA,KAAnB,CAA0BU,IAA1B,cAA0BA,IAA1B,CACfjD,UADe,CACA,MAAKL,KADL,CACfK,UADe,CAErBA,UAAU,CAACiD,IAAD,CAAV,CAAmBV,KAAnB,CAFqB,uBAGf,OAAKvB,QAAL,CAAc,CAAEhB,UAAU,CAAVA,UAAF,CAAd,CAHe,yDAlKzB,uEAwKEoD,cAxKF,4FAwKmB,wBAAoCF,IAApC,+OAASF,MAAT,CAAmBT,KAAnB,cAAmBA,KAAnB,CAA0BU,IAA1B,cAA0BA,IAA1B,cACuB,MAAKtD,KAD5B,CACTC,YADS,cACTA,YADS,CACKG,aADL,cACKA,aADL,CAGXsD,iBAHW,CAGStD,aAAa,CAACuD,IAAd,CAAmB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAAChB,KAAJ,GAAcW,IAAI,CAACX,KAAvB,EAAtB,CAHT,KAIXc,iBAJW,0BAKbA,iBAAiB,CAAC,UAAD,CAAjB,CAAgCd,KAAhC,CALa,uBAMP,OAAKvB,QAAL,gCAAmB,MAAKrB,KAAL,CAAWI,aAA9B,MAA6CsD,iBAAiB,CAAjBA,iBAA7C,GANO,QASXG,UATW,CASE5D,YAAY,CAAC0D,IAAb,CAAkB,SAAAG,OAAO,QAAIA,CAAAA,OAAO,CAAClB,KAAR,GAAkBW,IAAI,CAACX,KAA3B,EAAzB,CATF,KAUXiB,UAVW,2BAWbA,UAAU,CAAC,OAAD,CAAV,CAAsBN,IAAI,CAACX,KAA3B,CACAiB,UAAU,CAAC,OAAD,CAAV,CAAsBN,IAAI,CAACN,KAA3B,CACAY,UAAU,CAAC,UAAD,CAAV,CAAyBjB,KAAzB,CAba,IAcTA,KAdS,mDAeL,OAAKvB,QAAL,gCAAmB,MAAKrB,KAAL,CAAWC,YAA9B,MAA4C4D,UAAU,CAAVA,UAA5C,GAfK,iEAiBL,OAAKxC,QAAL,CAAc,SAAAU,IAAI,QAAK,CAC3B9B,YAAY,CAAE8B,IAAI,CAAC9B,YAAL,CAAkB8D,MAAlB,CAAyB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACpB,KAAF,EAAWW,IAAI,CAACX,KAApB,EAA1B,CADa,CAAL,EAAlB,CAjBK,yCAsBTb,IAtBS,CAsBF,EAtBE,CAuBbA,IAAI,CAAC,OAAD,CAAJ,CAAgBwB,IAAI,CAACX,KAArB,CACAb,IAAI,CAAC,OAAD,CAAJ,CAAgBwB,IAAI,CAACN,KAArB,CACAlB,IAAI,CAAC,UAAD,CAAJ,CAAmBa,KAAnB,CACA3C,YAAY,CAAC+C,IAAb,CAAkBjB,IAAlB,EA1Ba,wBA2BP,OAAKV,QAAL,gCAAmBpB,YAAnB,MAAiCA,YAAY,CAAZA,YAAjC,GA3BO,cA8BX,MAAKD,KAAL,CAAWC,YAAX,CAAwBgE,MAAxB,EAAkC,MAAKjE,KAAL,CAAWI,aAAX,CAAyB6D,MA9BhD,oDA+BP,OAAK5C,QAAL,CAAc,CAAEN,SAAS,CAAE,IAAb,CAAd,CA/BO,iEAiCP,OAAKM,QAAL,CAAc,CAAEN,SAAS,CAAE,KAAb,CAAd,CAjCO,0DAxKnB,4EA4MEmD,UA5MF,CA4Me,SAAAC,IAAI,CAAI,CACnB,GAAIC,CAAAA,CAAC,CAAGD,IAAI,CAACvC,KAAL,CAAW,GAAX,CAAR,CACA,MAAOwC,CAAAA,CAAC,CAAC,CAAD,CAAD,CAAO,EAAP,CAAY,EAACA,CAAC,CAAC,CAAD,CAArB,CACD,CA/MH,OAmNEC,YAnNF,CAmNiB,SAAAC,IAAI,CAAI,CACrB,QAASC,CAAAA,CAAT,CAAWC,CAAX,CAAc,CACZ,MAAO,CAACA,CAAC,CAAG,EAAJ,CAAS,GAAT,CAAe,EAAhB,EAAsBA,CAA7B,CACD,CACD,GAAIC,CAAAA,CAAC,CAAG,CAAEH,IAAI,CAAG,EAAR,CAAc,CAAf,EAAoB,EAA5B,CACA,GAAII,CAAAA,CAAC,CAAGJ,IAAI,CAAG,EAAf,CACA,MAAOC,CAAAA,CAAC,CAACE,CAAD,CAAD,CAAO,GAAP,CAAaF,CAAC,CAACG,CAAD,CAArB,CACD,CA1NH,OA4NEC,gBA5NF,CA4NqB,SAAAhD,IAAI,CAAI,CACzB,GAAIiD,CAAAA,IAAI,CAAGjD,IAAI,CAACkD,QAAL,EAAX,CACA,GAAIC,CAAAA,MAAM,CAAGnD,IAAI,CAACoD,UAAL,EAAb,CACA,GAAIC,CAAAA,KAAK,CAAGJ,IAAI,CAAG,CAAP,CAAWA,IAAX,CAAkB,IAAMA,IAApC,CACA,GAAIK,CAAAA,OAAO,CAAGH,MAAM,CAAG,CAAT,CAAaA,MAAb,CAAsB,IAAMA,MAA1C,CACA,MAAOE,CAAAA,KAAK,CAAG,GAAR,CAAcC,OAArB,CACD,CAlOH,OAmOEC,QAnOF,CAmOa,SAACC,EAAD,CAAKC,EAAL,CAAY,CACrB,MAAO,OAAKf,YAAL,CAAkB,MAAKH,UAAL,CAAgBiB,EAAhB,EAAsB,MAAKjB,UAAL,CAAgBkB,EAAhB,CAAxC,CAAP,CACD,CArOH,OAsOEC,cAtOF,4FAsOmB,kBAAO/B,IAAP,CAAaV,KAAb,mJACTvC,UADS,CACM,MAAKL,KADX,CACTK,UADS,CAEX8D,IAFW,CAEJ,MAAKQ,gBAAL,CAAsB/B,KAAtB,CAFI,CAGfvC,UAAU,CAAC,WAAD,CAAV,CAA0B8D,IAA1B,CACA,GAAIA,IAAJ,CAAU,CACR9D,UAAU,CAAC,SAAD,CAAV,CAAwB8D,IAAxB,CACD,CACGzD,QAPW,CAOA,KAPA,CAQf,GAAIL,UAAU,CAACK,QAAX,GAAwB,EAAxB,EAA8BL,UAAU,CAACK,QAAX,GAAwB,IAA1D,CAAgE,CAC9DA,QAAQ,CAAGL,UAAU,CAACK,QAAtB,CACD,CACD,GAAIL,UAAU,CAACI,OAAX,GAAuB,EAA3B,CAA+B,CAC7BJ,UAAU,CAAC,SAAD,CAAV,CAAwB,MAAK6E,QAAL,CAAcf,IAAd,CAAoBzD,QAApB,CAAxB,CACD,CAbc,uBAcT,OAAKW,QAAL,CAAc,CAClBhB,UAAU,CAAVA,UADkB,CAAd,CAdS,yDAtOnB,4EAyPEiF,oBAzPF,4FAyPyB,2MAASjC,MAAT,CAAmBT,KAAnB,eAAmBA,KAAnB,CAA0BU,IAA1B,eAA0BA,IAA1B,CACfjD,UADe,CACA,MAAKL,KADL,CACfK,UADe,CAErBA,UAAU,CAAC,UAAD,CAAV,CAAyBuC,KAAzB,CACA,GAAIvC,UAAU,CAACI,OAAf,CAAwB,CACtBJ,UAAU,CAAC,SAAD,CAAV,CAAwB,MAAK6E,QAAL,CAAc7E,UAAU,CAAC,WAAD,CAAxB,CAAuCuC,KAAvC,CAAxB,CACD,CALoB,uBAMf,OAAKvB,QAAL,CAAc,CAClBhB,UAAU,CAAVA,UADkB,CAAd,CANe,yDAzPzB,yEAoQEkF,YApQF,sEAoQiB,6PACP,OAAKlE,QAAL,CAAc,CAAEJ,YAAY,CAAE,EAAhB,CAAd,CADO,qBAEoC,MAAKjB,KAFzC,CAEPK,UAFO,cAEPA,UAFO,CAEKJ,YAFL,cAEKA,YAFL,CAEmBgB,YAFnB,cAEmBA,YAFnB,uCAGIhB,YAHJ,MAGb,kDAA+B,CAAtBsD,IAAsB,cACzBX,KADyB,CACjBW,IAAI,CAACX,KADY,CAE7B3B,YAAY,CAAC+B,IAAb,CAAkBJ,KAAlB,EACD,CANY,uDAOb,MAAKvB,QAAL,CAAc,CAAEJ,YAAY,CAAZA,YAAF,CAAd,EACA,GAAI,MAAKuE,SAAL,CAAeC,QAAf,EAAJ,CAA+B,CAC7B,GAAIxF,YAAY,CAACgE,MAAb,CAAsB,CAA1B,CAA6B,CACvBlC,IADuB,CAChB,CACTK,UAAU,CAAEzC,UAAU,CAAC,GAAIQ,CAAAA,IAAJ,CAASE,UAAU,CAACC,SAApB,CAAD,CAAiC,YAAjC,CADb,CAET+B,QAAQ,CAAE1C,UAAU,CAAC,GAAIQ,CAAAA,IAAJ,CAASE,UAAU,CAACE,OAApB,CAAD,CAA+B,YAA/B,CAFX,CAGT+B,YAAY,CAAEjC,UAAU,CAACG,SAHhB,CAIT+B,YAAY,CAAElC,UAAU,CAACI,OAJhB,CAKT+B,SAAS,CAAEnC,UAAU,CAACM,MALb,CAMTD,QAAQ,CAAEL,UAAU,CAACK,QANZ,CAOT+B,WAAW,CAAEpC,UAAU,CAACO,WAPf,CAQT8E,aAAa,CAAErF,UAAU,CAACQ,MARjB,CAST8E,OAAO,CAAE1E,YATA,CADgB,CAa3B,MAAKK,KAAL,CACGhC,eADH,qBACwCyC,IADxC,EAEGE,IAFH,4FAEQ,mBAAM2D,GAAN,0HACJ,GAAIA,GAAG,CAACzD,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAKf,YAAL,GACA,MAAKE,KAAL,CAAWuE,YAAX,GACD,CAJG,0DAFR,oEAQD,CArBD,IAqBO,CACLnG,KAAK,CAAC,CAAEoG,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAE,qBAA1B,CAAD,CAAL,CACD,CACF,CAzBD,IAyBO,CACL,MAAKP,SAAL,CAAeQ,YAAf,GACD,CAnCY,0DApQjB,SAySEC,YAzSF,sEAySiB,iOACP,OAAK5E,QAAL,CAAc,CAAEJ,YAAY,CAAE,EAAhB,CAAd,CADO,qBAEqC,MAAKjB,KAF1C,CAEPK,UAFO,cAEPA,UAFO,CAEKY,YAFL,cAEKA,YAFL,CAEmBC,aAFnB,cAEmBA,aAFnB,CAGbD,YAAY,CAAC+B,IAAb,CAAkB3C,UAAU,CAACS,OAA7B,EACA,MAAKO,QAAL,CAAc,CAAEJ,YAAY,CAAZA,YAAF,CAAd,EACA,GAAI,MAAKuE,SAAL,CAAeC,QAAf,EAAJ,CAA+B,CACzB1D,IADyB,CAClB,CACTK,UAAU,CAAEzC,UAAU,CAAC,GAAIQ,CAAAA,IAAJ,CAASE,UAAU,CAACC,SAApB,CAAD,CAAiC,YAAjC,CADb,CAET+B,QAAQ,CAAE1C,UAAU,CAAC,GAAIQ,CAAAA,IAAJ,CAASE,UAAU,CAACE,OAApB,CAAD,CAA+B,YAA/B,CAFX,CAGT+B,YAAY,CAAEjC,UAAU,CAACG,SAHhB,CAIT+B,YAAY,CAAElC,UAAU,CAACI,OAJhB,CAKT+B,SAAS,CAAEnC,UAAU,CAACM,MALb,CAMTD,QAAQ,CAAEL,UAAU,CAACK,QANZ,CAOT+B,WAAW,CAAEpC,UAAU,CAACO,WAPf,CAQT8E,aAAa,CAAErF,UAAU,CAACQ,MARjB,CAST8E,OAAO,CAAE1E,YATA,CADkB,CAY7BiF,OAAO,CAACC,GAAR,CAAYpE,IAAZ,CAAkB,iBAAlB,EACA,MAAKT,KAAL,CACG/B,cADH,4BACsC2B,aADtC,MACwDa,IADxD,EAEGE,IAFH,4FAEQ,mBAAM2D,GAAN,0HACJ,GAAIA,GAAG,CAACzD,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAKf,YAAL,GACA,MAAKE,KAAL,CAAWuE,YAAX,GACD,CAJG,0DAFR,oEAQD,CArBD,IAqBO,CACL,MAAKL,SAAL,CAAeQ,YAAf,GACD,CA5BY,0DAzSjB,SAuUEH,YAvUF,4FAuUiB,kOAASxC,MAAT,CAAmBT,KAAnB,eAAmBA,KAAnB,CAA0BU,IAA1B,eAA0BA,IAA1B,CACPjD,UADO,CACQ,MAAKL,KADb,CACPK,UADO,CAEbA,UAAU,CAACiD,IAAD,CAAV,CAAmBV,KAAnB,CAEA,GAAIU,IAAI,GAAK,WAAb,CAA0B,CACxBjD,UAAU,CAAC,SAAD,CAAV,CAAwBuC,KAAxB,CACD,CAED,GAAIU,IAAI,GAAK,SAAb,CAAwB,CAClB8C,SADkB,CACN,GAAIjG,CAAAA,IAAJ,CAASR,UAAU,CAACU,UAAU,CAACC,SAAZ,CAAnB,CADM,CAElB+F,OAFkB,CAER,GAAIlG,CAAAA,IAAJ,CAASR,UAAU,CAACiD,KAAD,CAAnB,CAFQ,CAGtB,GAAIyD,OAAO,CAAGD,SAAd,CAAyB,CACvB1G,KAAK,CAAC,CAAEoG,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAE,yBAA1B,CAAD,CAAL,CACA1F,UAAU,CAAC,SAAD,CAAV,CAAwBA,UAAU,CAACC,SAAnC,CACD,CACF,CAfY,wBAiBP,OAAKe,QAAL,CAAc,CAClBhB,UAAU,CAAVA,UADkB,CAAd,CAjBO,2DAvUjB,yEA6VEiG,cA7VF,CA6VmB,UAAM,CACrB,SACA,MAAKjF,QAAL,CAAc,SAAAkF,SAAS,QAAK,CAC1BpF,qBAAqB,CAAE,CAACoF,SAAS,CAACpF,qBADR,CAAL,EAAvB,EAGD,CAlWH,6EAwCE,6BAAqB,iBACnB,KAAKqE,SAAL,CAAiB,GAAI5F,CAAAA,oBAAJ,CAAyB,CACxC4G,OAAO,CAAE,iBAAAT,OAAO,qBACd,4BAAM,SAAS,CAAC,wCAAhB,EACGA,OADH,CADc,EADwB,CAMxCU,eAAe,CAAE,IANuB,CAOxCC,UAAU,CAAE,CACV/E,IAAI,CAAE,CACJ;AACAoE,OAAO,CAAE,2CAFL,CAGJY,IAAI,CAAE,cAACC,GAAD,CAAMC,MAAN,CAAcrB,SAAd,CAA4B,CAChC,GAAIsB,CAAAA,KAAK,CAAG,GAAI3G,CAAAA,IAAJ,CAASR,UAAU,CAAC,GAAIQ,CAAAA,IAAJ,EAAD,CAAnB,CAAZ,CACA,GAAI4G,CAAAA,KAAK,CAAG,GAAI5G,CAAAA,IAAJ,CAASR,UAAU,CAACiH,GAAD,CAAnB,CAAZ,CACA,MAAOE,CAAAA,KAAK,CAACE,OAAN,IAAmBD,KAAK,CAACC,OAAN,EAA1B,CACD,CAPG,CAQJC,QAAQ,CAAE,IAAM;AARZ,CADI,CAP4B,CAAzB,CAAjB,CAoBA,KAAK5F,QAAL,CAAc,CAAEnB,UAAU,CAAE,KAAKoB,KAAL,CAAWpB,UAAzB,CAAd,EAEA,GAAMQ,CAAAA,QAAN,CAAmB,KAAKV,KAAxB,CAAMU,QAAN,CACA,KAAKY,KAAL,CAAWjC,YAAX,wBAA+C4C,IAA/C,CAAoD,SAAAC,GAAG,CAAI,CACzD,GAAMC,CAAAA,MAAN,CAAuBD,GAAvB,CAAMC,MAAN,CAAcJ,IAAd,CAAuBG,GAAvB,CAAcH,IAAd,CACA,GAAII,MAAM,GAAK,GAAf,CAAoB,2CACAJ,IADA,aAClB,kDAAwB,IAAfa,CAAAA,KAAe,cACtBlC,QAAQ,CAACsC,IAAT,CAAc,CAAEJ,KAAK,CAAEA,KAAT,CAAgBK,KAAK,CAAEL,KAAvB,CAAd,EACD,CAHiB,uDAIlB,MAAI,CAACvB,QAAL,CAAc,CAAEX,QAAQ,CAARA,QAAF,CAAd,EACD,CACF,CARD,EASA,KAAKY,KAAL,CAAWjC,YAAX,CAAwB,cAAxB,EAAwC4C,IAAxC,CAA6C,SAAA2D,GAAG,CAAI,CAClD,GAAM5E,CAAAA,UAAN,CAAqB,MAAI,CAAChB,KAA1B,CAAMgB,UAAN,CACA,GAAMmB,CAAAA,MAAN,CAAuByD,GAAvB,CAAMzD,MAAN,CAAcJ,IAAd,CAAuB6D,GAAvB,CAAc7D,IAAd,CACA,GAAII,MAAM,GAAK,GAAf,CAAoB,2CACAJ,IADA,aAClB,kDAAwB,IAAfa,CAAAA,KAAe,cACtB5B,UAAU,CAACgC,IAAX,CAAgB,CAAEJ,KAAK,CAAEA,KAAK,CAACE,EAAf,CAAmBG,KAAK,CAAEL,KAAK,CAACsE,QAAhC,CAAhB,EACD,CAHiB,uDAIlB,MAAI,CAAC7F,QAAL,CAAc,CAAEL,UAAU,CAAVA,UAAF,CAAd,EACD,CACF,CATD,EAUA,GAAI,KAAKM,KAAL,CAAWJ,aAAX,EAA4B,KAAKI,KAAL,CAAWJ,aAAX,CAA2B,CAA3D,CAA8D,CAC5D,KAAKY,gBAAL,CAAsB,KAAKR,KAAL,CAAWJ,aAAjC,EACA,KAAKyB,YAAL,GACD,CAHD,IAGO,CACL,KAAKA,YAAL,GACD,CACF,CAzFH,sBAoWE,iBAAS,iBACP,GAAMwE,CAAAA,gBAAN,CAA2B,KAAK7F,KAAhC,CAAM6F,gBAAN,CACA,iBAQI,KAAKnH,KART,CACEI,aADF,cACEA,aADF,CAEEC,UAFF,cAEEA,UAFF,CAGEK,QAHF,cAGEA,QAHF,CAIEK,SAJF,cAIEA,SAJF,CAKEC,UALF,cAKEA,UALF,CAMEE,aANF,cAMEA,aANF,CAOEC,qBAPF,cAOEA,qBAPF,CASA,mBACE,oBAAC,WAAD,EACE,SAAS,8BADX,CAEE,KAAK,CAAE,CAAEiG,QAAQ,CAAE,KAAZ,CAFT,CAGE,KAAK,CAAED,gBAHT,CAIE,WAAW,CAAE,KAAK/F,YAJpB,eAME,2BAAK,SAAS,CAAC,4BAAf,eACE,2BACE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACA,YAAL,EAAN,EADX,CAEE,SAAS,CAAC,OAFZ,CAGE,GAAG,CAAEjC,SAHP,CAIE,GAAG,CAAC,EAJN,EADF,CANF,cAeE,2BAAK,SAAS,CAAC,aAAf,eACE,2BAAK,SAAS,CAAC,uCAAf,mBACiB,GADjB,CADF,CAIG+B,aAAa,EAAIA,aAAa,CAAG,CAAjC,cACC,2BACE,SAAS,CAAC,8DADZ,CAEE,OAAO,CAAE,KAAKoF,cAFhB,eAIE,2BAAK,GAAG,CAAEzG,OAAV,CAAmB,GAAG,CAAC,EAAvB,CAA0B,KAAK,CAAC,MAAhC,CAAuC,MAAM,CAAC,MAA9C,EAJF,CADD,CAOG,IAXN,CAfF,cA6BE,2BAAK,SAAS,CAAC,4CAAf,eACE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,eACa,GADb,cAEE,4BAAM,SAAS,CAAC,yCAAhB,MAFF,CADF,cAKE,2BAAK,SAAS,CAAC,aAAf,EACGqB,aAAa,EAAIA,aAAa,CAAG,CAAjC,cACC,oBAAC,UAAD,EACE,SAAS,CAAC,kCADZ,CAEE,KAAK,CAAE,GAAIf,CAAAA,IAAJ,CAASE,UAAU,CAACC,SAApB,CAFT,CAGE,IAAI,CAAC,WAHP,CAIE,IAAI,CAAC,MAJP,CAKE,QAAQ,CAAE,KAAKuF,YALjB,CAME,OAAO,CAAE,GAAI1F,CAAAA,IAAJ,EANX,CAOE,2BAA2B,KAP7B,CAQE,QAAQ,KARV,EADD,cAYC,oBAAC,UAAD,EACE,SAAS,CAAC,kCADZ,CAEE,KAAK,CAAE,GAAIA,CAAAA,IAAJ,CAASE,UAAU,CAACC,SAApB,CAFT,CAGE,IAAI,CAAC,WAHP,CAIE,IAAI,CAAC,MAJP,CAKE,QAAQ,CAAE,KAAKuF,YALjB,CAME,OAAO,CAAE,GAAI1F,CAAAA,IAAJ,EANX,CAOE,2BAA2B,KAP7B,EAbJ,CALF,CA6BG,KAAKqF,SAAL,CAAeO,OAAf,CACC,WADD,CAEC1F,UAAU,CAACC,SAFZ,CAGC,eAHD,CA7BH,CADF,cAoCE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,aACW,GADX,cAEE,4BAAM,SAAS,CAAC,yCAAhB,MAFF,CADF,cAKE,2BAAK,SAAS,CAAC,EAAf,EACGY,aAAa,EAAIA,aAAa,CAAG,CAAjC,cACC,oBAAC,UAAD,EACE,SAAS,CAAC,kCADZ,CAEE,KAAK,CAAE,GAAIf,CAAAA,IAAJ,CAASE,UAAU,CAACE,OAApB,CAFT,CAGE,IAAI,CAAC,SAHP,CAIE,IAAI,CAAC,MAJP,CAKE,QAAQ,CAAE,KAAKsF,YALjB,CAME,OAAO,CAAE,GAAI1F,CAAAA,IAAJ,EANX,CAOE,2BAA2B,KAP7B,CAQE,QAAQ,KARV,EADD,cAYC,oBAAC,UAAD,EACE,SAAS,CAAC,kCADZ,CAEE,KAAK,CAAE,GAAIA,CAAAA,IAAJ,CAASE,UAAU,CAACE,OAApB,CAFT,CAGE,IAAI,CAAC,SAHP,CAIE,IAAI,CAAC,MAJP,CAKE,QAAQ,CAAE,KAAKsF,YALjB,CAME,OAAO,CAAE,GAAI1F,CAAAA,IAAJ,EANX,CAOE,2BAA2B,KAP7B,EAbJ,CALF,CA6BG,KAAKqF,SAAL,CAAeO,OAAf,CACC,SADD,CAEC1F,UAAU,CAACE,OAFZ,CAGC,eAHD,CA7BH,CApCF,cAuEE,2BAAK,SAAS,CAAC,sBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,gBADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,cAAD,EACE,QAAQ,CAAE,KAAK8E,cADjB,CAEE,KAAK,CAAC,cAFR,CAGE,IAAI,CAAC,cAHP,CAIE,QAAQ,CAAE,IAJZ,CAKE,UAAU,CAAC,UALb,CAME,QAAQ,CAAE,IANZ,CAOE,QAAQ,CAAE,IAPZ,EADF,CAJF,CADF,cAiBE,2BAAK,SAAS,CAAC,iBAAf,EACG,GADH,cAEE,6BAAO,SAAS,CAAC,yCAAjB,4BAEE,4BAAM,SAAS,CAAC,yCAAhB,MAFF,CAFF,cAQE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,KAAK,CAAC,WADR,CAEE,IAAI,CAAC,WAFP,CAGE,KAAK,CAAEhF,UAAU,CAACG,SAHpB,CAIE,SAAS,CAAC,kCAJZ,CAKE,QAAQ,KALV,EADF,CARF,CAiBG,KAAKgF,SAAL,CAAeO,OAAf,CACC,WADD,CAEC1F,UAAU,CAACG,SAFZ,CAGC,UAHD,CAjBH,CAjBF,CADF,CAvEF,cAkHE,2BAAK,SAAS,CAAC,sBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,EACG,GADH,cAEE,6BAAO,SAAS,CAAC,yCAAjB,0BAEE,4BAAM,SAAS,CAAC,yCAAhB,MAFF,CAFF,cAQE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,YAAD,EACE,OAAO,CAAEE,QADX,CAEE,KAAK,CAAEL,UAAU,CAACK,QAFpB,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAE,kBAAA2G,CAAC,QAAI,CAAA,MAAI,CAAC/B,oBAAL,CAA0B+B,CAA1B,CAAJ,EAJb,CAKE,SAAS,CAAC,kCALZ,EADF,CARF,CAiBG,KAAK7B,SAAL,CAAeO,OAAf,CACC,UADD,CAEC1F,UAAU,CAACK,QAFZ,CAGC,UAHD,CAjBH,CADF,cAwBE,2BAAK,SAAS,CAAC,iBAAf,EACG,GADH,cAEE,6BAAO,SAAS,CAAC,yCAAjB,0BAEE,4BAAM,SAAS,CAAC,yCAAhB,MAFF,CAFF,cAQE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,KAAK,CAAC,SADR,CAEE,IAAI,CAAC,SAFP,CAGE,KAAK,CAAEL,UAAU,CAACI,OAHpB,CAIE,SAAS,CAAC,kCAJZ,CAKE,QAAQ,KALV,EADF,CARF,CAiBG,KAAK+E,SAAL,CAAeO,OAAf,CACC,SADD,CAEC1F,UAAU,CAACI,OAFZ,CAGC,UAHD,CAjBH,CAxBF,CADF,CAlHF,cAoKE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,WACS,GADT,cAEE,4BAAM,SAAS,CAAC,yCAAhB,MAFF,CADF,cAKE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,YAAD,EACE,OAAO,CAAEO,UADX,CAEE,KAAK,CAAEX,UAAU,CAACM,MAAQ;AAF5B,CAGE,IAAI,CAAC,QAHP,CAIE,QAAQ,CAAE,KAAKkF,YAJjB,CAKE,SAAS,CAAC,MALZ,EADF,CAQG,KAAKL,SAAL,CAAeO,OAAf,CAAuB,QAAvB,CAAiC1F,UAAU,CAACM,MAA5C,CAAoD,UAApD,CARH,CALF,CApKF,cAoLE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,gBADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,cAAD,EACE,KAAK,CAAEN,UAAU,CAACO,WAAa;AADjC,CAEE,IAAI,CAAC,aAFP,CAGE,QAAQ,CAAE,KAAKiF,YAHjB,CAIE,SAAS,CAAC,kCAJZ,EADF,CAJF,CApLF,CA7BF,cAgOE,2BAAK,SAAS,CAAC,wCAAf,eACE,2BAAK,SAAS,CAAC,uBAAf,eACE,2BAAK,SAAS,CAAC,6BAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACa,GADb,cAEE,gCACG,GADH,CAEG3E,aAAa,EAAIA,aAAa,CAAG,CAAjC,cACC,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAAmG,CAAC,QAAI,CAAA,MAAI,CAACjE,uBAAL,CAA6BiE,CAA7B,CAAJ,EADb,CAEE,KAAK,CAAEtG,SAFT,CAGE,IAAI,CAAC,WAHP,CAIE,OAAO,CAAEA,SAJX,CAKE,QAAQ,KALV,EADD,cASC,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAAsG,CAAC,QAAI,CAAA,MAAI,CAACjE,uBAAL,CAA6BiE,CAA7B,CAAJ,EADb,CAEE,KAAK,CAAEtG,SAFT,CAGE,IAAI,CAAC,WAHP,CAIE,OAAO,CAAEA,SAJX,EAXJ,CAFF,CADF,cAuBE,2BAAK,SAAS,CAAC,OAAf,kBAvBF,cAwBE,2BAAK,SAAS,CAAC,OAAf,iBAxBF,CADF,cA2BE,2BAAK,SAAS,CAAC,oDAAf,EACGX,aAAa,EAAIA,aAAa,CAAC6D,MAAd,CAAuB,CAAxC,CACC7D,aAAa,CAACkH,GAAd,CAAkB,SAAC/D,IAAD,CAAOgE,KAAP,CAAiB,CACjC,mBACE,2BACE,SAAS,yGACPhE,IAAI,CAACvB,QAAL,CAAgB,QAAhB,CAA2B,EADpB,KADX,CAIE,GAAG,CAAEuB,IAAI,CAACX,KAJZ,eAME,2BAAK,SAAS,CAAC,mBAAf,EACG1B,aAAa,EAAIA,aAAa,CAAG,CAAjC,cACC,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAAmG,CAAC,QAAI,CAAA,MAAI,CAAC5D,cAAL,CAAoB4D,CAApB,CAAuB9D,IAAvB,CAAJ,EADb,CAEE,KAAK,CAAEA,IAAI,CAACvB,QAFd,CAGE,IAAI,CAAC,UAHP,CAIE,OAAO,CAAEuB,IAAI,CAACvB,QAJhB,CAKE,QAAQ,KALV,EADD,cASC,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAAqF,CAAC,QAAI,CAAA,MAAI,CAAC5D,cAAL,CAAoB4D,CAApB,CAAuB9D,IAAvB,CAAJ,EADb,CAEE,KAAK,CAAEA,IAAI,CAACvB,QAFd,CAGE,IAAI,CAAC,UAHP,CAIE,OAAO,CAAEuB,IAAI,CAACvB,QAJhB,EAVJ,CANF,cAwBE,2BAAK,SAAS,CAAC,OAAf,EAAwBuB,IAAI,CAACJ,QAA7B,CAxBF,cAyBE,2BAAK,SAAS,CAAC,OAAf,EAAwBI,IAAI,CAACN,KAA7B,CAzBF,CADF,CA6BD,CA9BD,CADD,cAiCC,2BAAK,SAAS,CAAC,mBAAf,EAlCJ,CA3BF,cAgEE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,OAAf,wBAEE,gCACG,GADH,CAEG/B,aAAa,EAAIA,aAAa,CAAG,CAAjC,cACC,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAAmG,CAAC,QAAI,CAAA,MAAI,CAAC7D,oBAAL,CAA0B6D,CAA1B,CAAJ,EADb,CAEE,KAAK,CAAEhH,UAAU,CAACQ,MAFpB,CAGE,IAAI,CAAC,QAHP,CAIE,OAAO,CAAER,UAAU,CAACQ,MAJtB,EADD,cAQC,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAAwG,CAAC,QAAI,CAAA,MAAI,CAAC7D,oBAAL,CAA0B6D,CAA1B,CAAJ,EADb,CAEE,KAAK,CAAEhH,UAAU,CAACQ,MAFpB,CAGE,IAAI,CAAC,QAHP,CAIE,OAAO,CAAER,UAAU,CAACQ,MAJtB,CAKE,QAAQ,KALV,EAVJ,CAFF,CADF,CAhEF,CADF,CAhOF,cA2TE,2BAAK,SAAS,CAAC,4BAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,EACGK,aAAa,EAAIA,aAAa,CAAG,CAAjC,cACC,oBAAC,YAAD,EACE,WAAW,CAAE,YADf,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,gBAHZ,CAIE,KAAK,SAJP,CAKE,OAAO,CAAE,KALX,CAME,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC+E,YAAL,EAAN,EANX,EADD,cAUC,oBAAC,YAAD,EACE,WAAW,CAAE,YADf,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,gBAHZ,CAIE,KAAK,OAJP,CAKE,OAAO,CAAE,KALX,CAME,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACV,YAAL,EAAN,EANX,EAXJ,CADF,cAsBE,2BAAK,SAAS,CAAC,gBAAf,eACE,oBAAC,YAAD,EACE,WAAW,CAAE,WADf,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,gBAHZ,CAIE,KAAK,SAJP,CAKE,OAAO,CAAE,KALX,CAME,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACnE,YAAL,EAAN,EANX,EADF,CAtBF,CA3TF,CA4VGD,qBAAqB,cACpB,oBAAC,cAAD,EACE,qBAAqB,CAAEA,qBADzB,CAEE,cAAc,CAAE,KAAKmF,cAFvB,CAGE,aAAa,CAAEpF,aAHjB,EADoB,CAMlB,IAlWN,CADF,CAsWD,CArtBH,6BAAqCxC,SAArC,EAwtBA,GAAM8I,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAxH,KAAK,QAAK,CAChCyH,eAAe,CAAEzH,KAAK,CAAC0H,WAAN,CAAkBD,eADH,CAAL,EAA7B,CAIA,GAAME,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAOnI,CAAAA,kBAAkB,CACvB,CACEL,WAAW,CAAXA,WADF,CAEEC,YAAY,CAAZA,YAFF,CAGEC,eAAe,CAAfA,eAHF,CAIEC,cAAc,CAAdA,cAJF,CADuB,CAOvBqI,QAPuB,CAAzB,CASD,CAVD,CAYA,MAAO,IAAMC,CAAAA,UAAU,CAAGrI,OAAO,CAC/BgI,eAD+B,CAE/BG,kBAF+B,CAAP,CAGxB5H,eAHwB,CAAnB","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalButton,\r\n  NormalModal,\r\n  NormalSelect,\r\n  NormalDate,\r\n  NormalDateTime,\r\n  NormalCheckbox,\r\n  NormalInput,\r\n  NormalTextarea,\r\n} from \"component/common\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport {\r\n  getCustomer,\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { Toast } from \"service/toast\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport logicon from \"assets/images/logicon.png\";\r\nimport { AppointmentLog } from \"../../CommonModal/Appointmentlog\";\r\n\r\nexport class BlockPopupClass extends Component {\r\n  state = {\r\n    selectedList: [],\r\n    filterDate: new Date(),\r\n    staffSortlist: [],\r\n    formFields: {\r\n      startDate: new Date(),\r\n      endDate: new Date(),\r\n      startTime: \"\",\r\n      endTime: \"\",\r\n      duration: \"\",\r\n      reason: \"\",\r\n      description: \"\",\r\n      active: true,\r\n      staffId: 0,\r\n    },\r\n    duration: [],\r\n    selectAll: false,\r\n    reasonList: [],\r\n    Employeelist: [],\r\n    appointmentId: 0,\r\n    isAppointmentLogModal: false,\r\n  };\r\n  handleDialog = () => {\r\n    this.setState({\r\n      selectedList: [],\r\n      Employeelist: [],\r\n      formFields: {\r\n        startDate: new Date(),\r\n        endDate: new Date(),\r\n        startTime: \"\",\r\n        endTime: \"\",\r\n        duration: \"\",\r\n        reason: \"\",\r\n        description: \"\",\r\n      },\r\n      appointmentId: 0,\r\n    });\r\n    this.props.handleBlockDialog();\r\n  };\r\n  componentWillMount() {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n      validators: {\r\n        date: {\r\n          // name the rule\r\n          message: \"The :attribute must be grater than today.\",\r\n          rule: (val, params, validator) => {\r\n            let date1 = new Date(dateFormat(new Date()));\r\n            let date2 = new Date(dateFormat(val));\r\n            return date1.getTime() <= date2.getTime();\r\n          },\r\n          required: true, // optional\r\n        },\r\n      },\r\n    });\r\n    this.setState({ filterDate: this.props.filterDate });\r\n\r\n    let { duration } = this.state;\r\n    this.props.getCommonApi(`treatment/Duration/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          duration.push({ value: value, label: value });\r\n        }\r\n        this.setState({ duration });\r\n      }\r\n    });\r\n    this.props.getCommonApi(\"blockreason/\").then(res => {\r\n      let { reasonList } = this.state;\r\n      let { status, data } = res;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          reasonList.push({ value: value.id, label: value.b_reason });\r\n        }\r\n        this.setState({ reasonList });\r\n      }\r\n    });\r\n    if (this.props.appointmentId && this.props.appointmentId > 0) {\r\n      this.getBlockedDetail(this.props.appointmentId);\r\n      this.getStaffList();\r\n    } else {\r\n      this.getStaffList();\r\n    }\r\n  }\r\n\r\n  getDateformat = inputdate => {\r\n    let appt_Date = inputdate;\r\n    let date = appt_Date.split(\"/\");\r\n    let finaldate = date[2] + \"-\" + date[1] + \"-\" + date[0];\r\n    return finaldate;\r\n  };\r\n\r\n  getBlockedDetail = async data => {\r\n    await this.setState({ appointmentId: data });\r\n    let { appointmentId, formFields, selected } = this.state;\r\n    this.props\r\n      .getCommonApi(`appointmentblock/${appointmentId}/`)\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          formFields[\"startDate\"] = this.getDateformat(data.start_date);\r\n          formFields[\"endDate\"] = this.getDateformat(data.end_date);\r\n          formFields[\"startTime\"] = data.appt_fr_time;\r\n          formFields[\"endTime\"] = data.appt_to_time;\r\n          formFields[\"duration\"] = data.duration;\r\n          formFields[\"reason\"] = data.reason_id;\r\n          formFields[\"description\"] = data.appt_remark;\r\n          formFields[\"staffId\"] = data.emp_noid;\r\n          await this.setState({ formFields });\r\n        }\r\n      });\r\n  };\r\n  getStaffList = async () => {\r\n    await this.setState({ staffSortlist: [] });\r\n    let { filterDate, staffSortlist, formFields } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `appointmentsort/?date=${dateFormat(filterDate, \"yyyy-mm-dd\")}`\r\n      )\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            let selectedid = value.id;\r\n            let selectedstaff = false;\r\n            if (selectedid === formFields.staffId) {\r\n              selectedstaff = true;\r\n            } else {\r\n              selectedstaff = false;\r\n            }\r\n            staffSortlist.push({\r\n              value: value.id,\r\n              label: value.display_name,\r\n              emp_code: value.emp_code,\r\n              selected: selectedstaff,\r\n            });\r\n          }\r\n          await this.setState({ staffSortlist });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSelectAllCheckbox = async ({ target: { value, name } }) => {\r\n    let { staffSortlist } = this.state;\r\n    await this.setState({ selectAll: value });\r\n    for (let item of staffSortlist) {\r\n      item[\"selected\"] = value;\r\n      await this.setState({ ...this.state.staffSortlist, item });\r\n    }\r\n    await this.setState({ staffSortlist });\r\n    if (value) {\r\n      await this.setState({ selectedList: staffSortlist });\r\n    } else {\r\n      await this.setState({ selectedList: [] });\r\n    }\r\n  };\r\n  handleActiveCheckbox = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({ formFields });\r\n  };\r\n\r\n  handleCheckbox = async ({ target: { value, name } }, item) => {\r\n    let { selectedList, staffSortlist } = this.state;\r\n\r\n    let stafflistCheckbox = staffSortlist.find(acc => acc.value === item.value);\r\n    if (stafflistCheckbox) {\r\n      stafflistCheckbox[\"selected\"] = value;\r\n      await this.setState({ ...this.state.staffSortlist, stafflistCheckbox });\r\n    }\r\n\r\n    let filterList = selectedList.find(account => account.value === item.value);\r\n    if (filterList) {\r\n      filterList[\"value\"] = item.value;\r\n      filterList[\"label\"] = item.label;\r\n      filterList[\"selected\"] = value;\r\n      if (value) {\r\n        await this.setState({ ...this.state.selectedList, filterList });\r\n      } else {\r\n        await this.setState(data => ({\r\n          selectedList: data.selectedList.filter(x => x.value != item.value),\r\n        }));\r\n      }\r\n    } else {\r\n      let data = {};\r\n      data[\"value\"] = item.value;\r\n      data[\"label\"] = item.label;\r\n      data[\"selected\"] = value;\r\n      selectedList.push(data);\r\n      await this.setState({ ...selectedList, selectedList });\r\n    }\r\n\r\n    if (this.state.selectedList.length == this.state.staffSortlist.length) {\r\n      await this.setState({ selectAll: true });\r\n    } else {\r\n      await this.setState({ selectAll: false });\r\n    }\r\n  };\r\n  timeToMins = time => {\r\n    var b = time.split(\":\");\r\n    return b[0] * 60 + +b[1];\r\n  };\r\n\r\n  // Convert minutes to a time in format hh:mm\r\n  // Returned value is in range 00  to 24 hrs\r\n  timeFromMins = mins => {\r\n    function z(n) {\r\n      return (n < 10 ? \"0\" : \"\") + n;\r\n    }\r\n    var h = ((mins / 60) | 0) % 24;\r\n    var m = mins % 60;\r\n    return z(h) + \":\" + z(m);\r\n  };\r\n\r\n  getHoursFromDate = date => {\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let hours = hour > 9 ? hour : \"0\" + hour;\r\n    let minutes = minute > 9 ? minute : \"0\" + minute;\r\n    return hours + \":\" + minutes;\r\n  };\r\n  addTimes = (t0, t1) => {\r\n    return this.timeFromMins(this.timeToMins(t0) + this.timeToMins(t1));\r\n  };\r\n  handleTimePick = async (name, value) => {\r\n    let { formFields } = this.state;\r\n    let time = this.getHoursFromDate(value);\r\n    formFields[\"startTime\"] = time;\r\n    if (time) {\r\n      formFields[\"endTime\"] = time;\r\n    }\r\n    let duration = \"0:0\";\r\n    if (formFields.duration !== \"\" && formFields.duration !== null) {\r\n      duration = formFields.duration;\r\n    }\r\n    if (formFields.endTime !== \"\") {\r\n      formFields[\"endTime\"] = this.addTimes(time, duration);\r\n    }\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleDurationChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[\"duration\"] = value;\r\n    if (formFields.endTime) {\r\n      formFields[\"endTime\"] = this.addTimes(formFields[\"startTime\"], value);\r\n    }\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleSubmit = async () => {\r\n    await this.setState({ Employeelist: [] });\r\n    let { formFields, selectedList, Employeelist } = this.state;\r\n    for (let item of selectedList) {\r\n      let value = item.value;\r\n      Employeelist.push(value);\r\n    }\r\n    this.setState({ Employeelist });\r\n    if (this.validator.allValid()) {\r\n      if (selectedList.length > 0) {\r\n        let data = {\r\n          start_date: dateFormat(new Date(formFields.startDate), \"yyyy-mm-dd\"),\r\n          end_date: dateFormat(new Date(formFields.endDate), \"yyyy-mm-dd\"),\r\n          appt_fr_time: formFields.startTime,\r\n          appt_to_time: formFields.endTime,\r\n          reason_id: formFields.reason,\r\n          duration: formFields.duration,\r\n          appt_remark: formFields.description,\r\n          appt_isactive: formFields.active,\r\n          emp_ids: Employeelist,\r\n        };\r\n\r\n        this.props\r\n          .commonCreateApi(`appointmentblock/`, data)\r\n          .then(async res => {\r\n            if (res.status === 201) {\r\n              this.handleDialog();\r\n              this.props.handleChange();\r\n            }\r\n          });\r\n      } else {\r\n        Toast({ type: \"error\", message: \"Please select Staff\" });\r\n      }\r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  };\r\n  handleUpdate = async () => {\r\n    await this.setState({ Employeelist: [] });\r\n    let { formFields, Employeelist, appointmentId } = this.state;\r\n    Employeelist.push(formFields.staffId);\r\n    this.setState({ Employeelist });\r\n    if (this.validator.allValid()) {\r\n      let data = {\r\n        start_date: dateFormat(new Date(formFields.startDate), \"yyyy-mm-dd\"),\r\n        end_date: dateFormat(new Date(formFields.endDate), \"yyyy-mm-dd\"),\r\n        appt_fr_time: formFields.startTime,\r\n        appt_to_time: formFields.endTime,\r\n        reason_id: formFields.reason,\r\n        duration: formFields.duration,\r\n        appt_remark: formFields.description,\r\n        appt_isactive: formFields.active,\r\n        emp_ids: Employeelist,\r\n      };\r\n      console.log(data, \"Blockupdatedata\");\r\n      this.props\r\n        .commonPatchApi(`appointmentblock/${appointmentId}/`, data)\r\n        .then(async res => {\r\n          if (res.status === 200) {\r\n            this.handleDialog();\r\n            this.props.handleChange();\r\n          }\r\n        });\r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  };\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n\r\n    if (name === \"startDate\") {\r\n      formFields[\"endDate\"] = value;\r\n    }\r\n\r\n    if (name === \"endDate\") {\r\n      let startdate = new Date(dateFormat(formFields.startDate));\r\n      let enddate = new Date(dateFormat(value));\r\n      if (enddate < startdate) {\r\n        Toast({ type: \"error\", message: \"Please enter valid date\" });\r\n        formFields[\"endDate\"] = formFields.startDate;\r\n      }\r\n    }\r\n\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleLogClick = () => {\r\n    debugger;\r\n    this.setState(prevState => ({\r\n      isAppointmentLogModal: !prevState.isAppointmentLogModal,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    let { isOpenBlockModal } = this.props;\r\n    let {\r\n      staffSortlist,\r\n      formFields,\r\n      duration,\r\n      selectAll,\r\n      reasonList,\r\n      appointmentId,\r\n      isAppointmentLogModal,\r\n    } = this.state;\r\n    return (\r\n      <NormalModal\r\n        className={`select-category Block-popup`}\r\n        style={{ minWidth: \"55%\" }}\r\n        modal={isOpenBlockModal}\r\n        handleModal={this.handleDialog}\r\n      >\r\n        <div className=\"d-flex justify-content-end\">\r\n          <img\r\n            onClick={() => this.handleDialog()}\r\n            className=\"close\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"d-flex px-3\">\r\n          <div className=\"d-flex justify-content-start col-9 h4\">\r\n            Block Schedule{\" \"}\r\n          </div>\r\n          {appointmentId && appointmentId > 0 ? (\r\n            <div\r\n              className=\"d-flex justify-content-end align-items-center bg-white col-3\"\r\n              onClick={this.handleLogClick}\r\n            >\r\n              <img src={logicon} alt=\"\" width=\"35px\" height=\"35px\" />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n\r\n        <div className=\"d-flex flex-wrap justify-content-start p-3\">\r\n          <div className=\"col-md-6 col-12 mb-3\">\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Start Date{\" \"}\r\n              <span className=\"error-message text-danger validNo fs-18\">*</span>\r\n            </label>\r\n            <div className=\"input-group\">\r\n              {appointmentId && appointmentId > 0 ? (\r\n                <NormalDate\r\n                  className=\"customer-name status py-1 col-12\"\r\n                  value={new Date(formFields.startDate)}\r\n                  name=\"startDate\"\r\n                  type=\"date\"\r\n                  onChange={this.handleChange}\r\n                  minDate={new Date()}\r\n                  showDisabledMonthNavigation\r\n                  disabled\r\n                />\r\n              ) : (\r\n                <NormalDate\r\n                  className=\"customer-name status py-1 col-12\"\r\n                  value={new Date(formFields.startDate)}\r\n                  name=\"startDate\"\r\n                  type=\"date\"\r\n                  onChange={this.handleChange}\r\n                  minDate={new Date()}\r\n                  showDisabledMonthNavigation\r\n                />\r\n              )}\r\n            </div>\r\n            {this.validator.message(\r\n              \"startDate\",\r\n              formFields.startDate,\r\n              \"required|date\"\r\n            )}\r\n          </div>\r\n          <div className=\"col-md-6 col-12 mb-3\">\r\n            <label className=\"text-left text-black common-label-text \">\r\n              End Date{\" \"}\r\n              <span className=\"error-message text-danger validNo fs-18\">*</span>\r\n            </label>\r\n            <div className=\"\">\r\n              {appointmentId && appointmentId > 0 ? (\r\n                <NormalDate\r\n                  className=\"customer-name status py-1 col-12\"\r\n                  value={new Date(formFields.endDate)}\r\n                  name=\"endDate\"\r\n                  type=\"date\"\r\n                  onChange={this.handleChange}\r\n                  minDate={new Date()}\r\n                  showDisabledMonthNavigation\r\n                  disabled\r\n                />\r\n              ) : (\r\n                <NormalDate\r\n                  className=\"customer-name status py-1 col-12\"\r\n                  value={new Date(formFields.endDate)}\r\n                  name=\"endDate\"\r\n                  type=\"date\"\r\n                  onChange={this.handleChange}\r\n                  minDate={new Date()}\r\n                  showDisabledMonthNavigation\r\n                />\r\n              )}\r\n            </div>\r\n            {this.validator.message(\r\n              \"endDate\",\r\n              formFields.endDate,\r\n              \"required|date\"\r\n            )}\r\n          </div>\r\n          <div className=\"col-md-6 col-12 mb-3\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 col-12\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  Select Time\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalDateTime\r\n                    onChange={this.handleTimePick}\r\n                    label=\"newStartTime\"\r\n                    name=\"newStartTime\"\r\n                    timeOnly={true}\r\n                    dateFormat=\"hh:mm aa\"\r\n                    showTime={true}\r\n                    selected={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-6 col-12\">\r\n                {\" \"}\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  Start Time\r\n                  <span className=\"error-message text-danger validNo fs-18\">\r\n                    *\r\n                  </span>\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    label=\"startTime\"\r\n                    name=\"startTime\"\r\n                    value={formFields.startTime}\r\n                    className=\"customer-name status py-1 col-12\"\r\n                    disabled\r\n                  />\r\n                </div>\r\n                {this.validator.message(\r\n                  \"startTime\",\r\n                  formFields.startTime,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-6 col-12 mb-3\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 col-12\">\r\n                {\" \"}\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  Duration\r\n                  <span className=\"error-message text-danger validNo fs-18\">\r\n                    *\r\n                  </span>\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    options={duration}\r\n                    value={formFields.duration}\r\n                    name=\"duration\"\r\n                    onChange={e => this.handleDurationChange(e)}\r\n                    className=\"customer-name status py-1 col-12\"\r\n                  />\r\n                </div>\r\n                {this.validator.message(\r\n                  \"duration\",\r\n                  formFields.duration,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n              <div className=\"col-md-6 col-12\">\r\n                {\" \"}\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  End Time\r\n                  <span className=\"error-message text-danger validNo fs-18\">\r\n                    *\r\n                  </span>\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    label=\"endTime\"\r\n                    name=\"endTime\"\r\n                    value={formFields.endTime}\r\n                    className=\"customer-name status py-1 col-12\"\r\n                    disabled\r\n                  />\r\n                </div>\r\n                {this.validator.message(\r\n                  \"endTime\",\r\n                  formFields.endTime,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-6 col-12 mb-3\">\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Reason{\" \"}\r\n              <span className=\"error-message text-danger validNo fs-18\">*</span>\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalSelect\r\n                options={reasonList}\r\n                value={formFields.reason} //\r\n                name=\"reason\"\r\n                onChange={this.handleChange}\r\n                className=\"py-1\"\r\n              />\r\n              {this.validator.message(\"reason\", formFields.reason, \"required\")}\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-6 col-12 mb-3\">\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Description\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalTextarea\r\n                value={formFields.description} //\r\n                name=\"description\"\r\n                onChange={this.handleChange}\r\n                className=\"customer-name status py-1 col-12\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"d-flex justify-content-center p-3 mb-0\">\r\n          <div className=\"col-12 mt-1 mb-2 mx-3\">\r\n            <div className=\"row table-header m-0 fw-500\">\r\n              <div className=\"col-3\">\r\n                Select All{\" \"}\r\n                <span>\r\n                  {\" \"}\r\n                  {appointmentId && appointmentId > 0 ? (\r\n                    <NormalCheckbox\r\n                      onChange={e => this.handleSelectAllCheckbox(e)}\r\n                      value={selectAll}\r\n                      name=\"selectAll\"\r\n                      checked={selectAll}\r\n                      disabled\r\n                    />\r\n                  ) : (\r\n                    <NormalCheckbox\r\n                      onChange={e => this.handleSelectAllCheckbox(e)}\r\n                      value={selectAll}\r\n                      name=\"selectAll\"\r\n                      checked={selectAll}\r\n                    />\r\n                  )}\r\n                </span>\r\n              </div>\r\n              <div className=\"col-3\">Employee Code</div>\r\n              <div className=\"col-6\">Display Name</div>\r\n            </div>\r\n            <div className=\"response-table w-100 fw-500 multiselectList-height\">\r\n              {staffSortlist && staffSortlist.length > 0 ? (\r\n                staffSortlist.map((item, index) => {\r\n                  return (\r\n                    <div\r\n                      className={`d-flex justify-content-start m-0 table-body w-100 p-1 border border-secondary staff-sort-list ${\r\n                        item.selected ? \"active\" : \"\"\r\n                      } `}\r\n                      key={item.value}\r\n                    >\r\n                      <div className=\"col-3 text-center\">\r\n                        {appointmentId && appointmentId > 0 ? (\r\n                          <NormalCheckbox\r\n                            onChange={e => this.handleCheckbox(e, item)}\r\n                            value={item.selected}\r\n                            name=\"selected\"\r\n                            checked={item.selected}\r\n                            disabled\r\n                          />\r\n                        ) : (\r\n                          <NormalCheckbox\r\n                            onChange={e => this.handleCheckbox(e, item)}\r\n                            value={item.selected}\r\n                            name=\"selected\"\r\n                            checked={item.selected}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                      <div className=\"col-3\">{item.emp_code}</div>\r\n                      <div className=\"col-6\">{item.label}</div>\r\n                    </div>\r\n                  );\r\n                })\r\n              ) : (\r\n                <div className=\"text-center w-100\"></div>\r\n              )}\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">\r\n                Active\r\n                <span>\r\n                  {\" \"}\r\n                  {appointmentId && appointmentId > 0 ? (\r\n                    <NormalCheckbox\r\n                      onChange={e => this.handleActiveCheckbox(e)}\r\n                      value={formFields.active}\r\n                      name=\"active\"\r\n                      checked={formFields.active}\r\n                    />\r\n                  ) : (\r\n                    <NormalCheckbox\r\n                      onChange={e => this.handleActiveCheckbox(e)}\r\n                      value={formFields.active}\r\n                      name=\"active\"\r\n                      checked={formFields.active}\r\n                      disabled\r\n                    />\r\n                  )}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex justify-content-end\">\r\n          <div className=\"col-md-2 col-6\">\r\n            {appointmentId && appointmentId > 0 ? (\r\n              <NormalButton\r\n                buttonClass={\"w-100  p-0\"}\r\n                mainbg={true}\r\n                className=\" fs-20 confirm\"\r\n                label={`Update`}\r\n                outline={false}\r\n                onClick={() => this.handleUpdate()}\r\n              />\r\n            ) : (\r\n              <NormalButton\r\n                buttonClass={\"w-100  p-0\"}\r\n                mainbg={true}\r\n                className=\" fs-20 confirm\"\r\n                label={`Save`}\r\n                outline={false}\r\n                onClick={() => this.handleSubmit()}\r\n              />\r\n            )}\r\n          </div>\r\n          <div className=\"col-md-2 col-6\">\r\n            <NormalButton\r\n              buttonClass={\"w-100 p-0\"}\r\n              mainbg={true}\r\n              className=\" fs-12 confirm\"\r\n              label={`Cancel`}\r\n              outline={false}\r\n              onClick={() => this.handleDialog()}\r\n            />\r\n          </div>\r\n        </div>\r\n        {isAppointmentLogModal ? (\r\n          <AppointmentLog\r\n            isAppointmentLogModal={isAppointmentLogModal}\r\n            handleLogClick={this.handleLogClick}\r\n            appointmentId={appointmentId}\r\n          />\r\n        ) : null}\r\n      </NormalModal>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCustomer,\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const BlockPopup = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(BlockPopupClass);\r\n"]},"metadata":{},"sourceType":"module"}