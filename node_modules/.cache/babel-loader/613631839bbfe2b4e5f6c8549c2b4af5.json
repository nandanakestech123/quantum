{"ast":null,"code":"/**\r\n * DevExtreme (viz/funnel/tracker.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.plugin = void 0;\n\nvar _funnel = _interopRequireDefault(require(\"./funnel\"));\n\nvar _tracker = require(\"../components/tracker\");\n\nvar _type = require(\"../../core/utils/type\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DATA_KEY_BASE = \"__funnel_data_\";\nvar dataKeyModifier = 0;\nvar proto = _funnel.default.prototype;\nproto._eventsMap.onItemClick = {\n  name: \"itemClick\"\n};\nproto._eventsMap.onLegendClick = {\n  name: \"legendClick\"\n};\n\nvar getDataKey = function () {\n  return DATA_KEY_BASE + dataKeyModifier++;\n};\n\nvar plugin = {\n  name: \"tracker\",\n  init: function () {\n    var that = this;\n    var dataKey = getDataKey();\n\n    var getProxyData = function (e) {\n      var rootOffset = that._renderer.getRootOffset();\n\n      var x = Math.floor(e.pageX - rootOffset.left);\n      var y = Math.floor(e.pageY - rootOffset.top);\n      return that._hitTestTargets(x, y);\n    };\n\n    that._tracker = new _tracker.Tracker({\n      widget: that,\n      root: that._renderer.root,\n      getData: function (e, tooltipData) {\n        var target = e.target;\n        var data = target[dataKey];\n\n        if ((0, _type.isDefined)(data)) {\n          return data;\n        }\n\n        var proxyData = getProxyData(e);\n\n        if (tooltipData && proxyData && \"inside-label\" !== proxyData.type) {\n          return;\n        }\n\n        return proxyData && proxyData.id;\n      },\n      getNode: function (index) {\n        return that._items[index];\n      },\n      click: function (e) {\n        var proxyData = getProxyData(e.event);\n        var dataType = proxyData && proxyData.type;\n        var event = \"legend\" === dataType ? \"legendClick\" : \"itemClick\";\n\n        that._eventTrigger(event, {\n          item: e.node,\n          event: e.event\n        });\n      }\n    });\n    this._dataKey = dataKey;\n  },\n  dispose: function () {\n    this._tracker.dispose();\n  },\n  extenders: {\n    _change_TILING: function () {\n      var dataKey = this._dataKey;\n\n      this._items.forEach(function (item, index) {\n        item.element.data(dataKey, index);\n      });\n    }\n  }\n};\nexports.plugin = plugin;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/funnel/tracker.js"],"names":["exports","plugin","_funnel","_interopRequireDefault","require","_tracker","_type","obj","__esModule","DATA_KEY_BASE","dataKeyModifier","proto","default","prototype","_eventsMap","onItemClick","name","onLegendClick","getDataKey","init","that","dataKey","getProxyData","e","rootOffset","_renderer","getRootOffset","x","Math","floor","pageX","left","y","pageY","top","_hitTestTargets","Tracker","widget","root","getData","tooltipData","target","data","isDefined","proxyData","type","id","getNode","index","_items","click","event","dataType","_eventTrigger","item","node","_dataKey","dispose","extenders","_change_TILING","forEach","element"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,OAAO,CAACC,MAAR,GAAiB,KAAK,CAAtB;;AACA,IAAIC,OAAO,GAAGC,sBAAsB,CAACC,OAAO,CAAC,UAAD,CAAR,CAApC;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,uBAAD,CAAtB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,uBAAD,CAAnB;;AAEA,SAASD,sBAAT,CAAgCI,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,aAAa,GAAG,gBAApB;AACA,IAAIC,eAAe,GAAG,CAAtB;AACA,IAAIC,KAAK,GAAGT,OAAO,CAACU,OAAR,CAAgBC,SAA5B;AACAF,KAAK,CAACG,UAAN,CAAiBC,WAAjB,GAA+B;AAC3BC,EAAAA,IAAI,EAAE;AADqB,CAA/B;AAGAL,KAAK,CAACG,UAAN,CAAiBG,aAAjB,GAAiC;AAC7BD,EAAAA,IAAI,EAAE;AADuB,CAAjC;;AAGA,IAAIE,UAAU,GAAG,YAAW;AACxB,SAAOT,aAAa,GAAGC,eAAe,EAAtC;AACH,CAFD;;AAGA,IAAIT,MAAM,GAAG;AACTe,EAAAA,IAAI,EAAE,SADG;AAETG,EAAAA,IAAI,EAAE,YAAW;AACb,QAAIC,IAAI,GAAG,IAAX;AACA,QAAIC,OAAO,GAAGH,UAAU,EAAxB;;AACA,QAAII,YAAY,GAAG,UAASC,CAAT,EAAY;AAC3B,UAAIC,UAAU,GAAGJ,IAAI,CAACK,SAAL,CAAeC,aAAf,EAAjB;;AACA,UAAIC,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWN,CAAC,CAACO,KAAF,GAAUN,UAAU,CAACO,IAAhC,CAAR;AACA,UAAIC,CAAC,GAAGJ,IAAI,CAACC,KAAL,CAAWN,CAAC,CAACU,KAAF,GAAUT,UAAU,CAACU,GAAhC,CAAR;AACA,aAAOd,IAAI,CAACe,eAAL,CAAqBR,CAArB,EAAwBK,CAAxB,CAAP;AACH,KALD;;AAMAZ,IAAAA,IAAI,CAACf,QAAL,GAAgB,IAAIA,QAAQ,CAAC+B,OAAb,CAAqB;AACjCC,MAAAA,MAAM,EAAEjB,IADyB;AAEjCkB,MAAAA,IAAI,EAAElB,IAAI,CAACK,SAAL,CAAea,IAFY;AAGjCC,MAAAA,OAAO,EAAE,UAAShB,CAAT,EAAYiB,WAAZ,EAAyB;AAC9B,YAAIC,MAAM,GAAGlB,CAAC,CAACkB,MAAf;AACA,YAAIC,IAAI,GAAGD,MAAM,CAACpB,OAAD,CAAjB;;AACA,YAAI,CAAC,GAAGf,KAAK,CAACqC,SAAV,EAAqBD,IAArB,CAAJ,EAAgC;AAC5B,iBAAOA,IAAP;AACH;;AACD,YAAIE,SAAS,GAAGtB,YAAY,CAACC,CAAD,CAA5B;;AACA,YAAIiB,WAAW,IAAII,SAAf,IAA4B,mBAAmBA,SAAS,CAACC,IAA7D,EAAmE;AAC/D;AACH;;AACD,eAAOD,SAAS,IAAIA,SAAS,CAACE,EAA9B;AACH,OAdgC;AAejCC,MAAAA,OAAO,EAAE,UAASC,KAAT,EAAgB;AACrB,eAAO5B,IAAI,CAAC6B,MAAL,CAAYD,KAAZ,CAAP;AACH,OAjBgC;AAkBjCE,MAAAA,KAAK,EAAE,UAAS3B,CAAT,EAAY;AACf,YAAIqB,SAAS,GAAGtB,YAAY,CAACC,CAAC,CAAC4B,KAAH,CAA5B;AACA,YAAIC,QAAQ,GAAGR,SAAS,IAAIA,SAAS,CAACC,IAAtC;AACA,YAAIM,KAAK,GAAG,aAAaC,QAAb,GAAwB,aAAxB,GAAwC,WAApD;;AACAhC,QAAAA,IAAI,CAACiC,aAAL,CAAmBF,KAAnB,EAA0B;AACtBG,UAAAA,IAAI,EAAE/B,CAAC,CAACgC,IADc;AAEtBJ,UAAAA,KAAK,EAAE5B,CAAC,CAAC4B;AAFa,SAA1B;AAIH;AA1BgC,KAArB,CAAhB;AA4BA,SAAKK,QAAL,GAAgBnC,OAAhB;AACH,GAxCQ;AAyCToC,EAAAA,OAAO,EAAE,YAAW;AAChB,SAAKpD,QAAL,CAAcoD,OAAd;AACH,GA3CQ;AA4CTC,EAAAA,SAAS,EAAE;AACPC,IAAAA,cAAc,EAAE,YAAW;AACvB,UAAItC,OAAO,GAAG,KAAKmC,QAAnB;;AACA,WAAKP,MAAL,CAAYW,OAAZ,CAAoB,UAASN,IAAT,EAAeN,KAAf,EAAsB;AACtCM,QAAAA,IAAI,CAACO,OAAL,CAAanB,IAAb,CAAkBrB,OAAlB,EAA2B2B,KAA3B;AACH,OAFD;AAGH;AANM;AA5CF,CAAb;AAqDAhD,OAAO,CAACC,MAAR,GAAiBA,MAAjB","sourcesContent":["/**\r\n * DevExtreme (viz/funnel/tracker.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.plugin = void 0;\r\nvar _funnel = _interopRequireDefault(require(\"./funnel\"));\r\nvar _tracker = require(\"../components/tracker\");\r\nvar _type = require(\"../../core/utils/type\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DATA_KEY_BASE = \"__funnel_data_\";\r\nvar dataKeyModifier = 0;\r\nvar proto = _funnel.default.prototype;\r\nproto._eventsMap.onItemClick = {\r\n    name: \"itemClick\"\r\n};\r\nproto._eventsMap.onLegendClick = {\r\n    name: \"legendClick\"\r\n};\r\nvar getDataKey = function() {\r\n    return DATA_KEY_BASE + dataKeyModifier++\r\n};\r\nvar plugin = {\r\n    name: \"tracker\",\r\n    init: function() {\r\n        var that = this;\r\n        var dataKey = getDataKey();\r\n        var getProxyData = function(e) {\r\n            var rootOffset = that._renderer.getRootOffset();\r\n            var x = Math.floor(e.pageX - rootOffset.left);\r\n            var y = Math.floor(e.pageY - rootOffset.top);\r\n            return that._hitTestTargets(x, y)\r\n        };\r\n        that._tracker = new _tracker.Tracker({\r\n            widget: that,\r\n            root: that._renderer.root,\r\n            getData: function(e, tooltipData) {\r\n                var target = e.target;\r\n                var data = target[dataKey];\r\n                if ((0, _type.isDefined)(data)) {\r\n                    return data\r\n                }\r\n                var proxyData = getProxyData(e);\r\n                if (tooltipData && proxyData && \"inside-label\" !== proxyData.type) {\r\n                    return\r\n                }\r\n                return proxyData && proxyData.id\r\n            },\r\n            getNode: function(index) {\r\n                return that._items[index]\r\n            },\r\n            click: function(e) {\r\n                var proxyData = getProxyData(e.event);\r\n                var dataType = proxyData && proxyData.type;\r\n                var event = \"legend\" === dataType ? \"legendClick\" : \"itemClick\";\r\n                that._eventTrigger(event, {\r\n                    item: e.node,\r\n                    event: e.event\r\n                })\r\n            }\r\n        });\r\n        this._dataKey = dataKey\r\n    },\r\n    dispose: function() {\r\n        this._tracker.dispose()\r\n    },\r\n    extenders: {\r\n        _change_TILING: function() {\r\n            var dataKey = this._dataKey;\r\n            this._items.forEach(function(item, index) {\r\n                item.element.data(dataKey, index)\r\n            })\r\n        }\r\n    }\r\n};\r\nexports.plugin = plugin;\r\n"]},"metadata":{},"sourceType":"script"}