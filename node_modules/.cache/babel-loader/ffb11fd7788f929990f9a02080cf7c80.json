{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalSelect,NormalButton,NormalDate,NormalModal,NormalCheckbox,NormalTextarea}from\"component/common\";import{CreateAppointment,updateForm}from\"redux/actions/appointment\";import{getCustomer,getCommonApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{dateFormat}from\"service/helperFunctions\";import{history}from\"helpers\";import SimpleReactValidator from\"simple-react-validator\";import closeIcon from\"assets/images/close.png\";import _ from\"lodash\";import{AddWalkinCustomer}from\"./NewWalkinCustomer\";import{AppointmentLog}from\"../CommonModal/Appointmentlog\";import logicon from\"assets/images/logicon.png\";import{withTranslation}from\"react-i18next\";export var AppointmentFormClass=/*#__PURE__*/function(_Component){_inherits(AppointmentFormClass,_Component);var _super=_createSuper(AppointmentFormClass);function AppointmentFormClass(){var _this;_classCallCheck(this,AppointmentFormClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={active:false,appt_fr_time:\"\",appt_to_time:\"\",currentValue:\"-1\",formFields:{customerName:\"\",emp_id:\"\",appointmentDate:new Date(),bookingStatus:\"\",Source_Codeid:\"\",ItemSite_Codeid:\"\",new_remark:\"\",Appt_typeid:\"\",// emp_noid : 4,\nRoom_Codeid:\"\",sec_status:\"\",walkin:false,remark_setting:false,edit_remark:\"\",cart_create:false},multipleCustomerForm:{noOfCustomer:1,treatment:\"\",room:\"\"},bookingList:[],isOpenModal:false,multipleCustomr:1,customerElement:[],siteList:[],sourceList:[],channelList:[],staffList:[],secStatusList:[],roomList:[],customerOption:[],search:\"\",customerId:0,appointmentId:null,isWalkin:false,isAppointmentLogModal:false,visible:false,InitStatus:\"\"};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this),validators:{date:{// name the rule\nmessage:\"The :attribute must be grater than today.\",rule:function rule(val,params,validator){var date1=new Date(dateFormat(new Date()));var date2=new Date(dateFormat(val));console.log(\"gagasdfsdfsdffqwef\",date1,date2,date1.getTime(),date2.getTime());return date1.getTime()<=date2.getTime();},//   messageReplace: (message, params) => message.replace(':values', this.helpers.toSentence(params)),  // optional\nrequired:true// optional\n}}});};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,staffList,formFields,basicApptDetail,booking_status;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.props.getCustomer(\"all/\").then(function(){});_this.props.getCommonApi(\"bookingstatus/\").then(function(res){var status=res.status,data=res.data,sec_data=res.sec_data;console.log(data);if(status===200){_this.setState({bookingList:data,secStatusList:sec_data});}});// this.handleCustomerElement()\n_this.props.onRef(_assertThisInitialized(_this));_this$state=_this.state,staffList=_this$state.staffList,formFields=_this$state.formFields;basicApptDetail=_this.props.basicApptDetail;formFields[\"appointmentDate\"]=basicApptDetail.date;booking_status=\"Booking\";formFields[\"bookingStatus\"]=booking_status;formFields[\"ItemSite_Codeid\"]=basicApptDetail.branchId;_this.setState({formFields:formFields});_context.next=12;return _this.props.updateForm(\"appointmentCustomerDetail\",formFields);case 12:_this.getListData();_this.props.getCommonApi(\"appointment/Staffs/?Outlet=\".concat(_this.state.formFields.ItemSite_Codeid,\"&date=\").concat(dateFormat(new Date()))).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;staffList.push({value:value.id,label:value.emp_name});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({staffList:staffList});}});if(basicApptDetail.appt_id){console.log(basicApptDetail.appt_id);_this.setState({appointmentId:basicApptDetail.appt_id});_this.handleAppointmentDetailRender(basicApptDetail.appt_id,false);}else if(_this.props.PasteAppointmentId&&_this.props.PasteAppointmentId>0){_this.handleAppointmentDetailRender(_this.props.PasteAppointmentId,true);}case 15:case\"end\":return _context.stop();}}},_callee);}));_this.handleAppointmentDetailRender=function(appt_id,copy){var _this$state2=_this.state,formFields=_this$state2.formFields,InitStatus=_this$state2.InitStatus;_this.props.getCommonApi(\"appointmentedit/\".concat(appt_id,\"/\")).then(function(key){var status=key.status,data=key.data;if(status===200){if(data.appointment){console.log(data.appointment,\"selectedCustomer\");formFields[\"custName\"]=data.appointment.cust_name;if(!copy){formFields[\"appointmentDate\"]=data.appointment.appt_date;formFields[\"bookingStatus\"]=data.appointment.appt_status;InitStatus=data.appointment.appt_status;}if(copy){var booking_status=\"Booking\";formFields[\"bookingStatus\"]=booking_status;}formFields[\"new_remark\"]=data.appointment.ori_remark;formFields[\"edit_remark\"]=data.appointment.edit_remark;formFields[\"customerName\"]=data.appointment.cust_id;formFields[\"Source_Codeid\"]=data.appointment.source_id;formFields[\"Room_Codeid\"]=data.appointment.Room_Codeid;formFields[\"sec_status\"]=data.appointment.sec_status;formFields[\"Appt_typeid\"]=data.appointment.channel_id;formFields[\"remark_setting\"]=data.appointment.remark_setting;formFields[\"custPhone\"]=data.appointment.cust_phone1;formFields[\"cust_remark\"]=data.appointment.permanent_remark;_this.setState({formFields:formFields,InitStatus:InitStatus});_this.setState({customerId:data.appointment.cust_id});_this.props.selectedCustomer(data.appointment.cust_id);_this.props.updateForm(\"appointmentCustomerDetail\",formFields);}}});};_this.getListData=function(){var _this$state3=_this.state,staffList=_this$state3.staffList,sourceList=_this$state3.sourceList,siteList=_this$state3.siteList,channelList=_this$state3.channelList,roomList=_this$state3.roomList;_this.props.getCommonApi(\"source/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var value=_step2.value;sourceList.push({value:value.id,label:value.source_desc});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({sourceList:sourceList});console.log(sourceList,\"jhksdfkjsdhfks\");}});_this.props.getCommonApi(\"treatment/Outlet/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator3=_createForOfIteratorHelper(data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var value=_step3.value;siteList.push({value:value.id,label:value.itemsite_code});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState({siteList:siteList});console.log(siteList,\"jhksdfkjsdhfks\");}});_this.props.getCommonApi(\"appttype/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator4=_createForOfIteratorHelper(data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var value=_step4.value;channelList.push({value:value.id,label:value.appt_type_desc});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this.setState({channelList:channelList});console.log(siteList,\"jhksdfkjsdhfks\");}});_this.props.getCommonApi(\"room/?outlet=\".concat(_this.state.formFields.ItemSite_Codeid)).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator5=_createForOfIteratorHelper(data),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var value=_step5.value;roomList.push({value:value.id,label:value.displayname});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_this.setState({roomList:roomList});console.log(roomList,\"jhksdfkjsdhfks\");}});};_this.selectTime=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(key,type){var formFields;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:formFields=_this.state.formFields;if(!(type===\"appt_fr_time\")){_context2.next=7;break;}formFields[\"appt_fr_time\"]=key;_context2.next=5;return _this.setState({formFields:formFields,appt_fr_time:key});case 5:_context2.next=10;break;case 7:formFields[\"appt_to_time\"]=key;_context2.next=10;return _this.setState({formFields:formFields,appt_to_time:key});case 10:_context2.next=12;return _this.props.updateForm(\"appointmentCustomerDetail\",formFields);case 12:console.log(\"sdfsdfsdfsd\",formFields);case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();_this.handleClick=function(key){if(!_this.state.visible){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}if(_this.state.visible){var basicApptDetail=_this.props.basicApptDetail;_this.search(basicApptDetail);}_this.setState(function(prevState){return{visible:!prevState.visible};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.onFocus=function(){_this.validator.showMessages();};_this.handleChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _ref3$target,value,name,formFields,staffList,_formFields,_formFields2;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;formFields=_this.state.formFields;formFields[name]=value;_context3.next=5;return _this.setState({formFields:formFields});case 5:_this.props.updateForm(\"customerDetail\",formFields);_context3.next=8;return _this.props.updateForm(\"appointmentCustomerDetail\",formFields);case 8:if(name===\"ItemSite_Codeid\"){staffList=_this.state.staffList;_this.props.getCommonApi(\"appointment/Staffs/?Outlet=\".concat(value)).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator6=_createForOfIteratorHelper(data),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _value=_step6.value;staffList.push({value:_value.id,label:_value.emp_name});}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}_this.setState({staffList:staffList});}});}if(name===\"walkin\"){_formFields=_this.state.formFields;_formFields[\"customerName\"]=\"\";_formFields[\"custName\"]=\"\";_formFields[\"cust_refer\"]=\"\";_this.setState({formFields:_formFields});_this.setState(function(prevState){return{isWalkin:!prevState.isWalkin};});}if(name==\"bookingStatus\"&&String(value).toUpperCase()==\"CANCELLED\"){_formFields2=_this.state.formFields;_formFields2[\"sec_status\"]=\"Rescheduled\";_this.setState({formFields:_formFields2});}case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.handleMultiple=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref5){var _ref5$target,value,name,multipleCustomerForm;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;multipleCustomerForm=_this.state.multipleCustomerForm;if(name===\"noOfCustomer\"){multipleCustomerForm[name]=Number(value);}if(name===\"sameForAllTreatment\"||name===\"differentForAllTreatment\"){if(name===\"differentForAllTreatment\"){multipleCustomerForm[\"treatment\"]=2;}else{multipleCustomerForm[\"treatment\"]=1;}}else{if(name===\"differentForAllRoom\"){multipleCustomerForm[\"room\"]=2;}else{multipleCustomerForm[\"room\"]=1;}}_context4.next=6;return _this.setState({multipleCustomerForm:multipleCustomerForm});case 6:_this.props.updateForm(\"multipleCustomerForm\",multipleCustomerForm);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref6.apply(this,arguments);};}();_this.handleSubmit=function(){history.push(\"/admin/newappointment/create/select-treatment\");};_this.getTime=function(data){var time=data.split(\" \");var time1=time[0].split(\":\");console.log(time,time1,\"kghjhgdjfgsdf\");if(time[1]===\"pm\"){return(Number(time1[0])+12===24?\"00\":Number(time1[0])+12)+\":\"+time1[1];}else{return time1[0]<9?\"0\"+time[0]:time1[0]+\":\"+time1[1];}};_this.handleDialog=function(){var isOpenModal=_this.state.isOpenModal;isOpenModal=!isOpenModal;_this.setState({isOpenModal:isOpenModal});};_this.handleMultipleCustomer=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var multipleCustomerForm;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:multipleCustomerForm=_this.props.multipleCustomerForm;_context5.next=3;return _this.setState({multipleCustomr:multipleCustomerForm.noOfCustomer,customerElement:[]});case 3:console.log(multipleCustomerForm,_this.state,\"dkjfkshgfghdfk\",multipleCustomerForm.noOfCustomer);_this.handleCustomerElement(multipleCustomerForm.noOfCustomer);case 5:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleSearch=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(event){var _this$state4,formFields,visible;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0://    event.persist();\n_this$state4=_this.state,formFields=_this$state4.formFields,visible=_this$state4.visible;formFields[\"custName\"]=event.target.value;visible=true;_context7.next=5;return _this.setState({formFields:formFields,visible:visible});case 5:console.log(_this.state.formFields.custName);if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var customerList,basicApptDetail;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:customerList=_this.state.customerList;basicApptDetail=_this.props.basicApptDetail;_this.search(basicApptDetail);case 3:case\"end\":return _context6.stop();}}},_callee6);})),500);}_this.debouncedFn();case 8:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x5){return _ref8.apply(this,arguments);};}();_this.search=function(basicApptDetail){var formFields=_this.state.formFields;_this.props.getCommonApi(\"custappt/?Outlet=\".concat(basicApptDetail.branchId?basicApptDetail.branchId:\"\",\"&search=\").concat(formFields.custName)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(data){var formFields;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:formFields=_this.state.formFields;formFields[\"customerName\"]=data.id;formFields[\"custName\"]=data.cust_name;formFields[\"custPhone\"]=data.cust_phone1;formFields[\"cust_remark\"]=data.cust_remark;formFields[\"cust_refer\"]=data.cust_refer;_context8.next=8;return _this.props.updateForm(\"appointmentCustomerDetail\",formFields);case 8:_context8.next=10;return _this.setState({formFields:formFields,customerOption:[]});case 10:_context8.next=12;return _this.setState({customerId:data.id});case 12:_this.props.selectedCustomer(data.id);_this.handleClick();case 14:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x6){return _ref10.apply(this,arguments);};}();_this.handleWalkInCustomer=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(data){var formFields;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:formFields=_this.state.formFields;formFields[\"customerName\"]=data.id;formFields[\"custName\"]=data.cust_name;formFields[\"custPhone\"]=data.cust_phone2;formFields[\"cust_remark\"]=\"\";_context9.next=7;return _this.props.updateForm(\"appointmentCustomerDetail\",formFields);case 7:_this.setState({formFields:formFields});_this.setState({customerId:data.id});_this.props.selectedCustomer(data.id);_this.setState(function(prevState){return{isWalkin:!prevState.isWalkin};});case 11:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x7){return _ref11.apply(this,arguments);};}();_this.handleLogClick=function(){_this.setState(function(prevState){return{isAppointmentLogModal:!prevState.isAppointmentLogModal};});};return _this;}_createClass(AppointmentFormClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.onRef(null);}},{key:\"render\",value:function render(){var _this2=this;var _this$state5=this.state,appt_fr_time=_this$state5.appt_fr_time,active=_this$state5.active,currentValue=_this$state5.currentValue,bookingList=_this$state5.bookingList,channelList=_this$state5.channelList,secStatusList=_this$state5.secStatusList,roomList=_this$state5.roomList,customerOption=_this$state5.customerOption,isOpenModal=_this$state5.isOpenModal,multipleCustomr=_this$state5.multipleCustomr,appt_to_time=_this$state5.appt_to_time,siteList=_this$state5.siteList,sourceList=_this$state5.sourceList,staffList=_this$state5.staffList,customerElement=_this$state5.customerElement,formFields=_this$state5.formFields,appointmentId=_this$state5.appointmentId,isWalkin=_this$state5.isWalkin,isAppointmentLogModal=_this$state5.isAppointmentLogModal,visible=_this$state5.visible,InitStatus=_this$state5.InitStatus;var _this$props=this.props,customerDetail=_this$props.customerDetail,customerList=_this$props.customerList,multipleCustomerForm=_this$props.multipleCustomerForm,t=_this$props.t;var noOfCustomer=multipleCustomerForm.noOfCustomer,treatment=multipleCustomerForm.treatment,room=multipleCustomerForm.room;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2 appointment-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start col-md-11 col-12 h5 p-0\"},appointmentId&&appointmentId>0?t(\"Edit Appointment\"):t(\"Create Appointment\")),appointmentId&&appointmentId>0?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end align-items-center bg-white cursor-pointer col-md-1 col-12\",onClick:this.handleLogClick},/*#__PURE__*/React.createElement(\"img\",{src:logicon,alt:\"\",width:\"35px\",height:\"35px\"})):null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Date\"),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(NormalDate,{value:new Date(formFields.appointmentDate),name:\"appointmentDate\",type:\"date\",onChange:this.handleChange,minDate:new Date(),showDisabledMonthNavigation:true})),this.validator.message(\"appointmentDate\",formFields.appointmentDate,\"required|date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Name\"),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},appointmentId?/*#__PURE__*/React.createElement(NormalInput,{value:formFields.custName,name:\"customerName\",onChange:this.handleSearch,onClick:this.handleClick,disabled:true}):/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"search\",value:formFields.custName,name:\"customerName\",onChange:this.handleSearch,onClick:this.handleClick})),this.validator.message(\"customerName\",formFields.customerName,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Booking Status\"),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\" }\n,{options:bookingList,value:formFields.bookingStatus//\n,name:\"bookingStatus\",onChange:this.handleChange,className:\"customer-name status py-1\"}),this.validator.message(\"Booking Status\",formFields.bookingStatus,\"required\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Channel\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:channelList,value:formFields.Appt_typeid,name:\"Appt_typeid\",onChange:this.handleChange,className:\"customer-name py-1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Remark\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},formFields.remark_setting?/*#__PURE__*/React.createElement(NormalTextarea// placeholder=\"Enter here\"\n// options={siteList}\n,{value:formFields.new_remark,name:\"new_remark\",onChange:this.handleChange,disabled:true}):/*#__PURE__*/React.createElement(NormalTextarea// placeholder=\"Enter here\"\n// options={siteList}\n,{value:formFields.new_remark,name:\"new_remark\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Source Name\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:sourceList,value:formFields.Source_Codeid,name:\"Source_Codeid\",onChange:this.handleChange,className:\"customer-name py-1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Room\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:roomList,value:formFields.Room_Codeid,name:\"Room_Codeid\",onChange:this.handleChange,className:\"customer-name py-1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Secondary Status\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:secStatusList,value:formFields.sec_status,name:\"sec_status\",onChange:this.handleChange,className:\"customer-name py-1\"}))),formFields.remark_setting?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"New Remark\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalTextarea// placeholder=\"Enter here\"\n// options={siteList}\n,{value:formFields.edit_remark,name:\"edit_remark\",onChange:this.handleChange}))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Permanent Remark\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalTextarea,{value:formFields.cust_remark,name:\"cust_remark\",onChange:function onChange(){},disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Phone\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:formFields.custPhone,name:\"custPhone\",onChange:function onChange(){},disabled:true}))),!appointmentId?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Walkin\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:this.handleChange,value:formFields.walkin,name:\"walkin\"}))):\"\",appointmentId&&String(InitStatus).toUpperCase()!==\"\"&&String(formFields.bookingStatus).toUpperCase()===\"ARRIVED\"&&String(InitStatus).toUpperCase()!==\"ARRIVED\"?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Cart\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:this.handleChange,value:formFields.cart_create,name:\"cart_create\"}))):\"\",visible?/*#__PURE__*/React.createElement(\"div\",{className:\"customerSearch-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mt-3 table table-header w-100 m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Phone\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Customer Code\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Reference\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},t(\"Email\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},t(\"NRIC\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100 row\"},console.log(customerOption,\"customer search result\"),customerOption.length>0?customerOption.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 table-body w-100 border\",onClick:function onClick(){return _this2.handleSelectCustomer(item);},key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_phone1),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_code),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_refer),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},item.cust_email),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},item.cust_nric));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"},t(\"No Data Available\")))):null,isWalkin?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AddWalkinCustomer,{site_codeId:formFields.ItemSite_Codeid,handleWalkInCustomer:this.handleWalkInCustomer})):\"\"),isAppointmentLogModal?/*#__PURE__*/React.createElement(AppointmentLog,{isAppointmentLogModal:isAppointmentLogModal,handleLogClick:this.handleLogClick,appointmentId:appointmentId}):null));}}]);return AppointmentFormClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,customerList:state.common.customerList,multipleCustomerForm:state.appointment.multipleCustomerForm,basicApptDetail:state.appointment.basicApptDetail,appointmentCustomerDetail:state.appointment.appointmentCustomerDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({CreateAppointment:CreateAppointment,updateForm:updateForm,getCustomer:getCustomer,getCommonApi:getCommonApi},dispatch);};export var AppointmentForm=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(AppointmentFormClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/NewAppointment/NewCreateAppointment/AppointmentForm.js"],"names":["React","Component","NormalInput","NormalSelect","NormalButton","NormalDate","NormalModal","NormalCheckbox","NormalTextarea","CreateAppointment","updateForm","getCustomer","getCommonApi","connect","bindActionCreators","dateFormat","history","SimpleReactValidator","closeIcon","_","AddWalkinCustomer","AppointmentLog","logicon","withTranslation","AppointmentFormClass","state","active","appt_fr_time","appt_to_time","currentValue","formFields","customerName","emp_id","appointmentDate","Date","bookingStatus","Source_Codeid","ItemSite_Codeid","new_remark","Appt_typeid","Room_Codeid","sec_status","walkin","remark_setting","edit_remark","cart_create","multipleCustomerForm","noOfCustomer","treatment","room","bookingList","isOpenModal","multipleCustomr","customerElement","siteList","sourceList","channelList","staffList","secStatusList","roomList","customerOption","search","customerId","appointmentId","isWalkin","isAppointmentLogModal","visible","InitStatus","componentWillMount","validator","element","message","autoForceUpdate","validators","date","rule","val","params","date1","date2","console","log","getTime","required","componentDidMount","props","then","res","status","data","sec_data","setState","onRef","basicApptDetail","booking_status","branchId","getListData","key","value","push","id","label","emp_name","appt_id","handleAppointmentDetailRender","PasteAppointmentId","copy","appointment","cust_name","appt_date","appt_status","ori_remark","cust_id","source_id","channel_id","cust_phone1","permanent_remark","selectedCustomer","source_desc","itemsite_code","appt_type_desc","displayname","selectTime","type","handleClick","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","onFocus","showMessages","handleChange","name","String","toUpperCase","handleMultiple","Number","handleSubmit","time","split","time1","handleDialog","handleMultipleCustomer","handleCustomerElement","handleSearch","event","custName","debouncedFn","debounce","customerList","handleSelectCustomer","cust_remark","cust_refer","handleWalkInCustomer","cust_phone2","handleLogClick","customerDetail","t","custPhone","length","map","item","index","cust_code","cust_email","cust_nric","mapStateToProps","common","appointmentCustomerDetail","mapDispatchToProps","dispatch","AppointmentForm"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalInput,\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalDate,\r\n  NormalModal,\r\n  NormalCheckbox,\r\n  NormalTextarea,\r\n} from \"component/common\";\r\nimport { CreateAppointment, updateForm } from \"redux/actions/appointment\";\r\nimport { getCustomer, getCommonApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { history } from \"helpers\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport _ from \"lodash\";\r\nimport { AddWalkinCustomer } from \"./NewWalkinCustomer\";\r\nimport { AppointmentLog } from \"../CommonModal/Appointmentlog\";\r\nimport logicon from \"assets/images/logicon.png\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class AppointmentFormClass extends Component {\r\n  state = {\r\n    active: false,\r\n    appt_fr_time: \"\",\r\n    appt_to_time: \"\",\r\n    currentValue: \"-1\",\r\n    formFields: {\r\n      customerName: \"\",\r\n      emp_id: \"\",\r\n      appointmentDate: new Date(),\r\n      bookingStatus: \"\",\r\n      Source_Codeid: \"\",\r\n      ItemSite_Codeid: \"\",\r\n      new_remark: \"\",\r\n      Appt_typeid: \"\",\r\n      // emp_noid : 4,\r\n      Room_Codeid: \"\",\r\n      sec_status: \"\",\r\n      walkin: false,\r\n      remark_setting: false,\r\n      edit_remark: \"\",\r\n      cart_create: false,\r\n    },\r\n    multipleCustomerForm: {\r\n      noOfCustomer: 1,\r\n      treatment: \"\",\r\n      room: \"\",\r\n    },\r\n    bookingList: [],\r\n    isOpenModal: false,\r\n    multipleCustomr: 1,\r\n    customerElement: [],\r\n    siteList: [],\r\n    sourceList: [],\r\n    channelList: [],\r\n    staffList: [],\r\n    secStatusList: [],\r\n    roomList: [],\r\n    customerOption: [],\r\n    search: \"\",\r\n    customerId: 0,\r\n    appointmentId: null,\r\n    isWalkin: false,\r\n    isAppointmentLogModal: false,\r\n    visible: false,\r\n    InitStatus: \"\",\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n      validators: {\r\n        date: {\r\n          // name the rule\r\n          message: \"The :attribute must be grater than today.\",\r\n          rule: (val, params, validator) => {\r\n            let date1 = new Date(dateFormat(new Date()));\r\n            let date2 = new Date(dateFormat(val));\r\n            console.log(\r\n              \"gagasdfsdfsdffqwef\",\r\n              date1,\r\n              date2,\r\n              date1.getTime(),\r\n              date2.getTime()\r\n            );\r\n            return date1.getTime() <= date2.getTime();\r\n          },\r\n          //   messageReplace: (message, params) => message.replace(':values', this.helpers.toSentence(params)),  // optional\r\n          required: true, // optional\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    this.props.getCustomer(\"all/\").then(() => {});\r\n    this.props.getCommonApi(\"bookingstatus/\").then(res => {\r\n      let { status, data, sec_data } = res;\r\n      console.log(data);\r\n      if (status === 200) {\r\n        this.setState({ bookingList: data, secStatusList: sec_data });\r\n      }\r\n    });\r\n    // this.handleCustomerElement()\r\n    this.props.onRef(this);\r\n    let { staffList, formFields } = this.state;\r\n    let { basicApptDetail } = this.props;\r\n    formFields[\"appointmentDate\"] = basicApptDetail.date;\r\n\r\n    let booking_status = \"Booking\";\r\n    formFields[\"bookingStatus\"] = booking_status;\r\n    formFields[\"ItemSite_Codeid\"] = basicApptDetail.branchId;\r\n    this.setState({ formFields });\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    this.getListData();\r\n    this.props\r\n      .getCommonApi(\r\n        `appointment/Staffs/?Outlet=${\r\n          this.state.formFields.ItemSite_Codeid\r\n        }&date=${dateFormat(new Date())}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            staffList.push({ value: value.id, label: value.emp_name });\r\n          }\r\n          this.setState({ staffList });\r\n        }\r\n      });\r\n\r\n    if (basicApptDetail.appt_id) {\r\n      console.log(basicApptDetail.appt_id);\r\n      this.setState({ appointmentId: basicApptDetail.appt_id });\r\n      this.handleAppointmentDetailRender(basicApptDetail.appt_id, false);\r\n    } else if (\r\n      this.props.PasteAppointmentId &&\r\n      this.props.PasteAppointmentId > 0\r\n    ) {\r\n      this.handleAppointmentDetailRender(this.props.PasteAppointmentId, true);\r\n    }\r\n  };\r\n\r\n  handleAppointmentDetailRender = (appt_id, copy) => {\r\n    let { formFields, InitStatus } = this.state;\r\n    this.props.getCommonApi(`appointmentedit/${appt_id}/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        if (data.appointment) {\r\n          console.log(data.appointment, \"selectedCustomer\");\r\n          formFields[\"custName\"] = data.appointment.cust_name;\r\n          if (!copy) {\r\n            formFields[\"appointmentDate\"] = data.appointment.appt_date;\r\n            formFields[\"bookingStatus\"] = data.appointment.appt_status;\r\n            InitStatus = data.appointment.appt_status;\r\n          }\r\n          if (copy) {\r\n            let booking_status = \"Booking\";\r\n            formFields[\"bookingStatus\"] = booking_status;\r\n          }\r\n\r\n          formFields[\"new_remark\"] = data.appointment.ori_remark;\r\n          formFields[\"edit_remark\"] = data.appointment.edit_remark;\r\n          formFields[\"customerName\"] = data.appointment.cust_id;\r\n          formFields[\"Source_Codeid\"] = data.appointment.source_id;\r\n          formFields[\"Room_Codeid\"] = data.appointment.Room_Codeid;\r\n          formFields[\"sec_status\"] = data.appointment.sec_status;\r\n          formFields[\"Appt_typeid\"] = data.appointment.channel_id;\r\n          formFields[\"remark_setting\"] = data.appointment.remark_setting;\r\n          formFields[\"custPhone\"] = data.appointment.cust_phone1;\r\n          formFields[\"cust_remark\"] = data.appointment.permanent_remark;\r\n          this.setState({ formFields, InitStatus });\r\n          this.setState({ customerId: data.appointment.cust_id });\r\n          this.props.selectedCustomer(data.appointment.cust_id);\r\n          this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.props.onRef(null);\r\n  }\r\n\r\n  getListData = () => {\r\n    let { staffList, sourceList, siteList, channelList, roomList } = this.state;\r\n\r\n    this.props.getCommonApi(`source/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          sourceList.push({ value: value.id, label: value.source_desc });\r\n        }\r\n        this.setState({ sourceList });\r\n        console.log(sourceList, \"jhksdfkjsdhfks\");\r\n      }\r\n    });\r\n    this.props.getCommonApi(`treatment/Outlet/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          siteList.push({ value: value.id, label: value.itemsite_code });\r\n        }\r\n        this.setState({ siteList });\r\n        console.log(siteList, \"jhksdfkjsdhfks\");\r\n      }\r\n    });\r\n    this.props.getCommonApi(`appttype/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          channelList.push({ value: value.id, label: value.appt_type_desc });\r\n        }\r\n        this.setState({ channelList });\r\n        console.log(siteList, \"jhksdfkjsdhfks\");\r\n      }\r\n    });\r\n    this.props\r\n      .getCommonApi(`room/?outlet=${this.state.formFields.ItemSite_Codeid}`)\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            roomList.push({ value: value.id, label: value.displayname });\r\n          }\r\n          this.setState({ roomList });\r\n          console.log(roomList, \"jhksdfkjsdhfks\");\r\n        }\r\n      });\r\n  };\r\n\r\n  selectTime = async (key, type) => {\r\n    let { formFields } = this.state;\r\n    if (type === \"appt_fr_time\") {\r\n      formFields[\"appt_fr_time\"] = key;\r\n      await this.setState({\r\n        formFields,\r\n        appt_fr_time: key,\r\n      });\r\n    } else {\r\n      formFields[\"appt_to_time\"] = key;\r\n      await this.setState({\r\n        formFields,\r\n        appt_to_time: key,\r\n      });\r\n    }\r\n\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    console.log(\"sdfsdfsdfsd\", formFields);\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.visible) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    if (this.state.visible) {\r\n      let { basicApptDetail } = this.props;\r\n      this.search(basicApptDetail);\r\n    }\r\n    this.setState(prevState => ({\r\n      visible: !prevState.visible,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  onFocus = () => {\r\n    this.validator.showMessages();\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    this.props.updateForm(\"customerDetail\", formFields);\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    if (name === \"ItemSite_Codeid\") {\r\n      let { staffList } = this.state;\r\n      this.props\r\n        .getCommonApi(`appointment/Staffs/?Outlet=${value}`)\r\n        .then(key => {\r\n          let { status, data } = key;\r\n          if (status === 200) {\r\n            for (let value of data) {\r\n              staffList.push({ value: value.id, label: value.emp_name });\r\n            }\r\n            this.setState({ staffList });\r\n          }\r\n        });\r\n    }\r\n\r\n    if (name === \"walkin\") {\r\n      let { formFields } = this.state;\r\n      formFields[\"customerName\"] = \"\";\r\n      formFields[\"custName\"] = \"\";\r\n      formFields[\"cust_refer\"] = \"\";\r\n      this.setState({ formFields });\r\n      this.setState(prevState => ({\r\n        isWalkin: !prevState.isWalkin,\r\n      }));\r\n    }\r\n    if (name == \"bookingStatus\" && String(value).toUpperCase() == \"CANCELLED\") {\r\n      let { formFields } = this.state;\r\n      formFields[\"sec_status\"] = \"Rescheduled\";\r\n      this.setState({\r\n        formFields,\r\n      });\r\n    }\r\n  };\r\n\r\n  handleMultiple = async ({ target: { value, name } }) => {\r\n    let { multipleCustomerForm } = this.state;\r\n    if (name === \"noOfCustomer\") {\r\n      multipleCustomerForm[name] = Number(value);\r\n    }\r\n    if (name === \"sameForAllTreatment\" || name === \"differentForAllTreatment\") {\r\n      if (name === \"differentForAllTreatment\") {\r\n        multipleCustomerForm[\"treatment\"] = 2;\r\n      } else {\r\n        multipleCustomerForm[\"treatment\"] = 1;\r\n      }\r\n    } else {\r\n      if (name === \"differentForAllRoom\") {\r\n        multipleCustomerForm[\"room\"] = 2;\r\n      } else {\r\n        multipleCustomerForm[\"room\"] = 1;\r\n      }\r\n    }\r\n\r\n    await this.setState({\r\n      multipleCustomerForm,\r\n    });\r\n    this.props.updateForm(\"multipleCustomerForm\", multipleCustomerForm);\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    history.push(`/admin/newappointment/create/select-treatment`);\r\n  };\r\n\r\n  getTime = data => {\r\n    let time = data.split(\" \");\r\n    let time1 = time[0].split(\":\");\r\n    console.log(time, time1, \"kghjhgdjfgsdf\");\r\n    if (time[1] === \"pm\") {\r\n      return (\r\n        (Number(time1[0]) + 12 === 24 ? \"00\" : Number(time1[0]) + 12) +\r\n        \":\" +\r\n        time1[1]\r\n      );\r\n    } else {\r\n      return time1[0] < 9 ? \"0\" + time[0] : time1[0] + \":\" + time1[1];\r\n    }\r\n  };\r\n\r\n  handleDialog = () => {\r\n    let { isOpenModal } = this.state;\r\n    isOpenModal = !isOpenModal;\r\n    this.setState({\r\n      isOpenModal,\r\n    });\r\n  };\r\n\r\n  handleMultipleCustomer = async () => {\r\n    let { multipleCustomerForm } = this.props;\r\n    await this.setState({\r\n      multipleCustomr: multipleCustomerForm.noOfCustomer,\r\n      customerElement: [],\r\n    });\r\n    console.log(\r\n      multipleCustomerForm,\r\n      this.state,\r\n      \"dkjfkshgfghdfk\",\r\n      multipleCustomerForm.noOfCustomer\r\n    );\r\n    this.handleCustomerElement(multipleCustomerForm.noOfCustomer);\r\n  };\r\n\r\n  handleSearch = async event => {\r\n    //    event.persist();\r\n    let { formFields, visible } = this.state;\r\n    formFields[\"custName\"] = event.target.value;\r\n    visible = true;\r\n    await this.setState({ formFields, visible });\r\n    console.log(this.state.formFields.custName);\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        let { customerList } = this.state;\r\n        let { basicApptDetail } = this.props;\r\n        this.search(basicApptDetail);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  search = basicApptDetail => {\r\n    let { formFields } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `custappt/?Outlet=${\r\n          basicApptDetail.branchId ? basicApptDetail.branchId : \"\"\r\n        }&search=${formFields.custName}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          // for (let value of data) {\r\n          //     customerList.push({ value: value.id, label: value.emp_name })\r\n          // }\r\n          this.setState({ customerOption: data });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSelectCustomer = async data => {\r\n    let { formFields } = this.state;\r\n    formFields[\"customerName\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    formFields[\"custPhone\"] = data.cust_phone1;\r\n    formFields[\"cust_remark\"] = data.cust_remark;\r\n    formFields[\"cust_refer\"] = data.cust_refer;\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    await this.setState({ formFields, customerOption: [] });\r\n    await this.setState({ customerId: data.id });\r\n    this.props.selectedCustomer(data.id);\r\n    this.handleClick();\r\n  };\r\n\r\n  handleWalkInCustomer = async data => {\r\n    let { formFields } = this.state;\r\n    formFields[\"customerName\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    formFields[\"custPhone\"] = data.cust_phone2;\r\n    formFields[\"cust_remark\"] = \"\";\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    this.setState({ formFields });\r\n    this.setState({ customerId: data.id });\r\n    this.props.selectedCustomer(data.id);\r\n    this.setState(prevState => ({\r\n      isWalkin: !prevState.isWalkin,\r\n    }));\r\n  };\r\n\r\n  handleLogClick = () => {\r\n    this.setState(prevState => ({\r\n      isAppointmentLogModal: !prevState.isAppointmentLogModal,\r\n    }));\r\n  };\r\n  render() {\r\n    let {\r\n      appt_fr_time,\r\n      active,\r\n      currentValue,\r\n      bookingList,\r\n      channelList,\r\n      secStatusList,\r\n      roomList,\r\n      customerOption,\r\n      isOpenModal,\r\n      multipleCustomr,\r\n      appt_to_time,\r\n      siteList,\r\n      sourceList,\r\n      staffList,\r\n      customerElement,\r\n      formFields,\r\n      appointmentId,\r\n      isWalkin,\r\n      isAppointmentLogModal,\r\n      visible,\r\n      InitStatus,\r\n    } = this.state;\r\n    let { customerDetail, customerList, multipleCustomerForm, t } = this.props;\r\n    let { noOfCustomer, treatment, room } = multipleCustomerForm;\r\n    return (\r\n      <>\r\n        <div className=\"form-group mb-4 pb-2 appointment-form\">\r\n          <div className=\"d-flex\">\r\n            <div className=\"d-flex justify-content-start col-md-11 col-12 h5 p-0\">\r\n              {appointmentId && appointmentId > 0\r\n                ? t(\"Edit Appointment\")\r\n                : t(\"Create Appointment\")}\r\n            </div>\r\n            {appointmentId && appointmentId > 0 ? (\r\n              <div\r\n                className=\"d-flex justify-content-end align-items-center bg-white cursor-pointer col-md-1 col-12\"\r\n                onClick={this.handleLogClick}\r\n              >\r\n                <img src={logicon} alt=\"\" width=\"35px\" height=\"35px\" />\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-3 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Date\")}{\" \"}\r\n                <span className=\"error-message text-danger validNo fs-18\">\r\n                  *\r\n                </span>\r\n              </label>\r\n              <div className=\"\">\r\n                <NormalDate\r\n                  value={new Date(formFields.appointmentDate)}\r\n                  name=\"appointmentDate\"\r\n                  type=\"date\"\r\n                  onChange={this.handleChange}\r\n                  minDate={new Date()}\r\n                  showDisabledMonthNavigation\r\n                />\r\n              </div>\r\n              {this.validator.message(\r\n                \"appointmentDate\",\r\n                formFields.appointmentDate,\r\n                \"required|date\"\r\n              )}\r\n            </div>\r\n            <div className=\"col-md-3 mb-3\">\r\n              <div>\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Name\")}{\" \"}\r\n                  <span className=\"error-message text-danger validNo fs-18\">\r\n                    *\r\n                  </span>\r\n                </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                {appointmentId ? (\r\n                  <NormalInput\r\n                    value={formFields.custName}\r\n                    name=\"customerName\"\r\n                    onChange={this.handleSearch}\r\n                    onClick={this.handleClick}\r\n                    disabled\r\n                  />\r\n                ) : (\r\n                  <NormalInput\r\n                    placeholder=\"search\"\r\n                    value={formFields.custName}\r\n                    name=\"customerName\"\r\n                    onChange={this.handleSearch}\r\n                    onClick={this.handleClick}\r\n                  />\r\n                )}\r\n              </div>\r\n              {this.validator.message(\r\n                \"customerName\",\r\n                formFields.customerName,\r\n                \"required\"\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Booking Status\")}{\" \"}\r\n                <span className=\"error-message text-danger validNo fs-18\">\r\n                  *\r\n                </span>\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\" }\r\n                  options={bookingList}\r\n                  value={formFields.bookingStatus} //\r\n                  name=\"bookingStatus\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name status py-1\"\r\n                />\r\n                {this.validator.message(\r\n                  \"Booking Status\",\r\n                  formFields.bookingStatus,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <div>\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Channel\")}\r\n                </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={channelList}\r\n                  value={formFields.Appt_typeid}\r\n                  name=\"Appt_typeid\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n              </div>\r\n              {/* {this.validator.message('Appt_typeid', formFields.Appt_typeid, 'required')} */}\r\n            </div>\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Remark\")}\r\n              </label>\r\n\r\n              <div className=\"input-group\">\r\n                {formFields.remark_setting ? (\r\n                  <NormalTextarea\r\n                    // placeholder=\"Enter here\"\r\n                    // options={siteList}\r\n                    value={formFields.new_remark}\r\n                    name=\"new_remark\"\r\n                    onChange={this.handleChange}\r\n                    disabled\r\n                  />\r\n                ) : (\r\n                  <NormalTextarea\r\n                    // placeholder=\"Enter here\"\r\n                    // options={siteList}\r\n                    value={formFields.new_remark}\r\n                    name=\"new_remark\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                )}\r\n              </div>\r\n              {/* {this.validator.message('Remark', formFields.new_remark, 'required')} */}\r\n            </div>\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <div>\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Source Name\")}\r\n                </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={sourceList}\r\n                  value={formFields.Source_Codeid}\r\n                  name=\"Source_Codeid\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n              </div>\r\n              {/* {this.validator.message('Source name', formFields.Source_Codeid, 'required')} */}\r\n            </div>\r\n            <div className=\"col-md-3 mb-3\">\r\n              <div>\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Room\")}\r\n                </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={roomList}\r\n                  value={formFields.Room_Codeid}\r\n                  name=\"Room_Codeid\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n              </div>\r\n              {/* {this.validator.message('Room', formFields.Room_Codeid, 'required')} */}\r\n            </div>\r\n\r\n            <div className=\"col-md-3 col-12 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Secondary Status\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={secStatusList}\r\n                  value={formFields.sec_status}\r\n                  name=\"sec_status\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n                {/* {this.validator.message('Secondary Status', formFields.sec_status, 'required')} */}\r\n              </div>\r\n            </div>\r\n            {formFields.remark_setting ? (\r\n              <div className=\"col-md-3 mb-3\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  New Remark\r\n                </label>\r\n\r\n                <div className=\"input-group\">\r\n                  <NormalTextarea\r\n                    // placeholder=\"Enter here\"\r\n                    // options={siteList}\r\n                    value={formFields.edit_remark}\r\n                    name=\"edit_remark\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Permanent Remark\")}\r\n              </label>\r\n\r\n              <div className=\"input-group\">\r\n                <NormalTextarea\r\n                  value={formFields.cust_remark}\r\n                  name=\"cust_remark\"\r\n                  onChange={() => {}}\r\n                  disabled\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-2 col-12 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Phone\")}\r\n              </label>\r\n\r\n              <div className=\"input-group\">\r\n                <NormalInput\r\n                  value={formFields.custPhone}\r\n                  name=\"custPhone\"\r\n                  onChange={() => {}}\r\n                  disabled\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {!appointmentId ? (\r\n              <div className=\"col-md-1 col-12 mb-3\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Walkin\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalCheckbox\r\n                    onChange={this.handleChange}\r\n                    value={formFields.walkin}\r\n                    name=\"walkin\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {appointmentId &&\r\n            String(InitStatus).toUpperCase() !== \"\" &&\r\n            String(formFields.bookingStatus).toUpperCase() === \"ARRIVED\" &&\r\n            String(InitStatus).toUpperCase() !== \"ARRIVED\" ? (\r\n              <div className=\"col-md-1 col-12 mb-3\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Cart\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalCheckbox\r\n                    onChange={this.handleChange}\r\n                    value={formFields.cart_create}\r\n                    name=\"cart_create\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {visible ? (\r\n              <div className=\"customerSearch-block\">\r\n                <div className=\"d-flex mt-3 table table-header w-100 m-0\">\r\n                  <div className=\"col-2\">{t(\"Name\")}</div>\r\n                  <div className=\"col-2\">{t(\"Phone\")}</div>\r\n                  <div className=\"col-2\">{t(\"Customer Code\")}</div>\r\n                  <div className=\"col-2\">{t(\"Reference\")}</div>\r\n                  <div className=\"col-3\">{t(\"Email\")}</div>\r\n                  <div className=\"col-1\">{t(\"NRIC\")}</div>\r\n                </div>\r\n                <div className=\"response-table w-100 row\">\r\n                  {console.log(customerOption, \"customer search result\")}\r\n                  {customerOption.length > 0 ? (\r\n                    customerOption.map((item, index) => {\r\n                      return (\r\n                        <div\r\n                          className=\"row m-0 table-body w-100 border\"\r\n                          onClick={() => this.handleSelectCustomer(item)}\r\n                          key={index}\r\n                        >\r\n                          <div className=\"col-2\">{item.cust_name}</div>\r\n                          <div className=\"col-2\">{item.cust_phone1}</div>\r\n                          <div className=\"col-2\">{item.cust_code}</div>\r\n                          <div className=\"col-2\">{item.cust_refer}</div>\r\n                          <div className=\"col-3\">{item.cust_email}</div>\r\n                          <div className=\"col-1\">{item.cust_nric}</div>\r\n                        </div>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <div className=\"text-center w-100\">\r\n                      {t(\"No Data Available\")}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            {isWalkin ? (\r\n              <>\r\n                <AddWalkinCustomer\r\n                  site_codeId={formFields.ItemSite_Codeid}\r\n                  handleWalkInCustomer={this.handleWalkInCustomer}\r\n                />\r\n              </>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n\r\n          {isAppointmentLogModal ? (\r\n            <AppointmentLog\r\n              isAppointmentLogModal={isAppointmentLogModal}\r\n              handleLogClick={this.handleLogClick}\r\n              appointmentId={appointmentId}\r\n            />\r\n          ) : null}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  customerDetail: state.appointment.customerDetail,\r\n  customerList: state.common.customerList,\r\n  multipleCustomerForm: state.appointment.multipleCustomerForm,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n  appointmentCustomerDetail: state.appointment.appointmentCustomerDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      CreateAppointment,\r\n      updateForm,\r\n      getCustomer,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const AppointmentForm = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(AppointmentFormClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}