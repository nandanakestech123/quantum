{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\mobileAppointment\\\\MobileCreateAppointment\\\\MobileAppointmentForm.js\";\nimport React, { Component } from \"react\";\nimport { NormalInput, NormalSelect, NormalButton, NormalDate, NormalModal, NormalCheckbox, NormalTextarea } from \"component/common\";\nimport { CreateAppointment, updateForm } from \"redux/actions/appointment\";\nimport { getCustomer, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { history } from \"helpers\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport closeIcon from \"assets/images/close.png\";\nimport _ from \"lodash\";\nimport { MobileWalkinCustomer } from \"./MobileWalkinCustomer\";\nimport { MobileAppointmentLog } from \"../CommonModal/MobileAppointmentlog\";\nimport logicon from \"assets/images/logicon.png\";\nimport { withTranslation } from \"react-i18next\";\nimport { TableWrapper } from \"component/common\";\nimport { isMobile } from \"react-device-detect\";\nexport class MobileAppointmentFormClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      active: false,\n      appt_fr_time: \"\",\n      appt_to_time: \"\",\n      currentValue: \"-1\",\n      formFields: {\n        customerName: \"\",\n        emp_id: \"\",\n        appointmentDate: new Date(),\n        bookingStatus: \"\",\n        Source_Codeid: \"\",\n        ItemSite_Codeid: \"\",\n        new_remark: \"\",\n        Appt_typeid: \"\",\n        // emp_noid : 4,\n        Room_Codeid: \"\",\n        sec_status: \"\",\n        walkin: false,\n        remark_setting: false,\n        edit_remark: \"\",\n        cart_create: false,\n        cust_StoreCard: false\n      },\n      multipleCustomerForm: {\n        noOfCustomer: 1,\n        treatment: \"\",\n        room: \"\"\n      },\n      bookingList: [],\n      isOpenModal: false,\n      multipleCustomr: 1,\n      customerElement: [],\n      siteList: [],\n      sourceList: [],\n      channelList: [],\n      staffList: [],\n      secStatusList: [],\n      roomList: [],\n      customerOption: [],\n      search: \"\",\n      customerId: 0,\n      appointmentId: null,\n      isWalkin: false,\n      isAppointmentLogModal: false,\n      visible: false,\n      headerDetailsForMobile: [{\n        label: \"\",\n        width: \"500px\"\n      }, {\n        label: \"Customer Code\"\n      }, {\n        label: \"Reference\"\n      }, {\n        label: \"Name\",\n        width: \"300px\"\n      }, {\n        label: \"Phone\"\n      }, {\n        label: \"Email\"\n      }, {\n        label: \"NRIC\"\n      }],\n      headerDetails: [{\n        label: \"Customer Code\"\n      }, {\n        label: \"Reference\"\n      }, {\n        label: \"Name\",\n        width: \"300px\"\n      }, {\n        label: \"Phone\"\n      }, {\n        label: \"Email\"\n      }, {\n        label: \"NRIC\"\n      }],\n      InitStatus: \"\"\n    };\n\n    this.componentWillMount = () => {\n      this.validator = new SimpleReactValidator({\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message text-danger validNo fs14\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 9\n          }\n        }, message),\n        autoForceUpdate: this,\n        validators: {\n          date: {\n            // name the rule\n            message: \"The :attribute must be grater than today.\",\n            rule: (val, params, validator) => {\n              let date1 = new Date(dateFormat(new Date()));\n              let date2 = new Date(dateFormat(val));\n              console.log(\"gagasdfsdfsdffqwef\", date1, date2, date1.getTime(), date2.getTime());\n              return date1.getTime() <= date2.getTime();\n            },\n            //   messageReplace: (message, params) => message.replace(':values', this.helpers.toSentence(params)),  // optional\n            required: true // optional\n\n          }\n        }\n      });\n    };\n\n    this.componentDidMount = async () => {\n      this.props.getCustomer(\"all/\").then(() => {});\n      this.props.getCommonApi(\"bookingstatus/\").then(res => {\n        let {\n          status,\n          data,\n          sec_data\n        } = res;\n        console.log(data);\n\n        if (status === 200) {\n          this.setState({\n            bookingList: data,\n            secStatusList: sec_data\n          });\n        }\n      }); // this.handleCustomerElement()\n\n      this.props.onRef(this);\n      let {\n        staffList,\n        formFields\n      } = this.state;\n      let {\n        basicApptDetail\n      } = this.props;\n      formFields[\"appointmentDate\"] = basicApptDetail.date;\n      let booking_status = \"Booking\";\n      formFields[\"bookingStatus\"] = booking_status;\n      formFields[\"ItemSite_Codeid\"] = basicApptDetail.branchId;\n      this.setState({\n        formFields\n      });\n      await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\n      this.getListData();\n      this.props.getCommonApi(`appointment/Staffs/?Outlet=${this.state.formFields.ItemSite_Codeid}&date=${dateFormat(new Date())}`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            staffList.push({\n              value: value.id,\n              label: value.emp_name\n            });\n          }\n\n          this.setState({\n            staffList\n          });\n        }\n      });\n\n      if (basicApptDetail.appt_id) {\n        console.log(basicApptDetail.appt_id);\n        this.setState({\n          appointmentId: basicApptDetail.appt_id\n        });\n        this.handleAppointmentDetailRender(basicApptDetail.appt_id, false);\n      } else if (this.props.PasteAppointmentId && this.props.PasteAppointmentId > 0) {\n        this.handleAppointmentDetailRender(this.props.PasteAppointmentId, true);\n      }\n    };\n\n    this.handleAppointmentDetailRender = (appt_id, copy) => {\n      let {\n        formFields,\n        InitStatus\n      } = this.state;\n      this.props.getCommonApi(`appointmentedit/${appt_id}/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          if (data.appointment) {\n            console.log(data.appointment, \"selectedCustomer\");\n            formFields[\"custName\"] = data.appointment.cust_name;\n\n            if (!copy) {\n              formFields[\"appointmentDate\"] = data.appointment.appt_date;\n              formFields[\"bookingStatus\"] = data.appointment.appt_status;\n              InitStatus = data.appointment.appt_status;\n            }\n\n            if (copy) {\n              let booking_status = \"Booking\";\n              formFields[\"bookingStatus\"] = booking_status;\n            }\n\n            formFields[\"new_remark\"] = data.appointment.ori_remark;\n            formFields[\"edit_remark\"] = data.appointment.edit_remark;\n            formFields[\"customerName\"] = data.appointment.cust_id;\n            formFields[\"Source_Codeid\"] = data.appointment.source_id;\n            formFields[\"Room_Codeid\"] = data.appointment.Room_Codeid;\n            formFields[\"sec_status\"] = data.appointment.sec_status;\n            formFields[\"Appt_typeid\"] = data.appointment.channel_id;\n            formFields[\"remark_setting\"] = data.appointment.remark_setting;\n            formFields[\"custPhone\"] = data.appointment.cust_phone1;\n            formFields[\"cust_remark\"] = data.appointment.permanent_remark;\n            formFields[\"cust_StoreCard\"] = data.appointment.cust_StoreCard;\n            this.setState({\n              formFields,\n              InitStatus\n            });\n            this.setState({\n              customerId: data.appointment.cust_id\n            });\n            this.props.selectedCustomer(data.appointment.cust_id);\n            this.props.updateForm(\"appointmentCustomerDetail\", formFields);\n          }\n        }\n      });\n    };\n\n    this.getListData = () => {\n      let {\n        staffList,\n        sourceList,\n        siteList,\n        channelList,\n        roomList\n      } = this.state;\n      this.props.getCommonApi(`source/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            sourceList.push({\n              value: value.id,\n              label: value.source_desc\n            });\n          }\n\n          this.setState({\n            sourceList\n          });\n          console.log(sourceList, \"jhksdfkjsdhfks\");\n        }\n      });\n      this.props.getCommonApi(`treatment/Outlet/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            siteList.push({\n              value: value.id,\n              label: value.itemsite_code\n            });\n          }\n\n          this.setState({\n            siteList\n          });\n          console.log(siteList, \"jhksdfkjsdhfks\");\n        }\n      });\n      this.props.getCommonApi(`appttype/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            channelList.push({\n              value: value.id,\n              label: value.appt_type_desc\n            });\n          }\n\n          this.setState({\n            channelList\n          });\n          console.log(siteList, \"jhksdfkjsdhfks\");\n        }\n      });\n      this.props.getCommonApi(`room/?outlet=${this.state.formFields.ItemSite_Codeid}`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            roomList.push({\n              value: value.id,\n              label: value.displayname\n            });\n          }\n\n          this.setState({\n            roomList\n          });\n          console.log(roomList, \"jhksdfkjsdhfks\");\n        }\n      });\n    };\n\n    this.selectTime = async (key, type) => {\n      let {\n        formFields\n      } = this.state;\n\n      if (type === \"appt_fr_time\") {\n        formFields[\"appt_fr_time\"] = key;\n        await this.setState({\n          formFields,\n          appt_fr_time: key\n        });\n      } else {\n        formFields[\"appt_to_time\"] = key;\n        await this.setState({\n          formFields,\n          appt_to_time: key\n        });\n      }\n\n      await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\n      console.log(\"sdfsdfsdfsd\", formFields);\n    };\n\n    this.handleClick = key => {\n      if (!this.state.visible) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      if (this.state.visible) {\n        let {\n          basicApptDetail\n        } = this.props;\n        this.search(basicApptDetail);\n      }\n\n      this.setState(prevState => ({\n        visible: !prevState.visible\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n\n    this.onFocus = () => {\n      this.validator.showMessages();\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        formFields\n      } = this.state;\n      formFields[name] = value;\n      await this.setState({\n        formFields\n      });\n      this.props.updateForm(\"customerDetail\", formFields);\n      await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\n\n      if (name === \"ItemSite_Codeid\") {\n        let {\n          staffList\n        } = this.state;\n        this.props.getCommonApi(`appointment/Staffs/?Outlet=${value}`).then(key => {\n          let {\n            status,\n            data\n          } = key;\n\n          if (status === 200) {\n            for (let value of data) {\n              staffList.push({\n                value: value.id,\n                label: value.emp_name\n              });\n            }\n\n            this.setState({\n              staffList\n            });\n          }\n        });\n      }\n\n      if (name === \"walkin\") {\n        let {\n          formFields\n        } = this.state;\n        formFields[\"customerName\"] = \"\";\n        formFields[\"custName\"] = \"\";\n        formFields[\"cust_refer\"] = \"\";\n        this.setState({\n          formFields\n        });\n        this.setState(prevState => ({\n          isWalkin: !prevState.isWalkin\n        }));\n      }\n\n      if (name == \"bookingStatus\" && String(value).toUpperCase() == \"CANCELLED\") {\n        let {\n          formFields\n        } = this.state;\n        formFields[\"sec_status\"] = \"Rescheduled\";\n        this.setState({\n          formFields\n        });\n      }\n    };\n\n    this.handleMultiple = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        multipleCustomerForm\n      } = this.state;\n\n      if (name === \"noOfCustomer\") {\n        multipleCustomerForm[name] = Number(value);\n      }\n\n      if (name === \"sameForAllTreatment\" || name === \"differentForAllTreatment\") {\n        if (name === \"differentForAllTreatment\") {\n          multipleCustomerForm[\"treatment\"] = 2;\n        } else {\n          multipleCustomerForm[\"treatment\"] = 1;\n        }\n      } else {\n        if (name === \"differentForAllRoom\") {\n          multipleCustomerForm[\"room\"] = 2;\n        } else {\n          multipleCustomerForm[\"room\"] = 1;\n        }\n      }\n\n      await this.setState({\n        multipleCustomerForm\n      });\n      this.props.updateForm(\"multipleCustomerForm\", multipleCustomerForm);\n    };\n\n    this.handleSubmit = () => {\n      history.push(`/admin/newappointment/create/select-treatment`);\n    };\n\n    this.getTime = data => {\n      let time = data.split(\" \");\n      let time1 = time[0].split(\":\");\n      console.log(time, time1, \"kghjhgdjfgsdf\");\n\n      if (time[1] === \"pm\") {\n        return (Number(time1[0]) + 12 === 24 ? \"00\" : Number(time1[0]) + 12) + \":\" + time1[1];\n      } else {\n        return time1[0] < 9 ? \"0\" + time[0] : time1[0] + \":\" + time1[1];\n      }\n    };\n\n    this.handleDialog = () => {\n      let {\n        isOpenModal\n      } = this.state;\n      isOpenModal = !isOpenModal;\n      this.setState({\n        isOpenModal\n      });\n    };\n\n    this.handleMultipleCustomer = async () => {\n      let {\n        multipleCustomerForm\n      } = this.props;\n      await this.setState({\n        multipleCustomr: multipleCustomerForm.noOfCustomer,\n        customerElement: []\n      });\n      console.log(multipleCustomerForm, this.state, \"dkjfkshgfghdfk\", multipleCustomerForm.noOfCustomer);\n      this.handleCustomerElement(multipleCustomerForm.noOfCustomer);\n    };\n\n    this.handleSearch = async event => {\n      //    event.persist();\n      let {\n        formFields,\n        visible\n      } = this.state;\n      formFields[\"custName\"] = event.target.value;\n      visible = true;\n      await this.setState({\n        formFields,\n        visible\n      });\n      console.log(this.state.formFields.custName);\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(async () => {\n          let {\n            customerList\n          } = this.state;\n          let {\n            basicApptDetail\n          } = this.props;\n          this.search(basicApptDetail);\n        }, 500);\n      }\n\n      this.debouncedFn();\n    };\n\n    this.search = basicApptDetail => {\n      let {\n        formFields\n      } = this.state;\n      this.props.getCommonApi(`custappt/?Outlet=${basicApptDetail.branchId ? basicApptDetail.branchId : \"\"}&search=${formFields.custName}`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          // for (let value of data) {\n          //     customerList.push({ value: value.id, label: value.emp_name })\n          // }\n          this.setState({\n            customerOption: data\n          });\n        }\n      });\n    };\n\n    this.handleSelectCustomer = async data => {\n      let {\n        formFields\n      } = this.state;\n      formFields[\"customerName\"] = data.id;\n      formFields[\"custName\"] = data.cust_name;\n      formFields[\"custPhone\"] = data.cust_phone1;\n      formFields[\"cust_remark\"] = data.cust_remark;\n      formFields[\"cust_refer\"] = data.cust_refer;\n      await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\n      await this.setState({\n        formFields,\n        customerOption: []\n      });\n      await this.setState({\n        customerId: data.id\n      });\n      this.props.selectedCustomer(data.id);\n      this.handleClick();\n    };\n\n    this.handleWalkInCustomer = async data => {\n      let {\n        formFields\n      } = this.state;\n      formFields[\"customerName\"] = data.id;\n      formFields[\"custName\"] = data.cust_name;\n      formFields[\"custPhone\"] = data.cust_phone2;\n      formFields[\"cust_remark\"] = \"\";\n      await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\n      this.setState({\n        formFields\n      });\n      this.setState({\n        customerId: data.id\n      });\n      this.props.selectedCustomer(data.id);\n      this.setState(prevState => ({\n        isWalkin: !prevState.isWalkin\n      }));\n    };\n\n    this.handleLogClick = () => {\n      this.setState(prevState => ({\n        isAppointmentLogModal: !prevState.isAppointmentLogModal\n      }));\n    };\n  }\n\n  componentWillUnmount() {\n    this.props.onRef(null);\n  }\n\n  render() {\n    let {\n      appt_fr_time,\n      active,\n      currentValue,\n      bookingList,\n      channelList,\n      secStatusList,\n      roomList,\n      customerOption,\n      isOpenModal,\n      multipleCustomr,\n      appt_to_time,\n      siteList,\n      sourceList,\n      staffList,\n      customerElement,\n      formFields,\n      appointmentId,\n      isWalkin,\n      isAppointmentLogModal,\n      visible,\n      headerDetails,\n      headerDetailsForMobile,\n      InitStatus\n    } = this.state;\n    let {\n      customerDetail,\n      customerList,\n      multipleCustomerForm,\n      t\n    } = this.props;\n    let {\n      noOfCustomer,\n      treatment,\n      room\n    } = multipleCustomerForm;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2 appointment-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-start col-md-11 col-8 h5 p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 13\n      }\n    }, appointmentId && appointmentId > 0 ? t(\"Edit Appointment\") : t(\"Create Appointment\")), appointmentId && appointmentId > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end align-items-center bg-white cursor-pointer col-md-1 col-4\",\n      onClick: this.handleLogClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logicon,\n      alt: \"\",\n      width: \"35px\",\n      height: \"35px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 17\n      }\n    })) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 15\n      }\n    }, t(\"Date\"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error-message text-danger validNo fs-18\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 17\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalDate, {\n      value: new Date(formFields.appointmentDate),\n      name: \"appointmentDate\",\n      type: \"date\",\n      onChange: this.handleChange,\n      minDate: new Date(),\n      showDisabledMonthNavigation: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 17\n      }\n    })), this.validator.message(\"appointmentDate\", formFields.appointmentDate, \"required|date\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 17\n      }\n    }, t(\"Name\"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error-message text-danger validNo fs-18\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 19\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 15\n      }\n    }, appointmentId ? /*#__PURE__*/React.createElement(NormalInput, {\n      value: formFields.custName,\n      name: \"customerName\",\n      onChange: this.handleSearch,\n      onClick: this.handleClick,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 19\n      }\n    }) : /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"search\",\n      value: formFields.custName,\n      name: \"customerName\",\n      onChange: this.handleSearch,\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 19\n      }\n    })), this.validator.message(\"customerName\", formFields.customerName, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 15\n      }\n    }, t(\"Booking Status\"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error-message text-danger validNo fs-18\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 17\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\" }\n    , {\n      options: bookingList,\n      value: formFields.bookingStatus //\n      ,\n      name: \"bookingStatus\",\n      onChange: this.handleChange,\n      className: \"customer-name status py-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 17\n      }\n    }), this.validator.message(\"Booking Status\", formFields.bookingStatus, \"required\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 17\n      }\n    }, t(\"Channel\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"\n    , {\n      options: channelList,\n      value: formFields.Appt_typeid,\n      name: \"Appt_typeid\",\n      onChange: this.handleChange,\n      className: \"customer-name py-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 15\n      }\n    }, t(\"Remark\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 15\n      }\n    }, formFields.remark_setting ? /*#__PURE__*/React.createElement(NormalTextarea, {\n      value: formFields.new_remark,\n      name: \"new_remark\",\n      onChange: this.handleChange,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 19\n      }\n    }) : /*#__PURE__*/React.createElement(NormalTextarea // placeholder=\"Enter here\"\n    // options={siteList}\n    , {\n      value: formFields.new_remark,\n      name: \"new_remark\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 17\n      }\n    }, t(\"Source Name\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"\n    , {\n      options: sourceList,\n      value: formFields.Source_Codeid,\n      name: \"Source_Codeid\",\n      onChange: this.handleChange,\n      className: \"customer-name py-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 682,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 17\n      }\n    }, t(\"Room\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"\n    , {\n      options: roomList,\n      value: formFields.Room_Codeid,\n      name: \"Room_Codeid\",\n      onChange: this.handleChange,\n      className: \"customer-name py-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 688,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 15\n      }\n    }, t(\"Secondary Status\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"\n    , {\n      options: secStatusList,\n      value: formFields.sec_status,\n      name: \"sec_status\",\n      onChange: this.handleChange,\n      className: \"customer-name py-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 17\n      }\n    }))), formFields.remark_setting ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 17\n      }\n    }, t(\"New Remark\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalTextarea // placeholder=\"Enter here\"\n    // options={siteList}\n    , {\n      value: formFields.edit_remark,\n      name: \"edit_remark\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 19\n      }\n    }))) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 733,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 734,\n        columnNumber: 15\n      }\n    }, t(\"Permanent Remark\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalTextarea, {\n      value: formFields.cust_remark,\n      name: \"cust_remark\",\n      onChange: () => {},\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 747,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 748,\n        columnNumber: 15\n      }\n    }, t(\"Phone\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: formFields.custPhone,\n      name: \"custPhone\",\n      onChange: () => {},\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 753,\n        columnNumber: 17\n      }\n    }))), !appointmentId ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1 col-12 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 763,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 764,\n        columnNumber: 17\n      }\n    }, t(\"Walkin\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 767,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalCheckbox, {\n      onChange: this.handleChange,\n      value: formFields.walkin,\n      name: \"walkin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 768,\n        columnNumber: 19\n      }\n    }))) : \"\", appointmentId && String(InitStatus).toUpperCase() !== \"\" && String(formFields.bookingStatus).toUpperCase() === \"ARRIVED\" && String(InitStatus).toUpperCase() !== \"ARRIVED\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1 col-12 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 17\n      }\n    }, t(\"Cart\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalCheckbox, {\n      onChange: this.handleChange,\n      value: formFields.cart_create,\n      name: \"cart_create\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 787,\n        columnNumber: 19\n      }\n    }))) : \"\", visible ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: `customerSearch-block ${isMobile ? \"topSpace\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 799,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 804,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: isMobile ? headerDetailsForMobile : headerDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 805,\n        columnNumber: 21\n      }\n    }, customerOption.length > 0 ? customerOption.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        onClick: () => this.handleSelectCustomer(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 813,\n          columnNumber: 29\n        }\n      }, isMobile ? /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 818,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 819,\n          columnNumber: 35\n        }\n      }, \"\")) : null, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 826,\n          columnNumber: 33\n        }\n      }, item.cust_code)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 830,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 831,\n          columnNumber: 33\n        }\n      }, item.cust_refer)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 835,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 836,\n          columnNumber: 33\n        }\n      }, item.cust_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 840,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 841,\n          columnNumber: 33\n        }\n      }, item.cust_phone1)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 845,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 846,\n          columnNumber: 33\n        }\n      }, item.cust_email)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 850,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 33\n        }\n      }, item.cust_nric)));\n    }) : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 859,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 text-center w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 860,\n        columnNumber: 27\n      }\n    }, t(\"No Data Available\"))))))) : null), isWalkin ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MobileWalkinCustomer, {\n      site_codeId: formFields.ItemSite_Codeid,\n      handleWalkInCustomer: this.handleWalkInCustomer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 15\n      }\n    })) : \"\", isAppointmentLogModal ? /*#__PURE__*/React.createElement(MobileAppointmentLog, {\n      isAppointmentLogModal: isAppointmentLogModal,\n      handleLogClick: this.handleLogClick,\n      appointmentId: appointmentId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 883,\n        columnNumber: 13\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 889,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text mr-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 890,\n        columnNumber: 13\n      }\n    }, t(\"Customer Store Card\")), /*#__PURE__*/React.createElement(NormalCheckbox, {\n      onChange: this.handleChange,\n      value: formFields.cust_StoreCard,\n      name: \"cust_StoreCard\",\n      checked: formFields.cust_StoreCard,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 893,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  customerDetail: state.appointment.customerDetail,\n  customerList: state.common.customerList,\n  multipleCustomerForm: state.appointment.multipleCustomerForm,\n  basicApptDetail: state.appointment.basicApptDetail,\n  appointmentCustomerDetail: state.appointment.appointmentCustomerDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    CreateAppointment,\n    updateForm,\n    getCustomer,\n    getCommonApi\n  }, dispatch);\n};\n\nexport const MobileAppointmentForm = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(MobileAppointmentFormClass));","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/mobileAppointment/MobileCreateAppointment/MobileAppointmentForm.js"],"names":["React","Component","NormalInput","NormalSelect","NormalButton","NormalDate","NormalModal","NormalCheckbox","NormalTextarea","CreateAppointment","updateForm","getCustomer","getCommonApi","connect","bindActionCreators","dateFormat","history","SimpleReactValidator","closeIcon","_","MobileWalkinCustomer","MobileAppointmentLog","logicon","withTranslation","TableWrapper","isMobile","MobileAppointmentFormClass","state","active","appt_fr_time","appt_to_time","currentValue","formFields","customerName","emp_id","appointmentDate","Date","bookingStatus","Source_Codeid","ItemSite_Codeid","new_remark","Appt_typeid","Room_Codeid","sec_status","walkin","remark_setting","edit_remark","cart_create","cust_StoreCard","multipleCustomerForm","noOfCustomer","treatment","room","bookingList","isOpenModal","multipleCustomr","customerElement","siteList","sourceList","channelList","staffList","secStatusList","roomList","customerOption","search","customerId","appointmentId","isWalkin","isAppointmentLogModal","visible","headerDetailsForMobile","label","width","headerDetails","InitStatus","componentWillMount","validator","element","message","autoForceUpdate","validators","date","rule","val","params","date1","date2","console","log","getTime","required","componentDidMount","props","then","res","status","data","sec_data","setState","onRef","basicApptDetail","booking_status","branchId","getListData","key","value","push","id","emp_name","appt_id","handleAppointmentDetailRender","PasteAppointmentId","copy","appointment","cust_name","appt_date","appt_status","ori_remark","cust_id","source_id","channel_id","cust_phone1","permanent_remark","selectedCustomer","source_desc","itemsite_code","appt_type_desc","displayname","selectTime","type","handleClick","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","onFocus","showMessages","handleChange","name","String","toUpperCase","handleMultiple","Number","handleSubmit","time","split","time1","handleDialog","handleMultipleCustomer","handleCustomerElement","handleSearch","event","custName","debouncedFn","debounce","customerList","handleSelectCustomer","cust_remark","cust_refer","handleWalkInCustomer","cust_phone2","handleLogClick","componentWillUnmount","render","customerDetail","t","custPhone","length","map","item","index","cust_code","cust_email","cust_nric","mapStateToProps","common","appointmentCustomerDetail","mapDispatchToProps","dispatch","MobileAppointmentForm"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalInput,\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalDate,\r\n  NormalModal,\r\n  NormalCheckbox,\r\n  NormalTextarea,\r\n} from \"component/common\";\r\nimport { CreateAppointment, updateForm } from \"redux/actions/appointment\";\r\nimport { getCustomer, getCommonApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { history } from \"helpers\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport _ from \"lodash\";\r\nimport { MobileWalkinCustomer } from \"./MobileWalkinCustomer\";\r\nimport { MobileAppointmentLog } from \"../CommonModal/MobileAppointmentlog\";\r\nimport logicon from \"assets/images/logicon.png\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { TableWrapper } from \"component/common\";\r\nimport { isMobile } from \"react-device-detect\";\r\n\r\nexport class MobileAppointmentFormClass extends Component {\r\n  state = {\r\n    active: false,\r\n    appt_fr_time: \"\",\r\n    appt_to_time: \"\",\r\n    currentValue: \"-1\",\r\n    formFields: {\r\n      customerName: \"\",\r\n      emp_id: \"\",\r\n      appointmentDate: new Date(),\r\n      bookingStatus: \"\",\r\n      Source_Codeid: \"\",\r\n      ItemSite_Codeid: \"\",\r\n      new_remark: \"\",\r\n      Appt_typeid: \"\",\r\n      // emp_noid : 4,\r\n      Room_Codeid: \"\",\r\n      sec_status: \"\",\r\n      walkin: false,\r\n      remark_setting: false,\r\n      edit_remark: \"\",\r\n      cart_create: false,\r\n      cust_StoreCard: false,\r\n    },\r\n    multipleCustomerForm: {\r\n      noOfCustomer: 1,\r\n      treatment: \"\",\r\n      room: \"\",\r\n    },\r\n    bookingList: [],\r\n    isOpenModal: false,\r\n    multipleCustomr: 1,\r\n    customerElement: [],\r\n    siteList: [],\r\n    sourceList: [],\r\n    channelList: [],\r\n    staffList: [],\r\n    secStatusList: [],\r\n    roomList: [],\r\n    customerOption: [],\r\n    search: \"\",\r\n    customerId: 0,\r\n    appointmentId: null,\r\n    isWalkin: false,\r\n    isAppointmentLogModal: false,\r\n    visible: false,\r\n    headerDetailsForMobile: [\r\n      { label: \"\", width: \"500px\" },\r\n      { label: \"Customer Code\" },\r\n      { label: \"Reference\" },\r\n      { label: \"Name\", width: \"300px\" },\r\n      { label: \"Phone\" },\r\n      { label: \"Email\" },\r\n      { label: \"NRIC\" },\r\n    ],\r\n    headerDetails: [\r\n      { label: \"Customer Code\" },\r\n      { label: \"Reference\" },\r\n      { label: \"Name\", width: \"300px\" },\r\n      { label: \"Phone\" },\r\n      { label: \"Email\" },\r\n      { label: \"NRIC\" },\r\n    ],\r\n    InitStatus: \"\",\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n      validators: {\r\n        date: {\r\n          // name the rule\r\n          message: \"The :attribute must be grater than today.\",\r\n          rule: (val, params, validator) => {\r\n            let date1 = new Date(dateFormat(new Date()));\r\n            let date2 = new Date(dateFormat(val));\r\n            console.log(\r\n              \"gagasdfsdfsdffqwef\",\r\n              date1,\r\n              date2,\r\n              date1.getTime(),\r\n              date2.getTime()\r\n            );\r\n            return date1.getTime() <= date2.getTime();\r\n          },\r\n          //   messageReplace: (message, params) => message.replace(':values', this.helpers.toSentence(params)),  // optional\r\n          required: true, // optional\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    this.props.getCustomer(\"all/\").then(() => {});\r\n    this.props.getCommonApi(\"bookingstatus/\").then(res => {\r\n      let { status, data, sec_data } = res;\r\n      console.log(data);\r\n      if (status === 200) {\r\n        this.setState({ bookingList: data, secStatusList: sec_data });\r\n      }\r\n    });\r\n    // this.handleCustomerElement()\r\n    this.props.onRef(this);\r\n    let { staffList, formFields } = this.state;\r\n    let { basicApptDetail } = this.props;\r\n    formFields[\"appointmentDate\"] = basicApptDetail.date;\r\n\r\n    let booking_status = \"Booking\";\r\n    formFields[\"bookingStatus\"] = booking_status;\r\n    formFields[\"ItemSite_Codeid\"] = basicApptDetail.branchId;\r\n    this.setState({ formFields });\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    this.getListData();\r\n    this.props\r\n      .getCommonApi(\r\n        `appointment/Staffs/?Outlet=${\r\n          this.state.formFields.ItemSite_Codeid\r\n        }&date=${dateFormat(new Date())}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            staffList.push({ value: value.id, label: value.emp_name });\r\n          }\r\n          this.setState({ staffList });\r\n        }\r\n      });\r\n\r\n    if (basicApptDetail.appt_id) {\r\n      console.log(basicApptDetail.appt_id);\r\n      this.setState({ appointmentId: basicApptDetail.appt_id });\r\n      this.handleAppointmentDetailRender(basicApptDetail.appt_id, false);\r\n    } else if (\r\n      this.props.PasteAppointmentId &&\r\n      this.props.PasteAppointmentId > 0\r\n    ) {\r\n      this.handleAppointmentDetailRender(this.props.PasteAppointmentId, true);\r\n    }\r\n  };\r\n\r\n  handleAppointmentDetailRender = (appt_id, copy) => {\r\n    let { formFields, InitStatus } = this.state;\r\n    this.props.getCommonApi(`appointmentedit/${appt_id}/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        if (data.appointment) {\r\n          console.log(data.appointment, \"selectedCustomer\");\r\n          formFields[\"custName\"] = data.appointment.cust_name;\r\n          if (!copy) {\r\n            formFields[\"appointmentDate\"] = data.appointment.appt_date;\r\n            formFields[\"bookingStatus\"] = data.appointment.appt_status;\r\n            InitStatus = data.appointment.appt_status;\r\n          }\r\n          if (copy) {\r\n            let booking_status = \"Booking\";\r\n            formFields[\"bookingStatus\"] = booking_status;\r\n          }\r\n\r\n          formFields[\"new_remark\"] = data.appointment.ori_remark;\r\n          formFields[\"edit_remark\"] = data.appointment.edit_remark;\r\n          formFields[\"customerName\"] = data.appointment.cust_id;\r\n          formFields[\"Source_Codeid\"] = data.appointment.source_id;\r\n          formFields[\"Room_Codeid\"] = data.appointment.Room_Codeid;\r\n          formFields[\"sec_status\"] = data.appointment.sec_status;\r\n          formFields[\"Appt_typeid\"] = data.appointment.channel_id;\r\n          formFields[\"remark_setting\"] = data.appointment.remark_setting;\r\n          formFields[\"custPhone\"] = data.appointment.cust_phone1;\r\n          formFields[\"cust_remark\"] = data.appointment.permanent_remark;\r\n          formFields[\"cust_StoreCard\"] = data.appointment.cust_StoreCard;\r\n          this.setState({ formFields, InitStatus });\r\n          this.setState({ customerId: data.appointment.cust_id });\r\n          this.props.selectedCustomer(data.appointment.cust_id);\r\n          this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.props.onRef(null);\r\n  }\r\n\r\n  getListData = () => {\r\n    let { staffList, sourceList, siteList, channelList, roomList } = this.state;\r\n\r\n    this.props.getCommonApi(`source/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          sourceList.push({ value: value.id, label: value.source_desc });\r\n        }\r\n        this.setState({ sourceList });\r\n        console.log(sourceList, \"jhksdfkjsdhfks\");\r\n      }\r\n    });\r\n    this.props.getCommonApi(`treatment/Outlet/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          siteList.push({ value: value.id, label: value.itemsite_code });\r\n        }\r\n        this.setState({ siteList });\r\n        console.log(siteList, \"jhksdfkjsdhfks\");\r\n      }\r\n    });\r\n    this.props.getCommonApi(`appttype/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          channelList.push({ value: value.id, label: value.appt_type_desc });\r\n        }\r\n        this.setState({ channelList });\r\n        console.log(siteList, \"jhksdfkjsdhfks\");\r\n      }\r\n    });\r\n    this.props\r\n      .getCommonApi(`room/?outlet=${this.state.formFields.ItemSite_Codeid}`)\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            roomList.push({ value: value.id, label: value.displayname });\r\n          }\r\n          this.setState({ roomList });\r\n          console.log(roomList, \"jhksdfkjsdhfks\");\r\n        }\r\n      });\r\n  };\r\n\r\n  selectTime = async (key, type) => {\r\n    let { formFields } = this.state;\r\n    if (type === \"appt_fr_time\") {\r\n      formFields[\"appt_fr_time\"] = key;\r\n      await this.setState({\r\n        formFields,\r\n        appt_fr_time: key,\r\n      });\r\n    } else {\r\n      formFields[\"appt_to_time\"] = key;\r\n      await this.setState({\r\n        formFields,\r\n        appt_to_time: key,\r\n      });\r\n    }\r\n\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    console.log(\"sdfsdfsdfsd\", formFields);\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.visible) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    if (this.state.visible) {\r\n      let { basicApptDetail } = this.props;\r\n      this.search(basicApptDetail);\r\n    }\r\n    this.setState(prevState => ({\r\n      visible: !prevState.visible,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  onFocus = () => {\r\n    this.validator.showMessages();\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    this.props.updateForm(\"customerDetail\", formFields);\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    if (name === \"ItemSite_Codeid\") {\r\n      let { staffList } = this.state;\r\n      this.props\r\n        .getCommonApi(`appointment/Staffs/?Outlet=${value}`)\r\n        .then(key => {\r\n          let { status, data } = key;\r\n          if (status === 200) {\r\n            for (let value of data) {\r\n              staffList.push({ value: value.id, label: value.emp_name });\r\n            }\r\n            this.setState({ staffList });\r\n          }\r\n        });\r\n    }\r\n    if (name === \"walkin\") {\r\n      let { formFields } = this.state;\r\n      formFields[\"customerName\"] = \"\";\r\n      formFields[\"custName\"] = \"\";\r\n      formFields[\"cust_refer\"] = \"\";\r\n      this.setState({ formFields });\r\n      this.setState(prevState => ({\r\n        isWalkin: !prevState.isWalkin,\r\n      }));\r\n    }\r\n    if (name == \"bookingStatus\" && String(value).toUpperCase() == \"CANCELLED\") {\r\n      let { formFields } = this.state;\r\n      formFields[\"sec_status\"] = \"Rescheduled\";\r\n      this.setState({\r\n        formFields,\r\n      });\r\n    }\r\n  };\r\n\r\n  handleMultiple = async ({ target: { value, name } }) => {\r\n    let { multipleCustomerForm } = this.state;\r\n    if (name === \"noOfCustomer\") {\r\n      multipleCustomerForm[name] = Number(value);\r\n    }\r\n    if (name === \"sameForAllTreatment\" || name === \"differentForAllTreatment\") {\r\n      if (name === \"differentForAllTreatment\") {\r\n        multipleCustomerForm[\"treatment\"] = 2;\r\n      } else {\r\n        multipleCustomerForm[\"treatment\"] = 1;\r\n      }\r\n    } else {\r\n      if (name === \"differentForAllRoom\") {\r\n        multipleCustomerForm[\"room\"] = 2;\r\n      } else {\r\n        multipleCustomerForm[\"room\"] = 1;\r\n      }\r\n    }\r\n\r\n    await this.setState({\r\n      multipleCustomerForm,\r\n    });\r\n    this.props.updateForm(\"multipleCustomerForm\", multipleCustomerForm);\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    history.push(`/admin/newappointment/create/select-treatment`);\r\n  };\r\n\r\n  getTime = data => {\r\n    let time = data.split(\" \");\r\n    let time1 = time[0].split(\":\");\r\n    console.log(time, time1, \"kghjhgdjfgsdf\");\r\n    if (time[1] === \"pm\") {\r\n      return (\r\n        (Number(time1[0]) + 12 === 24 ? \"00\" : Number(time1[0]) + 12) +\r\n        \":\" +\r\n        time1[1]\r\n      );\r\n    } else {\r\n      return time1[0] < 9 ? \"0\" + time[0] : time1[0] + \":\" + time1[1];\r\n    }\r\n  };\r\n\r\n  handleDialog = () => {\r\n    let { isOpenModal } = this.state;\r\n    isOpenModal = !isOpenModal;\r\n    this.setState({\r\n      isOpenModal,\r\n    });\r\n  };\r\n\r\n  handleMultipleCustomer = async () => {\r\n    let { multipleCustomerForm } = this.props;\r\n    await this.setState({\r\n      multipleCustomr: multipleCustomerForm.noOfCustomer,\r\n      customerElement: [],\r\n    });\r\n    console.log(\r\n      multipleCustomerForm,\r\n      this.state,\r\n      \"dkjfkshgfghdfk\",\r\n      multipleCustomerForm.noOfCustomer\r\n    );\r\n    this.handleCustomerElement(multipleCustomerForm.noOfCustomer);\r\n  };\r\n\r\n  handleSearch = async event => {\r\n    //    event.persist();\r\n    let { formFields, visible } = this.state;\r\n    formFields[\"custName\"] = event.target.value;\r\n    visible = true;\r\n    await this.setState({ formFields, visible });\r\n    console.log(this.state.formFields.custName);\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        let { customerList } = this.state;\r\n        let { basicApptDetail } = this.props;\r\n        this.search(basicApptDetail);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  search = basicApptDetail => {\r\n    let { formFields } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `custappt/?Outlet=${\r\n          basicApptDetail.branchId ? basicApptDetail.branchId : \"\"\r\n        }&search=${formFields.custName}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          // for (let value of data) {\r\n          //     customerList.push({ value: value.id, label: value.emp_name })\r\n          // }\r\n          this.setState({ customerOption: data });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSelectCustomer = async data => {\r\n    let { formFields } = this.state;\r\n    formFields[\"customerName\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    formFields[\"custPhone\"] = data.cust_phone1;\r\n    formFields[\"cust_remark\"] = data.cust_remark;\r\n    formFields[\"cust_refer\"] = data.cust_refer;\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    await this.setState({ formFields, customerOption: [] });\r\n    await this.setState({ customerId: data.id });\r\n    this.props.selectedCustomer(data.id);\r\n    this.handleClick();\r\n  };\r\n\r\n  handleWalkInCustomer = async data => {\r\n    let { formFields } = this.state;\r\n    formFields[\"customerName\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    formFields[\"custPhone\"] = data.cust_phone2;\r\n    formFields[\"cust_remark\"] = \"\";\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", formFields);\r\n    this.setState({ formFields });\r\n    this.setState({ customerId: data.id });\r\n    this.props.selectedCustomer(data.id);\r\n    this.setState(prevState => ({\r\n      isWalkin: !prevState.isWalkin,\r\n    }));\r\n  };\r\n\r\n  handleLogClick = () => {\r\n    this.setState(prevState => ({\r\n      isAppointmentLogModal: !prevState.isAppointmentLogModal,\r\n    }));\r\n  };\r\n  render() {\r\n    let {\r\n      appt_fr_time,\r\n      active,\r\n      currentValue,\r\n      bookingList,\r\n      channelList,\r\n      secStatusList,\r\n      roomList,\r\n      customerOption,\r\n      isOpenModal,\r\n      multipleCustomr,\r\n      appt_to_time,\r\n      siteList,\r\n      sourceList,\r\n      staffList,\r\n      customerElement,\r\n      formFields,\r\n      appointmentId,\r\n      isWalkin,\r\n      isAppointmentLogModal,\r\n      visible,\r\n      headerDetails,\r\n      headerDetailsForMobile,\r\n      InitStatus,\r\n    } = this.state;\r\n    let { customerDetail, customerList, multipleCustomerForm, t } = this.props;\r\n    let { noOfCustomer, treatment, room } = multipleCustomerForm;\r\n    return (\r\n      <>\r\n        <div className=\"form-group mb-4 pb-2 appointment-form\">\r\n          <div className=\"d-flex\">\r\n            <div className=\"d-flex justify-content-start col-md-11 col-8 h5 p-0\">\r\n              {appointmentId && appointmentId > 0\r\n                ? t(\"Edit Appointment\")\r\n                : t(\"Create Appointment\")}\r\n            </div>\r\n            {appointmentId && appointmentId > 0 ? (\r\n              <div\r\n                className=\"d-flex justify-content-end align-items-center bg-white cursor-pointer col-md-1 col-4\"\r\n                onClick={this.handleLogClick}\r\n              >\r\n                <img src={logicon} alt=\"\" width=\"35px\" height=\"35px\" />\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-3 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Date\")}{\" \"}\r\n                <span className=\"error-message text-danger validNo fs-18\">\r\n                  *\r\n                </span>\r\n              </label>\r\n              <div className=\"\">\r\n                <NormalDate\r\n                  value={new Date(formFields.appointmentDate)}\r\n                  name=\"appointmentDate\"\r\n                  type=\"date\"\r\n                  onChange={this.handleChange}\r\n                  minDate={new Date()}\r\n                  showDisabledMonthNavigation\r\n                />\r\n              </div>\r\n              {this.validator.message(\r\n                \"appointmentDate\",\r\n                formFields.appointmentDate,\r\n                \"required|date\"\r\n              )}\r\n            </div>\r\n            <div className=\"col-md-3 mb-3\">\r\n              <div>\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Name\")}{\" \"}\r\n                  <span className=\"error-message text-danger validNo fs-18\">\r\n                    *\r\n                  </span>\r\n                </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                {appointmentId ? (\r\n                  <NormalInput\r\n                    value={formFields.custName}\r\n                    name=\"customerName\"\r\n                    onChange={this.handleSearch}\r\n                    onClick={this.handleClick}\r\n                    disabled\r\n                  />\r\n                ) : (\r\n                  <NormalInput\r\n                    placeholder=\"search\"\r\n                    value={formFields.custName}\r\n                    name=\"customerName\"\r\n                    onChange={this.handleSearch}\r\n                    onClick={this.handleClick}\r\n                  />\r\n                )}\r\n              </div>\r\n              {this.validator.message(\r\n                \"customerName\",\r\n                formFields.customerName,\r\n                \"required\"\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Booking Status\")}{\" \"}\r\n                <span className=\"error-message text-danger validNo fs-18\">\r\n                  *\r\n                </span>\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\" }\r\n                  options={bookingList}\r\n                  value={formFields.bookingStatus} //\r\n                  name=\"bookingStatus\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name status py-1\"\r\n                />\r\n                {this.validator.message(\r\n                  \"Booking Status\",\r\n                  formFields.bookingStatus,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <div>\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Channel\")}\r\n                </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={channelList}\r\n                  value={formFields.Appt_typeid}\r\n                  name=\"Appt_typeid\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n              </div>\r\n              {/* {this.validator.message('Appt_typeid', formFields.Appt_typeid, 'required')} */}\r\n            </div>\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Remark\")}\r\n              </label>\r\n\r\n              <div className=\"input-group\">\r\n                {formFields.remark_setting ? (\r\n                  <NormalTextarea\r\n                    value={formFields.new_remark}\r\n                    name=\"new_remark\"\r\n                    onChange={this.handleChange}\r\n                    disabled\r\n                  />\r\n                ) : (\r\n                  <NormalTextarea\r\n                    // placeholder=\"Enter here\"\r\n                    // options={siteList}\r\n                    value={formFields.new_remark}\r\n                    name=\"new_remark\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                )}\r\n              </div>\r\n              {/* {this.validator.message('Remark', formFields.new_remark, 'required')} */}\r\n            </div>\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <div>\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Source Name\")}\r\n                </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={sourceList}\r\n                  value={formFields.Source_Codeid}\r\n                  name=\"Source_Codeid\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n              </div>\r\n              {/* {this.validator.message('Source name', formFields.Source_Codeid, 'required')} */}\r\n            </div>\r\n            <div className=\"col-md-3 mb-3\">\r\n              <div>\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Room\")}\r\n                </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={roomList}\r\n                  value={formFields.Room_Codeid}\r\n                  name=\"Room_Codeid\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-md-3 col-12 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Secondary Status\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={secStatusList}\r\n                  value={formFields.sec_status}\r\n                  name=\"sec_status\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n                {/* {this.validator.message('Secondary Status', formFields.sec_status, 'required')} */}\r\n              </div>\r\n            </div>\r\n            {formFields.remark_setting ? (\r\n              <div className=\"col-md-3 mb-3\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"New Remark\")}\r\n                </label>\r\n\r\n                <div className=\"input-group\">\r\n                  <NormalTextarea\r\n                    // placeholder=\"Enter here\"\r\n                    // options={siteList}\r\n                    value={formFields.edit_remark}\r\n                    name=\"edit_remark\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n\r\n            <div className=\"col-md-3 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Permanent Remark\")}\r\n              </label>\r\n\r\n              <div className=\"input-group\">\r\n                <NormalTextarea\r\n                  value={formFields.cust_remark}\r\n                  name=\"cust_remark\"\r\n                  onChange={() => {}}\r\n                  disabled\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-2 col-12 mb-3\">\r\n              <label className=\"text-left text-black common-label-text \">\r\n                {t(\"Phone\")}\r\n              </label>\r\n\r\n              <div className=\"input-group\">\r\n                <NormalInput\r\n                  value={formFields.custPhone}\r\n                  name=\"custPhone\"\r\n                  onChange={() => {}}\r\n                  disabled\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {!appointmentId ? (\r\n              <div className=\"col-md-1 col-12 mb-3\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Walkin\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalCheckbox\r\n                    onChange={this.handleChange}\r\n                    value={formFields.walkin}\r\n                    name=\"walkin\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {appointmentId &&\r\n            String(InitStatus).toUpperCase() !== \"\" &&\r\n            String(formFields.bookingStatus).toUpperCase() === \"ARRIVED\" &&\r\n            String(InitStatus).toUpperCase() !== \"ARRIVED\" ? (\r\n              <div className=\"col-md-1 col-12 mb-3\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Cart\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalCheckbox\r\n                    onChange={this.handleChange}\r\n                    value={formFields.cart_create}\r\n                    name=\"cart_create\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {visible ? (\r\n              <>\r\n                <div\r\n                  className={`customerSearch-block ${\r\n                    isMobile ? \"topSpace\" : \"\"\r\n                  }`}\r\n                >\r\n                  <div className=\"table-container\">\r\n                    <TableWrapper\r\n                      headerDetails={\r\n                        isMobile ? headerDetailsForMobile : headerDetails\r\n                      }\r\n                    >\r\n                      {customerOption.length > 0 ? (\r\n                        customerOption.map((item, index) => {\r\n                          return (\r\n                            <tr\r\n                              key={index}\r\n                              onClick={() => this.handleSelectCustomer(item)}\r\n                            >\r\n                              {isMobile ? (\r\n                                <td>\r\n                                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                                    {\"\"}\r\n                                  </div>\r\n                                </td>\r\n                              ) : null}\r\n\r\n                              <td>\r\n                                <div className=\"text-left\">\r\n                                  {item.cust_code}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"text-left\">\r\n                                  {item.cust_refer}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"text-left\">\r\n                                  {item.cust_name}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"text-left\">\r\n                                  {item.cust_phone1}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"text-left\">\r\n                                  {item.cust_email}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"text-left\">\r\n                                  {item.cust_nric}\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <tr>\r\n                          <div className=\"col-12 text-center w-100\">\r\n                            {t(\"No Data Available\")}\r\n                          </div>\r\n                        </tr>\r\n                      )}\r\n                    </TableWrapper>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : null}\r\n          </div>\r\n\r\n          {isWalkin ? (\r\n            <>\r\n              <MobileWalkinCustomer\r\n                site_codeId={formFields.ItemSite_Codeid}\r\n                handleWalkInCustomer={this.handleWalkInCustomer}\r\n              />\r\n            </>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {isAppointmentLogModal ? (\r\n            <MobileAppointmentLog\r\n              isAppointmentLogModal={isAppointmentLogModal}\r\n              handleLogClick={this.handleLogClick}\r\n              appointmentId={appointmentId}\r\n            />\r\n          ) : null}\r\n          <div className=\"col-md-3 col-12 \">\r\n            <label className=\"text-left text-black common-label-text mr-4\">\r\n              {t(\"Customer Store Card\")}\r\n            </label>\r\n            <NormalCheckbox\r\n              onChange={this.handleChange}\r\n              value={formFields.cust_StoreCard}\r\n              name=\"cust_StoreCard\"\r\n              checked={formFields.cust_StoreCard}\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  customerDetail: state.appointment.customerDetail,\r\n  customerList: state.common.customerList,\r\n  multipleCustomerForm: state.appointment.multipleCustomerForm,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n  appointmentCustomerDetail: state.appointment.appointmentCustomerDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      CreateAppointment,\r\n      updateForm,\r\n      getCustomer,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const MobileAppointmentForm = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(MobileAppointmentFormClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}