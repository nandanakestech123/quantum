{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NormalSelect,NormalButton,NormalModal,NormalInput}from'component/common';import'./style.scss';import{updateForm,getSelectedTreatmentList}from'redux/actions/appointment';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import SimpleReactValidator from'simple-react-validator';import closeIcon from'assets/images/close.png';import{getCommonApi,commonCreateApi}from'redux/actions/common';import{dateFormat}from'service/helperFunctions';import{history}from'helpers';import _ from'lodash';import{TableWrapper}from'component/common';import{TreatmentPackage}from'./modal/TreatmentPackage';export var SelectTreatmentClass=/*#__PURE__*/function(_Component){_inherits(SelectTreatmentClass,_Component);var _super=_createSuper(SelectTreatmentClass);function SelectTreatmentClass(){var _this;_classCallCheck(this,SelectTreatmentClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={treatmentDetail:[],formFields:{start_time:\"\",end_time:\"\",Item_Codeid:null,add_duration:\"\",emp_no:[],requesttherapist:true,Item_CodeName:\"\"},selectedList:[{start_time:\"\",end_time:\"\",Item_Codeid:null,add_duration:\"\",emp_no:[],requesttherapist:false}],outletOption:[],staffOption:[],roomOption:[],list:[],isOpenModal:false,categoryList:[],treatmentList:[],siteList:[],treatmentField:{category:\"\",treatment:\"\"},timeDropdown:[],duration:[],index:null,search:\"\",selectTreatmentId:\"\",treatmentListHeader:[{label:'Category',className:\"w-50\"},{label:'Service',className:\"w-75\"},{label:'Duration',className:\"w-25\"},{label:'price',className:\"w-50\"}],meta:{},isTreatementModal:false};_this.getStaffAvailability=function(){_this.props.getCommonApi(\"staffsavailable/?Appt_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"))).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     staffList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({list:data});}});};_this.handleSearch=function(event){event.persist();console.log(event.target.value,event.target,event,\"dfhdfjghkjfghj\");var treatmentField=_this.state.treatmentField;treatmentField['treatment']=event.target.value;_this.setState({search:event.target.value,treatmentField:treatmentField});if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;var data={search:searchString};// this.queryHandler(data)\nvar customerList=_this.state.customerList;var basicApptDetail=_this.props.basicApptDetail;_this.search(data);},500);}_this.debouncedFn();};_this.search=function(data){var _data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit,_data$search=data.search,search=_data$search===void 0?\"\":_data$search;var selectTreatmentId=_this.state.selectTreatmentId;_this.props.getCommonApi(\"stocklist/?Item_Deptid=\".concat(selectTreatmentId,\"&search=\").concat(search,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(function(res){console.log(res);if(res.status===200){_this.setState({treatmentList:res.data.dataList,meta:res.data.meta.pagination});}});};_this.handlePagination=function(page){_this.search(page);};_this.handleChangeTreatment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,_this$state,treatmentField,treatmentList,search,selectTreatmentId,page,limit;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;_this$state=_this.state,treatmentField=_this$state.treatmentField,treatmentList=_this$state.treatmentList,search=_this$state.search,selectTreatmentId=_this$state.selectTreatmentId;console.log(\"uihwkjrwkej\",name,value);treatmentField[name]=value;if(name===\"category\"){selectTreatmentId=value;}else if(name===\"treatment\"){search=value;}_context.next=7;return _this.setState({treatmentField:treatmentField,selectTreatmentId:selectTreatmentId,search:search});case 7:page=1,limit=10;_this.props.getCommonApi(\"stocklist/?Item_Deptid=\".concat(selectTreatmentId,\"&search=\").concat(search,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(function(res){console.log(res);if(res.status===200){_this.setState({treatmentList:res.data.dataList,meta:res.data.meta.pagination});}});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3,index){var _ref3$target,value,name,_this$state2,formFields,selectedList;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;_this$state2=_this.state,formFields=_this$state2.formFields,selectedList=_this$state2.selectedList;console.log(\"hgjfgjfcghfghfgh\",name,value,index);if(!(selectedList.length>0&&selectedList.length!==index+1)){_context2.next=13;break;}console.log(\"hgjfgjfcghfghfgh indexed\",name,value,index);selectedList[index][name]=value;if(name===\"add_duration\"){selectedList[index]['end_time']=_this.addTimes(selectedList[index][\"start_time\"],value);selectedList[index+1][\"start_time\"]=selectedList[index]['end_time'];}_context2.next=9;return _this.setState({selectedList:selectedList});case 9:_context2.next=11;return _this.props.updateForm('treatmentList',selectedList);case 11:_context2.next=24;break;case 13:console.log(\"hgjfgjfcghfghfgh else\",name,value,index);formFields[name]=value;if(name===\"add_duration\"){formFields['end_time']=_this.addTimes(formFields[\"start_time\"],value);}_context2.next=18;return _this.setState({formFields:formFields});case 18:selectedList.splice(selectedList.length-1,1);selectedList.push(formFields);_context2.next=22;return _this.setState({selectedList:selectedList});case 22:_context2.next=24;return _this.props.updateForm('treatmentList',selectedList);case 24:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}();_this.handleMultiSelect=function(data){var formFields=_this.state.formFields;var list=[];var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;list.push(key.value);}}catch(err){_iterator.e(err);}finally{_iterator.f();}formFields['emp_no']=list;_this.setState({formFields:formFields});console.log(formFields,\"oyokkjk\");};_this.handleSubmit=function(){// this.props.handleConfirmBooking()\nvar _this$props=_this.props,appointmentCustomerDetail=_this$props.appointmentCustomerDetail,appointmentTreatmentList=_this$props.appointmentTreatmentList;console.log(appointmentCustomerDetail,appointmentTreatmentList,\"sdfgdfsdggf\");var data={Appointment:{appt_date:dateFormat(new Date(appointmentCustomerDetail.appointmentDate),\"yyyy-mm-dd\"),Appt_typeid:appointmentCustomerDetail.Appt_typeid,cust_noid:appointmentCustomerDetail.customerName,new_remark:appointmentCustomerDetail.new_remark,// emp_noid: appointmentCustomerDetail.emp_id,\nSource_Codeid:appointmentCustomerDetail.Source_Codeid,Room_Codeid:appointmentCustomerDetail.Room_Codeid,appt_status:appointmentCustomerDetail.bookingStatus,sec_status:appointmentCustomerDetail.sec_status,ItemSite_Codeid:appointmentCustomerDetail.ItemSite_Codeid},Treatment:appointmentTreatmentList};if(appointmentCustomerDetail.customerName&&appointmentCustomerDetail.bookingStatus){_this.props.commonCreateApi(\"appointment/\",data).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(res){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(res.status===201)){_context3.next=8;break;}_context3.next=3;return _this.props.updateForm('treatmentList',[]);case 3:_context3.next=5;return _this.props.updateForm('basicApptDetail',{});case 5:_context3.next=7;return _this.props.updateForm('appointmentCustomerDetail',{});case 7:history.push('/admin/appointment');case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref5.apply(this,arguments);};}());}else{_this.props.showErrorMessage();}};_this.getDateTime=function(data){var date=new Date(data);date=String(date).split(\" \");var date1=date[2]+\"th \"+date[1]+\", \"+date[3];var time=date[4].split(\":\");var time1=String(Number(time[0])>12?Number(time[0])-12:time[0])+\":\"+time[1]+(Number(time[0])>12?\"PM\":\"AM\");return time1+\", \"+date1;};_this.handleDialog=function(){_this.setState({isOpenModal:false,index:null});};_this.handleMultipleCustomer=function(){_this.setState({isOpenModal:false});};_this.handleSelectPackage=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data){var _this$state3,formFields,selectedList,index,listCount;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:debugger;_this$state3=_this.state,formFields=_this$state3.formFields,selectedList=_this$state3.selectedList,index=_this$state3.index;if(!(selectedList.length===1||selectedList.length===index+1)){_context4.next=10;break;}formFields[\"start_time\"]=formFields[\"start_time\"];formFields[\"end_time\"]=_this.addTimes(formFields[\"start_time\"],data.add_duration);formFields[\"Item_Codeid\"]=data.id;formFields[\"Item_CodeName\"]=data.item_desc;formFields[\"add_duration\"]=data.add_duration;_context4.next=10;return _this.setState({formFields:formFields});case 10:if(!(selectedList.length>index+1)){_context4.next=18;break;}listCount=selectedList.length-1;selectedList[listCount][\"end_time\"]=_this.addTimes(selectedList[listCount][\"start_time\"],data.add_duration);selectedList[listCount][\"Item_Codeid\"]=data.id;selectedList[listCount][\"Item_CodeName\"]=data.item_desc;selectedList[listCount][\"add_duration\"]=data.add_duration;_context4.next=18;return _this.setState({selectedList:selectedList});case 18:selectedList.splice(selectedList.length-1,1);selectedList.push(formFields);_context4.next=22;return _this.setState({selectedList:selectedList});case 22:_context4.next=24;return _this.props.updateForm('treatmentList',selectedList);case 24:_this.setState({isOpenModal:false});case 25:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref6.apply(this,arguments);};}();_this.handleSelectTreatment=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){var treatmentList,_this$state4,formFields,selectedList,index;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:treatmentList=_this.state.treatmentList;_this$state4=_this.state,formFields=_this$state4.formFields,selectedList=_this$state4.selectedList,index=_this$state4.index;console.log(\"uihwkjrwkej\",selectedList.length,\"===\",index);if(!(selectedList.length===1||selectedList.length===index+1)){_context5.next=11;break;}formFields[\"start_time\"]=formFields[\"start_time\"];formFields[\"end_time\"]=_this.addTimes(formFields[\"start_time\"],data.add_duration);formFields[\"Item_Codeid\"]=data.id;formFields[\"Item_CodeName\"]=data.item_desc;formFields[\"add_duration\"]=data.add_duration;_context5.next=11;return _this.setState({formFields:formFields});case 11:console.log(index);if(!(selectedList.length>index+1)){_context5.next=18;break;}selectedList[index]['Item_CodeName']=data.item_desc;selectedList[index][\"Item_Codeid\"]=data.id;selectedList[index][\"add_duration\"]=data.add_duration;_context5.next=18;return _this.setState({selectedList:selectedList});case 18:selectedList.splice(selectedList.length-1,1);selectedList.push(formFields);_context5.next=22;return _this.setState({selectedList:selectedList});case 22:_context5.next=24;return _this.props.updateForm('treatmentList',selectedList);case 24:_this.setState({isOpenModal:false});case 25:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x6){return _ref7.apply(this,arguments);};}();_this.timeToMins=function(time){var b=time.split(':');return b[0]*60+ +b[1];};_this.timeFromMins=function(mins){function z(n){return(n<10?'0':'')+n;}var h=(mins/60|0)%24;var m=mins%60;return z(h)+':'+z(m);};_this.addTimes=function(t0,t1){return _this.timeFromMins(_this.timeToMins(t0)+_this.timeToMins(t1));};_this.handleAddtreatment=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _this$state5,selectedList,formFields;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$state5=_this.state,selectedList=_this$state5.selectedList,formFields=_this$state5.formFields;formFields={start_time:selectedList[selectedList.length-1].end_time,end_time:\"\",Item_Codeid:null,add_duration:\"\",emp_no:[],requesttherapist:false};selectedList.push({start_time:selectedList[selectedList.length-1].end_time,end_time:\"\",Item_Codeid:1,Item_CodeName:\"\",add_duration:\"\",emp_no:[],requesttherapist:false});_context6.next=5;return _this.setState({selectedList:selectedList,formFields:formFields});case 5:_context6.next=7;return _this.props.updateForm('treatmentList',selectedList);case 7:case\"end\":return _context6.stop();}}},_callee6);}));_this.deleteTreatment=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(index){var selectedList;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:selectedList=_this.state.selectedList;selectedList.splice(index,1);_this.setState({selectedList:selectedList});_context7.next=5;return _this.props.updateForm('treatmentList',selectedList);case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref9.apply(this,arguments);};}();_this.handleTreatementmodal=function(){_this.setState(function(prevState){return{isTreatementModal:!prevState.isTreatementModal};});};return _this;}_createClass(SelectTreatmentClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.search({});}},{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:this});var _this$state6=this.state,appointmentDetail=_this$state6.appointmentDetail,categoryList=_this$state6.categoryList,staffOption=_this$state6.staffOption,selectedList=_this$state6.selectedList,formFields=_this$state6.formFields,duration=_this$state6.duration;// this.props.getSelectedTreatmentList(`?appt_id=${appointmentDetail.id}`).then((res) => {\n//     console.log(\"namekkuhkjn\", res)\n// })\nvar basicApptDetail=this.props.basicApptDetail;formFields['start_time']=basicApptDetail?basicApptDetail.time:\"\";selectedList[0]['start_time']=basicApptDetail?basicApptDetail.time:\"\";this.setState({formFields:formFields,selectedList:selectedList});this.props.getCommonApi(\"itemdept/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var value=_step2.value;categoryList.push({value:value.id,label:value.itm_desc});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this2.setState({categoryList:categoryList});}});this.props.getCommonApi(\"appointment/Staffs/?Outlet=\".concat(basicApptDetail.branchId,\"&date=\").concat(dateFormat(new Date()))).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator3=_createForOfIteratorHelper(data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var value=_step3.value;staffOption.push({value:value.id,label:value.emp_name});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this2.setState({staffOption:staffOption});}});this.props.getCommonApi(\"treatment/Duration/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator4=_createForOfIteratorHelper(data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var value=_step4.value;duration.push({value:value,label:value});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this2.setState({duration:duration});}});this.getStaffAvailability();}},{key:\"render\",value:function render(){var _this3=this;var _this$state7=this.state,outletOption=_this$state7.outletOption,staffOption=_this$state7.staffOption,roomOption=_this$state7.roomOption,selectedList=_this$state7.selectedList,siteList=_this$state7.siteList,list=_this$state7.list,formFields=_this$state7.formFields,timeDropdown=_this$state7.timeDropdown,duration=_this$state7.duration,isOpenModal=_this$state7.isOpenModal,treatmentField=_this$state7.treatmentField,_this$state7$treatmen=_this$state7.treatmentList,treatmentList=_this$state7$treatmen===void 0?[]:_this$state7$treatmen,categoryList=_this$state7.categoryList,treatmentListHeader=_this$state7.treatmentListHeader,meta=_this$state7.meta,isTreatementModal=_this$state7.isTreatementModal;var _this$props2=this.props,customerDetail=_this$props2.customerDetail,selectedTreatmentList=_this$props2.selectedTreatmentList,customerId=_this$props2.customerId;var outlet=customerDetail.outlet,staff=customerDetail.staff,rooms=customerDetail.rooms;return/*#__PURE__*/React.createElement(\"div\",{className:\"create-appointment select-treatment-appointment\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\" col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"appointment\"},/*#__PURE__*/React.createElement(\"div\",{className:\"appointment-holder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"select-treatment select-list w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row selected selected-header mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},\"Start\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},\"End\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 p-0 header-detail\"},\"Services\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0 header-detail\"},\"Duration\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},\"Treatment staff\")),selectedList.length>0?selectedList.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row selected  mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 mr-1 p-0\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"start\"// options={timeDropdown}\n,value:item.start_time,name:\"start_time\",onChange:_this3.handleChange,className:\"customer-name p-0\",disabled:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 mr-1 p-0\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"end\"// options={timeDropdown}\n,value:item.end_time,name:\"end_time\",onChange:_this3.handleChange,className:\"customer-name p-0\",disabled:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mr-1 p-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header-detail\"}),/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onClick:function onClick(){return _this3.setState({isOpenModal:true,index:index});},className:\"customer-name p-0 px-2\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 mr-1 p-0 header-detail\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:duration,value:item.add_duration,name:\"add_duration\",onChange:function onChange(e){return _this3.handleChange(e,index);},className:\"customer-name p-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:staffOption,value:item.emp_no,name:\"emp_no\",onChange:function onChange(e){return _this3.handleChange(e,index);},className:\"customer-name p-0\"})),selectedList.length===index+1?/*#__PURE__*/React.createElement(\"div\",{className:\"ml-3\",onClick:_this3.handleAddtreatment},/*#__PURE__*/React.createElement(\"svg\",{width:\"31\",height:\"30\",viewBox:\"0 0 31 30\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"rect\",{width:\"31\",height:\"30\",fill:\"#F9F9F9\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M15 8V22\",stroke:\"#848484\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M8 15H22\",stroke:\"#848484\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}))):/*#__PURE__*/React.createElement(\"img\",{width:\"25\",height:\"25\",onClick:function onClick(){return _this3.deleteTreatment(index);},className:\"ml-3\",src:closeIcon,alt:\"\"}));}):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"confirm confirm-selected mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 mr-4 fs-15 \",label:\"Treatment Package\",onClick:this.handleTreatementmodal}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 mr-4 ml-4 fs-15 \",label:\"cancel\",onClick:function onClick(){return history.push('/admin/appointment');}}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 ml-5 fs-15 \",label:\"Confirm Booking\",onClick:this.handleSubmit}))))))))),/*#__PURE__*/React.createElement(NormalModal,{className:\"multiple-appointment select-category\",style:{minWidth:\"800px\"},modal:isOpenModal,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pl-0 mb-3 fs-18 py-2\"},\"Select Treatment\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Category\",/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:categoryList,value:treatmentField.category,name:\"category\",onChange:this.handleChangeTreatment,className:\"customer-name p-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Service\",/*#__PURE__*/React.createElement(\"input\",{// placeholder=\"Enter here\"\n// options={siteList}\nvalue:treatmentField.treatment,name:\"treatment\",onChange:this.handleSearch,className:\"search px-3 p-0\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-container table-responsive mt-3\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:treatmentListHeader,queryHandler:this.handlePagination,pageMeta:meta},treatmentList.length>0?treatmentList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\",onClick:function onClick(){return _this3.handleSelectTreatment(item);},key:index},/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.Item_Class)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.item_desc)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.add_duration)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.item_price)));}):/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"No data available\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center justify-center w-100\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-3\",mainbg:true,className:\"col-12 ml-4 fs-15 \",label:\"Cancel\",onClick:this.handleDialog})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},isTreatementModal?/*#__PURE__*/React.createElement(TreatmentPackage,{isTreatementModal:isTreatementModal,handleTreatementmodal:this.handleTreatementmodal,handleSelectPackage:this.handleSelectPackage,customerId:customerId}):''));}}]);return SelectTreatmentClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,appointmentDetail:state.appointment.appointmentDetail,selectedTreatmentList:state.appointment.selectedTreatmentList,basicApptDetail:state.appointment.basicApptDetail,appointmentCustomerDetail:state.appointment.appointmentCustomerDetail,appointmentTreatmentList:state.appointment.appointmentTreatmentList};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({updateForm:updateForm,getSelectedTreatmentList:getSelectedTreatmentList,getCommonApi:getCommonApi,commonCreateApi:commonCreateApi},dispatch);};export var SelectTreatment=connect(mapStateToProps,mapDispatchToProps)(SelectTreatmentClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Appointment/CreateAppointment/selectTreatment.js"],"names":["React","Component","NormalSelect","NormalButton","NormalModal","NormalInput","updateForm","getSelectedTreatmentList","connect","bindActionCreators","SimpleReactValidator","closeIcon","getCommonApi","commonCreateApi","dateFormat","history","_","TableWrapper","TreatmentPackage","SelectTreatmentClass","state","treatmentDetail","formFields","start_time","end_time","Item_Codeid","add_duration","emp_no","requesttherapist","Item_CodeName","selectedList","outletOption","staffOption","roomOption","list","isOpenModal","categoryList","treatmentList","siteList","treatmentField","category","treatment","timeDropdown","duration","index","search","selectTreatmentId","treatmentListHeader","label","className","meta","isTreatementModal","getStaffAvailability","props","Date","then","key","status","data","setState","handleSearch","event","persist","console","log","target","value","debouncedFn","debounce","searchString","customerList","basicApptDetail","page","limit","res","dataList","pagination","handlePagination","handleChangeTreatment","name","handleChange","length","addTimes","splice","push","handleMultiSelect","handleSubmit","appointmentCustomerDetail","appointmentTreatmentList","Appointment","appt_date","appointmentDate","Appt_typeid","cust_noid","customerName","new_remark","Source_Codeid","Room_Codeid","appt_status","bookingStatus","sec_status","ItemSite_Codeid","Treatment","showErrorMessage","getDateTime","date","String","split","date1","time","time1","Number","handleDialog","handleMultipleCustomer","handleSelectPackage","id","item_desc","listCount","handleSelectTreatment","timeToMins","b","timeFromMins","mins","z","n","h","m","t0","t1","handleAddtreatment","deleteTreatment","handleTreatementmodal","prevState","validator","element","message","autoForceUpdate","appointmentDetail","itm_desc","branchId","emp_name","customerDetail","selectedTreatmentList","customerId","outlet","staff","rooms","map","item","e","minWidth","Item_Class","item_price","mapStateToProps","appointment","mapDispatchToProps","dispatch","SelectTreatment"],"mappings":"w6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,YAAT,CAAuBC,YAAvB,CAAqCC,WAArC,CAAkDC,WAAlD,KAAqE,kBAArE,CACA,MAAO,cAAP,CACA,OAASC,UAAT,CAAqBC,wBAArB,KAAqD,2BAArD,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,OAASC,YAAT,CAAuBC,eAAvB,KAA8C,sBAA9C,CACA,OAASC,UAAT,KAA2B,yBAA3B,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,OAAQC,gBAAR,KAA+B,0BAA/B,CAEA,UAAaC,CAAAA,oBAAb,mXACIC,KADJ,CACY,CACJC,eAAe,CAAE,EADb,CAEJC,UAAU,CAAE,CACRC,UAAU,CAAE,EADJ,CAERC,QAAQ,CAAE,EAFF,CAGRC,WAAW,CAAE,IAHL,CAIRC,YAAY,CAAE,EAJN,CAKRC,MAAM,CAAE,EALA,CAMRC,gBAAgB,CAAE,IANV,CAORC,aAAa,CAAE,EAPP,CAFR,CAWJC,YAAY,CAAE,CACV,CACIP,UAAU,CAAE,EADhB,CAEIC,QAAQ,CAAE,EAFd,CAGIC,WAAW,CAAE,IAHjB,CAIIC,YAAY,CAAE,EAJlB,CAKIC,MAAM,CAAE,EALZ,CAMIC,gBAAgB,CAAE,KANtB,CADU,CAXV,CAqBJG,YAAY,CAAE,EArBV,CAsBJC,WAAW,CAAE,EAtBT,CAuBJC,UAAU,CAAE,EAvBR,CAwBJC,IAAI,CAAE,EAxBF,CAyBJC,WAAW,CAAE,KAzBT,CA0BJC,YAAY,CAAE,EA1BV,CA2BJC,aAAa,CAAE,EA3BX,CA4BJC,QAAQ,CAAE,EA5BN,CA6BJC,cAAc,CAAE,CACZC,QAAQ,CAAE,EADE,CAEZC,SAAS,CAAE,EAFC,CA7BZ,CAiCJC,YAAY,CAAE,EAjCV,CAkCJC,QAAQ,CAAE,EAlCN,CAmCJC,KAAK,CAAE,IAnCH,CAoCJC,MAAM,CAAE,EApCJ,CAqCJC,iBAAiB,CAAE,EArCf,CAsCJC,mBAAmB,CAAE,CACjB,CAAEC,KAAK,CAAE,UAAT,CAAqBC,SAAS,CAAE,MAAhC,CADiB,CAEjB,CAAED,KAAK,CAAE,SAAT,CAAoBC,SAAS,CAAE,MAA/B,CAFiB,CAGjB,CAAED,KAAK,CAAE,UAAT,CAAqBC,SAAS,CAAE,MAAhC,CAHiB,CAIjB,CAAED,KAAK,CAAE,OAAT,CAAkBC,SAAS,CAAE,MAA7B,CAJiB,CAtCjB,CA4CJC,IAAI,CAAE,EA5CF,CA6CJC,iBAAiB,CAAE,KA7Cf,CADZ,OAkGIC,oBAlGJ,CAkG2B,UAAM,CACzB,MAAKC,KAAL,CAAWzC,YAAX,sCAAsDE,UAAU,CAAC,GAAIwC,CAAAA,IAAJ,EAAD,CAAa,YAAb,CAAhE,GAA8FC,IAA9F,CAAmG,SAACC,GAAD,CAAS,CACxG,GAAMC,CAAAA,MAAN,CAAuBD,GAAvB,CAAMC,MAAN,CAAcC,IAAd,CAAuBF,GAAvB,CAAcE,IAAd,CACA,GAAID,MAAM,GAAK,GAAf,CAAoB,CAChB;AACA;AACA;AACA,MAAKE,QAAL,CAAc,CAAEzB,IAAI,CAAEwB,IAAR,CAAd,EACH,CACJ,CARD,EASH,CA5GL,OA8GIE,YA9GJ,CA8GmB,SAACC,KAAD,CAAW,CACtBA,KAAK,CAACC,OAAN,GACAC,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACI,MAAN,CAAaC,KAAzB,CAAgCL,KAAK,CAACI,MAAtC,CAA8CJ,KAA9C,CAAqD,gBAArD,EACA,GAAMtB,CAAAA,cAAN,CAAyB,MAAKnB,KAA9B,CAAMmB,cAAN,CACAA,cAAc,CAAC,WAAD,CAAd,CAA8BsB,KAAK,CAACI,MAAN,CAAaC,KAA3C,CACA,MAAKP,QAAL,CAAc,CAAEd,MAAM,CAAEgB,KAAK,CAACI,MAAN,CAAaC,KAAvB,CAA8B3B,cAAc,CAAdA,cAA9B,CAAd,EACA,GAAI,CAAC,MAAK4B,WAAV,CAAuB,CACnB,MAAKA,WAAL,CAAmBnD,CAAC,CAACoD,QAAF,CAAW,UAAM,CAChC,GAAIC,CAAAA,YAAY,CAAGR,KAAK,CAACI,MAAN,CAAaC,KAAhC,CACC,GAAIR,CAAAA,IAAI,CAAG,CAAEb,MAAM,CAAEwB,YAAV,CAAX,CACD;AACA,GAAMC,CAAAA,YAAN,CAAuB,MAAKlD,KAA5B,CAAMkD,YAAN,CACA,GAAMC,CAAAA,eAAN,CAA0B,MAAKlB,KAA/B,CAAMkB,eAAN,CACA,MAAK1B,MAAL,CAAYa,IAAZ,EACH,CAPkB,CAOhB,GAPgB,CAAnB,CAQH,CACD,MAAKS,WAAL,GACH,CA/HL,OAiIItB,MAjIJ,CAiIa,SAACa,IAAD,CAAU,CACf,eAA4CA,IAA5C,CAAMc,IAAN,CAAMA,IAAN,qBAAa,CAAb,wBAA4Cd,IAA5C,CAAgBe,KAAhB,CAAgBA,KAAhB,sBAAwB,EAAxB,0BAA4Cf,IAA5C,CAA4Bb,MAA5B,CAA4BA,MAA5B,uBAAqC,EAArC,cACA,GAAKC,CAAAA,iBAAL,CAA2B,MAAK1B,KAAhC,CAAK0B,iBAAL,CACA,MAAKO,KAAL,CAAWzC,YAAX,kCAAkDkC,iBAAlD,oBAA8ED,MAA9E,kBAA6F2B,IAA7F,mBAA2GC,KAA3G,GAAoHlB,IAApH,CAAyH,SAACmB,GAAD,CAAS,CAChIX,OAAO,CAACC,GAAR,CAAYU,GAAZ,EACE,GAAIA,GAAG,CAACjB,MAAJ,GAAe,GAAnB,CAAwB,CACpB,MAAKE,QAAL,CAAc,CAAEtB,aAAa,CAAEqC,GAAG,CAAChB,IAAJ,CAASiB,QAA1B,CAAoCzB,IAAI,CAAEwB,GAAG,CAAChB,IAAJ,CAASR,IAAT,CAAc0B,UAAxD,CAAd,EACH,CACJ,CALD,EAMH,CA1IL,OA4IIC,gBA5IJ,CA4IuB,SAACL,IAAD,CAAU,CACzB,MAAK3B,MAAL,CAAY2B,IAAZ,EACH,CA9IL,OAgJIM,qBAhJJ,2FAgJ4B,gQAASb,MAAT,CAAmBC,KAAnB,aAAmBA,KAAnB,CAA0Ba,IAA1B,aAA0BA,IAA1B,aAC+C,MAAK3D,KADpD,CACdmB,cADc,aACdA,cADc,CACEF,aADF,aACEA,aADF,CACiBQ,MADjB,aACiBA,MADjB,CACyBC,iBADzB,aACyBA,iBADzB,CAEpBiB,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2Be,IAA3B,CAAiCb,KAAjC,EACA3B,cAAc,CAACwC,IAAD,CAAd,CAAuBb,KAAvB,CACA,GAAIa,IAAI,GAAK,UAAb,CAAyB,CACrBjC,iBAAiB,CAAGoB,KAApB,CACH,CAFD,IAEO,IAAIa,IAAI,GAAG,WAAX,CAAuB,CAC1BlC,MAAM,CAAGqB,KAAT,CACH,CARmB,sBASd,OAAKP,QAAL,CAAc,CAChBpB,cAAc,CAAdA,cADgB,CAEhBO,iBAAiB,CAAjBA,iBAFgB,CAGhBD,MAAM,CAANA,MAHgB,CAAd,CATc,QAehB2B,IAfgB,CAeT,CAfS,CAeNC,KAfM,CAeE,EAfF,CAgBpB,MAAKpB,KAAL,CAAWzC,YAAX,kCAAkDkC,iBAAlD,oBAA8ED,MAA9E,kBAA6F2B,IAA7F,mBAA2GC,KAA3G,GAAoHlB,IAApH,CAAyH,SAACmB,GAAD,CAAS,CAC9HX,OAAO,CAACC,GAAR,CAAYU,GAAZ,EACE,GAAIA,GAAG,CAACjB,MAAJ,GAAe,GAAnB,CAAwB,CACpB,MAAKE,QAAL,CAAc,CAAEtB,aAAa,CAAEqC,GAAG,CAAChB,IAAJ,CAASiB,QAA1B,CAAoCzB,IAAI,CAAEwB,GAAG,CAAChB,IAAJ,CAASR,IAAT,CAAc0B,UAAxD,CAAd,EACH,CACJ,CALH,EAhBoB,sDAhJ5B,sEAwKII,YAxKJ,2FAwKmB,wBAAoCpC,KAApC,0MAASqB,MAAT,CAAmBC,KAAnB,cAAmBA,KAAnB,CAA0Ba,IAA1B,cAA0BA,IAA1B,cACwB,MAAK3D,KAD7B,CACLE,UADK,cACLA,UADK,CACOQ,YADP,cACOA,YADP,CAEXiC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgCe,IAAhC,CAAsCb,KAAtC,CAA6CtB,KAA7C,EAFW,KAGPd,YAAY,CAACmD,MAAb,CAAsB,CAAtB,EAA2BnD,YAAY,CAACmD,MAAb,GAAyBrC,KAAK,CAAG,CAHrD,4BAIPmB,OAAO,CAACC,GAAR,CAAY,0BAAZ,CAAwCe,IAAxC,CAA8Cb,KAA9C,CAAqDtB,KAArD,EACAd,YAAY,CAACc,KAAD,CAAZ,CAAoBmC,IAApB,EAA4Bb,KAA5B,CACA,GAAGa,IAAI,GAAG,cAAV,CAAyB,CACrBjD,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,EAAkC,MAAKsC,QAAL,CAAcpD,YAAY,CAACc,KAAD,CAAZ,CAAoB,YAApB,CAAd,CAAiDsB,KAAjD,CAAlC,CACApC,YAAY,CAACc,KAAK,CAAC,CAAP,CAAZ,CAAsB,YAAtB,EAAsCd,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CAAtC,CACH,CATM,uBAUD,OAAKe,QAAL,CAAc,CAChB7B,YAAY,CAAZA,YADgB,CAAd,CAVC,gCAaD,OAAKuB,KAAL,CAAW/C,UAAX,CAAsB,eAAtB,CAAuCwB,YAAvC,CAbC,yCAePiC,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAAqCe,IAArC,CAA2Cb,KAA3C,CAAkDtB,KAAlD,EACAtB,UAAU,CAACyD,IAAD,CAAV,CAAmBb,KAAnB,CACA,GAAGa,IAAI,GAAG,cAAV,CAAyB,CACrBzD,UAAU,CAAC,UAAD,CAAV,CAAyB,MAAK4D,QAAL,CAAc5D,UAAU,CAAC,YAAD,CAAxB,CAAwC4C,KAAxC,CAAzB,CACH,CAnBM,wBAoBD,OAAKP,QAAL,CAAc,CAChBrC,UAAU,CAAVA,UADgB,CAAd,CApBC,SAuBPQ,YAAY,CAACqD,MAAb,CAAqBrD,YAAY,CAACmD,MAAb,CAAsB,CAA3C,CAA+C,CAA/C,EACAnD,YAAY,CAACsD,IAAb,CAAkB9D,UAAlB,EAxBO,wBAyBD,OAAKqC,QAAL,CAAc,CAChB7B,YAAY,CAAZA,YADgB,CAAd,CAzBC,iCA4BD,OAAKuB,KAAL,CAAW/C,UAAX,CAAsB,eAAtB,CAAuCwB,YAAvC,CA5BC,0DAxKnB,2EAwMIuD,iBAxMJ,CAwMwB,SAAC3B,IAAD,CAAU,CAC1B,GAAMpC,CAAAA,UAAN,CAAqB,MAAKF,KAA1B,CAAME,UAAN,CACA,GAAIY,CAAAA,IAAI,CAAG,EAAX,CAF0B,yCAGVwB,IAHU,YAG1B,+CAAsB,IAAbF,CAAAA,GAAa,aAClBtB,IAAI,CAACkD,IAAL,CAAU5B,GAAG,CAACU,KAAd,EACH,CALyB,qDAM1B5C,UAAU,CAAC,QAAD,CAAV,CAAuBY,IAAvB,CACA,MAAKyB,QAAL,CAAc,CAAErC,UAAU,CAAVA,UAAF,CAAd,EACAyC,OAAO,CAACC,GAAR,CAAY1C,UAAZ,CAAwB,SAAxB,EACH,CAjNL,OAmNIgE,YAnNJ,CAmNmB,UAAM,CACjB;AACA,gBAA8D,MAAKjC,KAAnE,CAAMkC,yBAAN,aAAMA,yBAAN,CAAiCC,wBAAjC,aAAiCA,wBAAjC,CACAzB,OAAO,CAACC,GAAR,CAAYuB,yBAAZ,CAAuCC,wBAAvC,CAAiE,aAAjE,EACA,GAAI9B,CAAAA,IAAI,CAAG,CACP+B,WAAW,CAAE,CACTC,SAAS,CAAE5E,UAAU,CAAC,GAAIwC,CAAAA,IAAJ,CAASiC,yBAAyB,CAACI,eAAnC,CAAD,CAAsD,YAAtD,CADZ,CAETC,WAAW,CAAEL,yBAAyB,CAACK,WAF9B,CAGTC,SAAS,CAAEN,yBAAyB,CAACO,YAH5B,CAITC,UAAU,CAAER,yBAAyB,CAACQ,UAJ7B,CAKT;AACAC,aAAa,CAAET,yBAAyB,CAACS,aANhC,CAOTC,WAAW,CAAEV,yBAAyB,CAACU,WAP9B,CAQTC,WAAW,CAAEX,yBAAyB,CAACY,aAR9B,CASTC,UAAU,CAAEb,yBAAyB,CAACa,UAT7B,CAUTC,eAAe,CAAEd,yBAAyB,CAACc,eAVlC,CADN,CAaPC,SAAS,CAAEd,wBAbJ,CAAX,CAeA,GAAGD,yBAAyB,CAACO,YAA1B,EAA0CP,yBAAyB,CAACY,aAAvE,CAAqF,CACrF,MAAK9C,KAAL,CAAWxC,eAAX,gBAA2C6C,IAA3C,EAAiDH,IAAjD,2FAAsD,kBAAOmB,GAAP,2HAC9CA,GAAG,CAACjB,MAAJ,GAAe,GAD+B,kDAExC,OAAKJ,KAAL,CAAW/C,UAAX,CAAsB,eAAtB,CAAuC,EAAvC,CAFwC,+BAGxC,OAAK+C,KAAL,CAAW/C,UAAX,CAAsB,iBAAtB,CAAyC,EAAzC,CAHwC,+BAIxC,OAAK+C,KAAL,CAAW/C,UAAX,CAAsB,2BAAtB,CAAmD,EAAnD,CAJwC,QAK9CS,OAAO,CAACqE,IAAR,CAAa,oBAAb,EAL8C,wDAAtD,kEAQH,CATG,IASG,CACH,MAAK/B,KAAL,CAAWkD,gBAAX,GACH,CACA,CAlPL,OAoPIC,WApPJ,CAoPkB,SAAC9C,IAAD,CAAU,CACpB,GAAI+C,CAAAA,IAAI,CAAG,GAAInD,CAAAA,IAAJ,CAASI,IAAT,CAAX,CACA+C,IAAI,CAAGC,MAAM,CAACD,IAAD,CAAN,CAAaE,KAAb,CAAmB,GAAnB,CAAP,CACA,GAAIC,CAAAA,KAAK,CAAGH,IAAI,CAAC,CAAD,CAAJ,CAAU,KAAV,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CAA4B,IAA5B,CAAmCA,IAAI,CAAC,CAAD,CAAnD,CACA,GAAII,CAAAA,IAAI,CAAGJ,IAAI,CAAC,CAAD,CAAJ,CAAQE,KAAR,CAAc,GAAd,CAAX,CACA,GAAIG,CAAAA,KAAK,CAAGJ,MAAM,CAACK,MAAM,CAACF,IAAI,CAAC,CAAD,CAAL,CAAN,CAAkB,EAAlB,CAAwBE,MAAM,CAACF,IAAI,CAAC,CAAD,CAAL,CAAN,CAAkB,EAA1C,CAAgDA,IAAI,CAAC,CAAD,CAArD,CAAN,CAAkE,GAAlE,CAAwEA,IAAI,CAAC,CAAD,CAA5E,EAAmFE,MAAM,CAACF,IAAI,CAAC,CAAD,CAAL,CAAN,CAAkB,EAAlB,CAAuB,IAAvB,CAA8B,IAAjH,CAAZ,CACA,MAAOC,CAAAA,KAAK,CAAG,IAAR,CAAeF,KAAtB,CACH,CA3PL,OA6PII,YA7PJ,CA6PmB,UAAM,CACjB,MAAKrD,QAAL,CAAc,CAAExB,WAAW,CAAE,KAAf,CAAsBS,KAAK,CAAE,IAA7B,CAAd,EACH,CA/PL,OAiQIqE,sBAjQJ,CAiQ6B,UAAM,CAC3B,MAAKtD,QAAL,CAAc,CAAExB,WAAW,CAAE,KAAf,CAAd,EACH,CAnQL,OAqQI+E,mBArQJ,2FAqQ0B,kBAAOxD,IAAP,+KAClB,SADkB,aAEuB,MAAKtC,KAF5B,CAEZE,UAFY,cAEZA,UAFY,CAEAQ,YAFA,cAEAA,YAFA,CAEcc,KAFd,cAEcA,KAFd,MAGfd,YAAY,CAACmD,MAAb,GAAsB,CAAtB,EAA2BnD,YAAY,CAACmD,MAAb,GAAsBrC,KAAK,CAAC,CAHxC,4BAIdtB,UAAU,CAAC,YAAD,CAAV,CAA2BA,UAAU,CAAC,YAAD,CAArC,CACAA,UAAU,CAAC,UAAD,CAAV,CAAyB,MAAK4D,QAAL,CAAc5D,UAAU,CAAC,YAAD,CAAxB,CAAwCoC,IAAI,CAAChC,YAA7C,CAAzB,CACAJ,UAAU,CAAC,aAAD,CAAV,CAA4BoC,IAAI,CAACyD,EAAjC,CACA7F,UAAU,CAAC,eAAD,CAAV,CAA8BoC,IAAI,CAAC0D,SAAnC,CACA9F,UAAU,CAAC,cAAD,CAAV,CAA6BoC,IAAI,CAAChC,YAAlC,CARc,wBASR,OAAKiC,QAAL,CAAc,CAChBrC,UAAU,CAAVA,UADgB,CAAd,CATQ,cAaXQ,YAAY,CAACmD,MAAb,CAAoBrC,KAAK,CAAC,CAbf,4BAcNyE,SAdM,CAcOvF,YAAY,CAACmD,MAAb,CAAsB,CAd7B,CAeVnD,YAAY,CAACuF,SAAD,CAAZ,CAAwB,UAAxB,EAAsC,MAAKnC,QAAL,CAAcpD,YAAY,CAACuF,SAAD,CAAZ,CAAwB,YAAxB,CAAd,CAAqD3D,IAAI,CAAChC,YAA1D,CAAtC,CACAI,YAAY,CAACuF,SAAD,CAAZ,CAAwB,aAAxB,EAAyC3D,IAAI,CAACyD,EAA9C,CACArF,YAAY,CAACuF,SAAD,CAAZ,CAAwB,eAAxB,EAA2C3D,IAAI,CAAC0D,SAAhD,CACAtF,YAAY,CAACuF,SAAD,CAAZ,CAAwB,cAAxB,EAA0C3D,IAAI,CAAChC,YAA/C,CAlBU,wBAmBR,OAAKiC,QAAL,CAAc,CAChB7B,YAAY,CAAZA,YADgB,CAAd,CAnBQ,SAuBlBA,YAAY,CAACqD,MAAb,CAAqBrD,YAAY,CAACmD,MAAb,CAAsB,CAA3C,CAA+C,CAA/C,EACAnD,YAAY,CAACsD,IAAb,CAAkB9D,UAAlB,EAxBkB,wBAyBZ,OAAKqC,QAAL,CAAc,CAChB7B,YAAY,CAAZA,YADgB,CAAd,CAzBY,iCA4BZ,OAAKuB,KAAL,CAAW/C,UAAX,CAAsB,eAAtB,CAAuCwB,YAAvC,CA5BY,SA6BlB,MAAK6B,QAAL,CAAc,CAAExB,WAAW,CAAE,KAAf,CAAd,EA7BkB,yDArQ1B,uEAoSImF,qBApSJ,2FAoS4B,kBAAO5D,IAAP,mLACdrB,aADc,CACI,MAAKjB,KADT,CACdiB,aADc,cAEqB,MAAKjB,KAF1B,CAEdE,UAFc,cAEdA,UAFc,CAEFQ,YAFE,cAEFA,YAFE,CAEYc,KAFZ,cAEYA,KAFZ,CAGpBmB,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BlC,YAAY,CAACmD,MAAxC,CAAgD,KAAhD,CAAuDrC,KAAvD,EAHoB,KAIjBd,YAAY,CAACmD,MAAb,GAAsB,CAAtB,EAA2BnD,YAAY,CAACmD,MAAb,GAAsBrC,KAAK,CAAC,CAJtC,4BAMhBtB,UAAU,CAAC,YAAD,CAAV,CAA2BA,UAAU,CAAC,YAAD,CAArC,CACAA,UAAU,CAAC,UAAD,CAAV,CAAyB,MAAK4D,QAAL,CAAc5D,UAAU,CAAC,YAAD,CAAxB,CAAwCoC,IAAI,CAAChC,YAA7C,CAAzB,CACAJ,UAAU,CAAC,aAAD,CAAV,CAA4BoC,IAAI,CAACyD,EAAjC,CACA7F,UAAU,CAAC,eAAD,CAAV,CAA8BoC,IAAI,CAAC0D,SAAnC,CACA9F,UAAU,CAAC,cAAD,CAAV,CAA6BoC,IAAI,CAAChC,YAAlC,CAVgB,wBAWV,OAAKiC,QAAL,CAAc,CAChBrC,UAAU,CAAVA,UADgB,CAAd,CAXU,SAepByC,OAAO,CAACC,GAAR,CAAYpB,KAAZ,EAfoB,KAgBjBd,YAAY,CAACmD,MAAb,CAAoBrC,KAAK,CAAC,CAhBT,4BAiBhBd,YAAY,CAACc,KAAD,CAAZ,CAAoB,eAApB,EAAuCc,IAAI,CAAC0D,SAA5C,CACAtF,YAAY,CAACc,KAAD,CAAZ,CAAoB,aAApB,EAAqCc,IAAI,CAACyD,EAA1C,CACArF,YAAY,CAACc,KAAD,CAAZ,CAAoB,cAApB,EAAsCc,IAAI,CAAChC,YAA3C,CAnBgB,wBAoBV,OAAKiC,QAAL,CAAc,CAChB7B,YAAY,CAAZA,YADgB,CAAd,CApBU,SAyBpBA,YAAY,CAACqD,MAAb,CAAqBrD,YAAY,CAACmD,MAAb,CAAsB,CAA3C,CAA+C,CAA/C,EACAnD,YAAY,CAACsD,IAAb,CAAkB9D,UAAlB,EA1BoB,wBA2Bd,OAAKqC,QAAL,CAAc,CAChB7B,YAAY,CAAZA,YADgB,CAAd,CA3Bc,iCA+Bd,OAAKuB,KAAL,CAAW/C,UAAX,CAAsB,eAAtB,CAAuCwB,YAAvC,CA/Bc,SAgCpB,MAAK6B,QAAL,CAAc,CAAExB,WAAW,CAAE,KAAf,CAAd,EAhCoB,yDApS5B,uEAuUIoF,UAvUJ,CAuUiB,SAACV,IAAD,CAAU,CACnB,GAAIW,CAAAA,CAAC,CAAGX,IAAI,CAACF,KAAL,CAAW,GAAX,CAAR,CACA,MAAOa,CAAAA,CAAC,CAAC,CAAD,CAAD,CAAO,EAAP,CAAY,EAACA,CAAC,CAAC,CAAD,CAArB,CACH,CA1UL,OA8UIC,YA9UJ,CA8UmB,SAACC,IAAD,CAAU,CACrB,QAASC,CAAAA,CAAT,CAAWC,CAAX,CAAc,CAAE,MAAO,CAACA,CAAC,CAAG,EAAJ,CAAS,GAAT,CAAe,EAAhB,EAAsBA,CAA7B,CAAiC,CACjD,GAAIC,CAAAA,CAAC,CAAG,CAACH,IAAI,CAAG,EAAP,CAAY,CAAb,EAAkB,EAA1B,CACA,GAAII,CAAAA,CAAC,CAAGJ,IAAI,CAAG,EAAf,CACA,MAAOC,CAAAA,CAAC,CAACE,CAAD,CAAD,CAAO,GAAP,CAAaF,CAAC,CAACG,CAAD,CAArB,CACH,CAnVL,OAsVI5C,QAtVJ,CAsVe,SAAC6C,EAAD,CAAKC,EAAL,CAAY,CACnB,MAAO,OAAKP,YAAL,CAAkB,MAAKF,UAAL,CAAgBQ,EAAhB,EAAsB,MAAKR,UAAL,CAAgBS,EAAhB,CAAxC,CAAP,CACH,CAxVL,OA0VIC,kBA1VJ,sEA0VyB,8LACkB,MAAK7G,KADvB,CACXU,YADW,cACXA,YADW,CACGR,UADH,cACGA,UADH,CAEjBA,UAAU,CAAG,CACTC,UAAU,CAAEO,YAAY,CAACA,YAAY,CAACmD,MAAb,CAAsB,CAAvB,CAAZ,CAAsCzD,QADzC,CAETA,QAAQ,CAAE,EAFD,CAGTC,WAAW,CAAE,IAHJ,CAITC,YAAY,CAAE,EAJL,CAKTC,MAAM,CAAE,EALC,CAMTC,gBAAgB,CAAE,KANT,CAAb,CAQAE,YAAY,CAACsD,IAAb,CAAkB,CACd7D,UAAU,CAAEO,YAAY,CAACA,YAAY,CAACmD,MAAb,CAAsB,CAAvB,CAAZ,CAAsCzD,QADpC,CAEdA,QAAQ,CAAE,EAFI,CAGdC,WAAW,CAAE,CAHC,CAIdI,aAAa,CAAE,EAJD,CAKdH,YAAY,CAAE,EALA,CAMdC,MAAM,CAAE,EANM,CAOdC,gBAAgB,CAAE,KAPJ,CAAlB,EAViB,uBAoBX,OAAK+B,QAAL,CAAc,CAAE7B,YAAY,CAAZA,YAAF,CAAgBR,UAAU,CAAVA,UAAhB,CAAd,CApBW,+BAsBX,OAAK+B,KAAL,CAAW/C,UAAX,CAAsB,eAAtB,CAAuCwB,YAAvC,CAtBW,yDA1VzB,SAmXIoG,eAnXJ,2FAmXsB,kBAAOtF,KAAP,uIACRd,YADQ,CACS,MAAKV,KADd,CACRU,YADQ,CAEdA,YAAY,CAACqD,MAAb,CAAoBvC,KAApB,CAA2B,CAA3B,EACA,MAAKe,QAAL,CAAc,CAAE7B,YAAY,CAAZA,YAAF,CAAd,EAHc,uBAIR,OAAKuB,KAAL,CAAW/C,UAAX,CAAsB,eAAtB,CAAuCwB,YAAvC,CAJQ,yDAnXtB,uEA0XIqG,qBA1XJ,CA0X4B,UAAM,CAC1B,MAAKxE,QAAL,CAAc,SAACyE,SAAD,QAAgB,CAC1BjF,iBAAiB,CAAE,CAACiF,SAAS,CAACjF,iBADJ,CAAhB,EAAd,EAGH,CA9XL,iFAgDI,4BAAmB,CACf,KAAKN,MAAL,CAAY,EAAZ,EACH,CAlDL,kCAmDI,6BAAqB,iBACjB,KAAKwF,SAAL,CAAiB,GAAI3H,CAAAA,oBAAJ,CAAyB,CACtC4H,OAAO,CAAE,iBAAAC,OAAO,qBAAI,4BAAM,SAAS,CAAC,wCAAhB,EAA0DA,OAA1D,CAAJ,EADsB,CAEtCC,eAAe,CAAE,IAFqB,CAAzB,CAAjB,CAIA,iBAA2F,KAAKpH,KAAhG,CAAMqH,iBAAN,cAAMA,iBAAN,CAAyBrG,YAAzB,cAAyBA,YAAzB,CAAuCJ,WAAvC,cAAuCA,WAAvC,CAAoDF,YAApD,cAAoDA,YAApD,CAAkER,UAAlE,cAAkEA,UAAlE,CAA8EqB,QAA9E,cAA8EA,QAA9E,CACA;AACA;AACA;AACA,GAAM4B,CAAAA,eAAN,CAA0B,KAAKlB,KAA/B,CAAMkB,eAAN,CACAjD,UAAU,CAAC,YAAD,CAAV,CAA2BiD,eAAe,CAAGA,eAAe,CAACsC,IAAnB,CAA0B,EAApE,CACA/E,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,EAAgCyC,eAAe,CAAGA,eAAe,CAACsC,IAAnB,CAA0B,EAAzE,CACA,KAAKlD,QAAL,CAAc,CACVrC,UAAU,CAAVA,UADU,CAEVQ,YAAY,CAAZA,YAFU,CAAd,EAKA,KAAKuB,KAAL,CAAWzC,YAAX,cAAqC2C,IAArC,CAA0C,SAACC,GAAD,CAAS,CAC/C,GAAMC,CAAAA,MAAN,CAAuBD,GAAvB,CAAMC,MAAN,CAAcC,IAAd,CAAuBF,GAAvB,CAAcE,IAAd,CACA,GAAID,MAAM,GAAK,GAAf,CAAoB,2CACEC,IADF,aAChB,kDAAwB,IAAfQ,CAAAA,KAAe,cACpB9B,YAAY,CAACgD,IAAb,CAAkB,CAAElB,KAAK,CAAEA,KAAK,CAACiD,EAAf,CAAmBnE,KAAK,CAAEkB,KAAK,CAACwE,QAAhC,CAAlB,EACH,CAHe,uDAIhB,MAAI,CAAC/E,QAAL,CAAc,CAAEvB,YAAY,CAAZA,YAAF,CAAd,EACH,CACJ,CARD,EASA,KAAKiB,KAAL,CAAWzC,YAAX,sCAAsD2D,eAAe,CAACoE,QAAtE,kBAAuF7H,UAAU,CAAC,GAAIwC,CAAAA,IAAJ,EAAD,CAAjG,GAAiHC,IAAjH,CAAsH,SAACC,GAAD,CAAS,CAC3H,GAAMC,CAAAA,MAAN,CAAuBD,GAAvB,CAAMC,MAAN,CAAcC,IAAd,CAAuBF,GAAvB,CAAcE,IAAd,CACA,GAAID,MAAM,GAAK,GAAf,CAAoB,2CACEC,IADF,aAChB,kDAAwB,IAAfQ,CAAAA,KAAe,cACpBlC,WAAW,CAACoD,IAAZ,CAAiB,CAAElB,KAAK,CAAEA,KAAK,CAACiD,EAAf,CAAmBnE,KAAK,CAAEkB,KAAK,CAAC0E,QAAhC,CAAjB,EACH,CAHe,uDAIhB,MAAI,CAACjF,QAAL,CAAc,CAAE3B,WAAW,CAAXA,WAAF,CAAd,EACH,CACJ,CARD,EASA,KAAKqB,KAAL,CAAWzC,YAAX,wBAA+C2C,IAA/C,CAAoD,SAACC,GAAD,CAAS,CACzD,GAAMC,CAAAA,MAAN,CAAuBD,GAAvB,CAAMC,MAAN,CAAcC,IAAd,CAAuBF,GAAvB,CAAcE,IAAd,CACA,GAAID,MAAM,GAAK,GAAf,CAAoB,2CACEC,IADF,aAChB,kDAAwB,IAAfQ,CAAAA,KAAe,cACpBvB,QAAQ,CAACyC,IAAT,CAAc,CAAElB,KAAK,CAAEA,KAAT,CAAgBlB,KAAK,CAAEkB,KAAvB,CAAd,EACH,CAHe,uDAIhB,MAAI,CAACP,QAAL,CAAc,CAAEhB,QAAQ,CAARA,QAAF,CAAd,EACH,CACJ,CARD,EASA,KAAKS,oBAAL,GACH,CAhGL,sBAgYI,iBAAS,iBACL,iBAA+N,KAAKhC,KAApO,CAAMW,YAAN,cAAMA,YAAN,CAAoBC,WAApB,cAAoBA,WAApB,CAAiCC,UAAjC,cAAiCA,UAAjC,CAA6CH,YAA7C,cAA6CA,YAA7C,CAA2DQ,QAA3D,cAA2DA,QAA3D,CAAqEJ,IAArE,cAAqEA,IAArE,CAA2EZ,UAA3E,cAA2EA,UAA3E,CAAuFoB,YAAvF,cAAuFA,YAAvF,CAAqGC,QAArG,cAAqGA,QAArG,CAA+GR,WAA/G,cAA+GA,WAA/G,CAA4HI,cAA5H,cAA4HA,cAA5H,oCAA4IF,aAA5I,CAA4IA,aAA5I,gCAA4J,EAA5J,uBAAgKD,YAAhK,cAAgKA,YAAhK,CAA8KW,mBAA9K,cAA8KA,mBAA9K,CAAmMG,IAAnM,cAAmMA,IAAnM,CAAyMC,iBAAzM,cAAyMA,iBAAzM,CACA,iBAA4D,KAAKE,KAAjE,CAAMwF,cAAN,cAAMA,cAAN,CAAsBC,qBAAtB,cAAsBA,qBAAtB,CAA6CC,UAA7C,cAA6CA,UAA7C,CACA,GAAMC,CAAAA,MAAN,CAA+BH,cAA/B,CAAMG,MAAN,CAAcC,KAAd,CAA+BJ,cAA/B,CAAcI,KAAd,CAAqBC,KAArB,CAA+BL,cAA/B,CAAqBK,KAArB,CACA,mBACI,2BAAK,SAAS,CAAC,iDAAf,eACI,2BAAK,SAAS,CAAC,KAAf,eAEI,2BAAK,SAAS,CAAC,YAAf,eACI,2BAAK,SAAS,CAAC,aAAf,eAEI,2BAAK,SAAS,CAAC,oBAAf,eACI,2BAAK,SAAS,CAAC,mBAAf,eACI,2BAAK,SAAS,CAAC,oCAAf,eAEI,2BAAK,SAAS,CAAC,mCAAf,eAGI,2BAAK,SAAS,CAAC,WAAf,UAHJ,cAMI,2BAAK,SAAS,CAAC,WAAf,QANJ,cASI,2BAAK,SAAS,CAAC,yBAAf,aATJ,cAgBI,2BAAK,SAAS,CAAC,yBAAf,aAhBJ,cAoBI,2BAAK,SAAS,CAAC,WAAf,oBApBJ,CAFJ,CA+BKpH,YAAY,CAACmD,MAAb,CAAsB,CAAtB,CAA0BnD,YAAY,CAACqH,GAAb,CAAiB,SAACC,IAAD,CAAOxG,KAAP,CAAiB,CACzD,mBACI,2BAAK,SAAS,CAAC,oBAAf,eAGI,2BAAK,SAAS,CAAC,gBAAf,eAUI,oBAAC,WAAD,EACI,WAAW,CAAC,OACZ;AAFJ,CAGI,KAAK,CAAEwG,IAAI,CAAC7H,UAHhB,CAII,IAAI,CAAC,YAJT,CAKI,QAAQ,CAAE,MAAI,CAACyD,YALnB,CAMI,SAAS,CAAC,mBANd,CAOI,QAAQ,CAAE,IAPd,EAVJ,CAHJ,cAuBI,2BAAK,SAAS,CAAC,gBAAf,eASI,oBAAC,WAAD,EACI,WAAW,CAAC,KACZ;AAFJ,CAGI,KAAK,CAAEoE,IAAI,CAAC5H,QAHhB,CAII,IAAI,CAAC,UAJT,CAKI,QAAQ,CAAE,MAAI,CAACwD,YALnB,CAMI,SAAS,CAAC,mBANd,CAOI,QAAQ,CAAE,IAPd,EATJ,CAvBJ,cA0CI,2BAAK,SAAS,CAAC,gBAAf,eACI,2BAAK,SAAS,CAAC,eAAf,EADJ,cAEI,oBAAC,WAAD,EACI,WAAW,CAAC,SACZ;AAFJ,CAGI,KAAK,CAAEoE,IAAI,CAACvH,aAHhB,CAII,IAAI,CAAC,eAJT,CAKI,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC8B,QAAL,CAAc,CAAExB,WAAW,CAAE,IAAf,CAAqBS,KAAK,CAAEA,KAA5B,CAAd,CAAN,EALb,CAMI,SAAS,CAAC,wBANd,EAFJ,CA1CJ,cAyDI,2BAAK,SAAS,CAAC,8BAAf,eACI,oBAAC,YACG;AADJ,EAEI,OAAO,CAAED,QAFb,CAGI,KAAK,CAAEyG,IAAI,CAAC1H,YAHhB,CAII,IAAI,CAAC,cAJT,CAKI,QAAQ,CAAE,kBAAC2H,CAAD,QAAK,CAAA,MAAI,CAACrE,YAAL,CAAkBqE,CAAlB,CAAqBzG,KAArB,CAAL,EALd,CAMI,SAAS,CAAC,mBANd,EADJ,CAzDJ,cAoEI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,YACG;AADJ,EAEI,OAAO,CAAEZ,WAFb,CAGI,KAAK,CAAEoH,IAAI,CAACzH,MAHhB,CAII,IAAI,CAAC,QAJT,CAKI,QAAQ,CAAE,kBAAC0H,CAAD,QAAO,CAAA,MAAI,CAACrE,YAAL,CAAkBqE,CAAlB,CAAqBzG,KAArB,CAAP,EALd,CAMI,SAAS,CAAC,mBANd,EADJ,CApEJ,CA+EKd,YAAY,CAACmD,MAAb,GAAwBrC,KAAK,CAAG,CAAhC,cACG,2BAAK,SAAS,CAAC,MAAf,CAAsB,OAAO,CAAE,MAAI,CAACqF,kBAApC,eACI,2BAAK,KAAK,CAAC,IAAX,CAAgB,MAAM,CAAC,IAAvB,CAA4B,OAAO,CAAC,WAApC,CAAgD,IAAI,CAAC,MAArD,CAA4D,KAAK,CAAC,4BAAlE,eACI,4BAAM,KAAK,CAAC,IAAZ,CAAiB,MAAM,CAAC,IAAxB,CAA6B,IAAI,CAAC,SAAlC,EADJ,cAEI,4BAAM,CAAC,CAAC,UAAR,CAAmB,MAAM,CAAC,SAA1B,CAAoC,iBAAe,OAAnD,CAA2D,kBAAgB,OAA3E,EAFJ,cAGI,4BAAM,CAAC,CAAC,UAAR,CAAmB,MAAM,CAAC,SAA1B,CAAoC,iBAAe,OAAnD,CAA2D,kBAAgB,OAA3E,EAHJ,CADJ,CADH,cAOY,2BAAK,KAAK,CAAC,IAAX,CAAgB,MAAM,CAAC,IAAvB,CAA4B,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACC,eAAL,CAAqBtF,KAArB,CAAN,EAArC,CAAwE,SAAS,CAAC,MAAlF,CAAyF,GAAG,CAAEjC,SAA9F,CAAyG,GAAG,CAAC,EAA7G,EAtFjB,CADJ,CA0FH,CA3F0B,CAA1B,CA2FI,EA1HT,cA4HI,2BAAK,SAAS,CAAC,+BAAf,eACI,2BAAK,SAAS,CAAC,KAAf,eACI,oBAAC,YAAD,EACA,WAAW,CAAE,WADb,CAEA,MAAM,CAAE,IAFR,CAGA,SAAS,CAAC,oBAHV,CAIA,KAAK,CAAC,mBAJN,CAKA,OAAO,CAAE,KAAKwH,qBALd,EADJ,cAQA,oBAAC,YAAD,EACI,WAAW,CAAE,WADjB,CAEI,MAAM,CAAE,IAFZ,CAGI,SAAS,CAAC,yBAHd,CAII,KAAK,CAAC,QAJV,CAKI,OAAO,CAAE,yBAAMpH,CAAAA,OAAO,CAACqE,IAAR,CAAa,oBAAb,CAAN,EALb,EARA,cAeA,oBAAC,YAAD,EACI,WAAW,CAAE,WADjB,CAEI,MAAM,CAAE,IAFZ,CAGI,SAAS,CAAC,oBAHd,CAII,KAAK,CAAC,iBAJV,CAKI,OAAO,CAAE,KAAKE,YALlB,EAfA,CADJ,CA5HJ,CADJ,CADJ,CAFJ,CADJ,CAFJ,CADJ,cAsKI,oBAAC,WAAD,EAAa,SAAS,CAAE,sCAAxB,CAAgE,KAAK,CAAE,CAAEgE,QAAQ,CAAE,OAAZ,CAAvE,CAA8F,KAAK,CAAEnH,WAArG,CAAkH,WAAW,CAAE,KAAK6E,YAApI,eACI,2BAAK,OAAO,CAAE,KAAKA,YAAnB,CAAiC,SAAS,CAAC,OAA3C,CAAmD,GAAG,CAAErG,SAAxD,CAAmE,GAAG,CAAC,EAAvE,EADJ,cAEI,2BAAK,SAAS,CAAC,yBAAf,eACI,2BAAK,SAAS,CAAC,6BAAf,qBADJ,cAII,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,KAAf,eACJ,2BAAK,SAAS,CAAC,OAAf,0BAEA,oBAAC,YACG;AADJ,EAEI,OAAO,CAAEyB,YAFb,CAGI,KAAK,CAAEG,cAAc,CAACC,QAH1B,CAII,IAAI,CAAC,UAJT,CAKI,QAAQ,CAAE,KAAKsC,qBALnB,CAMI,SAAS,CAAC,mBANd,EAFA,CADI,cAYJ,2BAAK,SAAS,CAAC,OAAf,yBAEA,6BACI;AACA;AACA,KAAK,CAAEvC,cAAc,CAACE,SAH1B,CAII,IAAI,CAAC,WAJT,CAKI,QAAQ,CAAE,KAAKmB,YALnB,CAMI,SAAS,CAAC,iBANd,EAFA,CAZI,CADJ,CAJJ,cA+BI,2BAAK,SAAS,CAAC,uCAAf,eACA,oBAAC,YAAD,EACY,aAAa,CAAEb,mBAD3B,CAEY,YAAY,CAAE,KAAK8B,gBAF/B,CAGY,QAAQ,CAAE3B,IAHtB,EAKKb,aAAa,CAAC4C,MAAd,CAAuB,CAAvB,CAA2B5C,aAAa,CAAC8G,GAAd,CAAkB,SAACC,IAAD,CAAOxG,KAAP,CAAiB,CAC3D,mBACI,0BAAI,SAAS,CAAC,OAAd,CAAsB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC0E,qBAAL,CAA2B8B,IAA3B,CAAN,EAA/B,CAAuE,GAAG,CAAExG,KAA5E,eACG,+CAAK,2BAAK,SAAS,CAAC,kDAAf,EAAmEwG,IAAI,CAACG,UAAxE,CAAL,CADH,cAEG,+CAAK,2BAAK,SAAS,CAAC,kDAAf,EAAmEH,IAAI,CAAChC,SAAxE,CAAL,CAFH,cAGG,+CAAK,2BAAK,SAAS,CAAC,kDAAf,EAAmEgC,IAAI,CAAC1H,YAAxE,CAAL,CAHH,cAIG,+CAAK,2BAAK,SAAS,CAAC,kDAAf,EAAmE0H,IAAI,CAACI,UAAxE,CAAL,CAJH,CADJ,CAQH,CAT2B,CAA3B,cASI,2CAAI,2BAAK,SAAS,CAAC,kDAAf,sBAAJ,CAdT,CADA,CA/BJ,cAkDI,2BAAK,SAAS,CAAC,sCAAf,eAEI,oBAAC,YAAD,EACI,WAAW,CAAE,OADjB,CAEI,MAAM,CAAE,IAFZ,CAGI,SAAS,CAAC,oBAHd,CAII,KAAK,CAAC,QAJV,CAKI,OAAO,CAAE,KAAKxC,YALlB,EAFJ,CAlDJ,CAFJ,CAtKJ,cAuOI,2BAAK,SAAS,CAAC,QAAf,EAEI7D,iBAAiB,cAAG,oBAAC,gBAAD,EAAkB,iBAAiB,CAAEA,iBAArC,CAAwD,qBAAqB,CAAI,KAAKgF,qBAAtF,CAA8G,mBAAmB,CAAE,KAAKjB,mBAAxI,CAA6J,UAAU,CAAI6B,UAA3K,EAAH,CAA+L,EAFpN,CAvOJ,CADJ,CAgPH,CApnBL,kCAA0C9I,SAA1C,EAunBA,GAAMwJ,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACrI,KAAD,QAAY,CAChCyH,cAAc,CAAEzH,KAAK,CAACsI,WAAN,CAAkBb,cADF,CAEhCJ,iBAAiB,CAAErH,KAAK,CAACsI,WAAN,CAAkBjB,iBAFL,CAGhCK,qBAAqB,CAAE1H,KAAK,CAACsI,WAAN,CAAkBZ,qBAHT,CAIhCvE,eAAe,CAAEnD,KAAK,CAACsI,WAAN,CAAkBnF,eAJH,CAKhCgB,yBAAyB,CAAEnE,KAAK,CAACsI,WAAN,CAAkBnE,yBALb,CAMhCC,wBAAwB,CAAEpE,KAAK,CAACsI,WAAN,CAAkBlE,wBANZ,CAAZ,EAAxB,CASA,GAAMmE,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACnC,MAAOnJ,CAAAA,kBAAkB,CAAC,CACtBH,UAAU,CAAVA,UADsB,CAEtBC,wBAAwB,CAAxBA,wBAFsB,CAGtBK,YAAY,CAAZA,YAHsB,CAItBC,eAAe,CAAfA,eAJsB,CAAD,CAKtB+I,QALsB,CAAzB,CAMH,CAPD,CASA,MAAO,IAAMC,CAAAA,eAAe,CAAGrJ,OAAO,CAACiJ,eAAD,CAAkBE,kBAAlB,CAAP,CAA6CxI,oBAA7C,CAAxB","sourcesContent":["import React, { Component } from 'react';\r\nimport { NormalSelect, NormalButton, NormalModal, NormalInput } from 'component/common';\r\nimport './style.scss';\r\nimport { updateForm, getSelectedTreatmentList } from 'redux/actions/appointment';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport closeIcon from 'assets/images/close.png';\r\nimport { getCommonApi, commonCreateApi } from 'redux/actions/common';\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport { history } from 'helpers';\r\nimport _ from 'lodash';\r\nimport { TableWrapper } from 'component/common';\r\nimport {TreatmentPackage} from './modal/TreatmentPackage'\r\n\r\nexport class SelectTreatmentClass extends Component {\r\n    state = {\r\n        treatmentDetail: [],\r\n        formFields: {\r\n            start_time: \"\",\r\n            end_time: \"\",\r\n            Item_Codeid: null,\r\n            add_duration: \"\",\r\n            emp_no: [],\r\n            requesttherapist: true,\r\n            Item_CodeName: \"\"\r\n        },\r\n        selectedList: [\r\n            {\r\n                start_time: \"\",\r\n                end_time: \"\",\r\n                Item_Codeid: null,\r\n                add_duration: \"\",\r\n                emp_no: [],\r\n                requesttherapist: false\r\n            }\r\n        ],\r\n        outletOption: [],\r\n        staffOption: [],\r\n        roomOption: [],\r\n        list: [],\r\n        isOpenModal: false,\r\n        categoryList: [],\r\n        treatmentList: [],\r\n        siteList: [],\r\n        treatmentField: {\r\n            category: \"\",\r\n            treatment: \"\",\r\n        },\r\n        timeDropdown: [],\r\n        duration: [],\r\n        index: null,\r\n        search: \"\",\r\n        selectTreatmentId: \"\",\r\n        treatmentListHeader: [\r\n            { label: 'Category', className: \"w-50\" },\r\n            { label: 'Service', className: \"w-75\"},\r\n            { label: 'Duration', className: \"w-25\" },\r\n            { label: 'price', className: \"w-50\" },            \r\n        ],\r\n        meta: {},\r\n        isTreatementModal: false\r\n    }\r\n    componentDidMount(){\r\n        this.search({})\r\n    }\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\r\n            autoForceUpdate: this,\r\n        });\r\n        let { appointmentDetail, categoryList, staffOption, selectedList, formFields, duration } = this.state;\r\n        // this.props.getSelectedTreatmentList(`?appt_id=${appointmentDetail.id}`).then((res) => {\r\n        //     console.log(\"namekkuhkjn\", res)\r\n        // })\r\n        let { basicApptDetail } = this.props;\r\n        formFields['start_time'] = basicApptDetail ? basicApptDetail.time : \"\";\r\n        selectedList[0]['start_time'] = basicApptDetail ? basicApptDetail.time : \"\";\r\n        this.setState({\r\n            formFields,\r\n            selectedList\r\n        })\r\n\r\n        this.props.getCommonApi(`itemdept/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    categoryList.push({ value: value.id, label: value.itm_desc })\r\n                }\r\n                this.setState({ categoryList })\r\n            }\r\n        })\r\n        this.props.getCommonApi(`appointment/Staffs/?Outlet=${basicApptDetail.branchId}&date=${dateFormat(new Date())}`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    staffOption.push({ value: value.id, label: value.emp_name })\r\n                }\r\n                this.setState({ staffOption })\r\n            }\r\n        })\r\n        this.props.getCommonApi(`treatment/Duration/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    duration.push({ value: value, label: value })\r\n                }\r\n                this.setState({ duration })\r\n            }\r\n        })\r\n        this.getStaffAvailability();\r\n    }\r\n\r\n    getStaffAvailability = () => {\r\n        this.props.getCommonApi(`staffsavailable/?Appt_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                // for (let value of data) {\r\n                //     staffList.push({ value: value.id, label: value.emp_name })\r\n                // }\r\n                this.setState({ list: data })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleSearch = (event) => {\r\n        event.persist();\r\n        console.log(event.target.value, event.target, event, \"dfhdfjghkjfghj\")\r\n        let { treatmentField } = this.state;\r\n        treatmentField['treatment'] = event.target.value;\r\n        this.setState({ search: event.target.value, treatmentField })\r\n        if (!this.debouncedFn) {\r\n            this.debouncedFn = _.debounce(() => {\r\n                let searchString = event.target.value;\r\n                 let data = { search: searchString }\r\n                // this.queryHandler(data)\r\n                let { customerList } = this.state;\r\n                let { basicApptDetail } = this.props;\r\n                this.search(data)\r\n            }, 500);\r\n        }\r\n        this.debouncedFn();\r\n    }\r\n\r\n    search = (data) => {    \r\n        let { page = 1, limit = 10, search = \"\" } = data\r\n        let {selectTreatmentId } = this.state;\r\n        this.props.getCommonApi(`stocklist/?Item_Deptid=${selectTreatmentId}&search=${search}&page=${page}&limit=${limit}`).then((res) => {\r\n          console.log(res)\r\n            if (res.status === 200) {\r\n                this.setState({ treatmentList: res.data.dataList, meta: res.data.meta.pagination  })\r\n            }\r\n        })\r\n    }\r\n    \r\n    handlePagination = (page) => {\r\n        this.search(page)\r\n    }\r\n\r\n    handleChangeTreatment = async ({ target: { value, name } }) => {\r\n        let { treatmentField, treatmentList, search, selectTreatmentId } = this.state;\r\n        console.log(\"uihwkjrwkej\", name, value)\r\n        treatmentField[name] = value;\r\n        if (name === \"category\") {\r\n            selectTreatmentId = value;\r\n        } else if( name===\"treatment\"){\r\n            search = value;\r\n        }\r\n        await this.setState({\r\n            treatmentField,\r\n            selectTreatmentId,\r\n            search\r\n        });\r\n\r\n        let page = 1, limit = 10\r\n        this.props.getCommonApi(`stocklist/?Item_Deptid=${selectTreatmentId}&search=${search}&page=${page}&limit=${limit}`).then((res) => {\r\n            console.log(res)\r\n              if (res.status === 200) {\r\n                  this.setState({ treatmentList: res.data.dataList, meta: res.data.meta.pagination  })\r\n              }\r\n          })\r\n    };\r\n\r\n    handleChange = async ({ target: { value, name } }, index) => {\r\n        let { formFields, selectedList } = this.state;\r\n        console.log(\"hgjfgjfcghfghfgh\", name, value, index)\r\n        if (selectedList.length > 0 && selectedList.length !== (index + 1)) {\r\n            console.log(\"hgjfgjfcghfghfgh indexed\", name, value, index)\r\n            selectedList[index][name] = value;\r\n            if(name===\"add_duration\"){\r\n                selectedList[index]['end_time'] = this.addTimes(selectedList[index][\"start_time\"], value);\r\n                selectedList[index+1][\"start_time\"] = selectedList[index]['end_time'];\r\n            }\r\n            await this.setState({\r\n                selectedList,\r\n            });\r\n            await this.props.updateForm('treatmentList', selectedList)\r\n        } else {\r\n            console.log(\"hgjfgjfcghfghfgh else\", name, value, index)\r\n            formFields[name] = value;\r\n            if(name===\"add_duration\"){\r\n                formFields['end_time'] = this.addTimes(formFields[\"start_time\"], value)\r\n            }\r\n            await this.setState({\r\n                formFields,\r\n            });\r\n            selectedList.splice((selectedList.length - 1), 1);\r\n            selectedList.push(formFields);\r\n            await this.setState({\r\n                selectedList,\r\n            });\r\n            await this.props.updateForm('treatmentList', selectedList)\r\n        }\r\n    };\r\n\r\n    handleMultiSelect = (data) => {\r\n        let { formFields } = this.state;\r\n        let list = []\r\n        for (let key of data) {\r\n            list.push(key.value);\r\n        }\r\n        formFields['emp_no'] = list;\r\n        this.setState({ formFields });\r\n        console.log(formFields, \"oyokkjk\")\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        // this.props.handleConfirmBooking()\r\n        let { appointmentCustomerDetail, appointmentTreatmentList } = this.props;\r\n        console.log(appointmentCustomerDetail, appointmentTreatmentList, \"sdfgdfsdggf\")\r\n        let data = {\r\n            Appointment: {\r\n                appt_date: dateFormat(new Date(appointmentCustomerDetail.appointmentDate), \"yyyy-mm-dd\"),\r\n                Appt_typeid: appointmentCustomerDetail.Appt_typeid,\r\n                cust_noid: appointmentCustomerDetail.customerName,\r\n                new_remark: appointmentCustomerDetail.new_remark,\r\n                // emp_noid: appointmentCustomerDetail.emp_id,\r\n                Source_Codeid: appointmentCustomerDetail.Source_Codeid,\r\n                Room_Codeid: appointmentCustomerDetail.Room_Codeid,\r\n                appt_status: appointmentCustomerDetail.bookingStatus,\r\n                sec_status: appointmentCustomerDetail.sec_status,\r\n                ItemSite_Codeid: appointmentCustomerDetail.ItemSite_Codeid\r\n            },\r\n            Treatment: appointmentTreatmentList\r\n        }\r\n        if(appointmentCustomerDetail.customerName && appointmentCustomerDetail.bookingStatus){\r\n        this.props.commonCreateApi(`appointment/`, data).then(async (res) => {\r\n            if (res.status === 201) {\r\n                await this.props.updateForm('treatmentList', [])\r\n                await this.props.updateForm('basicApptDetail', {})\r\n                await this.props.updateForm('appointmentCustomerDetail', {})\r\n                history.push('/admin/appointment')\r\n            }\r\n        })\r\n    } else {\r\n        this.props.showErrorMessage();\r\n    }\r\n    }\r\n\r\n    getDateTime = (data) => {\r\n        let date = new Date(data)\r\n        date = String(date).split(\" \")\r\n        let date1 = date[2] + \"th \" + date[1] + \", \" + date[3]\r\n        let time = date[4].split(\":\")\r\n        let time1 = String(Number(time[0]) > 12 ? (Number(time[0]) - 12) : time[0]) + \":\" + time[1] + (Number(time[0]) > 12 ? \"PM\" : \"AM\")\r\n        return time1 + \", \" + date1\r\n    }\r\n\r\n    handleDialog = () => {\r\n        this.setState({ isOpenModal: false, index: null });\r\n    }\r\n\r\n    handleMultipleCustomer = () => {\r\n        this.setState({ isOpenModal: false });\r\n    }\r\n\r\n    handleSelectPackage = async (data) => {\r\n        debugger\r\n        let { formFields, selectedList, index} = this.state;\r\n        if(selectedList.length===1 || selectedList.length===index+1){\r\n            formFields[\"start_time\"] = formFields[\"start_time\"];\r\n            formFields[\"end_time\"] = this.addTimes(formFields[\"start_time\"], data.add_duration);\r\n            formFields[\"Item_Codeid\"] = data.id;\r\n            formFields[\"Item_CodeName\"] = data.item_desc;\r\n            formFields[\"add_duration\"] = data.add_duration;\r\n            await this.setState({\r\n                formFields,\r\n            });\r\n        }\r\n            if(selectedList.length>index+1) {\r\n                var listCount =  selectedList.length - 1;\r\n                selectedList[listCount][\"end_time\"] = this.addTimes(selectedList[listCount][\"start_time\"], data.add_duration);\r\n                selectedList[listCount][\"Item_Codeid\"] = data.id;\r\n                selectedList[listCount][\"Item_CodeName\"] = data.item_desc;\r\n                selectedList[listCount][\"add_duration\"] = data.add_duration;\r\n            await this.setState({\r\n                selectedList,\r\n            });\r\n        }\r\n        selectedList.splice((selectedList.length - 1), 1);\r\n        selectedList.push(formFields);\r\n        await this.setState({\r\n            selectedList,\r\n        });\r\n        await this.props.updateForm('treatmentList', selectedList)\r\n        this.setState({ isOpenModal: false })\r\n    }\r\n    handleSelectTreatment = async (data) => {\r\n        let { treatmentList } = this.state;        \r\n        let { formFields, selectedList, index} = this.state;\r\n        console.log(\"uihwkjrwkej\", selectedList.length, \"===\", index)\r\n        if(selectedList.length===1 || selectedList.length===index+1){\r\n\r\n            formFields[\"start_time\"] = formFields[\"start_time\"];\r\n            formFields[\"end_time\"] = this.addTimes(formFields[\"start_time\"], data.add_duration);\r\n            formFields[\"Item_Codeid\"] = data.id;\r\n            formFields[\"Item_CodeName\"] = data.item_desc;\r\n            formFields[\"add_duration\"] = data.add_duration;\r\n            await this.setState({\r\n                formFields,\r\n            });\r\n        }\r\n        console.log(index)\r\n        if(selectedList.length>index+1) {\r\n            selectedList[index]['Item_CodeName'] = data.item_desc;\r\n            selectedList[index][\"Item_Codeid\"] = data.id;\r\n            selectedList[index][\"add_duration\"] = data.add_duration;\r\n            await this.setState({\r\n                selectedList,\r\n            });\r\n        }\r\n        \r\n        selectedList.splice((selectedList.length - 1), 1);\r\n        selectedList.push(formFields);\r\n        await this.setState({\r\n            selectedList,\r\n        });\r\n        // console.log(\"uihwkjrwkej\", data, selectedList)\r\n        await this.props.updateForm('treatmentList', selectedList)\r\n        this.setState({ isOpenModal: false })\r\n    }\r\n\r\n    timeToMins = (time) => {\r\n        var b = time.split(':');\r\n        return b[0] * 60 + +b[1];\r\n    }\r\n\r\n    // Convert minutes to a time in format hh:mm\r\n    // Returned value is in range 00  to 24 hrs\r\n    timeFromMins = (mins) => {\r\n        function z(n) { return (n < 10 ? '0' : '') + n; }\r\n        var h = (mins / 60 | 0) % 24;\r\n        var m = mins % 60;\r\n        return z(h) + ':' + z(m);\r\n    }\r\n\r\n    // Add two times in hh:mm format\r\n    addTimes = (t0, t1) => {\r\n        return this.timeFromMins(this.timeToMins(t0) + this.timeToMins(t1));\r\n    }\r\n\r\n    handleAddtreatment = async () => {\r\n        let { selectedList, formFields } = this.state;\r\n        formFields = {\r\n            start_time: selectedList[selectedList.length - 1].end_time,\r\n            end_time: \"\",\r\n            Item_Codeid: null,\r\n            add_duration: \"\",\r\n            emp_no: [],\r\n            requesttherapist: false\r\n        };\r\n        selectedList.push({\r\n            start_time: selectedList[selectedList.length - 1].end_time,\r\n            end_time: \"\",\r\n            Item_Codeid: 1,\r\n            Item_CodeName: \"\",\r\n            add_duration: \"\",\r\n            emp_no: [],\r\n            requesttherapist: false\r\n        })\r\n\r\n        await this.setState({ selectedList, formFields });\r\n\r\n        await this.props.updateForm('treatmentList', selectedList)\r\n    }\r\n\r\n    deleteTreatment = async (index) => {\r\n        let { selectedList } = this.state;\r\n        selectedList.splice(index, 1);\r\n        this.setState({ selectedList });\r\n        await this.props.updateForm('treatmentList', selectedList)\r\n    }\r\n\r\n    handleTreatementmodal = () => {\r\n        this.setState((prevState) => ({\r\n            isTreatementModal: !prevState.isTreatementModal, \r\n        }));\r\n    }\r\n\r\n    render() {\r\n        let { outletOption, staffOption, roomOption, selectedList, siteList, list, formFields, timeDropdown, duration, isOpenModal, treatmentField, treatmentList = [], categoryList, treatmentListHeader, meta, isTreatementModal } = this.state\r\n        let { customerDetail, selectedTreatmentList, customerId } = this.props;\r\n        let { outlet, staff, rooms } = customerDetail;\r\n        return (\r\n            <div className=\"create-appointment select-treatment-appointment\">\r\n                <div className=\"row\">\r\n\r\n                    <div className=\" col-md-12\">\r\n                        <div className=\"appointment\">\r\n\r\n                            <div className=\"appointment-holder\">\r\n                                <div className=\"treatment-section\">\r\n                                    <div className=\"select-treatment select-list w-100\">\r\n\r\n                                        <div className=\"row selected selected-header mb-4\">\r\n                                            {/* <div className=\"col-7 p-0\">\r\n                                                <div className=\"row\"> */}\r\n                                            <div className=\"col-1 p-0\">\r\n                                                Start\r\n                                                    </div>\r\n                                            <div className=\"col-1 p-0\">\r\n                                                End\r\n                                                    </div>\r\n                                            <div className=\"col-5 p-0 header-detail\">\r\n                                                Services\r\n                                                    </div>\r\n                                            {/* </div>\r\n                                            </div> */}\r\n                                            {/* <div className=\"col-3 p-0\">\r\n                                                <div className=\"row\"> */}\r\n                                            <div className=\"col-2 p-0 header-detail\">\r\n                                                Duration\r\n\r\n                                                    </div>\r\n                                            <div className=\"col-2 p-0\">\r\n                                                Treatment staff\r\n                                                    </div>\r\n                                            {/* </div>\r\n                                            </div> */}\r\n                                            {/* <div>\r\n\r\n                                            </div> */}\r\n                                        </div>\r\n                                        {selectedList.length > 0 ? selectedList.map((item, index) => {\r\n                                            return (\r\n                                                <div className=\"row selected  mb-4\">\r\n                                                    {/* <div className=\"col-7 p-0\">\r\n                                                        <div className=\"row\"> */}\r\n                                                    <div className=\"col-1 mr-1 p-0\">\r\n                                                        {/* <NormalSelect\r\n                                                                    // placeholder=\"Enter here\"\r\n                                                                    options={timeDropdown}\r\n                                                                    value={item.start_time}\r\n                                                                    name=\"start_time\"\r\n                                                                    onChange={this.handleChange}\r\n                                                                    className=\"customer-name p-0\"\r\n                                                                /> */}\r\n\r\n                                                        <NormalInput\r\n                                                            placeholder=\"start\"\r\n                                                            // options={timeDropdown}\r\n                                                            value={item.start_time}\r\n                                                            name=\"start_time\"\r\n                                                            onChange={this.handleChange}\r\n                                                            className=\"customer-name p-0\"\r\n                                                            disabled={true}\r\n                                                        />\r\n                                                    </div>\r\n                                                    <div className=\"col-1 mr-1 p-0\">\r\n                                                        {/* <NormalSelect\r\n                                                                    // placeholder=\"Enter here\"\r\n                                                                    options={timeDropdown}\r\n                                                                    value={item.end_time}\r\n                                                                    name=\"end_time\"\r\n                                                                    onChange={this.handleChange}\r\n                                                                    className=\"customer-name p-0\"\r\n                                                                /> */}\r\n                                                        <NormalInput\r\n                                                            placeholder=\"end\"\r\n                                                            // options={timeDropdown}\r\n                                                            value={item.end_time}\r\n                                                            name=\"end_time\"\r\n                                                            onChange={this.handleChange}\r\n                                                            className=\"customer-name p-0\"\r\n                                                            disabled={true}\r\n                                                        />\r\n                                                    </div>\r\n                                                    <div className=\"col-5 mr-1 p-0\">\r\n                                                        <div className=\"header-detail\"></div>\r\n                                                        <NormalInput\r\n                                                            placeholder=\"service\"\r\n                                                            // options={siteList}\r\n                                                            value={item.Item_CodeName}\r\n                                                            name=\"Item_CodeName\"\r\n                                                            onClick={() => this.setState({ isOpenModal: true, index: index })}\r\n                                                            className=\"customer-name p-0 px-2\"\r\n                                                        />\r\n                                                        {/* </div>\r\n                                                        </div> */}\r\n                                                    </div>\r\n                                                    {/* <div className=\"col-3 p-0\">\r\n                                                        <div className=\"row\"> */}\r\n                                                    <div className=\"col-2 mr-1 p-0 header-detail\">\r\n                                                        <NormalSelect\r\n                                                            // placeholder=\"Enter here\"\r\n                                                            options={duration}\r\n                                                            value={item.add_duration}\r\n                                                            name=\"add_duration\"\r\n                                                            onChange={(e)=>this.handleChange(e, index)}\r\n                                                            className=\"customer-name p-0\"\r\n                                                        />\r\n\r\n                                                    </div>\r\n                                                    <div className=\"col-2 p-0\">\r\n                                                        <NormalSelect\r\n                                                            // placeholder=\"Enter here\"\r\n                                                            options={staffOption}\r\n                                                            value={item.emp_no}\r\n                                                            name=\"emp_no\"\r\n                                                            onChange={(e) => this.handleChange(e, index)}\r\n                                                            className=\"customer-name p-0\"\r\n                                                        />\r\n\r\n                                                    </div>\r\n                                                    {selectedList.length === index + 1 ?\r\n                                                        <div className=\"ml-3\" onClick={this.handleAddtreatment}>\r\n                                                            <svg width=\"31\" height=\"30\" viewBox=\"0 0 31 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                                                <rect width=\"31\" height=\"30\" fill=\"#F9F9F9\" />\r\n                                                                <path d=\"M15 8V22\" stroke=\"#848484\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                                                                <path d=\"M8 15H22\" stroke=\"#848484\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                                                            </svg>\r\n                                                        </div> : <img width=\"25\" height=\"25\" onClick={() => this.deleteTreatment(index)} className=\"ml-3\" src={closeIcon} alt=\"\" />}\r\n                                                </div>\r\n                                            )\r\n                                        }) : \"\"}\r\n\r\n                                        <div className=\"confirm confirm-selected mt-5\">\r\n                                            <div className=\"row\">\r\n                                                <NormalButton\r\n                                                buttonClass={\"treatment\"}\r\n                                                mainbg={true}\r\n                                                className=\"col-12 mr-4 fs-15 \"\r\n                                                label=\"Treatment Package\"\r\n                                                onClick={this.handleTreatementmodal}\r\n                                            />\r\n                                            <NormalButton\r\n                                                buttonClass={\"treatment\"}\r\n                                                mainbg={true}\r\n                                                className=\"col-12 mr-4 ml-4 fs-15 \"\r\n                                                label=\"cancel\"\r\n                                                onClick={() => history.push('/admin/appointment')}\r\n                                            />\r\n                                            <NormalButton\r\n                                                buttonClass={\"treatment\"}\r\n                                                mainbg={true}\r\n                                                className=\"col-12 ml-5 fs-15 \"\r\n                                                label=\"Confirm Booking\"\r\n                                                onClick={this.handleSubmit}\r\n                                            />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <NormalModal className={\"multiple-appointment select-category\"} style={{ minWidth: \"800px\" }} modal={isOpenModal} handleModal={this.handleDialog}>\r\n                    <img onClick={this.handleDialog} className=\"close\" src={closeIcon} alt=\"\" />\r\n                    <div className=\"customer-list container\">                  \r\n                        <div className=\"col-12 pl-0 mb-3 fs-18 py-2\">\r\n                            Select Treatment\r\n                        </div>\r\n                        <div className=\"col-12\">\r\n                            <div className='row'>\r\n                        <div className='col-6'>\r\n                        Category\r\n                        <NormalSelect\r\n                            // placeholder=\"Enter here\"\r\n                            options={categoryList}\r\n                            value={treatmentField.category}\r\n                            name=\"category\"\r\n                            onChange={this.handleChangeTreatment}\r\n                            className=\"customer-name p-0\"\r\n                        />\r\n                        </div>\r\n                        <div className='col-6'>\r\n                        Service\r\n                        <input\r\n                            // placeholder=\"Enter here\"\r\n                            // options={siteList}\r\n                            value={treatmentField.treatment}\r\n                            name=\"treatment\"\r\n                            onChange={this.handleSearch}\r\n                            className=\"search px-3 p-0\"\r\n                        />\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n                       \r\n                        <div className=\"table-container table-responsive mt-3\">\r\n                        <TableWrapper\r\n                                    headerDetails={treatmentListHeader}\r\n                                    queryHandler={this.handlePagination}\r\n                                    pageMeta={meta}\r\n                                >\r\n                            {treatmentList.length > 0 ? treatmentList.map((item, index) => {\r\n                                return (\r\n                                    <tr className='w-100' onClick={() => this.handleSelectTreatment(item)} key={index}>\r\n                                       <td> <div className=\"d-flex align-items-center justify-content-center\">{item.Item_Class}</div></td>\r\n                                       <td> <div className=\"d-flex align-items-center justify-content-center\">{item.item_desc}</div></td>\r\n                                       <td> <div className=\"d-flex align-items-center justify-content-center\">{item.add_duration}</div></td>\r\n                                       <td> <div className=\"d-flex align-items-center justify-content-center\">{item.item_price}</div></td>\r\n                                    </tr>\r\n                                )\r\n                            }) : <td><div className=\"d-flex align-items-center justify-content-center\">No data available</div></td>}\r\n                        </TableWrapper>\r\n                        </div>\r\n                        \r\n                        <div className=\"row text-center justify-center w-100\">\r\n\r\n                            <NormalButton\r\n                                buttonClass={\"col-3\"}\r\n                                mainbg={true}\r\n                                className=\"col-12 ml-4 fs-15 \"\r\n                                label=\"Cancel\"\r\n                                onClick={this.handleDialog}\r\n                            />\r\n                        </div>\r\n\r\n                    </div>\r\n                </NormalModal>\r\n                <div className='col-12'>\r\n                {\r\n                    isTreatementModal ? <TreatmentPackage isTreatementModal={isTreatementModal} handleTreatementmodal = {this.handleTreatementmodal}  handleSelectPackage={this.handleSelectPackage} customerId = {customerId} /> : ''\r\n                    \r\n                }\r\n            </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    customerDetail: state.appointment.customerDetail,\r\n    appointmentDetail: state.appointment.appointmentDetail,\r\n    selectedTreatmentList: state.appointment.selectedTreatmentList,\r\n    basicApptDetail: state.appointment.basicApptDetail,\r\n    appointmentCustomerDetail: state.appointment.appointmentCustomerDetail,\r\n    appointmentTreatmentList: state.appointment.appointmentTreatmentList,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        updateForm,\r\n        getSelectedTreatmentList,\r\n        getCommonApi,\r\n        commonCreateApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const SelectTreatment = connect(mapStateToProps, mapDispatchToProps)(SelectTreatmentClass)"]},"metadata":{},"sourceType":"module"}