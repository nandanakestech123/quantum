{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalButton,NormalSelect}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,commonPatchApi,commonCreateApi}from\"redux/actions/common\";import{Toast}from\"service/toast\";import _ from\"lodash\";import\"./style.scss\";import{withTranslation}from\"react-i18next\";export var ProductDetailsPopupClass=/*#__PURE__*/function(_Component){_inherits(ProductDetailsPopupClass,_Component);var _super=_createSuper(ProductDetailsPopupClass);function ProductDetailsPopupClass(){var _this;_classCallCheck(this,ProductDetailsPopupClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data_list:[],hold_item_reasons_options:[],sourceList:[],activRow:0,depositIndex:null};_this.getProductList=function(){var data_list=_this.state.data_list;var basicApptDetail=_this.props.basicApptDetail;_this.props.getCommonApi(\"cartpopup/?cust_noid=\".concat(basicApptDetail.custId,\"&cart_id=\").concat(_this.props.id,\"&is_product=1\")).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var status,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=key.status,data=key.data;if(!(status==\"200\")){_context.next=7;break;}console.log(key,\"cartproductpopuplist\");data_list=data;_context.next=6;return _this.setState({data_list:data_list});case 6:if(_this.state.data_list.length>0){_this.setState({activeRow:_this.state.data_list[0].id});document.getElementById(_this.state.data_list[0].id).classList.toggle(\"d-none\");}case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handleSubmit=function(){var _this$state=_this.state,data_list=_this$state.data_list,sourceList=_this$state.sourceList;sourceList=[];var _iterator=_createForOfIteratorHelper(data_list),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;var currentData=Number(value.deposit);var transamt=Number(value.trans_amt);if(currentData>transamt){Toast({type:\"error\",message:\"Deposit amount should be less than or equal to transaction amount\"});return false;}else{if(value.is_foc){sourceList.push({id:value.id,quantity:Number(value.quantity),price:Number(value.price).toFixed(2),holditemqty:Number(value.holditemqty),holdreason:Number(value.holdreason)});}else{sourceList.push({id:value.id,quantity:Number(value.quantity),price:Number(value.price).toFixed(2),deposit:Number(value.deposit).toFixed(2),holditemqty:Number(value.holditemqty),holdreason:Number(value.holdreason)});}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(sourceList,\"productupdatelist\");_this.props.commonCreateApi(\"cartpopup/product/\",sourceList).then(function(key){var status=key.status,data=key.data;if(status==200){_this.props.handleModal();}});};_this.handleChange=function(e,index){var data_list=_this.state.data_list;var data=e.target.value;if([e.target.name]==\"holdreason\"){data_list[index][e.target.name]=Number(data);}else if([e.target.name]==\"holditemqty\"){var ActualQty=Number(data_list[index][\"quantity\"]);var HoldQty=Number(data);if(HoldQty>ActualQty){Toast({type:\"error\",message:\"Hold quantity should be less than or equal to actual quantity\"});}else{data_list[index][e.target.name]=HoldQty;}}else{data_list[index][e.target.name]=data;}_this.setState({data_list:data_list});if([e.target.name]==\"quantity\"||[e.target.name]==\"price\"){_this.handlePriceandQuantityChange(index);}};_this.handleAccordion=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var elements,i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:elements=document.getElementsByClassName(\"accordion\");_context2.next=3;return _this.setState({activeRow:id});case 3:for(i=0;i<elements.length;i++){elements[i].classList.add(\"d-none\");}document.getElementById(id).classList.toggle(\"d-none\");case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handlePriceandQuantityChange=function(index){var data_list=_this.state.data_list;var total_disc=Number(data_list[index][\"discount_amt\"]).toFixed(2)+Number(data_list[index][\"additional_discountamt\"]);data_list[index][\"discount_price\"]=Number(data_list[index][\"price\"]-total_disc).toFixed(2);var after_linedisc=(data_list[index][\"price\"]-data_list[index][\"discount_amt\"])*data_list[index][\"quantity\"];data_list[index][\"trans_amt\"]=Number(after_linedisc-data_list[index][\"additional_discountamt\"]).toFixed(2);data_list[index][\"deposit\"]=Number(after_linedisc-data_list[index][\"additional_discountamt\"]).toFixed(2);_this.setState({data_list:data_list});};_this.validateDepositAmount=function(){debugger;var _this$state2=_this.state,data_list=_this$state2.data_list,depositIndex=_this$state2.depositIndex;var deposit=Number(data_list[depositIndex][\"deposit\"]);var transAmt=Number(data_list[depositIndex][\"trans_amt\"]);if(deposit>transAmt){Toast({type:\"error\",message:\"Deposit amount should be less than or equal to transaction amount\"});data_list[depositIndex][\"deposit\"]=\"\";depositIndex=null;_this.setState({data_list:data_list,depositIndex:depositIndex});}};_this.handleDepositOnChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event,index){var _this$state3,data_list,depositIndex;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0://event.persist();\n_this$state3=_this.state,data_list=_this$state3.data_list,depositIndex=_this$state3.depositIndex;data_list[index][\"deposit\"]=event.target.value;depositIndex=index;_context4.next=5;return _this.setState({data_list:data_list,depositIndex:depositIndex});case 5:if(!_this.debouncedFnDeposit){_this.debouncedFnDeposit=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.validateDepositAmount();case 1:case\"end\":return _context3.stop();}}},_callee3);})),500);}_this.debouncedFnDeposit();case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();return _this;}_createClass(ProductDetailsPopupClass,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var hold_item_reasons_options=this.state.hold_item_reasons_options;this.props.getCommonApi(\"holditemsetup/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var value=_step2.value;hold_item_reasons_options.push({value:value.id,label:value.hold_desc});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this2.setState({hold_item_reasons_options:hold_item_reasons_options});}});this.getProductList();}},{key:\"render\",value:function render(){var _this3=this;var _this$state4=this.state,data_list=_this$state4.data_list,hold_item_reasons_options=_this$state4.hold_item_reasons_options,activeRow=_this$state4.activeRow;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mb-4 mt-2 product-details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"Product Details\"))),data_list&&data_list.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:false,className:\"col-12 fs-15 submit-btn\",label:\"Done\",onClick:function onClick(){return _this3.handleSubmit();}})):null),/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-3 pr-5 mt-2 fw-500 h6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},t(\"Item\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},t(\"Qty\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},t(\"Unit Price\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},t(\"Disc\"),\"\\xA0$\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},t(\"D/Price\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},t(\"Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},t(\"Deposit\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Staff\"))),data_list&&data_list.length<=0?/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-5 pr-3 mt-2\"},t(\"No Record Found\")):null,/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-5 pr-3 mt-2\"},data_list.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 mb-2 fs-14\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 rounded p-2 accordion-menu border \".concat(activeRow==item.id?\"border-primary\":\"\"),onClick:function onClick(){return _this3.handleAccordion(item.id);}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},item.itemdesc),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},item.quantity),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-right\"},item.price),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-right\"},item.totl_disc),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-right\"},item.discount_price),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-right\"},item.trans_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-right\"},item.deposit),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.sales_staffs)),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 rounded bg-light p-3 d-none accordion fs-14\",id:item.id},/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 pl-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Quantity\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:item.quantity,type:\"number\",name:\"quantity\",onChange:function onChange(e){return _this3.handleChange(e,index);}}))),!item.is_foc?/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Deposit\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:item.deposit,name:\"deposit\",onChange:function onChange(e){return _this3.handleDepositOnChange(e,index);}//onBlur={e => this.validateDepositAmount(e, index)}\n}))):null,!item.is_foc?/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Unit Price\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:item.price,type:\"number\",name:\"price\",onChange:function onChange(e){return _this3.handleChange(e,index);}}))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Hold Reason\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:hold_item_reasons_options,value:item.holdreason?item.holdreason:0,name:\"holdreason\",onChange:function onChange(e){return _this3.handleChange(e,index);}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Hold Quantity\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:item.holditemqty?item.holditemqty:\"\",type:\"number\",name:\"holditemqty\",onChange:function onChange(e){return _this3.handleChange(e,index);}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 pl-3 mb-3\"})));}))));}}]);return ProductDetailsPopupClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonPatchApi:commonPatchApi,commonCreateApi:commonCreateApi},dispatch);};export var ProductDetailsPopup=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ProductDetailsPopupClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Cart/cart/productDetailsPopup.js"],"names":["React","Component","NormalInput","NormalButton","NormalSelect","connect","bindActionCreators","getCommonApi","commonPatchApi","commonCreateApi","Toast","_","withTranslation","ProductDetailsPopupClass","state","data_list","hold_item_reasons_options","sourceList","activRow","depositIndex","getProductList","basicApptDetail","props","custId","id","then","key","status","data","console","log","setState","length","activeRow","document","getElementById","classList","toggle","handleSubmit","value","currentData","Number","deposit","transamt","trans_amt","type","message","is_foc","push","quantity","price","toFixed","holditemqty","holdreason","handleModal","handleChange","e","index","target","name","ActualQty","HoldQty","handlePriceandQuantityChange","handleAccordion","elements","getElementsByClassName","i","add","total_disc","after_linedisc","validateDepositAmount","transAmt","handleDepositOnChange","event","debouncedFnDeposit","debounce","label","hold_desc","t","map","item","itemdesc","totl_disc","discount_price","sales_staffs","mapStateToProps","appointment","mapDispatchToProps","dispatch","ProductDetailsPopup"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NormalInput, NormalButton, NormalSelect } from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  commonPatchApi,\r\n  commonCreateApi,\r\n} from \"redux/actions/common\";\r\nimport { Toast } from \"service/toast\";\r\nimport _ from \"lodash\";\r\nimport \"./style.scss\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class ProductDetailsPopupClass extends Component {\r\n  state = {\r\n    data_list: [],\r\n    hold_item_reasons_options: [],\r\n    sourceList: [],\r\n    activRow: 0,\r\n    depositIndex: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    let { hold_item_reasons_options } = this.state;\r\n    this.props.getCommonApi(`holditemsetup/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          hold_item_reasons_options.push({\r\n            value: value.id,\r\n            label: value.hold_desc,\r\n          });\r\n        }\r\n        this.setState({ hold_item_reasons_options });\r\n      }\r\n    });\r\n    this.getProductList();\r\n  }\r\n  getProductList = () => {\r\n    let { data_list } = this.state;\r\n    let { basicApptDetail } = this.props;\r\n    this.props\r\n      .getCommonApi(\r\n        `cartpopup/?cust_noid=${basicApptDetail.custId}&cart_id=${this.props.id}&is_product=1`\r\n      )\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        if (status == \"200\") {\r\n          console.log(key, \"cartproductpopuplist\");\r\n          data_list = data;\r\n          await this.setState({\r\n            data_list,\r\n          });\r\n          if (this.state.data_list.length > 0) {\r\n            this.setState({\r\n              activeRow: this.state.data_list[0].id,\r\n            });\r\n            document\r\n              .getElementById(this.state.data_list[0].id)\r\n              .classList.toggle(\"d-none\");\r\n          }\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    let { data_list, sourceList } = this.state;\r\n    sourceList = [];\r\n\r\n    for (let value of data_list) {\r\n      let currentData = Number(value.deposit);\r\n      let transamt = Number(value.trans_amt);\r\n      if (currentData > transamt) {\r\n        Toast({\r\n          type: \"error\",\r\n          message:\r\n            \"Deposit amount should be less than or equal to transaction amount\",\r\n        });\r\n        return false;\r\n      } else {\r\n        if (value.is_foc) {\r\n          sourceList.push({\r\n            id: value.id,\r\n            quantity: Number(value.quantity),\r\n            price: Number(value.price).toFixed(2),\r\n            holditemqty: Number(value.holditemqty),\r\n            holdreason: Number(value.holdreason),\r\n          });\r\n        } else {\r\n          sourceList.push({\r\n            id: value.id,\r\n            quantity: Number(value.quantity),\r\n            price: Number(value.price).toFixed(2),\r\n            deposit: Number(value.deposit).toFixed(2),\r\n            holditemqty: Number(value.holditemqty),\r\n            holdreason: Number(value.holdreason),\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log(sourceList, \"productupdatelist\");\r\n    this.props.commonCreateApi(`cartpopup/product/`, sourceList).then(key => {\r\n      let { status, data } = key;\r\n      if (status == 200) {\r\n        this.props.handleModal();\r\n      }\r\n    });\r\n  };\r\n\r\n  handleChange = (e, index) => {\r\n    let { data_list } = this.state;\r\n    let data = e.target.value;\r\n    if ([e.target.name] == \"holdreason\") {\r\n      data_list[index][e.target.name] = Number(data);\r\n    } else if ([e.target.name] == \"holditemqty\") {\r\n      let ActualQty = Number(data_list[index][\"quantity\"]);\r\n      let HoldQty = Number(data);\r\n      if (HoldQty > ActualQty) {\r\n        Toast({\r\n          type: \"error\",\r\n          message:\r\n            \"Hold quantity should be less than or equal to actual quantity\",\r\n        });\r\n      } else {\r\n        data_list[index][e.target.name] = HoldQty;\r\n      }\r\n    } else {\r\n      data_list[index][e.target.name] = data;\r\n    }\r\n    this.setState({ data_list });\r\n    if ([e.target.name] == \"quantity\" || [e.target.name] == \"price\") {\r\n      this.handlePriceandQuantityChange(index);\r\n    }\r\n  };\r\n\r\n  handleAccordion = async id => {\r\n    let elements = document.getElementsByClassName(\"accordion\");\r\n    await this.setState({\r\n      activeRow: id,\r\n    });\r\n    for (let i = 0; i < elements.length; i++) {\r\n      elements[i].classList.add(\"d-none\");\r\n    }\r\n    document.getElementById(id).classList.toggle(\"d-none\");\r\n  };\r\n  handlePriceandQuantityChange = index => {\r\n    let { data_list } = this.state;\r\n    let total_disc =\r\n      Number(data_list[index][\"discount_amt\"]).toFixed(2) +\r\n      Number(data_list[index][\"additional_discountamt\"]);\r\n    data_list[index][\"discount_price\"] = Number(\r\n      data_list[index][\"price\"] - total_disc\r\n    ).toFixed(2);\r\n    let after_linedisc =\r\n      (data_list[index][\"price\"] - data_list[index][\"discount_amt\"]) *\r\n      data_list[index][\"quantity\"];\r\n    data_list[index][\"trans_amt\"] = Number(\r\n      after_linedisc - data_list[index][\"additional_discountamt\"]\r\n    ).toFixed(2);\r\n    data_list[index][\"deposit\"] = Number(\r\n      after_linedisc - data_list[index][\"additional_discountamt\"]\r\n    ).toFixed(2);\r\n    this.setState({\r\n      data_list,\r\n    });\r\n  };\r\n\r\n  validateDepositAmount = () => {\r\n    debugger;\r\n    let { data_list, depositIndex } = this.state;\r\n    let deposit = Number(data_list[depositIndex][\"deposit\"]);\r\n    let transAmt = Number(data_list[depositIndex][\"trans_amt\"]);\r\n    if (deposit > transAmt) {\r\n      Toast({\r\n        type: \"error\",\r\n        message:\r\n          \"Deposit amount should be less than or equal to transaction amount\",\r\n      });\r\n      data_list[depositIndex][\"deposit\"] = \"\";\r\n      depositIndex = null;\r\n      this.setState({\r\n        data_list,\r\n        depositIndex,\r\n      });\r\n    }\r\n  };\r\n  handleDepositOnChange = async (event, index) => {\r\n    //event.persist();\r\n    let { data_list, depositIndex } = this.state;\r\n    data_list[index][\"deposit\"] = event.target.value;\r\n    depositIndex = index;\r\n    await this.setState({ data_list, depositIndex });\r\n    if (!this.debouncedFnDeposit) {\r\n      this.debouncedFnDeposit = _.debounce(async () => {\r\n        this.validateDepositAmount();\r\n      }, 500);\r\n    }\r\n    this.debouncedFnDeposit();\r\n  };\r\n\r\n  render() {\r\n    let { data_list, hold_item_reasons_options, activeRow } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"container-fluid mb-4 mt-2 product-details\">\r\n          <div className=\"row\">\r\n            <div className=\"col-10\">\r\n              <h4>{t(\"Product Details\")}</h4>\r\n            </div>\r\n            {data_list && data_list.length > 0 ? (\r\n              <div className=\"col-2\">\r\n                <NormalButton\r\n                  mainbg={false}\r\n                  className=\"col-12 fs-15 submit-btn\"\r\n                  label=\"Done\"\r\n                  onClick={() => this.handleSubmit()}\r\n                />\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"row pl-3 pr-5 mt-2 fw-500 h6\">\r\n            <div className=\"col-4\">{t(`Item`)}</div>\r\n            <div className=\"col-1 text-center\">{t(`Qty`)}</div>\r\n            <div className=\"col-1 text-center\">{t(`Unit Price`)}</div>\r\n            <div className=\"col-1 text-center\">{t(`Disc`)}&nbsp;$</div>\r\n            <div className=\"col-1 text-center\">{t(`D/Price`)}</div>\r\n            <div className=\"col-1 text-center\">{t(`Amount`)}</div>\r\n            <div className=\"col-1 text-center\">{t(`Deposit`)}</div>\r\n            <div className=\"col-2\">{t(`Staff`)}</div>\r\n          </div>\r\n          {data_list && data_list.length <= 0 ? (\r\n            <div className=\"row pl-5 pr-3 mt-2\">{t(\"No Record Found\")}</div>\r\n          ) : null}\r\n\r\n          <div className=\"row pl-5 pr-3 mt-2\">\r\n            {data_list.map((item, index) => {\r\n              return (\r\n                <div className=\"row w-100 mb-2 fs-14\" key={index}>\r\n                  <div\r\n                    className={`row w-100 rounded p-2 accordion-menu border ${\r\n                      activeRow == item.id ? \"border-primary\" : \"\"\r\n                    }`}\r\n                    onClick={() => this.handleAccordion(item.id)}\r\n                  >\r\n                    <div className=\"col-4\">{item.itemdesc}</div>\r\n                    <div className=\"col-1 text-center\">{item.quantity}</div>\r\n                    <div className=\"col-1 text-right\">{item.price}</div>\r\n                    <div className=\"col-1 text-right\">{item.totl_disc}</div>\r\n                    <div className=\"col-1 text-right\">\r\n                      {item.discount_price}\r\n                    </div>\r\n                    <div className=\"col-1 text-right\">{item.trans_amt}</div>\r\n                    <div className=\"col-1 text-right\">{item.deposit}</div>\r\n                    <div className=\"col-2\">{item.sales_staffs}</div>\r\n                  </div>\r\n                  <div\r\n                    className=\"row w-100 rounded bg-light p-3 d-none accordion fs-14\"\r\n                    id={item.id}\r\n                  >\r\n                    <div className=\"row w-100 pl-3 mb-3\">\r\n                      <div className=\"col\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                          {t(\"Quantity\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalInput\r\n                            placeholder=\"Enter here\"\r\n                            value={item.quantity}\r\n                            type=\"number\"\r\n                            name=\"quantity\"\r\n                            onChange={e => this.handleChange(e, index)}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      {!item.is_foc ? (\r\n                        <div className=\"col\">\r\n                          <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                            {t(\"Deposit\")}\r\n                          </label>\r\n                          <div className=\"input-group\">\r\n                            <NormalInput\r\n                              placeholder=\"Enter here\"\r\n                              value={item.deposit}\r\n                              name=\"deposit\"\r\n                              onChange={e =>\r\n                                this.handleDepositOnChange(e, index)\r\n                              }\r\n                              //onBlur={e => this.validateDepositAmount(e, index)}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      ) : null}\r\n                      {!item.is_foc ? (\r\n                        <div className=\"col\">\r\n                          <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                            {t(\"Unit Price\")}\r\n                          </label>\r\n                          <div className=\"input-group\">\r\n                            <NormalInput\r\n                              placeholder=\"Enter here\"\r\n                              value={item.price}\r\n                              type=\"number\"\r\n                              name=\"price\"\r\n                              onChange={e => this.handleChange(e, index)}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      ) : null}\r\n                      <div className=\"col\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                          {t(\"Hold Reason\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalSelect\r\n                            options={hold_item_reasons_options}\r\n                            value={item.holdreason ? item.holdreason : 0}\r\n                            name=\"holdreason\"\r\n                            onChange={e => this.handleChange(e, index)}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                          {t(\"Hold Quantity\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalInput\r\n                            placeholder=\"Enter here\"\r\n                            value={item.holditemqty ? item.holditemqty : \"\"}\r\n                            type=\"number\"\r\n                            name=\"holditemqty\"\r\n                            onChange={e => this.handleChange(e, index)}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"row w-100 pl-3 mb-3\"></div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonPatchApi,\r\n      commonCreateApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\nexport const ProductDetailsPopup = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ProductDetailsPopupClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}