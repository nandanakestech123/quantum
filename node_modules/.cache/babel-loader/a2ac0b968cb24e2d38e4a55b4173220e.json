{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton}from\"component/common\";import{TableWrapper}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getRewardPlolicySettings}from\"redux/actions/customerPlus\";import _ from\"lodash\";import{withTranslation}from\"react-i18next\";export var RewardPolicyTableClass=/*#__PURE__*/function(_React$Component){_inherits(RewardPolicyTableClass,_React$Component);var _super=_createSuper(RewardPolicyTableClass);function RewardPolicyTableClass(){var _this;_classCallCheck(this,RewardPolicyTableClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Code\",sortKey:\"reward_code\"},{label:\"Cust Type\",sortKey:\"cust_type_desc\",enabled:true},{label:\"Reward Stock Type\",sortKey:\"reward_item_type_desc\",enabled:true},{label:\"Currency Value\",sortKey:\"cur_value\",enabled:true},{label:\"Point Value\",sortKey:\"point_value\",enabled:true},{label:\"Active\",sortKey:\"isactive\",enabled:true},{label:\"\"}],originalDataList:[],dataList:[],meta:{},currentIndex:-1,isMounted:true,isLoading:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handlePagination=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _data$page;var page,_this$props$rewardPol,dataList,pagination;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:page=(_data$page=data===null||data===void 0?void 0:data.page)!==null&&_data$page!==void 0?_data$page:1;_this.setState({isLoading:true});_context.next=4;return _this.props.getRewardPlolicySettings(\"?limit=10&page=\".concat(page));case 4:_this$props$rewardPol=_this.props.rewardPolicyList,dataList=_this$props$rewardPol.dataList,pagination=_this$props$rewardPol.pagination;_this.updateState({meta:pagination,dataList:dataList,originalDataList:dataList,isLoading:false});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.updateState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};return _this;}_createClass(RewardPolicyTableClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.handlePagination();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,headerDetails=_this$state.headerDetails,dataList=_this$state.dataList,originalDataList=_this$state.originalDataList,meta=_this$state.meta,currentIndex=_this$state.currentIndex,isLoading=_this$state.isLoading;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"head-label\"},t(\"Reward Policy\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-md-6 col-sm-12 fs-15 float-right\",label:\"Add Reward Policy\",onClick:function onClick(){return _this2.props.history.push(\"lpmanagement/addreward\");}}))))),isLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:meta,showFilterColumn:true,parentHeaderChange:function parentHeaderChange(value){return _this2.updateState(function(){return headerDetails=value;});},sortData:originalDataList,onSort:function onSort(dataList){return _this2.updateState({dataList:dataList});}},dataList?dataList.map(function(item,index){var _headerDetails$0$enab,_headerDetails$0$enab2,_headerDetails$1$enab,_headerDetails$2$enab,_headerDetails$3$enab,_headerDetails$4$enab;var id=item.id,reward_code=item.reward_code,cust_type_desc=item.cust_type_desc,cur_value=item.cur_value,point_value=item.point_value,isactive=item.isactive,reward_item_type_desc=item.reward_item_type_desc;console.log(headerDetails[0]);return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$0$enab=headerDetails[0].enabled)!==null&&_headerDetails$0$enab!==void 0?_headerDetails$0$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},reward_code)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$0$enab2=headerDetails[0].enabled)!==null&&_headerDetails$0$enab2!==void 0?_headerDetails$0$enab2:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_type_desc)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$1$enab=headerDetails[1].enabled)!==null&&_headerDetails$1$enab!==void 0?_headerDetails$1$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},reward_item_type_desc)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$2$enab=headerDetails[2].enabled)!==null&&_headerDetails$2$enab!==void 0?_headerDetails$2$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cur_value)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$3$enab=headerDetails[3].enabled)!==null&&_headerDetails$3$enab!==void 0?_headerDetails$3$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},point_value)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$4$enab=headerDetails[4].enabled)!==null&&_headerDetails$4$enab!==void 0?_headerDetails$4$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",disbaled:true,checked:isactive}))),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\",ref:function ref(node){_this2.node=node;},onClick:function onClick(){return _this2.handleClick(index);}},currentIndex===index?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more-active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"option card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pt-3\",onClick:function onClick(){return _this2.props.history.push(\"lpmanagement/\".concat(id,\"/editreward\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey px-3\"}),t(\"Edit\")))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"}))));}):\"\"))))));}}]);return RewardPolicyTableClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{rewardPolicyList:state.customerPlus.rewardPolicyList};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getRewardPlolicySettings:getRewardPlolicySettings},dispatch);};export var RewardPolicyTable=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(RewardPolicyTableClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/CustomerPlus/LoyaltyPointsSettings/RewardPolicyTable/index.js"],"names":["React","NormalButton","TableWrapper","connect","bindActionCreators","getRewardPlolicySettings","_","withTranslation","RewardPolicyTableClass","state","headerDetails","label","sortKey","enabled","originalDataList","dataList","meta","currentIndex","isMounted","isLoading","updateState","data","setState","handlePagination","page","props","rewardPolicyList","pagination","handleClick","key","active","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","t","history","push","value","map","item","index","id","reward_code","cust_type_desc","cur_value","point_value","isactive","reward_item_type_desc","console","log","Component","mapStateToProps","customerPlus","mapDispatchToProps","dispatch","RewardPolicyTable"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { TableWrapper } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getRewardPlolicySettings } from \"redux/actions/customerPlus\";\nimport _ from \"lodash\";\nimport { withTranslation } from \"react-i18next\";\n\nexport class RewardPolicyTableClass extends React.Component {\n  state = {\n    headerDetails: [\n      { label: \"Code\", sortKey: \"reward_code\" },\n      { label: \"Cust Type\", sortKey: \"cust_type_desc\", enabled: true },\n      {\n        label: \"Reward Stock Type\",\n        sortKey: \"reward_item_type_desc\",\n        enabled: true,\n      },\n      { label: \"Currency Value\", sortKey: \"cur_value\", enabled: true },\n      { label: \"Point Value\", sortKey: \"point_value\", enabled: true },\n      { label: \"Active\", sortKey: \"isactive\", enabled: true },\n      { label: \"\" },\n    ],\n    originalDataList: [],\n    dataList: [],\n    meta: {},\n    currentIndex: -1,\n    isMounted: true,\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    this.handlePagination();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  handlePagination = async (data) => {\n    let page = data?.page ?? 1;\n    this.setState({ isLoading: true });\n    await this.props.getRewardPlolicySettings(`?limit=10&page=${page}`);\n    let { dataList, pagination } = this.props.rewardPolicyList;\n    this.updateState({\n      meta: pagination,\n      dataList: dataList,\n      originalDataList: dataList,\n      isLoading: false,\n    });\n  };\n\n  handleClick = (key) => {\n    if (!this.state.active) {\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\n    }\n\n    this.updateState((prevState) => ({\n      active: !prevState.active,\n      currentIndex: key,\n    }));\n  };\n\n  handleOutsideClick = (e) => {\n    if (this.node != null) {\n      if (this.node.contains(e.target)) {\n        return;\n      }\n    }\n    this.handleClick();\n  };\n\n  render() {\n    let {\n      headerDetails,\n      dataList,\n      originalDataList,\n      meta,\n      currentIndex,\n      isLoading,\n    } = this.state;\n    let { t } = this.props;\n    return (\n      <>\n        <div className=\"customer-list container-fluid\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-md-4\">\n              <h3 className=\"head-label\">{t(\"Reward Policy\")}</h3>\n            </div>\n            <div className=\"col-md-8\">\n              <div className=\"d-flex\">\n                <div className=\"col-12 p-0\">\n                  <NormalButton\n                    mainbg={true}\n                    className=\"col-md-6 col-sm-12 fs-15 float-right\"\n                    label=\"Add Reward Policy\"\n                    onClick={() =>\n                      this.props.history.push(\"lpmanagement/addreward\")\n                    }\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          {isLoading ? (\n            <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n              <div class=\"spinner-border\" role=\"status\">\n                <span class=\"sr-only\">Loading...</span>\n              </div>\n            </div>\n          ) : (\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                <div className=\"table-container\">\n                  <TableWrapper\n                    headerDetails={headerDetails}\n                    queryHandler={this.handlePagination}\n                    pageMeta={meta}\n                    showFilterColumn={true}\n                    parentHeaderChange={(value) =>\n                      this.updateState(() => (headerDetails = value))\n                    }\n                    sortData={originalDataList}\n                    onSort={(dataList) => this.updateState({ dataList })}\n                  >\n                    {dataList\n                      ? dataList.map((item, index) => {\n                          let {\n                            id,\n                            reward_code,\n                            cust_type_desc,\n                            cur_value,\n                            point_value,\n                            isactive,\n                            reward_item_type_desc,\n                          } = item;\n                          console.log(headerDetails[0]);\n                          return (\n                            <tr key={index}>\n                              <td\n                                className={\n                                  headerDetails[0].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {reward_code}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[0].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {cust_type_desc}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[1].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {reward_item_type_desc}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[2].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {cur_value}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[3].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {point_value}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[4].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  <input\n                                    type=\"checkbox\"\n                                    disbaled\n                                    checked={isactive}\n                                  />\n                                </div>\n                              </td>\n                              <td\n                                className=\"position-relative\"\n                                ref={(node) => {\n                                  this.node = node;\n                                }}\n                                onClick={() => this.handleClick(index)}\n                              >\n                                {currentIndex === index ? (\n                                  <>\n                                    <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\n                                      <i className=\"icon-more\"></i>\n                                    </div>\n                                    <div className=\"option card\">\n                                      <div\n                                        className=\"d-flex align-items-center fs-16 pt-3\"\n                                        onClick={() =>\n                                          this.props.history.push(\n                                            `lpmanagement/${id}/editreward`\n                                          )\n                                        }\n                                      >\n                                        <span className=\"icon-eye-grey px-3\"></span>\n                                        {t(\"Edit\")}\n                                      </div>\n                                    </div>\n                                  </>\n                                ) : (\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\n                                    <i className=\"icon-more\"></i>\n                                  </div>\n                                )}\n                              </td>\n                            </tr>\n                          );\n                        })\n                      : \"\"}\n                  </TableWrapper>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  rewardPolicyList: state.customerPlus.rewardPolicyList,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      getRewardPlolicySettings,\n    },\n    dispatch\n  );\n};\n\nexport const RewardPolicyTable = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(RewardPolicyTableClass)\n);\n"]},"metadata":{},"sourceType":"module"}