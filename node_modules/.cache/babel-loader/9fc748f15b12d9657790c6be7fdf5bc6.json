{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\Staff\\\\ListStaff\\\\index.js\";\nimport React from \"react\";\nimport { NormalButton, NormalSelect } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport \"./style.scss\";\nimport { api } from \"service/api\";\nimport { Staff } from \"service/apiVariables\";\nimport { getStaff, deleteStaff } from \"redux/actions/staff\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nexport class ListStaffClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [{\n        label: \"Staff name\",\n        sortKey: true\n      }, {\n        label: \"Phone\"\n      }, {\n        label: \"Staff ID\",\n        sortKey: true\n      }, {\n        label: \"Specialist\",\n        sortKey: true\n      }, {\n        label: \"Home site\",\n        sortKey: true\n      }, {\n        label: \"Current site\",\n        sortKey: true\n      }, {\n        label: \"\"\n      }],\n      staffList: [],\n      pageMeta: {},\n      active: false,\n      currentIndex: -1\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.setState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n\n    this.queryHandler = data => {\n      let {\n        page = 1,\n        limit = 10,\n        search = \"\"\n      } = data;\n      this.props.getStaff(`?page=${page}&limit=${limit}`).then(res => {\n        // this.props.getStaff(`?page=${page}&limit=${limit}&search=${search}`).then((res) => {\n        console.log(res, \"dsfdfaafg\", res.data.dataList);\n        let {\n          staffList,\n          pageMeta\n        } = this.state;\n        staffList = res.data.dataList;\n        pageMeta = res.data.meta.pagination;\n        this.setState({\n          staffList,\n          pageMeta\n        });\n      });\n    };\n\n    this.handlePagination = page => {\n      this.queryHandler(page);\n    };\n\n    this.handlesearch = event => {\n      event.persist();\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(() => {\n          let searchString = event.target.value;\n          let data = {\n            search: searchString\n          };\n          this.queryHandler(data);\n        }, 500);\n      }\n\n      this.debouncedFn();\n    };\n\n    this.getSkills = services => {\n      console.log(skills, \"sdfoiuyujf\");\n      let skills = [];\n\n      for (let key of services) {\n        skills.push(key.Course);\n      }\n\n      console.log(skills, \"sdfoiuyujf\");\n      return String(skills);\n    };\n\n    this.handleDeleteStaff = id => {\n      this.props.deleteStaff(`${id}/`).then(res => {});\n    };\n  }\n\n  componentDidMount() {\n    this.queryHandler({});\n  } // popup open/close\n\n\n  render() {\n    let {\n      headerDetails,\n      staffList,\n      pageMeta,\n      currentIndex\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"staffList-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, \"List of Staffs\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(InputSearch, {\n      className: \"\",\n      placeholder: \"Search Staff\",\n      onChange: this.handleChange,\n      value: ``,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100 col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      className: \"col-12 fs-15 float-right\",\n      label: \"Staff availability\",\n      mainbg: true,\n      onClick: () => this.props.history.push(\"/admin/staff/availability\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100 col-3 p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 float-right\",\n      label: \"Add Staff\",\n      onClick: () => this.props.history.push(\"/admin/staff/add\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: pageMeta,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    }, staffList.length > 0 ? staffList.map(({\n      id,\n      emp_name,\n      emp_phone1,\n      emp_code,\n      services,\n      site_code,\n      defaultsitecode,\n      status\n    }, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: \"position-relative status-type\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: `${status === \"available\" ? \"available\" : \"not-available\"}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 31\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 31\n        }\n      }, emp_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 31\n        }\n      }, emp_phone1)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 31\n        }\n      }, emp_code)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 31\n        }\n      }, services ? services[0] : \"\")), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 31\n        }\n      }, defaultsitecode)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 31\n        }\n      }, site_code)), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"position-relative\",\n        ref: node => {\n          this.node = node;\n        },\n        onClick: () => this.handleClick(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 29\n        }\n      }, currentIndex === index ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more-active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"option card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-14 pt-3\",\n        onClick: () => this.props.history.push(`/admin/staff/${id}/staffDetails`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-eye-grey px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 39\n        }\n      }), \" \", \"View\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-14\",\n        onClick: () => this.props.history.push(`/admin/staff/${id}/editStaff`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-edit px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 39\n        }\n      }), \" \", \"Edit\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-14 pb-3\",\n        onClick: () => this.handleDeleteStaff(id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-delete px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 39\n        }\n      }), \" \", \"Delete\", \" \"))) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more text-grey\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 35\n        }\n      }))));\n    }) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"palette\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 19\n      }\n    }, \"Available today\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color not-available\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 19\n      }\n    }, \"Not Available today\")))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({// filter: state.dashboard\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getStaff,\n    deleteStaff\n  }, dispatch);\n};\n\nexport const ListStaff = connect(mapStateToProps, mapDispatchToProps)(ListStaffClass);","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/Staff/ListStaff/index.js"],"names":["React","NormalButton","NormalSelect","InputSearch","TableWrapper","api","Staff","getStaff","deleteStaff","connect","bindActionCreators","_","ListStaffClass","Component","state","headerDetails","label","sortKey","staffList","pageMeta","active","currentIndex","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","setState","prevState","e","node","contains","target","queryHandler","data","page","limit","search","props","then","res","console","log","dataList","meta","pagination","handlePagination","handlesearch","event","persist","debouncedFn","debounce","searchString","value","getSkills","services","skills","push","Course","String","handleDeleteStaff","id","componentDidMount","render","handleChange","history","length","map","emp_name","emp_phone1","emp_code","site_code","defaultsitecode","status","index","mapStateToProps","mapDispatchToProps","dispatch","ListStaff"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { NormalButton, NormalSelect } from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport \"./style.scss\";\r\nimport { api } from \"service/api\";\r\nimport { Staff } from \"service/apiVariables\";\r\nimport { getStaff, deleteStaff } from \"redux/actions/staff\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport _ from \"lodash\";\r\n\r\nexport class ListStaffClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Staff name\", sortKey: true },\r\n      { label: \"Phone\" },\r\n      { label: \"Staff ID\", sortKey: true },\r\n      { label: \"Specialist\", sortKey: true },\r\n      { label: \"Home site\", sortKey: true },\r\n      { label: \"Current site\", sortKey: true },\r\n      { label: \"\" },\r\n    ],\r\n    staffList: [],\r\n    pageMeta: {},\r\n    active: false,\r\n    currentIndex: -1,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.queryHandler({});\r\n  }\r\n\r\n  // popup open/close\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  // while clicking popup close at outside click\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  // api call for staff\r\n  queryHandler = data => {\r\n    let { page = 1, limit = 10, search = \"\" } = data;\r\n    this.props.getStaff(`?page=${page}&limit=${limit}`).then(res => {\r\n      // this.props.getStaff(`?page=${page}&limit=${limit}&search=${search}`).then((res) => {\r\n      console.log(res, \"dsfdfaafg\", res.data.dataList);\r\n      let { staffList, pageMeta } = this.state;\r\n      staffList = res.data.dataList;\r\n      pageMeta = res.data.meta.pagination;\r\n      this.setState({\r\n        staffList,\r\n        pageMeta,\r\n      });\r\n    });\r\n  };\r\n\r\n  // pagination\r\n  handlePagination = page => {\r\n    this.queryHandler(page);\r\n  };\r\n\r\n  // seach change with api call\r\n  handlesearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        let data = { search: searchString };\r\n        this.queryHandler(data);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  // skills api call\r\n  getSkills = services => {\r\n    console.log(skills, \"sdfoiuyujf\");\r\n    let skills = [];\r\n    for (let key of services) {\r\n      skills.push(key.Course);\r\n    }\r\n    console.log(skills, \"sdfoiuyujf\");\r\n    return String(skills);\r\n  };\r\n\r\n  // delete api call for staff\r\n  handleDeleteStaff = id => {\r\n    this.props.deleteStaff(`${id}/`).then(res => {});\r\n  };\r\n\r\n  render() {\r\n    let { headerDetails, staffList, pageMeta, currentIndex } = this.state;\r\n    return (\r\n      <div className=\"staffList-container\">\r\n        <div className=\"row align-items-center\">\r\n          <div className=\"col-md-4\">\r\n            <h3>List of Staffs</h3>\r\n          </div>\r\n          <div className=\"col-md-8\">\r\n            <div className=\"d-flex justify-content-between\">\r\n              <div className=\"input-container\">\r\n                <InputSearch\r\n                  className=\"\"\r\n                  placeholder=\"Search Staff\"\r\n                  onChange={this.handleChange}\r\n                  value={``}\r\n                />\r\n              </div>\r\n              <div className=\"w-100 col-4\">\r\n                <NormalButton\r\n                  className=\"col-12 fs-15 float-right\"\r\n                  label=\"Staff availability\"\r\n                  mainbg={true}\r\n                  onClick={() =>\r\n                    this.props.history.push(\"/admin/staff/availability\")\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"w-100 col-3 p-0\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  className=\"col-12 fs-15 float-right\"\r\n                  label=\"Add Staff\"\r\n                  onClick={() => this.props.history.push(\"/admin/staff/add\")}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* <div className=\"filter-by\">\r\n                    <p className=\"head\">Filter</p>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-3\">\r\n                            <div>\r\n                                <label className=\"label\">Service</label>\r\n                                <div className=\"input-group filter\">\r\n                                    <NormalSelect\r\n                                        placeholder=\"Masseuse\"\r\n                                        // options={treatmentOption}\r\n                                        // value={treatment}\r\n                                        iconname=\"icon-down-key\"\r\n                                        name=\"treatment\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                            <div>\r\n                                <label className=\"label\">Department</label>\r\n                                <div className=\"input-group filter\">\r\n                                    <NormalSelect\r\n                                        placeholder=\"Select department\"\r\n                                        // options={treatmentOption}\r\n                                        // value={treatment}\r\n                                        iconname=\"icon-down-key\"\r\n                                        name=\"treatment\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                            <div>\r\n                                <label className=\"label\">Contract duration</label>\r\n                                <div className=\"input-group filter\">\r\n                                    <NormalSelect\r\n                                        placeholder=\"Select duration\"\r\n                                        // options={treatmentOption}\r\n                                        // value={treatment}\r\n                                        iconname=\"icon-down-key\"\r\n                                        name=\"treatment\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                            <div>\r\n                                <label className=\"label\">Rating</label>\r\n                                <div className=\"input-group filter\">\r\n                                    <NormalSelect\r\n                                        placeholder=\"Select rating\"\r\n                                        // options={treatmentOption}\r\n                                        // value={treatment}\r\n                                        iconname=\"icon-down-key\"\r\n                                        name=\"treatment\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div> */}\r\n        <div className=\"tab-table-content\">\r\n          <div className=\"py-4\">\r\n            <div className=\"table-container\">\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n                pageMeta={pageMeta}\r\n              >\r\n                {staffList.length > 0\r\n                  ? staffList.map(\r\n                      (\r\n                        {\r\n                          id,\r\n                          emp_name,\r\n                          emp_phone1,\r\n                          emp_code,\r\n                          services,\r\n                          site_code,\r\n                          defaultsitecode,\r\n                          status,\r\n                        },\r\n                        index\r\n                      ) => {\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td className=\"position-relative status-type\">\r\n                              <span\r\n                                className={`${\r\n                                  status === \"available\"\r\n                                    ? \"available\"\r\n                                    : \"not-available\"\r\n                                }`}\r\n                              ></span>\r\n                              <div className=\"text-left\">{emp_name}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{emp_phone1}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{emp_code}</div>\r\n                            </td>\r\n                            {/* <td><div className=\"d-flex align-items-center justify-content-center\"></div></td> */}\r\n                            <td>\r\n                              <div className=\"text-left\">\r\n                                {services ? services[0] : \"\"}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{defaultsitecode}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{site_code}</div>\r\n                            </td>\r\n                            <td\r\n                              className=\"position-relative\"\r\n                              ref={node => {\r\n                                this.node = node;\r\n                              }}\r\n                              onClick={() => this.handleClick(index)}\r\n                            >\r\n                              {currentIndex === index ? (\r\n                                <>\r\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\r\n                                    <i className=\"icon-more\"></i>\r\n                                  </div>\r\n                                  <div className=\"option card\">\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-14 pt-3\"\r\n                                      onClick={() =>\r\n                                        this.props.history.push(\r\n                                          `/admin/staff/${id}/staffDetails`\r\n                                        )\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-eye-grey px-3\"></span>{\" \"}\r\n                                      View{\" \"}\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-14\"\r\n                                      onClick={() =>\r\n                                        this.props.history.push(\r\n                                          `/admin/staff/${id}/editStaff`\r\n                                        )\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-edit px-3\"></span>{\" \"}\r\n                                      Edit{\" \"}\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-14 pb-3\"\r\n                                      onClick={() => this.handleDeleteStaff(id)}\r\n                                    >\r\n                                      <span className=\"icon-delete px-3\"></span>{\" \"}\r\n                                      Delete{\" \"}\r\n                                    </div>\r\n                                  </div>\r\n                                </>\r\n                              ) : (\r\n                                <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\r\n                                  <i className=\"icon-more text-grey\"></i>\r\n                                </div>\r\n                              )}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      }\r\n                    )\r\n                  : null}\r\n              </TableWrapper>\r\n              <div className=\"palette\">\r\n                <div className=\"color-detail\">\r\n                  <div className=\"color\"></div>\r\n                  <div className=\"detail\">Available today</div>\r\n                </div>\r\n                <div className=\"color-detail\">\r\n                  <div className=\"color not-available\"></div>\r\n                  <div className=\"detail\">Not Available today</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getStaff,\r\n      deleteStaff,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ListStaff = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ListStaffClass);\r\n"]},"metadata":{},"sourceType":"module"}