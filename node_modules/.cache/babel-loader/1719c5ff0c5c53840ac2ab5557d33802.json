{"ast":null,"code":"/**\r\n * DevExtreme (ui/drop_down_button.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _ui = _interopRequireDefault(require(\"./widget/ui.widget\"));\n\nvar _function_template = require(\"../core/templates/function_template\");\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _button_group = _interopRequireDefault(require(\"./button_group\"));\n\nvar _popup = _interopRequireDefault(require(\"./popup\"));\n\nvar _list = _interopRequireDefault(require(\"./list\"));\n\nvar _data = require(\"../core/utils/data\");\n\nvar _element = require(\"../core/element\");\n\nvar _icon = require(\"../core/utils/icon\");\n\nvar _data_helper = _interopRequireDefault(require(\"../data_helper\"));\n\nvar _data_source = require(\"../data/data_source/data_source\");\n\nvar _array_store = _interopRequireDefault(require(\"../data/array_store\"));\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _common = require(\"../core/utils/common\");\n\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\n\nvar _utils = require(\"./drop_down_editor/utils\");\n\nvar _message = _interopRequireDefault(require(\"../localization/message\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DROP_DOWN_BUTTON_CLASS = \"dx-dropdownbutton\";\nvar DROP_DOWN_BUTTON_CONTENT = \"dx-dropdownbutton-content\";\nvar DROP_DOWN_BUTTON_ACTION_CLASS = \"dx-dropdownbutton-action\";\nvar DROP_DOWN_BUTTON_TOGGLE_CLASS = \"dx-dropdownbutton-toggle\";\nvar DROP_DOWN_BUTTON_HAS_ARROW_CLASS = \"dx-dropdownbutton-has-arrow\";\nvar DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS = \"dx-dropdownbutton-popup-wrapper\";\nvar DX_BUTTON_TEXT_CLASS = \"dx-button-text\";\nvar DX_ICON_RIGHT_CLASS = \"dx-icon-right\";\n\nvar DropDownButton = _ui.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      itemTemplate: \"item\",\n      keyExpr: \"this\",\n      displayExpr: \"this\",\n      selectedItem: null,\n      selectedItemKey: null,\n      stylingMode: \"outlined\",\n      deferRendering: true,\n      noDataText: _message.default.format(\"dxCollectionWidget-noDataText\"),\n      useSelectMode: false,\n      splitButton: false,\n      showArrowIcon: true,\n      text: \"\",\n      icon: void 0,\n      onButtonClick: null,\n      onSelectionChanged: null,\n      onItemClick: null,\n      opened: false,\n      items: null,\n      dataSource: null,\n      focusStateEnabled: true,\n      hoverStateEnabled: true,\n      dropDownOptions: {},\n      dropDownContentTemplate: \"content\",\n      wrapItemText: false,\n      grouped: false,\n      groupTemplate: \"group\",\n      buttonGroupOptions: {}\n    });\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    (0, _extend.extend)(this._optionsByReference, {\n      selectedItem: true\n    });\n  },\n  _init: function () {\n    this.callBase();\n\n    this._createItemClickAction();\n\n    this._createActionClickAction();\n\n    this._createSelectionChangedAction();\n\n    this._initDataSource();\n\n    this._compileKeyGetter();\n\n    this._compileDisplayGetter();\n\n    this._itemsToDataSource(this.option(\"items\"));\n\n    this._options.cache(\"buttonGroupOptions\", this.option(\"buttonGroupOptions\"));\n\n    this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"));\n  },\n  _initTemplates: function () {\n    var _this = this;\n\n    this._templateManager.addDefaultTemplates({\n      content: new _function_template.FunctionTemplate(function (options) {\n        var $popupContent = (0, _renderer.default)(options.container);\n        var $listContainer = (0, _renderer.default)(\"<div>\").appendTo($popupContent);\n        _this._list = _this._createComponent($listContainer, _list.default, _this._listOptions());\n\n        _this._list.registerKeyHandler(\"escape\", _this._escHandler.bind(_this));\n\n        _this._list.registerKeyHandler(\"tab\", _this._escHandler.bind(_this));\n\n        _this._list.registerKeyHandler(\"leftArrow\", _this._escHandler.bind(_this));\n\n        _this._list.registerKeyHandler(\"rightArrow\", _this._escHandler.bind(_this));\n      })\n    });\n\n    this.callBase();\n  },\n  _itemsToDataSource: function (value) {\n    if (!this._dataSource) {\n      this._dataSource = new _data_source.DataSource({\n        store: new _array_store.default({\n          key: this._getKey(),\n          data: value\n        }),\n        pageSize: 0\n      });\n    }\n  },\n  _getKey: function () {\n    var _this$_dataSource;\n\n    var keyExpr = this.option(\"keyExpr\");\n    var storeKey = null === (_this$_dataSource = this._dataSource) || void 0 === _this$_dataSource ? void 0 : _this$_dataSource.key();\n    return (0, _type.isDefined)(storeKey) && (!(0, _type.isDefined)(keyExpr) || \"this\" === keyExpr) ? storeKey : keyExpr;\n  },\n  _compileKeyGetter: function () {\n    this._keyGetter = (0, _data.compileGetter)(this._getKey());\n  },\n  _compileDisplayGetter: function () {\n    this._displayGetter = (0, _data.compileGetter)(this.option(\"displayExpr\"));\n  },\n  _initMarkup: function () {\n    this.callBase();\n    this.$element().addClass(DROP_DOWN_BUTTON_CLASS);\n\n    this._renderButtonGroup();\n\n    this._updateArrowClass();\n\n    if ((0, _type.isDefined)(this.option(\"selectedItemKey\"))) {\n      this._loadSelectedItem().done(this._updateActionButton.bind(this));\n    }\n  },\n  _render: function () {\n    if (!this.option(\"deferRendering\") || this.option(\"opened\")) {\n      this._renderPopup();\n    }\n\n    this.callBase();\n  },\n  _renderContentImpl: function () {\n    if (this._popup) {\n      this._renderPopupContent();\n    }\n\n    return this.callBase();\n  },\n  _loadSelectedItem: function () {\n    var d = new _deferred.Deferred();\n\n    if (this._list && void 0 !== this._lastSelectedItemData) {\n      var cachedResult = this.option(\"useSelectMode\") ? this._list.option(\"selectedItem\") : this._lastSelectedItemData;\n      return d.resolve(cachedResult);\n    }\n\n    this._lastSelectedItemData = void 0;\n    var selectedItemKey = this.option(\"selectedItemKey\");\n\n    this._loadSingle(this._getKey(), selectedItemKey).done(d.resolve).fail(function () {\n      d.resolve(null);\n    });\n\n    return d.promise();\n  },\n  _createActionClickAction: function () {\n    this._actionClickAction = this._createActionByOption(\"onButtonClick\");\n  },\n  _createSelectionChangedAction: function () {\n    this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\");\n  },\n  _createItemClickAction: function () {\n    this._itemClickAction = this._createActionByOption(\"onItemClick\");\n  },\n  _fireSelectionChangedAction: function (_ref) {\n    var previousValue = _ref.previousValue,\n        value = _ref.value;\n\n    this._selectionChangedAction({\n      item: value,\n      previousItem: previousValue\n    });\n  },\n  _fireItemClickAction: function (_ref2) {\n    var event = _ref2.event,\n        itemElement = _ref2.itemElement,\n        itemData = _ref2.itemData;\n    return this._itemClickAction({\n      event: event,\n      itemElement: itemElement,\n      itemData: this._actionItem || itemData\n    });\n  },\n  _actionButtonConfig: function () {\n    return {\n      text: this.option(\"text\"),\n      icon: this.option(\"icon\"),\n      elementAttr: {\n        \"class\": DROP_DOWN_BUTTON_ACTION_CLASS\n      }\n    };\n  },\n  _getButtonGroupItems: function () {\n    var items = [];\n    items.push(this._actionButtonConfig());\n\n    if (this.option(\"splitButton\")) {\n      items.push({\n        icon: \"spindown\",\n        elementAttr: {\n          \"class\": DROP_DOWN_BUTTON_TOGGLE_CLASS\n        }\n      });\n    }\n\n    return items;\n  },\n  _buttonGroupItemClick: function (_ref3) {\n    var event = _ref3.event,\n        itemData = _ref3.itemData;\n    var isActionButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_ACTION_CLASS;\n    var isToggleButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_TOGGLE_CLASS;\n\n    if (isToggleButton) {\n      this.toggle();\n    } else {\n      if (isActionButton) {\n        this._actionClickAction({\n          event: event,\n          selectedItem: this.option(\"selectedItem\")\n        });\n\n        if (!this.option(\"splitButton\")) {\n          this.toggle();\n        }\n      }\n    }\n  },\n  _buttonGroupOptions: function () {\n    var _this2 = this;\n\n    return (0, _extend.extend)({\n      items: this._getButtonGroupItems(),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      onItemClick: this._buttonGroupItemClick.bind(this),\n      width: \"100%\",\n      height: \"100%\",\n      stylingMode: this.option(\"stylingMode\"),\n      selectionMode: \"none\",\n      buttonTemplate: function (_ref4, buttonContent) {\n        var text = _ref4.text,\n            icon = _ref4.icon;\n\n        if (_this2.option(\"splitButton\") || !_this2.option(\"showArrowIcon\")) {\n          return \"content\";\n        }\n\n        var $firstIcon = (0, _icon.getImageContainer)(icon);\n        var $textContainer = text ? (0, _renderer.default)(\"<span>\").text(text).addClass(DX_BUTTON_TEXT_CLASS) : void 0;\n        var $secondIcon = (0, _icon.getImageContainer)(\"spindown\").addClass(DX_ICON_RIGHT_CLASS);\n        (0, _renderer.default)(buttonContent).append($firstIcon, $textContainer, $secondIcon);\n      }\n    }, this._options.cache(\"buttonGroupOptions\"));\n  },\n  _renderPopupContent: function () {\n    var $content = this._popup.$content();\n\n    var template = this._getTemplateByOption(\"dropDownContentTemplate\");\n\n    $content.empty();\n    this._popupContentId = \"dx-\" + new _guid.default();\n    this.setAria(\"id\", this._popupContentId, $content);\n    return template.render({\n      container: (0, _element.getPublicElement)($content),\n      model: this.option(\"items\") || this._dataSource\n    });\n  },\n  _popupOptions: function () {\n    var _this3 = this;\n\n    var horizontalAlignment = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\n    return (0, _extend.extend)({\n      dragEnabled: false,\n      focusStateEnabled: false,\n      deferRendering: this.option(\"deferRendering\"),\n      closeOnOutsideClick: function (e) {\n        var $element = _this3.$element();\n\n        var $buttonClicked = (0, _renderer.default)(e.target).closest(\".\".concat(DROP_DOWN_BUTTON_CLASS));\n        return !$buttonClicked.is($element);\n      },\n      showTitle: false,\n      animation: {\n        show: {\n          type: \"fade\",\n          duration: 0,\n          from: 0,\n          to: 1\n        },\n        hide: {\n          type: \"fade\",\n          duration: 400,\n          from: 1,\n          to: 0\n        }\n      },\n      width: function () {\n        return (0, _utils.getElementWidth)(_this3.$element());\n      },\n      height: \"auto\",\n      shading: false,\n      position: {\n        of: this.$element(),\n        collision: \"flipfit\",\n        my: \"top \" + horizontalAlignment,\n        at: \"bottom \" + horizontalAlignment\n      }\n    }, this._options.cache(\"dropDownOptions\"), {\n      visible: this.option(\"opened\")\n    });\n  },\n  _listOptions: function () {\n    var _this4 = this;\n\n    var selectedItemKey = this.option(\"selectedItemKey\");\n    var useSelectMode = this.option(\"useSelectMode\");\n    return {\n      selectionMode: useSelectMode ? \"single\" : \"none\",\n      wrapItemText: this.option(\"wrapItemText\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      showItemDataTitle: true,\n      onContentReady: function () {\n        return _this4._fireContentReadyAction();\n      },\n      selectedItemKeys: selectedItemKey && useSelectMode ? [selectedItemKey] : [],\n      grouped: this.option(\"grouped\"),\n      groupTemplate: this.option(\"groupTemplate\"),\n      keyExpr: this._getKey(),\n      noDataText: this.option(\"noDataText\"),\n      displayExpr: this.option(\"displayExpr\"),\n      itemTemplate: this.option(\"itemTemplate\"),\n      items: this.option(\"items\"),\n      dataSource: this._dataSource,\n      onItemClick: function (e) {\n        if (!_this4.option(\"useSelectMode\")) {\n          _this4._lastSelectedItemData = e.itemData;\n        }\n\n        _this4.option(\"selectedItemKey\", _this4._keyGetter(e.itemData));\n\n        var actionResult = _this4._fireItemClickAction(e);\n\n        if (false !== actionResult) {\n          _this4.toggle(false);\n\n          _this4._buttonGroup.focus();\n        }\n      }\n    };\n  },\n  _upDownKeyHandler: function () {\n    if (this._popup && this._popup.option(\"visible\") && this._list) {\n      this._list.focus();\n    } else {\n      this.open();\n    }\n  },\n  _escHandler: function () {\n    this.close();\n\n    this._buttonGroup.focus();\n  },\n  _renderPopup: function () {\n    var $popup = (0, _renderer.default)(\"<div>\");\n    this.$element().append($popup);\n    this._popup = this._createComponent($popup, _popup.default, this._popupOptions());\n\n    this._popup.$content().addClass(DROP_DOWN_BUTTON_CONTENT);\n\n    this._popup._wrapper().addClass(DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS);\n\n    this._popup.on(\"hiding\", this._popupHidingHandler.bind(this));\n\n    this._popup.on(\"showing\", this._popupShowingHandler.bind(this));\n\n    this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\");\n  },\n  _popupHidingHandler: function () {\n    this.option(\"opened\", false);\n    this.setAria({\n      expanded: false,\n      owns: void 0\n    });\n  },\n  _popupOptionChanged: function (args) {\n    var options = _ui.default.getOptionsFromContainer(args);\n\n    this._setPopupOption(options);\n\n    var optionsKeys = Object.keys(options);\n\n    if (optionsKeys.indexOf(\"width\") !== -1 || optionsKeys.indexOf(\"height\") !== -1) {\n      this._dimensionChanged();\n    }\n  },\n  _dimensionChanged: function () {\n    var _this5 = this;\n\n    var popupWidth = (0, _utils.getSizeValue)(this.option(\"dropDownOptions.width\"));\n\n    if (void 0 === popupWidth) {\n      this._setPopupOption(\"width\", function () {\n        return (0, _utils.getElementWidth)(_this5.$element());\n      });\n    }\n  },\n  _setPopupOption: function (optionName, value) {\n    this._setWidgetOption(\"_popup\", arguments);\n  },\n  _popupShowingHandler: function () {\n    this.option(\"opened\", true);\n    this.setAria({\n      expanded: true,\n      owns: this._popupContentId\n    });\n  },\n  _renderButtonGroup: function () {\n    var $buttonGroup = this._buttonGroup && this._buttonGroup.$element() || (0, _renderer.default)(\"<div>\");\n\n    if (!this._buttonGroup) {\n      this.$element().append($buttonGroup);\n    }\n\n    this._buttonGroup = this._createComponent($buttonGroup, _button_group.default, this._buttonGroupOptions());\n\n    this._buttonGroup.registerKeyHandler(\"downArrow\", this._upDownKeyHandler.bind(this));\n\n    this._buttonGroup.registerKeyHandler(\"tab\", this.close.bind(this));\n\n    this._buttonGroup.registerKeyHandler(\"upArrow\", this._upDownKeyHandler.bind(this));\n\n    this._buttonGroup.registerKeyHandler(\"escape\", this._escHandler.bind(this));\n\n    this._bindInnerWidgetOptions(this._buttonGroup, \"buttonGroupOptions\");\n  },\n  _updateArrowClass: function () {\n    var hasArrow = this.option(\"splitButton\") || this.option(\"showArrowIcon\");\n    this.$element().toggleClass(DROP_DOWN_BUTTON_HAS_ARROW_CLASS, hasArrow);\n  },\n  toggle: function (visible) {\n    if (!this._popup) {\n      this._renderPopup();\n\n      this._renderContent();\n    }\n\n    return this._popup.toggle(visible);\n  },\n  open: function () {\n    return this.toggle(true);\n  },\n  close: function () {\n    return this.toggle(false);\n  },\n  _setListOption: function (name, value) {\n    this._list && this._list.option(name, value);\n  },\n  _getDisplayValue: function (item) {\n    var isPrimitiveItem = !(0, _type.isPlainObject)(item);\n    var displayValue = isPrimitiveItem ? item : this._displayGetter(item);\n    return !(0, _type.isPlainObject)(displayValue) ? String((0, _common.ensureDefined)(displayValue, \"\")) : \"\";\n  },\n  _updateActionButton: function (selectedItem) {\n    if (this.option(\"useSelectMode\")) {\n      this.option({\n        text: this._getDisplayValue(selectedItem),\n        icon: (0, _type.isPlainObject)(selectedItem) ? selectedItem.icon : void 0\n      });\n    }\n\n    this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem);\n\n    this._setOptionWithoutOptionChange(\"selectedItemKey\", this._keyGetter(selectedItem));\n  },\n  _clean: function () {\n    this._list && this._list.$element().remove();\n    this._popup && this._popup.$element().remove();\n  },\n  _selectedItemKeyChanged: function (value) {\n    var _this6 = this;\n\n    this._setListOption(\"selectedItemKeys\", this.option(\"useSelectMode\") && (0, _type.isDefined)(value) ? [value] : []);\n\n    var previousItem = this.option(\"selectedItem\");\n\n    this._loadSelectedItem().done(function (selectedItem) {\n      _this6._updateActionButton(selectedItem);\n\n      if (_this6._displayGetter(previousItem) !== _this6._displayGetter(selectedItem)) {\n        _this6._fireSelectionChangedAction({\n          previousValue: previousItem,\n          value: selectedItem\n        });\n      }\n    });\n  },\n  _actionButtonOptionChanged: function (_ref5) {\n    var name = _ref5.name,\n        value = _ref5.value;\n    var newConfig = {};\n    newConfig[name] = value;\n\n    this._buttonGroup.option(\"items[0]\", (0, _extend.extend)({}, this._actionButtonConfig(), newConfig));\n\n    this._popup && this._popup.repaint();\n  },\n  _selectModeChanged: function (value) {\n    if (value) {\n      this._setListOption(\"selectionMode\", \"single\");\n\n      var selectedItemKey = this.option(\"selectedItemKey\");\n\n      this._setListOption(\"selectedItemKeys\", selectedItemKey ? [selectedItemKey] : []);\n    } else {\n      this._setListOption(\"selectionMode\", \"none\");\n\n      this.option({\n        selectedItemKey: void 0,\n        selectedItem: void 0\n      });\n    }\n  },\n  _updateItemCollection: function (optionName) {\n    var _this7 = this;\n\n    var selectedItemKey = this.option(\"selectedItemKey\");\n\n    this._setListOption(\"selectedItem\", null);\n\n    this._setWidgetOption(\"_list\", [optionName]);\n\n    if ((0, _type.isDefined)(selectedItemKey)) {\n      this._loadSelectedItem().done(function (selectedItem) {\n        _this7._setListOption(\"selectedItemKeys\", [selectedItemKey]);\n\n        _this7._setListOption(\"selectedItem\", selectedItem);\n      }).fail(function (error) {\n        _this7._setListOption(\"selectedItemKeys\", []);\n      }).always(this._updateActionButton.bind(this));\n    }\n  },\n  _updateDataSource: function () {\n    var items = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._dataSource.items();\n    this._dataSource = void 0;\n\n    this._itemsToDataSource(items);\n\n    this._updateKeyExpr();\n  },\n  _updateKeyExpr: function () {\n    this._compileKeyGetter();\n\n    this._setListOption(\"keyExpr\", this._getKey());\n  },\n  _optionChanged: function (args) {\n    var _this$_popup;\n\n    var name = args.name,\n        value = args.value;\n\n    switch (name) {\n      case \"useSelectMode\":\n        this._selectModeChanged(value);\n\n        break;\n\n      case \"splitButton\":\n        this._updateArrowClass();\n\n        this._renderButtonGroup();\n\n        break;\n\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n\n        this._setListOption(name, value);\n\n        this._updateActionButton(this.option(\"selectedItem\"));\n\n        break;\n\n      case \"keyExpr\":\n        this._updateDataSource();\n\n        break;\n\n      case \"buttonGroupOptions\":\n        this._innerWidgetOptionChanged(this._buttonGroup, args);\n\n        break;\n\n      case \"dropDownOptions\":\n        if (\"dropDownOptions.visible\" === args.fullName) {\n          break;\n        }\n\n        if (void 0 !== args.value.visible) {\n          delete args.value.visible;\n        }\n\n        this._popupOptionChanged(args);\n\n        this._innerWidgetOptionChanged(this._popup, args);\n\n        break;\n\n      case \"opened\":\n        this.toggle(value);\n        break;\n\n      case \"focusStateEnabled\":\n      case \"hoverStateEnabled\":\n        this._setListOption(name, value);\n\n        this._buttonGroup.option(name, value);\n\n        this.callBase(args);\n        break;\n\n      case \"items\":\n        this._updateDataSource(this.option(\"items\"));\n\n        this._updateItemCollection(name);\n\n        break;\n\n      case \"dataSource\":\n        if (Array.isArray(value)) {\n          this._updateDataSource(this.option(\"dataSource\"));\n        } else {\n          this._initDataSource();\n\n          this._updateKeyExpr();\n        }\n\n        this._updateItemCollection(name);\n\n        break;\n\n      case \"icon\":\n      case \"text\":\n        this._actionButtonOptionChanged(args);\n\n        break;\n\n      case \"showArrowIcon\":\n        this._updateArrowClass();\n\n        this._buttonGroup.repaint();\n\n        this._popup && this._popup.repaint();\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n        null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.repaint();\n        break;\n\n      case \"stylingMode\":\n        this._buttonGroup.option(name, value);\n\n        break;\n\n      case \"itemTemplate\":\n      case \"grouped\":\n      case \"noDataText\":\n      case \"groupTemplate\":\n      case \"wrapItemText\":\n        this._setListOption(name, value);\n\n        break;\n\n      case \"dropDownContentTemplate\":\n        this._renderContent();\n\n        break;\n\n      case \"selectedItemKey\":\n        this._selectedItemKeyChanged(value);\n\n        break;\n\n      case \"selectedItem\":\n        break;\n\n      case \"onItemClick\":\n        this._createItemClickAction();\n\n        break;\n\n      case \"onButtonClick\":\n        this._createActionClickAction();\n\n        break;\n\n      case \"onSelectionChanged\":\n        this._createSelectionChangedAction();\n\n        break;\n\n      case \"deferRendering\":\n        this.toggle(this.option(\"opened\"));\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n}).include(_data_helper.default);\n\n(0, _component_registrator.default)(\"dxDropDownButton\", DropDownButton);\nvar _default = DropDownButton;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/drop_down_button.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_ui","_function_template","_component_registrator","_button_group","_popup","_list","_data","_element","_icon","_data_helper","_data_source","_array_store","_deferred","_extend","_type","_common","_guid","_utils","_message","obj","__esModule","DROP_DOWN_BUTTON_CLASS","DROP_DOWN_BUTTON_CONTENT","DROP_DOWN_BUTTON_ACTION_CLASS","DROP_DOWN_BUTTON_TOGGLE_CLASS","DROP_DOWN_BUTTON_HAS_ARROW_CLASS","DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS","DX_BUTTON_TEXT_CLASS","DX_ICON_RIGHT_CLASS","DropDownButton","inherit","_getDefaultOptions","extend","callBase","itemTemplate","keyExpr","displayExpr","selectedItem","selectedItemKey","stylingMode","deferRendering","noDataText","format","useSelectMode","splitButton","showArrowIcon","text","icon","onButtonClick","onSelectionChanged","onItemClick","opened","items","dataSource","focusStateEnabled","hoverStateEnabled","dropDownOptions","dropDownContentTemplate","wrapItemText","grouped","groupTemplate","buttonGroupOptions","_setOptionsByReference","_optionsByReference","_init","_createItemClickAction","_createActionClickAction","_createSelectionChangedAction","_initDataSource","_compileKeyGetter","_compileDisplayGetter","_itemsToDataSource","option","_options","cache","_initTemplates","_this","_templateManager","addDefaultTemplates","content","FunctionTemplate","options","$popupContent","container","$listContainer","appendTo","_createComponent","_listOptions","registerKeyHandler","_escHandler","bind","value","_dataSource","DataSource","store","key","_getKey","data","pageSize","_this$_dataSource","storeKey","isDefined","_keyGetter","compileGetter","_displayGetter","_initMarkup","$element","addClass","_renderButtonGroup","_updateArrowClass","_loadSelectedItem","done","_updateActionButton","_render","_renderPopup","_renderContentImpl","_renderPopupContent","d","Deferred","_lastSelectedItemData","cachedResult","resolve","_loadSingle","fail","promise","_actionClickAction","_createActionByOption","_selectionChangedAction","_itemClickAction","_fireSelectionChangedAction","_ref","previousValue","item","previousItem","_fireItemClickAction","_ref2","event","itemElement","itemData","_actionItem","_actionButtonConfig","elementAttr","_getButtonGroupItems","push","_buttonGroupItemClick","_ref3","isActionButton","class","isToggleButton","toggle","_buttonGroupOptions","_this2","width","height","selectionMode","buttonTemplate","_ref4","buttonContent","$firstIcon","getImageContainer","$textContainer","$secondIcon","append","$content","template","_getTemplateByOption","empty","_popupContentId","setAria","render","getPublicElement","model","_popupOptions","_this3","horizontalAlignment","dragEnabled","closeOnOutsideClick","e","$buttonClicked","target","closest","concat","is","showTitle","animation","show","type","duration","from","to","hide","getElementWidth","shading","position","of","collision","my","at","visible","_this4","showItemDataTitle","onContentReady","_fireContentReadyAction","selectedItemKeys","actionResult","_buttonGroup","focus","_upDownKeyHandler","open","close","$popup","_wrapper","on","_popupHidingHandler","_popupShowingHandler","_bindInnerWidgetOptions","expanded","owns","_popupOptionChanged","args","getOptionsFromContainer","_setPopupOption","optionsKeys","Object","keys","indexOf","_dimensionChanged","_this5","popupWidth","getSizeValue","optionName","_setWidgetOption","arguments","$buttonGroup","hasArrow","toggleClass","_renderContent","_setListOption","name","_getDisplayValue","isPrimitiveItem","isPlainObject","displayValue","String","ensureDefined","_setOptionWithoutOptionChange","_clean","remove","_selectedItemKeyChanged","_this6","_actionButtonOptionChanged","_ref5","newConfig","repaint","_selectModeChanged","_updateItemCollection","_this7","error","always","_updateDataSource","length","_updateKeyExpr","_optionChanged","_this$_popup","_innerWidgetOptionChanged","fullName","Array","isArray","include","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/drop_down_button.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _ui = _interopRequireDefault(require(\"./widget/ui.widget\"));\r\nvar _function_template = require(\"../core/templates/function_template\");\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _button_group = _interopRequireDefault(require(\"./button_group\"));\r\nvar _popup = _interopRequireDefault(require(\"./popup\"));\r\nvar _list = _interopRequireDefault(require(\"./list\"));\r\nvar _data = require(\"../core/utils/data\");\r\nvar _element = require(\"../core/element\");\r\nvar _icon = require(\"../core/utils/icon\");\r\nvar _data_helper = _interopRequireDefault(require(\"../data_helper\"));\r\nvar _data_source = require(\"../data/data_source/data_source\");\r\nvar _array_store = _interopRequireDefault(require(\"../data/array_store\"));\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _common = require(\"../core/utils/common\");\r\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\r\nvar _utils = require(\"./drop_down_editor/utils\");\r\nvar _message = _interopRequireDefault(require(\"../localization/message\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DROP_DOWN_BUTTON_CLASS = \"dx-dropdownbutton\";\r\nvar DROP_DOWN_BUTTON_CONTENT = \"dx-dropdownbutton-content\";\r\nvar DROP_DOWN_BUTTON_ACTION_CLASS = \"dx-dropdownbutton-action\";\r\nvar DROP_DOWN_BUTTON_TOGGLE_CLASS = \"dx-dropdownbutton-toggle\";\r\nvar DROP_DOWN_BUTTON_HAS_ARROW_CLASS = \"dx-dropdownbutton-has-arrow\";\r\nvar DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS = \"dx-dropdownbutton-popup-wrapper\";\r\nvar DX_BUTTON_TEXT_CLASS = \"dx-button-text\";\r\nvar DX_ICON_RIGHT_CLASS = \"dx-icon-right\";\r\nvar DropDownButton = _ui.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            itemTemplate: \"item\",\r\n            keyExpr: \"this\",\r\n            displayExpr: \"this\",\r\n            selectedItem: null,\r\n            selectedItemKey: null,\r\n            stylingMode: \"outlined\",\r\n            deferRendering: true,\r\n            noDataText: _message.default.format(\"dxCollectionWidget-noDataText\"),\r\n            useSelectMode: false,\r\n            splitButton: false,\r\n            showArrowIcon: true,\r\n            text: \"\",\r\n            icon: void 0,\r\n            onButtonClick: null,\r\n            onSelectionChanged: null,\r\n            onItemClick: null,\r\n            opened: false,\r\n            items: null,\r\n            dataSource: null,\r\n            focusStateEnabled: true,\r\n            hoverStateEnabled: true,\r\n            dropDownOptions: {},\r\n            dropDownContentTemplate: \"content\",\r\n            wrapItemText: false,\r\n            grouped: false,\r\n            groupTemplate: \"group\",\r\n            buttonGroupOptions: {}\r\n        })\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            selectedItem: true\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._createItemClickAction();\r\n        this._createActionClickAction();\r\n        this._createSelectionChangedAction();\r\n        this._initDataSource();\r\n        this._compileKeyGetter();\r\n        this._compileDisplayGetter();\r\n        this._itemsToDataSource(this.option(\"items\"));\r\n        this._options.cache(\"buttonGroupOptions\", this.option(\"buttonGroupOptions\"));\r\n        this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"))\r\n    },\r\n    _initTemplates: function() {\r\n        var _this = this;\r\n        this._templateManager.addDefaultTemplates({\r\n            content: new _function_template.FunctionTemplate(function(options) {\r\n                var $popupContent = (0, _renderer.default)(options.container);\r\n                var $listContainer = (0, _renderer.default)(\"<div>\").appendTo($popupContent);\r\n                _this._list = _this._createComponent($listContainer, _list.default, _this._listOptions());\r\n                _this._list.registerKeyHandler(\"escape\", _this._escHandler.bind(_this));\r\n                _this._list.registerKeyHandler(\"tab\", _this._escHandler.bind(_this));\r\n                _this._list.registerKeyHandler(\"leftArrow\", _this._escHandler.bind(_this));\r\n                _this._list.registerKeyHandler(\"rightArrow\", _this._escHandler.bind(_this))\r\n            })\r\n        });\r\n        this.callBase()\r\n    },\r\n    _itemsToDataSource: function(value) {\r\n        if (!this._dataSource) {\r\n            this._dataSource = new _data_source.DataSource({\r\n                store: new _array_store.default({\r\n                    key: this._getKey(),\r\n                    data: value\r\n                }),\r\n                pageSize: 0\r\n            })\r\n        }\r\n    },\r\n    _getKey: function() {\r\n        var _this$_dataSource;\r\n        var keyExpr = this.option(\"keyExpr\");\r\n        var storeKey = null === (_this$_dataSource = this._dataSource) || void 0 === _this$_dataSource ? void 0 : _this$_dataSource.key();\r\n        return (0, _type.isDefined)(storeKey) && (!(0, _type.isDefined)(keyExpr) || \"this\" === keyExpr) ? storeKey : keyExpr\r\n    },\r\n    _compileKeyGetter: function() {\r\n        this._keyGetter = (0, _data.compileGetter)(this._getKey())\r\n    },\r\n    _compileDisplayGetter: function() {\r\n        this._displayGetter = (0, _data.compileGetter)(this.option(\"displayExpr\"))\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.$element().addClass(DROP_DOWN_BUTTON_CLASS);\r\n        this._renderButtonGroup();\r\n        this._updateArrowClass();\r\n        if ((0, _type.isDefined)(this.option(\"selectedItemKey\"))) {\r\n            this._loadSelectedItem().done(this._updateActionButton.bind(this))\r\n        }\r\n    },\r\n    _render: function() {\r\n        if (!this.option(\"deferRendering\") || this.option(\"opened\")) {\r\n            this._renderPopup()\r\n        }\r\n        this.callBase()\r\n    },\r\n    _renderContentImpl: function() {\r\n        if (this._popup) {\r\n            this._renderPopupContent()\r\n        }\r\n        return this.callBase()\r\n    },\r\n    _loadSelectedItem: function() {\r\n        var d = new _deferred.Deferred;\r\n        if (this._list && void 0 !== this._lastSelectedItemData) {\r\n            var cachedResult = this.option(\"useSelectMode\") ? this._list.option(\"selectedItem\") : this._lastSelectedItemData;\r\n            return d.resolve(cachedResult)\r\n        }\r\n        this._lastSelectedItemData = void 0;\r\n        var selectedItemKey = this.option(\"selectedItemKey\");\r\n        this._loadSingle(this._getKey(), selectedItemKey).done(d.resolve).fail(function() {\r\n            d.resolve(null)\r\n        });\r\n        return d.promise()\r\n    },\r\n    _createActionClickAction: function() {\r\n        this._actionClickAction = this._createActionByOption(\"onButtonClick\")\r\n    },\r\n    _createSelectionChangedAction: function() {\r\n        this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\")\r\n    },\r\n    _createItemClickAction: function() {\r\n        this._itemClickAction = this._createActionByOption(\"onItemClick\")\r\n    },\r\n    _fireSelectionChangedAction: function(_ref) {\r\n        var previousValue = _ref.previousValue,\r\n            value = _ref.value;\r\n        this._selectionChangedAction({\r\n            item: value,\r\n            previousItem: previousValue\r\n        })\r\n    },\r\n    _fireItemClickAction: function(_ref2) {\r\n        var event = _ref2.event,\r\n            itemElement = _ref2.itemElement,\r\n            itemData = _ref2.itemData;\r\n        return this._itemClickAction({\r\n            event: event,\r\n            itemElement: itemElement,\r\n            itemData: this._actionItem || itemData\r\n        })\r\n    },\r\n    _actionButtonConfig: function() {\r\n        return {\r\n            text: this.option(\"text\"),\r\n            icon: this.option(\"icon\"),\r\n            elementAttr: {\r\n                \"class\": DROP_DOWN_BUTTON_ACTION_CLASS\r\n            }\r\n        }\r\n    },\r\n    _getButtonGroupItems: function() {\r\n        var items = [];\r\n        items.push(this._actionButtonConfig());\r\n        if (this.option(\"splitButton\")) {\r\n            items.push({\r\n                icon: \"spindown\",\r\n                elementAttr: {\r\n                    \"class\": DROP_DOWN_BUTTON_TOGGLE_CLASS\r\n                }\r\n            })\r\n        }\r\n        return items\r\n    },\r\n    _buttonGroupItemClick: function(_ref3) {\r\n        var event = _ref3.event,\r\n            itemData = _ref3.itemData;\r\n        var isActionButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_ACTION_CLASS;\r\n        var isToggleButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_TOGGLE_CLASS;\r\n        if (isToggleButton) {\r\n            this.toggle()\r\n        } else {\r\n            if (isActionButton) {\r\n                this._actionClickAction({\r\n                    event: event,\r\n                    selectedItem: this.option(\"selectedItem\")\r\n                });\r\n                if (!this.option(\"splitButton\")) {\r\n                    this.toggle()\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _buttonGroupOptions: function() {\r\n        var _this2 = this;\r\n        return (0, _extend.extend)({\r\n            items: this._getButtonGroupItems(),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            onItemClick: this._buttonGroupItemClick.bind(this),\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            stylingMode: this.option(\"stylingMode\"),\r\n            selectionMode: \"none\",\r\n            buttonTemplate: function(_ref4, buttonContent) {\r\n                var text = _ref4.text,\r\n                    icon = _ref4.icon;\r\n                if (_this2.option(\"splitButton\") || !_this2.option(\"showArrowIcon\")) {\r\n                    return \"content\"\r\n                }\r\n                var $firstIcon = (0, _icon.getImageContainer)(icon);\r\n                var $textContainer = text ? (0, _renderer.default)(\"<span>\").text(text).addClass(DX_BUTTON_TEXT_CLASS) : void 0;\r\n                var $secondIcon = (0, _icon.getImageContainer)(\"spindown\").addClass(DX_ICON_RIGHT_CLASS);\r\n                (0, _renderer.default)(buttonContent).append($firstIcon, $textContainer, $secondIcon)\r\n            }\r\n        }, this._options.cache(\"buttonGroupOptions\"))\r\n    },\r\n    _renderPopupContent: function() {\r\n        var $content = this._popup.$content();\r\n        var template = this._getTemplateByOption(\"dropDownContentTemplate\");\r\n        $content.empty();\r\n        this._popupContentId = \"dx-\" + new _guid.default;\r\n        this.setAria(\"id\", this._popupContentId, $content);\r\n        return template.render({\r\n            container: (0, _element.getPublicElement)($content),\r\n            model: this.option(\"items\") || this._dataSource\r\n        })\r\n    },\r\n    _popupOptions: function() {\r\n        var _this3 = this;\r\n        var horizontalAlignment = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\r\n        return (0, _extend.extend)({\r\n            dragEnabled: false,\r\n            focusStateEnabled: false,\r\n            deferRendering: this.option(\"deferRendering\"),\r\n            closeOnOutsideClick: function(e) {\r\n                var $element = _this3.$element();\r\n                var $buttonClicked = (0, _renderer.default)(e.target).closest(\".\".concat(DROP_DOWN_BUTTON_CLASS));\r\n                return !$buttonClicked.is($element)\r\n            },\r\n            showTitle: false,\r\n            animation: {\r\n                show: {\r\n                    type: \"fade\",\r\n                    duration: 0,\r\n                    from: 0,\r\n                    to: 1\r\n                },\r\n                hide: {\r\n                    type: \"fade\",\r\n                    duration: 400,\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            width: function() {\r\n                return (0, _utils.getElementWidth)(_this3.$element())\r\n            },\r\n            height: \"auto\",\r\n            shading: false,\r\n            position: {\r\n                of: this.$element(),\r\n                collision: \"flipfit\",\r\n                my: \"top \" + horizontalAlignment,\r\n                at: \"bottom \" + horizontalAlignment\r\n            }\r\n        }, this._options.cache(\"dropDownOptions\"), {\r\n            visible: this.option(\"opened\")\r\n        })\r\n    },\r\n    _listOptions: function() {\r\n        var _this4 = this;\r\n        var selectedItemKey = this.option(\"selectedItemKey\");\r\n        var useSelectMode = this.option(\"useSelectMode\");\r\n        return {\r\n            selectionMode: useSelectMode ? \"single\" : \"none\",\r\n            wrapItemText: this.option(\"wrapItemText\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            showItemDataTitle: true,\r\n            onContentReady: function() {\r\n                return _this4._fireContentReadyAction()\r\n            },\r\n            selectedItemKeys: selectedItemKey && useSelectMode ? [selectedItemKey] : [],\r\n            grouped: this.option(\"grouped\"),\r\n            groupTemplate: this.option(\"groupTemplate\"),\r\n            keyExpr: this._getKey(),\r\n            noDataText: this.option(\"noDataText\"),\r\n            displayExpr: this.option(\"displayExpr\"),\r\n            itemTemplate: this.option(\"itemTemplate\"),\r\n            items: this.option(\"items\"),\r\n            dataSource: this._dataSource,\r\n            onItemClick: function(e) {\r\n                if (!_this4.option(\"useSelectMode\")) {\r\n                    _this4._lastSelectedItemData = e.itemData\r\n                }\r\n                _this4.option(\"selectedItemKey\", _this4._keyGetter(e.itemData));\r\n                var actionResult = _this4._fireItemClickAction(e);\r\n                if (false !== actionResult) {\r\n                    _this4.toggle(false);\r\n                    _this4._buttonGroup.focus()\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _upDownKeyHandler: function() {\r\n        if (this._popup && this._popup.option(\"visible\") && this._list) {\r\n            this._list.focus()\r\n        } else {\r\n            this.open()\r\n        }\r\n    },\r\n    _escHandler: function() {\r\n        this.close();\r\n        this._buttonGroup.focus()\r\n    },\r\n    _renderPopup: function() {\r\n        var $popup = (0, _renderer.default)(\"<div>\");\r\n        this.$element().append($popup);\r\n        this._popup = this._createComponent($popup, _popup.default, this._popupOptions());\r\n        this._popup.$content().addClass(DROP_DOWN_BUTTON_CONTENT);\r\n        this._popup._wrapper().addClass(DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS);\r\n        this._popup.on(\"hiding\", this._popupHidingHandler.bind(this));\r\n        this._popup.on(\"showing\", this._popupShowingHandler.bind(this));\r\n        this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\")\r\n    },\r\n    _popupHidingHandler: function() {\r\n        this.option(\"opened\", false);\r\n        this.setAria({\r\n            expanded: false,\r\n            owns: void 0\r\n        })\r\n    },\r\n    _popupOptionChanged: function(args) {\r\n        var options = _ui.default.getOptionsFromContainer(args);\r\n        this._setPopupOption(options);\r\n        var optionsKeys = Object.keys(options);\r\n        if (optionsKeys.indexOf(\"width\") !== -1 || optionsKeys.indexOf(\"height\") !== -1) {\r\n            this._dimensionChanged()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        var _this5 = this;\r\n        var popupWidth = (0, _utils.getSizeValue)(this.option(\"dropDownOptions.width\"));\r\n        if (void 0 === popupWidth) {\r\n            this._setPopupOption(\"width\", function() {\r\n                return (0, _utils.getElementWidth)(_this5.$element())\r\n            })\r\n        }\r\n    },\r\n    _setPopupOption: function(optionName, value) {\r\n        this._setWidgetOption(\"_popup\", arguments)\r\n    },\r\n    _popupShowingHandler: function() {\r\n        this.option(\"opened\", true);\r\n        this.setAria({\r\n            expanded: true,\r\n            owns: this._popupContentId\r\n        })\r\n    },\r\n    _renderButtonGroup: function() {\r\n        var $buttonGroup = this._buttonGroup && this._buttonGroup.$element() || (0, _renderer.default)(\"<div>\");\r\n        if (!this._buttonGroup) {\r\n            this.$element().append($buttonGroup)\r\n        }\r\n        this._buttonGroup = this._createComponent($buttonGroup, _button_group.default, this._buttonGroupOptions());\r\n        this._buttonGroup.registerKeyHandler(\"downArrow\", this._upDownKeyHandler.bind(this));\r\n        this._buttonGroup.registerKeyHandler(\"tab\", this.close.bind(this));\r\n        this._buttonGroup.registerKeyHandler(\"upArrow\", this._upDownKeyHandler.bind(this));\r\n        this._buttonGroup.registerKeyHandler(\"escape\", this._escHandler.bind(this));\r\n        this._bindInnerWidgetOptions(this._buttonGroup, \"buttonGroupOptions\")\r\n    },\r\n    _updateArrowClass: function() {\r\n        var hasArrow = this.option(\"splitButton\") || this.option(\"showArrowIcon\");\r\n        this.$element().toggleClass(DROP_DOWN_BUTTON_HAS_ARROW_CLASS, hasArrow)\r\n    },\r\n    toggle: function(visible) {\r\n        if (!this._popup) {\r\n            this._renderPopup();\r\n            this._renderContent()\r\n        }\r\n        return this._popup.toggle(visible)\r\n    },\r\n    open: function() {\r\n        return this.toggle(true)\r\n    },\r\n    close: function() {\r\n        return this.toggle(false)\r\n    },\r\n    _setListOption: function(name, value) {\r\n        this._list && this._list.option(name, value)\r\n    },\r\n    _getDisplayValue: function(item) {\r\n        var isPrimitiveItem = !(0, _type.isPlainObject)(item);\r\n        var displayValue = isPrimitiveItem ? item : this._displayGetter(item);\r\n        return !(0, _type.isPlainObject)(displayValue) ? String((0, _common.ensureDefined)(displayValue, \"\")) : \"\"\r\n    },\r\n    _updateActionButton: function(selectedItem) {\r\n        if (this.option(\"useSelectMode\")) {\r\n            this.option({\r\n                text: this._getDisplayValue(selectedItem),\r\n                icon: (0, _type.isPlainObject)(selectedItem) ? selectedItem.icon : void 0\r\n            })\r\n        }\r\n        this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem);\r\n        this._setOptionWithoutOptionChange(\"selectedItemKey\", this._keyGetter(selectedItem))\r\n    },\r\n    _clean: function() {\r\n        this._list && this._list.$element().remove();\r\n        this._popup && this._popup.$element().remove()\r\n    },\r\n    _selectedItemKeyChanged: function(value) {\r\n        var _this6 = this;\r\n        this._setListOption(\"selectedItemKeys\", this.option(\"useSelectMode\") && (0, _type.isDefined)(value) ? [value] : []);\r\n        var previousItem = this.option(\"selectedItem\");\r\n        this._loadSelectedItem().done(function(selectedItem) {\r\n            _this6._updateActionButton(selectedItem);\r\n            if (_this6._displayGetter(previousItem) !== _this6._displayGetter(selectedItem)) {\r\n                _this6._fireSelectionChangedAction({\r\n                    previousValue: previousItem,\r\n                    value: selectedItem\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _actionButtonOptionChanged: function(_ref5) {\r\n        var name = _ref5.name,\r\n            value = _ref5.value;\r\n        var newConfig = {};\r\n        newConfig[name] = value;\r\n        this._buttonGroup.option(\"items[0]\", (0, _extend.extend)({}, this._actionButtonConfig(), newConfig));\r\n        this._popup && this._popup.repaint()\r\n    },\r\n    _selectModeChanged: function(value) {\r\n        if (value) {\r\n            this._setListOption(\"selectionMode\", \"single\");\r\n            var selectedItemKey = this.option(\"selectedItemKey\");\r\n            this._setListOption(\"selectedItemKeys\", selectedItemKey ? [selectedItemKey] : [])\r\n        } else {\r\n            this._setListOption(\"selectionMode\", \"none\");\r\n            this.option({\r\n                selectedItemKey: void 0,\r\n                selectedItem: void 0\r\n            })\r\n        }\r\n    },\r\n    _updateItemCollection: function(optionName) {\r\n        var _this7 = this;\r\n        var selectedItemKey = this.option(\"selectedItemKey\");\r\n        this._setListOption(\"selectedItem\", null);\r\n        this._setWidgetOption(\"_list\", [optionName]);\r\n        if ((0, _type.isDefined)(selectedItemKey)) {\r\n            this._loadSelectedItem().done(function(selectedItem) {\r\n                _this7._setListOption(\"selectedItemKeys\", [selectedItemKey]);\r\n                _this7._setListOption(\"selectedItem\", selectedItem)\r\n            }).fail(function(error) {\r\n                _this7._setListOption(\"selectedItemKeys\", [])\r\n            }).always(this._updateActionButton.bind(this))\r\n        }\r\n    },\r\n    _updateDataSource: function() {\r\n        var items = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._dataSource.items();\r\n        this._dataSource = void 0;\r\n        this._itemsToDataSource(items);\r\n        this._updateKeyExpr()\r\n    },\r\n    _updateKeyExpr: function() {\r\n        this._compileKeyGetter();\r\n        this._setListOption(\"keyExpr\", this._getKey())\r\n    },\r\n    _optionChanged: function(args) {\r\n        var _this$_popup;\r\n        var name = args.name,\r\n            value = args.value;\r\n        switch (name) {\r\n            case \"useSelectMode\":\r\n                this._selectModeChanged(value);\r\n                break;\r\n            case \"splitButton\":\r\n                this._updateArrowClass();\r\n                this._renderButtonGroup();\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._setListOption(name, value);\r\n                this._updateActionButton(this.option(\"selectedItem\"));\r\n                break;\r\n            case \"keyExpr\":\r\n                this._updateDataSource();\r\n                break;\r\n            case \"buttonGroupOptions\":\r\n                this._innerWidgetOptionChanged(this._buttonGroup, args);\r\n                break;\r\n            case \"dropDownOptions\":\r\n                if (\"dropDownOptions.visible\" === args.fullName) {\r\n                    break\r\n                }\r\n                if (void 0 !== args.value.visible) {\r\n                    delete args.value.visible\r\n                }\r\n                this._popupOptionChanged(args);\r\n                this._innerWidgetOptionChanged(this._popup, args);\r\n                break;\r\n            case \"opened\":\r\n                this.toggle(value);\r\n                break;\r\n            case \"focusStateEnabled\":\r\n            case \"hoverStateEnabled\":\r\n                this._setListOption(name, value);\r\n                this._buttonGroup.option(name, value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"items\":\r\n                this._updateDataSource(this.option(\"items\"));\r\n                this._updateItemCollection(name);\r\n                break;\r\n            case \"dataSource\":\r\n                if (Array.isArray(value)) {\r\n                    this._updateDataSource(this.option(\"dataSource\"))\r\n                } else {\r\n                    this._initDataSource();\r\n                    this._updateKeyExpr()\r\n                }\r\n                this._updateItemCollection(name);\r\n                break;\r\n            case \"icon\":\r\n            case \"text\":\r\n                this._actionButtonOptionChanged(args);\r\n                break;\r\n            case \"showArrowIcon\":\r\n                this._updateArrowClass();\r\n                this._buttonGroup.repaint();\r\n                this._popup && this._popup.repaint();\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.repaint();\r\n                break;\r\n            case \"stylingMode\":\r\n                this._buttonGroup.option(name, value);\r\n                break;\r\n            case \"itemTemplate\":\r\n            case \"grouped\":\r\n            case \"noDataText\":\r\n            case \"groupTemplate\":\r\n            case \"wrapItemText\":\r\n                this._setListOption(name, value);\r\n                break;\r\n            case \"dropDownContentTemplate\":\r\n                this._renderContent();\r\n                break;\r\n            case \"selectedItemKey\":\r\n                this._selectedItemKeyChanged(value);\r\n                break;\r\n            case \"selectedItem\":\r\n                break;\r\n            case \"onItemClick\":\r\n                this._createItemClickAction();\r\n                break;\r\n            case \"onButtonClick\":\r\n                this._createActionClickAction();\r\n                break;\r\n            case \"onSelectionChanged\":\r\n                this._createSelectionChangedAction();\r\n                break;\r\n            case \"deferRendering\":\r\n                this.toggle(this.option(\"opened\"));\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n}).include(_data_helper.default);\r\n(0, _component_registrator.default)(\"dxDropDownButton\", DropDownButton);\r\nvar _default = DropDownButton;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}