{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\mobileAppointment\\\\MobileCreateAppointment\\\\modal\\\\TreatmentPackage.js\";\nimport React from \"react\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport { updateForm, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { NormalModal } from \"component/common\";\nimport closeIcon from \"assets/images/close.png\";\nimport _ from \"lodash\";\nimport { Toast } from \"service/toast\";\nimport { withTranslation } from \"react-i18next\";\nexport class ListTreatmentPackageClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [{\n        label: \"Course\"\n      }, {\n        label: \"Tr. #\"\n      }, {\n        label: \"Total\"\n      }, {\n        label: \"Price\"\n      }, {\n        label: \"Expiry Date\"\n      }, {\n        label: \"Balance\"\n      }, {\n        label: \"Outstanding\"\n      }],\n      treatmentPackageList: [],\n      meta: {},\n      active: false,\n      currentIndex: -1,\n      isTreatementModal: false,\n      formFields: {},\n      cust_data: {}\n    };\n\n    this.componentDidMount = () => {\n      this.getPackageList({});\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.setState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n\n    this.getPackageList = data => {\n      let {\n        page = 1,\n        limit = 10,\n        search = \"\"\n      } = data;\n      this.props.getCommonApi(`treatmentpackages/?cust_id=${this.props.customerNumber}&page=${page}&limit=${limit}`).then(res => {\n        console.log(res, \"treatmentpackagelistresponse\");\n        let {\n          status,\n          data,\n          cust_name,\n          cust_refer\n        } = res;\n\n        if (status === 200) {\n          if (data) {\n            let cust = {};\n            cust[\"cust_name\"] = cust_name;\n            cust[\"cust_refer\"] = cust_refer;\n            this.setState({\n              treatmentPackageList: res.data.dataList,\n              meta: res.data.meta.pagination,\n              cust_data: cust\n            });\n          }\n        }\n      });\n    };\n\n    this.handlePagination = page => {\n      console.log(page, \"dsfsdfsdfsdf\");\n      this.getPackageList(page);\n    };\n\n    this.handleDialog = () => {\n      let {\n        isTreatementModal\n      } = this.state;\n      isTreatementModal = !isTreatementModal;\n      this.setState({\n        isTreatementModal\n      });\n    };\n\n    this.handleSelectTreatmentPackage = item => {\n      if (String(item.type).toUpperCase() == \"TD\") {\n        let {\n          formFields\n        } = this.state;\n        formFields[\"id\"] = item.stock_id;\n        formFields[\"item_desc\"] = item.item_name;\n        formFields[\"add_duration\"] = item.add_duration;\n        formFields[\"Item_CodeName\"] = item.item_name;\n        formFields[\"treatment_parentcode\"] = item.treatment_parentcode;\n        this.setState({\n          formFields\n        });\n        console.log(formFields);\n        this.props.handleSelectPackage(formFields);\n        this.props.handleTreatementmodal();\n      } else {\n        Toast({\n          type: \"error\",\n          message: \"This Package is not allowed\"\n        });\n      }\n    };\n  }\n\n  render() {\n    let {\n      headerDetails,\n      treatmentPackageList,\n      meta,\n      currentIndex,\n      active,\n      isTreatementModal,\n      formFields,\n      cust_data\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NormalModal, {\n      className: \"multiple-appointment select-category\",\n      modal: this.props.isTreatementModal,\n      style: {\n        minWidth: \"80%\",\n        minHeight: \"90%\"\n      },\n      handleModal: () => {},\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: this.props.handleTreatementmodal,\n      className: \"close\",\n      src: closeIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customer-list container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 p-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"fw-500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }\n    }, t(\"Treatment\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-wrap mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, t(\"Name\"), \" :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fw-500 h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 23\n      }\n    }, cust_data.cust_name))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, t(\"Reference\"), \" :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fw-500 h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 23\n      }\n    }, cust_data.cust_refer))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, t(\"Phone\"), \" :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fw-500 h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 23\n      }\n    }, this.props.custPhone))), this.props.CustomerRemarkFlag ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    }, t(\"Permanent Remark\"), \" :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fw-500 h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }, this.props.CustomerRemark))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: meta,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }, treatmentPackageList && treatmentPackageList.length > 0 ? treatmentPackageList.map((item, index) => {\n      let {\n        item_name,\n        tr_open,\n        tr_done,\n        stock_id,\n        price,\n        expiry,\n        add_duration,\n        treatment_parentcode,\n        balance,\n        outstanding\n      } = item;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        onClick: () => this.handleSelectTreatmentPackage(item, index),\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 31\n        }\n      }, item_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 31\n        }\n      }, tr_open)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 31\n        }\n      }, tr_done)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 31\n        }\n      }, price)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 31\n        }\n      }, expiry)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 31\n        }\n      }, balance)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 31\n        }\n      }, outstanding)));\n    }) : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 27\n      }\n    }, t(\"No data available\")))))))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({// filter: state.dashboard\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    updateForm,\n    getCommonApi\n  }, dispatch);\n};\n\nexport const TreatmentPackage = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(ListTreatmentPackageClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/mobileAppointment/MobileCreateAppointment/modal/TreatmentPackage.js"],"names":["React","InputSearch","TableWrapper","updateForm","getCommonApi","connect","bindActionCreators","NormalModal","closeIcon","_","Toast","withTranslation","ListTreatmentPackageClass","Component","state","headerDetails","label","treatmentPackageList","meta","active","currentIndex","isTreatementModal","formFields","cust_data","componentDidMount","getPackageList","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","setState","prevState","e","node","contains","target","data","page","limit","search","props","customerNumber","then","res","console","log","status","cust_name","cust_refer","cust","dataList","pagination","handlePagination","handleDialog","handleSelectTreatmentPackage","item","String","type","toUpperCase","stock_id","item_name","add_duration","treatment_parentcode","handleSelectPackage","handleTreatementmodal","message","render","t","minWidth","minHeight","custPhone","CustomerRemarkFlag","CustomerRemark","length","map","index","tr_open","tr_done","price","expiry","balance","outstanding","mapStateToProps","mapDispatchToProps","dispatch","TreatmentPackage"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,YAAtB,QAA0C,kBAA1C;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,sBAAzC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,SAASC,eAAT,QAAgC,eAAhC;AAEA,OAAO,MAAMC,yBAAN,SAAwCZ,KAAK,CAACa,SAA9C,CAAwD;AAAA;AAAA;AAAA,SAC7DC,KAD6D,GACrD;AACNC,MAAAA,aAAa,EAAE,CACb;AAAEC,QAAAA,KAAK,EAAE;AAAT,OADa,EAEb;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAFa,EAGb;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAHa,EAIb;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAJa,EAKb;AAAEA,QAAAA,KAAK,EAAE;AAAT,OALa,EAMb;AAAEA,QAAAA,KAAK,EAAE;AAAT,OANa,EAOb;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAPa,CADT;AAUNC,MAAAA,oBAAoB,EAAE,EAVhB;AAWNC,MAAAA,IAAI,EAAE,EAXA;AAYNC,MAAAA,MAAM,EAAE,KAZF;AAaNC,MAAAA,YAAY,EAAE,CAAC,CAbT;AAcNC,MAAAA,iBAAiB,EAAE,KAdb;AAeNC,MAAAA,UAAU,EAAE,EAfN;AAgBNC,MAAAA,SAAS,EAAE;AAhBL,KADqD;;AAAA,SAoB7DC,iBApB6D,GAoBzC,MAAM;AACxB,WAAKC,cAAL,CAAoB,EAApB;AACD,KAtB4D;;AAAA,SAwB7DC,WAxB6D,GAwB/CC,GAAG,IAAI;AACnB,UAAI,CAAC,KAAKb,KAAL,CAAWK,MAAhB,EAAwB;AACtBS,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,KAAKC,kBAAxC,EAA4D,KAA5D;AACD,OAFD,MAEO;AACLF,QAAAA,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,EAAsC,KAAKD,kBAA3C,EAA+D,KAA/D;AACD;;AAED,WAAKE,QAAL,CAAcC,SAAS,KAAK;AAC1Bd,QAAAA,MAAM,EAAE,CAACc,SAAS,CAACd,MADO;AAE1BC,QAAAA,YAAY,EAAEO;AAFY,OAAL,CAAvB;AAID,KAnC4D;;AAAA,SAqC7DG,kBArC6D,GAqCxCI,CAAC,IAAI;AACxB,UAAI,KAAKC,IAAL,IAAa,IAAjB,EAAuB;AACrB,YAAI,KAAKA,IAAL,CAAUC,QAAV,CAAmBF,CAAC,CAACG,MAArB,CAAJ,EAAkC;AAChC;AACD;AACF;;AACD,WAAKX,WAAL;AACD,KA5C4D;;AAAA,SA8C7DD,cA9C6D,GA8C5Ca,IAAI,IAAI;AACvB,UAAI;AAAEC,QAAAA,IAAI,GAAG,CAAT;AAAYC,QAAAA,KAAK,GAAG,EAApB;AAAwBC,QAAAA,MAAM,GAAG;AAAjC,UAAwCH,IAA5C;AACA,WAAKI,KAAL,CACGtC,YADH,CAEK,8BAA6B,KAAKsC,KAAL,CAAWC,cAAe,SAAQJ,IAAK,UAASC,KAAM,EAFxF,EAIGI,IAJH,CAIQC,GAAG,IAAI;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAAiB,8BAAjB;AACA,YAAI;AAAEG,UAAAA,MAAF;AAAUV,UAAAA,IAAV;AAAgBW,UAAAA,SAAhB;AAA2BC,UAAAA;AAA3B,YAA0CL,GAA9C;;AACA,YAAIG,MAAM,KAAK,GAAf,EAAoB;AAClB,cAAIV,IAAJ,EAAU;AACR,gBAAIa,IAAI,GAAG,EAAX;AACAA,YAAAA,IAAI,CAAC,WAAD,CAAJ,GAAoBF,SAApB;AACAE,YAAAA,IAAI,CAAC,YAAD,CAAJ,GAAqBD,UAArB;AACA,iBAAKlB,QAAL,CAAc;AACZf,cAAAA,oBAAoB,EAAE4B,GAAG,CAACP,IAAJ,CAASc,QADnB;AAEZlC,cAAAA,IAAI,EAAE2B,GAAG,CAACP,IAAJ,CAASpB,IAAT,CAAcmC,UAFR;AAGZ9B,cAAAA,SAAS,EAAE4B;AAHC,aAAd;AAKD;AACF;AACF,OAnBH;AAoBD,KApE4D;;AAAA,SAsE7DG,gBAtE6D,GAsE1Cf,IAAI,IAAI;AACzBO,MAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ,EAAkB,cAAlB;AACA,WAAKd,cAAL,CAAoBc,IAApB;AACD,KAzE4D;;AAAA,SAyF7DgB,YAzF6D,GAyF9C,MAAM;AACnB,UAAI;AAAElC,QAAAA;AAAF,UAAwB,KAAKP,KAAjC;AACAO,MAAAA,iBAAiB,GAAG,CAACA,iBAArB;AACA,WAAKW,QAAL,CAAc;AACZX,QAAAA;AADY,OAAd;AAGD,KA/F4D;;AAAA,SAiG7DmC,4BAjG6D,GAiG9BC,IAAI,IAAI;AACrC,UAAIC,MAAM,CAACD,IAAI,CAACE,IAAN,CAAN,CAAkBC,WAAlB,MAAmC,IAAvC,EAA6C;AAC3C,YAAI;AAAEtC,UAAAA;AAAF,YAAiB,KAAKR,KAA1B;AACAQ,QAAAA,UAAU,CAAC,IAAD,CAAV,GAAmBmC,IAAI,CAACI,QAAxB;AACAvC,QAAAA,UAAU,CAAC,WAAD,CAAV,GAA0BmC,IAAI,CAACK,SAA/B;AACAxC,QAAAA,UAAU,CAAC,cAAD,CAAV,GAA6BmC,IAAI,CAACM,YAAlC;AACAzC,QAAAA,UAAU,CAAC,eAAD,CAAV,GAA8BmC,IAAI,CAACK,SAAnC;AACAxC,QAAAA,UAAU,CAAC,sBAAD,CAAV,GAAqCmC,IAAI,CAACO,oBAA1C;AAEA,aAAKhC,QAAL,CAAc;AACZV,UAAAA;AADY,SAAd;AAGAwB,QAAAA,OAAO,CAACC,GAAR,CAAYzB,UAAZ;AACA,aAAKoB,KAAL,CAAWuB,mBAAX,CAA+B3C,UAA/B;AACA,aAAKoB,KAAL,CAAWwB,qBAAX;AACD,OAdD,MAcO;AACLxD,QAAAA,KAAK,CAAC;AACJiD,UAAAA,IAAI,EAAE,OADF;AAEJQ,UAAAA,OAAO,EAAE;AAFL,SAAD,CAAL;AAID;AACF,KAtH4D;AAAA;;AAwH7DC,EAAAA,MAAM,GAAG;AACP,QAAI;AACFrD,MAAAA,aADE;AAEFE,MAAAA,oBAFE;AAGFC,MAAAA,IAHE;AAIFE,MAAAA,YAJE;AAKFD,MAAAA,MALE;AAMFE,MAAAA,iBANE;AAOFC,MAAAA,UAPE;AAQFC,MAAAA;AARE,QASA,KAAKT,KATT;AAUA,QAAI;AAAEuD,MAAAA;AAAF,QAAQ,KAAK3B,KAAjB;AACA,wBACE,uDACE,oBAAC,WAAD;AACE,MAAA,SAAS,EAAE,sCADb;AAEE,MAAA,KAAK,EAAE,KAAKA,KAAL,CAAWrB,iBAFpB;AAGE,MAAA,KAAK,EAAE;AAAEiD,QAAAA,QAAQ,EAAE,KAAZ;AAAmBC,QAAAA,SAAS,EAAE;AAA9B,OAHT;AAIE,MAAA,WAAW,EAAE,MAAM,CAAE,CAJvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME;AACE,MAAA,OAAO,EAAE,KAAK7B,KAAL,CAAWwB,qBADtB;AAEE,MAAA,SAAS,EAAC,OAFZ;AAGE,MAAA,GAAG,EAAE1D,SAHP;AAIE,MAAA,GAAG,EAAC,EAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,eAYE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwB6D,CAAC,CAAC,WAAD,CAAzB,CADF,CADF,eAIE;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,CAAC,CAAC,MAAD,CADJ,QACgB,GADhB,eAEE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B9C,SAAS,CAAC0B,SAAvC,CAFF,CADF,CADF,eAOE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGoB,CAAC,CAAC,WAAD,CADJ,QACqB,GADrB,eAEE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B9C,SAAS,CAAC2B,UAAvC,CAFF,CADF,CAPF,eAaE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGmB,CAAC,CAAC,OAAD,CADJ,QACiB,GADjB,eAEE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B,KAAK3B,KAAL,CAAW8B,SAAxC,CAFF,CADF,CAbF,EAmBG,KAAK9B,KAAL,CAAW+B,kBAAX,gBACC;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGJ,CAAC,CAAC,kBAAD,CADJ,QAC4B,GAD5B,eAEE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK3B,KAAL,CAAWgC,cADd,CAFF,CADF,CADD,GASG,IA5BN,CAJF,eAkCE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,aAAa,EAAE3D,aADjB;AAEE,MAAA,YAAY,EAAE,KAAKuC,gBAFrB;AAGE,MAAA,QAAQ,EAAEpC,IAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKGD,oBAAoB,IAAIA,oBAAoB,CAAC0D,MAArB,GAA8B,CAAtD,GACC1D,oBAAoB,CAAC2D,GAArB,CAAyB,CAACnB,IAAD,EAAOoB,KAAP,KAAiB;AACxC,UAAI;AACFf,QAAAA,SADE;AAEFgB,QAAAA,OAFE;AAGFC,QAAAA,OAHE;AAIFlB,QAAAA,QAJE;AAKFmB,QAAAA,KALE;AAMFC,QAAAA,MANE;AAOFlB,QAAAA,YAPE;AAQFC,QAAAA,oBARE;AASFkB,QAAAA,OATE;AAUFC,QAAAA;AAVE,UAWA1B,IAXJ;AAYA,0BACE;AACE,QAAA,OAAO,EAAE,MACP,KAAKD,4BAAL,CAAkCC,IAAlC,EAAwCoB,KAAxC,CAFJ;AAIE,QAAA,GAAG,EAAEA,KAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGf,SADH,CADF,CANF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGgB,OADH,CADF,CAXF,eAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGC,OADH,CADF,CAhBF,eAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGC,KADH,CADF,CArBF,eA0BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGC,MADH,CADF,CA1BF,eA+BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGC,OADH,CADF,CA/BF,eAoCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGC,WADH,CADF,CApCF,CADF;AA4CD,KAzDD,CADD,gBA4DC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGd,CAAC,CAAC,mBAAD,CADJ,CADF,CADF,CAjEJ,CADF,CAlCF,CADF,CADF,CAZF,CADF,CADF;AAoID;;AAxQ4D;;AA2Q/D,MAAMe,eAAe,GAAGtE,KAAK,KAAK,CAChC;AADgC,CAAL,CAA7B;;AAIA,MAAMuE,kBAAkB,GAAGC,QAAQ,IAAI;AACrC,SAAOhF,kBAAkB,CACvB;AACEH,IAAAA,UADF;AAEEC,IAAAA;AAFF,GADuB,EAKvBkF,QALuB,CAAzB;AAOD,CARD;;AAUA,OAAO,MAAMC,gBAAgB,GAAG5E,eAAe,GAC7CN,OAAO,CAAC+E,eAAD,EAAkBC,kBAAlB,CAAP,CAA6CzE,yBAA7C,CAD6C,CAAxC","sourcesContent":["import React from \"react\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport { updateForm, getCommonApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { NormalModal } from \"component/common\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport _ from \"lodash\";\r\nimport { Toast } from \"service/toast\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class ListTreatmentPackageClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Course\" },\r\n      { label: \"Tr. #\" },\r\n      { label: \"Total\" },\r\n      { label: \"Price\" },\r\n      { label: \"Expiry Date\" },\r\n      { label: \"Balance\" },\r\n      { label: \"Outstanding\" },\r\n    ],\r\n    treatmentPackageList: [],\r\n    meta: {},\r\n    active: false,\r\n    currentIndex: -1,\r\n    isTreatementModal: false,\r\n    formFields: {},\r\n    cust_data: {},\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.getPackageList({});\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  getPackageList = data => {\r\n    let { page = 1, limit = 10, search = \"\" } = data;\r\n    this.props\r\n      .getCommonApi(\r\n        `treatmentpackages/?cust_id=${this.props.customerNumber}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(res => {\r\n        console.log(res, \"treatmentpackagelistresponse\");\r\n        let { status, data, cust_name, cust_refer } = res;\r\n        if (status === 200) {\r\n          if (data) {\r\n            let cust = {};\r\n            cust[\"cust_name\"] = cust_name;\r\n            cust[\"cust_refer\"] = cust_refer;\r\n            this.setState({\r\n              treatmentPackageList: res.data.dataList,\r\n              meta: res.data.meta.pagination,\r\n              cust_data: cust,\r\n            });\r\n          }\r\n        }\r\n      });\r\n  };\r\n\r\n  handlePagination = page => {\r\n    console.log(page, \"dsfsdfsdfsdf\");\r\n    this.getPackageList(page);\r\n  };\r\n\r\n  // handlesearch = (event) => {\r\n  //     console.log(\"sadfasdfasdf\", event.target.value)\r\n  //     event.persist();\r\n\r\n  //     if (!this.debouncedFn) {\r\n  //         this.debouncedFn = _.debounce(() => {\r\n  //             let searchString = event.target.value;\r\n  //             let data = { search: searchString }\r\n  //             this.getPackageList(data)\r\n  //         }, 500);\r\n  //     }\r\n  //     this.debouncedFn();\r\n  // }\r\n\r\n  handleDialog = () => {\r\n    let { isTreatementModal } = this.state;\r\n    isTreatementModal = !isTreatementModal;\r\n    this.setState({\r\n      isTreatementModal,\r\n    });\r\n  };\r\n\r\n  handleSelectTreatmentPackage = item => {\r\n    if (String(item.type).toUpperCase() == \"TD\") {\r\n      let { formFields } = this.state;\r\n      formFields[\"id\"] = item.stock_id;\r\n      formFields[\"item_desc\"] = item.item_name;\r\n      formFields[\"add_duration\"] = item.add_duration;\r\n      formFields[\"Item_CodeName\"] = item.item_name;\r\n      formFields[\"treatment_parentcode\"] = item.treatment_parentcode;\r\n\r\n      this.setState({\r\n        formFields,\r\n      });\r\n      console.log(formFields);\r\n      this.props.handleSelectPackage(formFields);\r\n      this.props.handleTreatementmodal();\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"This Package is not allowed\",\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      treatmentPackageList,\r\n      meta,\r\n      currentIndex,\r\n      active,\r\n      isTreatementModal,\r\n      formFields,\r\n      cust_data,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <NormalModal\r\n          className={\"multiple-appointment select-category\"}\r\n          modal={this.props.isTreatementModal}\r\n          style={{ minWidth: \"80%\", minHeight: \"90%\" }}\r\n          handleModal={() => {}}\r\n        >\r\n          <img\r\n            onClick={this.props.handleTreatementmodal}\r\n            className=\"close\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n          <div className=\"customer-list container\">\r\n            <div className=\"tab-table-content\">\r\n              <div className=\"py-4\">\r\n                <div className=\"col-12 p-2\">\r\n                  <h5 className=\"fw-500\">{t(\"Treatment\")}</h5>\r\n                </div>\r\n                <div className=\"d-flex flex-wrap mb-2\">\r\n                  <div className=\"col-md-3 col-12\">\r\n                    <div className=\"col-12\">\r\n                      {t(\"Name\")} :{\" \"}\r\n                      <span className=\"fw-500 h6\">{cust_data.cust_name}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3 col-12\">\r\n                    <div className=\"col-12\">\r\n                      {t(\"Reference\")} :{\" \"}\r\n                      <span className=\"fw-500 h6\">{cust_data.cust_refer}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-3 col-12\">\r\n                    <div className=\"col-12\">\r\n                      {t(\"Phone\")} :{\" \"}\r\n                      <span className=\"fw-500 h6\">{this.props.custPhone}</span>\r\n                    </div>\r\n                  </div>\r\n                  {this.props.CustomerRemarkFlag ? (\r\n                    <div className=\"col-md-3 col-12\">\r\n                      <div className=\"col-12\">\r\n                        {t(\"Permanent Remark\")} :{\" \"}\r\n                        <span className=\"fw-500 h6\">\r\n                          {this.props.CustomerRemark}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div className=\"table-container\">\r\n                  <TableWrapper\r\n                    headerDetails={headerDetails}\r\n                    queryHandler={this.handlePagination}\r\n                    pageMeta={meta}\r\n                  >\r\n                    {treatmentPackageList && treatmentPackageList.length > 0 ? (\r\n                      treatmentPackageList.map((item, index) => {\r\n                        let {\r\n                          item_name,\r\n                          tr_open,\r\n                          tr_done,\r\n                          stock_id,\r\n                          price,\r\n                          expiry,\r\n                          add_duration,\r\n                          treatment_parentcode,\r\n                          balance,\r\n                          outstanding,\r\n                        } = item;\r\n                        return (\r\n                          <tr\r\n                            onClick={() =>\r\n                              this.handleSelectTreatmentPackage(item, index)\r\n                            }\r\n                            key={index}\r\n                          >\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {item_name}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {tr_open}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {tr_done}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {price}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {expiry}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {balance}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {outstanding}\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    ) : (\r\n                      <tr>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {t(\"No data available\")}\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </TableWrapper>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </NormalModal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      updateForm,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentPackage = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ListTreatmentPackageClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}