{"ast":null,"code":"/**\r\n * DevExtreme (viz/tree_map/hover.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _tree_map = _interopRequireDefault(require(\"./tree_map.base\"));\n\nvar _node = _interopRequireDefault(require(\"./node\"));\n\nvar _helpers = require(\"../core/helpers\");\n\nvar _common = require(\"./common\");\n\nvar _utils = require(\"../core/utils\");\n\nrequire(\"./api\");\n\nrequire(\"./states\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar proto = _tree_map.default.prototype;\nvar nodeProto = _node.default.prototype;\nvar STATE_CODE = 1;\nproto._eventsMap.onHoverChanged = {\n  name: \"hoverChanged\"\n};\n(0, _helpers.expand)(proto._handlers, \"calculateAdditionalStates\", function (states, options) {\n  states[1] = options.hoverStyle ? (0, _common.buildRectAppearance)(options.hoverStyle) : {};\n});\n\n_tree_map.default.addChange({\n  code: \"HOVER_ENABLED\",\n  handler: function () {\n    var hoverEnabled = (0, _utils.parseScalar)(this._getOption(\"hoverEnabled\", true), true);\n\n    if (!hoverEnabled) {\n      this.clearHover();\n    }\n\n    this._hoverEnabled = hoverEnabled;\n  },\n  isThemeDependent: true,\n  isOptionChange: true,\n  option: \"hoverEnabled\"\n});\n\nnodeProto.statesMap[1] = 1;\nnodeProto.additionalStates.push(1);\n(0, _helpers.expand)(proto, \"_extendProxyType\", function (proto) {\n  var that = this;\n\n  proto.setHover = function () {\n    that._hoverNode(this._id);\n  };\n\n  proto.isHovered = function () {\n    return that._hoverIndex === this._id;\n  };\n});\n(0, _helpers.expand)(proto, \"_onNodesCreated\", function () {\n  this._hoverIndex = -1;\n});\n(0, _helpers.expand)(proto, \"_changeGroupSettings\", function () {\n  var that = this;\n  that._groupHoverEnabled = (0, _utils.parseScalar)(that._getOption(\"group\").hoverEnabled, true);\n\n  if (!that._groupHoverEnabled) {\n    that.clearHover();\n  }\n});\n\nproto._applyHoverState = function (index, state) {\n  setNodeStateRecursive(this._nodes[index], STATE_CODE, state);\n\n  this._eventTrigger(\"hoverChanged\", {\n    node: this._nodes[index].proxy\n  });\n};\n\nfunction setNodeStateRecursive(node, code, state) {\n  var nodes = node.isNode() && node.nodes;\n  var i;\n  var ii = nodes && nodes.length;\n  node.setState(code, state);\n\n  for (i = 0; i < ii; ++i) {\n    setNodeStateRecursive(nodes[i], code, state);\n  }\n}\n\nproto._hoverNode = function (index) {\n  var that = this;\n  var currentIndex = that._hoverIndex;\n\n  if (that._hoverEnabled && currentIndex !== index) {\n    if (!that._groupHoverEnabled && index >= 0 && that._nodes[index].isNode()) {\n      that.clearHover();\n      return;\n    }\n\n    that._context.suspend();\n\n    that._hoverIndex = -1;\n\n    if (currentIndex >= 0) {\n      that._applyHoverState(currentIndex, false);\n    }\n\n    that._hoverIndex = index;\n\n    if (index >= 0) {\n      that._applyHoverState(index, true);\n    }\n\n    that._context.resume();\n  }\n};\n\nproto.clearHover = function () {\n  this._hoverNode(-1);\n};","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/tree_map/hover.js"],"names":["_tree_map","_interopRequireDefault","require","_node","_helpers","_common","_utils","obj","__esModule","proto","default","prototype","nodeProto","STATE_CODE","_eventsMap","onHoverChanged","name","expand","_handlers","states","options","hoverStyle","buildRectAppearance","addChange","code","handler","hoverEnabled","parseScalar","_getOption","clearHover","_hoverEnabled","isThemeDependent","isOptionChange","option","statesMap","additionalStates","push","that","setHover","_hoverNode","_id","isHovered","_hoverIndex","_groupHoverEnabled","_applyHoverState","index","state","setNodeStateRecursive","_nodes","_eventTrigger","node","proxy","nodes","isNode","i","ii","length","setState","currentIndex","_context","suspend","resume"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/tree_map/hover.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _tree_map = _interopRequireDefault(require(\"./tree_map.base\"));\r\nvar _node = _interopRequireDefault(require(\"./node\"));\r\nvar _helpers = require(\"../core/helpers\");\r\nvar _common = require(\"./common\");\r\nvar _utils = require(\"../core/utils\");\r\nrequire(\"./api\");\r\nrequire(\"./states\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar proto = _tree_map.default.prototype;\r\nvar nodeProto = _node.default.prototype;\r\nvar STATE_CODE = 1;\r\nproto._eventsMap.onHoverChanged = {\r\n    name: \"hoverChanged\"\r\n};\r\n(0, _helpers.expand)(proto._handlers, \"calculateAdditionalStates\", function(states, options) {\r\n    states[1] = options.hoverStyle ? (0, _common.buildRectAppearance)(options.hoverStyle) : {}\r\n});\r\n_tree_map.default.addChange({\r\n    code: \"HOVER_ENABLED\",\r\n    handler: function() {\r\n        var hoverEnabled = (0, _utils.parseScalar)(this._getOption(\"hoverEnabled\", true), true);\r\n        if (!hoverEnabled) {\r\n            this.clearHover()\r\n        }\r\n        this._hoverEnabled = hoverEnabled\r\n    },\r\n    isThemeDependent: true,\r\n    isOptionChange: true,\r\n    option: \"hoverEnabled\"\r\n});\r\nnodeProto.statesMap[1] = 1;\r\nnodeProto.additionalStates.push(1);\r\n(0, _helpers.expand)(proto, \"_extendProxyType\", function(proto) {\r\n    var that = this;\r\n    proto.setHover = function() {\r\n        that._hoverNode(this._id)\r\n    };\r\n    proto.isHovered = function() {\r\n        return that._hoverIndex === this._id\r\n    }\r\n});\r\n(0, _helpers.expand)(proto, \"_onNodesCreated\", function() {\r\n    this._hoverIndex = -1\r\n});\r\n(0, _helpers.expand)(proto, \"_changeGroupSettings\", function() {\r\n    var that = this;\r\n    that._groupHoverEnabled = (0, _utils.parseScalar)(that._getOption(\"group\").hoverEnabled, true);\r\n    if (!that._groupHoverEnabled) {\r\n        that.clearHover()\r\n    }\r\n});\r\nproto._applyHoverState = function(index, state) {\r\n    setNodeStateRecursive(this._nodes[index], STATE_CODE, state);\r\n    this._eventTrigger(\"hoverChanged\", {\r\n        node: this._nodes[index].proxy\r\n    })\r\n};\r\n\r\nfunction setNodeStateRecursive(node, code, state) {\r\n    var nodes = node.isNode() && node.nodes;\r\n    var i;\r\n    var ii = nodes && nodes.length;\r\n    node.setState(code, state);\r\n    for (i = 0; i < ii; ++i) {\r\n        setNodeStateRecursive(nodes[i], code, state)\r\n    }\r\n}\r\nproto._hoverNode = function(index) {\r\n    var that = this;\r\n    var currentIndex = that._hoverIndex;\r\n    if (that._hoverEnabled && currentIndex !== index) {\r\n        if (!that._groupHoverEnabled && index >= 0 && that._nodes[index].isNode()) {\r\n            that.clearHover();\r\n            return\r\n        }\r\n        that._context.suspend();\r\n        that._hoverIndex = -1;\r\n        if (currentIndex >= 0) {\r\n            that._applyHoverState(currentIndex, false)\r\n        }\r\n        that._hoverIndex = index;\r\n        if (index >= 0) {\r\n            that._applyHoverState(index, true)\r\n        }\r\n        that._context.resume()\r\n    }\r\n};\r\nproto.clearHover = function() {\r\n    this._hoverNode(-1)\r\n};\r\n"]},"metadata":{},"sourceType":"script"}