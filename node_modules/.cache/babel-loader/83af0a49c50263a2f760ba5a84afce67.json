{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.virtual_scrolling.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../../core/dom_adapter\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../../events/core/events_engine\"));\n\nvar _window = require(\"../../../core/utils/window\");\n\nvar _index = require(\"../../../events/utils/index\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else {\n      if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar ROW_HEIGHT = 50;\nvar CELL_WIDTH = 150;\nvar MIN_SCROLL_OFFSET = 10;\nvar VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT = 15;\nvar DOCUMENT_SCROLL_EVENT_NAMESPACE = (0, _index.addNamespace)(\"scroll\", \"dxSchedulerVirtualScrolling\");\nvar scrollingTypes = {\n  vertical: \"vertical\",\n  horizontal: \"horizontal\",\n  both: \"both\"\n};\nvar DefaultScrollingType = scrollingTypes.vertical;\n\nvar VirtualScrollingDispatcher = function () {\n  function VirtualScrollingDispatcher(workspace) {\n    _classCallCheck(this, VirtualScrollingDispatcher);\n\n    this._workspace = workspace;\n    this._rowHeight = ROW_HEIGHT;\n    this._cellWidth = CELL_WIDTH;\n    this._renderer = new Renderer(this.workspace);\n\n    this._createVirtualScrolling();\n\n    this._attachScrollableEvents();\n  }\n\n  _createClass(VirtualScrollingDispatcher, [{\n    key: \"calculateCoordinatesByDataAndPosition\",\n    value: function value(cellData, position, date) {\n      var workSpace = this._workspace;\n      var rowIndex = position.rowIndex,\n          columnIndex = position.columnIndex;\n      var startDate = cellData.startDate,\n          endDate = cellData.endDate,\n          allDay = cellData.allDay;\n      var timeToScroll = date.getTime();\n      var cellStartTime = startDate.getTime();\n      var cellEndTime = endDate.getTime();\n      var scrollInCell = allDay ? 0 : (timeToScroll - cellStartTime) / (cellEndTime - cellStartTime);\n      var cellWidth = workSpace.getCellWidth();\n      var top = (rowIndex + scrollInCell) * this.rowHeight;\n      var left = cellWidth * columnIndex;\n\n      if (workSpace.option(\"rtlEnabled\")) {\n        left = workSpace.getScrollableOuterWidth() - left;\n      }\n\n      return {\n        top: top,\n        left: left\n      };\n    }\n  }, {\n    key: \"dispose\",\n    value: function value() {\n      if (this._onScrollHandler) {\n        _events_engine.default.off(this.document, DOCUMENT_SCROLL_EVENT_NAMESPACE, this._onScrollHandler);\n      }\n    }\n  }, {\n    key: \"_createVirtualScrolling\",\n    value: function value() {\n      if (this.verticalScrollingAllowed) {\n        this.verticalVirtualScrolling = new VerticalVirtualScrolling({\n          workspace: this.workspace,\n          viewportHeight: this.viewportHeight,\n          rowHeight: this.rowHeight\n        });\n      }\n\n      if (this.horizontalScrollingAllowed) {\n        this.horizontalVirtualScrolling = new HorizontalVirtualScrolling({\n          workspace: this.workspace,\n          viewportWidth: this.viewportWidth,\n          cellWidth: this.cellWidth\n        });\n      }\n    }\n  }, {\n    key: \"_attachScrollableEvents\",\n    value: function value() {\n      if (this.height || this.width) {\n        this._attachScrollableScroll();\n      }\n\n      if (!this.height || !this.width) {\n        this._attachWindowScroll();\n      }\n    }\n  }, {\n    key: \"_attachScrollableScroll\",\n    value: function value() {\n      var _this = this;\n\n      var scrollable = this.workspace.getScrollable();\n      var currentOnScroll = scrollable.option(\"onScroll\");\n      scrollable.option(\"onScroll\", function (e) {\n        null === currentOnScroll || void 0 === currentOnScroll ? void 0 : currentOnScroll.apply(scrollable, [e]);\n\n        _this._process(null === e || void 0 === e ? void 0 : e.scrollOffset);\n      });\n    }\n  }, {\n    key: \"_attachWindowScroll\",\n    value: function value() {\n      var _this2 = this;\n\n      var window = (0, _window.getWindow)();\n      this._onScrollHandler = this.workspace._createAction(function () {\n        var scrollX = window.scrollX,\n            scrollY = window.scrollY;\n\n        if (scrollX >= _this2.minScrollOffset || scrollY >= _this2.minScrollOffset) {\n          _this2._process({\n            left: scrollX,\n            top: scrollY\n          });\n        }\n      });\n\n      _events_engine.default.on(this.document, DOCUMENT_SCROLL_EVENT_NAMESPACE, this._onScrollHandler);\n    }\n  }, {\n    key: \"_process\",\n    value: function value(scrollPosition) {\n      if (scrollPosition) {\n        var _this$verticalVirtual, _this$horizontalVirtu;\n\n        var left = scrollPosition.left,\n            top = scrollPosition.top;\n        null === (_this$verticalVirtual = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual ? void 0 : _this$verticalVirtual.updateState(top);\n        null === (_this$horizontalVirtu = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu ? void 0 : _this$horizontalVirtu.updateState(left);\n        this.renderer.updateRender();\n      }\n    }\n  }, {\n    key: \"updateDimensions\",\n    value: function value() {\n      var cellHeight = this.workspace.getCellHeight(false);\n      var cellWidth = this.workspace.getCellWidth();\n      var needUpdate = cellHeight !== this.rowHeight || cellWidth !== this.cellWidth;\n\n      if (needUpdate) {\n        this.rowHeight = cellHeight;\n        this.cellWidth = cellWidth;\n\n        this._createVirtualScrolling();\n\n        this.renderer._renderDateTable();\n      }\n    }\n  }, {\n    key: \"workspace\",\n    get: function get() {\n      return this._workspace;\n    }\n  }, {\n    key: \"renderer\",\n    get: function get() {\n      return this._renderer;\n    }\n  }, {\n    key: \"isVirtualScrolling\",\n    get: function get() {\n      return this.workspace.isVirtualScrolling();\n    }\n  }, {\n    key: \"minScrollOffset\",\n    get: function get() {\n      return MIN_SCROLL_OFFSET;\n    }\n  }, {\n    key: \"verticalVirtualScrolling\",\n    get: function get() {\n      return this._verticalVirtualScrolling;\n    },\n    set: function set(value) {\n      this._verticalVirtualScrolling = value;\n    }\n  }, {\n    key: \"horizontalVirtualScrolling\",\n    get: function get() {\n      return this._horizontalVirtualScrolling;\n    },\n    set: function set(value) {\n      this._horizontalVirtualScrolling = value;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return _dom_adapter.default.getDocument();\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.workspace.invoke(\"getOption\", \"height\");\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.workspace.invoke(\"getOption\", \"width\");\n    }\n  }, {\n    key: \"rowHeight\",\n    get: function get() {\n      return this._rowHeight;\n    },\n    set: function set(value) {\n      this._rowHeight = value;\n    }\n  }, {\n    key: \"viewportHeight\",\n    get: function get() {\n      return this.height ? this.workspace.$element().height() : (0, _window.getWindow)().innerHeight;\n    }\n  }, {\n    key: \"cellWidth\",\n    get: function get() {\n      return this._cellWidth;\n    },\n    set: function set(value) {\n      this._cellWidth = value;\n    }\n  }, {\n    key: \"viewportWidth\",\n    get: function get() {\n      return this.width ? this.workspace.$element().width() : (0, _window.getWindow)().innerWidth;\n    }\n  }, {\n    key: \"topVirtualRowsCount\",\n    get: function get() {\n      return this.verticalScrollingState.virtualItemCountBefore > 0 ? 1 : 0;\n    }\n  }, {\n    key: \"scrollingState\",\n    get: function get() {\n      var _this$verticalVirtual2, _this$horizontalVirtu2;\n\n      return {\n        vertical: null === (_this$verticalVirtual2 = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual2 ? void 0 : _this$verticalVirtual2.state,\n        horizontal: null === (_this$horizontalVirtu2 = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu2 ? void 0 : _this$horizontalVirtu2.state\n      };\n    }\n  }, {\n    key: \"verticalScrollingState\",\n    get: function get() {\n      return this.scrollingState.vertical;\n    }\n  }, {\n    key: \"horizontalScrollingState\",\n    get: function get() {\n      return this.scrollingState.horizontal;\n    }\n  }, {\n    key: \"renderState\",\n    get: function get() {\n      var _this$verticalVirtual3, _this$horizontalVirtu3;\n\n      var verticalRenderState = (null === (_this$verticalVirtual3 = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual3 ? void 0 : _this$verticalVirtual3.getRenderState()) || {};\n      var horizontalRenderState = (null === (_this$horizontalVirtu3 = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu3 ? void 0 : _this$horizontalVirtu3.getRenderState()) || {};\n      return _objectSpread(_objectSpread({}, verticalRenderState), horizontalRenderState);\n    }\n  }, {\n    key: \"scrollingType\",\n    get: function get() {\n      return this.workspace.option(\"scrolling.type\") || DefaultScrollingType;\n    }\n  }, {\n    key: \"verticalScrollingAllowed\",\n    get: function get() {\n      return this.scrollingType === scrollingTypes.vertical || this.scrollingType === scrollingTypes.both;\n    }\n  }, {\n    key: \"horizontalScrollingAllowed\",\n    get: function get() {\n      return this.scrollingType === scrollingTypes.horizontal || this.scrollingType === scrollingTypes.both;\n    }\n  }]);\n\n  return VirtualScrollingDispatcher;\n}();\n\nexports.default = VirtualScrollingDispatcher;\n\nvar VirtualScrollingBase = function () {\n  function VirtualScrollingBase(options) {\n    _classCallCheck(this, VirtualScrollingBase);\n\n    this._workspace = options.workspace;\n    this._state = this.defaultState;\n    this._viewportSize = options.viewportSize;\n    this._itemSize = options.itemSize;\n    this.updateState(0);\n  }\n\n  _createClass(VirtualScrollingBase, [{\n    key: \"needUpdateState\",\n    value: function value(position) {\n      var _this$state = this.state,\n          prevPosition = _this$state.prevPosition,\n          startIndex = _this$state.startIndex;\n      var isFirstInitialization = startIndex < 0;\n\n      if (!isFirstInitialization && (0 === position || position === this.maxScrollPosition)) {\n        return true;\n      }\n\n      var currentPosition = prevPosition;\n      var currentItemsCount = Math.floor(currentPosition / this.itemSize);\n      var itemsCount = Math.floor(position / this.itemSize);\n      var isStartIndexChanged = Math.abs(currentItemsCount - itemsCount) >= this.outlineCount;\n      return isFirstInitialization || isStartIndexChanged;\n    }\n  }, {\n    key: \"_correctPosition\",\n    value: function value(position) {\n      if (position < 0) {\n        return 0;\n      }\n\n      return Math.min(position, this.maxScrollPosition);\n    }\n  }, {\n    key: \"updateState\",\n    value: function value(position) {\n      position = this._correctPosition(position);\n\n      if (!this.needUpdateState(position)) {\n        return false;\n      }\n\n      var itemsInfoBefore = this._calcItemInfoBefore(position);\n\n      var itemsDeltaBefore = this._calcItemDeltaBefore(itemsInfoBefore);\n\n      var _this$_calcItemInfoAf = this._calcItemInfoAfter(itemsDeltaBefore),\n          outlineCountAfter = _this$_calcItemInfoAf.outlineCountAfter,\n          virtualItemCountAfter = _this$_calcItemInfoAf.virtualItemCountAfter,\n          itemCountWithAfter = _this$_calcItemInfoAf.itemCountWithAfter;\n\n      var virtualItemCountBefore = itemsInfoBefore.virtualItemCountBefore,\n          outlineCountBefore = itemsInfoBefore.outlineCountBefore;\n      var itemCount = outlineCountBefore + itemCountWithAfter + outlineCountAfter;\n      var itemCountAfter = Math.floor(position / this.itemSize);\n      this.state.prevPosition = itemCountAfter * this.itemSize;\n      this.state.startIndex = itemCountAfter - outlineCountBefore;\n      this.state.virtualItemCountBefore = virtualItemCountBefore;\n      this.state.outlineCountBefore = outlineCountBefore;\n      this.state.itemCount = itemCount;\n      this.state.outlineCountAfter = outlineCountAfter;\n      this.state.virtualItemCountAfter = virtualItemCountAfter;\n\n      this._updateStateCore();\n\n      return true;\n    }\n  }, {\n    key: \"_calcItemInfoBefore\",\n    value: function value(position) {\n      var virtualItemCountBefore = Math.floor(position / this.itemSize);\n      var outlineCountBefore = Math.min(virtualItemCountBefore, this.outlineCount);\n      virtualItemCountBefore -= outlineCountBefore;\n      return {\n        virtualItemCountBefore: virtualItemCountBefore,\n        outlineCountBefore: outlineCountBefore\n      };\n    }\n  }, {\n    key: \"_calcItemDeltaBefore\",\n    value: function value(itemInfoBefore) {\n      var virtualItemCountBefore = itemInfoBefore.virtualItemCountBefore,\n          outlineCountBefore = itemInfoBefore.outlineCountBefore;\n      var totalItemCount = this.getTotalItemCount();\n      return totalItemCount - virtualItemCountBefore - outlineCountBefore;\n    }\n  }, {\n    key: \"getTotalItemCount\",\n    value: function value() {\n      throw \"getTotalItemCount method should be implemented\";\n    }\n  }, {\n    key: \"getRenderState\",\n    value: function value() {\n      throw \"getRenderState method should be implemented\";\n    }\n  }, {\n    key: \"_calcItemInfoAfter\",\n    value: function value(itemsDeltaBefore) {\n      var itemCountWithAfter = itemsDeltaBefore >= this.pageSize ? this.pageSize : itemsDeltaBefore;\n      var virtualItemCountAfter = itemsDeltaBefore - itemCountWithAfter;\n      var outlineCountAfter = virtualItemCountAfter > 0 ? Math.min(virtualItemCountAfter, this.outlineCount) : 0;\n\n      if (virtualItemCountAfter > 0) {\n        virtualItemCountAfter -= outlineCountAfter;\n      }\n\n      return {\n        virtualItemCountAfter: virtualItemCountAfter,\n        outlineCountAfter: outlineCountAfter,\n        itemCountWithAfter: itemCountWithAfter\n      };\n    }\n  }, {\n    key: \"_updateStateCore\",\n    value: function value() {\n      var state = this.state;\n      var virtualItemCountBefore = state.virtualItemCountBefore;\n      var virtualItemCountAfter = state.virtualItemCountAfter;\n      var outlineCountBefore = state.outlineCountBefore;\n      var outlineCountAfter = state.outlineCountAfter;\n      var prevVirtualItemSizeBefore = state.virtualItemSizeBefore;\n      var prevVirtualItemSizeAfter = state.virtualItemSizeAfter;\n      var prevOutlineSizeBefore = state.outlineSizeBefore;\n      var prevOutlineSizeAfter = state.outlineSizeAfter;\n      var virtualItemSizeBefore = this.itemSize * virtualItemCountBefore;\n      var virtualItemSizeAfter = this.itemSize * virtualItemCountAfter;\n      var outlineSizeBefore = this.itemSize * outlineCountBefore;\n      var outlineSizeAfter = this.itemSize * outlineCountAfter;\n      var prevVirtualSizeBefore = prevVirtualItemSizeBefore + prevOutlineSizeBefore;\n      var virtualSizeBefore = virtualItemSizeBefore + outlineSizeBefore;\n      var prevVirtualSizeAfter = prevVirtualItemSizeAfter + prevOutlineSizeAfter;\n      var virtualSizeAfter = virtualItemSizeAfter + outlineSizeAfter;\n      var isAppend = prevVirtualSizeBefore < virtualSizeBefore;\n      var isPrepend = prevVirtualSizeAfter < virtualSizeAfter;\n      var needAddItems = isAppend || isPrepend;\n\n      if (needAddItems) {\n        state.virtualItemSizeBefore = virtualItemSizeBefore;\n        state.virtualItemSizeAfter = virtualItemSizeAfter;\n      }\n    }\n  }, {\n    key: \"viewportSize\",\n    get: function get() {\n      return this._viewportSize;\n    }\n  }, {\n    key: \"itemSize\",\n    get: function get() {\n      return this._itemSize;\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return this._state;\n    },\n    set: function set(value) {\n      this._state = value;\n    }\n  }, {\n    key: \"startIndex\",\n    get: function get() {\n      return this.state.startIndex;\n    }\n  }, {\n    key: \"pageSize\",\n    get: function get() {\n      return Math.ceil(this.viewportSize / this.itemSize);\n    }\n  }, {\n    key: \"outlineCount\",\n    get: function get() {\n      return Math.floor(this.pageSize / 2);\n    }\n  }, {\n    key: \"workspace\",\n    get: function get() {\n      return this._workspace;\n    }\n  }, {\n    key: \"groupCount\",\n    get: function get() {\n      return this.workspace._getGroupCount();\n    }\n  }, {\n    key: \"isVerticalGrouping\",\n    get: function get() {\n      return this.workspace._isVerticalGroupedWorkSpace();\n    }\n  }, {\n    key: \"defaultState\",\n    get: function get() {\n      return {\n        prevPosition: 0,\n        startIndex: -1,\n        itemCount: 0,\n        virtualItemCountBefore: 0,\n        virtualItemCountAfter: 0,\n        outlineCountBefore: 0,\n        outlineCountAfter: 0,\n        virtualItemSizeBefore: 0,\n        virtualItemSizeAfter: 0,\n        outlineSizeBefore: 0,\n        outlineSizeAfter: 0\n      };\n    }\n  }, {\n    key: \"maxScrollPosition\",\n    get: function get() {\n      return this.getTotalItemCount() * this.itemSize - this.viewportSize;\n    }\n  }]);\n\n  return VirtualScrollingBase;\n}();\n\nvar VerticalVirtualScrolling = function (_VirtualScrollingBase) {\n  _inherits(VerticalVirtualScrolling, _VirtualScrollingBase);\n\n  var _super = _createSuper(VerticalVirtualScrolling);\n\n  function VerticalVirtualScrolling(options) {\n    _classCallCheck(this, VerticalVirtualScrolling);\n\n    return _super.call(this, {\n      workspace: options.workspace,\n      viewportSize: options.viewportHeight,\n      itemSize: options.rowHeight\n    });\n  }\n\n  _createClass(VerticalVirtualScrolling, [{\n    key: \"getTotalItemCount\",\n    value: function value() {\n      return this.workspace._getTotalRowCount(this.groupCount, this.isVerticalGrouping);\n    }\n  }, {\n    key: \"getRenderState\",\n    value: function value() {\n      return {\n        topVirtualRowHeight: this.state.virtualItemSizeBefore,\n        bottomVirtualRowHeight: this.state.virtualItemSizeAfter,\n        startRowIndex: this.state.startIndex,\n        rowCount: this.state.itemCount,\n        startIndex: this.state.startIndex\n      };\n    }\n  }, {\n    key: \"prevTopPosition\",\n    get: function get() {\n      return this.state.prevPosition;\n    }\n  }, {\n    key: \"rowCount\",\n    get: function get() {\n      return this.state.itemCount;\n    }\n  }, {\n    key: \"topVirtualRowCount\",\n    get: function get() {\n      return this.state.virtualItemCountBefore;\n    }\n  }, {\n    key: \"bottomVirtualRowCount\",\n    get: function get() {\n      return this.state.virtualItemCountAfter;\n    }\n  }]);\n\n  return VerticalVirtualScrolling;\n}(VirtualScrollingBase);\n\nvar HorizontalVirtualScrolling = function (_VirtualScrollingBase2) {\n  _inherits(HorizontalVirtualScrolling, _VirtualScrollingBase2);\n\n  var _super2 = _createSuper(HorizontalVirtualScrolling);\n\n  function HorizontalVirtualScrolling(options) {\n    _classCallCheck(this, HorizontalVirtualScrolling);\n\n    return _super2.call(this, {\n      workspace: options.workspace,\n      viewportSize: options.viewportWidth,\n      itemSize: options.cellWidth\n    });\n  }\n\n  _createClass(HorizontalVirtualScrolling, [{\n    key: \"getTotalItemCount\",\n    value: function value() {\n      return this.workspace._getTotalCellCount(this.groupCount, this.isVerticalGrouping);\n    }\n  }, {\n    key: \"getRenderState\",\n    value: function value() {\n      return {\n        leftVirtualCellWidth: this.state.virtualItemSizeBefore,\n        rightVirtualCellWidth: this.state.virtualItemSizeAfter,\n        startCellIndex: this.state.startIndex,\n        cellCount: this.state.itemCount,\n        cellWidth: this.state.itemSize\n      };\n    }\n  }]);\n\n  return HorizontalVirtualScrolling;\n}(VirtualScrollingBase);\n\nvar Renderer = function () {\n  function Renderer(workspace) {\n    _classCallCheck(this, Renderer);\n\n    this._workspace = workspace;\n    this._renderAppointmentTimeout = null;\n  }\n\n  _createClass(Renderer, [{\n    key: \"getRenderTimeout\",\n    value: function value() {\n      return VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT;\n    }\n  }, {\n    key: \"updateRender\",\n    value: function value() {\n      this._renderDateTable();\n\n      this._renderAppointments();\n    }\n  }, {\n    key: \"_renderDateTable\",\n    value: function value() {\n      this.workspace.renderRWorkspace(false);\n    }\n  }, {\n    key: \"_renderAppointments\",\n    value: function value() {\n      var _this3 = this;\n\n      var renderTimeout = this.getRenderTimeout();\n\n      if (renderTimeout >= 0) {\n        clearTimeout(this._renderAppointmentTimeout);\n        this._renderAppointmentTimeout = setTimeout(function () {\n          return _this3.workspace.updateAppointments();\n        }, renderTimeout);\n      } else {\n        this.workspace.updateAppointments();\n      }\n    }\n  }, {\n    key: \"workspace\",\n    get: function get() {\n      return this._workspace;\n    }\n  }]);\n\n  return Renderer;\n}();\n\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/scheduler/workspaces/ui.scheduler.virtual_scrolling.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_dom_adapter","_interopRequireDefault","require","_events_engine","_window","_index","__esModule","_inherits","subClass","superClass","TypeError","Object","create","value","writable","configurable","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","ROW_HEIGHT","CELL_WIDTH","MIN_SCROLL_OFFSET","VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT","DOCUMENT_SCROLL_EVENT_NAMESPACE","addNamespace","scrollingTypes","vertical","horizontal","both","DefaultScrollingType","VirtualScrollingDispatcher","workspace","_workspace","_rowHeight","_cellWidth","_renderer","Renderer","_createVirtualScrolling","_attachScrollableEvents","cellData","position","date","workSpace","rowIndex","columnIndex","startDate","endDate","allDay","timeToScroll","getTime","cellStartTime","cellEndTime","scrollInCell","cellWidth","getCellWidth","top","rowHeight","left","option","getScrollableOuterWidth","_onScrollHandler","off","document","verticalScrollingAllowed","verticalVirtualScrolling","VerticalVirtualScrolling","viewportHeight","horizontalScrollingAllowed","horizontalVirtualScrolling","HorizontalVirtualScrolling","viewportWidth","height","width","_attachScrollableScroll","_attachWindowScroll","_this","scrollable","getScrollable","currentOnScroll","_process","scrollOffset","_this2","window","getWindow","_createAction","scrollX","scrollY","minScrollOffset","on","scrollPosition","_this$verticalVirtual","_this$horizontalVirtu","updateState","renderer","updateRender","cellHeight","getCellHeight","needUpdate","_renderDateTable","get","isVirtualScrolling","_verticalVirtualScrolling","set","_horizontalVirtualScrolling","getDocument","invoke","$element","innerHeight","innerWidth","verticalScrollingState","virtualItemCountBefore","_this$verticalVirtual2","_this$horizontalVirtu2","state","scrollingState","_this$verticalVirtual3","_this$horizontalVirtu3","verticalRenderState","getRenderState","horizontalRenderState","scrollingType","VirtualScrollingBase","options","_state","defaultState","_viewportSize","viewportSize","_itemSize","itemSize","_this$state","prevPosition","startIndex","isFirstInitialization","maxScrollPosition","currentPosition","currentItemsCount","Math","floor","itemsCount","isStartIndexChanged","abs","outlineCount","min","_correctPosition","needUpdateState","itemsInfoBefore","_calcItemInfoBefore","itemsDeltaBefore","_calcItemDeltaBefore","_this$_calcItemInfoAf","_calcItemInfoAfter","outlineCountAfter","virtualItemCountAfter","itemCountWithAfter","outlineCountBefore","itemCount","itemCountAfter","_updateStateCore","itemInfoBefore","totalItemCount","getTotalItemCount","pageSize","prevVirtualItemSizeBefore","virtualItemSizeBefore","prevVirtualItemSizeAfter","virtualItemSizeAfter","prevOutlineSizeBefore","outlineSizeBefore","prevOutlineSizeAfter","outlineSizeAfter","prevVirtualSizeBefore","virtualSizeBefore","prevVirtualSizeAfter","virtualSizeAfter","isAppend","isPrepend","needAddItems","ceil","_getGroupCount","_isVerticalGroupedWorkSpace","_VirtualScrollingBase","_super","_getTotalRowCount","groupCount","isVerticalGrouping","topVirtualRowHeight","bottomVirtualRowHeight","startRowIndex","rowCount","_VirtualScrollingBase2","_super2","_getTotalCellCount","leftVirtualCellWidth","rightVirtualCellWidth","startCellIndex","cellCount","_renderAppointmentTimeout","_renderAppointments","renderRWorkspace","_this3","renderTimeout","getRenderTimeout","clearTimeout","setTimeout","updateAppointments","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.virtual_scrolling.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../../core/dom_adapter\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../../events/core/events_engine\"));\r\nvar _window = require(\"../../../core/utils/window\");\r\nvar _index = require(\"../../../events/utils/index\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction ownKeys(object, enumerableOnly) {\r\n    var keys = Object.keys(object);\r\n    if (Object.getOwnPropertySymbols) {\r\n        var symbols = Object.getOwnPropertySymbols(object);\r\n        if (enumerableOnly) {\r\n            symbols = symbols.filter(function(sym) {\r\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable\r\n            })\r\n        }\r\n        keys.push.apply(keys, symbols)\r\n    }\r\n    return keys\r\n}\r\n\r\nfunction _objectSpread(target) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n        var source = null != arguments[i] ? arguments[i] : {};\r\n        if (i % 2) {\r\n            ownKeys(Object(source), true).forEach(function(key) {\r\n                _defineProperty(target, key, source[key])\r\n            })\r\n        } else {\r\n            if (Object.getOwnPropertyDescriptors) {\r\n                Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\r\n            } else {\r\n                ownKeys(Object(source)).forEach(function(key) {\r\n                    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\r\n                })\r\n            }\r\n        }\r\n    }\r\n    return target\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar ROW_HEIGHT = 50;\r\nvar CELL_WIDTH = 150;\r\nvar MIN_SCROLL_OFFSET = 10;\r\nvar VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT = 15;\r\nvar DOCUMENT_SCROLL_EVENT_NAMESPACE = (0, _index.addNamespace)(\"scroll\", \"dxSchedulerVirtualScrolling\");\r\nvar scrollingTypes = {\r\n    vertical: \"vertical\",\r\n    horizontal: \"horizontal\",\r\n    both: \"both\"\r\n};\r\nvar DefaultScrollingType = scrollingTypes.vertical;\r\nvar VirtualScrollingDispatcher = function() {\r\n    function VirtualScrollingDispatcher(workspace) {\r\n        _classCallCheck(this, VirtualScrollingDispatcher);\r\n        this._workspace = workspace;\r\n        this._rowHeight = ROW_HEIGHT;\r\n        this._cellWidth = CELL_WIDTH;\r\n        this._renderer = new Renderer(this.workspace);\r\n        this._createVirtualScrolling();\r\n        this._attachScrollableEvents()\r\n    }\r\n    _createClass(VirtualScrollingDispatcher, [{\r\n        key: \"calculateCoordinatesByDataAndPosition\",\r\n        value: function(cellData, position, date) {\r\n            var workSpace = this._workspace;\r\n            var rowIndex = position.rowIndex,\r\n                columnIndex = position.columnIndex;\r\n            var startDate = cellData.startDate,\r\n                endDate = cellData.endDate,\r\n                allDay = cellData.allDay;\r\n            var timeToScroll = date.getTime();\r\n            var cellStartTime = startDate.getTime();\r\n            var cellEndTime = endDate.getTime();\r\n            var scrollInCell = allDay ? 0 : (timeToScroll - cellStartTime) / (cellEndTime - cellStartTime);\r\n            var cellWidth = workSpace.getCellWidth();\r\n            var top = (rowIndex + scrollInCell) * this.rowHeight;\r\n            var left = cellWidth * columnIndex;\r\n            if (workSpace.option(\"rtlEnabled\")) {\r\n                left = workSpace.getScrollableOuterWidth() - left\r\n            }\r\n            return {\r\n                top: top,\r\n                left: left\r\n            }\r\n        }\r\n    }, {\r\n        key: \"dispose\",\r\n        value: function() {\r\n            if (this._onScrollHandler) {\r\n                _events_engine.default.off(this.document, DOCUMENT_SCROLL_EVENT_NAMESPACE, this._onScrollHandler)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createVirtualScrolling\",\r\n        value: function() {\r\n            if (this.verticalScrollingAllowed) {\r\n                this.verticalVirtualScrolling = new VerticalVirtualScrolling({\r\n                    workspace: this.workspace,\r\n                    viewportHeight: this.viewportHeight,\r\n                    rowHeight: this.rowHeight\r\n                })\r\n            }\r\n            if (this.horizontalScrollingAllowed) {\r\n                this.horizontalVirtualScrolling = new HorizontalVirtualScrolling({\r\n                    workspace: this.workspace,\r\n                    viewportWidth: this.viewportWidth,\r\n                    cellWidth: this.cellWidth\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_attachScrollableEvents\",\r\n        value: function() {\r\n            if (this.height || this.width) {\r\n                this._attachScrollableScroll()\r\n            }\r\n            if (!this.height || !this.width) {\r\n                this._attachWindowScroll()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_attachScrollableScroll\",\r\n        value: function() {\r\n            var _this = this;\r\n            var scrollable = this.workspace.getScrollable();\r\n            var currentOnScroll = scrollable.option(\"onScroll\");\r\n            scrollable.option(\"onScroll\", function(e) {\r\n                null === currentOnScroll || void 0 === currentOnScroll ? void 0 : currentOnScroll.apply(scrollable, [e]);\r\n                _this._process(null === e || void 0 === e ? void 0 : e.scrollOffset)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_attachWindowScroll\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            var window = (0, _window.getWindow)();\r\n            this._onScrollHandler = this.workspace._createAction(function() {\r\n                var scrollX = window.scrollX,\r\n                    scrollY = window.scrollY;\r\n                if (scrollX >= _this2.minScrollOffset || scrollY >= _this2.minScrollOffset) {\r\n                    _this2._process({\r\n                        left: scrollX,\r\n                        top: scrollY\r\n                    })\r\n                }\r\n            });\r\n            _events_engine.default.on(this.document, DOCUMENT_SCROLL_EVENT_NAMESPACE, this._onScrollHandler)\r\n        }\r\n    }, {\r\n        key: \"_process\",\r\n        value: function(scrollPosition) {\r\n            if (scrollPosition) {\r\n                var _this$verticalVirtual, _this$horizontalVirtu;\r\n                var left = scrollPosition.left,\r\n                    top = scrollPosition.top;\r\n                null === (_this$verticalVirtual = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual ? void 0 : _this$verticalVirtual.updateState(top);\r\n                null === (_this$horizontalVirtu = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu ? void 0 : _this$horizontalVirtu.updateState(left);\r\n                this.renderer.updateRender()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"updateDimensions\",\r\n        value: function() {\r\n            var cellHeight = this.workspace.getCellHeight(false);\r\n            var cellWidth = this.workspace.getCellWidth();\r\n            var needUpdate = cellHeight !== this.rowHeight || cellWidth !== this.cellWidth;\r\n            if (needUpdate) {\r\n                this.rowHeight = cellHeight;\r\n                this.cellWidth = cellWidth;\r\n                this._createVirtualScrolling();\r\n                this.renderer._renderDateTable()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"workspace\",\r\n        get: function() {\r\n            return this._workspace\r\n        }\r\n    }, {\r\n        key: \"renderer\",\r\n        get: function() {\r\n            return this._renderer\r\n        }\r\n    }, {\r\n        key: \"isVirtualScrolling\",\r\n        get: function() {\r\n            return this.workspace.isVirtualScrolling()\r\n        }\r\n    }, {\r\n        key: \"minScrollOffset\",\r\n        get: function() {\r\n            return MIN_SCROLL_OFFSET\r\n        }\r\n    }, {\r\n        key: \"verticalVirtualScrolling\",\r\n        get: function() {\r\n            return this._verticalVirtualScrolling\r\n        },\r\n        set: function(value) {\r\n            this._verticalVirtualScrolling = value\r\n        }\r\n    }, {\r\n        key: \"horizontalVirtualScrolling\",\r\n        get: function() {\r\n            return this._horizontalVirtualScrolling\r\n        },\r\n        set: function(value) {\r\n            this._horizontalVirtualScrolling = value\r\n        }\r\n    }, {\r\n        key: \"document\",\r\n        get: function() {\r\n            return _dom_adapter.default.getDocument()\r\n        }\r\n    }, {\r\n        key: \"height\",\r\n        get: function() {\r\n            return this.workspace.invoke(\"getOption\", \"height\")\r\n        }\r\n    }, {\r\n        key: \"width\",\r\n        get: function() {\r\n            return this.workspace.invoke(\"getOption\", \"width\")\r\n        }\r\n    }, {\r\n        key: \"rowHeight\",\r\n        get: function() {\r\n            return this._rowHeight\r\n        },\r\n        set: function(value) {\r\n            this._rowHeight = value\r\n        }\r\n    }, {\r\n        key: \"viewportHeight\",\r\n        get: function() {\r\n            return this.height ? this.workspace.$element().height() : (0, _window.getWindow)().innerHeight\r\n        }\r\n    }, {\r\n        key: \"cellWidth\",\r\n        get: function() {\r\n            return this._cellWidth\r\n        },\r\n        set: function(value) {\r\n            this._cellWidth = value\r\n        }\r\n    }, {\r\n        key: \"viewportWidth\",\r\n        get: function() {\r\n            return this.width ? this.workspace.$element().width() : (0, _window.getWindow)().innerWidth\r\n        }\r\n    }, {\r\n        key: \"topVirtualRowsCount\",\r\n        get: function() {\r\n            return this.verticalScrollingState.virtualItemCountBefore > 0 ? 1 : 0\r\n        }\r\n    }, {\r\n        key: \"scrollingState\",\r\n        get: function() {\r\n            var _this$verticalVirtual2, _this$horizontalVirtu2;\r\n            return {\r\n                vertical: null === (_this$verticalVirtual2 = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual2 ? void 0 : _this$verticalVirtual2.state,\r\n                horizontal: null === (_this$horizontalVirtu2 = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu2 ? void 0 : _this$horizontalVirtu2.state\r\n            }\r\n        }\r\n    }, {\r\n        key: \"verticalScrollingState\",\r\n        get: function() {\r\n            return this.scrollingState.vertical\r\n        }\r\n    }, {\r\n        key: \"horizontalScrollingState\",\r\n        get: function() {\r\n            return this.scrollingState.horizontal\r\n        }\r\n    }, {\r\n        key: \"renderState\",\r\n        get: function() {\r\n            var _this$verticalVirtual3, _this$horizontalVirtu3;\r\n            var verticalRenderState = (null === (_this$verticalVirtual3 = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual3 ? void 0 : _this$verticalVirtual3.getRenderState()) || {};\r\n            var horizontalRenderState = (null === (_this$horizontalVirtu3 = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu3 ? void 0 : _this$horizontalVirtu3.getRenderState()) || {};\r\n            return _objectSpread(_objectSpread({}, verticalRenderState), horizontalRenderState)\r\n        }\r\n    }, {\r\n        key: \"scrollingType\",\r\n        get: function() {\r\n            return this.workspace.option(\"scrolling.type\") || DefaultScrollingType\r\n        }\r\n    }, {\r\n        key: \"verticalScrollingAllowed\",\r\n        get: function() {\r\n            return this.scrollingType === scrollingTypes.vertical || this.scrollingType === scrollingTypes.both\r\n        }\r\n    }, {\r\n        key: \"horizontalScrollingAllowed\",\r\n        get: function() {\r\n            return this.scrollingType === scrollingTypes.horizontal || this.scrollingType === scrollingTypes.both\r\n        }\r\n    }]);\r\n    return VirtualScrollingDispatcher\r\n}();\r\nexports.default = VirtualScrollingDispatcher;\r\nvar VirtualScrollingBase = function() {\r\n    function VirtualScrollingBase(options) {\r\n        _classCallCheck(this, VirtualScrollingBase);\r\n        this._workspace = options.workspace;\r\n        this._state = this.defaultState;\r\n        this._viewportSize = options.viewportSize;\r\n        this._itemSize = options.itemSize;\r\n        this.updateState(0)\r\n    }\r\n    _createClass(VirtualScrollingBase, [{\r\n        key: \"needUpdateState\",\r\n        value: function(position) {\r\n            var _this$state = this.state,\r\n                prevPosition = _this$state.prevPosition,\r\n                startIndex = _this$state.startIndex;\r\n            var isFirstInitialization = startIndex < 0;\r\n            if (!isFirstInitialization && (0 === position || position === this.maxScrollPosition)) {\r\n                return true\r\n            }\r\n            var currentPosition = prevPosition;\r\n            var currentItemsCount = Math.floor(currentPosition / this.itemSize);\r\n            var itemsCount = Math.floor(position / this.itemSize);\r\n            var isStartIndexChanged = Math.abs(currentItemsCount - itemsCount) >= this.outlineCount;\r\n            return isFirstInitialization || isStartIndexChanged\r\n        }\r\n    }, {\r\n        key: \"_correctPosition\",\r\n        value: function(position) {\r\n            if (position < 0) {\r\n                return 0\r\n            }\r\n            return Math.min(position, this.maxScrollPosition)\r\n        }\r\n    }, {\r\n        key: \"updateState\",\r\n        value: function(position) {\r\n            position = this._correctPosition(position);\r\n            if (!this.needUpdateState(position)) {\r\n                return false\r\n            }\r\n            var itemsInfoBefore = this._calcItemInfoBefore(position);\r\n            var itemsDeltaBefore = this._calcItemDeltaBefore(itemsInfoBefore);\r\n            var _this$_calcItemInfoAf = this._calcItemInfoAfter(itemsDeltaBefore),\r\n                outlineCountAfter = _this$_calcItemInfoAf.outlineCountAfter,\r\n                virtualItemCountAfter = _this$_calcItemInfoAf.virtualItemCountAfter,\r\n                itemCountWithAfter = _this$_calcItemInfoAf.itemCountWithAfter;\r\n            var virtualItemCountBefore = itemsInfoBefore.virtualItemCountBefore,\r\n                outlineCountBefore = itemsInfoBefore.outlineCountBefore;\r\n            var itemCount = outlineCountBefore + itemCountWithAfter + outlineCountAfter;\r\n            var itemCountAfter = Math.floor(position / this.itemSize);\r\n            this.state.prevPosition = itemCountAfter * this.itemSize;\r\n            this.state.startIndex = itemCountAfter - outlineCountBefore;\r\n            this.state.virtualItemCountBefore = virtualItemCountBefore;\r\n            this.state.outlineCountBefore = outlineCountBefore;\r\n            this.state.itemCount = itemCount;\r\n            this.state.outlineCountAfter = outlineCountAfter;\r\n            this.state.virtualItemCountAfter = virtualItemCountAfter;\r\n            this._updateStateCore();\r\n            return true\r\n        }\r\n    }, {\r\n        key: \"_calcItemInfoBefore\",\r\n        value: function(position) {\r\n            var virtualItemCountBefore = Math.floor(position / this.itemSize);\r\n            var outlineCountBefore = Math.min(virtualItemCountBefore, this.outlineCount);\r\n            virtualItemCountBefore -= outlineCountBefore;\r\n            return {\r\n                virtualItemCountBefore: virtualItemCountBefore,\r\n                outlineCountBefore: outlineCountBefore\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_calcItemDeltaBefore\",\r\n        value: function(itemInfoBefore) {\r\n            var virtualItemCountBefore = itemInfoBefore.virtualItemCountBefore,\r\n                outlineCountBefore = itemInfoBefore.outlineCountBefore;\r\n            var totalItemCount = this.getTotalItemCount();\r\n            return totalItemCount - virtualItemCountBefore - outlineCountBefore\r\n        }\r\n    }, {\r\n        key: \"getTotalItemCount\",\r\n        value: function() {\r\n            throw \"getTotalItemCount method should be implemented\"\r\n        }\r\n    }, {\r\n        key: \"getRenderState\",\r\n        value: function() {\r\n            throw \"getRenderState method should be implemented\"\r\n        }\r\n    }, {\r\n        key: \"_calcItemInfoAfter\",\r\n        value: function(itemsDeltaBefore) {\r\n            var itemCountWithAfter = itemsDeltaBefore >= this.pageSize ? this.pageSize : itemsDeltaBefore;\r\n            var virtualItemCountAfter = itemsDeltaBefore - itemCountWithAfter;\r\n            var outlineCountAfter = virtualItemCountAfter > 0 ? Math.min(virtualItemCountAfter, this.outlineCount) : 0;\r\n            if (virtualItemCountAfter > 0) {\r\n                virtualItemCountAfter -= outlineCountAfter\r\n            }\r\n            return {\r\n                virtualItemCountAfter: virtualItemCountAfter,\r\n                outlineCountAfter: outlineCountAfter,\r\n                itemCountWithAfter: itemCountWithAfter\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateStateCore\",\r\n        value: function() {\r\n            var state = this.state;\r\n            var virtualItemCountBefore = state.virtualItemCountBefore;\r\n            var virtualItemCountAfter = state.virtualItemCountAfter;\r\n            var outlineCountBefore = state.outlineCountBefore;\r\n            var outlineCountAfter = state.outlineCountAfter;\r\n            var prevVirtualItemSizeBefore = state.virtualItemSizeBefore;\r\n            var prevVirtualItemSizeAfter = state.virtualItemSizeAfter;\r\n            var prevOutlineSizeBefore = state.outlineSizeBefore;\r\n            var prevOutlineSizeAfter = state.outlineSizeAfter;\r\n            var virtualItemSizeBefore = this.itemSize * virtualItemCountBefore;\r\n            var virtualItemSizeAfter = this.itemSize * virtualItemCountAfter;\r\n            var outlineSizeBefore = this.itemSize * outlineCountBefore;\r\n            var outlineSizeAfter = this.itemSize * outlineCountAfter;\r\n            var prevVirtualSizeBefore = prevVirtualItemSizeBefore + prevOutlineSizeBefore;\r\n            var virtualSizeBefore = virtualItemSizeBefore + outlineSizeBefore;\r\n            var prevVirtualSizeAfter = prevVirtualItemSizeAfter + prevOutlineSizeAfter;\r\n            var virtualSizeAfter = virtualItemSizeAfter + outlineSizeAfter;\r\n            var isAppend = prevVirtualSizeBefore < virtualSizeBefore;\r\n            var isPrepend = prevVirtualSizeAfter < virtualSizeAfter;\r\n            var needAddItems = isAppend || isPrepend;\r\n            if (needAddItems) {\r\n                state.virtualItemSizeBefore = virtualItemSizeBefore;\r\n                state.virtualItemSizeAfter = virtualItemSizeAfter\r\n            }\r\n        }\r\n    }, {\r\n        key: \"viewportSize\",\r\n        get: function() {\r\n            return this._viewportSize\r\n        }\r\n    }, {\r\n        key: \"itemSize\",\r\n        get: function() {\r\n            return this._itemSize\r\n        }\r\n    }, {\r\n        key: \"state\",\r\n        get: function() {\r\n            return this._state\r\n        },\r\n        set: function(value) {\r\n            this._state = value\r\n        }\r\n    }, {\r\n        key: \"startIndex\",\r\n        get: function() {\r\n            return this.state.startIndex\r\n        }\r\n    }, {\r\n        key: \"pageSize\",\r\n        get: function() {\r\n            return Math.ceil(this.viewportSize / this.itemSize)\r\n        }\r\n    }, {\r\n        key: \"outlineCount\",\r\n        get: function() {\r\n            return Math.floor(this.pageSize / 2)\r\n        }\r\n    }, {\r\n        key: \"workspace\",\r\n        get: function() {\r\n            return this._workspace\r\n        }\r\n    }, {\r\n        key: \"groupCount\",\r\n        get: function() {\r\n            return this.workspace._getGroupCount()\r\n        }\r\n    }, {\r\n        key: \"isVerticalGrouping\",\r\n        get: function() {\r\n            return this.workspace._isVerticalGroupedWorkSpace()\r\n        }\r\n    }, {\r\n        key: \"defaultState\",\r\n        get: function() {\r\n            return {\r\n                prevPosition: 0,\r\n                startIndex: -1,\r\n                itemCount: 0,\r\n                virtualItemCountBefore: 0,\r\n                virtualItemCountAfter: 0,\r\n                outlineCountBefore: 0,\r\n                outlineCountAfter: 0,\r\n                virtualItemSizeBefore: 0,\r\n                virtualItemSizeAfter: 0,\r\n                outlineSizeBefore: 0,\r\n                outlineSizeAfter: 0\r\n            }\r\n        }\r\n    }, {\r\n        key: \"maxScrollPosition\",\r\n        get: function() {\r\n            return this.getTotalItemCount() * this.itemSize - this.viewportSize\r\n        }\r\n    }]);\r\n    return VirtualScrollingBase\r\n}();\r\nvar VerticalVirtualScrolling = function(_VirtualScrollingBase) {\r\n    _inherits(VerticalVirtualScrolling, _VirtualScrollingBase);\r\n    var _super = _createSuper(VerticalVirtualScrolling);\r\n\r\n    function VerticalVirtualScrolling(options) {\r\n        _classCallCheck(this, VerticalVirtualScrolling);\r\n        return _super.call(this, {\r\n            workspace: options.workspace,\r\n            viewportSize: options.viewportHeight,\r\n            itemSize: options.rowHeight\r\n        })\r\n    }\r\n    _createClass(VerticalVirtualScrolling, [{\r\n        key: \"getTotalItemCount\",\r\n        value: function() {\r\n            return this.workspace._getTotalRowCount(this.groupCount, this.isVerticalGrouping)\r\n        }\r\n    }, {\r\n        key: \"getRenderState\",\r\n        value: function() {\r\n            return {\r\n                topVirtualRowHeight: this.state.virtualItemSizeBefore,\r\n                bottomVirtualRowHeight: this.state.virtualItemSizeAfter,\r\n                startRowIndex: this.state.startIndex,\r\n                rowCount: this.state.itemCount,\r\n                startIndex: this.state.startIndex\r\n            }\r\n        }\r\n    }, {\r\n        key: \"prevTopPosition\",\r\n        get: function() {\r\n            return this.state.prevPosition\r\n        }\r\n    }, {\r\n        key: \"rowCount\",\r\n        get: function() {\r\n            return this.state.itemCount\r\n        }\r\n    }, {\r\n        key: \"topVirtualRowCount\",\r\n        get: function() {\r\n            return this.state.virtualItemCountBefore\r\n        }\r\n    }, {\r\n        key: \"bottomVirtualRowCount\",\r\n        get: function() {\r\n            return this.state.virtualItemCountAfter\r\n        }\r\n    }]);\r\n    return VerticalVirtualScrolling\r\n}(VirtualScrollingBase);\r\nvar HorizontalVirtualScrolling = function(_VirtualScrollingBase2) {\r\n    _inherits(HorizontalVirtualScrolling, _VirtualScrollingBase2);\r\n    var _super2 = _createSuper(HorizontalVirtualScrolling);\r\n\r\n    function HorizontalVirtualScrolling(options) {\r\n        _classCallCheck(this, HorizontalVirtualScrolling);\r\n        return _super2.call(this, {\r\n            workspace: options.workspace,\r\n            viewportSize: options.viewportWidth,\r\n            itemSize: options.cellWidth\r\n        })\r\n    }\r\n    _createClass(HorizontalVirtualScrolling, [{\r\n        key: \"getTotalItemCount\",\r\n        value: function() {\r\n            return this.workspace._getTotalCellCount(this.groupCount, this.isVerticalGrouping)\r\n        }\r\n    }, {\r\n        key: \"getRenderState\",\r\n        value: function() {\r\n            return {\r\n                leftVirtualCellWidth: this.state.virtualItemSizeBefore,\r\n                rightVirtualCellWidth: this.state.virtualItemSizeAfter,\r\n                startCellIndex: this.state.startIndex,\r\n                cellCount: this.state.itemCount,\r\n                cellWidth: this.state.itemSize\r\n            }\r\n        }\r\n    }]);\r\n    return HorizontalVirtualScrolling\r\n}(VirtualScrollingBase);\r\nvar Renderer = function() {\r\n    function Renderer(workspace) {\r\n        _classCallCheck(this, Renderer);\r\n        this._workspace = workspace;\r\n        this._renderAppointmentTimeout = null\r\n    }\r\n    _createClass(Renderer, [{\r\n        key: \"getRenderTimeout\",\r\n        value: function() {\r\n            return VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT\r\n        }\r\n    }, {\r\n        key: \"updateRender\",\r\n        value: function() {\r\n            this._renderDateTable();\r\n            this._renderAppointments()\r\n        }\r\n    }, {\r\n        key: \"_renderDateTable\",\r\n        value: function() {\r\n            this.workspace.renderRWorkspace(false)\r\n        }\r\n    }, {\r\n        key: \"_renderAppointments\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            var renderTimeout = this.getRenderTimeout();\r\n            if (renderTimeout >= 0) {\r\n                clearTimeout(this._renderAppointmentTimeout);\r\n                this._renderAppointmentTimeout = setTimeout(function() {\r\n                    return _this3.workspace.updateAppointments()\r\n                }, renderTimeout)\r\n            } else {\r\n                this.workspace.updateAppointments()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"workspace\",\r\n        get: function() {\r\n            return this._workspace\r\n        }\r\n    }]);\r\n    return Renderer\r\n}();\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}