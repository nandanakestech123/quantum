{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{Link}from\"react-router-dom\";import SimpleReactValidator from\"simple-react-validator\";import{NormalInput,NormalSelect,NormalButton,NormalDateTime,NormalMultiSelect,NormalTextarea}from\"component/common\";import{displayImg,dateFormat}from\"service/helperFunctions\";import{getJobtitle,getCommonApi,commonCreateApi,commonUpdateApi,commonDeleteApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{FormGroup,Label,Input}from\"reactstrap\";import{withTranslation}from\"react-i18next\";import{NavLink}from\"react-router-dom\";import{Address}from\"./address\";import{Details}from\"./details\";import{createWorkorderinvoice,updateWorkorderinvoice,deleteWorkorderinvoice}from\"redux/actions/workorderinvoice\";import{getTokenDetails}from\"redux/actions/auth\";import{history}from\"helpers\";import{PDFDownloadLink}from\"@react-pdf/renderer\";import Invoice from\"component/Admin/Report/Account/Invoice\";export var AddWorkOrderInvoiceClass=/*#__PURE__*/function(_Component){_inherits(AddWorkOrderInvoiceClass,_Component);var _super=_createSuper(AddWorkOrderInvoiceClass);function AddWorkOrderInvoiceClass(){var _this;_classCallCheck(this,AddWorkOrderInvoiceClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{fk_workorderinvoice:\"\",projectTitle:\"\",companyName:\"\",quoDate:new Date(),validity:\"\",attnTo:\"\",status:\"\",terms:\"\",preparedBy:\"\",remarks:\"\",footer:\"\"},fkProject:\"\",statusOption:[],countryOption:[],stateOption:[],cityOption:[],disableEdit:false,is_loading:true,isMounted:true,siteGstList:[],formFieldsBillingStored:[],formFieldsShippingStored:[],storedItemListStored:[],itemListBeforeEdit:[],formFieldsDetailsStored:{},active:false,currentValue:0,navLinks:[{to:_this.props.location.pathname,label:\"Details\",id:\"Details\"},{to:_this.props.location.pathname,label:\"Address\",id:\"Address\"}],selectedMenu:\"Details\",printData:{},isPrintPdfClick:false};_this.componentWillMount=function(){_this.getStatus();_this.getCountry();_this.getState();_this.getCity();_this.validator=new SimpleReactValidator({validators:{},element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});};_this.componentDidMount=function(){if(_this.props.location.state){console.log(\"this.props.location.state\",_this.props.location.state);_this.state.fkProject=_this.props.location.state.projectFk;_this.setState({fkProject:_this.state.fkProject});console.log(\"this.props.location.state.projectFk\",_this.props.location.state.projectFk);console.log(\"this.state.fkProject\",_this.state.fkProject);_this.autofillFromProject();}console.log(\"this.props\",_this.props);if(_this.props.match.params.id){_this.getAutofillItemDetails();_this.getPrintDataInfo();}};_this.getPrintDataInfo=function(){_this.props.getCommonApi(\"workorderinvoicepdf/?searchid=\".concat(_this.props.match.params.id)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var printData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"res in workorder printData\",res);printData=_this.state.printData;if(res.status==200){printData=res.data[0];_this.setState({printData:printData});}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(key){var _this$state,active,currentValue;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=_this.state,active=_this$state.active,currentValue=_this$state.currentValue;_context2.next=3;return _this.setState({selectedMenu:key.id});case 3:_this.setState({active:true,currentValue:key.key,selected:key.id});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleChange=function(_ref3){var _ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.updateState({formFields:formFields});};_this.handleDatePick=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,value){var formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// dateFormat(new Date())\nformFields=_this.state.formFields;formFields[name]=value;// formFields[name] = value;\n_context3.next=4;return _this.updateState({formFields:formFields});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}();_this.getSiteGst=function(){var siteGstList=_this.state.siteGstList;// statusOption = [];\nconsole.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"gstlist/?limit=100&searchsitecode=\".concat(_this.props.tokenDetail.site_code)).then(function(res){console.log(\"res.data getSiteGst\",res.data.dataList);siteGstList=res.data.dataList;_this.setState({siteGstList:siteGstList});});};_this.getStatus=function(){var statusOption=_this.state.statusOption;statusOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"dropdown\").then(function(res){console.log(\"res.data\",res);var _iterator=_createForOfIteratorHelper(res.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;statusOption.push({value:key.id,label:key.dropdown_item,code:key.dropdown_desc,active:key.active});}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(!_this.props.match.params.id){for(var i=0;i<statusOption.length;i++){if(statusOption[i].label==\"Void\"){statusOption.splice(i,1);}}}console.log(\"statusOption\",statusOption);_this.setState({statusOption:statusOption});if(_this.props.match.params.id){_this.autoFillForm();}if(_this.props.tokenDetail){_this.getSiteGst();}});};_this.getCountry=function(){var countryOption=_this.state.countryOption;countryOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"country\").then(function(res){console.log(\"res.data\",res);var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;countryOption.push({value:key.itm_id,label:key.itm_desc,code:key.itm_code,active:key.itm_isactive});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}console.log(\"countryOption\",countryOption);_this.setState({countryOption:countryOption});});};_this.getState=function(){var stateOption=_this.state.stateOption;stateOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"state\").then(function(res){console.log(\"res.data\",res);var _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;stateOption.push({value:key.itm_id,label:key.itm_desc,code:key.itm_code,active:key.itm_isactive});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}console.log(\"stateOption\",stateOption);_this.setState({stateOption:stateOption});});};_this.getCity=function(){var cityOption=_this.state.cityOption;cityOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"city\").then(function(res){console.log(\"res.data\",res);var _iterator4=_createForOfIteratorHelper(res.data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var key=_step4.value;cityOption.push({value:key.itm_id,label:key.itm_desc,code:key.itm_code,active:key.itm_isactive});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}console.log(\"cityOption\",cityOption);_this.setState({cityOption:cityOption});if(_this.props.match.params.id){_this.getAutofillAddress();}});};_this.getCity=function(){var cityOption=_this.state.cityOption;cityOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"city\").then(function(res){console.log(\"res.data\",res);var _iterator5=_createForOfIteratorHelper(res.data),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var key=_step5.value;cityOption.push({value:key.itm_id,label:key.itm_desc,code:key.itm_code,active:key.itm_isactive});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}console.log(\"cityOption\",cityOption);_this.setState({cityOption:cityOption});if(_this.props.match.params.id){_this.getAutofillAddress();}});};_this.autofillFromProject=function(){var fkProject=_this.state.fkProject;console.log(\"fkProject in autofill\",fkProject);console.log(\"this.props.tokenDetail\",_this.props.tokenDetail);_this.props.getCommonApi(\"projectlist/?searchid=\".concat(fkProject)).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(\"project dataList\",res.data.dataList);// custName = res.data.dataList[0].customer_name\n// this.state.projectList = res.data.dataList\n_this.state.formFields[\"projectTitle\"]=res.data.dataList[0].title;_this.state.formFields[\"companyName\"]=res.data.dataList[0].customer_name;_this.state.formFields[\"attnTo\"]=res.data.dataList[0].contact_person;_this.state.formFields[\"preparedBy\"]=_this.props.tokenDetail.username;_this.updateState(_this.state.formFields);console.log(\"this.state.formFields\",_this.state.formFields);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref5.apply(this,arguments);};}());};_this.getAutofillItemDetails=function(){_this.props.getCommonApi(\"workorderinvoicedetail/?searchqdetailid=\".concat(_this.props.match.params.id)).then(function(res){console.log(\"res in getAutofillItemDetails\",res);debugger;if(res.status==200){if(res.data[0].q_shipcost){_this.state.formFieldsDetailsStored.q_shipcost=res.data[0].q_shipcost;}else{_this.state.formFieldsDetailsStored.q_shipcost=0;}if(res.data[0].q_shipcost){_this.state.formFieldsDetailsStored.q_discount=res.data[0].q_discount;}else{_this.state.formFieldsDetailsStored.q_discount=0;}if(res.data[0].q_taxes){_this.state.formFieldsDetailsStored.q_taxes=res.data[0].q_taxes;}else{_this.state.formFieldsDetailsStored.q_taxes=0;}if(res.data[0].q_total){_this.state.formFieldsDetailsStored.q_total=res.data[0].q_total;}else{_this.state.formFieldsDetailsStored.q_total=0;}// this.state.formFieldsDetailsStored.push(\"q_shipcost\":res.data[0].q_shipcost)\n_this.setState(_this.state.formFieldsDetailsStored);console.log(\"this.state.formFieldsDetailsStored in getAutofillItemDetails\",_this.state.formFieldsDetailsStored);}});_this.props.getCommonApi(\"workorderinvoiceitem/?searchqitemid=\".concat(_this.props.match.params.id)).then(function(res){console.log(\"res in getAutofillItemDetails\",res);// this.state.storedItemListStored = res.data.dataList\nif(res.status==200){var _iterator6=_createForOfIteratorHelper(res.data.dataList),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var item=_step6.value;_this.state.storedItemListStored.push({item_code:item.quotation_itemcode,item_desc:item.quotation_itemdesc,item_remarks:item.quotation_itemremarks,item_price:item.quotation_unitprice,item_quantity:item.quotation_quantity,editing:false});_this.state.itemListBeforeEdit.push({item_id:item.id,item_code:item.quotation_itemcode});}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}_this.setState(_this.state.storedItemListStored);_this.setState(_this.state.itemListBeforeEdit);console.log(\"this.state.storedItemListStored in getAutofillItemDetails\",_this.state.storedItemListStored);console.log(\"this.state.storedItemListStored in itemListBeforeEdit\",_this.state.itemListBeforeEdit);}// this.state.formFieldsDetailsStored.q_shipcost = res.data[0].q_shipcost\n// this.state.formFieldsDetailsStored.q_discount = res.data[0].q_discount\n// this.state.formFieldsDetailsStored.q_taxes = res.data[0].q_taxes\n// this.state.formFieldsDetailsStored.q_total = res.data[0].q_total\n// this.setState(this.state.formFieldsDetailsStored)\n});};_this.getAutofillAddress=function(){_this.props.getCommonApi(\"workorderinvoiceaddr/?searchqaddrid=\".concat(_this.props.match.params.id)).then(function(res){console.log(\"res in autofillAddr\",res);if(res.status==200){_this.state.formFieldsBillingStored.to=res.data[0].billto;_this.state.formFieldsBillingStored.address1=res.data[0].bill_addr1;_this.state.formFieldsBillingStored.address2=res.data[0].bill_addr2;_this.state.formFieldsBillingStored.address3=res.data[0].bill_addr3;_this.state.formFieldsBillingStored.postalCode=res.data[0].bill_postalcode;if(res.data[0].bill_city){//matching status name with the id to set prefill status in dropdown\n_this.state.formFieldsBillingStored.city=_this.state.cityOption.find(function(option){return option.label===res.data[0].bill_city;}).value;}if(res.data[0].bill_state){//matching status name with the id to set prefill status in dropdown\n_this.state.formFieldsBillingStored.state=_this.state.stateOption.find(function(option){return option.label===res.data[0].bill_state;}).value;}if(res.data[0].bill_country){//matching status name with the id to set prefill status in dropdown\n_this.state.formFieldsBillingStored.country=_this.state.countryOption.find(function(option){return option.label===res.data[0].bill_country;}).value;}_this.state.formFieldsShippingStored.to=res.data[0].shipto;_this.state.formFieldsShippingStored.address1=res.data[0].ship_addr1;_this.state.formFieldsShippingStored.address2=res.data[0].ship_addr2;_this.state.formFieldsShippingStored.address3=res.data[0].ship_addr3;_this.state.formFieldsShippingStored.postalCode=res.data[0].ship_postalcode;if(res.data[0].ship_city){//matching status name with the id to set prefill status in dropdown\n_this.state.formFieldsShippingStored.city=_this.state.cityOption.find(function(option){return option.label===res.data[0].ship_city;}).value;}if(res.data[0].ship_state){//matching status name with the id to set prefill status in dropdown\n_this.state.formFieldsShippingStored.state=_this.state.stateOption.find(function(option){return option.label===res.data[0].ship_state;}).value;}if(res.data[0].ship_country){//matching status name with the id to set prefill status in dropdown\n_this.state.formFieldsShippingStored.country=_this.state.countryOption.find(function(option){return option.label===res.data[0].ship_country;}).value;}console.log(\"this.state.formFieldsBillingStored in autofillAddr\",_this.state.formFieldsBillingStored);console.log(\"this.state.formFieldsShippingStored in autofillAddr\",_this.state.formFieldsShippingStored);_this.setState(_this.state.formFieldsBillingStored);_this.setState(_this.state.formFieldsShippingStored);}});};_this.storeAddressFields=function(formFieldsBilling,formFieldsShipping){_this.state.formFieldsBillingStored=formFieldsBilling;_this.state.formFieldsShippingStored=formFieldsShipping;// this.state.formFieldsShippingStored = formFieldsShipping\n// this.setState(this.state.formFieldsBillingStored, this.state.formFieldsShippingStored)\nconsole.log(\"formFieldsBilling in addquo\",formFieldsBilling);console.log(\"formFieldsShipping in addquo\",formFieldsShipping);console.log(\"formFieldsBillingStored in addquotation\",_this.state.formFieldsBillingStored);console.log(\"formFieldsShippingStored in addquotation\",_this.state.formFieldsShippingStored);_this.setState(_this.state.formFieldsBillingStored);_this.setState(_this.state.formFieldsShippingStored);};_this.storeItemDetails=function(storedItemList,formFields){_this.state.storedItemListStored=storedItemList;_this.state.formFieldsDetailsStored=formFields;console.log(\"storedItemList in addquo\",storedItemList);console.log(\"formFields in addquo\",formFields);console.log(\"storedItemListStored in addquotation\",_this.state.storedItemListStored);console.log(\"formFieldsDetailsStored in addquotation\",_this.state.formFieldsDetailsStored);_this.setState(_this.state.storedItemListStored);_this.setState(_this.state.formFieldsDetailsStored);};_this.autoFillForm=function(){var _this$state2=_this.state,disableEdit=_this$state2.disableEdit,statusOption=_this$state2.statusOption;_this.props.getCommonApi(\"workorderinvoicelist/?searchid=\".concat(_this.props.match.params.id)).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(res){var i;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log(\"quo dataList\",res.data.dataList);// console.log(\"quo dataList cust name\", res.data.dataList[0].customer_name);\n// custName = res.data.dataList[0].customer_name\n// this.state.projectList = res.data.dataList\n_this.state.formFields[\"fk_workorderinvoice\"]=res.data.dataList[0].workorderinv_number;_this.state.formFields[\"projectTitle\"]=res.data.dataList[0].title;_this.state.formFields[\"companyName\"]=res.data.dataList[0].company;_this.state.formFields[\"quoDate\"]=res.data.dataList[0].created_at;_this.state.formFields[\"validity\"]=res.data.dataList[0].validity;_this.state.formFields[\"attnTo\"]=res.data.dataList[0].contact_person;console.log(\"statusOption in prefill\",_this.state.statusOption);console.log(\"res.data.dataList[0].status\",res.data.dataList[0].status);console.log();// if status empty prevent err\nif(res.data.dataList[0].status){//matching status name with the id to set prefill status in dropdown\n_this.state.formFields[\"status\"]=_this.state.statusOption.find(function(option){return option.label===res.data.dataList[0].status;}).value;console.log(\"res.data.dataList[0].status\",res.data.dataList[0].status);if(res.data.dataList[0].status==\"Posted\"){disableEdit=true;for(i=0;i<statusOption.length;i++){if(statusOption[i].label==\"Posted\"){statusOption=statusOption.filter(function(e){return e.label!==\"Open\";});}}console.log(\"statusOption when status is posted\",statusOption);_this.setState({disableEdit:disableEdit,statusOption:statusOption});console.log(\"this.state.disableEdit\",disableEdit);}}_this.state.formFields[\"terms\"]=res.data.dataList[0].terms;_this.state.formFields[\"preparedBy\"]=res.data.dataList[0].in_charge;_this.state.formFields[\"remarks\"]=res.data.dataList[0].remarks;_this.state.formFields[\"footer\"]=res.data.dataList[0].footer;_this.updateState(_this.state.formFields);console.log(\"this.state.formFields\",_this.state.formFields);case 17:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x6){return _ref6.apply(this,arguments);};}());};_this.handleItemDetailsSubmit=function(resQuo){var _this$state3=_this.state,storedItemListStored=_this$state3.storedItemListStored,formFieldsDetailsStored=_this$state3.formFieldsDetailsStored,itemListBeforeEdit=_this$state3.itemListBeforeEdit;var formDataDetails=new FormData();formDataDetails.append(\"q_shipcost\",formFieldsDetailsStored.q_shipcost?formFieldsDetailsStored.q_shipcost:0);formDataDetails.append(\"q_discount\",formFieldsDetailsStored.q_discount?formFieldsDetailsStored.q_discount:0);formDataDetails.append(\"q_taxes\",formFieldsDetailsStored.q_taxes?formFieldsDetailsStored.q_taxes:0);formDataDetails.append(\"q_total\",formFieldsDetailsStored.q_total?formFieldsDetailsStored.q_total:0);_this.props.getCommonApi(\"workorderinvoicedetail/?searchqdetailid=\".concat(resQuo.data.id)).then(function(resGetDetails){if(resGetDetails.status==200){console.log(\"resGetDetails\",resGetDetails);_this.props.commonUpdateApi(\"workorderinvoicedetail/\".concat(resGetDetails.data[0].id,\"/\"),formDataDetails).then(function(resUpdateDetails){console.log(\"resUpdateDetails\",resUpdateDetails);history.push(\"/admin/quantum\");});}else if(resGetDetails.status==204){formDataDetails.append(\"fk_workorderinvoice\",resQuo.data.id);_this.props.commonCreateApi(\"workorderinvoicedetail/\",formDataDetails).then(function(resCreateDetails){console.log(\"resCreateDetails\",resCreateDetails);history.push(\"/admin/quantum\");});}});var _iterator7=_createForOfIteratorHelper(itemListBeforeEdit),_step7;try{var _loop=function _loop(){var item=_step7.value;var found=storedItemListStored.some(function(el){return el.item_code===item.item_code;});if(!found){_this.props.commonDeleteApi(\"workorderinvoiceitem/\".concat(item.item_id,\"/\")).then(function(res){});}};for(_iterator7.s();!(_step7=_iterator7.n()).done;){_loop();}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}var _iterator8=_createForOfIteratorHelper(storedItemListStored),_step8;try{var _loop2=function _loop2(){var item=_step8.value;var formDataItem=new FormData();formDataItem.append(\"quotation_itemcode\",item.item_code);formDataItem.append(\"quotation_itemdesc\",item.item_desc);formDataItem.append(\"quotation_itemremarks\",item.item_remarks);formDataItem.append(\"quotation_unitprice\",item.item_price);formDataItem.append(\"quotation_quantity\",item.item_quantity);_this.props.getCommonApi(\"workorderinvoiceitem/?searchqitemid=\".concat(resQuo.data.id,\"&searchqitemcode=\").concat(item.item_code)).then(function(resGetItem){if(resGetItem.status==200){console.log(\"resGetItem\",resGetItem);_this.props.commonUpdateApi(\"workorderinvoiceitem/\".concat(resGetItem.data.dataList[0].id,\"/\"),formDataItem).then(function(resUpdateItem){console.log(\"resUpdateItem\",resUpdateItem);});}else if(resGetItem.status==204){formDataItem.append(\"fk_workorderinvoice\",resQuo.data.id);_this.props.commonCreateApi(\"workorderinvoiceitem/\",formDataItem).then(function(resCreateItem){console.log(\"resCreateItem\",resCreateItem);});}});};for(_iterator8.s();!(_step8=_iterator8.n()).done;){_loop2();}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}};_this.handleAddressSubmit=function(resQuo){var _this$state4=_this.state,cityOption=_this$state4.cityOption,countryOption=_this$state4.countryOption,stateOption=_this$state4.stateOption;//submit address\nvar formDataAddress=new FormData();console.log(\"this.state.formFieldsBillingStored in handleAddressSubmit\",_this.state.formFieldsBillingStored);console.log(\"this.state.formFieldsBillingStored.to\",_this.state.formFieldsBillingStored.to);console.log(\"this.state.formFieldsBillingStored.address1\",_this.state.formFieldsBillingStored.address1);formDataAddress.append(\"billto\",_this.state.formFieldsBillingStored.to?_this.state.formFieldsBillingStored.to:\"\");formDataAddress.append(\"bill_addr1\",_this.state.formFieldsBillingStored.address1?_this.state.formFieldsBillingStored.address1:\"\");formDataAddress.append(\"bill_addr2\",_this.state.formFieldsBillingStored.address2?_this.state.formFieldsBillingStored.address2:\"\");formDataAddress.append(\"bill_addr3\",_this.state.formFieldsBillingStored.address3?_this.state.formFieldsBillingStored.address3:\"\");formDataAddress.append(\"bill_postalcode\",_this.state.formFieldsBillingStored.postalCode?_this.state.formFieldsBillingStored.postalCode:\"\");// console.log(\"cityOption.find(option => option.value === this.formFieldsBillingStored.city).label\",cityOption.find(option => option.value === parseInt(this.state.formFieldsBillingStored.city)).label)\nformDataAddress.append(\"bill_city\",_this.state.formFieldsBillingStored.city?cityOption.find(function(option){return option.value===parseInt(_this.state.formFieldsBillingStored.city);}).label:\"\");formDataAddress.append(\"bill_state\",_this.state.formFieldsBillingStored.state?stateOption.find(function(option){return option.value===parseInt(_this.state.formFieldsBillingStored.state);}).label:\"\");formDataAddress.append(\"bill_country\",_this.state.formFieldsBillingStored.country?countryOption.find(function(option){return option.value===parseInt(_this.state.formFieldsBillingStored.country);}).label:\"\");// console.log(\"countryOption.find(option => option.value === parseInt(this.state.formFieldsBillingStored.country)).label\",countryOption.find(option => option.value === parseInt(this.state.formFieldsBillingStored.country)).label)\nformDataAddress.append(\"shipto\",_this.state.formFieldsShippingStored.to?_this.state.formFieldsShippingStored.to:\"\");formDataAddress.append(\"ship_addr1\",_this.state.formFieldsShippingStored.address1?_this.state.formFieldsShippingStored.address1:\"\");formDataAddress.append(\"ship_addr2\",_this.state.formFieldsShippingStored.address2?_this.state.formFieldsShippingStored.address2:\"\");formDataAddress.append(\"ship_addr3\",_this.state.formFieldsShippingStored.address3?_this.state.formFieldsShippingStored.address3:\"\");formDataAddress.append(\"ship_postalcode\",_this.state.formFieldsShippingStored.postalCode?_this.state.formFieldsShippingStored.postalCode:\"\");formDataAddress.append(\"ship_city\",_this.state.formFieldsShippingStored.city?cityOption.find(function(option){return option.value===parseInt(_this.state.formFieldsShippingStored.city);}).label:\"\");formDataAddress.append(\"ship_state\",_this.state.formFieldsShippingStored.state?stateOption.find(function(option){return option.value===parseInt(_this.state.formFieldsShippingStored.state);}).label:\"\");formDataAddress.append(\"ship_country\",_this.state.formFieldsShippingStored.country?countryOption.find(function(option){return option.value===parseInt(_this.state.formFieldsShippingStored.country);}).label:\"\");_this.props.getCommonApi(\"workorderinvoiceaddr/?searchqaddrid=\".concat(resQuo.data.id)).then(function(resGetAddr){if(resGetAddr.status==200){console.log(\"resGetAddr\",resGetAddr);_this.props.commonUpdateApi(\"workorderinvoiceaddr/\".concat(resGetAddr.data[0].id,\"/\"),formDataAddress).then(function(resUpdateAddr){console.log(\"resCreateAddr\",resUpdateAddr);});}else if(resGetAddr.status==204){formDataAddress.append(\"fk_workorderinvoice\",resQuo.data.id);_this.props.commonCreateApi(\"workorderinvoiceaddr/\",formDataAddress).then(function(resCreateAddr){console.log(\"resCreateAddr\",resCreateAddr);});}});};_this.handleSubmit=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(status){var _this$state5,formFields,statusOption,statusValue,_iterator9,_step9,key,formData,resQuo;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:debugger;_context6.prev=1;if(!_this.validator.allValid()){_context6.next=59;break;}_this$state5=_this.state,formFields=_this$state5.formFields,statusOption=_this$state5.statusOption;statusValue=\"\";console.log(\"formFields.status\",formFields.status);_iterator9=_createForOfIteratorHelper(statusOption);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){key=_step9.value;// console.log(key.value)\nif(key.value==formFields.status){statusValue=key.label;}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}console.log(\"statusValue\",statusValue);formData=new FormData();formData.append(\"workorderinv_number\",formFields.fk_workorderinvoice);formData.append(\"title\",formFields.projectTitle);formData.append(\"company\",formFields.companyName);formData.append(\"created_at\",dateFormat(formFields.quoDate)+\" 00:00:00\");// formData.append(\"created_at\", dateFormat(formFields.quoDate) + \" \"+formFields.quoDate.getHours() + \":\" + formFields.quoDate.getMinutes() + \":\" + formFields.quoDate.getSeconds());\nformData.append(\"validity\",formFields.validity);formData.append(\"contact_person\",formFields.attnTo);//check save or post\nif(status){formData.append(\"status\",\"Posted\");}else{formData.append(\"status\",statusValue);}formData.append(\"terms\",formFields.terms);formData.append(\"in_charge\",formFields.preparedBy);formData.append(\"remarks\",formFields.remarks);formData.append(\"footer\",formFields.footer);formData.append(\"username\",_this.props.tokenDetail.username);if(_this.state.fkProject){formData.append(\"fk_project\",_this.state.fkProject);}console.log(\"this.state.fkProject in updating\",_this.state.fkProject);console.log(\"formData\",formData);console.log(\"this.props.match.params.id\",_this.props.match.params.id);if(!_this.props.match.params.id){_context6.next=43;break;}console.log(\"in if loop\");console.log(\"this.props.match.params.id\",_this.props.match.params.id);_context6.next=31;return _this.props.commonUpdateApi(\"workorderinvoicelist/\".concat(_this.props.match.params.id,\"/\"),formData);case 31:resQuo=_context6.sent;console.log(resQuo,\"resquo\");_context6.next=35;return _this.handleAddressSubmit(resQuo);case 35:_context6.next=37;return _this.handleItemDetailsSubmit(resQuo);case 37:if(!(statusValue==\"Void\")){_context6.next=41;break;}console.log(\"if void loop\");_context6.next=41;return _this.props.deleteWorkorderinvoice(\"\".concat(_this.props.match.params.id,\"/\"));case 41:_context6.next=57;break;case 43:console.log(\"pass if loop\");console.log(\"this.props.location.state\",_this.props.location.state);// if (this.props.location.state){\n//   console.log(\"this.props.location.state.projectFk\",this.props.location.state.projectFk)\n//   formData.append(\"fk_project\", this.props.location.state.projectFk);\n// }\nconsole.log(\"pass if ?\");console.log(\"this.state.fkProject before createPO\",_this.state.fkProject);console.log(\"this.state.fkProject\",_this.state.fkProject);_context6.next=50;return _this.props.createWorkorderinvoice(formData);case 50:resQuo=_context6.sent;console.log(\"resQuo in createQuotation\",resQuo);console.log(\"resQuo.data.id\",resQuo.data.id);_context6.next=55;return _this.handleAddressSubmit(resQuo);case 55:_context6.next=57;return _this.handleItemDetailsSubmit(resQuo);case 57:_context6.next=60;break;case 59:_this.validator.showMessages();case 60:_context6.next=65;break;case 62:_context6.prev=62;_context6.t0=_context6[\"catch\"](1);_this.updateState({is_loading:false});case 65:case\"end\":return _context6.stop();}}},_callee6,null,[[1,62]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();_this.handlePrintPdfFormat=function(url){_this.setState({isPrintPdfClick:false});var a=document.createElement(\"a\");a.setAttribute(\"download\",\"\".concat(new Date(),\".pdf\"));a.setAttribute(\"href\",url);a.click();window.open(url);};return _this;}_createClass(AddWorkOrderInvoiceClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state6=this.state,formFields=_this$state6.formFields,statusOption=_this$state6.statusOption,currentValue=_this$state6.currentValue,navLinks=_this$state6.navLinks,disableEdit=_this$state6.disableEdit,printData=_this$state6.printData,isPrintPdfClick=_this$state6.isPrintPdfClick;var fk_workorderinvoice=formFields.fk_workorderinvoice,projectTitle=formFields.projectTitle,companyName=formFields.companyName,quoDate=formFields.quoDate,validity=formFields.validity,attnTo=formFields.attnTo,status=formFields.status,terms=formFields.terms,preparedBy=formFields.preparedBy,remarks=formFields.remarks,footer=formFields.footer;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"px-5 container create-quotation\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\",onClick:function onClick(){if(window.confirm(\"Are you sure you want to leave this page and discard changes?\"))history.push(\"/admin/quantum\");}},t(\"Work Order Invoice\")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},t(\"\".concat(this.props.match.params.id?\"Edit\":\"New\",\" Work order invoice\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"quotation-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Invoice No\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{disabled:true,placeholder:\"Auto generated\",value:fk_workorderinvoice,name:\"fk_workorderinvoice\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Project\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{disabled:disableEdit,placeholder:\"Enter here\",value:projectTitle,name:\"projectTitle\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",null,this.validator.message(t(\"Project\"),projectTitle,t(\"required\"))),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Company Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{disabled:disableEdit,placeholder:\"Enter here\",value:companyName,name:\"companyName\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",null,this.validator.message(t(\"Company Name\"),companyName,t(\"required\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Invoice Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:quoDate?new Date(quoDate):new Date(),name:\"quoDate\"//className=\"dob-pick\"\n,showYearDropdown:true,dateFormat:\"dd/MM/yyyy\"// maxDate={new Date(toDate)}\n,showDisabledMonthNavigation:true})),/*#__PURE__*/React.createElement(\"div\",null,this.validator.message(t(\"Invoice Date\"),quoDate,t(\"required\"))),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Validity\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:disableEdit,value:validity,name:\"validity\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",null,this.validator.message(t(\"Validity\"),validity,t(\"required\"))),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Attn To\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:disableEdit,value:attnTo,name:\"attnTo\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",null,this.validator.message(t(\"Attn To\"),attnTo,t(\"required\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Status\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalSelect,{options:statusOption,value:status,name:\"status\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",null,this.validator.message(t(\"Status\"),status,t(\"required\"))),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Terms\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:disableEdit,value:terms,name:\"terms\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",null,this.validator.message(t(\"Terms\"),terms,t(\"required\"))),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Prepared By\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:disableEdit,value:preparedBy,name:\"preparedBy\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",null,this.validator.message(t(\"Prepared By\"),preparedBy,t(\"required\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Remarks\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-desc\"},/*#__PURE__*/React.createElement(NormalTextarea,{placeholder:\"Enter here\",disabled:disableEdit,value:remarks,name:\"remarks\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Footer\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-desc\"},/*#__PURE__*/React.createElement(NormalTextarea,{placeholder:\"Enter here\",disabled:disableEdit,value:footer,name:\"footer\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 quotation-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tab-menus\"},/*#__PURE__*/React.createElement(\"ul\",null,navLinks.map(function(_ref8,index){var to=_ref8.to,label=_ref8.label,id=_ref8.id;return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(NavLink,{to:to,className:\"nav-link\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar-menu \".concat(currentValue===index?\"active\":\"\"),onClick:function onClick(){return _this2.handleClick({key:index,id:id});}},/*#__PURE__*/React.createElement(\"span\",{className:\"sidebar-menu-desc\"},t(label)))));}))),this.state.selectedMenu===\"Details\"&&/*#__PURE__*/React.createElement(Details,{disableEdit:disableEdit,quoId:this.props.match.params.id,siteGstList:this.state.siteGstList,validator:this.validator,storeItemDetails:this.storeItemDetails.bind(this),storedItemListStored:this.state.storedItemListStored,formFieldsDetailsStored:this.state.formFieldsDetailsStored,id:this.state.selectedMenu// search={formFields.search}\n,api:\"details\"}),this.state.selectedMenu===\"Address\"&&/*#__PURE__*/React.createElement(Address,{disableEdit:disableEdit,storeAddressFields:this.storeAddressFields.bind(this),formFieldsBillingStored:this.state.formFieldsBillingStored,formFieldsShippingStored:this.state.formFieldsShippingStored,id:this.state.selectedMenu// search={formFields.search}\n,api:\"address\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",mainbg:true,className:\"confirm\",label:\"Cancel\",outline:false,onClick:function onClick(){if(window.confirm(\"Are you sure you want to leave this page and discard changes?\"))history.push(\"/admin/quantum\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"confirm\",label:\"Save\",onClick:function onClick(){return _this2.handleSubmit();}})),this.props.match.params.id&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"print\",mainbg:true,className:\"col-12 fs-15 \",label:\"Print\"// outline={false}\n,onClick:function onClick(){_this2.setState({isPrintPdfClick:true});}}),isPrintPdfClick?/*#__PURE__*/React.createElement(PDFDownloadLink,{document:/*#__PURE__*/React.createElement(Invoice,{TableList:printData,accountHeader:printData[\"company_header\"],Flag:8,landscape:false})},function(_ref9){var blob=_ref9.blob,url=_ref9.url,loading=_ref9.loading,error=_ref9.error;return!loading&&url?_this2.handlePrintPdfFormat(url):null;}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",mainbg:true,className:\"confirm\",label:\"Post\",outline:false,onClick:function onClick(){return _this2.handleSubmit(status);}})),disableEdit==true?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"confirm\",label:\"Convert to PO\",onClick:function onClick(){return _this2.props.history.push({pathname:\"/admin/quantum/po/add\",state:{quoId:_this2.props.match.params.id,projectFk:_this2.state.fkProject}});}})):null))));}}]);return AddWorkOrderInvoiceClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{tokenDetail:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonUpdateApi:commonUpdateApi,createWorkorderinvoice:createWorkorderinvoice,updateWorkorderinvoice:updateWorkorderinvoice,deleteWorkorderinvoice:deleteWorkorderinvoice,commonDeleteApi:commonDeleteApi,getTokenDetails:getTokenDetails},dispatch);};export var AddWorkOrderInvoice=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(AddWorkOrderInvoiceClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Quantum/WorkOrderInvoice/AddWorkOrderInvoice/index.js"],"names":["React","Component","Link","SimpleReactValidator","NormalInput","NormalSelect","NormalButton","NormalDateTime","NormalMultiSelect","NormalTextarea","displayImg","dateFormat","getJobtitle","getCommonApi","commonCreateApi","commonUpdateApi","commonDeleteApi","connect","bindActionCreators","FormGroup","Label","Input","withTranslation","NavLink","Address","Details","createWorkorderinvoice","updateWorkorderinvoice","deleteWorkorderinvoice","getTokenDetails","history","PDFDownloadLink","Invoice","AddWorkOrderInvoiceClass","state","formFields","fk_workorderinvoice","projectTitle","companyName","quoDate","Date","validity","attnTo","status","terms","preparedBy","remarks","footer","fkProject","statusOption","countryOption","stateOption","cityOption","disableEdit","is_loading","isMounted","siteGstList","formFieldsBillingStored","formFieldsShippingStored","storedItemListStored","itemListBeforeEdit","formFieldsDetailsStored","active","currentValue","navLinks","to","props","location","pathname","label","id","selectedMenu","printData","isPrintPdfClick","componentWillMount","getStatus","getCountry","getState","getCity","validator","validators","element","message","autoForceUpdate","componentDidMount","console","log","projectFk","setState","autofillFromProject","match","params","getAutofillItemDetails","getPrintDataInfo","then","res","data","updateState","handleClick","key","selected","handleChange","target","value","name","Object","assign","handleDatePick","getSiteGst","tokenDetail","site_code","dataList","push","dropdown_item","code","dropdown_desc","i","length","splice","autoFillForm","itm_id","itm_desc","itm_code","itm_isactive","getAutofillAddress","title","customer_name","contact_person","username","q_shipcost","q_discount","q_taxes","q_total","item","item_code","quotation_itemcode","item_desc","quotation_itemdesc","item_remarks","quotation_itemremarks","item_price","quotation_unitprice","item_quantity","quotation_quantity","editing","item_id","billto","address1","bill_addr1","address2","bill_addr2","address3","bill_addr3","postalCode","bill_postalcode","bill_city","city","find","option","bill_state","bill_country","country","shipto","ship_addr1","ship_addr2","ship_addr3","ship_postalcode","ship_city","ship_state","ship_country","storeAddressFields","formFieldsBilling","formFieldsShipping","storeItemDetails","storedItemList","workorderinv_number","company","created_at","filter","e","in_charge","handleItemDetailsSubmit","resQuo","formDataDetails","FormData","append","resGetDetails","resUpdateDetails","resCreateDetails","found","some","el","formDataItem","resGetItem","resUpdateItem","resCreateItem","handleAddressSubmit","formDataAddress","parseInt","resGetAddr","resUpdateAddr","resCreateAddr","handleSubmit","allValid","statusValue","formData","showMessages","handlePrintPdfFormat","url","a","document","createElement","setAttribute","click","window","open","t","confirm","map","index","bind","blob","loading","error","quoId","mapStateToProps","authStore","tokenDetails","mapDispatchToProps","dispatch","AddWorkOrderInvoice"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport {\r\n  NormalInput,\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalDateTime,\r\n  NormalMultiSelect,\r\n  NormalTextarea,\r\n} from \"component/common\";\r\nimport { displayImg, dateFormat } from \"service/helperFunctions\";\r\nimport {\r\n  getJobtitle,\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonUpdateApi,\r\n  commonDeleteApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { FormGroup, Label, Input } from \"reactstrap\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Address } from \"./address\";\r\nimport { Details } from \"./details\";\r\nimport {\r\n  createWorkorderinvoice,\r\n  updateWorkorderinvoice,\r\n  deleteWorkorderinvoice,\r\n} from \"redux/actions/workorderinvoice\";\r\nimport { getTokenDetails } from \"redux/actions/auth\";\r\nimport { history } from \"helpers\";\r\nimport { PDFDownloadLink } from \"@react-pdf/renderer\";\r\nimport Invoice from \"component/Admin/Report/Account/Invoice\";\r\n\r\nexport class AddWorkOrderInvoiceClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      fk_workorderinvoice: \"\",\r\n      projectTitle: \"\",\r\n      companyName: \"\",\r\n      quoDate: new Date(),\r\n      validity: \"\",\r\n      attnTo: \"\",\r\n      status: \"\",\r\n      terms: \"\",\r\n      preparedBy: \"\",\r\n      remarks: \"\",\r\n      footer: \"\",\r\n    },\r\n    fkProject: \"\",\r\n    statusOption: [],\r\n    countryOption: [],\r\n    stateOption: [],\r\n    cityOption: [],\r\n\r\n    disableEdit: false,\r\n    is_loading: true,\r\n    isMounted: true,\r\n\r\n    siteGstList: [],\r\n\r\n    formFieldsBillingStored: [],\r\n    formFieldsShippingStored: [],\r\n    storedItemListStored: [],\r\n    itemListBeforeEdit: [],\r\n    formFieldsDetailsStored: {},\r\n\r\n    active: false,\r\n    currentValue: 0,\r\n    navLinks: [\r\n      { to: this.props.location.pathname, label: \"Details\", id: \"Details\" },\r\n      { to: this.props.location.pathname, label: \"Address\", id: \"Address\" },\r\n    ],\r\n    selectedMenu: \"Details\",\r\n    printData: {},\r\n    isPrintPdfClick: false,\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.getStatus();\r\n    this.getCountry();\r\n    this.getState();\r\n    this.getCity();\r\n    this.validator = new SimpleReactValidator({\r\n      validators: {},\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    if (this.props.location.state) {\r\n      console.log(\"this.props.location.state\", this.props.location.state);\r\n      this.state.fkProject = this.props.location.state.projectFk;\r\n      this.setState({ fkProject: this.state.fkProject });\r\n      console.log(\r\n        \"this.props.location.state.projectFk\",\r\n        this.props.location.state.projectFk\r\n      );\r\n      console.log(\"this.state.fkProject\", this.state.fkProject);\r\n      this.autofillFromProject();\r\n    }\r\n\r\n    console.log(\"this.props\", this.props);\r\n    if (this.props.match.params.id) {\r\n      this.getAutofillItemDetails();\r\n      this.getPrintDataInfo();\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  getPrintDataInfo = () => {\r\n    this.props\r\n      .getCommonApi(\r\n        `workorderinvoicepdf/?searchid=${this.props.match.params.id}`\r\n      )\r\n      .then(async res => {\r\n        console.log(\"res in workorder printData\", res);\r\n        let { printData } = this.state;\r\n        if (res.status == 200) {\r\n          printData = res.data[0];\r\n          this.setState({\r\n            printData,\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  handleClick = async key => {\r\n    let { active, currentValue } = this.state;\r\n    await this.setState({\r\n      selectedMenu: key.id,\r\n    });\r\n    this.setState({\r\n      active: true,\r\n      currentValue: key.key,\r\n      selected: key.id,\r\n    });\r\n  };\r\n\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.updateState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleDatePick = async (name, value) => {\r\n    // dateFormat(new Date())\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    // formFields[name] = value;\r\n    await this.updateState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  getSiteGst = () => {\r\n    let { siteGstList } = this.state;\r\n    // statusOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props\r\n      .getCommonApi(\r\n        `gstlist/?limit=100&searchsitecode=${this.props.tokenDetail.site_code}`\r\n      )\r\n      .then(res => {\r\n        console.log(\"res.data getSiteGst\", res.data.dataList);\r\n        siteGstList = res.data.dataList;\r\n        this.setState({ siteGstList });\r\n      });\r\n  };\r\n\r\n  getStatus = () => {\r\n    let { statusOption } = this.state;\r\n    statusOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props.getCommonApi(`dropdown`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        statusOption.push({\r\n          value: key.id,\r\n          label: key.dropdown_item,\r\n          code: key.dropdown_desc,\r\n          active: key.active,\r\n        });\r\n      }\r\n      if (!this.props.match.params.id) {\r\n        for (var i = 0; i < statusOption.length; i++) {\r\n          if (statusOption[i].label == \"Void\") {\r\n            statusOption.splice(i, 1);\r\n          }\r\n        }\r\n      }\r\n      console.log(\"statusOption\", statusOption);\r\n      this.setState({ statusOption });\r\n      if (this.props.match.params.id) {\r\n        this.autoFillForm();\r\n      }\r\n      if (this.props.tokenDetail) {\r\n        this.getSiteGst();\r\n      }\r\n    });\r\n  };\r\n\r\n  getCountry = () => {\r\n    let { countryOption } = this.state;\r\n    countryOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props.getCommonApi(`country`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        countryOption.push({\r\n          value: key.itm_id,\r\n          label: key.itm_desc,\r\n          code: key.itm_code,\r\n          active: key.itm_isactive,\r\n        });\r\n      }\r\n      console.log(\"countryOption\", countryOption);\r\n      this.setState({ countryOption });\r\n    });\r\n  };\r\n\r\n  getState = () => {\r\n    let { stateOption } = this.state;\r\n    stateOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props.getCommonApi(`state`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        stateOption.push({\r\n          value: key.itm_id,\r\n          label: key.itm_desc,\r\n          code: key.itm_code,\r\n          active: key.itm_isactive,\r\n        });\r\n      }\r\n      console.log(\"stateOption\", stateOption);\r\n      this.setState({ stateOption });\r\n    });\r\n  };\r\n\r\n  getCity = () => {\r\n    let { cityOption } = this.state;\r\n    cityOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props.getCommonApi(`city`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        cityOption.push({\r\n          value: key.itm_id,\r\n          label: key.itm_desc,\r\n          code: key.itm_code,\r\n          active: key.itm_isactive,\r\n        });\r\n      }\r\n      console.log(\"cityOption\", cityOption);\r\n      this.setState({ cityOption });\r\n      if (this.props.match.params.id) {\r\n        this.getAutofillAddress();\r\n      }\r\n    });\r\n  };\r\n\r\n  getCity = () => {\r\n    let { cityOption } = this.state;\r\n    cityOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props.getCommonApi(`city`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        cityOption.push({\r\n          value: key.itm_id,\r\n          label: key.itm_desc,\r\n          code: key.itm_code,\r\n          active: key.itm_isactive,\r\n        });\r\n      }\r\n      console.log(\"cityOption\", cityOption);\r\n      this.setState({ cityOption });\r\n      if (this.props.match.params.id) {\r\n        this.getAutofillAddress();\r\n      }\r\n    });\r\n  };\r\n\r\n  autofillFromProject = () => {\r\n    let { fkProject } = this.state;\r\n    console.log(\"fkProject in autofill\", fkProject);\r\n    console.log(\"this.props.tokenDetail\", this.props.tokenDetail);\r\n    this.props\r\n      .getCommonApi(`projectlist/?searchid=${fkProject}`)\r\n      .then(async res => {\r\n        console.log(\"project dataList\", res.data.dataList);\r\n        // custName = res.data.dataList[0].customer_name\r\n        // this.state.projectList = res.data.dataList\r\n        this.state.formFields[\"projectTitle\"] = res.data.dataList[0].title;\r\n        this.state.formFields[\"companyName\"] =\r\n          res.data.dataList[0].customer_name;\r\n        this.state.formFields[\"attnTo\"] = res.data.dataList[0].contact_person;\r\n        this.state.formFields[\"preparedBy\"] = this.props.tokenDetail.username;\r\n        this.updateState(this.state.formFields);\r\n        console.log(\"this.state.formFields\", this.state.formFields);\r\n      });\r\n  };\r\n\r\n  getAutofillItemDetails = () => {\r\n    this.props\r\n      .getCommonApi(\r\n        `workorderinvoicedetail/?searchqdetailid=${this.props.match.params.id}`\r\n      )\r\n      .then(res => {\r\n        console.log(\"res in getAutofillItemDetails\", res);\r\n        debugger;\r\n        if (res.status == 200) {\r\n          if (res.data[0].q_shipcost) {\r\n            this.state.formFieldsDetailsStored.q_shipcost =\r\n              res.data[0].q_shipcost;\r\n          } else {\r\n            this.state.formFieldsDetailsStored.q_shipcost = 0;\r\n          }\r\n          if (res.data[0].q_shipcost) {\r\n            this.state.formFieldsDetailsStored.q_discount =\r\n              res.data[0].q_discount;\r\n          } else {\r\n            this.state.formFieldsDetailsStored.q_discount = 0;\r\n          }\r\n          if (res.data[0].q_taxes) {\r\n            this.state.formFieldsDetailsStored.q_taxes = res.data[0].q_taxes;\r\n          } else {\r\n            this.state.formFieldsDetailsStored.q_taxes = 0;\r\n          }\r\n\r\n          if (res.data[0].q_total) {\r\n            this.state.formFieldsDetailsStored.q_total = res.data[0].q_total;\r\n          } else {\r\n            this.state.formFieldsDetailsStored.q_total = 0;\r\n          }\r\n          // this.state.formFieldsDetailsStored.push(\"q_shipcost\":res.data[0].q_shipcost)\r\n          this.setState(this.state.formFieldsDetailsStored);\r\n          console.log(\r\n            \"this.state.formFieldsDetailsStored in getAutofillItemDetails\",\r\n            this.state.formFieldsDetailsStored\r\n          );\r\n        }\r\n      });\r\n\r\n    this.props\r\n      .getCommonApi(\r\n        `workorderinvoiceitem/?searchqitemid=${this.props.match.params.id}`\r\n      )\r\n      .then(res => {\r\n        console.log(\"res in getAutofillItemDetails\", res);\r\n        // this.state.storedItemListStored = res.data.dataList\r\n        if (res.status == 200) {\r\n          for (let item of res.data.dataList) {\r\n            this.state.storedItemListStored.push({\r\n              item_code: item.quotation_itemcode,\r\n              item_desc: item.quotation_itemdesc,\r\n              item_remarks: item.quotation_itemremarks,\r\n              item_price: item.quotation_unitprice,\r\n              item_quantity: item.quotation_quantity,\r\n              editing: false,\r\n            });\r\n            this.state.itemListBeforeEdit.push({\r\n              item_id: item.id,\r\n              item_code: item.quotation_itemcode,\r\n            });\r\n          }\r\n          this.setState(this.state.storedItemListStored);\r\n          this.setState(this.state.itemListBeforeEdit);\r\n          console.log(\r\n            \"this.state.storedItemListStored in getAutofillItemDetails\",\r\n            this.state.storedItemListStored\r\n          );\r\n          console.log(\r\n            \"this.state.storedItemListStored in itemListBeforeEdit\",\r\n            this.state.itemListBeforeEdit\r\n          );\r\n        }\r\n        // this.state.formFieldsDetailsStored.q_shipcost = res.data[0].q_shipcost\r\n        // this.state.formFieldsDetailsStored.q_discount = res.data[0].q_discount\r\n        // this.state.formFieldsDetailsStored.q_taxes = res.data[0].q_taxes\r\n        // this.state.formFieldsDetailsStored.q_total = res.data[0].q_total\r\n        // this.setState(this.state.formFieldsDetailsStored)\r\n      });\r\n  };\r\n\r\n  getAutofillAddress = () => {\r\n    this.props\r\n      .getCommonApi(\r\n        `workorderinvoiceaddr/?searchqaddrid=${this.props.match.params.id}`\r\n      )\r\n      .then(res => {\r\n        console.log(\"res in autofillAddr\", res);\r\n        if (res.status == 200) {\r\n          this.state.formFieldsBillingStored.to = res.data[0].billto;\r\n          this.state.formFieldsBillingStored.address1 = res.data[0].bill_addr1;\r\n          this.state.formFieldsBillingStored.address2 = res.data[0].bill_addr2;\r\n          this.state.formFieldsBillingStored.address3 = res.data[0].bill_addr3;\r\n          this.state.formFieldsBillingStored.postalCode =\r\n            res.data[0].bill_postalcode;\r\n          if (res.data[0].bill_city) {\r\n            //matching status name with the id to set prefill status in dropdown\r\n            this.state.formFieldsBillingStored.city =\r\n              this.state.cityOption.find(\r\n                option => option.label === res.data[0].bill_city\r\n              ).value;\r\n          }\r\n          if (res.data[0].bill_state) {\r\n            //matching status name with the id to set prefill status in dropdown\r\n            this.state.formFieldsBillingStored.state =\r\n              this.state.stateOption.find(\r\n                option => option.label === res.data[0].bill_state\r\n              ).value;\r\n          }\r\n          if (res.data[0].bill_country) {\r\n            //matching status name with the id to set prefill status in dropdown\r\n            this.state.formFieldsBillingStored.country =\r\n              this.state.countryOption.find(\r\n                option => option.label === res.data[0].bill_country\r\n              ).value;\r\n          }\r\n\r\n          this.state.formFieldsShippingStored.to = res.data[0].shipto;\r\n          this.state.formFieldsShippingStored.address1 = res.data[0].ship_addr1;\r\n          this.state.formFieldsShippingStored.address2 = res.data[0].ship_addr2;\r\n          this.state.formFieldsShippingStored.address3 = res.data[0].ship_addr3;\r\n          this.state.formFieldsShippingStored.postalCode =\r\n            res.data[0].ship_postalcode;\r\n          if (res.data[0].ship_city) {\r\n            //matching status name with the id to set prefill status in dropdown\r\n            this.state.formFieldsShippingStored.city =\r\n              this.state.cityOption.find(\r\n                option => option.label === res.data[0].ship_city\r\n              ).value;\r\n          }\r\n          if (res.data[0].ship_state) {\r\n            //matching status name with the id to set prefill status in dropdown\r\n            this.state.formFieldsShippingStored.state =\r\n              this.state.stateOption.find(\r\n                option => option.label === res.data[0].ship_state\r\n              ).value;\r\n          }\r\n          if (res.data[0].ship_country) {\r\n            //matching status name with the id to set prefill status in dropdown\r\n            this.state.formFieldsShippingStored.country =\r\n              this.state.countryOption.find(\r\n                option => option.label === res.data[0].ship_country\r\n              ).value;\r\n          }\r\n\r\n          console.log(\r\n            \"this.state.formFieldsBillingStored in autofillAddr\",\r\n            this.state.formFieldsBillingStored\r\n          );\r\n          console.log(\r\n            \"this.state.formFieldsShippingStored in autofillAddr\",\r\n            this.state.formFieldsShippingStored\r\n          );\r\n          this.setState(this.state.formFieldsBillingStored);\r\n          this.setState(this.state.formFieldsShippingStored);\r\n        }\r\n      });\r\n  };\r\n\r\n  storeAddressFields = (formFieldsBilling, formFieldsShipping) => {\r\n    this.state.formFieldsBillingStored = formFieldsBilling;\r\n    this.state.formFieldsShippingStored = formFieldsShipping;\r\n    // this.state.formFieldsShippingStored = formFieldsShipping\r\n    // this.setState(this.state.formFieldsBillingStored, this.state.formFieldsShippingStored)\r\n    console.log(\"formFieldsBilling in addquo\", formFieldsBilling);\r\n    console.log(\"formFieldsShipping in addquo\", formFieldsShipping);\r\n    console.log(\r\n      \"formFieldsBillingStored in addquotation\",\r\n      this.state.formFieldsBillingStored\r\n    );\r\n    console.log(\r\n      \"formFieldsShippingStored in addquotation\",\r\n      this.state.formFieldsShippingStored\r\n    );\r\n    this.setState(this.state.formFieldsBillingStored);\r\n    this.setState(this.state.formFieldsShippingStored);\r\n  };\r\n\r\n  storeItemDetails = (storedItemList, formFields) => {\r\n    this.state.storedItemListStored = storedItemList;\r\n    this.state.formFieldsDetailsStored = formFields;\r\n\r\n    console.log(\"storedItemList in addquo\", storedItemList);\r\n    console.log(\"formFields in addquo\", formFields);\r\n    console.log(\r\n      \"storedItemListStored in addquotation\",\r\n      this.state.storedItemListStored\r\n    );\r\n    console.log(\r\n      \"formFieldsDetailsStored in addquotation\",\r\n      this.state.formFieldsDetailsStored\r\n    );\r\n    this.setState(this.state.storedItemListStored);\r\n    this.setState(this.state.formFieldsDetailsStored);\r\n  };\r\n\r\n  autoFillForm = () => {\r\n    let { disableEdit, statusOption } = this.state;\r\n\r\n    this.props\r\n      .getCommonApi(\r\n        `workorderinvoicelist/?searchid=${this.props.match.params.id}`\r\n      )\r\n      .then(async res => {\r\n        console.log(\"quo dataList\", res.data.dataList);\r\n        // console.log(\"quo dataList cust name\", res.data.dataList[0].customer_name);\r\n        // custName = res.data.dataList[0].customer_name\r\n        // this.state.projectList = res.data.dataList\r\n\r\n        this.state.formFields[\"fk_workorderinvoice\"] =\r\n          res.data.dataList[0].workorderinv_number;\r\n        this.state.formFields[\"projectTitle\"] = res.data.dataList[0].title;\r\n        this.state.formFields[\"companyName\"] = res.data.dataList[0].company;\r\n        this.state.formFields[\"quoDate\"] = res.data.dataList[0].created_at;\r\n        this.state.formFields[\"validity\"] = res.data.dataList[0].validity;\r\n        this.state.formFields[\"attnTo\"] = res.data.dataList[0].contact_person;\r\n\r\n        console.log(\"statusOption in prefill\", this.state.statusOption);\r\n        console.log(\"res.data.dataList[0].status\", res.data.dataList[0].status);\r\n        console.log();\r\n        // if status empty prevent err\r\n        if (res.data.dataList[0].status) {\r\n          //matching status name with the id to set prefill status in dropdown\r\n          this.state.formFields[\"status\"] = this.state.statusOption.find(\r\n            option => option.label === res.data.dataList[0].status\r\n          ).value;\r\n          console.log(\r\n            \"res.data.dataList[0].status\",\r\n            res.data.dataList[0].status\r\n          );\r\n          if (res.data.dataList[0].status == \"Posted\") {\r\n            disableEdit = true;\r\n\r\n            for (var i = 0; i < statusOption.length; i++) {\r\n              if (statusOption[i].label == \"Posted\") {\r\n                statusOption = statusOption.filter(e => e.label !== \"Open\");\r\n              }\r\n            }\r\n            console.log(\"statusOption when status is posted\", statusOption);\r\n\r\n            this.setState({ disableEdit, statusOption });\r\n            console.log(\"this.state.disableEdit\", disableEdit);\r\n          }\r\n        }\r\n        this.state.formFields[\"terms\"] = res.data.dataList[0].terms;\r\n        this.state.formFields[\"preparedBy\"] = res.data.dataList[0].in_charge;\r\n        this.state.formFields[\"remarks\"] = res.data.dataList[0].remarks;\r\n        this.state.formFields[\"footer\"] = res.data.dataList[0].footer;\r\n        this.updateState(this.state.formFields);\r\n        console.log(\"this.state.formFields\", this.state.formFields);\r\n      });\r\n  };\r\n\r\n  handleItemDetailsSubmit = resQuo => {\r\n    let { storedItemListStored, formFieldsDetailsStored, itemListBeforeEdit } =\r\n      this.state;\r\n    const formDataDetails = new FormData();\r\n\r\n    formDataDetails.append(\r\n      \"q_shipcost\",\r\n      formFieldsDetailsStored.q_shipcost\r\n        ? formFieldsDetailsStored.q_shipcost\r\n        : 0\r\n    );\r\n    formDataDetails.append(\r\n      \"q_discount\",\r\n      formFieldsDetailsStored.q_discount\r\n        ? formFieldsDetailsStored.q_discount\r\n        : 0\r\n    );\r\n    formDataDetails.append(\r\n      \"q_taxes\",\r\n      formFieldsDetailsStored.q_taxes ? formFieldsDetailsStored.q_taxes : 0\r\n    );\r\n    formDataDetails.append(\r\n      \"q_total\",\r\n      formFieldsDetailsStored.q_total ? formFieldsDetailsStored.q_total : 0\r\n    );\r\n\r\n    this.props\r\n      .getCommonApi(`workorderinvoicedetail/?searchqdetailid=${resQuo.data.id}`)\r\n      .then(resGetDetails => {\r\n        if (resGetDetails.status == 200) {\r\n          console.log(\"resGetDetails\", resGetDetails);\r\n          this.props\r\n            .commonUpdateApi(\r\n              `workorderinvoicedetail/${resGetDetails.data[0].id}/`,\r\n              formDataDetails\r\n            )\r\n            .then(resUpdateDetails => {\r\n              console.log(\"resUpdateDetails\", resUpdateDetails);\r\n              history.push(`/admin/quantum`);\r\n            });\r\n        } else if (resGetDetails.status == 204) {\r\n          formDataDetails.append(\"fk_workorderinvoice\", resQuo.data.id);\r\n          this.props\r\n            .commonCreateApi(`workorderinvoicedetail/`, formDataDetails)\r\n            .then(resCreateDetails => {\r\n              console.log(\"resCreateDetails\", resCreateDetails);\r\n              history.push(`/admin/quantum`);\r\n            });\r\n        }\r\n      });\r\n\r\n    for (let item of itemListBeforeEdit) {\r\n      let found = storedItemListStored.some(\r\n        el => el.item_code === item.item_code\r\n      );\r\n      if (!found) {\r\n        this.props\r\n          .commonDeleteApi(`workorderinvoiceitem/${item.item_id}/`)\r\n          .then(res => {});\r\n      }\r\n    }\r\n\r\n    for (let item of storedItemListStored) {\r\n      const formDataItem = new FormData();\r\n      formDataItem.append(\"quotation_itemcode\", item.item_code);\r\n      formDataItem.append(\"quotation_itemdesc\", item.item_desc);\r\n      formDataItem.append(\"quotation_itemremarks\", item.item_remarks);\r\n      formDataItem.append(\"quotation_unitprice\", item.item_price);\r\n      formDataItem.append(\"quotation_quantity\", item.item_quantity);\r\n\r\n      this.props\r\n        .getCommonApi(\r\n          `workorderinvoiceitem/?searchqitemid=${resQuo.data.id}&searchqitemcode=${item.item_code}`\r\n        )\r\n        .then(resGetItem => {\r\n          if (resGetItem.status == 200) {\r\n            console.log(\"resGetItem\", resGetItem);\r\n            this.props\r\n              .commonUpdateApi(\r\n                `workorderinvoiceitem/${resGetItem.data.dataList[0].id}/`,\r\n                formDataItem\r\n              )\r\n              .then(resUpdateItem => {\r\n                console.log(\"resUpdateItem\", resUpdateItem);\r\n              });\r\n          } else if (resGetItem.status == 204) {\r\n            formDataItem.append(\"fk_workorderinvoice\", resQuo.data.id);\r\n            this.props\r\n              .commonCreateApi(`workorderinvoiceitem/`, formDataItem)\r\n              .then(resCreateItem => {\r\n                console.log(\"resCreateItem\", resCreateItem);\r\n              });\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  handleAddressSubmit = resQuo => {\r\n    let { cityOption, countryOption, stateOption } = this.state;\r\n    //submit address\r\n    const formDataAddress = new FormData();\r\n    console.log(\r\n      \"this.state.formFieldsBillingStored in handleAddressSubmit\",\r\n      this.state.formFieldsBillingStored\r\n    );\r\n    console.log(\r\n      \"this.state.formFieldsBillingStored.to\",\r\n      this.state.formFieldsBillingStored.to\r\n    );\r\n    console.log(\r\n      \"this.state.formFieldsBillingStored.address1\",\r\n      this.state.formFieldsBillingStored.address1\r\n    );\r\n    formDataAddress.append(\r\n      \"billto\",\r\n      this.state.formFieldsBillingStored.to\r\n        ? this.state.formFieldsBillingStored.to\r\n        : \"\"\r\n    );\r\n    formDataAddress.append(\r\n      \"bill_addr1\",\r\n      this.state.formFieldsBillingStored.address1\r\n        ? this.state.formFieldsBillingStored.address1\r\n        : \"\"\r\n    );\r\n    formDataAddress.append(\r\n      \"bill_addr2\",\r\n      this.state.formFieldsBillingStored.address2\r\n        ? this.state.formFieldsBillingStored.address2\r\n        : \"\"\r\n    );\r\n    formDataAddress.append(\r\n      \"bill_addr3\",\r\n      this.state.formFieldsBillingStored.address3\r\n        ? this.state.formFieldsBillingStored.address3\r\n        : \"\"\r\n    );\r\n    formDataAddress.append(\r\n      \"bill_postalcode\",\r\n      this.state.formFieldsBillingStored.postalCode\r\n        ? this.state.formFieldsBillingStored.postalCode\r\n        : \"\"\r\n    );\r\n\r\n    // console.log(\"cityOption.find(option => option.value === this.formFieldsBillingStored.city).label\",cityOption.find(option => option.value === parseInt(this.state.formFieldsBillingStored.city)).label)\r\n\r\n    formDataAddress.append(\r\n      \"bill_city\",\r\n      this.state.formFieldsBillingStored.city\r\n        ? cityOption.find(\r\n            option =>\r\n              option.value === parseInt(this.state.formFieldsBillingStored.city)\r\n          ).label\r\n        : \"\"\r\n    );\r\n\r\n    formDataAddress.append(\r\n      \"bill_state\",\r\n      this.state.formFieldsBillingStored.state\r\n        ? stateOption.find(\r\n            option =>\r\n              option.value ===\r\n              parseInt(this.state.formFieldsBillingStored.state)\r\n          ).label\r\n        : \"\"\r\n    );\r\n\r\n    formDataAddress.append(\r\n      \"bill_country\",\r\n      this.state.formFieldsBillingStored.country\r\n        ? countryOption.find(\r\n            option =>\r\n              option.value ===\r\n              parseInt(this.state.formFieldsBillingStored.country)\r\n          ).label\r\n        : \"\"\r\n    );\r\n    // console.log(\"countryOption.find(option => option.value === parseInt(this.state.formFieldsBillingStored.country)).label\",countryOption.find(option => option.value === parseInt(this.state.formFieldsBillingStored.country)).label)\r\n\r\n    formDataAddress.append(\r\n      \"shipto\",\r\n      this.state.formFieldsShippingStored.to\r\n        ? this.state.formFieldsShippingStored.to\r\n        : \"\"\r\n    );\r\n    formDataAddress.append(\r\n      \"ship_addr1\",\r\n      this.state.formFieldsShippingStored.address1\r\n        ? this.state.formFieldsShippingStored.address1\r\n        : \"\"\r\n    );\r\n    formDataAddress.append(\r\n      \"ship_addr2\",\r\n      this.state.formFieldsShippingStored.address2\r\n        ? this.state.formFieldsShippingStored.address2\r\n        : \"\"\r\n    );\r\n    formDataAddress.append(\r\n      \"ship_addr3\",\r\n      this.state.formFieldsShippingStored.address3\r\n        ? this.state.formFieldsShippingStored.address3\r\n        : \"\"\r\n    );\r\n    formDataAddress.append(\r\n      \"ship_postalcode\",\r\n      this.state.formFieldsShippingStored.postalCode\r\n        ? this.state.formFieldsShippingStored.postalCode\r\n        : \"\"\r\n    );\r\n\r\n    formDataAddress.append(\r\n      \"ship_city\",\r\n      this.state.formFieldsShippingStored.city\r\n        ? cityOption.find(\r\n            option =>\r\n              option.value ===\r\n              parseInt(this.state.formFieldsShippingStored.city)\r\n          ).label\r\n        : \"\"\r\n    );\r\n\r\n    formDataAddress.append(\r\n      \"ship_state\",\r\n      this.state.formFieldsShippingStored.state\r\n        ? stateOption.find(\r\n            option =>\r\n              option.value ===\r\n              parseInt(this.state.formFieldsShippingStored.state)\r\n          ).label\r\n        : \"\"\r\n    );\r\n\r\n    formDataAddress.append(\r\n      \"ship_country\",\r\n      this.state.formFieldsShippingStored.country\r\n        ? countryOption.find(\r\n            option =>\r\n              option.value ===\r\n              parseInt(this.state.formFieldsShippingStored.country)\r\n          ).label\r\n        : \"\"\r\n    );\r\n\r\n    this.props\r\n      .getCommonApi(`workorderinvoiceaddr/?searchqaddrid=${resQuo.data.id}`)\r\n      .then(resGetAddr => {\r\n        if (resGetAddr.status == 200) {\r\n          console.log(\"resGetAddr\", resGetAddr);\r\n          this.props\r\n            .commonUpdateApi(\r\n              `workorderinvoiceaddr/${resGetAddr.data[0].id}/`,\r\n              formDataAddress\r\n            )\r\n            .then(resUpdateAddr => {\r\n              console.log(\"resCreateAddr\", resUpdateAddr);\r\n            });\r\n        } else if (resGetAddr.status == 204) {\r\n          formDataAddress.append(\"fk_workorderinvoice\", resQuo.data.id);\r\n          this.props\r\n            .commonCreateApi(`workorderinvoiceaddr/`, formDataAddress)\r\n            .then(resCreateAddr => {\r\n              console.log(\"resCreateAddr\", resCreateAddr);\r\n            });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSubmit = async status => {\r\n    debugger;\r\n    try {\r\n      if (this.validator.allValid()) {\r\n        let { formFields, statusOption } = this.state;\r\n        let statusValue = \"\";\r\n        console.log(\"formFields.status\", formFields.status);\r\n\r\n        for (let key of statusOption) {\r\n          // console.log(key.value)\r\n          if (key.value == formFields.status) {\r\n            statusValue = key.label;\r\n          }\r\n        }\r\n        console.log(\"statusValue\", statusValue);\r\n        const formData = new FormData();\r\n        formData.append(\"workorderinv_number\", formFields.fk_workorderinvoice);\r\n        formData.append(\"title\", formFields.projectTitle);\r\n        formData.append(\"company\", formFields.companyName);\r\n        formData.append(\r\n          \"created_at\",\r\n          dateFormat(formFields.quoDate) + \" 00:00:00\"\r\n        );\r\n        // formData.append(\"created_at\", dateFormat(formFields.quoDate) + \" \"+formFields.quoDate.getHours() + \":\" + formFields.quoDate.getMinutes() + \":\" + formFields.quoDate.getSeconds());\r\n        formData.append(\"validity\", formFields.validity);\r\n        formData.append(\"contact_person\", formFields.attnTo);\r\n        //check save or post\r\n        if (status) {\r\n          formData.append(\"status\", \"Posted\");\r\n        } else {\r\n          formData.append(\"status\", statusValue);\r\n        }\r\n        formData.append(\"terms\", formFields.terms);\r\n        formData.append(\"in_charge\", formFields.preparedBy);\r\n        formData.append(\"remarks\", formFields.remarks);\r\n        formData.append(\"footer\", formFields.footer);\r\n        formData.append(\"username\", this.props.tokenDetail.username);\r\n        if (this.state.fkProject) {\r\n          formData.append(\"fk_project\", this.state.fkProject);\r\n        }\r\n        console.log(\"this.state.fkProject in updating\", this.state.fkProject);\r\n\r\n        console.log(\"formData\", formData);\r\n        console.log(\"this.props.match.params.id\", this.props.match.params.id);\r\n        if (this.props.match.params.id) {\r\n          console.log(\"in if loop\");\r\n          console.log(\"this.props.match.params.id\", this.props.match.params.id);\r\n          var resQuo = await this.props.commonUpdateApi(\r\n            `workorderinvoicelist/${this.props.match.params.id}/`,\r\n            formData\r\n          );\r\n\r\n          console.log(resQuo, \"resquo\");\r\n          await this.handleAddressSubmit(resQuo);\r\n          await this.handleItemDetailsSubmit(resQuo);\r\n          if (statusValue == \"Void\") {\r\n            console.log(\"if void loop\");\r\n            await this.props.deleteWorkorderinvoice(\r\n              `${this.props.match.params.id}/`\r\n            );\r\n          }\r\n\r\n          // await this.props.history.push(\r\n          //   `/admin/quotation`\r\n          // )\r\n        } else {\r\n          console.log(\"pass if loop\");\r\n          console.log(\"this.props.location.state\", this.props.location.state);\r\n          // if (this.props.location.state){\r\n          //   console.log(\"this.props.location.state.projectFk\",this.props.location.state.projectFk)\r\n          //   formData.append(\"fk_project\", this.props.location.state.projectFk);\r\n          // }\r\n          console.log(\"pass if ?\");\r\n\r\n          console.log(\r\n            \"this.state.fkProject before createPO\",\r\n            this.state.fkProject\r\n          );\r\n          console.log(\"this.state.fkProject\", this.state.fkProject);\r\n\r\n          var resQuo = await this.props.createWorkorderinvoice(formData);\r\n          console.log(\"resQuo in createQuotation\", resQuo);\r\n          console.log(\"resQuo.data.id\", resQuo.data.id);\r\n\r\n          await this.handleAddressSubmit(resQuo);\r\n          await this.handleItemDetailsSubmit(resQuo);\r\n\r\n          // await this.props.history.push(\r\n          //   `/admin/quotation`\r\n          // )\r\n        }\r\n      } else {\r\n        this.validator.showMessages();\r\n      }\r\n      // this.updateState({ is_loading: false });\r\n    } catch (e) {\r\n      this.updateState({ is_loading: false });\r\n    }\r\n  };\r\n\r\n  handlePrintPdfFormat = url => {\r\n    this.setState({\r\n      isPrintPdfClick: false,\r\n    });\r\n    var a = document.createElement(\"a\");\r\n    a.setAttribute(\"download\", `${new Date()}.pdf`);\r\n    a.setAttribute(\"href\", url);\r\n    a.click();\r\n    window.open(url);\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      formFields,\r\n      statusOption,\r\n      currentValue,\r\n      navLinks,\r\n      disableEdit,\r\n      printData,\r\n      isPrintPdfClick,\r\n    } = this.state;\r\n\r\n    let {\r\n      fk_workorderinvoice,\r\n      projectTitle,\r\n      companyName,\r\n      quoDate,\r\n      validity,\r\n      attnTo,\r\n      status,\r\n      terms,\r\n      preparedBy,\r\n      remarks,\r\n      footer,\r\n    } = formFields;\r\n\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"px-5 container create-quotation\">\r\n        <div className=\"head-label-nav\">\r\n          <p\r\n            className=\"category\"\r\n            onClick={() => {\r\n              if (\r\n                window.confirm(\r\n                  \"Are you sure you want to leave this page and discard changes?\"\r\n                )\r\n              )\r\n                history.push(`/admin/quantum`);\r\n            }}\r\n          >\r\n            {t(\"Work Order Invoice\")}\r\n          </p>\r\n          <i className=\"icon-right mx-md-3\"></i>\r\n          <p className=\"sub-category\">\r\n            {t(\r\n              `${\r\n                this.props.match.params.id ? \"Edit\" : \"New\"\r\n              } Work order invoice`\r\n            )}\r\n          </p>\r\n        </div>\r\n        <div className=\"quotation-detail\">\r\n          <div className=\"form-group mb-4 pb-2\">\r\n            <div className=\"row mt-5\">\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Invoice No\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    disabled={true}\r\n                    placeholder=\"Auto generated\"\r\n                    value={fk_workorderinvoice}\r\n                    name=\"fk_workorderinvoice\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Project\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    disabled={disableEdit}\r\n                    placeholder=\"Enter here\"\r\n                    value={projectTitle}\r\n                    name=\"projectTitle\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  {this.validator.message(\r\n                    t(\"Project\"),\r\n                    projectTitle,\r\n                    t(\"required\")\r\n                  )}\r\n                </div>\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Company Name\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    disabled={disableEdit}\r\n                    placeholder=\"Enter here\"\r\n                    value={companyName}\r\n                    name=\"companyName\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  {this.validator.message(\r\n                    t(\"Company Name\"),\r\n                    companyName,\r\n                    t(\"required\")\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Invoice Date\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalDateTime\r\n                    onChange={this.handleDatePick}\r\n                    inputcol=\"p-0 inTime\"\r\n                    value={quoDate ? new Date(quoDate) : new Date()}\r\n                    name=\"quoDate\"\r\n                    //className=\"dob-pick\"\r\n                    showYearDropdown={true}\r\n                    dateFormat=\"dd/MM/yyyy\"\r\n                    // maxDate={new Date(toDate)}\r\n                    showDisabledMonthNavigation\r\n                  />\r\n                </div>\r\n                <div>\r\n                  {this.validator.message(\r\n                    t(\"Invoice Date\"),\r\n                    quoDate,\r\n                    t(\"required\")\r\n                  )}\r\n                </div>\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Validity\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={validity}\r\n                    name=\"validity\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  {this.validator.message(\r\n                    t(\"Validity\"),\r\n                    validity,\r\n                    t(\"required\")\r\n                  )}\r\n                </div>\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Attn To\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={attnTo}\r\n                    name=\"attnTo\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  {this.validator.message(t(\"Attn To\"), attnTo, t(\"required\"))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Status\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalSelect\r\n                    options={statusOption}\r\n                    value={status}\r\n                    name=\"status\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  {this.validator.message(t(\"Status\"), status, t(\"required\"))}\r\n                </div>\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Terms\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={terms}\r\n                    name=\"terms\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  {this.validator.message(t(\"Terms\"), terms, t(\"required\"))}\r\n                </div>\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Prepared By\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={preparedBy}\r\n                    name=\"preparedBy\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  {this.validator.message(\r\n                    t(\"Prepared By\"),\r\n                    preparedBy,\r\n                    t(\"required\")\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Remarks\")}\r\n                </label>\r\n                <div className=\"input-group-desc\">\r\n                  <NormalTextarea\r\n                    placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={remarks}\r\n                    name=\"remarks\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-6 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Footer\")}\r\n                </label>\r\n                <div className=\"input-group-desc\">\r\n                  <NormalTextarea\r\n                    placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={footer}\r\n                    name=\"footer\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-md-12 quotation-content\">\r\n              <div className=\"tab-menus\">\r\n                <ul>\r\n                  {navLinks.map(({ to, label, id }, index) => (\r\n                    <li key={index}>\r\n                      <NavLink to={to} className=\"nav-link\">\r\n                        <div\r\n                          className={`sidebar-menu ${\r\n                            currentValue === index ? \"active\" : \"\"\r\n                          }`}\r\n                          onClick={() =>\r\n                            this.handleClick({ key: index, id: id })\r\n                          }\r\n                        >\r\n                          <span className=\"sidebar-menu-desc\">{t(label)}</span>\r\n                        </div>\r\n                      </NavLink>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n              {this.state.selectedMenu === \"Details\" && (\r\n                <Details\r\n                  disableEdit={disableEdit}\r\n                  quoId={this.props.match.params.id}\r\n                  siteGstList={this.state.siteGstList}\r\n                  validator={this.validator}\r\n                  storeItemDetails={this.storeItemDetails.bind(this)}\r\n                  storedItemListStored={this.state.storedItemListStored}\r\n                  formFieldsDetailsStored={this.state.formFieldsDetailsStored}\r\n                  id={this.state.selectedMenu}\r\n                  // search={formFields.search}\r\n                  api={\"details\"}\r\n                />\r\n              )}\r\n              {this.state.selectedMenu === \"Address\" && (\r\n                <Address\r\n                  disableEdit={disableEdit}\r\n                  storeAddressFields={this.storeAddressFields.bind(this)}\r\n                  formFieldsBillingStored={this.state.formFieldsBillingStored}\r\n                  formFieldsShippingStored={this.state.formFieldsShippingStored}\r\n                  id={this.state.selectedMenu}\r\n                  // search={formFields.search}\r\n                  api={\"address\"}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n              <div className=\"col-md-2 col-12 mt-3\"></div>\r\n\r\n              <div className=\"col-md-2 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Cancel\"\r\n                  outline={false}\r\n                  onClick={() => {\r\n                    if (\r\n                      window.confirm(\r\n                        \"Are you sure you want to leave this page and discard changes?\"\r\n                      )\r\n                    )\r\n                      history.push(`/admin/quantum`);\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"col-md-2 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2\"}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Save\"\r\n                  onClick={() => this.handleSubmit()}\r\n                />\r\n              </div>\r\n              {this.props.match.params.id && (\r\n                <div className=\"col-md-2 col-12 mt-3\">\r\n                  <NormalButton\r\n                    buttonClass={\"print\"}\r\n                    mainbg={true}\r\n                    className=\"col-12 fs-15 \"\r\n                    label=\"Print\"\r\n                    // outline={false}\r\n                    onClick={() => {\r\n                      this.setState({\r\n                        isPrintPdfClick: true,\r\n                      });\r\n                    }}\r\n                  />\r\n\r\n                  {isPrintPdfClick ? (\r\n                    <PDFDownloadLink\r\n                      document={\r\n                        <Invoice\r\n                          TableList={printData}\r\n                          accountHeader={printData[\"company_header\"]}\r\n                          Flag={8}\r\n                          landscape={false}\r\n                        />\r\n                      }\r\n                    >\r\n                      {({ blob, url, loading, error }) =>\r\n                        !loading && url ? this.handlePrintPdfFormat(url) : null\r\n                      }\r\n                    </PDFDownloadLink>\r\n                  ) : null}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"col-md-2 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Post\"\r\n                  outline={false}\r\n                  onClick={() => this.handleSubmit(status)}\r\n                />\r\n              </div>\r\n\r\n              {disableEdit == true ? (\r\n                <div className=\"col-md-2 col-12 mt-3\">\r\n                  <NormalButton\r\n                    buttonClass={\"mx-2\"}\r\n                    mainbg={true}\r\n                    className=\"confirm\"\r\n                    label=\"Convert to PO\"\r\n                    onClick={() =>\r\n                      this.props.history.push({\r\n                        pathname: \"/admin/quantum/po/add\",\r\n                        state: {\r\n                          quoId: this.props.match.params.id,\r\n                          projectFk: this.state.fkProject,\r\n                        },\r\n                      })\r\n                    }\r\n                  />\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* )} */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetail: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonUpdateApi,\r\n      createWorkorderinvoice,\r\n      updateWorkorderinvoice,\r\n      deleteWorkorderinvoice,\r\n      commonDeleteApi,\r\n      getTokenDetails,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const AddWorkOrderInvoice = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(AddWorkOrderInvoiceClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}