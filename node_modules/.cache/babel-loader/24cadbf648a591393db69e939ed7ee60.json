{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\CustomerPlus\\\\LoyaltyPointsSettings\\\\RewardPolicyTable\\\\index.js\";\nimport React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { TableWrapper } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getRewardPlolicySettings } from \"redux/actions/customerPlus\";\nimport _ from \"lodash\";\nimport { withTranslation } from \"react-i18next\";\nexport class RewardPolicyTableClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [{\n        label: \"Code\",\n        sortKey: \"reward_code\",\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Cust Type\",\n        sortKey: \"cust_type_desc\",\n        enabled: true\n      }, {\n        label: \"Reward Stock Type\",\n        sortKey: \"reward_item_type_desc\",\n        enabled: true\n      }, {\n        label: \"Reward Division\",\n        sortKey: \"reward_item_division\",\n        enabled: true\n      }, {\n        label: \"Currency Value\",\n        sortKey: \"cur_value\",\n        enabled: true,\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Point Value\",\n        sortKey: \"point_value\",\n        enabled: true,\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Active\",\n        sortKey: \"isactive\",\n        enabled: true,\n        divClass: \"justify-content-center\"\n      }],\n      originalDataList: [],\n      dataList: [],\n      meta: {},\n      currentIndex: -1,\n      isMounted: true,\n      isLoading: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.handlePagination = async data => {\n      var _data$page;\n\n      let page = (_data$page = data === null || data === void 0 ? void 0 : data.page) !== null && _data$page !== void 0 ? _data$page : 1;\n      this.setState({\n        isLoading: true\n      });\n      await this.props.getRewardPlolicySettings(`?limit=10&page=${page}`);\n      let {\n        dataList,\n        pagination\n      } = this.props.rewardPolicyList;\n      this.updateState({\n        meta: pagination,\n        dataList: dataList,\n        originalDataList: dataList,\n        isLoading: false\n      });\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.updateState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n  }\n\n  componentDidMount() {\n    this.handlePagination();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  render() {\n    let {\n      headerDetails,\n      dataList,\n      originalDataList,\n      meta,\n      currentIndex,\n      isLoading\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customer-list container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"head-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, t(\"Reward Policy\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-md-6 col-sm-12 fs-15 float-right\",\n      label: \"Add Reward Policy\",\n      onClick: () => this.props.history.push(\"lpmanagement/addreward\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 19\n      }\n    }))))), isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, \"Loading...\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: meta,\n      showFilterColumn: true,\n      parentHeaderChange: value => this.updateState(() => headerDetails = value),\n      sortData: originalDataList,\n      onSort: dataList => this.updateState({\n        dataList\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }\n    }, dataList ? dataList.map((item, index) => {\n      var _headerDetails$0$enab, _headerDetails$0$enab2, _headerDetails$1$enab, _headerDetails$2$enab, _headerDetails$2$enab2, _headerDetails$3$enab, _headerDetails$4$enab;\n\n      let {\n        id,\n        reward_code,\n        cust_type_desc,\n        cur_value,\n        point_value,\n        isactive,\n        reward_item_type_desc,\n        item_div_desc\n      } = item;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        onClick: () => this.props.history.push(`lpmanagement/${id}/editreward`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$0$enab = headerDetails[0].enabled) !== null && _headerDetails$0$enab !== void 0 ? _headerDetails$0$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 33\n        }\n      }, reward_code)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$0$enab2 = headerDetails[0].enabled) !== null && _headerDetails$0$enab2 !== void 0 ? _headerDetails$0$enab2 : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 33\n        }\n      }, cust_type_desc)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$1$enab = headerDetails[1].enabled) !== null && _headerDetails$1$enab !== void 0 ? _headerDetails$1$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 33\n        }\n      }, reward_item_type_desc)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$2$enab = headerDetails[2].enabled) !== null && _headerDetails$2$enab !== void 0 ? _headerDetails$2$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 33\n        }\n      }, item_div_desc)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$2$enab2 = headerDetails[2].enabled) !== null && _headerDetails$2$enab2 !== void 0 ? _headerDetails$2$enab2 : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 33\n        }\n      }, cur_value)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$3$enab = headerDetails[3].enabled) !== null && _headerDetails$3$enab !== void 0 ? _headerDetails$3$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 33\n        }\n      }, point_value)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$4$enab = headerDetails[4].enabled) !== null && _headerDetails$4$enab !== void 0 ? _headerDetails$4$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: isactive,\n        onChange: () => {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 35\n        }\n      }))));\n    }) : null))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  rewardPolicyList: state.customerPlus.rewardPolicyList\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getRewardPlolicySettings\n  }, dispatch);\n};\n\nexport const RewardPolicyTable = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(RewardPolicyTableClass));","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/CustomerPlus/LoyaltyPointsSettings/RewardPolicyTable/index.js"],"names":["React","NormalButton","TableWrapper","connect","bindActionCreators","getRewardPlolicySettings","_","withTranslation","RewardPolicyTableClass","Component","state","headerDetails","label","sortKey","divClass","enabled","originalDataList","dataList","meta","currentIndex","isMounted","isLoading","updateState","data","setState","handlePagination","page","props","pagination","rewardPolicyList","handleClick","key","active","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","componentDidMount","componentWillUnmount","render","t","history","push","value","map","item","index","id","reward_code","cust_type_desc","cur_value","point_value","isactive","reward_item_type_desc","item_div_desc","mapStateToProps","customerPlus","mapDispatchToProps","dispatch","RewardPolicyTable"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,wBAAT,QAAyC,4BAAzC;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,eAAT,QAAgC,eAAhC;AAEA,OAAO,MAAMC,sBAAN,SAAqCR,KAAK,CAACS,SAA3C,CAAqD;AAAA;AAAA;AAAA,SAC1DC,KAD0D,GAClD;AACNC,MAAAA,aAAa,EAAE,CACb;AACEC,QAAAA,KAAK,EAAE,MADT;AAEEC,QAAAA,OAAO,EAAE,aAFX;AAGEC,QAAAA,QAAQ,EAAE;AAHZ,OADa,EAMb;AAAEF,QAAAA,KAAK,EAAE,WAAT;AAAsBC,QAAAA,OAAO,EAAE,gBAA/B;AAAiDE,QAAAA,OAAO,EAAE;AAA1D,OANa,EAOb;AACEH,QAAAA,KAAK,EAAE,mBADT;AAEEC,QAAAA,OAAO,EAAE,uBAFX;AAGEE,QAAAA,OAAO,EAAE;AAHX,OAPa,EAYb;AACEH,QAAAA,KAAK,EAAE,iBADT;AAEEC,QAAAA,OAAO,EAAE,sBAFX;AAGEE,QAAAA,OAAO,EAAE;AAHX,OAZa,EAiBb;AACEH,QAAAA,KAAK,EAAE,gBADT;AAEEC,QAAAA,OAAO,EAAE,WAFX;AAGEE,QAAAA,OAAO,EAAE,IAHX;AAIED,QAAAA,QAAQ,EAAE;AAJZ,OAjBa,EAuBb;AACEF,QAAAA,KAAK,EAAE,aADT;AAEEC,QAAAA,OAAO,EAAE,aAFX;AAGEE,QAAAA,OAAO,EAAE,IAHX;AAIED,QAAAA,QAAQ,EAAE;AAJZ,OAvBa,EA6Bb;AACEF,QAAAA,KAAK,EAAE,QADT;AAEEC,QAAAA,OAAO,EAAE,UAFX;AAGEE,QAAAA,OAAO,EAAE,IAHX;AAIED,QAAAA,QAAQ,EAAE;AAJZ,OA7Ba,CADT;AAqCNE,MAAAA,gBAAgB,EAAE,EArCZ;AAsCNC,MAAAA,QAAQ,EAAE,EAtCJ;AAuCNC,MAAAA,IAAI,EAAE,EAvCA;AAwCNC,MAAAA,YAAY,EAAE,CAAC,CAxCT;AAyCNC,MAAAA,SAAS,EAAE,IAzCL;AA0CNC,MAAAA,SAAS,EAAE;AA1CL,KADkD;;AAAA,SAsD1DC,WAtD0D,GAsD5CC,IAAI,IAAI;AACpB,UAAI,KAAKb,KAAL,CAAWU,SAAf,EAA0B,KAAKI,QAAL,CAAcD,IAAd;AAC3B,KAxDyD;;AAAA,SA0D1DE,gBA1D0D,GA0DvC,MAAMF,IAAN,IAAc;AAAA;;AAC/B,UAAIG,IAAI,iBAAGH,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEG,IAAT,mDAAiB,CAAzB;AACA,WAAKF,QAAL,CAAc;AAAEH,QAAAA,SAAS,EAAE;AAAb,OAAd;AACA,YAAM,KAAKM,KAAL,CAAWtB,wBAAX,CAAqC,kBAAiBqB,IAAK,EAA3D,CAAN;AACA,UAAI;AAAET,QAAAA,QAAF;AAAYW,QAAAA;AAAZ,UAA2B,KAAKD,KAAL,CAAWE,gBAA1C;AACA,WAAKP,WAAL,CAAiB;AACfJ,QAAAA,IAAI,EAAEU,UADS;AAEfX,QAAAA,QAAQ,EAAEA,QAFK;AAGfD,QAAAA,gBAAgB,EAAEC,QAHH;AAIfI,QAAAA,SAAS,EAAE;AAJI,OAAjB;AAMD,KArEyD;;AAAA,SAuE1DS,WAvE0D,GAuE5CC,GAAG,IAAI;AACnB,UAAI,CAAC,KAAKrB,KAAL,CAAWsB,MAAhB,EAAwB;AACtBC,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,KAAKC,kBAAxC,EAA4D,KAA5D;AACD,OAFD,MAEO;AACLF,QAAAA,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,EAAsC,KAAKD,kBAA3C,EAA+D,KAA/D;AACD;;AAED,WAAKb,WAAL,CAAiBe,SAAS,KAAK;AAC7BL,QAAAA,MAAM,EAAE,CAACK,SAAS,CAACL,MADU;AAE7Bb,QAAAA,YAAY,EAAEY;AAFe,OAAL,CAA1B;AAID,KAlFyD;;AAAA,SAoF1DI,kBApF0D,GAoFrCG,CAAC,IAAI;AACxB,UAAI,KAAKC,IAAL,IAAa,IAAjB,EAAuB;AACrB,YAAI,KAAKA,IAAL,CAAUC,QAAV,CAAmBF,CAAC,CAACG,MAArB,CAAJ,EAAkC;AAChC;AACD;AACF;;AACD,WAAKX,WAAL;AACD,KA3FyD;AAAA;;AA8C1DY,EAAAA,iBAAiB,GAAG;AAClB,SAAKjB,gBAAL;AACD;;AAEDkB,EAAAA,oBAAoB,GAAG;AACrB,SAAKjC,KAAL,CAAWU,SAAX,GAAuB,KAAvB;AACD;;AAyCDwB,EAAAA,MAAM,GAAG;AACP,QAAI;AACFjC,MAAAA,aADE;AAEFM,MAAAA,QAFE;AAGFD,MAAAA,gBAHE;AAIFE,MAAAA,IAJE;AAKFC,MAAAA,YALE;AAMFE,MAAAA;AANE,QAOA,KAAKX,KAPT;AAQA,QAAI;AAAEmC,MAAAA;AAAF,QAAQ,KAAKlB,KAAjB;AACA,wBACE,uDACE;AAAK,MAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4BkB,CAAC,CAAC,eAAD,CAA7B,CADF,CADF,eAIE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,MAAM,EAAE,IADV;AAEE,MAAA,SAAS,EAAC,sCAFZ;AAGE,MAAA,KAAK,EAAC,mBAHR;AAIE,MAAA,OAAO,EAAE,MACP,KAAKlB,KAAL,CAAWmB,OAAX,CAAmBC,IAAnB,CAAwB,wBAAxB,CALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADF,CAJF,CADF,EAoBG1B,SAAS,gBACR;AAAK,MAAA,SAAS,EAAC,uDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAgC,MAAA,IAAI,EAAC,QAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,CADQ,gBAOR;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,aAAa,EAAEV,aADjB;AAEE,MAAA,YAAY,EAAE,KAAKc,gBAFrB;AAGE,MAAA,QAAQ,EAAEP,IAHZ;AAIE,MAAA,gBAAgB,EAAE,IAJpB;AAKE,MAAA,kBAAkB,EAAE8B,KAAK,IACvB,KAAK1B,WAAL,CAAiB,MAAOX,aAAa,GAAGqC,KAAxC,CANJ;AAQE,MAAA,QAAQ,EAAEhC,gBARZ;AASE,MAAA,MAAM,EAAEC,QAAQ,IAAI,KAAKK,WAAL,CAAiB;AAAEL,QAAAA;AAAF,OAAjB,CATtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAWGA,QAAQ,GACLA,QAAQ,CAACgC,GAAT,CAAa,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAAA;;AAC5B,UAAI;AACFC,QAAAA,EADE;AAEFC,QAAAA,WAFE;AAGFC,QAAAA,cAHE;AAIFC,QAAAA,SAJE;AAKFC,QAAAA,WALE;AAMFC,QAAAA,QANE;AAOFC,QAAAA,qBAPE;AAQFC,QAAAA;AARE,UASAT,IATJ;AAUA,0BACE;AACE,QAAA,GAAG,EAAEC,KADP;AAEE,QAAA,OAAO,EAAE,MACP,KAAKxB,KAAL,CAAWmB,OAAX,CAAmBC,IAAnB,CACG,gBAAeK,EAAG,aADrB,CAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAQE;AACE,QAAA,SAAS,EACP,0BAAAzC,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,yEAA4B,IAA5B,IACI,EADJ,GAEI,QAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA6BsC,WAA7B,CAPF,CARF,eAiBE;AACE,QAAA,SAAS,EACP,2BAAA1C,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,2EAA4B,IAA5B,IACI,EADJ,GAEI,QAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGuC,cADH,CAPF,CAjBF,eA4BE;AACE,QAAA,SAAS,EACP,0BAAA3C,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,yEAA4B,IAA5B,IACI,EADJ,GAEI,QAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG2C,qBADH,CAPF,CA5BF,eAuCE;AACE,QAAA,SAAS,EACP,0BAAA/C,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,yEAA4B,IAA5B,IACI,EADJ,GAEI,QAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B4C,aAA5B,CAPF,CAvCF,eAgDE;AACE,QAAA,SAAS,EACP,2BAAAhD,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,2EAA4B,IAA5B,IACI,EADJ,GAEI,QAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA6BwC,SAA7B,CAPF,CAhDF,eAyDE;AACE,QAAA,SAAS,EACP,0BAAA5C,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,yEAA4B,IAA5B,IACI,EADJ,GAEI,QAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA6ByC,WAA7B,CAPF,CAzDF,eAkEE;AACE,QAAA,SAAS,EACP,0BAAA7C,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,yEAA4B,IAA5B,IACI,EADJ,GAEI,QAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,OAAO,EAAE0C,QAFX;AAGE,QAAA,QAAQ,EAAE,MAAM,CAAE,CAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAPF,CAlEF,CADF;AAoHD,KA/HD,CADK,GAiIL,IA5IN,CADF,CADF,CADF,CA3BJ,CADF,CADF;AAqLD;;AA5RyD;;AA+R5D,MAAMG,eAAe,GAAGlD,KAAK,KAAK;AAChCmB,EAAAA,gBAAgB,EAAEnB,KAAK,CAACmD,YAAN,CAAmBhC;AADL,CAAL,CAA7B;;AAIA,MAAMiC,kBAAkB,GAAGC,QAAQ,IAAI;AACrC,SAAO3D,kBAAkB,CACvB;AACEC,IAAAA;AADF,GADuB,EAIvB0D,QAJuB,CAAzB;AAMD,CAPD;;AASA,OAAO,MAAMC,iBAAiB,GAAGzD,eAAe,GAC9CJ,OAAO,CAACyD,eAAD,EAAkBE,kBAAlB,CAAP,CAA6CtD,sBAA7C,CAD8C,CAAzC","sourcesContent":["import React from \"react\";\r\nimport { NormalButton } from \"component/common\";\r\nimport { TableWrapper } from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getRewardPlolicySettings } from \"redux/actions/customerPlus\";\r\nimport _ from \"lodash\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class RewardPolicyTableClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      {\r\n        label: \"Code\",\r\n        sortKey: \"reward_code\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Cust Type\", sortKey: \"cust_type_desc\", enabled: true },\r\n      {\r\n        label: \"Reward Stock Type\",\r\n        sortKey: \"reward_item_type_desc\",\r\n        enabled: true,\r\n      },\r\n      {\r\n        label: \"Reward Division\",\r\n        sortKey: \"reward_item_division\",\r\n        enabled: true,\r\n      },\r\n      {\r\n        label: \"Currency Value\",\r\n        sortKey: \"cur_value\",\r\n        enabled: true,\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Point Value\",\r\n        sortKey: \"point_value\",\r\n        enabled: true,\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Active\",\r\n        sortKey: \"isactive\",\r\n        enabled: true,\r\n        divClass: \"justify-content-center\",\r\n      },\r\n    ],\r\n    originalDataList: [],\r\n    dataList: [],\r\n    meta: {},\r\n    currentIndex: -1,\r\n    isMounted: true,\r\n    isLoading: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.handlePagination();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  handlePagination = async data => {\r\n    let page = data?.page ?? 1;\r\n    this.setState({ isLoading: true });\r\n    await this.props.getRewardPlolicySettings(`?limit=10&page=${page}`);\r\n    let { dataList, pagination } = this.props.rewardPolicyList;\r\n    this.updateState({\r\n      meta: pagination,\r\n      dataList: dataList,\r\n      originalDataList: dataList,\r\n      isLoading: false,\r\n    });\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.updateState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      dataList,\r\n      originalDataList,\r\n      meta,\r\n      currentIndex,\r\n      isLoading,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"customer-list container-fluid\">\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col-md-4\">\r\n              <h3 className=\"head-label\">{t(\"Reward Policy\")}</h3>\r\n            </div>\r\n            <div className=\"col-md-8\">\r\n              <div className=\"d-flex\">\r\n                <div className=\"col-12 p-0\">\r\n                  <NormalButton\r\n                    mainbg={true}\r\n                    className=\"col-md-6 col-sm-12 fs-15 float-right\"\r\n                    label=\"Add Reward Policy\"\r\n                    onClick={() =>\r\n                      this.props.history.push(\"lpmanagement/addreward\")\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {isLoading ? (\r\n            <div className=\"d-flex mt-5 align-items-center justify-content-center\">\r\n              <div className=\"spinner-border\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"tab-table-content\">\r\n              <div className=\"py-4\">\r\n                <div className=\"table-container\">\r\n                  <TableWrapper\r\n                    headerDetails={headerDetails}\r\n                    queryHandler={this.handlePagination}\r\n                    pageMeta={meta}\r\n                    showFilterColumn={true}\r\n                    parentHeaderChange={value =>\r\n                      this.updateState(() => (headerDetails = value))\r\n                    }\r\n                    sortData={originalDataList}\r\n                    onSort={dataList => this.updateState({ dataList })}\r\n                  >\r\n                    {dataList\r\n                      ? dataList.map((item, index) => {\r\n                          let {\r\n                            id,\r\n                            reward_code,\r\n                            cust_type_desc,\r\n                            cur_value,\r\n                            point_value,\r\n                            isactive,\r\n                            reward_item_type_desc,\r\n                            item_div_desc,\r\n                          } = item;\r\n                          return (\r\n                            <tr\r\n                              key={index}\r\n                              onClick={() =>\r\n                                this.props.history.push(\r\n                                  `lpmanagement/${id}/editreward`\r\n                                )\r\n                              }\r\n                            >\r\n                              <td\r\n                                className={\r\n                                  headerDetails[0].enabled ?? true\r\n                                    ? \"\"\r\n                                    : \"d-none\"\r\n                                }\r\n                              >\r\n                                <div className=\"text-right\">{reward_code}</div>\r\n                              </td>\r\n                              <td\r\n                                className={\r\n                                  headerDetails[0].enabled ?? true\r\n                                    ? \"\"\r\n                                    : \"d-none\"\r\n                                }\r\n                              >\r\n                                <div className=\"text-left\">\r\n                                  {cust_type_desc}\r\n                                </div>\r\n                              </td>\r\n                              <td\r\n                                className={\r\n                                  headerDetails[1].enabled ?? true\r\n                                    ? \"\"\r\n                                    : \"d-none\"\r\n                                }\r\n                              >\r\n                                <div className=\"text-left\">\r\n                                  {reward_item_type_desc}\r\n                                </div>\r\n                              </td>\r\n                              <td\r\n                                className={\r\n                                  headerDetails[2].enabled ?? true\r\n                                    ? \"\"\r\n                                    : \"d-none\"\r\n                                }\r\n                              >\r\n                                <div className=\"text-left\">{item_div_desc}</div>\r\n                              </td>\r\n                              <td\r\n                                className={\r\n                                  headerDetails[2].enabled ?? true\r\n                                    ? \"\"\r\n                                    : \"d-none\"\r\n                                }\r\n                              >\r\n                                <div className=\"text-right\">{cur_value}</div>\r\n                              </td>\r\n                              <td\r\n                                className={\r\n                                  headerDetails[3].enabled ?? true\r\n                                    ? \"\"\r\n                                    : \"d-none\"\r\n                                }\r\n                              >\r\n                                <div className=\"text-right\">{point_value}</div>\r\n                              </td>\r\n                              <td\r\n                                className={\r\n                                  headerDetails[4].enabled ?? true\r\n                                    ? \"\"\r\n                                    : \"d-none\"\r\n                                }\r\n                              >\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  <input\r\n                                    type=\"checkbox\"\r\n                                    checked={isactive}\r\n                                    onChange={() => {}}\r\n                                  />\r\n                                </div>\r\n                              </td>\r\n                              {/* <td\r\n                                className=\"position-relative\"\r\n                                ref={node => {\r\n                                  this.node = node;\r\n                                }}\r\n                                onClick={() => this.handleClick(index)}\r\n                              >\r\n                                {currentIndex === index ? (\r\n                                  <>\r\n                                    <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\r\n                                      <i className=\"icon-more\"></i>\r\n                                    </div>\r\n                                    <div className=\"option card\">\r\n                                      <div\r\n                                        className=\"d-flex align-items-center fs-16 pt-3\"\r\n                                        onClick={() =>\r\n                                          this.props.history.push(\r\n                                            `lpmanagement/${id}/editreward`\r\n                                          )\r\n                                        }\r\n                                      >\r\n                                        <span className=\"icon-eye-grey px-3\"></span>\r\n                                        {t(\"Edit\")}\r\n                                      </div>\r\n                                    </div>\r\n                                  </>\r\n                                ) : (\r\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\r\n                                    <i className=\"icon-more\"></i>\r\n                                  </div>\r\n                                )}\r\n                              </td> */}\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      : null}\r\n                  </TableWrapper>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  rewardPolicyList: state.customerPlus.rewardPolicyList,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getRewardPlolicySettings,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const RewardPolicyTable = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(RewardPolicyTableClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}