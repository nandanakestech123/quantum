{"ast":null,"code":"/**\r\n * DevExtreme (viz/vector_map/legend.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.LegendsControl = LegendsControl;\n\nvar _extend2 = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _object = require(\"../../core/utils/object\");\n\nvar _legend = require(\"../components/legend\");\n\nvar _extend = _extend2.extend;\nvar _each = _iterator.each;\nvar unknownSource = {\n  category: \"UNKNOWN\",\n  name: \"UNKNOWN\"\n};\n\nfunction buildData(partition, values, field) {\n  var i;\n  var ii = values.length;\n  var list = [];\n  var item;\n\n  for (i = 0; i < ii; ++i) {\n    list[i] = item = {\n      start: partition[i],\n      end: partition[i + 1],\n      index: i\n    };\n    item[field] = values[i];\n    item.states = {\n      normal: {\n        fill: item.color\n      }\n    };\n    item.visible = true;\n  }\n\n  return list;\n}\n\nvar Legend = function (parameters) {\n  var that = this;\n  that._params = parameters;\n  that._root = parameters.renderer.g().attr({\n    \"class\": \"dxm-legend\"\n  }).linkOn(parameters.container, {\n    name: \"legend\",\n    after: \"legend-base\"\n  }).enableLinks().linkAppend();\n  parameters.layoutControl.addItem(that);\n\n  _legend.Legend.call(that, {\n    renderer: parameters.renderer,\n    widget: parameters.widget,\n    group: that._root,\n    backgroundClass: null,\n    itemsGroupClass: null,\n    textField: \"text\",\n    getFormatObject: function (data) {\n      return data;\n    }\n  });\n\n  that._onDataChanged = function (data) {\n    that._updateData(data);\n  };\n};\n\nLegend.prototype = _extend((0, _object.clone)(_legend.Legend.prototype), {\n  constructor: Legend,\n  dispose: function () {\n    var that = this;\n\n    that._params.layoutControl.removeItem(that);\n\n    that._unbindData();\n\n    that._root.linkRemove().linkOff();\n\n    that._params = that._root = that._onDataChanged = null;\n    return _legend.Legend.prototype.dispose.apply(that, arguments);\n  },\n  resize: function (size) {\n    this._params.notifyDirty();\n\n    if (null === size) {\n      this.erase();\n    } else {\n      this.draw(size.width, size.height);\n    }\n\n    this._params.notifyReady();\n  },\n  locate: _legend.Legend.prototype.shift,\n  _updateData: function (data) {\n    this._options.defaultColor = data && data.defaultColor;\n    this.update(data ? buildData(data.partition, data.values, this._dataName) : [], this._options, this._params.themeManager.theme(\"legend\").title);\n    this.updateLayout();\n  },\n  _unbindData: function () {\n    if (this._dataCategory) {\n      this._params.dataExchanger.unbind(this._dataCategory, this._dataName, this._onDataChanged);\n    }\n  },\n  _bindData: function (arg) {\n    this._params.dataExchanger.bind(this._dataCategory = arg.category, this._dataName = arg.name, this._onDataChanged);\n  },\n  setOptions: function (options) {\n    var that = this;\n    that.update(that._data, options, this._params.themeManager.theme(\"legend\").title);\n\n    that._unbindData();\n\n    var source = options.source;\n\n    that._bindData(source ? {\n      category: source.layer,\n      name: source.grouping\n    } : unknownSource);\n\n    that.updateLayout();\n    return that;\n  }\n});\n\nfunction LegendsControl(parameters) {\n  this._params = parameters;\n  this._items = [];\n  parameters.container.virtualLink(\"legend-base\");\n}\n\nLegendsControl.prototype = {\n  constructor: LegendsControl,\n  dispose: function () {\n    _each(this._items, function (_, item) {\n      item.dispose();\n    });\n\n    this._params = this._items = null;\n  },\n  setOptions: function (options) {\n    var optionList = options && options.length ? options : [];\n    var items = this._items;\n    var i;\n    var ii = optionList.length;\n    var params = this._params;\n    var theme = params.themeManager.theme(\"legend\");\n\n    for (i = items.length; i < ii; ++i) {\n      items[i] = new Legend(params);\n    }\n\n    for (i = items.length - 1; i >= ii; --i) {\n      items[i].dispose();\n      items.splice(i, 1);\n    }\n\n    params.layoutControl.suspend();\n\n    for (i = 0; i < ii; ++i) {\n      items[i].setOptions(_extend(true, {}, theme, optionList[i]));\n    }\n\n    params.layoutControl.resume();\n  }\n};","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/vector_map/legend.js"],"names":["exports","LegendsControl","_extend2","require","_iterator","_object","_legend","_extend","extend","_each","each","unknownSource","category","name","buildData","partition","values","field","i","ii","length","list","item","start","end","index","states","normal","fill","color","visible","Legend","parameters","that","_params","_root","renderer","g","attr","linkOn","container","after","enableLinks","linkAppend","layoutControl","addItem","call","widget","group","backgroundClass","itemsGroupClass","textField","getFormatObject","data","_onDataChanged","_updateData","prototype","clone","constructor","dispose","removeItem","_unbindData","linkRemove","linkOff","apply","arguments","resize","size","notifyDirty","erase","draw","width","height","notifyReady","locate","shift","_options","defaultColor","update","_dataName","themeManager","theme","title","updateLayout","_dataCategory","dataExchanger","unbind","_bindData","arg","bind","setOptions","options","_data","source","layer","grouping","_items","virtualLink","_","optionList","items","params","splice","suspend","resume"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,OAAO,CAACC,cAAR,GAAyBA,cAAzB;;AACA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,yBAAD,CAAtB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIG,OAAO,GAAGH,OAAO,CAAC,sBAAD,CAArB;;AACA,IAAII,OAAO,GAAGL,QAAQ,CAACM,MAAvB;AACA,IAAIC,KAAK,GAAGL,SAAS,CAACM,IAAtB;AACA,IAAIC,aAAa,GAAG;AAChBC,EAAAA,QAAQ,EAAE,SADM;AAEhBC,EAAAA,IAAI,EAAE;AAFU,CAApB;;AAKA,SAASC,SAAT,CAAmBC,SAAnB,EAA8BC,MAA9B,EAAsCC,KAAtC,EAA6C;AACzC,MAAIC,CAAJ;AACA,MAAIC,EAAE,GAAGH,MAAM,CAACI,MAAhB;AACA,MAAIC,IAAI,GAAG,EAAX;AACA,MAAIC,IAAJ;;AACA,OAAKJ,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,EAAhB,EAAoB,EAAED,CAAtB,EAAyB;AACrBG,IAAAA,IAAI,CAACH,CAAD,CAAJ,GAAUI,IAAI,GAAG;AACbC,MAAAA,KAAK,EAAER,SAAS,CAACG,CAAD,CADH;AAEbM,MAAAA,GAAG,EAAET,SAAS,CAACG,CAAC,GAAG,CAAL,CAFD;AAGbO,MAAAA,KAAK,EAAEP;AAHM,KAAjB;AAKAI,IAAAA,IAAI,CAACL,KAAD,CAAJ,GAAcD,MAAM,CAACE,CAAD,CAApB;AACAI,IAAAA,IAAI,CAACI,MAAL,GAAc;AACVC,MAAAA,MAAM,EAAE;AACJC,QAAAA,IAAI,EAAEN,IAAI,CAACO;AADP;AADE,KAAd;AAKAP,IAAAA,IAAI,CAACQ,OAAL,GAAe,IAAf;AACH;;AACD,SAAOT,IAAP;AACH;;AACD,IAAIU,MAAM,GAAG,UAASC,UAAT,EAAqB;AAC9B,MAAIC,IAAI,GAAG,IAAX;AACAA,EAAAA,IAAI,CAACC,OAAL,GAAeF,UAAf;AACAC,EAAAA,IAAI,CAACE,KAAL,GAAaH,UAAU,CAACI,QAAX,CAAoBC,CAApB,GAAwBC,IAAxB,CAA6B;AACtC,aAAS;AAD6B,GAA7B,EAEVC,MAFU,CAEHP,UAAU,CAACQ,SAFR,EAEmB;AAC5B3B,IAAAA,IAAI,EAAE,QADsB;AAE5B4B,IAAAA,KAAK,EAAE;AAFqB,GAFnB,EAKVC,WALU,GAKIC,UALJ,EAAb;AAMAX,EAAAA,UAAU,CAACY,aAAX,CAAyBC,OAAzB,CAAiCZ,IAAjC;;AACA3B,EAAAA,OAAO,CAACyB,MAAR,CAAee,IAAf,CAAoBb,IAApB,EAA0B;AACtBG,IAAAA,QAAQ,EAAEJ,UAAU,CAACI,QADC;AAEtBW,IAAAA,MAAM,EAAEf,UAAU,CAACe,MAFG;AAGtBC,IAAAA,KAAK,EAAEf,IAAI,CAACE,KAHU;AAItBc,IAAAA,eAAe,EAAE,IAJK;AAKtBC,IAAAA,eAAe,EAAE,IALK;AAMtBC,IAAAA,SAAS,EAAE,MANW;AAOtBC,IAAAA,eAAe,EAAE,UAASC,IAAT,EAAe;AAC5B,aAAOA,IAAP;AACH;AATqB,GAA1B;;AAWApB,EAAAA,IAAI,CAACqB,cAAL,GAAsB,UAASD,IAAT,EAAe;AACjCpB,IAAAA,IAAI,CAACsB,WAAL,CAAiBF,IAAjB;AACH,GAFD;AAGH,CAxBD;;AAyBAtB,MAAM,CAACyB,SAAP,GAAmBjD,OAAO,CAAC,CAAC,GAAGF,OAAO,CAACoD,KAAZ,EAAmBnD,OAAO,CAACyB,MAAR,CAAeyB,SAAlC,CAAD,EAA+C;AACrEE,EAAAA,WAAW,EAAE3B,MADwD;AAErE4B,EAAAA,OAAO,EAAE,YAAW;AAChB,QAAI1B,IAAI,GAAG,IAAX;;AACAA,IAAAA,IAAI,CAACC,OAAL,CAAaU,aAAb,CAA2BgB,UAA3B,CAAsC3B,IAAtC;;AACAA,IAAAA,IAAI,CAAC4B,WAAL;;AACA5B,IAAAA,IAAI,CAACE,KAAL,CAAW2B,UAAX,GAAwBC,OAAxB;;AACA9B,IAAAA,IAAI,CAACC,OAAL,GAAeD,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACqB,cAAL,GAAsB,IAAlD;AACA,WAAOhD,OAAO,CAACyB,MAAR,CAAeyB,SAAf,CAAyBG,OAAzB,CAAiCK,KAAjC,CAAuC/B,IAAvC,EAA6CgC,SAA7C,CAAP;AACH,GAToE;AAUrEC,EAAAA,MAAM,EAAE,UAASC,IAAT,EAAe;AACnB,SAAKjC,OAAL,CAAakC,WAAb;;AACA,QAAI,SAASD,IAAb,EAAmB;AACf,WAAKE,KAAL;AACH,KAFD,MAEO;AACH,WAAKC,IAAL,CAAUH,IAAI,CAACI,KAAf,EAAsBJ,IAAI,CAACK,MAA3B;AACH;;AACD,SAAKtC,OAAL,CAAauC,WAAb;AACH,GAlBoE;AAmBrEC,EAAAA,MAAM,EAAEpE,OAAO,CAACyB,MAAR,CAAeyB,SAAf,CAAyBmB,KAnBoC;AAoBrEpB,EAAAA,WAAW,EAAE,UAASF,IAAT,EAAe;AACxB,SAAKuB,QAAL,CAAcC,YAAd,GAA6BxB,IAAI,IAAIA,IAAI,CAACwB,YAA1C;AACA,SAAKC,MAAL,CAAYzB,IAAI,GAAGvC,SAAS,CAACuC,IAAI,CAACtC,SAAN,EAAiBsC,IAAI,CAACrC,MAAtB,EAA8B,KAAK+D,SAAnC,CAAZ,GAA4D,EAA5E,EAAgF,KAAKH,QAArF,EAA+F,KAAK1C,OAAL,CAAa8C,YAAb,CAA0BC,KAA1B,CAAgC,QAAhC,EAA0CC,KAAzI;AACA,SAAKC,YAAL;AACH,GAxBoE;AAyBrEtB,EAAAA,WAAW,EAAE,YAAW;AACpB,QAAI,KAAKuB,aAAT,EAAwB;AACpB,WAAKlD,OAAL,CAAamD,aAAb,CAA2BC,MAA3B,CAAkC,KAAKF,aAAvC,EAAsD,KAAKL,SAA3D,EAAsE,KAAKzB,cAA3E;AACH;AACJ,GA7BoE;AA8BrEiC,EAAAA,SAAS,EAAE,UAASC,GAAT,EAAc;AACrB,SAAKtD,OAAL,CAAamD,aAAb,CAA2BI,IAA3B,CAAgC,KAAKL,aAAL,GAAqBI,GAAG,CAAC5E,QAAzD,EAAmE,KAAKmE,SAAL,GAAiBS,GAAG,CAAC3E,IAAxF,EAA8F,KAAKyC,cAAnG;AACH,GAhCoE;AAiCrEoC,EAAAA,UAAU,EAAE,UAASC,OAAT,EAAkB;AAC1B,QAAI1D,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC6C,MAAL,CAAY7C,IAAI,CAAC2D,KAAjB,EAAwBD,OAAxB,EAAiC,KAAKzD,OAAL,CAAa8C,YAAb,CAA0BC,KAA1B,CAAgC,QAAhC,EAA0CC,KAA3E;;AACAjD,IAAAA,IAAI,CAAC4B,WAAL;;AACA,QAAIgC,MAAM,GAAGF,OAAO,CAACE,MAArB;;AACA5D,IAAAA,IAAI,CAACsD,SAAL,CAAeM,MAAM,GAAG;AACpBjF,MAAAA,QAAQ,EAAEiF,MAAM,CAACC,KADG;AAEpBjF,MAAAA,IAAI,EAAEgF,MAAM,CAACE;AAFO,KAAH,GAGjBpF,aAHJ;;AAIAsB,IAAAA,IAAI,CAACkD,YAAL;AACA,WAAOlD,IAAP;AACH;AA5CoE,CAA/C,CAA1B;;AA+CA,SAAShC,cAAT,CAAwB+B,UAAxB,EAAoC;AAChC,OAAKE,OAAL,GAAeF,UAAf;AACA,OAAKgE,MAAL,GAAc,EAAd;AACAhE,EAAAA,UAAU,CAACQ,SAAX,CAAqByD,WAArB,CAAiC,aAAjC;AACH;;AACDhG,cAAc,CAACuD,SAAf,GAA2B;AACvBE,EAAAA,WAAW,EAAEzD,cADU;AAEvB0D,EAAAA,OAAO,EAAE,YAAW;AAChBlD,IAAAA,KAAK,CAAC,KAAKuF,MAAN,EAAc,UAASE,CAAT,EAAY5E,IAAZ,EAAkB;AACjCA,MAAAA,IAAI,CAACqC,OAAL;AACH,KAFI,CAAL;;AAGA,SAAKzB,OAAL,GAAe,KAAK8D,MAAL,GAAc,IAA7B;AACH,GAPsB;AAQvBN,EAAAA,UAAU,EAAE,UAASC,OAAT,EAAkB;AAC1B,QAAIQ,UAAU,GAAGR,OAAO,IAAIA,OAAO,CAACvE,MAAnB,GAA4BuE,OAA5B,GAAsC,EAAvD;AACA,QAAIS,KAAK,GAAG,KAAKJ,MAAjB;AACA,QAAI9E,CAAJ;AACA,QAAIC,EAAE,GAAGgF,UAAU,CAAC/E,MAApB;AACA,QAAIiF,MAAM,GAAG,KAAKnE,OAAlB;AACA,QAAI+C,KAAK,GAAGoB,MAAM,CAACrB,YAAP,CAAoBC,KAApB,CAA0B,QAA1B,CAAZ;;AACA,SAAK/D,CAAC,GAAGkF,KAAK,CAAChF,MAAf,EAAuBF,CAAC,GAAGC,EAA3B,EAA+B,EAAED,CAAjC,EAAoC;AAChCkF,MAAAA,KAAK,CAAClF,CAAD,CAAL,GAAW,IAAIa,MAAJ,CAAWsE,MAAX,CAAX;AACH;;AACD,SAAKnF,CAAC,GAAGkF,KAAK,CAAChF,MAAN,GAAe,CAAxB,EAA2BF,CAAC,IAAIC,EAAhC,EAAoC,EAAED,CAAtC,EAAyC;AACrCkF,MAAAA,KAAK,CAAClF,CAAD,CAAL,CAASyC,OAAT;AACAyC,MAAAA,KAAK,CAACE,MAAN,CAAapF,CAAb,EAAgB,CAAhB;AACH;;AACDmF,IAAAA,MAAM,CAACzD,aAAP,CAAqB2D,OAArB;;AACA,SAAKrF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,EAAhB,EAAoB,EAAED,CAAtB,EAAyB;AACrBkF,MAAAA,KAAK,CAAClF,CAAD,CAAL,CAASwE,UAAT,CAAoBnF,OAAO,CAAC,IAAD,EAAO,EAAP,EAAW0E,KAAX,EAAkBkB,UAAU,CAACjF,CAAD,CAA5B,CAA3B;AACH;;AACDmF,IAAAA,MAAM,CAACzD,aAAP,CAAqB4D,MAArB;AACH;AA3BsB,CAA3B","sourcesContent":["/**\r\n * DevExtreme (viz/vector_map/legend.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.LegendsControl = LegendsControl;\r\nvar _extend2 = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _object = require(\"../../core/utils/object\");\r\nvar _legend = require(\"../components/legend\");\r\nvar _extend = _extend2.extend;\r\nvar _each = _iterator.each;\r\nvar unknownSource = {\r\n    category: \"UNKNOWN\",\r\n    name: \"UNKNOWN\"\r\n};\r\n\r\nfunction buildData(partition, values, field) {\r\n    var i;\r\n    var ii = values.length;\r\n    var list = [];\r\n    var item;\r\n    for (i = 0; i < ii; ++i) {\r\n        list[i] = item = {\r\n            start: partition[i],\r\n            end: partition[i + 1],\r\n            index: i\r\n        };\r\n        item[field] = values[i];\r\n        item.states = {\r\n            normal: {\r\n                fill: item.color\r\n            }\r\n        };\r\n        item.visible = true\r\n    }\r\n    return list\r\n}\r\nvar Legend = function(parameters) {\r\n    var that = this;\r\n    that._params = parameters;\r\n    that._root = parameters.renderer.g().attr({\r\n        \"class\": \"dxm-legend\"\r\n    }).linkOn(parameters.container, {\r\n        name: \"legend\",\r\n        after: \"legend-base\"\r\n    }).enableLinks().linkAppend();\r\n    parameters.layoutControl.addItem(that);\r\n    _legend.Legend.call(that, {\r\n        renderer: parameters.renderer,\r\n        widget: parameters.widget,\r\n        group: that._root,\r\n        backgroundClass: null,\r\n        itemsGroupClass: null,\r\n        textField: \"text\",\r\n        getFormatObject: function(data) {\r\n            return data\r\n        }\r\n    });\r\n    that._onDataChanged = function(data) {\r\n        that._updateData(data)\r\n    }\r\n};\r\nLegend.prototype = _extend((0, _object.clone)(_legend.Legend.prototype), {\r\n    constructor: Legend,\r\n    dispose: function() {\r\n        var that = this;\r\n        that._params.layoutControl.removeItem(that);\r\n        that._unbindData();\r\n        that._root.linkRemove().linkOff();\r\n        that._params = that._root = that._onDataChanged = null;\r\n        return _legend.Legend.prototype.dispose.apply(that, arguments)\r\n    },\r\n    resize: function(size) {\r\n        this._params.notifyDirty();\r\n        if (null === size) {\r\n            this.erase()\r\n        } else {\r\n            this.draw(size.width, size.height)\r\n        }\r\n        this._params.notifyReady()\r\n    },\r\n    locate: _legend.Legend.prototype.shift,\r\n    _updateData: function(data) {\r\n        this._options.defaultColor = data && data.defaultColor;\r\n        this.update(data ? buildData(data.partition, data.values, this._dataName) : [], this._options, this._params.themeManager.theme(\"legend\").title);\r\n        this.updateLayout()\r\n    },\r\n    _unbindData: function() {\r\n        if (this._dataCategory) {\r\n            this._params.dataExchanger.unbind(this._dataCategory, this._dataName, this._onDataChanged)\r\n        }\r\n    },\r\n    _bindData: function(arg) {\r\n        this._params.dataExchanger.bind(this._dataCategory = arg.category, this._dataName = arg.name, this._onDataChanged)\r\n    },\r\n    setOptions: function(options) {\r\n        var that = this;\r\n        that.update(that._data, options, this._params.themeManager.theme(\"legend\").title);\r\n        that._unbindData();\r\n        var source = options.source;\r\n        that._bindData(source ? {\r\n            category: source.layer,\r\n            name: source.grouping\r\n        } : unknownSource);\r\n        that.updateLayout();\r\n        return that\r\n    }\r\n});\r\n\r\nfunction LegendsControl(parameters) {\r\n    this._params = parameters;\r\n    this._items = [];\r\n    parameters.container.virtualLink(\"legend-base\")\r\n}\r\nLegendsControl.prototype = {\r\n    constructor: LegendsControl,\r\n    dispose: function() {\r\n        _each(this._items, function(_, item) {\r\n            item.dispose()\r\n        });\r\n        this._params = this._items = null\r\n    },\r\n    setOptions: function(options) {\r\n        var optionList = options && options.length ? options : [];\r\n        var items = this._items;\r\n        var i;\r\n        var ii = optionList.length;\r\n        var params = this._params;\r\n        var theme = params.themeManager.theme(\"legend\");\r\n        for (i = items.length; i < ii; ++i) {\r\n            items[i] = new Legend(params)\r\n        }\r\n        for (i = items.length - 1; i >= ii; --i) {\r\n            items[i].dispose();\r\n            items.splice(i, 1)\r\n        }\r\n        params.layoutControl.suspend();\r\n        for (i = 0; i < ii; ++i) {\r\n            items[i].setOptions(_extend(true, {}, theme, optionList[i]))\r\n        }\r\n        params.layoutControl.resume()\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}