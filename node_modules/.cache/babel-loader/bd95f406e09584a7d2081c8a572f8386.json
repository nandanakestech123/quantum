{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\CustomerPlus\\\\CustomerDetailsPlus\\\\Details\\\\ComparePhotoPopup.js\";\nimport React, { Component } from \"react\";\nimport { NormalInput, NormalButton, NormalSelect } from \"component/common\";\nimport CanvasDraw from \"react-canvas-draw\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Webcam from \"react-webcam\";\nimport { withTranslation } from \"react-i18next\";\nimport { addDiagnosisHistory, updateDiagnosisHistory } from \"redux/actions/customerPlus\";\nexport class ComparePhotoPopupClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      remarks: \"\",\n      isMounted: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = async () => {\n      let {\n        remarks\n      } = this.state;\n      let {\n        id,\n        cust_no,\n        onDone,\n        dataList\n      } = this.props;\n      let data = {\n        compare_remark: remarks,\n        compare_datetime: new Date().toISOString(),\n        cust_no,\n        diagnosis: dataList.map(e => e.sys_code)\n      };\n\n      if (id == null) {\n        await this.props.addDiagnosisHistory(data);\n      } else {\n        await this.props.updateDiagnosisHistory(id, data);\n      }\n\n      onDone();\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  componentDidMount() {\n    if (this.props.remarks) this.setState({\n      remarks: this.props.remarks\n    });\n  }\n\n  render() {\n    let {\n      remarks\n    } = this.state;\n    let {\n      dataList,\n      t\n    } = this.props;\n    console.log(\"rendered\");\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid mb-4 mt-2 product-details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, t(\"Compare Photo\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 \",\n      label: \"Done\",\n      onClick: () => this.handleSubmit(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row pl-5 pr-5 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, dataList ? dataList.map(data => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(CanvasDraw, {\n      imgSrc: data.pic_path,\n      ref: ref => this.canvasDraw = ref,\n      saveData: data.pic_data1 && JSON.stringify(data.pic_data1),\n      disabled: true,\n      hideGrid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 23\n      }\n    }, t(\"Remarks\")), /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter remarks\",\n      value: data.remarks,\n      name: \"remarks\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 23\n      }\n    })))) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }, t(\"Remarks\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter remarks\",\n      value: remarks,\n      name: \"remarks\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    addDiagnosisHistory,\n    updateDiagnosisHistory\n  }, dispatch);\n};\n\nexport const ComparePhotoPopup = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(ComparePhotoPopupClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/Details/ComparePhotoPopup.js"],"names":["React","Component","NormalInput","NormalButton","NormalSelect","CanvasDraw","connect","bindActionCreators","Webcam","withTranslation","addDiagnosisHistory","updateDiagnosisHistory","ComparePhotoPopupClass","state","remarks","isMounted","updateState","data","setState","handleChange","e","target","name","value","handleSubmit","id","cust_no","onDone","dataList","props","compare_remark","compare_datetime","Date","toISOString","diagnosis","map","sys_code","componentWillUnmount","componentDidMount","render","t","console","log","pic_path","ref","canvasDraw","pic_data1","JSON","stringify","mapStateToProps","mapDispatchToProps","dispatch","ComparePhotoPopup"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NormalInput, NormalButton, NormalSelect } from \"component/common\";\nimport CanvasDraw from \"react-canvas-draw\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Webcam from \"react-webcam\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  addDiagnosisHistory,\n  updateDiagnosisHistory,\n} from \"redux/actions/customerPlus\";\n\nexport class ComparePhotoPopupClass extends Component {\n  state = {\n    remarks: \"\",\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount() {\n    if (this.props.remarks) this.setState({ remarks: this.props.remarks });\n  }\n  handleChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  handleSubmit = async () => {\n    let { remarks } = this.state;\n    let { id, cust_no, onDone, dataList } = this.props;\n    let data = {\n      compare_remark: remarks,\n      compare_datetime: new Date().toISOString(),\n      cust_no,\n      diagnosis: dataList.map((e) => e.sys_code),\n    };\n    if (id == null) {\n      await this.props.addDiagnosisHistory(data);\n    } else {\n      await this.props.updateDiagnosisHistory(id, data);\n    }\n    onDone();\n  };\n\n  render() {\n    let { remarks } = this.state;\n    let { dataList, t } = this.props;\n    console.log(\"rendered\");\n    return (\n      <>\n        <div className=\"container-fluid mb-4 mt-2 product-details\">\n          <div className=\"row\">\n            <div className=\"col-6\">\n              <h4>{t(\"Compare Photo\")}</h4>\n            </div>\n            <div className=\"col-6\">\n              <NormalButton\n                mainbg={true}\n                className=\"col-12 fs-15 \"\n                label=\"Done\"\n                onClick={() => this.handleSubmit()}\n              />\n            </div>\n          </div>\n          <div className=\"row pl-5 pr-5 mt-4\">\n            {dataList\n              ? dataList.map((data) => (\n                  <div className=\"col-md-6 mb-4\">\n                    <div className=\"col-12 mb-4\">\n                      <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                        <CanvasDraw\n                          imgSrc={data.pic_path}\n                          ref={(ref) => (this.canvasDraw = ref)}\n                          saveData={\n                            data.pic_data1 && JSON.stringify(data.pic_data1)\n                          }\n                          disabled\n                          hideGrid\n                        />\n                      </div>\n                    </div>\n                    <div className=\"col-12\">\n                      <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                        {t(\"Remarks\")}\n                      </label>\n                      <NormalInput\n                        placeholder=\"Enter remarks\"\n                        value={data.remarks}\n                        name=\"remarks\"\n                        disabled\n                      />\n                    </div>\n                  </div>\n                ))\n              : null}\n            <div className=\"col-12 mb-4\">\n              <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                {t(\"Remarks\")}\n              </label>\n              <div className=\"input-group\">\n                <NormalInput\n                  placeholder=\"Enter remarks\"\n                  value={remarks}\n                  name=\"remarks\"\n                  onChange={this.handleChange}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      addDiagnosisHistory,\n      updateDiagnosisHistory,\n    },\n    dispatch\n  );\n};\n\nexport const ComparePhotoPopup = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(ComparePhotoPopupClass)\n);\n"]},"metadata":{},"sourceType":"module"}