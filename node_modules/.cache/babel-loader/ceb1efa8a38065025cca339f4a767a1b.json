{"ast":null,"code":"import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import{NormalInput,NormalSelect,NormalButton}from\"component/common\";import React,{Component}from\"react\";import{getCommonApi,commonCreateApi,commonPatchApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";export var TreatmentUsageDetailClass=/*#__PURE__*/function(_Component){_inherits(TreatmentUsageDetailClass,_Component);var _super=_createSuper(TreatmentUsageDetailClass);function TreatmentUsageDetailClass(){var _this;_classCallCheck(this,TreatmentUsageDetailClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={treatmentDetailFace:{id:0,str1:\"\",str2:\"\",str3:\"\",str4:\"\",str5:\"\",room_id:\"\",remarks:\"\",treatment_code:\"\"},TreatmentHistoryId:0,treatmentDetailId:0,RoomList:[]};_this.componentDidMount=function(){_this.getRoomList();_this.getTreatmentUsageDetailTabInfo(_this.props.TreatmentHistoryId);};_this.getTreatmentUsageDetailTabInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(TreatId){var treatmentDetailFace;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.setState({TreatmentHistoryId:_this.props.TreatmentHistoryId,treatment_code:_this.props.treatment_code,remarks:_this.props.remarks});case 2:treatmentDetailFace=_this.state.treatmentDetailFace;_this.props.getCommonApi(\"treatmentface/?treat_id=\".concat(TreatId)).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var status,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=key.status,data=key.data;if(!(status===200)){_context.next=11;break;}if(!data){_context.next=11;break;}treatmentDetailFace[\"str1\"]=data.str1;treatmentDetailFace[\"str2\"]=data.str2;treatmentDetailFace[\"str3\"]=data.str3;treatmentDetailFace[\"str4\"]=data.str4;treatmentDetailFace[\"str5\"]=data.str5;treatmentDetailFace[\"room_id\"]=data.room_id;_context.next=11;return _this.setState({treatmentDetailFace:treatmentDetailFace,treatmentDetailId:data.id});case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlechange=function(_ref3){var _ref3$target=_ref3.target,name=_ref3$target.name,value=_ref3$target.value;var treatmentDetailFace=_this.state.treatmentDetailFace;treatmentDetailFace[name]=value;_this.setState({treatmentDetailFace:treatmentDetailFace});};_this.cleartext=function(){_this.setState({treatmentDetailFace:\"\"});};_this.handleTreatmentUsageDetailSave=function(detail){var _this$state=_this.state,TreatmentHistoryId=_this$state.TreatmentHistoryId,remarks=_this$state.remarks;var Body={treatment_code:_this.props.treatment_code,str1:detail.str1,str2:detail.str2,str3:detail.str3,str4:detail.str4,str5:detail.str5,room_id:detail.room_id,treat_remarks:remarks};_this.props.commonCreateApi(\"treatmentface/?treat_id=\".concat(TreatmentHistoryId),Body).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(res){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(res.status===200){_this.getTreatmentUsageDetailTabInfo(TreatmentHistoryId);}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}());};_this.handleTreatmentUsageDetailUpdate=function(detail){var _this$state2=_this.state,TreatmentHistoryId=_this$state2.TreatmentHistoryId,remarks=_this$state2.remarks,treatmentDetailId=_this$state2.treatmentDetailId;var Body={treatment_code:_this.props.treatment_code,str1:detail.str1,str2:detail.str2,str3:detail.str3,str4:detail.str4,str5:detail.str5,room_id:detail.room_id,treat_remarks:remarks};_this.props.commonPatchApi(\"treatmentface/\".concat(treatmentDetailId,\"/?treat_id=\").concat(TreatmentHistoryId),Body).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(res.status===200){_this.getTreatmentUsageDetailTabInfo(TreatmentHistoryId);}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref5.apply(this,arguments);};}());};_this.getRoomList=function(){var RoomList=_this.state.RoomList;_this.props.getCommonApi(\"room/\").then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(key){var status,data,_iterator,_step,value;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:status=key.status,data=key.data;if(!(status===200)){_context5.next=6;break;}_iterator=_createForOfIteratorHelper(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){value=_step.value;RoomList.push({value:value.id,label:value.displayname});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_context5.next=6;return _this.setState({RoomList:RoomList});case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref6.apply(this,arguments);};}());};return _this;}_createClass(TreatmentUsageDetailClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,treatmentDetailFace=_this$state3.treatmentDetailFace,treatmentDetailId=_this$state3.treatmentDetailId,RoomList=_this$state3.RoomList;var str1=treatmentDetailFace.str1,str2=treatmentDetailFace.str2,str3=treatmentDetailFace.str3,str4=treatmentDetailFace.str4,str5=treatmentDetailFace.str5,room_id=treatmentDetailFace.room_id;return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column p-2 m-2 mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"my-2 w-100 col-6\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"str1\",onChange:function onChange(e){return _this2.handlechange(e);},value:str1})),/*#__PURE__*/React.createElement(\"div\",{className:\"my-2 w-100 col-6\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"str2\",onChange:function onChange(e){return _this2.handlechange(e);},value:str2})),/*#__PURE__*/React.createElement(\"div\",{className:\"my-2 w-100 col-6\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"str3\",onChange:function onChange(e){return _this2.handlechange(e);},value:str3})),/*#__PURE__*/React.createElement(\"div\",{className:\"my-2 w-100 col-6\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"str4\",onChange:function onChange(e){return _this2.handlechange(e);},value:str4})),/*#__PURE__*/React.createElement(\"div\",{className:\"my-2 w-100 col-6\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"str5\",onChange:function onChange(e){return _this2.handlechange(e);},value:str5})),/*#__PURE__*/React.createElement(\"div\",{className:\"my-2 w-100 col-3\"},/*#__PURE__*/React.createElement(NormalSelect,{name:\"room_id\",options:RoomList,onChange:function onChange(e){return _this2.handlechange(e);},value:room_id,placeholder:\"Select Room\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center justify-content-start w-100 mt-3\"},treatmentDetailId&&treatmentDetailId>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-2\",mainbg:true,className:\"col-12 ml-4 fs-15 \",label:\"Update\",onClick:function onClick(){return _this2.handleTreatmentUsageDetailUpdate(treatmentDetailFace);}})):/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-2\",mainbg:true,className:\"col-12 ml-4 fs-15 \",label:\"Save\",onClick:function onClick(){return _this2.handleTreatmentUsageDetailSave(treatmentDetailFace);}})));}}]);return TreatmentUsageDetailClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{// filter: state.dashboard\n};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi},dispatch);};export var TreatmentUsageDetail=connect(mapStateToProps,mapDispatchToProps)(TreatmentUsageDetailClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/treatmentDone/TreatmentUsageDetail.js"],"names":["NormalInput","NormalSelect","NormalButton","React","Component","getCommonApi","commonCreateApi","commonPatchApi","connect","bindActionCreators","TreatmentUsageDetailClass","state","treatmentDetailFace","id","str1","str2","str3","str4","str5","room_id","remarks","treatment_code","TreatmentHistoryId","treatmentDetailId","RoomList","componentDidMount","getRoomList","getTreatmentUsageDetailTabInfo","props","TreatId","setState","then","key","status","data","handlechange","target","name","value","cleartext","handleTreatmentUsageDetailSave","detail","Body","treat_remarks","res","handleTreatmentUsageDetailUpdate","push","label","displayname","e","mapStateToProps","mapDispatchToProps","dispatch","TreatmentUsageDetail"],"mappings":"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","sourcesContent":["import { NormalInput, NormalSelect, NormalButton } from \"component/common\";\r\nimport React, { Component } from \"react\";\r\nimport {\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nexport class TreatmentUsageDetailClass extends Component {\r\n  state = {\r\n    treatmentDetailFace: {\r\n      id: 0,\r\n      str1: \"\",\r\n      str2: \"\",\r\n      str3: \"\",\r\n      str4: \"\",\r\n      str5: \"\",\r\n      room_id: \"\",\r\n      remarks: \"\",\r\n      treatment_code: \"\",\r\n    },\r\n    TreatmentHistoryId: 0,\r\n    treatmentDetailId: 0,\r\n    RoomList: [],\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.getRoomList();\r\n    this.getTreatmentUsageDetailTabInfo(this.props.TreatmentHistoryId);\r\n  };\r\n\r\n  getTreatmentUsageDetailTabInfo = async TreatId => {\r\n    await this.setState({\r\n      TreatmentHistoryId: this.props.TreatmentHistoryId,\r\n      treatment_code: this.props.treatment_code,\r\n      remarks: this.props.remarks,\r\n    });\r\n    let { treatmentDetailFace } = this.state;\r\n    this.props\r\n      .getCommonApi(`treatmentface/?treat_id=${TreatId}`)\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          if (data) {\r\n            treatmentDetailFace[\"str1\"] = data.str1;\r\n            treatmentDetailFace[\"str2\"] = data.str2;\r\n            treatmentDetailFace[\"str3\"] = data.str3;\r\n            treatmentDetailFace[\"str4\"] = data.str4;\r\n            treatmentDetailFace[\"str5\"] = data.str5;\r\n            treatmentDetailFace[\"room_id\"] = data.room_id;\r\n            await this.setState({\r\n              treatmentDetailFace,\r\n              treatmentDetailId: data.id,\r\n            });\r\n          }\r\n        }\r\n      });\r\n  };\r\n  handlechange = ({ target: { name, value } }) => {\r\n    let { treatmentDetailFace } = this.state;\r\n    treatmentDetailFace[name] = value;\r\n    this.setState({\r\n      treatmentDetailFace,\r\n    });\r\n  };\r\n\r\n  cleartext = () => {\r\n    this.setState({\r\n      treatmentDetailFace: \"\",\r\n    });\r\n  };\r\n\r\n  handleTreatmentUsageDetailSave = detail => {\r\n    let { TreatmentHistoryId, remarks } = this.state;\r\n    let Body = {\r\n      treatment_code: this.props.treatment_code,\r\n      str1: detail.str1,\r\n      str2: detail.str2,\r\n      str3: detail.str3,\r\n      str4: detail.str4,\r\n      str5: detail.str5,\r\n      room_id: detail.room_id,\r\n      treat_remarks: remarks,\r\n    };\r\n    this.props\r\n      .commonCreateApi(`treatmentface/?treat_id=${TreatmentHistoryId}`, Body)\r\n      .then(async res => {\r\n        if (res.status === 200) {\r\n          this.getTreatmentUsageDetailTabInfo(TreatmentHistoryId);\r\n        }\r\n      });\r\n  };\r\n\r\n  handleTreatmentUsageDetailUpdate = detail => {\r\n    let { TreatmentHistoryId, remarks, treatmentDetailId } = this.state;\r\n    let Body = {\r\n      treatment_code: this.props.treatment_code,\r\n      str1: detail.str1,\r\n      str2: detail.str2,\r\n      str3: detail.str3,\r\n      str4: detail.str4,\r\n      str5: detail.str5,\r\n      room_id: detail.room_id,\r\n      treat_remarks: remarks,\r\n    };\r\n    this.props\r\n      .commonPatchApi(\r\n        `treatmentface/${treatmentDetailId}/?treat_id=${TreatmentHistoryId}`,\r\n        Body\r\n      )\r\n      .then(async res => {\r\n        if (res.status === 200) {\r\n          this.getTreatmentUsageDetailTabInfo(TreatmentHistoryId);\r\n        }\r\n      });\r\n  };\r\n  getRoomList = () => {\r\n    let { RoomList } = this.state;\r\n    this.props.getCommonApi(`room/`).then(async key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          RoomList.push({\r\n            value: value.id,\r\n            label: value.displayname,\r\n          });\r\n        }\r\n        await this.setState({ RoomList });\r\n      }\r\n    });\r\n  };\r\n  render() {\r\n    let { treatmentDetailFace, treatmentDetailId, RoomList } = this.state;\r\n    let { str1, str2, str3, str4, str5, room_id } = treatmentDetailFace;\r\n\r\n    return (\r\n      <div className=\"d-flex flex-column p-2 m-2 mt-2\">\r\n        <div className=\"my-2 w-100 col-6\">\r\n          <NormalInput\r\n            name=\"str1\"\r\n            onChange={e => this.handlechange(e)}\r\n            value={str1}\r\n          />\r\n        </div>\r\n        <div className=\"my-2 w-100 col-6\">\r\n          <NormalInput\r\n            name=\"str2\"\r\n            onChange={e => this.handlechange(e)}\r\n            value={str2}\r\n          />\r\n        </div>\r\n        <div className=\"my-2 w-100 col-6\">\r\n          <NormalInput\r\n            name=\"str3\"\r\n            onChange={e => this.handlechange(e)}\r\n            value={str3}\r\n          />\r\n        </div>\r\n        <div className=\"my-2 w-100 col-6\">\r\n          <NormalInput\r\n            name=\"str4\"\r\n            onChange={e => this.handlechange(e)}\r\n            value={str4}\r\n          />\r\n        </div>\r\n        <div className=\"my-2 w-100 col-6\">\r\n          <NormalInput\r\n            name=\"str5\"\r\n            onChange={e => this.handlechange(e)}\r\n            value={str5}\r\n          />\r\n        </div>\r\n        <div className=\"my-2 w-100 col-3\">\r\n          <NormalSelect\r\n            name=\"room_id\"\r\n            options={RoomList}\r\n            onChange={e => this.handlechange(e)}\r\n            value={room_id}\r\n            placeholder={`Select Room`}\r\n          />\r\n        </div>\r\n        <div className=\"row text-center justify-content-start w-100 mt-3\">\r\n          {treatmentDetailId && treatmentDetailId > 0 ? (\r\n            <>\r\n              <NormalButton\r\n                buttonClass={\"col-2\"}\r\n                mainbg={true}\r\n                className=\"col-12 ml-4 fs-15 \"\r\n                label=\"Update\"\r\n                onClick={() =>\r\n                  this.handleTreatmentUsageDetailUpdate(treatmentDetailFace)\r\n                }\r\n              />\r\n            </>\r\n          ) : (\r\n            <NormalButton\r\n              buttonClass={\"col-2\"}\r\n              mainbg={true}\r\n              className=\"col-12 ml-4 fs-15 \"\r\n              label=\"Save\"\r\n              onClick={() =>\r\n                this.handleTreatmentUsageDetailSave(treatmentDetailFace)\r\n              }\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentUsageDetail = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(TreatmentUsageDetailClass);\r\n"]},"metadata":{},"sourceType":"module"}