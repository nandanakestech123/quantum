{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalButton,NormalInput,NormalSelect,InputSearch,NormalModal,TableWrapper}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import _ from\"lodash\";import{history}from\"helpers\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import SimpleReactValidator from\"simple-react-validator\";// import { Treatment, Payment, EditCart } from './cart/index';\nimport service from\"assets/images/make-up-brush.png\";// import Discount from './cart/discount';\nimport{StaffList}from\"./StaffList\";export var TreatmentDoneClass=/*#__PURE__*/function(_Component){_inherits(TreatmentDoneClass,_Component);var _super=_createSuper(TreatmentDoneClass);function TreatmentDoneClass(){var _this;_classCallCheck(this,TreatmentDoneClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isOpen:false,currentIndex:-1,tstaffList:[],cartData:{},postFields:{work_point:\"\",times:\"\",helper_id:\"\"},updateFields:{Room:null,Source:null,new_remark:null},formFields:{cartid:\"\",Item:\"\",Price:\"\",Room:null,Source:null,add_duration:\"\",new_remark:null,times:null,work_point:\"\"},outletList:[],headerDetails:[{label:\"Employee name\",sortKey:false,width:\"130px\"},{label:\"WP1\",width:\"42px\",divClass:\"justify-content-end text-right\"},{label:\"St. time\",sortKey:false,width:\"55px\",divClass:\"justify-content-center\"},{label:\"End time\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"},{label:\"Duration\",sortKey:false,width:\"55px\",divClass:\"justify-content-center\"}],customerOption:[],// cartData: {},\nroomList:[],sourceList:[],staffList:[],limit:6,page:1,meta:{},duration:[],showPostError:false,showUpdateError:false};_this.componentDidMount=function(){// this.getCart();\n_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});var basicApptDetail=_this.props.basicApptDetail;if(basicApptDetail.custId){var formFields=_this.state.formFields;formFields[\"custId\"]=basicApptDetail.custId;formFields[\"custName\"]=basicApptDetail.custName;_this.setState({formFields:formFields});}var _this$state=_this.state,roomList=_this$state.roomList,sourceList=_this$state.sourceList,staffList=_this$state.staffList,cartData=_this$state.cartData,duration=_this$state.duration,tstaffList=_this$state.tstaffList;_this.props.getCommonApi(\"room/\").then(function(key){var status=key.status,data=key.data;var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;roomList.push({value:value.id,label:value.displayname});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({roomList:roomList});});_this.props.getCommonApi(\"source/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var value=_step2.value;sourceList.push({value:value.id,label:value.source_desc});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({sourceList:sourceList});}});_this.getStafflist();_this.getCart();_this.props.getCommonApi(\"treatment/Duration/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator3=_createForOfIteratorHelper(data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var value=_step3.value;duration.push({value:value,label:value});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState({duration:duration});}});};_this.getStafflist=function(data){var _this$state2=_this.state,page=_this$state2.page,limit=_this$state2.limit;_this.props.getCommonApi(\"empcartlist/?sales_staff=0&page=\".concat(page,\"&limit=\").concat(limit)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var status,data,staffList,meta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=key.status,data=key.data;console.log(key,\"sdfgsdfgsdfgdfg sdfgsdfgsdfg\");staffList=_this.state.staffList;meta=_this.state.meta;staffList=[];meta={};staffList=data;meta=data.meta.pagination;console.log(meta,\"metalist\");_this.setState({staffList:staffList,meta:meta});case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handleNext=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var page;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_this.state.page;page=page+1;_context2.next=4;return _this.setState({page:page});case 4:if(page>0){_this.getStafflist();}case 5:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleBack=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var page;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:page=_this.state.page;page=page-1;_context3.next=4;return _this.setState({page:page});case 4:if(page>0){_this.getStafflist();}case 5:case\"end\":return _context3.stop();}}},_callee3);}));_this.getCart=function(){var _this$state3=_this.state,roomList=_this$state3.roomList,sourceList=_this$state3.sourceList,staffList=_this$state3.staffList,cartData=_this$state3.cartData,duration=_this$state3.duration,tstaffList=_this$state3.tstaffList;_this.props.getCommonApi(\"tmpitemhelper/?cartid=\".concat(_this.props.cartId)).then(function(key){// let { status, data } = key;\n// if (status === 200) {\ncartData=key;tstaffList=key.data;_this.setState({cartData:cartData,tstaffList:tstaffList});_this.getDataFromRes(key);// }\n});};_this.getDataFromRes=function(data){var _this$state4=_this.state,formFields=_this$state4.formFields,cartData=_this$state4.cartData,updateFields=_this$state4.updateFields,postFields=_this$state4.postFields;formFields[\"Item\"]=data.value.Item;formFields[\"Price\"]=data.value.Price;formFields[\"Room\"]=data.value.Room;updateFields[\"Room\"]=data.value.Room;formFields[\"Source\"]=data.value.Source;updateFields[\"Source\"]=data.value.Source;formFields[\"add_duration\"]=data.value.add_duration;formFields[\"new_remark\"]=data.value.new_remark;updateFields[\"new_remark\"]=data.value.new_remark;postFields[\"times\"]=data.value.times;postFields[\"work_point\"]=data.value.work_point;_this.setState({formFields:formFields,updateFields:updateFields,postFields:postFields});};_this.getDateTime=function(data){var date=new Date(data);date=String(date).split(\" \");var date1=date[2]+\"th \"+date[1]+\", \"+date[3];var time=date[4].split(\":\");var time1=String(Number(time[0])>12?Number(time[0])-12:time[0])+\":\"+time[1]+(Number(time[0])>12?\"PM\":\"AM\");return time1+\", \"+date1;};_this.handleSubmit=function(id){_this.props.getCommonApi(\"tmpitemhelper/confirm/?cartid=\".concat(_this.props.cartId)).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(key){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(key.status===200){_this.props.handleModal();}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref4.apply(this,arguments);};}());};_this.handleDialog=function(){};_this.handleSearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;_this.props.getCommonApi(\"custappt/?search=\".concat(searchString)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});},500);}_this.debouncedFn();};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){var formFields;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:formFields=_this.state.formFields;formFields[\"custId\"]=data.id;formFields[\"custName\"]=data.cust_name;_this.setState({formFields:formFields,isOpenCustomer:false,customerOption:[]});_context5.next=6;return _this.props.updateForm(\"basicApptDetail\",formFields);case 6:console.log(_this.props.basicApptDetail,\"sdfsadfasdf\");case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x3){return _ref5.apply(this,arguments);};}();_this.handleCartCreated=function(){};_this.handleCheckout=function(){var isOpenPayment=_this.state.isOpenPayment;isOpenPayment=true;_this.setState({isOpenPayment:isOpenPayment});};_this.handleChange=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref6){var _ref6$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref6$target=_ref6.target,value=_ref6$target.value,name=_ref6$target.name;formFields=_this.state.formFields;formFields[name]=value;_context6.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x4){return _ref7.apply(this,arguments);};}();_this.handlePostChange=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_ref8){var _ref8$target,value,name,postFields;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_ref8$target=_ref8.target,value=_ref8$target.value,name=_ref8$target.name;postFields=_this.state.postFields;postFields[name]=value;_context7.next=5;return _this.setState({postFields:postFields});case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x5){return _ref9.apply(this,arguments);};}();_this.handleUpdateChange=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(_ref10){var _ref10$target,value,name,updateFields,event;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_ref10$target=_ref10.target,value=_ref10$target.value,name=_ref10$target.name;updateFields=_this.state.updateFields;updateFields[name]=value;_context8.next=5;return _this.setState({updateFields:updateFields});case 5:event={target:{value:value,name:name}};// this.handleUpdatestaff(event);\ncase 6:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x6){return _ref11.apply(this,arguments);};}();_this.handleAddstaff=function(item){var _this$state5=_this.state,tstaffList=_this$state5.tstaffList,formFields=_this$state5.formFields,cartData=_this$state5.cartData,postFields=_this$state5.postFields;var data={helper_id:item.id};if(postFields.work_point&&postFields.times){_this.props.commonCreateApi(\"tmpitemhelper/?cartid=\".concat(_this.props.cartId,\"&workcommpoints=\").concat(postFields.work_point,\"&times=\").concat(postFields.times),data).then(function(){_this.getCart();});}else{_this.setState({showPostError:true});}};_this.handleUpdatestaff=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(event,item,index){var _this$state6,tstaffList,formFields,cartData,updateFields,data;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_this$state6=_this.state,tstaffList=_this$state6.tstaffList,formFields=_this$state6.formFields,cartData=_this$state6.cartData,updateFields=_this$state6.updateFields;tstaffList[index][event.target.name]=event.target.value;_this.setState({tstaffList:tstaffList});data={};if(event.target.name===\"appt_fr_time\"){data={appt_fr_time:event.target.value,add_duration:formFields[\"add_duration\"]};}if(event.target.name===\"add_duration\"){data={appt_fr_time:item.appt_fr_time,add_duration:event.target.value};}// if (updateFields.Source && updateFields.Room) {\n_this.props.commonPatchApi(\"tmpitemhelper/\".concat(item.id,\"/?Room_Codeid=\").concat(updateFields.Room,\"&Source_Codeid=\").concat(updateFields.Source,\"&new_remark=\").concat(updateFields.new_remark),data).then(function(){_this.getCart();});// } else {\n//     this.setState({ showUpdateError: true })\n// }\ncase 7:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x7,_x8,_x9){return _ref12.apply(this,arguments);};}();_this.handleClearLine=function(){_this.props.commonDeleteApi(\"tmpitemhelper/delete/?clear_all=0&cartid=\".concat(_this.props.cartId)).then(function(){_this.getCart();});};_this.handleClearAll=function(){_this.props.commonDeleteApi(\"tmpitemhelper/delete/?clear_all=1&cartid=\".concat(_this.props.cartId)).then(function(){var _this$state7=_this.state,formFields=_this$state7.formFields,postFields=_this$state7.postFields;formFields[\"work_point\"]=\"\";postFields[\"times\"]=\"\";_this.setState({formFields:formFields,postFields:postFields});_this.getCart();});};return _this;}_createClass(TreatmentDoneClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state8=this.state,_this$state8$staffLis=_this$state8.staffList,staffList=_this$state8$staffLis===void 0?[]:_this$state8$staffLis,_this$state8$tstaffLi=_this$state8.tstaffList,tstaffList=_this$state8$tstaffLi===void 0?[]:_this$state8$tstaffLi,roomList=_this$state8.roomList,sourceList=_this$state8.sourceList,formFields=_this$state8.formFields,headerDetails=_this$state8.headerDetails,cartData=_this$state8.cartData,postFields=_this$state8.postFields,updateFields=_this$state8.updateFields,duration=_this$state8.duration,meta=_this$state8.meta;var _cartData$value=cartData.value,value=_cartData$value===void 0?{}:_cartData$value,_cartData$data=cartData.data,data=_cartData$data===void 0?{}:_cartData$data;var Item=value.Item,Price=value.Price,work_point=value.work_point;return/*#__PURE__*/React.createElement(\"div\",{className:\"row new-cart treatment-done\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 font-700 mb-3 title\"},\"Treatment Done\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Item\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2\"},Item),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Price\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2\"},Price),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Work Point\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:postFields.work_point,name:\"work_point\",onChange:this.handlePostChange,className:\"customer-name \".concat(!postFields.work_point?\"required\":\"\")})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Sessions\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:postFields.times,name:\"times\",onChange:this.handlePostChange,className:\"customer-name \".concat(!postFields.times?\"required\":\"\"),disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Room\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:roomList,value:updateFields.Room,name:\"Room\",onChange:this.handleUpdateChange,className:\"customer-name py-0\"// disabled={formFields.Room}\n})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Source\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:sourceList,value:updateFields.Source,name:\"Source\",onChange:this.handleUpdateChange,className:\"customer-name py-0\"// disabled={formFields.Source}\n})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"New Remark\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n// options={siteList}\n,{value:updateFields.new_remark,name:\"new_remark\",onChange:this.handleUpdateChange,className:\"customer-name\"// disabled={formFields.new_remark}\n}))),/*#__PURE__*/React.createElement(StaffList,{staffList:staffList,meta:meta,handleNext:function handleNext(){return _this2.handleNext();},handleBack:function handleBack(){return _this2.handleBack();},handleSelectedStaff:function handleSelectedStaff(item){return _this2.handleAddstaff(item);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 cart-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"item-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination// pageMeta={pageMeta}\n// isEmpty={tstaffList.length === 0 ? true:false}\n},tstaffList.length>0?tstaffList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"span\",{className:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.helper_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.wp1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(tstaffList.length>0?\"d-flex\":\"display-none\",\" align-items-center justify-content-center\")},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:duration,value:item.appt_fr_time,name:\"appt_fr_time\",onChange:function onChange(event){return _this2.handleUpdatestaff(event,item,index);},className:\"customer-name py-0\"})))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.appt_to_time)),/*#__PURE__*/React.createElement(\"td\",null,tstaffList.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(tstaffList.length>0?\"d-flex\":\"display-none\",\" align-items-center justify-content-center\")},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:duration,value:item.add_duration,name:\"add_duration\",onChange:function onChange(event){return _this2.handleUpdatestaff(event,item,index);},className:\"customer-name p-0\"}))):\"\"));}):null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pt-4 action-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 d-flex\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",resetbg:true,className:\"fs-15\",label:\"Clear Line\",outline:false,onClick:this.handleClearLine}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",resetbg:true,className:\"fs-15\",label:\"Clear All\",onClick:this.handleClearAll})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\" fs-15 confirm\",label:\"Confirm\",outline:false,onClick:this.handleSubmit})))));}}]);return TreatmentDoneClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{selected_cstomer:state.common.selected_cstomer,basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var TreatmentDone=connect(mapStateToProps,mapDispatchToProps)(TreatmentDoneClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Cart/cart/treatmentDone.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","service","StaffList","TreatmentDoneClass","state","isOpen","currentIndex","tstaffList","cartData","postFields","work_point","times","helper_id","updateFields","Room","Source","new_remark","formFields","cartid","Item","Price","add_duration","outletList","headerDetails","label","sortKey","width","divClass","customerOption","roomList","sourceList","staffList","limit","page","meta","duration","showPostError","showUpdateError","componentDidMount","validator","element","message","autoForceUpdate","basicApptDetail","props","custId","custName","setState","then","key","status","data","value","push","id","displayname","source_desc","getStafflist","getCart","console","log","pagination","handleNext","handleBack","cartId","getDataFromRes","getDateTime","date","Date","String","split","date1","time","time1","Number","handleSubmit","handleModal","handleDialog","handleSearch","event","persist","debouncedFn","debounce","searchString","target","handleSelectCustomer","cust_name","isOpenCustomer","handleCartCreated","handleCheckout","isOpenPayment","handleChange","name","handlePostChange","handleUpdateChange","handleAddstaff","item","handleUpdatestaff","index","appt_fr_time","handleClearLine","handleClearAll","handlePagination","length","map","helper_name","wp1","appt_to_time","mapStateToProps","selected_cstomer","common","appointment","mapDispatchToProps","dispatch","TreatmentDone"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalButton,\r\n  NormalInput,\r\n  NormalSelect,\r\n  InputSearch,\r\n  NormalModal,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\n// import { Treatment, Payment, EditCart } from './cart/index';\r\nimport service from \"assets/images/make-up-brush.png\";\r\n// import Discount from './cart/discount';\r\nimport { StaffList } from \"./StaffList\";\r\n\r\nexport class TreatmentDoneClass extends Component {\r\n  state = {\r\n    isOpen: false,\r\n    currentIndex: -1,\r\n    tstaffList: [],\r\n    cartData: {},\r\n    postFields: {\r\n      work_point: \"\",\r\n      times: \"\",\r\n      helper_id: \"\",\r\n    },\r\n    updateFields: {\r\n      Room: null,\r\n      Source: null,\r\n      new_remark: null,\r\n    },\r\n    formFields: {\r\n      cartid: \"\",\r\n      Item: \"\",\r\n      Price: \"\",\r\n      Room: null,\r\n      Source: null,\r\n      add_duration: \"\",\r\n      new_remark: null,\r\n      times: null,\r\n      work_point: \"\",\r\n    },\r\n    outletList: [],\r\n    headerDetails: [\r\n      { label: \"Employee name\", sortKey: false, width: \"130px\" },\r\n      {\r\n        label: \"WP1\",\r\n        width: \"42px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"St. time\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"End time\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Duration\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n    ],\r\n    customerOption: [],\r\n    // cartData: {},\r\n    roomList: [],\r\n    sourceList: [],\r\n    staffList: [],\r\n    limit: 6,\r\n    page: 1,\r\n    meta: {},\r\n    duration: [],\r\n    showPostError: false,\r\n    showUpdateError: false,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    // this.getCart();\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    let { basicApptDetail } = this.props;\r\n    if (basicApptDetail.custId) {\r\n      let { formFields } = this.state;\r\n      formFields[\"custId\"] = basicApptDetail.custId;\r\n      formFields[\"custName\"] = basicApptDetail.custName;\r\n      this.setState({ formFields });\r\n    }\r\n    let { roomList, sourceList, staffList, cartData, duration, tstaffList } =\r\n      this.state;\r\n    this.props.getCommonApi(\"room/\").then(key => {\r\n      let { status, data } = key;\r\n      for (let value of data) {\r\n        roomList.push({ value: value.id, label: value.displayname });\r\n      }\r\n      this.setState({ roomList });\r\n    });\r\n    this.props.getCommonApi(`source/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          sourceList.push({ value: value.id, label: value.source_desc });\r\n        }\r\n        this.setState({ sourceList });\r\n      }\r\n    });\r\n    this.getStafflist();\r\n\r\n    this.getCart();\r\n    this.props.getCommonApi(`treatment/Duration/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          duration.push({ value: value, label: value });\r\n        }\r\n        this.setState({ duration });\r\n      }\r\n    });\r\n  };\r\n\r\n  getStafflist = data => {\r\n    let { page, limit } = this.state;\r\n    this.props\r\n      .getCommonApi(`empcartlist/?sales_staff=0&page=${page}&limit=${limit}`)\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        console.log(key, \"sdfgsdfgsdfgdfg sdfgsdfgsdfg\");\r\n        let { staffList } = this.state;\r\n        let { meta } = this.state;\r\n        staffList = [];\r\n        meta = {};\r\n        staffList = data;\r\n        meta = data.meta.pagination;\r\n        console.log(meta, \"metalist\");\r\n        this.setState({\r\n          staffList,\r\n          meta,\r\n        });\r\n      });\r\n  };\r\n\r\n  handleNext = async () => {\r\n    let { page } = this.state;\r\n    page = page + 1;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    if (page > 0) {\r\n      this.getStafflist();\r\n    }\r\n  };\r\n\r\n  handleBack = async () => {\r\n    let { page } = this.state;\r\n    page = page - 1;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    if (page > 0) {\r\n      this.getStafflist();\r\n    }\r\n  };\r\n\r\n  getCart = () => {\r\n    let { roomList, sourceList, staffList, cartData, duration, tstaffList } =\r\n      this.state;\r\n    this.props\r\n      .getCommonApi(`tmpitemhelper/?cartid=${this.props.cartId}`)\r\n      .then(key => {\r\n        // let { status, data } = key;\r\n        // if (status === 200) {\r\n        cartData = key;\r\n        tstaffList = key.data;\r\n        this.setState({ cartData, tstaffList });\r\n        this.getDataFromRes(key);\r\n        // }\r\n      });\r\n  };\r\n\r\n  getDataFromRes = data => {\r\n    let { formFields, cartData, updateFields, postFields } = this.state;\r\n    formFields[\"Item\"] = data.value.Item;\r\n    formFields[\"Price\"] = data.value.Price;\r\n    formFields[\"Room\"] = data.value.Room;\r\n    updateFields[\"Room\"] = data.value.Room;\r\n    formFields[\"Source\"] = data.value.Source;\r\n    updateFields[\"Source\"] = data.value.Source;\r\n    formFields[\"add_duration\"] = data.value.add_duration;\r\n    formFields[\"new_remark\"] = data.value.new_remark;\r\n    updateFields[\"new_remark\"] = data.value.new_remark;\r\n    postFields[\"times\"] = data.value.times;\r\n    postFields[\"work_point\"] = data.value.work_point;\r\n    this.setState({\r\n      formFields,\r\n      updateFields,\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  getDateTime = data => {\r\n    let date = new Date(data);\r\n    date = String(date).split(\" \");\r\n    let date1 = date[2] + \"th \" + date[1] + \", \" + date[3];\r\n    let time = date[4].split(\":\");\r\n    let time1 =\r\n      String(Number(time[0]) > 12 ? Number(time[0]) - 12 : time[0]) +\r\n      \":\" +\r\n      time[1] +\r\n      (Number(time[0]) > 12 ? \"PM\" : \"AM\");\r\n    return time1 + \", \" + date1;\r\n  };\r\n\r\n  handleSubmit = id => {\r\n    this.props\r\n      .getCommonApi(`tmpitemhelper/confirm/?cartid=${this.props.cartId}`)\r\n      .then(async key => {\r\n        if (key.status === 200) {\r\n          this.props.handleModal();\r\n        }\r\n      });\r\n  };\r\n\r\n  handleDialog = () => {};\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        this.props\r\n          .getCommonApi(`custappt/?search=${searchString}`)\r\n          .then(key => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n              // for (let value of data) {\r\n              //     customerList.push({ value: value.id, label: value.emp_name })\r\n              // }\r\n              this.setState({ customerOption: data });\r\n            }\r\n          });\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleSelectCustomer = async data => {\r\n    let { formFields } = this.state;\r\n    formFields[\"custId\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    this.setState({ formFields, isOpenCustomer: false, customerOption: [] });\r\n    await this.props.updateForm(\"basicApptDetail\", formFields);\r\n    console.log(this.props.basicApptDetail, \"sdfsadfasdf\");\r\n  };\r\n\r\n  handleCartCreated = () => {};\r\n\r\n  handleCheckout = () => {\r\n    let { isOpenPayment } = this.state;\r\n    isOpenPayment = true;\r\n    this.setState({ isOpenPayment });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    // this.props.updateForm('customerDetail', formFields)\r\n    // await this.props.updateForm('appointmentCustomerDetail', formFields)\r\n  };\r\n\r\n  handlePostChange = async ({ target: { value, name } }) => {\r\n    let { postFields } = this.state;\r\n    postFields[name] = value;\r\n    await this.setState({\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  handleUpdateChange = async ({ target: { value, name } }) => {\r\n    let { updateFields } = this.state;\r\n    updateFields[name] = value;\r\n    await this.setState({\r\n      updateFields,\r\n    });\r\n    let event = { target: { value: value, name: name } };\r\n    // this.handleUpdatestaff(event);\r\n  };\r\n\r\n  handleAddstaff = item => {\r\n    let { tstaffList, formFields, cartData, postFields } = this.state;\r\n    let data = {\r\n      helper_id: item.id,\r\n    };\r\n    if (postFields.work_point && postFields.times) {\r\n      this.props\r\n        .commonCreateApi(\r\n          `tmpitemhelper/?cartid=${this.props.cartId}&workcommpoints=${postFields.work_point}&times=${postFields.times}`,\r\n          data\r\n        )\r\n        .then(() => {\r\n          this.getCart();\r\n        });\r\n    } else {\r\n      this.setState({ showPostError: true });\r\n    }\r\n  };\r\n\r\n  handleUpdatestaff = async (event, item, index) => {\r\n    let { tstaffList, formFields, cartData, updateFields } = this.state;\r\n    tstaffList[index][event.target.name] = event.target.value;\r\n    this.setState({\r\n      tstaffList,\r\n    });\r\n    let data = {};\r\n    if (event.target.name === \"appt_fr_time\") {\r\n      data = {\r\n        appt_fr_time: event.target.value,\r\n        add_duration: formFields[\"add_duration\"],\r\n      };\r\n    }\r\n    if (event.target.name === \"add_duration\") {\r\n      data = {\r\n        appt_fr_time: item.appt_fr_time,\r\n        add_duration: event.target.value,\r\n      };\r\n    }\r\n\r\n    // if (updateFields.Source && updateFields.Room) {\r\n    this.props\r\n      .commonPatchApi(\r\n        `tmpitemhelper/${item.id}/?Room_Codeid=${updateFields.Room}&Source_Codeid=${updateFields.Source}&new_remark=${updateFields.new_remark}`,\r\n        data\r\n      )\r\n      .then(() => {\r\n        this.getCart();\r\n      });\r\n    // } else {\r\n    //     this.setState({ showUpdateError: true })\r\n    // }\r\n  };\r\n\r\n  handleClearLine = () => {\r\n    this.props\r\n      .commonDeleteApi(\r\n        `tmpitemhelper/delete/?clear_all=0&cartid=${this.props.cartId}`\r\n      )\r\n      .then(() => {\r\n        this.getCart();\r\n      });\r\n  };\r\n\r\n  handleClearAll = () => {\r\n    this.props\r\n      .commonDeleteApi(\r\n        `tmpitemhelper/delete/?clear_all=1&cartid=${this.props.cartId}`\r\n      )\r\n      .then(() => {\r\n        let { formFields, postFields } = this.state;\r\n        formFields[\"work_point\"] = \"\";\r\n        postFields[\"times\"] = \"\";\r\n        this.setState({\r\n          formFields,\r\n          postFields,\r\n        });\r\n        this.getCart();\r\n      });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      staffList = [],\r\n      tstaffList = [],\r\n      roomList,\r\n      sourceList,\r\n      formFields,\r\n      headerDetails,\r\n      cartData,\r\n      postFields,\r\n      updateFields,\r\n      duration,\r\n      meta,\r\n    } = this.state;\r\n    let { value = {}, data = {} } = cartData;\r\n    let { Item, Price, work_point } = value;\r\n    return (\r\n      <div className=\"row new-cart treatment-done\">\r\n        <div className=\"col-12\">\r\n          <p className=\"fs-18 font-700 mb-3 title\">Treatment Done</p>\r\n        </div>\r\n        <div className=\"col-6 mb-2\">\r\n          <label className=\"text-left text-black common-label-text \">\r\n            Item\r\n          </label>\r\n          <div className=\"input-group mb-2\">{Item}</div>\r\n          <label className=\"text-left text-black common-label-text \">\r\n            Price\r\n          </label>\r\n          <div className=\"input-group mb-2\">{Price}</div>\r\n          <label className=\"text-left text-black common-label-text \">\r\n            Work Point\r\n          </label>\r\n          <div className=\"input-group\">\r\n            <NormalInput\r\n              value={postFields.work_point}\r\n              name=\"work_point\"\r\n              onChange={this.handlePostChange}\r\n              className={`customer-name ${\r\n                !postFields.work_point ? \"required\" : \"\"\r\n              }`}\r\n            />\r\n          </div>\r\n          <label className=\"text-left text-black common-label-text \">\r\n            Sessions\r\n          </label>\r\n          <div className=\"input-group\">\r\n            <NormalInput\r\n              value={postFields.times}\r\n              name=\"times\"\r\n              onChange={this.handlePostChange}\r\n              className={`customer-name ${!postFields.times ? \"required\" : \"\"}`}\r\n              disabled\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-6 mb-2\">\r\n          <div>\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Room\r\n            </label>\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <NormalSelect\r\n              // placeholder=\"Enter here\"\r\n              options={roomList}\r\n              value={updateFields.Room}\r\n              name=\"Room\"\r\n              onChange={this.handleUpdateChange}\r\n              className=\"customer-name py-0\"\r\n              // disabled={formFields.Room}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Source\r\n            </label>\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <NormalSelect\r\n              // placeholder=\"Enter here\"\r\n              options={sourceList}\r\n              value={updateFields.Source}\r\n              name=\"Source\"\r\n              onChange={this.handleUpdateChange}\r\n              className=\"customer-name py-0\"\r\n              // disabled={formFields.Source}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-left text-black common-label-text \">\r\n              New Remark\r\n            </label>\r\n          </div>\r\n          <div className=\"input-group\">\r\n            <NormalInput\r\n              // placeholder=\"Enter here\"\r\n              // options={siteList}\r\n              value={updateFields.new_remark}\r\n              name=\"new_remark\"\r\n              onChange={this.handleUpdateChange}\r\n              className=\"customer-name\"\r\n              // disabled={formFields.new_remark}\r\n            />\r\n          </div>\r\n        </div>\r\n        <StaffList\r\n          staffList={staffList}\r\n          meta={meta}\r\n          handleNext={() => this.handleNext()}\r\n          handleBack={() => this.handleBack()}\r\n          handleSelectedStaff={item => this.handleAddstaff(item)}\r\n        />\r\n        <div className={`col-12 cart-item`}>\r\n          <div className={`item-list`}>\r\n            <div className=\"table\">\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n                // pageMeta={pageMeta}\r\n                // isEmpty={tstaffList.length === 0 ? true:false}\r\n              >\r\n                {tstaffList.length > 0\r\n                  ? tstaffList.map((item, index) => {\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td className=\"position-relative status-type\">\r\n                            <span className={``}></span>\r\n                            <div className=\"text-left\">{item.helper_name}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">{item.wp1}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div\r\n                              className={`${\r\n                                tstaffList.length > 0\r\n                                  ? \"d-flex\"\r\n                                  : \"display-none\"\r\n                              } align-items-center justify-content-center`}\r\n                            >\r\n                              <div className=\"input-group\">\r\n                                <NormalSelect\r\n                                  // placeholder=\"Enter here\"\r\n                                  options={duration}\r\n                                  value={item.appt_fr_time}\r\n                                  name=\"appt_fr_time\"\r\n                                  onChange={event =>\r\n                                    this.handleUpdatestaff(event, item, index)\r\n                                  }\r\n                                  className=\"customer-name py-0\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">\r\n                              {item.appt_to_time}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            {tstaffList.length > 0 ? (\r\n                              <div\r\n                                className={`${\r\n                                  tstaffList.length > 0\r\n                                    ? \"d-flex\"\r\n                                    : \"display-none\"\r\n                                } align-items-center justify-content-center`}\r\n                              >\r\n                                <div className=\"input-group\">\r\n                                  <NormalSelect\r\n                                    // placeholder=\"Enter here\"\r\n                                    options={duration}\r\n                                    value={item.add_duration}\r\n                                    name=\"add_duration\"\r\n                                    onChange={event =>\r\n                                      this.handleUpdatestaff(event, item, index)\r\n                                    }\r\n                                    className=\"customer-name p-0\"\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12 pt-4 action-bar\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6 d-flex\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                resetbg={true}\r\n                className=\"fs-15\"\r\n                label=\"Clear Line\"\r\n                outline={false}\r\n                onClick={this.handleClearLine}\r\n              />\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                resetbg={true}\r\n                className=\"fs-15\"\r\n                label=\"Clear All\"\r\n                onClick={this.handleClearAll}\r\n              />\r\n            </div>\r\n            <div className=\"col-6 text-right\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label=\"Confirm\"\r\n                outline={false}\r\n                onClick={this.handleSubmit}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentDone = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(TreatmentDoneClass);\r\n"]},"metadata":{},"sourceType":"module"}