{"ast":null,"code":"/**\r\n * DevExtreme (file_management/provider_base.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _data = require(\"../core/utils/data\");\n\nvar _common = require(\"../core/utils/common\");\n\nvar _date_serialization = _interopRequireDefault(require(\"../core/utils/date_serialization\"));\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _file_system_item = _interopRequireDefault(require(\"./file_system_item\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar DEFAULT_FILE_UPLOAD_CHUNK_SIZE = 2e5;\n\nvar FileSystemProviderBase = function () {\n  function FileSystemProviderBase(options) {\n    _classCallCheck(this, FileSystemProviderBase);\n\n    options = (0, _common.ensureDefined)(options, {});\n    this._keyGetter = (0, _data.compileGetter)(this._getKeyExpr(options));\n    this._nameGetter = (0, _data.compileGetter)(this._getNameExpr(options));\n    this._isDirGetter = (0, _data.compileGetter)(this._getIsDirExpr(options));\n    this._sizeGetter = (0, _data.compileGetter)(this._getSizeExpr(options));\n    this._dateModifiedGetter = (0, _data.compileGetter)(this._getDateModifiedExpr(options));\n    this._thumbnailGetter = (0, _data.compileGetter)(options.thumbnailExpr || \"thumbnail\");\n  }\n\n  _createClass(FileSystemProviderBase, [{\n    key: \"getItems\",\n    value: function (parentDirectory) {\n      return [];\n    }\n  }, {\n    key: \"renameItem\",\n    value: function (item, name) {}\n  }, {\n    key: \"createDirectory\",\n    value: function (parentDirectory, name) {}\n  }, {\n    key: \"deleteItems\",\n    value: function (items) {}\n  }, {\n    key: \"moveItems\",\n    value: function (items, destinationDirectory) {}\n  }, {\n    key: \"copyItems\",\n    value: function (items, destinationDirectory) {}\n  }, {\n    key: \"uploadFileChunk\",\n    value: function (fileData, chunksInfo, destinationDirectory) {}\n  }, {\n    key: \"abortFileUpload\",\n    value: function (fileData, chunksInfo, destinationDirectory) {}\n  }, {\n    key: \"downloadItems\",\n    value: function (items) {}\n  }, {\n    key: \"getItemsContent\",\n    value: function (items) {}\n  }, {\n    key: \"getFileUploadChunkSize\",\n    value: function () {\n      return DEFAULT_FILE_UPLOAD_CHUNK_SIZE;\n    }\n  }, {\n    key: \"_getItemsByType\",\n    value: function (path, folders) {\n      return this.getItems(path).filter(function (item) {\n        return item.isDirectory === folders;\n      });\n    }\n  }, {\n    key: \"_convertDataObjectsToFileItems\",\n    value: function (entries, pathInfo) {\n      var _this = this;\n\n      var result = [];\n      (0, _iterator.each)(entries, function (_, entry) {\n        var fileItem = _this._createFileItem(entry, pathInfo);\n\n        result.push(fileItem);\n      });\n      return result;\n    }\n  }, {\n    key: \"_createFileItem\",\n    value: function (dataObj, pathInfo) {\n      var fileItem = new _file_system_item.default(pathInfo, this._nameGetter(dataObj), !!this._isDirGetter(dataObj));\n      fileItem.size = this._sizeGetter(dataObj);\n\n      if (void 0 === fileItem.size) {\n        fileItem.size = 0;\n      }\n\n      fileItem.dateModified = _date_serialization.default.deserializeDate(this._dateModifiedGetter(dataObj));\n\n      if (void 0 === fileItem.dateModified) {\n        fileItem.dateModified = new Date();\n      }\n\n      if (fileItem.isDirectory) {\n        fileItem.hasSubDirectories = this._hasSubDirs(dataObj);\n      }\n\n      fileItem.key = this._keyGetter(dataObj);\n\n      if (!fileItem.key) {\n        fileItem.key = fileItem.relativeName;\n      }\n\n      fileItem.thumbnail = this._thumbnailGetter(dataObj) || \"\";\n      fileItem.dataItem = dataObj;\n      return fileItem;\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function (dataObj) {\n      return true;\n    }\n  }, {\n    key: \"_getKeyExpr\",\n    value: function (options) {\n      return options.keyExpr || this._defaultKeyExpr;\n    }\n  }, {\n    key: \"_defaultKeyExpr\",\n    value: function (fileItem) {\n      if (2 === arguments.length) {\n        fileItem.__KEY__ = arguments[1];\n        return;\n      }\n\n      return Object.prototype.hasOwnProperty.call(fileItem, \"__KEY__\") ? fileItem.__KEY__ : null;\n    }\n  }, {\n    key: \"_getNameExpr\",\n    value: function (options) {\n      return options.nameExpr || \"name\";\n    }\n  }, {\n    key: \"_getIsDirExpr\",\n    value: function (options) {\n      return options.isDirectoryExpr || \"isDirectory\";\n    }\n  }, {\n    key: \"_getSizeExpr\",\n    value: function (options) {\n      return options.sizeExpr || \"size\";\n    }\n  }, {\n    key: \"_getDateModifiedExpr\",\n    value: function (options) {\n      return options.dateModifiedExpr || \"dateModified\";\n    }\n  }, {\n    key: \"_executeActionAsDeferred\",\n    value: function (action, keepResult) {\n      var deferred = new _deferred.Deferred();\n\n      try {\n        var result = action();\n\n        if ((0, _type.isPromise)(result)) {\n          (0, _deferred.fromPromise)(result).done(function (userResult) {\n            return deferred.resolve(keepResult && userResult || void 0);\n          }).fail(function (error) {\n            return deferred.reject(error);\n          });\n        } else {\n          deferred.resolve(keepResult && result || void 0);\n        }\n      } catch (error) {\n        return deferred.reject(error);\n      }\n\n      return deferred.promise();\n    }\n  }]);\n\n  return FileSystemProviderBase;\n}();\n\nvar _default = FileSystemProviderBase;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/file_management/provider_base.js"],"names":["exports","default","_data","require","_common","_date_serialization","_interopRequireDefault","_iterator","_type","_deferred","_file_system_item","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","DEFAULT_FILE_UPLOAD_CHUNK_SIZE","FileSystemProviderBase","options","ensureDefined","_keyGetter","compileGetter","_getKeyExpr","_nameGetter","_getNameExpr","_isDirGetter","_getIsDirExpr","_sizeGetter","_getSizeExpr","_dateModifiedGetter","_getDateModifiedExpr","_thumbnailGetter","thumbnailExpr","value","parentDirectory","item","name","items","destinationDirectory","fileData","chunksInfo","path","folders","getItems","filter","isDirectory","entries","pathInfo","_this","result","each","_","entry","fileItem","_createFileItem","push","dataObj","size","dateModified","deserializeDate","Date","hasSubDirectories","_hasSubDirs","relativeName","thumbnail","dataItem","keyExpr","_defaultKeyExpr","arguments","__KEY__","hasOwnProperty","call","nameExpr","isDirectoryExpr","sizeExpr","dateModifiedExpr","action","keepResult","deferred","Deferred","isPromise","fromPromise","done","userResult","resolve","fail","error","reject","promise","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (file_management/provider_base.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _data = require(\"../core/utils/data\");\r\nvar _common = require(\"../core/utils/common\");\r\nvar _date_serialization = _interopRequireDefault(require(\"../core/utils/date_serialization\"));\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _file_system_item = _interopRequireDefault(require(\"./file_system_item\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar DEFAULT_FILE_UPLOAD_CHUNK_SIZE = 2e5;\r\nvar FileSystemProviderBase = function() {\r\n    function FileSystemProviderBase(options) {\r\n        _classCallCheck(this, FileSystemProviderBase);\r\n        options = (0, _common.ensureDefined)(options, {});\r\n        this._keyGetter = (0, _data.compileGetter)(this._getKeyExpr(options));\r\n        this._nameGetter = (0, _data.compileGetter)(this._getNameExpr(options));\r\n        this._isDirGetter = (0, _data.compileGetter)(this._getIsDirExpr(options));\r\n        this._sizeGetter = (0, _data.compileGetter)(this._getSizeExpr(options));\r\n        this._dateModifiedGetter = (0, _data.compileGetter)(this._getDateModifiedExpr(options));\r\n        this._thumbnailGetter = (0, _data.compileGetter)(options.thumbnailExpr || \"thumbnail\")\r\n    }\r\n    _createClass(FileSystemProviderBase, [{\r\n        key: \"getItems\",\r\n        value: function(parentDirectory) {\r\n            return []\r\n        }\r\n    }, {\r\n        key: \"renameItem\",\r\n        value: function(item, name) {}\r\n    }, {\r\n        key: \"createDirectory\",\r\n        value: function(parentDirectory, name) {}\r\n    }, {\r\n        key: \"deleteItems\",\r\n        value: function(items) {}\r\n    }, {\r\n        key: \"moveItems\",\r\n        value: function(items, destinationDirectory) {}\r\n    }, {\r\n        key: \"copyItems\",\r\n        value: function(items, destinationDirectory) {}\r\n    }, {\r\n        key: \"uploadFileChunk\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {}\r\n    }, {\r\n        key: \"abortFileUpload\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {}\r\n    }, {\r\n        key: \"downloadItems\",\r\n        value: function(items) {}\r\n    }, {\r\n        key: \"getItemsContent\",\r\n        value: function(items) {}\r\n    }, {\r\n        key: \"getFileUploadChunkSize\",\r\n        value: function() {\r\n            return DEFAULT_FILE_UPLOAD_CHUNK_SIZE\r\n        }\r\n    }, {\r\n        key: \"_getItemsByType\",\r\n        value: function(path, folders) {\r\n            return this.getItems(path).filter(function(item) {\r\n                return item.isDirectory === folders\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_convertDataObjectsToFileItems\",\r\n        value: function(entries, pathInfo) {\r\n            var _this = this;\r\n            var result = [];\r\n            (0, _iterator.each)(entries, function(_, entry) {\r\n                var fileItem = _this._createFileItem(entry, pathInfo);\r\n                result.push(fileItem)\r\n            });\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_createFileItem\",\r\n        value: function(dataObj, pathInfo) {\r\n            var fileItem = new _file_system_item.default(pathInfo, this._nameGetter(dataObj), (!!this._isDirGetter(dataObj)));\r\n            fileItem.size = this._sizeGetter(dataObj);\r\n            if (void 0 === fileItem.size) {\r\n                fileItem.size = 0\r\n            }\r\n            fileItem.dateModified = _date_serialization.default.deserializeDate(this._dateModifiedGetter(dataObj));\r\n            if (void 0 === fileItem.dateModified) {\r\n                fileItem.dateModified = new Date\r\n            }\r\n            if (fileItem.isDirectory) {\r\n                fileItem.hasSubDirectories = this._hasSubDirs(dataObj)\r\n            }\r\n            fileItem.key = this._keyGetter(dataObj);\r\n            if (!fileItem.key) {\r\n                fileItem.key = fileItem.relativeName\r\n            }\r\n            fileItem.thumbnail = this._thumbnailGetter(dataObj) || \"\";\r\n            fileItem.dataItem = dataObj;\r\n            return fileItem\r\n        }\r\n    }, {\r\n        key: \"_hasSubDirs\",\r\n        value: function(dataObj) {\r\n            return true\r\n        }\r\n    }, {\r\n        key: \"_getKeyExpr\",\r\n        value: function(options) {\r\n            return options.keyExpr || this._defaultKeyExpr\r\n        }\r\n    }, {\r\n        key: \"_defaultKeyExpr\",\r\n        value: function(fileItem) {\r\n            if (2 === arguments.length) {\r\n                fileItem.__KEY__ = arguments[1];\r\n                return\r\n            }\r\n            return Object.prototype.hasOwnProperty.call(fileItem, \"__KEY__\") ? fileItem.__KEY__ : null\r\n        }\r\n    }, {\r\n        key: \"_getNameExpr\",\r\n        value: function(options) {\r\n            return options.nameExpr || \"name\"\r\n        }\r\n    }, {\r\n        key: \"_getIsDirExpr\",\r\n        value: function(options) {\r\n            return options.isDirectoryExpr || \"isDirectory\"\r\n        }\r\n    }, {\r\n        key: \"_getSizeExpr\",\r\n        value: function(options) {\r\n            return options.sizeExpr || \"size\"\r\n        }\r\n    }, {\r\n        key: \"_getDateModifiedExpr\",\r\n        value: function(options) {\r\n            return options.dateModifiedExpr || \"dateModified\"\r\n        }\r\n    }, {\r\n        key: \"_executeActionAsDeferred\",\r\n        value: function(action, keepResult) {\r\n            var deferred = new _deferred.Deferred;\r\n            try {\r\n                var result = action();\r\n                if ((0, _type.isPromise)(result)) {\r\n                    (0, _deferred.fromPromise)(result).done(function(userResult) {\r\n                        return deferred.resolve(keepResult && userResult || void 0)\r\n                    }).fail(function(error) {\r\n                        return deferred.reject(error)\r\n                    })\r\n                } else {\r\n                    deferred.resolve(keepResult && result || void 0)\r\n                }\r\n            } catch (error) {\r\n                return deferred.reject(error)\r\n            }\r\n            return deferred.promise()\r\n        }\r\n    }]);\r\n    return FileSystemProviderBase\r\n}();\r\nvar _default = FileSystemProviderBase;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}