{"ast":null,"code":"import _objectSpread from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalSelect,NormalButton,NormalModal,NormalInput,NormalDateTime,NormalCheckbox}from\"component/common\";import\"./style.scss\";import{updateForm,getSelectedTreatmentList}from\"redux/actions/appointment\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import SimpleReactValidator from\"simple-react-validator\";import closeIcon from\"assets/images/close.png\";import req_therapist from\"assets/images/app-icons/1.png\";import{getCommonApi,commonCreateApi,commonPatchApi}from\"redux/actions/common\";import{dateFormat}from\"service/helperFunctions\";import _ from\"lodash\";import{TableWrapper}from\"component/common\";import{TreatmentPackage}from\"./modal/index\";import{Toast}from\"service/toast\";import{AppointmentForm}from\"./AppointmentForm\";import{history}from\"helpers\";export var NewSelectTreatmentClass=/*#__PURE__*/function(_Component){_inherits(NewSelectTreatmentClass,_Component);var _super=_createSuper(NewSelectTreatmentClass);function NewSelectTreatmentClass(props){var _this;_classCallCheck(this,NewSelectTreatmentClass);_this=_super.call(this,props);_this.state={treatmentDetail:[],formFields:{start_time:\"\",end_time:\"\",Item_Codeid:null,add_duration:\"\",emp_no:0,requesttherapist:false,Item_CodeName:\"\",edit_remark:\"\",recur_days:null,recur_qty:null,item_text:null,checktype:\"\",treat_parentcode:null},selectedList:[{start_time:\"\",end_time:\"\",Item_Codeid:null,add_duration:\"\",emp_no:0,requesttherapist:false,Item_CodeName:\"\",edit_remark:\"\",recur_days:null,recur_qty:null,item_text:null,checktype:\"\",treat_parentcode:null}],outletOption:[],staffOption:[],roomOption:[],list:[],isOpenModal:false,categoryList:[],treatmentList:[],siteList:[],treatmentField:{category:\"\",treatment:\"\"},timeDropdown:[],duration:[],index:null,search:\"\",selectTreatmentId:\"\",treatmentListHeader:[{label:\"Category\",className:\"w-50\"},{label:\"Service\",className:\"w-75\"},{label:\"Duration\",className:\"w-25\"},{label:\"price\",className:\"w-50\"}],meta:{},isTreatementModal:false,appointmentId:null,PackageIndex:0,selectedRec_days:null,selectedRec_qty:null,recurringList:[],recurringSelectedItems:[],recurringSelectAll:false,settingData:{},PasteAppointmentId:0};_this.showErrorMessage=function(){_this.child.onFocus();};_this.timeToDateFormat=function(TimeValue){var time=String(TimeValue).split(\":\");var newTime=new Date(new Date().setHours(time[0],time[1],0,0));return newTime;};_this.handleRenderApptDetail=function(appt_id,copy){var _this$state=_this.state,formFields=_this$state.formFields,selectedList=_this$state.selectedList,recurringList=_this$state.recurringList;_this.props.getCommonApi(\"appointmentresources/\".concat(appt_id,\"/\")).then(function(key){var status=key.status,data=key.data;console.log(data.recur_lst,\"RecurringAppointmentrelatedList\");if(status===200){console.log(data,\"selectedCustomer\");var startTime=_this.timeToDateFormat(data.start_time);if(copy){selectedList[0][\"end_time\"]=_this.addTimes(selectedList[0][\"start_time\"],data.add_duration);formFields[\"end_time\"]=_this.addTimes(formFields[\"start_time\"],data.add_duration);recurringList=[];}else{formFields[\"start_time\"]=data?startTime:\"\";formFields[\"end_time\"]=data?data.end_time:\"\";selectedList[0][\"start_time\"]=data?startTime:\"\";selectedList[0][\"end_time\"]=data?data.end_time:\"\";formFields[\"emp_no\"]=data.emp_id;selectedList[0][\"emp_no\"]=data.emp_id;var _iterator=_createForOfIteratorHelper(data.recur_lst),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;recurringList.push({id:value.id,date:value.date,appt_status:value.appt_status,start_time:value.start_time,end_time:value.end_time,item_name:value.item_name,Item_Codeid:value.Item_Codeid,emp_name:value.emp_name,emp_id:value.emp_id,requesttherapist:value.requesttherapist,add_duration:value.add_duration,selected:false,checktype:value.checktype,treat_parentcode:value.treat_parentcode});}}catch(err){_iterator.e(err);}finally{_iterator.f();}}formFields[\"Item_Codeid\"]=data.Item_Codeid;formFields[\"Item_CodeName\"]=data.item_name;formFields[\"add_duration\"]=data.add_duration;formFields[\"edit_remark\"]=\"\";formFields[\"requesttherapist\"]=data.requesttherapist;formFields[\"recur_days\"]=data.recur_days;formFields[\"recur_qty\"]=data.recur_qty;formFields[\"item_text\"]=data.item_name;formFields[\"checktype\"]=data.checktype;formFields[\"treat_parentcode\"]=data.treat_parentcode;selectedList[0][\"Item_Codeid\"]=data.Item_Codeid;selectedList[0][\"Item_CodeName\"]=data.item_name;selectedList[0][\"add_duration\"]=data.add_duration;selectedList[0][\"edit_remark\"]=\"\";selectedList[0][\"requesttherapist\"]=data.requesttherapist;selectedList[0][\"recur_days\"]=data.recur_days;selectedList[0][\"recur_qty\"]=data.recur_qty;selectedList[0][\"item_text\"]=data.item_name;selectedList[0][\"checktype\"]=data.checktype;selectedList[0][\"treat_parentcode\"]=data.treat_parentcode;_this.setState({selectedRec_days:data.recur_days,selectedRec_qty:data.recur_qty});_this.setState({formFields:formFields,selectedList:selectedList});_this.props.updateForm(\"treatmentList\",selectedList);}});};_this.handleItemSettings=function(){var settingData=_this.state.settingData;_this.props.getCommonApi(\"userlist/\").then(function(key){var status=key.status,data=key.data;console.log(key,\"settingsData appointmentCreate\");if(status===200){settingData=data;_this.setState({settingData:settingData});}});};_this.getStaffAvailability=function(){_this.props.getCommonApi(\"staffsavailable/?Appt_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"))).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     staffList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({list:data});}});};_this.handleSearch=function(event){event.persist();console.log(event.target.value,event.target,event,\"dfhdfjghkjfghj\");var treatmentField=_this.state.treatmentField;treatmentField[\"treatment\"]=event.target.value;_this.setState({search:event.target.value,treatmentField:treatmentField});if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;var data={search:searchString};// this.queryHandler(data)\n_this.search(data);},500);}_this.debouncedFn();};_this.search=function(data){var _data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit,_data$search=data.search,search=_data$search===void 0?\"\":_data$search;var selectTreatmentId=_this.state.selectTreatmentId;_this.props.getCommonApi(\"stocklist/?Item_Deptid=\".concat(selectTreatmentId,\"&search=\").concat(search,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(function(res){console.log(res,\"treatmentList treatment_parentcode\");if(res.status===200){_this.setState({treatmentList:res.data.dataList,meta:res.data.meta.pagination});}});};_this.handlePagination=function(page){_this.search(page);};_this.handleChangeTreatment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,_this$state2,treatmentField,search,selectTreatmentId,page,limit;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;_this$state2=_this.state,treatmentField=_this$state2.treatmentField,search=_this$state2.search,selectTreatmentId=_this$state2.selectTreatmentId;console.log(\"uihwkjrwkej\",name,value);treatmentField[name]=value;if(name===\"category\"){selectTreatmentId=value;}else if(name===\"treatment\"){search=value;}_context.next=7;return _this.setState({treatmentField:treatmentField,selectTreatmentId:selectTreatmentId,search:search});case 7:page=1,limit=10;_this.props.getCommonApi(\"stocklist/?Item_Deptid=\".concat(selectTreatmentId,\"&search=\").concat(search,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(function(res){console.log(res);if(res.status===200){_this.setState({treatmentList:res.data.dataList,meta:res.data.meta.pagination});}});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3,index){var _ref3$target,value,name,_this$state3,selectedList,appointmentId;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;_this$state3=_this.state,selectedList=_this$state3.selectedList,appointmentId=_this$state3.appointmentId;if(name===\"add_duration\"){if(appointmentId){selectedList[index][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[index][\"start_time\"]),value);}else{selectedList[index][\"end_time\"]=_this.addTimes(selectedList[index][\"start_time\"],value);}selectedList[index][\"add_duration\"]=value;if(selectedList.length-1>index){selectedList[index+1][\"start_time\"]=selectedList[index][\"end_time\"];if(selectedList[index+1][\"add_duration\"]!==\"\"){selectedList[index+1][\"end_time\"]=_this.addTimes(selectedList[index][\"end_time\"],selectedList[index+1][\"add_duration\"]);}}}else if(name===\"Item_CodeName\"){selectedList[index][\"Item_Codeid\"]=6213;selectedList[index][\"Item_CodeName\"]=value;selectedList[index][\"item_text\"]=value;selectedList[index][\"checktype\"]=\"freetext\";selectedList[index][\"treat_parentcode\"]=null;}else if(name===\"recur_days\"||name===\"recur_qty\"){if(value<=0||value===\"\"){selectedList[index][name]=null;}else{selectedList[index][name]=Number(value);}}else{selectedList[index][name]=value;}_context2.next=5;return _this.setState({selectedList:selectedList});case 5:_context2.next=7;return _this.props.updateForm(\"treatmentList\",selectedList);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}();_this.handleMultiSelect=function(data){var formFields=_this.state.formFields;var list=[];var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;list.push(key.value);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}formFields[\"emp_no\"]=list;_this.setState({formFields:formFields});console.log(formFields,\"oyokkjk\");};_this.handleDatePick=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,value){var _this$state4,formFields,selectedList,time;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$state4=_this.state,formFields=_this$state4.formFields,selectedList=_this$state4.selectedList;time=_this.getHoursFromDate(value);formFields[\"start_time\"]=value;selectedList[0][\"start_time\"]=value?value:_this.timeToDateFormat(formFields[\"start_time\"]);if(time){formFields[\"end_time\"]=_this.addTimes(time,formFields[\"add_duration\"]);selectedList[0][\"end_time\"]=_this.addTimes(time,formFields[\"add_duration\"]);}_context3.next=7;return _this.setState({formFields:formFields,selectedList:selectedList});case 7:_context3.next=9;return _this.props.updateForm(\"treatmentList\",selectedList);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4,_x5){return _ref5.apply(this,arguments);};}();_this.getHoursFromDate=function(date){var hour=date.getHours();var minute=date.getMinutes();var hours=hour>9?hour:\"0\"+hour;var minutes=minute>9?minute:\"0\"+minute;return hours+\":\"+minutes;};_this.stafflistvalidation=function(appointmentTreatmentList){if(appointmentTreatmentList.length>0){var _iterator3=_createForOfIteratorHelper(appointmentTreatmentList),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var item=_step3.value;if(!item.emp_no||item.emp_no===\"\"||item.emp_no===null){Toast({type:\"error\",message:\"Please select Staff\"});return false;}else{return true;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}};_this.handleUpdate=function(){var _this$props=_this.props,appointmentCustomerDetail=_this$props.appointmentCustomerDetail,appointmentTreatmentList=_this$props.appointmentTreatmentList;var _this$state5=_this.state,appointmentId=_this$state5.appointmentId,selectedRec_days=_this$state5.selectedRec_days,selectedRec_qty=_this$state5.selectedRec_qty;if(appointmentCustomerDetail.customerName&&appointmentCustomerDetail.bookingStatus){if(_this.stafflistvalidation(appointmentTreatmentList)){var data={appt_date:dateFormat(new Date(appointmentCustomerDetail.appointmentDate),\"yyyy-mm-dd\"),Room_Codeid:appointmentCustomerDetail.Room_Codeid,appt_status:appointmentCustomerDetail.bookingStatus,sec_status:appointmentCustomerDetail.sec_status,ori_remark:appointmentCustomerDetail.new_remark,edit_remark:appointmentCustomerDetail.edit_remark,start_time:_this.getHoursFromDate(appointmentTreatmentList[0].start_time),end_time:appointmentTreatmentList[0].end_time,item_id:appointmentTreatmentList[0].Item_Codeid,add_duration:appointmentTreatmentList[0].add_duration,emp_id:appointmentTreatmentList[0].emp_no,requesttherapist:appointmentTreatmentList[0].requesttherapist,item_text:appointmentTreatmentList[0].item_text,recur_days:selectedRec_days===appointmentTreatmentList[0].recur_days||appointmentTreatmentList[0].recur_days===\"\"||appointmentTreatmentList[0].recur_days<=0?null:appointmentTreatmentList[0].recur_days,recur_qty:Number(selectedRec_qty)===Number(appointmentTreatmentList[0].recur_qty)||Number(appointmentTreatmentList[0].recur_qty)===\"\"||Number(appointmentTreatmentList[0].recur_qty)<=0?null:Number(appointmentTreatmentList[0].recur_qty),checktype:appointmentTreatmentList[0].checktype,treat_parentcode:appointmentTreatmentList[0].treat_parentcode,remark_setting:appointmentCustomerDetail.remark_setting};console.log(data,\"UpdatedappointmentTreatmentListWhenupdate\");_this.props.commonPatchApi(\"appointmentresources/\".concat(appointmentId,\"/\"),data).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){var formFields;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(res,\"cart check while update booking\");if(!(res.status===200)){_context4.next=6;break;}_this.handleCloseDialog();_this.handleSaveorUpdate();_context4.next=13;break;case 6:if(!(res.status===201)){_context4.next=13;break;}// this.handleCloseDialog();\n// this.handleSaveorUpdate();\nformFields={custId:0,custName:\"\"};formFields[\"custId\"]=appointmentCustomerDetail.customerName;formFields[\"custName\"]=appointmentCustomerDetail.custName;_context4.next=12;return _this.props.updateForm(\"basicApptDetail\",formFields);case 12:_this.props.getCommonApi(\"itemcart/Check/?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(appointmentCustomerDetail.customerName)).then(function(res){history.push(\"/admin/cart\");});case 13:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6){return _ref6.apply(this,arguments);};}());}}else{_this.showErrorMessage();}};_this.handleRecurringUpdate=function(){var _this$props2=_this.props,appointmentCustomerDetail=_this$props2.appointmentCustomerDetail,appointmentTreatmentList=_this$props2.appointmentTreatmentList;var _this$state6=_this.state,appointmentId=_this$state6.appointmentId,selectedRec_days=_this$state6.selectedRec_days,selectedRec_qty=_this$state6.selectedRec_qty,recurringList=_this$state6.recurringList,recurringSelectAll=_this$state6.recurringSelectAll;var finalRecurring=[];var _iterator4=_createForOfIteratorHelper(recurringList),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var recurringItem=_step4.value;if(recurringItem.selected){var value=recurringItem.id;finalRecurring.push(value);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}console.log(finalRecurring,\"finalrecurringList\");if(appointmentCustomerDetail.customerName&&appointmentCustomerDetail.bookingStatus){if(_this.stafflistvalidation(appointmentTreatmentList)){var data={appt_date:dateFormat(new Date(appointmentCustomerDetail.appointmentDate),\"yyyy-mm-dd\"),Room_Codeid:appointmentCustomerDetail.Room_Codeid,appt_status:appointmentCustomerDetail.bookingStatus,sec_status:appointmentCustomerDetail.sec_status,edit_remark:appointmentCustomerDetail.edit_remark,start_time:_this.getHoursFromDate(appointmentTreatmentList[0].start_time),end_time:appointmentTreatmentList[0].end_time,item_id:appointmentTreatmentList[0].Item_Codeid,add_duration:appointmentTreatmentList[0].add_duration,emp_id:appointmentTreatmentList[0].emp_no,requesttherapist:appointmentTreatmentList[0].requesttherapist,item_text:appointmentTreatmentList[0].item_text,recur_days:selectedRec_days===appointmentTreatmentList[0].recur_days||appointmentTreatmentList[0].recur_days===\"\"||appointmentTreatmentList[0].recur_days<=0?null:appointmentTreatmentList[0].recur_days,recur_qty:Number(selectedRec_qty)===Number(appointmentTreatmentList[0].recur_qty)||Number(appointmentTreatmentList[0].recur_qty)===\"\"||Number(appointmentTreatmentList[0].recur_qty)<=0?null:Number(appointmentTreatmentList[0].recur_qty),recur_ids:finalRecurring};console.log(data,\"UpdatedappointmentTreatmentListWhenupdate\");if(recurringSelectAll){_this.props.commonPatchApi(\"appointmentrecur/\".concat(appointmentId,\"/?type=\",\"all\",\" \"),data).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(res){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(res.status===200){_this.handleCloseDialog();_this.handleSaveorUpdate();}case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x7){return _ref7.apply(this,arguments);};}());}else{_this.props.commonPatchApi(\"appointmentrecur/\".concat(appointmentId,\"/\"),data).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(res){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(res,\"type all clicked result\");if(res.status===200){_this.handleCloseDialog();_this.handleSaveorUpdate();}case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x8){return _ref8.apply(this,arguments);};}());}}}else{_this.showErrorMessage();}};_this.handleSubmit=function(){// this.props.handleConfirmBooking()\nvar _this$props3=_this.props,appointmentCustomerDetail=_this$props3.appointmentCustomerDetail,appointmentTreatmentList=_this$props3.appointmentTreatmentList;console.log(appointmentCustomerDetail,\"appointmentcustomerdetailwhenSave\");console.log(appointmentTreatmentList,\"UpdatedappointmentTreatmentListWhenSave\");if(appointmentCustomerDetail.customerName&&appointmentCustomerDetail.bookingStatus){if(_this.stafflistvalidation(appointmentTreatmentList)){var data={Appointment:{appt_date:dateFormat(new Date(appointmentCustomerDetail.appointmentDate),\"yyyy-mm-dd\"),Appt_typeid:appointmentCustomerDetail.Appt_typeid,cust_noid:appointmentCustomerDetail.customerName,new_remark:appointmentCustomerDetail.new_remark,// emp_noid: appointmentCustomerDetail.emp_id,\nSource_Codeid:appointmentCustomerDetail.Source_Codeid,Room_Codeid:appointmentCustomerDetail.Room_Codeid,appt_status:appointmentCustomerDetail.bookingStatus,sec_status:appointmentCustomerDetail.sec_status,ItemSite_Codeid:appointmentCustomerDetail.ItemSite_Codeid,walkin:appointmentCustomerDetail.walkin},Treatment:appointmentTreatmentList};_this.props.commonCreateApi(\"appointment/\",data).then(/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(res){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(res.status===201){_this.handleCloseDialog();_this.handleSaveorUpdate();}case 1:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x9){return _ref9.apply(this,arguments);};}());}}else{_this.showErrorMessage();}};_this.getDateTime=function(data){var date=new Date(data);date=String(date).split(\" \");var date1=date[2]+\"th \"+date[1]+\", \"+date[3];var time=date[4].split(\":\");var time1=String(Number(time[0])>12?Number(time[0])-12:time[0])+\":\"+time[1]+(Number(time[0])>12?\"PM\":\"AM\");return time1+\", \"+date1;};_this.handleDialog=function(){_this.setState({isOpenModal:false,index:null});};_this.handleMultipleCustomer=function(){_this.setState({isOpenModal:false});};_this.handleSelectPackage=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(data){var _this$state7,selectedList,PackageIndex,appointmentId,listCount,treatment;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:debugger;_this$state7=_this.state,selectedList=_this$state7.selectedList,PackageIndex=_this$state7.PackageIndex,appointmentId=_this$state7.appointmentId;if(!(PackageIndex===0&&selectedList[0][\"Item_CodeName\"]===\"\")){_context8.next=17;break;}selectedList[0][\"start_time\"]=selectedList[0][\"start_time\"];if(appointmentId){selectedList[0][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[0][\"start_time\"]),data.add_duration);}else{selectedList[0][\"end_time\"]=_this.addTimes(selectedList[0][\"start_time\"],data.add_duration);}selectedList[0][\"Item_Codeid\"]=data.id;selectedList[0][\"Item_CodeName\"]=data.item_desc;selectedList[0][\"item_text\"]=null;selectedList[0][\"add_duration\"]=data.add_duration;selectedList[0][\"checktype\"]=\"package\";selectedList[0][\"treat_parentcode\"]=data.treatment_parentcode;_context8.next=13;return _this.setState({selectedList:selectedList,PackageIndex:PackageIndex+1});case 13:_context8.next=15;return _this.props.updateForm(\"treatmentList\",selectedList);case 15:_context8.next=62;break;case 17:if(!(selectedList[selectedList.length-1][\"Item_CodeName\"]===\"\")){_context8.next=32;break;}selectedList[selectedList.length-1][\"start_time\"]=selectedList[selectedList.length-1][\"start_time\"];if(appointmentId){selectedList[selectedList.length-1][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[selectedList.length-1][\"start_time\"]),data.add_duration);}else{selectedList[selectedList.length-1][\"end_time\"]=_this.addTimes(selectedList[selectedList.length-1][\"start_time\"],data.add_duration);}selectedList[selectedList.length-1][\"Item_Codeid\"]=data.id;selectedList[selectedList.length-1][\"Item_CodeName\"]=data.item_desc;selectedList[selectedList.length-1][\"item_text\"]=null;selectedList[selectedList.length-1][\"add_duration\"]=data.add_duration;selectedList[selectedList.length-1][\"checktype\"]=\"package\";selectedList[selectedList.length-1][\"treat_parentcode\"]=data.treatment_parentcode;_context8.next=28;return _this.setState({selectedList:selectedList,PackageIndex:PackageIndex+1});case 28:_context8.next=30;return _this.props.updateForm(\"treatmentList\",selectedList);case 30:_context8.next=62;break;case 32:if(!(selectedList[selectedList.length-1][\"Item_CodeName\"]!==\"\"&&appointmentId)){_context8.next=47;break;}selectedList[selectedList.length-1][\"start_time\"]=selectedList[selectedList.length-1][\"start_time\"];if(appointmentId){selectedList[selectedList.length-1][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[selectedList.length-1][\"start_time\"]),data.add_duration);}else{selectedList[selectedList.length-1][\"end_time\"]=_this.addTimes(selectedList[selectedList.length-1][\"start_time\"],data.add_duration);}selectedList[selectedList.length-1][\"Item_Codeid\"]=data.id;selectedList[selectedList.length-1][\"Item_CodeName\"]=data.item_desc;selectedList[selectedList.length-1][\"item_text\"]=null;selectedList[selectedList.length-1][\"add_duration\"]=data.add_duration;selectedList[selectedList.length-1][\"checktype\"]=\"package\";selectedList[selectedList.length-1][\"treat_parentcode\"]=data.treatment_parentcode;_context8.next=43;return _this.setState({selectedList:selectedList,PackageIndex:PackageIndex+1});case 43:_context8.next=45;return _this.props.updateForm(\"treatmentList\",selectedList);case 45:_context8.next=62;break;case 47:listCount=selectedList.length-1;treatment={};if(appointmentId){treatment[\"start_time\"]=_this.timeToDateFormat(selectedList[listCount][\"end_time\"]);}else{treatment[\"start_time\"]=selectedList[listCount][\"end_time\"];}treatment[\"end_time\"]=_this.addTimes(selectedList[listCount][\"end_time\"],data.add_duration);treatment[\"Item_Codeid\"]=data.id;treatment[\"Item_CodeName\"]=data.item_desc;treatment[\"item_text\"]=null;treatment[\"add_duration\"]=data.add_duration;treatment[\"checktype\"]=\"package\";treatment[\"treat_parentcode\"]=data.treatment_parentcode;selectedList.push(treatment);_context8.next=60;return _this.setState({selectedList:selectedList});case 60:_context8.next=62;return _this.props.updateForm(\"treatmentList\",selectedList);case 62:_this.setState({isOpenModal:false});case 63:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x10){return _ref10.apply(this,arguments);};}();_this.handleSelectTreatment=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(data){var _this$state8,selectedList,index,appointmentId;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_this$state8=_this.state,selectedList=_this$state8.selectedList,index=_this$state8.index,appointmentId=_this$state8.appointmentId;if(!(index==0&&selectedList.length==1)){_context9.next=15;break;}selectedList[0][\"start_time\"]=selectedList[0][\"start_time\"];if(appointmentId){selectedList[0][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[0][\"start_time\"]),data.add_duration);}else{selectedList[0][\"end_time\"]=_this.addTimes(selectedList[0][\"start_time\"],data.add_duration);}selectedList[0][\"Item_Codeid\"]=data.id;selectedList[0][\"Item_CodeName\"]=data.item_desc;selectedList[0][\"add_duration\"]=data.add_duration;selectedList[0][\"checktype\"]=\"service\";selectedList[0][\"treat_parentcode\"]=null;_context9.next=11;return _this.setState({selectedList:selectedList});case 11:_context9.next=13;return _this.props.updateForm(\"treatmentList\",selectedList);case 13:_context9.next=27;break;case 15:selectedList[index][\"start_time\"]=selectedList[index][\"start_time\"];if(appointmentId){selectedList[index][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[index][\"start_time\"]),data.add_duration);}else{selectedList[index][\"end_time\"]=_this.addTimes(selectedList[index][\"start_time\"],data.add_duration);}selectedList[index][\"Item_Codeid\"]=data.id;selectedList[index][\"Item_CodeName\"]=data.item_desc;selectedList[index][\"add_duration\"]=data.add_duration;selectedList[index][\"checktype\"]=\"service\";selectedList[index][\"treat_parentcode\"]=null;if(selectedList.length-1>index){selectedList[index+1][\"start_time\"]=selectedList[index][\"end_time\"];if(selectedList[index+1][\"add_duration\"]!==\"\"){selectedList[index+1][\"end_time\"]=_this.addTimes(selectedList[index][\"end_time\"],selectedList[index+1][\"add_duration\"]);}}_context9.next=25;return _this.setState({selectedList:selectedList});case 25:_context9.next=27;return _this.props.updateForm(\"treatmentList\",selectedList);case 27:_this.setState({isOpenModal:false});case 28:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x11){return _ref11.apply(this,arguments);};}();_this.timeToMins=function(time){var b=time.split(\":\");return b[0]*60+ +b[1];};_this.timeFromMins=function(mins){function z(n){return(n<10?\"0\":\"\")+n;}var h=(mins/60|0)%24;var m=mins%60;return z(h)+\":\"+z(m);};_this.addTimes=function(t0,t1){return _this.timeFromMins(_this.timeToMins(t0)+_this.timeToMins(t1));};_this.handleNewTimeChange=function(selectedTime){var time=new Date(dateFormat(selectedTime));var selectedTimeNew=time.getTime();console.log(selectedTimeNew);var _this$state9=_this.state,selectedList=_this$state9.selectedList,formFields=_this$state9.formFields;formFields={start_time:selectedTimeNew,end_time:\"\",add_duration:\"\"};};_this.handleAddtreatment=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(index){var _this$state10,selectedList,formFields;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_this$state10=_this.state,selectedList=_this$state10.selectedList,formFields=_this$state10.formFields;if(!selectedList[index][\"end_time\"]){_context10.next=10;break;}formFields={start_time:selectedList[selectedList.length-1].end_time,end_time:\"\",Item_Codeid:6213,add_duration:\"\",emp_no:0,requesttherapist:false,recur_days:null,recur_qty:null,item_text:null,checktype:\"\",treat_parentcode:null};selectedList.push({start_time:selectedList[selectedList.length-1].end_time,end_time:\"\",Item_Codeid:6213,Item_CodeName:\"\",add_duration:\"\",emp_no:0,requesttherapist:false,recur_days:null,recur_qty:null,item_text:null,checktype:\"\",treat_parentcode:null});_context10.next=6;return _this.setState({selectedList:selectedList,formFields:formFields});case 6:_context10.next=8;return _this.props.updateForm(\"treatmentList\",selectedList);case 8:_context10.next=11;break;case 10:Toast({type:\"error\",message:\"End time shouldn't be empty\"});case 11:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x12){return _ref12.apply(this,arguments);};}();_this.deleteTreatment=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(index){var selectedList;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:selectedList=_this.state.selectedList;selectedList.splice(index,1);_this.setState({selectedList:selectedList});_context11.next=5;return _this.props.updateForm(\"treatmentList\",selectedList);case 5:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x13){return _ref13.apply(this,arguments);};}();_this.handleTreatementmodal=function(){_this.setState(function(prevState){return{isTreatementModal:!prevState.isTreatementModal};});};_this.handleChangeremark=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(_ref14){var _ref14$target,value,name,_this$state11,formFields,selectedList;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_ref14$target=_ref14.target,value=_ref14$target.value,name=_ref14$target.name;_this$state11=_this.state,formFields=_this$state11.formFields,selectedList=_this$state11.selectedList;formFields[name]=value;selectedList[0][name]=value;_context12.next=6;return _this.setState({formFields:formFields,selectedList:selectedList});case 6:_context12.next=8;return _this.props.updateForm(\"treatmentList\",selectedList);case 8:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x14){return _ref15.apply(this,arguments);};}();_this.handleCheckbox=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(_ref16,index){var _ref16$target,value,name,treatmentList,selectedList;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_ref16$target=_ref16.target,value=_ref16$target.value,name=_ref16$target.name;treatmentList=_this.state.treatmentList;selectedList=_this.state.selectedList;selectedList[index][\"requesttherapist\"]=value;_context13.next=6;return _this.setState({selectedList:selectedList});case 6:_context13.next=8;return _this.props.updateForm(\"treatmentList\",selectedList);case 8:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x15,_x16){return _ref17.apply(this,arguments);};}();_this.handleCloseDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_this.props.handleCloseDialog();case 1:case\"end\":return _context14.stop();}}},_callee14);}));_this.handleSaveorUpdate=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_this.props.handleSaveorUpdate();case 1:case\"end\":return _context15.stop();}}},_callee15);}));_this.handleRecurringlistCheckbox=/*#__PURE__*/function(){var _ref21=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(_ref20,item){var _ref20$target,value,name,recurringList,listCheckbox,Checkbox;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_ref20$target=_ref20.target,value=_ref20$target.value,name=_ref20$target.name;recurringList=_this.state.recurringList;listCheckbox=recurringList.find(function(acc){return acc.id===item.id;});if(!listCheckbox){_context16.next=7;break;}listCheckbox[\"selected\"]=value;_context16.next=7;return _this.setState(_objectSpread(_objectSpread({},_this.state.recurringList),{},{listCheckbox:listCheckbox}));case 7:Checkbox=recurringList.filter(function(acc){return acc.selected===true;}).length;if(!(Checkbox==_this.state.recurringList.length)){_context16.next=13;break;}_context16.next=11;return _this.setState({recurringSelectAll:true});case 11:_context16.next=15;break;case 13:_context16.next=15;return _this.setState({recurringSelectAll:false});case 15:case\"end\":return _context16.stop();}}},_callee16);}));return function(_x17,_x18){return _ref21.apply(this,arguments);};}();_this.handleRecurringSelectAllCheckbox=/*#__PURE__*/function(){var _ref23=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(_ref22){var _ref22$target,value,name,recurringList,_iterator5,_step5,item;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_ref22$target=_ref22.target,value=_ref22$target.value,name=_ref22$target.name;recurringList=_this.state.recurringList;_context17.next=4;return _this.setState({recurringSelectAll:value});case 4:_iterator5=_createForOfIteratorHelper(recurringList);_context17.prev=5;_iterator5.s();case 7:if((_step5=_iterator5.n()).done){_context17.next=14;break;}item=_step5.value;item[\"selected\"]=value;_context17.next=12;return _this.setState(_objectSpread(_objectSpread({},_this.state.recurringList),{},{item:item}));case 12:_context17.next=7;break;case 14:_context17.next=19;break;case 16:_context17.prev=16;_context17.t0=_context17[\"catch\"](5);_iterator5.e(_context17.t0);case 19:_context17.prev=19;_iterator5.f();return _context17.finish(19);case 22:case\"end\":return _context17.stop();}}},_callee17,null,[[5,16,19,22]]);}));return function(_x19){return _ref23.apply(this,arguments);};}();_this.handleCopyAppointment=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var appointmentId,formFields;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:appointmentId=_this.state.appointmentId;formFields={};formFields[\"appointmentId\"]=appointmentId;_context18.next=5;return _this.props.updateForm(\"AppointmentCopy\",formFields);case 5:console.log(_this.props.AppointmentCopy,\"after copy click appointment copy id\");Toast({type:\"success\",message:\"Appointment copied\"});case 7:case\"end\":return _context18.stop();}}},_callee18);}));_this.handlePasteAppointment=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(){var AppointmentCopy;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:AppointmentCopy=_this.props.AppointmentCopy;if(AppointmentCopy){_this.setState({PasteAppointmentId:AppointmentCopy.appointmentId});_this.handleRenderApptDetail(AppointmentCopy.appointmentId,true);}case 2:case\"end\":return _context19.stop();}}},_callee19);}));_this.child=React.createRef();return _this;}_createClass(NewSelectTreatmentClass,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.search({});this.handleItemSettings();var _this$state12=this.state,categoryList=_this$state12.categoryList,staffOption=_this$state12.staffOption,selectedList=_this$state12.selectedList,formFields=_this$state12.formFields,duration=_this$state12.duration;var _this$props4=this.props,basicApptDetail=_this$props4.basicApptDetail,AppointmentCopy=_this$props4.AppointmentCopy;console.log(AppointmentCopy,\"Basic app detail data\");if(basicApptDetail.appt_id){this.setState({appointmentId:basicApptDetail.appt_id});this.handleRenderApptDetail(basicApptDetail.appt_id,false);}else{formFields[\"start_time\"]=basicApptDetail?basicApptDetail.time:\"\";formFields[\"emp_no\"]=basicApptDetail?basicApptDetail.staff_id:0;selectedList[0][\"start_time\"]=basicApptDetail?basicApptDetail.time:\"\";selectedList[0][\"emp_no\"]=basicApptDetail?basicApptDetail.staff_id:0;this.setState({formFields:formFields,selectedList:selectedList});this.props.updateForm(\"treatmentList\",selectedList);}this.props.getCommonApi(\"itemdept/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator6=_createForOfIteratorHelper(data),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var value=_step6.value;categoryList.push({value:value.id,label:value.itm_desc});}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}_this2.setState({categoryList:categoryList});}});this.props.getCommonApi(\"appointment/Staffs/?Outlet=\".concat(basicApptDetail.branchId,\"&date=\").concat(dateFormat(new Date()))).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator7=_createForOfIteratorHelper(data),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var value=_step7.value;staffOption.push({value:value.id,label:value.emp_name});}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}_this2.setState({staffOption:staffOption});}});this.props.getCommonApi(\"treatment/Duration/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator8=_createForOfIteratorHelper(data),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var value=_step8.value;duration.push({value:value,label:value});}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}_this2.setState({duration:duration});}});this.getStaffAvailability();}},{key:\"componentWillMount\",value:function componentWillMount(){this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:this});}},{key:\"render\",value:function render(){var _this3=this;var _this$state13=this.state,outletOption=_this$state13.outletOption,staffOption=_this$state13.staffOption,roomOption=_this$state13.roomOption,selectedList=_this$state13.selectedList,siteList=_this$state13.siteList,list=_this$state13.list,formFields=_this$state13.formFields,timeDropdown=_this$state13.timeDropdown,duration=_this$state13.duration,isOpenModal=_this$state13.isOpenModal,treatmentField=_this$state13.treatmentField,_this$state13$treatme=_this$state13.treatmentList,treatmentList=_this$state13$treatme===void 0?[]:_this$state13$treatme,categoryList=_this$state13.categoryList,treatmentListHeader=_this$state13.treatmentListHeader,meta=_this$state13.meta,isTreatementModal=_this$state13.isTreatementModal,appointmentId=_this$state13.appointmentId,selectedRec_days=_this$state13.selectedRec_days,selectedRec_qty=_this$state13.selectedRec_qty,recurringList=_this$state13.recurringList,recurringSelectAll=_this$state13.recurringSelectAll,settingData=_this$state13.settingData,PasteAppointmentId=_this$state13.PasteAppointmentId;var _this$props5=this.props,customerDetail=_this$props5.customerDetail,selectedTreatmentList=_this$props5.selectedTreatmentList,customerId=_this$props5.customerId;var outlet=customerDetail.outlet,staff=customerDetail.staff,rooms=customerDetail.rooms;return/*#__PURE__*/React.createElement(React.Fragment,null,PasteAppointmentId<=0?/*#__PURE__*/React.createElement(AppointmentForm,{onRef:function onRef(ref){return _this3.child=ref;},selectedCustomer:this.props.selectedCustomer,PasteAppointmentId:PasteAppointmentId}):null,PasteAppointmentId>0?/*#__PURE__*/React.createElement(AppointmentForm,{onRef:function onRef(ref){return _this3.child=ref;},selectedCustomer:this.props.selectedCustomer,PasteAppointmentId:PasteAppointmentId}):null,/*#__PURE__*/React.createElement(\"div\",{className:\"create-appointment select-treatment-appointment\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\" col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"appointment\"},/*#__PURE__*/React.createElement(\"div\",{className:\"appointment-holder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"select-treatment select-list w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row selected selected-header mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},\"Start\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},\"End\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 p-0 header-detail\"},\"Services\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 header-detail\"},\"Duration\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},\"Treatment staff\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"img\",{src:req_therapist,alt:\"\",height:\"25\",width:\"25\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 header-detail d-flex justify-content-start\"},\"Recur. Days\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 header-detail d-flex justify-content-center\"},\"Recur. Qty\")),selectedList.length>0?selectedList.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row selected  mb-4\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 mr-1 p-0\"},appointmentId?/*#__PURE__*/React.createElement(NormalDateTime,{onChange:_this3.handleDatePick,label:\"start_time\",name:\"start_time\",timeOnly:true,dateFormat:\"HH:mm\",showTime:true,selected:false,placeholder:\"\",timeIntervals:5,value:item.start_time,showIcon:false}):/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"start\"// options={timeDropdown}\n,value:item.start_time,name:\"start_time\",onChange:_this3.handleChange,className:\"customer-name p-0\",disabled:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 mr-1 p-0\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"end\"// options={timeDropdown}\n,value:item.end_time,name:\"end_time\",onChange:_this3.handleChange,className:\"customer-name p-0\",disabled:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mr-1 p-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header-detail\"}),settingData&&settingData.service_sel&&settingData.service_text?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onClick:function onClick(){return _this3.setState({isOpenModal:true,index:index});},onChange:function onChange(e){return _this3.handleChange(e,index);},className:\"customer-name p-0 px-2\"}):null,settingData&&settingData.service_sel&&!settingData.service_text?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onClick:function onClick(){return _this3.setState({isOpenModal:true,index:index});},onChange:function onChange(){},className:\"customer-name p-0 px-2\"}):null,settingData&&!settingData.service_sel&&settingData.service_text?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onClick:function onClick(){},onChange:function onChange(e){return _this3.handleChange(e,index);},className:\"customer-name p-0 px-2\"}):null,settingData&&!settingData.service_sel&&!settingData.service_text?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onClick:function onClick(){},onChange:function onChange(){},className:\"customer-name p-0 px-2\"}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 mr-1 p-0 header-detail\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:duration,value:item.add_duration,name:\"add_duration\",onChange:function onChange(e){return _this3.handleChange(e,index);},className:\"customer-name p-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:staffOption,value:item.emp_no,name:\"emp_no\",onChange:function onChange(e){return _this3.handleChange(e,index);},className:\"customer-name p-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 d-flex justify-content-center\"},item.requesttherapist?/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleCheckbox(e,index);},value:item.requesttherapist,name:\"requesttherapist\",checked:true}):/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleCheckbox(e,index);},value:item.requesttherapist,name:\"requesttherapist\",checked:false})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 d-flex justify-content-start\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"recur_days\",value:item.recur_days?item.recur_days:\"\",onChange:function onChange(e){return _this3.handleChange(e,index);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 d-flex justify-content-start\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"recur_qty\",value:item.recur_qty?item.recur_qty:\"\",onChange:function onChange(e){return _this3.handleChange(e,index);}})),appointmentId?/*#__PURE__*/React.createElement(React.Fragment,null):/*#__PURE__*/React.createElement(React.Fragment,null,selectedList.length===index+1?/*#__PURE__*/React.createElement(\"div\",{className:\"ml-3\",onClick:function onClick(){return _this3.handleAddtreatment(index);}},/*#__PURE__*/React.createElement(\"svg\",{width:\"31\",height:\"30\",viewBox:\"0 0 31 30\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"rect\",{width:\"31\",height:\"30\",fill:\"#F9F9F9\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M15 8V22\",stroke:\"#848484\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M8 15H22\",stroke:\"#848484\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}))):/*#__PURE__*/React.createElement(\"img\",{width:\"25\",height:\"25\",onClick:function onClick(){return _this3.deleteTreatment(index);},className:\"ml-3\",src:closeIcon,alt:\"\"})));}):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 fs-15 \",label:\"Treatment Package\",onClick:this.handleTreatementmodal}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-around\"},appointmentId?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12\",label:\"Customer Profile\",onClick:function onClick(){return history.push(\"/admin/customer/\".concat(customerId,\"/account\"));}}):null,!appointmentId&&this.props.AppointmentCopy&&this.props.AppointmentCopy.appointmentId>0?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment ml-2\",mainbg:true,className:\"col-12 fs-15 \",label:\"Paste Appointment\",onClick:this.handlePasteAppointment}):null,appointmentId?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12\",label:\"Copy Appointment\",onClick:this.handleCopyAppointment}):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment mr-2\",mainbg:true,className:\"col-12\",label:\"Cancel\",onClick:this.handleCloseDialog}),appointmentId?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"submit-btn\",mainbg:false,className:\"col-12 submit-btn\",label:\"Update Booking\",onClick:this.handleUpdate}):/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"submit-btn\",mainbg:false,className:\"col-12 submit-btn \",label:\"Confirm Booking\",onClick:this.handleSubmit}))))),recurringList&&recurringList.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Recurring Related Appointments\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row selected selected-header mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(NormalCheckbox,{label:\"All\",onChange:function onChange(e){return _this3.handleRecurringSelectAllCheckbox(e);},value:recurringSelectAll,name:\"recurringSelectAll\",checked:recurringSelectAll})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},\"Date\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},\"Start\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},\"End\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 p-0 header-detail\"},\"Services\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 header-detail\"},\"Duration\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},\"Treatment staff\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"img\",{src:req_therapist,alt:\"\",height:\"25\",width:\"25\"}))),recurringList&&recurringList.length>0?recurringList.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row selected  mb-4\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleRecurringlistCheckbox(e,item);},value:item.selected,name:\"recurringItem\",checked:item.selected})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},item.date),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},item.start_time),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},item.end_time),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 p-0 header-detail\"},item.item_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 header-detail\"},item.add_duration),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},item.emp_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleRecurringlistCheckbox(e,item);},value:item.requesttherapist,name:\"requesttherapist\",checked:item.requesttherapist,disabled:true})));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"},\"No data\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12\",label:\"Cancel\",onClick:this.handleCloseDialog})),/*#__PURE__*/React.createElement(\"div\",null,appointmentId?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"submit-btn\",mainbg:false,className:\"col-12 submit-btn ml-4\",label:\"Update Recurring\",onClick:this.handleRecurringUpdate}):null))))):null)))))),/*#__PURE__*/React.createElement(NormalModal,{className:\"multiple-appointment select-category\",style:{minWidth:\"60%\"},modal:isOpenModal,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pl-0 mb-3 fw-500 py-2\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Select Treatment\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Category\",/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:categoryList,value:treatmentField.category,name:\"category\",onChange:this.handleChangeTreatment,className:\"customer-name p-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Service\",/*#__PURE__*/React.createElement(\"input\",{// placeholder=\"Enter here\"\n// options={siteList}\nvalue:treatmentField.treatment,name:\"treatment\",onChange:this.handleSearch,className:\"search px-3 p-0\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-container table-responsive mt-3\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:treatmentListHeader,queryHandler:this.handlePagination,pageMeta:meta},treatmentList.length>0?treatmentList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\",onClick:function onClick(){return _this3.handleSelectTreatment(item);},key:index},/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.Item_Class)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.item_desc)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.add_duration)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.item_price)));}):/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"No data available\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center justify-center w-100\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-3\",mainbg:true,className:\"col-12 ml-4\",label:\"Cancel\",onClick:this.handleDialog})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},isTreatementModal?/*#__PURE__*/React.createElement(TreatmentPackage,{isTreatementModal:isTreatementModal,handleTreatementmodal:this.handleTreatementmodal,handleSelectPackage:this.handleSelectPackage,customerId:customerId}):\"\")));}}]);return NewSelectTreatmentClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,appointmentDetail:state.appointment.appointmentDetail,selectedTreatmentList:state.appointment.selectedTreatmentList,basicApptDetail:state.appointment.basicApptDetail,appointmentCustomerDetail:state.appointment.appointmentCustomerDetail,appointmentTreatmentList:state.appointment.appointmentTreatmentList,AppointmentCopy:state.appointment.AppointmentCopy};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({updateForm:updateForm,getSelectedTreatmentList:getSelectedTreatmentList,getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi},dispatch);};export var NewSelectTreatment=connect(mapStateToProps,mapDispatchToProps)(NewSelectTreatmentClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/NewAppointment/NewCreateAppointment/NewSelectTreatment.js"],"names":["React","Component","NormalSelect","NormalButton","NormalModal","NormalInput","NormalDateTime","NormalCheckbox","updateForm","getSelectedTreatmentList","connect","bindActionCreators","SimpleReactValidator","closeIcon","req_therapist","getCommonApi","commonCreateApi","commonPatchApi","dateFormat","_","TableWrapper","TreatmentPackage","Toast","AppointmentForm","history","NewSelectTreatmentClass","props","state","treatmentDetail","formFields","start_time","end_time","Item_Codeid","add_duration","emp_no","requesttherapist","Item_CodeName","edit_remark","recur_days","recur_qty","item_text","checktype","treat_parentcode","selectedList","outletOption","staffOption","roomOption","list","isOpenModal","categoryList","treatmentList","siteList","treatmentField","category","treatment","timeDropdown","duration","index","search","selectTreatmentId","treatmentListHeader","label","className","meta","isTreatementModal","appointmentId","PackageIndex","selectedRec_days","selectedRec_qty","recurringList","recurringSelectedItems","recurringSelectAll","settingData","PasteAppointmentId","showErrorMessage","child","onFocus","timeToDateFormat","TimeValue","time","String","split","newTime","Date","setHours","handleRenderApptDetail","appt_id","copy","then","key","status","data","console","log","recur_lst","startTime","addTimes","emp_id","value","push","id","date","appt_status","item_name","emp_name","selected","setState","handleItemSettings","getStaffAvailability","handleSearch","event","persist","target","debouncedFn","debounce","searchString","page","limit","res","dataList","pagination","handlePagination","handleChangeTreatment","name","handleChange","getHoursFromDate","length","Number","handleMultiSelect","handleDatePick","hour","getHours","minute","getMinutes","hours","minutes","stafflistvalidation","appointmentTreatmentList","item","type","message","handleUpdate","appointmentCustomerDetail","customerName","bookingStatus","appt_date","appointmentDate","Room_Codeid","sec_status","ori_remark","new_remark","item_id","remark_setting","handleCloseDialog","handleSaveorUpdate","custId","custName","handleRecurringUpdate","finalRecurring","recurringItem","recur_ids","handleSubmit","Appointment","Appt_typeid","cust_noid","Source_Codeid","ItemSite_Codeid","walkin","Treatment","getDateTime","date1","time1","handleDialog","handleMultipleCustomer","handleSelectPackage","item_desc","treatment_parentcode","listCount","handleSelectTreatment","timeToMins","b","timeFromMins","mins","z","n","h","m","t0","t1","handleNewTimeChange","selectedTime","selectedTimeNew","getTime","handleAddtreatment","deleteTreatment","splice","handleTreatementmodal","prevState","handleChangeremark","handleCheckbox","handleRecurringlistCheckbox","listCheckbox","find","acc","Checkbox","filter","handleRecurringSelectAllCheckbox","handleCopyAppointment","AppointmentCopy","handlePasteAppointment","createRef","basicApptDetail","staff_id","itm_desc","branchId","validator","element","autoForceUpdate","customerDetail","selectedTreatmentList","customerId","outlet","staff","rooms","ref","selectedCustomer","map","service_sel","service_text","e","minWidth","Item_Class","item_price","mapStateToProps","appointment","appointmentDetail","mapDispatchToProps","dispatch","NewSelectTreatment"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalModal,\r\n  NormalInput,\r\n  NormalDateTime,\r\n  NormalCheckbox,\r\n} from \"component/common\";\r\nimport \"./style.scss\";\r\nimport {\r\n  updateForm,\r\n  getSelectedTreatmentList,\r\n} from \"redux/actions/appointment\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport req_therapist from \"assets/images/app-icons/1.png\";\r\nimport {\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { TableWrapper } from \"component/common\";\r\nimport { TreatmentPackage } from \"./modal/index\";\r\nimport { Toast } from \"service/toast\";\r\nimport { AppointmentForm } from \"./AppointmentForm\";\r\nimport { history } from \"helpers\";\r\n\r\nexport class NewSelectTreatmentClass extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.child = React.createRef();\r\n  }\r\n  state = {\r\n    treatmentDetail: [],\r\n    formFields: {\r\n      start_time: \"\",\r\n      end_time: \"\",\r\n      Item_Codeid: null,\r\n      add_duration: \"\",\r\n      emp_no: 0,\r\n      requesttherapist: false,\r\n      Item_CodeName: \"\",\r\n      edit_remark: \"\",\r\n      recur_days: null,\r\n      recur_qty: null,\r\n      item_text: null,\r\n      checktype: \"\",\r\n      treat_parentcode: null,\r\n    },\r\n    selectedList: [\r\n      {\r\n        start_time: \"\",\r\n        end_time: \"\",\r\n        Item_Codeid: null,\r\n        add_duration: \"\",\r\n        emp_no: 0,\r\n        requesttherapist: false,\r\n        Item_CodeName: \"\",\r\n        edit_remark: \"\",\r\n        recur_days: null,\r\n        recur_qty: null,\r\n        item_text: null,\r\n        checktype: \"\",\r\n        treat_parentcode: null,\r\n      },\r\n    ],\r\n    outletOption: [],\r\n    staffOption: [],\r\n    roomOption: [],\r\n    list: [],\r\n    isOpenModal: false,\r\n    categoryList: [],\r\n    treatmentList: [],\r\n    siteList: [],\r\n    treatmentField: {\r\n      category: \"\",\r\n      treatment: \"\",\r\n    },\r\n    timeDropdown: [],\r\n    duration: [],\r\n    index: null,\r\n    search: \"\",\r\n    selectTreatmentId: \"\",\r\n    treatmentListHeader: [\r\n      { label: \"Category\", className: \"w-50\" },\r\n      { label: \"Service\", className: \"w-75\" },\r\n      { label: \"Duration\", className: \"w-25\" },\r\n      { label: \"price\", className: \"w-50\" },\r\n    ],\r\n    meta: {},\r\n    isTreatementModal: false,\r\n    appointmentId: null,\r\n    PackageIndex: 0,\r\n    selectedRec_days: null,\r\n    selectedRec_qty: null,\r\n    recurringList: [],\r\n    recurringSelectedItems: [],\r\n    recurringSelectAll: false,\r\n    settingData: {},\r\n    PasteAppointmentId: 0,\r\n  };\r\n  showErrorMessage = () => {\r\n    this.child.onFocus();\r\n  };\r\n  componentDidMount() {\r\n    this.search({});\r\n    this.handleItemSettings();\r\n    let { categoryList, staffOption, selectedList, formFields, duration } =\r\n      this.state;\r\n\r\n    let { basicApptDetail, AppointmentCopy } = this.props;\r\n    console.log(AppointmentCopy, \"Basic app detail data\");\r\n    if (basicApptDetail.appt_id) {\r\n      this.setState({ appointmentId: basicApptDetail.appt_id });\r\n      this.handleRenderApptDetail(basicApptDetail.appt_id, false);\r\n    } else {\r\n      formFields[\"start_time\"] = basicApptDetail ? basicApptDetail.time : \"\";\r\n      formFields[\"emp_no\"] = basicApptDetail ? basicApptDetail.staff_id : 0;\r\n      selectedList[0][\"start_time\"] = basicApptDetail\r\n        ? basicApptDetail.time\r\n        : \"\";\r\n      selectedList[0][\"emp_no\"] = basicApptDetail\r\n        ? basicApptDetail.staff_id\r\n        : 0;\r\n      this.setState({\r\n        formFields,\r\n        selectedList,\r\n      });\r\n      this.props.updateForm(\"treatmentList\", selectedList);\r\n    }\r\n    this.props.getCommonApi(`itemdept/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          categoryList.push({ value: value.id, label: value.itm_desc });\r\n        }\r\n        this.setState({ categoryList });\r\n      }\r\n    });\r\n    this.props\r\n      .getCommonApi(\r\n        `appointment/Staffs/?Outlet=${\r\n          basicApptDetail.branchId\r\n        }&date=${dateFormat(new Date())}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            staffOption.push({ value: value.id, label: value.emp_name });\r\n          }\r\n          this.setState({ staffOption });\r\n        }\r\n      });\r\n    this.props.getCommonApi(`treatment/Duration/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          duration.push({ value: value, label: value });\r\n        }\r\n        this.setState({ duration });\r\n      }\r\n    });\r\n    this.getStaffAvailability();\r\n  }\r\n  timeToDateFormat = TimeValue => {\r\n    let time = String(TimeValue).split(\":\");\r\n    let newTime = new Date(new Date().setHours(time[0], time[1], 0, 0));\r\n    return newTime;\r\n  };\r\n  handleRenderApptDetail = (appt_id, copy) => {\r\n    let { formFields, selectedList, recurringList } = this.state;\r\n    this.props.getCommonApi(`appointmentresources/${appt_id}/`).then(key => {\r\n      let { status, data } = key;\r\n      console.log(data.recur_lst, \"RecurringAppointmentrelatedList\");\r\n      if (status === 200) {\r\n        console.log(data, \"selectedCustomer\");\r\n        let startTime = this.timeToDateFormat(data.start_time);\r\n        if (copy) {\r\n          selectedList[0][\"end_time\"] = this.addTimes(\r\n            selectedList[0][\"start_time\"],\r\n            data.add_duration\r\n          );\r\n          formFields[\"end_time\"] = this.addTimes(\r\n            formFields[\"start_time\"],\r\n            data.add_duration\r\n          );\r\n          recurringList = [];\r\n        } else {\r\n          formFields[\"start_time\"] = data ? startTime : \"\";\r\n          formFields[\"end_time\"] = data ? data.end_time : \"\";\r\n          selectedList[0][\"start_time\"] = data ? startTime : \"\";\r\n          selectedList[0][\"end_time\"] = data ? data.end_time : \"\";\r\n          formFields[\"emp_no\"] = data.emp_id;\r\n          selectedList[0][\"emp_no\"] = data.emp_id;\r\n          for (let value of data.recur_lst) {\r\n            recurringList.push({\r\n              id: value.id,\r\n              date: value.date,\r\n              appt_status: value.appt_status,\r\n              start_time: value.start_time,\r\n              end_time: value.end_time,\r\n              item_name: value.item_name,\r\n              Item_Codeid: value.Item_Codeid,\r\n              emp_name: value.emp_name,\r\n              emp_id: value.emp_id,\r\n              requesttherapist: value.requesttherapist,\r\n              add_duration: value.add_duration,\r\n              selected: false,\r\n              checktype: value.checktype,\r\n              treat_parentcode: value.treat_parentcode,\r\n            });\r\n          }\r\n        }\r\n\r\n        formFields[\"Item_Codeid\"] = data.Item_Codeid;\r\n        formFields[\"Item_CodeName\"] = data.item_name;\r\n        formFields[\"add_duration\"] = data.add_duration;\r\n        formFields[\"edit_remark\"] = \"\";\r\n        formFields[\"requesttherapist\"] = data.requesttherapist;\r\n        formFields[\"recur_days\"] = data.recur_days;\r\n        formFields[\"recur_qty\"] = data.recur_qty;\r\n        formFields[\"item_text\"] = data.item_name;\r\n        formFields[\"checktype\"] = data.checktype;\r\n        formFields[\"treat_parentcode\"] = data.treat_parentcode;\r\n\r\n        selectedList[0][\"Item_Codeid\"] = data.Item_Codeid;\r\n        selectedList[0][\"Item_CodeName\"] = data.item_name;\r\n\r\n        selectedList[0][\"add_duration\"] = data.add_duration;\r\n        selectedList[0][\"edit_remark\"] = \"\";\r\n        selectedList[0][\"requesttherapist\"] = data.requesttherapist;\r\n        selectedList[0][\"recur_days\"] = data.recur_days;\r\n        selectedList[0][\"recur_qty\"] = data.recur_qty;\r\n        selectedList[0][\"item_text\"] = data.item_name;\r\n        selectedList[0][\"checktype\"] = data.checktype;\r\n        selectedList[0][\"treat_parentcode\"] = data.treat_parentcode;\r\n        this.setState({\r\n          selectedRec_days: data.recur_days,\r\n          selectedRec_qty: data.recur_qty,\r\n        });\r\n\r\n        this.setState({\r\n          formFields,\r\n          selectedList,\r\n        });\r\n\r\n        this.props.updateForm(\"treatmentList\", selectedList);\r\n      }\r\n    });\r\n  };\r\n  handleItemSettings = () => {\r\n    let { settingData } = this.state;\r\n    this.props.getCommonApi(`userlist/`).then(key => {\r\n      let { status, data } = key;\r\n      console.log(key, \"settingsData appointmentCreate\");\r\n      if (status === 200) {\r\n        settingData = data;\r\n        this.setState({ settingData });\r\n      }\r\n    });\r\n  };\r\n  componentWillMount() {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  }\r\n\r\n  getStaffAvailability = () => {\r\n    this.props\r\n      .getCommonApi(\r\n        `staffsavailable/?Appt_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          // for (let value of data) {\r\n          //     staffList.push({ value: value.id, label: value.emp_name })\r\n          // }\r\n          this.setState({ list: data });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n    console.log(event.target.value, event.target, event, \"dfhdfjghkjfghj\");\r\n    let { treatmentField } = this.state;\r\n    treatmentField[\"treatment\"] = event.target.value;\r\n    this.setState({ search: event.target.value, treatmentField });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        let data = { search: searchString };\r\n        // this.queryHandler(data)\r\n        this.search(data);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  search = data => {\r\n    let { page = 1, limit = 10, search = \"\" } = data;\r\n    let { selectTreatmentId } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `stocklist/?Item_Deptid=${selectTreatmentId}&search=${search}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(res => {\r\n        console.log(res, \"treatmentList treatment_parentcode\");\r\n        if (res.status === 200) {\r\n          this.setState({\r\n            treatmentList: res.data.dataList,\r\n            meta: res.data.meta.pagination,\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  handlePagination = page => {\r\n    this.search(page);\r\n  };\r\n\r\n  handleChangeTreatment = async ({ target: { value, name } }) => {\r\n    let { treatmentField, search, selectTreatmentId } = this.state;\r\n    console.log(\"uihwkjrwkej\", name, value);\r\n    treatmentField[name] = value;\r\n    if (name === \"category\") {\r\n      selectTreatmentId = value;\r\n    } else if (name === \"treatment\") {\r\n      search = value;\r\n    }\r\n    await this.setState({\r\n      treatmentField,\r\n      selectTreatmentId,\r\n      search,\r\n    });\r\n\r\n    let page = 1,\r\n      limit = 10;\r\n    this.props\r\n      .getCommonApi(\r\n        `stocklist/?Item_Deptid=${selectTreatmentId}&search=${search}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.status === 200) {\r\n          this.setState({\r\n            treatmentList: res.data.dataList,\r\n            meta: res.data.meta.pagination,\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }, index) => {\r\n    let { selectedList, appointmentId } = this.state;\r\n\r\n    if (name === \"add_duration\") {\r\n      if (appointmentId) {\r\n        selectedList[index][\"end_time\"] = this.addTimes(\r\n          this.getHoursFromDate(selectedList[index][\"start_time\"]),\r\n          value\r\n        );\r\n      } else {\r\n        selectedList[index][\"end_time\"] = this.addTimes(\r\n          selectedList[index][\"start_time\"],\r\n          value\r\n        );\r\n      }\r\n      selectedList[index][\"add_duration\"] = value;\r\n      if (selectedList.length - 1 > index) {\r\n        selectedList[index + 1][\"start_time\"] = selectedList[index][\"end_time\"];\r\n        if (selectedList[index + 1][\"add_duration\"] !== \"\") {\r\n          selectedList[index + 1][\"end_time\"] = this.addTimes(\r\n            selectedList[index][\"end_time\"],\r\n            selectedList[index + 1][\"add_duration\"]\r\n          );\r\n        }\r\n      }\r\n    } else if (name === \"Item_CodeName\") {\r\n      selectedList[index][\"Item_Codeid\"] = 6213;\r\n      selectedList[index][\"Item_CodeName\"] = value;\r\n      selectedList[index][\"item_text\"] = value;\r\n      selectedList[index][\"checktype\"] = \"freetext\";\r\n      selectedList[index][\"treat_parentcode\"] = null;\r\n    } else if (name === \"recur_days\" || name === \"recur_qty\") {\r\n      if (value <= 0 || value === \"\") {\r\n        selectedList[index][name] = null;\r\n      } else {\r\n        selectedList[index][name] = Number(value);\r\n      }\r\n    } else {\r\n      selectedList[index][name] = value;\r\n    }\r\n\r\n    await this.setState({\r\n      selectedList,\r\n    });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  handleMultiSelect = data => {\r\n    let { formFields } = this.state;\r\n    let list = [];\r\n    for (let key of data) {\r\n      list.push(key.value);\r\n    }\r\n    formFields[\"emp_no\"] = list;\r\n    this.setState({ formFields });\r\n    console.log(formFields, \"oyokkjk\");\r\n  };\r\n\r\n  // handleDatePick = async (name, value) => {\r\n  //   debugger;\r\n  //   let { formFields, selectedList } = this.state;\r\n  //   let time = this.getHoursFromDate(value);\r\n  //   formFields[\"start_time\"] = time;\r\n  //   selectedList[0][\"start_time\"] = time ? time : formFields[\"start_time\"];\r\n  //   if (time) {\r\n  //     formFields[\"end_time\"] = this.addTimes(\r\n  //       formFields[\"start_time\"],\r\n  //       formFields[\"add_duration\"]\r\n  //     );\r\n  //     selectedList[0][\"end_time\"] = this.addTimes(\r\n  //       selectedList[0][\"start_time\"],\r\n  //       formFields[\"add_duration\"]\r\n  //     );\r\n  //   }\r\n  //   await this.setState({\r\n  //     formFields,\r\n  //     selectedList,\r\n  //   });\r\n  //   await this.props.updateForm(\"treatmentList\", selectedList);\r\n  // };\r\n\r\n  handleDatePick = async (name, value) => {\r\n    let { formFields, selectedList } = this.state;\r\n    let time = this.getHoursFromDate(value);\r\n    formFields[\"start_time\"] = value;\r\n    selectedList[0][\"start_time\"] = value\r\n      ? value\r\n      : this.timeToDateFormat(formFields[\"start_time\"]);\r\n    if (time) {\r\n      formFields[\"end_time\"] = this.addTimes(time, formFields[\"add_duration\"]);\r\n      selectedList[0][\"end_time\"] = this.addTimes(\r\n        time,\r\n        formFields[\"add_duration\"]\r\n      );\r\n    }\r\n    await this.setState({\r\n      formFields,\r\n      selectedList,\r\n    });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  getHoursFromDate = date => {\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let hours = hour > 9 ? hour : \"0\" + hour;\r\n    let minutes = minute > 9 ? minute : \"0\" + minute;\r\n    return hours + \":\" + minutes;\r\n  };\r\n\r\n  stafflistvalidation = appointmentTreatmentList => {\r\n    if (appointmentTreatmentList.length > 0) {\r\n      for (let item of appointmentTreatmentList) {\r\n        if (!item.emp_no || item.emp_no === \"\" || item.emp_no === null) {\r\n          Toast({ type: \"error\", message: \"Please select Staff\" });\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n  handleUpdate = () => {\r\n    let { appointmentCustomerDetail, appointmentTreatmentList } = this.props;\r\n    let { appointmentId, selectedRec_days, selectedRec_qty } = this.state;\r\n\r\n    if (\r\n      appointmentCustomerDetail.customerName &&\r\n      appointmentCustomerDetail.bookingStatus\r\n    ) {\r\n      if (this.stafflistvalidation(appointmentTreatmentList)) {\r\n        let data = {\r\n          appt_date: dateFormat(\r\n            new Date(appointmentCustomerDetail.appointmentDate),\r\n            \"yyyy-mm-dd\"\r\n          ),\r\n          Room_Codeid: appointmentCustomerDetail.Room_Codeid,\r\n          appt_status: appointmentCustomerDetail.bookingStatus,\r\n          sec_status: appointmentCustomerDetail.sec_status,\r\n          ori_remark: appointmentCustomerDetail.new_remark,\r\n          edit_remark: appointmentCustomerDetail.edit_remark,\r\n          start_time: this.getHoursFromDate(\r\n            appointmentTreatmentList[0].start_time\r\n          ),\r\n          end_time: appointmentTreatmentList[0].end_time,\r\n          item_id: appointmentTreatmentList[0].Item_Codeid,\r\n          add_duration: appointmentTreatmentList[0].add_duration,\r\n          emp_id: appointmentTreatmentList[0].emp_no,\r\n          requesttherapist: appointmentTreatmentList[0].requesttherapist,\r\n          item_text: appointmentTreatmentList[0].item_text,\r\n          recur_days:\r\n            selectedRec_days === appointmentTreatmentList[0].recur_days ||\r\n            appointmentTreatmentList[0].recur_days === \"\" ||\r\n            appointmentTreatmentList[0].recur_days <= 0\r\n              ? null\r\n              : appointmentTreatmentList[0].recur_days,\r\n          recur_qty:\r\n            Number(selectedRec_qty) ===\r\n              Number(appointmentTreatmentList[0].recur_qty) ||\r\n            Number(appointmentTreatmentList[0].recur_qty) === \"\" ||\r\n            Number(appointmentTreatmentList[0].recur_qty) <= 0\r\n              ? null\r\n              : Number(appointmentTreatmentList[0].recur_qty),\r\n          checktype: appointmentTreatmentList[0].checktype,\r\n          treat_parentcode: appointmentTreatmentList[0].treat_parentcode,\r\n          remark_setting: appointmentCustomerDetail.remark_setting,\r\n        };\r\n        console.log(data, \"UpdatedappointmentTreatmentListWhenupdate\");\r\n\r\n        this.props\r\n          .commonPatchApi(`appointmentresources/${appointmentId}/`, data)\r\n          .then(async res => {\r\n            console.log(res, \"cart check while update booking\");\r\n            if (res.status === 200) {\r\n              this.handleCloseDialog();\r\n              this.handleSaveorUpdate();\r\n            } else if (res.status === 201) {\r\n              // this.handleCloseDialog();\r\n              // this.handleSaveorUpdate();\r\n              let formFields = { custId: 0, custName: \"\" };\r\n              formFields[\"custId\"] = appointmentCustomerDetail.customerName;\r\n              formFields[\"custName\"] = appointmentCustomerDetail.custName;\r\n\r\n              await this.props.updateForm(\"basicApptDetail\", formFields);\r\n              this.props\r\n                .getCommonApi(\r\n                  `itemcart/Check/?cart_date=${dateFormat(\r\n                    new Date(),\r\n                    \"yyyy-mm-dd\"\r\n                  )}&cust_noid=${appointmentCustomerDetail.customerName}`\r\n                )\r\n                .then(res => {\r\n                  history.push(\"/admin/cart\");\r\n                });\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      this.showErrorMessage();\r\n    }\r\n  };\r\n  handleRecurringUpdate = () => {\r\n    let { appointmentCustomerDetail, appointmentTreatmentList } = this.props;\r\n    let {\r\n      appointmentId,\r\n      selectedRec_days,\r\n      selectedRec_qty,\r\n      recurringList,\r\n      recurringSelectAll,\r\n    } = this.state;\r\n    let finalRecurring = [];\r\n    for (var recurringItem of recurringList) {\r\n      if (recurringItem.selected) {\r\n        let value = recurringItem.id;\r\n        finalRecurring.push(value);\r\n      }\r\n    }\r\n    console.log(finalRecurring, \"finalrecurringList\");\r\n    if (\r\n      appointmentCustomerDetail.customerName &&\r\n      appointmentCustomerDetail.bookingStatus\r\n    ) {\r\n      if (this.stafflistvalidation(appointmentTreatmentList)) {\r\n        let data = {\r\n          appt_date: dateFormat(\r\n            new Date(appointmentCustomerDetail.appointmentDate),\r\n            \"yyyy-mm-dd\"\r\n          ),\r\n          Room_Codeid: appointmentCustomerDetail.Room_Codeid,\r\n          appt_status: appointmentCustomerDetail.bookingStatus,\r\n          sec_status: appointmentCustomerDetail.sec_status,\r\n          edit_remark: appointmentCustomerDetail.edit_remark,\r\n          start_time: this.getHoursFromDate(\r\n            appointmentTreatmentList[0].start_time\r\n          ),\r\n          end_time: appointmentTreatmentList[0].end_time,\r\n          item_id: appointmentTreatmentList[0].Item_Codeid,\r\n          add_duration: appointmentTreatmentList[0].add_duration,\r\n          emp_id: appointmentTreatmentList[0].emp_no,\r\n          requesttherapist: appointmentTreatmentList[0].requesttherapist,\r\n          item_text: appointmentTreatmentList[0].item_text,\r\n          recur_days:\r\n            selectedRec_days === appointmentTreatmentList[0].recur_days ||\r\n            appointmentTreatmentList[0].recur_days === \"\" ||\r\n            appointmentTreatmentList[0].recur_days <= 0\r\n              ? null\r\n              : appointmentTreatmentList[0].recur_days,\r\n          recur_qty:\r\n            Number(selectedRec_qty) ===\r\n              Number(appointmentTreatmentList[0].recur_qty) ||\r\n            Number(appointmentTreatmentList[0].recur_qty) === \"\" ||\r\n            Number(appointmentTreatmentList[0].recur_qty) <= 0\r\n              ? null\r\n              : Number(appointmentTreatmentList[0].recur_qty),\r\n          recur_ids: finalRecurring,\r\n        };\r\n        console.log(data, \"UpdatedappointmentTreatmentListWhenupdate\");\r\n        if (recurringSelectAll) {\r\n          this.props\r\n            .commonPatchApi(\r\n              `appointmentrecur/${appointmentId}/?type=${`all`} `,\r\n              data\r\n            )\r\n            .then(async res => {\r\n              if (res.status === 200) {\r\n                this.handleCloseDialog();\r\n                this.handleSaveorUpdate();\r\n              }\r\n            });\r\n        } else {\r\n          this.props\r\n            .commonPatchApi(`appointmentrecur/${appointmentId}/`, data)\r\n            .then(async res => {\r\n              console.log(res, \"type all clicked result\");\r\n              if (res.status === 200) {\r\n                this.handleCloseDialog();\r\n                this.handleSaveorUpdate();\r\n              }\r\n            });\r\n        }\r\n      }\r\n    } else {\r\n      this.showErrorMessage();\r\n    }\r\n  };\r\n  handleSubmit = () => {\r\n    // this.props.handleConfirmBooking()\r\n    let { appointmentCustomerDetail, appointmentTreatmentList } = this.props;\r\n    console.log(appointmentCustomerDetail, \"appointmentcustomerdetailwhenSave\");\r\n    console.log(\r\n      appointmentTreatmentList,\r\n      \"UpdatedappointmentTreatmentListWhenSave\"\r\n    );\r\n    if (\r\n      appointmentCustomerDetail.customerName &&\r\n      appointmentCustomerDetail.bookingStatus\r\n    ) {\r\n      if (this.stafflistvalidation(appointmentTreatmentList)) {\r\n        let data = {\r\n          Appointment: {\r\n            appt_date: dateFormat(\r\n              new Date(appointmentCustomerDetail.appointmentDate),\r\n              \"yyyy-mm-dd\"\r\n            ),\r\n            Appt_typeid: appointmentCustomerDetail.Appt_typeid,\r\n            cust_noid: appointmentCustomerDetail.customerName,\r\n            new_remark: appointmentCustomerDetail.new_remark,\r\n            // emp_noid: appointmentCustomerDetail.emp_id,\r\n            Source_Codeid: appointmentCustomerDetail.Source_Codeid,\r\n            Room_Codeid: appointmentCustomerDetail.Room_Codeid,\r\n            appt_status: appointmentCustomerDetail.bookingStatus,\r\n            sec_status: appointmentCustomerDetail.sec_status,\r\n            ItemSite_Codeid: appointmentCustomerDetail.ItemSite_Codeid,\r\n            walkin: appointmentCustomerDetail.walkin,\r\n          },\r\n          Treatment: appointmentTreatmentList,\r\n        };\r\n\r\n        this.props.commonCreateApi(`appointment/`, data).then(async res => {\r\n          if (res.status === 201) {\r\n            this.handleCloseDialog();\r\n            this.handleSaveorUpdate();\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      this.showErrorMessage();\r\n    }\r\n  };\r\n\r\n  getDateTime = data => {\r\n    let date = new Date(data);\r\n    date = String(date).split(\" \");\r\n    let date1 = date[2] + \"th \" + date[1] + \", \" + date[3];\r\n    let time = date[4].split(\":\");\r\n    let time1 =\r\n      String(Number(time[0]) > 12 ? Number(time[0]) - 12 : time[0]) +\r\n      \":\" +\r\n      time[1] +\r\n      (Number(time[0]) > 12 ? \"PM\" : \"AM\");\r\n    return time1 + \", \" + date1;\r\n  };\r\n\r\n  handleDialog = () => {\r\n    this.setState({ isOpenModal: false, index: null });\r\n  };\r\n\r\n  handleMultipleCustomer = () => {\r\n    this.setState({ isOpenModal: false });\r\n  };\r\n\r\n  handleSelectPackage = async data => {\r\n    debugger;\r\n    let { selectedList, PackageIndex, appointmentId } = this.state;\r\n\r\n    if (PackageIndex === 0 && selectedList[0][\"Item_CodeName\"] === \"\") {\r\n      selectedList[0][\"start_time\"] = selectedList[0][\"start_time\"];\r\n      if (appointmentId) {\r\n        selectedList[0][\"end_time\"] = this.addTimes(\r\n          this.getHoursFromDate(selectedList[0][\"start_time\"]),\r\n          data.add_duration\r\n        );\r\n      } else {\r\n        selectedList[0][\"end_time\"] = this.addTimes(\r\n          selectedList[0][\"start_time\"],\r\n          data.add_duration\r\n        );\r\n      }\r\n      selectedList[0][\"Item_Codeid\"] = data.id;\r\n      selectedList[0][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[0][\"item_text\"] = null;\r\n      selectedList[0][\"add_duration\"] = data.add_duration;\r\n      selectedList[0][\"checktype\"] = \"package\";\r\n      selectedList[0][\"treat_parentcode\"] = data.treatment_parentcode;\r\n\r\n      await this.setState({\r\n        selectedList,\r\n        PackageIndex: PackageIndex + 1,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else if (selectedList[selectedList.length - 1][\"Item_CodeName\"] === \"\") {\r\n      selectedList[selectedList.length - 1][\"start_time\"] =\r\n        selectedList[selectedList.length - 1][\"start_time\"];\r\n      if (appointmentId) {\r\n        selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\r\n          this.getHoursFromDate(\r\n            selectedList[selectedList.length - 1][\"start_time\"]\r\n          ),\r\n          data.add_duration\r\n        );\r\n      } else {\r\n        selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\r\n          selectedList[selectedList.length - 1][\"start_time\"],\r\n          data.add_duration\r\n        );\r\n      }\r\n\r\n      selectedList[selectedList.length - 1][\"Item_Codeid\"] = data.id;\r\n      selectedList[selectedList.length - 1][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[selectedList.length - 1][\"item_text\"] = null;\r\n      selectedList[selectedList.length - 1][\"add_duration\"] = data.add_duration;\r\n      selectedList[selectedList.length - 1][\"checktype\"] = \"package\";\r\n      selectedList[selectedList.length - 1][\"treat_parentcode\"] =\r\n        data.treatment_parentcode;\r\n\r\n      await this.setState({\r\n        selectedList,\r\n        PackageIndex: PackageIndex + 1,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else if (\r\n      selectedList[selectedList.length - 1][\"Item_CodeName\"] !== \"\" &&\r\n      appointmentId\r\n    ) {\r\n      selectedList[selectedList.length - 1][\"start_time\"] =\r\n        selectedList[selectedList.length - 1][\"start_time\"];\r\n      if (appointmentId) {\r\n        selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\r\n          this.getHoursFromDate(\r\n            selectedList[selectedList.length - 1][\"start_time\"]\r\n          ),\r\n          data.add_duration\r\n        );\r\n      } else {\r\n        selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\r\n          selectedList[selectedList.length - 1][\"start_time\"],\r\n          data.add_duration\r\n        );\r\n      }\r\n\r\n      selectedList[selectedList.length - 1][\"Item_Codeid\"] = data.id;\r\n      selectedList[selectedList.length - 1][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[selectedList.length - 1][\"item_text\"] = null;\r\n      selectedList[selectedList.length - 1][\"add_duration\"] = data.add_duration;\r\n      selectedList[selectedList.length - 1][\"checktype\"] = \"package\";\r\n      selectedList[selectedList.length - 1][\"treat_parentcode\"] =\r\n        data.treatment_parentcode;\r\n\r\n      await this.setState({\r\n        selectedList,\r\n        PackageIndex: PackageIndex + 1,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else {\r\n      var listCount = selectedList.length - 1;\r\n      let treatment = {};\r\n      if (appointmentId) {\r\n        treatment[\"start_time\"] = this.timeToDateFormat(\r\n          selectedList[listCount][\"end_time\"]\r\n        );\r\n      } else {\r\n        treatment[\"start_time\"] = selectedList[listCount][\"end_time\"];\r\n      }\r\n      treatment[\"end_time\"] = this.addTimes(\r\n        selectedList[listCount][\"end_time\"],\r\n        data.add_duration\r\n      );\r\n      treatment[\"Item_Codeid\"] = data.id;\r\n      treatment[\"Item_CodeName\"] = data.item_desc;\r\n      treatment[\"item_text\"] = null;\r\n      treatment[\"add_duration\"] = data.add_duration;\r\n      treatment[\"checktype\"] = \"package\";\r\n      treatment[\"treat_parentcode\"] = data.treatment_parentcode;\r\n      selectedList.push(treatment);\r\n      await this.setState({\r\n        selectedList,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    }\r\n\r\n    this.setState({ isOpenModal: false });\r\n  };\r\n\r\n  handleSelectTreatment = async data => {\r\n    let { selectedList, index, appointmentId } = this.state;\r\n\r\n    if (index == 0 && selectedList.length == 1) {\r\n      selectedList[0][\"start_time\"] = selectedList[0][\"start_time\"];\r\n      if (appointmentId) {\r\n        selectedList[0][\"end_time\"] = this.addTimes(\r\n          this.getHoursFromDate(selectedList[0][\"start_time\"]),\r\n          data.add_duration\r\n        );\r\n      } else {\r\n        selectedList[0][\"end_time\"] = this.addTimes(\r\n          selectedList[0][\"start_time\"],\r\n          data.add_duration\r\n        );\r\n      }\r\n      selectedList[0][\"Item_Codeid\"] = data.id;\r\n      selectedList[0][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[0][\"add_duration\"] = data.add_duration;\r\n      selectedList[0][\"checktype\"] = \"service\";\r\n      selectedList[0][\"treat_parentcode\"] = null;\r\n\r\n      await this.setState({\r\n        selectedList,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else {\r\n      selectedList[index][\"start_time\"] = selectedList[index][\"start_time\"];\r\n      if (appointmentId) {\r\n        selectedList[index][\"end_time\"] = this.addTimes(\r\n          this.getHoursFromDate(selectedList[index][\"start_time\"]),\r\n          data.add_duration\r\n        );\r\n      } else {\r\n        selectedList[index][\"end_time\"] = this.addTimes(\r\n          selectedList[index][\"start_time\"],\r\n          data.add_duration\r\n        );\r\n      }\r\n      selectedList[index][\"Item_Codeid\"] = data.id;\r\n      selectedList[index][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[index][\"add_duration\"] = data.add_duration;\r\n      selectedList[index][\"checktype\"] = \"service\";\r\n      selectedList[index][\"treat_parentcode\"] = null;\r\n      if (selectedList.length - 1 > index) {\r\n        selectedList[index + 1][\"start_time\"] = selectedList[index][\"end_time\"];\r\n        if (selectedList[index + 1][\"add_duration\"] !== \"\") {\r\n          selectedList[index + 1][\"end_time\"] = this.addTimes(\r\n            selectedList[index][\"end_time\"],\r\n            selectedList[index + 1][\"add_duration\"]\r\n          );\r\n        }\r\n      }\r\n      await this.setState({\r\n        selectedList,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    }\r\n    this.setState({ isOpenModal: false });\r\n  };\r\n\r\n  timeToMins = time => {\r\n    var b = time.split(\":\");\r\n    return b[0] * 60 + +b[1];\r\n  };\r\n\r\n  // Convert minutes to a time in format hh:mm\r\n  // Returned value is in range 00  to 24 hrs\r\n  timeFromMins = mins => {\r\n    function z(n) {\r\n      return (n < 10 ? \"0\" : \"\") + n;\r\n    }\r\n    var h = ((mins / 60) | 0) % 24;\r\n    var m = mins % 60;\r\n    return z(h) + \":\" + z(m);\r\n  };\r\n\r\n  // Add two times in hh:mm format\r\n  addTimes = (t0, t1) => {\r\n    return this.timeFromMins(this.timeToMins(t0) + this.timeToMins(t1));\r\n  };\r\n\r\n  handleNewTimeChange = selectedTime => {\r\n    let time = new Date(dateFormat(selectedTime));\r\n    let selectedTimeNew = time.getTime();\r\n    console.log(selectedTimeNew);\r\n    let { selectedList, formFields } = this.state;\r\n    formFields = {\r\n      start_time: selectedTimeNew,\r\n      end_time: \"\",\r\n      add_duration: \"\",\r\n    };\r\n  };\r\n\r\n  handleAddtreatment = async index => {\r\n    let { selectedList, formFields } = this.state;\r\n    if (selectedList[index][\"end_time\"]) {\r\n      formFields = {\r\n        start_time: selectedList[selectedList.length - 1].end_time,\r\n        end_time: \"\",\r\n        Item_Codeid: 6213,\r\n        add_duration: \"\",\r\n        emp_no: 0,\r\n        requesttherapist: false,\r\n        recur_days: null,\r\n        recur_qty: null,\r\n        item_text: null,\r\n        checktype: \"\",\r\n        treat_parentcode: null,\r\n      };\r\n      selectedList.push({\r\n        start_time: selectedList[selectedList.length - 1].end_time,\r\n        end_time: \"\",\r\n        Item_Codeid: 6213,\r\n        Item_CodeName: \"\",\r\n        add_duration: \"\",\r\n        emp_no: 0,\r\n        requesttherapist: false,\r\n        recur_days: null,\r\n        recur_qty: null,\r\n        item_text: null,\r\n        checktype: \"\",\r\n        treat_parentcode: null,\r\n      });\r\n\r\n      await this.setState({ selectedList, formFields });\r\n\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else {\r\n      Toast({ type: \"error\", message: \"End time shouldn't be empty\" });\r\n    }\r\n  };\r\n\r\n  deleteTreatment = async index => {\r\n    let { selectedList } = this.state;\r\n    selectedList.splice(index, 1);\r\n    this.setState({ selectedList });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  handleTreatementmodal = () => {\r\n    this.setState(prevState => ({\r\n      isTreatementModal: !prevState.isTreatementModal,\r\n    }));\r\n  };\r\n  handleChangeremark = async ({ target: { value, name } }) => {\r\n    let { formFields, selectedList } = this.state;\r\n    formFields[name] = value;\r\n    selectedList[0][name] = value;\r\n    await this.setState({\r\n      formFields,\r\n      selectedList,\r\n    });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  handleCheckbox = async ({ target: { value, name } }, index) => {\r\n    let { treatmentList } = this.state;\r\n    let { selectedList } = this.state;\r\n    selectedList[index][\"requesttherapist\"] = value;\r\n    await this.setState({\r\n      selectedList,\r\n    });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  handleCloseDialog = async () => {\r\n    this.props.handleCloseDialog();\r\n  };\r\n  handleSaveorUpdate = async () => {\r\n    this.props.handleSaveorUpdate();\r\n  };\r\n  handleRecurringlistCheckbox = async ({ target: { value, name } }, item) => {\r\n    let { recurringList } = this.state;\r\n    let listCheckbox = recurringList.find(acc => acc.id === item.id);\r\n    if (listCheckbox) {\r\n      listCheckbox[\"selected\"] = value;\r\n      await this.setState({ ...this.state.recurringList, listCheckbox });\r\n    }\r\n    let Checkbox = recurringList.filter(acc => acc.selected === true).length;\r\n    if (Checkbox == this.state.recurringList.length) {\r\n      await this.setState({ recurringSelectAll: true });\r\n    } else {\r\n      await this.setState({ recurringSelectAll: false });\r\n    }\r\n  };\r\n\r\n  handleRecurringSelectAllCheckbox = async ({ target: { value, name } }) => {\r\n    let { recurringList } = this.state;\r\n    await this.setState({ recurringSelectAll: value });\r\n    for (let item of recurringList) {\r\n      item[\"selected\"] = value;\r\n      await this.setState({ ...this.state.recurringList, item });\r\n    }\r\n  };\r\n  handleCopyAppointment = async () => {\r\n    let { appointmentId } = this.state;\r\n    let formFields = {};\r\n    formFields[\"appointmentId\"] = appointmentId;\r\n    await this.props.updateForm(\"AppointmentCopy\", formFields);\r\n    console.log(\r\n      this.props.AppointmentCopy,\r\n      \"after copy click appointment copy id\"\r\n    );\r\n    Toast({ type: \"success\", message: \"Appointment copied\" });\r\n  };\r\n  handlePasteAppointment = async () => {\r\n    let { AppointmentCopy } = this.props;\r\n    if (AppointmentCopy) {\r\n      this.setState({\r\n        PasteAppointmentId: AppointmentCopy.appointmentId,\r\n      });\r\n      this.handleRenderApptDetail(AppointmentCopy.appointmentId, true);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      outletOption,\r\n      staffOption,\r\n      roomOption,\r\n      selectedList,\r\n      siteList,\r\n      list,\r\n      formFields,\r\n      timeDropdown,\r\n      duration,\r\n      isOpenModal,\r\n      treatmentField,\r\n      treatmentList = [],\r\n      categoryList,\r\n      treatmentListHeader,\r\n      meta,\r\n      isTreatementModal,\r\n      appointmentId,\r\n      selectedRec_days,\r\n      selectedRec_qty,\r\n      recurringList,\r\n      recurringSelectAll,\r\n      settingData,\r\n      PasteAppointmentId,\r\n    } = this.state;\r\n    let { customerDetail, selectedTreatmentList, customerId } = this.props;\r\n    let { outlet, staff, rooms } = customerDetail;\r\n    return (\r\n      <>\r\n        {PasteAppointmentId <= 0 ? (\r\n          <AppointmentForm\r\n            onRef={ref => (this.child = ref)}\r\n            selectedCustomer={this.props.selectedCustomer}\r\n            PasteAppointmentId={PasteAppointmentId}\r\n          ></AppointmentForm>\r\n        ) : null}\r\n        {PasteAppointmentId > 0 ? (\r\n          <AppointmentForm\r\n            onRef={ref => (this.child = ref)}\r\n            selectedCustomer={this.props.selectedCustomer}\r\n            PasteAppointmentId={PasteAppointmentId}\r\n          ></AppointmentForm>\r\n        ) : null}\r\n        <div className=\"create-appointment select-treatment-appointment\">\r\n          <div className=\"row\">\r\n            <div className=\" col-md-12\">\r\n              <div className=\"appointment\">\r\n                <div className=\"appointment-holder\">\r\n                  <div className=\"treatment-section\">\r\n                    <div className=\"select-treatment select-list w-100\">\r\n                      <div className=\"row selected selected-header mb-4\">\r\n                        <div className=\"col-1 p-0\">Start</div>\r\n                        <div className=\"col-1 p-0\">End</div>\r\n                        <div className=\"col-3 p-0 header-detail\">Services</div>\r\n\r\n                        <div className=\"col-1 p-0 header-detail\">Duration</div>\r\n                        <div className=\"col-2 p-0\">Treatment staff</div>\r\n                        <div className=\"col-1 p-0 d-flex justify-content-center\">\r\n                          <img\r\n                            src={req_therapist}\r\n                            alt=\"\"\r\n                            height=\"25\"\r\n                            width=\"25\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"col-1 p-0 header-detail d-flex justify-content-start\">\r\n                          Recur. Days\r\n                        </div>\r\n                        <div className=\"col-1 p-0 header-detail d-flex justify-content-center\">\r\n                          Recur. Qty\r\n                        </div>\r\n                      </div>\r\n                      {selectedList.length > 0\r\n                        ? selectedList.map((item, index) => {\r\n                            return (\r\n                              <div className=\"row selected  mb-4\" key={index}>\r\n                                <div className=\"col-1 mr-1 p-0\">\r\n                                  {appointmentId ? (\r\n                                    <NormalDateTime\r\n                                      onChange={this.handleDatePick}\r\n                                      label=\"start_time\"\r\n                                      name=\"start_time\"\r\n                                      timeOnly={true}\r\n                                      dateFormat={`HH:mm`}\r\n                                      showTime={true}\r\n                                      selected={false}\r\n                                      placeholder=\"\"\r\n                                      timeIntervals={5}\r\n                                      value={item.start_time}\r\n                                      showIcon={false}\r\n                                    />\r\n                                  ) : (\r\n                                    <NormalInput\r\n                                      placeholder=\"start\"\r\n                                      // options={timeDropdown}\r\n                                      value={item.start_time}\r\n                                      name=\"start_time\"\r\n                                      onChange={this.handleChange}\r\n                                      className=\"customer-name p-0\"\r\n                                      disabled={true}\r\n                                    />\r\n                                  )}\r\n                                </div>\r\n                                <div className=\"col-1 mr-1 p-0\">\r\n                                  <NormalInput\r\n                                    placeholder=\"end\"\r\n                                    // options={timeDropdown}\r\n                                    value={item.end_time}\r\n                                    name=\"end_time\"\r\n                                    onChange={this.handleChange}\r\n                                    className=\"customer-name p-0\"\r\n                                    disabled={true}\r\n                                  />\r\n                                </div>\r\n                                <div className=\"col-3 mr-1 p-0\">\r\n                                  <div className=\"header-detail\"></div>\r\n                                  {settingData &&\r\n                                  settingData.service_sel &&\r\n                                  settingData.service_text ? (\r\n                                    <NormalInput\r\n                                      placeholder=\"service\"\r\n                                      // options={siteList}\r\n                                      value={item.Item_CodeName}\r\n                                      name=\"Item_CodeName\"\r\n                                      onClick={() =>\r\n                                        this.setState({\r\n                                          isOpenModal: true,\r\n                                          index: index,\r\n                                        })\r\n                                      }\r\n                                      onChange={e =>\r\n                                        this.handleChange(e, index)\r\n                                      }\r\n                                      className=\"customer-name p-0 px-2\"\r\n                                    />\r\n                                  ) : null}\r\n                                  {settingData &&\r\n                                  settingData.service_sel &&\r\n                                  !settingData.service_text ? (\r\n                                    <NormalInput\r\n                                      placeholder=\"service\"\r\n                                      // options={siteList}\r\n                                      value={item.Item_CodeName}\r\n                                      name=\"Item_CodeName\"\r\n                                      onClick={() =>\r\n                                        this.setState({\r\n                                          isOpenModal: true,\r\n                                          index: index,\r\n                                        })\r\n                                      }\r\n                                      onChange={() => {}}\r\n                                      className=\"customer-name p-0 px-2\"\r\n                                    />\r\n                                  ) : null}\r\n                                  {settingData &&\r\n                                  !settingData.service_sel &&\r\n                                  settingData.service_text ? (\r\n                                    <NormalInput\r\n                                      placeholder=\"service\"\r\n                                      // options={siteList}\r\n                                      value={item.Item_CodeName}\r\n                                      name=\"Item_CodeName\"\r\n                                      onClick={() => {}}\r\n                                      onChange={e =>\r\n                                        this.handleChange(e, index)\r\n                                      }\r\n                                      className=\"customer-name p-0 px-2\"\r\n                                    />\r\n                                  ) : null}\r\n                                  {settingData &&\r\n                                  !settingData.service_sel &&\r\n                                  !settingData.service_text ? (\r\n                                    <NormalInput\r\n                                      placeholder=\"service\"\r\n                                      // options={siteList}\r\n                                      value={item.Item_CodeName}\r\n                                      name=\"Item_CodeName\"\r\n                                      onClick={() => {}}\r\n                                      onChange={() => {}}\r\n                                      className=\"customer-name p-0 px-2\"\r\n                                    />\r\n                                  ) : null}\r\n                                </div>\r\n                                <div className=\"col-1 mr-1 p-0 header-detail\">\r\n                                  <NormalSelect\r\n                                    // placeholder=\"Enter here\"\r\n                                    options={duration}\r\n                                    value={item.add_duration}\r\n                                    name=\"add_duration\"\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                    className=\"customer-name p-0\"\r\n                                  />\r\n                                </div>\r\n                                <div className=\"col-2 p-0\">\r\n                                  <NormalSelect\r\n                                    // placeholder=\"Enter here\"\r\n                                    options={staffOption}\r\n                                    value={item.emp_no}\r\n                                    name=\"emp_no\"\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                    className=\"customer-name p-0\"\r\n                                  />\r\n                                </div>\r\n                                <div className=\"col-1 p-0 d-flex justify-content-center\">\r\n                                  {item.requesttherapist ? (\r\n                                    <NormalCheckbox\r\n                                      onChange={e =>\r\n                                        this.handleCheckbox(e, index)\r\n                                      }\r\n                                      value={item.requesttherapist}\r\n                                      name=\"requesttherapist\"\r\n                                      checked={true}\r\n                                    />\r\n                                  ) : (\r\n                                    <NormalCheckbox\r\n                                      onChange={e =>\r\n                                        this.handleCheckbox(e, index)\r\n                                      }\r\n                                      value={item.requesttherapist}\r\n                                      name=\"requesttherapist\"\r\n                                      checked={false}\r\n                                    />\r\n                                  )}\r\n                                </div>\r\n                                <div className=\"col-1 p-0 d-flex justify-content-start\">\r\n                                  <NormalInput\r\n                                    type=\"number\"\r\n                                    name=\"recur_days\"\r\n                                    value={\r\n                                      item.recur_days ? item.recur_days : \"\"\r\n                                    }\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                  />\r\n                                </div>\r\n                                <div className=\"col-1 p-0 d-flex justify-content-start\">\r\n                                  <NormalInput\r\n                                    type=\"number\"\r\n                                    name=\"recur_qty\"\r\n                                    value={item.recur_qty ? item.recur_qty : \"\"}\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                  />\r\n                                </div>\r\n                                {appointmentId ? (\r\n                                  <></>\r\n                                ) : (\r\n                                  <>\r\n                                    {selectedList.length === index + 1 ? (\r\n                                      <div\r\n                                        className=\"ml-3\"\r\n                                        onClick={() =>\r\n                                          this.handleAddtreatment(index)\r\n                                        }\r\n                                      >\r\n                                        <svg\r\n                                          width=\"31\"\r\n                                          height=\"30\"\r\n                                          viewBox=\"0 0 31 30\"\r\n                                          fill=\"none\"\r\n                                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        >\r\n                                          <rect\r\n                                            width=\"31\"\r\n                                            height=\"30\"\r\n                                            fill=\"#F9F9F9\"\r\n                                          />\r\n                                          <path\r\n                                            d=\"M15 8V22\"\r\n                                            stroke=\"#848484\"\r\n                                            strokeLinecap=\"round\"\r\n                                            strokeLinejoin=\"round\"\r\n                                          />\r\n                                          <path\r\n                                            d=\"M8 15H22\"\r\n                                            stroke=\"#848484\"\r\n                                            strokeLinecap=\"round\"\r\n                                            strokeLinejoin=\"round\"\r\n                                          />\r\n                                        </svg>\r\n                                      </div>\r\n                                    ) : (\r\n                                      <img\r\n                                        width=\"25\"\r\n                                        height=\"25\"\r\n                                        onClick={() =>\r\n                                          this.deleteTreatment(index)\r\n                                        }\r\n                                        className=\"ml-3\"\r\n                                        src={closeIcon}\r\n                                        alt=\"\"\r\n                                      />\r\n                                    )}\r\n                                  </>\r\n                                )}\r\n                              </div>\r\n                            );\r\n                          })\r\n                        : \"\"}\r\n                      <div className=\"mt-5\">\r\n                        <div className=\"row\">\r\n                          <div className=\"col-md-3 col-12\">\r\n                            <div className=\"d-flex justify-content-start\">\r\n                              <NormalButton\r\n                                buttonClass={\"treatment\"}\r\n                                mainbg={true}\r\n                                className=\"col-12 fs-15 \"\r\n                                label=\"Treatment Package\"\r\n                                onClick={this.handleTreatementmodal}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"col-md-6 col-12\">\r\n                            <div className=\"d-flex justify-content-around\">\r\n                              {appointmentId ? (\r\n                                <NormalButton\r\n                                  buttonClass={\"treatment\"}\r\n                                  mainbg={true}\r\n                                  className=\"col-12\"\r\n                                  label=\"Customer Profile\"\r\n                                  onClick={() =>\r\n                                    history.push(\r\n                                      `/admin/customer/${customerId}/account`\r\n                                    )\r\n                                  }\r\n                                />\r\n                              ) : null}\r\n                              {/* {appointmentId ? (\r\n                                <NormalButton\r\n                                  buttonClass={\"treatment\"}\r\n                                  mainbg={true}\r\n                                  className=\"col-12\"\r\n                                  label=\"Go to Cart\"\r\n                                  onClick={() => history.push(`/admin/cart`)}\r\n                                />\r\n                              ) : null} */}\r\n\r\n                              {!appointmentId &&\r\n                              this.props.AppointmentCopy &&\r\n                              this.props.AppointmentCopy.appointmentId > 0 ? (\r\n                                <NormalButton\r\n                                  buttonClass={\"treatment ml-2\"}\r\n                                  mainbg={true}\r\n                                  className=\"col-12 fs-15 \"\r\n                                  label=\"Paste Appointment\"\r\n                                  onClick={this.handlePasteAppointment}\r\n                                />\r\n                              ) : null}\r\n                              {appointmentId ? (\r\n                                <NormalButton\r\n                                  buttonClass={\"treatment\"}\r\n                                  mainbg={true}\r\n                                  className=\"col-12\"\r\n                                  label=\"Copy Appointment\"\r\n                                  onClick={this.handleCopyAppointment}\r\n                                />\r\n                              ) : null}\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"col-md-3 col-12\">\r\n                            <div className=\"d-flex justify-content-end\">\r\n                              <NormalButton\r\n                                buttonClass={\"treatment mr-2\"}\r\n                                mainbg={true}\r\n                                className=\"col-12\"\r\n                                label=\"Cancel\"\r\n                                onClick={this.handleCloseDialog}\r\n                              />\r\n\r\n                              {appointmentId ? (\r\n                                <NormalButton\r\n                                  buttonClass={\"submit-btn\"}\r\n                                  mainbg={false}\r\n                                  className=\"col-12 submit-btn\"\r\n                                  label=\"Update Booking\"\r\n                                  onClick={this.handleUpdate}\r\n                                />\r\n                              ) : (\r\n                                <NormalButton\r\n                                  buttonClass={\"submit-btn\"}\r\n                                  mainbg={false}\r\n                                  className=\"col-12 submit-btn \"\r\n                                  label=\"Confirm Booking\"\r\n                                  onClick={this.handleSubmit}\r\n                                />\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      {recurringList && recurringList.length > 0 ? (\r\n                        <div className=\"mt-5 mb-3\">\r\n                          <div>\r\n                            <p>Recurring Related Appointments</p>\r\n                          </div>\r\n\r\n                          <div className=\"row selected selected-header mb-2\">\r\n                            <div className=\"col-1\">\r\n                              <NormalCheckbox\r\n                                label={`All`}\r\n                                onChange={e =>\r\n                                  this.handleRecurringSelectAllCheckbox(e)\r\n                                }\r\n                                value={recurringSelectAll}\r\n                                name=\"recurringSelectAll\"\r\n                                checked={recurringSelectAll}\r\n                              />\r\n                            </div>\r\n                            <div className=\"col-2 p-0\">Date</div>\r\n                            <div className=\"col-1 p-0\">Start</div>\r\n                            <div className=\"col-1 p-0\">End</div>\r\n                            <div className=\"col-3 p-0 header-detail\">\r\n                              Services\r\n                            </div>\r\n\r\n                            <div className=\"col-1 p-0 header-detail\">\r\n                              Duration\r\n                            </div>\r\n                            <div className=\"col-2 p-0\">Treatment staff</div>\r\n                            <div className=\"col-1 p-0 d-flex justify-content-center\">\r\n                              <img\r\n                                src={req_therapist}\r\n                                alt=\"\"\r\n                                height=\"25\"\r\n                                width=\"25\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          {recurringList && recurringList.length > 0 ? (\r\n                            recurringList.map((item, index) => {\r\n                              return (\r\n                                <div className=\"row selected  mb-4\" key={index}>\r\n                                  <div className=\"col-1 text-center\">\r\n                                    <NormalCheckbox\r\n                                      onChange={e =>\r\n                                        this.handleRecurringlistCheckbox(\r\n                                          e,\r\n                                          item\r\n                                        )\r\n                                      }\r\n                                      value={item.selected}\r\n                                      name=\"recurringItem\"\r\n                                      checked={item.selected}\r\n                                    />\r\n                                  </div>\r\n                                  <div className=\"col-2 p-0\">{item.date}</div>\r\n                                  <div className=\"col-1 p-0\">\r\n                                    {item.start_time}\r\n                                  </div>\r\n                                  <div className=\"col-1 p-0\">\r\n                                    {item.end_time}\r\n                                  </div>\r\n                                  <div className=\"col-3 p-0 header-detail\">\r\n                                    {item.item_name}\r\n                                  </div>\r\n\r\n                                  <div className=\"col-1 p-0 header-detail\">\r\n                                    {item.add_duration}\r\n                                  </div>\r\n                                  <div className=\"col-2 p-0\">\r\n                                    {item.emp_name}\r\n                                  </div>\r\n                                  <div className=\"col-1 p-0 d-flex justify-content-center\">\r\n                                    <NormalCheckbox\r\n                                      onChange={e =>\r\n                                        this.handleRecurringlistCheckbox(\r\n                                          e,\r\n                                          item\r\n                                        )\r\n                                      }\r\n                                      value={item.requesttherapist}\r\n                                      name=\"requesttherapist\"\r\n                                      checked={item.requesttherapist}\r\n                                      disabled\r\n                                    />\r\n                                  </div>\r\n                                </div>\r\n                              );\r\n                            })\r\n                          ) : (\r\n                            <div className=\"text-center w-100\">No data</div>\r\n                          )}\r\n                          <div className=\"d-flex justify-content-end\">\r\n                            <div className=\"mt-5\">\r\n                              <div className=\"d-flex justify-content-between\">\r\n                                <div>\r\n                                  <NormalButton\r\n                                    buttonClass={\"treatment\"}\r\n                                    mainbg={true}\r\n                                    className=\"col-12\"\r\n                                    label=\"Cancel\"\r\n                                    onClick={this.handleCloseDialog}\r\n                                  />\r\n                                </div>\r\n                                <div>\r\n                                  {appointmentId ? (\r\n                                    <NormalButton\r\n                                      buttonClass={\"submit-btn\"}\r\n                                      mainbg={false}\r\n                                      className=\"col-12 submit-btn ml-4\"\r\n                                      label=\"Update Recurring\"\r\n                                      onClick={this.handleRecurringUpdate}\r\n                                    />\r\n                                  ) : null}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ) : null}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <NormalModal\r\n            className={\"multiple-appointment select-category\"}\r\n            style={{ minWidth: \"60%\" }}\r\n            modal={isOpenModal}\r\n            handleModal={this.handleDialog}\r\n          >\r\n            <img\r\n              onClick={this.handleDialog}\r\n              className=\"close\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <div className=\"customer-list container\">\r\n              <div className=\"col-12 pl-0 mb-3 fw-500 py-2\">\r\n                <h5>Select Treatment</h5>\r\n              </div>\r\n              <div className=\"col-12\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-6\">\r\n                    Category\r\n                    <NormalSelect\r\n                      // placeholder=\"Enter here\"\r\n                      options={categoryList}\r\n                      value={treatmentField.category}\r\n                      name=\"category\"\r\n                      onChange={this.handleChangeTreatment}\r\n                      className=\"customer-name p-0\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-6\">\r\n                    Service\r\n                    <input\r\n                      // placeholder=\"Enter here\"\r\n                      // options={siteList}\r\n                      value={treatmentField.treatment}\r\n                      name=\"treatment\"\r\n                      onChange={this.handleSearch}\r\n                      className=\"search px-3 p-0\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"table-container table-responsive mt-3\">\r\n                <TableWrapper\r\n                  headerDetails={treatmentListHeader}\r\n                  queryHandler={this.handlePagination}\r\n                  pageMeta={meta}\r\n                >\r\n                  {treatmentList.length > 0 ? (\r\n                    treatmentList.map((item, index) => {\r\n                      return (\r\n                        <tr\r\n                          className=\"w-100\"\r\n                          onClick={() => this.handleSelectTreatment(item)}\r\n                          key={index}\r\n                        >\r\n                          <td>\r\n                            {\" \"}\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.Item_Class}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            {\" \"}\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.item_desc}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            {\" \"}\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.add_duration}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            {\" \"}\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.item_price}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <td>\r\n                      <div className=\"d-flex align-items-center justify-content-center\">\r\n                        No data available\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                </TableWrapper>\r\n              </div>\r\n\r\n              <div className=\"row text-center justify-center w-100\">\r\n                <NormalButton\r\n                  buttonClass={\"col-3\"}\r\n                  mainbg={true}\r\n                  className=\"col-12 ml-4\"\r\n                  label=\"Cancel\"\r\n                  onClick={this.handleDialog}\r\n                />\r\n              </div>\r\n            </div>\r\n          </NormalModal>\r\n\r\n          <div className=\"col-12\">\r\n            {isTreatementModal ? (\r\n              <TreatmentPackage\r\n                isTreatementModal={isTreatementModal}\r\n                handleTreatementmodal={this.handleTreatementmodal}\r\n                handleSelectPackage={this.handleSelectPackage}\r\n                customerId={customerId}\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  customerDetail: state.appointment.customerDetail,\r\n  appointmentDetail: state.appointment.appointmentDetail,\r\n  selectedTreatmentList: state.appointment.selectedTreatmentList,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n  appointmentCustomerDetail: state.appointment.appointmentCustomerDetail,\r\n  appointmentTreatmentList: state.appointment.appointmentTreatmentList,\r\n  AppointmentCopy: state.appointment.AppointmentCopy,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      updateForm,\r\n      getSelectedTreatmentList,\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const NewSelectTreatment = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(NewSelectTreatmentClass);\r\n"]},"metadata":{},"sourceType":"module"}