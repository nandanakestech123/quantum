{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/plaque.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.Plaque = void 0;\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _type = require(\"../../core/utils/type\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else {\n      if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (null == source) {\n    return {};\n  }\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n\n      if (excluded.indexOf(key) >= 0) {\n        continue;\n      }\n\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) {\n        continue;\n      }\n\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (null == source) {\n    return {};\n  }\n\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n\n    if (excluded.indexOf(key) >= 0) {\n      continue;\n    }\n\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar math = Math;\nvar round = math.round;\nvar max = math.max;\nvar min = math.min;\nvar sin = math.sin;\nvar cos = math.cos;\nvar asin = math.asin;\nvar PI = math.PI;\n\nvar buildPath = function () {\n  for (var _len = arguments.length, points = new Array(_len), _key = 0; _key < _len; _key++) {\n    points[_key] = arguments[_key];\n  }\n\n  return points.join(\"\");\n};\n\nfunction getArc(cornerRadius, xDirection, yDirection) {\n  return \"a \".concat(cornerRadius, \" \").concat(cornerRadius, \" 0 0 1 \").concat(xDirection * cornerRadius, \" \").concat(yDirection * cornerRadius);\n}\n\nfunction getAbsoluteArc(cornerRadius, x, y) {\n  return \"A \".concat(cornerRadius, \" \").concat(cornerRadius, \" 0 0 1 \").concat(x, \" \").concat(y);\n}\n\nfunction rotateX(x, y, angle, x0, y0) {\n  return (x - x0) * round(cos(angle)) + (y - y0) * round(sin(angle)) + x0;\n}\n\nfunction rotateY(x, y, angle, x0, y0) {\n  return -(x - x0) * round(sin(angle)) + (y - y0) * round(cos(angle)) + y0;\n}\n\nfunction rotateSize(options, angle) {\n  if (angle % 90 === 0 && angle % 180 !== 0) {\n    return {\n      width: options.height,\n      height: options.width\n    };\n  }\n\n  return options;\n}\n\nfunction getCloudAngle(_ref, x, y, anchorX, anchorY) {\n  var width = _ref.width,\n      height = _ref.height;\n  var halfWidth = width / 2;\n  var halfHeight = height / 2;\n  var xr = Math.ceil(x + halfWidth);\n  var xl = Math.floor(x - halfWidth);\n  var yt = Math.floor(y - halfHeight);\n  var yb = Math.ceil(y + halfHeight);\n\n  if (anchorX < xl && anchorY < yt || anchorX >= xl && anchorX <= xr && anchorY < yt) {\n    return 270;\n  }\n\n  if (anchorX > xr && anchorY > yb || anchorX >= xl && anchorX <= xr && anchorY > yb) {\n    return 90;\n  } else {\n    if (anchorX < xl && anchorY > yb || anchorX < xl && anchorY >= yt && anchorY <= yb) {\n      return 180;\n    }\n  }\n\n  return 0;\n}\n\nfunction getCloudPoints(_ref2, x, y, anchorX, anchorY, _ref3, bounded) {\n  var width = _ref2.width,\n      height = _ref2.height;\n  var arrowWidth = _ref3.arrowWidth,\n      _ref3$cornerRadius = _ref3.cornerRadius,\n      cornerRadius = void 0 === _ref3$cornerRadius ? 0 : _ref3$cornerRadius;\n  var halfArrowWidth = arrowWidth / 2;\n  var halfWidth = width / 2;\n  var halfHeight = height / 2;\n  var xr = Math.ceil(x + halfWidth);\n  var xl = Math.floor(x - halfWidth);\n  var yt = Math.floor(y - halfHeight);\n  var yb = Math.ceil(y + halfHeight);\n  var leftTopCorner = [xl, yt];\n  var rightTopCorner = [xr, yt];\n  var rightBottomCorner = [xr, yb];\n  var leftBottomCorner = [xl, yb];\n  var arrowX = anchorX <= xl ? xl : xr <= anchorX ? xr : anchorX;\n  var arrowY = anchorY <= yt ? yt : yb <= anchorY ? yb : anchorY;\n  var arrowBaseBottom = min(arrowY + halfArrowWidth, yb);\n  var arrowBaseTop = max(arrowY - halfArrowWidth, yt);\n  var arrowBaseLeft = max(arrowX - halfArrowWidth, xl);\n  cornerRadius = Math.min(width / 2, height / 2, cornerRadius);\n  var points;\n  leftTopCorner[1] += cornerRadius;\n  rightTopCorner[0] -= cornerRadius;\n  rightBottomCorner[1] -= cornerRadius;\n  leftBottomCorner[0] += cornerRadius;\n\n  if (!bounded || xl <= anchorX && anchorX <= xr && yt <= anchorY && anchorY <= yb) {\n    points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), \"L\", rightTopCorner, getArc(cornerRadius, 1, 1), \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1), \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1));\n  } else {\n    if (anchorX > xr && anchorY < yt) {\n      var arrowAngle = arrowWidth / cornerRadius || 0;\n      var angle = PI / 4 + arrowAngle / 2;\n      var endAngle = PI / 4 - arrowAngle / 2;\n      var arrowEndPointX = rightTopCorner[0] + cos(endAngle) * cornerRadius;\n      var arrowEndPointY = rightTopCorner[1] + (1 - sin(endAngle)) * cornerRadius;\n      var arrowArc = buildPath(\"L\", rightTopCorner, getArc(cornerRadius, cos(angle), 1 - sin(angle)), \"L\", [anchorX, anchorY, arrowEndPointX, arrowEndPointY], getAbsoluteArc(cornerRadius, rightTopCorner[0] + cornerRadius, rightTopCorner[1] + cornerRadius));\n\n      if (Math.abs(angle) > PI / 2) {\n        arrowArc = buildPath(\"L\", [arrowBaseLeft, yt, anchorX, anchorY, xr, arrowBaseBottom]);\n      }\n\n      points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), arrowArc, \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1), \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1));\n    } else {\n      if (anchorX > xr && anchorY >= yt && anchorY <= yb) {\n        var _arrowArc;\n\n        if (arrowBaseTop >= rightTopCorner[1] + cornerRadius && arrowBaseBottom <= rightBottomCorner[1]) {\n          _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", [xr, arrowBaseTop, anchorX, anchorY, xr, arrowBaseBottom], \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1));\n        } else {\n          if (arrowBaseTop < rightTopCorner[1] + cornerRadius && arrowBaseBottom >= rightTopCorner[1] + cornerRadius && arrowBaseBottom <= rightBottomCorner[1]) {\n            var arrowWidthRest = rightTopCorner[1] + cornerRadius - arrowBaseTop;\n\n            var _angle = arrowWidthRest / cornerRadius;\n\n            var arrowBaseTopX = rightTopCorner[0] + cos(_angle) * cornerRadius;\n            var arrowBaseTopY = rightTopCorner[1] + (1 - sin(_angle)) * cornerRadius;\n            _arrowArc = buildPath(getArc(cornerRadius, cos(_angle), 1 - sin(_angle)), \"L\", [arrowBaseTopX, arrowBaseTopY, anchorX, anchorY, xr, arrowBaseBottom], \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1));\n          } else {\n            if (arrowBaseTop < rightTopCorner[1] + cornerRadius && arrowBaseBottom < rightTopCorner[1] + cornerRadius) {\n              var _arrowWidthRest = rightTopCorner[1] + cornerRadius - arrowBaseTop;\n\n              var _arrowAngle = _arrowWidthRest / cornerRadius;\n\n              var _angle2 = _arrowAngle;\n\n              var _arrowBaseTopX = rightTopCorner[0] + cos(_angle2) * cornerRadius;\n\n              var _arrowBaseTopY = rightTopCorner[1] + (1 - sin(_angle2)) * cornerRadius;\n\n              var bottomAngle = Math.sin((rightTopCorner[1] + cornerRadius - arrowBaseBottom) / cornerRadius);\n              var arrowBaseBottomX = rightTopCorner[0] + cornerRadius * cos(bottomAngle);\n              var arrowBaseBottomY = rightTopCorner[1] + cornerRadius * (1 - sin(bottomAngle));\n              _arrowArc = buildPath(getArc(cornerRadius, cos(_angle2), 1 - sin(_angle2)), \"L\", [_arrowBaseTopX, _arrowBaseTopY, anchorX, anchorY, arrowBaseBottomX, arrowBaseBottomY], getAbsoluteArc(cornerRadius, rightTopCorner[0] + cornerRadius, rightTopCorner[1] + cornerRadius), \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1));\n            } else {\n              if (arrowBaseTop <= rightTopCorner[1] + cornerRadius && arrowBaseBottom >= rightBottomCorner[1]) {\n                var topAngle = asin((rightTopCorner[1] + cornerRadius - arrowBaseTop) / cornerRadius);\n\n                var _arrowBaseTopX2 = rightTopCorner[0] + cornerRadius * cos(topAngle);\n\n                var _arrowBaseTopY2 = rightTopCorner[1] + cornerRadius * (1 - sin(topAngle));\n\n                var _bottomAngle = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\n\n                var _arrowBaseBottomX = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle) - 1);\n\n                var _arrowBaseBottomY = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle);\n\n                _arrowArc = buildPath(getArc(cornerRadius, cos(topAngle), 1 - sin(topAngle)), \"L\", [_arrowBaseTopX2, _arrowBaseTopY2, anchorX, anchorY, _arrowBaseBottomX, _arrowBaseBottomY], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius));\n              } else {\n                if (arrowBaseTop > rightTopCorner[1] + cornerRadius && arrowBaseTop <= rightBottomCorner[1] && arrowBaseBottom > rightBottomCorner[1]) {\n                  var _bottomAngle2 = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\n\n                  var _arrowBaseBottomX2 = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle2) - 1);\n\n                  var _arrowBaseBottomY2 = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle2);\n\n                  _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", [xr, arrowBaseTop, anchorX, anchorY, _arrowBaseBottomX2, _arrowBaseBottomY2], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius));\n                } else {\n                  if (arrowBaseTop > rightTopCorner[1] + cornerRadius && arrowBaseBottom > rightBottomCorner[1]) {\n                    var _bottomAngle3 = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\n\n                    var _arrowBaseBottomX3 = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle3) - 1);\n\n                    var _arrowBaseBottomY3 = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle3);\n\n                    var _topAngle = asin((arrowBaseTop - rightBottomCorner[1]) / cornerRadius);\n\n                    var _arrowBaseTopX3 = rightBottomCorner[0] + cornerRadius * (cos(_topAngle) - 1);\n\n                    var _arrowBaseTopY3 = rightBottomCorner[1] + cornerRadius * sin(_topAngle);\n\n                    _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", rightBottomCorner, getArc(cornerRadius, cos(_topAngle) - 1, sin(_topAngle)), \"L\", [_arrowBaseTopX3, _arrowBaseTopY3, anchorX, anchorY, _arrowBaseBottomX3, _arrowBaseBottomY3], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius));\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), \"L\", rightTopCorner, _arrowArc, \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1));\n      }\n    }\n  }\n\n  return buildPath(\"M\", points, \"Z\");\n}\n\nvar Plaque = function () {\n  function Plaque(options, widget, root, contentTemplate) {\n    var bounded = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : true;\n    var measureContent = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : function (_, g) {\n      return g.getBBox();\n    };\n    var moveContentGroup = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : function (_, g, x, y) {\n      return g.move(x, y);\n    };\n\n    _classCallCheck(this, Plaque);\n\n    this.widget = widget;\n    this.options = options;\n    this.root = root;\n    this.contentTemplate = contentTemplate;\n    this.bonded = bounded;\n    this.measureContent = measureContent;\n    this.moveContentGroup = moveContentGroup;\n  }\n\n  _createClass(Plaque, [{\n    key: \"draw\",\n    value: function (_ref4) {\n      var _this = this;\n\n      var anchorX = _ref4.x,\n          anchorY = _ref4.y,\n          _ref4$canvas = _ref4.canvas,\n          canvas = void 0 === _ref4$canvas ? {} : _ref4$canvas,\n          offsetX = _ref4.offsetX,\n          offsetY = _ref4.offsetY,\n          _ref4$offset = _ref4.offset,\n          offset = void 0 === _ref4$offset ? 0 : _ref4$offset,\n          restProps = _objectWithoutProperties(_ref4, [\"x\", \"y\", \"canvas\", \"offsetX\", \"offsetY\", \"offset\"]);\n\n      var options = this.options;\n      var x = options.x,\n          y = options.y;\n      var bounds = {\n        xl: canvas.left,\n        xr: canvas.width - canvas.right,\n        width: canvas.width - canvas.right - canvas.left,\n        yt: canvas.top,\n        yb: canvas.height - canvas.bottom,\n        height: canvas.height - canvas.bottom - canvas.top\n      };\n\n      if (!((0, _type.isDefined)(anchorX) && (0, _type.isDefined)(anchorY)) && !((0, _type.isDefined)(x) && (0, _type.isDefined)(y))) {\n        return false;\n      }\n\n      if ((0, _type.isDefined)(anchorX) && (anchorX < bounds.xl || bounds.xr < anchorX || anchorY < bounds.yt || bounds.yb < anchorY)) {\n        return false;\n      }\n\n      if (!this._root) {\n        this._draw();\n      }\n\n      var shadowSettings = (0, _extend.extend)({\n        x: \"-50%\",\n        y: \"-50%\",\n        width: \"200%\",\n        height: \"200%\"\n      }, options.shadow);\n      var contentWidth = options.width > 0 ? options.width : null;\n      var contentHeight = options.height > 0 ? options.height : null;\n\n      var onRender = function () {\n        var _this$_root;\n\n        var bBox = _this._contentBBox = _this.measureContent(_this.widget, _this._contentGroup);\n\n        var size = _this._size = {\n          width: max(contentWidth, bBox.width) + 2 * options.paddingLeftRight,\n          height: max(contentHeight, bBox.height) + 2 * options.paddingTopBottom,\n          offset: offset\n        };\n        var xOff = shadowSettings.offsetX;\n        var yOff = shadowSettings.offsetY;\n        var blur = 2 * shadowSettings.blur + 1;\n        var lm = max(blur - xOff, 0);\n        var rm = max(blur + xOff, 0);\n        var tm = max(blur - yOff, 0);\n        var bm = max(blur + yOff, 0);\n        _this.margins = {\n          lm: lm,\n          rm: rm,\n          tm: tm,\n          bm: bm\n        };\n\n        if (!(0, _type.isDefined)(x)) {\n          if ((0, _type.isDefined)(offsetX)) {\n            x = anchorX + offsetX;\n          } else {\n            if (bounds.width < size.width) {\n              x = round(bounds.xl + bounds.width / 2);\n            } else {\n              x = min(max(anchorX, Math.ceil(bounds.xl + size.width / 2 + lm)), Math.floor(bounds.xr - size.width / 2 - rm));\n            }\n          }\n        } else {\n          x += offsetX || 0;\n\n          if (!(0, _type.isDefined)(anchorX)) {\n            anchorX = x;\n          }\n        }\n\n        if (!(0, _type.isDefined)(y)) {\n          if ((0, _type.isDefined)(offsetY)) {\n            y = anchorY + offsetY;\n          } else {\n            var y_top = anchorY - options.arrowLength - size.height / 2 - offset;\n            var y_bottom = anchorY + options.arrowLength + size.height / 2 + offset;\n\n            if (bounds.height < size.height + options.arrowLength) {\n              y = round(bounds.yt + size.height / 2);\n            } else {\n              if (y_top - size.height / 2 - tm < bounds.yt) {\n                if (y_bottom + size.height / 2 + bm < bounds.yb) {\n                  y = y_bottom;\n                  anchorY += offset;\n                } else {\n                  y = round(bounds.yt + size.height / 2);\n                }\n              } else {\n                y = y_top;\n                anchorY -= offset;\n              }\n            }\n          }\n        } else {\n          y += offsetY || 0;\n\n          if (!(0, _type.isDefined)(anchorY)) {\n            anchorY = y + size.height / 2;\n          }\n        }\n\n        _this.anchorX = anchorX;\n        _this.anchorY = anchorY;\n\n        _this.move(x, y);\n\n        null === (_this$_root = _this._root) || void 0 === _this$_root ? void 0 : _this$_root.append(_this.root);\n      };\n\n      if (this.contentTemplate.render) {\n        this.contentTemplate.render({\n          model: options,\n          container: this._contentGroup.element,\n          onRendered: onRender\n        });\n      } else {\n        return this.contentTemplate(_objectSpread({\n          group: this._contentGroup,\n          onRender: onRender\n        }, restProps));\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_draw\",\n    value: function () {\n      var renderer = this.widget._renderer;\n      var options = this.options;\n      var shadowSettings = (0, _extend.extend)({\n        x: \"-50%\",\n        y: \"-50%\",\n        width: \"200%\",\n        height: \"200%\"\n      }, options.shadow);\n      var shadow = this._shadow = renderer.shadowFilter().attr(shadowSettings);\n      var cloudSettings = {\n        opacity: options.opacity,\n        \"stroke-width\": 0,\n        fill: options.color\n      };\n      var borderOptions = options.border || {};\n\n      if (borderOptions.visible) {\n        (0, _extend.extend)(cloudSettings, {\n          \"stroke-width\": borderOptions.width,\n          stroke: borderOptions.color,\n          \"stroke-opacity\": borderOptions.opacity,\n          dashStyle: borderOptions.dashStyle\n        });\n      }\n\n      var group = this._root = renderer.g().append(this.root);\n\n      if (options.type) {\n        group.attr({\n          \"class\": \"dxc-\".concat(options.type, \"-annotation\")\n        });\n      }\n\n      var cloudGroup = renderer.g().attr({\n        filter: shadow.id\n      }).append(group);\n      this._cloud = renderer.path([], \"area\").attr(cloudSettings).sharp().append(cloudGroup);\n      this._contentGroup = renderer.g().append(group);\n    }\n  }, {\n    key: \"getBBox\",\n    value: function () {\n      var size = this._size || {};\n      var margins = this.margins || {};\n      var rotationAngle = getCloudAngle(size, this.x, this.y, this.anchorX, this.anchorY);\n      return {\n        x: Math.floor(this.x - size.width / 2 - margins.lm),\n        y: Math.floor(this.y - size.height / 2 - margins.tm - (270 === rotationAngle ? this.options.arrowLength : 0)),\n        width: size.width + margins.lm + margins.rm,\n        height: size.height + margins.tm + margins.bm + (90 === rotationAngle || 270 === rotationAngle ? this.options.arrowLength : 0)\n      };\n    }\n  }, {\n    key: \"clear\",\n    value: function () {\n      if (this._root) {\n        this._root.remove();\n\n        this._shadow.remove();\n\n        this._root = null;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"customizeCloud\",\n    value: function (attr) {\n      if (this._cloud) {\n        this._cloud.attr(attr);\n      }\n    }\n  }, {\n    key: \"moveRoot\",\n    value: function (x, y) {\n      if (this._root) {\n        this._root.move(x, y);\n      }\n    }\n  }, {\n    key: \"move\",\n    value: function (x, y) {\n      x = round(x);\n      y = round(y);\n      this.x = x;\n      this.y = y;\n      var rotationAngle = getCloudAngle(this._size, x, y, this.anchorX, this.anchorY);\n      var radRotationAngle = rotationAngle * PI / 180;\n\n      this._cloud.attr({\n        d: getCloudPoints(rotateSize(this._size, rotationAngle), x, y, rotateX(this.anchorX, this.anchorY, radRotationAngle, x, y), rotateY(this.anchorX, this.anchorY, radRotationAngle, x, y), this.options, this.bonded)\n      }).rotate(rotationAngle, x, y);\n\n      this.moveContentGroup(this.widget, this._contentGroup, x - this._contentBBox.x - this._contentBBox.width / 2, y - this._contentBBox.y - this._contentBBox.height / 2);\n    }\n  }, {\n    key: \"hitTest\",\n    value: function (x, y) {\n      var _ref5 = this._size || {},\n          width = _ref5.width,\n          height = _ref5.height;\n\n      return Math.abs(x - this.x) <= width / 2 && Math.abs(y - this.y) <= height / 2;\n    }\n  }]);\n\n  return Plaque;\n}();\n\nexports.Plaque = Plaque;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/core/plaque.js"],"names":["exports","Plaque","_extend","require","_type","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","math","Math","round","max","min","sin","cos","asin","PI","buildPath","_len","points","Array","_key","join","getArc","cornerRadius","xDirection","yDirection","concat","getAbsoluteArc","x","y","rotateX","angle","x0","y0","rotateY","rotateSize","options","width","height","getCloudAngle","_ref","anchorX","anchorY","halfWidth","halfHeight","xr","ceil","xl","floor","yt","yb","getCloudPoints","_ref2","_ref3","bounded","arrowWidth","_ref3$cornerRadius","halfArrowWidth","leftTopCorner","rightTopCorner","rightBottomCorner","leftBottomCorner","arrowX","arrowY","arrowBaseBottom","arrowBaseTop","arrowBaseLeft","arrowAngle","endAngle","arrowEndPointX","arrowEndPointY","arrowArc","abs","_arrowArc","arrowWidthRest","_angle","arrowBaseTopX","arrowBaseTopY","_arrowWidthRest","_arrowAngle","_angle2","_arrowBaseTopX","_arrowBaseTopY","bottomAngle","arrowBaseBottomX","arrowBaseBottomY","topAngle","_arrowBaseTopX2","_arrowBaseTopY2","_bottomAngle","_arrowBaseBottomX","_arrowBaseBottomY","_bottomAngle2","_arrowBaseBottomX2","_arrowBaseBottomY2","_bottomAngle3","_arrowBaseBottomX3","_arrowBaseBottomY3","_topAngle","_arrowBaseTopX3","_arrowBaseTopY3","widget","root","contentTemplate","measureContent","_","g","getBBox","moveContentGroup","move","bonded","_ref4","_this","_ref4$canvas","canvas","offsetX","offsetY","_ref4$offset","offset","restProps","bounds","left","right","top","bottom","isDefined","_root","_draw","shadowSettings","extend","shadow","contentWidth","contentHeight","onRender","_this$_root","bBox","_contentBBox","_contentGroup","size","_size","paddingLeftRight","paddingTopBottom","xOff","yOff","blur","lm","rm","tm","bm","margins","y_top","arrowLength","y_bottom","append","render","model","container","element","onRendered","group","renderer","_renderer","_shadow","shadowFilter","attr","cloudSettings","opacity","fill","color","borderOptions","border","visible","stroke","dashStyle","type","cloudGroup","id","_cloud","path","sharp","rotationAngle","remove","radRotationAngle","d","rotate","_ref5"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/core/plaque.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.Plaque = void 0;\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _type = require(\"../../core/utils/type\");\r\n\r\nfunction ownKeys(object, enumerableOnly) {\r\n    var keys = Object.keys(object);\r\n    if (Object.getOwnPropertySymbols) {\r\n        var symbols = Object.getOwnPropertySymbols(object);\r\n        if (enumerableOnly) {\r\n            symbols = symbols.filter(function(sym) {\r\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable\r\n            })\r\n        }\r\n        keys.push.apply(keys, symbols)\r\n    }\r\n    return keys\r\n}\r\n\r\nfunction _objectSpread(target) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n        var source = null != arguments[i] ? arguments[i] : {};\r\n        if (i % 2) {\r\n            ownKeys(Object(source), true).forEach(function(key) {\r\n                _defineProperty(target, key, source[key])\r\n            })\r\n        } else {\r\n            if (Object.getOwnPropertyDescriptors) {\r\n                Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\r\n            } else {\r\n                ownKeys(Object(source)).forEach(function(key) {\r\n                    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\r\n                })\r\n            }\r\n        }\r\n    }\r\n    return target\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\n\r\nfunction _objectWithoutProperties(source, excluded) {\r\n    if (null == source) {\r\n        return {}\r\n    }\r\n    var target = _objectWithoutPropertiesLoose(source, excluded);\r\n    var key, i;\r\n    if (Object.getOwnPropertySymbols) {\r\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\r\n        for (i = 0; i < sourceSymbolKeys.length; i++) {\r\n            key = sourceSymbolKeys[i];\r\n            if (excluded.indexOf(key) >= 0) {\r\n                continue\r\n            }\r\n            if (!Object.prototype.propertyIsEnumerable.call(source, key)) {\r\n                continue\r\n            }\r\n            target[key] = source[key]\r\n        }\r\n    }\r\n    return target\r\n}\r\n\r\nfunction _objectWithoutPropertiesLoose(source, excluded) {\r\n    if (null == source) {\r\n        return {}\r\n    }\r\n    var target = {};\r\n    var sourceKeys = Object.keys(source);\r\n    var key, i;\r\n    for (i = 0; i < sourceKeys.length; i++) {\r\n        key = sourceKeys[i];\r\n        if (excluded.indexOf(key) >= 0) {\r\n            continue\r\n        }\r\n        target[key] = source[key]\r\n    }\r\n    return target\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar math = Math;\r\nvar round = math.round;\r\nvar max = math.max;\r\nvar min = math.min;\r\nvar sin = math.sin;\r\nvar cos = math.cos;\r\nvar asin = math.asin;\r\nvar PI = math.PI;\r\nvar buildPath = function() {\r\n    for (var _len = arguments.length, points = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        points[_key] = arguments[_key]\r\n    }\r\n    return points.join(\"\")\r\n};\r\n\r\nfunction getArc(cornerRadius, xDirection, yDirection) {\r\n    return \"a \".concat(cornerRadius, \" \").concat(cornerRadius, \" 0 0 1 \").concat(xDirection * cornerRadius, \" \").concat(yDirection * cornerRadius)\r\n}\r\n\r\nfunction getAbsoluteArc(cornerRadius, x, y) {\r\n    return \"A \".concat(cornerRadius, \" \").concat(cornerRadius, \" 0 0 1 \").concat(x, \" \").concat(y)\r\n}\r\n\r\nfunction rotateX(x, y, angle, x0, y0) {\r\n    return (x - x0) * round(cos(angle)) + (y - y0) * round(sin(angle)) + x0\r\n}\r\n\r\nfunction rotateY(x, y, angle, x0, y0) {\r\n    return -(x - x0) * round(sin(angle)) + (y - y0) * round(cos(angle)) + y0\r\n}\r\n\r\nfunction rotateSize(options, angle) {\r\n    if (angle % 90 === 0 && angle % 180 !== 0) {\r\n        return {\r\n            width: options.height,\r\n            height: options.width\r\n        }\r\n    }\r\n    return options\r\n}\r\n\r\nfunction getCloudAngle(_ref, x, y, anchorX, anchorY) {\r\n    var width = _ref.width,\r\n        height = _ref.height;\r\n    var halfWidth = width / 2;\r\n    var halfHeight = height / 2;\r\n    var xr = Math.ceil(x + halfWidth);\r\n    var xl = Math.floor(x - halfWidth);\r\n    var yt = Math.floor(y - halfHeight);\r\n    var yb = Math.ceil(y + halfHeight);\r\n    if (anchorX < xl && anchorY < yt || anchorX >= xl && anchorX <= xr && anchorY < yt) {\r\n        return 270\r\n    }\r\n    if (anchorX > xr && anchorY > yb || anchorX >= xl && anchorX <= xr && anchorY > yb) {\r\n        return 90\r\n    } else {\r\n        if (anchorX < xl && anchorY > yb || anchorX < xl && anchorY >= yt && anchorY <= yb) {\r\n            return 180\r\n        }\r\n    }\r\n    return 0\r\n}\r\n\r\nfunction getCloudPoints(_ref2, x, y, anchorX, anchorY, _ref3, bounded) {\r\n    var width = _ref2.width,\r\n        height = _ref2.height;\r\n    var arrowWidth = _ref3.arrowWidth,\r\n        _ref3$cornerRadius = _ref3.cornerRadius,\r\n        cornerRadius = void 0 === _ref3$cornerRadius ? 0 : _ref3$cornerRadius;\r\n    var halfArrowWidth = arrowWidth / 2;\r\n    var halfWidth = width / 2;\r\n    var halfHeight = height / 2;\r\n    var xr = Math.ceil(x + halfWidth);\r\n    var xl = Math.floor(x - halfWidth);\r\n    var yt = Math.floor(y - halfHeight);\r\n    var yb = Math.ceil(y + halfHeight);\r\n    var leftTopCorner = [xl, yt];\r\n    var rightTopCorner = [xr, yt];\r\n    var rightBottomCorner = [xr, yb];\r\n    var leftBottomCorner = [xl, yb];\r\n    var arrowX = anchorX <= xl ? xl : xr <= anchorX ? xr : anchorX;\r\n    var arrowY = anchorY <= yt ? yt : yb <= anchorY ? yb : anchorY;\r\n    var arrowBaseBottom = min(arrowY + halfArrowWidth, yb);\r\n    var arrowBaseTop = max(arrowY - halfArrowWidth, yt);\r\n    var arrowBaseLeft = max(arrowX - halfArrowWidth, xl);\r\n    cornerRadius = Math.min(width / 2, height / 2, cornerRadius);\r\n    var points;\r\n    leftTopCorner[1] += cornerRadius;\r\n    rightTopCorner[0] -= cornerRadius;\r\n    rightBottomCorner[1] -= cornerRadius;\r\n    leftBottomCorner[0] += cornerRadius;\r\n    if (!bounded || xl <= anchorX && anchorX <= xr && yt <= anchorY && anchorY <= yb) {\r\n        points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), \"L\", rightTopCorner, getArc(cornerRadius, 1, 1), \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1), \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1))\r\n    } else {\r\n        if (anchorX > xr && anchorY < yt) {\r\n            var arrowAngle = arrowWidth / cornerRadius || 0;\r\n            var angle = PI / 4 + arrowAngle / 2;\r\n            var endAngle = PI / 4 - arrowAngle / 2;\r\n            var arrowEndPointX = rightTopCorner[0] + cos(endAngle) * cornerRadius;\r\n            var arrowEndPointY = rightTopCorner[1] + (1 - sin(endAngle)) * cornerRadius;\r\n            var arrowArc = buildPath(\"L\", rightTopCorner, getArc(cornerRadius, cos(angle), 1 - sin(angle)), \"L\", [anchorX, anchorY, arrowEndPointX, arrowEndPointY], getAbsoluteArc(cornerRadius, rightTopCorner[0] + cornerRadius, rightTopCorner[1] + cornerRadius));\r\n            if (Math.abs(angle) > PI / 2) {\r\n                arrowArc = buildPath(\"L\", [arrowBaseLeft, yt, anchorX, anchorY, xr, arrowBaseBottom])\r\n            }\r\n            points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), arrowArc, \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1), \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1))\r\n        } else {\r\n            if (anchorX > xr && anchorY >= yt && anchorY <= yb) {\r\n                var _arrowArc;\r\n                if (arrowBaseTop >= rightTopCorner[1] + cornerRadius && arrowBaseBottom <= rightBottomCorner[1]) {\r\n                    _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", [xr, arrowBaseTop, anchorX, anchorY, xr, arrowBaseBottom], \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1))\r\n                } else {\r\n                    if (arrowBaseTop < rightTopCorner[1] + cornerRadius && arrowBaseBottom >= rightTopCorner[1] + cornerRadius && arrowBaseBottom <= rightBottomCorner[1]) {\r\n                        var arrowWidthRest = rightTopCorner[1] + cornerRadius - arrowBaseTop;\r\n                        var _angle = arrowWidthRest / cornerRadius;\r\n                        var arrowBaseTopX = rightTopCorner[0] + cos(_angle) * cornerRadius;\r\n                        var arrowBaseTopY = rightTopCorner[1] + (1 - sin(_angle)) * cornerRadius;\r\n                        _arrowArc = buildPath(getArc(cornerRadius, cos(_angle), 1 - sin(_angle)), \"L\", [arrowBaseTopX, arrowBaseTopY, anchorX, anchorY, xr, arrowBaseBottom], \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1))\r\n                    } else {\r\n                        if (arrowBaseTop < rightTopCorner[1] + cornerRadius && arrowBaseBottom < rightTopCorner[1] + cornerRadius) {\r\n                            var _arrowWidthRest = rightTopCorner[1] + cornerRadius - arrowBaseTop;\r\n                            var _arrowAngle = _arrowWidthRest / cornerRadius;\r\n                            var _angle2 = _arrowAngle;\r\n                            var _arrowBaseTopX = rightTopCorner[0] + cos(_angle2) * cornerRadius;\r\n                            var _arrowBaseTopY = rightTopCorner[1] + (1 - sin(_angle2)) * cornerRadius;\r\n                            var bottomAngle = Math.sin((rightTopCorner[1] + cornerRadius - arrowBaseBottom) / cornerRadius);\r\n                            var arrowBaseBottomX = rightTopCorner[0] + cornerRadius * cos(bottomAngle);\r\n                            var arrowBaseBottomY = rightTopCorner[1] + cornerRadius * (1 - sin(bottomAngle));\r\n                            _arrowArc = buildPath(getArc(cornerRadius, cos(_angle2), 1 - sin(_angle2)), \"L\", [_arrowBaseTopX, _arrowBaseTopY, anchorX, anchorY, arrowBaseBottomX, arrowBaseBottomY], getAbsoluteArc(cornerRadius, rightTopCorner[0] + cornerRadius, rightTopCorner[1] + cornerRadius), \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1))\r\n                        } else {\r\n                            if (arrowBaseTop <= rightTopCorner[1] + cornerRadius && arrowBaseBottom >= rightBottomCorner[1]) {\r\n                                var topAngle = asin((rightTopCorner[1] + cornerRadius - arrowBaseTop) / cornerRadius);\r\n                                var _arrowBaseTopX2 = rightTopCorner[0] + cornerRadius * cos(topAngle);\r\n                                var _arrowBaseTopY2 = rightTopCorner[1] + cornerRadius * (1 - sin(topAngle));\r\n                                var _bottomAngle = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\r\n                                var _arrowBaseBottomX = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle) - 1);\r\n                                var _arrowBaseBottomY = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle);\r\n                                _arrowArc = buildPath(getArc(cornerRadius, cos(topAngle), 1 - sin(topAngle)), \"L\", [_arrowBaseTopX2, _arrowBaseTopY2, anchorX, anchorY, _arrowBaseBottomX, _arrowBaseBottomY], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius))\r\n                            } else {\r\n                                if (arrowBaseTop > rightTopCorner[1] + cornerRadius && arrowBaseTop <= rightBottomCorner[1] && arrowBaseBottom > rightBottomCorner[1]) {\r\n                                    var _bottomAngle2 = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\r\n                                    var _arrowBaseBottomX2 = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle2) - 1);\r\n                                    var _arrowBaseBottomY2 = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle2);\r\n                                    _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", [xr, arrowBaseTop, anchorX, anchorY, _arrowBaseBottomX2, _arrowBaseBottomY2], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius))\r\n                                } else {\r\n                                    if (arrowBaseTop > rightTopCorner[1] + cornerRadius && arrowBaseBottom > rightBottomCorner[1]) {\r\n                                        var _bottomAngle3 = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\r\n                                        var _arrowBaseBottomX3 = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle3) - 1);\r\n                                        var _arrowBaseBottomY3 = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle3);\r\n                                        var _topAngle = asin((arrowBaseTop - rightBottomCorner[1]) / cornerRadius);\r\n                                        var _arrowBaseTopX3 = rightBottomCorner[0] + cornerRadius * (cos(_topAngle) - 1);\r\n                                        var _arrowBaseTopY3 = rightBottomCorner[1] + cornerRadius * sin(_topAngle);\r\n                                        _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", rightBottomCorner, getArc(cornerRadius, cos(_topAngle) - 1, sin(_topAngle)), \"L\", [_arrowBaseTopX3, _arrowBaseTopY3, anchorX, anchorY, _arrowBaseBottomX3, _arrowBaseBottomY3], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius))\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), \"L\", rightTopCorner, _arrowArc, \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1))\r\n            }\r\n        }\r\n    }\r\n    return buildPath(\"M\", points, \"Z\")\r\n}\r\nvar Plaque = function() {\r\n    function Plaque(options, widget, root, contentTemplate) {\r\n        var bounded = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : true;\r\n        var measureContent = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : function(_, g) {\r\n            return g.getBBox()\r\n        };\r\n        var moveContentGroup = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : function(_, g, x, y) {\r\n            return g.move(x, y)\r\n        };\r\n        _classCallCheck(this, Plaque);\r\n        this.widget = widget;\r\n        this.options = options;\r\n        this.root = root;\r\n        this.contentTemplate = contentTemplate;\r\n        this.bonded = bounded;\r\n        this.measureContent = measureContent;\r\n        this.moveContentGroup = moveContentGroup\r\n    }\r\n    _createClass(Plaque, [{\r\n        key: \"draw\",\r\n        value: function(_ref4) {\r\n            var _this = this;\r\n            var anchorX = _ref4.x,\r\n                anchorY = _ref4.y,\r\n                _ref4$canvas = _ref4.canvas,\r\n                canvas = void 0 === _ref4$canvas ? {} : _ref4$canvas,\r\n                offsetX = _ref4.offsetX,\r\n                offsetY = _ref4.offsetY,\r\n                _ref4$offset = _ref4.offset,\r\n                offset = void 0 === _ref4$offset ? 0 : _ref4$offset,\r\n                restProps = _objectWithoutProperties(_ref4, [\"x\", \"y\", \"canvas\", \"offsetX\", \"offsetY\", \"offset\"]);\r\n            var options = this.options;\r\n            var x = options.x,\r\n                y = options.y;\r\n            var bounds = {\r\n                xl: canvas.left,\r\n                xr: canvas.width - canvas.right,\r\n                width: canvas.width - canvas.right - canvas.left,\r\n                yt: canvas.top,\r\n                yb: canvas.height - canvas.bottom,\r\n                height: canvas.height - canvas.bottom - canvas.top\r\n            };\r\n            if (!((0, _type.isDefined)(anchorX) && (0, _type.isDefined)(anchorY)) && !((0, _type.isDefined)(x) && (0, _type.isDefined)(y))) {\r\n                return false\r\n            }\r\n            if ((0, _type.isDefined)(anchorX) && (anchorX < bounds.xl || bounds.xr < anchorX || anchorY < bounds.yt || bounds.yb < anchorY)) {\r\n                return false\r\n            }\r\n            if (!this._root) {\r\n                this._draw()\r\n            }\r\n            var shadowSettings = (0, _extend.extend)({\r\n                x: \"-50%\",\r\n                y: \"-50%\",\r\n                width: \"200%\",\r\n                height: \"200%\"\r\n            }, options.shadow);\r\n            var contentWidth = options.width > 0 ? options.width : null;\r\n            var contentHeight = options.height > 0 ? options.height : null;\r\n            var onRender = function() {\r\n                var _this$_root;\r\n                var bBox = _this._contentBBox = _this.measureContent(_this.widget, _this._contentGroup);\r\n                var size = _this._size = {\r\n                    width: max(contentWidth, bBox.width) + 2 * options.paddingLeftRight,\r\n                    height: max(contentHeight, bBox.height) + 2 * options.paddingTopBottom,\r\n                    offset: offset\r\n                };\r\n                var xOff = shadowSettings.offsetX;\r\n                var yOff = shadowSettings.offsetY;\r\n                var blur = 2 * shadowSettings.blur + 1;\r\n                var lm = max(blur - xOff, 0);\r\n                var rm = max(blur + xOff, 0);\r\n                var tm = max(blur - yOff, 0);\r\n                var bm = max(blur + yOff, 0);\r\n                _this.margins = {\r\n                    lm: lm,\r\n                    rm: rm,\r\n                    tm: tm,\r\n                    bm: bm\r\n                };\r\n                if (!(0, _type.isDefined)(x)) {\r\n                    if ((0, _type.isDefined)(offsetX)) {\r\n                        x = anchorX + offsetX\r\n                    } else {\r\n                        if (bounds.width < size.width) {\r\n                            x = round(bounds.xl + bounds.width / 2)\r\n                        } else {\r\n                            x = min(max(anchorX, Math.ceil(bounds.xl + size.width / 2 + lm)), Math.floor(bounds.xr - size.width / 2 - rm))\r\n                        }\r\n                    }\r\n                } else {\r\n                    x += offsetX || 0;\r\n                    if (!(0, _type.isDefined)(anchorX)) {\r\n                        anchorX = x\r\n                    }\r\n                }\r\n                if (!(0, _type.isDefined)(y)) {\r\n                    if ((0, _type.isDefined)(offsetY)) {\r\n                        y = anchorY + offsetY\r\n                    } else {\r\n                        var y_top = anchorY - options.arrowLength - size.height / 2 - offset;\r\n                        var y_bottom = anchorY + options.arrowLength + size.height / 2 + offset;\r\n                        if (bounds.height < size.height + options.arrowLength) {\r\n                            y = round(bounds.yt + size.height / 2)\r\n                        } else {\r\n                            if (y_top - size.height / 2 - tm < bounds.yt) {\r\n                                if (y_bottom + size.height / 2 + bm < bounds.yb) {\r\n                                    y = y_bottom;\r\n                                    anchorY += offset\r\n                                } else {\r\n                                    y = round(bounds.yt + size.height / 2)\r\n                                }\r\n                            } else {\r\n                                y = y_top;\r\n                                anchorY -= offset\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    y += offsetY || 0;\r\n                    if (!(0, _type.isDefined)(anchorY)) {\r\n                        anchorY = y + size.height / 2\r\n                    }\r\n                }\r\n                _this.anchorX = anchorX;\r\n                _this.anchorY = anchorY;\r\n                _this.move(x, y);\r\n                null === (_this$_root = _this._root) || void 0 === _this$_root ? void 0 : _this$_root.append(_this.root)\r\n            };\r\n            if (this.contentTemplate.render) {\r\n                this.contentTemplate.render({\r\n                    model: options,\r\n                    container: this._contentGroup.element,\r\n                    onRendered: onRender\r\n                })\r\n            } else {\r\n                return this.contentTemplate(_objectSpread({\r\n                    group: this._contentGroup,\r\n                    onRender: onRender\r\n                }, restProps))\r\n            }\r\n            return true\r\n        }\r\n    }, {\r\n        key: \"_draw\",\r\n        value: function() {\r\n            var renderer = this.widget._renderer;\r\n            var options = this.options;\r\n            var shadowSettings = (0, _extend.extend)({\r\n                x: \"-50%\",\r\n                y: \"-50%\",\r\n                width: \"200%\",\r\n                height: \"200%\"\r\n            }, options.shadow);\r\n            var shadow = this._shadow = renderer.shadowFilter().attr(shadowSettings);\r\n            var cloudSettings = {\r\n                opacity: options.opacity,\r\n                \"stroke-width\": 0,\r\n                fill: options.color\r\n            };\r\n            var borderOptions = options.border || {};\r\n            if (borderOptions.visible) {\r\n                (0, _extend.extend)(cloudSettings, {\r\n                    \"stroke-width\": borderOptions.width,\r\n                    stroke: borderOptions.color,\r\n                    \"stroke-opacity\": borderOptions.opacity,\r\n                    dashStyle: borderOptions.dashStyle\r\n                })\r\n            }\r\n            var group = this._root = renderer.g().append(this.root);\r\n            if (options.type) {\r\n                group.attr({\r\n                    \"class\": \"dxc-\".concat(options.type, \"-annotation\")\r\n                })\r\n            }\r\n            var cloudGroup = renderer.g().attr({\r\n                filter: shadow.id\r\n            }).append(group);\r\n            this._cloud = renderer.path([], \"area\").attr(cloudSettings).sharp().append(cloudGroup);\r\n            this._contentGroup = renderer.g().append(group)\r\n        }\r\n    }, {\r\n        key: \"getBBox\",\r\n        value: function() {\r\n            var size = this._size || {};\r\n            var margins = this.margins || {};\r\n            var rotationAngle = getCloudAngle(size, this.x, this.y, this.anchorX, this.anchorY);\r\n            return {\r\n                x: Math.floor(this.x - size.width / 2 - margins.lm),\r\n                y: Math.floor(this.y - size.height / 2 - margins.tm - (270 === rotationAngle ? this.options.arrowLength : 0)),\r\n                width: size.width + margins.lm + margins.rm,\r\n                height: size.height + margins.tm + margins.bm + (90 === rotationAngle || 270 === rotationAngle ? this.options.arrowLength : 0)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"clear\",\r\n        value: function() {\r\n            if (this._root) {\r\n                this._root.remove();\r\n                this._shadow.remove();\r\n                this._root = null\r\n            }\r\n            return this\r\n        }\r\n    }, {\r\n        key: \"customizeCloud\",\r\n        value: function(attr) {\r\n            if (this._cloud) {\r\n                this._cloud.attr(attr)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"moveRoot\",\r\n        value: function(x, y) {\r\n            if (this._root) {\r\n                this._root.move(x, y)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"move\",\r\n        value: function(x, y) {\r\n            x = round(x);\r\n            y = round(y);\r\n            this.x = x;\r\n            this.y = y;\r\n            var rotationAngle = getCloudAngle(this._size, x, y, this.anchorX, this.anchorY);\r\n            var radRotationAngle = rotationAngle * PI / 180;\r\n            this._cloud.attr({\r\n                d: getCloudPoints(rotateSize(this._size, rotationAngle), x, y, rotateX(this.anchorX, this.anchorY, radRotationAngle, x, y), rotateY(this.anchorX, this.anchorY, radRotationAngle, x, y), this.options, this.bonded)\r\n            }).rotate(rotationAngle, x, y);\r\n            this.moveContentGroup(this.widget, this._contentGroup, x - this._contentBBox.x - this._contentBBox.width / 2, y - this._contentBBox.y - this._contentBBox.height / 2)\r\n        }\r\n    }, {\r\n        key: \"hitTest\",\r\n        value: function(x, y) {\r\n            var _ref5 = this._size || {},\r\n                width = _ref5.width,\r\n                height = _ref5.height;\r\n            return Math.abs(x - this.x) <= width / 2 && Math.abs(y - this.y) <= height / 2\r\n        }\r\n    }]);\r\n    return Plaque\r\n}();\r\nexports.Plaque = Plaque;\r\n"]},"metadata":{},"sourceType":"script"}