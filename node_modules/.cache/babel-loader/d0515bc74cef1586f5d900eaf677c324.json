{"ast":null,"code":"import helpers from \"./Helper\";\nimport { axiosInstance, logout } from \"./utilities\";\nexport var api = async function ({\n  method = \"get\",\n  api,\n  header,\n  body,\n  status = false,\n  token = \"\",\n  baseURL = \"normal\"\n}) {\n  return await new Promise((resolve, reject) => {\n    // setting token\n    // localStorage.getItem('AuthTypeId')\n    //   ? (axiosInstance.defaults.headers.common['user-type'] = localStorage.getItem('AuthTypeId'))\n    //   : '';\n    // if (!!localStorage.getItem(\"AuthTypeId\"))\n    //   axiosInstance.defaults.headers.common[\"user-type\"] = localStorage.getItem(\n    //     \"AuthTypeId\"\n    //   );\n    if (!!localStorage.getItem(\"AuthToken\")) axiosInstance.defaults.headers.common[\"Authorization\"] = \"token \" + localStorage.getItem(\"AuthToken\");\n    axiosInstance.defaults.crossDomain = true;\n\n    if (!!header) {\n      axiosInstance.defaults.headers.put[header.type] = header.value;\n      axiosInstance.defaults.headers.post[header.type] = header.value;\n    } // axiosInstance.defaults.headers.common[\n    //   'Accept'\n    // ] = 'application/json';\n    // axiosInstance.defaults.headers.common[\n    //   'Content-Type'\n    // ] = 'multipart/form-data';\n    // axiosInstance.defaults.headers.post['Content-Type'] = 'application/json';\n\n\n    axiosInstance[method](`${getServiceUrl(baseURL)}${api}`, body ? body : \"\").then(data => {\n      resolve(statusHelper(status, data));\n    }).catch(error => {\n      try {\n        if (error.response) {\n          reject(statusHelper(status, error.response));\n        } else {\n          reject(error);\n        }\n      } catch (err) {\n        console.log(err);\n        reject(err);\n      }\n    });\n  });\n};\n\nvar statusHelper = (status, data) => {\n  if (data.status === 401 || data.status === 403) {\n    logout();\n  }\n\n  if (status) {\n    return {\n      status: data.status,\n      ...data.data\n    };\n  } else {\n    return data.data;\n  }\n};\n\nlet getServiceUrl = baseURL => {\n  let finalURL = \"\";\n\n  switch (baseURL) {\n    case \"normal\":\n      finalURL = helpers.getUrl() + \"api/\"; //live\n      // finalURL = \"http://52.60.58.9:8000/api/\";\n\n      break;\n\n    case \"token\":\n      finalURL = helpers.getUrl() + \"api/\"; //live\n      // finalURL = \"http://52.60.58.9:8000/api/\";\n\n      break;\n\n    case \"backend\":\n      finalURL = \"http://103.253.15.184:3002/api/\";\n      break;\n\n    case \"tcm\":\n      finalURL = helpers.getTCMUrl() + \"api/\";\n      break;\n\n    default:\n      finalURL = helpers.getUrl() + \"api/\";\n    //live\n    // finalURL = \"http://52.60.58.9:8000/api/\";\n  }\n\n  return finalURL;\n};\n\nexport function getUrl() {\n  return \"test\";\n}","map":{"version":3,"sources":["F:/webfe/src/service/api.js"],"names":["helpers","axiosInstance","logout","api","method","header","body","status","token","baseURL","Promise","resolve","reject","localStorage","getItem","defaults","headers","common","crossDomain","put","type","value","post","getServiceUrl","then","data","statusHelper","catch","error","response","err","console","log","finalURL","getUrl","getTCMUrl"],"mappings":"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","sourcesContent":["import helpers from \"./Helper\";\r\nimport { axiosInstance, logout } from \"./utilities\";\r\n\r\nexport var api = async function ({\r\n  method = \"get\",\r\n  api,\r\n  header,\r\n  body,\r\n  status = false,\r\n  token = \"\",\r\n  baseURL = \"normal\",\r\n}) {\r\n  return await new Promise((resolve, reject) => {\r\n    // setting token\r\n    // localStorage.getItem('AuthTypeId')\r\n    //   ? (axiosInstance.defaults.headers.common['user-type'] = localStorage.getItem('AuthTypeId'))\r\n    //   : '';\r\n    // if (!!localStorage.getItem(\"AuthTypeId\"))\r\n    //   axiosInstance.defaults.headers.common[\"user-type\"] = localStorage.getItem(\r\n    //     \"AuthTypeId\"\r\n    //   );\r\n    if (!!localStorage.getItem(\"AuthToken\"))\r\n      axiosInstance.defaults.headers.common[\"Authorization\"] =\r\n        \"token \" + localStorage.getItem(\"AuthToken\");\r\n\r\n    axiosInstance.defaults.crossDomain = true;\r\n    if (!!header) {\r\n      axiosInstance.defaults.headers.put[header.type] = header.value;\r\n      axiosInstance.defaults.headers.post[header.type] = header.value;\r\n    }\r\n    // axiosInstance.defaults.headers.common[\r\n    //   'Accept'\r\n    // ] = 'application/json';\r\n\r\n    // axiosInstance.defaults.headers.common[\r\n    //   'Content-Type'\r\n    // ] = 'multipart/form-data';\r\n    // axiosInstance.defaults.headers.post['Content-Type'] = 'application/json';\r\n\r\n    axiosInstance[method](`${getServiceUrl(baseURL)}${api}`, body ? body : \"\")\r\n      .then(data => {\r\n        resolve(statusHelper(status, data));\r\n      })\r\n      .catch(error => {\r\n        try {\r\n          if (error.response) {\r\n            reject(statusHelper(status, error.response));\r\n          } else {\r\n            reject(error);\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n          reject(err);\r\n        }\r\n      });\r\n  });\r\n};\r\n\r\nvar statusHelper = (status, data) => {\r\n  if (data.status === 401 || data.status === 403) {\r\n    logout();\r\n  }\r\n  if (status) {\r\n    return {\r\n      status: data.status,\r\n      ...data.data,\r\n    };\r\n  } else {\r\n    return data.data;\r\n  }\r\n};\r\n\r\nlet getServiceUrl = baseURL => {\r\n  let finalURL = \"\";\r\n  switch (baseURL) {\r\n    case \"normal\":\r\n      finalURL = helpers.getUrl() + \"api/\"; //live\r\n      // finalURL = \"http://52.60.58.9:8000/api/\";\r\n      break;\r\n    case \"token\":\r\n      finalURL = helpers.getUrl() + \"api/\"; //live\r\n      // finalURL = \"http://52.60.58.9:8000/api/\";\r\n      break;\r\n    case \"backend\":\r\n      finalURL = \"http://103.253.15.184:3002/api/\";\r\n      break;\r\n    case \"tcm\":\r\n      finalURL = helpers.getTCMUrl() + \"api/\";\r\n      break;\r\n    default:\r\n      finalURL = helpers.getUrl() + \"api/\"; //live\r\n    // finalURL = \"http://52.60.58.9:8000/api/\";\r\n  }\r\n\r\n  return finalURL;\r\n};\r\n\r\nexport function getUrl() {\r\n  return \"test\";\r\n}\r\n"]},"metadata":{},"sourceType":"module"}