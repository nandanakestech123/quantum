{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./devExpressScheduler/Styles.scss\";import Modal from\"assets/images/modal-avatar.png\";import man from\"assets/images/man.png\";import newUser from\"assets/images/user-image.png\";import Scheduler,{Resource,View,AppointmentDragging}from\"devextreme-react/scheduler\";import\"devextreme/dist/css/dx.common.css\";import\"devextreme/dist/css/dx.light.css\";import ResourceCell from\"./devExpressScheduler/ResourceCell\";import AppointmentCell from\"./devExpressScheduler/AppointmentCell\";import{InputSearch}from\"../InputSearch\";import _ from\"lodash\";import{NormalButton,NormalSelect}from\"component/common\";import{NormalInput,NormalModal}from\"component/common\";import{StaffSorting}from\"../../Admin/NewAppointment/NewListAppointment/modal/StaffSorting\";import{BlockPopup}from\"../../Admin/NewAppointment/NewListAppointment/modal/BlockPopup\";import{PrintModal}from\"../../Admin/NewAppointment/NewListAppointment/modal/PrintModal\";import{TreatmentHistory}from\"../../Admin/NewAppointment/NewListAppointment/modal/TreatmentHistory\";import{UpcomingAppointment}from\"../../Admin/NewAppointment/NewListAppointment/modal/UpcomingAppointment\";import{Toast}from\"service/toast\";import html2canvas from\"html2canvas\";import closeIcon from\"assets/images/close.png\";import{dateFormat}from\"service/helperFunctions\";import{getCommonApi,commonPatchApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";var groups=[\"id\"];var draggingGroupName=\"appointmentsGroup\";var sleep=function sleep(milliseconds){return new Promise(function(resolve){return setTimeout(resolve,milliseconds);});};var views=[{type:\"day\",name:\"day\",groupOrientation:\"Horizontally\",intervalCount:1},{type:\"week\",name:\"week\",groupOrientation:\"vertical\",intervalCount:1,maxAppointmentsPerCell:\"unlimited\"},{type:\"month\",name:\"month\",intervalCount:1,groupOrientation:\"Horizontally\",maxAppointmentsPerCell:\"unlimited\"}];var Dayview=[{type:\"day\",name:\"day\",groupOrientation:\"Horizontally\",intervalCount:1}];export var NewSchedulerModalClass=/*#__PURE__*/function(_React$Component){_inherits(NewSchedulerModalClass,_React$Component);var _super=_createSuper(NewSchedulerModalClass);function NewSchedulerModalClass(){var _this;_classCallCheck(this,NewSchedulerModalClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={selectedDate:new Date(),selectedView:\"\",DefaultDate:new Date(),DefaultView:\"\",searchtext:\"\",SelectedList:[],isOpenModal:false,isOpenBlockModal:false,appointmentId:0,SchedulerHeight:700,isOpenPrintModal:false,formFields:[],groupByList:[{label:\"Group by Staff\",value:\"staff\"},{label:\"Group by Department\",value:\"department\"},{label:\"Group by Room\",value:\"room\"}],groupBy:\"staff\",isOpenModalForCustomer:false,customerId:0,custName:\"\",custPhone:\"\",customerOption:[],search:\"\",customerNumber:0,isTreatmentHistoryModal:false,isUpcomingAppointmentModal:false};_this.onEmptyClick=function(e){e.cancel=true;var date=new Date(e.cellData.startDate);if(e.cellData.groups){_this.props.onEmptyClick(date,e.cellData);}else{Toast({type:\"error\",message:\"Not available\"});}};_this.onAppointmentClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var date;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.cancel=true;_context.next=3;return _this.setState({appointmentId:0});case 3:date=new Date(e.appointmentData.startDate);if(!(e.appointmentData.status===\"Block\")){_context.next=10;break;}_context.next=7;return _this.setState({appointmentId:e.appointmentData.appt_id});case 7:_this.handleBlockDialog();_context.next=11;break;case 10:_this.props.onEmptyClick(date,e.appointmentData);case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleViewChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.setState({selectedView:e});case 2:_this.handleChange();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleDateChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({selectedDate:e});case 2:_this.handleChange();case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.handleChange=function(){var _this$state=_this.state,selectedDate=_this$state.selectedDate,selectedView=_this$state.selectedView,DefaultDate=_this$state.DefaultDate,DefaultView=_this$state.DefaultView,searchtext=_this$state.searchtext;var newDate=new Date();var newMode=\"\";var prevMode=DefaultView;var prevDate=DefaultDate;if(selectedView){newMode=selectedView;}else{newMode=DefaultView;}if(selectedDate){newDate=selectedDate;}else{newDate=selectedDate;}_this.props.handleChangeFilter(prevMode,prevDate,newMode,newDate,searchtext);};_this.handleSearch=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:event.persist();_context4.next=3;return _this.setState({searchtext:event.target.value});case 3:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){_this.handleChange();},500);}_this.debouncedFn();case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();_this.handleDialog=function(){var isOpenModal=_this.state.isOpenModal;isOpenModal=!isOpenModal;_this.setState({isOpenModal:isOpenModal});};_this.handleBlockDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this.setState(function(prevState){return{isOpenBlockModal:!prevState.isOpenBlockModal};});case 2:_context5.next=4;return _this.setState({appointmentId:0});case 4:case\"end\":return _context5.stop();}}},_callee5);}));_this.handlePrintDialog=function(){var isOpenPrintModal=_this.state.isOpenPrintModal;isOpenPrintModal=!isOpenPrintModal;_this.setState({isOpenPrintModal:isOpenPrintModal});};_this.handleBack=function(){_this.props.handleBack();};_this.handleNext=function(){_this.props.handleNext();};_this.Snap=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var img,base64URL;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _this.setState({SchedulerHeight:3000});case 2:_context6.next=4;return sleep(1000);case 4://\nwindow.scrollTo(0,0);img=\"\";base64URL=\"\";html2canvas(document.querySelector(\"#Scheduler\"),{allowTaint:true,useCORS:true,logging:false,scale:1,removeContainer:true}).then(function(canvas){img=canvas.toDataURL(\"image/png\",1);base64URL=img.replace(\"image/png\",\"image/octet-stream\");var byteCharacters=atob(img.replace(/^data:image\\/(png|jpeg|jpg);base64,/,\"\"));var byteNumbers=new Array(byteCharacters.length);for(var i=0;i<byteCharacters.length;i++){byteNumbers[i]=byteCharacters.charCodeAt(i);}var byteArray=new Uint8Array(byteNumbers);var file=new Blob([byteArray],{type:\"image/png\"+\";base64\"});var fileURL=URL.createObjectURL(file);var a=document.createElement(\"a\");a.setAttribute(\"download\",\"myImage.png\");a.setAttribute(\"href\",base64URL);a.click();window.open(fileURL);});window.scrollTo(0,document.documentElement.scrollHeight);_context6.next=11;return _this.setState({SchedulerHeight:700});case 11:case\"end\":return _context6.stop();}}},_callee6);}));_this.handleTreatmentHistory=function(){var customerId=_this.state.customerId;if(customerId>0){_this.setState(function(prevState){return{isTreatmentHistoryModal:!prevState.isTreatmentHistoryModal,customerNumber:_this.state.customerId};});}else{Toast({type:\"error\",message:\"Please select customer\"});}};_this.handleUpcomingAppointment=function(){var customerId=_this.state.customerId;if(customerId>0){_this.setState(function(prevState){return{isUpcomingAppointmentModal:!prevState.isUpcomingAppointmentModal,customerNumber:_this.state.customerId};});}else{Toast({type:\"error\",message:\"Please select customer\"});}};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.setState({customerId:data.id,custName:data.cust_name,custPhone:data.cust_phone1,isOpenModalForCustomer:false,customerOption:[]});case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x5){return _ref7.apply(this,arguments);};}();_this.handleCustomerDialog=function(){var isOpenModalForCustomer=_this.state.isOpenModalForCustomer;isOpenModalForCustomer=!isOpenModalForCustomer;_this.setState({isOpenModalForCustomer:isOpenModalForCustomer});};_this.handleCustomerSearch=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(event){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return _this.setState({search:event.target.value});case 2:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var basicApptDetail;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:basicApptDetail=_this.props.basicApptDetail;_this.search(basicApptDetail);case 2:case\"end\":return _context8.stop();}}},_callee8);})),500);}_this.debouncedFn();case 4:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x6){return _ref8.apply(this,arguments);};}();_this.search=function(basicApptDetail){var search=_this.state.search;_this.props.getCommonApi(\"custappt/?Outlet=\".concat(\"&search=\",search)).then(function(key){var status=key.status,data=key.data;if(status===200){_this.setState({customerOption:data});}});};_this.getHoursFromDate=function(date){var hour=new Date(date).getHours();var minute=new Date(date).getMinutes();var hours=hour>9?hour:\"0\"+hour;var minutes=minute>9?minute:\"0\"+minute;return hours+\":\"+minutes;};_this.onDragStart=function(e){if(e.itemData.status===\"Block\"){e.cancel=true;}else{_this.getDraggedData(e.itemData.appt_id);}};_this.onDragEnd=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e){var formFields,startTime,endTime,targetStaff;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return sleep(200);case 2://\nconsole.log(e.itemData,\"dragenddatawithsleep\");formFields=_this.state.formFields;startTime=_this.getHoursFromDate(e.itemData.startDate);endTime=_this.getHoursFromDate(e.itemData.endDate);targetStaff=e.itemData.id;if(!(formFields[\"start_time\"]!==startTime||formFields[\"emp_no\"]!==targetStaff)){_context10.next=18;break;}formFields[\"appointmentDate\"]=e.itemData.endDate;formFields[\"start_time\"]=startTime;formFields[\"end_time\"]=endTime;formFields[\"emp_no\"]=targetStaff;formFields[\"item_text\"]=e.itemData.item_name;formFields[\"recur_days\"]=null;formFields[\"recur_qty\"]=null;_context10.next=17;return _this.setState({formFields:formFields});case 17:_this.handleUpdate();case 18:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x7){return _ref10.apply(this,arguments);};}();_this.getDraggedData=function(appt_id){var formFields=_this.state.formFields;_this.props.getCommonApi(\"appointmentresources/\".concat(appt_id,\"/\")).then(function(key){var status=key.status,data=key.data;var appt_Date=data.appt_date;var date=appt_Date.split(\"/\");var finaldate=date[2]+\"-\"+date[1]+\"-\"+date[0];if(status===200){formFields[\"appt_id\"]=appt_id;formFields[\"custName\"]=data.cust_name;formFields[\"appointmentDate\"]=finaldate;formFields[\"bookingStatus\"]=data.booking_status;formFields[\"new_remark\"]=data.ori_remark;formFields[\"customerName\"]=data.cust_id;formFields[\"Source_Codeid\"]=data.source_id;formFields[\"Room_Codeid\"]=data.room_id;formFields[\"sec_status\"]=data.secondary_status;formFields[\"Appt_typeid\"]=data.channel_id;formFields[\"start_time\"]=data?data.start_time:\"\";formFields[\"end_time\"]=data?data.end_time:\"\";formFields[\"Item_Codeid\"]=data.Item_Codeid;formFields[\"Item_CodeName\"]=data.item_name;formFields[\"emp_no\"]=data.emp_id;formFields[\"add_duration\"]=data.add_duration;formFields[\"edit_remark\"]=\"\";formFields[\"requesttherapist\"]=data.requesttherapist;formFields[\"recur_days\"]=data.recur_days;formFields[\"recur_qty\"]=data.recur_qty;formFields[\"item_text\"]=data.item_name;_this.setState({formFields:formFields});}});};_this.handleUpdate=function(){var formFields=_this.state.formFields;var data={appt_date:dateFormat(new Date(formFields.appointmentDate),\"yyyy-mm-dd\"),Room_Codeid:formFields.Room_Codeid,appt_status:formFields.bookingStatus,sec_status:formFields.sec_status,edit_remark:formFields.edit_remark,start_time:formFields.start_time,end_time:formFields.end_time,item_id:formFields.Item_Codeid,add_duration:formFields.add_duration,emp_id:formFields.emp_no,requesttherapist:formFields.requesttherapist,item_text:formFields.item_text,recur_qty:formFields.recur_qty,recur_days:formFields.recur_days};_this.props.commonPatchApi(\"appointmentresources/\".concat(formFields.appt_id,\"/\"),data).then(/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(res){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x8){return _ref11.apply(this,arguments);};}());_this.props.getAppointmentWithStaff();};_this.onAppSingleClick=function(e){e.cancel=true;};_this.handleGroupbyChange=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(_ref12){var _ref12$target,value,name;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_ref12$target=_ref12.target,value=_ref12$target.value,name=_ref12$target.name;debugger;if(value==\"\"){value=\"staff\";}if(value!==_this.state.groupBy){_this.setState({groupBy:value});_this.props.groupByAppointment(value);}case 4:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x9){return _ref13.apply(this,arguments);};}();return _this;}_createClass(NewSchedulerModalClass,[{key:\"componentWillMount\",value:function componentWillMount(){this.setState({DefaultDate:this.props.filterDate,DefaultView:this.props.filterType});}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,isOpenModal=_this$state2.isOpenModal,isOpenBlockModal=_this$state2.isOpenBlockModal,appointmentId=_this$state2.appointmentId,SchedulerHeight=_this$state2.SchedulerHeight,isOpenPrintModal=_this$state2.isOpenPrintModal,groupBy=_this$state2.groupBy,custName=_this$state2.custName,isOpenModalForCustomer=_this$state2.isOpenModalForCustomer,customerOption=_this$state2.customerOption,search=_this$state2.search,isTreatmentHistoryModal=_this$state2.isTreatmentHistoryModal,isUpcomingAppointmentModal=_this$state2.isUpcomingAppointmentModal;var filterDate=this.props.filterDate;return/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\",height:\"100%\"}},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(StaffSorting,{isOpenModal:isOpenModal,handleDialog:this.handleDialog,handleChange:this.handleChange,filterDate:filterDate}),isOpenBlockModal?/*#__PURE__*/React.createElement(BlockPopup,{isOpenBlockModal:isOpenBlockModal,handleBlockDialog:this.handleBlockDialog,handleChange:this.handleChange,filterDate:filterDate,appointmentId:appointmentId}):\"\",isOpenPrintModal?/*#__PURE__*/React.createElement(PrintModal,{isOpenPrintModal:isOpenPrintModal,handlePrintDialog:this.handlePrintDialog}):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end p-1 m-1\"},this.props.meta?/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 text-right p-1\"},this.props.meta.pagination&&this.props.meta.pagination.total_pages>1?/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",null,this.props.meta.pagination.total_pages<this.props.meta.pagination.current_page||this.props.meta.pagination.current_page>1||this.props.meta.pagination.total_pages==this.props.meta.pagination.current_page?/*#__PURE__*/React.createElement(\"button\",{className:\"cursor-pointer dx-button-content disabled\",onClick:this.handleBack},/*#__PURE__*/React.createElement(\"svg\",{width:\"9\",height:\"15\",viewBox:\"0 0 6 10\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M5 0.5L1 5L5 9.5\",stroke:\"#888888\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}))):\"\",this.props.meta.pagination.total_pages>this.props.meta.pagination.current_page&&this.props.meta.pagination.total_pages!==this.props.meta.pagination.current_page&&this.props.meta.pagination.current_page>0?/*#__PURE__*/React.createElement(\"button\",{className:\"cursor-pointer dx-button-content\",onClick:this.handleNext},/*#__PURE__*/React.createElement(\"svg\",{width:\"9\",height:\"15\",viewBox:\"0 0 6 10\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M0.5 9.5L4.5 5L0.5 0.5\",stroke:\"#888888\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}))):\"\")):\"\"):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 w-100\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Select customer\",value:custName,onClick:function onClick(){return _this2.setState({isOpenModalForCustomer:true});},name:\"searchtext\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalSelect,{options:this.state.groupByList,placeholderrequired:\"false\",value:this.state.groupBy,name:\"groupBy\",onChange:this.handleGroupbyChange,className:\"status py-1\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 fs-15 m-0 p-0\",label:\"Upcoming Appointment\",onClick:this.handleUpcomingAppointment})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 fs-15 \",label:\"Treatment History\",onClick:this.handleTreatmentHistory})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-.5\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0\",mainbg:true,className:\" fs-15 confirm\",label:\"Screenshot\",outline:false,onClick:this.Snap})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0\",mainbg:true,className:\" fs-15 confirm\",label:\"Print\",outline:false,onClick:function onClick(){_this2.setState({isOpenPrintModal:true});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0\",mainbg:true,className:\" fs-15 confirm\",label:\"Sort\",outline:false,onClick:function onClick(){_this2.setState({isOpenModal:true});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0\",mainbg:true,className:\"fs-15 confirm\",label:\"Block\",outline:false,onClick:function onClick(){_this2.setState({isOpenBlockModal:true});}}))),isTreatmentHistoryModal?/*#__PURE__*/React.createElement(TreatmentHistory,{isTreatmentHistoryModal:isTreatmentHistoryModal,handleTreatmentHistory:this.handleTreatmentHistory,customerNumber:this.state.customerNumber,custName:this.state.custName,custPhone:this.state.custPhone}):\"\",isUpcomingAppointmentModal?/*#__PURE__*/React.createElement(UpcomingAppointment,{isUpcomingAppointmentModal:isUpcomingAppointmentModal,handleUpcomingAppointment:this.handleUpcomingAppointment,customerNumber:this.state.customerNumber,custName:this.state.custName,custPhone:this.state.custPhone}):\"\",/*#__PURE__*/React.createElement(NormalModal,{className:\"multiple-appointment select-category\",style:{minWidth:\"800px\"},modal:isOpenModalForCustomer,handleModal:this.handleCustomerDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleCustomerDialog,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},\" \",/*#__PURE__*/React.createElement(\"h5\",{className:\"text-center\"},\"Select Customer\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2 mb-5 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 pl-0\"},\"Search\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"input\",{name:\"search\",onChange:this.handleCustomerSearch,className:\"search m-0 p-0 px-3\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 p-0\",mainbg:true,className:\" fs-15 confirm\",label:\"Search\",outline:false,onClick:function onClick(){return _this2.search(search);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 table-header w-100 m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},\"Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},\"Phone\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},\"Cust Code\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"Email\")),/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100\"},customerOption.length>0?customerOption.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 table-body w-100\",onClick:function onClick(){return _this2.handleSelectCustomer(item);},key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_phone1),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},item.cust_code),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},item.cust_email));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"},\"No Data are available\")))),/*#__PURE__*/React.createElement(Scheduler,{id:\"Scheduler\",height:SchedulerHeight,width:1500,dataSource:this.props.event,views:this.props.staffList?views:Dayview,onContentReady:this.props.event?this.onContentReady:\"\",defaultCurrentView:\"day\",groups:groups,startDayHour:8,endDayHour:21,firstDayOfWeek:0,showAllDayPanel:false,crossScrollingEnabled:true,cellDuration:15,resourceCellComponent:ResourceCell,editing:{allowDeleting:false,allowResizing:false,allowUpdating:true,allowDragging:true,allowTaint:true},onAppointmentClick:this.onAppSingleClick,onCellClick:function onCellClick(e){return _this2.onEmptyClick(e);},onAppointmentDblClick:function onAppointmentDblClick(e){return _this2.onAppointmentClick(e);}//dateSerializationFormat=\"yyyy-MM-ddTHH:mm:ssZ\"\n,appointmentComponent:AppointmentCell,onCurrentViewChange:this.handleViewChange,onCurrentDateChange:this.handleDateChange,appointmentDragging:{autoScroll:true}},/*#__PURE__*/React.createElement(AppointmentDragging,{group:draggingGroupName,onDragStart:function onDragStart(e){return _this2.onDragStart(e);},onDragEnd:function onDragEnd(e){return _this2.onDragEnd(e);}}),/*#__PURE__*/React.createElement(View,{type:\"day\",label:\"day\"}),/*#__PURE__*/React.createElement(View,{type:\"week\",label:\"week\"}),/*#__PURE__*/React.createElement(View,{type:\"month\",label:\"month\"}),/*#__PURE__*/React.createElement(Resource,{dataSource:this.props.staffList,fieldExpr:\"id\",useColorAsDefault:true,allowMultiple:false}))));}}]);return NewSchedulerModalClass;}(React.Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonPatchApi:commonPatchApi},dispatch);};export var NewSchedulerModal=connect(null,mapDispatchToProps)(NewSchedulerModalClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/common/Plugins/NewScheduler.js"],"names":["React","Component","Modal","man","newUser","Scheduler","Resource","View","AppointmentDragging","ResourceCell","AppointmentCell","InputSearch","_","NormalButton","NormalSelect","NormalInput","NormalModal","StaffSorting","BlockPopup","PrintModal","TreatmentHistory","UpcomingAppointment","Toast","html2canvas","closeIcon","dateFormat","getCommonApi","commonPatchApi","connect","bindActionCreators","groups","draggingGroupName","sleep","milliseconds","Promise","resolve","setTimeout","views","type","name","groupOrientation","intervalCount","maxAppointmentsPerCell","Dayview","NewSchedulerModalClass","state","selectedDate","Date","selectedView","DefaultDate","DefaultView","searchtext","SelectedList","isOpenModal","isOpenBlockModal","appointmentId","SchedulerHeight","isOpenPrintModal","formFields","groupByList","label","value","groupBy","isOpenModalForCustomer","customerId","custName","custPhone","customerOption","search","customerNumber","isTreatmentHistoryModal","isUpcomingAppointmentModal","onEmptyClick","e","cancel","date","cellData","startDate","props","message","onAppointmentClick","setState","appointmentData","status","appt_id","handleBlockDialog","handleViewChange","handleChange","handleDateChange","newDate","newMode","prevMode","prevDate","handleChangeFilter","handleSearch","event","persist","target","debouncedFn","debounce","handleDialog","prevState","handlePrintDialog","handleBack","handleNext","Snap","window","scrollTo","img","base64URL","document","querySelector","allowTaint","useCORS","logging","scale","removeContainer","then","canvas","toDataURL","replace","byteCharacters","atob","byteNumbers","Array","length","i","charCodeAt","byteArray","Uint8Array","file","Blob","fileURL","URL","createObjectURL","a","createElement","setAttribute","click","open","documentElement","scrollHeight","handleTreatmentHistory","handleUpcomingAppointment","handleSelectCustomer","data","id","cust_name","cust_phone1","handleCustomerDialog","handleCustomerSearch","basicApptDetail","key","getHoursFromDate","hour","getHours","minute","getMinutes","hours","minutes","onDragStart","itemData","getDraggedData","onDragEnd","console","log","startTime","endTime","endDate","targetStaff","item_name","handleUpdate","appt_Date","appt_date","split","finaldate","booking_status","ori_remark","cust_id","source_id","room_id","secondary_status","channel_id","start_time","end_time","Item_Codeid","emp_id","add_duration","requesttherapist","recur_days","recur_qty","appointmentDate","Room_Codeid","appt_status","bookingStatus","sec_status","edit_remark","item_id","emp_no","item_text","res","getAppointmentWithStaff","onAppSingleClick","handleGroupbyChange","groupByAppointment","filterDate","filterType","width","height","meta","pagination","total_pages","current_page","minWidth","map","item","index","cust_code","cust_email","staffList","onContentReady","allowDeleting","allowResizing","allowUpdating","allowDragging","autoScroll","mapDispatchToProps","dispatch","NewSchedulerModal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./devExpressScheduler/Styles.scss\";\r\nimport Modal from \"assets/images/modal-avatar.png\";\r\nimport man from \"assets/images/man.png\";\r\nimport newUser from \"assets/images/user-image.png\";\r\nimport Scheduler, {\r\n  Resource,\r\n  View,\r\n  AppointmentDragging,\r\n} from \"devextreme-react/scheduler\";\r\nimport \"devextreme/dist/css/dx.common.css\";\r\nimport \"devextreme/dist/css/dx.light.css\";\r\nimport ResourceCell from \"./devExpressScheduler/ResourceCell\";\r\nimport AppointmentCell from \"./devExpressScheduler/AppointmentCell\";\r\nimport { InputSearch } from \"../InputSearch\";\r\nimport _ from \"lodash\";\r\nimport { NormalButton, NormalSelect } from \"component/common\";\r\nimport { NormalInput,NormalModal } from \"component/common\";\r\nimport { StaffSorting } from \"../../Admin/NewAppointment/NewListAppointment/modal/StaffSorting\";\r\nimport { BlockPopup } from \"../../Admin/NewAppointment/NewListAppointment/modal/BlockPopup\";\r\nimport { PrintModal } from \"../../Admin/NewAppointment/NewListAppointment/modal/PrintModal\";\r\nimport { TreatmentHistory } from \"../../Admin/NewAppointment/NewListAppointment/modal/TreatmentHistory\";\r\nimport { UpcomingAppointment } from \"../../Admin/NewAppointment/NewListAppointment/modal/UpcomingAppointment\";\r\nimport { Toast } from \"service/toast\";\r\nimport html2canvas from \"html2canvas\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { getCommonApi, commonPatchApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nconst groups = [\"id\"];\r\nconst draggingGroupName = \"appointmentsGroup\";\r\nconst sleep = milliseconds => {\r\n  return new Promise(resolve => setTimeout(resolve, milliseconds));\r\n};\r\nconst views = [\r\n  {\r\n    type: \"day\",\r\n    name: \"day\",\r\n    groupOrientation: \"Horizontally\",\r\n    intervalCount: 1,\r\n  },\r\n  {\r\n    type: \"week\",\r\n    name: \"week\",\r\n    groupOrientation: \"vertical\",\r\n    intervalCount: 1,\r\n    maxAppointmentsPerCell: \"unlimited\",\r\n  },\r\n  {\r\n    type: \"month\",\r\n    name: \"month\",\r\n    intervalCount: 1,\r\n    groupOrientation: \"Horizontally\",\r\n    maxAppointmentsPerCell: \"unlimited\",\r\n  },\r\n];\r\nconst Dayview = [\r\n  {\r\n    type: \"day\",\r\n    name: \"day\",\r\n    groupOrientation: \"Horizontally\",\r\n    intervalCount: 1,\r\n  },\r\n];\r\n\r\nexport class NewSchedulerModalClass extends React.Component {\r\n  state = {\r\n    selectedDate: new Date(),\r\n    selectedView: \"\",\r\n    DefaultDate: new Date(),\r\n    DefaultView: \"\",\r\n    searchtext: \"\",\r\n    SelectedList: [],\r\n    isOpenModal: false,\r\n    isOpenBlockModal: false,\r\n    appointmentId: 0,\r\n    SchedulerHeight: 700,\r\n    isOpenPrintModal: false,\r\n    formFields: [],\r\n    groupByList: [\r\n      { label: \"Group by Staff\", value: \"staff\" },\r\n      { label: \"Group by Department\", value: \"department\" },\r\n      { label: \"Group by Room\", value: \"room\" },\r\n    ],\r\n    groupBy: \"staff\",\r\n    isOpenModalForCustomer: false,\r\n\r\n    customerId: 0,\r\n    custName: \"\",\r\n    custPhone: \"\",\r\n    customerOption: [],\r\n    search: \"\",\r\n    customerNumber: 0,\r\n\r\n    isTreatmentHistoryModal: false,\r\n    isUpcomingAppointmentModal: false,\r\n  };\r\n\r\n  onEmptyClick = e => {\r\n    e.cancel = true;\r\n    let date = new Date(e.cellData.startDate);\r\n    if (e.cellData.groups) {\r\n      this.props.onEmptyClick(date, e.cellData);\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Not available\" });\r\n    }\r\n  };\r\n  onAppointmentClick = async e => {\r\n    e.cancel = true;\r\n    await this.setState({ appointmentId: 0 });\r\n    let date = new Date(e.appointmentData.startDate);\r\n    if (e.appointmentData.status === \"Block\") {\r\n      await this.setState({ appointmentId: e.appointmentData.appt_id });\r\n      this.handleBlockDialog();\r\n    } else {\r\n      this.props.onEmptyClick(date, e.appointmentData);\r\n    }\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.setState({\r\n      DefaultDate: this.props.filterDate,\r\n      DefaultView: this.props.filterType,\r\n    });\r\n  }\r\n\r\n  handleViewChange = async e => {\r\n    await this.setState({\r\n      selectedView: e,\r\n    });\r\n    this.handleChange();\r\n  };\r\n\r\n  handleDateChange = async e => {\r\n    await this.setState({\r\n      selectedDate: e,\r\n    });\r\n    this.handleChange();\r\n  };\r\n\r\n  handleChange = () => {\r\n    let {\r\n      selectedDate,\r\n      selectedView,\r\n      DefaultDate,\r\n      DefaultView,\r\n      searchtext,\r\n    } = this.state;\r\n    let newDate = new Date();\r\n    let newMode = \"\";\r\n    let prevMode = DefaultView;\r\n    let prevDate = DefaultDate;\r\n    if (selectedView) {\r\n      newMode = selectedView;\r\n    } else {\r\n      newMode = DefaultView;\r\n    }\r\n    if (selectedDate) {\r\n      newDate = selectedDate;\r\n    } else {\r\n      newDate = selectedDate;\r\n    }\r\n    this.props.handleChangeFilter(\r\n      prevMode,\r\n      prevDate,\r\n      newMode,\r\n      newDate,\r\n      searchtext\r\n    );\r\n  };\r\n\r\n  // onContentReady(e) {\r\n  //   const currentHour = new Date().getHours() - 1;\r\n  //   e.component.scrollToTime(currentHour, 30, new Date());\r\n  // }\r\n\r\n  handleSearch = async event => {\r\n    event.persist();\r\n    await this.setState({ searchtext: event.target.value });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        this.handleChange();\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleDialog = () => {\r\n    let { isOpenModal } = this.state;\r\n    isOpenModal = !isOpenModal;\r\n    this.setState({\r\n      isOpenModal,\r\n    });\r\n  };\r\n  handleBlockDialog = async () => {\r\n    await this.setState(prevState => ({\r\n      isOpenBlockModal: !prevState.isOpenBlockModal,\r\n    }));\r\n    await this.setState({ appointmentId: 0 });\r\n  };\r\n  handlePrintDialog = () => {\r\n    let { isOpenPrintModal } = this.state;\r\n    isOpenPrintModal = !isOpenPrintModal;\r\n    this.setState({\r\n      isOpenPrintModal,\r\n    });\r\n  };\r\n\r\n  handleBack = () => {\r\n    this.props.handleBack();\r\n  };\r\n  handleNext = () => {\r\n    this.props.handleNext();\r\n  };\r\n  Snap = async () => {\r\n    await this.setState({ SchedulerHeight: 3000 });\r\n    await sleep(1000); //\r\n    window.scrollTo(0, 0);\r\n    let img = \"\";\r\n    let base64URL = \"\";\r\n\r\n    html2canvas(document.querySelector(\"#Scheduler\"), {\r\n      allowTaint: true,\r\n      useCORS: true,\r\n      logging: false,\r\n      scale: 1,\r\n      removeContainer: true,\r\n    }).then(function (canvas) {\r\n      img = canvas.toDataURL(\"image/png\", 1);\r\n      base64URL = img.replace(\"image/png\", \"image/octet-stream\");\r\n      var byteCharacters = atob(\r\n        img.replace(/^data:image\\/(png|jpeg|jpg);base64,/, \"\")\r\n      );\r\n      var byteNumbers = new Array(byteCharacters.length);\r\n      for (var i = 0; i < byteCharacters.length; i++) {\r\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n      }\r\n      var byteArray = new Uint8Array(byteNumbers);\r\n      var file = new Blob([byteArray], { type: \"image/png\" + \";base64\" });\r\n      var fileURL = URL.createObjectURL(file);\r\n      var a = document.createElement(\"a\");\r\n      a.setAttribute(\"download\", \"myImage.png\");\r\n      a.setAttribute(\"href\", base64URL);\r\n      a.click();\r\n      window.open(fileURL);\r\n    });\r\n    window.scrollTo(0, document.documentElement.scrollHeight);\r\n    await this.setState({ SchedulerHeight: 700 });\r\n  };\r\n  handleTreatmentHistory = () => {\r\n    let { customerId } = this.state;\r\n    if (customerId > 0) {\r\n      this.setState(prevState => ({\r\n        isTreatmentHistoryModal: !prevState.isTreatmentHistoryModal,\r\n        customerNumber: this.state.customerId,\r\n      }));\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select customer\" });\r\n    }\r\n  };\r\n  handleUpcomingAppointment = () => {\r\n    let { customerId } = this.state;\r\n    \r\n    if (customerId > 0) {\r\n      this.setState(prevState => ({\r\n        isUpcomingAppointmentModal: !prevState.isUpcomingAppointmentModal,\r\n        customerNumber: this.state.customerId,\r\n      }));\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select customer\" });\r\n    }\r\n  };\r\n  handleSelectCustomer = async data => {\r\n    await this.setState({\r\n      customerId: data.id,\r\n      custName: data.cust_name,\r\n      custPhone: data.cust_phone1,\r\n      isOpenModalForCustomer: false,\r\n      customerOption: [],\r\n    });\r\n  };\r\n  handleCustomerDialog = () => {\r\n    let { isOpenModalForCustomer } = this.state;\r\n    isOpenModalForCustomer = !isOpenModalForCustomer;\r\n    this.setState({\r\n      isOpenModalForCustomer,\r\n    });\r\n  };\r\n  handleCustomerSearch = async event => {\r\n    await this.setState({ search: event.target.value });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        let { basicApptDetail } = this.props;\r\n        this.search(basicApptDetail);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n  search = basicApptDetail => {\r\n    let { search } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `custappt/?Outlet=${\r\n         \"\"\r\n        }&search=${search}`\r\n      ) \r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          this.setState({ customerOption: data });\r\n        }\r\n      });\r\n  };\r\n\r\n  getHoursFromDate = date => {\r\n    let hour = new Date(date).getHours();\r\n    let minute = new Date(date).getMinutes();\r\n    let hours = hour > 9 ? hour : \"0\" + hour;\r\n    let minutes = minute > 9 ? minute : \"0\" + minute;\r\n    return hours + \":\" + minutes;\r\n  };\r\n  onDragStart = e => {\r\n    if (e.itemData.status === \"Block\") {\r\n      e.cancel = true;\r\n    } else {\r\n      this.getDraggedData(e.itemData.appt_id);\r\n    }\r\n  };\r\n  onDragEnd = async e => {\r\n    await sleep(200); //\r\n    console.log(e.itemData, \"dragenddatawithsleep\");\r\n    let { formFields } = this.state;\r\n    let startTime = this.getHoursFromDate(e.itemData.startDate);\r\n    let endTime = this.getHoursFromDate(e.itemData.endDate);\r\n    let targetStaff = e.itemData.id;\r\n    if (\r\n      formFields[\"start_time\"] !== startTime ||\r\n      formFields[\"emp_no\"] !== targetStaff\r\n    ) {\r\n      formFields[\"appointmentDate\"] = e.itemData.endDate;\r\n      formFields[\"start_time\"] = startTime;\r\n      formFields[\"end_time\"] = endTime;\r\n      formFields[\"emp_no\"] = targetStaff;\r\n      formFields[\"item_text\"] = e.itemData.item_name;\r\n      formFields[\"recur_days\"] = null;\r\n      formFields[\"recur_qty\"] = null;\r\n      await this.setState({ formFields });\r\n      this.handleUpdate();\r\n    }\r\n  };\r\n\r\n  getDraggedData = appt_id => {\r\n    let { formFields } = this.state;\r\n\r\n    this.props.getCommonApi(`appointmentresources/${appt_id}/`).then(key => {\r\n      let { status, data } = key;\r\n      let appt_Date = data.appt_date;\r\n      let date = appt_Date.split(\"/\");\r\n      let finaldate = date[2] + \"-\" + date[1] + \"-\" + date[0];\r\n      if (status === 200) {\r\n        formFields[\"appt_id\"] = appt_id;\r\n        formFields[\"custName\"] = data.cust_name;\r\n        formFields[\"appointmentDate\"] = finaldate;\r\n        formFields[\"bookingStatus\"] = data.booking_status;\r\n        formFields[\"new_remark\"] = data.ori_remark;\r\n        formFields[\"customerName\"] = data.cust_id;\r\n        formFields[\"Source_Codeid\"] = data.source_id;\r\n        formFields[\"Room_Codeid\"] = data.room_id;\r\n        formFields[\"sec_status\"] = data.secondary_status;\r\n        formFields[\"Appt_typeid\"] = data.channel_id;\r\n\r\n        formFields[\"start_time\"] = data ? data.start_time : \"\";\r\n        formFields[\"end_time\"] = data ? data.end_time : \"\";\r\n        formFields[\"Item_Codeid\"] = data.Item_Codeid;\r\n        formFields[\"Item_CodeName\"] = data.item_name;\r\n        formFields[\"emp_no\"] = data.emp_id;\r\n        formFields[\"add_duration\"] = data.add_duration;\r\n        formFields[\"edit_remark\"] = \"\";\r\n        formFields[\"requesttherapist\"] = data.requesttherapist;\r\n        formFields[\"recur_days\"] = data.recur_days;\r\n        formFields[\"recur_qty\"] = data.recur_qty;\r\n        formFields[\"item_text\"] = data.item_name;\r\n        this.setState({ formFields });\r\n      }\r\n    });\r\n  };\r\n\r\n  handleUpdate = () => {\r\n    let { formFields } = this.state;\r\n\r\n    let data = {\r\n      appt_date: dateFormat(new Date(formFields.appointmentDate), \"yyyy-mm-dd\"),\r\n      Room_Codeid: formFields.Room_Codeid,\r\n      appt_status: formFields.bookingStatus,\r\n      sec_status: formFields.sec_status,\r\n      edit_remark: formFields.edit_remark,\r\n      start_time: formFields.start_time,\r\n      end_time: formFields.end_time,\r\n      item_id: formFields.Item_Codeid,\r\n      add_duration: formFields.add_duration,\r\n      emp_id: formFields.emp_no,\r\n      requesttherapist: formFields.requesttherapist,\r\n      item_text: formFields.item_text,\r\n      recur_qty: formFields.recur_qty,\r\n      recur_days: formFields.recur_days,\r\n    };\r\n\r\n    this.props\r\n      .commonPatchApi(`appointmentresources/${formFields.appt_id}/`, data)\r\n      .then(async res => {});\r\n    this.props.getAppointmentWithStaff();\r\n  };\r\n\r\n  onAppSingleClick = e => {\r\n    e.cancel = true;\r\n  };\r\n\r\n  handleGroupbyChange = async ({ target: { value, name } }) => {\r\n    debugger;\r\n    if (value == \"\") {\r\n      value = \"staff\";\r\n    }\r\n    if (value !== this.state.groupBy) {\r\n      this.setState({\r\n        groupBy: value,\r\n      });\r\n      this.props.groupByAppointment(value);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      isOpenModal,\r\n      isOpenBlockModal,\r\n      appointmentId,\r\n      SchedulerHeight,\r\n      isOpenPrintModal,\r\n      groupBy,\r\n      custName,\r\n      isOpenModalForCustomer,\r\n      customerOption,\r\n      search,\r\n      isTreatmentHistoryModal,\r\n      isUpcomingAppointmentModal,\r\n    } = this.state;\r\n    let { filterDate } = this.props;\r\n\r\n    return (\r\n      <div style={{ width: \"100%\", height: \"100%\" }}>\r\n        <React.Fragment>\r\n          <StaffSorting\r\n            isOpenModal={isOpenModal}\r\n            handleDialog={this.handleDialog}\r\n            handleChange={this.handleChange}\r\n            filterDate={filterDate}\r\n          />\r\n          {isOpenBlockModal ? (\r\n            <BlockPopup\r\n              isOpenBlockModal={isOpenBlockModal}\r\n              handleBlockDialog={this.handleBlockDialog}\r\n              handleChange={this.handleChange}\r\n              filterDate={filterDate}\r\n              appointmentId={appointmentId}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {isOpenPrintModal ? (\r\n            <PrintModal\r\n              isOpenPrintModal={isOpenPrintModal}\r\n              handlePrintDialog={this.handlePrintDialog}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          <div className=\"d-flex justify-content-end p-1 m-1\">\r\n            {this.props.meta ? (\r\n              <div className=\"col-2 text-right p-1\">\r\n                {this.props.meta.pagination &&\r\n                this.props.meta.pagination.total_pages > 1 ? (\r\n                  <div className=\"col-12\">\r\n                    <div>\r\n                      {this.props.meta.pagination.total_pages <\r\n                        this.props.meta.pagination.current_page ||\r\n                      this.props.meta.pagination.current_page > 1 ||\r\n                      this.props.meta.pagination.total_pages ==\r\n                        this.props.meta.pagination.current_page ? (\r\n                        <button\r\n                          className=\"cursor-pointer dx-button-content disabled\"\r\n                          onClick={this.handleBack}\r\n                        >\r\n                          <svg\r\n                            width=\"9\"\r\n                            height=\"15\"\r\n                            viewBox=\"0 0 6 10\"\r\n                            fill=\"none\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                          >\r\n                            <path\r\n                              d=\"M5 0.5L1 5L5 9.5\"\r\n                              stroke=\"#888888\"\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                            />\r\n                          </svg>\r\n                        </button>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                      {/* <span className=\"dx-button-staff-content\"> Staff </span> */}\r\n                      {this.props.meta.pagination.total_pages >\r\n                        this.props.meta.pagination.current_page &&\r\n                      this.props.meta.pagination.total_pages !==\r\n                        this.props.meta.pagination.current_page &&\r\n                      this.props.meta.pagination.current_page > 0 ? (\r\n                        <button\r\n                          className=\"cursor-pointer dx-button-content\"\r\n                          onClick={this.handleNext}\r\n                        >\r\n                          <svg\r\n                            width=\"9\"\r\n                            height=\"15\"\r\n                            viewBox=\"0 0 6 10\"\r\n                            fill=\"none\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                          >\r\n                            <path\r\n                              d=\"M0.5 9.5L4.5 5L0.5 0.5\"\r\n                              stroke=\"#888888\"\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                            />\r\n                          </svg>\r\n                        </button>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <div className=\"col-2 w-100\">\r\n              \r\n              {/* <NormalButton\r\n                buttonClass={\"p-0\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label={`Group by Department`}\r\n                outline={false}\r\n                onClick={() => this.handleGroupbyclick(`category`)}\r\n              /> */}\r\n            </div>\r\n            {/* <div className=\"col-2\">\r\n              <NormalButton\r\n                buttonClass={\"p-0\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label={`Group by Room`}\r\n                outline={false}\r\n                onClick={() => this.handleGroupbyclick(`room`)}\r\n              />\r\n            </div> */}\r\n            <div className=\"col-2\">\r\n  \r\n                <NormalInput\r\n                  placeholder=\"Select customer\"\r\n                  value={custName}\r\n                  onClick={() => this.setState({ isOpenModalForCustomer: true })}\r\n                  name=\"searchtext\"\r\n                />\r\n\r\n            </div>\r\n            <div className=\"col-2\">\r\n            <NormalSelect\r\n                options={this.state.groupByList}\r\n                placeholderrequired={`false`}\r\n                value={this.state.groupBy}\r\n                name=\"groupBy\"\r\n                onChange={this.handleGroupbyChange}\r\n                className=\"status py-1\"\r\n              />\r\n               </div>\r\n            <div className=\"col-2\">\r\n              <NormalButton\r\n                buttonClass={\"treatment\"}\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 m-0 p-0\"\r\n                label=\"Upcoming Appointment\"\r\n                onClick={this.handleUpcomingAppointment}\r\n              />\r\n            </div>\r\n            <div className=\"col-2\">\r\n              <NormalButton\r\n                buttonClass={\"treatment\"}\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Treatment History\"\r\n                onClick={this.handleTreatmentHistory}\r\n              />\r\n            </div>\r\n      \r\n            <div className=\"col-.5\">\r\n              <NormalButton\r\n                buttonClass={\"p-0\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label={`Screenshot`}\r\n                outline={false}\r\n                onClick={this.Snap}\r\n              />\r\n            </div>\r\n            <div className=\"col-1\">\r\n              <NormalButton\r\n                buttonClass={\"p-0\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label={`Print`}\r\n                outline={false}\r\n                onClick={() => {\r\n                  this.setState({ isOpenPrintModal: true });\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"col-1\">\r\n              <NormalButton\r\n                buttonClass={\"p-0\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label={`Sort`}\r\n                outline={false}\r\n                onClick={() => {\r\n                  this.setState({ isOpenModal: true });\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"col-1\">\r\n              <NormalButton\r\n                buttonClass={\"p-0\"}\r\n                mainbg={true}\r\n                className=\"fs-15 confirm\"\r\n                label={`Block`}\r\n                outline={false}\r\n                onClick={() => {\r\n                  this.setState({ isOpenBlockModal: true });\r\n                }}\r\n              />\r\n            </div>\r\n            \r\n          </div>\r\n          {isTreatmentHistoryModal ? (\r\n          <TreatmentHistory\r\n            isTreatmentHistoryModal={isTreatmentHistoryModal}\r\n            handleTreatmentHistory={this.handleTreatmentHistory}\r\n            customerNumber={this.state.customerNumber}\r\n            custName={this.state.custName}\r\n            custPhone={this.state.custPhone}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {isUpcomingAppointmentModal ? (\r\n          <UpcomingAppointment\r\n            isUpcomingAppointmentModal={isUpcomingAppointmentModal}\r\n            handleUpcomingAppointment={this.handleUpcomingAppointment}\r\n            customerNumber={this.state.customerNumber}\r\n            custName={this.state.custName}\r\n            custPhone={this.state.custPhone}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n          <NormalModal\r\n          className={\"multiple-appointment select-category\"}\r\n          style={{ minWidth: \"800px\" }}\r\n          modal={isOpenModalForCustomer}\r\n          handleModal={this.handleCustomerDialog}\r\n        >\r\n          <img\r\n            onClick={this.handleCustomerDialog}\r\n            className=\"close\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n          <div className=\"row\">\r\n            {\" \"}\r\n            <h5 className=\"text-center\">Select Customer</h5>\r\n          </div>\r\n          <div className=\"row mt-2 mb-5 mx-3\">\r\n            <div className=\"col-1 pl-0\">Search</div>\r\n            <div className=\"col-5\">\r\n              <input\r\n                name=\"search\"\r\n                onChange={this.handleCustomerSearch}\r\n                className=\"search m-0 p-0 px-3\"\r\n              />\r\n            </div>\r\n            <div className=\"col-3\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2 p-0\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label=\"Search\"\r\n                outline={false}\r\n                onClick={() => this.search(search)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"row mt-4 table-header w-100 m-0\">\r\n              <div className=\"col-2\">Name</div>\r\n              <div className=\"col-2\">Phone</div>\r\n              <div className=\"col-3\">Cust Code</div>\r\n              <div className=\"col-5\">Email</div>\r\n            </div>\r\n            <div className=\"response-table w-100\">\r\n              {customerOption.length > 0 ? (\r\n                customerOption.map((item, index) => {\r\n                  return (\r\n                    <div\r\n                      className=\"row m-0 table-body w-100\"\r\n                      onClick={() => this.handleSelectCustomer(item)}\r\n                      key={index}\r\n                    >\r\n                      <div className=\"col-2\">{item.cust_name}</div>\r\n                      <div className=\"col-2\">{item.cust_phone1}</div>\r\n                      <div className=\"col-3\">{item.cust_code}</div>\r\n                      <div className=\"col-5\">{item.cust_email}</div>\r\n                    </div>\r\n                  );\r\n                })\r\n              ) : (\r\n                <div className=\"text-center w-100\">No Data are available</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </NormalModal>\r\n\r\n          <Scheduler\r\n            id=\"Scheduler\"\r\n            height={SchedulerHeight}\r\n            width={1500}\r\n            dataSource={this.props.event}\r\n            views={this.props.staffList ? views : Dayview}\r\n            onContentReady={this.props.event ? this.onContentReady : \"\"}\r\n            defaultCurrentView=\"day\"\r\n            groups={groups}\r\n            startDayHour={8}\r\n            endDayHour={21}\r\n            firstDayOfWeek={0}\r\n            showAllDayPanel={false}\r\n            crossScrollingEnabled={true}\r\n            cellDuration={15}\r\n            resourceCellComponent={ResourceCell}\r\n            editing={{\r\n              allowDeleting: false,\r\n              allowResizing: false,\r\n              allowUpdating: true,\r\n              allowDragging: true,\r\n              allowTaint: true,\r\n            }}\r\n            onAppointmentClick={this.onAppSingleClick}\r\n            onCellClick={e => this.onEmptyClick(e)}\r\n            onAppointmentDblClick={e => this.onAppointmentClick(e)}\r\n            //dateSerializationFormat=\"yyyy-MM-ddTHH:mm:ssZ\"\r\n            appointmentComponent={AppointmentCell}\r\n            onCurrentViewChange={this.handleViewChange}\r\n            onCurrentDateChange={this.handleDateChange}\r\n            appointmentDragging={{\r\n              autoScroll: true,\r\n            }}\r\n          >\r\n            <AppointmentDragging\r\n              group={draggingGroupName}\r\n              onDragStart={e => this.onDragStart(e)}\r\n              onDragEnd={e => this.onDragEnd(e)}\r\n            />\r\n            <View type=\"day\" label=\"day\" />\r\n            <View type=\"week\" label=\"week\" />\r\n            <View type=\"month\" label=\"month\" />\r\n            <Resource\r\n              dataSource={this.props.staffList}\r\n              fieldExpr=\"id\"\r\n              useColorAsDefault={true}\r\n              allowMultiple={false}\r\n            />\r\n          </Scheduler>\r\n        </React.Fragment>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const NewSchedulerModal = connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(NewSchedulerModalClass);\r\n"]},"metadata":{},"sourceType":"module"}