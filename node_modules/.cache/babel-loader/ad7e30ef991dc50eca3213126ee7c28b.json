{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NormalButton,NormalSelect,NormalModal,NormalInput}from'component/common';import{InputSearch,TableWrapper}from'component/common';import Brush from'assets/images/make-up-brush.png';import filter from\"assets/images/filter.png\";import CartImg from\"assets/images/shopping-cart.png\";import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import{getCommonApi,commonCreateApi,updateForm}from'redux/actions/common';import closeIcon from'assets/images/close.png';import{dateFormat}from'service/helperFunctions';import _ from'lodash';import{history}from'helpers';export var ItemDetailClass=/*#__PURE__*/function(_Component){_inherits(ItemDetailClass,_Component);var _super=_createSuper(ItemDetailClass);function ItemDetailClass(){var _this;_classCallCheck(this,ItemDetailClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={servicesDetail:{},isOpenModal:false,branchList:[],customerDetail:{branchId:\"\",cust_noid:\"\"},customerList:[]};_this.componentDidMount=function(){console.log(_this.props,\"jhksdfkjsdhfks\");_this.getDetail();var _this$state=_this.state,productCard=_this$state.productCard,branchList=_this$state.branchList;_this.props.getCommonApi(\"treatment/Outlet/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;branchList.push({value:value.id,label:value.itemsite_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({branchList:branchList});// console.log(brachList, \"jhksdfkjsdhfks\")\n}});};_this.getDetail=function(){var _this$state2=_this.state,productCard=_this$state2.productCard,branchList=_this$state2.branchList;var _this$props=_this.props,menuId=_this$props.menuId,id=_this$props.id,api=_this$props.api;_this.props.getCommonApi(\"\".concat(api,\"/\").concat(id,\"/\")).then(function(key){var status=key.status,data=key.data;if(status===200){_this.setState({servicesDetail:data});}});};_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,_this$state3,customerDetail,customerList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;_this$state3=_this.state,customerDetail=_this$state3.customerDetail,customerList=_this$state3.customerList;console.log(\"uihwkjrwkej\",name,value);customerDetail[name]=value;_context.next=6;return _this.setState({customerDetail:customerDetail});case 6:if(name===\"branchId\"){_this.props.getCommonApi(\"custappt/?Outlet=\".concat(value)).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _value=_step2.value;customerList.push({value:_value.id,label:_value.cust_name+\" | \"+_value.cust_phone1+\" | \"+_value.cust_code});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({customerList:customerList});}});}// this.props.updateForm('selected_customer', customerDetail)\ncase 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleCreateCart=function(){var _this$state4=_this.state,productCard=_this$state4.productCard,customerDetail=_this$state4.customerDetail,servicesDetail=_this$state4.servicesDetail;var selected_cstomer=_this.props.selected_cstomer;console.log(servicesDetail,customerDetail,selected_cstomer,\"sfdgsdfhshgf\");var payload={cust_noid:selected_cstomer.cust_noid,cart_date:dateFormat(new Date(),\"yyyy-mm-dd\"),// lineno : 1,\nitemcodeid:selected_cstomer.branchId,quantity:customerDetail.quantity,price:servicesDetail.item_price};_this.props.getCommonApi(\"itemcart/Check/?sitecodeid=\".concat(selected_cstomer.branchId,\"&cart_date=\").concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(selected_cstomer.cust_noid)).then(function(key){var status=key.status,data=key.data,error=key.error;// if (status === 200) {\nconsole.log(\"asdfasdfasaff\",data,payload);if(data.length>0){console.log(\"asdfasdfasaff == if\",data,payload);_this.props.commonCreateApi(\"itemcart/?sitecodeid=\".concat(selected_cstomer.branchId,\"&cart_id=\").concat(data[0].cart_id),payload).then(function(key){var status=key.status,data=key.data;if(status===201){_this.setState({isOpenModal:false});}});}else{console.log(\"asdfasdfasaff == else\",data,payload);_this.props.commonCreateApi(\"itemcart/?sitecodeid=\".concat(selected_cstomer.branchId),payload).then(function(key){var status=key.status,data=key.data;if(status===201){_this.setState({isOpenModal:false});history.push('/admin/catalog');}});}// }\n});};_this.handleSearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;var data={search:searchString};// this.queryHandler(data)\nvar _this$state5=_this.state,customerList=_this$state5.customerList,customerDetail=_this$state5.customerDetail;_this.props.getCommonApi(\"custappt/?Outlet=\".concat(customerDetail.branchId,\"&search=\").concat(searchString)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerList:data});}});},500);}_this.debouncedFn();};_this.handleCloseDialog=function(){_this.setState({isOpenModal:false});};_this.handleSelectCustomer=function(data){var _this$state6=_this.state,customerList=_this$state6.customerList,customerDetail=_this$state6.customerDetail,servicesDetail=_this$state6.servicesDetail;customerDetail['cust_noid']=data.id;customerDetail['cust_name']=data.cust_name;_this.setState({customerDetail:customerDetail});// this.props.updateForm('selected_customer', customerDetail)\n};_this.handleAddCart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data,price){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.props.updateForm('selectedCart',data);case 2:// setTimeout(() => {\n// history.push(\"/admin/cart\");\n_this.props.handleAddCart(data,price);// }, 5000); \ncase 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();return _this;}_createClass(ItemDetailClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state7=this.state,servicesDetail=_this$state7.servicesDetail,isOpenModal=_this$state7.isOpenModal,branchList=_this$state7.branchList,customerList=_this$state7.customerList,customerDetail=_this$state7.customerDetail;var selected_cstomer=this.props.selected_cstomer;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"product-detail p-5\"},servicesDetail?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"detail-view text-center\"},/*#__PURE__*/React.createElement(\"img\",{width:\"230\",src:servicesDetail.Stock_PIC,alt:\"\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product-left\"},/*#__PURE__*/React.createElement(\"p\",{className:\"product-name fs-18\"},servicesDetail.item_desc),/*#__PURE__*/React.createElement(\"p\",{className:\"fs-14 my-2\"},servicesDetail.item_name),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"list-price fs-14\"},\"Price:\",/*#__PURE__*/React.createElement(\"span\",{className:\"fs-16\"},\" $ \",servicesDetail.item_price))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 mt-5\",label:\"Add to Cart\",onClick:function onClick(){return _this2.handleAddCart(servicesDetail,servicesDetail.item_price);}})))):\"\"));}}]);return ItemDetailClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{// customerDetail: state.appointment.customerDetail,\nselected_cstomer:state.common.selected_cstomer};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,commonCreateApi:commonCreateApi,updateForm:updateForm},dispatch);};export var ItemDetail=connect(mapStateToProps,mapDispatchToProps)(ItemDetailClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Catalog/services/itemsDetail.js"],"names":["React","Component","NormalButton","NormalSelect","NormalModal","NormalInput","InputSearch","TableWrapper","Brush","filter","CartImg","connect","bindActionCreators","getCommonApi","commonCreateApi","updateForm","closeIcon","dateFormat","_","history","ItemDetailClass","state","servicesDetail","isOpenModal","branchList","customerDetail","branchId","cust_noid","customerList","componentDidMount","console","log","props","getDetail","productCard","then","key","status","data","value","push","id","label","itemsite_desc","setState","menuId","api","handleChange","target","name","cust_name","cust_phone1","cust_code","handleCreateCart","selected_cstomer","payload","cart_date","Date","itemcodeid","quantity","price","item_price","error","length","cart_id","handleSearch","event","persist","debouncedFn","debounce","searchString","search","handleCloseDialog","handleSelectCustomer","handleAddCart","Stock_PIC","item_desc","item_name","mapStateToProps","common","mapDispatchToProps","dispatch","ItemDetail"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { NormalButton, NormalSelect, NormalModal, NormalInput } from 'component/common';\r\nimport { InputSearch, TableWrapper } from 'component/common';\r\nimport Brush from 'assets/images/make-up-brush.png'\r\nimport filter from \"assets/images/filter.png\";\r\nimport CartImg from \"assets/images/shopping-cart.png\";\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, commonCreateApi, updateForm } from 'redux/actions/common';\r\nimport closeIcon from 'assets/images/close.png';\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport _ from 'lodash';\r\nimport { history } from 'helpers';\r\n\r\nexport class ItemDetailClass extends Component {\r\n    state = {\r\n        servicesDetail: {\r\n\r\n        },\r\n        isOpenModal: false,\r\n        branchList: [],\r\n        customerDetail: {\r\n            branchId: \"\",\r\n            cust_noid: \"\"\r\n        },\r\n        customerList: []\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        console.log(this.props, \"jhksdfkjsdhfks\")\r\n        this.getDetail();\r\n        let { productCard, branchList } = this.state;\r\n\r\n        this.props.getCommonApi(`treatment/Outlet/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    branchList.push({ value: value.id, label: value.itemsite_desc })\r\n                }\r\n                this.setState({ branchList })\r\n                // console.log(brachList, \"jhksdfkjsdhfks\")\r\n            }\r\n        })\r\n    }\r\n\r\n    getDetail = () => {\r\n        let { productCard, branchList } = this.state;\r\n        let { menuId, id, api } = this.props;\r\n        this.props.getCommonApi(`${api}/${id}/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n\r\n                this.setState({ servicesDetail: data })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleChange = async ({ target: { value, name } }) => {\r\n        let { customerDetail, customerList } = this.state;\r\n        console.log(\"uihwkjrwkej\", name, value)\r\n        customerDetail[name] = value;\r\n        await this.setState({\r\n            customerDetail,\r\n        });\r\n        if (name === \"branchId\") {\r\n            this.props.getCommonApi(`custappt/?Outlet=${value}`).then((key) => {\r\n                let { status, data } = key;\r\n                if (status === 200) {\r\n                    for (let value of data) {\r\n                        customerList.push({ value: value.id, label: value.cust_name + \" | \" + value.cust_phone1 + \" | \" + value.cust_code })\r\n                    }\r\n                    this.setState({ customerList })\r\n                }\r\n            })\r\n        }\r\n        // this.props.updateForm('selected_customer', customerDetail)\r\n    }\r\n\r\n    handleCreateCart = () => {\r\n        let { productCard, customerDetail, servicesDetail } = this.state;\r\n        let { selected_cstomer } = this.props;\r\n        console.log(servicesDetail, customerDetail, selected_cstomer, \"sfdgsdfhshgf\")\r\n        let payload = {\r\n            cust_noid: selected_cstomer.cust_noid,\r\n            cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n            // lineno : 1,\r\n            itemcodeid: selected_cstomer.branchId,\r\n            quantity: customerDetail.quantity,\r\n            price: servicesDetail.item_price\r\n        }\r\n        this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}&cust_noid=${selected_cstomer.cust_noid}`).then((key) => {\r\n            let { status, data, error } = key;\r\n            // if (status === 200) {\r\n            console.log(\"asdfasdfasaff\", data, payload)\r\n            if (data.length > 0) {\r\n                console.log(\"asdfasdfasaff == if\", data, payload)\r\n                this.props.commonCreateApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_id=${data[0].cart_id}`, payload).then((key) => {\r\n                    let { status, data } = key;\r\n                    if (status === 201) {\r\n                        this.setState({ isOpenModal: false })\r\n                    }\r\n                })\r\n            } else {\r\n                console.log(\"asdfasdfasaff == else\", data, payload)\r\n                this.props.commonCreateApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}`, payload).then((key) => {\r\n                    let { status, data } = key;\r\n                    if (status === 201) {\r\n                        this.setState({ isOpenModal: false })\r\n                        history.push('/admin/catalog')\r\n                    }\r\n                })\r\n            }\r\n\r\n            // }\r\n        })\r\n\r\n\r\n    }\r\n\r\n    handleSearch = (event) => {\r\n        event.persist();\r\n\r\n        if (!this.debouncedFn) {\r\n            this.debouncedFn = _.debounce(() => {\r\n                let searchString = event.target.value;\r\n                let data = { search: searchString }\r\n                // this.queryHandler(data)\r\n                let { customerList, customerDetail } = this.state;\r\n                this.props.getCommonApi(`custappt/?Outlet=${customerDetail.branchId}&search=${searchString}`).then((key) => {\r\n\r\n                    let { status, data } = key;\r\n                    if (status === 200) {\r\n                        // for (let value of data) {\r\n                        //     customerList.push({ value: value.id, label: value.emp_name })\r\n                        // }\r\n                        this.setState({ customerList: data })\r\n                    }\r\n                })\r\n            }, 500);\r\n        }\r\n        this.debouncedFn();\r\n    }\r\n\r\n    handleCloseDialog = () => {\r\n        this.setState({\r\n            isOpenModal: false,\r\n        })\r\n    }\r\n\r\n    handleSelectCustomer = (data) => {\r\n        let { customerList, customerDetail, servicesDetail } = this.state;\r\n        customerDetail['cust_noid'] = data.id;\r\n        customerDetail['cust_name'] = data.cust_name;\r\n        this.setState({ customerDetail })\r\n        // this.props.updateForm('selected_customer', customerDetail)\r\n    }\r\n\r\n    handleAddCart = async (data, price) => {\r\n\r\n        await this.props.updateForm('selectedCart', data)\r\n        // setTimeout(() => {\r\n        // history.push(\"/admin/cart\");\r\n        this.props.handleAddCart(data, price);\r\n        // }, 5000); \r\n    }\r\n\r\n    render() {\r\n        let { servicesDetail, isOpenModal, branchList, customerList, customerDetail } = this.state;\r\n        let { selected_cstomer } = this.props;\r\n        return (\r\n            <>\r\n                <div className=\"product-detail p-5\">\r\n                    {servicesDetail ?\r\n                        <div className=\"row\">\r\n\r\n                            <div className=\"col-md-6\">\r\n                                <div className=\"detail-view text-center\">\r\n                                    <img width=\"230\" src={servicesDetail.Stock_PIC} alt=\"\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-5\">\r\n                                <div className=\"product-left\">\r\n                                    <p className=\"product-name fs-18\">{servicesDetail.item_desc}</p>\r\n                                    <p className=\"fs-14 my-2\">{servicesDetail.item_name}</p>\r\n\r\n                                    <div>\r\n                                        <p className=\"list-price fs-14\">Price:<span className=\"fs-16\"> $ {servicesDetail.item_price}</span></p>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-12\">\r\n                                <div>\r\n                                    <NormalButton\r\n                                        mainbg={true}\r\n                                        className=\"col-12 fs-15 mt-5\"\r\n                                        label=\"Add to Cart\"\r\n                                        onClick={() => this.handleAddCart(servicesDetail, servicesDetail.item_price)}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div> : \"\"}\r\n                </div>\r\n\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    // customerDetail: state.appointment.customerDetail,\r\n    selected_cstomer: state.common.selected_cstomer,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        // getCustomer,\r\n        getCommonApi,\r\n        commonCreateApi,\r\n        updateForm\r\n    }, dispatch)\r\n}\r\n\r\nexport const ItemDetail = connect(mapStateToProps, mapDispatchToProps)(ItemDetailClass)"]},"metadata":{},"sourceType":"module"}