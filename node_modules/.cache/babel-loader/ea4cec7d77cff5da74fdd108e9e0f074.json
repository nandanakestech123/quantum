{"ast":null,"code":"/**\r\n * DevExtreme (ui/date_box/ui.date_box.mask.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _math = require(\"../../core/utils/math\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _uiDate_boxMask = require(\"./ui.date_box.mask.parts\");\n\nvar _date = _interopRequireDefault(require(\"../../localization/date\"));\n\nvar _date2 = require(\"../../localization/ldml/date.parser\");\n\nvar _date3 = require(\"../../localization/ldml/date.format\");\n\nvar _uiDate_box = _interopRequireDefault(require(\"./ui.date_box.base\"));\n\nvar _number = _interopRequireDefault(require(\"../../localization/number\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar MASK_EVENT_NAMESPACE = \"dateBoxMask\";\nvar FORWARD = 1;\nvar BACKWARD = -1;\n\nvar DateBoxMask = _uiDate_box.default.inherit({\n  _supportedKeys: function _supportedKeys(e) {\n    var _this = this;\n\n    var originalHandlers = this.callBase(e);\n\n    var callOriginalHandler = function callOriginalHandler(e) {\n      var originalHandler = originalHandlers[(0, _index.normalizeKeyName)(e)];\n      return originalHandler && originalHandler.apply(_this, [e]);\n    };\n\n    var applyHandler = function applyHandler(e, maskHandler) {\n      if (_this._shouldUseOriginalHandler(e)) {\n        return callOriginalHandler.apply(_this, [e]);\n      } else {\n        return maskHandler.apply(_this, [e]);\n      }\n    };\n\n    return (0, _extend.extend)({}, originalHandlers, {\n      del: function del(e) {\n        return applyHandler(e, function (event) {\n          _this._revertPart(FORWARD);\n\n          _this._isAllSelected() || event.preventDefault();\n        });\n      },\n      backspace: function backspace(e) {\n        return applyHandler(e, function (event) {\n          _this._revertPart(BACKWARD);\n\n          _this._isAllSelected() || event.preventDefault();\n        });\n      },\n      home: function home(e) {\n        return applyHandler(e, function (event) {\n          _this._selectFirstPart();\n\n          event.preventDefault();\n        });\n      },\n      end: function end(e) {\n        return applyHandler(e, function (event) {\n          _this._selectLastPart();\n\n          event.preventDefault();\n        });\n      },\n      escape: function escape(e) {\n        return applyHandler(e, function (event) {\n          _this._revertChanges(event);\n        });\n      },\n      enter: function enter(e) {\n        return applyHandler(e, function (event) {\n          _this._enterHandler(event);\n        });\n      },\n      leftArrow: function leftArrow(e) {\n        return applyHandler(e, function (event) {\n          _this._selectNextPart(BACKWARD);\n\n          event.preventDefault();\n        });\n      },\n      rightArrow: function rightArrow(e) {\n        return applyHandler(e, function (event) {\n          _this._selectNextPart(FORWARD);\n\n          event.preventDefault();\n        });\n      },\n      upArrow: function upArrow(e) {\n        return applyHandler(e, function (event) {\n          _this._upDownArrowHandler(FORWARD);\n\n          event.preventDefault();\n        });\n      },\n      downArrow: function downArrow(e) {\n        return applyHandler(e, function (event) {\n          _this._upDownArrowHandler(BACKWARD);\n\n          event.preventDefault();\n        });\n      }\n    });\n  },\n  _shouldUseOriginalHandler: function _shouldUseOriginalHandler(e) {\n    var keysToHandleByMask = [\"backspace\", \"del\"];\n    var isNotDeletingInCalendar = this.option(\"opened\") && e && keysToHandleByMask.indexOf((0, _index.normalizeKeyName)(e)) === -1;\n    return !this._useMaskBehavior() || isNotDeletingInCalendar || e && e.altKey;\n  },\n  _upDownArrowHandler: function _upDownArrowHandler(step) {\n    this._setNewDateIfEmpty();\n\n    var originalValue = this._getActivePartValue(this._initialMaskValue);\n\n    var currentValue = this._getActivePartValue();\n\n    var delta = currentValue - originalValue;\n\n    this._loadMaskValue(this._initialMaskValue);\n\n    this._partIncrease(delta + step, true);\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      useMaskBehavior: false,\n      emptyDateValue: new Date(2e3, 0, 1, 0, 0, 0)\n    });\n  },\n  _isSingleCharKey: function _isSingleCharKey(e) {\n    var key = e.originalEvent.data || e.originalEvent.key;\n    return \"string\" === typeof key && 1 === key.length && !e.ctrl && !e.alt;\n  },\n  _isSingleDigitKey: function _isSingleDigitKey(e) {\n    var _e$originalEvent;\n\n    var data = null === (_e$originalEvent = e.originalEvent) || void 0 === _e$originalEvent ? void 0 : _e$originalEvent.data;\n    return 1 === (null === data || void 0 === data ? void 0 : data.length) && parseInt(data, 10);\n  },\n  _useBeforeInputEvent: function _useBeforeInputEvent() {\n    var device = _devices.default.real();\n\n    return device.android && device.version[0] > 4;\n  },\n  _keyboardHandler: function _keyboardHandler(e) {\n    var _this2 = this;\n\n    var key = e.originalEvent.key;\n    var result = this.callBase(e);\n\n    if (!this._useMaskBehavior() || this._useBeforeInputEvent()) {\n      return result;\n    }\n\n    if (_browser.default.chrome && \"Process\" === e.key && 0 === e.code.indexOf(\"Digit\")) {\n      key = e.code.replace(\"Digit\", \"\");\n\n      this._processInputKey(key);\n\n      this._maskInputHandler = function () {\n        _this2._renderSelectedPart();\n      };\n    } else {\n      if (this._isSingleCharKey(e)) {\n        this._processInputKey(key);\n\n        e.originalEvent.preventDefault();\n      }\n    }\n\n    return result;\n  },\n  _maskBeforeInputHandler: function _maskBeforeInputHandler(e) {\n    var _this3 = this;\n\n    this._maskInputHandler = null;\n    var inputType = e.originalEvent.inputType;\n\n    if (\"insertCompositionText\" === inputType) {\n      this._maskInputHandler = function () {\n        _this3._renderSelectedPart();\n      };\n    }\n\n    var isBackwardDeletion = \"deleteContentBackward\" === inputType;\n    var isForwardDeletion = \"deleteContentForward\" === inputType;\n\n    if (isBackwardDeletion || isForwardDeletion) {\n      var direction = isBackwardDeletion ? BACKWARD : FORWARD;\n\n      this._maskInputHandler = function () {\n        _this3._revertPart();\n\n        _this3._selectNextPart(direction);\n      };\n    }\n\n    if (!this._useMaskBehavior() || !this._isSingleCharKey(e)) {\n      return;\n    }\n\n    var key = e.originalEvent.data;\n\n    this._processInputKey(key);\n\n    e.preventDefault();\n    return true;\n  },\n  _keyPressHandler: function _keyPressHandler(e) {\n    var event = e.originalEvent;\n\n    if (\"insertCompositionText\" === (null === event || void 0 === event ? void 0 : event.inputType) && this._isSingleDigitKey(e)) {\n      this._processInputKey(event.data);\n\n      this._renderDisplayText(this._getDisplayedText(this._maskValue));\n\n      this._selectNextPart();\n    }\n\n    this.callBase(e);\n\n    if (this._maskInputHandler) {\n      this._maskInputHandler();\n\n      this._maskInputHandler = null;\n    }\n  },\n  _processInputKey: function _processInputKey(key) {\n    if (this._isAllSelected()) {\n      this._activePartIndex = 0;\n    }\n\n    this._setNewDateIfEmpty();\n\n    if (isNaN(parseInt(key))) {\n      this._searchString(key);\n    } else {\n      this._searchNumber(key);\n    }\n  },\n  _isAllSelected: function _isAllSelected() {\n    var caret = this._caret();\n\n    return caret.end - caret.start === this.option(\"text\").length;\n  },\n  _getFormatPattern: function _getFormatPattern() {\n    if (this._formatPattern) {\n      return this._formatPattern;\n    }\n\n    var format = this._strategy.getDisplayFormat(this.option(\"displayFormat\"));\n\n    var isLDMLPattern = (0, _type.isString)(format) && !_date.default._getPatternByFormat(format);\n\n    if (isLDMLPattern) {\n      this._formatPattern = format;\n    } else {\n      this._formatPattern = (0, _date3.getFormat)(function (value) {\n        return _date.default.format(value, format);\n      });\n    }\n\n    return this._formatPattern;\n  },\n  _setNewDateIfEmpty: function _setNewDateIfEmpty() {\n    if (!this._maskValue) {\n      var value = \"time\" === this.option(\"type\") ? new Date(null) : new Date();\n      this._maskValue = value;\n      this._initialMaskValue = value;\n\n      this._renderDateParts();\n    }\n  },\n  _partLimitsReached: function _partLimitsReached(max) {\n    var maxLimitLength = String(max).length;\n\n    var formatLength = this._getActivePartProp(\"pattern\").length;\n\n    var isShortFormat = 1 === formatLength;\n    var maxSearchLength = isShortFormat ? maxLimitLength : Math.min(formatLength, maxLimitLength);\n    var isLengthExceeded = this._searchValue.length === maxSearchLength;\n    var isValueOverflowed = parseInt(this._searchValue + \"0\") > max;\n    return isLengthExceeded || isValueOverflowed;\n  },\n  _searchNumber: function _searchNumber(char) {\n    var _this$_getActivePartL = this._getActivePartLimits(),\n        max = _this$_getActivePartL.max;\n\n    var maxLimitLength = String(max).length;\n    this._searchValue = (this._searchValue + char).substr(-maxLimitLength);\n\n    if (isNaN(this._searchValue)) {\n      this._searchValue = char;\n    }\n\n    this._setActivePartValue(this._searchValue);\n\n    if (this._partLimitsReached(max)) {\n      this._selectNextPart(FORWARD);\n    }\n  },\n  _searchString: function _searchString(char) {\n    if (!isNaN(parseInt(this._getActivePartProp(\"text\")))) {\n      return;\n    }\n\n    var limits = this._getActivePartProp(\"limits\")(this._maskValue);\n\n    var startString = this._searchValue + char.toLowerCase();\n    var endLimit = limits.max - limits.min;\n\n    for (var i = 0; i <= endLimit; i++) {\n      this._loadMaskValue(this._initialMaskValue);\n\n      this._partIncrease(i + 1);\n\n      if (0 === this._getActivePartProp(\"text\").toLowerCase().indexOf(startString)) {\n        this._searchValue = startString;\n        return;\n      }\n    }\n\n    this._setNewDateIfEmpty();\n\n    if (this._searchValue) {\n      this._clearSearchValue();\n\n      this._searchString(char);\n    }\n  },\n  _clearSearchValue: function _clearSearchValue() {\n    this._searchValue = \"\";\n  },\n  _revertPart: function _revertPart(direction) {\n    if (!this._isAllSelected()) {\n      var actual = this._getActivePartValue(this.option(\"emptyDateValue\"));\n\n      this._setActivePartValue(actual);\n\n      this._selectNextPart(direction);\n    }\n\n    this._clearSearchValue();\n  },\n  _useMaskBehavior: function _useMaskBehavior() {\n    return this.option(\"useMaskBehavior\") && \"text\" === this.option(\"mode\");\n  },\n  _prepareRegExpInfo: function _prepareRegExpInfo() {\n    this._regExpInfo = (0, _date2.getRegExpInfo)(this._getFormatPattern(), _date.default);\n    var regExp = this._regExpInfo.regexp;\n    var flags = regExp.flags;\n\n    var convertedRegExp = _number.default.convertDigits(this._regExpInfo.regexp.source, false);\n\n    this._regExpInfo.regexp = RegExp(convertedRegExp, flags);\n  },\n  _initMaskState: function _initMaskState() {\n    this._activePartIndex = 0;\n    this._formatPattern = null;\n\n    this._prepareRegExpInfo();\n\n    this._loadMaskValue();\n  },\n  _renderMask: function _renderMask() {\n    this.callBase();\n\n    this._detachMaskEvents();\n\n    this._clearMaskState();\n\n    if (this._useMaskBehavior()) {\n      this._attachMaskEvents();\n\n      this._initMaskState();\n\n      this._renderDateParts();\n    }\n  },\n  _renderDateParts: function _renderDateParts() {\n    if (!this._useMaskBehavior()) {\n      return;\n    }\n\n    var text = this.option(\"text\") || this._getDisplayedText(this._maskValue);\n\n    if (text) {\n      this._dateParts = (0, _uiDate_boxMask.renderDateParts)(text, this._regExpInfo);\n      this._isFocused() && this._selectNextPart();\n    }\n  },\n  _detachMaskEvents: function _detachMaskEvents() {\n    _events_engine.default.off(this._input(), \".\" + MASK_EVENT_NAMESPACE);\n  },\n  _attachMaskEvents: function _attachMaskEvents() {\n    var _this4 = this;\n\n    _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"dxclick\", MASK_EVENT_NAMESPACE), this._maskClickHandler.bind(this));\n\n    _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"paste\", MASK_EVENT_NAMESPACE), this._maskPasteHandler.bind(this));\n\n    _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"drop\", MASK_EVENT_NAMESPACE), function () {\n      _this4._renderSelectedPart();\n    });\n\n    _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"compositionend\", MASK_EVENT_NAMESPACE), this._maskCompositionEndHandler.bind(this));\n\n    if (this._useBeforeInputEvent()) {\n      _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"beforeinput\", MASK_EVENT_NAMESPACE), this._maskBeforeInputHandler.bind(this));\n    }\n  },\n  _renderSelectedPart: function _renderSelectedPart() {\n    this._renderDisplayText(this._getDisplayedText(this._maskValue));\n\n    this._selectNextPart();\n  },\n  _selectLastPart: function _selectLastPart() {\n    if (this.option(\"text\")) {\n      this._activePartIndex = this._dateParts.length;\n\n      this._selectNextPart(BACKWARD);\n    }\n  },\n  _selectFirstPart: function _selectFirstPart() {\n    if (this.option(\"text\")) {\n      this._activePartIndex = -1;\n\n      this._selectNextPart(FORWARD);\n    }\n  },\n  _onMouseWheel: function _onMouseWheel(e) {\n    if (this._useMaskBehavior()) {\n      this._partIncrease(e.delta > 0 ? FORWARD : BACKWARD, e);\n    }\n  },\n  _selectNextPart: function _selectNextPart() {\n    var step = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;\n\n    if (!this.option(\"text\") || this._disposed) {\n      return;\n    }\n\n    if (step) {\n      this._initialMaskValue = new Date(this._maskValue);\n    }\n\n    var index = (0, _math.fitIntoRange)(this._activePartIndex + step, 0, this._dateParts.length - 1);\n\n    if (this._dateParts[index].isStub) {\n      var isBoundaryIndex = 0 === index && step < 0 || index === this._dateParts.length - 1 && step > 0;\n\n      if (!isBoundaryIndex) {\n        this._selectNextPart(step >= 0 ? step + 1 : step - 1);\n\n        return;\n      } else {\n        index = this._activePartIndex;\n      }\n    }\n\n    if (this._activePartIndex !== index) {\n      this._clearSearchValue();\n    }\n\n    this._activePartIndex = index;\n\n    this._caret(this._getActivePartProp(\"caret\"));\n  },\n  _getRealLimitsPattern: function _getRealLimitsPattern() {\n    if (\"d\" === this._getActivePartProp(\"pattern\")[0]) {\n      return \"dM\";\n    }\n  },\n  _getActivePartLimits: function _getActivePartLimits(lockOtherParts) {\n    var limitFunction = this._getActivePartProp(\"limits\");\n\n    return limitFunction(this._maskValue, lockOtherParts && this._getRealLimitsPattern());\n  },\n  _getActivePartValue: function _getActivePartValue(dateValue) {\n    dateValue = dateValue || this._maskValue;\n\n    var getter = this._getActivePartProp(\"getter\");\n\n    return (0, _type.isFunction)(getter) ? getter(dateValue) : dateValue[getter]();\n  },\n  _addLeadingZeroes: function _addLeadingZeroes(value) {\n    var zeroes = this._searchValue.match(/^0+/);\n\n    var limits = this._getActivePartLimits();\n\n    var maxLimitLength = String(limits.max).length;\n    return ((zeroes && zeroes[0] || \"\") + String(value)).substr(-maxLimitLength);\n  },\n  _setActivePartValue: function _setActivePartValue(value, dateValue) {\n    dateValue = dateValue || this._maskValue;\n\n    var setter = this._getActivePartProp(\"setter\");\n\n    var limits = this._getActivePartLimits();\n\n    value = (0, _math.inRange)(value, limits.min, limits.max) ? value : value % 10;\n    value = this._addLeadingZeroes((0, _math.fitIntoRange)(value, limits.min, limits.max));\n    (0, _type.isFunction)(setter) ? setter(dateValue, value) : dateValue[setter](value);\n\n    this._renderDisplayText(this._getDisplayedText(dateValue));\n\n    this._renderDateParts();\n  },\n  _getActivePartProp: function _getActivePartProp(property) {\n    if (!this._dateParts || !this._dateParts[this._activePartIndex]) {\n      return;\n    }\n\n    return this._dateParts[this._activePartIndex][property];\n  },\n  _loadMaskValue: function _loadMaskValue() {\n    var value = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.dateOption(\"value\");\n    this._maskValue = value && new Date(value);\n    this._initialMaskValue = value && new Date(value);\n  },\n  _saveMaskValue: function _saveMaskValue() {\n    var value = this._maskValue && new Date(this._maskValue);\n\n    if (value && \"date\" === this.option(\"type\")) {\n      value.setHours(0, 0, 0, 0);\n    }\n\n    this._initialMaskValue = new Date(value);\n    this.dateOption(\"value\", value);\n  },\n  _revertChanges: function _revertChanges() {\n    this._loadMaskValue();\n\n    this._renderDisplayText(this._getDisplayedText(this._maskValue));\n\n    this._renderDateParts();\n  },\n  _renderDisplayText: function _renderDisplayText(text) {\n    this.callBase(text);\n\n    if (this._useMaskBehavior()) {\n      this.option(\"text\", text);\n    }\n  },\n  _partIncrease: function _partIncrease(step, lockOtherParts) {\n    this._setNewDateIfEmpty();\n\n    var _this$_getActivePartL2 = this._getActivePartLimits(lockOtherParts),\n        max = _this$_getActivePartL2.max,\n        min = _this$_getActivePartL2.min;\n\n    var limitDelta = max - min;\n\n    if (1 === limitDelta) {\n      limitDelta++;\n    }\n\n    var newValue = step + this._getActivePartValue();\n\n    if (newValue > max) {\n      newValue = this._applyLimits(newValue, {\n        limitBase: min,\n        limitClosest: max,\n        limitDelta: limitDelta\n      });\n    } else {\n      if (newValue < min) {\n        newValue = this._applyLimits(newValue, {\n          limitBase: max,\n          limitClosest: min,\n          limitDelta: limitDelta\n        });\n      }\n    }\n\n    this._setActivePartValue(newValue);\n  },\n  _applyLimits: function _applyLimits(newValue, _ref) {\n    var limitBase = _ref.limitBase,\n        limitClosest = _ref.limitClosest,\n        limitDelta = _ref.limitDelta;\n    var delta = (newValue - limitClosest) % limitDelta;\n    return delta ? limitBase + delta - 1 * (0, _math.sign)(delta) : limitClosest;\n  },\n  _maskClickHandler: function _maskClickHandler() {\n    if (this.option(\"text\")) {\n      this._activePartIndex = (0, _uiDate_boxMask.getDatePartIndexByPosition)(this._dateParts, this._caret().start);\n\n      if ((0, _type.isDefined)(this._activePartIndex)) {\n        this._caret(this._getActivePartProp(\"caret\"));\n      } else {\n        this._selectLastPart();\n      }\n    }\n  },\n  _maskCompositionEndHandler: function _maskCompositionEndHandler(e) {\n    var _this5 = this;\n\n    if (_browser.default.msie && this._isSingleDigitKey(e)) {\n      var key = e.originalEvent.data;\n\n      this._processInputKey(key);\n    } else {\n      this._input().val(this._getDisplayedText(this._maskValue));\n\n      this._selectNextPart();\n\n      this._maskInputHandler = function () {\n        _this5._renderSelectedPart();\n      };\n    }\n  },\n  _maskPasteHandler: function _maskPasteHandler(e) {\n    var newText = this._replaceSelectedText(this.option(\"text\"), this._caret(), (0, _dom.clipboardText)(e));\n\n    var date = _date.default.parse(newText, this._getFormatPattern());\n\n    if (date && this._isDateValid(date)) {\n      this._maskValue = date;\n\n      this._renderDisplayText(this._getDisplayedText(this._maskValue));\n\n      this._renderDateParts();\n\n      this._selectNextPart();\n    }\n\n    e.preventDefault();\n  },\n  _isDateValid: function _isDateValid(date) {\n    return (0, _type.isDate)(date) && !isNaN(date);\n  },\n  _isValueDirty: function _isValueDirty() {\n    var value = this.dateOption(\"value\");\n    return (this._maskValue && this._maskValue.getTime()) !== (value && value.getTime());\n  },\n  _fireChangeEvent: function _fireChangeEvent() {\n    this._clearSearchValue();\n\n    if (this._isValueDirty()) {\n      _events_engine.default.trigger(this._input(), \"change\");\n    }\n  },\n  _enterHandler: function _enterHandler(e) {\n    this._fireChangeEvent();\n\n    this._selectNextPart(FORWARD);\n\n    e.preventDefault();\n  },\n  _focusOutHandler: function _focusOutHandler(e) {\n    this.callBase(e);\n\n    if (this._useMaskBehavior() && !e.isDefaultPrevented()) {\n      this._fireChangeEvent();\n\n      this._selectFirstPart(e);\n    }\n  },\n  _valueChangeEventHandler: function _valueChangeEventHandler(e) {\n    var text = this.option(\"text\");\n\n    if (this._useMaskBehavior()) {\n      this._saveValueChangeEvent(e);\n\n      if (!text) {\n        this._maskValue = null;\n      } else {\n        if (null === this._maskValue) {\n          this._loadMaskValue(text);\n        }\n      }\n\n      this._saveMaskValue();\n    } else {\n      this.callBase(e);\n    }\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"useMaskBehavior\":\n        this._renderMask();\n\n        break;\n\n      case \"displayFormat\":\n      case \"mode\":\n        this.callBase(args);\n\n        this._renderMask();\n\n        break;\n\n      case \"value\":\n        this._loadMaskValue();\n\n        this.callBase(args);\n\n        this._renderDateParts();\n\n        break;\n\n      case \"emptyDateValue\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _clearMaskState: function _clearMaskState() {\n    this._clearSearchValue();\n\n    delete this._dateParts;\n    delete this._activePartIndex;\n    delete this._maskValue;\n  },\n  reset: function reset() {\n    this.callBase();\n\n    this._clearMaskState();\n\n    this._activePartIndex = 0;\n  },\n  _clean: function _clean() {\n    this.callBase();\n\n    this._detachMaskEvents();\n\n    this._clearMaskState();\n  }\n});\n\nvar _default = DateBoxMask;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/date_box/ui.date_box.mask.js"],"names":["exports","default","_index","require","_type","_dom","_extend","_math","_events_engine","_interopRequireDefault","_uiDate_boxMask","_date","_date2","_date3","_uiDate_box","_number","_devices","_browser","obj","__esModule","MASK_EVENT_NAMESPACE","FORWARD","BACKWARD","DateBoxMask","inherit","_supportedKeys","e","_this","originalHandlers","callBase","callOriginalHandler","originalHandler","normalizeKeyName","apply","applyHandler","maskHandler","_shouldUseOriginalHandler","extend","del","event","_revertPart","_isAllSelected","preventDefault","backspace","home","_selectFirstPart","end","_selectLastPart","escape","_revertChanges","enter","_enterHandler","leftArrow","_selectNextPart","rightArrow","upArrow","_upDownArrowHandler","downArrow","keysToHandleByMask","isNotDeletingInCalendar","option","indexOf","_useMaskBehavior","altKey","step","_setNewDateIfEmpty","originalValue","_getActivePartValue","_initialMaskValue","currentValue","delta","_loadMaskValue","_partIncrease","_getDefaultOptions","useMaskBehavior","emptyDateValue","Date","_isSingleCharKey","key","originalEvent","data","length","ctrl","alt","_isSingleDigitKey","_e$originalEvent","parseInt","_useBeforeInputEvent","device","real","android","version","_keyboardHandler","_this2","result","chrome","code","replace","_processInputKey","_maskInputHandler","_renderSelectedPart","_maskBeforeInputHandler","_this3","inputType","isBackwardDeletion","isForwardDeletion","direction","_keyPressHandler","_renderDisplayText","_getDisplayedText","_maskValue","_activePartIndex","isNaN","_searchString","_searchNumber","caret","_caret","start","_getFormatPattern","_formatPattern","format","_strategy","getDisplayFormat","isLDMLPattern","isString","_getPatternByFormat","getFormat","value","_renderDateParts","_partLimitsReached","max","maxLimitLength","String","formatLength","_getActivePartProp","isShortFormat","maxSearchLength","Math","min","isLengthExceeded","_searchValue","isValueOverflowed","char","_this$_getActivePartL","_getActivePartLimits","substr","_setActivePartValue","limits","startString","toLowerCase","endLimit","i","_clearSearchValue","actual","_prepareRegExpInfo","_regExpInfo","getRegExpInfo","regExp","regexp","flags","convertedRegExp","convertDigits","source","RegExp","_initMaskState","_renderMask","_detachMaskEvents","_clearMaskState","_attachMaskEvents","text","_dateParts","renderDateParts","_isFocused","off","_input","_this4","on","addNamespace","_maskClickHandler","bind","_maskPasteHandler","_maskCompositionEndHandler","_onMouseWheel","arguments","_disposed","index","fitIntoRange","isStub","isBoundaryIndex","_getRealLimitsPattern","lockOtherParts","limitFunction","dateValue","getter","isFunction","_addLeadingZeroes","zeroes","match","setter","inRange","property","dateOption","_saveMaskValue","setHours","_this$_getActivePartL2","limitDelta","newValue","_applyLimits","limitBase","limitClosest","_ref","sign","getDatePartIndexByPosition","isDefined","_this5","msie","val","newText","_replaceSelectedText","clipboardText","date","parse","_isDateValid","isDate","_isValueDirty","getTime","_fireChangeEvent","trigger","_focusOutHandler","isDefaultPrevented","_valueChangeEventHandler","_saveValueChangeEvent","_optionChanged","args","name","reset","_clean","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/date_box/ui.date_box.mask.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _math = require(\"../../core/utils/math\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _uiDate_boxMask = require(\"./ui.date_box.mask.parts\");\r\nvar _date = _interopRequireDefault(require(\"../../localization/date\"));\r\nvar _date2 = require(\"../../localization/ldml/date.parser\");\r\nvar _date3 = require(\"../../localization/ldml/date.format\");\r\nvar _uiDate_box = _interopRequireDefault(require(\"./ui.date_box.base\"));\r\nvar _number = _interopRequireDefault(require(\"../../localization/number\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar MASK_EVENT_NAMESPACE = \"dateBoxMask\";\r\nvar FORWARD = 1;\r\nvar BACKWARD = -1;\r\nvar DateBoxMask = _uiDate_box.default.inherit({\r\n    _supportedKeys: function(e) {\r\n        var _this = this;\r\n        var originalHandlers = this.callBase(e);\r\n        var callOriginalHandler = function(e) {\r\n            var originalHandler = originalHandlers[(0, _index.normalizeKeyName)(e)];\r\n            return originalHandler && originalHandler.apply(_this, [e])\r\n        };\r\n        var applyHandler = function(e, maskHandler) {\r\n            if (_this._shouldUseOriginalHandler(e)) {\r\n                return callOriginalHandler.apply(_this, [e])\r\n            } else {\r\n                return maskHandler.apply(_this, [e])\r\n            }\r\n        };\r\n        return (0, _extend.extend)({}, originalHandlers, {\r\n            del: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._revertPart(FORWARD);\r\n                    _this._isAllSelected() || event.preventDefault()\r\n                })\r\n            },\r\n            backspace: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._revertPart(BACKWARD);\r\n                    _this._isAllSelected() || event.preventDefault()\r\n                })\r\n            },\r\n            home: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._selectFirstPart();\r\n                    event.preventDefault()\r\n                })\r\n            },\r\n            end: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._selectLastPart();\r\n                    event.preventDefault()\r\n                })\r\n            },\r\n            escape: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._revertChanges(event)\r\n                })\r\n            },\r\n            enter: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._enterHandler(event)\r\n                })\r\n            },\r\n            leftArrow: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._selectNextPart(BACKWARD);\r\n                    event.preventDefault()\r\n                })\r\n            },\r\n            rightArrow: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._selectNextPart(FORWARD);\r\n                    event.preventDefault()\r\n                })\r\n            },\r\n            upArrow: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._upDownArrowHandler(FORWARD);\r\n                    event.preventDefault()\r\n                })\r\n            },\r\n            downArrow: function(e) {\r\n                return applyHandler(e, function(event) {\r\n                    _this._upDownArrowHandler(BACKWARD);\r\n                    event.preventDefault()\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _shouldUseOriginalHandler: function(e) {\r\n        var keysToHandleByMask = [\"backspace\", \"del\"];\r\n        var isNotDeletingInCalendar = this.option(\"opened\") && e && keysToHandleByMask.indexOf((0, _index.normalizeKeyName)(e)) === -1;\r\n        return !this._useMaskBehavior() || isNotDeletingInCalendar || e && e.altKey\r\n    },\r\n    _upDownArrowHandler: function(step) {\r\n        this._setNewDateIfEmpty();\r\n        var originalValue = this._getActivePartValue(this._initialMaskValue);\r\n        var currentValue = this._getActivePartValue();\r\n        var delta = currentValue - originalValue;\r\n        this._loadMaskValue(this._initialMaskValue);\r\n        this._partIncrease(delta + step, true)\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            useMaskBehavior: false,\r\n            emptyDateValue: new Date(2e3, 0, 1, 0, 0, 0)\r\n        })\r\n    },\r\n    _isSingleCharKey: function(e) {\r\n        var key = e.originalEvent.data || e.originalEvent.key;\r\n        return \"string\" === typeof key && 1 === key.length && !e.ctrl && !e.alt\r\n    },\r\n    _isSingleDigitKey: function(e) {\r\n        var _e$originalEvent;\r\n        var data = null === (_e$originalEvent = e.originalEvent) || void 0 === _e$originalEvent ? void 0 : _e$originalEvent.data;\r\n        return 1 === (null === data || void 0 === data ? void 0 : data.length) && parseInt(data, 10)\r\n    },\r\n    _useBeforeInputEvent: function() {\r\n        var device = _devices.default.real();\r\n        return device.android && device.version[0] > 4\r\n    },\r\n    _keyboardHandler: function(e) {\r\n        var _this2 = this;\r\n        var key = e.originalEvent.key;\r\n        var result = this.callBase(e);\r\n        if (!this._useMaskBehavior() || this._useBeforeInputEvent()) {\r\n            return result\r\n        }\r\n        if (_browser.default.chrome && \"Process\" === e.key && 0 === e.code.indexOf(\"Digit\")) {\r\n            key = e.code.replace(\"Digit\", \"\");\r\n            this._processInputKey(key);\r\n            this._maskInputHandler = function() {\r\n                _this2._renderSelectedPart()\r\n            }\r\n        } else {\r\n            if (this._isSingleCharKey(e)) {\r\n                this._processInputKey(key);\r\n                e.originalEvent.preventDefault()\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _maskBeforeInputHandler: function(e) {\r\n        var _this3 = this;\r\n        this._maskInputHandler = null;\r\n        var inputType = e.originalEvent.inputType;\r\n        if (\"insertCompositionText\" === inputType) {\r\n            this._maskInputHandler = function() {\r\n                _this3._renderSelectedPart()\r\n            }\r\n        }\r\n        var isBackwardDeletion = \"deleteContentBackward\" === inputType;\r\n        var isForwardDeletion = \"deleteContentForward\" === inputType;\r\n        if (isBackwardDeletion || isForwardDeletion) {\r\n            var direction = isBackwardDeletion ? BACKWARD : FORWARD;\r\n            this._maskInputHandler = function() {\r\n                _this3._revertPart();\r\n                _this3._selectNextPart(direction)\r\n            }\r\n        }\r\n        if (!this._useMaskBehavior() || !this._isSingleCharKey(e)) {\r\n            return\r\n        }\r\n        var key = e.originalEvent.data;\r\n        this._processInputKey(key);\r\n        e.preventDefault();\r\n        return true\r\n    },\r\n    _keyPressHandler: function(e) {\r\n        var event = e.originalEvent;\r\n        if (\"insertCompositionText\" === (null === event || void 0 === event ? void 0 : event.inputType) && this._isSingleDigitKey(e)) {\r\n            this._processInputKey(event.data);\r\n            this._renderDisplayText(this._getDisplayedText(this._maskValue));\r\n            this._selectNextPart()\r\n        }\r\n        this.callBase(e);\r\n        if (this._maskInputHandler) {\r\n            this._maskInputHandler();\r\n            this._maskInputHandler = null\r\n        }\r\n    },\r\n    _processInputKey: function(key) {\r\n        if (this._isAllSelected()) {\r\n            this._activePartIndex = 0\r\n        }\r\n        this._setNewDateIfEmpty();\r\n        if (isNaN(parseInt(key))) {\r\n            this._searchString(key)\r\n        } else {\r\n            this._searchNumber(key)\r\n        }\r\n    },\r\n    _isAllSelected: function() {\r\n        var caret = this._caret();\r\n        return caret.end - caret.start === this.option(\"text\").length\r\n    },\r\n    _getFormatPattern: function() {\r\n        if (this._formatPattern) {\r\n            return this._formatPattern\r\n        }\r\n        var format = this._strategy.getDisplayFormat(this.option(\"displayFormat\"));\r\n        var isLDMLPattern = (0, _type.isString)(format) && !_date.default._getPatternByFormat(format);\r\n        if (isLDMLPattern) {\r\n            this._formatPattern = format\r\n        } else {\r\n            this._formatPattern = (0, _date3.getFormat)(function(value) {\r\n                return _date.default.format(value, format)\r\n            })\r\n        }\r\n        return this._formatPattern\r\n    },\r\n    _setNewDateIfEmpty: function() {\r\n        if (!this._maskValue) {\r\n            var value = \"time\" === this.option(\"type\") ? new Date(null) : new Date;\r\n            this._maskValue = value;\r\n            this._initialMaskValue = value;\r\n            this._renderDateParts()\r\n        }\r\n    },\r\n    _partLimitsReached: function(max) {\r\n        var maxLimitLength = String(max).length;\r\n        var formatLength = this._getActivePartProp(\"pattern\").length;\r\n        var isShortFormat = 1 === formatLength;\r\n        var maxSearchLength = isShortFormat ? maxLimitLength : Math.min(formatLength, maxLimitLength);\r\n        var isLengthExceeded = this._searchValue.length === maxSearchLength;\r\n        var isValueOverflowed = parseInt(this._searchValue + \"0\") > max;\r\n        return isLengthExceeded || isValueOverflowed\r\n    },\r\n    _searchNumber: function(char) {\r\n        var _this$_getActivePartL = this._getActivePartLimits(),\r\n            max = _this$_getActivePartL.max;\r\n        var maxLimitLength = String(max).length;\r\n        this._searchValue = (this._searchValue + char).substr(-maxLimitLength);\r\n        if (isNaN(this._searchValue)) {\r\n            this._searchValue = char\r\n        }\r\n        this._setActivePartValue(this._searchValue);\r\n        if (this._partLimitsReached(max)) {\r\n            this._selectNextPart(FORWARD)\r\n        }\r\n    },\r\n    _searchString: function(char) {\r\n        if (!isNaN(parseInt(this._getActivePartProp(\"text\")))) {\r\n            return\r\n        }\r\n        var limits = this._getActivePartProp(\"limits\")(this._maskValue);\r\n        var startString = this._searchValue + char.toLowerCase();\r\n        var endLimit = limits.max - limits.min;\r\n        for (var i = 0; i <= endLimit; i++) {\r\n            this._loadMaskValue(this._initialMaskValue);\r\n            this._partIncrease(i + 1);\r\n            if (0 === this._getActivePartProp(\"text\").toLowerCase().indexOf(startString)) {\r\n                this._searchValue = startString;\r\n                return\r\n            }\r\n        }\r\n        this._setNewDateIfEmpty();\r\n        if (this._searchValue) {\r\n            this._clearSearchValue();\r\n            this._searchString(char)\r\n        }\r\n    },\r\n    _clearSearchValue: function() {\r\n        this._searchValue = \"\"\r\n    },\r\n    _revertPart: function(direction) {\r\n        if (!this._isAllSelected()) {\r\n            var actual = this._getActivePartValue(this.option(\"emptyDateValue\"));\r\n            this._setActivePartValue(actual);\r\n            this._selectNextPart(direction)\r\n        }\r\n        this._clearSearchValue()\r\n    },\r\n    _useMaskBehavior: function() {\r\n        return this.option(\"useMaskBehavior\") && \"text\" === this.option(\"mode\")\r\n    },\r\n    _prepareRegExpInfo: function() {\r\n        this._regExpInfo = (0, _date2.getRegExpInfo)(this._getFormatPattern(), _date.default);\r\n        var regExp = this._regExpInfo.regexp;\r\n        var flags = regExp.flags;\r\n        var convertedRegExp = _number.default.convertDigits(this._regExpInfo.regexp.source, false);\r\n        this._regExpInfo.regexp = RegExp(convertedRegExp, flags)\r\n    },\r\n    _initMaskState: function() {\r\n        this._activePartIndex = 0;\r\n        this._formatPattern = null;\r\n        this._prepareRegExpInfo();\r\n        this._loadMaskValue()\r\n    },\r\n    _renderMask: function() {\r\n        this.callBase();\r\n        this._detachMaskEvents();\r\n        this._clearMaskState();\r\n        if (this._useMaskBehavior()) {\r\n            this._attachMaskEvents();\r\n            this._initMaskState();\r\n            this._renderDateParts()\r\n        }\r\n    },\r\n    _renderDateParts: function() {\r\n        if (!this._useMaskBehavior()) {\r\n            return\r\n        }\r\n        var text = this.option(\"text\") || this._getDisplayedText(this._maskValue);\r\n        if (text) {\r\n            this._dateParts = (0, _uiDate_boxMask.renderDateParts)(text, this._regExpInfo);\r\n            this._isFocused() && this._selectNextPart()\r\n        }\r\n    },\r\n    _detachMaskEvents: function() {\r\n        _events_engine.default.off(this._input(), \".\" + MASK_EVENT_NAMESPACE)\r\n    },\r\n    _attachMaskEvents: function() {\r\n        var _this4 = this;\r\n        _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"dxclick\", MASK_EVENT_NAMESPACE), this._maskClickHandler.bind(this));\r\n        _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"paste\", MASK_EVENT_NAMESPACE), this._maskPasteHandler.bind(this));\r\n        _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"drop\", MASK_EVENT_NAMESPACE), function() {\r\n            _this4._renderSelectedPart()\r\n        });\r\n        _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"compositionend\", MASK_EVENT_NAMESPACE), this._maskCompositionEndHandler.bind(this));\r\n        if (this._useBeforeInputEvent()) {\r\n            _events_engine.default.on(this._input(), (0, _index.addNamespace)(\"beforeinput\", MASK_EVENT_NAMESPACE), this._maskBeforeInputHandler.bind(this))\r\n        }\r\n    },\r\n    _renderSelectedPart: function() {\r\n        this._renderDisplayText(this._getDisplayedText(this._maskValue));\r\n        this._selectNextPart()\r\n    },\r\n    _selectLastPart: function() {\r\n        if (this.option(\"text\")) {\r\n            this._activePartIndex = this._dateParts.length;\r\n            this._selectNextPart(BACKWARD)\r\n        }\r\n    },\r\n    _selectFirstPart: function() {\r\n        if (this.option(\"text\")) {\r\n            this._activePartIndex = -1;\r\n            this._selectNextPart(FORWARD)\r\n        }\r\n    },\r\n    _onMouseWheel: function(e) {\r\n        if (this._useMaskBehavior()) {\r\n            this._partIncrease(e.delta > 0 ? FORWARD : BACKWARD, e)\r\n        }\r\n    },\r\n    _selectNextPart: function() {\r\n        var step = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;\r\n        if (!this.option(\"text\") || this._disposed) {\r\n            return\r\n        }\r\n        if (step) {\r\n            this._initialMaskValue = new Date(this._maskValue)\r\n        }\r\n        var index = (0, _math.fitIntoRange)(this._activePartIndex + step, 0, this._dateParts.length - 1);\r\n        if (this._dateParts[index].isStub) {\r\n            var isBoundaryIndex = 0 === index && step < 0 || index === this._dateParts.length - 1 && step > 0;\r\n            if (!isBoundaryIndex) {\r\n                this._selectNextPart(step >= 0 ? step + 1 : step - 1);\r\n                return\r\n            } else {\r\n                index = this._activePartIndex\r\n            }\r\n        }\r\n        if (this._activePartIndex !== index) {\r\n            this._clearSearchValue()\r\n        }\r\n        this._activePartIndex = index;\r\n        this._caret(this._getActivePartProp(\"caret\"))\r\n    },\r\n    _getRealLimitsPattern: function() {\r\n        if (\"d\" === this._getActivePartProp(\"pattern\")[0]) {\r\n            return \"dM\"\r\n        }\r\n    },\r\n    _getActivePartLimits: function(lockOtherParts) {\r\n        var limitFunction = this._getActivePartProp(\"limits\");\r\n        return limitFunction(this._maskValue, lockOtherParts && this._getRealLimitsPattern())\r\n    },\r\n    _getActivePartValue: function(dateValue) {\r\n        dateValue = dateValue || this._maskValue;\r\n        var getter = this._getActivePartProp(\"getter\");\r\n        return (0, _type.isFunction)(getter) ? getter(dateValue) : dateValue[getter]()\r\n    },\r\n    _addLeadingZeroes: function(value) {\r\n        var zeroes = this._searchValue.match(/^0+/);\r\n        var limits = this._getActivePartLimits();\r\n        var maxLimitLength = String(limits.max).length;\r\n        return ((zeroes && zeroes[0] || \"\") + String(value)).substr(-maxLimitLength)\r\n    },\r\n    _setActivePartValue: function(value, dateValue) {\r\n        dateValue = dateValue || this._maskValue;\r\n        var setter = this._getActivePartProp(\"setter\");\r\n        var limits = this._getActivePartLimits();\r\n        value = (0, _math.inRange)(value, limits.min, limits.max) ? value : value % 10;\r\n        value = this._addLeadingZeroes((0, _math.fitIntoRange)(value, limits.min, limits.max));\r\n        (0, _type.isFunction)(setter) ? setter(dateValue, value): dateValue[setter](value);\r\n        this._renderDisplayText(this._getDisplayedText(dateValue));\r\n        this._renderDateParts()\r\n    },\r\n    _getActivePartProp: function(property) {\r\n        if (!this._dateParts || !this._dateParts[this._activePartIndex]) {\r\n            return\r\n        }\r\n        return this._dateParts[this._activePartIndex][property]\r\n    },\r\n    _loadMaskValue: function() {\r\n        var value = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.dateOption(\"value\");\r\n        this._maskValue = value && new Date(value);\r\n        this._initialMaskValue = value && new Date(value)\r\n    },\r\n    _saveMaskValue: function() {\r\n        var value = this._maskValue && new Date(this._maskValue);\r\n        if (value && \"date\" === this.option(\"type\")) {\r\n            value.setHours(0, 0, 0, 0)\r\n        }\r\n        this._initialMaskValue = new Date(value);\r\n        this.dateOption(\"value\", value)\r\n    },\r\n    _revertChanges: function() {\r\n        this._loadMaskValue();\r\n        this._renderDisplayText(this._getDisplayedText(this._maskValue));\r\n        this._renderDateParts()\r\n    },\r\n    _renderDisplayText: function(text) {\r\n        this.callBase(text);\r\n        if (this._useMaskBehavior()) {\r\n            this.option(\"text\", text)\r\n        }\r\n    },\r\n    _partIncrease: function(step, lockOtherParts) {\r\n        this._setNewDateIfEmpty();\r\n        var _this$_getActivePartL2 = this._getActivePartLimits(lockOtherParts),\r\n            max = _this$_getActivePartL2.max,\r\n            min = _this$_getActivePartL2.min;\r\n        var limitDelta = max - min;\r\n        if (1 === limitDelta) {\r\n            limitDelta++\r\n        }\r\n        var newValue = step + this._getActivePartValue();\r\n        if (newValue > max) {\r\n            newValue = this._applyLimits(newValue, {\r\n                limitBase: min,\r\n                limitClosest: max,\r\n                limitDelta: limitDelta\r\n            })\r\n        } else {\r\n            if (newValue < min) {\r\n                newValue = this._applyLimits(newValue, {\r\n                    limitBase: max,\r\n                    limitClosest: min,\r\n                    limitDelta: limitDelta\r\n                })\r\n            }\r\n        }\r\n        this._setActivePartValue(newValue)\r\n    },\r\n    _applyLimits: function(newValue, _ref) {\r\n        var limitBase = _ref.limitBase,\r\n            limitClosest = _ref.limitClosest,\r\n            limitDelta = _ref.limitDelta;\r\n        var delta = (newValue - limitClosest) % limitDelta;\r\n        return delta ? limitBase + delta - 1 * (0, _math.sign)(delta) : limitClosest\r\n    },\r\n    _maskClickHandler: function() {\r\n        if (this.option(\"text\")) {\r\n            this._activePartIndex = (0, _uiDate_boxMask.getDatePartIndexByPosition)(this._dateParts, this._caret().start);\r\n            if ((0, _type.isDefined)(this._activePartIndex)) {\r\n                this._caret(this._getActivePartProp(\"caret\"))\r\n            } else {\r\n                this._selectLastPart()\r\n            }\r\n        }\r\n    },\r\n    _maskCompositionEndHandler: function(e) {\r\n        var _this5 = this;\r\n        if (_browser.default.msie && this._isSingleDigitKey(e)) {\r\n            var key = e.originalEvent.data;\r\n            this._processInputKey(key)\r\n        } else {\r\n            this._input().val(this._getDisplayedText(this._maskValue));\r\n            this._selectNextPart();\r\n            this._maskInputHandler = function() {\r\n                _this5._renderSelectedPart()\r\n            }\r\n        }\r\n    },\r\n    _maskPasteHandler: function(e) {\r\n        var newText = this._replaceSelectedText(this.option(\"text\"), this._caret(), (0, _dom.clipboardText)(e));\r\n        var date = _date.default.parse(newText, this._getFormatPattern());\r\n        if (date && this._isDateValid(date)) {\r\n            this._maskValue = date;\r\n            this._renderDisplayText(this._getDisplayedText(this._maskValue));\r\n            this._renderDateParts();\r\n            this._selectNextPart()\r\n        }\r\n        e.preventDefault()\r\n    },\r\n    _isDateValid: function(date) {\r\n        return (0, _type.isDate)(date) && !isNaN(date)\r\n    },\r\n    _isValueDirty: function() {\r\n        var value = this.dateOption(\"value\");\r\n        return (this._maskValue && this._maskValue.getTime()) !== (value && value.getTime())\r\n    },\r\n    _fireChangeEvent: function() {\r\n        this._clearSearchValue();\r\n        if (this._isValueDirty()) {\r\n            _events_engine.default.trigger(this._input(), \"change\")\r\n        }\r\n    },\r\n    _enterHandler: function(e) {\r\n        this._fireChangeEvent();\r\n        this._selectNextPart(FORWARD);\r\n        e.preventDefault()\r\n    },\r\n    _focusOutHandler: function(e) {\r\n        this.callBase(e);\r\n        if (this._useMaskBehavior() && !e.isDefaultPrevented()) {\r\n            this._fireChangeEvent();\r\n            this._selectFirstPart(e)\r\n        }\r\n    },\r\n    _valueChangeEventHandler: function(e) {\r\n        var text = this.option(\"text\");\r\n        if (this._useMaskBehavior()) {\r\n            this._saveValueChangeEvent(e);\r\n            if (!text) {\r\n                this._maskValue = null\r\n            } else {\r\n                if (null === this._maskValue) {\r\n                    this._loadMaskValue(text)\r\n                }\r\n            }\r\n            this._saveMaskValue()\r\n        } else {\r\n            this.callBase(e)\r\n        }\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"useMaskBehavior\":\r\n                this._renderMask();\r\n                break;\r\n            case \"displayFormat\":\r\n            case \"mode\":\r\n                this.callBase(args);\r\n                this._renderMask();\r\n                break;\r\n            case \"value\":\r\n                this._loadMaskValue();\r\n                this.callBase(args);\r\n                this._renderDateParts();\r\n                break;\r\n            case \"emptyDateValue\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _clearMaskState: function() {\r\n        this._clearSearchValue();\r\n        delete this._dateParts;\r\n        delete this._activePartIndex;\r\n        delete this._maskValue\r\n    },\r\n    reset: function() {\r\n        this.callBase();\r\n        this._clearMaskState();\r\n        this._activePartIndex = 0\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._detachMaskEvents();\r\n        this._clearMaskState()\r\n    }\r\n});\r\nvar _default = DateBoxMask;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}