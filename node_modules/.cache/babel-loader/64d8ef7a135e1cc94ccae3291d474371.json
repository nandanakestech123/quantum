{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import SimpleReactValidator from\"simple-react-validator\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCustomerPlusSettings,updateCustomerPlus,CreateCustomerPlus,getCustomerPlus}from\"redux/actions/customerPlus\";import{updateForm}from\"redux/actions/common\";import{NormalInput,NormalDateTime,NormalSelect,NormalMultiSelect,NormalButton}from\"component/common\";import{withTranslation}from\"react-i18next\";export var AddCustomerPlusClass=/*#__PURE__*/function(_Component){_inherits(AddCustomerPlusClass,_Component);var _super=_createSuper(AddCustomerPlusClass);function AddCustomerPlusClass(){var _this;_classCallCheck(this,AddCustomerPlusClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{},fields:[{id:1,field_name:\"cust_dob\",display_field_name:\"Customer DOB\",visible_in_registration:true,visible_in_listing:true,visible_in_profile:true,mandatory:true,data_type:\"Dat\",selection:null}],isLoading:true,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.loadData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.getCustomerPlusSettings(\"details\");case 2:_this.state.fields=_this.props.customerPlusSettings.filter(function(e){return e.visible_in_registration;});_this.state.formFields=_this.state.fields.reduce(function(map,obj){map[obj.field_name]=\"\";return map;},{});if(!_this.props.match.params.id){_context.next=8;break;}_context.next=7;return _this.props.getCustomerPlus(_this.props.match.params.id);case 7:_this.state.formFields=_this.props.customerPlusDetail;case 8:_this.setState({isLoading:false});case 9:case\"end\":return _context.stop();}}},_callee);}));_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(type){var formFields,res,formField,_formField;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.validator.allValid()){_context2.next=2;break;}return _context2.abrupt(\"return\",_this.validator.showMessages());case 2:_this.setState({isLoading:true});console.log(_this.state.formFields);_context2.prev=4;_this.state.fields.filter(function(e){return e.data_type==\"date\";}).forEach(function(e){if(_this.state.formFields[e.field_name]){var date=new Date(_this.state.formFields[e.field_name]);var d=date.getDate();var day=d<10?\"0\"+d:d;var a=date.getMonth()+1;var month=a<10?\"0\"+a:a;var year=date.getFullYear();_this.state.formFields[e.field_name]=\"\".concat(year,\"-\").concat(month,\"-\").concat(day);}});if(!_this.props.match.params.id){_context2.next=27;break;}formFields={};_this.state.fields.forEach(function(e){formFields[e.field_name]=_this.state.formFields[e.field_name];});_context2.next=11;return _this.props.updateCustomerPlus(_this.props.match.params.id+\"/\",JSON.stringify(formFields));case 11:res=_context2.sent;if(!(res.status==200)){_context2.next=25;break;}if(!(type===\"catalog\")){_context2.next=23;break;}formField={custId:0,custName:\"\"};formField[\"custId\"]=res.data.id;formField[\"custName\"]=res.data.cust_name;_this.setState({isLoading:false});_context2.next=20;return _this.props.updateForm(\"basicApptDetail\",formField);case 20:_this.props.history.push(\"/admin/cart\");_context2.next=25;break;case 23:_this.setState({isLoading:false});_this.props.history.push(\"/admin/customerplus/\".concat(_this.props.match.params.id,\"/details\"));case 25:_context2.next=41;break;case 27:_context2.next=29;return _this.props.CreateCustomerPlus(JSON.stringify(_this.state.formFields));case 29:res=_context2.sent;if(!(type===\"catalog\")){_context2.next=39;break;}_formField={custId:0,custName:\"\"};_formField[\"custId\"]=res.data.id;_formField[\"custName\"]=res.data.cust_name;_context2.next=36;return _this.props.updateForm(\"basicApptDetail\",_formField);case 36:_this.props.history.push(\"/admin/cart\");_context2.next=41;break;case 39:_this.setState({isLoading:false});_this.props.history.push(\"/admin/customerPlus\");case 41:_context2.next=45;break;case 43:_context2.prev=43;_context2.t0=_context2[\"catch\"](4);case 45:_this.setState({isLoading:false});case 46:case\"end\":return _context2.stop();}}},_callee2,null,[[4,43]]);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleCancel=function(){if(_this.props.match.params.id){_this.props.history.push(\"/admin/customerplus/\".concat(_this.props.match.params.id,\"/details\"));}else{_this.props.history.push(\"/admin/customerplus\");}};_this.handleChange=function(_ref3){var _ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields});};_this.handleMultiSelect=function(field,e){var formFields=Object.assign({},_this.state.formFields);formFields[field]=e;_this.setState({formFields:formFields});};_this.handleChangeBox=function(event){var formFields=Object.assign({},_this.state.formFields);formFields[event.target.name]=event.target.checked;_this.setState({formFields:formFields});};_this.handleDatePick=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,value){var formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formFields=_this.state.formFields;formFields[name]=value;_context3.next=4;return _this.setState({formFields:formFields});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}();_this.renderFields=function(){var extraFields=_this.state.fields.filter(function(e){return e.field_name==\"cust_address\";}).length>0?_this.state.fields.filter(function(e){return e.field_name.match(/cust_address\\w+/);}):[];var leftLength=extraFields.length>0?(12-extraFields[0].col_width)*extraFields.length:0;console.log(leftLength,\"len\");var addressFileds=extraFields.map(function(e){return/*#__PURE__*/React.createElement(\"div\",{className:\"input-group pb-2\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:_this.state.formFields[e.field_name],name:e.field_name,onChange:_this.handleChange}));});var sorted=_this.state.fields.sort(function(a,b){if(a.order>b.order)return 1;else return-1;});var rowElements=[];var totalWidth=0;sorted.slice(sorted.indexOf(extraFields[extraFields.length-1])+1).forEach(function(e){totalWidth+=e.col_width;if(totalWidth<=leftLength)rowElements.push(e);else return;});console.log(sorted,\"sorted fields\");console.log(rowElements,\"row fields\");return sorted.slice(0,sorted.indexOf(extraFields[0])).concat(sorted.slice(sorted.indexOf(rowElements[rowElements.length-1])+1)).map(function(e){if(e.field_name.includes(\"cust_address\")){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-\".concat(e.col_width,\" pb-md-4\")},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 p-0\"},e.display_field_name),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group pb-2\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:_this.state.formFields[e.field_name],name:e.field_name,onChange:_this.handleChange})),addressFileds,e.mandatory?_this.validator.message(e.display_field_name,_this.state.formFields[e.field_name],\"required\"):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-\".concat(12-e.col_width,\" pb-md-4\")},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},rowElements.map(function(e){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-\".concat(e.col_width*2,\" pb-md-4\")},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 p-0\"},e.display_field_name),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},e.data_type==\"text\"?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:_this.state.formFields[e.field_name],name:e.field_name,onChange:_this.handleChange}):e.data_type==\"date\"?/*#__PURE__*/React.createElement(NormalDateTime,{onChange:_this.handleDatePick,value:new Date(_this.state.formFields[e.field_name]),name:e.field_name,showYearDropdown:true}):e.data_type==\"datetime\"?/*#__PURE__*/React.createElement(NormalDateTime,{onChange:_this.handleDatePick,value:new Date(_this.state.formFields[e.field_name]),name:e.field_name,showYearDropdown:true}):e.data_type==\"selection\"?/*#__PURE__*/React.createElement(NormalSelect,{options:e.selection,value:_this.state.formFields[e.field_name],name:e.field_name,onChange:_this.handleChange}):e.data_type==\"multiSelect\"?/*#__PURE__*/React.createElement(NormalMultiSelect,{options:e.selection,defaultValue:_this.state.formFields[e.field_name],name:e.field_name,handleMultiSelect:function handleMultiSelect(e){return _this.handleMultiSelect(e.field_name,e);}}):e.data_type==\"boolean\"?/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:_this.state.formFields[e.field_name],name:e.field_name,onClick:_this.handleChangeBox}):e.data_type==\"number\"?/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",placeholder:\"Enter here\",value:_this.state.formFields[e.field_name],name:e.field_name,onChange:_this.handleChange}):\"NO FILED RENDER DATA FOUND\"),e.mandatory?_this.validator.message(e.display_field_name,_this.state.formFields[e.field_name],\"required\"):null);}))));}if(e.data_type==\"date\"||e.data_type==\"datetime\")if(!_this.state.formFields[e.field_name])_this.state.formFields[e.field_name]=new Date();return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-\".concat(e.col_width,\" pb-md-4\")},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 p-0\"},e.display_field_name),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},e.data_type==\"text\"?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:_this.state.formFields[e.field_name],name:e.field_name,onChange:_this.handleChange}):e.data_type==\"date\"?/*#__PURE__*/React.createElement(NormalDateTime,{onChange:_this.handleDatePick,value:new Date(_this.state.formFields[e.field_name]),name:e.field_name,showYearDropdown:true}):e.data_type==\"datetime\"?/*#__PURE__*/React.createElement(NormalDateTime,{onChange:_this.handleDatePick,value:new Date(_this.state.formFields[e.field_name]),name:e.field_name,showYearDropdown:true}):e.data_type==\"selection\"?/*#__PURE__*/React.createElement(NormalSelect,{options:e.selection,value:_this.state.formFields[e.field_name],name:e.field_name,onChange:_this.handleChange}):e.data_type==\"multiSelect\"?/*#__PURE__*/React.createElement(NormalMultiSelect,{options:e.selection,defaultValue:_this.state.formFields[e.field_name],name:e.field_name,handleMultiSelect:function handleMultiSelect(e){return _this.handleMultiSelect(e.field_name,e);}}):e.data_type==\"boolean\"?/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:_this.state.formFields[e.field_name],name:e.field_name,onClick:_this.handleChangeBox}):e.data_type==\"number\"?/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",placeholder:\"Enter here\",value:_this.state.formFields[e.field_name],name:e.field_name,onChange:_this.handleChange}):\"NO FILED RENDER DATA FOUND\"),e.mandatory?_this.validator.message(e.display_field_name,_this.state.formFields[e.field_name],\"required\"):null);});};return _this;}_createClass(AddCustomerPlusClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){this.validator=new SimpleReactValidator({validators:{},element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:this});this.loadData();}},{key:\"render\",value:function render(){var _this2=this;var isLoading=this.state.isLoading;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"create-customer-section container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"create-customerplus\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\",onClick:function onClick(){_this2.props.match.params.id?_this2.props.history.push(\"/admin/customerplus/\".concat(_this2.props.match.params.id,\"/details\")):_this2.props.history.push(\"/admin/customerplus/\");}},t(\"Customer\")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},this.props.match.params.id?\"Edit\":\"Add\",\" \",t(\"New Customer\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"customer-detail\"},isLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\")))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2 row\"},this.renderFields()),/*#__PURE__*/React.createElement(\"div\",{className:\"row d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-sm-12 mb-4\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:this.handleCancel,label:\"CANCEL\",danger:true,className:\"mr-2 col-12\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-sm-12 mb-4\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:function onClick(){return _this2.handleSubmit();},label:\"SAVE\",success:true,className:\"mr-2 col-12\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-sm-12 mb-4\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:function onClick(){return _this2.handleSubmit(\"catalog\");},label:\"SAVE & CATALOG\",success:true,className:\"mr-2 col-12\"})))))));}}]);return AddCustomerPlusClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerPlusDetail:state.customerPlus.customerPlusDetail,customerPlusSettings:state.customerPlus.customerPlusSettings};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomerPlusSettings:getCustomerPlusSettings,updateCustomerPlus:updateCustomerPlus,CreateCustomerPlus:CreateCustomerPlus,getCustomerPlus:getCustomerPlus,updateForm:updateForm},dispatch);};export var AddCustomerPlus=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(AddCustomerPlusClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/AddCustomerPlus/index.js"],"names":["React","Component","SimpleReactValidator","connect","bindActionCreators","getCustomerPlusSettings","updateCustomerPlus","CreateCustomerPlus","getCustomerPlus","updateForm","NormalInput","NormalDateTime","NormalSelect","NormalMultiSelect","NormalButton","withTranslation","AddCustomerPlusClass","state","formFields","fields","id","field_name","display_field_name","visible_in_registration","visible_in_listing","visible_in_profile","mandatory","data_type","selection","isLoading","isMounted","updateState","data","setState","loadData","props","customerPlusSettings","filter","e","reduce","map","obj","match","params","customerPlusDetail","handleSubmit","type","validator","allValid","showMessages","console","log","forEach","date","Date","d","getDate","day","a","getMonth","month","year","getFullYear","JSON","stringify","res","status","formField","custId","custName","cust_name","history","push","handleCancel","handleChange","target","value","name","Object","assign","handleMultiSelect","field","handleChangeBox","event","checked","handleDatePick","renderFields","extraFields","length","leftLength","col_width","addressFileds","sorted","sort","b","order","rowElements","totalWidth","slice","indexOf","concat","includes","message","validators","element","autoForceUpdate","t","mapStateToProps","customerPlus","mapDispatchToProps","dispatch","AddCustomerPlus"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCustomerPlusSettings,\r\n  updateCustomerPlus,\r\n  CreateCustomerPlus,\r\n  getCustomerPlus,\r\n} from \"redux/actions/customerPlus\";\r\nimport { updateForm } from \"redux/actions/common\";\r\nimport {\r\n  NormalInput,\r\n  NormalDateTime,\r\n  NormalSelect,\r\n  NormalMultiSelect,\r\n  NormalButton,\r\n} from \"component/common\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class AddCustomerPlusClass extends Component {\r\n  state = {\r\n    formFields: {},\r\n    fields: [\r\n      {\r\n        id: 1,\r\n        field_name: \"cust_dob\",\r\n        display_field_name: \"Customer DOB\",\r\n        visible_in_registration: true,\r\n        visible_in_listing: true,\r\n        visible_in_profile: true,\r\n        mandatory: true,\r\n        data_type: \"Dat\",\r\n        selection: null,\r\n      },\r\n    ],\r\n    isLoading: true,\r\n    isMounted: true,\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.validator = new SimpleReactValidator({\r\n      validators: {},\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    this.loadData();\r\n  }\r\n\r\n  loadData = async () => {\r\n    await this.props.getCustomerPlusSettings(\"details\");\r\n    this.state.fields = this.props.customerPlusSettings.filter(\r\n      e => e.visible_in_registration\r\n    );\r\n    this.state.formFields = this.state.fields.reduce((map, obj) => {\r\n      map[obj.field_name] = \"\";\r\n      return map;\r\n    }, {});\r\n    if (this.props.match.params.id) {\r\n      await this.props.getCustomerPlus(this.props.match.params.id);\r\n      this.state.formFields = this.props.customerPlusDetail;\r\n    }\r\n    this.setState({ isLoading: false });\r\n  };\r\n\r\n  handleSubmit = async type => {\r\n    if (!this.validator.allValid()) return this.validator.showMessages();\r\n    this.setState({ isLoading: true });\r\n    console.log(this.state.formFields);\r\n    try {\r\n      this.state.fields\r\n        .filter(e => e.data_type == \"date\")\r\n        .forEach(e => {\r\n          if (this.state.formFields[e.field_name]) {\r\n            let date = new Date(this.state.formFields[e.field_name]);\r\n            let d = date.getDate();\r\n            let day = d < 10 ? \"0\" + d : d;\r\n            let a = date.getMonth() + 1;\r\n            let month = a < 10 ? \"0\" + a : a;\r\n            let year = date.getFullYear();\r\n            this.state.formFields[e.field_name] = `${year}-${month}-${day}`;\r\n          }\r\n        });\r\n      if (this.props.match.params.id) {\r\n        var formFields = {};\r\n        this.state.fields.forEach(e => {\r\n          formFields[e.field_name] = this.state.formFields[e.field_name];\r\n        });\r\n        var res = await this.props.updateCustomerPlus(\r\n          this.props.match.params.id + \"/\",\r\n          JSON.stringify(formFields)\r\n        );\r\n        if (res.status == 200) {\r\n          if (type === \"catalog\") {\r\n            let formField = { custId: 0, custName: \"\" };\r\n            formField[\"custId\"] = res.data.id;\r\n            formField[\"custName\"] = res.data.cust_name;\r\n            this.setState({ isLoading: false });\r\n            await this.props.updateForm(\"basicApptDetail\", formField);\r\n            this.props.history.push(`/admin/cart`);\r\n          } else {\r\n            this.setState({ isLoading: false });\r\n            this.props.history.push(\r\n              `/admin/customerplus/${this.props.match.params.id}/details`\r\n            );\r\n          }\r\n        }\r\n      } else {\r\n        var res = await this.props.CreateCustomerPlus(\r\n          JSON.stringify(this.state.formFields)\r\n        );\r\n        if (type === \"catalog\") {\r\n          let formField = { custId: 0, custName: \"\" };\r\n          formField[\"custId\"] = res.data.id;\r\n          formField[\"custName\"] = res.data.cust_name;\r\n          await this.props.updateForm(\"basicApptDetail\", formField);\r\n          this.props.history.push(\"/admin/cart\");\r\n        } else {\r\n          this.setState({ isLoading: false });\r\n          this.props.history.push(`/admin/customerPlus`);\r\n        }\r\n      }\r\n    } catch (e) {}\r\n    this.setState({ isLoading: false });\r\n  };\r\n\r\n  handleCancel = () => {\r\n    if (this.props.match.params.id) {\r\n      this.props.history.push(\r\n        `/admin/customerplus/${this.props.match.params.id}/details`\r\n      );\r\n    } else {\r\n      this.props.history.push(`/admin/customerplus`);\r\n    }\r\n  };\r\n\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleMultiSelect = (field, e) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[field] = e;\r\n\r\n    this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleChangeBox = event => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[event.target.name] = event.target.checked;\r\n\r\n    this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleDatePick = async (name, value) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  renderFields = () => {\r\n    let extraFields =\r\n      this.state.fields.filter(e => e.field_name == \"cust_address\").length > 0\r\n        ? this.state.fields.filter(e => e.field_name.match(/cust_address\\w+/))\r\n        : [];\r\n    let leftLength =\r\n      extraFields.length > 0\r\n        ? (12 - extraFields[0].col_width) * extraFields.length\r\n        : 0;\r\n    console.log(leftLength, \"len\");\r\n    let addressFileds = extraFields.map(e => {\r\n      return (\r\n        <div className=\"input-group pb-2\">\r\n          <NormalInput\r\n            placeholder=\"Enter here\"\r\n            value={this.state.formFields[e.field_name]}\r\n            name={e.field_name}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n      );\r\n    });\r\n    let sorted = this.state.fields.sort((a, b) => {\r\n      if (a.order > b.order) return 1;\r\n      else return -1;\r\n    });\r\n    let rowElements = [];\r\n    let totalWidth = 0;\r\n    sorted\r\n      .slice(sorted.indexOf(extraFields[extraFields.length - 1]) + 1)\r\n      .forEach(e => {\r\n        totalWidth += e.col_width;\r\n        if (totalWidth <= leftLength) rowElements.push(e);\r\n        else return;\r\n      });\r\n    console.log(sorted, \"sorted fields\");\r\n    console.log(rowElements, \"row fields\");\r\n    return sorted\r\n      .slice(0, sorted.indexOf(extraFields[0]))\r\n      .concat(\r\n        sorted.slice(sorted.indexOf(rowElements[rowElements.length - 1]) + 1)\r\n      )\r\n      .map(e => {\r\n        if (e.field_name.includes(\"cust_address\")) {\r\n          return (\r\n            <>\r\n              <div className={`col-md-${e.col_width} pb-md-4`}>\r\n                <label className=\"text-left text-black common-label-text fs-17 p-0\">\r\n                  {e.display_field_name}\r\n                </label>\r\n                <div className=\"input-group pb-2\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={this.state.formFields[e.field_name]}\r\n                    name={e.field_name}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {addressFileds}\r\n                {e.mandatory\r\n                  ? this.validator.message(\r\n                      e.display_field_name,\r\n                      this.state.formFields[e.field_name],\r\n                      \"required\"\r\n                    )\r\n                  : null}\r\n              </div>\r\n              <div className={`col-md-${12 - e.col_width} pb-md-4`}>\r\n                <div className=\"row\">\r\n                  {rowElements.map(e => {\r\n                    return (\r\n                      <div className={`col-md-${e.col_width * 2} pb-md-4`}>\r\n                        <label className=\"text-left text-black common-label-text fs-17 p-0\">\r\n                          {e.display_field_name}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          {e.data_type == \"text\" ? (\r\n                            <NormalInput\r\n                              placeholder=\"Enter here\"\r\n                              value={this.state.formFields[e.field_name]}\r\n                              name={e.field_name}\r\n                              onChange={this.handleChange}\r\n                            />\r\n                          ) : e.data_type == \"date\" ? (\r\n                            <NormalDateTime\r\n                              onChange={this.handleDatePick}\r\n                              value={\r\n                                new Date(this.state.formFields[e.field_name])\r\n                              }\r\n                              name={e.field_name}\r\n                              showYearDropdown={true}\r\n                            />\r\n                          ) : e.data_type == \"datetime\" ? (\r\n                            <NormalDateTime\r\n                              onChange={this.handleDatePick}\r\n                              value={\r\n                                new Date(this.state.formFields[e.field_name])\r\n                              }\r\n                              name={e.field_name}\r\n                              showYearDropdown={true}\r\n                            />\r\n                          ) : e.data_type == \"selection\" ? (\r\n                            <NormalSelect\r\n                              options={e.selection}\r\n                              value={this.state.formFields[e.field_name]}\r\n                              name={e.field_name}\r\n                              onChange={this.handleChange}\r\n                            />\r\n                          ) : e.data_type == \"multiSelect\" ? (\r\n                            <NormalMultiSelect\r\n                              options={e.selection}\r\n                              defaultValue={this.state.formFields[e.field_name]}\r\n                              name={e.field_name}\r\n                              handleMultiSelect={e =>\r\n                                this.handleMultiSelect(e.field_name, e)\r\n                              }\r\n                            />\r\n                          ) : e.data_type == \"boolean\" ? (\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={this.state.formFields[e.field_name]}\r\n                              name={e.field_name}\r\n                              onClick={this.handleChangeBox}\r\n                            />\r\n                          ) : e.data_type == \"number\" ? (\r\n                            <NormalInput\r\n                              type=\"number\"\r\n                              placeholder=\"Enter here\"\r\n                              value={this.state.formFields[e.field_name]}\r\n                              name={e.field_name}\r\n                              onChange={this.handleChange}\r\n                            />\r\n                          ) : (\r\n                            \"NO FILED RENDER DATA FOUND\"\r\n                          )}\r\n                        </div>\r\n                        {e.mandatory\r\n                          ? this.validator.message(\r\n                              e.display_field_name,\r\n                              this.state.formFields[e.field_name],\r\n                              \"required\"\r\n                            )\r\n                          : null}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </>\r\n          );\r\n        }\r\n        if (e.data_type == \"date\" || e.data_type == \"datetime\")\r\n          if (!this.state.formFields[e.field_name])\r\n            this.state.formFields[e.field_name] = new Date();\r\n        return (\r\n          <div className={`col-md-${e.col_width} pb-md-4`}>\r\n            <label className=\"text-left text-black common-label-text fs-17 p-0\">\r\n              {e.display_field_name}\r\n            </label>\r\n            <div className=\"input-group\">\r\n              {e.data_type == \"text\" ? (\r\n                <NormalInput\r\n                  placeholder=\"Enter here\"\r\n                  value={this.state.formFields[e.field_name]}\r\n                  name={e.field_name}\r\n                  onChange={this.handleChange}\r\n                />\r\n              ) : e.data_type == \"date\" ? (\r\n                <NormalDateTime\r\n                  onChange={this.handleDatePick}\r\n                  value={new Date(this.state.formFields[e.field_name])}\r\n                  name={e.field_name}\r\n                  showYearDropdown={true}\r\n                />\r\n              ) : e.data_type == \"datetime\" ? (\r\n                <NormalDateTime\r\n                  onChange={this.handleDatePick}\r\n                  value={new Date(this.state.formFields[e.field_name])}\r\n                  name={e.field_name}\r\n                  showYearDropdown={true}\r\n                />\r\n              ) : e.data_type == \"selection\" ? (\r\n                <NormalSelect\r\n                  options={e.selection}\r\n                  value={this.state.formFields[e.field_name]}\r\n                  name={e.field_name}\r\n                  onChange={this.handleChange}\r\n                />\r\n              ) : e.data_type == \"multiSelect\" ? (\r\n                <NormalMultiSelect\r\n                  options={e.selection}\r\n                  defaultValue={this.state.formFields[e.field_name]}\r\n                  name={e.field_name}\r\n                  handleMultiSelect={e =>\r\n                    this.handleMultiSelect(e.field_name, e)\r\n                  }\r\n                />\r\n              ) : e.data_type == \"boolean\" ? (\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={this.state.formFields[e.field_name]}\r\n                  name={e.field_name}\r\n                  onClick={this.handleChangeBox}\r\n                />\r\n              ) : e.data_type == \"number\" ? (\r\n                <NormalInput\r\n                  type=\"number\"\r\n                  placeholder=\"Enter here\"\r\n                  value={this.state.formFields[e.field_name]}\r\n                  name={e.field_name}\r\n                  onChange={this.handleChange}\r\n                />\r\n              ) : (\r\n                \"NO FILED RENDER DATA FOUND\"\r\n              )}\r\n            </div>\r\n            {e.mandatory\r\n              ? this.validator.message(\r\n                  e.display_field_name,\r\n                  this.state.formFields[e.field_name],\r\n                  \"required\"\r\n                )\r\n              : null}\r\n          </div>\r\n        );\r\n      });\r\n  };\r\n\r\n  render() {\r\n    let { isLoading } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"create-customer-section container-fluid\">\r\n        {/* <p className=\"list-heading pb-4\"> {id ? \"Edit\" : \"Add\"} Customer</p> */}\r\n        <div className=\"create-customerplus\">\r\n          <div className=\"head-label-nav\">\r\n            <p\r\n              className=\"category\"\r\n              onClick={() => {\r\n                this.props.match.params.id\r\n                  ? this.props.history.push(\r\n                      `/admin/customerplus/${this.props.match.params.id}/details`\r\n                    )\r\n                  : this.props.history.push(`/admin/customerplus/`);\r\n              }}\r\n            >\r\n              {t(\"Customer\")}\r\n            </p>\r\n            <i className=\"icon-right mx-md-3\"></i>\r\n            <p className=\"sub-category\">\r\n              {this.props.match.params.id ? \"Edit\" : \"Add\"} {t(\"New Customer\")}\r\n            </p>\r\n          </div>\r\n          <div className=\"customer-detail\">\r\n            {isLoading ? (\r\n              <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                <div class=\"spinner-border\" role=\"status\">\r\n                  <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <div className=\"form-group mb-4 pb-2 row\">\r\n                  {this.renderFields()}\r\n                </div>\r\n                <div className=\"row d-flex justify-content-center\">\r\n                  <div className=\"col-md-4 col-sm-12 mb-4\">\r\n                    <NormalButton\r\n                      onClick={this.handleCancel}\r\n                      label=\"CANCEL\"\r\n                      danger={true}\r\n                      className=\"mr-2 col-12\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-md-4 col-sm-12 mb-4\">\r\n                    <NormalButton\r\n                      onClick={() => this.handleSubmit()}\r\n                      label=\"SAVE\"\r\n                      success={true}\r\n                      className=\"mr-2 col-12\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-md-4 col-sm-12 mb-4\">\r\n                    <NormalButton\r\n                      onClick={() => this.handleSubmit(\"catalog\")}\r\n                      label=\"SAVE & CATALOG\"\r\n                      success={true}\r\n                      className=\"mr-2 col-12\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  customerPlusDetail: state.customerPlus.customerPlusDetail,\r\n  customerPlusSettings: state.customerPlus.customerPlusSettings,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCustomerPlusSettings,\r\n      updateCustomerPlus,\r\n      CreateCustomerPlus,\r\n      getCustomerPlus,\r\n      updateForm,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const AddCustomerPlus = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(AddCustomerPlusClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}