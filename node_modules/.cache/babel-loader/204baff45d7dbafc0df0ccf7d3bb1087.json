{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\Cart\\\\treatmentDone\\\\reversal.js\";\nimport React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { NormalButton, NormalInput, NormalTextarea, NormalRadio, NormalSelect } from \"component/common\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport _ from \"lodash\";\nimport { history } from \"helpers\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\nimport SimpleReactValidator from \"simple-react-validator\"; // import { Treatment, Payment, EditCart } from './cart/index';\n\nimport service from \"assets/images/make-up-brush.png\"; // import Discount from './cart/discount';\n\nimport { FormGroup, Label, Input } from \"reactstrap\";\nexport class ReversalClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tstaffList: [],\n      cartData: {},\n      formFields: {\n        type: \"\",\n        adj_value: \"\",\n        reason: \"\",\n        remark: \"\"\n      },\n      headerDetails: {},\n      isShowBalance: false,\n      transactioRecord: [],\n      reasonOption: [],\n      afterAdjustment: \"\"\n    };\n\n    this.componentWillMount = () => {\n      // this.getCart();\n      this.validator = new SimpleReactValidator({\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message text-danger validNo fs14\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 9\n          }\n        }, message),\n        autoForceUpdate: this\n      });\n      this.props.getCommonApi(\"reversereason/\").then(key => {\n        let {\n          data\n        } = key;\n        let {\n          reasonOption\n        } = this.state;\n\n        for (let value of data) {\n          reasonOption.push({\n            value: value.id,\n            label: value.rev_desc\n          });\n        }\n\n        this.setState({\n          reasonOption\n        });\n      });\n      this.getCart();\n    };\n\n    this.getCart = () => {\n      let {\n        cartData,\n        tstaffList,\n        headerDetails,\n        afterAdjustment\n      } = this.state;\n      this.props.getCommonApi(`reversal/?treatment_id=${this.props.reversalId}`).then(key => {\n        cartData = key;\n        tstaffList = key.data;\n        headerDetails = key.header_data;\n        afterAdjustment = key.header_data.total;\n        this.setState({\n          cartData,\n          tstaffList,\n          headerDetails,\n          afterAdjustment\n        });\n      });\n    };\n\n    this.handleShowBalance = () => {\n      let {\n        transactioRecord\n      } = this.state;\n      this.props.getCommonApi(`showbalance/?treatment_id=${this.props.reversalId}`).then(key => {\n        transactioRecord = key.data;\n        this.setState({\n          transactioRecord\n        });\n      });\n    };\n\n    this.handleSubmit = id => {};\n\n    this.handleDialog = () => {};\n\n    this.handleAddReversal = item => {\n      //debugger;\n      let {\n        formFields\n      } = this.state;\n\n      if (this.validator.allValid()) {\n        this.props.commonCreateApi(`reversal/?treatment_id=${this.props.reversalId}&adjustment_value=${formFields.type + formFields.adj_value}&reason_id=${formFields.reason}&remark=${formFields.remark}`).then(res => {\n          window.open(res.data);\n          this.props.handleModal();\n        });\n      } else {\n        this.validator.showMessages();\n      }\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        formFields\n      } = this.state;\n      formFields[name] = value;\n      await this.setState({\n        formFields\n      });\n      this.getAfterAdjustment();\n    };\n\n    this.handleClearLine = () => {};\n\n    this.handleClearAll = () => {};\n\n    this.getAfterAdjustment = () => {\n      let {\n        afterAdjustment,\n        formFields,\n        headerDetails\n      } = this.state;\n\n      if (formFields.type === \"-\") {\n        afterAdjustment = Number(headerDetails.total) - Number(formFields.adj_value);\n      }\n\n      if (formFields.type === \"+\") {\n        afterAdjustment = Number(headerDetails.total) + Number(formFields.adj_value);\n      }\n\n      afterAdjustment = afterAdjustment.toFixed(2);\n      console.log(\"adsfasdfasdfasdf\", afterAdjustment, headerDetails.total, typeof afterAdjustment);\n      this.setState({\n        afterAdjustment\n      });\n    };\n  }\n\n  render() {\n    let {\n      tstaffList = [],\n      Room,\n      new_remark,\n      headerDetails,\n      transactioRecord,\n      reasonOption,\n      reason,\n      formFields,\n      afterAdjustment\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row new-cart treatment-done\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"fs-18 font-700 mb-3 title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, \"Treatment Reversal\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 fs-14\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"fs-14\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, \"Reverse Treatment List\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"fs-14\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, \"Reverse No: \", /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }, headerDetails ? headerDetails.reverse_no : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, \"S.No\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, \"Treatment #\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, \"Content\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, \"Value\")), tstaffList.length > 0 ? tstaffList.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }\n      }, index + 1), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }\n      }, item.treatment_code), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }\n      }, item.course), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3 text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }\n      }, item.unit_amount));\n    }) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-8 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }, \"Total\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, headerDetails ? headerDetails.total : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-8 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, \"Total deposit or Balance\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, headerDetails ? headerDetails.total_depobalance : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-8 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, \"Adjustment Value\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, formFields.adj_value)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-8 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, \"Total credit Note after adjustment\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, Number(afterAdjustment))), /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2 mb-2\",\n      mainbg: true,\n      className: \"fs-15\",\n      label: \"Show Balance\",\n      outline: false,\n      onClick: this.handleShowBalance,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 fs-14\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }\n    }, \"Transaction Record\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, \"Treatment #\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, \"Balance/Deposit\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 d-flex align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, \"Total Reverse Price\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, \"Outstanding\")), transactioRecord.length > 0 ? transactioRecord.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }\n      }, item.treatment_parentcode), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }\n      }, item.balance), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }\n      }, item.reverse_price), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3 text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }\n      }, item.outstanding));\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 fs-14 adjustment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }\n    }, \"Adjustment Proceedure\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }, \"Adjustmet\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 pr-0 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"\n    , {\n      options: [{\n        value: \"-\",\n        label: \"-\"\n      }, {\n        value: \"+\",\n        label: \"+\"\n      }],\n      value: formFields.type,\n      name: \"type\",\n      onChange: this.handleChange,\n      className: \"customer-name py-0\",\n      disabled: Room,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: formFields.adj_value,\n      name: \"adj_value\",\n      onChange: this.handleChange,\n      className: \"customer-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }\n    }, \"Reason\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: reasonOption,\n      value: formFields.reason,\n      name: \"reason\",\n      onChange: this.handleChange,\n      className: \"customer-name py-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 13\n      }\n    }, \"Remark\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalTextarea, {\n      placeholder: \"\",\n      value: formFields.remark,\n      name: \"remark\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 fs-14 pt-4 action-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2\",\n      mainbg: true,\n      className: \" fs-15 confirm\",\n      label: \"Confirm\",\n      outline: false,\n      onClick: this.handleAddReversal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  selected_cstomer: state.common.selected_cstomer,\n  basicApptDetail: state.appointment.basicApptDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    // getCustomer,\n    getCommonApi,\n    updateForm,\n    commonCreateApi,\n    commonPatchApi,\n    commonDeleteApi\n  }, dispatch);\n};\n\nexport const Reversal = connect(mapStateToProps, mapDispatchToProps)(ReversalClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/treatmentDone/reversal.js"],"names":["React","Component","NormalButton","NormalInput","NormalTextarea","NormalRadio","NormalSelect","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","service","FormGroup","Label","Input","ReversalClass","state","tstaffList","cartData","formFields","type","adj_value","reason","remark","headerDetails","isShowBalance","transactioRecord","reasonOption","afterAdjustment","componentWillMount","validator","element","message","autoForceUpdate","props","then","key","data","value","push","id","label","rev_desc","setState","getCart","reversalId","header_data","total","handleShowBalance","handleSubmit","handleDialog","handleAddReversal","item","allValid","res","window","open","handleModal","showMessages","handleChange","target","name","getAfterAdjustment","handleClearLine","handleClearAll","Number","toFixed","console","log","render","Room","new_remark","reverse_no","length","map","index","treatment_code","course","unit_amount","total_depobalance","treatment_parentcode","balance","reverse_price","outstanding","mapStateToProps","selected_cstomer","common","basicApptDetail","appointment","mapDispatchToProps","dispatch","Reversal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalButton,\r\n  NormalInput,\r\n  NormalTextarea,\r\n  NormalRadio,\r\n  NormalSelect,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\n// import { Treatment, Payment, EditCart } from './cart/index';\r\nimport service from \"assets/images/make-up-brush.png\";\r\n// import Discount from './cart/discount';\r\nimport { FormGroup, Label, Input } from \"reactstrap\";\r\n\r\nexport class ReversalClass extends Component {\r\n  state = {\r\n    tstaffList: [],\r\n    cartData: {},\r\n    formFields: {\r\n      type: \"\",\r\n      adj_value: \"\",\r\n      reason: \"\",\r\n      remark: \"\",\r\n    },\r\n    headerDetails: {},\r\n    isShowBalance: false,\r\n    transactioRecord: [],\r\n    reasonOption: [],\r\n    afterAdjustment: \"\",\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    // this.getCart();\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    this.props.getCommonApi(\"reversereason/\").then(key => {\r\n      let { data } = key;\r\n      let { reasonOption } = this.state;\r\n      for (let value of data) {\r\n        reasonOption.push({ value: value.id, label: value.rev_desc });\r\n      }\r\n      this.setState({ reasonOption });\r\n    });\r\n    this.getCart();\r\n  };\r\n\r\n  getCart = () => {\r\n    let { cartData, tstaffList, headerDetails, afterAdjustment } = this.state;\r\n    this.props\r\n      .getCommonApi(`reversal/?treatment_id=${this.props.reversalId}`)\r\n      .then(key => {\r\n        cartData = key;\r\n        tstaffList = key.data;\r\n        headerDetails = key.header_data;\r\n        afterAdjustment = key.header_data.total;\r\n        this.setState({ cartData, tstaffList, headerDetails, afterAdjustment });\r\n      });\r\n  };\r\n\r\n  handleShowBalance = () => {\r\n    let { transactioRecord } = this.state;\r\n\r\n    this.props\r\n      .getCommonApi(`showbalance/?treatment_id=${this.props.reversalId}`)\r\n      .then(key => {\r\n        transactioRecord = key.data;\r\n        this.setState({ transactioRecord });\r\n      });\r\n  };\r\n\r\n  handleSubmit = id => {};\r\n\r\n  handleDialog = () => {};\r\n\r\n  handleAddReversal = item => {\r\n    //debugger;\r\n    let { formFields } = this.state;\r\n    if (this.validator.allValid()) {\r\n      this.props\r\n        .commonCreateApi(\r\n          `reversal/?treatment_id=${this.props.reversalId}&adjustment_value=${\r\n            formFields.type + formFields.adj_value\r\n          }&reason_id=${formFields.reason}&remark=${formFields.remark}`\r\n        )\r\n        .then(res => {\r\n          window.open(res.data);\r\n          this.props.handleModal();\r\n        });\r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    this.getAfterAdjustment();\r\n  };\r\n\r\n  handleClearLine = () => {};\r\n\r\n  handleClearAll = () => {};\r\n\r\n  getAfterAdjustment = () => {\r\n    let { afterAdjustment, formFields, headerDetails } = this.state;\r\n    if (formFields.type === \"-\") {\r\n      afterAdjustment =\r\n        Number(headerDetails.total) - Number(formFields.adj_value);\r\n    }\r\n    if (formFields.type === \"+\") {\r\n      afterAdjustment =\r\n        Number(headerDetails.total) + Number(formFields.adj_value);\r\n    }\r\n    afterAdjustment = afterAdjustment.toFixed(2);\r\n    console.log(\r\n      \"adsfasdfasdfasdf\",\r\n      afterAdjustment,\r\n      headerDetails.total,\r\n      typeof afterAdjustment\r\n    );\r\n    this.setState({\r\n      afterAdjustment,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      tstaffList = [],\r\n      Room,\r\n      new_remark,\r\n      headerDetails,\r\n      transactioRecord,\r\n      reasonOption,\r\n      reason,\r\n      formFields,\r\n      afterAdjustment,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"row new-cart treatment-done\">\r\n        <div className=\"col-12\">\r\n          <p className=\"fs-18 font-700 mb-3 title\">Treatment Reversal</p>\r\n        </div>\r\n\r\n        <div className=\"col-6 fs-14\">\r\n          <p className=\"fs-14\">Reverse Treatment List</p>\r\n          <p className=\"fs-14\">\r\n            Reverse No: <b>{headerDetails ? headerDetails.reverse_no : \"\"}</b>\r\n          </p>\r\n          <div className=\"row\">\r\n            <div className=\"col-1\">S.No</div>\r\n            <div className=\"col-3\">Treatment #</div>\r\n            <div className=\"col-4\">Content</div>\r\n            <div className=\"col-3 text-center\">Value</div>\r\n          </div>\r\n          {tstaffList.length > 0\r\n            ? tstaffList.map((item, index) => {\r\n                return (\r\n                  <div className=\"row\">\r\n                    <div className=\"col-1\">{index + 1}</div>\r\n                    <div className=\"col-3\">{item.treatment_code}</div>\r\n                    <div className=\"col-4\">{item.course}</div>\r\n                    <div className=\"col-3 text-center\">{item.unit_amount}</div>\r\n                  </div>\r\n                );\r\n              })\r\n            : \"\"}\r\n          <div className=\"row\">\r\n            <div className=\"col-8 text-right\">Total</div>\r\n            <div className=\"col-3 text-center\">\r\n              {headerDetails ? headerDetails.total : \"\"}\r\n            </div>\r\n          </div>\r\n          <div className=\"row mb-2\">\r\n            <div className=\"col-8 text-right\">Total deposit or Balance</div>\r\n            <div className=\"col-3 text-center\">\r\n              {headerDetails ? headerDetails.total_depobalance : \"\"}\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row mb-3\">\r\n            <div className=\"col-8 text-right\">Adjustment Value</div>\r\n            <div className=\"col-3 text-center\">{formFields.adj_value}</div>\r\n          </div>\r\n          <div className=\"row mb-3\">\r\n            <div className=\"col-8 text-right\">\r\n              Total credit Note after adjustment\r\n            </div>\r\n            <div className=\"col-3 text-center\">{Number(afterAdjustment)}</div>\r\n          </div>\r\n          <NormalButton\r\n            buttonClass={\"mx-2 mb-2\"}\r\n            mainbg={true}\r\n            className=\"fs-15\"\r\n            label=\"Show Balance\"\r\n            outline={false}\r\n            onClick={this.handleShowBalance}\r\n          />\r\n        </div>\r\n        <div className=\"col-6 fs-14\">\r\n          <p>Transaction Record</p>\r\n          <div className=\"row\">\r\n            <div className=\"col-3\">Treatment #</div>\r\n            <div className=\"col-3\">Balance/Deposit</div>\r\n            <div className=\"col-3 d-flex align-items-center justify-content-center\">Total Reverse Price</div>\r\n            <div className=\"col-3\">Outstanding</div>\r\n          </div>\r\n\r\n          {transactioRecord.length > 0\r\n            ? transactioRecord.map((item, index) => {\r\n                return (\r\n                  <div className=\"row\">\r\n                    <div className=\"col-3\">{item.treatment_parentcode}</div>\r\n                    <div className=\"col-3\">{item.balance}</div>\r\n                    <div className=\"col-3\">{item.reverse_price}</div>\r\n                    <div className=\"col-3 text-center\">{item.outstanding}</div>\r\n                  </div>\r\n                );\r\n              })\r\n            : \"\"}\r\n        </div>\r\n\r\n        <div className=\"col-6 fs-14 adjustment\">\r\n          <p>Adjustment Proceedure</p>\r\n          <div className=\"row mb-1\">\r\n            <div className=\"col-2\">Adjustmet</div>\r\n            <div className=\"col-3 pr-0 \">\r\n              <div>\r\n                <NormalSelect\r\n                  // placeholder=\"Enter here\"\r\n                  options={[\r\n                    { value: \"-\", label: \"-\" },\r\n                    { value: \"+\", label: \"+\" },\r\n                  ]}\r\n                  value={formFields.type}\r\n                  name=\"type\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-0\"\r\n                  disabled={Room}\r\n                />\r\n              </div>\r\n              {/* {this.validator.message('Adjustment type', formFields.type, 'required')} */}\r\n            </div>\r\n            <div className=\"col-6\">\r\n              <div>\r\n                <NormalInput\r\n                  value={formFields.adj_value}\r\n                  name=\"adj_value\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name\"\r\n                />\r\n              </div>\r\n              {/* {this.validator.message('Adjustment value', formFields.adj_value, 'required')} */}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row mb-1\">\r\n            <div className=\"col-2\">Reason</div>\r\n\r\n            <div className=\"col-6 \">\r\n              <NormalSelect\r\n                options={reasonOption}\r\n                value={formFields.reason}\r\n                name=\"reason\"\r\n                onChange={this.handleChange}\r\n                className=\"customer-name py-0\"\r\n              />\r\n              {/* {this.validator.message('reason', formFields.reason, 'required')} */}\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-2\">Remark</div>\r\n\r\n            <div className=\"col-6\">\r\n              <NormalTextarea\r\n                placeholder=\"\"\r\n                value={formFields.remark}\r\n                name=\"remark\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-12 fs-14 pt-4 action-bar\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6 d-flex\">\r\n              {/* <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-line\"\r\n                                label=\"Update\"\r\n                                outline={false}\r\n                                onClick={this.handleClearLine}\r\n                            />\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-all\"\r\n                                label=\"Undo\"\r\n                                outline={false}\r\n                                onClick={this.handleClearAll}\r\n                            /> */}\r\n            </div>\r\n            <div className=\"col-4 text-right\"></div>\r\n            <div className=\"col-2 text-right\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label=\"Confirm\"\r\n                outline={false}\r\n                onClick={this.handleAddReversal}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const Reversal = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ReversalClass);\r\n"]},"metadata":{},"sourceType":"module"}