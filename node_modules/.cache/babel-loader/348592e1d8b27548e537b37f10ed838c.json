{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/tooltip.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.plugin = exports.Tooltip = void 0;\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _inflector = require(\"../../core/utils/inflector\");\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _renderer2 = require(\"./renderers/renderer\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _utils = require(\"./utils\");\n\nvar _format_helper = _interopRequireDefault(require(\"../../format_helper\"));\n\nvar _plaque = require(\"./plaque\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar format = _format_helper.default.format;\nvar mathCeil = Math.ceil;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar window = (0, _window.getWindow)();\nvar DEFAULT_HTML_GROUP_WIDTH = 3e3;\n\nfunction hideElement($element) {\n  $element.css({\n    left: \"-9999px\"\n  }).detach();\n}\n\nfunction getSpecialFormatOptions(options, specialFormat) {\n  var result = options;\n\n  switch (specialFormat) {\n    case \"argument\":\n      result = {\n        format: options.argumentFormat\n      };\n      break;\n\n    case \"percent\":\n      result = {\n        format: {\n          type: \"percent\",\n          precision: options.format && options.format.percentPrecision\n        }\n      };\n  }\n\n  return result;\n}\n\nvar Tooltip = function (params) {\n  var that = this;\n  var renderer;\n  that._eventTrigger = params.eventTrigger;\n  that._widgetRoot = params.widgetRoot;\n  that._widget = params.widget;\n  that._wrapper = (0, _renderer.default)(\"<div>\").css({\n    position: \"absolute\",\n    overflow: \"hidden\",\n    pointerEvents: \"none\"\n  }).addClass(params.cssClass);\n  that._renderer = renderer = new _renderer2.Renderer({\n    pathModified: params.pathModified,\n    container: that._wrapper[0]\n  });\n  var root = renderer.root;\n  root.attr({\n    \"pointer-events\": \"none\"\n  });\n  that._text = renderer.text(void 0, 0, 0);\n  that._textGroupHtml = (0, _renderer.default)(\"<div>\").css({\n    position: \"absolute\",\n    padding: 0,\n    margin: 0,\n    border: \"0px solid transparent\"\n  }).appendTo(that._wrapper);\n  that._textHtml = (0, _renderer.default)(\"<div>\").css({\n    position: \"relative\",\n    display: \"inline-block\",\n    padding: 0,\n    margin: 0,\n    border: \"0px solid transparent\"\n  }).appendTo(that._textGroupHtml);\n};\n\nexports.Tooltip = Tooltip;\nTooltip.prototype = {\n  constructor: Tooltip,\n  dispose: function () {\n    this._wrapper.remove();\n\n    this._renderer.dispose();\n\n    this._options = this._widgetRoot = null;\n  },\n  _getContainer: function () {\n    var options = this._options;\n    var container = (0, _renderer.default)(this._widgetRoot).closest(options.container);\n\n    if (0 === container.length) {\n      container = (0, _renderer.default)(options.container);\n    }\n\n    return (container.length ? container : (0, _renderer.default)(\"body\")).get(0);\n  },\n  setTemplate: function (contentTemplate) {\n    var that = this;\n    that._template = contentTemplate ? that._widget._getTemplate(contentTemplate) : null;\n  },\n  setOptions: function (options) {\n    var _this = this;\n\n    options = options || {};\n    var that = this;\n    that._options = options;\n    that._textFontStyles = (0, _utils.patchFontOptions)(options.font);\n    that._textFontStyles.color = that._textFontStyles.fill;\n\n    that._wrapper.css({\n      zIndex: options.zIndex\n    });\n\n    that._customizeTooltip = options.customizeTooltip;\n    var textGroupHtml = that._textGroupHtml;\n    var textHtml = that._textHtml;\n\n    if (this.plaque) {\n      this.plaque.clear();\n    }\n\n    this.setTemplate(options.contentTemplate);\n    var pointerEvents = options.interactive ? \"auto\" : \"none\";\n\n    if (options.interactive) {\n      this._renderer.root.css({\n        \"-ms-user-select\": \"auto\",\n        \"-moz-user-select\": \"auto\",\n        \"-webkit-user-select\": \"auto\"\n      });\n    }\n\n    var drawTooltip = function (_ref) {\n      var group = _ref.group,\n          onRender = _ref.onRender,\n          eventData = _ref.eventData,\n          isMoving = _ref.isMoving,\n          _ref$templateCallback = _ref.templateCallback,\n          templateCallback = void 0 === _ref$templateCallback ? function () {} : _ref$templateCallback;\n      var state = that._state;\n\n      if (!isMoving) {\n        var template = that._template;\n        var useTemplate = template && !state.formatObject.skipTemplate;\n\n        if (state.html || useTemplate) {\n          textGroupHtml.css({\n            color: state.textColor,\n            width: DEFAULT_HTML_GROUP_WIDTH,\n            pointerEvents: pointerEvents\n          });\n\n          if (useTemplate) {\n            template.render({\n              model: state.formatObject,\n              container: textHtml,\n              onRendered: function () {\n                state.html = textHtml.html();\n\n                if (0 === textHtml.width() && 0 === textHtml.height()) {\n                  _this.plaque.clear();\n\n                  templateCallback(false);\n                  return;\n                }\n\n                onRender();\n\n                that._riseEvents(eventData);\n\n                that._moveWrapper();\n\n                that.plaque.customizeCloud({\n                  fill: state.color,\n                  stroke: state.borderColor,\n                  \"pointer-events\": pointerEvents\n                });\n                templateCallback(true);\n              }\n            });\n            return;\n          } else {\n            that._text.attr({\n              text: \"\"\n            });\n\n            textHtml.html(state.html);\n          }\n        } else {\n          that._text.css({\n            fill: state.textColor\n          }).attr({\n            text: state.text,\n            \"class\": options.cssClass,\n            \"pointer-events\": pointerEvents\n          }).append(group.attr({\n            align: options.textAlignment\n          }));\n        }\n\n        that._riseEvents(eventData);\n\n        that.plaque.customizeCloud({\n          fill: state.color,\n          stroke: state.borderColor,\n          \"pointer-events\": pointerEvents\n        });\n      }\n\n      onRender();\n\n      that._moveWrapper();\n\n      return true;\n    };\n\n    this.plaque = new _plaque.Plaque({\n      opacity: that._options.opacity,\n      color: that._options.color,\n      border: that._options.border,\n      paddingLeftRight: that._options.paddingLeftRight,\n      paddingTopBottom: that._options.paddingTopBottom,\n      arrowLength: that._options.arrowLength,\n      arrowWidth: 20,\n      shadow: that._options.shadow,\n      cornerRadius: that._options.cornerRadius\n    }, that, that._renderer.root, drawTooltip, true, function (tooltip, g) {\n      var state = tooltip._state;\n\n      if (state.html) {\n        var bBox;\n        var getComputedStyle = window.getComputedStyle;\n\n        if (getComputedStyle) {\n          bBox = getComputedStyle(textHtml.get(0));\n          bBox = {\n            x: 0,\n            y: 0,\n            width: mathCeil(parseFloat(bBox.width)),\n            height: mathCeil(parseFloat(bBox.height))\n          };\n        } else {\n          bBox = textHtml.get(0).getBoundingClientRect();\n          bBox = {\n            x: 0,\n            y: 0,\n            width: mathCeil(bBox.width ? bBox.width : bBox.right - bBox.left),\n            height: mathCeil(bBox.height ? bBox.height : bBox.bottom - bBox.top)\n          };\n        }\n\n        return bBox;\n      }\n\n      return g.getBBox();\n    }, function (tooltip, g, x, y) {\n      var state = tooltip._state;\n\n      if (state.html) {\n        that._textGroupHtml.css({\n          left: x,\n          top: y\n        });\n      } else {\n        g.move(x, y);\n      }\n    });\n    return that;\n  },\n  _riseEvents: function (eventData) {\n    var that = this;\n    that._eventData && that._eventTrigger(\"tooltipHidden\", that._eventData);\n    that._eventData = eventData;\n\n    that._eventTrigger(\"tooltipShown\", that._eventData);\n  },\n  setRendererOptions: function (options) {\n    this._renderer.setOptions(options);\n\n    this._textGroupHtml.css({\n      direction: options.rtl ? \"rtl\" : \"ltr\"\n    });\n\n    return this;\n  },\n  update: function (options) {\n    var that = this;\n    that.setOptions(options);\n    hideElement(that._wrapper);\n    var normalizedCSS = {};\n\n    for (var name in that._textFontStyles) {\n      normalizedCSS[(0, _inflector.camelize)(name)] = that._textFontStyles[name];\n    }\n\n    that._textGroupHtml.css(normalizedCSS);\n\n    that._text.css(that._textFontStyles);\n\n    that._eventData = null;\n    return that;\n  },\n  _prepare: function (formatObject, state) {\n    var customizeTooltip = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._customizeTooltip;\n    var options = this._options;\n    var customize = {};\n\n    if ((0, _type.isFunction)(customizeTooltip)) {\n      customize = customizeTooltip.call(formatObject, formatObject);\n      customize = (0, _type.isPlainObject)(customize) ? customize : {};\n\n      if (\"text\" in customize) {\n        state.text = (0, _type.isDefined)(customize.text) ? String(customize.text) : \"\";\n      }\n\n      if (\"html\" in customize) {\n        state.html = (0, _type.isDefined)(customize.html) ? String(customize.html) : \"\";\n      }\n    }\n\n    if (!(\"text\" in state) && !(\"html\" in state)) {\n      state.text = formatObject.valueText || formatObject.description || \"\";\n    }\n\n    state.color = customize.color || options.color;\n    state.borderColor = customize.borderColor || (options.border || {}).color;\n    state.textColor = customize.fontColor || (this._textFontStyles || {}).color;\n    return !!state.text || !!state.html || !!this._template;\n  },\n  show: function (formatObject, params, eventData, customizeTooltip, templateCallback) {\n    var that = this;\n\n    if (that._options.forceEvents) {\n      eventData.x = params.x;\n      eventData.y = params.y - params.offset;\n\n      that._riseEvents(eventData);\n\n      return true;\n    }\n\n    var state = {\n      formatObject: formatObject,\n      eventData: eventData,\n      templateCallback: templateCallback\n    };\n\n    if (!that._prepare(formatObject, state, customizeTooltip)) {\n      return false;\n    }\n\n    that._state = state;\n\n    that._wrapper.appendTo(that._getContainer());\n\n    that._clear();\n\n    var parameters = (0, _extend.extend)({}, that._options, {\n      canvas: that._getCanvas()\n    }, state, {\n      x: params.x,\n      y: params.y,\n      offset: params.offset\n    });\n    return this.plaque.clear().draw(parameters);\n  },\n  isCursorOnTooltip: function (x, y) {\n    if (this._options.interactive && this.isEnabled()) {\n      var box = this.plaque.getBBox();\n      return x > box.x && x < box.x + box.width && y > box.y && y < box.y + box.height;\n    }\n\n    return false;\n  },\n  hide: function () {\n    var that = this;\n    hideElement(that._wrapper);\n\n    if (that._eventData) {\n      that._eventTrigger(\"tooltipHidden\", that._eventData);\n\n      that._clear();\n\n      that._eventData = null;\n    }\n  },\n  _clear: function () {\n    this._textHtml.empty();\n  },\n  move: function (x, y, offset) {\n    this.plaque.draw({\n      x: x,\n      y: y,\n      offset: offset,\n      canvas: this._getCanvas(),\n      isMoving: true\n    });\n  },\n  _moveWrapper: function () {\n    var that = this;\n    var plaqueBBox = this.plaque.getBBox();\n\n    that._renderer.resize(plaqueBBox.width, plaqueBBox.height);\n\n    var offset = that._wrapper.css({\n      left: 0,\n      top: 0\n    }).offset();\n\n    var left = plaqueBBox.x;\n    var top = plaqueBBox.y;\n\n    that._wrapper.css({\n      left: left - offset.left,\n      top: top - offset.top\n    });\n\n    this.plaque.moveRoot(-left, -top);\n\n    if (this._state.html) {\n      that._textHtml.css({\n        left: -left,\n        top: -top\n      });\n\n      that._textGroupHtml.css({\n        width: that._textHtml.width()\n      });\n    }\n  },\n  formatValue: function (value, _specialFormat) {\n    var options = _specialFormat ? getSpecialFormatOptions(this._options, _specialFormat) : this._options;\n    return format(value, options.format);\n  },\n  getLocation: function () {\n    return (0, _utils.normalizeEnum)(this._options.location);\n  },\n  isEnabled: function () {\n    return !!this._options.enabled || !!this._options.forceEvents;\n  },\n  isShared: function () {\n    return !!this._options.shared;\n  },\n  _getCanvas: function () {\n    var container = this._getContainer();\n\n    var containerBox = container.getBoundingClientRect();\n\n    var html = _dom_adapter.default.getDocumentElement();\n\n    var document = _dom_adapter.default.getDocument();\n\n    var left = window.pageXOffset || html.scrollLeft || 0;\n    var top = window.pageYOffset || html.scrollTop || 0;\n    var box = {\n      left: left,\n      top: top,\n      width: mathMax(html.clientWidth, document.body.clientWidth) + left,\n      height: mathMax(document.body.scrollHeight, html.scrollHeight, document.body.offsetHeight, html.offsetHeight, document.body.clientHeight, html.clientHeight),\n      right: 0,\n      bottom: 0\n    };\n\n    if (container !== _dom_adapter.default.getBody()) {\n      left = mathMax(box.left, box.left + containerBox.left);\n      top = mathMax(box.top, box.top + containerBox.top);\n      box.width = mathMin(containerBox.width, box.width) + left + box.left;\n      box.height = mathMin(containerBox.height, box.height) + top + box.top;\n      box.left = left;\n      box.top = top;\n    }\n\n    return box;\n  }\n};\nvar plugin = {\n  name: \"tooltip\",\n  init: function () {\n    this._initTooltip();\n  },\n  dispose: function () {\n    this._disposeTooltip();\n  },\n  members: {\n    _initTooltip: function () {\n      this._tooltip = new Tooltip({\n        cssClass: this._rootClassPrefix + \"-tooltip\",\n        eventTrigger: this._eventTrigger,\n        pathModified: this.option(\"pathModified\"),\n        widgetRoot: this.element(),\n        widget: this\n      });\n    },\n    _disposeTooltip: function () {\n      this._tooltip.dispose();\n\n      this._tooltip = null;\n    },\n    _setTooltipRendererOptions: function () {\n      this._tooltip.setRendererOptions(this._getRendererOptions());\n    },\n    _setTooltipOptions: function () {\n      this._tooltip.update(this._getOption(\"tooltip\"));\n    }\n  },\n  extenders: {\n    _stopCurrentHandling: function () {\n      this._tooltip && this._tooltip.hide();\n    }\n  },\n  customize: function (constructor) {\n    var proto = constructor.prototype;\n    proto._eventsMap.onTooltipShown = {\n      name: \"tooltipShown\"\n    };\n    proto._eventsMap.onTooltipHidden = {\n      name: \"tooltipHidden\"\n    };\n    constructor.addChange({\n      code: \"TOOLTIP_RENDERER\",\n      handler: function () {\n        this._setTooltipRendererOptions();\n      },\n      isThemeDependent: true,\n      isOptionChange: true\n    });\n    constructor.addChange({\n      code: \"TOOLTIP\",\n      handler: function () {\n        this._setTooltipOptions();\n      },\n      isThemeDependent: true,\n      isOptionChange: true,\n      option: \"tooltip\"\n    });\n  },\n  fontFields: [\"tooltip.font\"]\n};\nexports.plugin = plugin;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/core/tooltip.js"],"names":["exports","plugin","Tooltip","_dom_adapter","_interopRequireDefault","require","_window","_inflector","_renderer","_renderer2","_type","_extend","_utils","_format_helper","_plaque","obj","__esModule","format","default","mathCeil","Math","ceil","mathMax","max","mathMin","min","window","getWindow","DEFAULT_HTML_GROUP_WIDTH","hideElement","$element","css","left","detach","getSpecialFormatOptions","options","specialFormat","result","argumentFormat","type","precision","percentPrecision","params","that","renderer","_eventTrigger","eventTrigger","_widgetRoot","widgetRoot","_widget","widget","_wrapper","position","overflow","pointerEvents","addClass","cssClass","Renderer","pathModified","container","root","attr","_text","text","_textGroupHtml","padding","margin","border","appendTo","_textHtml","display","prototype","constructor","dispose","remove","_options","_getContainer","closest","length","get","setTemplate","contentTemplate","_template","_getTemplate","setOptions","_this","_textFontStyles","patchFontOptions","font","color","fill","zIndex","_customizeTooltip","customizeTooltip","textGroupHtml","textHtml","plaque","clear","interactive","drawTooltip","_ref","group","onRender","eventData","isMoving","_ref$templateCallback","templateCallback","state","_state","template","useTemplate","formatObject","skipTemplate","html","textColor","width","render","model","onRendered","height","_riseEvents","_moveWrapper","customizeCloud","stroke","borderColor","append","align","textAlignment","Plaque","opacity","paddingLeftRight","paddingTopBottom","arrowLength","arrowWidth","shadow","cornerRadius","tooltip","g","bBox","getComputedStyle","x","y","parseFloat","getBoundingClientRect","right","bottom","top","getBBox","move","_eventData","setRendererOptions","direction","rtl","update","normalizedCSS","name","camelize","_prepare","arguments","customize","isFunction","call","isPlainObject","isDefined","String","valueText","description","fontColor","show","forceEvents","offset","_clear","parameters","extend","canvas","_getCanvas","draw","isCursorOnTooltip","isEnabled","box","hide","empty","plaqueBBox","resize","moveRoot","formatValue","value","_specialFormat","getLocation","normalizeEnum","location","enabled","isShared","shared","containerBox","getDocumentElement","document","getDocument","pageXOffset","scrollLeft","pageYOffset","scrollTop","clientWidth","body","scrollHeight","offsetHeight","clientHeight","getBody","init","_initTooltip","_disposeTooltip","members","_tooltip","_rootClassPrefix","option","element","_setTooltipRendererOptions","_getRendererOptions","_setTooltipOptions","_getOption","extenders","_stopCurrentHandling","proto","_eventsMap","onTooltipShown","onTooltipHidden","addChange","code","handler","isThemeDependent","isOptionChange","fontFields"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/core/tooltip.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.plugin = exports.Tooltip = void 0;\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _inflector = require(\"../../core/utils/inflector\");\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _renderer2 = require(\"./renderers/renderer\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _utils = require(\"./utils\");\r\nvar _format_helper = _interopRequireDefault(require(\"../../format_helper\"));\r\nvar _plaque = require(\"./plaque\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar format = _format_helper.default.format;\r\nvar mathCeil = Math.ceil;\r\nvar mathMax = Math.max;\r\nvar mathMin = Math.min;\r\nvar window = (0, _window.getWindow)();\r\nvar DEFAULT_HTML_GROUP_WIDTH = 3e3;\r\n\r\nfunction hideElement($element) {\r\n    $element.css({\r\n        left: \"-9999px\"\r\n    }).detach()\r\n}\r\n\r\nfunction getSpecialFormatOptions(options, specialFormat) {\r\n    var result = options;\r\n    switch (specialFormat) {\r\n        case \"argument\":\r\n            result = {\r\n                format: options.argumentFormat\r\n            };\r\n            break;\r\n        case \"percent\":\r\n            result = {\r\n                format: {\r\n                    type: \"percent\",\r\n                    precision: options.format && options.format.percentPrecision\r\n                }\r\n            }\r\n    }\r\n    return result\r\n}\r\nvar Tooltip = function(params) {\r\n    var that = this;\r\n    var renderer;\r\n    that._eventTrigger = params.eventTrigger;\r\n    that._widgetRoot = params.widgetRoot;\r\n    that._widget = params.widget;\r\n    that._wrapper = (0, _renderer.default)(\"<div>\").css({\r\n        position: \"absolute\",\r\n        overflow: \"hidden\",\r\n        pointerEvents: \"none\"\r\n    }).addClass(params.cssClass);\r\n    that._renderer = renderer = new _renderer2.Renderer({\r\n        pathModified: params.pathModified,\r\n        container: that._wrapper[0]\r\n    });\r\n    var root = renderer.root;\r\n    root.attr({\r\n        \"pointer-events\": \"none\"\r\n    });\r\n    that._text = renderer.text(void 0, 0, 0);\r\n    that._textGroupHtml = (0, _renderer.default)(\"<div>\").css({\r\n        position: \"absolute\",\r\n        padding: 0,\r\n        margin: 0,\r\n        border: \"0px solid transparent\"\r\n    }).appendTo(that._wrapper);\r\n    that._textHtml = (0, _renderer.default)(\"<div>\").css({\r\n        position: \"relative\",\r\n        display: \"inline-block\",\r\n        padding: 0,\r\n        margin: 0,\r\n        border: \"0px solid transparent\"\r\n    }).appendTo(that._textGroupHtml)\r\n};\r\nexports.Tooltip = Tooltip;\r\nTooltip.prototype = {\r\n    constructor: Tooltip,\r\n    dispose: function() {\r\n        this._wrapper.remove();\r\n        this._renderer.dispose();\r\n        this._options = this._widgetRoot = null\r\n    },\r\n    _getContainer: function() {\r\n        var options = this._options;\r\n        var container = (0, _renderer.default)(this._widgetRoot).closest(options.container);\r\n        if (0 === container.length) {\r\n            container = (0, _renderer.default)(options.container)\r\n        }\r\n        return (container.length ? container : (0, _renderer.default)(\"body\")).get(0)\r\n    },\r\n    setTemplate: function(contentTemplate) {\r\n        var that = this;\r\n        that._template = contentTemplate ? that._widget._getTemplate(contentTemplate) : null\r\n    },\r\n    setOptions: function(options) {\r\n        var _this = this;\r\n        options = options || {};\r\n        var that = this;\r\n        that._options = options;\r\n        that._textFontStyles = (0, _utils.patchFontOptions)(options.font);\r\n        that._textFontStyles.color = that._textFontStyles.fill;\r\n        that._wrapper.css({\r\n            zIndex: options.zIndex\r\n        });\r\n        that._customizeTooltip = options.customizeTooltip;\r\n        var textGroupHtml = that._textGroupHtml;\r\n        var textHtml = that._textHtml;\r\n        if (this.plaque) {\r\n            this.plaque.clear()\r\n        }\r\n        this.setTemplate(options.contentTemplate);\r\n        var pointerEvents = options.interactive ? \"auto\" : \"none\";\r\n        if (options.interactive) {\r\n            this._renderer.root.css({\r\n                \"-ms-user-select\": \"auto\",\r\n                \"-moz-user-select\": \"auto\",\r\n                \"-webkit-user-select\": \"auto\"\r\n            })\r\n        }\r\n        var drawTooltip = function(_ref) {\r\n            var group = _ref.group,\r\n                onRender = _ref.onRender,\r\n                eventData = _ref.eventData,\r\n                isMoving = _ref.isMoving,\r\n                _ref$templateCallback = _ref.templateCallback,\r\n                templateCallback = void 0 === _ref$templateCallback ? function() {} : _ref$templateCallback;\r\n            var state = that._state;\r\n            if (!isMoving) {\r\n                var template = that._template;\r\n                var useTemplate = template && !state.formatObject.skipTemplate;\r\n                if (state.html || useTemplate) {\r\n                    textGroupHtml.css({\r\n                        color: state.textColor,\r\n                        width: DEFAULT_HTML_GROUP_WIDTH,\r\n                        pointerEvents: pointerEvents\r\n                    });\r\n                    if (useTemplate) {\r\n                        template.render({\r\n                            model: state.formatObject,\r\n                            container: textHtml,\r\n                            onRendered: function() {\r\n                                state.html = textHtml.html();\r\n                                if (0 === textHtml.width() && 0 === textHtml.height()) {\r\n                                    _this.plaque.clear();\r\n                                    templateCallback(false);\r\n                                    return\r\n                                }\r\n                                onRender();\r\n                                that._riseEvents(eventData);\r\n                                that._moveWrapper();\r\n                                that.plaque.customizeCloud({\r\n                                    fill: state.color,\r\n                                    stroke: state.borderColor,\r\n                                    \"pointer-events\": pointerEvents\r\n                                });\r\n                                templateCallback(true)\r\n                            }\r\n                        });\r\n                        return\r\n                    } else {\r\n                        that._text.attr({\r\n                            text: \"\"\r\n                        });\r\n                        textHtml.html(state.html)\r\n                    }\r\n                } else {\r\n                    that._text.css({\r\n                        fill: state.textColor\r\n                    }).attr({\r\n                        text: state.text,\r\n                        \"class\": options.cssClass,\r\n                        \"pointer-events\": pointerEvents\r\n                    }).append(group.attr({\r\n                        align: options.textAlignment\r\n                    }))\r\n                }\r\n                that._riseEvents(eventData);\r\n                that.plaque.customizeCloud({\r\n                    fill: state.color,\r\n                    stroke: state.borderColor,\r\n                    \"pointer-events\": pointerEvents\r\n                })\r\n            }\r\n            onRender();\r\n            that._moveWrapper();\r\n            return true\r\n        };\r\n        this.plaque = new _plaque.Plaque({\r\n            opacity: that._options.opacity,\r\n            color: that._options.color,\r\n            border: that._options.border,\r\n            paddingLeftRight: that._options.paddingLeftRight,\r\n            paddingTopBottom: that._options.paddingTopBottom,\r\n            arrowLength: that._options.arrowLength,\r\n            arrowWidth: 20,\r\n            shadow: that._options.shadow,\r\n            cornerRadius: that._options.cornerRadius\r\n        }, that, that._renderer.root, drawTooltip, true, function(tooltip, g) {\r\n            var state = tooltip._state;\r\n            if (state.html) {\r\n                var bBox;\r\n                var getComputedStyle = window.getComputedStyle;\r\n                if (getComputedStyle) {\r\n                    bBox = getComputedStyle(textHtml.get(0));\r\n                    bBox = {\r\n                        x: 0,\r\n                        y: 0,\r\n                        width: mathCeil(parseFloat(bBox.width)),\r\n                        height: mathCeil(parseFloat(bBox.height))\r\n                    }\r\n                } else {\r\n                    bBox = textHtml.get(0).getBoundingClientRect();\r\n                    bBox = {\r\n                        x: 0,\r\n                        y: 0,\r\n                        width: mathCeil(bBox.width ? bBox.width : bBox.right - bBox.left),\r\n                        height: mathCeil(bBox.height ? bBox.height : bBox.bottom - bBox.top)\r\n                    }\r\n                }\r\n                return bBox\r\n            }\r\n            return g.getBBox()\r\n        }, function(tooltip, g, x, y) {\r\n            var state = tooltip._state;\r\n            if (state.html) {\r\n                that._textGroupHtml.css({\r\n                    left: x,\r\n                    top: y\r\n                })\r\n            } else {\r\n                g.move(x, y)\r\n            }\r\n        });\r\n        return that\r\n    },\r\n    _riseEvents: function(eventData) {\r\n        var that = this;\r\n        that._eventData && that._eventTrigger(\"tooltipHidden\", that._eventData);\r\n        that._eventData = eventData;\r\n        that._eventTrigger(\"tooltipShown\", that._eventData)\r\n    },\r\n    setRendererOptions: function(options) {\r\n        this._renderer.setOptions(options);\r\n        this._textGroupHtml.css({\r\n            direction: options.rtl ? \"rtl\" : \"ltr\"\r\n        });\r\n        return this\r\n    },\r\n    update: function(options) {\r\n        var that = this;\r\n        that.setOptions(options);\r\n        hideElement(that._wrapper);\r\n        var normalizedCSS = {};\r\n        for (var name in that._textFontStyles) {\r\n            normalizedCSS[(0, _inflector.camelize)(name)] = that._textFontStyles[name]\r\n        }\r\n        that._textGroupHtml.css(normalizedCSS);\r\n        that._text.css(that._textFontStyles);\r\n        that._eventData = null;\r\n        return that\r\n    },\r\n    _prepare: function(formatObject, state) {\r\n        var customizeTooltip = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._customizeTooltip;\r\n        var options = this._options;\r\n        var customize = {};\r\n        if ((0, _type.isFunction)(customizeTooltip)) {\r\n            customize = customizeTooltip.call(formatObject, formatObject);\r\n            customize = (0, _type.isPlainObject)(customize) ? customize : {};\r\n            if (\"text\" in customize) {\r\n                state.text = (0, _type.isDefined)(customize.text) ? String(customize.text) : \"\"\r\n            }\r\n            if (\"html\" in customize) {\r\n                state.html = (0, _type.isDefined)(customize.html) ? String(customize.html) : \"\"\r\n            }\r\n        }\r\n        if (!(\"text\" in state) && !(\"html\" in state)) {\r\n            state.text = formatObject.valueText || formatObject.description || \"\"\r\n        }\r\n        state.color = customize.color || options.color;\r\n        state.borderColor = customize.borderColor || (options.border || {}).color;\r\n        state.textColor = customize.fontColor || (this._textFontStyles || {}).color;\r\n        return !!state.text || !!state.html || !!this._template\r\n    },\r\n    show: function(formatObject, params, eventData, customizeTooltip, templateCallback) {\r\n        var that = this;\r\n        if (that._options.forceEvents) {\r\n            eventData.x = params.x;\r\n            eventData.y = params.y - params.offset;\r\n            that._riseEvents(eventData);\r\n            return true\r\n        }\r\n        var state = {\r\n            formatObject: formatObject,\r\n            eventData: eventData,\r\n            templateCallback: templateCallback\r\n        };\r\n        if (!that._prepare(formatObject, state, customizeTooltip)) {\r\n            return false\r\n        }\r\n        that._state = state;\r\n        that._wrapper.appendTo(that._getContainer());\r\n        that._clear();\r\n        var parameters = (0, _extend.extend)({}, that._options, {\r\n            canvas: that._getCanvas()\r\n        }, state, {\r\n            x: params.x,\r\n            y: params.y,\r\n            offset: params.offset\r\n        });\r\n        return this.plaque.clear().draw(parameters)\r\n    },\r\n    isCursorOnTooltip: function(x, y) {\r\n        if (this._options.interactive && this.isEnabled()) {\r\n            var box = this.plaque.getBBox();\r\n            return x > box.x && x < box.x + box.width && y > box.y && y < box.y + box.height\r\n        }\r\n        return false\r\n    },\r\n    hide: function() {\r\n        var that = this;\r\n        hideElement(that._wrapper);\r\n        if (that._eventData) {\r\n            that._eventTrigger(\"tooltipHidden\", that._eventData);\r\n            that._clear();\r\n            that._eventData = null\r\n        }\r\n    },\r\n    _clear: function() {\r\n        this._textHtml.empty()\r\n    },\r\n    move: function(x, y, offset) {\r\n        this.plaque.draw({\r\n            x: x,\r\n            y: y,\r\n            offset: offset,\r\n            canvas: this._getCanvas(),\r\n            isMoving: true\r\n        })\r\n    },\r\n    _moveWrapper: function() {\r\n        var that = this;\r\n        var plaqueBBox = this.plaque.getBBox();\r\n        that._renderer.resize(plaqueBBox.width, plaqueBBox.height);\r\n        var offset = that._wrapper.css({\r\n            left: 0,\r\n            top: 0\r\n        }).offset();\r\n        var left = plaqueBBox.x;\r\n        var top = plaqueBBox.y;\r\n        that._wrapper.css({\r\n            left: left - offset.left,\r\n            top: top - offset.top\r\n        });\r\n        this.plaque.moveRoot(-left, -top);\r\n        if (this._state.html) {\r\n            that._textHtml.css({\r\n                left: -left,\r\n                top: -top\r\n            });\r\n            that._textGroupHtml.css({\r\n                width: that._textHtml.width()\r\n            })\r\n        }\r\n    },\r\n    formatValue: function(value, _specialFormat) {\r\n        var options = _specialFormat ? getSpecialFormatOptions(this._options, _specialFormat) : this._options;\r\n        return format(value, options.format)\r\n    },\r\n    getLocation: function() {\r\n        return (0, _utils.normalizeEnum)(this._options.location)\r\n    },\r\n    isEnabled: function() {\r\n        return !!this._options.enabled || !!this._options.forceEvents\r\n    },\r\n    isShared: function() {\r\n        return !!this._options.shared\r\n    },\r\n    _getCanvas: function() {\r\n        var container = this._getContainer();\r\n        var containerBox = container.getBoundingClientRect();\r\n        var html = _dom_adapter.default.getDocumentElement();\r\n        var document = _dom_adapter.default.getDocument();\r\n        var left = window.pageXOffset || html.scrollLeft || 0;\r\n        var top = window.pageYOffset || html.scrollTop || 0;\r\n        var box = {\r\n            left: left,\r\n            top: top,\r\n            width: mathMax(html.clientWidth, document.body.clientWidth) + left,\r\n            height: mathMax(document.body.scrollHeight, html.scrollHeight, document.body.offsetHeight, html.offsetHeight, document.body.clientHeight, html.clientHeight),\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        if (container !== _dom_adapter.default.getBody()) {\r\n            left = mathMax(box.left, box.left + containerBox.left);\r\n            top = mathMax(box.top, box.top + containerBox.top);\r\n            box.width = mathMin(containerBox.width, box.width) + left + box.left;\r\n            box.height = mathMin(containerBox.height, box.height) + top + box.top;\r\n            box.left = left;\r\n            box.top = top\r\n        }\r\n        return box\r\n    }\r\n};\r\nvar plugin = {\r\n    name: \"tooltip\",\r\n    init: function() {\r\n        this._initTooltip()\r\n    },\r\n    dispose: function() {\r\n        this._disposeTooltip()\r\n    },\r\n    members: {\r\n        _initTooltip: function() {\r\n            this._tooltip = new Tooltip({\r\n                cssClass: this._rootClassPrefix + \"-tooltip\",\r\n                eventTrigger: this._eventTrigger,\r\n                pathModified: this.option(\"pathModified\"),\r\n                widgetRoot: this.element(),\r\n                widget: this\r\n            })\r\n        },\r\n        _disposeTooltip: function() {\r\n            this._tooltip.dispose();\r\n            this._tooltip = null\r\n        },\r\n        _setTooltipRendererOptions: function() {\r\n            this._tooltip.setRendererOptions(this._getRendererOptions())\r\n        },\r\n        _setTooltipOptions: function() {\r\n            this._tooltip.update(this._getOption(\"tooltip\"))\r\n        }\r\n    },\r\n    extenders: {\r\n        _stopCurrentHandling: function() {\r\n            this._tooltip && this._tooltip.hide()\r\n        }\r\n    },\r\n    customize: function(constructor) {\r\n        var proto = constructor.prototype;\r\n        proto._eventsMap.onTooltipShown = {\r\n            name: \"tooltipShown\"\r\n        };\r\n        proto._eventsMap.onTooltipHidden = {\r\n            name: \"tooltipHidden\"\r\n        };\r\n        constructor.addChange({\r\n            code: \"TOOLTIP_RENDERER\",\r\n            handler: function() {\r\n                this._setTooltipRendererOptions()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true\r\n        });\r\n        constructor.addChange({\r\n            code: \"TOOLTIP\",\r\n            handler: function() {\r\n                this._setTooltipOptions()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true,\r\n            option: \"tooltip\"\r\n        })\r\n    },\r\n    fontFields: [\"tooltip.font\"]\r\n};\r\nexports.plugin = plugin;\r\n"]},"metadata":{},"sourceType":"script"}