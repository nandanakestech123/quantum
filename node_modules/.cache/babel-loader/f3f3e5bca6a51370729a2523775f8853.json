{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _notify = _interopRequireDefault(require(\"../notify\"));\n\nvar _uiFile_manager = require(\"./ui.file_manager.common\");\n\nvar _file_items_controller = _interopRequireDefault(require(\"./file_items_controller\"));\n\nvar _uiFile_manager2 = require(\"./ui.file_manager.command_manager\");\n\nvar _uiFile_manager3 = _interopRequireDefault(require(\"./ui.file_manager.context_menu\"));\n\nvar _uiFile_manager4 = _interopRequireDefault(require(\"./ui.file_manager.files_tree_view\"));\n\nvar _uiFile_managerItem_list = _interopRequireDefault(require(\"./ui.file_manager.item_list.details\"));\n\nvar _uiFile_managerItem_list2 = _interopRequireDefault(require(\"./ui.file_manager.item_list.thumbnails\"));\n\nvar _uiFile_manager5 = _interopRequireDefault(require(\"./ui.file_manager.toolbar\"));\n\nvar _uiFile_manager6 = _interopRequireDefault(require(\"./ui.file_manager.notification\"));\n\nvar _uiFile_manager7 = _interopRequireDefault(require(\"./ui.file_manager.editing\"));\n\nvar _uiFile_manager8 = _interopRequireDefault(require(\"./ui.file_manager.breadcrumbs\"));\n\nvar _uiFile_manager9 = _interopRequireDefault(require(\"./ui.file_manager.adaptivity\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    return _arrayLikeToArray(arr);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar FILE_MANAGER_CLASS = \"dx-filemanager\";\nvar FILE_MANAGER_WRAPPER_CLASS = FILE_MANAGER_CLASS + \"-wrapper\";\nvar FILE_MANAGER_CONTAINER_CLASS = FILE_MANAGER_CLASS + \"-container\";\nvar FILE_MANAGER_DIRS_PANEL_CLASS = FILE_MANAGER_CLASS + \"-dirs-panel\";\nvar FILE_MANAGER_INACTIVE_AREA_CLASS = FILE_MANAGER_CLASS + \"-inactive-area\";\nvar FILE_MANAGER_EDITING_CONTAINER_CLASS = FILE_MANAGER_CLASS + \"-editing-container\";\nvar FILE_MANAGER_ITEMS_PANEL_CLASS = FILE_MANAGER_CLASS + \"-items-panel\";\nvar FILE_MANAGER_ITEM_CUSTOM_THUMBNAIL_CLASS = FILE_MANAGER_CLASS + \"-item-custom-thumbnail\";\nvar PARENT_DIRECTORY_KEY_PREFIX = \"[*DXPDK*]$40F96F03-FBD8-43DF-91BE-F55F4B8BA871$\";\nvar VIEW_AREAS = {\n  folders: \"navPane\",\n  items: \"itemView\"\n};\n\nvar FileManager = function (_Widget) {\n  _inherits(FileManager, _Widget);\n\n  var _super = _createSuper(FileManager);\n\n  function FileManager() {\n    _classCallCheck(this, FileManager);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FileManager, [{\n    key: \"_initTemplates\",\n    value: function () {}\n  }, {\n    key: \"_initMarkup\",\n    value: function () {\n      _get(_getPrototypeOf(FileManager.prototype), \"_initMarkup\", this).call(this);\n\n      this._initActions();\n\n      this._firstItemViewLoad = true;\n      this._lockSelectionProcessing = false;\n      this._lockFocusedItemProcessing = false;\n      this._itemKeyToFocus = void 0;\n      this._controller = new _file_items_controller.default({\n        currentPath: this.option(\"currentPath\"),\n        currentPathKeys: this.option(\"currentPathKeys\"),\n        rootText: this.option(\"rootFolderName\"),\n        fileProvider: this.option(\"fileSystemProvider\"),\n        allowedFileExtensions: this.option(\"allowedFileExtensions\"),\n        uploadMaxFileSize: this.option(\"upload\").maxFileSize,\n        uploadChunkSize: this.option(\"upload\").chunkSize,\n        onInitialized: this._onControllerInitialized.bind(this),\n        onDataLoading: this._onDataLoading.bind(this),\n        onSelectedDirectoryChanged: this._onSelectedDirectoryChanged.bind(this)\n      });\n      this._commandManager = new _uiFile_manager2.FileManagerCommandManager(this.option(\"permissions\"));\n      this.$element().addClass(FILE_MANAGER_CLASS);\n\n      this._createNotificationControl();\n\n      this._initCommandManager();\n\n      this._setItemsViewAreaActive(false);\n    }\n  }, {\n    key: \"_createNotificationControl\",\n    value: function () {\n      var _this = this;\n\n      var $notificationControl = (0, _renderer.default)(\"<div>\").addClass(\"dx-filemanager-notification-container\").appendTo(this.$element());\n      this._notificationControl = this._createComponent($notificationControl, _uiFile_manager6.default, {\n        progressPanelContainer: this.$element(),\n        contentTemplate: function (container) {\n          return _this._createWrapper(container);\n        },\n        onActionProgress: function (e) {\n          return _this._onActionProgress(e);\n        },\n        positionTarget: \".\".concat(FILE_MANAGER_CONTAINER_CLASS)\n      });\n\n      this._editing.option(\"notificationControl\", this._notificationControl);\n    }\n  }, {\n    key: \"_createWrapper\",\n    value: function (container) {\n      var _this2 = this;\n\n      this._$wrapper = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_WRAPPER_CLASS).appendTo(container);\n\n      this._createEditing();\n\n      var $toolbar = (0, _renderer.default)(\"<div>\").appendTo(this._$wrapper);\n      this._toolbar = this._createComponent($toolbar, _uiFile_manager5.default, {\n        commandManager: this._commandManager,\n        generalItems: this.option(\"toolbar.items\"),\n        fileItems: this.option(\"toolbar.fileSelectionItems\"),\n        itemViewMode: this.option(\"itemView\").mode,\n        onItemClick: function (args) {\n          return _this2._actions.onToolbarItemClick(args);\n        }\n      });\n\n      this._createAdaptivityControl();\n    }\n  }, {\n    key: \"_createAdaptivityControl\",\n    value: function () {\n      var _this3 = this;\n\n      var $container = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_CONTAINER_CLASS).appendTo(this._$wrapper);\n      this._adaptivityControl = this._createComponent($container, _uiFile_manager9.default, {\n        drawerTemplate: function (container) {\n          return _this3._createFilesTreeView(container);\n        },\n        contentTemplate: function (container) {\n          return _this3._createItemsPanel(container);\n        },\n        onAdaptiveStateChanged: function (e) {\n          return _this3._onAdaptiveStateChanged(e);\n        }\n      });\n    }\n  }, {\n    key: \"_createEditing\",\n    value: function () {\n      var _this4 = this;\n\n      var $editingContainer = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_EDITING_CONTAINER_CLASS).appendTo(this.$element());\n      this._editing = this._createComponent($editingContainer, _uiFile_manager7.default, {\n        controller: this._controller,\n        model: {\n          getMultipleSelectedItems: this._getMultipleSelectedItems.bind(this)\n        },\n        getItemThumbnail: this._getItemThumbnailInfo.bind(this),\n        uploadDropZonePlaceholderContainer: this.$element(),\n        onSuccess: function (_ref) {\n          var updatedOnlyFiles = _ref.updatedOnlyFiles;\n          return _this4._redrawComponent(updatedOnlyFiles);\n        },\n        onCreating: function () {\n          return _this4._setItemsViewAreaActive(false);\n        },\n        onError: function (e) {\n          return _this4._onEditingError(e);\n        }\n      });\n    }\n  }, {\n    key: \"_createItemsPanel\",\n    value: function ($container) {\n      this._$itemsPanel = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_ITEMS_PANEL_CLASS).appendTo($container);\n\n      this._createBreadcrumbs(this._$itemsPanel);\n\n      this._createItemView(this._$itemsPanel);\n\n      if (this._commandManager.isCommandAvailable(\"upload\")) {\n        this._editing.setUploaderDropZone(this._$itemsPanel);\n      }\n    }\n  }, {\n    key: \"_createFilesTreeView\",\n    value: function (container) {\n      var _this5 = this;\n\n      this._filesTreeViewContextMenu = this._createContextMenu(false, VIEW_AREAS.folders);\n      var $filesTreeView = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_DIRS_PANEL_CLASS).appendTo(container);\n      this._filesTreeView = this._createComponent($filesTreeView, _uiFile_manager4.default, {\n        storeExpandedState: true,\n        contextMenu: this._filesTreeViewContextMenu,\n        getDirectories: this.getDirectories.bind(this),\n        getCurrentDirectory: this._getCurrentDirectory.bind(this),\n        onDirectoryClick: this._onFilesTreeViewDirectoryClick.bind(this),\n        onClick: function () {\n          return _this5._setItemsViewAreaActive(false);\n        }\n      });\n    }\n  }, {\n    key: \"_createItemView\",\n    value: function ($container, viewMode) {\n      var _this6 = this;\n\n      this._itemViewContextMenu = this._createContextMenu(true, VIEW_AREAS.items);\n      var itemViewOptions = this.option(\"itemView\");\n      var options = {\n        selectionMode: this.option(\"selectionMode\"),\n        selectedItemKeys: this.option(\"selectedItemKeys\"),\n        focusedItemKey: this.option(\"focusedItemKey\"),\n        contextMenu: this._itemViewContextMenu,\n        getItems: this._getItemViewItems.bind(this),\n        onError: function (_ref2) {\n          var error = _ref2.error;\n          return _this6._showError(error);\n        },\n        onSelectionChanged: this._onItemViewSelectionChanged.bind(this),\n        onFocusedItemChanged: this._onItemViewFocusedItemChanged.bind(this),\n        onSelectedItemOpened: this._onSelectedItemOpened.bind(this),\n        onContextMenuShowing: function () {\n          return _this6._onContextMenuShowing(VIEW_AREAS.items);\n        },\n        getItemThumbnail: this._getItemThumbnailInfo.bind(this),\n        customizeDetailColumns: this.option(\"customizeDetailColumns\"),\n        detailColumns: this.option(\"itemView.details.columns\")\n      };\n      var $itemView = (0, _renderer.default)(\"<div>\").appendTo($container);\n      viewMode = viewMode || itemViewOptions.mode;\n      var widgetClass = \"thumbnails\" === viewMode ? _uiFile_managerItem_list2.default : _uiFile_managerItem_list.default;\n      this._itemView = this._createComponent($itemView, widgetClass, options);\n\n      _events_engine.default.on($itemView, \"click\", this._onItemViewClick.bind(this));\n    }\n  }, {\n    key: \"_createBreadcrumbs\",\n    value: function ($container) {\n      var _this7 = this;\n\n      var $breadcrumbs = (0, _renderer.default)(\"<div>\").appendTo($container);\n      this._breadcrumbs = this._createComponent($breadcrumbs, _uiFile_manager8.default, {\n        rootFolderDisplayName: this.option(\"rootFolderName\"),\n        onCurrentDirectoryChanging: function (_ref3) {\n          var currentDirectory = _ref3.currentDirectory;\n          return _this7._setCurrentDirectory(currentDirectory);\n        }\n      });\n\n      this._breadcrumbs.setCurrentDirectory(this._getCurrentDirectory());\n    }\n  }, {\n    key: \"_createContextMenu\",\n    value: function (isolateCreationItemCommands, viewArea) {\n      var _this8 = this;\n\n      var $contextMenu = (0, _renderer.default)(\"<div>\").appendTo(this._$wrapper);\n      return this._createComponent($contextMenu, _uiFile_manager3.default, {\n        commandManager: this._commandManager,\n        items: this.option(\"contextMenu.items\"),\n        onItemClick: function (args) {\n          return _this8._actions.onContextMenuItemClick(args);\n        },\n        onContextMenuShowing: function () {\n          return _this8._onContextMenuShowing(viewArea);\n        },\n        isolateCreationItemCommands: isolateCreationItemCommands,\n        viewArea: viewArea\n      });\n    }\n  }, {\n    key: \"_initCommandManager\",\n    value: function () {\n      var _this9 = this;\n\n      var actions = (0, _extend.extend)(this._editing.getCommandActions(), {\n        refresh: function () {\n          return _this9._refreshAndShowProgress();\n        },\n        thumbnails: function () {\n          return _this9.option(\"itemView.mode\", \"thumbnails\");\n        },\n        details: function () {\n          return _this9.option(\"itemView.mode\", \"details\");\n        },\n        clearSelection: function () {\n          return _this9._clearSelection();\n        },\n        showNavPane: function () {\n          return _this9._adaptivityControl.toggleDrawer();\n        }\n      });\n\n      this._commandManager.registerActions(actions);\n    }\n  }, {\n    key: \"_onFilesTreeViewDirectoryClick\",\n    value: function (_ref4) {\n      var itemData = _ref4.itemData;\n\n      this._setCurrentDirectory(itemData);\n\n      this._setItemsViewAreaActive(false);\n    }\n  }, {\n    key: \"_onItemViewSelectionChanged\",\n    value: function (_ref5) {\n      var selectedItemInfos = _ref5.selectedItemInfos,\n          selectedItems = _ref5.selectedItems,\n          selectedItemKeys = _ref5.selectedItemKeys,\n          currentSelectedItemKeys = _ref5.currentSelectedItemKeys,\n          currentDeselectedItemKeys = _ref5.currentDeselectedItemKeys;\n      this._lockSelectionProcessing = true;\n      this.option(\"selectedItemKeys\", selectedItemKeys);\n      this._lockSelectionProcessing = false;\n\n      this._actions.onSelectionChanged({\n        selectedItems: selectedItems,\n        selectedItemKeys: selectedItemKeys,\n        currentSelectedItemKeys: currentSelectedItemKeys,\n        currentDeselectedItemKeys: currentDeselectedItemKeys\n      });\n\n      this._updateToolbar(selectedItemInfos);\n\n      this._setItemsViewAreaActive(true);\n    }\n  }, {\n    key: \"_onItemViewFocusedItemChanged\",\n    value: function (e) {\n      this._lockFocusedItemProcessing = true;\n      this.option(\"focusedItemKey\", e.itemKey);\n      this._lockFocusedItemProcessing = false;\n\n      this._actions.onFocusedItemChanged({\n        item: e.item,\n        itemElement: e.itemElement\n      });\n    }\n  }, {\n    key: \"_onAdaptiveStateChanged\",\n    value: function (_ref6) {\n      var enabled = _ref6.enabled;\n\n      this._commandManager.setCommandEnabled(\"showNavPane\", enabled);\n\n      this._updateToolbar();\n    }\n  }, {\n    key: \"_onActionProgress\",\n    value: function (_ref7) {\n      var message = _ref7.message,\n          status = _ref7.status;\n\n      this._toolbar.updateRefreshItem(message, status);\n\n      this._updateToolbar();\n    }\n  }, {\n    key: \"_onEditingError\",\n    value: function (e) {\n      var args = (0, _uiFile_manager.extendAttributes)({}, e, [\"errorCode\", \"errorText\", \"fileSystemItem\"]);\n\n      this._actions.onErrorOccurred(args);\n\n      e.errorText = args.errorText;\n    }\n  }, {\n    key: \"_refreshAndShowProgress\",\n    value: function () {\n      var _this10 = this;\n\n      return (0, _deferred.when)(this._notificationControl.tryShowProgressPanel(), this._controller.refresh()).then(function () {\n        return _this10._filesTreeView.refresh();\n      });\n    }\n  }, {\n    key: \"_updateToolbar\",\n    value: function (selectedItems) {\n      var items = selectedItems || this._getSelectedItemInfos();\n\n      this._toolbar.update(items);\n    }\n  }, {\n    key: \"_setItemsViewAreaActive\",\n    value: function (active) {\n      if (this._itemsViewAreaActive === active) {\n        return;\n      }\n\n      this._itemsViewAreaActive = active;\n      var $activeArea = null;\n      var $inactiveArea = null;\n\n      if (active) {\n        $activeArea = this._itemView.$element();\n        $inactiveArea = this._filesTreeView.$element();\n      } else {\n        $activeArea = this._filesTreeView.$element();\n        $inactiveArea = this._itemView.$element();\n      }\n\n      $activeArea.removeClass(FILE_MANAGER_INACTIVE_AREA_CLASS);\n      $inactiveArea.addClass(FILE_MANAGER_INACTIVE_AREA_CLASS);\n    }\n  }, {\n    key: \"_switchView\",\n    value: function (viewMode) {\n      this._disposeWidget(this._itemView.option(\"contextMenu\"));\n\n      this._disposeWidget(this._itemView);\n\n      this._createItemView(this._$itemsPanel, viewMode);\n\n      this._toolbar.option({\n        itemViewMode: viewMode\n      });\n    }\n  }, {\n    key: \"_disposeWidget\",\n    value: function (widget) {\n      widget.dispose();\n      widget.$element().remove();\n    }\n  }, {\n    key: \"_clearSelection\",\n    value: function () {\n      this._itemView.clearSelection();\n    }\n  }, {\n    key: \"_getMultipleSelectedItems\",\n    value: function () {\n      return this._itemsViewAreaActive ? this._getSelectedItemInfos() : [this._getCurrentDirectory()];\n    }\n  }, {\n    key: \"_showError\",\n    value: function (message) {\n      this._showNotification(message, false);\n    }\n  }, {\n    key: \"_showNotification\",\n    value: function (message, isSuccess) {\n      (0, _notify.default)({\n        message: message,\n        width: 450\n      }, isSuccess ? \"success\" : \"error\", 5e3);\n    }\n  }, {\n    key: \"_redrawComponent\",\n    value: function (onlyFileItemsView) {\n      !onlyFileItemsView && this._filesTreeView.refresh();\n\n      this._itemView.refresh();\n    }\n  }, {\n    key: \"_getItemViewItems\",\n    value: function () {\n      var _this11 = this;\n\n      var showFolders = this.option(\"itemView\").showFolders;\n\n      var result = this._controller.getCurrentItems(!showFolders);\n\n      this._updateToolbarWithSelectionOnFirstLoad(result);\n\n      if (this.option(\"itemView.showParentFolder\")) {\n        result = (0, _deferred.when)(result).then(function (items) {\n          return _this11._getPreparedItemViewItems(items);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_updateToolbarWithSelectionOnFirstLoad\",\n    value: function (itemsResult) {\n      var _this12 = this;\n\n      if (!this._firstItemViewLoad) {\n        return;\n      }\n\n      this._firstItemViewLoad = false;\n      var selectedItemKeys = this.option(\"selectedItemKeys\");\n\n      if (selectedItemKeys.length > 0) {\n        (0, _deferred.when)(itemsResult).done(function (items) {\n          var selectedItems = (0, _uiFile_manager.findItemsByKeys)(items, selectedItemKeys);\n\n          if (selectedItems.length > 0) {\n            _this12._updateToolbar(selectedItems);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_getPreparedItemViewItems\",\n    value: function (items) {\n      var selectedDir = this._getCurrentDirectory();\n\n      if (selectedDir.fileItem.isRoot()) {\n        return items;\n      }\n\n      var parentDirItem = selectedDir.fileItem.createClone();\n      parentDirItem.isParentFolder = true;\n      parentDirItem.name = \"..\";\n      parentDirItem.relativeName = \"..\";\n      parentDirItem.key = \"\".concat(PARENT_DIRECTORY_KEY_PREFIX).concat(selectedDir.fileItem.key);\n\n      var itemsCopy = _toConsumableArray(items);\n\n      itemsCopy.unshift({\n        fileItem: parentDirItem,\n        icon: \"parentfolder\"\n      });\n      return itemsCopy;\n    }\n  }, {\n    key: \"_onItemViewClick\",\n    value: function () {\n      this._setItemsViewAreaActive(true);\n    }\n  }, {\n    key: \"_onContextMenuShowing\",\n    value: function (viewArea) {\n      this._setItemsViewAreaActive(viewArea === VIEW_AREAS.items);\n    }\n  }, {\n    key: \"_getItemThumbnailInfo\",\n    value: function (fileInfo) {\n      var func = this.option(\"customizeThumbnail\");\n      var thumbnail = (0, _type.isFunction)(func) ? func(fileInfo.fileItem) : fileInfo.fileItem.thumbnail;\n\n      if (thumbnail) {\n        return {\n          thumbnail: thumbnail,\n          cssClass: FILE_MANAGER_ITEM_CUSTOM_THUMBNAIL_CLASS\n        };\n      }\n\n      return {\n        thumbnail: fileInfo.icon\n      };\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function () {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManager.prototype), \"_getDefaultOptions\", this).call(this), {\n        fileSystemProvider: null,\n        currentPath: \"\",\n        currentPathKeys: [],\n        rootFolderName: _message.default.format(\"dxFileManager-rootDirectoryName\"),\n        selectionMode: \"multiple\",\n        selectedItemKeys: [],\n        focusedItemKey: void 0,\n        toolbar: {\n          items: [\"showNavPane\", \"create\", \"upload\", \"switchView\", {\n            name: \"separator\",\n            location: \"after\"\n          }, \"refresh\"],\n          fileSelectionItems: [\"download\", \"separator\", \"move\", \"copy\", \"rename\", \"separator\", \"delete\", \"clearSelection\", {\n            name: \"separator\",\n            location: \"after\"\n          }, \"refresh\"]\n        },\n        contextMenu: {\n          items: [\"create\", \"upload\", \"rename\", \"move\", \"copy\", \"delete\", \"refresh\", \"download\"]\n        },\n        itemView: {\n          details: {\n            columns: [\"thumbnail\", \"name\", \"dateModified\", \"size\"]\n          },\n          mode: \"details\",\n          showFolders: true,\n          showParentFolder: true\n        },\n        customizeThumbnail: null,\n        customizeDetailColumns: null,\n        onContextMenuItemClick: null,\n        onCurrentDirectoryChanged: null,\n        onSelectedFileOpened: null,\n        onSelectionChanged: null,\n        onFocusedItemChanged: null,\n        onToolbarItemClick: null,\n        onErrorOccurred: null,\n        allowedFileExtensions: [],\n        upload: {\n          maxFileSize: 0,\n          chunkSize: 2e5\n        },\n        permissions: {\n          create: false,\n          copy: false,\n          move: false,\n          \"delete\": false,\n          rename: false,\n          upload: false,\n          download: false\n        }\n      });\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      var name = args.name;\n\n      switch (name) {\n        case \"currentPath\":\n          this._controller.setCurrentPath(args.value);\n\n          break;\n\n        case \"currentPathKeys\":\n          this._controller.setCurrentPathByKeys(args.value);\n\n          break;\n\n        case \"selectedItemKeys\":\n          if (!this._lockSelectionProcessing && this._itemView) {\n            this._itemView.option(\"selectedItemKeys\", args.value);\n          }\n\n          break;\n\n        case \"focusedItemKey\":\n          if (!this._lockFocusedItemProcessing && this._itemView) {\n            this._itemView.option(\"focusedItemKey\", args.value);\n          }\n\n          break;\n\n        case \"fileSystemProvider\":\n        case \"selectionMode\":\n        case \"customizeThumbnail\":\n        case \"customizeDetailColumns\":\n        case \"rootFolderName\":\n        case \"allowedFileExtensions\":\n        case \"permissions\":\n        case \"upload\":\n          this.repaint();\n          break;\n\n        case \"itemView\":\n          if (\"itemView.mode\" === args.fullName) {\n            this._switchView(args.value);\n          } else {\n            this.repaint();\n          }\n\n          break;\n\n        case \"toolbar\":\n          var toolbarOptions = {};\n\n          if (\"toolbar\" === args.fullName) {\n            if (args.value.items) {\n              toolbarOptions.generalItems = args.value.items;\n            }\n\n            if (args.value.fileSelectionItems) {\n              toolbarOptions.fileItems = args.value.fileSelectionItems;\n            }\n          }\n\n          if (0 === args.fullName.indexOf(\"toolbar.items\")) {\n            toolbarOptions.generalItems = this.option(\"toolbar.items\");\n          }\n\n          if (0 === args.fullName.indexOf(\"toolbar.fileSelectionItems\")) {\n            toolbarOptions.fileItems = this.option(\"toolbar.fileSelectionItems\");\n          }\n\n          this._toolbar.option(toolbarOptions);\n\n          break;\n\n        case \"contextMenu\":\n          if (\"contextMenu\" === args.fullName && args.value.items || 0 === args.fullName.indexOf(\"contextMenu.items\")) {\n            var contextMenuItems = this.option(\"contextMenu.items\");\n\n            this._filesTreeViewContextMenu.option(\"items\", contextMenuItems);\n\n            this._itemViewContextMenu.option(\"items\", contextMenuItems);\n          }\n\n          break;\n\n        case \"onContextMenuItemClick\":\n        case \"onCurrentDirectoryChanged\":\n        case \"onSelectedFileOpened\":\n        case \"onSelectionChanged\":\n        case \"onFocusedItemChanged\":\n        case \"onToolbarItemClick\":\n        case \"onErrorOccurred\":\n          this._actions[name] = this._createActionByOption(name);\n          break;\n\n        default:\n          _get(_getPrototypeOf(FileManager.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_initActions\",\n    value: function () {\n      this._actions = {\n        onContextMenuItemClick: this._createActionByOption(\"onContextMenuItemClick\"),\n        onCurrentDirectoryChanged: this._createActionByOption(\"onCurrentDirectoryChanged\"),\n        onSelectedFileOpened: this._createActionByOption(\"onSelectedFileOpened\"),\n        onSelectionChanged: this._createActionByOption(\"onSelectionChanged\"),\n        onFocusedItemChanged: this._createActionByOption(\"onFocusedItemChanged\"),\n        onToolbarItemClick: this._createActionByOption(\"onToolbarItemClick\"),\n        onErrorOccurred: this._createActionByOption(\"onErrorOccurred\")\n      };\n    }\n  }, {\n    key: \"executeCommand\",\n    value: function (commandName) {\n      return this._commandManager.executeCommand(commandName);\n    }\n  }, {\n    key: \"_setCurrentDirectory\",\n    value: function (directoryInfo) {\n      this._controller.setCurrentDirectory(directoryInfo);\n    }\n  }, {\n    key: \"_getCurrentDirectory\",\n    value: function () {\n      return this._controller.getCurrentDirectory();\n    }\n  }, {\n    key: \"_onControllerInitialized\",\n    value: function (_ref8) {\n      var controller = _ref8.controller;\n      this._controller = this._controller || controller;\n      var currentDirectory = controller.getCurrentDirectory();\n\n      if (!currentDirectory.fileItem.isRoot()) {\n        this._syncToCurrentDirectory();\n      }\n    }\n  }, {\n    key: \"_onDataLoading\",\n    value: function (_ref9) {\n      var operation = _ref9.operation;\n      var options = null;\n\n      if (\"navigation\" === operation) {\n        options = {\n          focusedItemKey: this._itemKeyToFocus\n        };\n        this._itemKeyToFocus = void 0;\n      }\n\n      this._itemView.refresh(options);\n    }\n  }, {\n    key: \"_onSelectedDirectoryChanged\",\n    value: function () {\n      var currentDirectory = this._getCurrentDirectory();\n\n      this._syncToCurrentDirectory();\n\n      this._actions.onCurrentDirectoryChanged({\n        directory: currentDirectory.fileItem\n      });\n    }\n  }, {\n    key: \"_syncToCurrentDirectory\",\n    value: function () {\n      var currentDirectory = this._getCurrentDirectory();\n\n      var currentPath = this._controller.getCurrentPath();\n\n      var currentPathKeys = currentDirectory.fileItem.pathKeys;\n\n      if (this._filesTreeView) {\n        this._filesTreeView.updateCurrentDirectory();\n      }\n\n      if (this._breadcrumbs) {\n        this._breadcrumbs.setCurrentDirectory(currentDirectory);\n      }\n\n      var options = {\n        currentPath: currentPath\n      };\n\n      if (!(0, _common.equalByValue)(this.option(\"currentPathKeys\"), currentPathKeys)) {\n        options.currentPathKeys = currentPathKeys;\n      }\n\n      this.option(options);\n    }\n  }, {\n    key: \"getDirectories\",\n    value: function (parentDirectoryInfo, skipNavigationOnError) {\n      return this._controller.getDirectories(parentDirectoryInfo, skipNavigationOnError);\n    }\n  }, {\n    key: \"_getSelectedItemInfos\",\n    value: function () {\n      return this._itemView.getSelectedItems();\n    }\n  }, {\n    key: \"refresh\",\n    value: function () {\n      return this.executeCommand(\"refresh\");\n    }\n  }, {\n    key: \"getCurrentDirectory\",\n    value: function () {\n      var directoryInfo = this._getCurrentDirectory();\n\n      return directoryInfo && directoryInfo.fileItem || null;\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function () {\n      return this._getSelectedItemInfos().map(function (itemInfo) {\n        return itemInfo.fileItem;\n      });\n    }\n  }, {\n    key: \"_onSelectedItemOpened\",\n    value: function (_ref10) {\n      var fileItemInfo = _ref10.fileItemInfo;\n      var fileItem = fileItemInfo.fileItem;\n\n      if (!fileItem.isDirectory) {\n        this._actions.onSelectedFileOpened({\n          file: fileItem\n        });\n\n        return;\n      }\n\n      if (fileItem.isParentFolder) {\n        this._itemKeyToFocus = this._getCurrentDirectory().fileItem.key;\n      }\n\n      var newCurrentDirectory = fileItem.isParentFolder ? this._getCurrentDirectory().parentDirectory : fileItemInfo;\n\n      this._setCurrentDirectory(newCurrentDirectory);\n\n      if (newCurrentDirectory) {\n        this._filesTreeView.toggleDirectoryExpandedState(newCurrentDirectory.parentDirectory, true);\n      }\n    }\n  }]);\n\n  return FileManager;\n}(_ui.default);\n\n(0, _component_registrator.default)(\"dxFileManager\", FileManager);\nvar _default = FileManager;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/file_manager/ui.file_manager.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_renderer","_interopRequireDefault","require","_events_engine","_extend","_type","_deferred","_common","_message","_component_registrator","_ui","_notify","_uiFile_manager","_file_items_controller","_uiFile_manager2","_uiFile_manager3","_uiFile_manager4","_uiFile_managerItem_list","_uiFile_managerItem_list2","_uiFile_manager5","_uiFile_manager6","_uiFile_manager7","_uiFile_manager8","_uiFile_manager9","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","value","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","e","getPrototypeOf","FILE_MANAGER_CLASS","FILE_MANAGER_WRAPPER_CLASS","FILE_MANAGER_CONTAINER_CLASS","FILE_MANAGER_DIRS_PANEL_CLASS","FILE_MANAGER_INACTIVE_AREA_CLASS","FILE_MANAGER_EDITING_CONTAINER_CLASS","FILE_MANAGER_ITEMS_PANEL_CLASS","FILE_MANAGER_ITEM_CUSTOM_THUMBNAIL_CLASS","PARENT_DIRECTORY_KEY_PREFIX","VIEW_AREAS","folders","items","FileManager","_Widget","_super","_initActions","_firstItemViewLoad","_lockSelectionProcessing","_lockFocusedItemProcessing","_itemKeyToFocus","_controller","currentPath","option","currentPathKeys","rootText","fileProvider","allowedFileExtensions","uploadMaxFileSize","maxFileSize","uploadChunkSize","chunkSize","onInitialized","_onControllerInitialized","bind","onDataLoading","_onDataLoading","onSelectedDirectoryChanged","_onSelectedDirectoryChanged","_commandManager","FileManagerCommandManager","$element","addClass","_createNotificationControl","_initCommandManager","_setItemsViewAreaActive","_this","$notificationControl","appendTo","_notificationControl","_createComponent","progressPanelContainer","contentTemplate","container","_createWrapper","onActionProgress","_onActionProgress","positionTarget","concat","_editing","_this2","_$wrapper","_createEditing","$toolbar","_toolbar","commandManager","generalItems","fileItems","itemViewMode","mode","onItemClick","args","_actions","onToolbarItemClick","_createAdaptivityControl","_this3","$container","_adaptivityControl","drawerTemplate","_createFilesTreeView","_createItemsPanel","onAdaptiveStateChanged","_onAdaptiveStateChanged","_this4","$editingContainer","controller","model","getMultipleSelectedItems","_getMultipleSelectedItems","getItemThumbnail","_getItemThumbnailInfo","uploadDropZonePlaceholderContainer","onSuccess","_ref","updatedOnlyFiles","_redrawComponent","onCreating","onError","_onEditingError","_$itemsPanel","_createBreadcrumbs","_createItemView","isCommandAvailable","setUploaderDropZone","_this5","_filesTreeViewContextMenu","_createContextMenu","$filesTreeView","_filesTreeView","storeExpandedState","contextMenu","getDirectories","getCurrentDirectory","_getCurrentDirectory","onDirectoryClick","_onFilesTreeViewDirectoryClick","onClick","viewMode","_this6","_itemViewContextMenu","itemViewOptions","options","selectionMode","selectedItemKeys","focusedItemKey","getItems","_getItemViewItems","_ref2","error","_showError","onSelectionChanged","_onItemViewSelectionChanged","onFocusedItemChanged","_onItemViewFocusedItemChanged","onSelectedItemOpened","_onSelectedItemOpened","onContextMenuShowing","_onContextMenuShowing","customizeDetailColumns","detailColumns","$itemView","widgetClass","_itemView","on","_onItemViewClick","_this7","$breadcrumbs","_breadcrumbs","rootFolderDisplayName","onCurrentDirectoryChanging","_ref3","currentDirectory","_setCurrentDirectory","setCurrentDirectory","isolateCreationItemCommands","viewArea","_this8","$contextMenu","onContextMenuItemClick","_this9","actions","extend","getCommandActions","refresh","_refreshAndShowProgress","thumbnails","details","clearSelection","_clearSelection","showNavPane","toggleDrawer","registerActions","_ref4","itemData","_ref5","selectedItemInfos","selectedItems","currentSelectedItemKeys","currentDeselectedItemKeys","_updateToolbar","itemKey","item","itemElement","_ref6","enabled","setCommandEnabled","_ref7","message","status","updateRefreshItem","extendAttributes","onErrorOccurred","errorText","_this10","when","tryShowProgressPanel","then","_getSelectedItemInfos","update","active","_itemsViewAreaActive","$activeArea","$inactiveArea","removeClass","_disposeWidget","widget","dispose","remove","_showNotification","isSuccess","width","onlyFileItemsView","_this11","showFolders","getCurrentItems","_updateToolbarWithSelectionOnFirstLoad","_getPreparedItemViewItems","itemsResult","_this12","done","findItemsByKeys","selectedDir","fileItem","isRoot","parentDirItem","createClone","isParentFolder","relativeName","itemsCopy","unshift","icon","fileInfo","func","thumbnail","isFunction","cssClass","fileSystemProvider","rootFolderName","format","toolbar","location","fileSelectionItems","itemView","columns","showParentFolder","customizeThumbnail","onCurrentDirectoryChanged","onSelectedFileOpened","upload","permissions","copy","move","rename","download","setCurrentPath","setCurrentPathByKeys","repaint","fullName","_switchView","toolbarOptions","indexOf","contextMenuItems","_createActionByOption","commandName","executeCommand","directoryInfo","_ref8","_syncToCurrentDirectory","_ref9","operation","directory","getCurrentPath","pathKeys","updateCurrentDirectory","equalByValue","parentDirectoryInfo","skipNavigationOnError","getSelectedItems","map","itemInfo","_ref10","fileItemInfo","isDirectory","file","newCurrentDirectory","parentDirectory","toggleDirectoryExpandedState","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _notify = _interopRequireDefault(require(\"../notify\"));\r\nvar _uiFile_manager = require(\"./ui.file_manager.common\");\r\nvar _file_items_controller = _interopRequireDefault(require(\"./file_items_controller\"));\r\nvar _uiFile_manager2 = require(\"./ui.file_manager.command_manager\");\r\nvar _uiFile_manager3 = _interopRequireDefault(require(\"./ui.file_manager.context_menu\"));\r\nvar _uiFile_manager4 = _interopRequireDefault(require(\"./ui.file_manager.files_tree_view\"));\r\nvar _uiFile_managerItem_list = _interopRequireDefault(require(\"./ui.file_manager.item_list.details\"));\r\nvar _uiFile_managerItem_list2 = _interopRequireDefault(require(\"./ui.file_manager.item_list.thumbnails\"));\r\nvar _uiFile_manager5 = _interopRequireDefault(require(\"./ui.file_manager.toolbar\"));\r\nvar _uiFile_manager6 = _interopRequireDefault(require(\"./ui.file_manager.notification\"));\r\nvar _uiFile_manager7 = _interopRequireDefault(require(\"./ui.file_manager.editing\"));\r\nvar _uiFile_manager8 = _interopRequireDefault(require(\"./ui.file_manager.breadcrumbs\"));\r\nvar _uiFile_manager9 = _interopRequireDefault(require(\"./ui.file_manager.adaptivity\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return _arrayLikeToArray(arr)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar FILE_MANAGER_CLASS = \"dx-filemanager\";\r\nvar FILE_MANAGER_WRAPPER_CLASS = FILE_MANAGER_CLASS + \"-wrapper\";\r\nvar FILE_MANAGER_CONTAINER_CLASS = FILE_MANAGER_CLASS + \"-container\";\r\nvar FILE_MANAGER_DIRS_PANEL_CLASS = FILE_MANAGER_CLASS + \"-dirs-panel\";\r\nvar FILE_MANAGER_INACTIVE_AREA_CLASS = FILE_MANAGER_CLASS + \"-inactive-area\";\r\nvar FILE_MANAGER_EDITING_CONTAINER_CLASS = FILE_MANAGER_CLASS + \"-editing-container\";\r\nvar FILE_MANAGER_ITEMS_PANEL_CLASS = FILE_MANAGER_CLASS + \"-items-panel\";\r\nvar FILE_MANAGER_ITEM_CUSTOM_THUMBNAIL_CLASS = FILE_MANAGER_CLASS + \"-item-custom-thumbnail\";\r\nvar PARENT_DIRECTORY_KEY_PREFIX = \"[*DXPDK*]$40F96F03-FBD8-43DF-91BE-F55F4B8BA871$\";\r\nvar VIEW_AREAS = {\r\n    folders: \"navPane\",\r\n    items: \"itemView\"\r\n};\r\nvar FileManager = function(_Widget) {\r\n    _inherits(FileManager, _Widget);\r\n    var _super = _createSuper(FileManager);\r\n\r\n    function FileManager() {\r\n        _classCallCheck(this, FileManager);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(FileManager, [{\r\n        key: \"_initTemplates\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileManager.prototype), \"_initMarkup\", this).call(this);\r\n            this._initActions();\r\n            this._firstItemViewLoad = true;\r\n            this._lockSelectionProcessing = false;\r\n            this._lockFocusedItemProcessing = false;\r\n            this._itemKeyToFocus = void 0;\r\n            this._controller = new _file_items_controller.default({\r\n                currentPath: this.option(\"currentPath\"),\r\n                currentPathKeys: this.option(\"currentPathKeys\"),\r\n                rootText: this.option(\"rootFolderName\"),\r\n                fileProvider: this.option(\"fileSystemProvider\"),\r\n                allowedFileExtensions: this.option(\"allowedFileExtensions\"),\r\n                uploadMaxFileSize: this.option(\"upload\").maxFileSize,\r\n                uploadChunkSize: this.option(\"upload\").chunkSize,\r\n                onInitialized: this._onControllerInitialized.bind(this),\r\n                onDataLoading: this._onDataLoading.bind(this),\r\n                onSelectedDirectoryChanged: this._onSelectedDirectoryChanged.bind(this)\r\n            });\r\n            this._commandManager = new _uiFile_manager2.FileManagerCommandManager(this.option(\"permissions\"));\r\n            this.$element().addClass(FILE_MANAGER_CLASS);\r\n            this._createNotificationControl();\r\n            this._initCommandManager();\r\n            this._setItemsViewAreaActive(false)\r\n        }\r\n    }, {\r\n        key: \"_createNotificationControl\",\r\n        value: function() {\r\n            var _this = this;\r\n            var $notificationControl = (0, _renderer.default)(\"<div>\").addClass(\"dx-filemanager-notification-container\").appendTo(this.$element());\r\n            this._notificationControl = this._createComponent($notificationControl, _uiFile_manager6.default, {\r\n                progressPanelContainer: this.$element(),\r\n                contentTemplate: function(container) {\r\n                    return _this._createWrapper(container)\r\n                },\r\n                onActionProgress: function(e) {\r\n                    return _this._onActionProgress(e)\r\n                },\r\n                positionTarget: \".\".concat(FILE_MANAGER_CONTAINER_CLASS)\r\n            });\r\n            this._editing.option(\"notificationControl\", this._notificationControl)\r\n        }\r\n    }, {\r\n        key: \"_createWrapper\",\r\n        value: function(container) {\r\n            var _this2 = this;\r\n            this._$wrapper = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_WRAPPER_CLASS).appendTo(container);\r\n            this._createEditing();\r\n            var $toolbar = (0, _renderer.default)(\"<div>\").appendTo(this._$wrapper);\r\n            this._toolbar = this._createComponent($toolbar, _uiFile_manager5.default, {\r\n                commandManager: this._commandManager,\r\n                generalItems: this.option(\"toolbar.items\"),\r\n                fileItems: this.option(\"toolbar.fileSelectionItems\"),\r\n                itemViewMode: this.option(\"itemView\").mode,\r\n                onItemClick: function(args) {\r\n                    return _this2._actions.onToolbarItemClick(args)\r\n                }\r\n            });\r\n            this._createAdaptivityControl()\r\n        }\r\n    }, {\r\n        key: \"_createAdaptivityControl\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            var $container = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_CONTAINER_CLASS).appendTo(this._$wrapper);\r\n            this._adaptivityControl = this._createComponent($container, _uiFile_manager9.default, {\r\n                drawerTemplate: function(container) {\r\n                    return _this3._createFilesTreeView(container)\r\n                },\r\n                contentTemplate: function(container) {\r\n                    return _this3._createItemsPanel(container)\r\n                },\r\n                onAdaptiveStateChanged: function(e) {\r\n                    return _this3._onAdaptiveStateChanged(e)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createEditing\",\r\n        value: function() {\r\n            var _this4 = this;\r\n            var $editingContainer = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_EDITING_CONTAINER_CLASS).appendTo(this.$element());\r\n            this._editing = this._createComponent($editingContainer, _uiFile_manager7.default, {\r\n                controller: this._controller,\r\n                model: {\r\n                    getMultipleSelectedItems: this._getMultipleSelectedItems.bind(this)\r\n                },\r\n                getItemThumbnail: this._getItemThumbnailInfo.bind(this),\r\n                uploadDropZonePlaceholderContainer: this.$element(),\r\n                onSuccess: function(_ref) {\r\n                    var updatedOnlyFiles = _ref.updatedOnlyFiles;\r\n                    return _this4._redrawComponent(updatedOnlyFiles)\r\n                },\r\n                onCreating: function() {\r\n                    return _this4._setItemsViewAreaActive(false)\r\n                },\r\n                onError: function(e) {\r\n                    return _this4._onEditingError(e)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createItemsPanel\",\r\n        value: function($container) {\r\n            this._$itemsPanel = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_ITEMS_PANEL_CLASS).appendTo($container);\r\n            this._createBreadcrumbs(this._$itemsPanel);\r\n            this._createItemView(this._$itemsPanel);\r\n            if (this._commandManager.isCommandAvailable(\"upload\")) {\r\n                this._editing.setUploaderDropZone(this._$itemsPanel)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createFilesTreeView\",\r\n        value: function(container) {\r\n            var _this5 = this;\r\n            this._filesTreeViewContextMenu = this._createContextMenu(false, VIEW_AREAS.folders);\r\n            var $filesTreeView = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_DIRS_PANEL_CLASS).appendTo(container);\r\n            this._filesTreeView = this._createComponent($filesTreeView, _uiFile_manager4.default, {\r\n                storeExpandedState: true,\r\n                contextMenu: this._filesTreeViewContextMenu,\r\n                getDirectories: this.getDirectories.bind(this),\r\n                getCurrentDirectory: this._getCurrentDirectory.bind(this),\r\n                onDirectoryClick: this._onFilesTreeViewDirectoryClick.bind(this),\r\n                onClick: function() {\r\n                    return _this5._setItemsViewAreaActive(false)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createItemView\",\r\n        value: function($container, viewMode) {\r\n            var _this6 = this;\r\n            this._itemViewContextMenu = this._createContextMenu(true, VIEW_AREAS.items);\r\n            var itemViewOptions = this.option(\"itemView\");\r\n            var options = {\r\n                selectionMode: this.option(\"selectionMode\"),\r\n                selectedItemKeys: this.option(\"selectedItemKeys\"),\r\n                focusedItemKey: this.option(\"focusedItemKey\"),\r\n                contextMenu: this._itemViewContextMenu,\r\n                getItems: this._getItemViewItems.bind(this),\r\n                onError: function(_ref2) {\r\n                    var error = _ref2.error;\r\n                    return _this6._showError(error)\r\n                },\r\n                onSelectionChanged: this._onItemViewSelectionChanged.bind(this),\r\n                onFocusedItemChanged: this._onItemViewFocusedItemChanged.bind(this),\r\n                onSelectedItemOpened: this._onSelectedItemOpened.bind(this),\r\n                onContextMenuShowing: function() {\r\n                    return _this6._onContextMenuShowing(VIEW_AREAS.items)\r\n                },\r\n                getItemThumbnail: this._getItemThumbnailInfo.bind(this),\r\n                customizeDetailColumns: this.option(\"customizeDetailColumns\"),\r\n                detailColumns: this.option(\"itemView.details.columns\")\r\n            };\r\n            var $itemView = (0, _renderer.default)(\"<div>\").appendTo($container);\r\n            viewMode = viewMode || itemViewOptions.mode;\r\n            var widgetClass = \"thumbnails\" === viewMode ? _uiFile_managerItem_list2.default : _uiFile_managerItem_list.default;\r\n            this._itemView = this._createComponent($itemView, widgetClass, options);\r\n            _events_engine.default.on($itemView, \"click\", this._onItemViewClick.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_createBreadcrumbs\",\r\n        value: function($container) {\r\n            var _this7 = this;\r\n            var $breadcrumbs = (0, _renderer.default)(\"<div>\").appendTo($container);\r\n            this._breadcrumbs = this._createComponent($breadcrumbs, _uiFile_manager8.default, {\r\n                rootFolderDisplayName: this.option(\"rootFolderName\"),\r\n                onCurrentDirectoryChanging: function(_ref3) {\r\n                    var currentDirectory = _ref3.currentDirectory;\r\n                    return _this7._setCurrentDirectory(currentDirectory)\r\n                }\r\n            });\r\n            this._breadcrumbs.setCurrentDirectory(this._getCurrentDirectory())\r\n        }\r\n    }, {\r\n        key: \"_createContextMenu\",\r\n        value: function(isolateCreationItemCommands, viewArea) {\r\n            var _this8 = this;\r\n            var $contextMenu = (0, _renderer.default)(\"<div>\").appendTo(this._$wrapper);\r\n            return this._createComponent($contextMenu, _uiFile_manager3.default, {\r\n                commandManager: this._commandManager,\r\n                items: this.option(\"contextMenu.items\"),\r\n                onItemClick: function(args) {\r\n                    return _this8._actions.onContextMenuItemClick(args)\r\n                },\r\n                onContextMenuShowing: function() {\r\n                    return _this8._onContextMenuShowing(viewArea)\r\n                },\r\n                isolateCreationItemCommands: isolateCreationItemCommands,\r\n                viewArea: viewArea\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_initCommandManager\",\r\n        value: function() {\r\n            var _this9 = this;\r\n            var actions = (0, _extend.extend)(this._editing.getCommandActions(), {\r\n                refresh: function() {\r\n                    return _this9._refreshAndShowProgress()\r\n                },\r\n                thumbnails: function() {\r\n                    return _this9.option(\"itemView.mode\", \"thumbnails\")\r\n                },\r\n                details: function() {\r\n                    return _this9.option(\"itemView.mode\", \"details\")\r\n                },\r\n                clearSelection: function() {\r\n                    return _this9._clearSelection()\r\n                },\r\n                showNavPane: function() {\r\n                    return _this9._adaptivityControl.toggleDrawer()\r\n                }\r\n            });\r\n            this._commandManager.registerActions(actions)\r\n        }\r\n    }, {\r\n        key: \"_onFilesTreeViewDirectoryClick\",\r\n        value: function(_ref4) {\r\n            var itemData = _ref4.itemData;\r\n            this._setCurrentDirectory(itemData);\r\n            this._setItemsViewAreaActive(false)\r\n        }\r\n    }, {\r\n        key: \"_onItemViewSelectionChanged\",\r\n        value: function(_ref5) {\r\n            var selectedItemInfos = _ref5.selectedItemInfos,\r\n                selectedItems = _ref5.selectedItems,\r\n                selectedItemKeys = _ref5.selectedItemKeys,\r\n                currentSelectedItemKeys = _ref5.currentSelectedItemKeys,\r\n                currentDeselectedItemKeys = _ref5.currentDeselectedItemKeys;\r\n            this._lockSelectionProcessing = true;\r\n            this.option(\"selectedItemKeys\", selectedItemKeys);\r\n            this._lockSelectionProcessing = false;\r\n            this._actions.onSelectionChanged({\r\n                selectedItems: selectedItems,\r\n                selectedItemKeys: selectedItemKeys,\r\n                currentSelectedItemKeys: currentSelectedItemKeys,\r\n                currentDeselectedItemKeys: currentDeselectedItemKeys\r\n            });\r\n            this._updateToolbar(selectedItemInfos);\r\n            this._setItemsViewAreaActive(true)\r\n        }\r\n    }, {\r\n        key: \"_onItemViewFocusedItemChanged\",\r\n        value: function(e) {\r\n            this._lockFocusedItemProcessing = true;\r\n            this.option(\"focusedItemKey\", e.itemKey);\r\n            this._lockFocusedItemProcessing = false;\r\n            this._actions.onFocusedItemChanged({\r\n                item: e.item,\r\n                itemElement: e.itemElement\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onAdaptiveStateChanged\",\r\n        value: function(_ref6) {\r\n            var enabled = _ref6.enabled;\r\n            this._commandManager.setCommandEnabled(\"showNavPane\", enabled);\r\n            this._updateToolbar()\r\n        }\r\n    }, {\r\n        key: \"_onActionProgress\",\r\n        value: function(_ref7) {\r\n            var message = _ref7.message,\r\n                status = _ref7.status;\r\n            this._toolbar.updateRefreshItem(message, status);\r\n            this._updateToolbar()\r\n        }\r\n    }, {\r\n        key: \"_onEditingError\",\r\n        value: function(e) {\r\n            var args = (0, _uiFile_manager.extendAttributes)({}, e, [\"errorCode\", \"errorText\", \"fileSystemItem\"]);\r\n            this._actions.onErrorOccurred(args);\r\n            e.errorText = args.errorText\r\n        }\r\n    }, {\r\n        key: \"_refreshAndShowProgress\",\r\n        value: function() {\r\n            var _this10 = this;\r\n            return (0, _deferred.when)(this._notificationControl.tryShowProgressPanel(), this._controller.refresh()).then(function() {\r\n                return _this10._filesTreeView.refresh()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_updateToolbar\",\r\n        value: function(selectedItems) {\r\n            var items = selectedItems || this._getSelectedItemInfos();\r\n            this._toolbar.update(items)\r\n        }\r\n    }, {\r\n        key: \"_setItemsViewAreaActive\",\r\n        value: function(active) {\r\n            if (this._itemsViewAreaActive === active) {\r\n                return\r\n            }\r\n            this._itemsViewAreaActive = active;\r\n            var $activeArea = null;\r\n            var $inactiveArea = null;\r\n            if (active) {\r\n                $activeArea = this._itemView.$element();\r\n                $inactiveArea = this._filesTreeView.$element()\r\n            } else {\r\n                $activeArea = this._filesTreeView.$element();\r\n                $inactiveArea = this._itemView.$element()\r\n            }\r\n            $activeArea.removeClass(FILE_MANAGER_INACTIVE_AREA_CLASS);\r\n            $inactiveArea.addClass(FILE_MANAGER_INACTIVE_AREA_CLASS)\r\n        }\r\n    }, {\r\n        key: \"_switchView\",\r\n        value: function(viewMode) {\r\n            this._disposeWidget(this._itemView.option(\"contextMenu\"));\r\n            this._disposeWidget(this._itemView);\r\n            this._createItemView(this._$itemsPanel, viewMode);\r\n            this._toolbar.option({\r\n                itemViewMode: viewMode\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_disposeWidget\",\r\n        value: function(widget) {\r\n            widget.dispose();\r\n            widget.$element().remove()\r\n        }\r\n    }, {\r\n        key: \"_clearSelection\",\r\n        value: function() {\r\n            this._itemView.clearSelection()\r\n        }\r\n    }, {\r\n        key: \"_getMultipleSelectedItems\",\r\n        value: function() {\r\n            return this._itemsViewAreaActive ? this._getSelectedItemInfos() : [this._getCurrentDirectory()]\r\n        }\r\n    }, {\r\n        key: \"_showError\",\r\n        value: function(message) {\r\n            this._showNotification(message, false)\r\n        }\r\n    }, {\r\n        key: \"_showNotification\",\r\n        value: function(message, isSuccess) {\r\n            (0, _notify.default)({\r\n                message: message,\r\n                width: 450\r\n            }, isSuccess ? \"success\" : \"error\", 5e3)\r\n        }\r\n    }, {\r\n        key: \"_redrawComponent\",\r\n        value: function(onlyFileItemsView) {\r\n            !onlyFileItemsView && this._filesTreeView.refresh();\r\n            this._itemView.refresh()\r\n        }\r\n    }, {\r\n        key: \"_getItemViewItems\",\r\n        value: function() {\r\n            var _this11 = this;\r\n            var showFolders = this.option(\"itemView\").showFolders;\r\n            var result = this._controller.getCurrentItems(!showFolders);\r\n            this._updateToolbarWithSelectionOnFirstLoad(result);\r\n            if (this.option(\"itemView.showParentFolder\")) {\r\n                result = (0, _deferred.when)(result).then(function(items) {\r\n                    return _this11._getPreparedItemViewItems(items)\r\n                })\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_updateToolbarWithSelectionOnFirstLoad\",\r\n        value: function(itemsResult) {\r\n            var _this12 = this;\r\n            if (!this._firstItemViewLoad) {\r\n                return\r\n            }\r\n            this._firstItemViewLoad = false;\r\n            var selectedItemKeys = this.option(\"selectedItemKeys\");\r\n            if (selectedItemKeys.length > 0) {\r\n                (0, _deferred.when)(itemsResult).done(function(items) {\r\n                    var selectedItems = (0, _uiFile_manager.findItemsByKeys)(items, selectedItemKeys);\r\n                    if (selectedItems.length > 0) {\r\n                        _this12._updateToolbar(selectedItems)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getPreparedItemViewItems\",\r\n        value: function(items) {\r\n            var selectedDir = this._getCurrentDirectory();\r\n            if (selectedDir.fileItem.isRoot()) {\r\n                return items\r\n            }\r\n            var parentDirItem = selectedDir.fileItem.createClone();\r\n            parentDirItem.isParentFolder = true;\r\n            parentDirItem.name = \"..\";\r\n            parentDirItem.relativeName = \"..\";\r\n            parentDirItem.key = \"\".concat(PARENT_DIRECTORY_KEY_PREFIX).concat(selectedDir.fileItem.key);\r\n            var itemsCopy = _toConsumableArray(items);\r\n            itemsCopy.unshift({\r\n                fileItem: parentDirItem,\r\n                icon: \"parentfolder\"\r\n            });\r\n            return itemsCopy\r\n        }\r\n    }, {\r\n        key: \"_onItemViewClick\",\r\n        value: function() {\r\n            this._setItemsViewAreaActive(true)\r\n        }\r\n    }, {\r\n        key: \"_onContextMenuShowing\",\r\n        value: function(viewArea) {\r\n            this._setItemsViewAreaActive(viewArea === VIEW_AREAS.items)\r\n        }\r\n    }, {\r\n        key: \"_getItemThumbnailInfo\",\r\n        value: function(fileInfo) {\r\n            var func = this.option(\"customizeThumbnail\");\r\n            var thumbnail = (0, _type.isFunction)(func) ? func(fileInfo.fileItem) : fileInfo.fileItem.thumbnail;\r\n            if (thumbnail) {\r\n                return {\r\n                    thumbnail: thumbnail,\r\n                    cssClass: FILE_MANAGER_ITEM_CUSTOM_THUMBNAIL_CLASS\r\n                }\r\n            }\r\n            return {\r\n                thumbnail: fileInfo.icon\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileManager.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                fileSystemProvider: null,\r\n                currentPath: \"\",\r\n                currentPathKeys: [],\r\n                rootFolderName: _message.default.format(\"dxFileManager-rootDirectoryName\"),\r\n                selectionMode: \"multiple\",\r\n                selectedItemKeys: [],\r\n                focusedItemKey: void 0,\r\n                toolbar: {\r\n                    items: [\"showNavPane\", \"create\", \"upload\", \"switchView\", {\r\n                        name: \"separator\",\r\n                        location: \"after\"\r\n                    }, \"refresh\"],\r\n                    fileSelectionItems: [\"download\", \"separator\", \"move\", \"copy\", \"rename\", \"separator\", \"delete\", \"clearSelection\", {\r\n                        name: \"separator\",\r\n                        location: \"after\"\r\n                    }, \"refresh\"]\r\n                },\r\n                contextMenu: {\r\n                    items: [\"create\", \"upload\", \"rename\", \"move\", \"copy\", \"delete\", \"refresh\", \"download\"]\r\n                },\r\n                itemView: {\r\n                    details: {\r\n                        columns: [\"thumbnail\", \"name\", \"dateModified\", \"size\"]\r\n                    },\r\n                    mode: \"details\",\r\n                    showFolders: true,\r\n                    showParentFolder: true\r\n                },\r\n                customizeThumbnail: null,\r\n                customizeDetailColumns: null,\r\n                onContextMenuItemClick: null,\r\n                onCurrentDirectoryChanged: null,\r\n                onSelectedFileOpened: null,\r\n                onSelectionChanged: null,\r\n                onFocusedItemChanged: null,\r\n                onToolbarItemClick: null,\r\n                onErrorOccurred: null,\r\n                allowedFileExtensions: [],\r\n                upload: {\r\n                    maxFileSize: 0,\r\n                    chunkSize: 2e5\r\n                },\r\n                permissions: {\r\n                    create: false,\r\n                    copy: false,\r\n                    move: false,\r\n                    \"delete\": false,\r\n                    rename: false,\r\n                    upload: false,\r\n                    download: false\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            var name = args.name;\r\n            switch (name) {\r\n                case \"currentPath\":\r\n                    this._controller.setCurrentPath(args.value);\r\n                    break;\r\n                case \"currentPathKeys\":\r\n                    this._controller.setCurrentPathByKeys(args.value);\r\n                    break;\r\n                case \"selectedItemKeys\":\r\n                    if (!this._lockSelectionProcessing && this._itemView) {\r\n                        this._itemView.option(\"selectedItemKeys\", args.value)\r\n                    }\r\n                    break;\r\n                case \"focusedItemKey\":\r\n                    if (!this._lockFocusedItemProcessing && this._itemView) {\r\n                        this._itemView.option(\"focusedItemKey\", args.value)\r\n                    }\r\n                    break;\r\n                case \"fileSystemProvider\":\r\n                case \"selectionMode\":\r\n                case \"customizeThumbnail\":\r\n                case \"customizeDetailColumns\":\r\n                case \"rootFolderName\":\r\n                case \"allowedFileExtensions\":\r\n                case \"permissions\":\r\n                case \"upload\":\r\n                    this.repaint();\r\n                    break;\r\n                case \"itemView\":\r\n                    if (\"itemView.mode\" === args.fullName) {\r\n                        this._switchView(args.value)\r\n                    } else {\r\n                        this.repaint()\r\n                    }\r\n                    break;\r\n                case \"toolbar\":\r\n                    var toolbarOptions = {};\r\n                    if (\"toolbar\" === args.fullName) {\r\n                        if (args.value.items) {\r\n                            toolbarOptions.generalItems = args.value.items\r\n                        }\r\n                        if (args.value.fileSelectionItems) {\r\n                            toolbarOptions.fileItems = args.value.fileSelectionItems\r\n                        }\r\n                    }\r\n                    if (0 === args.fullName.indexOf(\"toolbar.items\")) {\r\n                        toolbarOptions.generalItems = this.option(\"toolbar.items\")\r\n                    }\r\n                    if (0 === args.fullName.indexOf(\"toolbar.fileSelectionItems\")) {\r\n                        toolbarOptions.fileItems = this.option(\"toolbar.fileSelectionItems\")\r\n                    }\r\n                    this._toolbar.option(toolbarOptions);\r\n                    break;\r\n                case \"contextMenu\":\r\n                    if (\"contextMenu\" === args.fullName && args.value.items || 0 === args.fullName.indexOf(\"contextMenu.items\")) {\r\n                        var contextMenuItems = this.option(\"contextMenu.items\");\r\n                        this._filesTreeViewContextMenu.option(\"items\", contextMenuItems);\r\n                        this._itemViewContextMenu.option(\"items\", contextMenuItems)\r\n                    }\r\n                    break;\r\n                case \"onContextMenuItemClick\":\r\n                case \"onCurrentDirectoryChanged\":\r\n                case \"onSelectedFileOpened\":\r\n                case \"onSelectionChanged\":\r\n                case \"onFocusedItemChanged\":\r\n                case \"onToolbarItemClick\":\r\n                case \"onErrorOccurred\":\r\n                    this._actions[name] = this._createActionByOption(name);\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(FileManager.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_initActions\",\r\n        value: function() {\r\n            this._actions = {\r\n                onContextMenuItemClick: this._createActionByOption(\"onContextMenuItemClick\"),\r\n                onCurrentDirectoryChanged: this._createActionByOption(\"onCurrentDirectoryChanged\"),\r\n                onSelectedFileOpened: this._createActionByOption(\"onSelectedFileOpened\"),\r\n                onSelectionChanged: this._createActionByOption(\"onSelectionChanged\"),\r\n                onFocusedItemChanged: this._createActionByOption(\"onFocusedItemChanged\"),\r\n                onToolbarItemClick: this._createActionByOption(\"onToolbarItemClick\"),\r\n                onErrorOccurred: this._createActionByOption(\"onErrorOccurred\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"executeCommand\",\r\n        value: function(commandName) {\r\n            return this._commandManager.executeCommand(commandName)\r\n        }\r\n    }, {\r\n        key: \"_setCurrentDirectory\",\r\n        value: function(directoryInfo) {\r\n            this._controller.setCurrentDirectory(directoryInfo)\r\n        }\r\n    }, {\r\n        key: \"_getCurrentDirectory\",\r\n        value: function() {\r\n            return this._controller.getCurrentDirectory()\r\n        }\r\n    }, {\r\n        key: \"_onControllerInitialized\",\r\n        value: function(_ref8) {\r\n            var controller = _ref8.controller;\r\n            this._controller = this._controller || controller;\r\n            var currentDirectory = controller.getCurrentDirectory();\r\n            if (!currentDirectory.fileItem.isRoot()) {\r\n                this._syncToCurrentDirectory()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onDataLoading\",\r\n        value: function(_ref9) {\r\n            var operation = _ref9.operation;\r\n            var options = null;\r\n            if (\"navigation\" === operation) {\r\n                options = {\r\n                    focusedItemKey: this._itemKeyToFocus\r\n                };\r\n                this._itemKeyToFocus = void 0\r\n            }\r\n            this._itemView.refresh(options)\r\n        }\r\n    }, {\r\n        key: \"_onSelectedDirectoryChanged\",\r\n        value: function() {\r\n            var currentDirectory = this._getCurrentDirectory();\r\n            this._syncToCurrentDirectory();\r\n            this._actions.onCurrentDirectoryChanged({\r\n                directory: currentDirectory.fileItem\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_syncToCurrentDirectory\",\r\n        value: function() {\r\n            var currentDirectory = this._getCurrentDirectory();\r\n            var currentPath = this._controller.getCurrentPath();\r\n            var currentPathKeys = currentDirectory.fileItem.pathKeys;\r\n            if (this._filesTreeView) {\r\n                this._filesTreeView.updateCurrentDirectory()\r\n            }\r\n            if (this._breadcrumbs) {\r\n                this._breadcrumbs.setCurrentDirectory(currentDirectory)\r\n            }\r\n            var options = {\r\n                currentPath: currentPath\r\n            };\r\n            if (!(0, _common.equalByValue)(this.option(\"currentPathKeys\"), currentPathKeys)) {\r\n                options.currentPathKeys = currentPathKeys\r\n            }\r\n            this.option(options)\r\n        }\r\n    }, {\r\n        key: \"getDirectories\",\r\n        value: function(parentDirectoryInfo, skipNavigationOnError) {\r\n            return this._controller.getDirectories(parentDirectoryInfo, skipNavigationOnError)\r\n        }\r\n    }, {\r\n        key: \"_getSelectedItemInfos\",\r\n        value: function() {\r\n            return this._itemView.getSelectedItems()\r\n        }\r\n    }, {\r\n        key: \"refresh\",\r\n        value: function() {\r\n            return this.executeCommand(\"refresh\")\r\n        }\r\n    }, {\r\n        key: \"getCurrentDirectory\",\r\n        value: function() {\r\n            var directoryInfo = this._getCurrentDirectory();\r\n            return directoryInfo && directoryInfo.fileItem || null\r\n        }\r\n    }, {\r\n        key: \"getSelectedItems\",\r\n        value: function() {\r\n            return this._getSelectedItemInfos().map(function(itemInfo) {\r\n                return itemInfo.fileItem\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onSelectedItemOpened\",\r\n        value: function(_ref10) {\r\n            var fileItemInfo = _ref10.fileItemInfo;\r\n            var fileItem = fileItemInfo.fileItem;\r\n            if (!fileItem.isDirectory) {\r\n                this._actions.onSelectedFileOpened({\r\n                    file: fileItem\r\n                });\r\n                return\r\n            }\r\n            if (fileItem.isParentFolder) {\r\n                this._itemKeyToFocus = this._getCurrentDirectory().fileItem.key\r\n            }\r\n            var newCurrentDirectory = fileItem.isParentFolder ? this._getCurrentDirectory().parentDirectory : fileItemInfo;\r\n            this._setCurrentDirectory(newCurrentDirectory);\r\n            if (newCurrentDirectory) {\r\n                this._filesTreeView.toggleDirectoryExpandedState(newCurrentDirectory.parentDirectory, true)\r\n            }\r\n        }\r\n    }]);\r\n    return FileManager\r\n}(_ui.default);\r\n(0, _component_registrator.default)(\"dxFileManager\", FileManager);\r\nvar _default = FileManager;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}