{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\Cart\\\\topup\\\\product.js\";\nimport React, { Component } from 'react';\nimport './style.scss';\nimport { NormalButton, NormalInput, NormalSelect, InputSearch, NormalModal, TableWrapper } from 'component/common';\nimport { dateFormat } from 'service/helperFunctions';\nimport _ from 'lodash';\nimport { history } from 'helpers';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\nimport SimpleReactValidator from 'simple-react-validator'; // import { Treatment, Payment, EditCart } from './cart/index';\n\nimport service from 'assets/images/make-up-brush.png'; // import Discount from './cart/discount';\n\nimport { FormGroup, Label, Input } from 'reactstrap';\nexport class TopupProductClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      treatmentList: [],\n      cartData: {},\n      formFields: {\n        customer_name: \"\",\n        new_outstanding: \"\",\n        old_outstanding: \"\",\n        topup_amount: \"\"\n      },\n      headerDetails: [{\n        label: 'Invoice No',\n        sortKey: false,\n        width: \"120px\"\n      }, {\n        label: 'Item',\n        sortKey: false,\n        width: \"150px\"\n      }, {\n        label: 'Qty',\n        sortKey: false,\n        width: \"50px\"\n      }, {\n        label: 'Deposit',\n        width: \"100px\"\n      }, {\n        label: 'Outstanding',\n        sortKey: false,\n        width: \"100px\"\n      }, {\n        label: 'Pay amount',\n        width: \"100px\"\n      }, {\n        label: 'Staff',\n        width: \"100px\"\n      }]\n    };\n\n    this.componentWillMount = () => {\n      this.validator = new SimpleReactValidator({\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message text-danger validNo fs14\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 33\n          }\n        }, message),\n        autoForceUpdate: this\n      });\n      let {\n        roomList,\n        sourceList,\n        staffList,\n        cartData,\n        duration,\n        treatmentList\n      } = this.state;\n      this.getCart();\n    };\n\n    this.getCart = () => {\n      let {\n        roomList,\n        sourceList,\n        staffList,\n        cartData,\n        duration,\n        treatmentList\n      } = this.state;\n      this.props.getCommonApi(`topupproduct/?cust_id=${this.props.id}`).then(key => {\n        cartData = key;\n        treatmentList = key.data;\n        this.setState({\n          cartData,\n          treatmentList\n        });\n        this.getDataFromRes(key); // }\n      });\n    };\n\n    this.getDataFromRes = data => {\n      let {\n        header_data\n      } = data;\n      let {\n        formFields\n      } = this.state;\n      formFields['customer_name'] = header_data ? header_data.customer_name : \"\";\n      formFields['new_outstanding'] = header_data ? header_data.new_outstanding : \"\";\n      formFields['old_outstanding'] = header_data ? header_data.old_outstanding : \"\";\n      formFields['topup_amount'] = header_data ? header_data.topup_amount : \"\";\n      this.setState({\n        formFields\n      });\n    };\n\n    this.handleCreateCart = () => {\n      let {\n        basicApptDetail\n      } = this.props;\n      let {\n        treatmentList\n      } = this.state;\n      let payload = [];\n\n      if (this.validator.allValid()) {\n        for (let key of treatmentList) {\n          if (key.pay_amount > 0) {\n            let obj = {\n              \"cust_noid\": basicApptDetail.custId,\n              \"cart_date\": dateFormat(new Date(), \"yyyy-mm-dd\"),\n              \"itemcodeid\": key.stock_id,\n              \"price\": key.pay_amount,\n              \"item_uom\": null,\n              \"treatment_account\": null,\n              \"deposit_account\": key.DepositAccountid,\n              \"prepaid_account\": null\n            };\n            payload.push(obj);\n          }\n        }\n\n        this.props.getCommonApi(`itemcart/Check/?cart_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}&cust_noid=${basicApptDetail.custId}`).then(res => {\n          if (res.data.length === 0) {\n            this.props.commonCreateApi(\"itemcart/TopUpCartCreate/\", payload).then(res => {\n              // this.props.handleCartCreated()\n              this.props.handleModal();\n            });\n          } else {\n            this.props.commonCreateApi(`itemcart/TopUpCartCreate/?cart_id=${res.cart_id}`, payload).then(res => {\n              this.props.handleModal();\n            });\n          }\n        });\n      } else {\n        this.validator.showMessages();\n      }\n    };\n\n    this.handleClearLine = () => {\n      this.props.commonDeleteApi(`tmpitemhelper/delete/?clear_all=0&cartid=${this.props.cartId}`).then(() => {\n        this.getCart();\n      });\n    };\n\n    this.handleClearAll = () => {\n      this.props.commonDeleteApi(`tmpitemhelper/delete/?clear_all=1&cartid=${this.props.cartId}`).then(() => {\n        let {\n          formFields,\n          postFields\n        } = this.state; // formFields[\"work_point\"] = \"\";\n        // postFields['times'] = \"\";\n\n        this.setState({\n          formFields,\n          postFields\n        });\n        this.getCart();\n      });\n    };\n\n    this.handlePayAmount = (event, data, index) => {\n      let {\n        treatmentList\n      } = this.state;\n      treatmentList[index][event.target.name] = event.target.value;\n      this.setState({\n        treatmentList\n      });\n    };\n  }\n\n  render() {\n    let {\n      workpoint = \"\",\n      treatmentList = [],\n      headerDetails,\n      formFields\n    } = this.state;\n    let {\n      customer_name,\n      new_outstanding,\n      old_outstanding,\n      topup_amount\n    } = formFields;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row new-cart treatment-done top-up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left w-100 text-black common-label-text mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: customer_name,\n      name: \"customer_name\",\n      onChange: this.handlePostChange,\n      className: `customer-name`,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left w-100 text-black common-label-text mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }, \"Outstanding\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: old_outstanding,\n      name: \"old_outstanding\",\n      onChange: this.handlePostChange,\n      className: `customer-name`,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      check: true,\n      className: \"m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      check: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"checkbox\",\n      onChange: this.props.handleChangeBox,\n      name: \"cust_maillist\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }), ' ', \" Auto\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left w-100 text-black common-label-text mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    }, \"Top Up Amount\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: topup_amount,\n      name: \"topup_amount\",\n      onChange: this.handlePostChange,\n      className: `customer-name`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left w-100 text-black common-label-text mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 25\n      }\n    }, \"New Outstanging\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: new_outstanding,\n      name: \"new_outstanding\",\n      onChange: this.handlePostChange,\n      className: `customer-name`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: `col-12 cart-item mt-2`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `item-list`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 29\n      }\n    }, treatmentList.length > 0 ? treatmentList.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 49\n        }\n      }, item.transaction_code)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-left justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 49\n        }\n      }, item.item_description)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 49\n        }\n      }, item.qty)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 49\n        }\n      }, item.balance)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 49\n        }\n      }, item.outstanding)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center payment-input justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(NormalInput, {\n        value: item.pay_amount,\n        name: \"pay_amount\",\n        onChange: e => this.handlePayAmount(e, item, index),\n        className: `customer-name`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 53\n        }\n      }), item.pay_amount ? this.validator.message('pay_amount', item.pay_amount, `required|max:${Number(item.outstanding)},num`) : \"\")), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 49\n        }\n      }, item.sa_staffname)));\n    }) : \"\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 pt-4 action-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2\",\n      mainbg: true,\n      className: \" fs-15 confirm\",\n      label: \"Confirm\",\n      outline: false,\n      onClick: this.handleCreateCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  selected_cstomer: state.common.selected_cstomer,\n  basicApptDetail: state.appointment.basicApptDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    // getCustomer,\n    getCommonApi,\n    updateForm,\n    commonCreateApi,\n    commonPatchApi,\n    commonDeleteApi\n  }, dispatch);\n};\n\nexport const TopupProduct = connect(mapStateToProps, mapDispatchToProps)(TopupProductClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/topup/product.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","service","FormGroup","Label","Input","TopupProductClass","state","treatmentList","cartData","formFields","customer_name","new_outstanding","old_outstanding","topup_amount","headerDetails","label","sortKey","width","componentWillMount","validator","element","message","autoForceUpdate","roomList","sourceList","staffList","duration","getCart","props","id","then","key","data","setState","getDataFromRes","header_data","handleCreateCart","basicApptDetail","payload","allValid","pay_amount","obj","custId","Date","stock_id","DepositAccountid","push","res","length","handleModal","cart_id","showMessages","handleClearLine","cartId","handleClearAll","postFields","handlePayAmount","event","index","target","name","value","render","workpoint","handlePostChange","handleChangeBox","handlePagination","map","item","transaction_code","item_description","qty","balance","outstanding","e","Number","sa_staffname","mapStateToProps","selected_cstomer","common","appointment","mapDispatchToProps","dispatch","TopupProduct"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,cAAP;AACA,SAASC,YAAT,EAAuBC,WAAvB,EAAoCC,YAApC,EAAkDC,WAAlD,EAA+DC,WAA/D,EAA4EC,YAA5E,QAAgG,kBAAhG;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,YAAT,EAAuBC,UAAvB,EAAmCC,eAAnC,EAAoDC,eAApD,EAAqEC,cAArE,QAA2F,sBAA3F;AACA,OAAOC,oBAAP,MAAiC,wBAAjC,C,CACA;;AACA,OAAOC,OAAP,MAAoB,iCAApB,C,CACA;;AACA,SAASC,SAAT,EAAoBC,KAApB,EAA2BC,KAA3B,QAAwC,YAAxC;AAGA,OAAO,MAAMC,iBAAN,SAAgCtB,SAAhC,CAA0C;AAAA;AAAA;AAAA,SAC7CuB,KAD6C,GACrC;AACJC,MAAAA,aAAa,EAAE,EADX;AAEJC,MAAAA,QAAQ,EAAE,EAFN;AAGJC,MAAAA,UAAU,EAAE;AACRC,QAAAA,aAAa,EAAE,EADP;AAERC,QAAAA,eAAe,EAAE,EAFT;AAGRC,QAAAA,eAAe,EAAE,EAHT;AAIRC,QAAAA,YAAY,EAAE;AAJN,OAHR;AASJC,MAAAA,aAAa,EAAE,CACX;AAAEC,QAAAA,KAAK,EAAE,YAAT;AAAuBC,QAAAA,OAAO,EAAE,KAAhC;AAAuCC,QAAAA,KAAK,EAAE;AAA9C,OADW,EAEX;AAAEF,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,OAAO,EAAE,KAA1B;AAAiCC,QAAAA,KAAK,EAAE;AAAxC,OAFW,EAGX;AAAEF,QAAAA,KAAK,EAAE,KAAT;AAAgBC,QAAAA,OAAO,EAAE,KAAzB;AAAgCC,QAAAA,KAAK,EAAE;AAAvC,OAHW,EAIX;AAAEF,QAAAA,KAAK,EAAE,SAAT;AAAoBE,QAAAA,KAAK,EAAE;AAA3B,OAJW,EAKX;AAAEF,QAAAA,KAAK,EAAE,aAAT;AAAwBC,QAAAA,OAAO,EAAE,KAAjC;AAAwCC,QAAAA,KAAK,EAAE;AAA/C,OALW,EAMX;AAAEF,QAAAA,KAAK,EAAE,YAAT;AAAuBE,QAAAA,KAAK,EAAE;AAA9B,OANW,EAOX;AAAEF,QAAAA,KAAK,EAAE,OAAT;AAAkBE,QAAAA,KAAK,EAAE;AAAzB,OAPW;AATX,KADqC;;AAAA,SAqB7CC,kBArB6C,GAqBxB,MAAM;AACvB,WAAKC,SAAL,GAAiB,IAAInB,oBAAJ,CAAyB;AACtCoB,QAAAA,OAAO,EAAEC,OAAO,iBAAI;AAAM,UAAA,SAAS,EAAC,wCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA0DA,OAA1D,CADkB;AAEtCC,QAAAA,eAAe,EAAE;AAFqB,OAAzB,CAAjB;AAIA,UAAI;AAAEC,QAAAA,QAAF;AAAYC,QAAAA,UAAZ;AAAwBC,QAAAA,SAAxB;AAAmCjB,QAAAA,QAAnC;AAA6CkB,QAAAA,QAA7C;AAAuDnB,QAAAA;AAAvD,UAAyE,KAAKD,KAAlF;AAEA,WAAKqB,OAAL;AAEH,KA9B4C;;AAAA,SAgC7CA,OAhC6C,GAgCnC,MAAM;AACZ,UAAI;AAAEJ,QAAAA,QAAF;AAAYC,QAAAA,UAAZ;AAAwBC,QAAAA,SAAxB;AAAmCjB,QAAAA,QAAnC;AAA6CkB,QAAAA,QAA7C;AAAuDnB,QAAAA;AAAvD,UAAyE,KAAKD,KAAlF;AACA,WAAKsB,KAAL,CAAWjC,YAAX,CAAyB,yBAAwB,KAAKiC,KAAL,CAAWC,EAAG,EAA/D,EAAkEC,IAAlE,CAAwEC,GAAD,IAAS;AAC5EvB,QAAAA,QAAQ,GAAGuB,GAAX;AACAxB,QAAAA,aAAa,GAAGwB,GAAG,CAACC,IAApB;AACA,aAAKC,QAAL,CAAc;AAAEzB,UAAAA,QAAF;AAAYD,UAAAA;AAAZ,SAAd;AACA,aAAK2B,cAAL,CAAoBH,GAApB,EAJ4E,CAK5E;AACH,OAND;AAOH,KAzC4C;;AAAA,SA2C7CG,cA3C6C,GA2C3BF,IAAD,IAAU;AACvB,UAAI;AAAEG,QAAAA;AAAF,UAAkBH,IAAtB;AACA,UAAI;AAAEvB,QAAAA;AAAF,UAAiB,KAAKH,KAA1B;AACAG,MAAAA,UAAU,CAAC,eAAD,CAAV,GAA8B0B,WAAW,GAAGA,WAAW,CAACzB,aAAf,GAA+B,EAAxE;AACAD,MAAAA,UAAU,CAAC,iBAAD,CAAV,GAAgC0B,WAAW,GAAGA,WAAW,CAACxB,eAAf,GAAiC,EAA5E;AACAF,MAAAA,UAAU,CAAC,iBAAD,CAAV,GAAgC0B,WAAW,GAAGA,WAAW,CAACvB,eAAf,GAAiC,EAA5E;AACAH,MAAAA,UAAU,CAAC,cAAD,CAAV,GAA6B0B,WAAW,GAAGA,WAAW,CAACtB,YAAf,GAA8B,EAAtE;AACA,WAAKoB,QAAL,CAAc;AACVxB,QAAAA;AADU,OAAd;AAGH,KArD4C;;AAAA,SAuD7C2B,gBAvD6C,GAuD1B,MAAM;AACrB,UAAI;AAAEC,QAAAA;AAAF,UAAsB,KAAKT,KAA/B;AACA,UAAI;AAAErB,QAAAA;AAAF,UAAoB,KAAKD,KAA7B;AACA,UAAIgC,OAAO,GAAG,EAAd;;AACA,UAAI,KAAKnB,SAAL,CAAeoB,QAAf,EAAJ,EAA+B;AAC3B,aAAK,IAAIR,GAAT,IAAgBxB,aAAhB,EAA+B;AAC3B,cAAIwB,GAAG,CAACS,UAAJ,GAAiB,CAArB,EAAwB;AACpB,gBAAIC,GAAG,GAAG;AACN,2BAAaJ,eAAe,CAACK,MADvB;AAEN,2BAAapD,UAAU,CAAC,IAAIqD,IAAJ,EAAD,EAAa,YAAb,CAFjB;AAGN,4BAAcZ,GAAG,CAACa,QAHZ;AAIN,uBAASb,GAAG,CAACS,UAJP;AAKN,0BAAY,IALN;AAMN,mCAAqB,IANf;AAON,iCAAmBT,GAAG,CAACc,gBAPjB;AAQN,iCAAmB;AARb,aAAV;AAUAP,YAAAA,OAAO,CAACQ,IAAR,CAAaL,GAAb;AACH;AACJ;;AAED,aAAKb,KAAL,CAAWjC,YAAX,CAAyB,6BAA4BL,UAAU,CAAC,IAAIqD,IAAJ,EAAD,EAAa,YAAb,CAA2B,cAAaN,eAAe,CAACK,MAAO,EAA9H,EAAiIZ,IAAjI,CAAuIiB,GAAD,IAAS;AAC3I,cAAIA,GAAG,CAACf,IAAJ,CAASgB,MAAT,KAAoB,CAAxB,EAA2B;AACvB,iBAAKpB,KAAL,CAAW/B,eAAX,CAA2B,2BAA3B,EAAwDyC,OAAxD,EAAiER,IAAjE,CAAuEiB,GAAD,IAAS;AAC3E;AACA,mBAAKnB,KAAL,CAAWqB,WAAX;AACH,aAHD;AAIH,WALD,MAKO;AACH,iBAAKrB,KAAL,CAAW/B,eAAX,CAA4B,qCAAoCkD,GAAG,CAACG,OAAQ,EAA5E,EAA+EZ,OAA/E,EAAwFR,IAAxF,CAA8FiB,GAAD,IAAS;AAClG,mBAAKnB,KAAL,CAAWqB,WAAX;AACH,aAFD;AAGH;AACJ,SAXD;AAYH,OA7BD,MA6BO;AACH,aAAK9B,SAAL,CAAegC,YAAf;AACH;AACJ,KA3F4C;;AAAA,SA8F7CC,eA9F6C,GA8F3B,MAAM;AACpB,WAAKxB,KAAL,CAAW9B,eAAX,CAA4B,4CAA2C,KAAK8B,KAAL,CAAWyB,MAAO,EAAzF,EAA4FvB,IAA5F,CAAiG,MAAM;AACnG,aAAKH,OAAL;AACH,OAFD;AAGH,KAlG4C;;AAAA,SAoG7C2B,cApG6C,GAoG5B,MAAM;AACnB,WAAK1B,KAAL,CAAW9B,eAAX,CAA4B,4CAA2C,KAAK8B,KAAL,CAAWyB,MAAO,EAAzF,EAA4FvB,IAA5F,CAAiG,MAAM;AACnG,YAAI;AAAErB,UAAAA,UAAF;AAAc8C,UAAAA;AAAd,YAA6B,KAAKjD,KAAtC,CADmG,CAEnG;AACA;;AACA,aAAK2B,QAAL,CAAc;AACVxB,UAAAA,UADU;AAEV8C,UAAAA;AAFU,SAAd;AAIA,aAAK5B,OAAL;AACH,OATD;AAUH,KA/G4C;;AAAA,SAiH7C6B,eAjH6C,GAiH3B,CAACC,KAAD,EAAQzB,IAAR,EAAc0B,KAAd,KAAwB;AACtC,UAAI;AAAEnD,QAAAA;AAAF,UAAoB,KAAKD,KAA7B;AACAC,MAAAA,aAAa,CAACmD,KAAD,CAAb,CAAqBD,KAAK,CAACE,MAAN,CAAaC,IAAlC,IAA0CH,KAAK,CAACE,MAAN,CAAaE,KAAvD;AACA,WAAK5B,QAAL,CAAc;AACV1B,QAAAA;AADU,OAAd;AAGH,KAvH4C;AAAA;;AAyH7CuD,EAAAA,MAAM,GAAG;AACL,QAAI;AAAEC,MAAAA,SAAS,GAAG,EAAd;AAAkBxD,MAAAA,aAAa,GAAG,EAAlC;AAAsCO,MAAAA,aAAtC;AAAqDL,MAAAA;AAArD,QAAoE,KAAKH,KAA7E;AACA,QAAI;AAAEI,MAAAA,aAAF;AAAiBC,MAAAA,eAAjB;AAAkCC,MAAAA,eAAlC;AAAmDC,MAAAA;AAAnD,QAAoEJ,UAAxE;AACA,wBACI;AAAK,MAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,SAAS,EAAC,mDAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,WAAD;AACI,MAAA,KAAK,EAAEC,aADX;AAEI,MAAA,IAAI,EAAC,eAFT;AAGI,MAAA,QAAQ,EAAE,KAAKsD,gBAHnB;AAII,MAAA,SAAS,EAAG,eAJhB;AAKI,MAAA,QAAQ,MALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJJ,CADJ,eAeI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,SAAS,EAAC,mDAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,eAII;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,WAAD;AACI,MAAA,KAAK,EAAEpD,eADX;AAEI,MAAA,IAAI,EAAC,iBAFT;AAGI,MAAA,QAAQ,EAAE,KAAKoD,gBAHnB;AAII,MAAA,SAAS,EAAG,eAJhB;AAKI,MAAA,QAAQ,MALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJJ,CAfJ,CADJ,eA+BI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAW,MAAA,KAAK,MAAhB;AAAiB,MAAA,SAAS,EAAC,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AACI,MAAA,IAAI,EAAC,UADT;AAEI,MAAA,QAAQ,EAAE,KAAKpC,KAAL,CAAWqC,eAFzB;AAGI,MAAA,IAAI,EAAC,eAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAIgC,GAJhC,UADJ,CADJ,CA/BJ,eAyCI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,SAAS,EAAC,mDAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,eAII;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,WAAD;AACI,MAAA,KAAK,EAAEpD,YADX;AAEI,MAAA,IAAI,EAAC,cAFT;AAGI,MAAA,QAAQ,EAAE,KAAKmD,gBAHnB;AAII,MAAA,SAAS,EAAG,eAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJJ,CADJ,eAcI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,SAAS,EAAC,mDAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,eAII;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,WAAD;AACI,MAAA,KAAK,EAAErD,eADX;AAEI,MAAA,IAAI,EAAC,iBAFT;AAGI,MAAA,QAAQ,EAAE,KAAKqD,gBAHnB;AAII,MAAA,SAAS,EAAG,eAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJJ,CAdJ,CAzCJ,eAsEI;AAAK,MAAA,SAAS,EAAG,uBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAG,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AACI,MAAA,aAAa,EAAElD,aADnB;AAEI,MAAA,YAAY,EAAE,KAAKoD,gBAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIK3D,aAAa,CAACyC,MAAd,GAAuB,CAAvB,GAA2BzC,aAAa,CAAC4D,GAAd,CAAkB,CAACC,IAAD,EAAOV,KAAP,KAAiB;AAC3D,0BACI;AAAI,QAAA,GAAG,EAAEA,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmEU,IAAI,CAACC,gBAAxE,CAAJ,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAK,QAAA,SAAS,EAAC,gDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiED,IAAI,CAACE,gBAAtE,CAAJ,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmEF,IAAI,CAACG,GAAxE,CAAJ,CAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmEH,IAAI,CAACI,OAAxE,CAAJ,CALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmEJ,IAAI,CAACK,WAAxE,CAAJ,CANJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,gEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,WAAD;AACI,QAAA,KAAK,EAAEL,IAAI,CAAC5B,UADhB;AAEI,QAAA,IAAI,EAAC,YAFT;AAGI,QAAA,QAAQ,EAAGkC,CAAD,IAAO,KAAKlB,eAAL,CAAqBkB,CAArB,EAAwBN,IAAxB,EAA8BV,KAA9B,CAHrB;AAII,QAAA,SAAS,EAAG,eAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAOKU,IAAI,CAAC5B,UAAL,GAAkB,KAAKrB,SAAL,CAAeE,OAAf,CAAuB,YAAvB,EAAqC+C,IAAI,CAAC5B,UAA1C,EAAuD,gBAAemC,MAAM,CAACP,IAAI,CAACK,WAAN,CAAmB,MAA/F,CAAlB,GAA0H,EAP/H,CADJ,CAPJ,eAkBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmEL,IAAI,CAACQ,YAAxE,CAAJ,CAlBJ,CADJ;AAsBH,KAvB2B,CAA3B,GAuBI,EA3BT,CADJ,CAFJ,CADJ,CAtEJ,eA4GI;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAmBI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnBJ,eAsBI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AACI,MAAA,WAAW,EAAE,MADjB;AAEI,MAAA,MAAM,EAAE,IAFZ;AAGI,MAAA,SAAS,EAAC,gBAHd;AAII,MAAA,KAAK,EAAC,SAJV;AAKI,MAAA,OAAO,EAAE,KALb;AAMI,MAAA,OAAO,EAAE,KAAKxC,gBANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAtBJ,CADJ,CA5GJ,CADJ;AAmJH;;AA/Q4C;;AAmRjD,MAAMyC,eAAe,GAAIvE,KAAD,KAAY;AAChCwE,EAAAA,gBAAgB,EAAExE,KAAK,CAACyE,MAAN,CAAaD,gBADC;AAEhCzC,EAAAA,eAAe,EAAE/B,KAAK,CAAC0E,WAAN,CAAkB3C;AAFH,CAAZ,CAAxB;;AAKA,MAAM4C,kBAAkB,GAAGC,QAAQ,IAAI;AACnC,SAAOxF,kBAAkB,CAAC;AACtB;AACAC,IAAAA,YAFsB;AAGtBC,IAAAA,UAHsB;AAItBC,IAAAA,eAJsB;AAKtBE,IAAAA,cALsB;AAMtBD,IAAAA;AANsB,GAAD,EAOtBoF,QAPsB,CAAzB;AAQH,CATD;;AAWA,OAAO,MAAMC,YAAY,GAAG1F,OAAO,CAACoF,eAAD,EAAkBI,kBAAlB,CAAP,CAA6C5E,iBAA7C,CAArB","sourcesContent":["import React, { Component } from 'react';\r\nimport './style.scss';\r\nimport { NormalButton, NormalInput, NormalSelect, InputSearch, NormalModal, TableWrapper } from 'component/common';\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport _ from 'lodash';\r\nimport { history } from 'helpers';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\"\r\nimport SimpleReactValidator from 'simple-react-validator';\r\n// import { Treatment, Payment, EditCart } from './cart/index';\r\nimport service from 'assets/images/make-up-brush.png';\r\n// import Discount from './cart/discount';\r\nimport { FormGroup, Label, Input } from 'reactstrap';\r\n\r\n\r\nexport class TopupProductClass extends Component {\r\n    state = {\r\n        treatmentList: [],\r\n        cartData: {},\r\n        formFields: {\r\n            customer_name: \"\",\r\n            new_outstanding: \"\",\r\n            old_outstanding: \"\",\r\n            topup_amount: \"\"\r\n        },\r\n        headerDetails: [\r\n            { label: 'Invoice No', sortKey: false, width: \"120px\" },\r\n            { label: 'Item', sortKey: false, width: \"150px\" },\r\n            { label: 'Qty', sortKey: false, width: \"50px\" },\r\n            { label: 'Deposit', width: \"100px\" },\r\n            { label: 'Outstanding', sortKey: false, width: \"100px\" },\r\n            { label: 'Pay amount', width: \"100px\" },\r\n            { label: 'Staff', width: \"100px\" },\r\n        ],\r\n    }\r\n\r\n    componentWillMount = () => {\r\n        this.validator = new SimpleReactValidator({\r\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\r\n            autoForceUpdate: this,\r\n        });\r\n        let { roomList, sourceList, staffList, cartData, duration, treatmentList } = this.state;\r\n\r\n        this.getCart();\r\n\r\n    }\r\n\r\n    getCart = () => {\r\n        let { roomList, sourceList, staffList, cartData, duration, treatmentList } = this.state;\r\n        this.props.getCommonApi(`topupproduct/?cust_id=${this.props.id}`).then((key) => {\r\n            cartData = key;\r\n            treatmentList = key.data;\r\n            this.setState({ cartData, treatmentList })\r\n            this.getDataFromRes(key)\r\n            // }\r\n        })\r\n    }\r\n\r\n    getDataFromRes = (data) => {\r\n        let { header_data } = data;\r\n        let { formFields } = this.state;\r\n        formFields['customer_name'] = header_data ? header_data.customer_name : \"\";\r\n        formFields['new_outstanding'] = header_data ? header_data.new_outstanding : \"\";\r\n        formFields['old_outstanding'] = header_data ? header_data.old_outstanding : \"\";\r\n        formFields['topup_amount'] = header_data ? header_data.topup_amount : \"\";\r\n        this.setState({\r\n            formFields\r\n        })\r\n    }\r\n\r\n    handleCreateCart = () => {\r\n        let { basicApptDetail } = this.props;\r\n        let { treatmentList } = this.state;\r\n        let payload = []\r\n        if (this.validator.allValid()) {\r\n            for (let key of treatmentList) {\r\n                if (key.pay_amount > 0) {\r\n                    let obj = {\r\n                        \"cust_noid\": basicApptDetail.custId,\r\n                        \"cart_date\": dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n                        \"itemcodeid\": key.stock_id,\r\n                        \"price\": key.pay_amount,\r\n                        \"item_uom\": null,\r\n                        \"treatment_account\": null,\r\n                        \"deposit_account\": key.DepositAccountid,\r\n                        \"prepaid_account\": null\r\n                    }\r\n                    payload.push(obj);\r\n                }\r\n            }\r\n\r\n            this.props.getCommonApi(`itemcart/Check/?cart_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}&cust_noid=${basicApptDetail.custId}`).then((res) => {\r\n                if (res.data.length === 0) {\r\n                    this.props.commonCreateApi(\"itemcart/TopUpCartCreate/\", payload).then((res) => {\r\n                        // this.props.handleCartCreated()\r\n                        this.props.handleModal();\r\n                    })\r\n                } else {\r\n                    this.props.commonCreateApi(`itemcart/TopUpCartCreate/?cart_id=${res.cart_id}`, payload).then((res) => {\r\n                        this.props.handleModal();\r\n                    })\r\n                }\r\n            })\r\n        } else {\r\n            this.validator.showMessages();\r\n        }\r\n    }\r\n\r\n\r\n    handleClearLine = () => {\r\n        this.props.commonDeleteApi(`tmpitemhelper/delete/?clear_all=0&cartid=${this.props.cartId}`).then(() => {\r\n            this.getCart();\r\n        })\r\n    }\r\n\r\n    handleClearAll = () => {\r\n        this.props.commonDeleteApi(`tmpitemhelper/delete/?clear_all=1&cartid=${this.props.cartId}`).then(() => {\r\n            let { formFields, postFields } = this.state;\r\n            // formFields[\"work_point\"] = \"\";\r\n            // postFields['times'] = \"\";\r\n            this.setState({\r\n                formFields,\r\n                postFields\r\n            });\r\n            this.getCart();\r\n        })\r\n    }\r\n\r\n    handlePayAmount = (event, data, index) => {\r\n        let { treatmentList } = this.state;\r\n        treatmentList[index][event.target.name] = event.target.value;\r\n        this.setState({\r\n            treatmentList\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let { workpoint = \"\", treatmentList = [], headerDetails, formFields } = this.state;\r\n        let { customer_name, new_outstanding, old_outstanding, topup_amount } = formFields\r\n        return (\r\n            <div className=\"row new-cart treatment-done top-up\">\r\n                <div className=\"col-5\">\r\n                    <div className=\"d-flex\">\r\n                        <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                            Customer\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalInput\r\n                                value={customer_name}\r\n                                name=\"customer_name\"\r\n                                onChange={this.handlePostChange}\r\n                                className={`customer-name`}\r\n                                disabled\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"d-flex\">\r\n                        <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                            Outstanding\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalInput\r\n                                value={old_outstanding}\r\n                                name=\"old_outstanding\"\r\n                                onChange={this.handlePostChange}\r\n                                className={`customer-name`}\r\n                                disabled\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                    <FormGroup check className=\"m-0\">\r\n                        <Label check>\r\n                            <Input\r\n                                type=\"checkbox\"\r\n                                onChange={this.props.handleChangeBox}\r\n                                name=\"cust_maillist\" />{' '} Auto\r\n                        </Label>\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"col-4\">\r\n                    <div className=\"d-flex\">\r\n                        <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                            Top Up Amount\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalInput\r\n                                value={topup_amount}\r\n                                name=\"topup_amount\"\r\n                                onChange={this.handlePostChange}\r\n                                className={`customer-name`}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"d-flex\">\r\n                        <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                            New Outstanging\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalInput\r\n                                value={new_outstanding}\r\n                                name=\"new_outstanding\"\r\n                                onChange={this.handlePostChange}\r\n                                className={`customer-name`}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className={`col-12 cart-item mt-2`}>\r\n                    <div className={`item-list`}>\r\n\r\n                        <div className=\"table\">\r\n                            <TableWrapper\r\n                                headerDetails={headerDetails}\r\n                                queryHandler={this.handlePagination}\r\n                            >\r\n                                {treatmentList.length > 0 ? treatmentList.map((item, index) => {\r\n                                    return (\r\n                                        <tr key={index}>\r\n\r\n                                            <td><div className=\"d-flex align-items-center justify-content-center\">{item.transaction_code}</div></td>\r\n                                            <td><div className=\"d-flex align-items-left justify-content-center\">{item.item_description}</div></td>\r\n                                            <td><div className=\"d-flex align-items-center justify-content-center\">{item.qty}</div></td>\r\n                                            <td><div className=\"d-flex align-items-center justify-content-center\">{item.balance}</div></td>\r\n                                            <td><div className=\"d-flex align-items-center justify-content-center\">{item.outstanding}</div></td>\r\n                                            <td>\r\n                                                <div className=\"d-flex align-items-center payment-input justify-content-center\">\r\n                                                    <NormalInput\r\n                                                        value={item.pay_amount}\r\n                                                        name=\"pay_amount\"\r\n                                                        onChange={(e) => this.handlePayAmount(e, item, index)}\r\n                                                        className={`customer-name`}\r\n                                                    />\r\n                                                    {item.pay_amount ? this.validator.message('pay_amount', item.pay_amount, `required|max:${Number(item.outstanding)},num`) : \"\"}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td><div className=\"d-flex align-items-center justify-content-center\">{item.sa_staffname}</div></td>\r\n                                        </tr>\r\n                                    )\r\n                                }) : \"\"\r\n                                }\r\n\r\n                            </TableWrapper>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-12 pt-4 action-bar\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-6 d-flex\">\r\n                            {/* <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-line\"\r\n                                label=\"Clear Line\"\r\n                                outline={false}\r\n                                onClick={this.handleClearLine}\r\n                            />\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-all\"\r\n                                label=\"Clear All\"\r\n                                outline={false}\r\n                                onClick={this.handleClearAll}\r\n                            /> */}\r\n                        </div>\r\n                        <div className=\"col-4 text-right\">\r\n\r\n                        </div>\r\n                        <div className=\"col-2 text-right\">\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\" fs-15 confirm\"\r\n                                label=\"Confirm\"\r\n                                outline={false}\r\n                                onClick={this.handleCreateCart}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    selected_cstomer: state.common.selected_cstomer,\r\n    basicApptDetail: state.appointment.basicApptDetail,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        // getCustomer,\r\n        getCommonApi,\r\n        updateForm,\r\n        commonCreateApi,\r\n        commonPatchApi,\r\n        commonDeleteApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const TopupProduct = connect(mapStateToProps, mapDispatchToProps)(TopupProductClass)"]},"metadata":{},"sourceType":"module"}