{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton,NormalSelect}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import\"./style.scss\";import{api}from\"service/api\";import{Staff}from\"service/apiVariables\";import{getStaff,deleteStaff}from\"redux/actions/staff\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import _ from\"lodash\";export var ListStaffClass=/*#__PURE__*/function(_React$Component){_inherits(ListStaffClass,_React$Component);var _super=_createSuper(ListStaffClass);function ListStaffClass(){var _this;_classCallCheck(this,ListStaffClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Staff name\",sortKey:true},{label:\"Phone\"},{label:\"Staff ID\",sortKey:true},{label:\"Specialist\",sortKey:true},{label:\"Home site\",sortKey:true},{label:\"Current site\",sortKey:true},{label:\"\"}],staffList:[],pageMeta:{},active:false,currentIndex:-1};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.queryHandler=function(data){var _data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit,_data$search=data.search,search=_data$search===void 0?\"\":_data$search;_this.props.getStaff(\"?page=\".concat(page,\"&limit=\").concat(limit)).then(function(res){// this.props.getStaff(`?page=${page}&limit=${limit}&search=${search}`).then((res) => {\nconsole.log(res,\"dsfdfaafg\",res.data.dataList);var _this$state=_this.state,staffList=_this$state.staffList,pageMeta=_this$state.pageMeta;staffList=res.data.dataList;pageMeta=res.data.meta.pagination;_this.setState({staffList:staffList,pageMeta:pageMeta});});};_this.handlePagination=function(page){_this.queryHandler(page);};_this.handlesearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;var data={search:searchString};_this.queryHandler(data);},500);}_this.debouncedFn();};_this.getSkills=function(services){console.log(skills,\"sdfoiuyujf\");var skills=[];var _iterator=_createForOfIteratorHelper(services),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;skills.push(key.Course);}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(skills,\"sdfoiuyujf\");return String(skills);};_this.handleDeleteStaff=function(id){_this.props.deleteStaff(\"\".concat(id,\"/\")).then(function(res){});};return _this;}_createClass(ListStaffClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.queryHandler({});}// popup open/close\n},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,headerDetails=_this$state2.headerDetails,staffList=_this$state2.staffList,pageMeta=_this$state2.pageMeta,currentIndex=_this$state2.currentIndex;return/*#__PURE__*/React.createElement(\"div\",{className:\"staffList-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"h3\",null,\"List of Staffs\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-container\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Staff\",onChange:this.handleChange,value:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-4\"},/*#__PURE__*/React.createElement(NormalButton,{className:\"col-12 fs-15 float-right\",label:\"Staff availability\",mainbg:true,onClick:function onClick(){return _this2.props.history.push(\"/admin/staff/availability\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-3 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Staff\",onClick:function onClick(){return _this2.props.history.push(\"/admin/staff/add\");}}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta},staffList.length>0?staffList.map(function(_ref,index){var id=_ref.id,emp_name=_ref.emp_name,emp_phone1=_ref.emp_phone1,emp_code=_ref.emp_code,services=_ref.services,site_code=_ref.site_code,defaultsitecode=_ref.defaultsitecode,status=_ref.status;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(status===\"available\"?\"available\":\"not-available\")}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_phone1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},services?services[0]:\"\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},defaultsitecode)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},site_code)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\",ref:function ref(node){_this2.node=node;},onClick:function onClick(){return _this2.handleClick(index);}},currentIndex===index?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more-active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"option card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-14 pt-3\",onClick:function onClick(){return _this2.props.history.push(\"/admin/staff/\".concat(id,\"/staffDetails\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey px-3\"}),\" \",\"View\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-14\",onClick:function onClick(){return _this2.props.history.push(\"/admin/staff/\".concat(id,\"/editStaff\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-edit px-3\"}),\" \",\"Edit\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-14 pb-3\",onClick:function onClick(){return _this2.handleDeleteStaff(id);}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-delete px-3\"}),\" \",\"Delete\",\" \"))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more text-grey\"}))));}):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"palette\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail\"},\"Available today\")),/*#__PURE__*/React.createElement(\"div\",{className:\"color-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color not-available\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail\"},\"Not Available today\")))))));}}]);return ListStaffClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{// filter: state.dashboard\n};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getStaff:getStaff,deleteStaff:deleteStaff},dispatch);};export var ListStaff=connect(mapStateToProps,mapDispatchToProps)(ListStaffClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Staff/ListStaff/index.js"],"names":["React","NormalButton","NormalSelect","InputSearch","TableWrapper","api","Staff","getStaff","deleteStaff","connect","bindActionCreators","_","ListStaffClass","state","headerDetails","label","sortKey","staffList","pageMeta","active","currentIndex","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","setState","prevState","e","node","contains","target","queryHandler","data","page","limit","search","props","then","res","console","log","dataList","meta","pagination","handlePagination","handlesearch","event","persist","debouncedFn","debounce","searchString","value","getSkills","services","skills","push","Course","String","handleDeleteStaff","id","handleChange","history","length","map","index","emp_name","emp_phone1","emp_code","site_code","defaultsitecode","status","Component","mapStateToProps","mapDispatchToProps","dispatch","ListStaff"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { NormalButton, NormalSelect } from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport \"./style.scss\";\r\nimport { api } from \"service/api\";\r\nimport { Staff } from \"service/apiVariables\";\r\nimport { getStaff, deleteStaff } from \"redux/actions/staff\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport _ from \"lodash\";\r\n\r\nexport class ListStaffClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Staff name\", sortKey: true },\r\n      { label: \"Phone\" },\r\n      { label: \"Staff ID\", sortKey: true },\r\n      { label: \"Specialist\", sortKey: true },\r\n      { label: \"Home site\", sortKey: true },\r\n      { label: \"Current site\", sortKey: true },\r\n      { label: \"\" },\r\n    ],\r\n    staffList: [],\r\n    pageMeta: {},\r\n    active: false,\r\n    currentIndex: -1,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.queryHandler({});\r\n  }\r\n\r\n  // popup open/close\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  // while clicking popup close at outside click\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  // api call for staff\r\n  queryHandler = data => {\r\n    let { page = 1, limit = 10, search = \"\" } = data;\r\n    this.props.getStaff(`?page=${page}&limit=${limit}`).then(res => {\r\n      // this.props.getStaff(`?page=${page}&limit=${limit}&search=${search}`).then((res) => {\r\n      console.log(res, \"dsfdfaafg\", res.data.dataList);\r\n      let { staffList, pageMeta } = this.state;\r\n      staffList = res.data.dataList;\r\n      pageMeta = res.data.meta.pagination;\r\n      this.setState({\r\n        staffList,\r\n        pageMeta,\r\n      });\r\n    });\r\n  };\r\n\r\n  // pagination\r\n  handlePagination = page => {\r\n    this.queryHandler(page);\r\n  };\r\n\r\n  // seach change with api call\r\n  handlesearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        let data = { search: searchString };\r\n        this.queryHandler(data);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  // skills api call\r\n  getSkills = services => {\r\n    console.log(skills, \"sdfoiuyujf\");\r\n    let skills = [];\r\n    for (let key of services) {\r\n      skills.push(key.Course);\r\n    }\r\n    console.log(skills, \"sdfoiuyujf\");\r\n    return String(skills);\r\n  };\r\n\r\n  // delete api call for staff\r\n  handleDeleteStaff = id => {\r\n    this.props.deleteStaff(`${id}/`).then(res => {});\r\n  };\r\n\r\n  render() {\r\n    let { headerDetails, staffList, pageMeta, currentIndex } = this.state;\r\n    return (\r\n      <div className=\"staffList-container\">\r\n        <div className=\"row align-items-center\">\r\n          <div className=\"col-md-4\">\r\n            <h3>List of Staffs</h3>\r\n          </div>\r\n          <div className=\"col-md-8\">\r\n            <div className=\"d-flex justify-content-between\">\r\n              <div className=\"input-container\">\r\n                <InputSearch\r\n                  className=\"\"\r\n                  placeholder=\"Search Staff\"\r\n                  onChange={this.handleChange}\r\n                  value={``}\r\n                />\r\n              </div>\r\n              <div className=\"w-100 col-4\">\r\n                <NormalButton\r\n                  className=\"col-12 fs-15 float-right\"\r\n                  label=\"Staff availability\"\r\n                  mainbg={true}\r\n                  onClick={() =>\r\n                    this.props.history.push(\"/admin/staff/availability\")\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"w-100 col-3 p-0\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  className=\"col-12 fs-15 float-right\"\r\n                  label=\"Add Staff\"\r\n                  onClick={() => this.props.history.push(\"/admin/staff/add\")}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* <div className=\"filter-by\">\r\n                    <p className=\"head\">Filter</p>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-3\">\r\n                            <div>\r\n                                <label className=\"label\">Service</label>\r\n                                <div className=\"input-group filter\">\r\n                                    <NormalSelect\r\n                                        placeholder=\"Masseuse\"\r\n                                        // options={treatmentOption}\r\n                                        // value={treatment}\r\n                                        iconname=\"icon-down-key\"\r\n                                        name=\"treatment\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                            <div>\r\n                                <label className=\"label\">Department</label>\r\n                                <div className=\"input-group filter\">\r\n                                    <NormalSelect\r\n                                        placeholder=\"Select department\"\r\n                                        // options={treatmentOption}\r\n                                        // value={treatment}\r\n                                        iconname=\"icon-down-key\"\r\n                                        name=\"treatment\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                            <div>\r\n                                <label className=\"label\">Contract duration</label>\r\n                                <div className=\"input-group filter\">\r\n                                    <NormalSelect\r\n                                        placeholder=\"Select duration\"\r\n                                        // options={treatmentOption}\r\n                                        // value={treatment}\r\n                                        iconname=\"icon-down-key\"\r\n                                        name=\"treatment\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                            <div>\r\n                                <label className=\"label\">Rating</label>\r\n                                <div className=\"input-group filter\">\r\n                                    <NormalSelect\r\n                                        placeholder=\"Select rating\"\r\n                                        // options={treatmentOption}\r\n                                        // value={treatment}\r\n                                        iconname=\"icon-down-key\"\r\n                                        name=\"treatment\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div> */}\r\n        <div className=\"tab-table-content\">\r\n          <div className=\"py-4\">\r\n            <div className=\"table-container\">\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n                pageMeta={pageMeta}\r\n              >\r\n                {staffList.length > 0\r\n                  ? staffList.map(\r\n                      (\r\n                        {\r\n                          id,\r\n                          emp_name,\r\n                          emp_phone1,\r\n                          emp_code,\r\n                          services,\r\n                          site_code,\r\n                          defaultsitecode,\r\n                          status,\r\n                        },\r\n                        index\r\n                      ) => {\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td className=\"position-relative status-type\">\r\n                              <span\r\n                                className={`${\r\n                                  status === \"available\"\r\n                                    ? \"available\"\r\n                                    : \"not-available\"\r\n                                }`}\r\n                              ></span>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {emp_name}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {emp_phone1}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {emp_code}\r\n                              </div>\r\n                            </td>\r\n                            {/* <td><div className=\"d-flex align-items-center justify-content-center\"></div></td> */}\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {services ? services[0] : \"\"}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {defaultsitecode}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {site_code}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className=\"position-relative\"\r\n                              ref={node => {\r\n                                this.node = node;\r\n                              }}\r\n                              onClick={() => this.handleClick(index)}\r\n                            >\r\n                              {currentIndex === index ? (\r\n                                <>\r\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\r\n                                    <i className=\"icon-more\"></i>\r\n                                  </div>\r\n                                  <div className=\"option card\">\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-14 pt-3\"\r\n                                      onClick={() =>\r\n                                        this.props.history.push(\r\n                                          `/admin/staff/${id}/staffDetails`\r\n                                        )\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-eye-grey px-3\"></span>{\" \"}\r\n                                      View{\" \"}\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-14\"\r\n                                      onClick={() =>\r\n                                        this.props.history.push(\r\n                                          `/admin/staff/${id}/editStaff`\r\n                                        )\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-edit px-3\"></span>{\" \"}\r\n                                      Edit{\" \"}\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-14 pb-3\"\r\n                                      onClick={() => this.handleDeleteStaff(id)}\r\n                                    >\r\n                                      <span className=\"icon-delete px-3\"></span>{\" \"}\r\n                                      Delete{\" \"}\r\n                                    </div>\r\n                                  </div>\r\n                                </>\r\n                              ) : (\r\n                                <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\r\n                                  <i className=\"icon-more text-grey\"></i>\r\n                                </div>\r\n                              )}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      }\r\n                    )\r\n                  : \"\"}\r\n              </TableWrapper>\r\n              <div className=\"palette\">\r\n                <div className=\"color-detail\">\r\n                  <div className=\"color\"></div>\r\n                  <div className=\"detail\">Available today</div>\r\n                </div>\r\n                <div className=\"color-detail\">\r\n                  <div className=\"color not-available\"></div>\r\n                  <div className=\"detail\">Not Available today</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getStaff,\r\n      deleteStaff,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ListStaff = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ListStaffClass);\r\n"]},"metadata":{},"sourceType":"module"}