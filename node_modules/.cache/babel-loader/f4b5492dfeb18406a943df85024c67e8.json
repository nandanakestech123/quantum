{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalButton,NormalCheckbox,NormalInput,TableWrapper}from\"component/common\";import{withTranslation}from\"react-i18next\";import{CustomerClasses,NewCustomerClasses,ItemDepts,NewDepartmentaldiscounts,Departmentaldiscounts}from\"redux/actions/Backend\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{Toast}from\"service/toast\";var EditCustomermasterClass=/*#__PURE__*/function(_Component){_inherits(EditCustomermasterClass,_Component);var _super=_createSuper(EditCustomermasterClass);function EditCustomermasterClass(){var _this;_classCallCheck(this,EditCustomermasterClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={itemId:null,desc:null,checked:true,customerDetails:[{label:\"Code\",divClass:\"justify-content-end\"},{label:\"Department\"},{label:\"Discount\"}],List:[],discount:0,deptcode:null,Data:[]};_this.componentDidMount=function(){var itemId=_this.state.itemId;itemId=window.location.pathname.split(\"/\")[4];_this.setState({itemId:itemId});console.log(itemId);_this.Listofcustomerclass(itemId);_this.Listofdiscount(itemId);_this.ListodDept({});};_this.Listofdiscount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(code){var Data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Data=_this.state.Data;_context.next=3;return _this.props.Departmentaldiscounts().then(function(res){var _iterator=_createForOfIteratorHelper(res),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;if(key.classid==code)Data.push({departmentid:key.departmentid,classid:key.classid,discount:key.discount});}}catch(err){_iterator.e(err);}finally{_iterator.f();}});case 3:console.log(Data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.Listofcustomerclass=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(code){var _this$state,desc,checkd,temp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=_this.state,desc=_this$state.desc,checkd=_this$state.checkd,temp=_this$state.temp;_context2.next=3;return _this.props.CustomerClasses().then(function(res){console.log(res);var objIndex=res.findIndex(function(obj){return obj.classCode==code;});console.log(objIndex);temp=res[objIndex];_this.setState({temp:temp});desc=temp.classDesc;checkd=temp.classIsactive;_this.setState({desc:desc,checkd:checkd});});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.ListodDept=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.updateState({is_loading:true});_context3.next=3;return _this.props.ItemDepts().then(function(res){console.log(res);var List=_this.state.List;var _iterator2=_createForOfIteratorHelper(res),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;List.push({itmCode:key.itmCode,itmDesc:key.itmDesc,Discount:0});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}console.log(List);_this.setState({List:List,is_loading:false});console.log(List.length);});case 3:case\"end\":return _context3.stop();}}},_callee3);}));_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.temp=function(_ref4){var _ref4$target=_ref4.target,value=_ref4$target.value,name=_ref4$target.name;console.log(value,name);var _this$state2=_this.state,code=_this$state2.code,desc=_this$state2.desc,checked=_this$state2.checked;if(name==\"code\"){code=value;_this.setState({code:code});}if(name==\"desc\"){desc=value;_this.setState({desc:desc});}if(name==\"checked\"){checked=value;_this.setState({checked:checked});}};_this.finalcorporate=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this$state3,desc,code,checkd,newreason;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$state3=_this.state,desc=_this$state3.desc,code=_this$state3.code,checkd=_this$state3.checkd;if(!(desc==null)){_context4.next=5;break;}Toast({type:\"error\",message:\"Please check required field\"});_context4.next=8;break;case 5:newreason={classCode:code,classDesc:desc,classIsactive:checkd,classProduct:0,classService:0};_context4.next=8;return _this.props.NewCustomerClasses(newreason).then(function(data){Toast({type:\"success\",message:\"Successfully Added\"});_this.Listofcustomerclass();}).catch(function(e){return console.log(e);});case 8:case\"end\":return _context4.stop();}}},_callee4);}));_this.handlediscount=function(_ref6){var _ref6$target=_ref6.target,value=_ref6$target.value,name=_ref6$target.name;var _this$state4=_this.state,List=_this$state4.List,discount=_this$state4.discount,deptcode=_this$state4.deptcode;if(name==\"discount\"){discount=value;_this.setState({discount:discount});for(var i=0;i<=List.length-1;i++){if(List[i].itmCode==deptcode){List[i].Discount=discount;_this.setState({List:List});_this.handledepartmentdiscount();}}}};_this.handleid=function(code){var deptcode=_this.state.deptcode;deptcode=code;_this.setState({deptcode:deptcode});console.log(deptcode);};_this.handledepartmentdiscount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _this$state5,discount,deptcode,code,newreason;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this$state5=_this.state,discount=_this$state5.discount,deptcode=_this$state5.deptcode,code=_this$state5.code;if(!(discount!=0)){_context5.next=5;break;}newreason={departmentid:deptcode,classid:code,discount:discount,isactive:null};_context5.next=5;return _this.props.NewDepartmentaldiscounts(newreason).then(function(data){console.log(\"ss\");});case 5:case\"end\":return _context5.stop();}}},_callee5);}));return _this;}_createClass(EditCustomermasterClass,[{key:\"render\",value:function render(){var _this2=this;var t=this.props.t;var _this$state6=this.state,desc=_this$state6.desc,checked=_this$state6.checked,List=_this$state6.List,customerDetails=_this$state6.customerDetails,is_loading=_this$state6.is_loading,discount=_this$state6.discount;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"detail d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\",onClick:function onClick(){return _this2.props.history.push(\"/admin/backend\");}},t(\"Master Data\")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\",onClick:function onClick(){return _this2.props.history.push(\"/admin/backend\");}},t(\"Customer Master \")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},t(\"Operation\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"mt-5\"},t(\"Customer Class\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(\"span\",null,t(\"Code\")),/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"*\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:this.state.itemId,name:\"code\",onChange:this.temp,disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3 \"},/*#__PURE__*/React.createElement(\"span\",null,t(\"Description\")),/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"*\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group d-flex\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NormalInput,{value:desc,name:\"desc\",onChange:this.temp})),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex input-group\"},/*#__PURE__*/React.createElement(NormalCheckbox,{checked:checked,name:\"checked\",onChange:this.temp}),/*#__PURE__*/React.createElement(\"p\",null,t(\"Active\")))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:customerDetails},is_loading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))))):List.length>0?List.map(function(_ref8,index){var itmCode=_ref8.itmCode,itmDesc=_ref8.itmDesc,Discount=_ref8.Discount;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},itmCode)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},itmDesc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\",onClick:function onClick(){return _this2.handleid(itmCode);}},/*#__PURE__*/React.createElement(NormalInput,{value:Discount,name:\"discount\",onChange:_this2.handlediscount}))));}):null))))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\",style:{width:100}},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,label:\"Update\",onClick:function onClick(){return _this2.finalcorporate();}}))));}}]);return EditCustomermasterClass;}(Component);export{EditCustomermasterClass as default};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({CustomerClasses:CustomerClasses,NewCustomerClasses:NewCustomerClasses,ItemDepts:ItemDepts,NewDepartmentaldiscounts:NewDepartmentaldiscounts,Departmentaldiscounts:Departmentaldiscounts},dispatch);};export var EditCustomermaster=withTranslation()(connect(null,mapDispatchToProps)(EditCustomermasterClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Backend/Customer Master I/Editpage.js"],"names":["React","Component","NormalButton","NormalCheckbox","NormalInput","TableWrapper","withTranslation","CustomerClasses","NewCustomerClasses","ItemDepts","NewDepartmentaldiscounts","Departmentaldiscounts","connect","bindActionCreators","Toast","EditCustomermasterClass","state","itemId","desc","checked","customerDetails","label","divClass","List","discount","deptcode","Data","componentDidMount","window","location","pathname","split","setState","console","log","Listofcustomerclass","Listofdiscount","ListodDept","code","props","then","res","key","classid","push","departmentid","checkd","temp","objIndex","findIndex","obj","classCode","classDesc","classIsactive","updateState","is_loading","itmCode","itmDesc","Discount","length","data","isMounted","target","value","name","finalcorporate","type","message","newreason","classProduct","classService","catch","e","handlediscount","i","handledepartmentdiscount","handleid","isactive","t","history","color","map","index","width","mapDispatchToProps","dispatch","EditCustomermaster"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalButton,\r\n  NormalCheckbox,\r\n  NormalInput,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  CustomerClasses,\r\n  NewCustomerClasses,\r\n  ItemDepts,\r\n  NewDepartmentaldiscounts,\r\n  Departmentaldiscounts,\r\n} from \"redux/actions/Backend\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { Toast } from \"service/toast\";\r\nexport default class EditCustomermasterClass extends Component {\r\n  state = {\r\n    itemId: null,\r\n    desc: null,\r\n    checked: true,\r\n    customerDetails: [\r\n      { label: \"Code\", divClass: \"justify-content-end\" },\r\n      { label: \"Department\" },\r\n      { label: \"Discount\" },\r\n    ],\r\n    List: [],\r\n    discount: 0,\r\n    deptcode: null,\r\n    Data: [],\r\n  };\r\n  componentDidMount = () => {\r\n    let { itemId } = this.state;\r\n    itemId = window.location.pathname.split(\"/\")[4];\r\n    this.setState({ itemId });\r\n    console.log(itemId);\r\n    this.Listofcustomerclass(itemId);\r\n    this.Listofdiscount(itemId);\r\n    this.ListodDept({});\r\n  };\r\n  Listofdiscount = async (code) => {\r\n    let { Data } = this.state;\r\n    await this.props.Departmentaldiscounts().then((res) => {\r\n      for (let key of res) {\r\n        if (key.classid == code)\r\n          Data.push({\r\n            departmentid: key.departmentid,\r\n            classid: key.classid,\r\n            discount: key.discount,\r\n          });\r\n      }\r\n    });\r\n    console.log(Data);\r\n  };\r\n  Listofcustomerclass = async (code) => {\r\n    let { desc, checkd, temp } = this.state;\r\n    await this.props.CustomerClasses().then((res) => {\r\n      console.log(res);\r\n      let objIndex = res.findIndex((obj) => obj.classCode == code);\r\n      console.log(objIndex);\r\n      temp = res[objIndex];\r\n      this.setState({\r\n        temp,\r\n      });\r\n      desc = temp.classDesc;\r\n      checkd = temp.classIsactive;\r\n      this.setState({ desc, checkd });\r\n    });\r\n  };\r\n\r\n  ListodDept = async () => {\r\n    this.updateState({ is_loading: true });\r\n    await this.props.ItemDepts().then((res) => {\r\n      console.log(res);\r\n      let { List } = this.state;\r\n      for (let key of res) {\r\n        List.push({ itmCode: key.itmCode, itmDesc: key.itmDesc, Discount: 0 });\r\n      }\r\n      console.log(List);\r\n      this.setState({\r\n        List,\r\n        is_loading: false,\r\n      });\r\n      console.log(List.length);\r\n    });\r\n  };\r\n\r\n  updateState = (data) => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  temp = ({ target: { value, name } }) => {\r\n    console.log(value, name);\r\n    let { code, desc, checked } = this.state;\r\n    if (name == \"code\") {\r\n      code = value;\r\n      this.setState({ code });\r\n    }\r\n    if (name == \"desc\") {\r\n      desc = value;\r\n      this.setState({ desc });\r\n    }\r\n    if (name == \"checked\") {\r\n      checked = value;\r\n      this.setState({ checked });\r\n    }\r\n  };\r\n  finalcorporate = async () => {\r\n    let { desc, code, checkd } = this.state;\r\n    if (desc == null) {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Please check required field\",\r\n      });\r\n    } else {\r\n      let newreason = {\r\n        classCode: code,\r\n        classDesc: desc,\r\n        classIsactive: checkd,\r\n        classProduct: 0,\r\n        classService: 0,\r\n      };\r\n      await this.props\r\n        .NewCustomerClasses(newreason)\r\n        .then((data) => {\r\n          Toast({\r\n            type: \"success\",\r\n            message: \"Successfully Added\",\r\n          });\r\n          this.Listofcustomerclass();\r\n        })\r\n        .catch((e) => console.log(e));\r\n    }\r\n  };\r\n  handlediscount = ({ target: { value, name } }) => {\r\n    let { List, discount, deptcode } = this.state;\r\n    if (name == \"discount\") {\r\n      discount = value;\r\n      this.setState({ discount });\r\n      for (let i = 0; i <= List.length - 1; i++) {\r\n        if (List[i].itmCode == deptcode) {\r\n          List[i].Discount = discount;\r\n          this.setState({ List });\r\n          this.handledepartmentdiscount();\r\n        }\r\n      }\r\n    }\r\n  };\r\n  handleid = (code) => {\r\n    let { deptcode } = this.state;\r\n    deptcode = code;\r\n    this.setState({ deptcode });\r\n    console.log(deptcode);\r\n  };\r\n  handledepartmentdiscount = async () => {\r\n    let { discount, deptcode, code } = this.state;\r\n    if (discount != 0) {\r\n      let newreason = {\r\n        departmentid: deptcode,\r\n        classid: code,\r\n        discount: discount,\r\n        isactive: null,\r\n      };\r\n      await this.props.NewDepartmentaldiscounts(newreason).then((data) => {\r\n        console.log(\"ss\");\r\n      });\r\n    }\r\n  };\r\n  render() {\r\n    let { t } = this.props;\r\n    let { desc, checked, List, customerDetails, is_loading, discount } =\r\n      this.state;\r\n    return (\r\n      <>\r\n        <div className=\"col-md-12 d-flex align-items-center\">\r\n          <div className=\"detail d-flex\">\r\n            <p\r\n              className=\"category\"\r\n              onClick={() => this.props.history.push(\"/admin/backend\")}\r\n            >\r\n              {t(\"Master Data\")}\r\n            </p>\r\n            <i className=\"icon-right mx-md-3\"></i>\r\n            <p\r\n              className=\"sub-category\"\r\n              onClick={() => this.props.history.push(\"/admin/backend\")}\r\n            >\r\n              {t(\"Customer Master \")}\r\n            </p>\r\n            <i className=\"icon-right mx-md-3\"></i>\r\n            <p className=\"sub-category\">{t(\"Operation\")}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"container-fluid\">\r\n          <h5 className=\"mt-5\">{t(\"Customer Class\")}</h5>\r\n          <div className=\"row\">\r\n            <div className=\"col-4\">\r\n              <div className=\"mt-3\">\r\n                <span>{t(\"Code\")}</span>\r\n                <span style={{ color: \"red\" }}>*</span>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    value={this.state.itemId}\r\n                    name=\"code\"\r\n                    onChange={this.temp}\r\n                    disabled={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-3 \">\r\n                <span>{t(\"Description\")}</span>\r\n                <span style={{ color: \"red\" }}>*</span>\r\n                <div className=\"input-group d-flex\">\r\n                  <div>\r\n                    <NormalInput\r\n                      value={desc}\r\n                      name=\"desc\"\r\n                      onChange={this.temp}\r\n                    />\r\n                  </div>\r\n                  <div className=\"ml-5\">\r\n                    <div className=\"d-flex input-group\">\r\n                      <NormalCheckbox\r\n                        checked={checked}\r\n                        name=\"checked\"\r\n                        onChange={this.temp}\r\n                      />\r\n                      <p>{t(\"Active\")}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-6 mt-1\">\r\n            <div className=\"tab-table-content\">\r\n              <div className=\"py-4\">\r\n                <div className=\"table-container\">\r\n                  <TableWrapper headerDetails={customerDetails}>\r\n                    {is_loading ? (\r\n                      <tr>\r\n                        <td colSpan=\"7\">\r\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                            <div class=\"spinner-border\" role=\"status\">\r\n                              <span class=\"sr-only\">Loading...</span>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ) : List.length > 0 ? (\r\n                      List.map(({ itmCode, itmDesc, Discount }, index) => {\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td>\r\n                              <div className=\"text-right\">{itmCode}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{itmDesc}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div\r\n                                className=\"text-left\"\r\n                                onClick={() => this.handleid(itmCode)}\r\n                              >\r\n                                <NormalInput\r\n                                  value={Discount}\r\n                                  name=\"discount\"\r\n                                  onChange={this.handlediscount}\r\n                                />\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    ) : null}\r\n                  </TableWrapper>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-3\" style={{ width: 100 }}>\r\n            <NormalButton\r\n              mainbg={true}\r\n              label={\"Update\"}\r\n              onClick={() => this.finalcorporate()}\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return bindActionCreators(\r\n    {\r\n      CustomerClasses,\r\n      NewCustomerClasses,\r\n      ItemDepts,\r\n      NewDepartmentaldiscounts,\r\n      Departmentaldiscounts,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const EditCustomermaster = withTranslation()(\r\n  connect(null, mapDispatchToProps)(EditCustomermasterClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}