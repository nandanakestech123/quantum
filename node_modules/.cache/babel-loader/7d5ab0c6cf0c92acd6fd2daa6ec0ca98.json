{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\Admin\\\\Inventory\\\\StockSettings\\\\index.js\";\nimport React from \"react\";\nimport { Toast } from \"service/toast\";\nimport \"./style.scss\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, commonUpdateApi } from \"redux/actions/common\";\nimport { NormalButton, NormalDate, TableWrapper, InputSearch, NormalMultiSelect, NormalCheckbox, NormalSelect } from \"component/common\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { withTranslation } from \"react-i18next\";\nimport { NormalInput, NormalDateTime } from \"component/common\";\nimport { Link } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport updateBtn from \"assets/images/edit1.png\";\nimport deleteBtn from \"assets/images/delete1.png\";\nimport closeBtn from \"assets/images/close.png\";\nimport saveBtn from \"assets/images/save.png\";\nimport { history } from \"helpers\";\nimport { getTokenDetails } from \"redux/actions/auth\";\nexport class StockSettingsClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [// { label: \"Code\" },\n      {\n        label: \"Name\"\n      }, {\n        label: \"Authorization\"\n      }],\n      formFields: {\n        user: \"\"\n      },\n      authList: [],\n      authUserList: [],\n      userOption: [],\n      storedItemList: [],\n      pageMeta: {},\n      siteList: [],\n      hqonly: false,\n      search: \"\",\n      active: false,\n      currentIndex: -1,\n      page: 1,\n      // limit: 10,\n      limit: 4,\n      isOpenvoidCheckout: false,\n      // isLoading: false,\n      // is_loading: false,\n      isMounted: true // salesCollectionHeader: [\n      //   { label: \"Sales Collection\" },\n      //   { label: \"Before Tax\" },\n      //   { label: \"Amount\" },\n      //   { label: \"Qty\" },\n      // ],\n      // nonSalesCollectionHeader: [\n      //   { label: \"Non Sales Collection\" },\n      //   { label: \"Amount\" },\n      //   { label: \"Qty\" },\n      // ],\n      // deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\n      // salesTransactionHeader: [\n      //   { label: \"Sales Transaction\" },\n      //   { label: \"Amount\" },\n      //   { label: \"Paid\" },\n      //   { label: \"Outstanding\" },\n      // ],\n      // ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\n      // TreatmentDoneHeader: [\n      //   { label: \"Customer\" },\n      //   { label: \"Customer Reference\" },\n      //   { label: \"Treatment Done\" },\n      //   { label: \"Description\" },\n      //   { label: \"Staff\" },\n      //   { label: \"Amount\" },\n      // DayDate: new Date(),\n      // runDayEnd: false,\n      // reportDate: \"\",\n      // sales_collec: null,\n      // sales_trasac: null,\n      // ar_trasac: null,\n      // treatment_done: null,\n      // dept_sales: null,\n\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.getSite = () => {\n      // this.updateState({ isLoading: true });\n      let {\n        siteList,\n        hqonly,\n        page,\n        limit,\n        search\n      } = this.state; // let { item_desc } = formField;\n\n      this.props.getCommonApi(`sitecode`).then(async res => {\n        console.log(res, \"dsfdfaafg\");\n\n        for (let item of res.data) {\n          if (item.ItemSite_Code == this.props.tokenDetail.site_code) {\n            siteList = item;\n          }\n        }\n\n        this.setState({\n          siteList\n        });\n        console.log(\"siteList\", siteList);\n\n        if (siteList.hq_only == 1) {\n          hqonly = true;\n        }\n\n        this.setState({\n          hqonly\n        });\n      });\n    };\n\n    this.getDetails = () => {\n      // this.updateState({ isLoading: true });\n      let {\n        authList,\n        userOption,\n        page,\n        limit,\n        search\n      } = this.state; // let { item_desc } = formField;\n\n      this.props.getCommonApi(`authorise`).then(async res => {\n        console.log(res, \"dsfdfaafg\");\n        await this.setState({\n          authList: []\n        });\n\n        for (let key of res.data) {\n          userOption.push({\n            value: key.PW_ID,\n            label: key.PW_UserLogin,\n            code: key.AllDropdown_Desc,\n            active: key.Active\n          });\n        }\n\n        console.log(\"userOption\", userOption);\n        this.setState({\n          userOption\n        });\n        authList = res.data; // pageMeta = res.data.meta.pagination;\n        // pageMeta = res.data.pagination;\n        // pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\n        // this.setState({ authList, pageMeta });\n        // this.setState({ authList });\n\n        console.log(\"res.data\", res.data);\n        console.log(\"authList\", authList); // console.log('pageMeta',pageMeta)\n\n        this.updateState({\n          authList // pageMeta,\n          // isLoading: false,\n\n        });\n      });\n    };\n\n    this.handlePagination = async pageNo => {\n      let {\n        page\n      } = this.state;\n      page = pageNo.page;\n      await this.setState({\n        page\n      });\n      this.getDetails();\n    };\n\n    this.handlesearch = event => {\n      // event.persist();\n      console.log(event.target.value);\n      let {\n        search\n      } = this.state;\n      search = event.target.value;\n      this.setState({\n        search\n      });\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(async () => {\n          this.getDetails({});\n        }, 500);\n      }\n\n      this.debouncedFn();\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.setState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n\n    this.handleChange = ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let formFields = Object.assign({}, this.state.formFields);\n      let {\n        authUserList,\n        authList\n      } = this.state;\n      formFields[name] = value;\n      console.log(\"value\", value);\n      console.log(\"name\", name);\n\n      for (let userList of authList) {\n        if (userList.PW_ID == value) {\n          authUserList = userList;\n        }\n      }\n\n      authUserList = [{\n        id: authUserList.PW_ID,\n        name: \"Purchase Order(PO)\",\n        auth: authUserList.POaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Approved PO\",\n        auth: authUserList.POapprovalaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Delivery Order(DO)\",\n        auth: authUserList.DOaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Goods Receive Note\",\n        auth: authUserList.GRNaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Goods Return Note\",\n        auth: authUserList.VGRNaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Stocks Adjustment\",\n        auth: authUserList.ADJaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Transfer In\",\n        auth: authUserList.TFRFaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Transfer Out\",\n        auth: authUserList.TFRTaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"StockTake\",\n        auth: authUserList.PHYaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Stock Usage Memo\",\n        auth: authUserList.SUMaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"Stock Report\",\n        auth: authUserList.Sheetaccess == 1 ? true : false\n      }, {\n        id: authUserList.PW_ID,\n        name: \"PO HQ\",\n        auth: authUserList.POhqaccess == 1 ? true : false\n      }];\n      this.updateState({\n        formFields,\n        authUserList\n      });\n      this.getDetails(); // this.props.storeItemDetails(storedItemList, formFields)\n    };\n\n    this.handleSubmit = async () => {\n      let {\n        authUserList\n      } = this.state;\n      const formData = new FormData();\n      let formList = [\"POaccess\", \"POapprovalaccess\", \"DOaccess\", \"GRNaccess\", \"VGRNaccess\", \"ADJaccess\", \"TFRFaccess\", \"TFRTaccess\", \"PHYaccess\", \"SUMaccess\", \"Sheetaccess\", \"POhqaccess\"];\n\n      for (let i = 0; i < authUserList.length; i++) {\n        formData.append(formList[i], authUserList[i].auth == true ? 1 : 0);\n        console.log(\"formList[i]\", formList[i]);\n        console.log(\"authUserList[i].auth\", authUserList[i].auth);\n      }\n\n      console.log(\"formData\", formData);\n      var resAuth = await this.props.commonUpdateApi(`authorise/${authUserList[0].id}/`, formData);\n      console.log(resAuth); // // this.handleAddressSubmit(resADJ);\n      // this.handleItemDetailsSubmit(resADJ);\n      // // if(statusValue == \"Void\"){\n      // //   console.log(\"in void loop\")\n      // //   await this.props.deletePO(`${this.props.match.params.id}/`)\n      // // }\n\n      history.push(`/admin/inventory`);\n    };\n\n    this.handleChangeCheckbox = name => {\n      let {\n        authUserList\n      } = this.state;\n\n      for (let list of authUserList) {\n        if (list.name == name) {\n          list.auth = !list.auth;\n        }\n      }\n\n      this.setState(authUserList);\n      console.log(\"authUserList in handlechangecheckbox\", authUserList);\n    };\n\n    this.handleSubmitSite = async () => {\n      let {\n        hqonly,\n        siteList\n      } = this.state;\n      const formData = new FormData();\n      formData.append(\"hq_only\", hqonly == true ? 1 : 0);\n      console.log(\"formData\", formData);\n      var resSite = await this.props.commonUpdateApi(`sitecode/${siteList.ItemSite_ID}/`, formData);\n      console.log(resSite);\n      history.push(`/admin/inventory`);\n    };\n\n    this.handleChangeCheckboxSite = () => {\n      let {\n        hqonly\n      } = this.state;\n      hqonly = !hqonly;\n      this.setState({\n        hqonly\n      });\n      console.log(\"hqonly handlechangecheckbox\", hqonly);\n    };\n  }\n\n  componentWillMount() {// this.autofillSaved();\n  }\n\n  componentDidMount() {\n    // let From = new Date();\n    // let { formField } = this.state;\n    // let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\n    // formField[\"fromDate\"] = firstdayMonth;\n    // this.setState({\n    //   formField,\n    // });\n    this.getDetails();\n    this.getSite();\n  }\n\n  render() {\n    let {\n      headerDetails,\n      hqonly,\n      pageMeta,\n      authUserList,\n      userOption,\n      formFields\n    } = this.state;\n    let {\n      user\n    } = formFields;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \" stockSettings col-md-10 align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label-head mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 11\n      }\n    }, t(\"Site Mode\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-12 pt-2 mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left w-100 text-black common-label-text mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 15\n      }\n    }, t(\"Simplified HQ Only Mode\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalCheckbox, {\n      type: \"checkbox\",\n      checked: hqonly,\n      name: \"site\",\n      onChange: () => this.handleChangeCheckboxSite(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12 mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2\",\n      mainbg: true,\n      className: \"confirm\",\n      label: \"save\",\n      onClick: () => this.handleSubmitSite(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  tokenDetail: state.authStore.tokenDetails\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    commonUpdateApi,\n    getTokenDetails // getProject\n\n  }, dispatch);\n};\n\nexport const StockSettings = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(StockSettingsClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Inventory/StockSettings/index.js"],"names":["React","Toast","connect","bindActionCreators","getCommonApi","commonUpdateApi","NormalButton","NormalDate","TableWrapper","InputSearch","NormalMultiSelect","NormalCheckbox","NormalSelect","dateFormat","withTranslation","NormalInput","NormalDateTime","Link","_","updateBtn","deleteBtn","closeBtn","saveBtn","history","getTokenDetails","StockSettingsClass","Component","state","headerDetails","label","formFields","user","authList","authUserList","userOption","storedItemList","pageMeta","siteList","hqonly","search","active","currentIndex","page","limit","isOpenvoidCheckout","isMounted","updateState","data","setState","getSite","props","then","res","console","log","item","ItemSite_Code","tokenDetail","site_code","hq_only","getDetails","key","push","value","PW_ID","PW_UserLogin","code","AllDropdown_Desc","Active","handlePagination","pageNo","handlesearch","event","target","debouncedFn","debounce","handleClick","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","handleChange","name","Object","assign","userList","id","auth","POaccess","POapprovalaccess","DOaccess","GRNaccess","VGRNaccess","ADJaccess","TFRFaccess","TFRTaccess","PHYaccess","SUMaccess","Sheetaccess","POhqaccess","handleSubmit","formData","FormData","formList","i","length","append","resAuth","handleChangeCheckbox","list","handleSubmitSite","resSite","ItemSite_ID","handleChangeCheckboxSite","componentWillMount","componentDidMount","render","t","mapStateToProps","authStore","tokenDetails","mapDispatchToProps","dispatch","StockSettings"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, commonUpdateApi } from \"redux/actions/common\";\r\nimport {\r\n  NormalButton,\r\n  NormalDate,\r\n  TableWrapper,\r\n  InputSearch,\r\n  NormalMultiSelect,\r\n  NormalCheckbox,\r\n  NormalSelect,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NormalInput, NormalDateTime } from \"component/common\";\r\nimport { Link } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nimport updateBtn from \"assets/images/edit1.png\";\r\nimport deleteBtn from \"assets/images/delete1.png\";\r\nimport closeBtn from \"assets/images/close.png\";\r\nimport saveBtn from \"assets/images/save.png\";\r\nimport { history } from \"helpers\";\r\n\r\nimport { getTokenDetails } from \"redux/actions/auth\";\r\n\r\nexport class StockSettingsClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      // { label: \"Code\" },\r\n      { label: \"Name\" },\r\n      { label: \"Authorization\" },\r\n    ],\r\n    formFields: {\r\n      user: \"\",\r\n    },\r\n\r\n    authList: [],\r\n    authUserList: [],\r\n    userOption: [],\r\n    storedItemList: [],\r\n    pageMeta: {},\r\n\r\n    siteList: [],\r\n    hqonly: false,\r\n\r\n    search: \"\",\r\n    active: false,\r\n    currentIndex: -1,\r\n    page: 1,\r\n    // limit: 10,\r\n    limit: 4,\r\n    isOpenvoidCheckout: false,\r\n    // isLoading: false,\r\n    // is_loading: false,\r\n    isMounted: true,\r\n\r\n    // salesCollectionHeader: [\r\n    //   { label: \"Sales Collection\" },\r\n    //   { label: \"Before Tax\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // nonSalesCollectionHeader: [\r\n    //   { label: \"Non Sales Collection\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\r\n    // salesTransactionHeader: [\r\n    //   { label: \"Sales Transaction\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Paid\" },\r\n    //   { label: \"Outstanding\" },\r\n    // ],\r\n    // ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\r\n    // TreatmentDoneHeader: [\r\n    //   { label: \"Customer\" },\r\n    //   { label: \"Customer Reference\" },\r\n    //   { label: \"Treatment Done\" },\r\n    //   { label: \"Description\" },\r\n    //   { label: \"Staff\" },\r\n    //   { label: \"Amount\" },\r\n    // DayDate: new Date(),\r\n    // runDayEnd: false,\r\n    // reportDate: \"\",\r\n    // sales_collec: null,\r\n    // sales_trasac: null,\r\n    // ar_trasac: null,\r\n    // treatment_done: null,\r\n    // dept_sales: null,\r\n  };\r\n\r\n  componentWillMount() {\r\n    // this.autofillSaved();\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount() {\r\n    // let From = new Date();\r\n    // let { formField } = this.state;\r\n    // let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\r\n    // formField[\"fromDate\"] = firstdayMonth;\r\n    // this.setState({\r\n    //   formField,\r\n    // });\r\n\r\n    this.getDetails();\r\n    this.getSite();\r\n  }\r\n\r\n  getSite = () => {\r\n    // this.updateState({ isLoading: true });\r\n    let { siteList, hqonly, page, limit, search } = this.state;\r\n    // let { item_desc } = formField;\r\n\r\n    this.props.getCommonApi(`sitecode`).then(async res => {\r\n      console.log(res, \"dsfdfaafg\");\r\n      for (let item of res.data) {\r\n        if (item.ItemSite_Code == this.props.tokenDetail.site_code) {\r\n          siteList = item;\r\n        }\r\n      }\r\n\r\n      this.setState({ siteList });\r\n      console.log(\"siteList\", siteList);\r\n\r\n      if (siteList.hq_only == 1) {\r\n        hqonly = true;\r\n      }\r\n\r\n      this.setState({ hqonly });\r\n    });\r\n  };\r\n\r\n  getDetails = () => {\r\n    // this.updateState({ isLoading: true });\r\n    let { authList, userOption, page, limit, search } = this.state;\r\n    // let { item_desc } = formField;\r\n\r\n    this.props.getCommonApi(`authorise`).then(async res => {\r\n      console.log(res, \"dsfdfaafg\");\r\n      await this.setState({ authList: [] });\r\n      for (let key of res.data) {\r\n        userOption.push({\r\n          value: key.PW_ID,\r\n          label: key.PW_UserLogin,\r\n          code: key.AllDropdown_Desc,\r\n          active: key.Active,\r\n        });\r\n      }\r\n      console.log(\"userOption\", userOption);\r\n      this.setState({ userOption });\r\n      authList = res.data;\r\n      // pageMeta = res.data.meta.pagination;\r\n      // pageMeta = res.data.pagination;\r\n      // pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\r\n      // this.setState({ authList, pageMeta });\r\n      // this.setState({ authList });\r\n\r\n      console.log(\"res.data\", res.data);\r\n      console.log(\"authList\", authList);\r\n      // console.log('pageMeta',pageMeta)\r\n      this.updateState({\r\n        authList,\r\n        // pageMeta,\r\n        // isLoading: false,\r\n      });\r\n    });\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.getDetails();\r\n  };\r\n  // pagination\r\n  // handlePagination = page => {\r\n  //   this.queryHandler(page);\r\n  // };\r\n\r\n  handlesearch = event => {\r\n    // event.persist();\r\n    console.log(event.target.value);\r\n    let { search } = this.state;\r\n    search = event.target.value;\r\n    this.setState({ search });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        this.getDetails({});\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n    let { authUserList, authList } = this.state;\r\n\r\n    formFields[name] = value;\r\n    console.log(\"value\", value);\r\n    console.log(\"name\", name);\r\n\r\n    for (let userList of authList) {\r\n      if (userList.PW_ID == value) {\r\n        authUserList = userList;\r\n      }\r\n    }\r\n\r\n    authUserList = [\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Purchase Order(PO)\",\r\n        auth: authUserList.POaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Approved PO\",\r\n        auth: authUserList.POapprovalaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Delivery Order(DO)\",\r\n        auth: authUserList.DOaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Goods Receive Note\",\r\n        auth: authUserList.GRNaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Goods Return Note\",\r\n        auth: authUserList.VGRNaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Stocks Adjustment\",\r\n        auth: authUserList.ADJaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Transfer In\",\r\n        auth: authUserList.TFRFaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Transfer Out\",\r\n        auth: authUserList.TFRTaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"StockTake\",\r\n        auth: authUserList.PHYaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Stock Usage Memo\",\r\n        auth: authUserList.SUMaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Stock Report\",\r\n        auth: authUserList.Sheetaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"PO HQ\",\r\n        auth: authUserList.POhqaccess == 1 ? true : false,\r\n      },\r\n    ];\r\n\r\n    this.updateState({\r\n      formFields,\r\n      authUserList,\r\n    });\r\n    this.getDetails();\r\n    // this.props.storeItemDetails(storedItemList, formFields)\r\n  };\r\n\r\n  handleSubmit = async () => {\r\n    let { authUserList } = this.state;\r\n\r\n    const formData = new FormData();\r\n\r\n    let formList = [\r\n      \"POaccess\",\r\n      \"POapprovalaccess\",\r\n      \"DOaccess\",\r\n      \"GRNaccess\",\r\n      \"VGRNaccess\",\r\n      \"ADJaccess\",\r\n      \"TFRFaccess\",\r\n      \"TFRTaccess\",\r\n      \"PHYaccess\",\r\n      \"SUMaccess\",\r\n      \"Sheetaccess\",\r\n      \"POhqaccess\",\r\n    ];\r\n\r\n    for (let i = 0; i < authUserList.length; i++) {\r\n      formData.append(formList[i], authUserList[i].auth == true ? 1 : 0);\r\n      console.log(\"formList[i]\", formList[i]);\r\n      console.log(\"authUserList[i].auth\", authUserList[i].auth);\r\n    }\r\n\r\n    console.log(\"formData\", formData);\r\n    var resAuth = await this.props.commonUpdateApi(\r\n      `authorise/${authUserList[0].id}/`,\r\n      formData\r\n    );\r\n\r\n    console.log(resAuth);\r\n    // // this.handleAddressSubmit(resADJ);\r\n    // this.handleItemDetailsSubmit(resADJ);\r\n    // // if(statusValue == \"Void\"){\r\n    // //   console.log(\"in void loop\")\r\n    // //   await this.props.deletePO(`${this.props.match.params.id}/`)\r\n    // // }\r\n\r\n    history.push(`/admin/inventory`);\r\n  };\r\n\r\n  handleChangeCheckbox = name => {\r\n    let { authUserList } = this.state;\r\n    for (let list of authUserList) {\r\n      if (list.name == name) {\r\n        list.auth = !list.auth;\r\n      }\r\n    }\r\n\r\n    this.setState(authUserList);\r\n    console.log(\"authUserList in handlechangecheckbox\", authUserList);\r\n  };\r\n\r\n  handleSubmitSite = async () => {\r\n    let { hqonly, siteList } = this.state;\r\n\r\n    const formData = new FormData();\r\n\r\n    formData.append(\"hq_only\", hqonly == true ? 1 : 0);\r\n\r\n    console.log(\"formData\", formData);\r\n    var resSite = await this.props.commonUpdateApi(\r\n      `sitecode/${siteList.ItemSite_ID}/`,\r\n      formData\r\n    );\r\n\r\n    console.log(resSite);\r\n    history.push(`/admin/inventory`);\r\n  };\r\n\r\n  handleChangeCheckboxSite = () => {\r\n    let { hqonly } = this.state;\r\n\r\n    hqonly = !hqonly;\r\n\r\n    this.setState({ hqonly });\r\n    console.log(\"hqonly handlechangecheckbox\", hqonly);\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      hqonly,\r\n      pageMeta,\r\n      authUserList,\r\n      userOption,\r\n      formFields,\r\n    } = this.state;\r\n\r\n    let { user } = formFields;\r\n\r\n    let { t } = this.props;\r\n\r\n    return (\r\n      <div className=\" stockSettings col-md-10 align-items-center\">\r\n        <div className=\"col-md-12 mb-5\">\r\n          <p className=\"label-head mt-4\">{t(\"Site Mode\")}</p>\r\n        </div>\r\n\r\n        <div className=\"row mb-5\">\r\n          <div className=\"col-md-2 col-12 \"></div>\r\n\r\n          <div className=\"col-md-6 col-12 pt-2 mb-5\">\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"Simplified HQ Only Mode\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalCheckbox\r\n                  type=\"checkbox\"\r\n                  checked={hqonly}\r\n                  name=\"site\"\r\n                  onChange={() => this.handleChangeCheckboxSite()}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-2 col-12 mb-5\">\r\n            <NormalButton\r\n              buttonClass={\"mx-2\"}\r\n              mainbg={true}\r\n              className=\"confirm\"\r\n              label=\"save\"\r\n              onClick={() => this.handleSubmitSite()}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* <div className=\"col-md-12 d-flex mb-5\">\r\n              <p className=\"label-head mt-4\">{t(\"User Authorization \")}</p>\r\n        </div>\r\n\r\n        <div className=\"row mb-2\">\r\n            <div className=\"col-md-2 col-12\"></div>\r\n\r\n            <div className=\"col-md-8 col-12\">\r\n              <div className=\"d-flex mb-2\">\r\n                <label className=\"text-left w-30 text-black common-label-text mr-2  pt-2\">\r\n                  {t(\"User\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    options={userOption}\r\n                    value={user}\r\n                    name=\"user\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>       \r\n\r\n          </div>\r\n\r\n\r\n\r\n        <div className=\"py-4\">\r\n            <div className=\"table-container\">\r\n\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n              >\r\n                {\r\n\r\n\r\n                authUserList\r\n                  ? authUserList.map((item, index) => {\r\n                      let {\r\n                        name,\r\n                        auth\r\n                        \r\n                      } = item;\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              { name }\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                            <NormalCheckbox\r\n                                type=\"checkbox\"\r\n                                checked={auth}\r\n                                name=\"auth\"\r\n                                onChange={()=>this.handleChangeCheckbox(name)}\r\n                            />\r\n                            </div>\r\n                          </td>\r\n                          \r\n                                   \r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n                \r\n              \r\n              </TableWrapper >\r\n\r\n        \r\n\r\n                \r\n\r\n                \r\n                \r\n              \r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row justify-content-end\">\r\n\r\n          <div className=\"col-md-4 col-12 my-3 \">\r\n                  <NormalButton\r\n                    buttonClass={\"mx-2\"}\r\n                    mainbg={true}\r\n                    className=\"confirm\"\r\n                    label=\"save\"\r\n                    onClick={() => this.handleSubmit()}\r\n                  />\r\n            </div> */}\r\n\r\n        {/* </div> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetail: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonUpdateApi,\r\n      getTokenDetails,\r\n      // getProject\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const StockSettings = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(StockSettingsClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}