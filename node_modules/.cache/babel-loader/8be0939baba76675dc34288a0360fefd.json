{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalButton,TableWrapper,NormalSelect}from\"component/common\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";export var TreatmentAccountClass=/*#__PURE__*/function(_Component){_inherits(TreatmentAccountClass,_Component);var _super=_createSuper(TreatmentAccountClass);function TreatmentAccountClass(){var _this;_classCallCheck(this,TreatmentAccountClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeTab:\"\",isOpenTreatmentDone:false,isActiveTab:\"detail\",headerDetails:[{label:\"Date\",sortKey:false,width:\"80px\"},{label:\"Transaction #\",width:\"52px\"},{label:\"Treatment #\",sortKey:false,width:\"75px\"},{label:\"Description\",sortKey:false,width:\"155px\"},{label:\"Payment\",sortKey:false,width:\"70px\"},{label:\"Credit Balance\",sortKey:false,width:\"72px\"},{label:\"Outstanding\",sortKey:false,width:\"72px\"},{label:\"Balance Qty\",sortKey:false,width:\"72px\"},{label:\"\",sortKey:false,width:\"72px\"}],detailHeader:[{label:\"Date\",sortKey:false,width:\"80px\"},{label:\"Description\",sortKey:false,width:\"155px\"},{label:\"Type\",width:\"52px\"},{label:\"Amount\",sortKey:false,width:\"70px\"},{label:\"Credit Balance\",sortKey:false,width:\"72px\"},{label:\"Outstanding\",sortKey:false,width:\"72px\"}],accountList:[],DetailList:[],yearList:[],year:new Date().getFullYear(),accountHeader:{}};_this.getFilter=function(){_this.props.getCommonApi(\"treatmentdone/Year/\").then(function(key){var status=key.status,data=key.data;var yearList=_this.state.yearList;var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;yearList.push({value:value,label:value});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({yearList:yearList});});};_this.getAccountData=function(){var _this$state=_this.state,year=_this$state.year,accountHeader=_this$state.accountHeader;_this.props.getCommonApi(\"treatmentacclist/?cust_id=\".concat(_this.props.id,\"&year=\").concat(year)).then(function(key){console.log(key.data,\"treatment account table list\");var data=key.data,header_data=key.header_data;var accountList=_this.state.accountList;accountList=data;accountHeader=header_data;_this.setState({accountList:accountList,accountHeader:accountHeader});});};_this.toggle=function(tab){if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,year;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;year=_this.state.year;year=value;_context.next=5;return _this.setState({year:year});case 5:_this.getAccountData();case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleOpenDetail=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var activeTab;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:activeTab=_this.state.activeTab;activeTab=\"detail\";_context2.next=4;return _this.setState({activeTab:activeTab});case 4:_this.getDetailList(data.id);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.getDetailList=function(id){_this.props.getCommonApi(\"treatmentacclist/\".concat(id)).then(function(key){var data=key.data,header_data=key.header_data;var _this$state2=_this.state,DetailList=_this$state2.DetailList,accountHeader=_this$state2.accountHeader;DetailList=data;accountHeader=header_data;_this.setState({DetailList:DetailList,accountHeader:accountHeader});});};_this.handleBack=function(){var activeTab=_this.state.activeTab;activeTab=\"\";_this.setState({activeTab:activeTab,DetailList:[]});_this.getAccountData();};return _this;}_createClass(TreatmentAccountClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getFilter();this.getAccountData();}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,_this$state3$accountH=_this$state3.accountHeader,accountHeader=_this$state3$accountH===void 0?{}:_this$state3$accountH,headerDetails=_this$state3.headerDetails,accountList=_this$state3.accountList,yearList=_this$state3.yearList,year=_this$state3.year,activeTab=_this$state3.activeTab,detailHeader=_this$state3.detailHeader,DetailList=_this$state3.DetailList;var balance=accountHeader.balance,treatment_count=accountHeader.treatment_count,outstanding=accountHeader.outstanding,credit_balance=accountHeader.credit_balance,outstanding_balance=accountHeader.outstanding_balance;return/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-account row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},activeTab!==\"detail\"?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"},\"Treatment List\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"},/*#__PURE__*/React.createElement(NormalSelect,{options:yearList,value:year,name:\"year\",onChange:this.handleChange,className:\"customer-name py-1\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"Total Treatment Count \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},treatment_count)):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},\"Credit Balance\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},\"$ \",activeTab!==\"detail\"?balance:credit_balance),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Outstanding Balance\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"$ \",activeTab!==\"detail\"?outstanding:outstanding_balance))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},activeTab!==\"detail\"?/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination},accountList&&accountList.length>0?accountList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.transaction)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.treatment_parentcode)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.payment)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.outstanding)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.balance_qty)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"view mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"view\",onClick:function onClick(){return _this2.handleOpenDetail(item);}}))));}):null):/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:detailHeader,queryHandler:this.handlePagination},DetailList&&DetailList.length>0?DetailList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.type)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.amount)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.outstanding)));}):null))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 justify-center d-flex\"},activeTab===\"detail\"?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"back mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"Back\",onClick:function onClick(){return _this2.handleBack();}}):\"\",/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"print\",className:\"col-12 fs-15 \",label:\"Print\",onClick:function onClick(){return _this2.setState({isOpenEditDisc:false});}})));}}]);return TreatmentAccountClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var TreatmentAccount=connect(null,mapDispatchToProps)(TreatmentAccountClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Customer/CustomerDetails/Accounts/treatmentAccount.js"],"names":["React","Component","NormalButton","TableWrapper","NormalSelect","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","connect","bindActionCreators","TreatmentAccountClass","state","activeTab","isOpenTreatmentDone","isActiveTab","headerDetails","label","sortKey","width","detailHeader","accountList","DetailList","yearList","year","Date","getFullYear","accountHeader","getFilter","props","then","key","status","data","value","push","setState","getAccountData","id","console","log","header_data","toggle","tab","handleChange","target","name","handleOpenDetail","getDetailList","handleBack","balance","treatment_count","outstanding","credit_balance","outstanding_balance","handlePagination","length","map","item","index","sa_date","transaction","treatment_parentcode","description","payment","balance_qty","type","amount","isOpenEditDisc","mapDispatchToProps","dispatch","TreatmentAccount"],"mappings":"mgCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,cAAP,CACA,OAASC,YAAT,CAAuBC,YAAvB,CAAqCC,YAArC,KAAyD,kBAAzD,CACA,OACEC,YADF,CAEEC,UAFF,CAGEC,eAHF,CAIEC,eAJF,CAKEC,cALF,KAMO,sBANP,CAQA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CAEA,UAAaC,CAAAA,qBAAb,uXACEC,KADF,CACU,CACNC,SAAS,CAAE,EADL,CAENC,mBAAmB,CAAE,KAFf,CAGNC,WAAW,CAAE,QAHP,CAINC,aAAa,CAAE,CACb,CAAEC,KAAK,CAAE,MAAT,CAAiBC,OAAO,CAAE,KAA1B,CAAiCC,KAAK,CAAE,MAAxC,CADa,CAEb,CAAEF,KAAK,CAAE,eAAT,CAA0BE,KAAK,CAAE,MAAjC,CAFa,CAGb,CAAEF,KAAK,CAAE,aAAT,CAAwBC,OAAO,CAAE,KAAjC,CAAwCC,KAAK,CAAE,MAA/C,CAHa,CAIb,CAAEF,KAAK,CAAE,aAAT,CAAwBC,OAAO,CAAE,KAAjC,CAAwCC,KAAK,CAAE,OAA/C,CAJa,CAKb,CAAEF,KAAK,CAAE,SAAT,CAAoBC,OAAO,CAAE,KAA7B,CAAoCC,KAAK,CAAE,MAA3C,CALa,CAMb,CAAEF,KAAK,CAAE,gBAAT,CAA2BC,OAAO,CAAE,KAApC,CAA2CC,KAAK,CAAE,MAAlD,CANa,CAOb,CAAEF,KAAK,CAAE,aAAT,CAAwBC,OAAO,CAAE,KAAjC,CAAwCC,KAAK,CAAE,MAA/C,CAPa,CAQb,CAAEF,KAAK,CAAE,aAAT,CAAwBC,OAAO,CAAE,KAAjC,CAAwCC,KAAK,CAAE,MAA/C,CARa,CASb,CAAEF,KAAK,CAAE,EAAT,CAAaC,OAAO,CAAE,KAAtB,CAA6BC,KAAK,CAAE,MAApC,CATa,CAJT,CAeNC,YAAY,CAAE,CACZ,CAAEH,KAAK,CAAE,MAAT,CAAiBC,OAAO,CAAE,KAA1B,CAAiCC,KAAK,CAAE,MAAxC,CADY,CAEZ,CAAEF,KAAK,CAAE,aAAT,CAAwBC,OAAO,CAAE,KAAjC,CAAwCC,KAAK,CAAE,OAA/C,CAFY,CAGZ,CAAEF,KAAK,CAAE,MAAT,CAAiBE,KAAK,CAAE,MAAxB,CAHY,CAIZ,CAAEF,KAAK,CAAE,QAAT,CAAmBC,OAAO,CAAE,KAA5B,CAAmCC,KAAK,CAAE,MAA1C,CAJY,CAKZ,CAAEF,KAAK,CAAE,gBAAT,CAA2BC,OAAO,CAAE,KAApC,CAA2CC,KAAK,CAAE,MAAlD,CALY,CAMZ,CAAEF,KAAK,CAAE,aAAT,CAAwBC,OAAO,CAAE,KAAjC,CAAwCC,KAAK,CAAE,MAA/C,CANY,CAfR,CAuBNE,WAAW,CAAE,EAvBP,CAwBNC,UAAU,CAAE,EAxBN,CAyBNC,QAAQ,CAAE,EAzBJ,CA0BNC,IAAI,CAAE,GAAIC,CAAAA,IAAJ,GAAWC,WAAX,EA1BA,CA2BNC,aAAa,CAAE,EA3BT,CADV,OAoCEC,SApCF,CAoCc,UAAM,CAChB,MAAKC,KAAL,CAAWzB,YAAX,CAAwB,qBAAxB,EAA+C0B,IAA/C,CAAoD,SAAAC,GAAG,CAAI,CACzD,GAAMC,CAAAA,MAAN,CAAuBD,GAAvB,CAAMC,MAAN,CAAcC,IAAd,CAAuBF,GAAvB,CAAcE,IAAd,CACA,GAAMV,CAAAA,QAAN,CAAmB,MAAKX,KAAxB,CAAMW,QAAN,CAFyD,yCAGvCU,IAHuC,YAGzD,+CAAwB,IAAfC,CAAAA,KAAe,aACtBX,QAAQ,CAACY,IAAT,CAAc,CAAED,KAAK,CAAEA,KAAT,CAAgBjB,KAAK,CAAEiB,KAAvB,CAAd,EACD,CALwD,qDAMzD,MAAKE,QAAL,CAAc,CAAEb,QAAQ,CAARA,QAAF,CAAd,EACD,CAPD,EAQD,CA7CH,OA+CEc,cA/CF,CA+CmB,UAAM,CACrB,gBAA8B,MAAKzB,KAAnC,CAAMY,IAAN,aAAMA,IAAN,CAAYG,aAAZ,aAAYA,aAAZ,CACA,MAAKE,KAAL,CACGzB,YADH,qCAC6C,MAAKyB,KAAL,CAAWS,EADxD,kBACmEd,IADnE,GAEGM,IAFH,CAEQ,SAAAC,GAAG,CAAI,CACXQ,OAAO,CAACC,GAAR,CAAYT,GAAG,CAACE,IAAhB,CAAsB,8BAAtB,EACA,GAAMA,CAAAA,IAAN,CAA4BF,GAA5B,CAAME,IAAN,CAAYQ,WAAZ,CAA4BV,GAA5B,CAAYU,WAAZ,CACA,GAAMpB,CAAAA,WAAN,CAAsB,MAAKT,KAA3B,CAAMS,WAAN,CACAA,WAAW,CAAGY,IAAd,CACAN,aAAa,CAAGc,WAAhB,CACA,MAAKL,QAAL,CAAc,CAAEf,WAAW,CAAXA,WAAF,CAAeM,aAAa,CAAbA,aAAf,CAAd,EACD,CATH,EAUD,CA3DH,OA6DEe,MA7DF,CA6DW,SAAAC,GAAG,CAAI,CACd,GAAI,MAAK/B,KAAL,CAAWC,SAAX,GAAyB8B,GAA7B,CAAkC,CAChC,MAAKP,QAAL,CAAc,CACZvB,SAAS,CAAE8B,GADC,CAAd,EAGD,CACF,CAnEH,OAqEEC,YArEF,2FAqEiB,wLAASC,MAAT,CAAmBX,KAAnB,aAAmBA,KAAnB,CAA0BY,IAA1B,aAA0BA,IAA1B,CACPtB,IADO,CACE,MAAKZ,KADP,CACPY,IADO,CAEbA,IAAI,CAAGU,KAAP,CAFa,sBAGP,OAAKE,QAAL,CAAc,CAClBZ,IAAI,CAAJA,IADkB,CAAd,CAHO,QAMb,MAAKa,cAAL,GANa,sDArEjB,sEA8EEU,gBA9EF,2FA8EqB,kBAAMd,IAAN,oIACXpB,SADW,CACG,MAAKD,KADR,CACXC,SADW,CAEjBA,SAAS,CAAG,QAAZ,CAFiB,uBAIX,OAAKuB,QAAL,CAAc,CAClBvB,SAAS,CAATA,SADkB,CAAd,CAJW,QAOjB,MAAKmC,aAAL,CAAmBf,IAAI,CAACK,EAAxB,EAPiB,wDA9ErB,uEAwFEU,aAxFF,CAwFkB,SAAAV,EAAE,CAAI,CACpB,MAAKT,KAAL,CAAWzB,YAAX,4BAA4CkC,EAA5C,GAAkDR,IAAlD,CAAuD,SAAAC,GAAG,CAAI,CAC5D,GAAME,CAAAA,IAAN,CAA4BF,GAA5B,CAAME,IAAN,CAAYQ,WAAZ,CAA4BV,GAA5B,CAAYU,WAAZ,CACA,iBAAoC,MAAK7B,KAAzC,CAAMU,UAAN,cAAMA,UAAN,CAAkBK,aAAlB,cAAkBA,aAAlB,CACAL,UAAU,CAAGW,IAAb,CACAN,aAAa,CAAGc,WAAhB,CACA,MAAKL,QAAL,CAAc,CAAEd,UAAU,CAAVA,UAAF,CAAcK,aAAa,CAAbA,aAAd,CAAd,EACD,CAND,EAOD,CAhGH,OAkGEsB,UAlGF,CAkGe,UAAM,CACjB,GAAMpC,CAAAA,SAAN,CAAoB,MAAKD,KAAzB,CAAMC,SAAN,CACAA,SAAS,CAAG,EAAZ,CACA,MAAKuB,QAAL,CAAc,CACZvB,SAAS,CAATA,SADY,CAEZS,UAAU,CAAE,EAFA,CAAd,EAIA,MAAKe,cAAL,GACD,CA1GH,kFA+BE,4BAAoB,CAClB,KAAKT,SAAL,GACA,KAAKS,cAAL,GACD,CAlCH,sBA4GE,iBAAS,iBACP,iBASI,KAAKzB,KATT,oCACEe,aADF,CACEA,aADF,gCACkB,EADlB,uBAEEX,aAFF,cAEEA,aAFF,CAGEK,WAHF,cAGEA,WAHF,CAIEE,QAJF,cAIEA,QAJF,CAKEC,IALF,cAKEA,IALF,CAMEX,SANF,cAMEA,SANF,CAOEO,YAPF,cAOEA,YAPF,CAQEE,UARF,cAQEA,UARF,CAUA,GACE4B,CAAAA,OADF,CAMIvB,aANJ,CACEuB,OADF,CAEEC,eAFF,CAMIxB,aANJ,CAEEwB,eAFF,CAGEC,WAHF,CAMIzB,aANJ,CAGEyB,WAHF,CAIEC,cAJF,CAMI1B,aANJ,CAIE0B,cAJF,CAKEC,mBALF,CAMI3B,aANJ,CAKE2B,mBALF,CAOA,mBACE,2BAAK,SAAS,CAAC,uBAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,EACGzC,SAAS,GAAK,QAAd,cACC,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,YAAf,mBADF,cAEE,2BAAK,SAAS,CAAC,YAAf,eACE,oBAAC,YAAD,EACE,OAAO,CAAEU,QADX,CAEE,KAAK,CAAEC,IAFT,CAGE,IAAI,CAAC,MAHP,CAIE,QAAQ,CAAE,KAAKoB,YAJjB,CAKE,SAAS,CAAC,oBALZ,EADF,CAFF,cAWE,2BAAK,SAAS,CAAC,OAAf,2BAXF,cAYE,2BAAK,SAAS,CAAC,OAAf,EAAwBO,eAAxB,CAZF,CADD,CAgBC,EAjBJ,CADF,cAqBE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,YAAf,mBADF,cAEE,2BAAK,SAAS,CAAC,YAAf,OACKtC,SAAS,GAAK,QAAd,CAAyBqC,OAAzB,CAAmCG,cADxC,CAFF,cAME,2BAAK,SAAS,CAAC,OAAf,wBANF,cAOE,2BAAK,SAAS,CAAC,OAAf,OACKxC,SAAS,GAAK,QAAd,CAAyBuC,WAAzB,CAAuCE,mBAD5C,CAPF,CADF,CArBF,cAkCE,2BAAK,SAAS,CAAC,QAAf,eACE,2BAAK,SAAS,CAAC,OAAf,EACGzC,SAAS,GAAK,QAAd,cACC,oBAAC,YAAD,EACE,aAAa,CAAEG,aADjB,CAEE,YAAY,CAAE,KAAKuC,gBAFrB,EAIGlC,WAAW,EAAIA,WAAW,CAACmC,MAAZ,CAAqB,CAApC,CACGnC,WAAW,CAACoC,GAAZ,CAAgB,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC/B,mBACE,0BAAI,GAAG,CAAEA,KAAT,eACE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGD,IAAI,CAACE,OADR,CADF,CADF,cAME,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGF,IAAI,CAACG,WADR,CADF,CANF,cAWE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGH,IAAI,CAACI,oBADR,CADF,CAXF,cAgBE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGJ,IAAI,CAACK,WADR,CADF,CAhBF,cAqBE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACG,IAAML,IAAI,CAACM,OADd,CADF,CArBF,cA0BE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACG,IAAMN,IAAI,CAACR,OADd,CADF,CA1BF,cA+BE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACG,IAAMQ,IAAI,CAACN,WADd,CADF,CA/BF,cAoCE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGM,IAAI,CAACO,WADR,CADF,CApCF,cAyCE,2CACE,2BAAK,SAAS,CAAC,kDAAf,eACE,oBAAC,YAAD,EACE,WAAW,CAAE,WADf,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,eAHZ,CAIE,KAAK,CAAC,MAJR,CAKE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAClB,gBAAL,CAAsBW,IAAtB,CAAN,EALX,EADF,CADF,CAzCF,CADF,CAuDD,CAxDD,CADH,CA0DG,IA9DN,CADD,cAkEC,oBAAC,YAAD,EACE,aAAa,CAAEtC,YADjB,CAEE,YAAY,CAAE,KAAKmC,gBAFrB,EAIGjC,UAAU,EAAIA,UAAU,CAACkC,MAAX,CAAoB,CAAlC,CACGlC,UAAU,CAACmC,GAAX,CAAe,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC9B,mBACE,0BAAI,GAAG,CAAEA,KAAT,eACE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGD,IAAI,CAACE,OADR,CADF,CADF,cAME,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGF,IAAI,CAACK,WADR,CADF,CANF,cAWE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGL,IAAI,CAACQ,IADR,CADF,CAXF,cAgBE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACG,IAAMR,IAAI,CAACS,MADd,CADF,CAhBF,cAqBE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACG,IAAMT,IAAI,CAACR,OADd,CADF,CArBF,cA0BE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACG,IAAMQ,IAAI,CAACN,WADd,CADF,CA1BF,CADF,CAkCD,CAnCD,CADH,CAqCG,IAzCN,CAnEJ,CADF,CAlCF,cAoJE,2BAAK,SAAS,CAAC,8BAAf,EACGvC,SAAS,GAAK,QAAd,cACC,oBAAC,YAAD,EACE,WAAW,CAAE,WADf,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,eAHZ,CAIE,KAAK,CAAC,MAJR,CAKE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACoC,UAAL,EAAN,EALX,EADD,CASC,EAVJ,cAYE,oBAAC,YAAD,EACE,WAAW,CAAE,OADf,CAEE,SAAS,CAAC,eAFZ,CAGE,KAAK,CAAC,OAHR,CAIE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACb,QAAL,CAAc,CAAEgC,cAAc,CAAE,KAAlB,CAAd,CAAN,EAJX,EAZF,CApJF,CADF,CA0KD,CAxSH,mCAA2CpE,SAA3C,EA2SA,GAAMqE,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAO5D,CAAAA,kBAAkB,CACvB,CACEN,YAAY,CAAZA,YADF,CAEEC,UAAU,CAAVA,UAFF,CAGEC,eAAe,CAAfA,eAHF,CAIEE,cAAc,CAAdA,cAJF,CAKED,eAAe,CAAfA,eALF,CADuB,CAQvB+D,QARuB,CAAzB,CAUD,CAXD,CAaA,MAAO,IAAMC,CAAAA,gBAAgB,CAAG9D,OAAO,CACrC,IADqC,CAErC4D,kBAFqC,CAAP,CAG9B1D,qBAH8B,CAAzB","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { NormalButton, TableWrapper, NormalSelect } from \"component/common\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nexport class TreatmentAccountClass extends Component {\r\n  state = {\r\n    activeTab: \"\",\r\n    isOpenTreatmentDone: false,\r\n    isActiveTab: \"detail\",\r\n    headerDetails: [\r\n      { label: \"Date\", sortKey: false, width: \"80px\" },\r\n      { label: \"Transaction #\", width: \"52px\" },\r\n      { label: \"Treatment #\", sortKey: false, width: \"75px\" },\r\n      { label: \"Description\", sortKey: false, width: \"155px\" },\r\n      { label: \"Payment\", sortKey: false, width: \"70px\" },\r\n      { label: \"Credit Balance\", sortKey: false, width: \"72px\" },\r\n      { label: \"Outstanding\", sortKey: false, width: \"72px\" },\r\n      { label: \"Balance Qty\", sortKey: false, width: \"72px\" },\r\n      { label: \"\", sortKey: false, width: \"72px\" },\r\n    ],\r\n    detailHeader: [\r\n      { label: \"Date\", sortKey: false, width: \"80px\" },\r\n      { label: \"Description\", sortKey: false, width: \"155px\" },\r\n      { label: \"Type\", width: \"52px\" },\r\n      { label: \"Amount\", sortKey: false, width: \"70px\" },\r\n      { label: \"Credit Balance\", sortKey: false, width: \"72px\" },\r\n      { label: \"Outstanding\", sortKey: false, width: \"72px\" },\r\n    ],\r\n    accountList: [],\r\n    DetailList: [],\r\n    yearList: [],\r\n    year: new Date().getFullYear(),\r\n    accountHeader: {},\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getFilter();\r\n    this.getAccountData();\r\n  }\r\n\r\n  getFilter = () => {\r\n    this.props.getCommonApi(\"treatmentdone/Year/\").then(key => {\r\n      let { status, data } = key;\r\n      let { yearList } = this.state;\r\n      for (let value of data) {\r\n        yearList.push({ value: value, label: value });\r\n      }\r\n      this.setState({ yearList });\r\n    });\r\n  };\r\n\r\n  getAccountData = () => {\r\n    let { year, accountHeader } = this.state;\r\n    this.props\r\n      .getCommonApi(`treatmentacclist/?cust_id=${this.props.id}&year=${year}`)\r\n      .then(key => {\r\n        console.log(key.data, \"treatment account table list\");\r\n        let { data, header_data } = key;\r\n        let { accountList } = this.state;\r\n        accountList = data;\r\n        accountHeader = header_data;\r\n        this.setState({ accountList, accountHeader });\r\n      });\r\n  };\r\n\r\n  toggle = tab => {\r\n    if (this.state.activeTab !== tab) {\r\n      this.setState({\r\n        activeTab: tab,\r\n      });\r\n    }\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { year } = this.state;\r\n    year = value;\r\n    await this.setState({\r\n      year,\r\n    });\r\n    this.getAccountData();\r\n  };\r\n\r\n  handleOpenDetail = async data => {\r\n    let { activeTab } = this.state;\r\n    activeTab = \"detail\";\r\n\r\n    await this.setState({\r\n      activeTab,\r\n    });\r\n    this.getDetailList(data.id);\r\n  };\r\n\r\n  getDetailList = id => {\r\n    this.props.getCommonApi(`treatmentacclist/${id}`).then(key => {\r\n      let { data, header_data } = key;\r\n      let { DetailList, accountHeader } = this.state;\r\n      DetailList = data;\r\n      accountHeader = header_data;\r\n      this.setState({ DetailList, accountHeader });\r\n    });\r\n  };\r\n\r\n  handleBack = () => {\r\n    let { activeTab } = this.state;\r\n    activeTab = \"\";\r\n    this.setState({\r\n      activeTab,\r\n      DetailList: [],\r\n    });\r\n    this.getAccountData();\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      accountHeader = {},\r\n      headerDetails,\r\n      accountList,\r\n      yearList,\r\n      year,\r\n      activeTab,\r\n      detailHeader,\r\n      DetailList,\r\n    } = this.state;\r\n    let {\r\n      balance,\r\n      treatment_count,\r\n      outstanding,\r\n      credit_balance,\r\n      outstanding_balance,\r\n    } = accountHeader;\r\n    return (\r\n      <div className=\"treatment-account row\">\r\n        <div className=\"col-6 mt-3 mb-4\">\r\n          {activeTab !== \"detail\" ? (\r\n            <div className=\"row\">\r\n              <div className=\"col-5 mb-2\">Treatment List</div>\r\n              <div className=\"col-5 mb-2\">\r\n                <NormalSelect\r\n                  options={yearList}\r\n                  value={year}\r\n                  name=\"year\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n              </div>\r\n              <div className=\"col-5\">Total Treatment Count </div>\r\n              <div className=\"col-5\">{treatment_count}</div>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n        <div className=\"col-6 mt-3 mb-4\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6 mb-2\">Credit Balance</div>\r\n            <div className=\"col-6 mb-2\">\r\n              $ {activeTab !== \"detail\" ? balance : credit_balance}\r\n            </div>\r\n\r\n            <div className=\"col-6\">Outstanding Balance</div>\r\n            <div className=\"col-6\">\r\n              $ {activeTab !== \"detail\" ? outstanding : outstanding_balance}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12\">\r\n          <div className=\"table\">\r\n            {activeTab !== \"detail\" ? (\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n              >\r\n                {accountList && accountList.length > 0\r\n                  ? accountList.map((item, index) => {\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.sa_date}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.transaction}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.treatment_parentcode}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.description}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {\"$\" + item.payment}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {\"$\" + item.balance}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {\"$\" + item.outstanding}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.balance_qty}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <NormalButton\r\n                                buttonClass={\"view mr-3\"}\r\n                                mainbg={true}\r\n                                className=\"col-12 fs-15 \"\r\n                                label=\"view\"\r\n                                onClick={() => this.handleOpenDetail(item)}\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n            ) : (\r\n              <TableWrapper\r\n                headerDetails={detailHeader}\r\n                queryHandler={this.handlePagination}\r\n              >\r\n                {DetailList && DetailList.length > 0\r\n                  ? DetailList.map((item, index) => {\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.sa_date}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.description}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item.type}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {\"$\" + item.amount}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {\"$\" + item.balance}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {\"$\" + item.outstanding}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12 justify-center d-flex\">\r\n          {activeTab === \"detail\" ? (\r\n            <NormalButton\r\n              buttonClass={\"back mr-3\"}\r\n              mainbg={true}\r\n              className=\"col-12 fs-15 \"\r\n              label=\"Back\"\r\n              onClick={() => this.handleBack()}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <NormalButton\r\n            buttonClass={\"print\"}\r\n            className=\"col-12 fs-15 \"\r\n            label=\"Print\"\r\n            onClick={() => this.setState({ isOpenEditDisc: false })}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentAccount = connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(TreatmentAccountClass);\r\n"]},"metadata":{},"sourceType":"module"}