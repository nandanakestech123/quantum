{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\StaffPlus\\\\StaffSkillList\\\\index.js\";\nimport React from \"react\";\nimport { NormalButton, NormalSelect, InputSearch, TableWrapper } from \"component/common\";\nimport { getCommonApi, getJobtitle } from \"redux/actions/common\";\nimport { getSkillList } from \"redux/actions/staffPlus\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nimport \"./styles.scss\";\nimport { withTranslation } from \"react-i18next\";\nexport class StaffSkillListClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      header: [],\n      skillList: [],\n      jobOptions: [],\n      selectedJobOption: \"\",\n      skillSOptions: [],\n      selectedSkillOption: \"\",\n      isLoading: true,\n      isMounted: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.getDatafromStore = async () => {\n      await this.props.getJobtitle();\n      var skillListRes = await this.props.getCommonApi(\"SkillsItemTypeList/\");\n      let {\n        jobtitleList\n      } = this.props;\n      let {\n        jobOptions,\n        skillSOptions,\n        selectedJobOption,\n        selectedSkillOption\n      } = this.state;\n\n      for (let key of jobtitleList) {\n        jobOptions.push({\n          value: key.id,\n          label: key.level_desc\n        });\n      }\n\n      for (let key of skillListRes.skillsTypes) {\n        skillSOptions.push({\n          value: key.itm_id,\n          label: key.itm_name\n        });\n      }\n\n      selectedJobOption = jobOptions[0].value;\n      selectedSkillOption = skillSOptions[0].value;\n      this.updateState({\n        jobOptions,\n        skillSOptions,\n        selectedJobOption,\n        selectedSkillOption\n      });\n      this.loadData();\n    };\n\n    this.loadData = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        data,\n        selectedJobOption,\n        selectedSkillOption,\n        skillList\n      } = this.state;\n      if (selectedJobOption == \"\" || selectedSkillOption == \"\") return this.updateState({\n        data: [],\n        skillListRes: [],\n        isLoading: false\n      });\n      let skillSetRes = await this.props.getCommonApi(`SkillsView?item_type=${selectedSkillOption}`);\n      await this.props.getSkillList(`?emp_type=${selectedJobOption}&item_type=${selectedSkillOption}`);\n      skillList = skillSetRes.data;\n      data = this.props.empSkillList.data;\n      let header = [{\n        label: \"\"\n      }];\n\n      for (let key of this.props.empSkillList.data) {\n        header.push({\n          label: key.staffname\n        });\n      }\n\n      this.updateState({\n        header,\n        skillList,\n        data,\n        isLoading: false\n      });\n    };\n\n    this.handleChange = e => {\n      this.state[e.target.name] = e.target.value;\n      this.updateState();\n      this.loadData();\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  componentWillMount() {\n    this.getDatafromStore();\n  }\n\n  render() {\n    let {\n      data,\n      header,\n      jobOptions,\n      selectedJobOption,\n      skillSOptions,\n      selectedSkillOption,\n      skillList,\n      isLoading\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"staffList-container col-xl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      onClick: () => this.props.history.push(\"/admin/staffplus\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 19\n      }\n    }, t(\"Staff\"), \" >\", \" \"), \" \", t(\"Staff Skill Listing\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, t(\"Employee Type\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: jobOptions,\n      value: selectedJobOption,\n      name: \"selectedJobOption\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, t(\"Skill Type\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: skillSOptions,\n      value: selectedSkillOption,\n      name: \"selectedSkillOption\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(InputSearch, {\n      className: \"\",\n      placeholder: \"Search Skill\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 float-right\",\n      label: \"Add Staff Skill\",\n      onClick: () => this.props.history.push(\"/admin/staffplus/skills/add\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 23\n      }\n    }, t(\"Loading...\")))) : data.length == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, t(\"No Data\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      className: \"tableFixHeads\",\n      headerDetails: header,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, skillList ? skillList.map(({\n      item_no,\n      item_desc\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: item_no,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 35\n        }\n      }, item_desc)), data.map(key => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex align-items-center justify-content-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 39\n          }\n        }, key.skills.filter(e => e.item_no == item_no).length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex align-items-center justify-content-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 43\n          }\n        }, /*#__PURE__*/React.createElement(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"30\",\n          height: \"30\",\n          fill: \"currentColor\",\n          class: \"bi bi-check\",\n          viewBox: \"0 0 30 30\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 45\n          }\n        }, /*#__PURE__*/React.createElement(\"path\", {\n          d: \"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 47\n          }\n        }))) : /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex align-items-center justify-content-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 43\n          }\n        }, /*#__PURE__*/React.createElement(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"30\",\n          height: \"30\",\n          fill: \"currentColor\",\n          class: \"bi bi-x\",\n          viewBox: \"0 0 30 30\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 45\n          }\n        }, /*#__PURE__*/React.createElement(\"path\", {\n          d: \"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 47\n          }\n        })))));\n      }));\n    }) : null)))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  jobtitleList: state.common.jobtitleList,\n  empSkillList: state.staffPlus.staffPlusSkillList\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    getJobtitle,\n    getSkillList\n  }, dispatch);\n};\n\nexport const StaffSkillList = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(StaffSkillListClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/StaffPlus/StaffSkillList/index.js"],"names":["React","NormalButton","NormalSelect","InputSearch","TableWrapper","getCommonApi","getJobtitle","getSkillList","connect","bindActionCreators","_","withTranslation","StaffSkillListClass","Component","state","data","header","skillList","jobOptions","selectedJobOption","skillSOptions","selectedSkillOption","isLoading","isMounted","updateState","setState","getDatafromStore","props","skillListRes","jobtitleList","key","push","value","id","label","level_desc","skillsTypes","itm_id","itm_name","loadData","skillSetRes","empSkillList","staffname","handleChange","e","target","name","componentWillUnmount","componentWillMount","render","t","history","length","map","item_no","item_desc","skills","filter","mapStateToProps","common","staffPlus","staffPlusSkillList","mapDispatchToProps","dispatch","StaffSkillList"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  NormalButton,\r\n  NormalSelect,\r\n  InputSearch,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { getCommonApi, getJobtitle } from \"redux/actions/common\";\r\nimport { getSkillList } from \"redux/actions/staffPlus\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport _ from \"lodash\";\r\nimport \"./styles.scss\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class StaffSkillListClass extends React.Component {\r\n  state = {\r\n    data: [],\r\n    header: [],\r\n    skillList: [],\r\n    jobOptions: [],\r\n    selectedJobOption: \"\",\r\n    skillSOptions: [],\r\n    selectedSkillOption: \"\",\r\n    isLoading: true,\r\n    isMounted: true,\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.getDatafromStore();\r\n  }\r\n\r\n  getDatafromStore = async () => {\r\n    await this.props.getJobtitle();\r\n    var skillListRes = await this.props.getCommonApi(\"SkillsItemTypeList/\");\r\n    let { jobtitleList } = this.props;\r\n    let { jobOptions, skillSOptions, selectedJobOption, selectedSkillOption } =\r\n      this.state;\r\n    for (let key of jobtitleList) {\r\n      jobOptions.push({ value: key.id, label: key.level_desc });\r\n    }\r\n    for (let key of skillListRes.skillsTypes) {\r\n      skillSOptions.push({ value: key.itm_id, label: key.itm_name });\r\n    }\r\n    selectedJobOption = jobOptions[0].value;\r\n    selectedSkillOption = skillSOptions[0].value;\r\n    this.updateState({\r\n      jobOptions,\r\n      skillSOptions,\r\n      selectedJobOption,\r\n      selectedSkillOption,\r\n    });\r\n\r\n    this.loadData();\r\n  };\r\n\r\n  loadData = async () => {\r\n    this.updateState({ isLoading: true });\r\n    let { data, selectedJobOption, selectedSkillOption, skillList } =\r\n      this.state;\r\n    if (selectedJobOption == \"\" || selectedSkillOption == \"\")\r\n      return this.updateState({ data: [], skillListRes: [], isLoading: false });\r\n    let skillSetRes = await this.props.getCommonApi(\r\n      `SkillsView?item_type=${selectedSkillOption}`\r\n    );\r\n    await this.props.getSkillList(\r\n      `?emp_type=${selectedJobOption}&item_type=${selectedSkillOption}`\r\n    );\r\n    skillList = skillSetRes.data;\r\n    data = this.props.empSkillList.data;\r\n    let header = [{ label: \"\" }];\r\n    for (let key of this.props.empSkillList.data) {\r\n      header.push({ label: key.staffname });\r\n    }\r\n    this.updateState({ header, skillList, data, isLoading: false });\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.state[e.target.name] = e.target.value;\r\n    this.updateState();\r\n    this.loadData();\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      data,\r\n      header,\r\n      jobOptions,\r\n      selectedJobOption,\r\n      skillSOptions,\r\n      selectedSkillOption,\r\n      skillList,\r\n      isLoading,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"staffList-container col-xl\">\r\n            <div className=\"row align-items-center\">\r\n              <div className=\"col-md-4\">\r\n                <h3>\r\n                  <span\r\n                    onClick={() => this.props.history.push(\"/admin/staffplus\")}\r\n                  >\r\n                    {t(\"Staff\")} &gt;{\" \"}\r\n                  </span>{\" \"}\r\n                  {t(\"Staff Skill Listing\")}\r\n                </h3>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-6 mb-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Employee Type\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    options={jobOptions}\r\n                    value={selectedJobOption}\r\n                    name=\"selectedJobOption\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-6 mb-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Skill Type\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    options={skillSOptions}\r\n                    value={selectedSkillOption}\r\n                    name=\"selectedSkillOption\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-4\">\r\n              <div className=\"col-md-8 mb-4\">\r\n                <InputSearch\r\n                  className=\"\"\r\n                  placeholder=\"Search Skill\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-4 col-sm-12\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  className=\"col-12 fs-15 float-right\"\r\n                  label=\"Add Staff Skill\"\r\n                  onClick={() =>\r\n                    this.props.history.push(\"/admin/staffplus/skills/add\")\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"tab-table-content\">\r\n              <div className=\"py-4\">\r\n                {isLoading ? (\r\n                  <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                    <div class=\"spinner-border\" role=\"status\">\r\n                      <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                    </div>\r\n                  </div>\r\n                ) : data.length == 0 ? (\r\n                  <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                    {t(\"No Data\")}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"table-container\">\r\n                    <TableWrapper\r\n                      className=\"tableFixHeads\"\r\n                      headerDetails={header}\r\n                    >\r\n                      {skillList\r\n                        ? skillList.map(({ item_no, item_desc }) => {\r\n                            return (\r\n                              <tr key={item_no}>\r\n                                <td>\r\n                                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                                    {item_desc}\r\n                                  </div>\r\n                                </td>\r\n                                {data.map(key => {\r\n                                  return (\r\n                                    <td>\r\n                                      <div className=\"d-flex align-items-center justify-content-center\">\r\n                                        {key.skills.filter(\r\n                                          e => e.item_no == item_no\r\n                                        ).length > 0 ? (\r\n                                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                                            <svg\r\n                                              xmlns=\"http://www.w3.org/2000/svg\"\r\n                                              width=\"30\"\r\n                                              height=\"30\"\r\n                                              fill=\"currentColor\"\r\n                                              class=\"bi bi-check\"\r\n                                              viewBox=\"0 0 30 30\"\r\n                                            >\r\n                                              <path d=\"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z\" />\r\n                                            </svg>\r\n                                          </div>\r\n                                        ) : (\r\n                                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                                            <svg\r\n                                              xmlns=\"http://www.w3.org/2000/svg\"\r\n                                              width=\"30\"\r\n                                              height=\"30\"\r\n                                              fill=\"currentColor\"\r\n                                              class=\"bi bi-x\"\r\n                                              viewBox=\"0 0 30 30\"\r\n                                            >\r\n                                              <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\" />\r\n                                            </svg>\r\n                                          </div>\r\n                                        )}\r\n                                      </div>\r\n                                    </td>\r\n                                  );\r\n                                })}\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        : null}\r\n                    </TableWrapper>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  jobtitleList: state.common.jobtitleList,\r\n  empSkillList: state.staffPlus.staffPlusSkillList,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      getJobtitle,\r\n      getSkillList,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const StaffSkillList = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(StaffSkillListClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}