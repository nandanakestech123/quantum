{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\StaffPlus\\\\SecurityAuthorization\\\\index.js\";\nimport React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { Link } from \"react-router-dom\";\nimport { NormalSelect, NormalButton } from \"component/common\";\nimport { getIndividualAuthorizationSettings, updateIndividualAuthorizationSettings, getAuthorizationSettings, updateAuthorizationSettings } from \"redux/actions/staffPlus\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport { getTokenDetails } from \"redux/actions/auth\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { GroupAuthorizationTable } from \"./GroupAuthorizationTable\";\nimport { IndividualAuthorizationTable } from \"./IndividualAuthorizationTable\";\nimport { withTranslation } from \"react-i18next\";\nimport { Navigation } from \"react-minimal-side-navigation/lib\";\nimport { getStaffPlus } from \"redux/actions/staffPlus\";\nexport class SecurityAuthorizationClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentMenu: \"/group\",\n      empLvlOptions: [],\n      selected_empLVl: \"\",\n      staffList: [],\n      staffList_selected: \"\",\n      jobOptions: [],\n      jobOptions_selected: \"\",\n      security_groups: [],\n      selected_securityGroup: \"\",\n      individualData: [],\n      groupData: [],\n      groupColumns: [\"Administrator\", \"Director\", \"Manager\", \"Supervisor\", \"Beauticion\", \"Therapist\"],\n      isMounted: true,\n      isLoading: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.loadData = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      await this.props.getJobtitle();\n      await this.props.getAuthorizationSettings();\n      let emp_lvls = await this.props.getCommonApi(\"EmployeeLevels\");\n      let {\n        staffPlusAuthorization,\n        jobtitleList\n      } = this.props;\n      let {\n        jobOptions,\n        empLvlOptions\n      } = this.state;\n\n      for (let key of jobtitleList) {\n        jobOptions.push({\n          label: key.level_desc,\n          value: key.id\n        });\n      }\n\n      for (let key of emp_lvls.language) {\n        empLvlOptions.push({\n          label: key.level_description,\n          value: key.level_code\n        });\n      }\n\n      this.updateState({\n        jobOptions,\n        empLvlOptions,\n        isLoading: false,\n        groupData: staffPlusAuthorization\n      });\n    };\n\n    this.onJobChanged = e => {\n      this.state.jobOptions_selected = e.target.value;\n      this.state.selected_empLVl = \"\";\n      this.state.staffList_selected = \"\";\n      this.updateState({});\n      this.updateStaffList();\n    };\n\n    this.updateStaffList = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        staffList,\n        staffList_selected,\n        individualData\n      } = this.state;\n      staffList_selected = \"\";\n      staffList = [];\n      individualData = [];\n\n      if (this.state.jobOptions_selected != \"\") {\n        await this.props.getStaffPlus(`?limit=100&EMP_TYPEid=${this.state.jobOptions_selected}`);\n        let {\n          staffPlusDetail\n        } = this.props;\n        staffPlusDetail.dataList.forEach(key => {\n          staffList.push({\n            label: key.emp_name,\n            value: key.id,\n            sites: key.site_list.map(e => e.site_code)\n          });\n        });\n      }\n\n      this.updateState({\n        staffList,\n        individualData,\n        staffList_selected,\n        isLoading: false\n      });\n    };\n\n    this.onStaffChanged = async e => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        staffList_selected,\n        individualData,\n        selected_empLVl\n      } = this.state;\n      staffList_selected = e.target.value;\n\n      if (staffList_selected != \"\") {\n        await this.props.getIndividualAuthorizationSettings(staffList_selected);\n        let {\n          staffPlusIndividualAuthorization\n        } = this.props;\n        selected_empLVl = staffPlusIndividualAuthorization === null || staffPlusIndividualAuthorization === void 0 ? void 0 : staffPlusIndividualAuthorization.LEVEL_ItmIDid;\n        individualData = staffPlusIndividualAuthorization === null || staffPlusIndividualAuthorization === void 0 ? void 0 : staffPlusIndividualAuthorization.settings_list;\n      }\n\n      this.updateState({\n        selected_empLVl,\n        staffList_selected,\n        individualData,\n        isLoading: false\n      });\n    };\n\n    this.onEmpLvlChange = async e => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        selected_empLVl,\n        individualData\n      } = this.state;\n      selected_empLVl = e.target.value;\n      let individualSettings = await this.props.getCommonApi(`EmployeeLevelsSettings?code=${selected_empLVl}`);\n      individualData = individualSettings.settings;\n      this.updateState({\n        isLoading: false,\n        selected_empLVl,\n        individualData\n      });\n    };\n\n    this.onSumbit = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        currentMenu,\n        groupData,\n        individualData,\n        selected_empLVl,\n        staffList_selected\n      } = this.state;\n\n      try {\n        if (currentMenu == \"/group\") {\n          let level_list = groupData.reduce((a, e) => a.concat(e.levels), []);\n          await this.props.updateAuthorizationSettings({\n            level_list\n          });\n          await this.props.getTokenDetails().then(res => {});\n        } else {\n          await this.props.updateIndividualAuthorizationSettings(staffList_selected, {\n            level_code: selected_empLVl\n          });\n          await this.props.getIndividualAuthorizationSettings(staffList_selected);\n          let {\n            staffPlusIndividualAuthorization\n          } = this.props;\n          selected_empLVl = staffPlusIndividualAuthorization === null || staffPlusIndividualAuthorization === void 0 ? void 0 : staffPlusIndividualAuthorization.LEVEL_ItmIDid;\n          individualData = staffPlusIndividualAuthorization === null || staffPlusIndividualAuthorization === void 0 ? void 0 : staffPlusIndividualAuthorization.settings_list;\n          this.updateState({\n            selected_empLVl,\n            individualData\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n\n      this.updateState({\n        isLoading: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  render() {\n    let {\n      isLoading,\n      currentMenu,\n      groupData,\n      jobOptions,\n      jobOptions_selected,\n      staffList,\n      staffList_selected,\n      individualData,\n      empLvlOptions,\n      selected_empLVl\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-lg-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Navigation, {\n      activeItemId: currentMenu,\n      onSelect: ({\n        itemId\n      }) => {\n        this.updateState({\n          currentMenu: itemId\n        });\n      },\n      items: [{\n        title: t(\"Group Authorization\"),\n        itemId: \"/group\"\n      }, {\n        title: t(\"Individual Authorization\"),\n        itemId: \"/indi\"\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    })), isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    }, \"Loading...\")))) : currentMenu == \"/group\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    }, t(\"Group Authorization\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(GroupAuthorizationTable, {\n      data: groupData,\n      onChange: data => this.updateState(() => this.state.groupData = data),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 21\n      }\n    }))))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mt-4 mb-4 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 19\n      }\n    }, t(\"Individual Authorization\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }\n    }, t(\"Employee Type\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: jobOptions,\n      value: jobOptions_selected,\n      onChange: this.onJobChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }\n    }, t(\"Employee\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: staffList,\n      value: staffList_selected,\n      onChange: this.onStaffChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 21\n      }\n    }, t(\"Employee Level\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: empLvlOptions,\n      value: selected_empLVl,\n      disabled: staffList_selected == \"\",\n      onChange: this.onEmpLvlChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IndividualAuthorizationTable, {\n      data: individualData,\n      onChange: individualData => this.updateState({\n        individualData\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 21\n      }\n    }))))), !isLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pt-5 d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 col-md-4 col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/admin/staffplus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Cancel\",\n      resetbg: true,\n      className: \"mr-2 bg-danger text-light col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 col-md-4 col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Save\",\n      success: true,\n      className: \"mr-2 col-12\",\n      onClick: this.onSumbit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 19\n      }\n    }))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  staffPlusAuthorization: state.staffPlus.staffPlusAuthorization,\n  staffPlusIndividualAuthorization: state.staffPlus.staffPlusIndividualAuthorization,\n  jobtitleList: state.common.jobtitleList,\n  staffPlusDetail: state.staffPlus.staffPlusDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getAuthorizationSettings,\n    updateAuthorizationSettings,\n    getJobtitle,\n    getStaffPlus,\n    getIndividualAuthorizationSettings,\n    updateIndividualAuthorizationSettings,\n    getCommonApi,\n    getTokenDetails\n  }, dispatch);\n};\n\nexport const SecurityAuthorization = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(SecurityAuthorizationClass));","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/StaffPlus/SecurityAuthorization/index.js"],"names":["React","Component","Link","NormalSelect","NormalButton","getIndividualAuthorizationSettings","updateIndividualAuthorizationSettings","getAuthorizationSettings","updateAuthorizationSettings","getJobtitle","getCommonApi","getTokenDetails","connect","bindActionCreators","GroupAuthorizationTable","IndividualAuthorizationTable","withTranslation","Navigation","getStaffPlus","SecurityAuthorizationClass","state","currentMenu","empLvlOptions","selected_empLVl","staffList","staffList_selected","jobOptions","jobOptions_selected","security_groups","selected_securityGroup","individualData","groupData","groupColumns","isMounted","isLoading","updateState","data","setState","loadData","props","emp_lvls","staffPlusAuthorization","jobtitleList","key","push","label","level_desc","value","id","language","level_description","level_code","onJobChanged","e","target","updateStaffList","staffPlusDetail","dataList","forEach","emp_name","sites","site_list","map","site_code","onStaffChanged","staffPlusIndividualAuthorization","LEVEL_ItmIDid","settings_list","onEmpLvlChange","individualSettings","settings","onSumbit","level_list","reduce","a","concat","levels","then","res","error","console","log","componentDidMount","componentWillUnmount","render","t","itemId","title","mapStateToProps","staffPlus","common","mapDispatchToProps","dispatch","SecurityAuthorization"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { NormalSelect, NormalButton } from \"component/common\";\r\nimport {\r\n  getIndividualAuthorizationSettings,\r\n  updateIndividualAuthorizationSettings,\r\n  getAuthorizationSettings,\r\n  updateAuthorizationSettings,\r\n} from \"redux/actions/staffPlus\";\r\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\r\nimport { getTokenDetails } from \"redux/actions/auth\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { GroupAuthorizationTable } from \"./GroupAuthorizationTable\";\r\nimport { IndividualAuthorizationTable } from \"./IndividualAuthorizationTable\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { Navigation } from \"react-minimal-side-navigation/lib\";\r\nimport { getStaffPlus } from \"redux/actions/staffPlus\";\r\n\r\nexport class SecurityAuthorizationClass extends Component {\r\n  state = {\r\n    currentMenu: \"/group\",\r\n    empLvlOptions: [],\r\n    selected_empLVl: \"\",\r\n    staffList: [],\r\n    staffList_selected: \"\",\r\n    jobOptions: [],\r\n    jobOptions_selected: \"\",\r\n    security_groups: [],\r\n    selected_securityGroup: \"\",\r\n    individualData: [],\r\n    groupData: [],\r\n    groupColumns: [\r\n      \"Administrator\",\r\n      \"Director\",\r\n      \"Manager\",\r\n      \"Supervisor\",\r\n      \"Beauticion\",\r\n      \"Therapist\",\r\n    ],\r\n    isMounted: true,\r\n    isLoading: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadData();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  loadData = async () => {\r\n    this.updateState({ isLoading: true });\r\n    await this.props.getJobtitle();\r\n    await this.props.getAuthorizationSettings();\r\n    let emp_lvls = await this.props.getCommonApi(\"EmployeeLevels\");\r\n    let { staffPlusAuthorization, jobtitleList } = this.props;\r\n    let { jobOptions, empLvlOptions } = this.state;\r\n    for (let key of jobtitleList) {\r\n      jobOptions.push({ label: key.level_desc, value: key.id });\r\n    }\r\n    for (let key of emp_lvls.language) {\r\n      empLvlOptions.push({\r\n        label: key.level_description,\r\n        value: key.level_code,\r\n      });\r\n    }\r\n    this.updateState({\r\n      jobOptions,\r\n      empLvlOptions,\r\n      isLoading: false,\r\n      groupData: staffPlusAuthorization,\r\n    });\r\n  };\r\n\r\n  onJobChanged = e => {\r\n    this.state.jobOptions_selected = e.target.value;\r\n    this.state.selected_empLVl = \"\";\r\n    this.state.staffList_selected = \"\";\r\n    this.updateState({});\r\n    this.updateStaffList();\r\n  };\r\n\r\n  updateStaffList = async () => {\r\n    this.updateState({ isLoading: true });\r\n    let { staffList, staffList_selected, individualData } = this.state;\r\n    staffList_selected = \"\";\r\n    staffList = [];\r\n    individualData = [];\r\n    if (this.state.jobOptions_selected != \"\") {\r\n      await this.props.getStaffPlus(\r\n        `?limit=100&EMP_TYPEid=${this.state.jobOptions_selected}`\r\n      );\r\n\r\n      let { staffPlusDetail } = this.props;\r\n\r\n      staffPlusDetail.dataList.forEach(key => {\r\n        staffList.push({\r\n          label: key.emp_name,\r\n          value: key.id,\r\n          sites: key.site_list.map(e => e.site_code),\r\n        });\r\n      });\r\n    }\r\n    this.updateState({\r\n      staffList,\r\n      individualData,\r\n      staffList_selected,\r\n      isLoading: false,\r\n    });\r\n  };\r\n\r\n  onStaffChanged = async e => {\r\n    this.updateState({ isLoading: true });\r\n    let { staffList_selected, individualData, selected_empLVl } = this.state;\r\n    staffList_selected = e.target.value;\r\n    if (staffList_selected != \"\") {\r\n      await this.props.getIndividualAuthorizationSettings(staffList_selected);\r\n      let { staffPlusIndividualAuthorization } = this.props;\r\n      selected_empLVl = staffPlusIndividualAuthorization?.LEVEL_ItmIDid;\r\n      individualData = staffPlusIndividualAuthorization?.settings_list;\r\n    }\r\n    this.updateState({\r\n      selected_empLVl,\r\n      staffList_selected,\r\n      individualData,\r\n      isLoading: false,\r\n    });\r\n  };\r\n\r\n  onEmpLvlChange = async e => {\r\n    this.updateState({ isLoading: true });\r\n    let { selected_empLVl, individualData } = this.state;\r\n    selected_empLVl = e.target.value;\r\n    let individualSettings = await this.props.getCommonApi(\r\n      `EmployeeLevelsSettings?code=${selected_empLVl}`\r\n    );\r\n    individualData = individualSettings.settings;\r\n    this.updateState({ isLoading: false, selected_empLVl, individualData });\r\n  };\r\n\r\n  onSumbit = async () => {\r\n    this.updateState({ isLoading: true });\r\n    let {\r\n      currentMenu,\r\n      groupData,\r\n      individualData,\r\n      selected_empLVl,\r\n      staffList_selected,\r\n    } = this.state;\r\n    try {\r\n      if (currentMenu == \"/group\") {\r\n        let level_list = groupData.reduce((a, e) => a.concat(e.levels), []);\r\n        await this.props.updateAuthorizationSettings({ level_list });\r\n        await this.props.getTokenDetails().then(res => {});\r\n      } else {\r\n        await this.props.updateIndividualAuthorizationSettings(\r\n          staffList_selected,\r\n          { level_code: selected_empLVl }\r\n        );\r\n        await this.props.getIndividualAuthorizationSettings(staffList_selected);\r\n        let { staffPlusIndividualAuthorization } = this.props;\r\n        selected_empLVl = staffPlusIndividualAuthorization?.LEVEL_ItmIDid;\r\n        individualData = staffPlusIndividualAuthorization?.settings_list;\r\n        this.updateState({ selected_empLVl, individualData });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    this.updateState({ isLoading: false });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      isLoading,\r\n      currentMenu,\r\n      groupData,\r\n      jobOptions,\r\n      jobOptions_selected,\r\n      staffList,\r\n      staffList_selected,\r\n      individualData,\r\n      empLvlOptions,\r\n      selected_empLVl,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12 col-lg-2 mb-4\">\r\n            <Navigation\r\n              activeItemId={currentMenu}\r\n              onSelect={({ itemId }) => {\r\n                this.updateState({ currentMenu: itemId });\r\n              }}\r\n              items={[\r\n                {\r\n                  title: t(\"Group Authorization\"),\r\n                  itemId: \"/group\",\r\n                },\r\n                {\r\n                  title: t(\"Individual Authorization\"),\r\n                  itemId: \"/indi\",\r\n                },\r\n              ]}\r\n            />\r\n          </div>\r\n          {isLoading ? (\r\n            <div className=\"col\">\r\n              <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                <div class=\"spinner-border\" role=\"status\">\r\n                  <span class=\"sr-only\">Loading...</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : currentMenu == \"/group\" ? (\r\n            <div className=\"col-lg-10 col-md-12\">\r\n              <div className=\"row align-items-center\">\r\n                <div className=\"col-md-12 mt-4\">\r\n                  <h3>{t(\"Group Authorization\")}</h3>\r\n                </div>\r\n              </div>\r\n              <div className=\"tab-table-content\">\r\n                <div className=\"py-4\">\r\n                  <div className=\"table-container\">\r\n                    <GroupAuthorizationTable\r\n                      data={groupData}\r\n                      onChange={data =>\r\n                        this.updateState(() => (this.state.groupData = data))\r\n                      }\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"col-lg-10 col-md-12\">\r\n              <div className=\"row align-items-center\">\r\n                <div className=\"col-md-12 mt-4 mb-4 \">\r\n                  <h3>{t(\"Individual Authorization\")}</h3>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group mb-4 pb-2\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-12\">\r\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                      {t(\"Employee Type\")}\r\n                    </label>\r\n                    <div className=\"input-group\">\r\n                      <NormalSelect\r\n                        options={jobOptions}\r\n                        value={jobOptions_selected}\r\n                        onChange={this.onJobChanged}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group mb-4 pb-2\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-12\">\r\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                      {t(\"Employee\")}\r\n                    </label>\r\n                    <div className=\"input-group\">\r\n                      <NormalSelect\r\n                        options={staffList}\r\n                        value={staffList_selected}\r\n                        onChange={this.onStaffChanged}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group mb-4 pb-2\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-12\">\r\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                      {t(\"Employee Level\")}\r\n                    </label>\r\n                    <div className=\"input-group\">\r\n                      <NormalSelect\r\n                        options={empLvlOptions}\r\n                        value={selected_empLVl}\r\n                        disabled={staffList_selected == \"\"}\r\n                        onChange={this.onEmpLvlChange}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"tab-table-content\">\r\n                <div className=\"py-4\">\r\n                  <div className=\"table-container\">\r\n                    <IndividualAuthorizationTable\r\n                      data={individualData}\r\n                      onChange={individualData =>\r\n                        this.updateState({ individualData })\r\n                      }\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {!isLoading && (\r\n            <div className=\"col-12 form-group mb-4 pb-2\">\r\n              <div className=\"pt-5 d-flex justify-content-center\">\r\n                <div className=\"col-6 col-md-4 col-lg-2\">\r\n                  <Link to=\"/admin/staffplus\">\r\n                    <NormalButton\r\n                      label=\"Cancel\"\r\n                      resetbg={true}\r\n                      className=\"mr-2 bg-danger text-light col-12\"\r\n                    />\r\n                  </Link>\r\n                </div>\r\n                <div className=\"col-6 col-md-4 col-lg-2\">\r\n                  <NormalButton\r\n                    label=\"Save\"\r\n                    success={true}\r\n                    className=\"mr-2 col-12\"\r\n                    onClick={this.onSumbit}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  staffPlusAuthorization: state.staffPlus.staffPlusAuthorization,\r\n  staffPlusIndividualAuthorization:\r\n    state.staffPlus.staffPlusIndividualAuthorization,\r\n  jobtitleList: state.common.jobtitleList,\r\n  staffPlusDetail: state.staffPlus.staffPlusDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getAuthorizationSettings,\r\n      updateAuthorizationSettings,\r\n      getJobtitle,\r\n      getStaffPlus,\r\n      getIndividualAuthorizationSettings,\r\n      updateIndividualAuthorizationSettings,\r\n      getCommonApi,\r\n      getTokenDetails,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const SecurityAuthorization = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(SecurityAuthorizationClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}