{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\Admin\\\\StaffPlus\\\\StaffSkillList\\\\index.js\";\nimport React from \"react\";\nimport { NormalButton, NormalSelect, InputSearch, TableWrapper } from \"component/common\";\nimport { getCommonApi, getJobtitle } from \"redux/actions/common\";\nimport { getSkillList } from \"redux/actions/staffPlus\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { withTranslation } from \"react-i18next\";\nimport _ from \"lodash\";\nimport \"./styles.scss\";\nexport class StaffSkillListClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      header: [],\n      skillList: [],\n      jobOptions: [],\n      selectedJobOption: \"\",\n      skillSOptions: [],\n      selectedSkillOption: \"\",\n      isLoading: true,\n      isMounted: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.getDatafromStore = async () => {\n      await this.props.getJobtitle();\n      var skillListRes = await this.props.getCommonApi(\"SkillsItemTypeList\");\n      let {\n        jobtitleList\n      } = this.props;\n      let {\n        jobOptions,\n        skillSOptions,\n        selectedJobOption,\n        selectedSkillOption\n      } = this.state;\n\n      for (let key of jobtitleList) {\n        jobOptions.push({\n          value: key.id,\n          label: key.level_desc\n        });\n      }\n\n      for (let key of skillListRes.skillsTypes) {\n        skillSOptions.push({\n          value: key.itm_id,\n          label: key.itm_name\n        });\n      }\n\n      selectedJobOption = jobOptions[0].value;\n      selectedSkillOption = skillSOptions[0].value;\n      this.updateState({\n        jobOptions,\n        skillSOptions,\n        selectedJobOption,\n        selectedSkillOption\n      });\n      this.loadData();\n    };\n\n    this.loadData = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        data,\n        selectedJobOption,\n        selectedSkillOption,\n        skillList\n      } = this.state;\n      if (selectedJobOption == \"\" || selectedSkillOption == \"\") return this.updateState({\n        data: [],\n        skillListRes: [],\n        isLoading: false\n      });\n      let skillSetRes = await this.props.getCommonApi(`SkillsView?item_type=${selectedSkillOption}`);\n      await this.props.getSkillList(`?emp_type=${selectedJobOption}&item_type=${selectedSkillOption}`);\n      skillList = skillSetRes.data;\n      data = this.props.empSkillList.data;\n      let header = [{\n        label: \"\"\n      }];\n\n      for (let key of (_this$props$empSkillL = this.props.empSkillList) === null || _this$props$empSkillL === void 0 ? void 0 : _this$props$empSkillL.data) {\n        var _this$props$empSkillL;\n\n        header.push({\n          label: key.staffname\n        });\n      }\n\n      this.updateState({\n        header,\n        skillList,\n        data,\n        isLoading: false\n      });\n    };\n\n    this.handleChange = e => {\n      this.state[e.target.name] = e.target.value;\n      this.updateState();\n      this.loadData();\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  componentWillMount() {\n    this.getDatafromStore();\n  }\n\n  render() {\n    let {\n      data,\n      header,\n      jobOptions,\n      selectedJobOption,\n      skillSOptions,\n      selectedSkillOption,\n      skillList,\n      isLoading\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"staffList-container col-xl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, t(\"Staff Skill Listing\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, t(\"Employee Type\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: jobOptions,\n      value: selectedJobOption,\n      name: \"selectedJobOption\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, t(\"Skill Type\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: skillSOptions,\n      value: selectedSkillOption,\n      name: \"selectedSkillOption\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(InputSearch, {\n      className: \"\",\n      placeholder: \"Search Skill\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 float-right\",\n      label: \"Add Staff Skill\",\n      onClick: () => this.props.history.push(\"/admin/staffplus/skills/add\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 15\n      }\n    }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 23\n      }\n    }, \"Loading...\"))) : data.length == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, t(\"No Data\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      className: \"tableFixHeads\",\n      headerDetails: header,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }, skillList ? skillList.map(({\n      item_no,\n      item_desc\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: item_no,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 35\n        }\n      }, item_desc)), data.map(key => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex align-items-center justify-content-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 39\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex align-items-center justify-content-center checkbox-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"checkbox\",\n          disabled: true,\n          checked: key.skills.filter(e => e.item_no == item_no).length > 0 ? true : false,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 43\n          }\n        }), /*#__PURE__*/React.createElement(\"span\", {\n          class: \"checkmark\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 43\n          }\n        }))));\n      }));\n    }) : \"\")))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  jobtitleList: state.common.jobtitleList,\n  empSkillList: state.staffPlus.staffPlusSkillList\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    getJobtitle,\n    getSkillList\n  }, dispatch);\n};\n\nexport const StaffSkillList = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(StaffSkillListClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/StaffPlus/StaffSkillList/index.js"],"names":["React","NormalButton","NormalSelect","InputSearch","TableWrapper","getCommonApi","getJobtitle","getSkillList","connect","bindActionCreators","withTranslation","_","StaffSkillListClass","Component","state","data","header","skillList","jobOptions","selectedJobOption","skillSOptions","selectedSkillOption","isLoading","isMounted","updateState","setState","getDatafromStore","props","skillListRes","jobtitleList","key","push","value","id","label","level_desc","skillsTypes","itm_id","itm_name","loadData","skillSetRes","empSkillList","staffname","handleChange","e","target","name","componentWillUnmount","componentWillMount","render","t","history","length","map","item_no","item_desc","skills","filter","mapStateToProps","common","staffPlus","staffPlusSkillList","mapDispatchToProps","dispatch","StaffSkillList"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  NormalButton,\n  NormalSelect,\n  InputSearch,\n  TableWrapper,\n} from \"component/common\";\nimport { getCommonApi, getJobtitle } from \"redux/actions/common\";\nimport { getSkillList } from \"redux/actions/staffPlus\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { withTranslation } from \"react-i18next\";\nimport _ from \"lodash\";\nimport \"./styles.scss\";\n\nexport class StaffSkillListClass extends React.Component {\n  state = {\n    data: [],\n    header: [],\n    skillList: [],\n    jobOptions: [],\n    selectedJobOption: \"\",\n    skillSOptions: [],\n    selectedSkillOption: \"\",\n    isLoading: true,\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentWillMount() {\n    this.getDatafromStore();\n  }\n\n  getDatafromStore = async () => {\n    await this.props.getJobtitle();\n    var skillListRes = await this.props.getCommonApi(\"SkillsItemTypeList\");\n    let { jobtitleList } = this.props;\n    let { jobOptions, skillSOptions, selectedJobOption, selectedSkillOption } =\n      this.state;\n    for (let key of jobtitleList) {\n      jobOptions.push({ value: key.id, label: key.level_desc });\n    }\n    for (let key of skillListRes.skillsTypes) {\n      skillSOptions.push({ value: key.itm_id, label: key.itm_name });\n    }\n    selectedJobOption = jobOptions[0].value;\n    selectedSkillOption = skillSOptions[0].value;\n    this.updateState({\n      jobOptions,\n      skillSOptions,\n      selectedJobOption,\n      selectedSkillOption,\n    });\n\n    this.loadData();\n  };\n\n  loadData = async () => {\n    this.updateState({ isLoading: true });\n    let { data, selectedJobOption, selectedSkillOption, skillList } =\n      this.state;\n    if (selectedJobOption == \"\" || selectedSkillOption == \"\")\n      return this.updateState({ data: [], skillListRes: [], isLoading: false });\n    let skillSetRes = await this.props.getCommonApi(\n      `SkillsView?item_type=${selectedSkillOption}`\n    );\n    await this.props.getSkillList(\n      `?emp_type=${selectedJobOption}&item_type=${selectedSkillOption}`\n    );\n    skillList = skillSetRes.data;\n    data = this.props.empSkillList.data;\n    let header = [{ label: \"\" }];\n    for (let key of this.props.empSkillList?.data) {\n      header.push({ label: key.staffname });\n    }\n    this.updateState({ header, skillList, data, isLoading: false });\n  };\n\n  handleChange = (e) => {\n    this.state[e.target.name] = e.target.value;\n    this.updateState();\n    this.loadData();\n  };\n\n  render() {\n    let {\n      data,\n      header,\n      jobOptions,\n      selectedJobOption,\n      skillSOptions,\n      selectedSkillOption,\n      skillList,\n      isLoading,\n    } = this.state;\n    let { t } = this.props;\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"staffList-container col-xl\">\n            <div className=\"row align-items-center\">\n              <div className=\"col-md-4\">\n                <h3>{t(\"Staff Skill Listing\")}</h3>\n              </div>\n            </div>\n            <div className=\"row mt-4\">\n              <div className=\"col-6 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  {t(\"Employee Type\")}\n                </label>\n                <div className=\"input-group\">\n                  <NormalSelect\n                    options={jobOptions}\n                    value={selectedJobOption}\n                    name=\"selectedJobOption\"\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"row mt-4\">\n              <div className=\"col-6 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  {t(\"Skill Type\")}\n                </label>\n                <div className=\"input-group\">\n                  <NormalSelect\n                    options={skillSOptions}\n                    value={selectedSkillOption}\n                    name=\"selectedSkillOption\"\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"row mt-4\">\n              <div className=\"col-md-8 mb-4\">\n                <InputSearch\n                  className=\"\"\n                  placeholder=\"Search Skill\"\n                  onChange={this.handleChange}\n                />\n              </div>\n              <div className=\"col-md-4 col-sm-12\">\n                <NormalButton\n                  mainbg={true}\n                  className=\"col-12 fs-15 float-right\"\n                  label=\"Add Staff Skill\"\n                  onClick={() =>\n                    this.props.history.push(\"/admin/staffplus/skills/add\")\n                  }\n                />\n              </div>\n            </div>\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                {isLoading ? (\n                  <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                    <div class=\"spinner-border\" role=\"status\">\n                      <span class=\"sr-only\">Loading...</span>\n                    </div>\n                  </div>\n                ) : data.length == 0 ? (\n                  <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                    {t(\"No Data\")}\n                  </div>\n                ) : (\n                  <div className=\"table-container\">\n                    <TableWrapper\n                      className=\"tableFixHeads\"\n                      headerDetails={header}\n                    >\n                      {skillList\n                        ? skillList.map(({ item_no, item_desc }) => {\n                            return (\n                              <tr key={item_no}>\n                                <td>\n                                  <div className=\"d-flex align-items-center justify-content-center\">\n                                    {item_desc}\n                                  </div>\n                                </td>\n                                {data.map((key) => {\n                                  return (\n                                    <td>\n                                      <div className=\"d-flex align-items-center justify-content-center\">\n                                        <div className=\"d-flex align-items-center justify-content-center checkbox-container\">\n                                          <input\n                                            type=\"checkbox\"\n                                            disabled\n                                            checked={\n                                              key.skills.filter(\n                                                (e) => e.item_no == item_no\n                                              ).length > 0\n                                                ? true\n                                                : false\n                                            }\n                                          />\n                                          <span class=\"checkmark\"></span>\n                                        </div>\n                                      </div>\n                                    </td>\n                                  );\n                                })}\n                              </tr>\n                            );\n                          })\n                        : \"\"}\n                    </TableWrapper>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  jobtitleList: state.common.jobtitleList,\n  empSkillList: state.staffPlus.staffPlusSkillList,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      getCommonApi,\n      getJobtitle,\n      getSkillList,\n    },\n    dispatch\n  );\n};\n\nexport const StaffSkillList = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(StaffSkillListClass)\n);\n"]},"metadata":{},"sourceType":"module"}