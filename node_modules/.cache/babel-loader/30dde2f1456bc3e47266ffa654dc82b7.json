{"ast":null,"code":"import _defineProperty from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalSelect,NormalButton,NormalModal,NormalInput,NormalDateTime,NormalCheckbox,NormalTimePicker}from\"component/common\";import\"./style.scss\";import{updateForm,getSelectedTreatmentList}from\"redux/actions/appointment\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import SimpleReactValidator from\"simple-react-validator\";import closeIcon from\"assets/images/close.png\";import req_therapist from\"assets/images/app-icons/1.png\";import{getCommonApi,commonCreateApi,commonPatchApi}from\"redux/actions/common\";import{dateFormat}from\"service/helperFunctions\";import _ from\"lodash\";import{TableWrapper}from\"component/common\";import{TreatmentPackage}from\"./modal/index\";import{Toast}from\"service/toast\";import{MobileAppointmentForm}from\"./MobileAppointmentForm\";import{history}from\"helpers\";import{TreatmentHistory}from\"component/Admin/NewAppointment/NewListAppointment/modal/TreatmentHistory\";import{UpcomingAppointment}from\"component/Admin/NewAppointment/NewListAppointment/modal/UpcomingAppointment\";import{withTranslation}from\"react-i18next\";import{AiOutlinePlus,AiOutlineMinus}from\"react-icons/ai\";var getTime=function getTime(date){debugger;var now=new Date(date);var hour=now.getHours();var minute=now.getMinutes();var second=now.getSeconds();var ap=\"AM\";if(hour>11){ap=\"PM\";}if(hour>12){hour=hour-12;}if(hour==0){hour=12;}if(hour<10){hour=\"0\"+hour;}if(minute<10){minute=\"0\"+minute;}if(second<10){second=\"0\"+second;}var timeString=hour+\":\"+minute+\" \"+ap;return timeString;};export var MobileSelectTreatmentClass=/*#__PURE__*/function(_Component){_inherits(MobileSelectTreatmentClass,_Component);var _super=_createSuper(MobileSelectTreatmentClass);function MobileSelectTreatmentClass(props){var _this;_classCallCheck(this,MobileSelectTreatmentClass);_this=_super.call(this,props);_this.state={treatmentDetail:[],formFields:{appt_id:\"\",start_time:\"\",end_time:\"\",Item_Codeid:null,add_duration:\"\",emp_no:0,requesttherapist:false,Item_CodeName:\"\",edit_remark:\"\",recur_days:null,recur_qty:null,item_text:null,checktype:\"\",treat_parentcode:null},selectedList:[{appt_id:\"\",start_time:\"\",end_time:\"\",Item_Codeid:null,add_duration:\"\",emp_no:0,requesttherapist:false,Item_CodeName:\"\",edit_remark:\"\",recur_days:null,recur_qty:null,item_text:null,checktype:\"\",treat_parentcode:null}],outletOption:[],staffOption:[],roomOption:[],list:[],isOpenModal:false,categoryList:[],treatmentList:[],siteList:[],treatmentField:{category:\"\",treatment:\"\"},timeDropdown:[],duration:[],index:null,search:\"\",selectTreatmentId:\"\",treatmentListHeader:[{label:\"Category\",className:\"w-50\"},{label:\"Service\",className:\"w-75\"},{label:\"Duration\",className:\"w-25\"},{label:\"price\",className:\"w-50\",divClass:\"justify-content-end text-right\"}],meta:{},isTreatementModal:false,appointmentId:null,PackageIndex:0,selectedRec_days:null,selectedRec_qty:null,recurringList:[],recurringSelectedItems:[],recurringSelectAll:false,settingData:{},PasteAppointmentId:0,InitAppointmentStatus:\"\",isTreatmentHistoryModal:false,isUpcomingAppointmentModal:false,freeTextStockId:\"\",headerDetails:[{label:\"Start\",width:\"100px\"},{label:\"End\"},{label:\"Service\",width:\"260px\"},{label:\"Duration\"},{label:\"Treatment Staff\"},{label:\"therapist\",width:\"35px\"},{label:\"Recur Days\",width:\"100px\"},{label:\"Recur Qty\",width:\"100px\"},{label:\"Action\"}],activeRow:0,isLoginConfirmation:false,passwordVisible:false,dragusername:\"\",dragpassword:\"\"};_this.showErrorMessage=function(){_this.child.onFocus();};_this.getFreetextStockid=function(async){var _this$state=_this.state,treatmentField=_this$state.treatmentField,search=_this$state.search,selectTreatmentId=_this$state.selectTreatmentId;var page=1,limit=10;_this.props.getCommonApi(\"stocklist/?Item_Deptid=\".concat(selectTreatmentId,\"&search=\").concat(search,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(function(res){console.log(res,\"stocklistfreetextresponse\");var data=res.data,status=res.status;if(status===200){if(data&&data.stock_id&&data.stock_id!==\" \"){_this.setState({freeTextStockId:data.stock_id});}else{Toast({type:\"error\",message:\"Stock Id not found for free text item\"});}}});};_this.timeToDateFormat=function(TimeValue){var time=String(TimeValue).split(\":\");var newTime=new Date(new Date().setHours(time[0],time[1],0,0));return newTime;};_this.handleRenderApptDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(appt_id,copy){var _this$state2,selectedList,InitAppointmentStatus;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state2=_this.state,selectedList=_this$state2.selectedList,InitAppointmentStatus=_this$state2.InitAppointmentStatus;_this.props.getCommonApi(\"appointmentedit/\".concat(appt_id,\"/\")).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var status,data,_iterator,_step,treat,startTime,endTime,apptid;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=key.status,data=key.data;console.log(data,\"renderappointmentdetail\");if(!(status===200)){_context.next=12;break;}if(!data.treatment){_context.next=12;break;}InitAppointmentStatus=data.appointment.appt_status;selectedList=[];_context.next=8;return _this.setState({selectedList:selectedList,InitAppointmentStatus:InitAppointmentStatus});case 8:_this.props.updateForm(\"treatmentList\",selectedList);_iterator=_createForOfIteratorHelper(data.treatment);try{for(_iterator.s();!(_step=_iterator.n()).done;){treat=_step.value;startTime=\"\";endTime=\"\";apptid=null;if(copy){startTime=_this.timeToDateFormat(treat.start_time);endTime=treat.end_time;apptid=null;}else{startTime=_this.timeToDateFormat(treat.start_time);endTime=treat.end_time;apptid=treat.appt_id;}selectedList.push({start_time:startTime,end_time:endTime,emp_no:treat.emp_id,appt_id:apptid,Item_Codeid:treat.item_id,Item_CodeName:treat.item_name,add_duration:treat.add_duration,requesttherapist:treat.requesttherapist,recur_days:treat.recur_days,recur_qty:treat.recur_qty,item_text:treat.item_name,checktype:treat.checktype,treat_parentcode:treat.treat_parentcode});_this.setState({selectedList:selectedList});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.props.updateForm(\"treatmentList\",selectedList);case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x3){return _ref2.apply(this,arguments);};}());case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleItemSettings=function(){var settingData=_this.state.settingData;_this.props.getCommonApi(\"userlist/\").then(function(key){var status=key.status,data=key.data;console.log(key,\"settingsData appointmentCreate\");if(status===200){settingData=data;_this.setState({settingData:settingData});}});};_this.getStaffAvailability=function(){_this.props.getCommonApi(\"staffsavailable/?Appt_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"))).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     staffList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({list:data});}});};_this.handleSearch=function(event){event.persist();console.log(event.target.value,event.target,event,\"dfhdfjghkjfghj\");var treatmentField=_this.state.treatmentField;treatmentField[\"treatment\"]=event.target.value;_this.setState({search:event.target.value,treatmentField:treatmentField});if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;var data={search:searchString};// this.queryHandler(data)\n_this.search(data);},500);}_this.debouncedFn();};_this.search=function(data){var _data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit,_data$search=data.search,search=_data$search===void 0?\"\":_data$search;var selectTreatmentId=_this.state.selectTreatmentId;_this.props.getCommonApi(\"stocklist/?Item_Deptid=\".concat(selectTreatmentId,\"&search=\").concat(search,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(function(res){console.log(res,\"treatmentList treatment_parentcode\");if(res.status===200){_this.setState({treatmentList:res.data.dataList,meta:res.data.meta.pagination});}});};_this.handlePagination=function(page){_this.search(page);};_this.handleChangeTreatment=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _ref3$target,value,name,_this$state3,treatmentField,search,selectTreatmentId,page,limit;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;_this$state3=_this.state,treatmentField=_this$state3.treatmentField,search=_this$state3.search,selectTreatmentId=_this$state3.selectTreatmentId;console.log(\"uihwkjrwkej\",name,value);treatmentField[name]=value;if(name===\"category\"){selectTreatmentId=value;}else if(name===\"treatment\"){search=value;}_context3.next=7;return _this.setState({treatmentField:treatmentField,selectTreatmentId:selectTreatmentId,search:search});case 7:page=1,limit=10;_this.props.getCommonApi(\"stocklist/?Item_Deptid=\".concat(selectTreatmentId,\"&search=\").concat(search,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(function(res){console.log(res,\"stocklis\");if(res.status===200){_this.setState({treatmentList:res.data.dataList,meta:res.data.meta.pagination});}});case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref4.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref5,index){var _ref5$target,value,name,_this$state4,selectedList,appointmentId,freeTextStockId,endTime;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;_this$state4=_this.state,selectedList=_this$state4.selectedList,appointmentId=_this$state4.appointmentId,freeTextStockId=_this$state4.freeTextStockId;if(name===\"add_duration\"){//if (appointmentId) {\nselectedList[index][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[index][\"start_time\"]),value?value:\"00:00\");// } else {\n//   selectedList[index][\"end_time\"] = this.addTimes(\n//     selectedList[index][\"start_time\"],\n//     value ? value : \"00:00\"\n//   );\n// }\nselectedList[index][\"add_duration\"]=value;if(selectedList.length-1>index){endTime=\"\";//if (appointmentId) {\nendTime=_this.timeToDateFormat(selectedList[index][\"end_time\"]);// } else {\n//   endTime = selectedList[index][\"end_time\"];\n// }\nselectedList[index+1][\"start_time\"]=endTime;if(selectedList[index+1][\"add_duration\"]!==\"\"){selectedList[index+1][\"end_time\"]=_this.addTimes(selectedList[index][\"end_time\"],selectedList[index+1][\"add_duration\"]);}}}else if(name===\"Item_CodeName\"){selectedList[index][\"Item_Codeid\"]=freeTextStockId;selectedList[index][\"Item_CodeName\"]=value;selectedList[index][\"item_text\"]=value;selectedList[index][\"checktype\"]=\"freetext\";selectedList[index][\"treat_parentcode\"]=null;}else if(name===\"recur_days\"||name===\"recur_qty\"){if(value<=0||value===\"\"){selectedList[index][name]=null;}else{selectedList[index][name]=Number(value);}}else{selectedList[index][name]=value;}_context4.next=5;return _this.setState({selectedList:selectedList});case 5:_context4.next=7;return _this.props.updateForm(\"treatmentList\",selectedList);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}();_this.handleMultiSelect=function(data){var formFields=_this.state.formFields;var list=[];var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;list.push(key.value);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}formFields[\"emp_no\"]=list;_this.setState({formFields:formFields});console.log(formFields,\"oyokkjk\");};_this.handleDatePick=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref7,index){var _ref7$target,value,name,_this$state5,selectedList,appointmentId,time,duration,endTime;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_ref7$target=_ref7.target,value=_ref7$target.value,name=_ref7$target.name;_this$state5=_this.state,selectedList=_this$state5.selectedList,appointmentId=_this$state5.appointmentId;time=_this.getHoursFromDate(value);duration=\"\";if(selectedList[index][\"add_duration\"]!==\"\"){duration=selectedList[index][\"add_duration\"];}else{duration=\"00:00\";}selectedList[index][\"start_time\"]=value?value:_this.timeToDateFormat(selectedList[index][\"start_time\"]);if(time){selectedList[index][\"end_time\"]=_this.addTimes(time,duration);}if(selectedList.length-1>index){endTime=\"\";if(appointmentId){endTime=_this.timeToDateFormat(selectedList[index][\"end_time\"]);}else{endTime=selectedList[index][\"end_time\"];}selectedList[index+1][\"start_time\"]=endTime;if(selectedList[index+1][\"add_duration\"]!==\"\"){selectedList[index+1][\"end_time\"]=_this.addTimes(selectedList[index][\"end_time\"],selectedList[index+1][\"add_duration\"]);}}_context5.next=10;return _this.setState({selectedList:selectedList});case 10:_context5.next=12;return _this.props.updateForm(\"treatmentList\",selectedList);case 12:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x7,_x8){return _ref8.apply(this,arguments);};}();_this.getHoursFromDate=function(date){var hour=date.getHours();var minute=date.getMinutes();var hours=hour>9?hour:\"0\"+hour;var minutes=minute>9?minute:\"0\"+minute;return hours+\":\"+minutes;};_this.stafflistvalidation=function(appointmentTreatmentList){if(appointmentTreatmentList.length>0){var _iterator3=_createForOfIteratorHelper(appointmentTreatmentList),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var item=_step3.value;if(!item.emp_no||item.emp_no===\"\"||item.emp_no===null){Toast({type:\"error\",message:\"Please select Staff\"});return false;}else{return true;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}};_this.handleUpdate=function(){var _this$props=_this.props,appointmentCustomerDetail=_this$props.appointmentCustomerDetail,appointmentTreatmentList=_this$props.appointmentTreatmentList;var _this$state6=_this.state,appointmentId=_this$state6.appointmentId,InitAppointmentStatus=_this$state6.InitAppointmentStatus,dragusername=_this$state6.dragusername,dragpassword=_this$state6.dragpassword;var finalTreatment=[];var _iterator4=_createForOfIteratorHelper(appointmentTreatmentList),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var TreatmentList=_step4.value;finalTreatment.push({appt_id:TreatmentList.appt_id,start_time:_this.getHoursFromDate(TreatmentList.start_time),end_time:TreatmentList.end_time,add_duration:TreatmentList.add_duration,item_id:TreatmentList.Item_Codeid,item_text:TreatmentList.item_text,emp_id:TreatmentList.emp_no,requesttherapist:TreatmentList.requesttherapist,recur_qty:Number(\"\"),recur_days:\"\",checktype:TreatmentList.checktype,treat_parentcode:TreatmentList.treat_parentcode});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}console.log(finalTreatment,\"filteredupdateFunctionAppointmentData\");var orig_remark=\"\";var AppStatus=\"\";if(appointmentCustomerDetail.remark_setting){orig_remark=null;}else{orig_remark=appointmentCustomerDetail.new_remark;}if(String(InitAppointmentStatus).toUpperCase()===\"ARRIVED\"&&String(appointmentCustomerDetail.bookingStatus).toUpperCase()===\"ARRIVED\"){AppStatus=null;}else{AppStatus=appointmentCustomerDetail.bookingStatus;}if(appointmentCustomerDetail.customerName&&appointmentCustomerDetail.bookingStatus){if(_this.stafflistvalidation(appointmentTreatmentList)){try{var data={appointment:{appt_date:dateFormat(new Date(appointmentCustomerDetail.appointmentDate),\"yyyy-mm-dd\"),appt_status:AppStatus,channel_id:Number(appointmentCustomerDetail.Appt_typeid),ori_remark:orig_remark,edit_remark:appointmentCustomerDetail.edit_remark,source_id:Number(appointmentCustomerDetail.Source_Codeid),Room_Codeid:Number(appointmentCustomerDetail.Room_Codeid),sec_status:appointmentCustomerDetail.sec_status,remark_setting:appointmentCustomerDetail.remark_setting,cart_create:appointmentCustomerDetail.cart_create,username:dragusername,password:dragpassword},treatment:finalTreatment};_this.props.commonPatchApi(\"appointmentedit/\".concat(appointmentId,\"/\"),data).then(/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(res){var formFields;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(res,\"cart check while update booking\");if(!(res.status===200)){_context6.next=6;break;}_this.handleCloseDialog();_this.handleSaveorUpdate();_context6.next=14;break;case 6:if(!(res.status===201)){_context6.next=14;break;}formFields={custId:0,custName:\"\",cust_refer:\"\"};formFields[\"custId\"]=appointmentCustomerDetail.customerName;formFields[\"custName\"]=appointmentCustomerDetail.custName;formFields[\"cust_refer\"]=appointmentCustomerDetail.cust_refer;_context6.next=13;return _this.props.updateForm(\"basicApptDetail\",formFields);case 13:_this.props.getCommonApi(\"itemcart/Check/?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(appointmentCustomerDetail.customerName)).then(function(res){history.push(\"/admin/cart\");});case 14:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x9){return _ref9.apply(this,arguments);};}());}catch(e){console.log(\"updateappointmentcatch\",e);}}}else{_this.showErrorMessage();}};_this.handleRecurringUpdate=function(){var _this$props2=_this.props,appointmentCustomerDetail=_this$props2.appointmentCustomerDetail,appointmentTreatmentList=_this$props2.appointmentTreatmentList;var _this$state7=_this.state,appointmentId=_this$state7.appointmentId,selectedRec_days=_this$state7.selectedRec_days,selectedRec_qty=_this$state7.selectedRec_qty,recurringList=_this$state7.recurringList,recurringSelectAll=_this$state7.recurringSelectAll;var finalRecurring=[];var _iterator5=_createForOfIteratorHelper(recurringList),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var recurringItem=_step5.value;if(recurringItem.selected){var value=recurringItem.id;finalRecurring.push(value);}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}console.log(finalRecurring,\"finalrecurringList\");if(appointmentCustomerDetail.customerName&&appointmentCustomerDetail.bookingStatus){if(_this.stafflistvalidation(appointmentTreatmentList)){var data={appt_date:dateFormat(new Date(appointmentCustomerDetail.appointmentDate),\"yyyy-mm-dd\"),Room_Codeid:appointmentCustomerDetail.Room_Codeid,appt_status:appointmentCustomerDetail.bookingStatus,sec_status:appointmentCustomerDetail.sec_status,edit_remark:appointmentCustomerDetail.edit_remark,start_time:_this.getHoursFromDate(appointmentTreatmentList[0].start_time),end_time:appointmentTreatmentList[0].end_time,item_id:appointmentTreatmentList[0].Item_Codeid,add_duration:appointmentTreatmentList[0].add_duration,emp_id:appointmentTreatmentList[0].emp_no,requesttherapist:appointmentTreatmentList[0].requesttherapist,item_text:appointmentTreatmentList[0].item_text,recur_days:selectedRec_days===appointmentTreatmentList[0].recur_days||appointmentTreatmentList[0].recur_days===\"\"||appointmentTreatmentList[0].recur_days<=0?null:appointmentTreatmentList[0].recur_days,recur_qty:Number(selectedRec_qty)===Number(appointmentTreatmentList[0].recur_qty)||Number(appointmentTreatmentList[0].recur_qty)===\"\"||Number(appointmentTreatmentList[0].recur_qty)<=0?null:Number(appointmentTreatmentList[0].recur_qty),recur_ids:finalRecurring};console.log(data,\"UpdatedappointmentTreatmentListWhenupdate\");if(recurringSelectAll){_this.props.commonPatchApi(\"appointmentrecur/\".concat(appointmentId,\"/?type=\",\"all\",\" \"),data).then(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(res){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(res.status===200){_this.handleCloseDialog();_this.handleSaveorUpdate();}case 1:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x10){return _ref10.apply(this,arguments);};}());}else{_this.props.commonPatchApi(\"appointmentrecur/\".concat(appointmentId,\"/\"),data).then(/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(res){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(res,\"type all clicked result\");if(res.status===200){_this.handleCloseDialog();_this.handleSaveorUpdate();}case 2:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x11){return _ref11.apply(this,arguments);};}());}}}else{_this.showErrorMessage();}};_this.handleSubmit=function(){// this.props.handleConfirmBooking()\nvar _this$props3=_this.props,appointmentCustomerDetail=_this$props3.appointmentCustomerDetail,appointmentTreatmentList=_this$props3.appointmentTreatmentList;var _this$state8=_this.state,dragpassword=_this$state8.dragpassword,dragusername=_this$state8.dragusername;console.log(appointmentCustomerDetail,\"appointmentcustomerdetailwhenSave\");console.log(appointmentTreatmentList,\"savedappointmentTreatmentListWhenSave\");var finalTreatment=[];var _iterator6=_createForOfIteratorHelper(appointmentTreatmentList),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var TreatmentList=_step6.value;finalTreatment.push({appt_id:TreatmentList.appt_id,start_time:_this.getHoursFromDate(TreatmentList.start_time),end_time:TreatmentList.end_time,add_duration:TreatmentList.add_duration,Item_Codeid:TreatmentList.Item_Codeid,item_text:TreatmentList.item_text,emp_no:TreatmentList.emp_no,requesttherapist:TreatmentList.requesttherapist,recur_qty:TreatmentList.recur_qty,recur_days:TreatmentList.recur_days,checktype:TreatmentList.checktype,treat_parentcode:TreatmentList.treat_parentcode});}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}if(appointmentCustomerDetail.customerName&&appointmentCustomerDetail.bookingStatus){if(_this.stafflistvalidation(appointmentTreatmentList)){var data={Appointment:{appt_date:dateFormat(new Date(appointmentCustomerDetail.appointmentDate),\"yyyy-mm-dd\"),Appt_typeid:appointmentCustomerDetail.Appt_typeid,cust_noid:appointmentCustomerDetail.customerName,new_remark:appointmentCustomerDetail.new_remark,// emp_noid: appointmentCustomerDetail.emp_id,\nSource_Codeid:appointmentCustomerDetail.Source_Codeid,Room_Codeid:appointmentCustomerDetail.Room_Codeid,appt_status:appointmentCustomerDetail.bookingStatus,sec_status:appointmentCustomerDetail.sec_status,ItemSite_Codeid:appointmentCustomerDetail.ItemSite_Codeid,walkin:appointmentCustomerDetail.walkin,username:dragusername,password:dragpassword},Treatment:finalTreatment};_this.props.commonCreateApi(\"appointment/\",data).then(/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(res){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(res.status===201){_this.handleCloseDialog();_this.handleSaveorUpdate();}case 1:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x12){return _ref12.apply(this,arguments);};}());}}else{_this.showErrorMessage();}};_this.getDateTime=function(data){var date=new Date(data);date=String(date).split(\" \");var date1=date[2]+\"th \"+date[1]+\", \"+date[3];var time=date[4].split(\":\");var time1=String(Number(time[0])>12?Number(time[0])-12:time[0])+\":\"+time[1]+(Number(time[0])>12?\"PM\":\"AM\");return time1+\", \"+date1;};_this.handleDialog=function(){_this.setState({isOpenModal:false,index:null});};_this.handleMultipleCustomer=function(){_this.setState({isOpenModal:false});};_this.handleSelectPackage=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(data){var _this$state9,selectedList,PackageIndex,appointmentId,listCount,treatment;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:debugger;_this$state9=_this.state,selectedList=_this$state9.selectedList,PackageIndex=_this$state9.PackageIndex,appointmentId=_this$state9.appointmentId;if(!(PackageIndex===0&&selectedList[0][\"Item_CodeName\"]===\"\")){_context10.next=17;break;}selectedList[0][\"start_time\"]=selectedList[0][\"start_time\"];// if (appointmentId) {\nselectedList[0][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[0][\"start_time\"]),data.add_duration?data.add_duration:\"00:00\");// } else {\n//   selectedList[0][\"end_time\"] = this.addTimes(\n//     selectedList[0][\"start_time\"],\n//     data.add_duration ? data.add_duration : \"00:00\"\n//   );\n// }\nselectedList[0][\"Item_Codeid\"]=data.id;selectedList[0][\"Item_CodeName\"]=data.item_desc;selectedList[0][\"item_text\"]=null;selectedList[0][\"add_duration\"]=data.add_duration;selectedList[0][\"checktype\"]=\"package\";selectedList[0][\"treat_parentcode\"]=data.treatment_parentcode;_context10.next=13;return _this.setState({selectedList:selectedList,PackageIndex:PackageIndex+1});case 13:_context10.next=15;return _this.props.updateForm(\"treatmentList\",selectedList);case 15:_context10.next=61;break;case 17:if(!(selectedList[selectedList.length-1][\"Item_CodeName\"]===\"\")){_context10.next=32;break;}selectedList[selectedList.length-1][\"start_time\"]=selectedList[selectedList.length-1][\"start_time\"];// if (appointmentId) {\nselectedList[selectedList.length-1][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[selectedList.length-1][\"start_time\"]),data.add_duration?data.add_duration:\"00:00\");// } else {\n//   selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\n//     selectedList[selectedList.length - 1][\"start_time\"],\n//     data.add_duration ? data.add_duration : \"00:00\"\n//   );\n// }\nselectedList[selectedList.length-1][\"Item_Codeid\"]=data.id;selectedList[selectedList.length-1][\"Item_CodeName\"]=data.item_desc;selectedList[selectedList.length-1][\"item_text\"]=null;selectedList[selectedList.length-1][\"add_duration\"]=data.add_duration;selectedList[selectedList.length-1][\"checktype\"]=\"package\";selectedList[selectedList.length-1][\"treat_parentcode\"]=data.treatment_parentcode;_context10.next=28;return _this.setState({selectedList:selectedList,PackageIndex:PackageIndex+1});case 28:_context10.next=30;return _this.props.updateForm(\"treatmentList\",selectedList);case 30:_context10.next=61;break;case 32:if(!(selectedList[selectedList.length-1][\"Item_CodeName\"]!==\"\"&&appointmentId)){_context10.next=47;break;}selectedList[selectedList.length-1][\"start_time\"]=selectedList[selectedList.length-1][\"start_time\"];// if (appointmentId) {\nselectedList[selectedList.length-1][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[selectedList.length-1][\"start_time\"]),data.add_duration?data.add_duration:\"00:00\");// } else {\n//   selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\n//     selectedList[selectedList.length - 1][\"start_time\"],\n//     data.add_duration ? data.add_duration : \"00:00\"\n//   );\n// }\nselectedList[selectedList.length-1][\"Item_Codeid\"]=data.id;selectedList[selectedList.length-1][\"Item_CodeName\"]=data.item_desc;selectedList[selectedList.length-1][\"item_text\"]=null;selectedList[selectedList.length-1][\"add_duration\"]=data.add_duration;selectedList[selectedList.length-1][\"checktype\"]=\"package\";selectedList[selectedList.length-1][\"treat_parentcode\"]=data.treatment_parentcode;_context10.next=43;return _this.setState({selectedList:selectedList,PackageIndex:PackageIndex+1});case 43:_context10.next=45;return _this.props.updateForm(\"treatmentList\",selectedList);case 45:_context10.next=61;break;case 47:listCount=selectedList.length-1;treatment={};// if (appointmentId) {\ntreatment[\"start_time\"]=_this.timeToDateFormat(selectedList[listCount][\"end_time\"]);// } else {\n//   treatment[\"start_time\"] = selectedList[listCount][\"end_time\"];\n// }\ntreatment[\"Item_Codeid\"]=data.id;treatment[\"Item_CodeName\"]=data.item_desc;treatment[\"item_text\"]=null;treatment[\"add_duration\"]=data.add_duration;treatment[\"checktype\"]=\"package\";treatment[\"treat_parentcode\"]=data.treatment_parentcode;selectedList.push(treatment);_context10.next=59;return _this.setState({selectedList:selectedList});case 59:_context10.next=61;return _this.props.updateForm(\"treatmentList\",selectedList);case 61:_this.setState({isOpenModal:false});case 62:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x13){return _ref13.apply(this,arguments);};}();_this.handleSelectTreatment=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(data){var _this$state10,selectedList,index,appointmentId,endTime;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_this$state10=_this.state,selectedList=_this$state10.selectedList,index=_this$state10.index,appointmentId=_this$state10.appointmentId;if(!(index==0&&selectedList.length==1)){_context11.next=15;break;}selectedList[0][\"start_time\"]=selectedList[0][\"start_time\"];// if (appointmentId) {\nselectedList[0][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[0][\"start_time\"]),data.add_duration?data.add_duration:\"00:00\");// } else {\n//   selectedList[0][\"end_time\"] = this.addTimes(\n//     selectedList[0][\"start_time\"],\n//     data.add_duration ? data.add_duration : \"00:00\"\n//   );\n// }\nselectedList[0][\"Item_Codeid\"]=data.id;selectedList[0][\"Item_CodeName\"]=data.item_desc;selectedList[0][\"add_duration\"]=data.add_duration;selectedList[0][\"checktype\"]=\"service\";selectedList[0][\"treat_parentcode\"]=null;_context11.next=11;return _this.setState({selectedList:selectedList});case 11:_context11.next=13;return _this.props.updateForm(\"treatmentList\",selectedList);case 13:_context11.next=29;break;case 15:selectedList[index][\"start_time\"]=selectedList[index][\"start_time\"];// if (appointmentId) {\nselectedList[index][\"end_time\"]=_this.addTimes(_this.getHoursFromDate(selectedList[index][\"start_time\"]),data.add_duration?data.add_duration:\"00:00\");// } else {\n//   selectedList[index][\"end_time\"] = this.addTimes(\n//     selectedList[index][\"start_time\"],\n//     data.add_duration ? data.add_duration : \"00:00\"\n//   );\n// }\nselectedList[index][\"Item_Codeid\"]=data.id;selectedList[index][\"Item_CodeName\"]=data.item_desc;selectedList[index][\"add_duration\"]=data.add_duration;selectedList[index][\"checktype\"]=\"service\";selectedList[index][\"treat_parentcode\"]=null;endTime=\"\";//if (appointmentId) {\nendTime=_this.timeToDateFormat(selectedList[index][\"end_time\"]);// } else {\n//   endTime = selectedList[index][\"end_time\"];\n// }\nif(selectedList.length-1>index){selectedList[index+1][\"start_time\"]=endTime;if(selectedList[index+1][\"add_duration\"]!==\"\"){selectedList[index+1][\"end_time\"]=_this.addTimes(selectedList[index][\"end_time\"],selectedList[index+1][\"add_duration\"]);}}_context11.next=27;return _this.setState({selectedList:selectedList});case 27:_context11.next=29;return _this.props.updateForm(\"treatmentList\",selectedList);case 29:_this.setState({isOpenModal:false});case 30:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x14){return _ref14.apply(this,arguments);};}();_this.timeToMins=function(time){var b=time.split(\":\");return b[0]*60+ +b[1];};_this.timeFromMins=function(mins){function z(n){return(n<10?\"0\":\"\")+n;}var h=(mins/60|0)%24;var m=mins%60;return z(h)+\":\"+z(m);};_this.addTimes=function(t0,t1){return _this.timeFromMins(_this.timeToMins(t0)+_this.timeToMins(t1));};_this.handleAddtreatment=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(index){var _this$state11,selectedList,formFields,appointmentId,start;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_this$state11=_this.state,selectedList=_this$state11.selectedList,formFields=_this$state11.formFields,appointmentId=_this$state11.appointmentId;if(!selectedList[index][\"end_time\"]){_context12.next=12;break;}start=\"\";//if (appointmentId) {\nstart=_this.timeToDateFormat(selectedList[selectedList.length-1].end_time);// } else {\n//   start = selectedList[selectedList.length - 1].end_time;\n// }\nformFields={appt_id:null,start_time:start,end_time:\"\",Item_Codeid:_this.state.freeTextStockId,add_duration:\"\",emp_no:0,requesttherapist:false,recur_days:null,recur_qty:null,item_text:null,checktype:\"\",treat_parentcode:null};selectedList.push({appt_id:null,start_time:start,end_time:\"\",Item_Codeid:_this.state.freeTextStockId,Item_CodeName:\"\",add_duration:\"\",emp_no:0,requesttherapist:false,recur_days:null,recur_qty:null,item_text:null,checktype:\"\",treat_parentcode:null});_context12.next=8;return _this.setState({selectedList:selectedList,formFields:formFields});case 8:_context12.next=10;return _this.props.updateForm(\"treatmentList\",selectedList);case 10:_context12.next=13;break;case 12:Toast({type:\"error\",message:\"End time shouldn't be empty\"});case 13:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x15){return _ref15.apply(this,arguments);};}();_this.deleteTreatment=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(index){var selectedList;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:selectedList=_this.state.selectedList;selectedList.splice(index,1);_this.setState({selectedList:selectedList});_context13.next=5;return _this.props.updateForm(\"treatmentList\",selectedList);case 5:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x16){return _ref16.apply(this,arguments);};}();_this.handleTreatementmodal=function(){var appointmentCustomerDetail=_this.props.appointmentCustomerDetail;var customerId=appointmentCustomerDetail.customerName;if(customerId>0){_this.setState(function(prevState){return{isTreatementModal:!prevState.isTreatementModal};});}else{Toast({type:\"error\",message:\"Please select customer\"});}};_this.handleCheckbox=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(_ref17,index){var _ref17$target,value,name,treatmentList,selectedList;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_ref17$target=_ref17.target,value=_ref17$target.value,name=_ref17$target.name;treatmentList=_this.state.treatmentList;selectedList=_this.state.selectedList;selectedList[index][\"requesttherapist\"]=value;_context14.next=6;return _this.setState({selectedList:selectedList});case 6:_context14.next=8;return _this.props.updateForm(\"treatmentList\",selectedList);case 8:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x17,_x18){return _ref18.apply(this,arguments);};}();_this.handleCloseDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_this.props.handleCloseDialog();case 1:case\"end\":return _context15.stop();}}},_callee15);}));_this.handleSaveorUpdate=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_this.props.handleSaveorUpdate();case 1:case\"end\":return _context16.stop();}}},_callee16);}));_this.handleRecurringlistCheckbox=/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(_ref21,item){var _ref21$target,value,name,recurringList,listCheckbox,Checkbox;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_ref21$target=_ref21.target,value=_ref21$target.value,name=_ref21$target.name;recurringList=_this.state.recurringList;listCheckbox=recurringList.find(function(acc){return acc.id===item.id;});if(!listCheckbox){_context17.next=7;break;}listCheckbox[\"selected\"]=value;_context17.next=7;return _this.setState(_objectSpread(_objectSpread({},_this.state.recurringList),{},{listCheckbox:listCheckbox}));case 7:Checkbox=recurringList.filter(function(acc){return acc.selected===true;}).length;if(!(Checkbox==_this.state.recurringList.length)){_context17.next=13;break;}_context17.next=11;return _this.setState({recurringSelectAll:true});case 11:_context17.next=15;break;case 13:_context17.next=15;return _this.setState({recurringSelectAll:false});case 15:case\"end\":return _context17.stop();}}},_callee17);}));return function(_x19,_x20){return _ref22.apply(this,arguments);};}();_this.handleRecurringSelectAllCheckbox=/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(_ref23){var _ref23$target,value,name,recurringList,_iterator7,_step7,item;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_ref23$target=_ref23.target,value=_ref23$target.value,name=_ref23$target.name;recurringList=_this.state.recurringList;_context18.next=4;return _this.setState({recurringSelectAll:value});case 4:_iterator7=_createForOfIteratorHelper(recurringList);_context18.prev=5;_iterator7.s();case 7:if((_step7=_iterator7.n()).done){_context18.next=14;break;}item=_step7.value;item[\"selected\"]=value;_context18.next=12;return _this.setState(_objectSpread(_objectSpread({},_this.state.recurringList),{},{item:item}));case 12:_context18.next=7;break;case 14:_context18.next=19;break;case 16:_context18.prev=16;_context18.t0=_context18[\"catch\"](5);_iterator7.e(_context18.t0);case 19:_context18.prev=19;_iterator7.f();return _context18.finish(19);case 22:case\"end\":return _context18.stop();}}},_callee18,null,[[5,16,19,22]]);}));return function(_x21){return _ref24.apply(this,arguments);};}();_this.handleCopyAppointment=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(){var appointmentId,formFields;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:appointmentId=_this.state.appointmentId;formFields={};formFields[\"appointmentId\"]=appointmentId;_context19.next=5;return _this.props.updateForm(\"AppointmentCopy\",formFields);case 5:console.log(_this.props.AppointmentCopy,\"after copy click appointment copy id\");Toast({type:\"success\",message:\"Appointment copied\"});case 7:case\"end\":return _context19.stop();}}},_callee19);}));_this.handlePasteAppointment=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var AppointmentCopy;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:AppointmentCopy=_this.props.AppointmentCopy;if(AppointmentCopy){_this.setState({PasteAppointmentId:AppointmentCopy.appointmentId,selectedList:[]});_this.handleRenderApptDetail(AppointmentCopy.appointmentId,true);}case 2:case\"end\":return _context20.stop();}}},_callee20);}));_this.handleGotoCart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var appointmentCustomerDetail,formFields;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:appointmentCustomerDetail=_this.props.appointmentCustomerDetail;formFields={custId:0,custName:\"\"};formFields[\"custId\"]=appointmentCustomerDetail.customerName;formFields[\"custName\"]=appointmentCustomerDetail.custName;formFields[\"cust_refer\"]=appointmentCustomerDetail.cust_refer;_context21.next=7;return _this.props.updateForm(\"basicApptDetail\",formFields);case 7:history.push(\"/admin/cart\");case 8:case\"end\":return _context21.stop();}}},_callee21);}));_this.handleUpcomingAppointment=function(){var appointmentCustomerDetail=_this.props.appointmentCustomerDetail;var customerId=appointmentCustomerDetail.customerName;if(customerId>0){_this.setState(function(prevState){return{isUpcomingAppointmentModal:!prevState.isUpcomingAppointmentModal};});}else{Toast({type:\"error\",message:\"Please select customer\"});}};_this.handleTreatmentHistory=function(){var appointmentCustomerDetail=_this.props.appointmentCustomerDetail;var customerId=appointmentCustomerDetail.customerName;if(customerId>0){_this.setState(function(prevState){return{isTreatmentHistoryModal:!prevState.isTreatmentHistoryModal};});}else{Toast({type:\"error\",message:\"Please select customer\"});}};_this.handleAccordion=/*#__PURE__*/function(){var _ref28=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(index){var activeRow;return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:activeRow=_this.state.activeRow;if(!(index===activeRow)){_context22.next=6;break;}_context22.next=4;return _this.setState({activeRow:\"\"});case 4:_context22.next=8;break;case 6:_context22.next=8;return _this.setState({activeRow:index});case 8:case\"end\":return _context22.stop();}}},_callee22);}));return function(_x22){return _ref28.apply(this,arguments);};}();_this.handleLoginPopupCheck=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(){var settingData,isLoginConfirmation;return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:settingData=_this.state.settingData;if(!settingData.appt_pw){_context23.next=8;break;}isLoginConfirmation=_this.state.isLoginConfirmation;isLoginConfirmation=true;_context23.next=6;return _this.setState({isLoginConfirmation:isLoginConfirmation});case 6:_context23.next=9;break;case 8:_this.handleLoginSubmit();case 9:case\"end\":return _context23.stop();}}},_callee23);}));_this.handleLoginConfirmationDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){var isLoginConfirmation;return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:isLoginConfirmation=_this.state.isLoginConfirmation;isLoginConfirmation=false;_context24.next=4;return _this.setState({isLoginConfirmation:isLoginConfirmation,dragusername:\"\",dragpassword:\"\"});case 4:case\"end\":return _context24.stop();}}},_callee24);}));_this.handleInputChange=/*#__PURE__*/function(){var _ref31=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(event){return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_context25.next=2;return _this.setState(_defineProperty({},event.target.name,event.target.value));case 2:case\"end\":return _context25.stop();}}},_callee25);}));return function(_x23){return _ref31.apply(this,arguments);};}();_this.handleLoginSubmit=function(){var appointmentId=_this.state.appointmentId;if(appointmentId){_this.handleUpdate();}else{_this.handleSubmit();}};_this.toggle=function(key){_this.setState(function(prevState){return _defineProperty({},key,!prevState[key]);});};_this.child=React.createRef();return _this;}_createClass(MobileSelectTreatmentClass,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.search({});this.handleItemSettings();var _this$state12=this.state,categoryList=_this$state12.categoryList,staffOption=_this$state12.staffOption,selectedList=_this$state12.selectedList,formFields=_this$state12.formFields,duration=_this$state12.duration;var _this$props4=this.props,basicApptDetail=_this$props4.basicApptDetail,AppointmentCopy=_this$props4.AppointmentCopy;console.log(AppointmentCopy,\"Basic app detail data\");if(basicApptDetail.appt_id){this.setState({appointmentId:basicApptDetail.appt_id});this.handleRenderApptDetail(basicApptDetail.appt_id,false);}else{var _selectedList=this.state.selectedList;_selectedList[0][\"start_time\"]=basicApptDetail?this.timeToDateFormat(basicApptDetail.time):\"\";_selectedList[0][\"emp_no\"]=basicApptDetail?basicApptDetail.staff_id:0;this.setState({selectedList:_selectedList});this.props.updateForm(\"treatmentList\",_selectedList);}this.props.getCommonApi(\"itemdept/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator8=_createForOfIteratorHelper(data),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var value=_step8.value;categoryList.push({value:value.id,label:value.itm_desc});}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}_this2.setState({categoryList:categoryList});}});this.props.getCommonApi(\"appointment/Staffs/?Outlet=\".concat(basicApptDetail.branchId,\"&date=\").concat(dateFormat(new Date()))).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator9=_createForOfIteratorHelper(data),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var value=_step9.value;staffOption.push({value:value.id,label:value.emp_name});}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}_this2.setState({staffOption:staffOption});}});this.props.getCommonApi(\"treatment/Duration/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator10=_createForOfIteratorHelper(data),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var value=_step10.value;duration.push({value:value,label:value});}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}_this2.setState({duration:duration});}});this.getStaffAvailability();this.getFreetextStockid();}},{key:\"componentWillMount\",value:function componentWillMount(){this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:this});}},{key:\"render\",value:function render(){var _this3=this;var _this$state13=this.state,outletOption=_this$state13.outletOption,staffOption=_this$state13.staffOption,roomOption=_this$state13.roomOption,selectedList=_this$state13.selectedList,siteList=_this$state13.siteList,list=_this$state13.list,formFields=_this$state13.formFields,timeDropdown=_this$state13.timeDropdown,duration=_this$state13.duration,isOpenModal=_this$state13.isOpenModal,treatmentField=_this$state13.treatmentField,_this$state13$treatme=_this$state13.treatmentList,treatmentList=_this$state13$treatme===void 0?[]:_this$state13$treatme,categoryList=_this$state13.categoryList,treatmentListHeader=_this$state13.treatmentListHeader,meta=_this$state13.meta,isTreatementModal=_this$state13.isTreatementModal,appointmentId=_this$state13.appointmentId,selectedRec_days=_this$state13.selectedRec_days,selectedRec_qty=_this$state13.selectedRec_qty,recurringList=_this$state13.recurringList,recurringSelectAll=_this$state13.recurringSelectAll,settingData=_this$state13.settingData,PasteAppointmentId=_this$state13.PasteAppointmentId,isTreatmentHistoryModal=_this$state13.isTreatmentHistoryModal,isUpcomingAppointmentModal=_this$state13.isUpcomingAppointmentModal,AppointmentListHeader=_this$state13.AppointmentListHeader,headerDetails=_this$state13.headerDetails,activeRow=_this$state13.activeRow,isLoginConfirmation=_this$state13.isLoginConfirmation,passwordVisible=_this$state13.passwordVisible,dragusername=_this$state13.dragusername,dragpassword=_this$state13.dragpassword;var _this$props5=this.props,customerDetail=_this$props5.customerDetail,selectedTreatmentList=_this$props5.selectedTreatmentList,customerId=_this$props5.customerId,t=_this$props5.t,tokenDetail=_this$props5.tokenDetail;var outlet=customerDetail.outlet,staff=customerDetail.staff,rooms=customerDetail.rooms;return/*#__PURE__*/React.createElement(React.Fragment,null,PasteAppointmentId<=0?/*#__PURE__*/React.createElement(MobileAppointmentForm,{onRef:function onRef(ref){return _this3.child=ref;},selectedCustomer:this.props.selectedCustomer,PasteAppointmentId:PasteAppointmentId}):null,PasteAppointmentId>0?/*#__PURE__*/React.createElement(MobileAppointmentForm,{onRef:function onRef(ref){return _this3.child=ref;},selectedCustomer:this.props.selectedCustomer,PasteAppointmentId:PasteAppointmentId}):null,selectedList.length==0?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},t(\"No Data\")):/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100\"},selectedList.length===selectedList.length-1+1?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,label:\"Add New\",onClick:function onClick(){return _this3.handleAddtreatment(selectedList.length-1);}})):null,selectedList.length>0?selectedList.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3 rounded border \".concat(activeRow===index?\"border-primary\":\"\"),key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex bg-light\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h6 fw-500 col-7 col-md-9 text-left text-dark \"},index+1,\". \",item.Item_CodeName?item.Item_CodeName:\"Please Choose item\"),/*#__PURE__*/React.createElement(\"div\",{className:\"h6 col-2 col-md-1 text-center fw-700 align-items-center\"},appointmentId&&item.appt_id||selectedList.length<=1?null:/*#__PURE__*/React.createElement(\"div\",{className:\"cursor-pointer fs-15 p-1 border border-light\",onClick:function onClick(){return _this3.deleteTreatment(index);},tooltip:\"delete\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-delete\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"h6 col-2 col-md-1 text-center fw-700 align-items-center\",onClick:function onClick(){return _this3.handleAccordion(index);}},activeRow===index?/*#__PURE__*/React.createElement(\"div\",{className:\"cursor-pointer fs-15 p-1 border border-light\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlineMinus,null))):/*#__PURE__*/React.createElement(\"div\",{className:\"cursor-pointer fs-15 p-1 border border-light\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlinePlus,null))))),activeRow===index?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Start Time\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalTimePicker,{onChange:function onChange(e){return _this3.handleDatePick(e,index);},name:\"start_time\",timeOnly:true,dateFormat:\"HH:mm\",showTime:true,selected:false,placeholder:\"\",timeIntervals:5,value:item.start_time,showIcon:false}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"End Time\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"text\",name:\"end_time\",value:item.end_time,onChange:function onChange(){},disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Item\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},settingData&&settingData.service_sel&&settingData.service_text?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onDoubleClick:function onDoubleClick(){return _this3.setState({isOpenModal:true,index:index});},onChange:function onChange(e){return _this3.handleChange(e,index);}}):null,settingData&&settingData.service_sel&&!settingData.service_text?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onDoubleClick:function onDoubleClick(){return _this3.setState({isOpenModal:true,index:index});},onChange:function onChange(){}}):null,settingData&&!settingData.service_sel&&settingData.service_text?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onClick:function onClick(){},onChange:function onChange(e){return _this3.handleChange(e,index);}}):null,settingData&&!settingData.service_sel&&!settingData.service_text?/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"service\"// options={siteList}\n,value:item.Item_CodeName,name:\"Item_CodeName\",onClick:function onClick(){},onChange:function onChange(){}}):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Duration\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:duration,value:item.add_duration,name:\"add_duration\",onChange:function onChange(e){return _this3.handleChange(e,index);},className:\"p-0\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Staff\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:staffOption,value:item.emp_no,name:\"emp_no\",onChange:function onChange(e){return _this3.handleChange(e,index);},className:\"p-0\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Req. Therapist\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},item.requesttherapist?/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleCheckbox(e,index);},value:item.requesttherapist,name:\"requesttherapist\",checked:true}):/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleCheckbox(e,index);},value:item.requesttherapist,name:\"requesttherapist\",checked:false}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Recur Days\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"recur_days\",value:item.recur_days?item.recur_days:\"\",onChange:function onChange(e){return _this3.handleChange(e,index);},disabled:appointmentId?true:false}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},t(\"Recur Qty\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",name:\"recur_qty\",value:item.recur_qty?item.recur_qty:\"\",onChange:function onChange(e){return _this3.handleChange(e,index);},disabled:appointmentId?true:false})))):\"\");}):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex text-center w-100\"},t(\"No Data\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"appointment-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"appointment\"},/*#__PURE__*/React.createElement(\"div\",{className:\"appointment-holder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-section p-0\"},recurringList&&recurringList.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Recurring Related Appointments\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row selected selected-header mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(NormalCheckbox,{label:\"All\",onChange:function onChange(e){return _this3.handleRecurringSelectAllCheckbox(e);},value:recurringSelectAll,name:\"recurringSelectAll\",checked:recurringSelectAll})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},t(\"Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},t(\"Start\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},t(\"End\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 p-0 header-detail\"},t(\"Service\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 header-detail\"},t(\"Duration\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},t(\"Treatment staff\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"img\",{src:req_therapist,alt:\"\",height:\"25\",width:\"25\"}))),recurringList&&recurringList.length>0?recurringList.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row selected  mb-4\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleRecurringlistCheckbox(e,item);},value:item.selected,name:\"recurringItem\",checked:item.selected})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},item.date),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},item.start_time),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0\"},item.end_time),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 p-0 header-detail\"},item.item_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 header-detail\"},item.add_duration),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 p-0\"},item.emp_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 p-0 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this3.handleRecurringlistCheckbox(e,item);},value:item.requesttherapist,name:\"requesttherapist\",checked:item.requesttherapist,disabled:true})));}):/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 text-center w-100\"},t(\"No Data\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",resetbg:true,className:\"col-12\",label:\"Cancel\",onClick:this.handleCloseDialog})),/*#__PURE__*/React.createElement(\"div\",null,appointmentId?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"submit-btn\",mainbg:false,className:\"col-12 submit-btn ml-4\",label:\"Update Recurring\",onClick:this.handleRecurringUpdate}):null))))):null)))),/*#__PURE__*/React.createElement(NormalModal,{className:\"multiple-appointment select-category\",style:{minWidth:\"60%\"},modal:isOpenModal,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pl-0 mb-3 fw-500 py-2\"},/*#__PURE__*/React.createElement(\"h5\",null,t(\"Select Treatment\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},t(\"Category\"),/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:categoryList,value:treatmentField.category,name:\"category\",onChange:this.handleChangeTreatment,className:\"customer-name p-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},t(\"Service\"),/*#__PURE__*/React.createElement(\"input\",{// placeholder=\"Enter here\"\n// options={siteList}\nvalue:treatmentField.treatment,name:\"treatment\",onChange:this.handleSearch,className:\"search px-3 p-0\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-container table-responsive mt-3\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:treatmentListHeader,queryHandler:this.handlePagination,pageMeta:meta},treatmentList.length>0?treatmentList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\",onClick:function onClick(){return _this3.handleSelectTreatment(item);},key:index},/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.Item_Class)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.item_desc)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.add_duration)),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.item_price)));}):/*#__PURE__*/React.createElement(\"td\",{colSpan:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},t(\"No data Available\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center justify-center w-100\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-3\",resetbg:true,className:\"col-12 ml-4\",label:\"Cancel\",onClick:this.handleDialog})))),/*#__PURE__*/React.createElement(NormalModal,{className:\"d-flex justify-content-center\",style:{minWidth:\"20%\"},modal:isLoginConfirmation,handleModal:function handleModal(){}},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleLoginConfirmationDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"p\",null,t(\"Please enter your login credential\"),\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 form-group mb-3 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Username\",value:dragusername,name:\"dragusername\",autocomplete:\"off\",onChange:this.handleInputChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 form-group mb-3 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{type:passwordVisible?\"text\":\"password\",placeholder:\"Password\",value:dragpassword,name:\"dragpassword\",autocomplete:\"off\",onChange:function onChange(e){return _this3.handleInputChange(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-addon right fs-14\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this3.toggle(\"passwordVisible\");},className:\"icon-\".concat(passwordVisible?\"eye\":\"eye-blocked\",\" cursor-pointer fs-24\")})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-0 p-0 d-flex justify-content-center col-12\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:this.handleLoginSubmit,label:\"PROCEED\",className:\"col-12 submit-btn\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},isTreatementModal?/*#__PURE__*/React.createElement(TreatmentPackage,{isTreatementModal:isTreatementModal,handleTreatementmodal:this.handleTreatementmodal,handleSelectPackage:this.handleSelectPackage,customerNumber:this.props.appointmentCustomerDetail.customerName,custName:this.props.appointmentCustomerDetail.custName,custPhone:this.props.appointmentCustomerDetail.custPhone,cust_refer:this.props.appointmentCustomerDetail.cust_refer,CustomerRemark:this.props.appointmentCustomerDetail.cust_remark,CustomerRemarkFlag:false}):\"\"),console.log(this.props.appointmentCustomerDetail,\"appointmentcustomerdetail\"),isTreatmentHistoryModal?/*#__PURE__*/React.createElement(TreatmentHistory,{isTreatmentHistoryModal:isTreatmentHistoryModal,handleTreatmentHistory:this.handleTreatmentHistory,customerNumber:this.props.appointmentCustomerDetail.customerName,custName:this.props.appointmentCustomerDetail.custName,custPhone:this.props.appointmentCustomerDetail.custPhone,cust_refer:this.props.appointmentCustomerDetail.cust_refer,CustomerRemark:this.props.appointmentCustomerDetail.cust_remark,CustomerRemarkFlag:true}):\"\",isUpcomingAppointmentModal?/*#__PURE__*/React.createElement(UpcomingAppointment,{isUpcomingAppointmentModal:isUpcomingAppointmentModal,handleUpcomingAppointment:this.handleUpcomingAppointment,customerNumber:this.props.appointmentCustomerDetail.customerName,custName:this.props.appointmentCustomerDetail.custName,custPhone:this.props.appointmentCustomerDetail.custPhone,cust_refer:this.props.appointmentCustomerDetail.cust_refer,CustomerRemark:this.props.appointmentCustomerDetail.cust_remark,CustomerRemarkFlag:false}):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-2\",mainbg:true,className:\"col-12\",label:\"Package\",onClick:this.handleTreatementmodal}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-2\",mainbg:true,className:\"col-12\",label:\"Upcoming\",onClick:this.handleUpcomingAppointment}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-2\",mainbg:true,className:\"col-12\",label:\"History\",onClick:this.handleTreatmentHistory}),!appointmentId&&this.props.AppointmentCopy&&this.props.AppointmentCopy.appointmentId>0?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-2\",mainbg:true,className:\"col-12\",label:\"Paste Appt.\",onClick:this.handlePasteAppointment}):null,appointmentId?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-2\",mainbg:true,className:\"col-12\",label:\"Copy Appt.\",onClick:this.handleCopyAppointment}):null,/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-2\",resetbg:true,className:\"col-12\",label:\"Cancel\",onClick:this.handleCloseDialog}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-2\",submitBtn:true,label:appointmentId?\"Update\":\"Confirm\"// onClick={e => {\n//   e.target.setAttribute(\"disabled\", true);\n//   this.handleUpdate();\n// }}\n,onClick:_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(){return _regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_context26.next=2;return _this3.handleLoginPopupCheck();case 2:case\"end\":return _context26.stop();}}},_callee26);})),500)}))));}}]);return MobileSelectTreatmentClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,appointmentDetail:state.appointment.appointmentDetail,selectedTreatmentList:state.appointment.selectedTreatmentList,basicApptDetail:state.appointment.basicApptDetail,appointmentCustomerDetail:state.appointment.appointmentCustomerDetail,appointmentTreatmentList:state.appointment.appointmentTreatmentList,AppointmentCopy:state.appointment.AppointmentCopy,tokenDetail:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({updateForm:updateForm,getSelectedTreatmentList:getSelectedTreatmentList,getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi},dispatch);};export var MobileSelectTreatment=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(MobileSelectTreatmentClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/mobileAppointment/MobileCreateAppointment/MobileSelectTreatment.js"],"names":["React","Component","NormalSelect","NormalButton","NormalModal","NormalInput","NormalDateTime","NormalCheckbox","NormalTimePicker","updateForm","getSelectedTreatmentList","connect","bindActionCreators","SimpleReactValidator","closeIcon","req_therapist","getCommonApi","commonCreateApi","commonPatchApi","dateFormat","_","TableWrapper","TreatmentPackage","Toast","MobileAppointmentForm","history","TreatmentHistory","UpcomingAppointment","withTranslation","AiOutlinePlus","AiOutlineMinus","getTime","date","now","Date","hour","getHours","minute","getMinutes","second","getSeconds","ap","timeString","MobileSelectTreatmentClass","props","state","treatmentDetail","formFields","appt_id","start_time","end_time","Item_Codeid","add_duration","emp_no","requesttherapist","Item_CodeName","edit_remark","recur_days","recur_qty","item_text","checktype","treat_parentcode","selectedList","outletOption","staffOption","roomOption","list","isOpenModal","categoryList","treatmentList","siteList","treatmentField","category","treatment","timeDropdown","duration","index","search","selectTreatmentId","treatmentListHeader","label","className","divClass","meta","isTreatementModal","appointmentId","PackageIndex","selectedRec_days","selectedRec_qty","recurringList","recurringSelectedItems","recurringSelectAll","settingData","PasteAppointmentId","InitAppointmentStatus","isTreatmentHistoryModal","isUpcomingAppointmentModal","freeTextStockId","headerDetails","width","activeRow","isLoginConfirmation","passwordVisible","dragusername","dragpassword","showErrorMessage","child","onFocus","getFreetextStockid","async","page","limit","then","res","console","log","data","status","stock_id","setState","type","message","timeToDateFormat","TimeValue","time","String","split","newTime","setHours","handleRenderApptDetail","copy","key","appointment","appt_status","treat","startTime","endTime","apptid","push","emp_id","item_id","item_name","handleItemSettings","getStaffAvailability","handleSearch","event","persist","target","value","debouncedFn","debounce","searchString","dataList","pagination","handlePagination","handleChangeTreatment","name","handleChange","addTimes","getHoursFromDate","length","Number","handleMultiSelect","handleDatePick","hours","minutes","stafflistvalidation","appointmentTreatmentList","item","handleUpdate","appointmentCustomerDetail","finalTreatment","TreatmentList","orig_remark","AppStatus","remark_setting","new_remark","toUpperCase","bookingStatus","customerName","appt_date","appointmentDate","channel_id","Appt_typeid","ori_remark","source_id","Source_Codeid","Room_Codeid","sec_status","cart_create","username","password","handleCloseDialog","handleSaveorUpdate","custId","custName","cust_refer","e","handleRecurringUpdate","finalRecurring","recurringItem","selected","id","recur_ids","handleSubmit","Appointment","cust_noid","ItemSite_Codeid","walkin","Treatment","getDateTime","date1","time1","handleDialog","handleMultipleCustomer","handleSelectPackage","item_desc","treatment_parentcode","listCount","handleSelectTreatment","timeToMins","b","timeFromMins","mins","z","n","h","m","t0","t1","handleAddtreatment","start","deleteTreatment","splice","handleTreatementmodal","customerId","prevState","handleCheckbox","handleRecurringlistCheckbox","listCheckbox","find","acc","Checkbox","filter","handleRecurringSelectAllCheckbox","handleCopyAppointment","AppointmentCopy","handlePasteAppointment","handleGotoCart","handleUpcomingAppointment","handleTreatmentHistory","handleAccordion","handleLoginPopupCheck","appt_pw","handleLoginSubmit","handleLoginConfirmationDialog","handleInputChange","toggle","createRef","basicApptDetail","staff_id","itm_desc","branchId","emp_name","validator","element","autoForceUpdate","AppointmentListHeader","customerDetail","selectedTreatmentList","t","tokenDetail","outlet","staff","rooms","ref","selectedCustomer","map","service_sel","service_text","minWidth","Item_Class","item_price","custPhone","cust_remark","mapStateToProps","appointmentDetail","authStore","tokenDetails","mapDispatchToProps","dispatch","MobileSelectTreatment"],"mappings":"wyCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OACEC,YADF,CAEEC,YAFF,CAGEC,WAHF,CAIEC,WAJF,CAKEC,cALF,CAMEC,cANF,CAOEC,gBAPF,KAQO,kBARP,CASA,MAAO,cAAP,CACA,OACEC,UADF,CAEEC,wBAFF,KAGO,2BAHP,CAIA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,+BAA1B,CACA,OACEC,YADF,CAEEC,eAFF,CAGEC,cAHF,KAIO,sBAJP,CAKA,OAASC,UAAT,KAA2B,yBAA3B,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,OAASC,gBAAT,KAAiC,eAAjC,CACA,OAASC,KAAT,KAAsB,eAAtB,CACA,OAASC,qBAAT,KAAsC,yBAAtC,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,gBAAT,KAAiC,0EAAjC,CACA,OAASC,mBAAT,KAAoC,6EAApC,CACA,OAASC,eAAT,KAAgC,eAAhC,CACA,OAASC,aAAT,CAAwBC,cAAxB,KAA8C,gBAA9C,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAAC,IAAI,CAAI,CACtB,SACA,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,IAAJ,CAASF,IAAT,CAAV,CACA,GAAIG,CAAAA,IAAI,CAAGF,GAAG,CAACG,QAAJ,EAAX,CACA,GAAIC,CAAAA,MAAM,CAAGJ,GAAG,CAACK,UAAJ,EAAb,CACA,GAAIC,CAAAA,MAAM,CAAGN,GAAG,CAACO,UAAJ,EAAb,CACA,GAAIC,CAAAA,EAAE,CAAG,IAAT,CACA,GAAIN,IAAI,CAAG,EAAX,CAAe,CACbM,EAAE,CAAG,IAAL,CACD,CACD,GAAIN,IAAI,CAAG,EAAX,CAAe,CACbA,IAAI,CAAGA,IAAI,CAAG,EAAd,CACD,CACD,GAAIA,IAAI,EAAI,CAAZ,CAAe,CACbA,IAAI,CAAG,EAAP,CACD,CACD,GAAIA,IAAI,CAAG,EAAX,CAAe,CACbA,IAAI,CAAG,IAAMA,IAAb,CACD,CACD,GAAIE,MAAM,CAAG,EAAb,CAAiB,CACfA,MAAM,CAAG,IAAMA,MAAf,CACD,CACD,GAAIE,MAAM,CAAG,EAAb,CAAiB,CACfA,MAAM,CAAG,IAAMA,MAAf,CACD,CACD,GAAIG,CAAAA,UAAU,CAAGP,IAAI,CAAG,GAAP,CAAaE,MAAb,CAAsB,GAAtB,CAA4BI,EAA7C,CACA,MAAOC,CAAAA,UAAP,CACD,CA3BD,CA6BA,UAAaC,CAAAA,0BAAb,wIACE,oCAAYC,KAAZ,CAAmB,4DACjB,uBAAMA,KAAN,EADiB,MAInBC,KAJmB,CAIX,CACNC,eAAe,CAAE,EADX,CAENC,UAAU,CAAE,CACVC,OAAO,CAAE,EADC,CAEVC,UAAU,CAAE,EAFF,CAGVC,QAAQ,CAAE,EAHA,CAIVC,WAAW,CAAE,IAJH,CAKVC,YAAY,CAAE,EALJ,CAMVC,MAAM,CAAE,CANE,CAOVC,gBAAgB,CAAE,KAPR,CAQVC,aAAa,CAAE,EARL,CASVC,WAAW,CAAE,EATH,CAUVC,UAAU,CAAE,IAVF,CAWVC,SAAS,CAAE,IAXD,CAYVC,SAAS,CAAE,IAZD,CAaVC,SAAS,CAAE,EAbD,CAcVC,gBAAgB,CAAE,IAdR,CAFN,CAkBNC,YAAY,CAAE,CACZ,CACEd,OAAO,CAAE,EADX,CAEEC,UAAU,CAAE,EAFd,CAGEC,QAAQ,CAAE,EAHZ,CAIEC,WAAW,CAAE,IAJf,CAKEC,YAAY,CAAE,EALhB,CAMEC,MAAM,CAAE,CANV,CAOEC,gBAAgB,CAAE,KAPpB,CAQEC,aAAa,CAAE,EARjB,CASEC,WAAW,CAAE,EATf,CAUEC,UAAU,CAAE,IAVd,CAWEC,SAAS,CAAE,IAXb,CAYEC,SAAS,CAAE,IAZb,CAaEC,SAAS,CAAE,EAbb,CAcEC,gBAAgB,CAAE,IAdpB,CADY,CAlBR,CAoCNE,YAAY,CAAE,EApCR,CAqCNC,WAAW,CAAE,EArCP,CAsCNC,UAAU,CAAE,EAtCN,CAuCNC,IAAI,CAAE,EAvCA,CAwCNC,WAAW,CAAE,KAxCP,CAyCNC,YAAY,CAAE,EAzCR,CA0CNC,aAAa,CAAE,EA1CT,CA2CNC,QAAQ,CAAE,EA3CJ,CA4CNC,cAAc,CAAE,CACdC,QAAQ,CAAE,EADI,CAEdC,SAAS,CAAE,EAFG,CA5CV,CAgDNC,YAAY,CAAE,EAhDR,CAiDNC,QAAQ,CAAE,EAjDJ,CAkDNC,KAAK,CAAE,IAlDD,CAmDNC,MAAM,CAAE,EAnDF,CAoDNC,iBAAiB,CAAE,EApDb,CAqDNC,mBAAmB,CAAE,CACnB,CAAEC,KAAK,CAAE,UAAT,CAAqBC,SAAS,CAAE,MAAhC,CADmB,CAEnB,CAAED,KAAK,CAAE,SAAT,CAAoBC,SAAS,CAAE,MAA/B,CAFmB,CAGnB,CAAED,KAAK,CAAE,UAAT,CAAqBC,SAAS,CAAE,MAAhC,CAHmB,CAInB,CACED,KAAK,CAAE,OADT,CAEEC,SAAS,CAAE,MAFb,CAGEC,QAAQ,CAAE,gCAHZ,CAJmB,CArDf,CA+DNC,IAAI,CAAE,EA/DA,CAgENC,iBAAiB,CAAE,KAhEb,CAiENC,aAAa,CAAE,IAjET,CAkENC,YAAY,CAAE,CAlER,CAmENC,gBAAgB,CAAE,IAnEZ,CAoENC,eAAe,CAAE,IApEX,CAqENC,aAAa,CAAE,EArET,CAsENC,sBAAsB,CAAE,EAtElB,CAuENC,kBAAkB,CAAE,KAvEd,CAwENC,WAAW,CAAE,EAxEP,CAyENC,kBAAkB,CAAE,CAzEd,CA0ENC,qBAAqB,CAAE,EA1EjB,CA2ENC,uBAAuB,CAAE,KA3EnB,CA4ENC,0BAA0B,CAAE,KA5EtB,CA6ENC,eAAe,CAAE,EA7EX,CA8ENC,aAAa,CAAE,CACb,CAAElB,KAAK,CAAE,OAAT,CAAkBmB,KAAK,CAAE,OAAzB,CADa,CAEb,CAAEnB,KAAK,CAAE,KAAT,CAFa,CAGb,CAAEA,KAAK,CAAE,SAAT,CAAoBmB,KAAK,CAAE,OAA3B,CAHa,CAIb,CAAEnB,KAAK,CAAE,UAAT,CAJa,CAKb,CAAEA,KAAK,CAAE,iBAAT,CALa,CAMb,CAAEA,KAAK,CAAE,WAAT,CAAsBmB,KAAK,CAAE,MAA7B,CANa,CAOb,CAAEnB,KAAK,CAAE,YAAT,CAAuBmB,KAAK,CAAE,OAA9B,CAPa,CAQb,CAAEnB,KAAK,CAAE,WAAT,CAAsBmB,KAAK,CAAE,OAA7B,CARa,CASb,CAAEnB,KAAK,CAAE,QAAT,CATa,CA9ET,CAyFNoB,SAAS,CAAE,CAzFL,CA0FNC,mBAAmB,CAAE,KA1Ff,CA2FNC,eAAe,CAAE,KA3FX,CA4FNC,YAAY,CAAE,EA5FR,CA6FNC,YAAY,CAAE,EA7FR,CAJW,OAmGnBC,gBAnGmB,CAmGA,UAAM,CACvB,MAAKC,KAAL,CAAWC,OAAX,GACD,CArGkB,OAmKnBC,kBAnKmB,CAmKE,SAAAC,KAAK,CAAI,CAC5B,gBAAoD,MAAKhE,KAAzD,CAAM0B,cAAN,aAAMA,cAAN,CAAsBM,MAAtB,aAAsBA,MAAtB,CAA8BC,iBAA9B,aAA8BA,iBAA9B,CACA,GAAIgC,CAAAA,IAAI,CAAG,CAAX,CACEC,KAAK,CAAG,EADV,CAEA,MAAKnE,KAAL,CACG5B,YADH,kCAE8B8D,iBAF9B,oBAE0DD,MAF1D,kBAEyEiC,IAFzE,mBAEuFC,KAFvF,GAIGC,IAJH,CAIQ,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAiB,2BAAjB,EACA,GAAMG,CAAAA,IAAN,CAAuBH,GAAvB,CAAMG,IAAN,CAAYC,MAAZ,CAAuBJ,GAAvB,CAAYI,MAAZ,CACA,GAAIA,MAAM,GAAK,GAAf,CAAoB,CAClB,GAAID,IAAI,EAAIA,IAAI,CAACE,QAAb,EAAyBF,IAAI,CAACE,QAAL,GAAkB,GAA/C,CAAoD,CAClD,MAAKC,QAAL,CAAc,CAAEtB,eAAe,CAAEmB,IAAI,CAACE,QAAxB,CAAd,EACD,CAFD,IAEO,CACL/F,KAAK,CAAC,CACJiG,IAAI,CAAE,OADF,CAEJC,OAAO,CAAE,uCAFL,CAAD,CAAL,CAID,CACF,CACF,CAjBH,EAkBD,CAzLkB,OA0LnBC,gBA1LmB,CA0LA,SAAAC,SAAS,CAAI,CAC9B,GAAIC,CAAAA,IAAI,CAAGC,MAAM,CAACF,SAAD,CAAN,CAAkBG,KAAlB,CAAwB,GAAxB,CAAX,CACA,GAAIC,CAAAA,OAAO,CAAG,GAAI7F,CAAAA,IAAJ,CAAS,GAAIA,CAAAA,IAAJ,GAAW8F,QAAX,CAAoBJ,IAAI,CAAC,CAAD,CAAxB,CAA6BA,IAAI,CAAC,CAAD,CAAjC,CAAsC,CAAtC,CAAyC,CAAzC,CAAT,CAAd,CACA,MAAOG,CAAAA,OAAP,CACD,CA9LkB,OA+LnBE,sBA/LmB,0FA+LM,kBAAOjF,OAAP,CAAgBkF,IAAhB,uLACuB,MAAKrF,KAD5B,CACjBiB,YADiB,cACjBA,YADiB,CACHgC,qBADG,cACHA,qBADG,CAGvB,MAAKlD,KAAL,CAAW5B,YAAX,2BAA2CgC,OAA3C,OAAuDgE,IAAvD,2FAA4D,iBAAMmB,GAAN,iLACpDd,MADoD,CACnCc,GADmC,CACpDd,MADoD,CAC5CD,IAD4C,CACnCe,GADmC,CAC5Cf,IAD4C,CAE1DF,OAAO,CAACC,GAAR,CAAYC,IAAZ,CAAkB,yBAAlB,EAF0D,KAGtDC,MAAM,GAAK,GAH2C,+BAIpDD,IAAI,CAAC3C,SAJ+C,0BAKtDqB,qBAAqB,CAAGsB,IAAI,CAACgB,WAAL,CAAiBC,WAAzC,CACAvE,YAAY,CAAG,EAAf,CANsD,sBAOhD,OAAKyD,QAAL,CAAc,CAClBzD,YAAY,CAAEA,YADI,CAElBgC,qBAAqB,CAArBA,qBAFkB,CAAd,CAPgD,QAWtD,MAAKlD,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,EAXsD,qCAYpCsD,IAAI,CAAC3C,SAZ+B,MAYtD,+CAAkC,CAAzB6D,KAAyB,aAC5BC,SAD4B,CAChB,EADgB,CAE5BC,OAF4B,CAElB,EAFkB,CAG5BC,MAH4B,CAGnB,IAHmB,CAIhC,GAAIP,IAAJ,CAAU,CACRK,SAAS,CAAG,MAAKb,gBAAL,CAAsBY,KAAK,CAACrF,UAA5B,CAAZ,CACAuF,OAAO,CAAGF,KAAK,CAACpF,QAAhB,CACAuF,MAAM,CAAG,IAAT,CACD,CAJD,IAIO,CACLF,SAAS,CAAG,MAAKb,gBAAL,CAAsBY,KAAK,CAACrF,UAA5B,CAAZ,CACAuF,OAAO,CAAGF,KAAK,CAACpF,QAAhB,CACAuF,MAAM,CAAGH,KAAK,CAACtF,OAAf,CACD,CACDc,YAAY,CAAC4E,IAAb,CAAkB,CAChBzF,UAAU,CAAEsF,SADI,CAEhBrF,QAAQ,CAAEsF,OAFM,CAGhBnF,MAAM,CAAEiF,KAAK,CAACK,MAHE,CAIhB3F,OAAO,CAAEyF,MAJO,CAKhBtF,WAAW,CAAEmF,KAAK,CAACM,OALH,CAMhBrF,aAAa,CAAE+E,KAAK,CAACO,SANL,CAOhBzF,YAAY,CAAEkF,KAAK,CAAClF,YAPJ,CAQhBE,gBAAgB,CAAEgF,KAAK,CAAChF,gBARR,CAShBG,UAAU,CAAE6E,KAAK,CAAC7E,UATF,CAUhBC,SAAS,CAAE4E,KAAK,CAAC5E,SAVD,CAWhBC,SAAS,CAAE2E,KAAK,CAACO,SAXD,CAYhBjF,SAAS,CAAE0E,KAAK,CAAC1E,SAZD,CAahBC,gBAAgB,CAAEyE,KAAK,CAACzE,gBAbR,CAAlB,EAeA,MAAK0D,QAAL,CAAc,CACZzD,YAAY,CAAZA,YADY,CAAd,EAGD,CA3CqD,qDA4CtD,MAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,EA5CsD,uDAA5D,kEAHuB,wDA/LN,yEAmPnBgF,kBAnPmB,CAmPE,UAAM,CACzB,GAAMlD,CAAAA,WAAN,CAAsB,MAAK/C,KAA3B,CAAM+C,WAAN,CACA,MAAKhD,KAAL,CAAW5B,YAAX,cAAqCgG,IAArC,CAA0C,SAAAmB,GAAG,CAAI,CAC/C,GAAMd,CAAAA,MAAN,CAAuBc,GAAvB,CAAMd,MAAN,CAAcD,IAAd,CAAuBe,GAAvB,CAAcf,IAAd,CACAF,OAAO,CAACC,GAAR,CAAYgB,GAAZ,CAAiB,gCAAjB,EACA,GAAId,MAAM,GAAK,GAAf,CAAoB,CAClBzB,WAAW,CAAGwB,IAAd,CACA,MAAKG,QAAL,CAAc,CAAE3B,WAAW,CAAXA,WAAF,CAAd,EACD,CACF,CAPD,EAQD,CA7PkB,OAyQnBmD,oBAzQmB,CAyQI,UAAM,CAC3B,MAAKnG,KAAL,CACG5B,YADH,sCAEkCG,UAAU,CAAC,GAAIe,CAAAA,IAAJ,EAAD,CAAa,YAAb,CAF5C,GAIG8E,IAJH,CAIQ,SAAAmB,GAAG,CAAI,CACX,GAAMd,CAAAA,MAAN,CAAuBc,GAAvB,CAAMd,MAAN,CAAcD,IAAd,CAAuBe,GAAvB,CAAcf,IAAd,CACA,GAAIC,MAAM,GAAK,GAAf,CAAoB,CAClB;AACA;AACA;AACA,MAAKE,QAAL,CAAc,CAAErD,IAAI,CAAEkD,IAAR,CAAd,EACD,CACF,CAZH,EAaD,CAvRkB,OAyRnB4B,YAzRmB,CAyRJ,SAAAC,KAAK,CAAI,CACtBA,KAAK,CAACC,OAAN,GACAhC,OAAO,CAACC,GAAR,CAAY8B,KAAK,CAACE,MAAN,CAAaC,KAAzB,CAAgCH,KAAK,CAACE,MAAtC,CAA8CF,KAA9C,CAAqD,gBAArD,EACA,GAAM1E,CAAAA,cAAN,CAAyB,MAAK1B,KAA9B,CAAM0B,cAAN,CACAA,cAAc,CAAC,WAAD,CAAd,CAA8B0E,KAAK,CAACE,MAAN,CAAaC,KAA3C,CACA,MAAK7B,QAAL,CAAc,CAAE1C,MAAM,CAAEoE,KAAK,CAACE,MAAN,CAAaC,KAAvB,CAA8B7E,cAAc,CAAdA,cAA9B,CAAd,EACA,GAAI,CAAC,MAAK8E,WAAV,CAAuB,CACrB,MAAKA,WAAL,CAAmBjI,CAAC,CAACkI,QAAF,CAAW,UAAM,CAClC,GAAIC,CAAAA,YAAY,CAAGN,KAAK,CAACE,MAAN,CAAaC,KAAhC,CACA,GAAIhC,CAAAA,IAAI,CAAG,CAAEvC,MAAM,CAAE0E,YAAV,CAAX,CACA;AACA,MAAK1E,MAAL,CAAYuC,IAAZ,EACD,CALkB,CAKhB,GALgB,CAAnB,CAMD,CACD,MAAKiC,WAAL,GACD,CAxSkB,OA0SnBxE,MA1SmB,CA0SV,SAAAuC,IAAI,CAAI,CACf,eAA4CA,IAA5C,CAAMN,IAAN,CAAMA,IAAN,qBAAa,CAAb,wBAA4CM,IAA5C,CAAgBL,KAAhB,CAAgBA,KAAhB,sBAAwB,EAAxB,0BAA4CK,IAA5C,CAA4BvC,MAA5B,CAA4BA,MAA5B,uBAAqC,EAArC,cACA,GAAMC,CAAAA,iBAAN,CAA4B,MAAKjC,KAAjC,CAAMiC,iBAAN,CACA,MAAKlC,KAAL,CACG5B,YADH,kCAE8B8D,iBAF9B,oBAE0DD,MAF1D,kBAEyEiC,IAFzE,mBAEuFC,KAFvF,GAIGC,IAJH,CAIQ,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAiB,oCAAjB,EACA,GAAIA,GAAG,CAACI,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAKE,QAAL,CAAc,CACZlD,aAAa,CAAE4C,GAAG,CAACG,IAAJ,CAASoC,QADZ,CAEZrE,IAAI,CAAE8B,GAAG,CAACG,IAAJ,CAASjC,IAAT,CAAcsE,UAFR,CAAd,EAID,CACF,CAZH,EAaD,CA1TkB,OA4TnBC,gBA5TmB,CA4TA,SAAA5C,IAAI,CAAI,CACzB,MAAKjC,MAAL,CAAYiC,IAAZ,EACD,CA9TkB,OAgUnB6C,qBAhUmB,2FAgUK,4PAASR,MAAT,CAAmBC,KAAnB,cAAmBA,KAAnB,CAA0BQ,IAA1B,cAA0BA,IAA1B,cAC8B,MAAK/G,KADnC,CAChB0B,cADgB,cAChBA,cADgB,CACAM,MADA,cACAA,MADA,CACQC,iBADR,cACQA,iBADR,CAEtBoC,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2ByC,IAA3B,CAAiCR,KAAjC,EACA7E,cAAc,CAACqF,IAAD,CAAd,CAAuBR,KAAvB,CACA,GAAIQ,IAAI,GAAK,UAAb,CAAyB,CACvB9E,iBAAiB,CAAGsE,KAApB,CACD,CAFD,IAEO,IAAIQ,IAAI,GAAK,WAAb,CAA0B,CAC/B/E,MAAM,CAAGuE,KAAT,CACD,CARqB,uBAShB,OAAK7B,QAAL,CAAc,CAClBhD,cAAc,CAAdA,cADkB,CAElBO,iBAAiB,CAAjBA,iBAFkB,CAGlBD,MAAM,CAANA,MAHkB,CAAd,CATgB,QAelBiC,IAfkB,CAeX,CAfW,CAgBpBC,KAhBoB,CAgBZ,EAhBY,CAiBtB,MAAKnE,KAAL,CACG5B,YADH,kCAE8B8D,iBAF9B,oBAE0DD,MAF1D,kBAEyEiC,IAFzE,mBAEuFC,KAFvF,GAIGC,IAJH,CAIQ,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAiB,UAAjB,EACA,GAAIA,GAAG,CAACI,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAKE,QAAL,CAAc,CACZlD,aAAa,CAAE4C,GAAG,CAACG,IAAJ,CAASoC,QADZ,CAEZrE,IAAI,CAAE8B,GAAG,CAACG,IAAJ,CAASjC,IAAT,CAAcsE,UAFR,CAAd,EAID,CACF,CAZH,EAjBsB,wDAhUL,uEAgWnBI,YAhWmB,2FAgWJ,wBAAoCjF,KAApC,qOAASuE,MAAT,CAAmBC,KAAnB,cAAmBA,KAAnB,CAA0BQ,IAA1B,cAA0BA,IAA1B,cAC0C,MAAK/G,KAD/C,CACPiB,YADO,cACPA,YADO,CACOuB,aADP,cACOA,aADP,CACsBY,eADtB,cACsBA,eADtB,CAGb,GAAI2D,IAAI,GAAK,cAAb,CAA6B,CAC3B;AACA9F,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,EAAkC,MAAKkF,QAAL,CAChC,MAAKC,gBAAL,CAAsBjG,YAAY,CAACc,KAAD,CAAZ,CAAoB,YAApB,CAAtB,CADgC,CAEhCwE,KAAK,CAAGA,KAAH,CAAW,OAFgB,CAAlC,CAIA;AACA;AACA;AACA;AACA;AACA;AACAtF,YAAY,CAACc,KAAD,CAAZ,CAAoB,cAApB,EAAsCwE,KAAtC,CACA,GAAItF,YAAY,CAACkG,MAAb,CAAsB,CAAtB,CAA0BpF,KAA9B,CAAqC,CAC/B4D,OAD+B,CACrB,EADqB,CAEnC;AACAA,OAAO,CAAG,MAAKd,gBAAL,CAAsB5D,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CAAtB,CAAV,CACA;AACA;AACA;AACAd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,YAAxB,EAAwC4D,OAAxC,CACA,GAAI1E,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,cAAxB,IAA4C,EAAhD,CAAoD,CAClDd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,UAAxB,EAAsC,MAAKkF,QAAL,CACpChG,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CADoC,CAEpCd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,cAAxB,CAFoC,CAAtC,CAID,CACF,CACF,CA5BD,IA4BO,IAAIgF,IAAI,GAAK,eAAb,CAA8B,CACnC9F,YAAY,CAACc,KAAD,CAAZ,CAAoB,aAApB,EAAqCqB,eAArC,CACAnC,YAAY,CAACc,KAAD,CAAZ,CAAoB,eAApB,EAAuCwE,KAAvC,CACAtF,YAAY,CAACc,KAAD,CAAZ,CAAoB,WAApB,EAAmCwE,KAAnC,CACAtF,YAAY,CAACc,KAAD,CAAZ,CAAoB,WAApB,EAAmC,UAAnC,CACAd,YAAY,CAACc,KAAD,CAAZ,CAAoB,kBAApB,EAA0C,IAA1C,CACD,CANM,IAMA,IAAIgF,IAAI,GAAK,YAAT,EAAyBA,IAAI,GAAK,WAAtC,CAAmD,CACxD,GAAIR,KAAK,EAAI,CAAT,EAAcA,KAAK,GAAK,EAA5B,CAAgC,CAC9BtF,YAAY,CAACc,KAAD,CAAZ,CAAoBgF,IAApB,EAA4B,IAA5B,CACD,CAFD,IAEO,CACL9F,YAAY,CAACc,KAAD,CAAZ,CAAoBgF,IAApB,EAA4BK,MAAM,CAACb,KAAD,CAAlC,CACD,CACF,CANM,IAMA,CACLtF,YAAY,CAACc,KAAD,CAAZ,CAAoBgF,IAApB,EAA4BR,KAA5B,CACD,CA7CY,uBA+CP,OAAK7B,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAAd,CA/CO,+BAkDP,OAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CAlDO,yDAhWI,2EAqZnBoG,iBArZmB,CAqZC,SAAA9C,IAAI,CAAI,CAC1B,GAAMrE,CAAAA,UAAN,CAAqB,MAAKF,KAA1B,CAAME,UAAN,CACA,GAAImB,CAAAA,IAAI,CAAG,EAAX,CAF0B,0CAGVkD,IAHU,aAG1B,kDAAsB,IAAbe,CAAAA,GAAa,cACpBjE,IAAI,CAACwE,IAAL,CAAUP,GAAG,CAACiB,KAAd,EACD,CALyB,uDAM1BrG,UAAU,CAAC,QAAD,CAAV,CAAuBmB,IAAvB,CACA,MAAKqD,QAAL,CAAc,CAAExE,UAAU,CAAVA,UAAF,CAAd,EACAmE,OAAO,CAACC,GAAR,CAAYpE,UAAZ,CAAwB,SAAxB,EACD,CA9ZkB,OAubnBoH,cAvbmB,2FAubF,wBAAoCvF,KAApC,mOAASuE,MAAT,CAAmBC,KAAnB,cAAmBA,KAAnB,CAA0BQ,IAA1B,cAA0BA,IAA1B,cACuB,MAAK/G,KAD5B,CACTiB,YADS,cACTA,YADS,CACKuB,aADL,cACKA,aADL,CAEXuC,IAFW,CAEJ,MAAKmC,gBAAL,CAAsBX,KAAtB,CAFI,CAGXzE,QAHW,CAGA,EAHA,CAIf,GAAIb,YAAY,CAACc,KAAD,CAAZ,CAAoB,cAApB,IAAwC,EAA5C,CAAgD,CAC9CD,QAAQ,CAAGb,YAAY,CAACc,KAAD,CAAZ,CAAoB,cAApB,CAAX,CACD,CAFD,IAEO,CACLD,QAAQ,CAAG,OAAX,CACD,CACDb,YAAY,CAACc,KAAD,CAAZ,CAAoB,YAApB,EAAoCwE,KAAK,CACrCA,KADqC,CAErC,MAAK1B,gBAAL,CAAsB5D,YAAY,CAACc,KAAD,CAAZ,CAAoB,YAApB,CAAtB,CAFJ,CAGA,GAAIgD,IAAJ,CAAU,CACR9D,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,EAAkC,MAAKkF,QAAL,CAAclC,IAAd,CAAoBjD,QAApB,CAAlC,CACD,CACD,GAAIb,YAAY,CAACkG,MAAb,CAAsB,CAAtB,CAA0BpF,KAA9B,CAAqC,CAC/B4D,OAD+B,CACrB,EADqB,CAEnC,GAAInD,aAAJ,CAAmB,CACjBmD,OAAO,CAAG,MAAKd,gBAAL,CAAsB5D,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CAAtB,CAAV,CACD,CAFD,IAEO,CACL4D,OAAO,CAAG1E,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CAAV,CACD,CACDd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,YAAxB,EAAwC4D,OAAxC,CACA,GAAI1E,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,cAAxB,IAA4C,EAAhD,CAAoD,CAClDd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,UAAxB,EAAsC,MAAKkF,QAAL,CACpChG,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CADoC,CAEpCd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,cAAxB,CAFoC,CAAtC,CAID,CACF,CA7Bc,wBA8BT,OAAK2C,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAAd,CA9BS,iCAiCT,OAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CAjCS,0DAvbE,2EA2dnBiG,gBA3dmB,CA2dA,SAAA/H,IAAI,CAAI,CACzB,GAAIG,CAAAA,IAAI,CAAGH,IAAI,CAACI,QAAL,EAAX,CACA,GAAIC,CAAAA,MAAM,CAAGL,IAAI,CAACM,UAAL,EAAb,CACA,GAAI8H,CAAAA,KAAK,CAAGjI,IAAI,CAAG,CAAP,CAAWA,IAAX,CAAkB,IAAMA,IAApC,CACA,GAAIkI,CAAAA,OAAO,CAAGhI,MAAM,CAAG,CAAT,CAAaA,MAAb,CAAsB,IAAMA,MAA1C,CACA,MAAO+H,CAAAA,KAAK,CAAG,GAAR,CAAcC,OAArB,CACD,CAjekB,OAmenBC,mBAnemB,CAmeG,SAAAC,wBAAwB,CAAI,CAChD,GAAIA,wBAAwB,CAACP,MAAzB,CAAkC,CAAtC,CAAyC,2CACtBO,wBADsB,aACvC,kDAA2C,IAAlCC,CAAAA,IAAkC,cACzC,GAAI,CAACA,IAAI,CAACnH,MAAN,EAAgBmH,IAAI,CAACnH,MAAL,GAAgB,EAAhC,EAAsCmH,IAAI,CAACnH,MAAL,GAAgB,IAA1D,CAAgE,CAC9D9B,KAAK,CAAC,CAAEiG,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAE,qBAA1B,CAAD,CAAL,CACA,MAAO,MAAP,CACD,CAHD,IAGO,CACL,MAAO,KAAP,CACD,CACF,CARsC,uDASxC,CACF,CA9ekB,OA+enBgD,YA/emB,CA+eJ,UAAM,CACnB,gBAA8D,MAAK7H,KAAnE,CAAM8H,yBAAN,aAAMA,yBAAN,CAAiCH,wBAAjC,aAAiCA,wBAAjC,CACA,iBACE,MAAK1H,KADP,CAAMwC,aAAN,cAAMA,aAAN,CAAqBS,qBAArB,cAAqBA,qBAArB,CAA4CS,YAA5C,cAA4CA,YAA5C,CAA0DC,YAA1D,cAA0DA,YAA1D,CAEA,GAAImE,CAAAA,cAAc,CAAG,EAArB,CAJmB,0CAKOJ,wBALP,aAKnB,kDAAoD,IAA3CK,CAAAA,aAA2C,cAClDD,cAAc,CAACjC,IAAf,CAAoB,CAClB1F,OAAO,CAAE4H,aAAa,CAAC5H,OADL,CAElBC,UAAU,CAAE,MAAK8G,gBAAL,CAAsBa,aAAa,CAAC3H,UAApC,CAFM,CAGlBC,QAAQ,CAAE0H,aAAa,CAAC1H,QAHN,CAIlBE,YAAY,CAAEwH,aAAa,CAACxH,YAJV,CAKlBwF,OAAO,CAAEgC,aAAa,CAACzH,WALL,CAMlBQ,SAAS,CAAEiH,aAAa,CAACjH,SANP,CAOlBgF,MAAM,CAAEiC,aAAa,CAACvH,MAPJ,CAQlBC,gBAAgB,CAAEsH,aAAa,CAACtH,gBARd,CASlBI,SAAS,CAAEuG,MAAM,CAAC,EAAD,CATC,CAUlBxG,UAAU,CAAE,EAVM,CAWlBG,SAAS,CAAEgH,aAAa,CAAChH,SAXP,CAYlBC,gBAAgB,CAAE+G,aAAa,CAAC/G,gBAZd,CAApB,EAcD,CApBkB,uDAqBnBqD,OAAO,CAACC,GAAR,CAAYwD,cAAZ,CAA4B,uCAA5B,EACA,GAAIE,CAAAA,WAAW,CAAG,EAAlB,CACA,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAIJ,yBAAyB,CAACK,cAA9B,CAA8C,CAC5CF,WAAW,CAAG,IAAd,CACD,CAFD,IAEO,CACLA,WAAW,CAAGH,yBAAyB,CAACM,UAAxC,CACD,CACD,GACEnD,MAAM,CAAC/B,qBAAD,CAAN,CAA8BmF,WAA9B,KAAgD,SAAhD,EACApD,MAAM,CAAC6C,yBAAyB,CAACQ,aAA3B,CAAN,CAAgDD,WAAhD,KACE,SAHJ,CAIE,CACAH,SAAS,CAAG,IAAZ,CACD,CAND,IAMO,CACLA,SAAS,CAAGJ,yBAAyB,CAACQ,aAAtC,CACD,CACD,GACER,yBAAyB,CAACS,YAA1B,EACAT,yBAAyB,CAACQ,aAF5B,CAGE,CACA,GAAI,MAAKZ,mBAAL,CAAyBC,wBAAzB,CAAJ,CAAwD,CACtD,GAAI,CACF,GAAInD,CAAAA,IAAI,CAAG,CACTgB,WAAW,CAAE,CACXgD,SAAS,CAAEjK,UAAU,CACnB,GAAIe,CAAAA,IAAJ,CAASwI,yBAAyB,CAACW,eAAnC,CADmB,CAEnB,YAFmB,CADV,CAKXhD,WAAW,CAAEyC,SALF,CAMXQ,UAAU,CAAErB,MAAM,CAACS,yBAAyB,CAACa,WAA3B,CANP,CAOXC,UAAU,CAAEX,WAPD,CAQXrH,WAAW,CAAEkH,yBAAyB,CAAClH,WAR5B,CASXiI,SAAS,CAAExB,MAAM,CAACS,yBAAyB,CAACgB,aAA3B,CATN,CAUXC,WAAW,CAAE1B,MAAM,CAACS,yBAAyB,CAACiB,WAA3B,CAVR,CAWXC,UAAU,CAAElB,yBAAyB,CAACkB,UAX3B,CAYXb,cAAc,CAAEL,yBAAyB,CAACK,cAZ/B,CAaXc,WAAW,CAAEnB,yBAAyB,CAACmB,WAb5B,CAcXC,QAAQ,CAAEvF,YAdC,CAeXwF,QAAQ,CAAEvF,YAfC,CADJ,CAkBT/B,SAAS,CAAEkG,cAlBF,CAAX,CAqBA,MAAK/H,KAAL,CACG1B,cADH,2BACqCmE,aADrC,MACuD+B,IADvD,EAEGJ,IAFH,2FAEQ,kBAAMC,GAAN,qIACJC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAiB,iCAAjB,EADI,KAEAA,GAAG,CAACI,MAAJ,GAAe,GAFf,2BAGF,MAAK2E,iBAAL,GACA,MAAKC,kBAAL,GAJE,oCAKOhF,GAAG,CAACI,MAAJ,GAAe,GALtB,4BAMEtE,UANF,CAMe,CAAEmJ,MAAM,CAAE,CAAV,CAAaC,QAAQ,CAAE,EAAvB,CAA2BC,UAAU,CAAE,EAAvC,CANf,CAOFrJ,UAAU,CAAC,QAAD,CAAV,CAAuB2H,yBAAyB,CAACS,YAAjD,CACApI,UAAU,CAAC,UAAD,CAAV,CAAyB2H,yBAAyB,CAACyB,QAAnD,CACApJ,UAAU,CAAC,YAAD,CAAV,CAA2B2H,yBAAyB,CAAC0B,UAArD,CATE,wBAUI,OAAKxJ,KAAL,CAAWnC,UAAX,CAAsB,iBAAtB,CAAyCsC,UAAzC,CAVJ,SAWF,MAAKH,KAAL,CACG5B,YADH,qCAEiCG,UAAU,CACrC,GAAIe,CAAAA,IAAJ,EADqC,CAErC,YAFqC,CAF3C,uBAKmBwI,yBAAyB,CAACS,YAL7C,GAOGnE,IAPH,CAOQ,SAAAC,GAAG,CAAI,CACXxF,OAAO,CAACiH,IAAR,CAAa,aAAb,EACD,CATH,EAXE,yDAFR,kEAyBD,CAAC,MAAO2D,CAAP,CAAU,CACVnF,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCkF,CAAtC,EACD,CACF,CACF,CAxDD,IAwDO,CACL,MAAK5F,gBAAL,GACD,CACF,CAhlBkB,OAqqBnB6F,qBArqBmB,CAqqBK,UAAM,CAC5B,iBAA8D,MAAK1J,KAAnE,CAAM8H,yBAAN,cAAMA,yBAAN,CAAiCH,wBAAjC,cAAiCA,wBAAjC,CACA,iBAMI,MAAK1H,KANT,CACEwC,aADF,cACEA,aADF,CAEEE,gBAFF,cAEEA,gBAFF,CAGEC,eAHF,cAGEA,eAHF,CAIEC,aAJF,cAIEA,aAJF,CAKEE,kBALF,cAKEA,kBALF,CAOA,GAAI4G,CAAAA,cAAc,CAAG,EAArB,CAT4B,0CAUF9G,aAVE,aAU5B,kDAAyC,IAAhC+G,CAAAA,aAAgC,cACvC,GAAIA,aAAa,CAACC,QAAlB,CAA4B,CAC1B,GAAIrD,CAAAA,KAAK,CAAGoD,aAAa,CAACE,EAA1B,CACAH,cAAc,CAAC7D,IAAf,CAAoBU,KAApB,EACD,CACF,CAf2B,uDAgB5BlC,OAAO,CAACC,GAAR,CAAYoF,cAAZ,CAA4B,oBAA5B,EACA,GACE7B,yBAAyB,CAACS,YAA1B,EACAT,yBAAyB,CAACQ,aAF5B,CAGE,CACA,GAAI,MAAKZ,mBAAL,CAAyBC,wBAAzB,CAAJ,CAAwD,CACtD,GAAInD,CAAAA,IAAI,CAAG,CACTgE,SAAS,CAAEjK,UAAU,CACnB,GAAIe,CAAAA,IAAJ,CAASwI,yBAAyB,CAACW,eAAnC,CADmB,CAEnB,YAFmB,CADZ,CAKTM,WAAW,CAAEjB,yBAAyB,CAACiB,WAL9B,CAMTtD,WAAW,CAAEqC,yBAAyB,CAACQ,aAN9B,CAOTU,UAAU,CAAElB,yBAAyB,CAACkB,UAP7B,CAQTpI,WAAW,CAAEkH,yBAAyB,CAAClH,WAR9B,CASTP,UAAU,CAAE,MAAK8G,gBAAL,CACVQ,wBAAwB,CAAC,CAAD,CAAxB,CAA4BtH,UADlB,CATH,CAYTC,QAAQ,CAAEqH,wBAAwB,CAAC,CAAD,CAAxB,CAA4BrH,QAZ7B,CAaT0F,OAAO,CAAE2B,wBAAwB,CAAC,CAAD,CAAxB,CAA4BpH,WAb5B,CAcTC,YAAY,CAAEmH,wBAAwB,CAAC,CAAD,CAAxB,CAA4BnH,YAdjC,CAeTuF,MAAM,CAAE4B,wBAAwB,CAAC,CAAD,CAAxB,CAA4BlH,MAf3B,CAgBTC,gBAAgB,CAAEiH,wBAAwB,CAAC,CAAD,CAAxB,CAA4BjH,gBAhBrC,CAiBTK,SAAS,CAAE4G,wBAAwB,CAAC,CAAD,CAAxB,CAA4B5G,SAjB9B,CAkBTF,UAAU,CACR8B,gBAAgB,GAAKgF,wBAAwB,CAAC,CAAD,CAAxB,CAA4B9G,UAAjD,EACA8G,wBAAwB,CAAC,CAAD,CAAxB,CAA4B9G,UAA5B,GAA2C,EAD3C,EAEA8G,wBAAwB,CAAC,CAAD,CAAxB,CAA4B9G,UAA5B,EAA0C,CAF1C,CAGI,IAHJ,CAII8G,wBAAwB,CAAC,CAAD,CAAxB,CAA4B9G,UAvBzB,CAwBTC,SAAS,CACPuG,MAAM,CAACzE,eAAD,CAAN,GACEyE,MAAM,CAACM,wBAAwB,CAAC,CAAD,CAAxB,CAA4B7G,SAA7B,CADR,EAEAuG,MAAM,CAACM,wBAAwB,CAAC,CAAD,CAAxB,CAA4B7G,SAA7B,CAAN,GAAkD,EAFlD,EAGAuG,MAAM,CAACM,wBAAwB,CAAC,CAAD,CAAxB,CAA4B7G,SAA7B,CAAN,EAAiD,CAHjD,CAII,IAJJ,CAKIuG,MAAM,CAACM,wBAAwB,CAAC,CAAD,CAAxB,CAA4B7G,SAA7B,CA9BH,CA+BTiJ,SAAS,CAAEJ,cA/BF,CAAX,CAiCArF,OAAO,CAACC,GAAR,CAAYC,IAAZ,CAAkB,2CAAlB,EACA,GAAIzB,kBAAJ,CAAwB,CACtB,MAAK/C,KAAL,CACG1B,cADH,4BAEwBmE,aAFxB,sBAGI+B,IAHJ,EAKGJ,IALH,4FAKQ,kBAAMC,GAAN,sHACJ,GAAIA,GAAG,CAACI,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAK2E,iBAAL,GACA,MAAKC,kBAAL,GACD,CAJG,wDALR,oEAWD,CAZD,IAYO,CACL,MAAKrJ,KAAL,CACG1B,cADH,4BACsCmE,aADtC,MACwD+B,IADxD,EAEGJ,IAFH,4FAEQ,kBAAMC,GAAN,sHACJC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAiB,yBAAjB,EACA,GAAIA,GAAG,CAACI,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAK2E,iBAAL,GACA,MAAKC,kBAAL,GACD,CALG,wDAFR,oEASD,CACF,CACF,CA/DD,IA+DO,CACL,MAAKxF,gBAAL,GACD,CACF,CAxvBkB,OAyvBnBmG,YAzvBmB,CAyvBJ,UAAM,CACnB;AACA,iBAA8D,MAAKhK,KAAnE,CAAM8H,yBAAN,cAAMA,yBAAN,CAAiCH,wBAAjC,cAAiCA,wBAAjC,CACA,iBAAqC,MAAK1H,KAA1C,CAAM2D,YAAN,cAAMA,YAAN,CAAoBD,YAApB,cAAoBA,YAApB,CACAW,OAAO,CAACC,GAAR,CAAYuD,yBAAZ,CAAuC,mCAAvC,EACAxD,OAAO,CAACC,GAAR,CACEoD,wBADF,CAEE,uCAFF,EAKA,GAAII,CAAAA,cAAc,CAAG,EAArB,CAVmB,0CAWOJ,wBAXP,aAWnB,kDAAoD,IAA3CK,CAAAA,aAA2C,cAClDD,cAAc,CAACjC,IAAf,CAAoB,CAClB1F,OAAO,CAAE4H,aAAa,CAAC5H,OADL,CAElBC,UAAU,CAAE,MAAK8G,gBAAL,CAAsBa,aAAa,CAAC3H,UAApC,CAFM,CAGlBC,QAAQ,CAAE0H,aAAa,CAAC1H,QAHN,CAIlBE,YAAY,CAAEwH,aAAa,CAACxH,YAJV,CAKlBD,WAAW,CAAEyH,aAAa,CAACzH,WALT,CAMlBQ,SAAS,CAAEiH,aAAa,CAACjH,SANP,CAOlBN,MAAM,CAAEuH,aAAa,CAACvH,MAPJ,CAQlBC,gBAAgB,CAAEsH,aAAa,CAACtH,gBARd,CASlBI,SAAS,CAAEkH,aAAa,CAAClH,SATP,CAUlBD,UAAU,CAAEmH,aAAa,CAACnH,UAVR,CAWlBG,SAAS,CAAEgH,aAAa,CAAChH,SAXP,CAYlBC,gBAAgB,CAAE+G,aAAa,CAAC/G,gBAZd,CAApB,EAcD,CA1BkB,uDA2BnB,GACE6G,yBAAyB,CAACS,YAA1B,EACAT,yBAAyB,CAACQ,aAF5B,CAGE,CACA,GAAI,MAAKZ,mBAAL,CAAyBC,wBAAzB,CAAJ,CAAwD,CACtD,GAAInD,CAAAA,IAAI,CAAG,CACTyF,WAAW,CAAE,CACXzB,SAAS,CAAEjK,UAAU,CACnB,GAAIe,CAAAA,IAAJ,CAASwI,yBAAyB,CAACW,eAAnC,CADmB,CAEnB,YAFmB,CADV,CAKXE,WAAW,CAAEb,yBAAyB,CAACa,WAL5B,CAMXuB,SAAS,CAAEpC,yBAAyB,CAACS,YAN1B,CAOXH,UAAU,CAAEN,yBAAyB,CAACM,UAP3B,CAQX;AACAU,aAAa,CAAEhB,yBAAyB,CAACgB,aAT9B,CAUXC,WAAW,CAAEjB,yBAAyB,CAACiB,WAV5B,CAWXtD,WAAW,CAAEqC,yBAAyB,CAACQ,aAX5B,CAYXU,UAAU,CAAElB,yBAAyB,CAACkB,UAZ3B,CAaXmB,eAAe,CAAErC,yBAAyB,CAACqC,eAbhC,CAcXC,MAAM,CAAEtC,yBAAyB,CAACsC,MAdvB,CAeXlB,QAAQ,CAAEvF,YAfC,CAgBXwF,QAAQ,CAAEvF,YAhBC,CADJ,CAmBTyG,SAAS,CAAEtC,cAnBF,CAAX,CAsBA,MAAK/H,KAAL,CAAW3B,eAAX,gBAA2CmG,IAA3C,EAAiDJ,IAAjD,4FAAsD,kBAAMC,GAAN,sHACpD,GAAIA,GAAG,CAACI,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAK2E,iBAAL,GACA,MAAKC,kBAAL,GACD,CAJmD,wDAAtD,oEAMD,CACF,CAlCD,IAkCO,CACL,MAAKxF,gBAAL,GACD,CACF,CAzzBkB,OA2zBnByG,WA3zBmB,CA2zBL,SAAA9F,IAAI,CAAI,CACpB,GAAIpF,CAAAA,IAAI,CAAG,GAAIE,CAAAA,IAAJ,CAASkF,IAAT,CAAX,CACApF,IAAI,CAAG6F,MAAM,CAAC7F,IAAD,CAAN,CAAa8F,KAAb,CAAmB,GAAnB,CAAP,CACA,GAAIqF,CAAAA,KAAK,CAAGnL,IAAI,CAAC,CAAD,CAAJ,CAAU,KAAV,CAAkBA,IAAI,CAAC,CAAD,CAAtB,CAA4B,IAA5B,CAAmCA,IAAI,CAAC,CAAD,CAAnD,CACA,GAAI4F,CAAAA,IAAI,CAAG5F,IAAI,CAAC,CAAD,CAAJ,CAAQ8F,KAAR,CAAc,GAAd,CAAX,CACA,GAAIsF,CAAAA,KAAK,CACPvF,MAAM,CAACoC,MAAM,CAACrC,IAAI,CAAC,CAAD,CAAL,CAAN,CAAkB,EAAlB,CAAuBqC,MAAM,CAACrC,IAAI,CAAC,CAAD,CAAL,CAAN,CAAkB,EAAzC,CAA8CA,IAAI,CAAC,CAAD,CAAnD,CAAN,CACA,GADA,CAEAA,IAAI,CAAC,CAAD,CAFJ,EAGCqC,MAAM,CAACrC,IAAI,CAAC,CAAD,CAAL,CAAN,CAAkB,EAAlB,CAAuB,IAAvB,CAA8B,IAH/B,CADF,CAKA,MAAOwF,CAAAA,KAAK,CAAG,IAAR,CAAeD,KAAtB,CACD,CAt0BkB,OAw0BnBE,YAx0BmB,CAw0BJ,UAAM,CACnB,MAAK9F,QAAL,CAAc,CAAEpD,WAAW,CAAE,KAAf,CAAsBS,KAAK,CAAE,IAA7B,CAAd,EACD,CA10BkB,OA40BnB0I,sBA50BmB,CA40BM,UAAM,CAC7B,MAAK/F,QAAL,CAAc,CAAEpD,WAAW,CAAE,KAAf,CAAd,EACD,CA90BkB,OAg1BnBoJ,mBAh1BmB,4FAg1BG,mBAAMnG,IAAN,uMACpB,SADoB,aAEgC,MAAKvE,KAFrC,CAEdiB,YAFc,cAEdA,YAFc,CAEAwB,YAFA,cAEAA,YAFA,CAEcD,aAFd,cAEcA,aAFd,MAIhBC,YAAY,GAAK,CAAjB,EAAsBxB,YAAY,CAAC,CAAD,CAAZ,CAAgB,eAAhB,IAAqC,EAJ3C,6BAKlBA,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,EAAgCA,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,CAAhC,CACA;AACAA,YAAY,CAAC,CAAD,CAAZ,CAAgB,UAAhB,EAA8B,MAAKgG,QAAL,CAC5B,MAAKC,gBAAL,CAAsBjG,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,CAAtB,CAD4B,CAE5BsD,IAAI,CAAChE,YAAL,CAAoBgE,IAAI,CAAChE,YAAzB,CAAwC,OAFZ,CAA9B,CAIA;AACA;AACA;AACA;AACA;AACA;AACAU,YAAY,CAAC,CAAD,CAAZ,CAAgB,aAAhB,EAAiCsD,IAAI,CAACsF,EAAtC,CACA5I,YAAY,CAAC,CAAD,CAAZ,CAAgB,eAAhB,EAAmCsD,IAAI,CAACoG,SAAxC,CACA1J,YAAY,CAAC,CAAD,CAAZ,CAAgB,WAAhB,EAA+B,IAA/B,CACAA,YAAY,CAAC,CAAD,CAAZ,CAAgB,cAAhB,EAAkCsD,IAAI,CAAChE,YAAvC,CACAU,YAAY,CAAC,CAAD,CAAZ,CAAgB,WAAhB,EAA+B,SAA/B,CACAA,YAAY,CAAC,CAAD,CAAZ,CAAgB,kBAAhB,EAAsCsD,IAAI,CAACqG,oBAA3C,CAtBkB,yBAwBZ,OAAKlG,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAElBwB,YAAY,CAAEA,YAAY,CAAG,CAFX,CAAd,CAxBY,kCA4BZ,OAAK1C,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CA5BY,+CA6BTA,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,eAAtC,IAA2D,EA7BlD,6BA8BlBlG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,YAAtC,EACElG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,YAAtC,CADF,CAEA;AACAlG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,UAAtC,EAAoD,MAAKF,QAAL,CAClD,MAAKC,gBAAL,CACEjG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,YAAtC,CADF,CADkD,CAIlD5C,IAAI,CAAChE,YAAL,CAAoBgE,IAAI,CAAChE,YAAzB,CAAwC,OAJU,CAApD,CAMA;AACA;AACA;AACA;AACA;AACA;AAEAU,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,aAAtC,EAAuD5C,IAAI,CAACsF,EAA5D,CACA5I,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,eAAtC,EAAyD5C,IAAI,CAACoG,SAA9D,CACA1J,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,WAAtC,EAAqD,IAArD,CACAlG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,cAAtC,EAAwD5C,IAAI,CAAChE,YAA7D,CACAU,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,WAAtC,EAAqD,SAArD,CACAlG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,kBAAtC,EACE5C,IAAI,CAACqG,oBADP,CAnDkB,yBAsDZ,OAAKlG,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAElBwB,YAAY,CAAEA,YAAY,CAAG,CAFX,CAAd,CAtDY,kCA0DZ,OAAK1C,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CA1DY,+CA4DlBA,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,eAAtC,IAA2D,EAA3D,EACA3E,aA7DkB,6BA+DlBvB,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,YAAtC,EACElG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,YAAtC,CADF,CAEA;AACAlG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,UAAtC,EAAoD,MAAKF,QAAL,CAClD,MAAKC,gBAAL,CACEjG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,YAAtC,CADF,CADkD,CAIlD5C,IAAI,CAAChE,YAAL,CAAoBgE,IAAI,CAAChE,YAAzB,CAAwC,OAJU,CAApD,CAMA;AACA;AACA;AACA;AACA;AACA;AAEAU,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,aAAtC,EAAuD5C,IAAI,CAACsF,EAA5D,CACA5I,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,eAAtC,EAAyD5C,IAAI,CAACoG,SAA9D,CACA1J,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,WAAtC,EAAqD,IAArD,CACAlG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,cAAtC,EAAwD5C,IAAI,CAAChE,YAA7D,CACAU,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,WAAtC,EAAqD,SAArD,CACAlG,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC,kBAAtC,EACE5C,IAAI,CAACqG,oBADP,CApFkB,yBAuFZ,OAAKlG,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAElBwB,YAAY,CAAEA,YAAY,CAAG,CAFX,CAAd,CAvFY,kCA2FZ,OAAK1C,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CA3FY,0CA6Fd4J,SA7Fc,CA6FF5J,YAAY,CAACkG,MAAb,CAAsB,CA7FpB,CA8FdvF,SA9Fc,CA8FF,EA9FE,CA+FlB;AACAA,SAAS,CAAC,YAAD,CAAT,CAA0B,MAAKiD,gBAAL,CACxB5D,YAAY,CAAC4J,SAAD,CAAZ,CAAwB,UAAxB,CADwB,CAA1B,CAGA;AACA;AACA;AACAjJ,SAAS,CAAC,aAAD,CAAT,CAA2B2C,IAAI,CAACsF,EAAhC,CACAjI,SAAS,CAAC,eAAD,CAAT,CAA6B2C,IAAI,CAACoG,SAAlC,CACA/I,SAAS,CAAC,WAAD,CAAT,CAAyB,IAAzB,CACAA,SAAS,CAAC,cAAD,CAAT,CAA4B2C,IAAI,CAAChE,YAAjC,CACAqB,SAAS,CAAC,WAAD,CAAT,CAAyB,SAAzB,CACAA,SAAS,CAAC,kBAAD,CAAT,CAAgC2C,IAAI,CAACqG,oBAArC,CACA3J,YAAY,CAAC4E,IAAb,CAAkBjE,SAAlB,EA5GkB,yBA6GZ,OAAK8C,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAAd,CA7GY,kCAgHZ,OAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CAhHY,SAmHpB,MAAKyD,QAAL,CAAc,CAAEpD,WAAW,CAAE,KAAf,CAAd,EAnHoB,2DAh1BH,yEAs8BnBwJ,qBAt8BmB,4FAs8BK,mBAAMvG,IAAN,mMACuB,MAAKvE,KAD5B,CAChBiB,YADgB,eAChBA,YADgB,CACFc,KADE,eACFA,KADE,CACKS,aADL,eACKA,aADL,MAGlBT,KAAK,EAAI,CAAT,EAAcd,YAAY,CAACkG,MAAb,EAAuB,CAHnB,6BAIpBlG,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,EAAgCA,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,CAAhC,CACA;AACAA,YAAY,CAAC,CAAD,CAAZ,CAAgB,UAAhB,EAA8B,MAAKgG,QAAL,CAC5B,MAAKC,gBAAL,CAAsBjG,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,CAAtB,CAD4B,CAE5BsD,IAAI,CAAChE,YAAL,CAAoBgE,IAAI,CAAChE,YAAzB,CAAwC,OAFZ,CAA9B,CAIA;AACA;AACA;AACA;AACA;AACA;AACAU,YAAY,CAAC,CAAD,CAAZ,CAAgB,aAAhB,EAAiCsD,IAAI,CAACsF,EAAtC,CACA5I,YAAY,CAAC,CAAD,CAAZ,CAAgB,eAAhB,EAAmCsD,IAAI,CAACoG,SAAxC,CACA1J,YAAY,CAAC,CAAD,CAAZ,CAAgB,cAAhB,EAAkCsD,IAAI,CAAChE,YAAvC,CACAU,YAAY,CAAC,CAAD,CAAZ,CAAgB,WAAhB,EAA+B,SAA/B,CACAA,YAAY,CAAC,CAAD,CAAZ,CAAgB,kBAAhB,EAAsC,IAAtC,CApBoB,yBAsBd,OAAKyD,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAAd,CAtBc,kCAyBd,OAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CAzBc,0CA2BpBA,YAAY,CAACc,KAAD,CAAZ,CAAoB,YAApB,EAAoCd,YAAY,CAACc,KAAD,CAAZ,CAAoB,YAApB,CAApC,CACA;AACAd,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,EAAkC,MAAKkF,QAAL,CAChC,MAAKC,gBAAL,CAAsBjG,YAAY,CAACc,KAAD,CAAZ,CAAoB,YAApB,CAAtB,CADgC,CAEhCwC,IAAI,CAAChE,YAAL,CAAoBgE,IAAI,CAAChE,YAAzB,CAAwC,OAFR,CAAlC,CAIA;AACA;AACA;AACA;AACA;AACA;AACAU,YAAY,CAACc,KAAD,CAAZ,CAAoB,aAApB,EAAqCwC,IAAI,CAACsF,EAA1C,CACA5I,YAAY,CAACc,KAAD,CAAZ,CAAoB,eAApB,EAAuCwC,IAAI,CAACoG,SAA5C,CACA1J,YAAY,CAACc,KAAD,CAAZ,CAAoB,cAApB,EAAsCwC,IAAI,CAAChE,YAA3C,CACAU,YAAY,CAACc,KAAD,CAAZ,CAAoB,WAApB,EAAmC,SAAnC,CACAd,YAAY,CAACc,KAAD,CAAZ,CAAoB,kBAApB,EAA0C,IAA1C,CAEI4D,OA7CgB,CA6CN,EA7CM,CA8CpB;AACAA,OAAO,CAAG,MAAKd,gBAAL,CAAsB5D,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CAAtB,CAAV,CACA;AACA;AACA;AACA,GAAId,YAAY,CAACkG,MAAb,CAAsB,CAAtB,CAA0BpF,KAA9B,CAAqC,CACnCd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,YAAxB,EAAwC4D,OAAxC,CACA,GAAI1E,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,cAAxB,IAA4C,EAAhD,CAAoD,CAClDd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,UAAxB,EAAsC,MAAKkF,QAAL,CACpChG,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CADoC,CAEpCd,YAAY,CAACc,KAAK,CAAG,CAAT,CAAZ,CAAwB,cAAxB,CAFoC,CAAtC,CAID,CACF,CA3DmB,yBA4Dd,OAAK2C,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAAd,CA5Dc,kCA+Dd,OAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CA/Dc,SAiEtB,MAAKyD,QAAL,CAAc,CAAEpD,WAAW,CAAE,KAAf,CAAd,EAjEsB,2DAt8BL,yEA0gCnByJ,UA1gCmB,CA0gCN,SAAAhG,IAAI,CAAI,CACnB,GAAIiG,CAAAA,CAAC,CAAGjG,IAAI,CAACE,KAAL,CAAW,GAAX,CAAR,CACA,MAAO+F,CAAAA,CAAC,CAAC,CAAD,CAAD,CAAO,EAAP,CAAY,EAACA,CAAC,CAAC,CAAD,CAArB,CACD,CA7gCkB,OAihCnBC,YAjhCmB,CAihCJ,SAAAC,IAAI,CAAI,CACrB,QAASC,CAAAA,CAAT,CAAWC,CAAX,CAAc,CACZ,MAAO,CAACA,CAAC,CAAG,EAAJ,CAAS,GAAT,CAAe,EAAhB,EAAsBA,CAA7B,CACD,CACD,GAAIC,CAAAA,CAAC,CAAG,CAAEH,IAAI,CAAG,EAAR,CAAc,CAAf,EAAoB,EAA5B,CACA,GAAII,CAAAA,CAAC,CAAGJ,IAAI,CAAG,EAAf,CACA,MAAOC,CAAAA,CAAC,CAACE,CAAD,CAAD,CAAO,GAAP,CAAaF,CAAC,CAACG,CAAD,CAArB,CACD,CAxhCkB,OA2hCnBrE,QA3hCmB,CA2hCR,SAACsE,EAAD,CAAKC,EAAL,CAAY,CACrB,MAAO,OAAKP,YAAL,CAAkB,MAAKF,UAAL,CAAgBQ,EAAhB,EAAsB,MAAKR,UAAL,CAAgBS,EAAhB,CAAxC,CAAP,CACD,CA7hCkB,OA2iCnBC,kBA3iCmB,4FA2iCE,mBAAM1J,KAAN,sMAC+B,MAAK/B,KADpC,CACbiB,YADa,eACbA,YADa,CACCf,UADD,eACCA,UADD,CACasC,aADb,eACaA,aADb,KAGfvB,YAAY,CAACc,KAAD,CAAZ,CAAoB,UAApB,CAHe,4BAIb2J,KAJa,CAIL,EAJK,CAKjB;AACAA,KAAK,CAAG,MAAK7G,gBAAL,CACN5D,YAAY,CAACA,YAAY,CAACkG,MAAb,CAAsB,CAAvB,CAAZ,CAAsC9G,QADhC,CAAR,CAGA;AACA;AACA;AACAH,UAAU,CAAG,CACXC,OAAO,CAAE,IADE,CAEXC,UAAU,CAAEsL,KAFD,CAGXrL,QAAQ,CAAE,EAHC,CAIXC,WAAW,CAAE,MAAKN,KAAL,CAAWoD,eAJb,CAKX7C,YAAY,CAAE,EALH,CAMXC,MAAM,CAAE,CANG,CAOXC,gBAAgB,CAAE,KAPP,CAQXG,UAAU,CAAE,IARD,CASXC,SAAS,CAAE,IATA,CAUXC,SAAS,CAAE,IAVA,CAWXC,SAAS,CAAE,EAXA,CAYXC,gBAAgB,CAAE,IAZP,CAAb,CAcAC,YAAY,CAAC4E,IAAb,CAAkB,CAChB1F,OAAO,CAAE,IADO,CAEhBC,UAAU,CAAEsL,KAFI,CAGhBrL,QAAQ,CAAE,EAHM,CAIhBC,WAAW,CAAE,MAAKN,KAAL,CAAWoD,eAJR,CAKhB1C,aAAa,CAAE,EALC,CAMhBH,YAAY,CAAE,EANE,CAOhBC,MAAM,CAAE,CAPQ,CAQhBC,gBAAgB,CAAE,KARF,CAShBG,UAAU,CAAE,IATI,CAUhBC,SAAS,CAAE,IAVK,CAWhBC,SAAS,CAAE,IAXK,CAYhBC,SAAS,CAAE,EAZK,CAahBC,gBAAgB,CAAE,IAbF,CAAlB,EA1BiB,wBA0CX,OAAK0D,QAAL,CAAc,CAAEzD,YAAY,CAAZA,YAAF,CAAgBf,UAAU,CAAVA,UAAhB,CAAd,CA1CW,iCA4CX,OAAKH,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CA5CW,0CA8CjBvC,KAAK,CAAC,CAAEiG,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAE,6BAA1B,CAAD,CAAL,CA9CiB,2DA3iCF,yEA6lCnB+G,eA7lCmB,4FA6lCD,mBAAM5J,KAAN,2IACVd,YADU,CACO,MAAKjB,KADZ,CACViB,YADU,CAEhBA,YAAY,CAAC2K,MAAb,CAAoB7J,KAApB,CAA2B,CAA3B,EACA,MAAK2C,QAAL,CAAc,CAAEzD,YAAY,CAAZA,YAAF,CAAd,EAHgB,wBAIV,OAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CAJU,2DA7lCC,yEAomCnB4K,qBApmCmB,CAomCK,UAAM,CAC5B,GAAMhE,CAAAA,yBAAN,CAAoC,MAAK9H,KAAzC,CAAM8H,yBAAN,CACA,GAAIiE,CAAAA,UAAU,CAAGjE,yBAAyB,CAACS,YAA3C,CACA,GAAIwD,UAAU,CAAG,CAAjB,CAAoB,CAClB,MAAKpH,QAAL,CAAc,SAAAqH,SAAS,QAAK,CAC1BxJ,iBAAiB,CAAE,CAACwJ,SAAS,CAACxJ,iBADJ,CAAL,EAAvB,EAGD,CAJD,IAIO,CACL7D,KAAK,CAAC,CAAEiG,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAE,wBAA1B,CAAD,CAAL,CACD,CACF,CA9mCkB,OA0nCnBoH,cA1nCmB,4FA0nCF,0BAAoCjK,KAApC,uMAASuE,MAAT,CAAmBC,KAAnB,eAAmBA,KAAnB,CAA0BQ,IAA1B,eAA0BA,IAA1B,CACTvF,aADS,CACS,MAAKxB,KADd,CACTwB,aADS,CAETP,YAFS,CAEQ,MAAKjB,KAFb,CAETiB,YAFS,CAGfA,YAAY,CAACc,KAAD,CAAZ,CAAoB,kBAApB,EAA0CwE,KAA1C,CAHe,wBAIT,OAAK7B,QAAL,CAAc,CAClBzD,YAAY,CAAZA,YADkB,CAAd,CAJS,gCAOT,OAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,YAAvC,CAPS,2DA1nCE,8EAooCnBkI,iBApoCmB,sEAooCC,6IAClB,MAAKpJ,KAAL,CAAWoJ,iBAAX,GADkB,0DApoCD,SAuoCnBC,kBAvoCmB,sEAuoCE,6IACnB,MAAKrJ,KAAL,CAAWqJ,kBAAX,GADmB,0DAvoCF,SA0oCnB6C,2BA1oCmB,4FA0oCW,0BAAoCtE,IAApC,gNAASrB,MAAT,CAAmBC,KAAnB,eAAmBA,KAAnB,CAA0BQ,IAA1B,eAA0BA,IAA1B,CACtBnE,aADsB,CACJ,MAAK5C,KADD,CACtB4C,aADsB,CAExBsJ,YAFwB,CAETtJ,aAAa,CAACuJ,IAAd,CAAmB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACvC,EAAJ,GAAWlC,IAAI,CAACkC,EAApB,EAAtB,CAFS,KAGxBqC,YAHwB,2BAI1BA,YAAY,CAAC,UAAD,CAAZ,CAA2B3F,KAA3B,CAJ0B,wBAKpB,OAAK7B,QAAL,gCAAmB,MAAK1E,KAAL,CAAW4C,aAA9B,MAA6CsJ,YAAY,CAAZA,YAA7C,GALoB,QAOxBG,QAPwB,CAObzJ,aAAa,CAAC0J,MAAd,CAAqB,SAAAF,GAAG,QAAIA,CAAAA,GAAG,CAACxC,QAAJ,GAAiB,IAArB,EAAxB,EAAmDzC,MAPtC,MAQxBkF,QAAQ,EAAI,MAAKrM,KAAL,CAAW4C,aAAX,CAAyBuE,MARb,sDASpB,OAAKzC,QAAL,CAAc,CAAE5B,kBAAkB,CAAE,IAAtB,CAAd,CAToB,mEAWpB,OAAK4B,QAAL,CAAc,CAAE5B,kBAAkB,CAAE,KAAtB,CAAd,CAXoB,4DA1oCX,8EAypCnByJ,gCAzpCmB,4FAypCgB,0OAASjG,MAAT,CAAmBC,KAAnB,eAAmBA,KAAnB,CAA0BQ,IAA1B,eAA0BA,IAA1B,CAC3BnE,aAD2B,CACT,MAAK5C,KADI,CAC3B4C,aAD2B,yBAE3B,OAAK8B,QAAL,CAAc,CAAE5B,kBAAkB,CAAEyD,KAAtB,CAAd,CAF2B,8CAGhB3D,aAHgB,qGAGxB+E,IAHwB,cAI/BA,IAAI,CAAC,UAAD,CAAJ,CAAmBpB,KAAnB,CAJ+B,yBAKzB,OAAK7B,QAAL,gCAAmB,MAAK1E,KAAL,CAAW4C,aAA9B,MAA6C+E,IAAI,CAAJA,IAA7C,GALyB,oTAzpChB,yEAiqCnB6E,qBAjqCmB,sEAiqCK,0KAChBhK,aADgB,CACE,MAAKxC,KADP,CAChBwC,aADgB,CAElBtC,UAFkB,CAEL,EAFK,CAGtBA,UAAU,CAAC,eAAD,CAAV,CAA8BsC,aAA9B,CAHsB,wBAIhB,OAAKzC,KAAL,CAAWnC,UAAX,CAAsB,iBAAtB,CAAyCsC,UAAzC,CAJgB,QAKtBmE,OAAO,CAACC,GAAR,CACE,MAAKvE,KAAL,CAAW0M,eADb,CAEE,sCAFF,EAIA/N,KAAK,CAAC,CAAEiG,IAAI,CAAE,SAAR,CAAmBC,OAAO,CAAE,oBAA5B,CAAD,CAAL,CATsB,0DAjqCL,SA4qCnB8H,sBA5qCmB,sEA4qCM,iKACjBD,eADiB,CACG,MAAK1M,KADR,CACjB0M,eADiB,CAEvB,GAAIA,eAAJ,CAAqB,CACnB,MAAK/H,QAAL,CAAc,CACZ1B,kBAAkB,CAAEyJ,eAAe,CAACjK,aADxB,CAEZvB,YAAY,CAAE,EAFF,CAAd,EAIA,MAAKmE,sBAAL,CAA4BqH,eAAe,CAACjK,aAA5C,CAA2D,IAA3D,EACD,CARsB,0DA5qCN,SAurCnBmK,cAvrCmB,sEAurCF,sLACT9E,yBADS,CACqB,MAAK9H,KAD1B,CACT8H,yBADS,CAEX3H,UAFW,CAEE,CAAEmJ,MAAM,CAAE,CAAV,CAAaC,QAAQ,CAAE,EAAvB,CAFF,CAGfpJ,UAAU,CAAC,QAAD,CAAV,CAAuB2H,yBAAyB,CAACS,YAAjD,CACApI,UAAU,CAAC,UAAD,CAAV,CAAyB2H,yBAAyB,CAACyB,QAAnD,CACApJ,UAAU,CAAC,YAAD,CAAV,CAA2B2H,yBAAyB,CAAC0B,UAArD,CALe,wBAMT,OAAKxJ,KAAL,CAAWnC,UAAX,CAAsB,iBAAtB,CAAyCsC,UAAzC,CANS,QAQftB,OAAO,CAACiH,IAAR,CAAa,aAAb,EARe,0DAvrCE,SAisCnB+G,yBAjsCmB,CAisCS,UAAM,CAChC,GAAM/E,CAAAA,yBAAN,CAAoC,MAAK9H,KAAzC,CAAM8H,yBAAN,CACA,GAAIiE,CAAAA,UAAU,CAAGjE,yBAAyB,CAACS,YAA3C,CACA,GAAIwD,UAAU,CAAG,CAAjB,CAAoB,CAClB,MAAKpH,QAAL,CAAc,SAAAqH,SAAS,QAAK,CAC1B5I,0BAA0B,CAAE,CAAC4I,SAAS,CAAC5I,0BADb,CAAL,EAAvB,EAGD,CAJD,IAIO,CACLzE,KAAK,CAAC,CAAEiG,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAE,wBAA1B,CAAD,CAAL,CACD,CACF,CA3sCkB,OA4sCnBiI,sBA5sCmB,CA4sCM,UAAM,CAC7B,GAAMhF,CAAAA,yBAAN,CAAoC,MAAK9H,KAAzC,CAAM8H,yBAAN,CACA,GAAIiE,CAAAA,UAAU,CAAGjE,yBAAyB,CAACS,YAA3C,CACA,GAAIwD,UAAU,CAAG,CAAjB,CAAoB,CAClB,MAAKpH,QAAL,CAAc,SAAAqH,SAAS,QAAK,CAC1B7I,uBAAuB,CAAE,CAAC6I,SAAS,CAAC7I,uBADV,CAAL,EAAvB,EAGD,CAJD,IAIO,CACLxE,KAAK,CAAC,CAAEiG,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAE,wBAA1B,CAAD,CAAL,CACD,CACF,CAttCkB,OAwtCnBkI,eAxtCmB,4FAwtCD,mBAAM/K,KAAN,wIACVwB,SADU,CACI,MAAKvD,KADT,CACVuD,SADU,MAEZxB,KAAK,GAAKwB,SAFE,oDAGR,OAAKmB,QAAL,CAAc,CAClBnB,SAAS,CAAE,EADO,CAAd,CAHQ,+DAOR,OAAKmB,QAAL,CAAc,CAClBnB,SAAS,CAAExB,KADO,CAAd,CAPQ,2DAxtCC,yEAouCnBgL,qBApuCmB,sEAouCK,iLAChBhK,WADgB,CACA,MAAK/C,KADL,CAChB+C,WADgB,KAElBA,WAAW,CAACiK,OAFM,2BAGdxJ,mBAHc,CAGU,MAAKxD,KAHf,CAGdwD,mBAHc,CAIpBA,mBAAmB,CAAG,IAAtB,CAJoB,wBAKd,OAAKkB,QAAL,CAAc,CAClBlB,mBAAmB,CAAnBA,mBADkB,CAAd,CALc,uCASpB,MAAKyJ,iBAAL,GAToB,0DApuCL,SAivCnBC,6BAjvCmB,sEAivCa,qKACxB1J,mBADwB,CACA,MAAKxD,KADL,CACxBwD,mBADwB,CAE9BA,mBAAmB,CAAG,KAAtB,CAF8B,wBAGxB,OAAKkB,QAAL,CAAc,CAClBlB,mBAAmB,CAAnBA,mBADkB,CAElBE,YAAY,CAAE,EAFI,CAGlBC,YAAY,CAAE,EAHI,CAAd,CAHwB,2DAjvCb,SA0vCnBwJ,iBA1vCmB,4FA0vCC,mBAAM/G,KAAN,kJACZ,OAAK1B,QAAL,oBACH0B,KAAK,CAACE,MAAN,CAAaS,IADV,CACiBX,KAAK,CAACE,MAAN,CAAaC,KAD9B,EADY,2DA1vCD,yEA+vCnB0G,iBA/vCmB,CA+vCC,UAAM,CACxB,GAAMzK,CAAAA,aAAN,CAAwB,MAAKxC,KAA7B,CAAMwC,aAAN,CACA,GAAIA,aAAJ,CAAmB,CACjB,MAAKoF,YAAL,GACD,CAFD,IAEO,CACL,MAAKmC,YAAL,GACD,CACF,CAtwCkB,OAuwCnBqD,MAvwCmB,CAuwCV,SAAA9H,GAAG,CAAI,CACd,MAAKZ,QAAL,CAAc,SAAAqH,SAAS,4BACpBzG,GADoB,CACd,CAACyG,SAAS,CAACzG,GAAD,CADI,GAAvB,EAGD,CA3wCkB,CAEjB,MAAKzB,KAAL,CAAa1G,KAAK,CAACkQ,SAAN,EAAb,CAFiB,aAGlB,CAJH,wEAuGE,4BAAoB,iBAClB,KAAKrL,MAAL,CAAY,EAAZ,EACA,KAAKiE,kBAAL,GACA,kBACE,KAAKjG,KADP,CAAMuB,YAAN,eAAMA,YAAN,CAAoBJ,WAApB,eAAoBA,WAApB,CAAiCF,YAAjC,eAAiCA,YAAjC,CAA+Cf,UAA/C,eAA+CA,UAA/C,CAA2D4B,QAA3D,eAA2DA,QAA3D,CAGA,iBAA2C,KAAK/B,KAAhD,CAAMuN,eAAN,cAAMA,eAAN,CAAuBb,eAAvB,cAAuBA,eAAvB,CACApI,OAAO,CAACC,GAAR,CAAYmI,eAAZ,CAA6B,uBAA7B,EAEA,GAAIa,eAAe,CAACnN,OAApB,CAA6B,CAC3B,KAAKuE,QAAL,CAAc,CAAElC,aAAa,CAAE8K,eAAe,CAACnN,OAAjC,CAAd,EACA,KAAKiF,sBAAL,CAA4BkI,eAAe,CAACnN,OAA5C,CAAqD,KAArD,EACD,CAHD,IAGO,CACL,GAAMc,CAAAA,aAAN,CAAuB,KAAKjB,KAA5B,CAAMiB,YAAN,CACAA,aAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,EAAgCqM,eAAe,CAC3C,KAAKzI,gBAAL,CAAsByI,eAAe,CAACvI,IAAtC,CAD2C,CAE3C,EAFJ,CAGA9D,aAAY,CAAC,CAAD,CAAZ,CAAgB,QAAhB,EAA4BqM,eAAe,CACvCA,eAAe,CAACC,QADuB,CAEvC,CAFJ,CAGA,KAAK7I,QAAL,CAAc,CACZzD,YAAY,CAAZA,aADY,CAAd,EAGA,KAAKlB,KAAL,CAAWnC,UAAX,CAAsB,eAAtB,CAAuCqD,aAAvC,EACD,CACD,KAAKlB,KAAL,CAAW5B,YAAX,cAAqCgG,IAArC,CAA0C,SAAAmB,GAAG,CAAI,CAC/C,GAAMd,CAAAA,MAAN,CAAuBc,GAAvB,CAAMd,MAAN,CAAcD,IAAd,CAAuBe,GAAvB,CAAcf,IAAd,CACA,GAAIC,MAAM,GAAK,GAAf,CAAoB,2CACAD,IADA,aAClB,kDAAwB,IAAfgC,CAAAA,KAAe,cACtBhF,YAAY,CAACsE,IAAb,CAAkB,CAAEU,KAAK,CAAEA,KAAK,CAACsD,EAAf,CAAmB1H,KAAK,CAAEoE,KAAK,CAACiH,QAAhC,CAAlB,EACD,CAHiB,uDAIlB,MAAI,CAAC9I,QAAL,CAAc,CAAEnD,YAAY,CAAZA,YAAF,CAAd,EACD,CACF,CARD,EASA,KAAKxB,KAAL,CACG5B,YADH,sCAGMmP,eAAe,CAACG,QAHtB,kBAIanP,UAAU,CAAC,GAAIe,CAAAA,IAAJ,EAAD,CAJvB,GAMG8E,IANH,CAMQ,SAAAmB,GAAG,CAAI,CACX,GAAMd,CAAAA,MAAN,CAAuBc,GAAvB,CAAMd,MAAN,CAAcD,IAAd,CAAuBe,GAAvB,CAAcf,IAAd,CACA,GAAIC,MAAM,GAAK,GAAf,CAAoB,2CACAD,IADA,aAClB,kDAAwB,IAAfgC,CAAAA,KAAe,cACtBpF,WAAW,CAAC0E,IAAZ,CAAiB,CAAEU,KAAK,CAAEA,KAAK,CAACsD,EAAf,CAAmB1H,KAAK,CAAEoE,KAAK,CAACmH,QAAhC,CAAjB,EACD,CAHiB,uDAIlB,MAAI,CAAChJ,QAAL,CAAc,CAAEvD,WAAW,CAAXA,WAAF,CAAd,EACD,CACF,CAdH,EAeA,KAAKpB,KAAL,CAAW5B,YAAX,wBAA+CgG,IAA/C,CAAoD,SAAAmB,GAAG,CAAI,CACzD,GAAMd,CAAAA,MAAN,CAAuBc,GAAvB,CAAMd,MAAN,CAAcD,IAAd,CAAuBe,GAAvB,CAAcf,IAAd,CACA,GAAIC,MAAM,GAAK,GAAf,CAAoB,4CACAD,IADA,cAClB,qDAAwB,IAAfgC,CAAAA,KAAe,eACtBzE,QAAQ,CAAC+D,IAAT,CAAc,CAAEU,KAAK,CAAEA,KAAT,CAAgBpE,KAAK,CAAEoE,KAAvB,CAAd,EACD,CAHiB,yDAIlB,MAAI,CAAC7B,QAAL,CAAc,CAAE5C,QAAQ,CAARA,QAAF,CAAd,EACD,CACF,CARD,EASA,KAAKoE,oBAAL,GACA,KAAKnC,kBAAL,GACD,CAnKH,kCA+PE,6BAAqB,CACnB,KAAK4J,SAAL,CAAiB,GAAI3P,CAAAA,oBAAJ,CAAyB,CACxC4P,OAAO,CAAE,iBAAAhJ,OAAO,qBACd,4BAAM,SAAS,CAAC,wCAAhB,EACGA,OADH,CADc,EADwB,CAMxCiJ,eAAe,CAAE,IANuB,CAAzB,CAAjB,CAQD,CAxQH,sBA6wCE,iBAAS,iBACP,kBAiCI,KAAK7N,KAjCT,CACEkB,YADF,eACEA,YADF,CAEEC,WAFF,eAEEA,WAFF,CAGEC,UAHF,eAGEA,UAHF,CAIEH,YAJF,eAIEA,YAJF,CAKEQ,QALF,eAKEA,QALF,CAMEJ,IANF,eAMEA,IANF,CAOEnB,UAPF,eAOEA,UAPF,CAQE2B,YARF,eAQEA,YARF,CASEC,QATF,eASEA,QATF,CAUER,WAVF,eAUEA,WAVF,CAWEI,cAXF,eAWEA,cAXF,qCAYEF,aAZF,CAYEA,aAZF,gCAYkB,EAZlB,uBAaED,YAbF,eAaEA,YAbF,CAcEW,mBAdF,eAcEA,mBAdF,CAeEI,IAfF,eAeEA,IAfF,CAgBEC,iBAhBF,eAgBEA,iBAhBF,CAiBEC,aAjBF,eAiBEA,aAjBF,CAkBEE,gBAlBF,eAkBEA,gBAlBF,CAmBEC,eAnBF,eAmBEA,eAnBF,CAoBEC,aApBF,eAoBEA,aApBF,CAqBEE,kBArBF,eAqBEA,kBArBF,CAsBEC,WAtBF,eAsBEA,WAtBF,CAuBEC,kBAvBF,eAuBEA,kBAvBF,CAwBEE,uBAxBF,eAwBEA,uBAxBF,CAyBEC,0BAzBF,eAyBEA,0BAzBF,CA0BE2K,qBA1BF,eA0BEA,qBA1BF,CA2BEzK,aA3BF,eA2BEA,aA3BF,CA4BEE,SA5BF,eA4BEA,SA5BF,CA6BEC,mBA7BF,eA6BEA,mBA7BF,CA8BEC,eA9BF,eA8BEA,eA9BF,CA+BEC,YA/BF,eA+BEA,YA/BF,CAgCEC,YAhCF,eAgCEA,YAhCF,CAkCA,iBACE,KAAK5D,KADP,CAAMgO,cAAN,cAAMA,cAAN,CAAsBC,qBAAtB,cAAsBA,qBAAtB,CAA6ClC,UAA7C,cAA6CA,UAA7C,CAAyDmC,CAAzD,cAAyDA,CAAzD,CAA4DC,WAA5D,cAA4DA,WAA5D,CAEA,GAAMC,CAAAA,MAAN,CAA+BJ,cAA/B,CAAMI,MAAN,CAAcC,KAAd,CAA+BL,cAA/B,CAAcK,KAAd,CAAqBC,KAArB,CAA+BN,cAA/B,CAAqBM,KAArB,CAEA,mBACE,oBAAC,KAAD,CAAO,QAAP,MACGrL,kBAAkB,EAAI,CAAtB,cACC,oBAAC,qBAAD,EACE,KAAK,CAAE,eAAAsL,GAAG,QAAK,CAAA,MAAI,CAACzK,KAAL,CAAayK,GAAlB,EADZ,CAEE,gBAAgB,CAAE,KAAKvO,KAAL,CAAWwO,gBAF/B,CAGE,kBAAkB,CAAEvL,kBAHtB,EADD,CAMG,IAPN,CAQGA,kBAAkB,CAAG,CAArB,cACC,oBAAC,qBAAD,EACE,KAAK,CAAE,eAAAsL,GAAG,QAAK,CAAA,MAAI,CAACzK,KAAL,CAAayK,GAAlB,EADZ,CAEE,gBAAgB,CAAE,KAAKvO,KAAL,CAAWwO,gBAF/B,CAGE,kBAAkB,CAAEvL,kBAHtB,EADD,CAMG,IAdN,CAgBG/B,YAAY,CAACkG,MAAb,EAAuB,CAAvB,cACC,2BAAK,KAAK,CAAC,uDAAX,EACG8G,CAAC,CAAC,SAAD,CADJ,CADD,cAKC,2BAAK,SAAS,CAAC,sBAAf,EACGhN,YAAY,CAACkG,MAAb,GAAwBlG,YAAY,CAACkG,MAAb,CAAsB,CAAtB,CAA0B,CAAlD,cACC,2BAAK,SAAS,CAAC,4BAAf,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,KAAK,CAAE,SAFT,CAGE,OAAO,CAAE,yBACP,CAAA,MAAI,CAACsE,kBAAL,CAAwBxK,YAAY,CAACkG,MAAb,CAAsB,CAA9C,CADO,EAHX,EADF,CADD,CAUG,IAXN,CAYGlG,YAAY,CAACkG,MAAb,CAAsB,CAAtB,CACClG,YAAY,CAACuN,GAAb,CAAiB,SAAC7G,IAAD,CAAO5F,KAAP,CAAiB,CAChC,mBACE,2BACE,SAAS,+BACPwB,SAAS,GAAKxB,KAAd,CAAsB,gBAAtB,CAAyC,EADlC,CADX,CAIE,GAAG,CAAEA,KAJP,eAME,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,+CAAf,EACGA,KAAK,CAAG,CADX,CAEG,IAFH,CAGG4F,IAAI,CAACjH,aAAL,CACGiH,IAAI,CAACjH,aADR,CAEG,oBALN,CADF,cASE,2BAAK,SAAS,CAAC,yDAAf,EACI8B,aAAa,EAAImF,IAAI,CAACxH,OAAvB,EACDc,YAAY,CAACkG,MAAb,EAAuB,CADtB,CAC0B,IAD1B,cAEC,2BACE,SAAS,CAAC,8CADZ,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACwE,eAAL,CAAqB5J,KAArB,CAAN,EAFX,CAGE,OAAO,CAAC,QAHV,eAKE,4BAAM,SAAS,CAAC,aAAhB,EALF,CAHJ,CATF,cAqBE,2BACE,SAAS,CAAC,yDADZ,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC+K,eAAL,CAAqB/K,KAArB,CAAN,EAFX,EAIGwB,SAAS,GAAKxB,KAAd,cACC,2BAAK,SAAS,CAAC,8CAAf,eACE,6CACE,oBAAC,cAAD,MADF,CADF,CADD,cAOC,2BAAK,SAAS,CAAC,8CAAf,eACE,6CACE,oBAAC,aAAD,MADF,CADF,CAXJ,CArBF,CANF,CA+CGwB,SAAS,GAAKxB,KAAd,cACC,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,EACGkM,CAAC,CAAC,YAAD,CADJ,CADF,cAKE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,gBAAD,EACE,QAAQ,CAAE,kBAAAzE,CAAC,QAAI,CAAA,MAAI,CAAClC,cAAL,CAAoBkC,CAApB,CAAuBzH,KAAvB,CAAJ,EADb,CAEE,IAAI,CAAC,YAFP,CAGE,QAAQ,CAAE,IAHZ,CAIE,UAAU,QAJZ,CAKE,QAAQ,CAAE,IALZ,CAME,QAAQ,CAAE,KANZ,CAOE,WAAW,CAAC,EAPd,CAQE,aAAa,CAAE,CARjB,CASE,KAAK,CAAE4F,IAAI,CAACvH,UATd,CAUE,QAAQ,CAAE,KAVZ,EADF,CALF,CADF,cAsBE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,EACG6N,CAAC,CAAC,UAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,UAFP,CAGE,KAAK,CAAEtG,IAAI,CAACtH,QAHd,CAIE,QAAQ,CAAE,mBAAM,CAAE,CAJpB,CAKE,QAAQ,CAAE,IALZ,EADF,CAJF,CAtBF,cAoCE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,EACG4N,CAAC,CAAC,MAAD,CADJ,CADF,cAKE,2BAAK,SAAS,CAAC,aAAf,EACGlL,WAAW,EACZA,WAAW,CAAC0L,WADX,EAED1L,WAAW,CAAC2L,YAFX,cAGC,oBAAC,WAAD,EACE,WAAW,CAAC,SACZ;AAFF,CAGE,KAAK,CAAE/G,IAAI,CAACjH,aAHd,CAIE,IAAI,CAAC,eAJP,CAKE,aAAa,CAAE,+BACb,CAAA,MAAI,CAACgE,QAAL,CAAc,CACZpD,WAAW,CAAE,IADD,CAEZS,KAAK,CAAEA,KAFK,CAAd,CADa,EALjB,CAWE,QAAQ,CAAE,kBAAAyH,CAAC,QAAI,CAAA,MAAI,CAACxC,YAAL,CAAkBwC,CAAlB,CAAqBzH,KAArB,CAAJ,EAXb,EAHD,CAgBG,IAjBN,CAkBGgB,WAAW,EACZA,WAAW,CAAC0L,WADX,EAED,CAAC1L,WAAW,CAAC2L,YAFZ,cAGC,oBAAC,WAAD,EACE,WAAW,CAAC,SACZ;AAFF,CAGE,KAAK,CAAE/G,IAAI,CAACjH,aAHd,CAIE,IAAI,CAAC,eAJP,CAKE,aAAa,CAAE,+BACb,CAAA,MAAI,CAACgE,QAAL,CAAc,CACZpD,WAAW,CAAE,IADD,CAEZS,KAAK,CAAEA,KAFK,CAAd,CADa,EALjB,CAWE,QAAQ,CAAE,mBAAM,CAAE,CAXpB,EAHD,CAgBG,IAlCN,CAmCGgB,WAAW,EACZ,CAACA,WAAW,CAAC0L,WADZ,EAED1L,WAAW,CAAC2L,YAFX,cAGC,oBAAC,WAAD,EACE,WAAW,CAAC,SACZ;AAFF,CAGE,KAAK,CAAE/G,IAAI,CAACjH,aAHd,CAIE,IAAI,CAAC,eAJP,CAKE,OAAO,CAAE,kBAAM,CAAE,CALnB,CAME,QAAQ,CAAE,kBAAA8I,CAAC,QAAI,CAAA,MAAI,CAACxC,YAAL,CAAkBwC,CAAlB,CAAqBzH,KAArB,CAAJ,EANb,EAHD,CAWG,IA9CN,CA+CGgB,WAAW,EACZ,CAACA,WAAW,CAAC0L,WADZ,EAED,CAAC1L,WAAW,CAAC2L,YAFZ,cAGC,oBAAC,WAAD,EACE,WAAW,CAAC,SACZ;AAFF,CAGE,KAAK,CAAE/G,IAAI,CAACjH,aAHd,CAIE,IAAI,CAAC,eAJP,CAKE,OAAO,CAAE,kBAAM,CAAE,CALnB,CAME,QAAQ,CAAE,mBAAM,CAAE,CANpB,EAHD,CAWG,IA1DN,CALF,CApCF,cAsGE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,EACGuN,CAAC,CAAC,UAAD,CADJ,CADF,cAKE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,YACC;AADF,EAEE,OAAO,CAAEnM,QAFX,CAGE,KAAK,CAAE6F,IAAI,CAACpH,YAHd,CAIE,IAAI,CAAC,cAJP,CAKE,QAAQ,CAAE,kBAAAiJ,CAAC,QAAI,CAAA,MAAI,CAACxC,YAAL,CAAkBwC,CAAlB,CAAqBzH,KAArB,CAAJ,EALb,CAME,SAAS,CAAC,KANZ,EADF,CALF,CAtGF,cAsHE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,EACGkM,CAAC,CAAC,OAAD,CADJ,CADF,cAKE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,YACC;AADF,EAEE,OAAO,CAAE9M,WAFX,CAGE,KAAK,CAAEwG,IAAI,CAACnH,MAHd,CAIE,IAAI,CAAC,QAJP,CAKE,QAAQ,CAAE,kBAAAgJ,CAAC,QAAI,CAAA,MAAI,CAACxC,YAAL,CAAkBwC,CAAlB,CAAqBzH,KAArB,CAAJ,EALb,CAME,SAAS,CAAC,KANZ,EADF,CALF,CAtHF,cAuIE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,EACGkM,CAAC,CAAC,gBAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,EACGtG,IAAI,CAAClH,gBAAL,cACC,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAA+I,CAAC,QAAI,CAAA,MAAI,CAACwC,cAAL,CAAoBxC,CAApB,CAAuBzH,KAAvB,CAAJ,EADb,CAEE,KAAK,CAAE4F,IAAI,CAAClH,gBAFd,CAGE,IAAI,CAAC,kBAHP,CAIE,OAAO,CAAE,IAJX,EADD,cAQC,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAA+I,CAAC,QAAI,CAAA,MAAI,CAACwC,cAAL,CAAoBxC,CAApB,CAAuBzH,KAAvB,CAAJ,EADb,CAEE,KAAK,CAAE4F,IAAI,CAAClH,gBAFd,CAGE,IAAI,CAAC,kBAHP,CAIE,OAAO,CAAE,KAJX,EATJ,CAJF,CAvIF,cA8JE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,EACGwN,CAAC,CAAC,YAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,IAAI,CAAC,QADP,CAEE,IAAI,CAAC,YAFP,CAGE,KAAK,CAAEtG,IAAI,CAAC/G,UAAL,CAAkB+G,IAAI,CAAC/G,UAAvB,CAAoC,EAH7C,CAIE,QAAQ,CAAE,kBAAA4I,CAAC,QAAI,CAAA,MAAI,CAACxC,YAAL,CAAkBwC,CAAlB,CAAqBzH,KAArB,CAAJ,EAJb,CAKE,QAAQ,CAAES,aAAa,CAAG,IAAH,CAAU,KALnC,EADF,CAJF,CA9JF,cA4KE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,SAAS,CAAC,yCAAjB,EACGyL,CAAC,CAAC,WAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,IAAI,CAAC,QADP,CAEE,IAAI,CAAC,WAFP,CAGE,KAAK,CAAEtG,IAAI,CAAC9G,SAAL,CAAiB8G,IAAI,CAAC9G,SAAtB,CAAkC,EAH3C,CAIE,QAAQ,CAAE,kBAAA2I,CAAC,QAAI,CAAA,MAAI,CAACxC,YAAL,CAAkBwC,CAAlB,CAAqBzH,KAArB,CAAJ,EAJb,CAKE,QAAQ,CAAES,aAAa,CAAG,IAAH,CAAU,KALnC,EADF,CAJF,CA5KF,CADD,CA6LC,EA5OJ,CADF,CAiPD,CAlPD,CADD,cAqPC,2BAAK,SAAS,CAAC,0BAAf,EAA2CyL,CAAC,CAAC,SAAD,CAA5C,CAjQJ,CArBJ,cA4gBE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,2BAAK,SAAS,CAAC,oBAAf,eACE,2BAAK,SAAS,CAAC,uBAAf,EACGrL,aAAa,EAAIA,aAAa,CAACuE,MAAd,CAAuB,CAAxC,cACC,2BAAK,SAAS,CAAC,WAAf,eACE,4CACE,8DADF,CADF,cAKE,2BAAK,SAAS,CAAC,mCAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,cAAD,EACE,KAAK,MADP,CAEE,QAAQ,CAAE,kBAAAqC,CAAC,QACT,CAAA,MAAI,CAAC+C,gCAAL,CAAsC/C,CAAtC,CADS,EAFb,CAKE,KAAK,CAAE1G,kBALT,CAME,IAAI,CAAC,oBANP,CAOE,OAAO,CAAEA,kBAPX,EADF,CADF,cAYE,2BAAK,SAAS,CAAC,WAAf,EAA4BmL,CAAC,CAAC,MAAD,CAA7B,CAZF,cAaE,2BAAK,SAAS,CAAC,WAAf,EAA4BA,CAAC,CAAC,OAAD,CAA7B,CAbF,cAcE,2BAAK,SAAS,CAAC,WAAf,EAA4BA,CAAC,CAAC,KAAD,CAA7B,CAdF,cAeE,2BAAK,SAAS,CAAC,yBAAf,EACGA,CAAC,CAAC,SAAD,CADJ,CAfF,cAmBE,2BAAK,SAAS,CAAC,yBAAf,EACGA,CAAC,CAAC,UAAD,CADJ,CAnBF,cAsBE,2BAAK,SAAS,CAAC,WAAf,EAA4BA,CAAC,CAAC,iBAAD,CAA7B,CAtBF,cAuBE,2BAAK,SAAS,CAAC,yCAAf,eACE,2BACE,GAAG,CAAE/P,aADP,CAEE,GAAG,CAAC,EAFN,CAGE,MAAM,CAAC,IAHT,CAIE,KAAK,CAAC,IAJR,EADF,CAvBF,CALF,CAqCG0E,aAAa,EAAIA,aAAa,CAACuE,MAAd,CAAuB,CAAxC,CACCvE,aAAa,CAAC4L,GAAd,CAAkB,SAAC7G,IAAD,CAAO5F,KAAP,CAAiB,CACjC,mBACE,2BAAK,SAAS,CAAC,oBAAf,CAAoC,GAAG,CAAEA,KAAzC,eACE,2BAAK,SAAS,CAAC,mBAAf,eACE,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAAyH,CAAC,QACT,CAAA,MAAI,CAACyC,2BAAL,CAAiCzC,CAAjC,CAAoC7B,IAApC,CADS,EADb,CAIE,KAAK,CAAEA,IAAI,CAACiC,QAJd,CAKE,IAAI,CAAC,eALP,CAME,OAAO,CAAEjC,IAAI,CAACiC,QANhB,EADF,CADF,cAWE,2BAAK,SAAS,CAAC,WAAf,EAA4BjC,IAAI,CAACxI,IAAjC,CAXF,cAYE,2BAAK,SAAS,CAAC,WAAf,EAA4BwI,IAAI,CAACvH,UAAjC,CAZF,cAaE,2BAAK,SAAS,CAAC,WAAf,EAA4BuH,IAAI,CAACtH,QAAjC,CAbF,cAcE,2BAAK,SAAS,CAAC,yBAAf,EACGsH,IAAI,CAAC3B,SADR,CAdF,cAkBE,2BAAK,SAAS,CAAC,yBAAf,EACG2B,IAAI,CAACpH,YADR,CAlBF,cAqBE,2BAAK,SAAS,CAAC,WAAf,EAA4BoH,IAAI,CAAC+F,QAAjC,CArBF,cAsBE,2BAAK,SAAS,CAAC,yCAAf,eACE,oBAAC,cAAD,EACE,QAAQ,CAAE,kBAAAlE,CAAC,QACT,CAAA,MAAI,CAACyC,2BAAL,CAAiCzC,CAAjC,CAAoC7B,IAApC,CADS,EADb,CAIE,KAAK,CAAEA,IAAI,CAAClH,gBAJd,CAKE,IAAI,CAAC,kBALP,CAME,OAAO,CAAEkH,IAAI,CAAClH,gBANhB,CAOE,QAAQ,KAPV,EADF,CAtBF,CADF,CAoCD,CArCD,CADD,cAwCC,2BAAK,SAAS,CAAC,0BAAf,EACGwN,CAAC,CAAC,SAAD,CADJ,CA7EJ,cAiFE,2BAAK,SAAS,CAAC,4BAAf,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,gCAAf,eACE,4CACE,oBAAC,YAAD,EACE,WAAW,CAAE,WADf,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAC,QAHZ,CAIE,KAAK,CAAC,QAJR,CAKE,OAAO,CAAE,KAAK9E,iBALhB,EADF,CADF,cAUE,+BACG3G,aAAa,cACZ,oBAAC,YAAD,EACE,WAAW,CAAE,YADf,CAEE,MAAM,CAAE,KAFV,CAGE,SAAS,CAAC,wBAHZ,CAIE,KAAK,CAAC,kBAJR,CAKE,OAAO,CAAE,KAAKiH,qBALhB,EADY,CAQV,IATN,CAVF,CADF,CADF,CAjFF,CADD,CA6GG,IA9GN,CADF,CADF,CADF,CADF,cAwHE,oBAAC,WAAD,EACE,SAAS,CAAE,sCADb,CAEE,KAAK,CAAE,CAAEkF,QAAQ,CAAE,KAAZ,CAFT,CAGE,KAAK,CAAErN,WAHT,CAIE,WAAW,CAAE,KAAKkJ,YAJpB,eAME,2BACE,OAAO,CAAE,KAAKA,YADhB,CAEE,SAAS,CAAC,OAFZ,CAGE,GAAG,CAAEvM,SAHP,CAIE,GAAG,CAAC,EAJN,EANF,cAYE,2BAAK,SAAS,CAAC,yBAAf,eACE,2BAAK,SAAS,CAAC,8BAAf,eACE,8BAAKgQ,CAAC,CAAC,kBAAD,CAAN,CADF,CADF,cAIE,2BAAK,SAAS,CAAC,QAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,OAAf,EACGA,CAAC,CAAC,UAAD,CADJ,cAEE,oBAAC,YACC;AADF,EAEE,OAAO,CAAE1M,YAFX,CAGE,KAAK,CAAEG,cAAc,CAACC,QAHxB,CAIE,IAAI,CAAC,UAJP,CAKE,QAAQ,CAAE,KAAKmF,qBALjB,CAME,SAAS,CAAC,mBANZ,EAFF,CADF,cAYE,2BAAK,SAAS,CAAC,OAAf,EACGmH,CAAC,CAAC,SAAD,CADJ,cAEE,6BACE;AACA;AACA,KAAK,CAAEvM,cAAc,CAACE,SAHxB,CAIE,IAAI,CAAC,WAJP,CAKE,QAAQ,CAAE,KAAKuE,YALjB,CAME,SAAS,CAAC,iBANZ,EAFF,CAZF,CADF,CAJF,cA+BE,2BAAK,SAAS,CAAC,uCAAf,eACE,oBAAC,YAAD,EACE,aAAa,CAAEjE,mBADjB,CAEE,YAAY,CAAE,KAAK2E,gBAFrB,CAGE,QAAQ,CAAEvE,IAHZ,EAKGd,aAAa,CAAC2F,MAAd,CAAuB,CAAvB,CACC3F,aAAa,CAACgN,GAAd,CAAkB,SAAC7G,IAAD,CAAO5F,KAAP,CAAiB,CACjC,mBACE,0BACE,SAAS,CAAC,OADZ,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC+I,qBAAL,CAA2BnD,IAA3B,CAAN,EAFX,CAGE,GAAG,CAAE5F,KAHP,eAKE,8BACG,GADH,cAEE,2BAAK,SAAS,CAAC,WAAf,EAA4B4F,IAAI,CAACiH,UAAjC,CAFF,CALF,cASE,8BACG,GADH,cAEE,2BAAK,SAAS,CAAC,WAAf,EAA4BjH,IAAI,CAACgD,SAAjC,CAFF,CATF,cAaE,8BACG,GADH,cAEE,2BAAK,SAAS,CAAC,WAAf,EAA4BhD,IAAI,CAACpH,YAAjC,CAFF,CAbF,cAiBE,8BACG,GADH,cAEE,2BAAK,SAAS,CAAC,YAAf,EAA6BoH,IAAI,CAACkH,UAAlC,CAFF,CAjBF,CADF,CAwBD,CAzBD,CADD,cA4BC,0BAAI,OAAO,CAAC,IAAZ,eACE,2BAAK,SAAS,CAAC,kDAAf,EACGZ,CAAC,CAAC,mBAAD,CADJ,CADF,CAjCJ,CADF,CA/BF,cA0EE,2BAAK,SAAS,CAAC,sCAAf,eACE,oBAAC,YAAD,EACE,WAAW,CAAE,OADf,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAC,aAHZ,CAIE,KAAK,CAAC,QAJR,CAKE,OAAO,CAAE,KAAKzD,YALhB,EADF,CA1EF,CAZF,CAxHF,cAyNE,oBAAC,WAAD,EACE,SAAS,CAAE,+BADb,CAEE,KAAK,CAAE,CAAEmE,QAAQ,CAAE,KAAZ,CAFT,CAGE,KAAK,CAAEnL,mBAHT,CAIE,WAAW,CAAE,sBAAM,CAAE,CAJvB,eAME,2BACE,OAAO,CAAE,KAAK0J,6BADhB,CAEE,SAAS,CAAC,sBAFZ,CAGE,GAAG,CAAEjP,SAHP,CAIE,GAAG,CAAC,EAJN,EANF,cAYE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAIgQ,CAAC,CAAC,oCAAD,CAAL,KADF,CADF,cAIE,2BAAK,SAAS,CAAC,6BAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,WAAW,CAAC,UADd,CAEE,KAAK,CAAEvK,YAFT,CAGE,IAAI,CAAC,cAHP,CAIE,YAAY,CAAC,KAJf,CAKE,QAAQ,CAAE,KAAKyJ,iBALjB,EADF,CADF,CAJF,cAeE,2BAAK,SAAS,CAAC,6BAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,IAAI,CAAE1J,eAAe,CAAG,MAAH,CAAY,UADnC,CAEE,WAAW,CAAC,UAFd,CAGE,KAAK,CAAEE,YAHT,CAIE,IAAI,CAAC,cAJP,CAKE,YAAY,CAAC,KALf,CAME,QAAQ,CAAE,kBAAA6F,CAAC,QAAI,CAAA,MAAI,CAAC2D,iBAAL,CAAuB3D,CAAvB,CAAJ,EANb,EADF,cASE,2BAAK,SAAS,CAAC,+BAAf,eACE,4BACE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC4D,MAAL,CAAY,iBAAZ,CAAN,EADX,CAEE,SAAS,gBACP3J,eAAe,CAAG,KAAH,CAAW,aADnB,yBAFX,EADF,CATF,CADF,CAfF,cAmCE,2BAAK,SAAS,CAAC,0DAAf,eACE,oBAAC,YAAD,EACE,OAAO,CAAE,KAAKwJ,iBADhB,CAEE,KAAK,CAAC,SAFR,CAGE,SAAS,CAAC,mBAHZ,EADF,CAnCF,CADF,CAZF,CAzNF,cAmRE,2BAAK,SAAS,CAAC,QAAf,EACG1K,iBAAiB,cAChB,oBAAC,gBAAD,EACE,iBAAiB,CAAEA,iBADrB,CAEE,qBAAqB,CAAE,KAAKsJ,qBAF9B,CAGE,mBAAmB,CAAE,KAAKnB,mBAH5B,CAIE,cAAc,CACZ,KAAK3K,KAAL,CAAW8H,yBAAX,CAAqCS,YALzC,CAOE,QAAQ,CAAE,KAAKvI,KAAL,CAAW8H,yBAAX,CAAqCyB,QAPjD,CAQE,SAAS,CAAE,KAAKvJ,KAAL,CAAW8H,yBAAX,CAAqCiH,SARlD,CASE,UAAU,CAAE,KAAK/O,KAAL,CAAW8H,yBAAX,CAAqC0B,UATnD,CAUE,cAAc,CACZ,KAAKxJ,KAAL,CAAW8H,yBAAX,CAAqCkH,WAXzC,CAaE,kBAAkB,CAAE,KAbtB,EADgB,CAiBhB,EAlBJ,CAnRF,CAwSG1K,OAAO,CAACC,GAAR,CACC,KAAKvE,KAAL,CAAW8H,yBADZ,CAEC,2BAFD,CAxSH,CA4SG3E,uBAAuB,cACtB,oBAAC,gBAAD,EACE,uBAAuB,CAAEA,uBAD3B,CAEE,sBAAsB,CAAE,KAAK2J,sBAF/B,CAGE,cAAc,CAAE,KAAK9M,KAAL,CAAW8H,yBAAX,CAAqCS,YAHvD,CAIE,QAAQ,CAAE,KAAKvI,KAAL,CAAW8H,yBAAX,CAAqCyB,QAJjD,CAKE,SAAS,CAAE,KAAKvJ,KAAL,CAAW8H,yBAAX,CAAqCiH,SALlD,CAME,UAAU,CAAE,KAAK/O,KAAL,CAAW8H,yBAAX,CAAqC0B,UANnD,CAOE,cAAc,CAAE,KAAKxJ,KAAL,CAAW8H,yBAAX,CAAqCkH,WAPvD,CAQE,kBAAkB,CAAE,IARtB,EADsB,CAYtB,EAxTJ,CA0TG5L,0BAA0B,cACzB,oBAAC,mBAAD,EACE,0BAA0B,CAAEA,0BAD9B,CAEE,yBAAyB,CAAE,KAAKyJ,yBAFlC,CAGE,cAAc,CAAE,KAAK7M,KAAL,CAAW8H,yBAAX,CAAqCS,YAHvD,CAIE,QAAQ,CAAE,KAAKvI,KAAL,CAAW8H,yBAAX,CAAqCyB,QAJjD,CAKE,SAAS,CAAE,KAAKvJ,KAAL,CAAW8H,yBAAX,CAAqCiH,SALlD,CAME,UAAU,CAAE,KAAK/O,KAAL,CAAW8H,yBAAX,CAAqC0B,UANnD,CAOE,cAAc,CAAE,KAAKxJ,KAAL,CAAW8H,yBAAX,CAAqCkH,WAPvD,CAQE,kBAAkB,CAAE,KARtB,EADyB,CAYzB,EAtUJ,CA5gBF,cAs1BE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,yCAAf,eACE,oBAAC,YAAD,EACE,WAAW,MADb,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,QAHZ,CAIE,KAAK,CAAC,SAJR,CAKE,OAAO,CAAE,KAAKlD,qBALhB,EADF,cAQE,oBAAC,YAAD,EACE,WAAW,MADb,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,QAHZ,CAIE,KAAK,CAAC,UAJR,CAKE,OAAO,CAAE,KAAKe,yBALhB,EARF,cAeE,oBAAC,YAAD,EACE,WAAW,MADb,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,QAHZ,CAIE,KAAK,CAAC,SAJR,CAKE,OAAO,CAAE,KAAKC,sBALhB,EAfF,CA6CG,CAACrK,aAAD,EACD,KAAKzC,KAAL,CAAW0M,eADV,EAED,KAAK1M,KAAL,CAAW0M,eAAX,CAA2BjK,aAA3B,CAA2C,CAF1C,cAGC,oBAAC,YAAD,EACE,WAAW,MADb,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,QAHZ,CAIE,KAAK,CAAC,aAJR,CAKE,OAAO,CAAE,KAAKkK,sBALhB,EAHD,CAUG,IAvDN,CAwDGlK,aAAa,cACZ,oBAAC,YAAD,EACE,WAAW,MADb,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,QAHZ,CAIE,KAAK,CAAC,YAJR,CAKE,OAAO,CAAE,KAAKgK,qBALhB,EADY,CAQV,IAhEN,cAiEE,oBAAC,YAAD,EACE,WAAW,MADb,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAC,QAHZ,CAIE,KAAK,CAAC,QAJR,CAKE,OAAO,CAAE,KAAKrD,iBALhB,EAjEF,cAyEE,oBAAC,YAAD,EACE,WAAW,MADb,CAEE,SAAS,CAAE,IAFb,CAGE,KAAK,CAAE3G,aAAa,CAAG,QAAH,CAAc,SAClC;AACA;AACA;AACA;AAPF,CAQE,OAAO,CAAEjE,CAAC,CAACkI,QAAF,sEAAW,qKACZ,CAAA,MAAI,CAACsG,qBAAL,EADY,2DAAX,GAEN,GAFM,CARX,EAzEF,CADF,CAt1BF,CADF,CAi8BD,CArvEH,wCAAgD3P,SAAhD,EAwvEA,GAAM4R,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAhP,KAAK,QAAK,CAChC+N,cAAc,CAAE/N,KAAK,CAACuF,WAAN,CAAkBwI,cADF,CAEhCkB,iBAAiB,CAAEjP,KAAK,CAACuF,WAAN,CAAkB0J,iBAFL,CAGhCjB,qBAAqB,CAAEhO,KAAK,CAACuF,WAAN,CAAkByI,qBAHT,CAIhCV,eAAe,CAAEtN,KAAK,CAACuF,WAAN,CAAkB+H,eAJH,CAKhCzF,yBAAyB,CAAE7H,KAAK,CAACuF,WAAN,CAAkBsC,yBALb,CAMhCH,wBAAwB,CAAE1H,KAAK,CAACuF,WAAN,CAAkBmC,wBANZ,CAOhC+E,eAAe,CAAEzM,KAAK,CAACuF,WAAN,CAAkBkH,eAPH,CAQhCyB,WAAW,CAAElO,KAAK,CAACkP,SAAN,CAAgBC,YARG,CAAL,EAA7B,CAWA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAOtR,CAAAA,kBAAkB,CACvB,CACEH,UAAU,CAAVA,UADF,CAEEC,wBAAwB,CAAxBA,wBAFF,CAGEM,YAAY,CAAZA,YAHF,CAIEC,eAAe,CAAfA,eAJF,CAKEC,cAAc,CAAdA,cALF,CADuB,CAQvBgR,QARuB,CAAzB,CAUD,CAXD,CAaA,MAAO,IAAMC,CAAAA,qBAAqB,CAAGvQ,eAAe,GAClDjB,OAAO,CAACkR,eAAD,CAAkBI,kBAAlB,CAAP,CAA6CtP,0BAA7C,CADkD,CAA7C","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalModal,\r\n  NormalInput,\r\n  NormalDateTime,\r\n  NormalCheckbox,\r\n  NormalTimePicker,\r\n} from \"component/common\";\r\nimport \"./style.scss\";\r\nimport {\r\n  updateForm,\r\n  getSelectedTreatmentList,\r\n} from \"redux/actions/appointment\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport req_therapist from \"assets/images/app-icons/1.png\";\r\nimport {\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { TableWrapper } from \"component/common\";\r\nimport { TreatmentPackage } from \"./modal/index\";\r\nimport { Toast } from \"service/toast\";\r\nimport { MobileAppointmentForm } from \"./MobileAppointmentForm\";\r\nimport { history } from \"helpers\";\r\nimport { TreatmentHistory } from \"component/Admin/NewAppointment/NewListAppointment/modal/TreatmentHistory\";\r\nimport { UpcomingAppointment } from \"component/Admin/NewAppointment/NewListAppointment/modal/UpcomingAppointment\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { AiOutlinePlus, AiOutlineMinus } from \"react-icons/ai\";\r\n\r\nconst getTime = date => {\r\n  debugger;\r\n  var now = new Date(date);\r\n  var hour = now.getHours();\r\n  var minute = now.getMinutes();\r\n  var second = now.getSeconds();\r\n  var ap = \"AM\";\r\n  if (hour > 11) {\r\n    ap = \"PM\";\r\n  }\r\n  if (hour > 12) {\r\n    hour = hour - 12;\r\n  }\r\n  if (hour == 0) {\r\n    hour = 12;\r\n  }\r\n  if (hour < 10) {\r\n    hour = \"0\" + hour;\r\n  }\r\n  if (minute < 10) {\r\n    minute = \"0\" + minute;\r\n  }\r\n  if (second < 10) {\r\n    second = \"0\" + second;\r\n  }\r\n  var timeString = hour + \":\" + minute + \" \" + ap;\r\n  return timeString;\r\n};\r\n\r\nexport class MobileSelectTreatmentClass extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.child = React.createRef();\r\n  }\r\n  state = {\r\n    treatmentDetail: [],\r\n    formFields: {\r\n      appt_id: \"\",\r\n      start_time: \"\",\r\n      end_time: \"\",\r\n      Item_Codeid: null,\r\n      add_duration: \"\",\r\n      emp_no: 0,\r\n      requesttherapist: false,\r\n      Item_CodeName: \"\",\r\n      edit_remark: \"\",\r\n      recur_days: null,\r\n      recur_qty: null,\r\n      item_text: null,\r\n      checktype: \"\",\r\n      treat_parentcode: null,\r\n    },\r\n    selectedList: [\r\n      {\r\n        appt_id: \"\",\r\n        start_time: \"\",\r\n        end_time: \"\",\r\n        Item_Codeid: null,\r\n        add_duration: \"\",\r\n        emp_no: 0,\r\n        requesttherapist: false,\r\n        Item_CodeName: \"\",\r\n        edit_remark: \"\",\r\n        recur_days: null,\r\n        recur_qty: null,\r\n        item_text: null,\r\n        checktype: \"\",\r\n        treat_parentcode: null,\r\n      },\r\n    ],\r\n    outletOption: [],\r\n    staffOption: [],\r\n    roomOption: [],\r\n    list: [],\r\n    isOpenModal: false,\r\n    categoryList: [],\r\n    treatmentList: [],\r\n    siteList: [],\r\n    treatmentField: {\r\n      category: \"\",\r\n      treatment: \"\",\r\n    },\r\n    timeDropdown: [],\r\n    duration: [],\r\n    index: null,\r\n    search: \"\",\r\n    selectTreatmentId: \"\",\r\n    treatmentListHeader: [\r\n      { label: \"Category\", className: \"w-50\" },\r\n      { label: \"Service\", className: \"w-75\" },\r\n      { label: \"Duration\", className: \"w-25\" },\r\n      {\r\n        label: \"price\",\r\n        className: \"w-50\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n    ],\r\n    meta: {},\r\n    isTreatementModal: false,\r\n    appointmentId: null,\r\n    PackageIndex: 0,\r\n    selectedRec_days: null,\r\n    selectedRec_qty: null,\r\n    recurringList: [],\r\n    recurringSelectedItems: [],\r\n    recurringSelectAll: false,\r\n    settingData: {},\r\n    PasteAppointmentId: 0,\r\n    InitAppointmentStatus: \"\",\r\n    isTreatmentHistoryModal: false,\r\n    isUpcomingAppointmentModal: false,\r\n    freeTextStockId: \"\",\r\n    headerDetails: [\r\n      { label: \"Start\", width: \"100px\" },\r\n      { label: \"End\" },\r\n      { label: \"Service\", width: \"260px\" },\r\n      { label: \"Duration\" },\r\n      { label: \"Treatment Staff\" },\r\n      { label: \"therapist\", width: \"35px\" },\r\n      { label: \"Recur Days\", width: \"100px\" },\r\n      { label: \"Recur Qty\", width: \"100px\" },\r\n      { label: \"Action\" },\r\n    ],\r\n    activeRow: 0,\r\n    isLoginConfirmation: false,\r\n    passwordVisible: false,\r\n    dragusername: \"\",\r\n    dragpassword: \"\",\r\n  };\r\n  showErrorMessage = () => {\r\n    this.child.onFocus();\r\n  };\r\n  componentDidMount() {\r\n    this.search({});\r\n    this.handleItemSettings();\r\n    let { categoryList, staffOption, selectedList, formFields, duration } =\r\n      this.state;\r\n\r\n    let { basicApptDetail, AppointmentCopy } = this.props;\r\n    console.log(AppointmentCopy, \"Basic app detail data\");\r\n\r\n    if (basicApptDetail.appt_id) {\r\n      this.setState({ appointmentId: basicApptDetail.appt_id });\r\n      this.handleRenderApptDetail(basicApptDetail.appt_id, false);\r\n    } else {\r\n      let { selectedList } = this.state;\r\n      selectedList[0][\"start_time\"] = basicApptDetail\r\n        ? this.timeToDateFormat(basicApptDetail.time)\r\n        : \"\";\r\n      selectedList[0][\"emp_no\"] = basicApptDetail\r\n        ? basicApptDetail.staff_id\r\n        : 0;\r\n      this.setState({\r\n        selectedList,\r\n      });\r\n      this.props.updateForm(\"treatmentList\", selectedList);\r\n    }\r\n    this.props.getCommonApi(`itemdept/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          categoryList.push({ value: value.id, label: value.itm_desc });\r\n        }\r\n        this.setState({ categoryList });\r\n      }\r\n    });\r\n    this.props\r\n      .getCommonApi(\r\n        `appointment/Staffs/?Outlet=${\r\n          basicApptDetail.branchId\r\n        }&date=${dateFormat(new Date())}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            staffOption.push({ value: value.id, label: value.emp_name });\r\n          }\r\n          this.setState({ staffOption });\r\n        }\r\n      });\r\n    this.props.getCommonApi(`treatment/Duration/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          duration.push({ value: value, label: value });\r\n        }\r\n        this.setState({ duration });\r\n      }\r\n    });\r\n    this.getStaffAvailability();\r\n    this.getFreetextStockid();\r\n  }\r\n  getFreetextStockid = async => {\r\n    let { treatmentField, search, selectTreatmentId } = this.state;\r\n    let page = 1,\r\n      limit = 10;\r\n    this.props\r\n      .getCommonApi(\r\n        `stocklist/?Item_Deptid=${selectTreatmentId}&search=${search}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(res => {\r\n        console.log(res, \"stocklistfreetextresponse\");\r\n        let { data, status } = res;\r\n        if (status === 200) {\r\n          if (data && data.stock_id && data.stock_id !== \" \") {\r\n            this.setState({ freeTextStockId: data.stock_id });\r\n          } else {\r\n            Toast({\r\n              type: \"error\",\r\n              message: \"Stock Id not found for free text item\",\r\n            });\r\n          }\r\n        }\r\n      });\r\n  };\r\n  timeToDateFormat = TimeValue => {\r\n    let time = String(TimeValue).split(\":\");\r\n    let newTime = new Date(new Date().setHours(time[0], time[1], 0, 0));\r\n    return newTime;\r\n  };\r\n  handleRenderApptDetail = async (appt_id, copy) => {\r\n    let { selectedList, InitAppointmentStatus } = this.state;\r\n\r\n    this.props.getCommonApi(`appointmentedit/${appt_id}/`).then(async key => {\r\n      let { status, data } = key;\r\n      console.log(data, \"renderappointmentdetail\");\r\n      if (status === 200) {\r\n        if (data.treatment) {\r\n          InitAppointmentStatus = data.appointment.appt_status;\r\n          selectedList = [];\r\n          await this.setState({\r\n            selectedList: selectedList,\r\n            InitAppointmentStatus,\r\n          });\r\n          this.props.updateForm(\"treatmentList\", selectedList);\r\n          for (let treat of data.treatment) {\r\n            let startTime = \"\";\r\n            let endTime = \"\";\r\n            let apptid = null;\r\n            if (copy) {\r\n              startTime = this.timeToDateFormat(treat.start_time);\r\n              endTime = treat.end_time;\r\n              apptid = null;\r\n            } else {\r\n              startTime = this.timeToDateFormat(treat.start_time);\r\n              endTime = treat.end_time;\r\n              apptid = treat.appt_id;\r\n            }\r\n            selectedList.push({\r\n              start_time: startTime,\r\n              end_time: endTime,\r\n              emp_no: treat.emp_id,\r\n              appt_id: apptid,\r\n              Item_Codeid: treat.item_id,\r\n              Item_CodeName: treat.item_name,\r\n              add_duration: treat.add_duration,\r\n              requesttherapist: treat.requesttherapist,\r\n              recur_days: treat.recur_days,\r\n              recur_qty: treat.recur_qty,\r\n              item_text: treat.item_name,\r\n              checktype: treat.checktype,\r\n              treat_parentcode: treat.treat_parentcode,\r\n            });\r\n            this.setState({\r\n              selectedList,\r\n            });\r\n          }\r\n          this.props.updateForm(\"treatmentList\", selectedList);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  handleItemSettings = () => {\r\n    let { settingData } = this.state;\r\n    this.props.getCommonApi(`userlist/`).then(key => {\r\n      let { status, data } = key;\r\n      console.log(key, \"settingsData appointmentCreate\");\r\n      if (status === 200) {\r\n        settingData = data;\r\n        this.setState({ settingData });\r\n      }\r\n    });\r\n  };\r\n  componentWillMount() {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  }\r\n\r\n  getStaffAvailability = () => {\r\n    this.props\r\n      .getCommonApi(\r\n        `staffsavailable/?Appt_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          // for (let value of data) {\r\n          //     staffList.push({ value: value.id, label: value.emp_name })\r\n          // }\r\n          this.setState({ list: data });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n    console.log(event.target.value, event.target, event, \"dfhdfjghkjfghj\");\r\n    let { treatmentField } = this.state;\r\n    treatmentField[\"treatment\"] = event.target.value;\r\n    this.setState({ search: event.target.value, treatmentField });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        let data = { search: searchString };\r\n        // this.queryHandler(data)\r\n        this.search(data);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  search = data => {\r\n    let { page = 1, limit = 10, search = \"\" } = data;\r\n    let { selectTreatmentId } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `stocklist/?Item_Deptid=${selectTreatmentId}&search=${search}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(res => {\r\n        console.log(res, \"treatmentList treatment_parentcode\");\r\n        if (res.status === 200) {\r\n          this.setState({\r\n            treatmentList: res.data.dataList,\r\n            meta: res.data.meta.pagination,\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  handlePagination = page => {\r\n    this.search(page);\r\n  };\r\n\r\n  handleChangeTreatment = async ({ target: { value, name } }) => {\r\n    let { treatmentField, search, selectTreatmentId } = this.state;\r\n    console.log(\"uihwkjrwkej\", name, value);\r\n    treatmentField[name] = value;\r\n    if (name === \"category\") {\r\n      selectTreatmentId = value;\r\n    } else if (name === \"treatment\") {\r\n      search = value;\r\n    }\r\n    await this.setState({\r\n      treatmentField,\r\n      selectTreatmentId,\r\n      search,\r\n    });\r\n\r\n    let page = 1,\r\n      limit = 10;\r\n    this.props\r\n      .getCommonApi(\r\n        `stocklist/?Item_Deptid=${selectTreatmentId}&search=${search}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(res => {\r\n        console.log(res, \"stocklis\");\r\n        if (res.status === 200) {\r\n          this.setState({\r\n            treatmentList: res.data.dataList,\r\n            meta: res.data.meta.pagination,\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }, index) => {\r\n    let { selectedList, appointmentId, freeTextStockId } = this.state;\r\n\r\n    if (name === \"add_duration\") {\r\n      //if (appointmentId) {\r\n      selectedList[index][\"end_time\"] = this.addTimes(\r\n        this.getHoursFromDate(selectedList[index][\"start_time\"]),\r\n        value ? value : \"00:00\"\r\n      );\r\n      // } else {\r\n      //   selectedList[index][\"end_time\"] = this.addTimes(\r\n      //     selectedList[index][\"start_time\"],\r\n      //     value ? value : \"00:00\"\r\n      //   );\r\n      // }\r\n      selectedList[index][\"add_duration\"] = value;\r\n      if (selectedList.length - 1 > index) {\r\n        let endTime = \"\";\r\n        //if (appointmentId) {\r\n        endTime = this.timeToDateFormat(selectedList[index][\"end_time\"]);\r\n        // } else {\r\n        //   endTime = selectedList[index][\"end_time\"];\r\n        // }\r\n        selectedList[index + 1][\"start_time\"] = endTime;\r\n        if (selectedList[index + 1][\"add_duration\"] !== \"\") {\r\n          selectedList[index + 1][\"end_time\"] = this.addTimes(\r\n            selectedList[index][\"end_time\"],\r\n            selectedList[index + 1][\"add_duration\"]\r\n          );\r\n        }\r\n      }\r\n    } else if (name === \"Item_CodeName\") {\r\n      selectedList[index][\"Item_Codeid\"] = freeTextStockId;\r\n      selectedList[index][\"Item_CodeName\"] = value;\r\n      selectedList[index][\"item_text\"] = value;\r\n      selectedList[index][\"checktype\"] = \"freetext\";\r\n      selectedList[index][\"treat_parentcode\"] = null;\r\n    } else if (name === \"recur_days\" || name === \"recur_qty\") {\r\n      if (value <= 0 || value === \"\") {\r\n        selectedList[index][name] = null;\r\n      } else {\r\n        selectedList[index][name] = Number(value);\r\n      }\r\n    } else {\r\n      selectedList[index][name] = value;\r\n    }\r\n\r\n    await this.setState({\r\n      selectedList,\r\n    });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  handleMultiSelect = data => {\r\n    let { formFields } = this.state;\r\n    let list = [];\r\n    for (let key of data) {\r\n      list.push(key.value);\r\n    }\r\n    formFields[\"emp_no\"] = list;\r\n    this.setState({ formFields });\r\n    console.log(formFields, \"oyokkjk\");\r\n  };\r\n\r\n  // handleDatePick = async (name, value) => {\r\n  //   debugger;\r\n  //   let { formFields, selectedList } = this.state;\r\n  //   let time = this.getHoursFromDate(value);\r\n  //   formFields[\"start_time\"] = time;\r\n  //   selectedList[0][\"start_time\"] = time ? time : formFields[\"start_time\"];\r\n  //   if (time) {\r\n  //     formFields[\"end_time\"] = this.addTimes(\r\n  //       formFields[\"start_time\"],\r\n  //       formFields[\"add_duration\"]\r\n  //     );\r\n  //     selectedList[0][\"end_time\"] = this.addTimes(\r\n  //       selectedList[0][\"start_time\"],\r\n  //       formFields[\"add_duration\"]\r\n  //     );\r\n  //   }\r\n  //   await this.setState({\r\n  //     formFields,\r\n  //     selectedList,\r\n  //   });\r\n  //   await this.props.updateForm(\"treatmentList\", selectedList);\r\n  // };\r\n\r\n  handleDatePick = async ({ target: { value, name } }, index) => {\r\n    let { selectedList, appointmentId } = this.state;\r\n    let time = this.getHoursFromDate(value);\r\n    let duration = \"\";\r\n    if (selectedList[index][\"add_duration\"] !== \"\") {\r\n      duration = selectedList[index][\"add_duration\"];\r\n    } else {\r\n      duration = \"00:00\";\r\n    }\r\n    selectedList[index][\"start_time\"] = value\r\n      ? value\r\n      : this.timeToDateFormat(selectedList[index][\"start_time\"]);\r\n    if (time) {\r\n      selectedList[index][\"end_time\"] = this.addTimes(time, duration);\r\n    }\r\n    if (selectedList.length - 1 > index) {\r\n      let endTime = \"\";\r\n      if (appointmentId) {\r\n        endTime = this.timeToDateFormat(selectedList[index][\"end_time\"]);\r\n      } else {\r\n        endTime = selectedList[index][\"end_time\"];\r\n      }\r\n      selectedList[index + 1][\"start_time\"] = endTime;\r\n      if (selectedList[index + 1][\"add_duration\"] !== \"\") {\r\n        selectedList[index + 1][\"end_time\"] = this.addTimes(\r\n          selectedList[index][\"end_time\"],\r\n          selectedList[index + 1][\"add_duration\"]\r\n        );\r\n      }\r\n    }\r\n    await this.setState({\r\n      selectedList,\r\n    });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  getHoursFromDate = date => {\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let hours = hour > 9 ? hour : \"0\" + hour;\r\n    let minutes = minute > 9 ? minute : \"0\" + minute;\r\n    return hours + \":\" + minutes;\r\n  };\r\n\r\n  stafflistvalidation = appointmentTreatmentList => {\r\n    if (appointmentTreatmentList.length > 0) {\r\n      for (let item of appointmentTreatmentList) {\r\n        if (!item.emp_no || item.emp_no === \"\" || item.emp_no === null) {\r\n          Toast({ type: \"error\", message: \"Please select Staff\" });\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n  handleUpdate = () => {\r\n    let { appointmentCustomerDetail, appointmentTreatmentList } = this.props;\r\n    let { appointmentId, InitAppointmentStatus, dragusername, dragpassword } =\r\n      this.state;\r\n    let finalTreatment = [];\r\n    for (let TreatmentList of appointmentTreatmentList) {\r\n      finalTreatment.push({\r\n        appt_id: TreatmentList.appt_id,\r\n        start_time: this.getHoursFromDate(TreatmentList.start_time),\r\n        end_time: TreatmentList.end_time,\r\n        add_duration: TreatmentList.add_duration,\r\n        item_id: TreatmentList.Item_Codeid,\r\n        item_text: TreatmentList.item_text,\r\n        emp_id: TreatmentList.emp_no,\r\n        requesttherapist: TreatmentList.requesttherapist,\r\n        recur_qty: Number(\"\"),\r\n        recur_days: \"\",\r\n        checktype: TreatmentList.checktype,\r\n        treat_parentcode: TreatmentList.treat_parentcode,\r\n      });\r\n    }\r\n    console.log(finalTreatment, \"filteredupdateFunctionAppointmentData\");\r\n    let orig_remark = \"\";\r\n    let AppStatus = \"\";\r\n    if (appointmentCustomerDetail.remark_setting) {\r\n      orig_remark = null;\r\n    } else {\r\n      orig_remark = appointmentCustomerDetail.new_remark;\r\n    }\r\n    if (\r\n      String(InitAppointmentStatus).toUpperCase() === \"ARRIVED\" &&\r\n      String(appointmentCustomerDetail.bookingStatus).toUpperCase() ===\r\n        \"ARRIVED\"\r\n    ) {\r\n      AppStatus = null;\r\n    } else {\r\n      AppStatus = appointmentCustomerDetail.bookingStatus;\r\n    }\r\n    if (\r\n      appointmentCustomerDetail.customerName &&\r\n      appointmentCustomerDetail.bookingStatus\r\n    ) {\r\n      if (this.stafflistvalidation(appointmentTreatmentList)) {\r\n        try {\r\n          let data = {\r\n            appointment: {\r\n              appt_date: dateFormat(\r\n                new Date(appointmentCustomerDetail.appointmentDate),\r\n                \"yyyy-mm-dd\"\r\n              ),\r\n              appt_status: AppStatus,\r\n              channel_id: Number(appointmentCustomerDetail.Appt_typeid),\r\n              ori_remark: orig_remark,\r\n              edit_remark: appointmentCustomerDetail.edit_remark,\r\n              source_id: Number(appointmentCustomerDetail.Source_Codeid),\r\n              Room_Codeid: Number(appointmentCustomerDetail.Room_Codeid),\r\n              sec_status: appointmentCustomerDetail.sec_status,\r\n              remark_setting: appointmentCustomerDetail.remark_setting,\r\n              cart_create: appointmentCustomerDetail.cart_create,\r\n              username: dragusername,\r\n              password: dragpassword,\r\n            },\r\n            treatment: finalTreatment,\r\n          };\r\n\r\n          this.props\r\n            .commonPatchApi(`appointmentedit/${appointmentId}/`, data)\r\n            .then(async res => {\r\n              console.log(res, \"cart check while update booking\");\r\n              if (res.status === 200) {\r\n                this.handleCloseDialog();\r\n                this.handleSaveorUpdate();\r\n              } else if (res.status === 201) {\r\n                let formFields = { custId: 0, custName: \"\", cust_refer: \"\" };\r\n                formFields[\"custId\"] = appointmentCustomerDetail.customerName;\r\n                formFields[\"custName\"] = appointmentCustomerDetail.custName;\r\n                formFields[\"cust_refer\"] = appointmentCustomerDetail.cust_refer;\r\n                await this.props.updateForm(\"basicApptDetail\", formFields);\r\n                this.props\r\n                  .getCommonApi(\r\n                    `itemcart/Check/?cart_date=${dateFormat(\r\n                      new Date(),\r\n                      \"yyyy-mm-dd\"\r\n                    )}&cust_noid=${appointmentCustomerDetail.customerName}`\r\n                  )\r\n                  .then(res => {\r\n                    history.push(\"/admin/cart\");\r\n                  });\r\n              }\r\n            });\r\n        } catch (e) {\r\n          console.log(\"updateappointmentcatch\", e);\r\n        }\r\n      }\r\n    } else {\r\n      this.showErrorMessage();\r\n    }\r\n  };\r\n  // handleUpdate = () => {\r\n  //   let { appointmentCustomerDetail, appointmentTreatmentList } = this.props;\r\n  //   let { appointmentId, selectedRec_days, selectedRec_qty } = this.state;\r\n  //   let orig_remark = \"\";\r\n  //   if (appointmentCustomerDetail.remark_setting) {\r\n  //     orig_remark = null;\r\n  //   } else {\r\n  //     orig_remark = appointmentCustomerDetail.new_remark;\r\n  //   }\r\n  //   if (\r\n  //     appointmentCustomerDetail.customerName &&\r\n  //     appointmentCustomerDetail.bookingStatus\r\n  //   ) {\r\n  //     if (this.stafflistvalidation(appointmentTreatmentList)) {\r\n  //       let data = {\r\n  //         appt_date: dateFormat(\r\n  //           new Date(appointmentCustomerDetail.appointmentDate),\r\n  //           \"yyyy-mm-dd\"\r\n  //         ),\r\n  //         Room_Codeid: appointmentCustomerDetail.Room_Codeid,\r\n  //         appt_status: appointmentCustomerDetail.bookingStatus,\r\n  //         sec_status: appointmentCustomerDetail.sec_status,\r\n  //         ori_remark: orig_remark,\r\n  //         edit_remark: appointmentCustomerDetail.edit_remark,\r\n  //         start_time: this.getHoursFromDate(\r\n  //           appointmentTreatmentList[0].start_time\r\n  //         ),\r\n  //         end_time: appointmentTreatmentList[0].end_time,\r\n  //         item_id: appointmentTreatmentList[0].Item_Codeid,\r\n  //         add_duration: appointmentTreatmentList[0].add_duration,\r\n  //         emp_id: appointmentTreatmentList[0].emp_no,\r\n  //         requesttherapist: appointmentTreatmentList[0].requesttherapist,\r\n  //         item_text: appointmentTreatmentList[0].item_text,\r\n  //         recur_days:\r\n  //           selectedRec_days === appointmentTreatmentList[0].recur_days ||\r\n  //           appointmentTreatmentList[0].recur_days === \"\" ||\r\n  //           appointmentTreatmentList[0].recur_days <= 0\r\n  //             ? null\r\n  //             : appointmentTreatmentList[0].recur_days,\r\n  //         recur_qty:\r\n  //           Number(selectedRec_qty) ===\r\n  //             Number(appointmentTreatmentList[0].recur_qty) ||\r\n  //           Number(appointmentTreatmentList[0].recur_qty) === \"\" ||\r\n  //           Number(appointmentTreatmentList[0].recur_qty) <= 0\r\n  //             ? null\r\n  //             : Number(appointmentTreatmentList[0].recur_qty),\r\n  //         checktype: appointmentTreatmentList[0].checktype,\r\n  //         treat_parentcode: appointmentTreatmentList[0].treat_parentcode,\r\n  //         remark_setting: appointmentCustomerDetail.remark_setting,\r\n  //       };\r\n  //       console.log(data, \"UpdatedappointmentTreatmentListWhenupdate\");\r\n\r\n  //       this.props\r\n  //         .commonPatchApi(`appointmentresources/${appointmentId}/`, data)\r\n  //         .then(async res => {\r\n  //           console.log(res, \"cart check while update booking\");\r\n  //           if (res.status === 200) {\r\n  //             this.handleCloseDialog();\r\n  //             this.handleSaveorUpdate();\r\n  //           } else if (res.status === 201) {\r\n  //             // this.handleCloseDialog();\r\n  //             // this.handleSaveorUpdate();\r\n  //             let formFields = { custId: 0, custName: \"\" };\r\n  //             formFields[\"custId\"] = appointmentCustomerDetail.customerName;\r\n  //             formFields[\"custName\"] = appointmentCustomerDetail.custName;\r\n\r\n  //             await this.props.updateForm(\"basicApptDetail\", formFields);\r\n  //             this.props\r\n  //               .getCommonApi(\r\n  //                 `itemcart/Check/?cart_date=${dateFormat(\r\n  //                   new Date(),\r\n  //                   \"yyyy-mm-dd\"\r\n  //                 )}&cust_noid=${appointmentCustomerDetail.customerName}`\r\n  //               )\r\n  //               .then(res => {\r\n  //                 history.push(\"/admin/cart\");\r\n  //               });\r\n  //           }\r\n  //         });\r\n  //     }\r\n  //   } else {\r\n  //     this.showErrorMessage();\r\n  //   }\r\n  // };\r\n  handleRecurringUpdate = () => {\r\n    let { appointmentCustomerDetail, appointmentTreatmentList } = this.props;\r\n    let {\r\n      appointmentId,\r\n      selectedRec_days,\r\n      selectedRec_qty,\r\n      recurringList,\r\n      recurringSelectAll,\r\n    } = this.state;\r\n    let finalRecurring = [];\r\n    for (var recurringItem of recurringList) {\r\n      if (recurringItem.selected) {\r\n        let value = recurringItem.id;\r\n        finalRecurring.push(value);\r\n      }\r\n    }\r\n    console.log(finalRecurring, \"finalrecurringList\");\r\n    if (\r\n      appointmentCustomerDetail.customerName &&\r\n      appointmentCustomerDetail.bookingStatus\r\n    ) {\r\n      if (this.stafflistvalidation(appointmentTreatmentList)) {\r\n        let data = {\r\n          appt_date: dateFormat(\r\n            new Date(appointmentCustomerDetail.appointmentDate),\r\n            \"yyyy-mm-dd\"\r\n          ),\r\n          Room_Codeid: appointmentCustomerDetail.Room_Codeid,\r\n          appt_status: appointmentCustomerDetail.bookingStatus,\r\n          sec_status: appointmentCustomerDetail.sec_status,\r\n          edit_remark: appointmentCustomerDetail.edit_remark,\r\n          start_time: this.getHoursFromDate(\r\n            appointmentTreatmentList[0].start_time\r\n          ),\r\n          end_time: appointmentTreatmentList[0].end_time,\r\n          item_id: appointmentTreatmentList[0].Item_Codeid,\r\n          add_duration: appointmentTreatmentList[0].add_duration,\r\n          emp_id: appointmentTreatmentList[0].emp_no,\r\n          requesttherapist: appointmentTreatmentList[0].requesttherapist,\r\n          item_text: appointmentTreatmentList[0].item_text,\r\n          recur_days:\r\n            selectedRec_days === appointmentTreatmentList[0].recur_days ||\r\n            appointmentTreatmentList[0].recur_days === \"\" ||\r\n            appointmentTreatmentList[0].recur_days <= 0\r\n              ? null\r\n              : appointmentTreatmentList[0].recur_days,\r\n          recur_qty:\r\n            Number(selectedRec_qty) ===\r\n              Number(appointmentTreatmentList[0].recur_qty) ||\r\n            Number(appointmentTreatmentList[0].recur_qty) === \"\" ||\r\n            Number(appointmentTreatmentList[0].recur_qty) <= 0\r\n              ? null\r\n              : Number(appointmentTreatmentList[0].recur_qty),\r\n          recur_ids: finalRecurring,\r\n        };\r\n        console.log(data, \"UpdatedappointmentTreatmentListWhenupdate\");\r\n        if (recurringSelectAll) {\r\n          this.props\r\n            .commonPatchApi(\r\n              `appointmentrecur/${appointmentId}/?type=${`all`} `,\r\n              data\r\n            )\r\n            .then(async res => {\r\n              if (res.status === 200) {\r\n                this.handleCloseDialog();\r\n                this.handleSaveorUpdate();\r\n              }\r\n            });\r\n        } else {\r\n          this.props\r\n            .commonPatchApi(`appointmentrecur/${appointmentId}/`, data)\r\n            .then(async res => {\r\n              console.log(res, \"type all clicked result\");\r\n              if (res.status === 200) {\r\n                this.handleCloseDialog();\r\n                this.handleSaveorUpdate();\r\n              }\r\n            });\r\n        }\r\n      }\r\n    } else {\r\n      this.showErrorMessage();\r\n    }\r\n  };\r\n  handleSubmit = () => {\r\n    // this.props.handleConfirmBooking()\r\n    let { appointmentCustomerDetail, appointmentTreatmentList } = this.props;\r\n    let { dragpassword, dragusername } = this.state;\r\n    console.log(appointmentCustomerDetail, \"appointmentcustomerdetailwhenSave\");\r\n    console.log(\r\n      appointmentTreatmentList,\r\n      \"savedappointmentTreatmentListWhenSave\"\r\n    );\r\n\r\n    let finalTreatment = [];\r\n    for (let TreatmentList of appointmentTreatmentList) {\r\n      finalTreatment.push({\r\n        appt_id: TreatmentList.appt_id,\r\n        start_time: this.getHoursFromDate(TreatmentList.start_time),\r\n        end_time: TreatmentList.end_time,\r\n        add_duration: TreatmentList.add_duration,\r\n        Item_Codeid: TreatmentList.Item_Codeid,\r\n        item_text: TreatmentList.item_text,\r\n        emp_no: TreatmentList.emp_no,\r\n        requesttherapist: TreatmentList.requesttherapist,\r\n        recur_qty: TreatmentList.recur_qty,\r\n        recur_days: TreatmentList.recur_days,\r\n        checktype: TreatmentList.checktype,\r\n        treat_parentcode: TreatmentList.treat_parentcode,\r\n      });\r\n    }\r\n    if (\r\n      appointmentCustomerDetail.customerName &&\r\n      appointmentCustomerDetail.bookingStatus\r\n    ) {\r\n      if (this.stafflistvalidation(appointmentTreatmentList)) {\r\n        let data = {\r\n          Appointment: {\r\n            appt_date: dateFormat(\r\n              new Date(appointmentCustomerDetail.appointmentDate),\r\n              \"yyyy-mm-dd\"\r\n            ),\r\n            Appt_typeid: appointmentCustomerDetail.Appt_typeid,\r\n            cust_noid: appointmentCustomerDetail.customerName,\r\n            new_remark: appointmentCustomerDetail.new_remark,\r\n            // emp_noid: appointmentCustomerDetail.emp_id,\r\n            Source_Codeid: appointmentCustomerDetail.Source_Codeid,\r\n            Room_Codeid: appointmentCustomerDetail.Room_Codeid,\r\n            appt_status: appointmentCustomerDetail.bookingStatus,\r\n            sec_status: appointmentCustomerDetail.sec_status,\r\n            ItemSite_Codeid: appointmentCustomerDetail.ItemSite_Codeid,\r\n            walkin: appointmentCustomerDetail.walkin,\r\n            username: dragusername,\r\n            password: dragpassword,\r\n          },\r\n          Treatment: finalTreatment,\r\n        };\r\n\r\n        this.props.commonCreateApi(`appointment/`, data).then(async res => {\r\n          if (res.status === 201) {\r\n            this.handleCloseDialog();\r\n            this.handleSaveorUpdate();\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      this.showErrorMessage();\r\n    }\r\n  };\r\n\r\n  getDateTime = data => {\r\n    let date = new Date(data);\r\n    date = String(date).split(\" \");\r\n    let date1 = date[2] + \"th \" + date[1] + \", \" + date[3];\r\n    let time = date[4].split(\":\");\r\n    let time1 =\r\n      String(Number(time[0]) > 12 ? Number(time[0]) - 12 : time[0]) +\r\n      \":\" +\r\n      time[1] +\r\n      (Number(time[0]) > 12 ? \"PM\" : \"AM\");\r\n    return time1 + \", \" + date1;\r\n  };\r\n\r\n  handleDialog = () => {\r\n    this.setState({ isOpenModal: false, index: null });\r\n  };\r\n\r\n  handleMultipleCustomer = () => {\r\n    this.setState({ isOpenModal: false });\r\n  };\r\n\r\n  handleSelectPackage = async data => {\r\n    debugger;\r\n    let { selectedList, PackageIndex, appointmentId } = this.state;\r\n\r\n    if (PackageIndex === 0 && selectedList[0][\"Item_CodeName\"] === \"\") {\r\n      selectedList[0][\"start_time\"] = selectedList[0][\"start_time\"];\r\n      // if (appointmentId) {\r\n      selectedList[0][\"end_time\"] = this.addTimes(\r\n        this.getHoursFromDate(selectedList[0][\"start_time\"]),\r\n        data.add_duration ? data.add_duration : \"00:00\"\r\n      );\r\n      // } else {\r\n      //   selectedList[0][\"end_time\"] = this.addTimes(\r\n      //     selectedList[0][\"start_time\"],\r\n      //     data.add_duration ? data.add_duration : \"00:00\"\r\n      //   );\r\n      // }\r\n      selectedList[0][\"Item_Codeid\"] = data.id;\r\n      selectedList[0][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[0][\"item_text\"] = null;\r\n      selectedList[0][\"add_duration\"] = data.add_duration;\r\n      selectedList[0][\"checktype\"] = \"package\";\r\n      selectedList[0][\"treat_parentcode\"] = data.treatment_parentcode;\r\n\r\n      await this.setState({\r\n        selectedList,\r\n        PackageIndex: PackageIndex + 1,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else if (selectedList[selectedList.length - 1][\"Item_CodeName\"] === \"\") {\r\n      selectedList[selectedList.length - 1][\"start_time\"] =\r\n        selectedList[selectedList.length - 1][\"start_time\"];\r\n      // if (appointmentId) {\r\n      selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\r\n        this.getHoursFromDate(\r\n          selectedList[selectedList.length - 1][\"start_time\"]\r\n        ),\r\n        data.add_duration ? data.add_duration : \"00:00\"\r\n      );\r\n      // } else {\r\n      //   selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\r\n      //     selectedList[selectedList.length - 1][\"start_time\"],\r\n      //     data.add_duration ? data.add_duration : \"00:00\"\r\n      //   );\r\n      // }\r\n\r\n      selectedList[selectedList.length - 1][\"Item_Codeid\"] = data.id;\r\n      selectedList[selectedList.length - 1][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[selectedList.length - 1][\"item_text\"] = null;\r\n      selectedList[selectedList.length - 1][\"add_duration\"] = data.add_duration;\r\n      selectedList[selectedList.length - 1][\"checktype\"] = \"package\";\r\n      selectedList[selectedList.length - 1][\"treat_parentcode\"] =\r\n        data.treatment_parentcode;\r\n\r\n      await this.setState({\r\n        selectedList,\r\n        PackageIndex: PackageIndex + 1,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else if (\r\n      selectedList[selectedList.length - 1][\"Item_CodeName\"] !== \"\" &&\r\n      appointmentId\r\n    ) {\r\n      selectedList[selectedList.length - 1][\"start_time\"] =\r\n        selectedList[selectedList.length - 1][\"start_time\"];\r\n      // if (appointmentId) {\r\n      selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\r\n        this.getHoursFromDate(\r\n          selectedList[selectedList.length - 1][\"start_time\"]\r\n        ),\r\n        data.add_duration ? data.add_duration : \"00:00\"\r\n      );\r\n      // } else {\r\n      //   selectedList[selectedList.length - 1][\"end_time\"] = this.addTimes(\r\n      //     selectedList[selectedList.length - 1][\"start_time\"],\r\n      //     data.add_duration ? data.add_duration : \"00:00\"\r\n      //   );\r\n      // }\r\n\r\n      selectedList[selectedList.length - 1][\"Item_Codeid\"] = data.id;\r\n      selectedList[selectedList.length - 1][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[selectedList.length - 1][\"item_text\"] = null;\r\n      selectedList[selectedList.length - 1][\"add_duration\"] = data.add_duration;\r\n      selectedList[selectedList.length - 1][\"checktype\"] = \"package\";\r\n      selectedList[selectedList.length - 1][\"treat_parentcode\"] =\r\n        data.treatment_parentcode;\r\n\r\n      await this.setState({\r\n        selectedList,\r\n        PackageIndex: PackageIndex + 1,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else {\r\n      var listCount = selectedList.length - 1;\r\n      let treatment = {};\r\n      // if (appointmentId) {\r\n      treatment[\"start_time\"] = this.timeToDateFormat(\r\n        selectedList[listCount][\"end_time\"]\r\n      );\r\n      // } else {\r\n      //   treatment[\"start_time\"] = selectedList[listCount][\"end_time\"];\r\n      // }\r\n      treatment[\"Item_Codeid\"] = data.id;\r\n      treatment[\"Item_CodeName\"] = data.item_desc;\r\n      treatment[\"item_text\"] = null;\r\n      treatment[\"add_duration\"] = data.add_duration;\r\n      treatment[\"checktype\"] = \"package\";\r\n      treatment[\"treat_parentcode\"] = data.treatment_parentcode;\r\n      selectedList.push(treatment);\r\n      await this.setState({\r\n        selectedList,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    }\r\n\r\n    this.setState({ isOpenModal: false });\r\n  };\r\n\r\n  handleSelectTreatment = async data => {\r\n    let { selectedList, index, appointmentId } = this.state;\r\n\r\n    if (index == 0 && selectedList.length == 1) {\r\n      selectedList[0][\"start_time\"] = selectedList[0][\"start_time\"];\r\n      // if (appointmentId) {\r\n      selectedList[0][\"end_time\"] = this.addTimes(\r\n        this.getHoursFromDate(selectedList[0][\"start_time\"]),\r\n        data.add_duration ? data.add_duration : \"00:00\"\r\n      );\r\n      // } else {\r\n      //   selectedList[0][\"end_time\"] = this.addTimes(\r\n      //     selectedList[0][\"start_time\"],\r\n      //     data.add_duration ? data.add_duration : \"00:00\"\r\n      //   );\r\n      // }\r\n      selectedList[0][\"Item_Codeid\"] = data.id;\r\n      selectedList[0][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[0][\"add_duration\"] = data.add_duration;\r\n      selectedList[0][\"checktype\"] = \"service\";\r\n      selectedList[0][\"treat_parentcode\"] = null;\r\n\r\n      await this.setState({\r\n        selectedList,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else {\r\n      selectedList[index][\"start_time\"] = selectedList[index][\"start_time\"];\r\n      // if (appointmentId) {\r\n      selectedList[index][\"end_time\"] = this.addTimes(\r\n        this.getHoursFromDate(selectedList[index][\"start_time\"]),\r\n        data.add_duration ? data.add_duration : \"00:00\"\r\n      );\r\n      // } else {\r\n      //   selectedList[index][\"end_time\"] = this.addTimes(\r\n      //     selectedList[index][\"start_time\"],\r\n      //     data.add_duration ? data.add_duration : \"00:00\"\r\n      //   );\r\n      // }\r\n      selectedList[index][\"Item_Codeid\"] = data.id;\r\n      selectedList[index][\"Item_CodeName\"] = data.item_desc;\r\n      selectedList[index][\"add_duration\"] = data.add_duration;\r\n      selectedList[index][\"checktype\"] = \"service\";\r\n      selectedList[index][\"treat_parentcode\"] = null;\r\n\r\n      let endTime = \"\";\r\n      //if (appointmentId) {\r\n      endTime = this.timeToDateFormat(selectedList[index][\"end_time\"]);\r\n      // } else {\r\n      //   endTime = selectedList[index][\"end_time\"];\r\n      // }\r\n      if (selectedList.length - 1 > index) {\r\n        selectedList[index + 1][\"start_time\"] = endTime;\r\n        if (selectedList[index + 1][\"add_duration\"] !== \"\") {\r\n          selectedList[index + 1][\"end_time\"] = this.addTimes(\r\n            selectedList[index][\"end_time\"],\r\n            selectedList[index + 1][\"add_duration\"]\r\n          );\r\n        }\r\n      }\r\n      await this.setState({\r\n        selectedList,\r\n      });\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    }\r\n    this.setState({ isOpenModal: false });\r\n  };\r\n\r\n  timeToMins = time => {\r\n    var b = time.split(\":\");\r\n    return b[0] * 60 + +b[1];\r\n  };\r\n\r\n  // Convert minutes to a time in format hh:mm\r\n  // Returned value is in range 00  to 24 hrs\r\n  timeFromMins = mins => {\r\n    function z(n) {\r\n      return (n < 10 ? \"0\" : \"\") + n;\r\n    }\r\n    var h = ((mins / 60) | 0) % 24;\r\n    var m = mins % 60;\r\n    return z(h) + \":\" + z(m);\r\n  };\r\n\r\n  // Add two times in hh:mm format\r\n  addTimes = (t0, t1) => {\r\n    return this.timeFromMins(this.timeToMins(t0) + this.timeToMins(t1));\r\n  };\r\n\r\n  // handleNewTimeChange = selectedTime => {\r\n  //   let time = new Date(dateFormat(selectedTime));\r\n  //   let selectedTimeNew = time.getTime();\r\n  //   console.log(selectedTimeNew);\r\n  //   let { selectedList, formFields } = this.state;\r\n  //   formFields = {\r\n  //     start_time: selectedTimeNew,\r\n  //     end_time: \"\",\r\n  //     add_duration: \"\",\r\n  //   };\r\n  // };\r\n\r\n  handleAddtreatment = async index => {\r\n    let { selectedList, formFields, appointmentId } = this.state;\r\n\r\n    if (selectedList[index][\"end_time\"]) {\r\n      let start = \"\";\r\n      //if (appointmentId) {\r\n      start = this.timeToDateFormat(\r\n        selectedList[selectedList.length - 1].end_time\r\n      );\r\n      // } else {\r\n      //   start = selectedList[selectedList.length - 1].end_time;\r\n      // }\r\n      formFields = {\r\n        appt_id: null,\r\n        start_time: start,\r\n        end_time: \"\",\r\n        Item_Codeid: this.state.freeTextStockId,\r\n        add_duration: \"\",\r\n        emp_no: 0,\r\n        requesttherapist: false,\r\n        recur_days: null,\r\n        recur_qty: null,\r\n        item_text: null,\r\n        checktype: \"\",\r\n        treat_parentcode: null,\r\n      };\r\n      selectedList.push({\r\n        appt_id: null,\r\n        start_time: start,\r\n        end_time: \"\",\r\n        Item_Codeid: this.state.freeTextStockId,\r\n        Item_CodeName: \"\",\r\n        add_duration: \"\",\r\n        emp_no: 0,\r\n        requesttherapist: false,\r\n        recur_days: null,\r\n        recur_qty: null,\r\n        item_text: null,\r\n        checktype: \"\",\r\n        treat_parentcode: null,\r\n      });\r\n\r\n      await this.setState({ selectedList, formFields });\r\n\r\n      await this.props.updateForm(\"treatmentList\", selectedList);\r\n    } else {\r\n      Toast({ type: \"error\", message: \"End time shouldn't be empty\" });\r\n    }\r\n  };\r\n\r\n  deleteTreatment = async index => {\r\n    let { selectedList } = this.state;\r\n    selectedList.splice(index, 1);\r\n    this.setState({ selectedList });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  handleTreatementmodal = () => {\r\n    let { appointmentCustomerDetail } = this.props;\r\n    let customerId = appointmentCustomerDetail.customerName;\r\n    if (customerId > 0) {\r\n      this.setState(prevState => ({\r\n        isTreatementModal: !prevState.isTreatementModal,\r\n      }));\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select customer\" });\r\n    }\r\n  };\r\n  // handleChangeremark = async ({ target: { value, name } }) => {\r\n  //   let { formFields, selectedList } = this.state;\r\n  //   formFields[name] = value;\r\n  //   selectedList[0][name] = value;\r\n  //   await this.setState({\r\n  //     formFields,\r\n  //     selectedList,\r\n  //   });\r\n  //   await this.props.updateForm(\"treatmentList\", selectedList);\r\n  // };\r\n\r\n  handleCheckbox = async ({ target: { value, name } }, index) => {\r\n    let { treatmentList } = this.state;\r\n    let { selectedList } = this.state;\r\n    selectedList[index][\"requesttherapist\"] = value;\r\n    await this.setState({\r\n      selectedList,\r\n    });\r\n    await this.props.updateForm(\"treatmentList\", selectedList);\r\n  };\r\n\r\n  handleCloseDialog = async () => {\r\n    this.props.handleCloseDialog();\r\n  };\r\n  handleSaveorUpdate = async () => {\r\n    this.props.handleSaveorUpdate();\r\n  };\r\n  handleRecurringlistCheckbox = async ({ target: { value, name } }, item) => {\r\n    let { recurringList } = this.state;\r\n    let listCheckbox = recurringList.find(acc => acc.id === item.id);\r\n    if (listCheckbox) {\r\n      listCheckbox[\"selected\"] = value;\r\n      await this.setState({ ...this.state.recurringList, listCheckbox });\r\n    }\r\n    let Checkbox = recurringList.filter(acc => acc.selected === true).length;\r\n    if (Checkbox == this.state.recurringList.length) {\r\n      await this.setState({ recurringSelectAll: true });\r\n    } else {\r\n      await this.setState({ recurringSelectAll: false });\r\n    }\r\n  };\r\n\r\n  handleRecurringSelectAllCheckbox = async ({ target: { value, name } }) => {\r\n    let { recurringList } = this.state;\r\n    await this.setState({ recurringSelectAll: value });\r\n    for (let item of recurringList) {\r\n      item[\"selected\"] = value;\r\n      await this.setState({ ...this.state.recurringList, item });\r\n    }\r\n  };\r\n  handleCopyAppointment = async () => {\r\n    let { appointmentId } = this.state;\r\n    let formFields = {};\r\n    formFields[\"appointmentId\"] = appointmentId;\r\n    await this.props.updateForm(\"AppointmentCopy\", formFields);\r\n    console.log(\r\n      this.props.AppointmentCopy,\r\n      \"after copy click appointment copy id\"\r\n    );\r\n    Toast({ type: \"success\", message: \"Appointment copied\" });\r\n  };\r\n  handlePasteAppointment = async () => {\r\n    let { AppointmentCopy } = this.props;\r\n    if (AppointmentCopy) {\r\n      this.setState({\r\n        PasteAppointmentId: AppointmentCopy.appointmentId,\r\n        selectedList: [],\r\n      });\r\n      this.handleRenderApptDetail(AppointmentCopy.appointmentId, true);\r\n    }\r\n  };\r\n\r\n  handleGotoCart = async () => {\r\n    let { appointmentCustomerDetail } = this.props;\r\n    let formFields = { custId: 0, custName: \"\" };\r\n    formFields[\"custId\"] = appointmentCustomerDetail.customerName;\r\n    formFields[\"custName\"] = appointmentCustomerDetail.custName;\r\n    formFields[\"cust_refer\"] = appointmentCustomerDetail.cust_refer;\r\n    await this.props.updateForm(\"basicApptDetail\", formFields);\r\n\r\n    history.push(\"/admin/cart\");\r\n  };\r\n  handleUpcomingAppointment = () => {\r\n    let { appointmentCustomerDetail } = this.props;\r\n    let customerId = appointmentCustomerDetail.customerName;\r\n    if (customerId > 0) {\r\n      this.setState(prevState => ({\r\n        isUpcomingAppointmentModal: !prevState.isUpcomingAppointmentModal,\r\n      }));\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select customer\" });\r\n    }\r\n  };\r\n  handleTreatmentHistory = () => {\r\n    let { appointmentCustomerDetail } = this.props;\r\n    let customerId = appointmentCustomerDetail.customerName;\r\n    if (customerId > 0) {\r\n      this.setState(prevState => ({\r\n        isTreatmentHistoryModal: !prevState.isTreatmentHistoryModal,\r\n      }));\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select customer\" });\r\n    }\r\n  };\r\n\r\n  handleAccordion = async index => {\r\n    let { activeRow } = this.state;\r\n    if (index === activeRow) {\r\n      await this.setState({\r\n        activeRow: \"\",\r\n      });\r\n    } else {\r\n      await this.setState({\r\n        activeRow: index,\r\n      });\r\n    }\r\n  };\r\n  handleLoginPopupCheck = async () => {\r\n    let { settingData } = this.state;\r\n    if (settingData.appt_pw) {\r\n      let { isLoginConfirmation } = this.state;\r\n      isLoginConfirmation = true;\r\n      await this.setState({\r\n        isLoginConfirmation,\r\n      });\r\n    } else {\r\n      this.handleLoginSubmit();\r\n    }\r\n  };\r\n\r\n  handleLoginConfirmationDialog = async () => {\r\n    let { isLoginConfirmation } = this.state;\r\n    isLoginConfirmation = false;\r\n    await this.setState({\r\n      isLoginConfirmation,\r\n      dragusername: \"\",\r\n      dragpassword: \"\",\r\n    });\r\n  };\r\n  handleInputChange = async event => {\r\n    await this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n  handleLoginSubmit = () => {\r\n    let { appointmentId } = this.state;\r\n    if (appointmentId) {\r\n      this.handleUpdate();\r\n    } else {\r\n      this.handleSubmit();\r\n    }\r\n  };\r\n  toggle = key => {\r\n    this.setState(prevState => ({\r\n      [key]: !prevState[key],\r\n    }));\r\n  };\r\n  render() {\r\n    let {\r\n      outletOption,\r\n      staffOption,\r\n      roomOption,\r\n      selectedList,\r\n      siteList,\r\n      list,\r\n      formFields,\r\n      timeDropdown,\r\n      duration,\r\n      isOpenModal,\r\n      treatmentField,\r\n      treatmentList = [],\r\n      categoryList,\r\n      treatmentListHeader,\r\n      meta,\r\n      isTreatementModal,\r\n      appointmentId,\r\n      selectedRec_days,\r\n      selectedRec_qty,\r\n      recurringList,\r\n      recurringSelectAll,\r\n      settingData,\r\n      PasteAppointmentId,\r\n      isTreatmentHistoryModal,\r\n      isUpcomingAppointmentModal,\r\n      AppointmentListHeader,\r\n      headerDetails,\r\n      activeRow,\r\n      isLoginConfirmation,\r\n      passwordVisible,\r\n      dragusername,\r\n      dragpassword,\r\n    } = this.state;\r\n    let { customerDetail, selectedTreatmentList, customerId, t, tokenDetail } =\r\n      this.props;\r\n    let { outlet, staff, rooms } = customerDetail;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {PasteAppointmentId <= 0 ? (\r\n          <MobileAppointmentForm\r\n            onRef={ref => (this.child = ref)}\r\n            selectedCustomer={this.props.selectedCustomer}\r\n            PasteAppointmentId={PasteAppointmentId}\r\n          ></MobileAppointmentForm>\r\n        ) : null}\r\n        {PasteAppointmentId > 0 ? (\r\n          <MobileAppointmentForm\r\n            onRef={ref => (this.child = ref)}\r\n            selectedCustomer={this.props.selectedCustomer}\r\n            PasteAppointmentId={PasteAppointmentId}\r\n          ></MobileAppointmentForm>\r\n        ) : null}\r\n\r\n        {selectedList.length == 0 ? (\r\n          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n            {t(\"No Data\")}\r\n          </div>\r\n        ) : (\r\n          <div className=\"response-table w-100\">\r\n            {selectedList.length === selectedList.length - 1 + 1 ? (\r\n              <div className=\"d-flex justify-content-end\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  label={\"Add New\"}\r\n                  onClick={() =>\r\n                    this.handleAddtreatment(selectedList.length - 1)\r\n                  }\r\n                />\r\n              </div>\r\n            ) : null}\r\n            {selectedList.length > 0 ? (\r\n              selectedList.map((item, index) => {\r\n                return (\r\n                  <div\r\n                    className={`mt-3 rounded border ${\r\n                      activeRow === index ? \"border-primary\" : \"\"\r\n                    }`}\r\n                    key={index}\r\n                  >\r\n                    <div className=\"d-flex bg-light\">\r\n                      <div className=\"h6 fw-500 col-7 col-md-9 text-left text-dark \">\r\n                        {index + 1}\r\n                        {\". \"}\r\n                        {item.Item_CodeName\r\n                          ? item.Item_CodeName\r\n                          : \"Please Choose item\"}\r\n                      </div>\r\n\r\n                      <div className=\"h6 col-2 col-md-1 text-center fw-700 align-items-center\">\r\n                        {(appointmentId && item.appt_id) ||\r\n                        selectedList.length <= 1 ? null : (\r\n                          <div\r\n                            className=\"cursor-pointer fs-15 p-1 border border-light\"\r\n                            onClick={() => this.deleteTreatment(index)}\r\n                            tooltip=\"delete\"\r\n                          >\r\n                            <span className=\"icon-delete\"></span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      <div\r\n                        className=\"h6 col-2 col-md-1 text-center fw-700 align-items-center\"\r\n                        onClick={() => this.handleAccordion(index)}\r\n                      >\r\n                        {activeRow === index ? (\r\n                          <div className=\"cursor-pointer fs-15 p-1 border border-light\">\r\n                            <span>\r\n                              <AiOutlineMinus />\r\n                            </span>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"cursor-pointer fs-15 p-1 border border-light\">\r\n                            <span>\r\n                              <AiOutlinePlus />\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {activeRow === index ? (\r\n                      <div className=\"d-flex flex-wrap\">\r\n                        <div className=\"col-md-3 col-12 mb-3\">\r\n                          <label className=\"text-left text-black common-label-text \">\r\n                            {t(\"Start Time\")}\r\n                          </label>\r\n\r\n                          <div className=\"input-group\">\r\n                            <NormalTimePicker\r\n                              onChange={e => this.handleDatePick(e, index)}\r\n                              name=\"start_time\"\r\n                              timeOnly={true}\r\n                              dateFormat={`HH:mm`}\r\n                              showTime={true}\r\n                              selected={false}\r\n                              placeholder=\"\"\r\n                              timeIntervals={5}\r\n                              value={item.start_time}\r\n                              showIcon={false}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-md-3 col-12 mb-3\">\r\n                          <label className=\"text-left text-black common-label-text \">\r\n                            {t(\"End Time\")}\r\n                          </label>\r\n                          <div className=\"input-group\">\r\n                            <NormalInput\r\n                              type=\"text\"\r\n                              name=\"end_time\"\r\n                              value={item.end_time}\r\n                              onChange={() => {}}\r\n                              disabled={true}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 col-12 mb-3\">\r\n                          <label className=\"text-left text-black common-label-text \">\r\n                            {t(\"Item\")}\r\n                          </label>\r\n\r\n                          <div className=\"input-group\">\r\n                            {settingData &&\r\n                            settingData.service_sel &&\r\n                            settingData.service_text ? (\r\n                              <NormalInput\r\n                                placeholder=\"service\"\r\n                                // options={siteList}\r\n                                value={item.Item_CodeName}\r\n                                name=\"Item_CodeName\"\r\n                                onDoubleClick={() =>\r\n                                  this.setState({\r\n                                    isOpenModal: true,\r\n                                    index: index,\r\n                                  })\r\n                                }\r\n                                onChange={e => this.handleChange(e, index)}\r\n                              />\r\n                            ) : null}\r\n                            {settingData &&\r\n                            settingData.service_sel &&\r\n                            !settingData.service_text ? (\r\n                              <NormalInput\r\n                                placeholder=\"service\"\r\n                                // options={siteList}\r\n                                value={item.Item_CodeName}\r\n                                name=\"Item_CodeName\"\r\n                                onDoubleClick={() =>\r\n                                  this.setState({\r\n                                    isOpenModal: true,\r\n                                    index: index,\r\n                                  })\r\n                                }\r\n                                onChange={() => {}}\r\n                              />\r\n                            ) : null}\r\n                            {settingData &&\r\n                            !settingData.service_sel &&\r\n                            settingData.service_text ? (\r\n                              <NormalInput\r\n                                placeholder=\"service\"\r\n                                // options={siteList}\r\n                                value={item.Item_CodeName}\r\n                                name=\"Item_CodeName\"\r\n                                onClick={() => {}}\r\n                                onChange={e => this.handleChange(e, index)}\r\n                              />\r\n                            ) : null}\r\n                            {settingData &&\r\n                            !settingData.service_sel &&\r\n                            !settingData.service_text ? (\r\n                              <NormalInput\r\n                                placeholder=\"service\"\r\n                                // options={siteList}\r\n                                value={item.Item_CodeName}\r\n                                name=\"Item_CodeName\"\r\n                                onClick={() => {}}\r\n                                onChange={() => {}}\r\n                              />\r\n                            ) : null}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 col-12 mb-3\">\r\n                          <label className=\"text-left text-black common-label-text \">\r\n                            {t(\"Duration\")}\r\n                          </label>\r\n\r\n                          <div className=\"input-group\">\r\n                            <NormalSelect\r\n                              // placeholder=\"Enter here\"\r\n                              options={duration}\r\n                              value={item.add_duration}\r\n                              name=\"add_duration\"\r\n                              onChange={e => this.handleChange(e, index)}\r\n                              className=\"p-0\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 col-12 mb-3\">\r\n                          <label className=\"text-left text-black common-label-text \">\r\n                            {t(\"Staff\")}\r\n                          </label>\r\n\r\n                          <div className=\"input-group\">\r\n                            <NormalSelect\r\n                              // placeholder=\"Enter here\"\r\n                              options={staffOption}\r\n                              value={item.emp_no}\r\n                              name=\"emp_no\"\r\n                              onChange={e => this.handleChange(e, index)}\r\n                              className=\"p-0\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-md-3 col-12 mb-3\">\r\n                          <label className=\"text-left text-black common-label-text \">\r\n                            {t(\"Req. Therapist\")}\r\n                          </label>\r\n                          <div className=\"input-group\">\r\n                            {item.requesttherapist ? (\r\n                              <NormalCheckbox\r\n                                onChange={e => this.handleCheckbox(e, index)}\r\n                                value={item.requesttherapist}\r\n                                name=\"requesttherapist\"\r\n                                checked={true}\r\n                              />\r\n                            ) : (\r\n                              <NormalCheckbox\r\n                                onChange={e => this.handleCheckbox(e, index)}\r\n                                value={item.requesttherapist}\r\n                                name=\"requesttherapist\"\r\n                                checked={false}\r\n                              />\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-md-3 col-12 mb-3\">\r\n                          <label className=\"text-left text-black common-label-text \">\r\n                            {t(\"Recur Days\")}\r\n                          </label>\r\n                          <div className=\"input-group\">\r\n                            <NormalInput\r\n                              type=\"number\"\r\n                              name=\"recur_days\"\r\n                              value={item.recur_days ? item.recur_days : \"\"}\r\n                              onChange={e => this.handleChange(e, index)}\r\n                              disabled={appointmentId ? true : false}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-md-3 col-12 mb-3\">\r\n                          <label className=\"text-left text-black common-label-text \">\r\n                            {t(\"Recur Qty\")}\r\n                          </label>\r\n                          <div className=\"input-group\">\r\n                            <NormalInput\r\n                              type=\"number\"\r\n                              name=\"recur_qty\"\r\n                              value={item.recur_qty ? item.recur_qty : \"\"}\r\n                              onChange={e => this.handleChange(e, index)}\r\n                              disabled={appointmentId ? true : false}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </div>\r\n                );\r\n              })\r\n            ) : (\r\n              <div className=\"d-flex text-center w-100\">{t(\"No Data\")}</div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* <TableWrapper\r\n                    headerDetails={headerDetails}\r\n                    // queryHandler={this.handlePagination}\r\n                    // pageMeta={pageMeta}\r\n                  >\r\n                    {selectedList.length > 0\r\n                      ? selectedList.map((item, index) => {\r\n                          return (\r\n                            <tr key={index}>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  <NormalTimePicker\r\n                                    className={`cursor-pointer`}\r\n                                    onChange={e =>\r\n                                      this.handleDatePick(e, index)\r\n                                    }\r\n                                    label=\"start_time\"\r\n                                    name=\"start_time\"\r\n                                    timeOnly={true}\r\n                                    dateFormat={`HH:mm`}\r\n                                    showTime={true}\r\n                                    selected={false}\r\n                                    placeholder=\"\"\r\n                                    timeIntervals={5}\r\n                                    value={item.start_time}\r\n                                    showIcon={false}\r\n                                  />\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  <NormalInput\r\n                                    placeholder=\"end\"\r\n                                    // options={timeDropdown}\r\n                                    value={item.end_time}\r\n                                    name=\"end_time\"\r\n                                    onChange={() => {}}\r\n                                    className=\"customer-name p-0\"\r\n                                    disabled={true}\r\n                                  />\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  {settingData &&\r\n                                  settingData.service_sel &&\r\n                                  settingData.service_text ? (\r\n                                    <NormalInput\r\n                                      placeholder=\"service\"\r\n                                      // options={siteList}\r\n                                      value={item.Item_CodeName}\r\n                                      name=\"Item_CodeName\"\r\n                                      onDoubleClick={() =>\r\n                                        this.setState({\r\n                                          isOpenModal: true,\r\n                                          index: index,\r\n                                        })\r\n                                      }\r\n                                      onChange={e =>\r\n                                        this.handleChange(e, index)\r\n                                      }\r\n                                      className=\"customer-name p-0 px-2\"\r\n                                    />\r\n                                  ) : null}\r\n                                  {settingData &&\r\n                                  settingData.service_sel &&\r\n                                  !settingData.service_text ? (\r\n                                    <NormalInput\r\n                                      placeholder=\"service\"\r\n                                      // options={siteList}\r\n                                      value={item.Item_CodeName}\r\n                                      name=\"Item_CodeName\"\r\n                                      onDoubleClick={() =>\r\n                                        this.setState({\r\n                                          isOpenModal: true,\r\n                                          index: index,\r\n                                        })\r\n                                      }\r\n                                      onChange={() => {}}\r\n                                      className=\"customer-name p-0 px-2\"\r\n                                    />\r\n                                  ) : null}\r\n                                  {settingData &&\r\n                                  !settingData.service_sel &&\r\n                                  settingData.service_text ? (\r\n                                    <NormalInput\r\n                                      placeholder=\"service\"\r\n                                      // options={siteList}\r\n                                      value={item.Item_CodeName}\r\n                                      name=\"Item_CodeName\"\r\n                                      onClick={() => {}}\r\n                                      onChange={e =>\r\n                                        this.handleChange(e, index)\r\n                                      }\r\n                                      className=\"customer-name p-0 px-2\"\r\n                                    />\r\n                                  ) : null}\r\n                                  {settingData &&\r\n                                  !settingData.service_sel &&\r\n                                  !settingData.service_text ? (\r\n                                    <NormalInput\r\n                                      placeholder=\"service\"\r\n                                      // options={siteList}\r\n                                      value={item.Item_CodeName}\r\n                                      name=\"Item_CodeName\"\r\n                                      onClick={() => {}}\r\n                                      onChange={() => {}}\r\n                                      className=\"customer-name p-0 px-2\"\r\n                                    />\r\n                                  ) : null}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  <NormalSelect\r\n                                    // placeholder=\"Enter here\"\r\n                                    options={duration}\r\n                                    value={item.add_duration}\r\n                                    name=\"add_duration\"\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                    className=\"customer-name p-0\"\r\n                                  />\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  <NormalSelect\r\n                                    // placeholder=\"Enter here\"\r\n                                    options={staffOption}\r\n                                    value={item.emp_no}\r\n                                    name=\"emp_no\"\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                    className=\"customer-name p-0\"\r\n                                  />\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  {item.requesttherapist ? (\r\n                                    <NormalCheckbox\r\n                                      onChange={e =>\r\n                                        this.handleCheckbox(e, index)\r\n                                      }\r\n                                      value={item.requesttherapist}\r\n                                      name=\"requesttherapist\"\r\n                                      checked={true}\r\n                                    />\r\n                                  ) : (\r\n                                    <NormalCheckbox\r\n                                      onChange={e =>\r\n                                        this.handleCheckbox(e, index)\r\n                                      }\r\n                                      value={item.requesttherapist}\r\n                                      name=\"requesttherapist\"\r\n                                      checked={false}\r\n                                    />\r\n                                  )}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  <NormalInput\r\n                                    type=\"number\"\r\n                                    name=\"recur_days\"\r\n                                    value={\r\n                                      item.recur_days ? item.recur_days : \"\"\r\n                                    }\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                    disabled={appointmentId ? true : false}\r\n                                  />\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  <NormalInput\r\n                                    type=\"number\"\r\n                                    name=\"recur_qty\"\r\n                                    value={item.recur_qty ? item.recur_qty : \"\"}\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                    disabled={appointmentId ? true : false}\r\n                                  />\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  {selectedList.length === index + 1 ? (\r\n                                    <div\r\n                                      className=\"ml-3\"\r\n                                      onClick={() =>\r\n                                        this.handleAddtreatment(index)\r\n                                      }\r\n                                    >\r\n                                      <svg\r\n                                        width=\"31\"\r\n                                        height=\"30\"\r\n                                        viewBox=\"0 0 31 30\"\r\n                                        fill=\"none\"\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                      >\r\n                                        <rect\r\n                                          width=\"31\"\r\n                                          height=\"30\"\r\n                                          fill=\"#F9F9F9\"\r\n                                        />\r\n                                        <path\r\n                                          d=\"M15 8V22\"\r\n                                          stroke=\"#848484\"\r\n                                          strokeLinecap=\"round\"\r\n                                          strokeLinejoin=\"round\"\r\n                                        />\r\n                                        <path\r\n                                          d=\"M8 15H22\"\r\n                                          stroke=\"#848484\"\r\n                                          strokeLinecap=\"round\"\r\n                                          strokeLinejoin=\"round\"\r\n                                        />\r\n                                      </svg>\r\n                                    </div>\r\n                                  ) : (\r\n                                    <>\r\n                                      {appointmentId && item.appt_id ? null : (\r\n                                        <img\r\n                                          width=\"25\"\r\n                                          height=\"25\"\r\n                                          onClick={() =>\r\n                                            this.deleteTreatment(index)\r\n                                          }\r\n                                          className=\"ml-3\"\r\n                                          src={closeIcon}\r\n                                          alt=\"\"\r\n                                        />\r\n                                      )}\r\n                                    </>\r\n                                  )}\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      : null}\r\n                  </TableWrapper> */}\r\n        <div className=\"appointment-form\">\r\n          <div className=\"row\">\r\n            <div className=\"appointment\">\r\n              <div className=\"appointment-holder\">\r\n                <div className=\"treatment-section p-0\">\r\n                  {recurringList && recurringList.length > 0 ? (\r\n                    <div className=\"mt-5 mb-3\">\r\n                      <div>\r\n                        <p>Recurring Related Appointments</p>\r\n                      </div>\r\n\r\n                      <div className=\"row selected selected-header mb-2\">\r\n                        <div className=\"col-1\">\r\n                          <NormalCheckbox\r\n                            label={`All`}\r\n                            onChange={e =>\r\n                              this.handleRecurringSelectAllCheckbox(e)\r\n                            }\r\n                            value={recurringSelectAll}\r\n                            name=\"recurringSelectAll\"\r\n                            checked={recurringSelectAll}\r\n                          />\r\n                        </div>\r\n                        <div className=\"col-2 p-0\">{t(\"Date\")}</div>\r\n                        <div className=\"col-1 p-0\">{t(\"Start\")}</div>\r\n                        <div className=\"col-1 p-0\">{t(\"End\")}</div>\r\n                        <div className=\"col-3 p-0 header-detail\">\r\n                          {t(\"Service\")}\r\n                        </div>\r\n\r\n                        <div className=\"col-1 p-0 header-detail\">\r\n                          {t(\"Duration\")}\r\n                        </div>\r\n                        <div className=\"col-2 p-0\">{t(\"Treatment staff\")}</div>\r\n                        <div className=\"col-1 p-0 d-flex justify-content-center\">\r\n                          <img\r\n                            src={req_therapist}\r\n                            alt=\"\"\r\n                            height=\"25\"\r\n                            width=\"25\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      {recurringList && recurringList.length > 0 ? (\r\n                        recurringList.map((item, index) => {\r\n                          return (\r\n                            <div className=\"row selected  mb-4\" key={index}>\r\n                              <div className=\"col-1 text-center\">\r\n                                <NormalCheckbox\r\n                                  onChange={e =>\r\n                                    this.handleRecurringlistCheckbox(e, item)\r\n                                  }\r\n                                  value={item.selected}\r\n                                  name=\"recurringItem\"\r\n                                  checked={item.selected}\r\n                                />\r\n                              </div>\r\n                              <div className=\"col-2 p-0\">{item.date}</div>\r\n                              <div className=\"col-1 p-0\">{item.start_time}</div>\r\n                              <div className=\"col-1 p-0\">{item.end_time}</div>\r\n                              <div className=\"col-3 p-0 header-detail\">\r\n                                {item.item_name}\r\n                              </div>\r\n\r\n                              <div className=\"col-1 p-0 header-detail\">\r\n                                {item.add_duration}\r\n                              </div>\r\n                              <div className=\"col-2 p-0\">{item.emp_name}</div>\r\n                              <div className=\"col-1 p-0 d-flex justify-content-center\">\r\n                                <NormalCheckbox\r\n                                  onChange={e =>\r\n                                    this.handleRecurringlistCheckbox(e, item)\r\n                                  }\r\n                                  value={item.requesttherapist}\r\n                                  name=\"requesttherapist\"\r\n                                  checked={item.requesttherapist}\r\n                                  disabled\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <div className=\"col-12 text-center w-100\">\r\n                          {t(\"No Data\")}\r\n                        </div>\r\n                      )}\r\n                      <div className=\"d-flex justify-content-end\">\r\n                        <div className=\"mt-5\">\r\n                          <div className=\"d-flex justify-content-between\">\r\n                            <div>\r\n                              <NormalButton\r\n                                buttonClass={\"treatment\"}\r\n                                resetbg={true}\r\n                                className=\"col-12\"\r\n                                label=\"Cancel\"\r\n                                onClick={this.handleCloseDialog}\r\n                              />\r\n                            </div>\r\n                            <div>\r\n                              {appointmentId ? (\r\n                                <NormalButton\r\n                                  buttonClass={\"submit-btn\"}\r\n                                  mainbg={false}\r\n                                  className=\"col-12 submit-btn ml-4\"\r\n                                  label=\"Update Recurring\"\r\n                                  onClick={this.handleRecurringUpdate}\r\n                                />\r\n                              ) : null}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <NormalModal\r\n            className={\"multiple-appointment select-category\"}\r\n            style={{ minWidth: \"60%\" }}\r\n            modal={isOpenModal}\r\n            handleModal={this.handleDialog}\r\n          >\r\n            <img\r\n              onClick={this.handleDialog}\r\n              className=\"close\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <div className=\"customer-list container\">\r\n              <div className=\"col-12 pl-0 mb-3 fw-500 py-2\">\r\n                <h5>{t(\"Select Treatment\")}</h5>\r\n              </div>\r\n              <div className=\"col-12\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-6\">\r\n                    {t(\"Category\")}\r\n                    <NormalSelect\r\n                      // placeholder=\"Enter here\"\r\n                      options={categoryList}\r\n                      value={treatmentField.category}\r\n                      name=\"category\"\r\n                      onChange={this.handleChangeTreatment}\r\n                      className=\"customer-name p-0\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-6\">\r\n                    {t(\"Service\")}\r\n                    <input\r\n                      // placeholder=\"Enter here\"\r\n                      // options={siteList}\r\n                      value={treatmentField.treatment}\r\n                      name=\"treatment\"\r\n                      onChange={this.handleSearch}\r\n                      className=\"search px-3 p-0\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"table-container table-responsive mt-3\">\r\n                <TableWrapper\r\n                  headerDetails={treatmentListHeader}\r\n                  queryHandler={this.handlePagination}\r\n                  pageMeta={meta}\r\n                >\r\n                  {treatmentList.length > 0 ? (\r\n                    treatmentList.map((item, index) => {\r\n                      return (\r\n                        <tr\r\n                          className=\"w-100\"\r\n                          onClick={() => this.handleSelectTreatment(item)}\r\n                          key={index}\r\n                        >\r\n                          <td>\r\n                            {\" \"}\r\n                            <div className=\"text-left\">{item.Item_Class}</div>\r\n                          </td>\r\n                          <td>\r\n                            {\" \"}\r\n                            <div className=\"text-left\">{item.item_desc}</div>\r\n                          </td>\r\n                          <td>\r\n                            {\" \"}\r\n                            <div className=\"text-left\">{item.add_duration}</div>\r\n                          </td>\r\n                          <td>\r\n                            {\" \"}\r\n                            <div className=\"text-right\">{item.item_price}</div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <td colSpan=\"12\">\r\n                      <div className=\"d-flex align-items-center justify-content-center\">\r\n                        {t(\"No data Available\")}\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                </TableWrapper>\r\n              </div>\r\n\r\n              <div className=\"row text-center justify-center w-100\">\r\n                <NormalButton\r\n                  buttonClass={\"col-3\"}\r\n                  resetbg={true}\r\n                  className=\"col-12 ml-4\"\r\n                  label=\"Cancel\"\r\n                  onClick={this.handleDialog}\r\n                />\r\n              </div>\r\n            </div>\r\n          </NormalModal>\r\n          <NormalModal\r\n            className={\"d-flex justify-content-center\"}\r\n            style={{ minWidth: \"20%\" }}\r\n            modal={isLoginConfirmation}\r\n            handleModal={() => {}}\r\n          >\r\n            <img\r\n              onClick={this.handleLoginConfirmationDialog}\r\n              className=\"close cursor-pointer\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <div className=\"row\">\r\n              <div className=\"d-flex flex-wrap\">\r\n                <div className=\"col-12 mb-4\">\r\n                  <p>{t(\"Please enter your login credential\")} </p>\r\n                </div>\r\n                <div className=\"col-12 form-group mb-3 pb-2\">\r\n                  <div className=\"input-group\">\r\n                    <NormalInput\r\n                      placeholder=\"Username\"\r\n                      value={dragusername}\r\n                      name=\"dragusername\"\r\n                      autocomplete=\"off\"\r\n                      onChange={this.handleInputChange}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-12 form-group mb-3 pb-2\">\r\n                  <div className=\"input-group\">\r\n                    <NormalInput\r\n                      type={passwordVisible ? \"text\" : \"password\"}\r\n                      placeholder=\"Password\"\r\n                      value={dragpassword}\r\n                      name=\"dragpassword\"\r\n                      autocomplete=\"off\"\r\n                      onChange={e => this.handleInputChange(e)}\r\n                    />\r\n                    <div className=\"input-group-addon right fs-14\">\r\n                      <span\r\n                        onClick={() => this.toggle(\"passwordVisible\")}\r\n                        className={`icon-${\r\n                          passwordVisible ? \"eye\" : \"eye-blocked\"\r\n                        } cursor-pointer fs-24`}\r\n                      ></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"form-group mb-0 p-0 d-flex justify-content-center col-12\">\r\n                  <NormalButton\r\n                    onClick={this.handleLoginSubmit}\r\n                    label=\"PROCEED\"\r\n                    className=\"col-12 submit-btn\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </NormalModal>\r\n          <div className=\"col-12\">\r\n            {isTreatementModal ? (\r\n              <TreatmentPackage\r\n                isTreatementModal={isTreatementModal}\r\n                handleTreatementmodal={this.handleTreatementmodal}\r\n                handleSelectPackage={this.handleSelectPackage}\r\n                customerNumber={\r\n                  this.props.appointmentCustomerDetail.customerName\r\n                }\r\n                custName={this.props.appointmentCustomerDetail.custName}\r\n                custPhone={this.props.appointmentCustomerDetail.custPhone}\r\n                cust_refer={this.props.appointmentCustomerDetail.cust_refer}\r\n                CustomerRemark={\r\n                  this.props.appointmentCustomerDetail.cust_remark\r\n                }\r\n                CustomerRemarkFlag={false}\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {console.log(\r\n            this.props.appointmentCustomerDetail,\r\n            \"appointmentcustomerdetail\"\r\n          )}\r\n          {isTreatmentHistoryModal ? (\r\n            <TreatmentHistory\r\n              isTreatmentHistoryModal={isTreatmentHistoryModal}\r\n              handleTreatmentHistory={this.handleTreatmentHistory}\r\n              customerNumber={this.props.appointmentCustomerDetail.customerName}\r\n              custName={this.props.appointmentCustomerDetail.custName}\r\n              custPhone={this.props.appointmentCustomerDetail.custPhone}\r\n              cust_refer={this.props.appointmentCustomerDetail.cust_refer}\r\n              CustomerRemark={this.props.appointmentCustomerDetail.cust_remark}\r\n              CustomerRemarkFlag={true}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {isUpcomingAppointmentModal ? (\r\n            <UpcomingAppointment\r\n              isUpcomingAppointmentModal={isUpcomingAppointmentModal}\r\n              handleUpcomingAppointment={this.handleUpcomingAppointment}\r\n              customerNumber={this.props.appointmentCustomerDetail.customerName}\r\n              custName={this.props.appointmentCustomerDetail.custName}\r\n              custPhone={this.props.appointmentCustomerDetail.custPhone}\r\n              cust_refer={this.props.appointmentCustomerDetail.cust_refer}\r\n              CustomerRemark={this.props.appointmentCustomerDetail.cust_remark}\r\n              CustomerRemarkFlag={false}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"col-md-12 mt-2\">\r\n          <div className=\"d-flex flex-wrap justify-content-center\">\r\n            <NormalButton\r\n              buttonClass={`p-2`}\r\n              mainbg={true}\r\n              className=\"col-12\"\r\n              label=\"Package\"\r\n              onClick={this.handleTreatementmodal}\r\n            />\r\n            <NormalButton\r\n              buttonClass={`p-2`}\r\n              mainbg={true}\r\n              className=\"col-12\"\r\n              label=\"Upcoming\"\r\n              onClick={this.handleUpcomingAppointment}\r\n            />\r\n            <NormalButton\r\n              buttonClass={`p-2`}\r\n              mainbg={true}\r\n              className=\"col-12\"\r\n              label=\"History\"\r\n              onClick={this.handleTreatmentHistory}\r\n            />\r\n            {/* {String(tokenDetail.role_code).toUpperCase() !== \"4\" &&\r\n                appointmentId ? (\r\n                  <NormalButton\r\n                    buttonClass={`p-2`}\r\n                    mainbg={true}\r\n                    className=\"col-12\"\r\n                    label=\"Profile\"\r\n                    onClick={() =>\r\n                      history.push(`/admin/customerplus/${customerId}/account`)\r\n                    }\r\n                  />\r\n                ) : null}\r\n                {String(tokenDetail.role_code).toUpperCase() !== \"4\" &&\r\n                appointmentId ? (\r\n                  <NormalButton\r\n                    buttonClass={`p-2`}\r\n                    mainbg={true}\r\n                    className=\"col-12\"\r\n                    label=\"Cart\"\r\n                    onClick={this.handleGotoCart}\r\n                  />\r\n                ) : null} */}\r\n\r\n            {!appointmentId &&\r\n            this.props.AppointmentCopy &&\r\n            this.props.AppointmentCopy.appointmentId > 0 ? (\r\n              <NormalButton\r\n                buttonClass={`p-2`}\r\n                mainbg={true}\r\n                className=\"col-12\"\r\n                label=\"Paste Appt.\"\r\n                onClick={this.handlePasteAppointment}\r\n              />\r\n            ) : null}\r\n            {appointmentId ? (\r\n              <NormalButton\r\n                buttonClass={`p-2`}\r\n                mainbg={true}\r\n                className=\"col-12\"\r\n                label=\"Copy Appt.\"\r\n                onClick={this.handleCopyAppointment}\r\n              />\r\n            ) : null}\r\n            <NormalButton\r\n              buttonClass={`p-2`}\r\n              resetbg={true}\r\n              className=\"col-12\"\r\n              label=\"Cancel\"\r\n              onClick={this.handleCloseDialog}\r\n            />\r\n\r\n            <NormalButton\r\n              buttonClass={`p-2`}\r\n              submitBtn={true}\r\n              label={appointmentId ? \"Update\" : \"Confirm\"}\r\n              // onClick={e => {\r\n              //   e.target.setAttribute(\"disabled\", true);\r\n              //   this.handleUpdate();\r\n              // }}\r\n              onClick={_.debounce(async () => {\r\n                await this.handleLoginPopupCheck();\r\n              }, 500)}\r\n            />\r\n            {/* {appointmentId ? (\r\n              <NormalButton\r\n                buttonClass={`p-2`}\r\n                submitBtn={true}\r\n                label=\"Update\"\r\n                onClick={this.handleUpdate}\r\n              />\r\n            ) : (\r\n              <NormalButton\r\n                buttonClass={`p-2`}\r\n                submitBtn={true}\r\n                className=\"col-12\"\r\n                label=\"Confirm\"\r\n                onClick={this.handleSubmit}\r\n              />\r\n            )} */}\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  customerDetail: state.appointment.customerDetail,\r\n  appointmentDetail: state.appointment.appointmentDetail,\r\n  selectedTreatmentList: state.appointment.selectedTreatmentList,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n  appointmentCustomerDetail: state.appointment.appointmentCustomerDetail,\r\n  appointmentTreatmentList: state.appointment.appointmentTreatmentList,\r\n  AppointmentCopy: state.appointment.AppointmentCopy,\r\n  tokenDetail: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      updateForm,\r\n      getSelectedTreatmentList,\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const MobileSelectTreatment = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(MobileSelectTreatmentClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}