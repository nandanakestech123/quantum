{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.editing.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _uiFile_manager = _interopRequireDefault(require(\"./ui.file_manager.dialog_manager\"));\n\nvar _uiFile_manager2 = _interopRequireDefault(require(\"./ui.file_manager.file_uploader\"));\n\nvar _uiFile_manager3 = require(\"./ui.file_manager.messages\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    return _arrayLikeToArray(arr);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar FileManagerEditingControl = function (_Widget) {\n  _inherits(FileManagerEditingControl, _Widget);\n\n  var _super = _createSuper(FileManagerEditingControl);\n\n  function FileManagerEditingControl() {\n    _classCallCheck(this, FileManagerEditingControl);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FileManagerEditingControl, [{\n    key: \"_initMarkup\",\n    value: function () {\n      _get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_initMarkup\", this).call(this);\n\n      this._initActions();\n\n      this._controller = this.option(\"controller\");\n\n      this._controller.on(\"EditActionStarting\", this._onEditActionStarting.bind(this));\n\n      this._controller.on(\"EditActionResultAcquired\", this._onEditActionResultAcquired.bind(this));\n\n      this._controller.on(\"EditActionItemError\", this._onEditActionItemError.bind(this));\n\n      this._controller.on(\"EditActionError\", this._onEditActionError.bind(this));\n\n      this._controller.on(\"CompleteEditActionItem\", this._onCompleteEditActionItem.bind(this));\n\n      this._controller.on(\"CompleteEditAction\", this._onCompleteEditAction.bind(this));\n\n      this._model = this.option(\"model\");\n      this._uploadOperationInfoMap = {};\n      this._dialogManager = new _uiFile_manager.default(this.$element(), {\n        chooseDirectoryDialog: {\n          provider: this._controller._fileProvider,\n          getDirectories: this._controller.getDirectories.bind(this._controller),\n          getCurrentDirectory: this._controller.getCurrentDirectory.bind(this._controller)\n        },\n        onDialogClosed: this._onDialogClosed.bind(this)\n      });\n      this._fileUploader = this._createFileUploader();\n\n      this._createMetadataMap();\n    }\n  }, {\n    key: \"_initNotificationControl\",\n    value: function (notificationControl) {\n      var _this = this;\n\n      this._notificationControl = notificationControl;\n\n      this._notificationControl.option({\n        onOperationCanceled: function (_ref) {\n          var info = _ref.info;\n          return _this._onCancelUploadSession(info);\n        },\n        onOperationItemCanceled: function (_ref2) {\n          var item = _ref2.item,\n              itemIndex = _ref2.itemIndex;\n          return _this._onCancelFileUpload(item, itemIndex);\n        }\n      });\n    }\n  }, {\n    key: \"_getFileUploaderComponent\",\n    value: function () {\n      return _uiFile_manager2.default;\n    }\n  }, {\n    key: \"_createFileUploader\",\n    value: function () {\n      var _this2 = this;\n\n      var $fileUploader = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\n      return this._createComponent($fileUploader, this._getFileUploaderComponent(), {\n        getController: this._getFileUploaderController.bind(this),\n        dropZonePlaceholderContainer: this.option(\"uploadDropZonePlaceholderContainer\"),\n        onUploadSessionStarted: function (e) {\n          return _this2._onUploadSessionStarted(e);\n        },\n        onUploadProgress: function (e) {\n          return _this2._onUploadProgress(e);\n        }\n      });\n    }\n  }, {\n    key: \"setUploaderDropZone\",\n    value: function ($element) {\n      this._fileUploader.option(\"dropZone\", $element);\n    }\n  }, {\n    key: \"_getFileUploaderController\",\n    value: function () {\n      var _this3 = this;\n\n      var uploadDirectory = this.uploadDirectoryInfo.fileItem;\n      return {\n        chunkSize: this._controller.getFileUploadChunkSize(),\n        uploadFileChunk: function (fileData, chunksInfo) {\n          return _this3._controller.uploadFileChunk(fileData, chunksInfo, uploadDirectory);\n        },\n        abortFileUpload: function (fileData, chunksInfo) {\n          return _this3._controller.abortFileUpload(fileData, chunksInfo, uploadDirectory);\n        }\n      };\n    }\n  }, {\n    key: \"_createMetadataMap\",\n    value: function () {\n      var _this4 = this;\n\n      this._metadataMap = {\n        create: {\n          action: function (arg) {\n            return _this4._tryCreate(arg);\n          },\n          affectsAllItems: true,\n          singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingCreateSingleItemProcessingMessage\"),\n          singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingCreateSingleItemSuccessMessage\"),\n          singleItemErrorMessage: _message.default.format(\"dxFileManager-editingCreateSingleItemErrorMessage\"),\n          commonErrorMessage: _message.default.format(\"dxFileManager-editingCreateCommonErrorMessage\")\n        },\n        rename: {\n          action: function (arg) {\n            return _this4._tryRename(arg);\n          },\n          singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingRenameSingleItemProcessingMessage\"),\n          singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingRenameSingleItemSuccessMessage\"),\n          singleItemErrorMessage: _message.default.format(\"dxFileManager-editingRenameSingleItemErrorMessage\"),\n          commonErrorMessage: _message.default.format(\"dxFileManager-editingRenameCommonErrorMessage\")\n        },\n        \"delete\": {\n          action: function (arg) {\n            return _this4._tryDelete(arg);\n          },\n          singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingDeleteSingleItemProcessingMessage\"),\n          multipleItemsProcessingMessage: _message.default.format(\"dxFileManager-editingDeleteMultipleItemsProcessingMessage\"),\n          singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingDeleteSingleItemSuccessMessage\"),\n          multipleItemsSuccessMessage: _message.default.format(\"dxFileManager-editingDeleteMultipleItemsSuccessMessage\"),\n          singleItemErrorMessage: _message.default.format(\"dxFileManager-editingDeleteSingleItemErrorMessage\"),\n          multipleItemsErrorMessage: _message.default.format(\"dxFileManager-editingDeleteMultipleItemsErrorMessage\"),\n          commonErrorMessage: _message.default.format(\"dxFileManager-editingDeleteCommonErrorMessage\")\n        },\n        move: {\n          action: function (arg) {\n            return _this4._tryMove(arg);\n          },\n          singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingMoveSingleItemProcessingMessage\"),\n          multipleItemsProcessingMessage: _message.default.format(\"dxFileManager-editingMoveMultipleItemsProcessingMessage\"),\n          singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingMoveSingleItemSuccessMessage\"),\n          multipleItemsSuccessMessage: _message.default.format(\"dxFileManager-editingMoveMultipleItemsSuccessMessage\"),\n          singleItemErrorMessage: _message.default.format(\"dxFileManager-editingMoveSingleItemErrorMessage\"),\n          multipleItemsErrorMessage: _message.default.format(\"dxFileManager-editingMoveMultipleItemsErrorMessage\"),\n          commonErrorMessage: _message.default.format(\"dxFileManager-editingMoveCommonErrorMessage\")\n        },\n        copy: {\n          action: function (arg) {\n            return _this4._tryCopy(arg);\n          },\n          singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingCopySingleItemProcessingMessage\"),\n          multipleItemsProcessingMessage: _message.default.format(\"dxFileManager-editingCopyMultipleItemsProcessingMessage\"),\n          singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingCopySingleItemSuccessMessage\"),\n          multipleItemsSuccessMessage: _message.default.format(\"dxFileManager-editingCopyMultipleItemsSuccessMessage\"),\n          singleItemErrorMessage: _message.default.format(\"dxFileManager-editingCopySingleItemErrorMessage\"),\n          multipleItemsErrorMessage: _message.default.format(\"dxFileManager-editingCopyMultipleItemsErrorMessage\"),\n          commonErrorMessage: _message.default.format(\"dxFileManager-editingCopyCommonErrorMessage\")\n        },\n        upload: {\n          action: function (arg) {\n            return _this4._tryUpload(arg);\n          },\n          allowCancel: true,\n          allowItemProgress: true,\n          singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingUploadSingleItemProcessingMessage\"),\n          multipleItemsProcessingMessage: _message.default.format(\"dxFileManager-editingUploadMultipleItemsProcessingMessage\"),\n          singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingUploadSingleItemSuccessMessage\"),\n          multipleItemsSuccessMessage: _message.default.format(\"dxFileManager-editingUploadMultipleItemsSuccessMessage\"),\n          singleItemErrorMessage: _message.default.format(\"dxFileManager-editingUploadSingleItemErrorMessage\"),\n          multipleItemsErrorMessage: _message.default.format(\"dxFileManager-editingUploadMultipleItemsErrorMessage\"),\n          canceledMessage: _message.default.format(\"dxFileManager-editingUploadCanceledMessage\")\n        },\n        download: {\n          action: function (arg) {\n            return _this4._download(arg);\n          }\n        },\n        getItemContent: {\n          action: function (arg) {\n            return _this4._getItemContent(arg);\n          }\n        },\n        getItems: {\n          singleItemProcessingMessage: \"\",\n          singleItemErrorMessage: _message.default.format(\"dxFileManager-errorDirectoryOpenFailed\"),\n          commonErrorMessage: _message.default.format(\"dxFileManager-errorDirectoryOpenFailed\")\n        }\n      };\n    }\n  }, {\n    key: \"getCommandActions\",\n    value: function () {\n      var _this5 = this;\n\n      var result = {};\n      (0, _iterator.each)(this._metadataMap, function (name) {\n        if (Object.prototype.hasOwnProperty.call(_this5._metadataMap, name)) {\n          result[name] = function (arg) {\n            return _this5._executeAction(name, arg);\n          };\n        }\n      });\n      return result;\n    }\n  }, {\n    key: \"_executeAction\",\n    value: function (actionName, arg) {\n      var actionMetadata = this._metadataMap[actionName];\n      return actionMetadata ? actionMetadata.action(arg) : null;\n    }\n  }, {\n    key: \"_onCancelUploadSession\",\n    value: function (info) {\n      this._fileUploader.cancelUpload(info.uploadSessionId);\n    }\n  }, {\n    key: \"_onCancelFileUpload\",\n    value: function (item, itemIndex) {\n      this._fileUploader.cancelFileUpload(item.info.uploadSessionId, itemIndex);\n    }\n  }, {\n    key: \"_onUploadProgress\",\n    value: function (_ref3) {\n      var sessionId = _ref3.sessionId,\n          fileIndex = _ref3.fileIndex,\n          commonValue = _ref3.commonValue,\n          fileValue = _ref3.fileValue;\n      var operationInfo = this._uploadOperationInfoMap[sessionId];\n\n      this._notificationControl.updateOperationItemProgress(operationInfo, fileIndex, 100 * fileValue, 100 * commonValue);\n    }\n  }, {\n    key: \"_onUploadSessionStarted\",\n    value: function (_ref4) {\n      var sessionInfo = _ref4.sessionInfo;\n\n      this._controller.processUploadSession(sessionInfo, this.uploadDirectoryInfo);\n    }\n  }, {\n    key: \"_onEditActionStarting\",\n    value: function (actionInfo) {\n      var actionMetadata = this._metadataMap[actionInfo.name];\n      var context = new FileManagerActionContext(actionMetadata, actionInfo.itemInfos, actionInfo.directory);\n\n      var operationInfo = this._notificationControl.addOperation(context.processingMessage, actionMetadata.allowCancel, !actionMetadata.allowItemProgress);\n\n      (0, _extend.extend)(actionInfo.customData, {\n        context: context,\n        operationInfo: operationInfo\n      });\n\n      switch (actionInfo.name) {\n        case \"upload\":\n          var sessionId = actionInfo.customData.sessionInfo.sessionId;\n          operationInfo.uploadSessionId = sessionId;\n          this._uploadOperationInfoMap[sessionId] = operationInfo;\n          break;\n\n        case \"rename\":\n          actionInfo.customData.context.itemNewName = actionInfo.customData.itemNewName;\n      }\n    }\n  }, {\n    key: \"_onEditActionResultAcquired\",\n    value: function (actionInfo) {\n      var _this6 = this;\n\n      var _actionInfo$customDat = actionInfo.customData,\n          context = _actionInfo$customDat.context,\n          operationInfo = _actionInfo$customDat.operationInfo;\n      context.singleRequest = actionInfo.singleRequest;\n      var details = context.itemInfos.map(function (itemInfo) {\n        return _this6._getItemProgressDisplayInfo(itemInfo);\n      });\n\n      this._notificationControl.addOperationDetails(operationInfo, details, context.actionMetadata.allowCancel);\n    }\n  }, {\n    key: \"_onEditActionError\",\n    value: function (actionInfo, errorInfo) {\n      var _actionInfo$customDat2 = actionInfo.customData,\n          context = _actionInfo$customDat2.context,\n          operationInfo = _actionInfo$customDat2.operationInfo;\n      context.singleRequest = actionInfo.singleRequest;\n\n      this._handleActionError(operationInfo, context, errorInfo);\n\n      this._completeAction(operationInfo, context);\n    }\n  }, {\n    key: \"_onEditActionItemError\",\n    value: function (actionInfo, errorInfo) {\n      var _actionInfo$customDat3 = actionInfo.customData,\n          context = _actionInfo$customDat3.context,\n          operationInfo = _actionInfo$customDat3.operationInfo;\n\n      this._handleActionError(operationInfo, context, errorInfo);\n    }\n  }, {\n    key: \"_onCompleteEditActionItem\",\n    value: function (actionInfo, info) {\n      var _actionInfo$customDat4 = actionInfo.customData,\n          context = _actionInfo$customDat4.context,\n          operationInfo = _actionInfo$customDat4.operationInfo;\n\n      if (!info.result || !info.result.canceled) {\n        context.completeOperationItem(info.index);\n\n        this._notificationControl.completeOperationItem(operationInfo, info.index, context.commonProgress);\n      }\n    }\n  }, {\n    key: \"_onCompleteEditAction\",\n    value: function (actionInfo) {\n      var _actionInfo$customDat5 = actionInfo.customData,\n          context = _actionInfo$customDat5.context,\n          operationInfo = _actionInfo$customDat5.operationInfo;\n\n      this._completeAction(operationInfo, context);\n\n      if (\"upload\" === actionInfo.name) {\n        delete this._uploadOperationInfoMap[actionInfo.customData.sessionInfo.sessionId];\n      }\n    }\n  }, {\n    key: \"_tryCreate\",\n    value: function (parentDirectories) {\n      var _this7 = this;\n\n      var parentDirectoryInfo = parentDirectories && parentDirectories[0] || this._getCurrentDirectory();\n\n      var newDirName = _message.default.format(\"dxFileManager-newDirectoryName\");\n\n      return this._showDialog(this._dialogManager.getCreateItemDialog(), newDirName).then(function (_ref5) {\n        var name = _ref5.name;\n        return _this7._controller.createDirectory(parentDirectoryInfo, name);\n      });\n    }\n  }, {\n    key: \"_tryRename\",\n    value: function (itemInfos) {\n      var _this8 = this;\n\n      var itemInfo = itemInfos && itemInfos[0] || this._model.getMultipleSelectedItems()[0];\n\n      return this._showDialog(this._dialogManager.getRenameItemDialog(), itemInfo.fileItem.name).then(function (_ref6) {\n        var name = _ref6.name;\n        return _this8._controller.renameItem(itemInfo, name);\n      });\n    }\n  }, {\n    key: \"_tryDelete\",\n    value: function (itemInfos) {\n      var _this9 = this;\n\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      var itemName = itemInfos[0].fileItem.name;\n      var itemCount = itemInfos.length;\n      return this._showDialog(this._dialogManager.getDeleteItemDialog(), {\n        itemName: itemName,\n        itemCount: itemCount\n      }).then(function () {\n        return _this9._controller.deleteItems(itemInfos);\n      });\n    }\n  }, {\n    key: \"_tryMove\",\n    value: function (itemInfos) {\n      var _this10 = this;\n\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._showDialog(this._dialogManager.getMoveDialog(itemInfos)).then(function (_ref7) {\n        var folder = _ref7.folder;\n        return _this10._controller.moveItems(itemInfos, folder);\n      });\n    }\n  }, {\n    key: \"_tryCopy\",\n    value: function (itemInfos) {\n      var _this11 = this;\n\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._showDialog(this._dialogManager.getCopyDialog(itemInfos)).then(function (_ref8) {\n        var folder = _ref8.folder;\n        return _this11._controller.copyItems(itemInfos, folder);\n      });\n    }\n  }, {\n    key: \"_tryUpload\",\n    value: function (destinationFolder) {\n      this._uploadDirectoryInfo = null === destinationFolder || void 0 === destinationFolder ? void 0 : destinationFolder[0];\n\n      this._fileUploader.tryUpload();\n    }\n  }, {\n    key: \"_download\",\n    value: function (itemInfos) {\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._controller.downloadItems(itemInfos);\n    }\n  }, {\n    key: \"_getItemContent\",\n    value: function (itemInfos) {\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._controller.getItemContent(itemInfos);\n    }\n  }, {\n    key: \"_completeAction\",\n    value: function (operationInfo, context) {\n      this._notificationControl.completeOperation(operationInfo, context.completionMessage, !context.success, context.statusText);\n\n      if (context.hasModifiedItems()) {\n        this._raiseOnSuccess(context.onlyFiles);\n      }\n    }\n  }, {\n    key: \"_handleActionError\",\n    value: function (operationInfo, context, errorInfo) {\n      operationInfo.hasError = true;\n\n      if (context.singleRequest) {\n        this._handleSingleRequestActionError(operationInfo, context, errorInfo);\n      } else {\n        this._handleMultipleRequestActionError(operationInfo, context, errorInfo);\n      }\n    }\n  }, {\n    key: \"_handleSingleRequestActionError\",\n    value: function (operationInfo, context, errorInfo) {\n      var itemInfo = context.getItemForSingleRequestError();\n      var itemName = context.itemNewName;\n\n      var errorText = this._getErrorText(errorInfo, itemInfo, itemName);\n\n      context.processSingleRequestError(errorText);\n\n      var operationErrorInfo = this._getOperationErrorInfo(context);\n\n      this._notificationControl.completeSingleOperationWithError(operationInfo, operationErrorInfo);\n\n      if (context.multipleItems) {\n        this._raiseOnSuccess(context.onlyFiles);\n      }\n    }\n  }, {\n    key: \"_handleMultipleRequestActionError\",\n    value: function (operationInfo, context, errorInfo) {\n      var itemInfo = context.getItemForMultipleRequestError(errorInfo.index);\n\n      var errorText = this._getErrorText(errorInfo, itemInfo);\n\n      context.processMultipleRequestError(errorInfo.index, errorText);\n\n      var operationErrorInfo = this._getOperationErrorInfo(context);\n\n      this._notificationControl.addOperationDetailsError(operationInfo, operationErrorInfo);\n    }\n  }, {\n    key: \"_getOperationErrorInfo\",\n    value: function (context) {\n      var detailError = context.errorState.currentDetailError;\n      return {\n        commonErrorText: context.errorState.commonErrorText,\n        item: detailError.itemInfo ? this._getItemProgressDisplayInfo(detailError.itemInfo) : null,\n        itemIndex: detailError.itemIndex,\n        detailErrorText: detailError.errorText\n      };\n    }\n  }, {\n    key: \"_getErrorText\",\n    value: function (errorInfo, itemInfo, itemName) {\n      itemName = itemName || (null === itemInfo || void 0 === itemInfo ? void 0 : itemInfo.fileItem.name);\n\n      var errorText = errorInfo.errorText || _uiFile_manager3.FileManagerMessages.get(errorInfo.errorId, itemName);\n\n      var errorArgs = {\n        fileSystemItem: null === itemInfo || void 0 === itemInfo ? void 0 : itemInfo.fileItem,\n        errorCode: errorInfo.errorId,\n        errorText: errorText\n      };\n\n      this._raiseOnError(errorArgs);\n\n      return errorArgs.errorText;\n    }\n  }, {\n    key: \"_getItemProgressDisplayInfo\",\n    value: function (itemInfo) {\n      return {\n        commonText: itemInfo.fileItem.name,\n        imageUrl: this._getItemThumbnail(itemInfo)\n      };\n    }\n  }, {\n    key: \"_showDialog\",\n    value: function (dialog, dialogArgument) {\n      this._dialogDeferred = new _deferred.Deferred();\n      dialog.show(dialogArgument);\n      return this._dialogDeferred.promise();\n    }\n  }, {\n    key: \"_onDialogClosed\",\n    value: function (e) {\n      var result = e.dialogResult;\n\n      if (result) {\n        this._dialogDeferred.resolve(result);\n      } else {\n        this._dialogDeferred.reject();\n      }\n    }\n  }, {\n    key: \"_getItemThumbnail\",\n    value: function (item) {\n      var itemThumbnailGetter = this.option(\"getItemThumbnail\");\n\n      if (!itemThumbnailGetter) {\n        return null;\n      }\n\n      var info = itemThumbnailGetter(item);\n      return info ? info.thumbnail : null;\n    }\n  }, {\n    key: \"_initActions\",\n    value: function () {\n      this._actions = {\n        onSuccess: this._createActionByOption(\"onSuccess\"),\n        onError: this._createActionByOption(\"onError\"),\n        onCreating: this._createActionByOption(\"onCreating\")\n      };\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function () {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_getDefaultOptions\", this).call(this), {\n        model: {\n          getMultipleSelectedItems: null\n        },\n        notificationControl: null,\n        getItemThumbnail: null,\n        onSuccess: null,\n        onError: null,\n        onCreating: null\n      });\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      var name = args.name;\n\n      switch (name) {\n        case \"model\":\n          this.repaint();\n          break;\n\n        case \"notificationControl\":\n          this._initNotificationControl(args.value);\n\n          break;\n\n        case \"getItemThumbnail\":\n          break;\n\n        case \"uploadDropZonePlaceholderContainer\":\n          this._fileUploader.option(\"dropZonePlaceholderContainer\", args.value);\n\n          break;\n\n        case \"onSuccess\":\n        case \"onError\":\n        case \"onCreating\":\n          this._actions[name] = this._createActionByOption(name);\n          break;\n\n        default:\n          _get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_raiseOnSuccess\",\n    value: function (updatedOnlyFiles) {\n      this._actions.onSuccess({\n        updatedOnlyFiles: updatedOnlyFiles\n      });\n    }\n  }, {\n    key: \"_raiseOnError\",\n    value: function (args) {\n      this._actions.onError(args);\n    }\n  }, {\n    key: \"_getCurrentDirectory\",\n    value: function () {\n      return this._controller.getCurrentDirectory();\n    }\n  }, {\n    key: \"uploadDirectoryInfo\",\n    get: function () {\n      return this._uploadDirectoryInfo || this._getCurrentDirectory();\n    }\n  }]);\n\n  return FileManagerEditingControl;\n}(_ui.default);\n\nvar FileManagerActionContext = function () {\n  function FileManagerActionContext(actionMetadata, itemInfos, directoryInfo) {\n    _classCallCheck(this, FileManagerActionContext);\n\n    this._actionMetadata = actionMetadata;\n    this._itemInfos = itemInfos;\n    this._onlyFiles = !this._actionMetadata.affectsAllItems && this._itemInfos.every(function (info) {\n      return !info.fileItem.isDirectory;\n    });\n    this._items = this._itemInfos.map(function (itemInfo) {\n      return itemInfo.fileItem;\n    });\n    this._multipleItems = this._items.length > 1;\n    this._location = directoryInfo.getDisplayName();\n    this._singleRequest = true;\n    this._completedItems = [];\n    this._commonProgress = 0;\n    this._errorState = {\n      failedCount: 0\n    };\n    this._itemNewName = \"\";\n  }\n\n  _createClass(FileManagerActionContext, [{\n    key: \"completeOperationItem\",\n    value: function (itemIndex) {\n      if (this._singleRequest) {\n        this._completedItems = _toConsumableArray(this._items);\n      } else {\n        var item = this._items[itemIndex];\n\n        this._completedItems.push(item);\n      }\n\n      if (!this._actionMetadata.allowItemProgress) {\n        this._commonProgress = this._completedItems.length / this._items.length * 100;\n      }\n    }\n  }, {\n    key: \"processSingleRequestError\",\n    value: function (errorText) {\n      this._errorState.failedCount = 1;\n      this._errorState.commonErrorText = this._multipleItems ? this._actionMetadata.commonErrorMessage : this._actionMetadata.singleItemErrorMessage;\n      var itemIndex = this._multipleItems ? -1 : 1;\n      var itemInfo = this.getItemForSingleRequestError();\n\n      this._setCurrentDetailError(itemIndex, itemInfo, errorText);\n    }\n  }, {\n    key: \"processMultipleRequestError\",\n    value: function (itemIndex, errorText) {\n      this._errorState.failedCount++;\n      this._errorState.commonErrorText = this._errorState.failedCount > 1 ? (0, _string.format)(this._actionMetadata.multipleItemsErrorMessage, this._errorState.failedCount) : this._actionMetadata.singleItemErrorMessage;\n      var itemInfo = this.getItemForMultipleRequestError(itemIndex);\n\n      this._setCurrentDetailError(itemIndex, itemInfo, errorText);\n    }\n  }, {\n    key: \"hasModifiedItems\",\n    value: function () {\n      return this._hasCompletedItems() || this._singleRequest && !this.success && this._multipleItems;\n    }\n  }, {\n    key: \"getItemForSingleRequestError\",\n    value: function () {\n      return this._multipleItems ? null : this._itemInfos[0];\n    }\n  }, {\n    key: \"getItemForMultipleRequestError\",\n    value: function (itemIndex) {\n      return this._itemInfos[itemIndex];\n    }\n  }, {\n    key: \"_setCurrentDetailError\",\n    value: function (itemIndex, itemInfo, errorText) {\n      this._errorState.currentDetailError = {\n        itemIndex: itemIndex,\n        itemInfo: itemInfo,\n        errorText: errorText\n      };\n    }\n  }, {\n    key: \"_hasCompletedItems\",\n    value: function () {\n      return this._completedItems.length > 0;\n    }\n  }, {\n    key: \"actionMetadata\",\n    get: function () {\n      return this._actionMetadata;\n    }\n  }, {\n    key: \"itemInfos\",\n    get: function () {\n      return this._itemInfos;\n    }\n  }, {\n    key: \"itemNewName\",\n    get: function () {\n      return this._itemNewName;\n    },\n    set: function (value) {\n      this._itemNewName = value;\n    }\n  }, {\n    key: \"errorState\",\n    get: function () {\n      return this._errorState;\n    }\n  }, {\n    key: \"singleRequest\",\n    get: function () {\n      return this._singleRequest;\n    },\n    set: function (value) {\n      this._singleRequest = value;\n    }\n  }, {\n    key: \"multipleItems\",\n    get: function () {\n      return this._multipleItems;\n    }\n  }, {\n    key: \"onlyFiles\",\n    get: function () {\n      return this._onlyFiles;\n    }\n  }, {\n    key: \"processingMessage\",\n    get: function () {\n      return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsProcessingMessage, this._items.length, this._location) : (0, _string.format)(this._actionMetadata.singleItemProcessingMessage, this._location);\n    }\n  }, {\n    key: \"successMessage\",\n    get: function () {\n      if (this._hasCompletedItems()) {\n        return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsSuccessMessage, this._completedItems.length, this._location) : (0, _string.format)(this._actionMetadata.singleItemSuccessMessage, this._location);\n      } else {\n        return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsErrorMessage, this._items.length) : this._actionMetadata.singleItemErrorMessage;\n      }\n    }\n  }, {\n    key: \"completionMessage\",\n    get: function () {\n      return this.success ? this.successMessage : this.errorState.commonErrorText;\n    }\n  }, {\n    key: \"statusText\",\n    get: function () {\n      return this.success && !this._hasCompletedItems() ? this._actionMetadata.canceledMessage : void 0;\n    }\n  }, {\n    key: \"commonProgress\",\n    get: function () {\n      return this._commonProgress;\n    }\n  }, {\n    key: \"success\",\n    get: function () {\n      return !this._errorState.failedCount;\n    }\n  }]);\n\n  return FileManagerActionContext;\n}();\n\nvar _default = FileManagerEditingControl;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/file_manager/ui.file_manager.editing.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_renderer","_interopRequireDefault","require","_extend","_deferred","_iterator","_string","_message","_ui","_uiFile_manager","_uiFile_manager2","_uiFile_manager3","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","value","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","e","getPrototypeOf","FileManagerEditingControl","_Widget","_super","_initActions","_controller","option","on","_onEditActionStarting","bind","_onEditActionResultAcquired","_onEditActionItemError","_onEditActionError","_onCompleteEditActionItem","_onCompleteEditAction","_model","_uploadOperationInfoMap","_dialogManager","$element","chooseDirectoryDialog","provider","_fileProvider","getDirectories","getCurrentDirectory","onDialogClosed","_onDialogClosed","_fileUploader","_createFileUploader","_createMetadataMap","notificationControl","_this","_notificationControl","onOperationCanceled","_ref","info","_onCancelUploadSession","onOperationItemCanceled","_ref2","item","itemIndex","_onCancelFileUpload","_this2","$fileUploader","appendTo","_createComponent","_getFileUploaderComponent","getController","_getFileUploaderController","dropZonePlaceholderContainer","onUploadSessionStarted","_onUploadSessionStarted","onUploadProgress","_onUploadProgress","_this3","uploadDirectory","uploadDirectoryInfo","fileItem","chunkSize","getFileUploadChunkSize","uploadFileChunk","fileData","chunksInfo","abortFileUpload","_this4","_metadataMap","action","arg","_tryCreate","affectsAllItems","singleItemProcessingMessage","format","singleItemSuccessMessage","singleItemErrorMessage","commonErrorMessage","rename","_tryRename","_tryDelete","multipleItemsProcessingMessage","multipleItemsSuccessMessage","multipleItemsErrorMessage","move","_tryMove","copy","_tryCopy","upload","_tryUpload","allowCancel","allowItemProgress","canceledMessage","download","_download","getItemContent","_getItemContent","getItems","_this5","each","_executeAction","actionName","actionMetadata","cancelUpload","uploadSessionId","cancelFileUpload","_ref3","sessionId","fileIndex","commonValue","fileValue","operationInfo","updateOperationItemProgress","_ref4","sessionInfo","processUploadSession","actionInfo","context","FileManagerActionContext","itemInfos","directory","addOperation","processingMessage","extend","customData","itemNewName","_this6","_actionInfo$customDat","singleRequest","details","map","itemInfo","_getItemProgressDisplayInfo","addOperationDetails","errorInfo","_actionInfo$customDat2","_handleActionError","_completeAction","_actionInfo$customDat3","_actionInfo$customDat4","canceled","completeOperationItem","index","commonProgress","_actionInfo$customDat5","parentDirectories","_this7","parentDirectoryInfo","_getCurrentDirectory","newDirName","_showDialog","getCreateItemDialog","then","_ref5","createDirectory","_this8","getMultipleSelectedItems","getRenameItemDialog","_ref6","renameItem","_this9","itemName","itemCount","getDeleteItemDialog","deleteItems","_this10","getMoveDialog","_ref7","folder","moveItems","_this11","getCopyDialog","_ref8","copyItems","destinationFolder","_uploadDirectoryInfo","tryUpload","downloadItems","completeOperation","completionMessage","success","statusText","hasModifiedItems","_raiseOnSuccess","onlyFiles","hasError","_handleSingleRequestActionError","_handleMultipleRequestActionError","getItemForSingleRequestError","errorText","_getErrorText","processSingleRequestError","operationErrorInfo","_getOperationErrorInfo","completeSingleOperationWithError","multipleItems","getItemForMultipleRequestError","processMultipleRequestError","addOperationDetailsError","detailError","errorState","currentDetailError","commonErrorText","detailErrorText","FileManagerMessages","errorId","errorArgs","fileSystemItem","errorCode","_raiseOnError","commonText","imageUrl","_getItemThumbnail","dialog","dialogArgument","_dialogDeferred","Deferred","show","promise","dialogResult","resolve","reject","itemThumbnailGetter","thumbnail","_actions","onSuccess","_createActionByOption","onError","onCreating","model","getItemThumbnail","args","repaint","_initNotificationControl","updatedOnlyFiles","directoryInfo","_actionMetadata","_itemInfos","_onlyFiles","every","isDirectory","_items","_multipleItems","_location","getDisplayName","_singleRequest","_completedItems","_commonProgress","_errorState","failedCount","_itemNewName","push","_setCurrentDetailError","_hasCompletedItems","set","successMessage","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.editing.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _uiFile_manager = _interopRequireDefault(require(\"./ui.file_manager.dialog_manager\"));\r\nvar _uiFile_manager2 = _interopRequireDefault(require(\"./ui.file_manager.file_uploader\"));\r\nvar _uiFile_manager3 = require(\"./ui.file_manager.messages\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return _arrayLikeToArray(arr)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar FileManagerEditingControl = function(_Widget) {\r\n    _inherits(FileManagerEditingControl, _Widget);\r\n    var _super = _createSuper(FileManagerEditingControl);\r\n\r\n    function FileManagerEditingControl() {\r\n        _classCallCheck(this, FileManagerEditingControl);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(FileManagerEditingControl, [{\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_initMarkup\", this).call(this);\r\n            this._initActions();\r\n            this._controller = this.option(\"controller\");\r\n            this._controller.on(\"EditActionStarting\", this._onEditActionStarting.bind(this));\r\n            this._controller.on(\"EditActionResultAcquired\", this._onEditActionResultAcquired.bind(this));\r\n            this._controller.on(\"EditActionItemError\", this._onEditActionItemError.bind(this));\r\n            this._controller.on(\"EditActionError\", this._onEditActionError.bind(this));\r\n            this._controller.on(\"CompleteEditActionItem\", this._onCompleteEditActionItem.bind(this));\r\n            this._controller.on(\"CompleteEditAction\", this._onCompleteEditAction.bind(this));\r\n            this._model = this.option(\"model\");\r\n            this._uploadOperationInfoMap = {};\r\n            this._dialogManager = new _uiFile_manager.default(this.$element(), {\r\n                chooseDirectoryDialog: {\r\n                    provider: this._controller._fileProvider,\r\n                    getDirectories: this._controller.getDirectories.bind(this._controller),\r\n                    getCurrentDirectory: this._controller.getCurrentDirectory.bind(this._controller)\r\n                },\r\n                onDialogClosed: this._onDialogClosed.bind(this)\r\n            });\r\n            this._fileUploader = this._createFileUploader();\r\n            this._createMetadataMap()\r\n        }\r\n    }, {\r\n        key: \"_initNotificationControl\",\r\n        value: function(notificationControl) {\r\n            var _this = this;\r\n            this._notificationControl = notificationControl;\r\n            this._notificationControl.option({\r\n                onOperationCanceled: function(_ref) {\r\n                    var info = _ref.info;\r\n                    return _this._onCancelUploadSession(info)\r\n                },\r\n                onOperationItemCanceled: function(_ref2) {\r\n                    var item = _ref2.item,\r\n                        itemIndex = _ref2.itemIndex;\r\n                    return _this._onCancelFileUpload(item, itemIndex)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getFileUploaderComponent\",\r\n        value: function() {\r\n            return _uiFile_manager2.default\r\n        }\r\n    }, {\r\n        key: \"_createFileUploader\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            var $fileUploader = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\r\n            return this._createComponent($fileUploader, this._getFileUploaderComponent(), {\r\n                getController: this._getFileUploaderController.bind(this),\r\n                dropZonePlaceholderContainer: this.option(\"uploadDropZonePlaceholderContainer\"),\r\n                onUploadSessionStarted: function(e) {\r\n                    return _this2._onUploadSessionStarted(e)\r\n                },\r\n                onUploadProgress: function(e) {\r\n                    return _this2._onUploadProgress(e)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"setUploaderDropZone\",\r\n        value: function($element) {\r\n            this._fileUploader.option(\"dropZone\", $element)\r\n        }\r\n    }, {\r\n        key: \"_getFileUploaderController\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            var uploadDirectory = this.uploadDirectoryInfo.fileItem;\r\n            return {\r\n                chunkSize: this._controller.getFileUploadChunkSize(),\r\n                uploadFileChunk: function(fileData, chunksInfo) {\r\n                    return _this3._controller.uploadFileChunk(fileData, chunksInfo, uploadDirectory)\r\n                },\r\n                abortFileUpload: function(fileData, chunksInfo) {\r\n                    return _this3._controller.abortFileUpload(fileData, chunksInfo, uploadDirectory)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createMetadataMap\",\r\n        value: function() {\r\n            var _this4 = this;\r\n            this._metadataMap = {\r\n                create: {\r\n                    action: function(arg) {\r\n                        return _this4._tryCreate(arg)\r\n                    },\r\n                    affectsAllItems: true,\r\n                    singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingCreateSingleItemProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingCreateSingleItemSuccessMessage\"),\r\n                    singleItemErrorMessage: _message.default.format(\"dxFileManager-editingCreateSingleItemErrorMessage\"),\r\n                    commonErrorMessage: _message.default.format(\"dxFileManager-editingCreateCommonErrorMessage\")\r\n                },\r\n                rename: {\r\n                    action: function(arg) {\r\n                        return _this4._tryRename(arg)\r\n                    },\r\n                    singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingRenameSingleItemProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingRenameSingleItemSuccessMessage\"),\r\n                    singleItemErrorMessage: _message.default.format(\"dxFileManager-editingRenameSingleItemErrorMessage\"),\r\n                    commonErrorMessage: _message.default.format(\"dxFileManager-editingRenameCommonErrorMessage\")\r\n                },\r\n                \"delete\": {\r\n                    action: function(arg) {\r\n                        return _this4._tryDelete(arg)\r\n                    },\r\n                    singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingDeleteSingleItemProcessingMessage\"),\r\n                    multipleItemsProcessingMessage: _message.default.format(\"dxFileManager-editingDeleteMultipleItemsProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingDeleteSingleItemSuccessMessage\"),\r\n                    multipleItemsSuccessMessage: _message.default.format(\"dxFileManager-editingDeleteMultipleItemsSuccessMessage\"),\r\n                    singleItemErrorMessage: _message.default.format(\"dxFileManager-editingDeleteSingleItemErrorMessage\"),\r\n                    multipleItemsErrorMessage: _message.default.format(\"dxFileManager-editingDeleteMultipleItemsErrorMessage\"),\r\n                    commonErrorMessage: _message.default.format(\"dxFileManager-editingDeleteCommonErrorMessage\")\r\n                },\r\n                move: {\r\n                    action: function(arg) {\r\n                        return _this4._tryMove(arg)\r\n                    },\r\n                    singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingMoveSingleItemProcessingMessage\"),\r\n                    multipleItemsProcessingMessage: _message.default.format(\"dxFileManager-editingMoveMultipleItemsProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingMoveSingleItemSuccessMessage\"),\r\n                    multipleItemsSuccessMessage: _message.default.format(\"dxFileManager-editingMoveMultipleItemsSuccessMessage\"),\r\n                    singleItemErrorMessage: _message.default.format(\"dxFileManager-editingMoveSingleItemErrorMessage\"),\r\n                    multipleItemsErrorMessage: _message.default.format(\"dxFileManager-editingMoveMultipleItemsErrorMessage\"),\r\n                    commonErrorMessage: _message.default.format(\"dxFileManager-editingMoveCommonErrorMessage\")\r\n                },\r\n                copy: {\r\n                    action: function(arg) {\r\n                        return _this4._tryCopy(arg)\r\n                    },\r\n                    singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingCopySingleItemProcessingMessage\"),\r\n                    multipleItemsProcessingMessage: _message.default.format(\"dxFileManager-editingCopyMultipleItemsProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingCopySingleItemSuccessMessage\"),\r\n                    multipleItemsSuccessMessage: _message.default.format(\"dxFileManager-editingCopyMultipleItemsSuccessMessage\"),\r\n                    singleItemErrorMessage: _message.default.format(\"dxFileManager-editingCopySingleItemErrorMessage\"),\r\n                    multipleItemsErrorMessage: _message.default.format(\"dxFileManager-editingCopyMultipleItemsErrorMessage\"),\r\n                    commonErrorMessage: _message.default.format(\"dxFileManager-editingCopyCommonErrorMessage\")\r\n                },\r\n                upload: {\r\n                    action: function(arg) {\r\n                        return _this4._tryUpload(arg)\r\n                    },\r\n                    allowCancel: true,\r\n                    allowItemProgress: true,\r\n                    singleItemProcessingMessage: _message.default.format(\"dxFileManager-editingUploadSingleItemProcessingMessage\"),\r\n                    multipleItemsProcessingMessage: _message.default.format(\"dxFileManager-editingUploadMultipleItemsProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message.default.format(\"dxFileManager-editingUploadSingleItemSuccessMessage\"),\r\n                    multipleItemsSuccessMessage: _message.default.format(\"dxFileManager-editingUploadMultipleItemsSuccessMessage\"),\r\n                    singleItemErrorMessage: _message.default.format(\"dxFileManager-editingUploadSingleItemErrorMessage\"),\r\n                    multipleItemsErrorMessage: _message.default.format(\"dxFileManager-editingUploadMultipleItemsErrorMessage\"),\r\n                    canceledMessage: _message.default.format(\"dxFileManager-editingUploadCanceledMessage\")\r\n                },\r\n                download: {\r\n                    action: function(arg) {\r\n                        return _this4._download(arg)\r\n                    }\r\n                },\r\n                getItemContent: {\r\n                    action: function(arg) {\r\n                        return _this4._getItemContent(arg)\r\n                    }\r\n                },\r\n                getItems: {\r\n                    singleItemProcessingMessage: \"\",\r\n                    singleItemErrorMessage: _message.default.format(\"dxFileManager-errorDirectoryOpenFailed\"),\r\n                    commonErrorMessage: _message.default.format(\"dxFileManager-errorDirectoryOpenFailed\")\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getCommandActions\",\r\n        value: function() {\r\n            var _this5 = this;\r\n            var result = {};\r\n            (0, _iterator.each)(this._metadataMap, function(name) {\r\n                if (Object.prototype.hasOwnProperty.call(_this5._metadataMap, name)) {\r\n                    result[name] = function(arg) {\r\n                        return _this5._executeAction(name, arg)\r\n                    }\r\n                }\r\n            });\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_executeAction\",\r\n        value: function(actionName, arg) {\r\n            var actionMetadata = this._metadataMap[actionName];\r\n            return actionMetadata ? actionMetadata.action(arg) : null\r\n        }\r\n    }, {\r\n        key: \"_onCancelUploadSession\",\r\n        value: function(info) {\r\n            this._fileUploader.cancelUpload(info.uploadSessionId)\r\n        }\r\n    }, {\r\n        key: \"_onCancelFileUpload\",\r\n        value: function(item, itemIndex) {\r\n            this._fileUploader.cancelFileUpload(item.info.uploadSessionId, itemIndex)\r\n        }\r\n    }, {\r\n        key: \"_onUploadProgress\",\r\n        value: function(_ref3) {\r\n            var sessionId = _ref3.sessionId,\r\n                fileIndex = _ref3.fileIndex,\r\n                commonValue = _ref3.commonValue,\r\n                fileValue = _ref3.fileValue;\r\n            var operationInfo = this._uploadOperationInfoMap[sessionId];\r\n            this._notificationControl.updateOperationItemProgress(operationInfo, fileIndex, 100 * fileValue, 100 * commonValue)\r\n        }\r\n    }, {\r\n        key: \"_onUploadSessionStarted\",\r\n        value: function(_ref4) {\r\n            var sessionInfo = _ref4.sessionInfo;\r\n            this._controller.processUploadSession(sessionInfo, this.uploadDirectoryInfo)\r\n        }\r\n    }, {\r\n        key: \"_onEditActionStarting\",\r\n        value: function(actionInfo) {\r\n            var actionMetadata = this._metadataMap[actionInfo.name];\r\n            var context = new FileManagerActionContext(actionMetadata, actionInfo.itemInfos, actionInfo.directory);\r\n            var operationInfo = this._notificationControl.addOperation(context.processingMessage, actionMetadata.allowCancel, !actionMetadata.allowItemProgress);\r\n            (0, _extend.extend)(actionInfo.customData, {\r\n                context: context,\r\n                operationInfo: operationInfo\r\n            });\r\n            switch (actionInfo.name) {\r\n                case \"upload\":\r\n                    var sessionId = actionInfo.customData.sessionInfo.sessionId;\r\n                    operationInfo.uploadSessionId = sessionId;\r\n                    this._uploadOperationInfoMap[sessionId] = operationInfo;\r\n                    break;\r\n                case \"rename\":\r\n                    actionInfo.customData.context.itemNewName = actionInfo.customData.itemNewName\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onEditActionResultAcquired\",\r\n        value: function(actionInfo) {\r\n            var _this6 = this;\r\n            var _actionInfo$customDat = actionInfo.customData,\r\n                context = _actionInfo$customDat.context,\r\n                operationInfo = _actionInfo$customDat.operationInfo;\r\n            context.singleRequest = actionInfo.singleRequest;\r\n            var details = context.itemInfos.map(function(itemInfo) {\r\n                return _this6._getItemProgressDisplayInfo(itemInfo)\r\n            });\r\n            this._notificationControl.addOperationDetails(operationInfo, details, context.actionMetadata.allowCancel)\r\n        }\r\n    }, {\r\n        key: \"_onEditActionError\",\r\n        value: function(actionInfo, errorInfo) {\r\n            var _actionInfo$customDat2 = actionInfo.customData,\r\n                context = _actionInfo$customDat2.context,\r\n                operationInfo = _actionInfo$customDat2.operationInfo;\r\n            context.singleRequest = actionInfo.singleRequest;\r\n            this._handleActionError(operationInfo, context, errorInfo);\r\n            this._completeAction(operationInfo, context)\r\n        }\r\n    }, {\r\n        key: \"_onEditActionItemError\",\r\n        value: function(actionInfo, errorInfo) {\r\n            var _actionInfo$customDat3 = actionInfo.customData,\r\n                context = _actionInfo$customDat3.context,\r\n                operationInfo = _actionInfo$customDat3.operationInfo;\r\n            this._handleActionError(operationInfo, context, errorInfo)\r\n        }\r\n    }, {\r\n        key: \"_onCompleteEditActionItem\",\r\n        value: function(actionInfo, info) {\r\n            var _actionInfo$customDat4 = actionInfo.customData,\r\n                context = _actionInfo$customDat4.context,\r\n                operationInfo = _actionInfo$customDat4.operationInfo;\r\n            if (!info.result || !info.result.canceled) {\r\n                context.completeOperationItem(info.index);\r\n                this._notificationControl.completeOperationItem(operationInfo, info.index, context.commonProgress)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onCompleteEditAction\",\r\n        value: function(actionInfo) {\r\n            var _actionInfo$customDat5 = actionInfo.customData,\r\n                context = _actionInfo$customDat5.context,\r\n                operationInfo = _actionInfo$customDat5.operationInfo;\r\n            this._completeAction(operationInfo, context);\r\n            if (\"upload\" === actionInfo.name) {\r\n                delete this._uploadOperationInfoMap[actionInfo.customData.sessionInfo.sessionId]\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_tryCreate\",\r\n        value: function(parentDirectories) {\r\n            var _this7 = this;\r\n            var parentDirectoryInfo = parentDirectories && parentDirectories[0] || this._getCurrentDirectory();\r\n            var newDirName = _message.default.format(\"dxFileManager-newDirectoryName\");\r\n            return this._showDialog(this._dialogManager.getCreateItemDialog(), newDirName).then(function(_ref5) {\r\n                var name = _ref5.name;\r\n                return _this7._controller.createDirectory(parentDirectoryInfo, name)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryRename\",\r\n        value: function(itemInfos) {\r\n            var _this8 = this;\r\n            var itemInfo = itemInfos && itemInfos[0] || this._model.getMultipleSelectedItems()[0];\r\n            return this._showDialog(this._dialogManager.getRenameItemDialog(), itemInfo.fileItem.name).then(function(_ref6) {\r\n                var name = _ref6.name;\r\n                return _this8._controller.renameItem(itemInfo, name)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryDelete\",\r\n        value: function(itemInfos) {\r\n            var _this9 = this;\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            var itemName = itemInfos[0].fileItem.name;\r\n            var itemCount = itemInfos.length;\r\n            return this._showDialog(this._dialogManager.getDeleteItemDialog(), {\r\n                itemName: itemName,\r\n                itemCount: itemCount\r\n            }).then(function() {\r\n                return _this9._controller.deleteItems(itemInfos)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryMove\",\r\n        value: function(itemInfos) {\r\n            var _this10 = this;\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._showDialog(this._dialogManager.getMoveDialog(itemInfos)).then(function(_ref7) {\r\n                var folder = _ref7.folder;\r\n                return _this10._controller.moveItems(itemInfos, folder)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryCopy\",\r\n        value: function(itemInfos) {\r\n            var _this11 = this;\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._showDialog(this._dialogManager.getCopyDialog(itemInfos)).then(function(_ref8) {\r\n                var folder = _ref8.folder;\r\n                return _this11._controller.copyItems(itemInfos, folder)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryUpload\",\r\n        value: function(destinationFolder) {\r\n            this._uploadDirectoryInfo = null === destinationFolder || void 0 === destinationFolder ? void 0 : destinationFolder[0];\r\n            this._fileUploader.tryUpload()\r\n        }\r\n    }, {\r\n        key: \"_download\",\r\n        value: function(itemInfos) {\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._controller.downloadItems(itemInfos)\r\n        }\r\n    }, {\r\n        key: \"_getItemContent\",\r\n        value: function(itemInfos) {\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._controller.getItemContent(itemInfos)\r\n        }\r\n    }, {\r\n        key: \"_completeAction\",\r\n        value: function(operationInfo, context) {\r\n            this._notificationControl.completeOperation(operationInfo, context.completionMessage, !context.success, context.statusText);\r\n            if (context.hasModifiedItems()) {\r\n                this._raiseOnSuccess(context.onlyFiles)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_handleActionError\",\r\n        value: function(operationInfo, context, errorInfo) {\r\n            operationInfo.hasError = true;\r\n            if (context.singleRequest) {\r\n                this._handleSingleRequestActionError(operationInfo, context, errorInfo)\r\n            } else {\r\n                this._handleMultipleRequestActionError(operationInfo, context, errorInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_handleSingleRequestActionError\",\r\n        value: function(operationInfo, context, errorInfo) {\r\n            var itemInfo = context.getItemForSingleRequestError();\r\n            var itemName = context.itemNewName;\r\n            var errorText = this._getErrorText(errorInfo, itemInfo, itemName);\r\n            context.processSingleRequestError(errorText);\r\n            var operationErrorInfo = this._getOperationErrorInfo(context);\r\n            this._notificationControl.completeSingleOperationWithError(operationInfo, operationErrorInfo);\r\n            if (context.multipleItems) {\r\n                this._raiseOnSuccess(context.onlyFiles)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_handleMultipleRequestActionError\",\r\n        value: function(operationInfo, context, errorInfo) {\r\n            var itemInfo = context.getItemForMultipleRequestError(errorInfo.index);\r\n            var errorText = this._getErrorText(errorInfo, itemInfo);\r\n            context.processMultipleRequestError(errorInfo.index, errorText);\r\n            var operationErrorInfo = this._getOperationErrorInfo(context);\r\n            this._notificationControl.addOperationDetailsError(operationInfo, operationErrorInfo)\r\n        }\r\n    }, {\r\n        key: \"_getOperationErrorInfo\",\r\n        value: function(context) {\r\n            var detailError = context.errorState.currentDetailError;\r\n            return {\r\n                commonErrorText: context.errorState.commonErrorText,\r\n                item: detailError.itemInfo ? this._getItemProgressDisplayInfo(detailError.itemInfo) : null,\r\n                itemIndex: detailError.itemIndex,\r\n                detailErrorText: detailError.errorText\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getErrorText\",\r\n        value: function(errorInfo, itemInfo, itemName) {\r\n            itemName = itemName || (null === itemInfo || void 0 === itemInfo ? void 0 : itemInfo.fileItem.name);\r\n            var errorText = errorInfo.errorText || _uiFile_manager3.FileManagerMessages.get(errorInfo.errorId, itemName);\r\n            var errorArgs = {\r\n                fileSystemItem: null === itemInfo || void 0 === itemInfo ? void 0 : itemInfo.fileItem,\r\n                errorCode: errorInfo.errorId,\r\n                errorText: errorText\r\n            };\r\n            this._raiseOnError(errorArgs);\r\n            return errorArgs.errorText\r\n        }\r\n    }, {\r\n        key: \"_getItemProgressDisplayInfo\",\r\n        value: function(itemInfo) {\r\n            return {\r\n                commonText: itemInfo.fileItem.name,\r\n                imageUrl: this._getItemThumbnail(itemInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_showDialog\",\r\n        value: function(dialog, dialogArgument) {\r\n            this._dialogDeferred = new _deferred.Deferred;\r\n            dialog.show(dialogArgument);\r\n            return this._dialogDeferred.promise()\r\n        }\r\n    }, {\r\n        key: \"_onDialogClosed\",\r\n        value: function(e) {\r\n            var result = e.dialogResult;\r\n            if (result) {\r\n                this._dialogDeferred.resolve(result)\r\n            } else {\r\n                this._dialogDeferred.reject()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getItemThumbnail\",\r\n        value: function(item) {\r\n            var itemThumbnailGetter = this.option(\"getItemThumbnail\");\r\n            if (!itemThumbnailGetter) {\r\n                return null\r\n            }\r\n            var info = itemThumbnailGetter(item);\r\n            return info ? info.thumbnail : null\r\n        }\r\n    }, {\r\n        key: \"_initActions\",\r\n        value: function() {\r\n            this._actions = {\r\n                onSuccess: this._createActionByOption(\"onSuccess\"),\r\n                onError: this._createActionByOption(\"onError\"),\r\n                onCreating: this._createActionByOption(\"onCreating\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                model: {\r\n                    getMultipleSelectedItems: null\r\n                },\r\n                notificationControl: null,\r\n                getItemThumbnail: null,\r\n                onSuccess: null,\r\n                onError: null,\r\n                onCreating: null\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            var name = args.name;\r\n            switch (name) {\r\n                case \"model\":\r\n                    this.repaint();\r\n                    break;\r\n                case \"notificationControl\":\r\n                    this._initNotificationControl(args.value);\r\n                    break;\r\n                case \"getItemThumbnail\":\r\n                    break;\r\n                case \"uploadDropZonePlaceholderContainer\":\r\n                    this._fileUploader.option(\"dropZonePlaceholderContainer\", args.value);\r\n                    break;\r\n                case \"onSuccess\":\r\n                case \"onError\":\r\n                case \"onCreating\":\r\n                    this._actions[name] = this._createActionByOption(name);\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseOnSuccess\",\r\n        value: function(updatedOnlyFiles) {\r\n            this._actions.onSuccess({\r\n                updatedOnlyFiles: updatedOnlyFiles\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_raiseOnError\",\r\n        value: function(args) {\r\n            this._actions.onError(args)\r\n        }\r\n    }, {\r\n        key: \"_getCurrentDirectory\",\r\n        value: function() {\r\n            return this._controller.getCurrentDirectory()\r\n        }\r\n    }, {\r\n        key: \"uploadDirectoryInfo\",\r\n        get: function() {\r\n            return this._uploadDirectoryInfo || this._getCurrentDirectory()\r\n        }\r\n    }]);\r\n    return FileManagerEditingControl\r\n}(_ui.default);\r\nvar FileManagerActionContext = function() {\r\n    function FileManagerActionContext(actionMetadata, itemInfos, directoryInfo) {\r\n        _classCallCheck(this, FileManagerActionContext);\r\n        this._actionMetadata = actionMetadata;\r\n        this._itemInfos = itemInfos;\r\n        this._onlyFiles = !this._actionMetadata.affectsAllItems && this._itemInfos.every(function(info) {\r\n            return !info.fileItem.isDirectory\r\n        });\r\n        this._items = this._itemInfos.map(function(itemInfo) {\r\n            return itemInfo.fileItem\r\n        });\r\n        this._multipleItems = this._items.length > 1;\r\n        this._location = directoryInfo.getDisplayName();\r\n        this._singleRequest = true;\r\n        this._completedItems = [];\r\n        this._commonProgress = 0;\r\n        this._errorState = {\r\n            failedCount: 0\r\n        };\r\n        this._itemNewName = \"\"\r\n    }\r\n    _createClass(FileManagerActionContext, [{\r\n        key: \"completeOperationItem\",\r\n        value: function(itemIndex) {\r\n            if (this._singleRequest) {\r\n                this._completedItems = _toConsumableArray(this._items)\r\n            } else {\r\n                var item = this._items[itemIndex];\r\n                this._completedItems.push(item)\r\n            }\r\n            if (!this._actionMetadata.allowItemProgress) {\r\n                this._commonProgress = this._completedItems.length / this._items.length * 100\r\n            }\r\n        }\r\n    }, {\r\n        key: \"processSingleRequestError\",\r\n        value: function(errorText) {\r\n            this._errorState.failedCount = 1;\r\n            this._errorState.commonErrorText = this._multipleItems ? this._actionMetadata.commonErrorMessage : this._actionMetadata.singleItemErrorMessage;\r\n            var itemIndex = this._multipleItems ? -1 : 1;\r\n            var itemInfo = this.getItemForSingleRequestError();\r\n            this._setCurrentDetailError(itemIndex, itemInfo, errorText)\r\n        }\r\n    }, {\r\n        key: \"processMultipleRequestError\",\r\n        value: function(itemIndex, errorText) {\r\n            this._errorState.failedCount++;\r\n            this._errorState.commonErrorText = this._errorState.failedCount > 1 ? (0, _string.format)(this._actionMetadata.multipleItemsErrorMessage, this._errorState.failedCount) : this._actionMetadata.singleItemErrorMessage;\r\n            var itemInfo = this.getItemForMultipleRequestError(itemIndex);\r\n            this._setCurrentDetailError(itemIndex, itemInfo, errorText)\r\n        }\r\n    }, {\r\n        key: \"hasModifiedItems\",\r\n        value: function() {\r\n            return this._hasCompletedItems() || this._singleRequest && !this.success && this._multipleItems\r\n        }\r\n    }, {\r\n        key: \"getItemForSingleRequestError\",\r\n        value: function() {\r\n            return this._multipleItems ? null : this._itemInfos[0]\r\n        }\r\n    }, {\r\n        key: \"getItemForMultipleRequestError\",\r\n        value: function(itemIndex) {\r\n            return this._itemInfos[itemIndex]\r\n        }\r\n    }, {\r\n        key: \"_setCurrentDetailError\",\r\n        value: function(itemIndex, itemInfo, errorText) {\r\n            this._errorState.currentDetailError = {\r\n                itemIndex: itemIndex,\r\n                itemInfo: itemInfo,\r\n                errorText: errorText\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hasCompletedItems\",\r\n        value: function() {\r\n            return this._completedItems.length > 0\r\n        }\r\n    }, {\r\n        key: \"actionMetadata\",\r\n        get: function() {\r\n            return this._actionMetadata\r\n        }\r\n    }, {\r\n        key: \"itemInfos\",\r\n        get: function() {\r\n            return this._itemInfos\r\n        }\r\n    }, {\r\n        key: \"itemNewName\",\r\n        get: function() {\r\n            return this._itemNewName\r\n        },\r\n        set: function(value) {\r\n            this._itemNewName = value\r\n        }\r\n    }, {\r\n        key: \"errorState\",\r\n        get: function() {\r\n            return this._errorState\r\n        }\r\n    }, {\r\n        key: \"singleRequest\",\r\n        get: function() {\r\n            return this._singleRequest\r\n        },\r\n        set: function(value) {\r\n            this._singleRequest = value\r\n        }\r\n    }, {\r\n        key: \"multipleItems\",\r\n        get: function() {\r\n            return this._multipleItems\r\n        }\r\n    }, {\r\n        key: \"onlyFiles\",\r\n        get: function() {\r\n            return this._onlyFiles\r\n        }\r\n    }, {\r\n        key: \"processingMessage\",\r\n        get: function() {\r\n            return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsProcessingMessage, this._items.length, this._location) : (0, _string.format)(this._actionMetadata.singleItemProcessingMessage, this._location)\r\n        }\r\n    }, {\r\n        key: \"successMessage\",\r\n        get: function() {\r\n            if (this._hasCompletedItems()) {\r\n                return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsSuccessMessage, this._completedItems.length, this._location) : (0, _string.format)(this._actionMetadata.singleItemSuccessMessage, this._location)\r\n            } else {\r\n                return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsErrorMessage, this._items.length) : this._actionMetadata.singleItemErrorMessage\r\n            }\r\n        }\r\n    }, {\r\n        key: \"completionMessage\",\r\n        get: function() {\r\n            return this.success ? this.successMessage : this.errorState.commonErrorText\r\n        }\r\n    }, {\r\n        key: \"statusText\",\r\n        get: function() {\r\n            return this.success && !this._hasCompletedItems() ? this._actionMetadata.canceledMessage : void 0\r\n        }\r\n    }, {\r\n        key: \"commonProgress\",\r\n        get: function() {\r\n            return this._commonProgress\r\n        }\r\n    }, {\r\n        key: \"success\",\r\n        get: function() {\r\n            return !this._errorState.failedCount\r\n        }\r\n    }]);\r\n    return FileManagerActionContext\r\n}();\r\nvar _default = FileManagerEditingControl;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}