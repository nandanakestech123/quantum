{"ast":null,"code":"/**\r\n * DevExtreme (viz/funnel/tooltip.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.plugin = void 0;\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _tooltip = require(\"../core/tooltip\");\n\nfunction getCoords(figureCoords, renderer) {\n  var offset = renderer.getRootOffset();\n  return [(figureCoords[0] + figureCoords[2]) / 2 + offset.left, (figureCoords[1] + figureCoords[5]) / 2 + offset.top];\n}\n\nvar plugin = {\n  name: \"funnel-tooltip\",\n  init: _common.noop,\n  dispose: _common.noop,\n  extenders: {\n    _buildNodes: function () {\n      this.hideTooltip();\n    },\n    _change_TILING: function () {\n      if (this._tooltipIndex >= 0) {\n        this._moveTooltip(this._items[this._tooltipIndex]);\n      }\n    }\n  },\n  members: {\n    hideTooltip: function () {\n      if (this._tooltipIndex >= 0) {\n        this._tooltipIndex = -1;\n\n        this._tooltip.hide();\n      }\n    },\n    _moveTooltip: function (item, coords) {\n      var xy = coords || item.coords && getCoords(item.coords, this._renderer) || [-1e3, -1e3];\n\n      this._tooltip.move(xy[0], xy[1], 0);\n    },\n    _showTooltip: function (index, coords) {\n      var that = this;\n      var tooltip = that._tooltip;\n      var item = that._items[index];\n\n      if (that._tooltipIndex === index) {\n        that._moveTooltip(item, coords);\n\n        return;\n      }\n\n      var callback = function (result) {\n        if (void 0 === result) {\n          return;\n        }\n\n        if (result) {\n          that._moveTooltip(item, coords);\n        } else {\n          tooltip.hide();\n        }\n\n        that._tooltipIndex = result ? index : -1;\n      };\n\n      callback(tooltip.show({\n        value: item.value,\n        valueText: tooltip.formatValue(item.value),\n        percentText: tooltip.formatValue(item.percent, \"percent\"),\n        percent: item.percent,\n        item: item\n      }, {\n        x: 0,\n        y: 0,\n        offset: 0\n      }, {\n        item: item\n      }, void 0, callback));\n    }\n  },\n  customize: function (constructor) {\n    constructor.addPlugin(_tooltip.plugin);\n  }\n};\nexports.plugin = plugin;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/funnel/tooltip.js"],"names":["exports","plugin","_common","require","_tooltip","getCoords","figureCoords","renderer","offset","getRootOffset","left","top","name","init","noop","dispose","extenders","_buildNodes","hideTooltip","_change_TILING","_tooltipIndex","_moveTooltip","_items","members","hide","item","coords","xy","_renderer","move","_showTooltip","index","that","tooltip","callback","result","show","value","valueText","formatValue","percentText","percent","x","y","customize","constructor","addPlugin"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/funnel/tooltip.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.plugin = void 0;\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _tooltip = require(\"../core/tooltip\");\r\n\r\nfunction getCoords(figureCoords, renderer) {\r\n    var offset = renderer.getRootOffset();\r\n    return [(figureCoords[0] + figureCoords[2]) / 2 + offset.left, (figureCoords[1] + figureCoords[5]) / 2 + offset.top]\r\n}\r\nvar plugin = {\r\n    name: \"funnel-tooltip\",\r\n    init: _common.noop,\r\n    dispose: _common.noop,\r\n    extenders: {\r\n        _buildNodes: function() {\r\n            this.hideTooltip()\r\n        },\r\n        _change_TILING: function() {\r\n            if (this._tooltipIndex >= 0) {\r\n                this._moveTooltip(this._items[this._tooltipIndex])\r\n            }\r\n        }\r\n    },\r\n    members: {\r\n        hideTooltip: function() {\r\n            if (this._tooltipIndex >= 0) {\r\n                this._tooltipIndex = -1;\r\n                this._tooltip.hide()\r\n            }\r\n        },\r\n        _moveTooltip: function(item, coords) {\r\n            var xy = coords || item.coords && getCoords(item.coords, this._renderer) || [-1e3, -1e3];\r\n            this._tooltip.move(xy[0], xy[1], 0)\r\n        },\r\n        _showTooltip: function(index, coords) {\r\n            var that = this;\r\n            var tooltip = that._tooltip;\r\n            var item = that._items[index];\r\n            if (that._tooltipIndex === index) {\r\n                that._moveTooltip(item, coords);\r\n                return\r\n            }\r\n            var callback = function(result) {\r\n                if (void 0 === result) {\r\n                    return\r\n                }\r\n                if (result) {\r\n                    that._moveTooltip(item, coords)\r\n                } else {\r\n                    tooltip.hide()\r\n                }\r\n                that._tooltipIndex = result ? index : -1\r\n            };\r\n            callback(tooltip.show({\r\n                value: item.value,\r\n                valueText: tooltip.formatValue(item.value),\r\n                percentText: tooltip.formatValue(item.percent, \"percent\"),\r\n                percent: item.percent,\r\n                item: item\r\n            }, {\r\n                x: 0,\r\n                y: 0,\r\n                offset: 0\r\n            }, {\r\n                item: item\r\n            }, void 0, callback))\r\n        }\r\n    },\r\n    customize: function(constructor) {\r\n        constructor.addPlugin(_tooltip.plugin)\r\n    }\r\n};\r\nexports.plugin = plugin;\r\n"]},"metadata":{},"sourceType":"script"}