{"ast":null,"code":"/**\r\n * DevExtreme (ui/map.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _promise = _interopRequireDefault(require(\"../core/polyfills/promise\"));\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _ui = _interopRequireDefault(require(\"./widget/ui.errors\"));\n\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\n\nvar _ui2 = _interopRequireDefault(require(\"./widget/ui.widget\"));\n\nvar _inflector = require(\"../core/utils/inflector\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _array = require(\"../core/utils/array\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _index = require(\"../events/utils/index\");\n\nvar _pointer = _interopRequireDefault(require(\"../events/pointer\"));\n\nvar _provider = _interopRequireDefault(require(\"./map/provider.google_static\"));\n\nvar _providerDynamic = _interopRequireDefault(require(\"./map/provider.dynamic.google\"));\n\nvar _providerDynamic2 = _interopRequireDefault(require(\"./map/provider.dynamic.bing\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar PROVIDERS = {\n  googleStatic: _provider.default,\n  google: _providerDynamic.default,\n  bing: _providerDynamic2.default\n};\nvar MAP_CLASS = \"dx-map\";\nvar MAP_CONTAINER_CLASS = \"dx-map-container\";\nvar MAP_SHIELD_CLASS = \"dx-map-shield\";\nvar NATIVE_CLICK_CLASS = \"dx-native-click\";\n\nvar Map = _ui2.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      bounds: {\n        northEast: null,\n        southWest: null\n      },\n      center: {\n        lat: 0,\n        lng: 0\n      },\n      zoom: 1,\n      width: 300,\n      height: 300,\n      type: \"roadmap\",\n      provider: \"google\",\n      autoAdjust: true,\n      markers: [],\n      markerIconSrc: null,\n      onMarkerAdded: null,\n      onMarkerRemoved: null,\n      routes: [],\n      onRouteAdded: null,\n      onRouteRemoved: null,\n      key: {\n        bing: \"\",\n        google: \"\",\n        googleStatic: \"\"\n      },\n      apiKey: {\n        bing: \"\",\n        google: \"\",\n        googleStatic: \"\"\n      },\n      controls: false,\n      onReady: null,\n      onUpdated: null,\n      onClick: null\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _setDeprecatedOptions: function () {\n    this.callBase();\n    (0, _extend.extend)(this._deprecatedOptions, {\n      key: {\n        since: \"20.2\",\n        alias: \"apiKey\"\n      }\n    });\n  },\n  _init: function () {\n    this.callBase();\n    this.$element().addClass(MAP_CLASS).addClass(NATIVE_CLICK_CLASS);\n    this._lastAsyncAction = _promise.default.resolve();\n\n    this._checkOption(\"provider\");\n\n    this._checkOption(\"markers\");\n\n    this._checkOption(\"routes\");\n\n    this._initContainer();\n\n    this._grabEvents();\n\n    this._rendered = {};\n  },\n  _checkOption: function (option) {\n    var value = this.option(option);\n\n    if (\"markers\" === option && !Array.isArray(value)) {\n      throw _ui.default.Error(\"E1022\");\n    }\n\n    if (\"routes\" === option && !Array.isArray(value)) {\n      throw _ui.default.Error(\"E1023\");\n    }\n  },\n  _initContainer: function () {\n    this._$container = (0, _renderer.default)(\"<div>\").addClass(MAP_CONTAINER_CLASS);\n    this.$element().append(this._$container);\n  },\n  _grabEvents: function () {\n    var eventName = (0, _index.addNamespace)(_pointer.default.down, this.NAME);\n\n    _events_engine.default.on(this.$element(), eventName, this._cancelEvent.bind(this));\n  },\n  _cancelEvent: function (e) {\n    var cancelByProvider = this._provider && this._provider.isEventsCanceled(e) && !this.option(\"disabled\");\n\n    if (cancelByProvider) {\n      e.stopPropagation();\n    }\n  },\n  _saveRendered: function (option) {\n    var value = this.option(option);\n    this._rendered[option] = value.slice();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderShield();\n\n    this._saveRendered(\"markers\");\n\n    this._saveRendered(\"routes\");\n\n    this._provider = new PROVIDERS[this.option(\"provider\")](this, this._$container);\n\n    this._queueAsyncAction(\"render\", this._rendered.markers, this._rendered.routes);\n  },\n  _renderShield: function () {\n    var $shield;\n\n    if (this.option(\"disabled\")) {\n      $shield = (0, _renderer.default)(\"<div>\").addClass(MAP_SHIELD_CLASS);\n      this.$element().append($shield);\n    } else {\n      $shield = this.$element().find(\".\" + MAP_SHIELD_CLASS);\n      $shield.remove();\n    }\n  },\n  _clean: function () {\n    this._cleanFocusState();\n\n    if (this._provider) {\n      this._provider.clean();\n    }\n\n    this._provider = null;\n    this._lastAsyncAction = _promise.default.resolve();\n    this.setOptionSilent(\"bounds\", {\n      northEast: null,\n      southWest: null\n    });\n    delete this._suppressAsyncAction;\n  },\n  _optionChanged: function (args) {\n    var name = args.name;\n    var changeBag = this._optionChangeBag;\n    this._optionChangeBag = null;\n\n    switch (name) {\n      case \"disabled\":\n        this._renderShield();\n\n        this.callBase(args);\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"provider\":\n        this._suppressAsyncAction = true;\n\n        this._invalidate();\n\n        break;\n\n      case \"key\":\n      case \"apiKey\":\n        _ui.default.log(\"W1001\");\n\n        break;\n\n      case \"bounds\":\n        this._queueAsyncAction(\"updateBounds\");\n\n        break;\n\n      case \"center\":\n        this._queueAsyncAction(\"updateCenter\");\n\n        break;\n\n      case \"zoom\":\n        this._queueAsyncAction(\"updateZoom\");\n\n        break;\n\n      case \"type\":\n        this._queueAsyncAction(\"updateMapType\");\n\n        break;\n\n      case \"controls\":\n        this._queueAsyncAction(\"updateControls\", this._rendered.markers, this._rendered.routes);\n\n        break;\n\n      case \"autoAdjust\":\n        this._queueAsyncAction(\"adjustViewport\");\n\n        break;\n\n      case \"markers\":\n      case \"routes\":\n        this._checkOption(name);\n\n        var prevValue = this._rendered[name];\n\n        this._saveRendered(name);\n\n        this._queueAsyncAction(\"update\" + (0, _inflector.titleize)(name), changeBag ? changeBag.removed : prevValue, changeBag ? changeBag.added : this._rendered[name]).then(function (result) {\n          if (changeBag) {\n            changeBag.resolve(result);\n          }\n        });\n\n        break;\n\n      case \"markerIconSrc\":\n        this._queueAsyncAction(\"updateMarkers\", this._rendered.markers, this._rendered.markers);\n\n        break;\n\n      case \"onReady\":\n      case \"onUpdated\":\n      case \"onMarkerAdded\":\n      case \"onMarkerRemoved\":\n      case \"onRouteAdded\":\n      case \"onRouteRemoved\":\n      case \"onClick\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      this._dimensionChanged();\n    }\n  },\n  _dimensionChanged: function () {\n    this._queueAsyncAction(\"updateDimensions\");\n  },\n  _queueAsyncAction: function (name) {\n    var options = [].slice.call(arguments).slice(1);\n    var isActionSuppressed = this._suppressAsyncAction;\n    this._lastAsyncAction = this._lastAsyncAction.then(function () {\n      if (!this._provider || isActionSuppressed) {\n        return _promise.default.resolve();\n      }\n\n      return this._provider[name].apply(this._provider, options).then(function (result) {\n        result = (0, _array.wrapToArray)(result);\n        var mapRefreshed = result[0];\n\n        if (mapRefreshed && !this._disposed) {\n          this._triggerReadyAction();\n        }\n\n        return result[1];\n      }.bind(this));\n    }.bind(this));\n    return this._lastAsyncAction;\n  },\n  _triggerReadyAction: function () {\n    this._createActionByOption(\"onReady\")({\n      originalMap: this._provider.map()\n    });\n  },\n  _triggerUpdateAction: function () {\n    this._createActionByOption(\"onUpdated\")();\n  },\n  setOptionSilent: function (name, value) {\n    this._setOptionWithoutOptionChange(name, value);\n  },\n  addMarker: function (marker) {\n    return this._addFunction(\"markers\", marker);\n  },\n  removeMarker: function (marker) {\n    return this._removeFunction(\"markers\", marker);\n  },\n  addRoute: function (route) {\n    return this._addFunction(\"routes\", route);\n  },\n  removeRoute: function (route) {\n    return this._removeFunction(\"routes\", route);\n  },\n  _addFunction: function (optionName, addingValue) {\n    var optionValue = this.option(optionName);\n    var addingValues = (0, _array.wrapToArray)(addingValue);\n    optionValue.push.apply(optionValue, addingValues);\n    return this._partialArrayOptionChange(optionName, optionValue, addingValues, []);\n  },\n  _removeFunction: function (optionName, removingValue) {\n    var optionValue = this.option(optionName);\n    var removingValues = (0, _array.wrapToArray)(removingValue);\n    (0, _iterator.each)(removingValues, function (removingIndex, removingValue) {\n      var index = (0, _type.isNumeric)(removingValue) ? removingValue : (0, _array.inArray)(removingValue, optionValue);\n\n      if (index !== -1) {\n        var removing = optionValue.splice(index, 1)[0];\n        removingValues.splice(removingIndex, 1, removing);\n      } else {\n        throw _ui.default.log(\"E1021\", (0, _inflector.titleize)(optionName.substring(0, optionName.length - 1)), removingValue);\n      }\n    });\n    return this._partialArrayOptionChange(optionName, optionValue, [], removingValues);\n  },\n  _partialArrayOptionChange: function (optionName, optionValue, addingValues, removingValues) {\n    return (0, _deferred.fromPromise)(new _promise.default(function (resolve) {\n      this._optionChangeBag = {\n        resolve: resolve,\n        added: addingValues,\n        removed: removingValues\n      };\n      this.option(optionName, optionValue);\n    }.bind(this)).then(function (result) {\n      return result && 1 === result.length ? result[0] : result;\n    }), this);\n  }\n});\n\n(0, _component_registrator.default)(\"dxMap\", Map);\nvar _default = Map;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/map.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_promise","_deferred","_component_registrator","_ui","_devices","_ui2","_inflector","_iterator","_extend","_array","_type","_index","_pointer","_provider","_providerDynamic","_providerDynamic2","obj","__esModule","PROVIDERS","googleStatic","google","bing","MAP_CLASS","MAP_CONTAINER_CLASS","MAP_SHIELD_CLASS","NATIVE_CLICK_CLASS","Map","inherit","_getDefaultOptions","extend","callBase","bounds","northEast","southWest","center","lat","lng","zoom","width","height","type","provider","autoAdjust","markers","markerIconSrc","onMarkerAdded","onMarkerRemoved","routes","onRouteAdded","onRouteRemoved","key","apiKey","controls","onReady","onUpdated","onClick","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_setDeprecatedOptions","_deprecatedOptions","since","alias","_init","$element","addClass","_lastAsyncAction","resolve","_checkOption","_initContainer","_grabEvents","_rendered","option","value","Array","isArray","Error","_$container","append","eventName","addNamespace","down","NAME","on","_cancelEvent","bind","e","cancelByProvider","isEventsCanceled","stopPropagation","_saveRendered","slice","_render","_renderShield","_queueAsyncAction","$shield","find","remove","_clean","_cleanFocusState","clean","setOptionSilent","_suppressAsyncAction","_optionChanged","args","name","changeBag","_optionChangeBag","_dimensionChanged","_invalidate","log","prevValue","titleize","removed","added","then","result","apply","arguments","_visibilityChanged","visible","call","isActionSuppressed","wrapToArray","mapRefreshed","_disposed","_triggerReadyAction","_createActionByOption","originalMap","map","_triggerUpdateAction","_setOptionWithoutOptionChange","addMarker","marker","_addFunction","removeMarker","_removeFunction","addRoute","route","removeRoute","optionName","addingValue","optionValue","addingValues","push","_partialArrayOptionChange","removingValue","removingValues","each","removingIndex","index","isNumeric","inArray","removing","splice","substring","length","fromPromise","_default","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,OAAO,CAACC,OAAR,GAAkB,KAAK,CAAvB;;AACA,IAAIC,SAAS,GAAGC,sBAAsB,CAACC,OAAO,CAAC,kBAAD,CAAR,CAAtC;;AACA,IAAIC,cAAc,GAAGF,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAA3C;;AACA,IAAIE,QAAQ,GAAGH,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAArC;;AACA,IAAIG,SAAS,GAAGH,OAAO,CAAC,wBAAD,CAAvB;;AACA,IAAII,sBAAsB,GAAGL,sBAAsB,CAACC,OAAO,CAAC,+BAAD,CAAR,CAAnD;;AACA,IAAIK,GAAG,GAAGN,sBAAsB,CAACC,OAAO,CAAC,oBAAD,CAAR,CAAhC;;AACA,IAAIM,QAAQ,GAAGP,sBAAsB,CAACC,OAAO,CAAC,iBAAD,CAAR,CAArC;;AACA,IAAIO,IAAI,GAAGR,sBAAsB,CAACC,OAAO,CAAC,oBAAD,CAAR,CAAjC;;AACA,IAAIQ,UAAU,GAAGR,OAAO,CAAC,yBAAD,CAAxB;;AACA,IAAIS,SAAS,GAAGT,OAAO,CAAC,wBAAD,CAAvB;;AACA,IAAIU,OAAO,GAAGV,OAAO,CAAC,sBAAD,CAArB;;AACA,IAAIW,MAAM,GAAGX,OAAO,CAAC,qBAAD,CAApB;;AACA,IAAIY,KAAK,GAAGZ,OAAO,CAAC,oBAAD,CAAnB;;AACA,IAAIa,MAAM,GAAGb,OAAO,CAAC,uBAAD,CAApB;;AACA,IAAIc,QAAQ,GAAGf,sBAAsB,CAACC,OAAO,CAAC,mBAAD,CAAR,CAArC;;AACA,IAAIe,SAAS,GAAGhB,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAAtC;;AACA,IAAIgB,gBAAgB,GAAGjB,sBAAsB,CAACC,OAAO,CAAC,+BAAD,CAAR,CAA7C;;AACA,IAAIiB,iBAAiB,GAAGlB,sBAAsB,CAACC,OAAO,CAAC,6BAAD,CAAR,CAA9C;;AAEA,SAASD,sBAAT,CAAgCmB,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,SAAS,GAAG;AACZC,EAAAA,YAAY,EAAEN,SAAS,CAAClB,OADZ;AAEZyB,EAAAA,MAAM,EAAEN,gBAAgB,CAACnB,OAFb;AAGZ0B,EAAAA,IAAI,EAAEN,iBAAiB,CAACpB;AAHZ,CAAhB;AAKA,IAAI2B,SAAS,GAAG,QAAhB;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,gBAAgB,GAAG,eAAvB;AACA,IAAIC,kBAAkB,GAAG,iBAAzB;;AACA,IAAIC,GAAG,GAAGrB,IAAI,CAACV,OAAL,CAAagC,OAAb,CAAqB;AAC3BC,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO,CAAC,GAAGpB,OAAO,CAACqB,MAAZ,EAAoB,KAAKC,QAAL,EAApB,EAAqC;AACxCC,MAAAA,MAAM,EAAE;AACJC,QAAAA,SAAS,EAAE,IADP;AAEJC,QAAAA,SAAS,EAAE;AAFP,OADgC;AAKxCC,MAAAA,MAAM,EAAE;AACJC,QAAAA,GAAG,EAAE,CADD;AAEJC,QAAAA,GAAG,EAAE;AAFD,OALgC;AASxCC,MAAAA,IAAI,EAAE,CATkC;AAUxCC,MAAAA,KAAK,EAAE,GAViC;AAWxCC,MAAAA,MAAM,EAAE,GAXgC;AAYxCC,MAAAA,IAAI,EAAE,SAZkC;AAaxCC,MAAAA,QAAQ,EAAE,QAb8B;AAcxCC,MAAAA,UAAU,EAAE,IAd4B;AAexCC,MAAAA,OAAO,EAAE,EAf+B;AAgBxCC,MAAAA,aAAa,EAAE,IAhByB;AAiBxCC,MAAAA,aAAa,EAAE,IAjByB;AAkBxCC,MAAAA,eAAe,EAAE,IAlBuB;AAmBxCC,MAAAA,MAAM,EAAE,EAnBgC;AAoBxCC,MAAAA,YAAY,EAAE,IApB0B;AAqBxCC,MAAAA,cAAc,EAAE,IArBwB;AAsBxCC,MAAAA,GAAG,EAAE;AACD7B,QAAAA,IAAI,EAAE,EADL;AAEDD,QAAAA,MAAM,EAAE,EAFP;AAGDD,QAAAA,YAAY,EAAE;AAHb,OAtBmC;AA2BxCgC,MAAAA,MAAM,EAAE;AACJ9B,QAAAA,IAAI,EAAE,EADF;AAEJD,QAAAA,MAAM,EAAE,EAFJ;AAGJD,QAAAA,YAAY,EAAE;AAHV,OA3BgC;AAgCxCiC,MAAAA,QAAQ,EAAE,KAhC8B;AAiCxCC,MAAAA,OAAO,EAAE,IAjC+B;AAkCxCC,MAAAA,SAAS,EAAE,IAlC6B;AAmCxCC,MAAAA,OAAO,EAAE;AAnC+B,KAArC,CAAP;AAqCH,GAvC0B;AAwC3BC,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,WAAO,KAAK1B,QAAL,GAAgB2B,MAAhB,CAAuB,CAAC;AAC3BC,MAAAA,MAAM,EAAE,YAAW;AACf,eAAO,cAActD,QAAQ,CAACT,OAAT,CAAiBgE,IAAjB,GAAwBC,UAAtC,IAAoD,CAACxD,QAAQ,CAACT,OAAT,CAAiBkE,WAAjB,EAA5D;AACH,OAH0B;AAI3BC,MAAAA,OAAO,EAAE;AACLC,QAAAA,iBAAiB,EAAE;AADd;AAJkB,KAAD,CAAvB,CAAP;AAQH,GAjD0B;AAkD3BC,EAAAA,qBAAqB,EAAE,YAAW;AAC9B,SAAKlC,QAAL;AACA,KAAC,GAAGtB,OAAO,CAACqB,MAAZ,EAAoB,KAAKoC,kBAAzB,EAA6C;AACzCf,MAAAA,GAAG,EAAE;AACDgB,QAAAA,KAAK,EAAE,MADN;AAEDC,QAAAA,KAAK,EAAE;AAFN;AADoC,KAA7C;AAMH,GA1D0B;AA2D3BC,EAAAA,KAAK,EAAE,YAAW;AACd,SAAKtC,QAAL;AACA,SAAKuC,QAAL,GAAgBC,QAAhB,CAAyBhD,SAAzB,EAAoCgD,QAApC,CAA6C7C,kBAA7C;AACA,SAAK8C,gBAAL,GAAwBvE,QAAQ,CAACL,OAAT,CAAiB6E,OAAjB,EAAxB;;AACA,SAAKC,YAAL,CAAkB,UAAlB;;AACA,SAAKA,YAAL,CAAkB,SAAlB;;AACA,SAAKA,YAAL,CAAkB,QAAlB;;AACA,SAAKC,cAAL;;AACA,SAAKC,WAAL;;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACH,GArE0B;AAsE3BH,EAAAA,YAAY,EAAE,UAASI,MAAT,EAAiB;AAC3B,QAAIC,KAAK,GAAG,KAAKD,MAAL,CAAYA,MAAZ,CAAZ;;AACA,QAAI,cAAcA,MAAd,IAAwB,CAACE,KAAK,CAACC,OAAN,CAAcF,KAAd,CAA7B,EAAmD;AAC/C,YAAM3E,GAAG,CAACR,OAAJ,CAAYsF,KAAZ,CAAkB,OAAlB,CAAN;AACH;;AACD,QAAI,aAAaJ,MAAb,IAAuB,CAACE,KAAK,CAACC,OAAN,CAAcF,KAAd,CAA5B,EAAkD;AAC9C,YAAM3E,GAAG,CAACR,OAAJ,CAAYsF,KAAZ,CAAkB,OAAlB,CAAN;AACH;AACJ,GA9E0B;AA+E3BP,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKQ,WAAL,GAAmB,CAAC,GAAGtF,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC2E,QAAhC,CAAyC/C,mBAAzC,CAAnB;AACA,SAAK8C,QAAL,GAAgBc,MAAhB,CAAuB,KAAKD,WAA5B;AACH,GAlF0B;AAmF3BP,EAAAA,WAAW,EAAE,YAAW;AACpB,QAAIS,SAAS,GAAG,CAAC,GAAGzE,MAAM,CAAC0E,YAAX,EAAyBzE,QAAQ,CAACjB,OAAT,CAAiB2F,IAA1C,EAAgD,KAAKC,IAArD,CAAhB;;AACAxF,IAAAA,cAAc,CAACJ,OAAf,CAAuB6F,EAAvB,CAA0B,KAAKnB,QAAL,EAA1B,EAA2Ce,SAA3C,EAAsD,KAAKK,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAtD;AACH,GAtF0B;AAuF3BD,EAAAA,YAAY,EAAE,UAASE,CAAT,EAAY;AACtB,QAAIC,gBAAgB,GAAG,KAAK/E,SAAL,IAAkB,KAAKA,SAAL,CAAegF,gBAAf,CAAgCF,CAAhC,CAAlB,IAAwD,CAAC,KAAKd,MAAL,CAAY,UAAZ,CAAhF;;AACA,QAAIe,gBAAJ,EAAsB;AAClBD,MAAAA,CAAC,CAACG,eAAF;AACH;AACJ,GA5F0B;AA6F3BC,EAAAA,aAAa,EAAE,UAASlB,MAAT,EAAiB;AAC5B,QAAIC,KAAK,GAAG,KAAKD,MAAL,CAAYA,MAAZ,CAAZ;AACA,SAAKD,SAAL,CAAeC,MAAf,IAAyBC,KAAK,CAACkB,KAAN,EAAzB;AACH,GAhG0B;AAiG3BC,EAAAA,OAAO,EAAE,YAAW;AAChB,SAAKnE,QAAL;;AACA,SAAKoE,aAAL;;AACA,SAAKH,aAAL,CAAmB,SAAnB;;AACA,SAAKA,aAAL,CAAmB,QAAnB;;AACA,SAAKlF,SAAL,GAAiB,IAAIK,SAAS,CAAC,KAAK2D,MAAL,CAAY,UAAZ,CAAD,CAAb,CAAwC,IAAxC,EAA8C,KAAKK,WAAnD,CAAjB;;AACA,SAAKiB,iBAAL,CAAuB,QAAvB,EAAiC,KAAKvB,SAAL,CAAejC,OAAhD,EAAyD,KAAKiC,SAAL,CAAe7B,MAAxE;AACH,GAxG0B;AAyG3BmD,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAIE,OAAJ;;AACA,QAAI,KAAKvB,MAAL,CAAY,UAAZ,CAAJ,EAA6B;AACzBuB,MAAAA,OAAO,GAAG,CAAC,GAAGxG,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC2E,QAAhC,CAAyC9C,gBAAzC,CAAV;AACA,WAAK6C,QAAL,GAAgBc,MAAhB,CAAuBiB,OAAvB;AACH,KAHD,MAGO;AACHA,MAAAA,OAAO,GAAG,KAAK/B,QAAL,GAAgBgC,IAAhB,CAAqB,MAAM7E,gBAA3B,CAAV;AACA4E,MAAAA,OAAO,CAACE,MAAR;AACH;AACJ,GAlH0B;AAmH3BC,EAAAA,MAAM,EAAE,YAAW;AACf,SAAKC,gBAAL;;AACA,QAAI,KAAK3F,SAAT,EAAoB;AAChB,WAAKA,SAAL,CAAe4F,KAAf;AACH;;AACD,SAAK5F,SAAL,GAAiB,IAAjB;AACA,SAAK0D,gBAAL,GAAwBvE,QAAQ,CAACL,OAAT,CAAiB6E,OAAjB,EAAxB;AACA,SAAKkC,eAAL,CAAqB,QAArB,EAA+B;AAC3B1E,MAAAA,SAAS,EAAE,IADgB;AAE3BC,MAAAA,SAAS,EAAE;AAFgB,KAA/B;AAIA,WAAO,KAAK0E,oBAAZ;AACH,GA/H0B;AAgI3BC,EAAAA,cAAc,EAAE,UAASC,IAAT,EAAe;AAC3B,QAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;AACA,QAAIC,SAAS,GAAG,KAAKC,gBAArB;AACA,SAAKA,gBAAL,GAAwB,IAAxB;;AACA,YAAQF,IAAR;AACI,WAAK,UAAL;AACI,aAAKZ,aAAL;;AACA,aAAKpE,QAAL,CAAc+E,IAAd;AACA;;AACJ,WAAK,OAAL;AACA,WAAK,QAAL;AACI,aAAK/E,QAAL,CAAc+E,IAAd;;AACA,aAAKI,iBAAL;;AACA;;AACJ,WAAK,UAAL;AACI,aAAKN,oBAAL,GAA4B,IAA5B;;AACA,aAAKO,WAAL;;AACA;;AACJ,WAAK,KAAL;AACA,WAAK,QAAL;AACI/G,QAAAA,GAAG,CAACR,OAAJ,CAAYwH,GAAZ,CAAgB,OAAhB;;AACA;;AACJ,WAAK,QAAL;AACI,aAAKhB,iBAAL,CAAuB,cAAvB;;AACA;;AACJ,WAAK,QAAL;AACI,aAAKA,iBAAL,CAAuB,cAAvB;;AACA;;AACJ,WAAK,MAAL;AACI,aAAKA,iBAAL,CAAuB,YAAvB;;AACA;;AACJ,WAAK,MAAL;AACI,aAAKA,iBAAL,CAAuB,eAAvB;;AACA;;AACJ,WAAK,UAAL;AACI,aAAKA,iBAAL,CAAuB,gBAAvB,EAAyC,KAAKvB,SAAL,CAAejC,OAAxD,EAAiE,KAAKiC,SAAL,CAAe7B,MAAhF;;AACA;;AACJ,WAAK,YAAL;AACI,aAAKoD,iBAAL,CAAuB,gBAAvB;;AACA;;AACJ,WAAK,SAAL;AACA,WAAK,QAAL;AACI,aAAK1B,YAAL,CAAkBqC,IAAlB;;AACA,YAAIM,SAAS,GAAG,KAAKxC,SAAL,CAAekC,IAAf,CAAhB;;AACA,aAAKf,aAAL,CAAmBe,IAAnB;;AACA,aAAKX,iBAAL,CAAuB,WAAW,CAAC,GAAG7F,UAAU,CAAC+G,QAAf,EAAyBP,IAAzB,CAAlC,EAAkEC,SAAS,GAAGA,SAAS,CAACO,OAAb,GAAuBF,SAAlG,EAA6GL,SAAS,GAAGA,SAAS,CAACQ,KAAb,GAAqB,KAAK3C,SAAL,CAAekC,IAAf,CAA3I,EAAiKU,IAAjK,CAAsK,UAASC,MAAT,EAAiB;AACnL,cAAIV,SAAJ,EAAe;AACXA,YAAAA,SAAS,CAACvC,OAAV,CAAkBiD,MAAlB;AACH;AACJ,SAJD;;AAKA;;AACJ,WAAK,eAAL;AACI,aAAKtB,iBAAL,CAAuB,eAAvB,EAAwC,KAAKvB,SAAL,CAAejC,OAAvD,EAAgE,KAAKiC,SAAL,CAAejC,OAA/E;;AACA;;AACJ,WAAK,SAAL;AACA,WAAK,WAAL;AACA,WAAK,eAAL;AACA,WAAK,iBAAL;AACA,WAAK,cAAL;AACA,WAAK,gBAAL;AACA,WAAK,SAAL;AACI;;AACJ;AACI,aAAKb,QAAL,CAAc4F,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AA3DR;AA6DH,GAjM0B;AAkM3BC,EAAAA,kBAAkB,EAAE,UAASC,OAAT,EAAkB;AAClC,QAAIA,OAAJ,EAAa;AACT,WAAKZ,iBAAL;AACH;AACJ,GAtM0B;AAuM3BA,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,SAAKd,iBAAL,CAAuB,kBAAvB;AACH,GAzM0B;AA0M3BA,EAAAA,iBAAiB,EAAE,UAASW,IAAT,EAAe;AAC9B,QAAIhD,OAAO,GAAG,GAAGkC,KAAH,CAAS8B,IAAT,CAAcH,SAAd,EAAyB3B,KAAzB,CAA+B,CAA/B,CAAd;AACA,QAAI+B,kBAAkB,GAAG,KAAKpB,oBAA9B;AACA,SAAKpC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBiD,IAAtB,CAA2B,YAAW;AAC1D,UAAI,CAAC,KAAK3G,SAAN,IAAmBkH,kBAAvB,EAA2C;AACvC,eAAO/H,QAAQ,CAACL,OAAT,CAAiB6E,OAAjB,EAAP;AACH;;AACD,aAAO,KAAK3D,SAAL,CAAeiG,IAAf,EAAqBY,KAArB,CAA2B,KAAK7G,SAAhC,EAA2CiD,OAA3C,EAAoD0D,IAApD,CAAyD,UAASC,MAAT,EAAiB;AAC7EA,QAAAA,MAAM,GAAG,CAAC,GAAGhH,MAAM,CAACuH,WAAX,EAAwBP,MAAxB,CAAT;AACA,YAAIQ,YAAY,GAAGR,MAAM,CAAC,CAAD,CAAzB;;AACA,YAAIQ,YAAY,IAAI,CAAC,KAAKC,SAA1B,EAAqC;AACjC,eAAKC,mBAAL;AACH;;AACD,eAAOV,MAAM,CAAC,CAAD,CAAb;AACH,OAP+D,CAO9D/B,IAP8D,CAOzD,IAPyD,CAAzD,CAAP;AAQH,KAZkD,CAYjDA,IAZiD,CAY5C,IAZ4C,CAA3B,CAAxB;AAaA,WAAO,KAAKnB,gBAAZ;AACH,GA3N0B;AA4N3B4D,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,SAAKC,qBAAL,CAA2B,SAA3B,EAAsC;AAClCC,MAAAA,WAAW,EAAE,KAAKxH,SAAL,CAAeyH,GAAf;AADqB,KAAtC;AAGH,GAhO0B;AAiO3BC,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,SAAKH,qBAAL,CAA2B,WAA3B;AACH,GAnO0B;AAoO3B1B,EAAAA,eAAe,EAAE,UAASI,IAAT,EAAehC,KAAf,EAAsB;AACnC,SAAK0D,6BAAL,CAAmC1B,IAAnC,EAAyChC,KAAzC;AACH,GAtO0B;AAuO3B2D,EAAAA,SAAS,EAAE,UAASC,MAAT,EAAiB;AACxB,WAAO,KAAKC,YAAL,CAAkB,SAAlB,EAA6BD,MAA7B,CAAP;AACH,GAzO0B;AA0O3BE,EAAAA,YAAY,EAAE,UAASF,MAAT,EAAiB;AAC3B,WAAO,KAAKG,eAAL,CAAqB,SAArB,EAAgCH,MAAhC,CAAP;AACH,GA5O0B;AA6O3BI,EAAAA,QAAQ,EAAE,UAASC,KAAT,EAAgB;AACtB,WAAO,KAAKJ,YAAL,CAAkB,QAAlB,EAA4BI,KAA5B,CAAP;AACH,GA/O0B;AAgP3BC,EAAAA,WAAW,EAAE,UAASD,KAAT,EAAgB;AACzB,WAAO,KAAKF,eAAL,CAAqB,QAArB,EAA+BE,KAA/B,CAAP;AACH,GAlP0B;AAmP3BJ,EAAAA,YAAY,EAAE,UAASM,UAAT,EAAqBC,WAArB,EAAkC;AAC5C,QAAIC,WAAW,GAAG,KAAKtE,MAAL,CAAYoE,UAAZ,CAAlB;AACA,QAAIG,YAAY,GAAG,CAAC,GAAG3I,MAAM,CAACuH,WAAX,EAAwBkB,WAAxB,CAAnB;AACAC,IAAAA,WAAW,CAACE,IAAZ,CAAiB3B,KAAjB,CAAuByB,WAAvB,EAAoCC,YAApC;AACA,WAAO,KAAKE,yBAAL,CAA+BL,UAA/B,EAA2CE,WAA3C,EAAwDC,YAAxD,EAAsE,EAAtE,CAAP;AACH,GAxP0B;AAyP3BP,EAAAA,eAAe,EAAE,UAASI,UAAT,EAAqBM,aAArB,EAAoC;AACjD,QAAIJ,WAAW,GAAG,KAAKtE,MAAL,CAAYoE,UAAZ,CAAlB;AACA,QAAIO,cAAc,GAAG,CAAC,GAAG/I,MAAM,CAACuH,WAAX,EAAwBuB,aAAxB,CAArB;AACA,KAAC,GAAGhJ,SAAS,CAACkJ,IAAd,EAAoBD,cAApB,EAAoC,UAASE,aAAT,EAAwBH,aAAxB,EAAuC;AACvE,UAAII,KAAK,GAAG,CAAC,GAAGjJ,KAAK,CAACkJ,SAAV,EAAqBL,aAArB,IAAsCA,aAAtC,GAAsD,CAAC,GAAG9I,MAAM,CAACoJ,OAAX,EAAoBN,aAApB,EAAmCJ,WAAnC,CAAlE;;AACA,UAAIQ,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,YAAIG,QAAQ,GAAGX,WAAW,CAACY,MAAZ,CAAmBJ,KAAnB,EAA0B,CAA1B,EAA6B,CAA7B,CAAf;AACAH,QAAAA,cAAc,CAACO,MAAf,CAAsBL,aAAtB,EAAqC,CAArC,EAAwCI,QAAxC;AACH,OAHD,MAGO;AACH,cAAM3J,GAAG,CAACR,OAAJ,CAAYwH,GAAZ,CAAgB,OAAhB,EAAyB,CAAC,GAAG7G,UAAU,CAAC+G,QAAf,EAAyB4B,UAAU,CAACe,SAAX,CAAqB,CAArB,EAAwBf,UAAU,CAACgB,MAAX,GAAoB,CAA5C,CAAzB,CAAzB,EAAmGV,aAAnG,CAAN;AACH;AACJ,KARD;AASA,WAAO,KAAKD,yBAAL,CAA+BL,UAA/B,EAA2CE,WAA3C,EAAwD,EAAxD,EAA4DK,cAA5D,CAAP;AACH,GAtQ0B;AAuQ3BF,EAAAA,yBAAyB,EAAE,UAASL,UAAT,EAAqBE,WAArB,EAAkCC,YAAlC,EAAgDI,cAAhD,EAAgE;AACvF,WAAO,CAAC,GAAGvJ,SAAS,CAACiK,WAAd,EAA2B,IAAIlK,QAAQ,CAACL,OAAb,CAAqB,UAAS6E,OAAT,EAAkB;AACrE,WAAKwC,gBAAL,GAAwB;AACpBxC,QAAAA,OAAO,EAAEA,OADW;AAEpB+C,QAAAA,KAAK,EAAE6B,YAFa;AAGpB9B,QAAAA,OAAO,EAAEkC;AAHW,OAAxB;AAKA,WAAK3E,MAAL,CAAYoE,UAAZ,EAAwBE,WAAxB;AACH,KAPsD,CAOrDzD,IAPqD,CAOhD,IAPgD,CAArB,EAOpB8B,IAPoB,CAOf,UAASC,MAAT,EAAiB;AAChC,aAAOA,MAAM,IAAI,MAAMA,MAAM,CAACwC,MAAvB,GAAgCxC,MAAM,CAAC,CAAD,CAAtC,GAA4CA,MAAnD;AACH,KATiC,CAA3B,EASH,IATG,CAAP;AAUH;AAlR0B,CAArB,CAAV;;AAoRA,CAAC,GAAGvH,sBAAsB,CAACP,OAA3B,EAAoC,OAApC,EAA6C+B,GAA7C;AACA,IAAIyI,QAAQ,GAAGzI,GAAf;AACAhC,OAAO,CAACC,OAAR,GAAkBwK,QAAlB;AACAC,MAAM,CAAC1K,OAAP,GAAiBA,OAAO,CAACC,OAAzB;AACAyK,MAAM,CAAC1K,OAAP,CAAeC,OAAf,GAAyByK,MAAM,CAAC1K,OAAhC","sourcesContent":["/**\r\n * DevExtreme (ui/map.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _promise = _interopRequireDefault(require(\"../core/polyfills/promise\"));\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _ui = _interopRequireDefault(require(\"./widget/ui.errors\"));\r\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\r\nvar _ui2 = _interopRequireDefault(require(\"./widget/ui.widget\"));\r\nvar _inflector = require(\"../core/utils/inflector\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _array = require(\"../core/utils/array\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _index = require(\"../events/utils/index\");\r\nvar _pointer = _interopRequireDefault(require(\"../events/pointer\"));\r\nvar _provider = _interopRequireDefault(require(\"./map/provider.google_static\"));\r\nvar _providerDynamic = _interopRequireDefault(require(\"./map/provider.dynamic.google\"));\r\nvar _providerDynamic2 = _interopRequireDefault(require(\"./map/provider.dynamic.bing\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar PROVIDERS = {\r\n    googleStatic: _provider.default,\r\n    google: _providerDynamic.default,\r\n    bing: _providerDynamic2.default\r\n};\r\nvar MAP_CLASS = \"dx-map\";\r\nvar MAP_CONTAINER_CLASS = \"dx-map-container\";\r\nvar MAP_SHIELD_CLASS = \"dx-map-shield\";\r\nvar NATIVE_CLICK_CLASS = \"dx-native-click\";\r\nvar Map = _ui2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            bounds: {\r\n                northEast: null,\r\n                southWest: null\r\n            },\r\n            center: {\r\n                lat: 0,\r\n                lng: 0\r\n            },\r\n            zoom: 1,\r\n            width: 300,\r\n            height: 300,\r\n            type: \"roadmap\",\r\n            provider: \"google\",\r\n            autoAdjust: true,\r\n            markers: [],\r\n            markerIconSrc: null,\r\n            onMarkerAdded: null,\r\n            onMarkerRemoved: null,\r\n            routes: [],\r\n            onRouteAdded: null,\r\n            onRouteRemoved: null,\r\n            key: {\r\n                bing: \"\",\r\n                google: \"\",\r\n                googleStatic: \"\"\r\n            },\r\n            apiKey: {\r\n                bing: \"\",\r\n                google: \"\",\r\n                googleStatic: \"\"\r\n            },\r\n            controls: false,\r\n            onReady: null,\r\n            onUpdated: null,\r\n            onClick: null\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._deprecatedOptions, {\r\n            key: {\r\n                since: \"20.2\",\r\n                alias: \"apiKey\"\r\n            }\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(MAP_CLASS).addClass(NATIVE_CLICK_CLASS);\r\n        this._lastAsyncAction = _promise.default.resolve();\r\n        this._checkOption(\"provider\");\r\n        this._checkOption(\"markers\");\r\n        this._checkOption(\"routes\");\r\n        this._initContainer();\r\n        this._grabEvents();\r\n        this._rendered = {}\r\n    },\r\n    _checkOption: function(option) {\r\n        var value = this.option(option);\r\n        if (\"markers\" === option && !Array.isArray(value)) {\r\n            throw _ui.default.Error(\"E1022\")\r\n        }\r\n        if (\"routes\" === option && !Array.isArray(value)) {\r\n            throw _ui.default.Error(\"E1023\")\r\n        }\r\n    },\r\n    _initContainer: function() {\r\n        this._$container = (0, _renderer.default)(\"<div>\").addClass(MAP_CONTAINER_CLASS);\r\n        this.$element().append(this._$container)\r\n    },\r\n    _grabEvents: function() {\r\n        var eventName = (0, _index.addNamespace)(_pointer.default.down, this.NAME);\r\n        _events_engine.default.on(this.$element(), eventName, this._cancelEvent.bind(this))\r\n    },\r\n    _cancelEvent: function(e) {\r\n        var cancelByProvider = this._provider && this._provider.isEventsCanceled(e) && !this.option(\"disabled\");\r\n        if (cancelByProvider) {\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _saveRendered: function(option) {\r\n        var value = this.option(option);\r\n        this._rendered[option] = value.slice()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderShield();\r\n        this._saveRendered(\"markers\");\r\n        this._saveRendered(\"routes\");\r\n        this._provider = new(PROVIDERS[this.option(\"provider\")])(this, this._$container);\r\n        this._queueAsyncAction(\"render\", this._rendered.markers, this._rendered.routes)\r\n    },\r\n    _renderShield: function() {\r\n        var $shield;\r\n        if (this.option(\"disabled\")) {\r\n            $shield = (0, _renderer.default)(\"<div>\").addClass(MAP_SHIELD_CLASS);\r\n            this.$element().append($shield)\r\n        } else {\r\n            $shield = this.$element().find(\".\" + MAP_SHIELD_CLASS);\r\n            $shield.remove()\r\n        }\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        if (this._provider) {\r\n            this._provider.clean()\r\n        }\r\n        this._provider = null;\r\n        this._lastAsyncAction = _promise.default.resolve();\r\n        this.setOptionSilent(\"bounds\", {\r\n            northEast: null,\r\n            southWest: null\r\n        });\r\n        delete this._suppressAsyncAction\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        var changeBag = this._optionChangeBag;\r\n        this._optionChangeBag = null;\r\n        switch (name) {\r\n            case \"disabled\":\r\n                this._renderShield();\r\n                this.callBase(args);\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"provider\":\r\n                this._suppressAsyncAction = true;\r\n                this._invalidate();\r\n                break;\r\n            case \"key\":\r\n            case \"apiKey\":\r\n                _ui.default.log(\"W1001\");\r\n                break;\r\n            case \"bounds\":\r\n                this._queueAsyncAction(\"updateBounds\");\r\n                break;\r\n            case \"center\":\r\n                this._queueAsyncAction(\"updateCenter\");\r\n                break;\r\n            case \"zoom\":\r\n                this._queueAsyncAction(\"updateZoom\");\r\n                break;\r\n            case \"type\":\r\n                this._queueAsyncAction(\"updateMapType\");\r\n                break;\r\n            case \"controls\":\r\n                this._queueAsyncAction(\"updateControls\", this._rendered.markers, this._rendered.routes);\r\n                break;\r\n            case \"autoAdjust\":\r\n                this._queueAsyncAction(\"adjustViewport\");\r\n                break;\r\n            case \"markers\":\r\n            case \"routes\":\r\n                this._checkOption(name);\r\n                var prevValue = this._rendered[name];\r\n                this._saveRendered(name);\r\n                this._queueAsyncAction(\"update\" + (0, _inflector.titleize)(name), changeBag ? changeBag.removed : prevValue, changeBag ? changeBag.added : this._rendered[name]).then(function(result) {\r\n                    if (changeBag) {\r\n                        changeBag.resolve(result)\r\n                    }\r\n                });\r\n                break;\r\n            case \"markerIconSrc\":\r\n                this._queueAsyncAction(\"updateMarkers\", this._rendered.markers, this._rendered.markers);\r\n                break;\r\n            case \"onReady\":\r\n            case \"onUpdated\":\r\n            case \"onMarkerAdded\":\r\n            case \"onMarkerRemoved\":\r\n            case \"onRouteAdded\":\r\n            case \"onRouteRemoved\":\r\n            case \"onClick\":\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._dimensionChanged()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._queueAsyncAction(\"updateDimensions\")\r\n    },\r\n    _queueAsyncAction: function(name) {\r\n        var options = [].slice.call(arguments).slice(1);\r\n        var isActionSuppressed = this._suppressAsyncAction;\r\n        this._lastAsyncAction = this._lastAsyncAction.then(function() {\r\n            if (!this._provider || isActionSuppressed) {\r\n                return _promise.default.resolve()\r\n            }\r\n            return this._provider[name].apply(this._provider, options).then(function(result) {\r\n                result = (0, _array.wrapToArray)(result);\r\n                var mapRefreshed = result[0];\r\n                if (mapRefreshed && !this._disposed) {\r\n                    this._triggerReadyAction()\r\n                }\r\n                return result[1]\r\n            }.bind(this))\r\n        }.bind(this));\r\n        return this._lastAsyncAction\r\n    },\r\n    _triggerReadyAction: function() {\r\n        this._createActionByOption(\"onReady\")({\r\n            originalMap: this._provider.map()\r\n        })\r\n    },\r\n    _triggerUpdateAction: function() {\r\n        this._createActionByOption(\"onUpdated\")()\r\n    },\r\n    setOptionSilent: function(name, value) {\r\n        this._setOptionWithoutOptionChange(name, value)\r\n    },\r\n    addMarker: function(marker) {\r\n        return this._addFunction(\"markers\", marker)\r\n    },\r\n    removeMarker: function(marker) {\r\n        return this._removeFunction(\"markers\", marker)\r\n    },\r\n    addRoute: function(route) {\r\n        return this._addFunction(\"routes\", route)\r\n    },\r\n    removeRoute: function(route) {\r\n        return this._removeFunction(\"routes\", route)\r\n    },\r\n    _addFunction: function(optionName, addingValue) {\r\n        var optionValue = this.option(optionName);\r\n        var addingValues = (0, _array.wrapToArray)(addingValue);\r\n        optionValue.push.apply(optionValue, addingValues);\r\n        return this._partialArrayOptionChange(optionName, optionValue, addingValues, [])\r\n    },\r\n    _removeFunction: function(optionName, removingValue) {\r\n        var optionValue = this.option(optionName);\r\n        var removingValues = (0, _array.wrapToArray)(removingValue);\r\n        (0, _iterator.each)(removingValues, function(removingIndex, removingValue) {\r\n            var index = (0, _type.isNumeric)(removingValue) ? removingValue : (0, _array.inArray)(removingValue, optionValue);\r\n            if (index !== -1) {\r\n                var removing = optionValue.splice(index, 1)[0];\r\n                removingValues.splice(removingIndex, 1, removing)\r\n            } else {\r\n                throw _ui.default.log(\"E1021\", (0, _inflector.titleize)(optionName.substring(0, optionName.length - 1)), removingValue)\r\n            }\r\n        });\r\n        return this._partialArrayOptionChange(optionName, optionValue, [], removingValues)\r\n    },\r\n    _partialArrayOptionChange: function(optionName, optionValue, addingValues, removingValues) {\r\n        return (0, _deferred.fromPromise)(new _promise.default(function(resolve) {\r\n            this._optionChangeBag = {\r\n                resolve: resolve,\r\n                added: addingValues,\r\n                removed: removingValues\r\n            };\r\n            this.option(optionName, optionValue)\r\n        }.bind(this)).then(function(result) {\r\n            return result && 1 === result.length ? result[0] : result\r\n        }), this)\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxMap\", Map);\r\nvar _default = Map;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}