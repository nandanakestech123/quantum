{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalButton,NormalInput,NormalSelect,NormalDateTime,TableWrapper,NormalModal}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import _ from\"lodash\";import{history}from\"helpers\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import SimpleReactValidator from\"simple-react-validator\";// import { Treatment, Payment, EditCart } from './cart/index';\nimport service from\"assets/images/make-up-brush.png\";// import Discount from './cart/discount';\nimport{FormGroup,Label,Input}from\"reactstrap\";import closeIcon from\"assets/images/close.png\";import{withTranslation}from\"react-i18next\";import{Toast}from\"service/toast\";import{CredentialConfirmation}from\"../credentialConfirmation\";export var VoidPaidTransClass=/*#__PURE__*/function(_Component){_inherits(VoidPaidTransClass,_Component);var _super=_createSuper(VoidPaidTransClass);function VoidPaidTransClass(){var _this;_classCallCheck(this,VoidPaidTransClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={tstaffList:[],cartData:{},formFields:{custName:\"\",fromDate:new Date(),toDate:new Date(),transCode:\"\",custCode:\"\"},headerDetails:[{label:\"Branch\"},{label:\"Transaction #\",sortKey:false,width:\"120px\"},{label:\"Customer Code\",sortKey:false,width:\"120px\"},{label:\"Customer Name\",width:\"120px\"},{label:\"Date\",sortKey:false,width:\"100px\",divClass:\"justify-content-end text-right\"},{label:\"Status\",sortKey:false,width:\"100px\"},{label:\"Reference No\",width:\"180px\"},{label:\"Payment Remark\",width:\"220px\"}],detailHeaderDetails:[{label:\"S.No\",sortKey:false,width:\"\",divClass:\"justify-content-end text-right\"},{label:\"Name\",sortKey:false,width:\"120px\"},{label:\"Qty\",sortKey:false,width:\"80px\",divClass:\"justify-content-end text-right\"},{label:\"Price\",width:\"120px\",divClass:\"justify-content-end text-right\"}],isShowBalance:false,transactioRecord:[],reasonOption:[],page:1,limit:10,detailDataList:[],isOpenvoidCheckout:false,reason:\"\",cartList:[],isvoidCompleted:false,completedData:{},isVoidCreateLoading:false,isVoidConfirmLoading:false,isVoidCancelLoading:false,isHandleConfirmationDialog:false,isLoginConfirmation:false,user:\"\",pass:\"\"};_this.componentWillMount=function(){// this.getCart();\n_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});// this.props.getCommonApi('reversereason/').then((key) => {\n//     let { data } = key;\n//     let { reasonOption } = this.state;\n//     for (let value of data) {\n//         reasonOption.push({ value: value.id, label: value.rev_desc })\n//     }\n//     this.setState({ reasonOption })\n// })\n_this.handleCheckCart();_this.getCart();};_this.getCart=function(data){var _this$state=_this.state,page=_this$state.page,limit=_this$state.limit,formFields=_this$state.formFields,cartData=_this$state.cartData,tstaffList=_this$state.tstaffList;var custName=formFields.custName,fromDate=formFields.fromDate,toDate=formFields.toDate,transCode=formFields.transCode,custCode=formFields.custCode;var basicApptDetail=_this.props.basicApptDetail;_this.props.getCommonApi(\"void/?from_date=\".concat(dateFormat(fromDate,\"yyyy-mm-dd\"),\"&to_date=\").concat(dateFormat(toDate,\"yyyy-mm-dd\"),\"&transac_no=\").concat(transCode,\"&cust_code=\").concat(basicApptDetail.custId,\"&cust_name=\").concat(custName,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(function(res){console.log(res,\"voidpaiddsfdfaafg\");cartData=res;tstaffList=res.data;_this.setState({cartData:cartData,tstaffList:tstaffList});});};_this.handleCheckCart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var basicApptDetail;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:basicApptDetail=_this.props.basicApptDetail;_context.next=3;return _this.props.getCommonApi(\"voidcheck/?cust_id=\".concat(basicApptDetail.custId)).then(function(res){if(res.status===200){if(res.data.length>0){_this.setState({isOpenvoidCheckout:true,cartList:res.data});_this.getvoidReason();}}});case 3:case\"end\":return _context.stop();}}},_callee);}));_this.getvoidReason=function(){_this.props.getCommonApi(\"voidreason/\").then(function(key){var data=key.data;var reasonOption=_this.state.reasonOption;reasonOption=[];var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;reasonOption.push({value:value.id,label:value.reason_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({reasonOption:reasonOption});});};_this.getVoidDetail=function(){var _this$state2=_this.state,selectedData=_this$state2.selectedData,cartData=_this$state2.cartData,tstaffList=_this$state2.tstaffList;_this.props.getCommonApi(\"void/Details/?poshdr_id=\".concat(selectedData.id)).then(function(res){_this.setState({detailDataList:res.data});});};_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(page){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(page,\"dsfsdfsdfsdf\");_context2.next=3;return _this.setState({page:page.page});case 3:_this.getCart(page);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleVoidCreate=function(){_this.setState({isVoidCreateLoading:true});var selectedData=_this.state.selectedData;_this.props.commonCreateApi(\"void/?poshdr_id=\".concat(selectedData.id)).then(function(key){_this.setState({isVoidCreateLoading:false});_this.handleCheckCart();});};_this.handleVoidCartSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){var _this$state3,selectedData,reason,cartList;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$state3=_this.state,selectedData=_this$state3.selectedData,reason=_this$state3.reason,cartList=_this$state3.cartList;if(!_this.validator.allValid()){_context4.next=8;break;}_context4.next=4;return _this.setState({isVoidConfirmLoading:true});case 4:_this.props.commonCreateApi(\"void/VoidReturn/?cart_id=\".concat(cartList[0].cart_id,\"&voidreason_id=\").concat(reason)).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(key){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({isVoidConfirmLoading:false});case 2:_context3.next=4;return _this.setState({completedData:key.data});case 4:_this.setState({isvoidCompleted:true});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}());_this.setState({isVoidConfirmLoading:false});_context4.next=9;break;case 8:_this.validator.showMessages();case 9:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _this$state4,isOpenvoidDetail,isOpenvoidCheckout,isvoidCompleted;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this$state4=_this.state,isOpenvoidDetail=_this$state4.isOpenvoidDetail,isOpenvoidCheckout=_this$state4.isOpenvoidCheckout,isvoidCompleted=_this$state4.isvoidCompleted;isOpenvoidDetail=false;isOpenvoidCheckout=false;isvoidCompleted=false;_context5.next=6;return _this.setState({isOpenvoidDetail:isOpenvoidDetail,isOpenvoidCheckout:isOpenvoidCheckout,isvoidCompleted:isvoidCompleted});case 6:_this.handleCheckCart();_this.getCart();case 8:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleChange=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref6){var _ref6$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref6$target=_ref6.target,value=_ref6$target.value,name=_ref6$target.name;formFields=_this.state.formFields;formFields[name]=value;_context6.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x4){return _ref7.apply(this,arguments);};}();_this.handleSelectVoid=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data,index){var _this$state5,selectedData,selectedIndex;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!data.is_allow){_context7.next=10;break;}_this$state5=_this.state,selectedData=_this$state5.selectedData,selectedIndex=_this$state5.selectedIndex;selectedData=data;selectedIndex=index;_context7.next=6;return _this.setState({selectedData:selectedData,selectedIndex:selectedIndex});case 6:_this.setState({isOpenvoidDetail:true});_this.getVoidDetail();_context7.next=11;break;case 10:Toast({type:\"error\",message:\"Void is not allowed in other outlets\"});case 11:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x5,_x6){return _ref8.apply(this,arguments);};}();_this.handleSearch=function(){_this.getCart();};_this.handleDatePick=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(name,value){var formFields;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(name,value,\"sdfgdfhfshg\",dateFormat(value));// dateFormat(new Date())\nformFields=_this.state.formFields;formFields[name]=value;// formFields[name] = value;\n_context8.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x7,_x8){return _ref9.apply(this,arguments);};}();_this.handleReasonChange=function(_ref10){var _ref10$target=_ref10.target,name=_ref10$target.name,value=_ref10$target.value;var reason=_this.state.reason;reason=value;_this.setState({reason:reason});};_this.handlePrint=function(){var completedData=_this.state.completedData;history.push(\"/admin/billing/print/bill/\".concat(completedData.sa_transacno));};_this.handleShare=function(id){var completedData=_this.state.completedData;_this.props.commonCreateApi(\"receiptpdfsend/?sa_transacno=\".concat(completedData.sa_transacno)).then(function(res){});};_this.handleVoidCancelCart=function(id){_this.setState({isVoidCancelLoading:true});var _this$state6=_this.state,completedData=_this$state6.completedData,isOpenvoidCheckout=_this$state6.isOpenvoidCheckout,cartList=_this$state6.cartList;var payload={cart_id:cartList[0].cart_id};_this.props.commonCreateApi(\"voidcancel/\",payload).then(function(res){_this.setState({isVoidCancelLoading:false});if(res.status===200){_this.setState({isOpenvoidCheckout:false});}});};_this.handleauthentication=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(user,pass){var Body;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:Body={username:user,password:pass};_this.props.commonCreateApi(\"userauthorizationpopup/\",Body).then(/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(key){var status,data;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:status=key.status,data=key.data;if(!(status==200)){_context9.next=5;break;}_context9.next=4;return _this.setState(function(prevState){return{isLoginConfirmation:!prevState.isLoginConfirmation};});case 4:_this.handleVoidCreate();case 5:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x11){return _ref12.apply(this,arguments);};}());case 2:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x9,_x10){return _ref11.apply(this,arguments);};}();_this.handleLoginConfirmationDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this.setState(function(prevState){return{isLoginConfirmation:!prevState.isLoginConfirmation};});case 2:case\"end\":return _context11.stop();}}},_callee11);}));return _this;}_createClass(VoidPaidTransClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state7=this.state,_this$state7$tstaffLi=_this$state7.tstaffList,tstaffList=_this$state7$tstaffLi===void 0?[]:_this$state7$tstaffLi,headerDetails=_this$state7.headerDetails,formFields=_this$state7.formFields,isOpenvoidDetail=_this$state7.isOpenvoidDetail,detailDataList=_this$state7.detailDataList,detailHeaderDetails=_this$state7.detailHeaderDetails,isOpenvoidCheckout=_this$state7.isOpenvoidCheckout,reason=_this$state7.reason,reasonOption=_this$state7.reasonOption,isvoidCompleted=_this$state7.isvoidCompleted,isVoidCreateLoading=_this$state7.isVoidCreateLoading,isVoidConfirmLoading=_this$state7.isVoidConfirmLoading,isVoidCancelLoading=_this$state7.isVoidCancelLoading,isLoginConfirmation=_this$state7.isLoginConfirmation;var custName=formFields.custName,fromDate=formFields.fromDate,toDate=formFields.toDate,transCode=formFields.transCode,custCode=formFields.custCode;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"row new-cart treatment-done top-up\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"From Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:new Date(fromDate),name:\"fromDate\",className:\"dob-pick\",showYearDropdown:true,dateFormat:\"dd/MM/yyyy\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"To Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:toDate,name:\"toDate\",className:\"dob-pick\",showYearDropdown:true,dateFormat:\"dd/MM/yyyy\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Transaction Code\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:transCode,name:\"transCode\",onChange:this.handleChange,className:\"customer-name\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\" fs-15 confirm\",label:\"Search\",outline:false,onClick:this.handleSearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 cart-item mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"item-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination},tstaffList.dataList&&tstaffList.dataList.length>0?tstaffList.dataList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,onClick:function onClick(){return _this2.handleSelectVoid(item,index);}},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left \".concat(!item.is_current?\"other-branch\":\"\")},item.itemsite_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.sa_transacno_ref)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.sa_custno)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.sa_custname)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.sa_status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.sa_transacno_ref)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.payment_remarks)));}):null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pt-4 action-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"})),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-modal top-up-modal\",style:{minWidth:\"40%\"},modal:isOpenvoidDetail,handleModal:function handleModal(){}},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 f-600\"},\"Detail\"),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:detailHeaderDetails,queryHandler:this.handlePagination},detailDataList&&detailDataList.length>0?detailDataList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,onClick:function onClick(){return _this2.handleSelectVoid(item,index);}},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},index+1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.dt_qty)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.dt_amt)));}):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 d-flex justify-right\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",resetbg:true,className:\"fs-15\",label:\"Cancel\",onClick:this.handleDialog}),isVoidCreateLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\"))))):/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"confirm\",label:\"Void\",outline:false,onClick:function onClick(){_this2.props.tokenDetails.voidbill_setup?_this2.setState({isLoginConfirmation:true}):_this2.handleVoidCreate();}})))),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-modal top-up-modal\",style:{minWidth:\"40%\"},modal:isOpenvoidCheckout,handleModal:function handleModal(){}},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 f-600\"},t(\"Void Checkout\")),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Reason\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:reasonOption,value:reason,name:\"reason\",onChange:this.handleReasonChange,className:\"py-0\"}),this.validator.message(\"Reason\",reason,\"required\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 d-flex mt-5 justify-left\"},isVoidCancelLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\"))))):/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\" fs-15 confirm\",label:\"Void Cancel\",outline:false,onClick:this.handleVoidCancelCart})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 d-flex mt-5 justify-right\"},isVoidConfirmLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\")))):/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\" fs-15 confirm\",label:\"Confirm\",outline:false,onClick:this.handleVoidCartSubmit})))),/*#__PURE__*/React.createElement(NormalModal,{className:\"void-checkout-complete top-up-modal\",style:{minWidth:\"40%\"},modal:isvoidCompleted,handleModal:function handleModal(){}},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 f-600\"},t(\"Void Checkout\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row my-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 d-flex mt-5 justify-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"print\",label:\"Print\",outline:false,onClick:this.handlePrint})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 d-flex mt-5 justify-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"share\",label:\"Share\",outline:false,onClick:this.handleShare})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 d-flex mt-5 justify-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",resetbg:true,className:\"cancel\",label:\"Close\",outline:false,onClick:this.handleDialog})))),/*#__PURE__*/React.createElement(NormalModal,{className:\"d-flex justify-content-center\",style:{minWidth:\"20%\"},modal:isLoginConfirmation,handleModal:function handleModal(){}},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleLoginConfirmationDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(CredentialConfirmation,{handleLoginSubmit:function handleLoginSubmit(user,pass){return _this2.handleauthentication(user,pass);}})));}}]);return VoidPaidTransClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{selected_cstomer:state.common.selected_cstomer,basicApptDetail:state.appointment.basicApptDetail,tokenDetails:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var VoidPaidTrans=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(VoidPaidTransClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Cart/BillOps/voidPaidTrans.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","NormalDateTime","TableWrapper","NormalModal","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","service","FormGroup","Label","Input","closeIcon","withTranslation","Toast","CredentialConfirmation","VoidPaidTransClass","state","tstaffList","cartData","formFields","custName","fromDate","Date","toDate","transCode","custCode","headerDetails","label","sortKey","width","divClass","detailHeaderDetails","isShowBalance","transactioRecord","reasonOption","page","limit","detailDataList","isOpenvoidCheckout","reason","cartList","isvoidCompleted","completedData","isVoidCreateLoading","isVoidConfirmLoading","isVoidCancelLoading","isHandleConfirmationDialog","isLoginConfirmation","user","pass","componentWillMount","validator","element","message","autoForceUpdate","handleCheckCart","getCart","data","basicApptDetail","props","custId","then","res","console","log","setState","status","length","getvoidReason","key","value","push","id","reason_desc","getVoidDetail","selectedData","handlePagination","handleVoidCreate","handleVoidCartSubmit","allValid","cart_id","showMessages","handleDialog","isOpenvoidDetail","handleChange","target","name","handleSelectVoid","index","is_allow","selectedIndex","type","handleSearch","handleDatePick","handleReasonChange","handlePrint","sa_transacno","handleShare","handleVoidCancelCart","payload","handleauthentication","Body","username","password","prevState","handleLoginConfirmationDialog","t","dataList","map","item","is_current","itemsite_code","sa_transacno_ref","sa_custno","sa_custname","sa_date","sa_status","payment_remarks","minWidth","desc","dt_qty","dt_amt","tokenDetails","voidbill_setup","mapStateToProps","selected_cstomer","common","appointment","authStore","mapDispatchToProps","dispatch","VoidPaidTrans"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalButton,\r\n  NormalInput,\r\n  NormalSelect,\r\n  NormalDateTime,\r\n  TableWrapper,\r\n  NormalModal,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\n// import { Treatment, Payment, EditCart } from './cart/index';\r\nimport service from \"assets/images/make-up-brush.png\";\r\n// import Discount from './cart/discount';\r\nimport { FormGroup, Label, Input } from \"reactstrap\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { Toast } from \"service/toast\";\r\nimport { CredentialConfirmation } from \"../credentialConfirmation\";\r\n\r\nexport class VoidPaidTransClass extends Component {\r\n  state = {\r\n    tstaffList: [],\r\n    cartData: {},\r\n    formFields: {\r\n      custName: \"\",\r\n      fromDate: new Date(),\r\n      toDate: new Date(),\r\n      transCode: \"\",\r\n      custCode: \"\",\r\n    },\r\n    headerDetails: [\r\n      { label: \"Branch\" },\r\n      { label: \"Transaction #\", sortKey: false, width: \"120px\" },\r\n      { label: \"Customer Code\", sortKey: false, width: \"120px\" },\r\n      { label: \"Customer Name\", width: \"120px\" },\r\n      {\r\n        label: \"Date\",\r\n        sortKey: false,\r\n        width: \"100px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Status\", sortKey: false, width: \"100px\" },\r\n      { label: \"Reference No\", width: \"180px\" },\r\n      { label: \"Payment Remark\", width: \"220px\" },\r\n    ],\r\n    detailHeaderDetails: [\r\n      {\r\n        label: \"S.No\",\r\n        sortKey: false,\r\n        width: \"\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Name\", sortKey: false, width: \"120px\" },\r\n      {\r\n        label: \"Qty\",\r\n        sortKey: false,\r\n        width: \"80px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Price\",\r\n        width: \"120px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n    ],\r\n    isShowBalance: false,\r\n    transactioRecord: [],\r\n    reasonOption: [],\r\n    page: 1,\r\n    limit: 10,\r\n    detailDataList: [],\r\n    isOpenvoidCheckout: false,\r\n    reason: \"\",\r\n    cartList: [],\r\n    isvoidCompleted: false,\r\n    completedData: {},\r\n    isVoidCreateLoading: false,\r\n    isVoidConfirmLoading: false,\r\n    isVoidCancelLoading: false,\r\n    isHandleConfirmationDialog: false,\r\n    isLoginConfirmation: false,\r\n    user: \"\",\r\n    pass: \"\",\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    // this.getCart();\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    // this.props.getCommonApi('reversereason/').then((key) => {\r\n    //     let { data } = key;\r\n    //     let { reasonOption } = this.state;\r\n    //     for (let value of data) {\r\n    //         reasonOption.push({ value: value.id, label: value.rev_desc })\r\n    //     }\r\n    //     this.setState({ reasonOption })\r\n    // })\r\n    this.handleCheckCart();\r\n    this.getCart();\r\n  };\r\n\r\n  getCart = data => {\r\n    let { page, limit, formFields, cartData, tstaffList } = this.state;\r\n    let { custName, fromDate, toDate, transCode, custCode } = formFields;\r\n    let { basicApptDetail } = this.props;\r\n    this.props\r\n      .getCommonApi(\r\n        `void/?from_date=${dateFormat(\r\n          fromDate,\r\n          \"yyyy-mm-dd\"\r\n        )}&to_date=${dateFormat(\r\n          toDate,\r\n          \"yyyy-mm-dd\"\r\n        )}&transac_no=${transCode}&cust_code=${\r\n          basicApptDetail.custId\r\n        }&cust_name=${custName}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(res => {\r\n        console.log(res, \"voidpaiddsfdfaafg\");\r\n        cartData = res;\r\n        tstaffList = res.data;\r\n        this.setState({ cartData, tstaffList });\r\n      });\r\n  };\r\n\r\n  handleCheckCart = async () => {\r\n    let { basicApptDetail } = this.props;\r\n    await this.props\r\n      .getCommonApi(`voidcheck/?cust_id=${basicApptDetail.custId}`)\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          if (res.data.length > 0) {\r\n            this.setState({\r\n              isOpenvoidCheckout: true,\r\n              cartList: res.data,\r\n            });\r\n            this.getvoidReason();\r\n          }\r\n        }\r\n      });\r\n  };\r\n\r\n  getvoidReason = () => {\r\n    this.props.getCommonApi(\"voidreason/\").then(key => {\r\n      let { data } = key;\r\n      let { reasonOption } = this.state;\r\n      reasonOption = [];\r\n      for (let value of data) {\r\n        reasonOption.push({ value: value.id, label: value.reason_desc });\r\n      }\r\n      this.setState({ reasonOption });\r\n    });\r\n  };\r\n\r\n  getVoidDetail = () => {\r\n    let { selectedData, cartData, tstaffList } = this.state;\r\n    this.props\r\n      .getCommonApi(`void/Details/?poshdr_id=${selectedData.id}`)\r\n      .then(res => {\r\n        this.setState({ detailDataList: res.data });\r\n      });\r\n  };\r\n\r\n  handlePagination = async page => {\r\n    console.log(page, \"dsfsdfsdfsdf\");\r\n    await this.setState({ page: page.page });\r\n    this.getCart(page);\r\n  };\r\n\r\n  handleVoidCreate = () => {\r\n    this.setState({\r\n      isVoidCreateLoading: true,\r\n    });\r\n    let { selectedData } = this.state;\r\n    this.props\r\n      .commonCreateApi(`void/?poshdr_id=${selectedData.id}`)\r\n      .then(key => {\r\n        this.setState({\r\n          isVoidCreateLoading: false,\r\n        });\r\n        this.handleCheckCart();\r\n      });\r\n  };\r\n\r\n  handleVoidCartSubmit = async id => {\r\n    let { selectedData, reason, cartList } = this.state;\r\n    if (this.validator.allValid()) {\r\n      await this.setState({\r\n        isVoidConfirmLoading: true,\r\n      });\r\n      this.props\r\n        .commonCreateApi(\r\n          `void/VoidReturn/?cart_id=${cartList[0].cart_id}&voidreason_id=${reason}`\r\n        )\r\n        .then(async key => {\r\n          await this.setState({\r\n            isVoidConfirmLoading: false,\r\n          });\r\n          await this.setState({\r\n            completedData: key.data,\r\n          });\r\n          this.setState({\r\n            isvoidCompleted: true,\r\n          });\r\n        });\r\n      this.setState({\r\n        isVoidConfirmLoading: false,\r\n      });\r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  };\r\n\r\n  handleDialog = async () => {\r\n    let { isOpenvoidDetail, isOpenvoidCheckout, isvoidCompleted } = this.state;\r\n    isOpenvoidDetail = false;\r\n    isOpenvoidCheckout = false;\r\n    isvoidCompleted = false;\r\n    await this.setState({\r\n      isOpenvoidDetail,\r\n      isOpenvoidCheckout,\r\n      isvoidCompleted,\r\n    });\r\n    this.handleCheckCart();\r\n    this.getCart();\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleSelectVoid = async (data, index) => {\r\n    if (data.is_allow) {\r\n      let { selectedData, selectedIndex } = this.state;\r\n      selectedData = data;\r\n      selectedIndex = index;\r\n      await this.setState({\r\n        selectedData,\r\n        selectedIndex,\r\n      });\r\n      this.setState({\r\n        isOpenvoidDetail: true,\r\n      });\r\n      this.getVoidDetail();\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Void is not allowed in other outlets\",\r\n      });\r\n    }\r\n  };\r\n\r\n  handleSearch = () => {\r\n    this.getCart();\r\n  };\r\n\r\n  handleDatePick = async (name, value) => {\r\n    console.log(name, value, \"sdfgdfhfshg\", dateFormat(value));\r\n    // dateFormat(new Date())\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    // formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    // this.getCart()\r\n  };\r\n\r\n  handleReasonChange = ({ target: { name, value } }) => {\r\n    let { reason } = this.state;\r\n    reason = value;\r\n    this.setState({\r\n      reason,\r\n    });\r\n  };\r\n\r\n  // for get Print response\r\n  handlePrint = () => {\r\n    let { completedData } = this.state;\r\n    history.push(`/admin/billing/print/bill/${completedData.sa_transacno}`);\r\n  };\r\n\r\n  // for share reciept\r\n  handleShare = id => {\r\n    let { completedData } = this.state;\r\n    this.props\r\n      .commonCreateApi(\r\n        `receiptpdfsend/?sa_transacno=${completedData.sa_transacno}`\r\n      )\r\n      .then(res => {});\r\n  };\r\n\r\n  handleVoidCancelCart = id => {\r\n    this.setState({\r\n      isVoidCancelLoading: true,\r\n    });\r\n    let { completedData, isOpenvoidCheckout, cartList } = this.state;\r\n    let payload = {\r\n      cart_id: cartList[0].cart_id,\r\n    };\r\n    this.props.commonCreateApi(`voidcancel/`, payload).then(res => {\r\n      this.setState({\r\n        isVoidCancelLoading: false,\r\n      });\r\n      if (res.status === 200) {\r\n        this.setState({\r\n          isOpenvoidCheckout: false,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  handleauthentication = async (user, pass) => {\r\n    let Body = {\r\n      username: user,\r\n      password: pass,\r\n    };\r\n    this.props\r\n      .commonCreateApi(`userauthorizationpopup/`, Body)\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        if (status == 200) {\r\n          await this.setState(prevState => ({\r\n            isLoginConfirmation: !prevState.isLoginConfirmation,\r\n          }));\r\n          this.handleVoidCreate();\r\n        }\r\n      });\r\n  };\r\n\r\n  handleLoginConfirmationDialog = async () => {\r\n    await this.setState(prevState => ({\r\n      isLoginConfirmation: !prevState.isLoginConfirmation,\r\n    }));\r\n  };\r\n  render() {\r\n    let {\r\n      tstaffList = [],\r\n      headerDetails,\r\n      formFields,\r\n      isOpenvoidDetail,\r\n      detailDataList,\r\n      detailHeaderDetails,\r\n      isOpenvoidCheckout,\r\n      reason,\r\n      reasonOption,\r\n      isvoidCompleted,\r\n      isVoidCreateLoading,\r\n      isVoidConfirmLoading,\r\n      isVoidCancelLoading,\r\n      isLoginConfirmation,\r\n    } = this.state;\r\n    let { custName, fromDate, toDate, transCode, custCode } = formFields;\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"row new-cart treatment-done top-up\">\r\n        <div className=\"col-3\">\r\n          <div className=\"d-flex\">\r\n            <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n              {t(\"From Date\")}\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalDateTime\r\n                onChange={this.handleDatePick}\r\n                inputcol=\"p-0 inTime\"\r\n                value={new Date(fromDate)}\r\n                name=\"fromDate\"\r\n                className=\"dob-pick\"\r\n                showYearDropdown={true}\r\n                dateFormat=\"dd/MM/yyyy\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n              {t(\"To Date\")}\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalDateTime\r\n                onChange={this.handleDatePick}\r\n                inputcol=\"p-0 inTime\"\r\n                value={toDate}\r\n                name=\"toDate\"\r\n                className=\"dob-pick\"\r\n                showYearDropdown={true}\r\n                dateFormat=\"dd/MM/yyyy\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* <div className=\"col-3\">\r\n                    <div className=\"d-flex\">\r\n                        <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                            Customer Name\r\n                    </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalInput\r\n                                value={custName}\r\n                                name=\"custName\"\r\n                                onChange={this.handleChange}\r\n                                className={`customer-name`}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"d-flex\">\r\n                        <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                            Customer Code\r\n                    </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalInput\r\n                                value={custCode}\r\n                                name=\"custCode\"\r\n                                onChange={this.handleChange}\r\n                                className={`customer-name`}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div> */}\r\n\r\n        <div className=\"col-3\">\r\n          <div className=\"d-flex\">\r\n            <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n              {t(\"Transaction Code\")}\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                value={transCode}\r\n                name=\"transCode\"\r\n                onChange={this.handleChange}\r\n                className={`customer-name`}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-3\">\r\n          <NormalButton\r\n            buttonClass={\"mx-2\"}\r\n            mainbg={true}\r\n            className=\" fs-15 confirm\"\r\n            label=\"Search\"\r\n            outline={false}\r\n            onClick={this.handleSearch}\r\n          />\r\n        </div>\r\n\r\n        <div className={`col-12 cart-item mt-2`}>\r\n          <div className={`item-list`}>\r\n            <div className=\"table\">\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n              >\r\n                {tstaffList.dataList && tstaffList.dataList.length > 0\r\n                  ? tstaffList.dataList.map((item, index) => {\r\n                      return (\r\n                        <tr\r\n                          key={index}\r\n                          onClick={() => this.handleSelectVoid(item, index)}\r\n                        >\r\n                          <td>\r\n                            <div\r\n                              className={`text-left ${\r\n                                !item.is_current ? \"other-branch\" : \"\"\r\n                              }`}\r\n                            >\r\n                              {item.itemsite_code}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className={`text-left`}>\r\n                              {item.sa_transacno_ref}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className={`text-left`}>{item.sa_custno}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className={`text-left`}>\r\n                              {item.sa_custname}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className={`text-right`}>{item.sa_date}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className={`text-left`}>{item.sa_status}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className={`text-left`}>\r\n                              {item.sa_transacno_ref}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className={`text-left`}>\r\n                              {item.payment_remarks}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12 pt-4 action-bar\">\r\n          <div className=\"row\">\r\n            {/* <div className=\"col-12 d-flex justify-right\">\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-all\"\r\n                                label=\"Cancel\"\r\n                                outline={false}\r\n                                onClick={this.handleClearAll}\r\n                            />\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\" fs-15 confirm\"\r\n                                label=\"Confirm\"\r\n                                outline={false}\r\n                                onClick={this.handleCreateCart}\r\n                            />\r\n                        </div> */}\r\n          </div>\r\n        </div>\r\n        <NormalModal\r\n          className={\"transaction-done-modal top-up-modal\"}\r\n          style={{ minWidth: \"40%\" }}\r\n          modal={isOpenvoidDetail}\r\n          handleModal={() => {}}\r\n        >\r\n          <img\r\n            onClick={this.handleDialog}\r\n            className=\"close cursor-pointer\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n          <p className=\"fs-18 f-600\">Detail</p>\r\n          <div className=\"mt-3\">\r\n            <TableWrapper\r\n              headerDetails={detailHeaderDetails}\r\n              queryHandler={this.handlePagination}\r\n            >\r\n              {detailDataList && detailDataList.length > 0\r\n                ? detailDataList.map((item, index) => {\r\n                    return (\r\n                      <tr\r\n                        key={index}\r\n                        onClick={() => this.handleSelectVoid(item, index)}\r\n                      >\r\n                        <td>\r\n                          <div className=\"text-right\">{index + 1}</div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"text-left\">{item.desc}</div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"text-right\">{item.dt_qty}</div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"text-right\">{item.dt_amt}</div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                : null}\r\n            </TableWrapper>\r\n          </div>\r\n          <div className=\"row mt-2\">\r\n            <div className=\"col-12 d-flex justify-right\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                resetbg={true}\r\n                className=\"fs-15\"\r\n                label=\"Cancel\"\r\n                onClick={this.handleDialog}\r\n              />\r\n              {isVoidCreateLoading ? (\r\n                <div class=\"d-flex align-items-center justify-content-center\">\r\n                  <div className=\"col-12\">\r\n                    <div class=\"spinner-border\" role=\"status\">\r\n                      <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <NormalButton\r\n                  buttonClass={\"mx-2\"}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Void\"\r\n                  outline={false}\r\n                  onClick={() => {\r\n                    this.props.tokenDetails.voidbill_setup\r\n                      ? this.setState({ isLoginConfirmation: true })\r\n                      : this.handleVoidCreate();\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </NormalModal>\r\n        <NormalModal\r\n          className={\"transaction-done-modal top-up-modal\"}\r\n          style={{ minWidth: \"40%\" }}\r\n          modal={isOpenvoidCheckout}\r\n          handleModal={() => {}}\r\n        >\r\n          {/* <img onClick={this.handleDialog} className=\"close cursor-pointer\" src={closeIcon} alt=\"\" /> */}\r\n          <p className=\"fs-18 f-600\">{t(\"Void Checkout\")}</p>\r\n          <div className=\"mt-3\">\r\n            <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n              {t(\"Reason\")}\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalSelect\r\n                // placeholder=\"Enter here\"\r\n                options={reasonOption}\r\n                value={reason}\r\n                name={\"reason\"}\r\n                onChange={this.handleReasonChange}\r\n                className=\"py-0\"\r\n              />\r\n              {this.validator.message(\"Reason\", reason, \"required\")}\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-6 d-flex mt-5 justify-left\">\r\n              {isVoidCancelLoading ? (\r\n                <div class=\"d-flex align-items-center justify-content-center\">\r\n                  <div className=\"col-12\">\r\n                    <div class=\"spinner-border\" role=\"status\">\r\n                      <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <NormalButton\r\n                  buttonClass={\"mx-2\"}\r\n                  mainbg={true}\r\n                  className=\" fs-15 confirm\"\r\n                  label=\"Void Cancel\"\r\n                  outline={false}\r\n                  onClick={this.handleVoidCancelCart}\r\n                />\r\n              )}\r\n            </div>\r\n            <div className=\"col-6 d-flex mt-5 justify-right\">\r\n              {isVoidConfirmLoading ? (\r\n                <div class=\"d-flex align-items-center justify-content-center\">\r\n                  <div class=\"spinner-border\" role=\"status\">\r\n                    <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <NormalButton\r\n                  buttonClass={\"mx-2\"}\r\n                  mainbg={true}\r\n                  className=\" fs-15 confirm\"\r\n                  label=\"Confirm\"\r\n                  outline={false}\r\n                  onClick={this.handleVoidCartSubmit}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </NormalModal>\r\n        <NormalModal\r\n          className={\"void-checkout-complete top-up-modal\"}\r\n          style={{ minWidth: \"40%\" }}\r\n          modal={isvoidCompleted}\r\n          handleModal={() => {}}\r\n        >\r\n          <img\r\n            onClick={this.handleDialog}\r\n            className=\"close cursor-pointer\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n          <p className=\"fs-18 f-600\">{t(\"Void Checkout\")}</p>\r\n\r\n          <div className=\"row my-5\">\r\n            <div className=\"col-4 d-flex mt-5 justify-center\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                mainbg={true}\r\n                className=\"print\"\r\n                label=\"Print\"\r\n                outline={false}\r\n                onClick={this.handlePrint}\r\n              />\r\n            </div>\r\n            <div className=\"col-4 d-flex mt-5 justify-center\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                mainbg={true}\r\n                className=\"share\"\r\n                label=\"Share\"\r\n                outline={false}\r\n                onClick={this.handleShare}\r\n              />\r\n            </div>\r\n            <div className=\"col-4 d-flex mt-5 justify-center\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                resetbg={true}\r\n                className=\"cancel\"\r\n                label=\"Close\"\r\n                outline={false}\r\n                onClick={this.handleDialog}\r\n              />\r\n            </div>\r\n          </div>\r\n        </NormalModal>\r\n        <NormalModal\r\n          className={\"d-flex justify-content-center\"}\r\n          style={{ minWidth: \"20%\" }}\r\n          modal={isLoginConfirmation}\r\n          handleModal={() => {}}\r\n        >\r\n          <img\r\n            onClick={this.handleLoginConfirmationDialog}\r\n            className=\"close cursor-pointer\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n          <CredentialConfirmation\r\n            handleLoginSubmit={(user, pass) =>\r\n              this.handleauthentication(user, pass)\r\n            }\r\n          />\r\n        </NormalModal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n  tokenDetails: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const VoidPaidTrans = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(VoidPaidTransClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}