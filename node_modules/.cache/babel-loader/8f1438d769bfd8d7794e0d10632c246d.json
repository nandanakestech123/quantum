{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton,NormalModal,NormalSelect}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import closeIcon from\"assets/images/close.png\";import _ from\"lodash\";import{AddPhotoPopup}from\"./AddPhotoPopup\";import{Navigation}from\"react-minimal-side-navigation\";import{ComparePhotoPopup}from\"./ComparePhotoPopup\";import{withTranslation}from\"react-i18next\";import{getDiagnosisPhotos,getDiagnosisHistory}from\"redux/actions/customerPlus\";export var DianosisClass=/*#__PURE__*/function(_React$Component){_inherits(DianosisClass,_React$Component);var _super=_createSuper(DianosisClass);function DianosisClass(){var _this;_classCallCheck(this,DianosisClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={photoTableHeader:[{label:\"Date Taken\",sortKey:\"date\",divClass:\"justify-content-end text-right\"},{label:\"Diagnosis Code\",sortKey:\"code\",enabled:true},{label:\"Remarks\",sortKey:\"remarks\",enabled:true},{label:\"Compare\",sortKey:\"compare\",divClass:\"justify-content-center\"},{label:\"View\",sortKey:\"view\",divClass:\"justify-content-center\"}],photoList:[],historyTableHeader:[{label:\"Compare Date\",sortKey:\"date\",divClass:\"justify-content-end text-right\"},{label:\"Compare Remarks\",sortKey:\"remarks\",enabled:true},{label:\"Diagnosis Reference\",sortKey:\"referance\",enabled:true},{label:\"Date\",sortKey:\"dDate\",divClass:\"justify-content-end text-right\"},{label:\"View\",sortKey:\"view\",divClass:\"justify-content-center\"}],historyList:[],visitTableHeader:[{label:\"Date\",sortKey:\"date\",divClass:\"justify-content-end text-right\"},{label:\"PDPA\",sortKey:\"pdpa\",enabled:true},{label:\"Questionairre / Consultation\",sortKey:\"consultation\",enabled:true},{label:\"Diagnosis\",sortKey:\"diagnosis\",divClass:\"justify-content-end text-right\"},{label:\"Consent Form\",sortKey:\"consent\"},{label:\"Treatment Done\",sortKey:\"treatments\"},{label:\"Sales\",sortKey:\"sales\",divClass:\"justify-content-center\"}],visitList:[],compareList:[],photoListMeta:{},historyMeta:{},visitMeta:{},active:false,currentIndex:-1,currentMenu:\"/\",selectedRemark:null,selectedHistoryCode:null,currentData:null,isAddPhotoOpen:false,isCompareOpen:false,isMounted:true,isLoading:true};_this.loadDiagnosisPhotos=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,_data$page,page,_data$search,search,photoList,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_args.length>0&&_args[0]!==undefined?_args[0]:{};_this.updateState({isLoading:true});_data$page=data.page,page=_data$page===void 0?1:_data$page,_data$search=data.search,search=_data$search===void 0?\"\":_data$search;_context.next=5;return _this.props.getDiagnosisPhotos(_this.props.id,\"?page=\".concat(page,\"&search=\").concat(search));case 5:photoList=_this.props.photoList;_this.state.photoList=photoList.diagnosisList;_this.state.photoListMeta=photoList.pagination;_this.updateState({isLoading:false});case 9:case\"end\":return _context.stop();}}},_callee);}));_this.loadDiagnosisHistory=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,_data$page2,page,_data$search2,search,historyList,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data=_args2.length>0&&_args2[0]!==undefined?_args2[0]:{};_this.updateState({isLoading:true});_data$page2=data.page,page=_data$page2===void 0?1:_data$page2,_data$search2=data.search,search=_data$search2===void 0?\"\":_data$search2;_context2.next=5;return _this.props.getDiagnosisHistory(_this.props.id,\"?page=\".concat(page,\"&search=\").concat(search));case 5:historyList=_this.props.historyList;_this.state.historyList=historyList.diagnosisList;_this.state.historyMeta=historyList.pagination;_this.updateState({isLoading:false});case 9:case\"end\":return _context2.stop();}}},_callee2);}));_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.handlePagination=function(type,page){if(type===\"photo\"){_this.loadDiagnosisPhotos(page);}if(type===\"history\"){}if(type===\"visit\"){}};_this.handlePhotosearch=function(event){_this.loadDiagnosisPhotos({search:event.target.value});};_this.handleHistorySearch=function(event){_this.loadDiagnosisHistory({search:event.target.value});};_this.handleVisitSearch=function(event){};_this.handleMenuSelection=function(value){_this.setState({currentMenu:value,selectedRemark:null});};return _this;}_createClass(DianosisClass,[{key:\"componentDidMount\",value:function componentDidMount(){var queryParams=new URLSearchParams(window.location.search);var submenu=queryParams.get(\"submenu\");if(submenu)if(submenu==\"history\"||submenu==\"visits\")this.setState({currentMenu:\"/\"+submenu});this.loadDiagnosisPhotos();this.loadDiagnosisHistory();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,photoTableHeader=_this$state.photoTableHeader,photoList=_this$state.photoList,photoListMeta=_this$state.photoListMeta,historyMeta=_this$state.historyMeta,visitMeta=_this$state.visitMeta,compareList=_this$state.compareList,currentData=_this$state.currentData,currentMenu=_this$state.currentMenu,isAddPhotoOpen=_this$state.isAddPhotoOpen,isCompareOpen=_this$state.isCompareOpen,historyList=_this$state.historyList,historyTableHeader=_this$state.historyTableHeader,selectedRemark=_this$state.selectedRemark,visitList=_this$state.visitList,visitTableHeader=_this$state.visitTableHeader,isLoading=_this$state.isLoading;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-lg-2 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"head-label\"},t(\"Diagnosis\"))),/*#__PURE__*/React.createElement(Navigation,{activeItemId:currentMenu,onSelect:function onSelect(_ref3){var itemId=_ref3.itemId;return _this2.handleMenuSelection(itemId);},items:[{title:t(\"Photos\"),itemId:\"/\"},{title:t(\"History\"),itemId:\"/history\"}]})),isLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-lg-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\")))):currentMenu==\"/\"?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-lg-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 col-md-6 mb-4 p-0\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Photo\",onEnter:this.handlePhotosearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 col-md-6 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-md-10 fs-15 float-right\",label:\"Add Photo\",onClick:function onClick(){_this2.state.currentData=null;_this2.setState({isAddPhotoOpen:true});}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:photoTableHeader,queryHandler:function queryHandler(e){return _this2.handlePagination(\"photo\",e);},pageMeta:photoListMeta,showFilterColumn:true,parentHeaderChange:function parentHeaderChange(value){return _this2.setState(function(){return photoTableHeader=value;});}},photoList.length>0?photoList.map(function(item,index){var _photoTableHeader$0$e,_photoTableHeader$1$e,_photoTableHeader$2$e,_photoTableHeader$3$e,_photoTableHeader$4$e;var isCompare=item.isCompare,pic_path=item.pic_path,diagnosis_date=item.diagnosis_date,diagnosis_code=item.diagnosis_code,sys_code=item.sys_code,remarks=item.remarks,pic_data1=item.pic_data1;console.log(photoTableHeader[0]);return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:((_photoTableHeader$0$e=photoTableHeader[0].enabled)!==null&&_photoTableHeader$0$e!==void 0?_photoTableHeader$0$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},new Date(diagnosis_date).toLocaleDateString(\"en-GB\"))),/*#__PURE__*/React.createElement(\"td\",{className:((_photoTableHeader$1$e=photoTableHeader[1].enabled)!==null&&_photoTableHeader$1$e!==void 0?_photoTableHeader$1$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},diagnosis_code)),/*#__PURE__*/React.createElement(\"td\",{className:((_photoTableHeader$2$e=photoTableHeader[2].enabled)!==null&&_photoTableHeader$2$e!==void 0?_photoTableHeader$2$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},remarks)),/*#__PURE__*/React.createElement(\"td\",{className:((_photoTableHeader$3$e=photoTableHeader[3].enabled)!==null&&_photoTableHeader$3$e!==void 0?_photoTableHeader$3$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:isCompare,onClick:function onClick(){photoList[index].isCompare=!isCompare;_this2.setState({});}}))),/*#__PURE__*/React.createElement(\"td\",{className:((_photoTableHeader$4$e=photoTableHeader[4].enabled)!==null&&_photoTableHeader$4$e!==void 0?_photoTableHeader$4$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-20\",onClick:function onClick(){return _this2.setState({currentData:{image:pic_path,remarks:remarks,pic_data1:pic_data1,diagnosis_code:sys_code},isAddPhotoOpen:true});}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey\"})))));}):null))),photoList&&photoList.filter(function(e){return e.isCompare;}).length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-4 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Compare\",onClick:function onClick(){_this2.state.selectedRemark=null;_this2.setState({isCompareOpen:true});}})):null):currentMenu==\"/history\"?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-lg-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 p-0\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search History\",onEnter:this.handleHistorySearch})))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:historyTableHeader,queryHandler:function queryHandler(e){return _this2.handlePagination(\"history\",e);},pageMeta:historyMeta,showFilterColumn:true,parentHeaderChange:function parentHeaderChange(value){return _this2.setState(function(){return historyTableHeader=value;});}},historyList?historyList.map(function(item,index){var _historyTableHeader$,_historyTableHeader$2,_historyTableHeader$3,_historyTableHeader$4,_historyTableHeader$5;var diagnosis_list=item.diagnosis_list,compare_datetime=item.compare_datetime,compare_remark=item.compare_remark,id=item.id;console.log(historyTableHeader[0]);return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:((_historyTableHeader$=historyTableHeader[0].enabled)!==null&&_historyTableHeader$!==void 0?_historyTableHeader$:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},new Date(compare_datetime).toLocaleDateString(\"en-GB\"))),/*#__PURE__*/React.createElement(\"td\",{className:((_historyTableHeader$2=historyTableHeader[1].enabled)!==null&&_historyTableHeader$2!==void 0?_historyTableHeader$2:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},compare_remark)),/*#__PURE__*/React.createElement(\"td\",{className:((_historyTableHeader$3=historyTableHeader[2].enabled)!==null&&_historyTableHeader$3!==void 0?_historyTableHeader$3:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},diagnosis_list.map(function(image){return/*#__PURE__*/React.createElement(React.Fragment,null,image.diagnosis_code,\" \",/*#__PURE__*/React.createElement(\"br\",null));}))),/*#__PURE__*/React.createElement(\"td\",{className:((_historyTableHeader$4=historyTableHeader[3].enabled)!==null&&_historyTableHeader$4!==void 0?_historyTableHeader$4:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},diagnosis_list.map(function(image){return/*#__PURE__*/React.createElement(React.Fragment,null,new Date(image.date_pic_take).toLocaleDateString(\"en-GB\"),/*#__PURE__*/React.createElement(\"br\",null));}))),/*#__PURE__*/React.createElement(\"td\",{className:((_historyTableHeader$5=historyTableHeader[4].enabled)!==null&&_historyTableHeader$5!==void 0?_historyTableHeader$5:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-20\",onClick:function onClick(){return _this2.setState({selectedRemark:compare_remark,selectedHistoryCode:id,compareList:diagnosis_list,isCompareOpen:true});}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey\"})))));}):null)))):/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-lg-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 p-0\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Visit\",onEnter:this.handleVisitSearch})))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:visitTableHeader,queryHandler:function queryHandler(e){return _this2.handlePagination(\"visit\",e);},pageMeta:visitMeta,showFilterColumn:true,parentHeaderChange:function parentHeaderChange(value){return _this2.setState(function(){return visitTableHeader=value;});}},visitList?visitList.map(function(item,index){var _visitTableHeader$0$e,_visitTableHeader$1$e,_visitTableHeader$2$e,_visitTableHeader$3$e,_visitTableHeader$4$e;var images=item.images,date=item.date,remarks=item.remarks;console.log(visitTableHeader[0]);return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:((_visitTableHeader$0$e=visitTableHeader[0].enabled)!==null&&_visitTableHeader$0$e!==void 0?_visitTableHeader$0$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},date)),/*#__PURE__*/React.createElement(\"td\",{className:((_visitTableHeader$1$e=visitTableHeader[1].enabled)!==null&&_visitTableHeader$1$e!==void 0?_visitTableHeader$1$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},remarks)),/*#__PURE__*/React.createElement(\"td\",{className:((_visitTableHeader$2$e=visitTableHeader[2].enabled)!==null&&_visitTableHeader$2$e!==void 0?_visitTableHeader$2$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},images.map(function(image){return/*#__PURE__*/React.createElement(React.Fragment,null,image.id,\" \",/*#__PURE__*/React.createElement(\"br\",null));}))),/*#__PURE__*/React.createElement(\"td\",{className:((_visitTableHeader$3$e=visitTableHeader[3].enabled)!==null&&_visitTableHeader$3$e!==void 0?_visitTableHeader$3$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},images.map(function(image){return/*#__PURE__*/React.createElement(React.Fragment,null,image.date,\" \",/*#__PURE__*/React.createElement(\"br\",null));}))),/*#__PURE__*/React.createElement(\"td\",{className:((_visitTableHeader$4$e=visitTableHeader[4].enabled)!==null&&_visitTableHeader$4$e!==void 0?_visitTableHeader$4$e:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-20\",onClick:function onClick(){return _this2.setState({selectedRemark:remarks,compareList:images,isCompareOpen:true});}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey\"})))));}):null))))),/*#__PURE__*/React.createElement(NormalModal,{style:{minWidth:\"80%\"},modal:isAddPhotoOpen,handleModal:function handleModal(){return _this2.setState({isAddPhotoOpen:false});}},/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return _this2.setState({isAddPhotoOpen:false});},className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(AddPhotoPopup,{image:currentData===null||currentData===void 0?void 0:currentData.image,remarks:currentData===null||currentData===void 0?void 0:currentData.remarks,layoutData:currentData===null||currentData===void 0?void 0:currentData.pic_data1,diagnosis_code:currentData===null||currentData===void 0?void 0:currentData.diagnosis_code,cust_no:this.props.id,onDone:function onDone(){_this2.updateState({isAddPhotoOpen:false});_this2.loadDiagnosisHistory();_this2.loadDiagnosisPhotos();}})),/*#__PURE__*/React.createElement(NormalModal,{style:{minWidth:\"80%\"},modal:isCompareOpen,handleModal:function handleModal(){return _this2.setState({isCompareOpen:false});}},/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return _this2.setState({isCompareOpen:false});},className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(ComparePhotoPopup,{dataList:currentMenu==\"/\"?photoList&&photoList.filter(function(e){return e.isCompare;}):compareList,remarks:currentMenu==\"/\"?null:selectedRemark,id:this.state.selectedHistoryCode,cust_code:this.props.id,onDone:function onDone(){_this2.updateState({isCompareOpen:false});_this2.loadDiagnosisHistory();_this2.loadDiagnosisPhotos();}}))));}}]);return DianosisClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{photoList:state.customerPlus.customerDiagnosisPhotoList,historyList:state.customerPlus.customerDiagnosisHistory};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getDiagnosisPhotos:getDiagnosisPhotos,getDiagnosisHistory:getDiagnosisHistory},dispatch);};export var Dianosis=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(DianosisClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/Details/Dianosis.js"],"names":["React","NormalButton","NormalModal","NormalSelect","InputSearch","TableWrapper","connect","bindActionCreators","closeIcon","_","AddPhotoPopup","Navigation","ComparePhotoPopup","withTranslation","getDiagnosisPhotos","getDiagnosisHistory","DianosisClass","state","photoTableHeader","label","sortKey","divClass","enabled","photoList","historyTableHeader","historyList","visitTableHeader","visitList","compareList","photoListMeta","historyMeta","visitMeta","active","currentIndex","currentMenu","selectedRemark","selectedHistoryCode","currentData","isAddPhotoOpen","isCompareOpen","isMounted","isLoading","loadDiagnosisPhotos","data","updateState","page","search","props","id","diagnosisList","pagination","loadDiagnosisHistory","setState","handleOutsideClick","e","node","contains","target","handleClick","handlePagination","type","handlePhotosearch","event","value","handleHistorySearch","handleVisitSearch","handleMenuSelection","queryParams","URLSearchParams","window","location","submenu","get","t","itemId","title","length","map","item","index","isCompare","pic_path","diagnosis_date","diagnosis_code","sys_code","remarks","pic_data1","console","log","Date","toLocaleDateString","image","filter","diagnosis_list","compare_datetime","compare_remark","date_pic_take","images","date","minWidth","Component","mapStateToProps","customerPlus","customerDiagnosisPhotoList","customerDiagnosisHistory","mapDispatchToProps","dispatch","Dianosis"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { NormalButton, NormalModal, NormalSelect } from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport _ from \"lodash\";\r\nimport { AddPhotoPopup } from \"./AddPhotoPopup\";\r\nimport { Navigation } from \"react-minimal-side-navigation\";\r\nimport { ComparePhotoPopup } from \"./ComparePhotoPopup\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport {\r\n  getDiagnosisPhotos,\r\n  getDiagnosisHistory,\r\n} from \"redux/actions/customerPlus\";\r\n\r\nexport class DianosisClass extends React.Component {\r\n  state = {\r\n    photoTableHeader: [\r\n      {\r\n        label: \"Date Taken\",\r\n        sortKey: \"date\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Diagnosis Code\", sortKey: \"code\", enabled: true },\r\n      { label: \"Remarks\", sortKey: \"remarks\", enabled: true },\r\n      {\r\n        label: \"Compare\",\r\n        sortKey: \"compare\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      { label: \"View\", sortKey: \"view\", divClass: \"justify-content-center\" },\r\n    ],\r\n    photoList: [],\r\n    historyTableHeader: [\r\n      {\r\n        label: \"Compare Date\",\r\n        sortKey: \"date\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Compare Remarks\", sortKey: \"remarks\", enabled: true },\r\n      { label: \"Diagnosis Reference\", sortKey: \"referance\", enabled: true },\r\n      {\r\n        label: \"Date\",\r\n        sortKey: \"dDate\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"View\", sortKey: \"view\", divClass: \"justify-content-center\" },\r\n    ],\r\n    historyList: [],\r\n    visitTableHeader: [\r\n      {\r\n        label: \"Date\",\r\n        sortKey: \"date\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"PDPA\", sortKey: \"pdpa\", enabled: true },\r\n      {\r\n        label: \"Questionairre / Consultation\",\r\n        sortKey: \"consultation\",\r\n        enabled: true,\r\n      },\r\n      {\r\n        label: \"Diagnosis\",\r\n        sortKey: \"diagnosis\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Consent Form\", sortKey: \"consent\" },\r\n      { label: \"Treatment Done\", sortKey: \"treatments\" },\r\n      { label: \"Sales\", sortKey: \"sales\", divClass: \"justify-content-center\" },\r\n    ],\r\n    visitList: [],\r\n    compareList: [],\r\n    photoListMeta: {},\r\n    historyMeta: {},\r\n    visitMeta: {},\r\n    active: false,\r\n    currentIndex: -1,\r\n    currentMenu: \"/\",\r\n    selectedRemark: null,\r\n    selectedHistoryCode: null,\r\n    currentData: null,\r\n    isAddPhotoOpen: false,\r\n    isCompareOpen: false,\r\n    isMounted: true,\r\n    isLoading: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const queryParams = new URLSearchParams(window.location.search);\r\n    const submenu = queryParams.get(\"submenu\");\r\n    if (submenu)\r\n      if (submenu == \"history\" || submenu == \"visits\")\r\n        this.setState({ currentMenu: \"/\" + submenu });\r\n    this.loadDiagnosisPhotos();\r\n    this.loadDiagnosisHistory();\r\n  }\r\n\r\n  loadDiagnosisPhotos = async (data = {}) => {\r\n    this.updateState({ isLoading: true });\r\n    let { page = 1, search = \"\" } = data;\r\n    await this.props.getDiagnosisPhotos(\r\n      this.props.id,\r\n      `?page=${page}&search=${search}`\r\n    );\r\n    let { photoList } = this.props;\r\n    this.state.photoList = photoList.diagnosisList;\r\n    this.state.photoListMeta = photoList.pagination;\r\n    this.updateState({ isLoading: false });\r\n  };\r\n\r\n  loadDiagnosisHistory = async (data = {}) => {\r\n    this.updateState({ isLoading: true });\r\n    let { page = 1, search = \"\" } = data;\r\n    await this.props.getDiagnosisHistory(\r\n      this.props.id,\r\n      `?page=${page}&search=${search}`\r\n    );\r\n    let { historyList } = this.props;\r\n    this.state.historyList = historyList.diagnosisList;\r\n    this.state.historyMeta = historyList.pagination;\r\n    this.updateState({ isLoading: false });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  handlePagination = (type, page) => {\r\n    if (type === \"photo\") {\r\n      this.loadDiagnosisPhotos(page);\r\n    }\r\n    if (type === \"history\") {\r\n    }\r\n    if (type === \"visit\") {\r\n    }\r\n  };\r\n\r\n  handlePhotosearch = event => {\r\n    this.loadDiagnosisPhotos({ search: event.target.value });\r\n  };\r\n  handleHistorySearch = event => {\r\n    this.loadDiagnosisHistory({ search: event.target.value });\r\n  };\r\n  handleVisitSearch = event => {};\r\n\r\n  handleMenuSelection = value => {\r\n    this.setState({\r\n      currentMenu: value,\r\n      selectedRemark: null,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      photoTableHeader,\r\n      photoList,\r\n      photoListMeta,\r\n      historyMeta,\r\n      visitMeta,\r\n      compareList,\r\n      currentData,\r\n      currentMenu,\r\n      isAddPhotoOpen,\r\n      isCompareOpen,\r\n      historyList,\r\n      historyTableHeader,\r\n      selectedRemark,\r\n      visitList,\r\n      visitTableHeader,\r\n      isLoading,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"container-fluid mt-4\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12 col-lg-2 mb-4\">\r\n              <div className=\"col-md-12 mb-4\">\r\n                <h3 className=\"head-label\">{t(\"Diagnosis\")}</h3>\r\n              </div>\r\n              <Navigation\r\n                activeItemId={currentMenu}\r\n                onSelect={({ itemId }) => this.handleMenuSelection(itemId)}\r\n                items={[\r\n                  {\r\n                    title: t(\"Photos\"),\r\n                    itemId: \"/\",\r\n                  },\r\n                  {\r\n                    title: t(\"History\"),\r\n                    itemId: \"/history\",\r\n                  },\r\n                ]}\r\n              />\r\n            </div>\r\n            {isLoading ? (\r\n              <div className=\"col-md-12 col-lg-10\">\r\n                <div className=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                  <div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : currentMenu == \"/\" ? (\r\n              <div className=\"col-md-12 col-lg-10\">\r\n                <div className=\"col-md-12 mb-4\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-sm-12 col-md-6 mb-4 p-0\">\r\n                      <InputSearch\r\n                        className=\"\"\r\n                        placeholder=\"Search Photo\"\r\n                        onEnter={this.handlePhotosearch}\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-sm-12 col-md-6 p-0\">\r\n                      <NormalButton\r\n                        mainbg={true}\r\n                        className=\"col-md-10 fs-15 float-right\"\r\n                        label=\"Add Photo\"\r\n                        onClick={() => {\r\n                          this.state.currentData = null;\r\n                          this.setState({ isAddPhotoOpen: true });\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"table-responsive\">\r\n                  <div className=\"table-container\">\r\n                    <TableWrapper\r\n                      headerDetails={photoTableHeader}\r\n                      queryHandler={e => this.handlePagination(\"photo\", e)}\r\n                      pageMeta={photoListMeta}\r\n                      showFilterColumn={true}\r\n                      parentHeaderChange={value =>\r\n                        this.setState(() => (photoTableHeader = value))\r\n                      }\r\n                    >\r\n                      {photoList.length > 0\r\n                        ? photoList.map((item, index) => {\r\n                            let {\r\n                              isCompare,\r\n                              pic_path,\r\n                              diagnosis_date,\r\n                              diagnosis_code,\r\n                              sys_code,\r\n                              remarks,\r\n                              pic_data1,\r\n                            } = item;\r\n                            console.log(photoTableHeader[0]);\r\n                            return (\r\n                              <tr key={index}>\r\n                                <td\r\n                                  className={\r\n                                    photoTableHeader[0].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-right\">\r\n                                    {new Date(\r\n                                      diagnosis_date\r\n                                    ).toLocaleDateString(\"en-GB\")}\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    photoTableHeader[1].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-left\">\r\n                                    {diagnosis_code}\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    photoTableHeader[2].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-left\">{remarks}</div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    photoTableHeader[3].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                                    <input\r\n                                      type=\"checkbox\"\r\n                                      checked={isCompare}\r\n                                      onClick={() => {\r\n                                        photoList[index].isCompare = !isCompare;\r\n                                        this.setState({});\r\n                                      }}\r\n                                    />\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    photoTableHeader[4].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-20\"\r\n                                      onClick={() =>\r\n                                        this.setState({\r\n                                          currentData: {\r\n                                            image: pic_path,\r\n                                            remarks,\r\n                                            pic_data1,\r\n                                            diagnosis_code: sys_code,\r\n                                          },\r\n                                          isAddPhotoOpen: true,\r\n                                        })\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-eye-grey\"></span>\r\n                                    </div>\r\n                                  </div>\r\n                                </td>\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        : null}\r\n                    </TableWrapper>\r\n                  </div>\r\n                </div>\r\n                {photoList && photoList.filter(e => e.isCompare).length > 0 ? (\r\n                  <div className=\"w-100 col-4 p-0\">\r\n                    <NormalButton\r\n                      mainbg={true}\r\n                      className=\"col-12 fs-15 float-right\"\r\n                      label=\"Compare\"\r\n                      onClick={() => {\r\n                        this.state.selectedRemark = null;\r\n                        this.setState({ isCompareOpen: true });\r\n                      }}\r\n                    />\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            ) : currentMenu == \"/history\" ? (\r\n              <div className=\"col-md-12 col-lg-10\">\r\n                <div className=\"col-md-12 mb-4\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-12 p-0\">\r\n                      <InputSearch\r\n                        className=\"\"\r\n                        placeholder=\"Search History\"\r\n                        onEnter={this.handleHistorySearch}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"table-responsive\">\r\n                  <div className=\"table-container\">\r\n                    <TableWrapper\r\n                      headerDetails={historyTableHeader}\r\n                      queryHandler={e => this.handlePagination(\"history\", e)}\r\n                      pageMeta={historyMeta}\r\n                      showFilterColumn={true}\r\n                      parentHeaderChange={value =>\r\n                        this.setState(() => (historyTableHeader = value))\r\n                      }\r\n                    >\r\n                      {historyList\r\n                        ? historyList.map((item, index) => {\r\n                            let {\r\n                              diagnosis_list,\r\n                              compare_datetime,\r\n                              compare_remark,\r\n                              id,\r\n                            } = item;\r\n                            console.log(historyTableHeader[0]);\r\n                            return (\r\n                              <tr key={index}>\r\n                                <td\r\n                                  className={\r\n                                    historyTableHeader[0].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-right\">\r\n                                    {new Date(\r\n                                      compare_datetime\r\n                                    ).toLocaleDateString(\"en-GB\")}\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    historyTableHeader[1].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-left\">\r\n                                    {compare_remark}\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    historyTableHeader[2].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-left\">\r\n                                    {diagnosis_list.map(image => (\r\n                                      <>\r\n                                        {image.diagnosis_code} <br />\r\n                                      </>\r\n                                    ))}\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    historyTableHeader[3].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-right\">\r\n                                    {diagnosis_list.map(image => (\r\n                                      <>\r\n                                        {new Date(\r\n                                          image.date_pic_take\r\n                                        ).toLocaleDateString(\"en-GB\")}\r\n                                        <br />\r\n                                      </>\r\n                                    ))}\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    historyTableHeader[4].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-20\"\r\n                                      onClick={() =>\r\n                                        this.setState({\r\n                                          selectedRemark: compare_remark,\r\n                                          selectedHistoryCode: id,\r\n                                          compareList: diagnosis_list,\r\n                                          isCompareOpen: true,\r\n                                        })\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-eye-grey\"></span>\r\n                                    </div>\r\n                                  </div>\r\n                                </td>\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        : null}\r\n                    </TableWrapper>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"col-md-12 col-lg-10\">\r\n                <div className=\"col-md-12 mb-4\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-12 p-0\">\r\n                      <InputSearch\r\n                        className=\"\"\r\n                        placeholder=\"Search Visit\"\r\n                        onEnter={this.handleVisitSearch}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"table-responsive\">\r\n                  <div className=\"table-container\">\r\n                    <TableWrapper\r\n                      headerDetails={visitTableHeader}\r\n                      queryHandler={e => this.handlePagination(\"visit\", e)}\r\n                      pageMeta={visitMeta}\r\n                      showFilterColumn={true}\r\n                      parentHeaderChange={value =>\r\n                        this.setState(() => (visitTableHeader = value))\r\n                      }\r\n                    >\r\n                      {visitList\r\n                        ? visitList.map((item, index) => {\r\n                            let { images, date, remarks } = item;\r\n                            console.log(visitTableHeader[0]);\r\n                            return (\r\n                              <tr key={index}>\r\n                                <td\r\n                                  className={\r\n                                    visitTableHeader[0].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-right\">{date}</div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    visitTableHeader[1].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-left\">{remarks}</div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    visitTableHeader[2].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-left\">\r\n                                    {images.map(image => (\r\n                                      <>\r\n                                        {image.id} <br />\r\n                                      </>\r\n                                    ))}\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    visitTableHeader[3].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"text-right\">\r\n                                    {images.map(image => (\r\n                                      <>\r\n                                        {image.date} <br />\r\n                                      </>\r\n                                    ))}\r\n                                  </div>\r\n                                </td>\r\n                                <td\r\n                                  className={\r\n                                    visitTableHeader[4].enabled ?? true\r\n                                      ? \"\"\r\n                                      : \"d-none\"\r\n                                  }\r\n                                >\r\n                                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-20\"\r\n                                      onClick={() =>\r\n                                        this.setState({\r\n                                          selectedRemark: remarks,\r\n                                          compareList: images,\r\n                                          isCompareOpen: true,\r\n                                        })\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-eye-grey\"></span>\r\n                                    </div>\r\n                                  </div>\r\n                                </td>\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        : null}\r\n                    </TableWrapper>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <NormalModal\r\n            style={{ minWidth: \"80%\" }}\r\n            modal={isAddPhotoOpen}\r\n            handleModal={() => this.setState({ isAddPhotoOpen: false })}\r\n          >\r\n            <img\r\n              onClick={() => this.setState({ isAddPhotoOpen: false })}\r\n              className=\"close cursor-pointer\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <AddPhotoPopup\r\n              image={currentData?.image}\r\n              remarks={currentData?.remarks}\r\n              layoutData={currentData?.pic_data1}\r\n              diagnosis_code={currentData?.diagnosis_code}\r\n              cust_no={this.props.id}\r\n              onDone={() => {\r\n                this.updateState({ isAddPhotoOpen: false });\r\n                this.loadDiagnosisHistory();\r\n                this.loadDiagnosisPhotos();\r\n              }}\r\n            />\r\n          </NormalModal>\r\n          <NormalModal\r\n            style={{ minWidth: \"80%\" }}\r\n            modal={isCompareOpen}\r\n            handleModal={() => this.setState({ isCompareOpen: false })}\r\n          >\r\n            <img\r\n              onClick={() => this.setState({ isCompareOpen: false })}\r\n              className=\"close cursor-pointer\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <ComparePhotoPopup\r\n              dataList={\r\n                currentMenu == \"/\"\r\n                  ? photoList && photoList.filter(e => e.isCompare)\r\n                  : compareList\r\n              }\r\n              remarks={currentMenu == \"/\" ? null : selectedRemark}\r\n              id={this.state.selectedHistoryCode}\r\n              cust_code={this.props.id}\r\n              onDone={() => {\r\n                this.updateState({ isCompareOpen: false });\r\n                this.loadDiagnosisHistory();\r\n                this.loadDiagnosisPhotos();\r\n              }}\r\n            />\r\n          </NormalModal>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  photoList: state.customerPlus.customerDiagnosisPhotoList,\r\n  historyList: state.customerPlus.customerDiagnosisHistory,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getDiagnosisPhotos,\r\n      getDiagnosisHistory,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const Dianosis = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(DianosisClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}