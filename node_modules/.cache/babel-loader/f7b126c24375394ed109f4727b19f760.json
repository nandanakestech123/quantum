{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"./style.scss\";import{NormalButton,TableWrapper}from'component/common';import{FormGroup,Label,Input}from'reactstrap';import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import{connect}from'react-redux';import{bindActionCreators}from\"redux\";export var PrepaidAccountClass=/*#__PURE__*/function(_Component){_inherits(PrepaidAccountClass,_Component);var _super=_createSuper(PrepaidAccountClass);function PrepaidAccountClass(){var _this;_classCallCheck(this,PrepaidAccountClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeTab:'',isOpenTreatmentDone:false,isActiveTab:\"detail\",headerDetails:[{label:'Prepaid #',sortKey:false,width:\"120px\"},{label:'Prepaid Description',width:\"242px\"},{label:'Last Update',sortKey:false,width:\"120px\"},{label:'Purchase Date',sortKey:false,width:\"180px\"},{label:'Type',sortKey:false,width:\"120px\"},{label:'Expiry Date',sortKey:false,width:\"120px\"},{label:'Expiry Status',sortKey:false,width:\"120px\"},{label:'Prepaid',sortKey:false,width:\"100px\"},{label:'',sortKey:false,width:\"100px\"}],detailHeader:[{label:'Prepaid Ref',sortKey:false,width:\"150px\"},{label:'Transaction Ref',sortKey:false,width:\"225px\"},{label:'Voucher #',width:\"100px\"},{label:'Item No',sortKey:false,width:\"70px\"},{label:'Item Name',sortKey:false,width:\"72px\"},{label:'Used Amt',sortKey:false,width:\"72px\"},{label:'Top up A',sortKey:false,width:\"72px\"},{label:'Balance',sortKey:false,width:\"72px\"},{label:'Topup #',sortKey:false,width:\"72px\"}],accountList:[],accountHeader:{},show:\"active\",DetailList:[]};_this.toggle=function(tab){if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.getAccountData=function(api){var _this$state=_this.state,show=_this$state.show,accountHeader=_this$state.accountHeader;_this.props.getCommonApi(\"prepaidacclist/?cust_id=\".concat(_this.props.id).concat(api)).then(function(key){var data=key.data,header_data=key.header_data;var accountList=_this.state.accountList;accountList=data;accountHeader=header_data;_this.setState({accountList:accountList,accountHeader:accountHeader});});};_this.handleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(type){var show;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:show=_this.state.show;show=type;_context.next=4;return _this.setState({show:show});case 4:if(type===\"all\"){_this.getAccountData('&is_all=1');}else{_this.getAccountData('');}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleOpenDetail=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var activeTab;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:activeTab=_this.state.activeTab;activeTab='detail';_context2.next=4;return _this.setState({activeTab:activeTab});case 4:_this.getDetailList(data.id);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.getDetailList=function(id){_this.props.getCommonApi(\"prepaidacclist/\".concat(id)).then(function(key){var data=key.data,header_data=key.header_data;var _this$state2=_this.state,DetailList=_this$state2.DetailList,accountHeader=_this$state2.accountHeader;DetailList=data;accountHeader=header_data;_this.setState({DetailList:DetailList,accountHeader:accountHeader});});};_this.handleBack=function(){var activeTab=_this.state.activeTab;activeTab='';_this.setState({activeTab:activeTab,DetailList:[]});_this.getAccountData();};return _this;}_createClass(PrepaidAccountClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getAccountData('');}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,treatmentList=_this$state3.treatmentList,headerDetails=_this$state3.headerDetails,_this$state3$accountL=_this$state3.accountList,accountList=_this$state3$accountL===void 0?[]:_this$state3$accountL,show=_this$state3.show,_this$state3$accountH=_this$state3.accountHeader,accountHeader=_this$state3$accountH===void 0?{}:_this$state3$accountH,activeTab=_this$state3.activeTab,detailHeader=_this$state3.detailHeader,DetailList=_this$state3.DetailList;var balance_producttype=accountHeader.balance_producttype,balance_servicetype=accountHeader.balance_servicetype,balance_alltype=accountHeader.balance_alltype,totalprepaid_count=accountHeader.totalprepaid_count;return/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-account row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"},\"Total Prepaid Count\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"},totalprepaid_count),/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2\"},/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{checked:show===\"active\",onChange:function onChange(){return _this2.handleChange(\"active\");},type:\"radio\",name:\"radio1\"}),' ',\" Show active prepaid only\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{checked:show===\"all\",onChange:function onChange(){return _this2.handleChange(\"all\");},type:\"radio\",name:\"radio1\"}),' ',\" Show all prepaid\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},\"Balance of Product Type\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},\"$ \",balance_producttype),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Balance of Service Type\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"$ \",balance_servicetype),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Balance of All Types\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"$ \",balance_alltype))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},activeTab!=='detail'?/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination// pageMeta={pageMeta}\n// isEmpty={accountList.length === 0 ? true:false}\n},accountList&&accountList.length>0?accountList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.prepaid)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.pp_desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.last_update)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.type)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.exp_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.exp_status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.pp_total)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"view mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"view\",onClick:function onClick(){return _this2.handleOpenDetail(item);}}))));}):\"\"):/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:detailHeader,queryHandler:this.handlePagination},DetailList&&DetailList.length>0?DetailList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.prepaid_ref)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.transaction_ref)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.voucher)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.item_no)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.item_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.use_amt)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.topup_amt)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.topup_no)));}):\"\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 d-flex justify-center\"},activeTab==='detail'?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"back mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"Back\",onClick:function onClick(){return _this2.handleBack();}}):\"\",/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"print\"// mainbg={true}\n,className:\"col-12 fs-15 \",label:\"Print\"// outline={false}\n,onClick:function onClick(){return _this2.setState({isOpenEditDisc:false});}})));}}]);return PrepaidAccountClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var PrepaidAccount=connect(null,mapDispatchToProps)(PrepaidAccountClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/Accounts/prepaidAccount.js"],"names":["React","Component","NormalButton","TableWrapper","FormGroup","Label","Input","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","connect","bindActionCreators","PrepaidAccountClass","state","activeTab","isOpenTreatmentDone","isActiveTab","headerDetails","label","sortKey","width","detailHeader","accountList","accountHeader","show","DetailList","toggle","tab","setState","getAccountData","api","props","id","then","key","data","header_data","handleChange","type","handleOpenDetail","getDetailList","handleBack","treatmentList","balance_producttype","balance_servicetype","balance_alltype","totalprepaid_count","handlePagination","length","map","item","index","prepaid","pp_desc","last_update","sa_date","exp_date","exp_status","pp_total","prepaid_ref","transaction_ref","voucher","item_no","item_name","use_amt","topup_amt","balance","topup_no","isOpenEditDisc","mapDispatchToProps","dispatch","PrepaidAccount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport \"./style.scss\";\nimport { NormalButton, TableWrapper } from 'component/common';\nimport { FormGroup, Label, Input } from 'reactstrap';\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from \"redux\";\n\nexport class PrepaidAccountClass extends Component {\n  state = {\n    activeTab: '',\n    isOpenTreatmentDone: false,\n    isActiveTab: \"detail\",\n    headerDetails: [\n      { label: 'Prepaid #', sortKey: false, width: \"120px\" },\n      { label: 'Prepaid Description', width: \"242px\" },\n      { label: 'Last Update', sortKey: false, width: \"120px\" },\n      { label: 'Purchase Date', sortKey: false, width: \"180px\" },\n      { label: 'Type', sortKey: false, width: \"120px\" },\n      { label: 'Expiry Date', sortKey: false, width: \"120px\" },\n      { label: 'Expiry Status', sortKey: false, width: \"120px\" },\n      { label: 'Prepaid', sortKey: false, width: \"100px\" },\n      { label: '', sortKey: false, width: \"100px\" },\n    ],\n    detailHeader: [\n      { label: 'Prepaid Ref', sortKey: false, width: \"150px\" },\n      { label: 'Transaction Ref', sortKey: false, width: \"225px\" },\n      { label: 'Voucher #', width: \"100px\" },\n      { label: 'Item No', sortKey: false, width: \"70px\" },\n      { label: 'Item Name', sortKey: false, width: \"72px\" },\n      { label: 'Used Amt', sortKey: false, width: \"72px\" },\n      { label: 'Top up A', sortKey: false, width: \"72px\" },\n      { label: 'Balance', sortKey: false, width: \"72px\" },\n      { label: 'Topup #', sortKey: false, width: \"72px\" },\n    ],\n    accountList: [],\n    accountHeader: {},\n    show: \"active\",\n    DetailList: [],\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({\n        activeTab: tab\n      });\n    }\n  }\n\n  \ncomponentDidMount() {\n  this.getAccountData('');\n}\n\ngetAccountData = (api) => {\n  let { show, accountHeader } = this.state;\n  this.props.getCommonApi(`prepaidacclist/?cust_id=${this.props.id}${api}`).then((key) => {\n    let { data, header_data } = key;\n    let { accountList } = this.state;\n    accountList = data;\n    accountHeader = header_data;\n    this.setState({ accountList, accountHeader })\n})\n}\n\nhandleChange = async(type) => {\n  let { show } = this.state;\n  show = type\n  await this.setState({\n    show\n  })\n  if(type===\"all\"){\n   this.getAccountData('&is_all=1');\n  } else {\n    this.getAccountData('');\n  }\n}\n\nhandleOpenDetail = async(data) => {\n  let { activeTab } = this.state\n  activeTab = 'detail';\n  \n  await this.setState({\n    activeTab\n  })\n  this.getDetailList(data.id);\n}\n\ngetDetailList = (id) => {\n  this.props.getCommonApi(`prepaidacclist/${id}`).then((key) => {\n    let { data, header_data } = key;\n    let { DetailList, accountHeader } = this.state;\n    DetailList = data;\n    accountHeader = header_data;\n    this.setState({ DetailList, accountHeader })\n  })\n}\n\nhandleBack = () => {\n  let { activeTab } = this.state;\n  activeTab = '';\n  this.setState({\n    activeTab,\n    DetailList:[]\n  })\n  this.getAccountData();\n}\n\n\n  render() {\n    let { treatmentList, headerDetails, accountList=[], show, accountHeader={}, activeTab, detailHeader, DetailList } = this.state;\n    let { balance_producttype, balance_servicetype, balance_alltype, totalprepaid_count } = accountHeader;\n    return (\n\n      <div className=\"treatment-account row\">\n        <div className=\"col-6 mt-3 mb-4\">\n          <div className=\"row\">\n            <div className=\"col-5 mb-2\">Total Prepaid Count</div>\n    <div className=\"col-5 mb-2\">{totalprepaid_count}</div>\n            <div className=\"row m-0\">\n            <div className=\"col-12 mb-2\">\n              <FormGroup check>\n                <Label check>\n                  <Input checked={show===\"active\"} onChange={()=>this.handleChange(\"active\")} type=\"radio\" name=\"radio1\" />{' '} Show active prepaid only\n              </Label>\n              </FormGroup>\n            </div>\n            <div className=\"col-12\">\n              <FormGroup check>\n                <Label check>\n                  <Input checked={show===\"all\"} onChange={()=>this.handleChange(\"all\")} type=\"radio\" name=\"radio1\" />{' '} Show all prepaid\n              </Label>\n              </FormGroup>\n            </div>\n          </div>\n          </div>\n        </div>\n        <div className=\"col-6 mt-3 mb-4\">\n          <div className=\"row\">\n            <div className=\"col-6 mb-2\">Balance of Product Type</div>\n            <div className=\"col-6 mb-2\">$ {balance_producttype}</div>\n            \n            <div className=\"col-6\">Balance of Service Type</div>\n            <div className=\"col-6\">$ {balance_servicetype}</div>\n\n            <div className=\"col-6\">Balance of All Types</div>\n            <div className=\"col-6\">$ {balance_alltype}</div>\n          </div>\n        </div>\n        <div className=\"col-12\">\n\n          <div className=\"table\">\n          {\n              activeTab !== 'detail' ?\n            <TableWrapper\n              headerDetails={headerDetails}\n              queryHandler={this.handlePagination}\n            // pageMeta={pageMeta}\n            // isEmpty={accountList.length === 0 ? true:false}\n            >\n              {accountList && accountList.length > 0 ? accountList.map((item, index) => {\n\n                return (\n                  <tr key={index}>\n\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.prepaid}</div></td>\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.pp_desc}</div></td>\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.last_update}</div></td>\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.sa_date}</div></td>\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.type}</div></td>\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.exp_date}</div></td>\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.exp_status}</div></td>\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.pp_total}</div></td>\n                    <td>\n                          <div className=\"d-flex align-items-center justify-content-center\">\n                            <NormalButton\n                              buttonClass={\"view mr-3\"}\n                              mainbg={true}\n                              className=\"col-12 fs-15 \"\n                              label=\"view\"\n                              onClick={() => this.handleOpenDetail(item)}\n                            />\n                          </div>\n                        </td>\n                  </tr>\n                )\n              }) : \"\"\n              }\n\n            </TableWrapper>: <TableWrapper headerDetails={detailHeader} queryHandler={this.handlePagination}>\n                  {DetailList && DetailList.length > 0 ? DetailList.map((item, index) => {\n                    return (\n                      <tr key={index}>\n\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.prepaid_ref}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.transaction_ref}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.voucher}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.item_no}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.item_name}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.use_amt}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.topup_amt}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.balance}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{ item.topup_no}</div></td>\n                      </tr>\n                    )\n                  }) : \"\"\n                  }\n                </TableWrapper>\n            }\n          </div>\n        </div>\n        <div className=\"col-12 d-flex justify-center\">\n        {\n              activeTab === 'detail' ? <NormalButton\n            buttonClass={\"back mr-3\"}\n            mainbg={true}\n            className=\"col-12 fs-15 \"\n            label=\"Back\"\n            onClick={() => this.handleBack()}\n          />:\"\"\n        }\n          <NormalButton\n            buttonClass={\"print\"}\n            // mainbg={true}\n            className=\"col-12 fs-15 \"\n            label=\"Print\"\n            // outline={false}\n            onClick={() => this.setState({ isOpenEditDisc: false })}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n      getCommonApi,\n      updateForm,\n      commonCreateApi,\n      commonPatchApi,\n      commonDeleteApi\n  }, dispatch)\n}\n\nexport const PrepaidAccount = connect(null, mapDispatchToProps)(PrepaidAccountClass)"]},"metadata":{},"sourceType":"module"}