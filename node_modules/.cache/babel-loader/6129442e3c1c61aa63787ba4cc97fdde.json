{"ast":null,"code":"/**\r\n * DevExtreme (ui/diagram/ui.diagram.toolbar.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _toolbar = _interopRequireDefault(require(\"../toolbar\"));\n\nvar _context_menu = _interopRequireDefault(require(\"../context_menu\"));\n\nvar _diagram = _interopRequireDefault(require(\"./diagram.bar\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _uiDiagram = _interopRequireDefault(require(\"./ui.diagram.panel\"));\n\nvar _uiDiagram2 = _interopRequireDefault(require(\"./ui.diagram.menu_helper\"));\n\nvar _diagram2 = require(\"./diagram.importer\");\n\nrequire(\"../select_box\");\n\nrequire(\"../color_box\");\n\nrequire(\"../check_box\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar ACTIVE_FORMAT_CLASS = \"dx-format-active\";\nvar DIAGRAM_TOOLBAR_CLASS = \"dx-diagram-toolbar\";\nvar DIAGRAM_TOOLBAR_SEPARATOR_CLASS = \"dx-diagram-toolbar-separator\";\nvar DIAGRAM_TOOLBAR_MENU_SEPARATOR_CLASS = \"dx-diagram-toolbar-menu-separator\";\nvar DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS = \"dx-diagram-mobile-toolbar-color-box-opened\";\n\nvar DiagramToolbar = function (_DiagramPanel) {\n  _inherits(DiagramToolbar, _DiagramPanel);\n\n  var _super = _createSuper(DiagramToolbar);\n\n  function DiagramToolbar() {\n    _classCallCheck(this, DiagramToolbar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(DiagramToolbar, [{\n    key: \"_init\",\n    value: function () {\n      this._commands = [];\n      this._itemHelpers = {};\n      this._commandContextMenus = {};\n      this._contextMenuList = [];\n      this._valueConverters = {};\n      this.bar = new DiagramToolbarBar(this);\n\n      this._createOnInternalCommand();\n\n      this._createOnCustomCommand();\n\n      this._createOnSubMenuVisibilityChangingAction();\n\n      _get(_getPrototypeOf(DiagramToolbar.prototype), \"_init\", this).call(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function () {\n      _get(_getPrototypeOf(DiagramToolbar.prototype), \"_initMarkup\", this).call(this);\n\n      var isServerSide = !(0, _window.hasWindow)();\n\n      if (!this.option(\"skipAdjustSize\") && !isServerSide) {\n        this.$element().width(\"\");\n      }\n\n      this._commands = this._getCommands();\n      this._itemHelpers = {};\n      this._commandContextMenus = {};\n      this._contextMenuList = [];\n\n      var $toolbar = this._createMainElement();\n\n      this._renderToolbar($toolbar);\n\n      if (!this.option(\"skipAdjustSize\") && !isServerSide) {\n        var $toolbarContent = this.$element().find(\".dx-toolbar-before\");\n        this.$element().width($toolbarContent.width());\n      }\n    }\n  }, {\n    key: \"_createMainElement\",\n    value: function () {\n      return (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_TOOLBAR_CLASS).appendTo(this._$element);\n    }\n  }, {\n    key: \"_getCommands\",\n    value: function () {\n      return this.option(\"commands\") || [];\n    }\n  }, {\n    key: \"_renderToolbar\",\n    value: function ($toolbar) {\n      var beforeCommands = this._commands.filter(function (command) {\n        return [\"after\", \"center\"].indexOf(command.position) === -1;\n      });\n\n      var centerCommands = this._commands.filter(function (command) {\n        return \"center\" === command.position;\n      });\n\n      var afterCommands = this._commands.filter(function (command) {\n        return \"after\" === command.position;\n      });\n\n      var dataSource = [].concat(this._prepareToolbarItems(beforeCommands, \"before\", this._executeCommand)).concat(this._prepareToolbarItems(centerCommands, \"center\", this._executeCommand)).concat(this._prepareToolbarItems(afterCommands, \"after\", this._executeCommand));\n      this._toolbarInstance = this._createComponent($toolbar, _toolbar.default, {\n        dataSource: dataSource\n      });\n    }\n  }, {\n    key: \"_prepareToolbarItems\",\n    value: function (items, location, actionHandler) {\n      var _this = this;\n\n      return items.map(function (item) {\n        return (0, _extend.extend)(true, {\n          location: location,\n          locateInMenu: _this.option(\"locateInMenu\")\n        }, _this._createItem(item, location, actionHandler), _this._createItemOptions(item), _this._createItemActionOptions(item, actionHandler));\n      });\n    }\n  }, {\n    key: \"_createItem\",\n    value: function (item, location, actionHandler) {\n      var _this2 = this;\n\n      if (item.getCommandValue || item.getEditorValue || item.getEditorDisplayValue) {\n        this._valueConverters[item.command] = {\n          getCommandValue: item.getCommandValue,\n          getEditorValue: item.getEditorValue,\n          getEditorDisplayValue: item.getEditorDisplayValue\n        };\n      }\n\n      if (\"separator\" === item.widget) {\n        return {\n          template: function (data, index, element) {\n            (0, _renderer.default)(element).addClass(DIAGRAM_TOOLBAR_SEPARATOR_CLASS);\n          },\n          menuItemTemplate: function (data, index, element) {\n            (0, _renderer.default)(element).addClass(DIAGRAM_TOOLBAR_MENU_SEPARATOR_CLASS);\n          }\n        };\n      }\n\n      return {\n        widget: item.widget || \"dxButton\",\n        cssClass: item.cssClass,\n        options: {\n          stylingMode: this.option(\"buttonStylingMode\"),\n          type: this.option(\"buttonType\"),\n          text: item.text,\n          hint: item.hint,\n          icon: item.icon || item.iconUnchecked || item.iconChecked,\n          iconChecked: item.iconChecked,\n          iconUnchecked: item.iconUnchecked,\n          onInitialized: function (e) {\n            return _this2._onItemInitialized(e.component, item);\n          },\n          onContentReady: function (e) {\n            return _this2._onItemContentReady(e.component, item, actionHandler);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"_createItemOptions\",\n    value: function (_ref) {\n      var widget = _ref.widget,\n          command = _ref.command,\n          items = _ref.items,\n          valueExpr = _ref.valueExpr,\n          displayExpr = _ref.displayExpr,\n          showText = _ref.showText,\n          hint = _ref.hint,\n          icon = _ref.icon;\n\n      if (\"dxSelectBox\" === widget) {\n        return this._createSelectBoxItemOptions(command, hint, items, valueExpr, displayExpr);\n      } else {\n        if (\"dxTextBox\" === widget) {\n          return this._createTextBoxItemOptions(command, hint);\n        } else {\n          if (\"dxColorBox\" === widget) {\n            return this._createColorBoxItemOptions(command, hint, icon);\n          } else {\n            if (!widget || \"dxButton\" === widget) {\n              return {\n                showText: showText || \"inMenu\"\n              };\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_createSelectBoxItemOptions\",\n    value: function (command, hint, items, valueExpr, displayExpr) {\n      var options = this._createTextEditorItemOptions(hint);\n\n      options = (0, _extend.extend)(true, options, {\n        options: {\n          dataSource: items,\n          displayExpr: displayExpr || \"text\",\n          valueExpr: valueExpr || \"value\",\n          dropDownOptions: {\n            container: this.option(\"container\")\n          }\n        }\n      });\n      var isSelectButton = items && items.every(function (i) {\n        return void 0 !== i.icon;\n      });\n\n      if (isSelectButton) {\n        options = (0, _extend.extend)(true, options, {\n          options: {\n            fieldTemplate: function (data, container) {\n              (0, _renderer.default)(\"<i>\").addClass(data && data.icon).appendTo(container);\n              (0, _renderer.default)(\"<div>\").dxTextBox({\n                readOnly: true,\n                stylingMode: \"outlined\"\n              }).appendTo(container);\n            },\n            itemTemplate: function (data, index, container) {\n              (0, _renderer.default)(container).attr(\"title\", data.hint);\n              return '<i class=\"'.concat(data.icon, '\"></i>');\n            }\n          }\n        });\n      }\n\n      return options;\n    }\n  }, {\n    key: \"_createTextBoxItemOptions\",\n    value: function (command, hint) {\n      var _this3 = this;\n\n      var options = this._createTextEditorItemOptions(hint);\n\n      options = (0, _extend.extend)(true, options, {\n        options: {\n          readOnly: true,\n          focusStateEnabled: false,\n          hoverStateEnabled: false,\n          buttons: [{\n            name: \"dropDown\",\n            location: \"after\",\n            options: {\n              icon: \"spindown\",\n              disabled: false,\n              stylingMode: \"text\",\n              onClick: function (e) {\n                var contextMenu = _this3._commandContextMenus[command];\n\n                if (contextMenu) {\n                  _this3._toggleContextMenu(contextMenu);\n                }\n              }\n            }\n          }]\n        }\n      });\n      return options;\n    }\n  }, {\n    key: \"_createColorBoxItemOptions\",\n    value: function (command, hint, icon) {\n      var _this4 = this;\n\n      var options = this._createTextEditorItemOptions(hint);\n\n      if (icon) {\n        options = (0, _extend.extend)(true, options, {\n          options: {\n            openOnFieldClick: true,\n            fieldTemplate: function (data, container) {\n              (0, _renderer.default)(\"<i>\").addClass(icon).css(\"borderBottomColor\", data).appendTo(container);\n              (0, _renderer.default)(\"<div>\").dxTextBox({\n                readOnly: true,\n                stylingMode: \"outlined\"\n              }).appendTo(container);\n            }\n          }\n        });\n      }\n\n      options = (0, _extend.extend)(true, options, {\n        options: {\n          dropDownOptions: {\n            container: this.option(\"container\")\n          },\n          onOpened: function () {\n            if (_this4.option(\"isMobileView\")) {\n              (0, _renderer.default)(\"body\").addClass(DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS);\n            }\n          },\n          onClosed: function () {\n            (0, _renderer.default)(\"body\").removeClass(DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS);\n          }\n        }\n      });\n      return options;\n    }\n  }, {\n    key: \"_createTextEditorItemOptions\",\n    value: function (hint) {\n      return {\n        options: {\n          stylingMode: this.option(\"editorStylingMode\"),\n          hint: hint\n        }\n      };\n    }\n  }, {\n    key: \"_createItemActionOptions\",\n    value: function (item, handler) {\n      var _this5 = this;\n\n      switch (item.widget) {\n        case \"dxSelectBox\":\n        case \"dxColorBox\":\n        case \"dxCheckBox\":\n          return {\n            options: {\n              onValueChanged: function (e) {\n                var parameter = _uiDiagram2.default.getItemCommandParameter(_this5, item, e.component.option(\"value\"));\n\n                handler.call(_this5, item.command, item.name, parameter);\n              }\n            }\n          };\n\n        case \"dxTextBox\":\n          return {};\n\n        default:\n          return {\n            options: {\n              onClick: function (e) {\n                if (!item.items) {\n                  var parameter = _uiDiagram2.default.getItemCommandParameter(_this5, item);\n\n                  handler.call(_this5, item.command, item.name, parameter);\n                } else {\n                  var contextMenu = e.component._contextMenu;\n\n                  if (contextMenu) {\n                    _this5._toggleContextMenu(contextMenu);\n                  }\n                }\n              }\n            }\n          };\n      }\n    }\n  }, {\n    key: \"_toggleContextMenu\",\n    value: function (contextMenu) {\n      this._contextMenuList.forEach(function (cm) {\n        if (contextMenu !== cm) {\n          cm.hide();\n        }\n      });\n\n      contextMenu.toggle();\n    }\n  }, {\n    key: \"_onItemInitialized\",\n    value: function (widget, item) {\n      this._addItemHelper(item.command, new DiagramToolbarItemHelper(widget));\n    }\n  }, {\n    key: \"_onItemContentReady\",\n    value: function (widget, item, actionHandler) {\n      var _this6 = this;\n\n      var _getDiagram = (0, _diagram2.getDiagram)(),\n          Browser = _getDiagram.Browser;\n\n      if ((\"dxButton\" === widget.NAME || \"dxTextBox\" === widget.NAME) && item.items) {\n        var $menuContainer = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\n        widget._contextMenu = this._createComponent($menuContainer, _context_menu.default, {\n          items: item.items,\n          target: widget.$element(),\n          cssClass: _uiDiagram2.default.getContextMenuCssClass(),\n          showEvent: \"\",\n          closeOnOutsideClick: !Browser.TouchUI,\n          focusStateEnabled: false,\n          position: {\n            at: \"left bottom\"\n          },\n          itemTemplate: function (itemData, itemIndex, itemElement) {\n            _uiDiagram2.default.getContextMenuItemTemplate(this, itemData, itemIndex, itemElement);\n          },\n          onItemClick: function (_ref2) {\n            var component = _ref2.component,\n                itemData = _ref2.itemData;\n\n            _uiDiagram2.default.onContextMenuItemClick(_this6, itemData, actionHandler.bind(_this6));\n\n            if (!itemData.items || !itemData.items.length) {\n              component.hide();\n            }\n          },\n          onShowing: function (e) {\n            if (_this6._showingSubMenu) {\n              return;\n            }\n\n            _this6._showingSubMenu = e.component;\n\n            _this6._onSubMenuVisibilityChangingAction({\n              visible: true,\n              component: _this6\n            });\n\n            e.component.option(\"items\", e.component.option(\"items\"));\n            delete _this6._showingSubMenu;\n          },\n          onInitialized: function (_ref3) {\n            var component = _ref3.component;\n            return _this6._onContextMenuInitialized(component, item, widget);\n          },\n          onDisposing: function (_ref4) {\n            var component = _ref4.component;\n            return _this6._onContextMenuDisposing(component, item);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_onContextMenuInitialized\",\n    value: function (widget, item, rootWidget) {\n      this._contextMenuList.push(widget);\n\n      if (item.command) {\n        this._commandContextMenus[item.command] = widget;\n      }\n\n      this._addContextMenuHelper(item, widget, [], rootWidget);\n    }\n  }, {\n    key: \"_addItemHelper\",\n    value: function (command, helper) {\n      if (void 0 !== command) {\n        if (this._itemHelpers[command]) {\n          throw new Error(\"Toolbar cannot contain duplicated commands.\");\n        }\n\n        this._itemHelpers[command] = helper;\n      }\n    }\n  }, {\n    key: \"_addContextMenuHelper\",\n    value: function (item, widget, indexPath, rootWidget) {\n      var _this7 = this;\n\n      if (item.items) {\n        item.items.forEach(function (subItem, index) {\n          var itemIndexPath = indexPath.concat(index);\n\n          _this7._addItemHelper(subItem.command, new DiagramToolbarSubItemHelper(widget, itemIndexPath, subItem.command, rootWidget));\n\n          _this7._addContextMenuHelper(subItem, widget, itemIndexPath, rootWidget);\n        });\n      }\n    }\n  }, {\n    key: \"_onContextMenuDisposing\",\n    value: function (widget, item) {\n      this._contextMenuList.splice(this._contextMenuList.indexOf(widget), 1);\n\n      delete this._commandContextMenus[item.command];\n    }\n  }, {\n    key: \"_executeCommand\",\n    value: function (command, name, value) {\n      if (this._updateLocked) {\n        return;\n      }\n\n      if (\"number\" === typeof command) {\n        var valueConverter = this._valueConverters[command];\n\n        if (valueConverter && valueConverter.getCommandValue) {\n          value = valueConverter.getCommandValue(value);\n        }\n\n        this.bar.raiseBarCommandExecuted(command, value);\n      } else {\n        if (\"string\" === typeof command) {\n          this._onInternalCommandAction({\n            command: command\n          });\n        }\n      }\n\n      if (void 0 !== name) {\n        this._onCustomCommandAction({\n          name: name\n        });\n      }\n    }\n  }, {\n    key: \"_createOnInternalCommand\",\n    value: function () {\n      this._onInternalCommandAction = this._createActionByOption(\"onInternalCommand\");\n    }\n  }, {\n    key: \"_createOnCustomCommand\",\n    value: function () {\n      this._onCustomCommandAction = this._createActionByOption(\"onCustomCommand\");\n    }\n  }, {\n    key: \"_setItemEnabled\",\n    value: function (command, enabled) {\n      if (command in this._itemHelpers) {\n        var helper = this._itemHelpers[command];\n\n        if (helper.canUpdate(this._showingSubMenu)) {\n          helper.setEnabled(enabled);\n        }\n      }\n    }\n  }, {\n    key: \"_setEnabled\",\n    value: function (enabled) {\n      this._toolbarInstance.option(\"disabled\", !enabled);\n\n      this._contextMenuList.forEach(function (contextMenu) {\n        contextMenu.option(\"disabled\", !enabled);\n      });\n    }\n  }, {\n    key: \"_setItemValue\",\n    value: function (command, value) {\n      try {\n        this._updateLocked = true;\n\n        if (command in this._itemHelpers) {\n          var helper = this._itemHelpers[command];\n\n          if (helper.canUpdate(this._showingSubMenu)) {\n            var valueConverter = this._valueConverters[command];\n\n            if (valueConverter && valueConverter.getEditorValue) {\n              value = valueConverter.getEditorValue(value);\n            }\n\n            var displayValue;\n\n            if (valueConverter && valueConverter.getEditorDisplayValue) {\n              displayValue = valueConverter.getEditorDisplayValue(value);\n            }\n\n            var contextMenu = this._commandContextMenus[command];\n            helper.setValue(value, displayValue, contextMenu, contextMenu && command);\n          }\n        }\n      } finally {\n        this._updateLocked = false;\n      }\n    }\n  }, {\n    key: \"_setItemSubItems\",\n    value: function (command, items) {\n      this._updateLocked = true;\n\n      if (command in this._itemHelpers) {\n        var helper = this._itemHelpers[command];\n\n        if (helper.canUpdate(this._showingSubMenu)) {\n          var contextMenu = this._commandContextMenus[command];\n          helper.setItems(items, contextMenu, contextMenu && command);\n        }\n      }\n\n      this._updateLocked = false;\n    }\n  }, {\n    key: \"_createOnSubMenuVisibilityChangingAction\",\n    value: function () {\n      this._onSubMenuVisibilityChangingAction = this._createActionByOption(\"onSubMenuVisibilityChanging\");\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      switch (args.name) {\n        case \"isMobileView\":\n          (0, _renderer.default)(\"body\").removeClass(DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS);\n\n          this._invalidate();\n\n          break;\n\n        case \"onSubMenuVisibilityChanging\":\n          this._createOnSubMenuVisibilityChangingAction();\n\n          break;\n\n        case \"onInternalCommand\":\n          this._createOnInternalCommand();\n\n          break;\n\n        case \"onCustomCommand\":\n          this._createOnCustomCommand();\n\n          break;\n\n        case \"container\":\n        case \"commands\":\n          this._invalidate();\n\n          break;\n\n        case \"export\":\n          break;\n\n        default:\n          _get(_getPrototypeOf(DiagramToolbar.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function () {\n      return (0, _extend.extend)(_get(_getPrototypeOf(DiagramToolbar.prototype), \"_getDefaultOptions\", this).call(this), {\n        isMobileView: false,\n        \"export\": {\n          fileName: \"Diagram\",\n          proxyUrl: void 0\n        },\n        locateInMenu: \"auto\",\n        buttonStylingMode: \"text\",\n        buttonType: \"normal\",\n        editorStylingMode: \"filled\",\n        skipAdjustSize: false\n      });\n    }\n  }, {\n    key: \"setCommandChecked\",\n    value: function (command, checked) {\n      this._setItemValue(command, checked);\n    }\n  }, {\n    key: \"setCommandEnabled\",\n    value: function (command, enabled) {\n      this._setItemEnabled(command, enabled);\n    }\n  }]);\n\n  return DiagramToolbar;\n}(_uiDiagram.default);\n\nvar DiagramToolbarBar = function (_DiagramBar) {\n  _inherits(DiagramToolbarBar, _DiagramBar);\n\n  var _super2 = _createSuper(DiagramToolbarBar);\n\n  function DiagramToolbarBar() {\n    _classCallCheck(this, DiagramToolbarBar);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(DiagramToolbarBar, [{\n    key: \"getCommandKeys\",\n    value: function () {\n      return this._getKeys(this._owner._commands);\n    }\n  }, {\n    key: \"setItemValue\",\n    value: function (key, value) {\n      this._owner._setItemValue(key, value);\n    }\n  }, {\n    key: \"setItemEnabled\",\n    value: function (key, enabled) {\n      this._owner._setItemEnabled(key, enabled);\n    }\n  }, {\n    key: \"setEnabled\",\n    value: function (enabled) {\n      this._owner._setEnabled(enabled);\n    }\n  }, {\n    key: \"setItemSubItems\",\n    value: function (key, items) {\n      this._owner._setItemSubItems(key, items);\n    }\n  }]);\n\n  return DiagramToolbarBar;\n}(_diagram.default);\n\nvar DiagramToolbarItemHelper = function () {\n  function DiagramToolbarItemHelper(widget) {\n    _classCallCheck(this, DiagramToolbarItemHelper);\n\n    this._widget = widget;\n  }\n\n  _createClass(DiagramToolbarItemHelper, [{\n    key: \"canUpdate\",\n    value: function (showingSubMenu) {\n      return void 0 === showingSubMenu;\n    }\n  }, {\n    key: \"setEnabled\",\n    value: function (enabled) {\n      this._widget.option(\"disabled\", !enabled);\n    }\n  }, {\n    key: \"setValue\",\n    value: function (value, displayValue, contextMenu, rootCommandKey) {\n      if (\"value\" in this._widget.option()) {\n        this._updateEditorValue(value, displayValue);\n      } else {\n        if (void 0 !== value) {\n          this._updateButtonValue(value);\n        }\n      }\n\n      if (contextMenu) {\n        this._updateContextMenuItemValue(contextMenu, \"\", rootCommandKey, value);\n      }\n    }\n  }, {\n    key: \"setItems\",\n    value: function (items, contextMenu, rootCommandKey) {\n      if (contextMenu) {\n        this._updateContextMenuItems(contextMenu, \"\", rootCommandKey, items);\n      } else {\n        this._updateEditorItems(items);\n      }\n    }\n  }, {\n    key: \"_updateContextMenuItems\",\n    value: function (contextMenu, itemOptionText, rootCommandKey, items) {\n      _uiDiagram2.default.updateContextMenuItems(contextMenu, itemOptionText, rootCommandKey, items);\n    }\n  }, {\n    key: \"_updateEditorItems\",\n    value: function (items) {\n      if (\"items\" in this._widget.option()) {\n        this._widget.option(\"items\", items.map(function (item) {\n          return {\n            value: _uiDiagram2.default.getItemValue(item),\n            text: item.text\n          };\n        }));\n      }\n    }\n  }, {\n    key: \"_updateEditorValue\",\n    value: function (value, displayValue) {\n      this._widget.option(\"value\", value);\n\n      if (!this._widget.option(\"selectedItem\") && displayValue) {\n        this._widget.option(\"value\", displayValue);\n      }\n    }\n  }, {\n    key: \"_updateButtonValue\",\n    value: function (value) {\n      if (this._widget.option(\"iconChecked\") && this._widget.option(\"iconUnchecked\")) {\n        this._widget.option(\"icon\", value ? this._widget.option(\"iconChecked\") : this._widget.option(\"iconUnchecked\"));\n      } else {\n        this._widget.$element().toggleClass(ACTIVE_FORMAT_CLASS, value);\n      }\n    }\n  }, {\n    key: \"_updateContextMenuItemValue\",\n    value: function (contextMenu, itemOptionText, rootCommandKey, value) {\n      _uiDiagram2.default.updateContextMenuItemValue(contextMenu, itemOptionText, rootCommandKey, value);\n    }\n  }]);\n\n  return DiagramToolbarItemHelper;\n}();\n\nvar DiagramToolbarSubItemHelper = function (_DiagramToolbarItemHe) {\n  _inherits(DiagramToolbarSubItemHelper, _DiagramToolbarItemHe);\n\n  var _super3 = _createSuper(DiagramToolbarSubItemHelper);\n\n  function DiagramToolbarSubItemHelper(widget, indexPath, rootCommandKey, rootWidget) {\n    var _this8;\n\n    _classCallCheck(this, DiagramToolbarSubItemHelper);\n\n    _this8 = _super3.call(this, widget);\n    _this8._indexPath = indexPath;\n    _this8._rootCommandKey = rootCommandKey;\n    _this8._rootWidget = rootWidget;\n    return _this8;\n  }\n\n  _createClass(DiagramToolbarSubItemHelper, [{\n    key: \"canUpdate\",\n    value: function (showingSubMenu) {\n      return _get(_getPrototypeOf(DiagramToolbarSubItemHelper.prototype), \"canUpdate\", this).call(this, showingSubMenu) || showingSubMenu === this._widget;\n    }\n  }, {\n    key: \"setEnabled\",\n    value: function (enabled) {\n      this._widget.option(this._getItemOptionText() + \"disabled\", !enabled);\n\n      var rootEnabled = this._hasEnabledCommandItems(this._widget.option(\"items\"));\n\n      this._rootWidget.option(\"disabled\", !rootEnabled);\n    }\n  }, {\n    key: \"_hasEnabledCommandItems\",\n    value: function (items) {\n      var _this9 = this;\n\n      if (items) {\n        return items.some(function (item) {\n          return void 0 !== item.command && !item.disabled || _this9._hasEnabledCommandItems(item.items);\n        });\n      }\n\n      return false;\n    }\n  }, {\n    key: \"setValue\",\n    value: function (value) {\n      this._updateContextMenuItemValue(this._widget, this._getItemOptionText(), this._rootCommandKey, value);\n    }\n  }, {\n    key: \"setItems\",\n    value: function (items) {\n      this._updateContextMenuItems(this._widget, this._getItemOptionText(), this._rootCommandKey, items);\n    }\n  }, {\n    key: \"_getItemOptionText\",\n    value: function () {\n      return _uiDiagram2.default.getItemOptionText(this._widget, this._indexPath);\n    }\n  }]);\n\n  return DiagramToolbarSubItemHelper;\n}(DiagramToolbarItemHelper);\n\nvar _default = DiagramToolbar;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/diagram/ui.diagram.toolbar.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_renderer","_interopRequireDefault","require","_toolbar","_context_menu","_diagram","_extend","_window","_uiDiagram","_uiDiagram2","_diagram2","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","value","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","ACTIVE_FORMAT_CLASS","DIAGRAM_TOOLBAR_CLASS","DIAGRAM_TOOLBAR_SEPARATOR_CLASS","DIAGRAM_TOOLBAR_MENU_SEPARATOR_CLASS","DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS","DiagramToolbar","_DiagramPanel","_super","_commands","_itemHelpers","_commandContextMenus","_contextMenuList","_valueConverters","bar","DiagramToolbarBar","_createOnInternalCommand","_createOnCustomCommand","_createOnSubMenuVisibilityChangingAction","isServerSide","hasWindow","option","$element","width","_getCommands","$toolbar","_createMainElement","_renderToolbar","$toolbarContent","find","addClass","appendTo","_$element","beforeCommands","filter","command","indexOf","position","centerCommands","afterCommands","dataSource","concat","_prepareToolbarItems","_executeCommand","_toolbarInstance","_createComponent","items","location","actionHandler","_this","map","item","extend","locateInMenu","_createItem","_createItemOptions","_createItemActionOptions","_this2","getCommandValue","getEditorValue","getEditorDisplayValue","widget","template","data","index","element","menuItemTemplate","cssClass","options","stylingMode","type","text","hint","icon","iconUnchecked","iconChecked","onInitialized","_onItemInitialized","component","onContentReady","_onItemContentReady","_ref","valueExpr","displayExpr","showText","_createSelectBoxItemOptions","_createTextBoxItemOptions","_createColorBoxItemOptions","_createTextEditorItemOptions","dropDownOptions","container","isSelectButton","every","fieldTemplate","dxTextBox","readOnly","itemTemplate","attr","_this3","focusStateEnabled","hoverStateEnabled","buttons","name","disabled","onClick","contextMenu","_toggleContextMenu","_this4","openOnFieldClick","css","onOpened","onClosed","removeClass","handler","_this5","onValueChanged","parameter","getItemCommandParameter","_contextMenu","forEach","cm","hide","toggle","_addItemHelper","DiagramToolbarItemHelper","_this6","_getDiagram","getDiagram","Browser","NAME","$menuContainer","getContextMenuCssClass","showEvent","closeOnOutsideClick","TouchUI","at","itemData","itemIndex","itemElement","getContextMenuItemTemplate","onItemClick","_ref2","onContextMenuItemClick","bind","onShowing","_showingSubMenu","_onSubMenuVisibilityChangingAction","visible","_ref3","_onContextMenuInitialized","onDisposing","_ref4","_onContextMenuDisposing","rootWidget","push","_addContextMenuHelper","helper","Error","indexPath","_this7","subItem","itemIndexPath","DiagramToolbarSubItemHelper","splice","_updateLocked","valueConverter","raiseBarCommandExecuted","_onInternalCommandAction","_onCustomCommandAction","_createActionByOption","enabled","canUpdate","setEnabled","displayValue","setValue","setItems","args","_invalidate","isMobileView","fileName","proxyUrl","buttonStylingMode","buttonType","editorStylingMode","skipAdjustSize","checked","_setItemValue","_setItemEnabled","_DiagramBar","_super2","_getKeys","_owner","_setEnabled","_setItemSubItems","_widget","showingSubMenu","rootCommandKey","_updateEditorValue","_updateButtonValue","_updateContextMenuItemValue","_updateContextMenuItems","_updateEditorItems","itemOptionText","updateContextMenuItems","getItemValue","toggleClass","updateContextMenuItemValue","_DiagramToolbarItemHe","_super3","_this8","_indexPath","_rootCommandKey","_rootWidget","_getItemOptionText","rootEnabled","_hasEnabledCommandItems","_this9","some","getItemOptionText","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/diagram/ui.diagram.toolbar.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _toolbar = _interopRequireDefault(require(\"../toolbar\"));\r\nvar _context_menu = _interopRequireDefault(require(\"../context_menu\"));\r\nvar _diagram = _interopRequireDefault(require(\"./diagram.bar\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _uiDiagram = _interopRequireDefault(require(\"./ui.diagram.panel\"));\r\nvar _uiDiagram2 = _interopRequireDefault(require(\"./ui.diagram.menu_helper\"));\r\nvar _diagram2 = require(\"./diagram.importer\");\r\nrequire(\"../select_box\");\r\nrequire(\"../color_box\");\r\nrequire(\"../check_box\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar ACTIVE_FORMAT_CLASS = \"dx-format-active\";\r\nvar DIAGRAM_TOOLBAR_CLASS = \"dx-diagram-toolbar\";\r\nvar DIAGRAM_TOOLBAR_SEPARATOR_CLASS = \"dx-diagram-toolbar-separator\";\r\nvar DIAGRAM_TOOLBAR_MENU_SEPARATOR_CLASS = \"dx-diagram-toolbar-menu-separator\";\r\nvar DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS = \"dx-diagram-mobile-toolbar-color-box-opened\";\r\nvar DiagramToolbar = function(_DiagramPanel) {\r\n    _inherits(DiagramToolbar, _DiagramPanel);\r\n    var _super = _createSuper(DiagramToolbar);\r\n\r\n    function DiagramToolbar() {\r\n        _classCallCheck(this, DiagramToolbar);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(DiagramToolbar, [{\r\n        key: \"_init\",\r\n        value: function() {\r\n            this._commands = [];\r\n            this._itemHelpers = {};\r\n            this._commandContextMenus = {};\r\n            this._contextMenuList = [];\r\n            this._valueConverters = {};\r\n            this.bar = new DiagramToolbarBar(this);\r\n            this._createOnInternalCommand();\r\n            this._createOnCustomCommand();\r\n            this._createOnSubMenuVisibilityChangingAction();\r\n            _get(_getPrototypeOf(DiagramToolbar.prototype), \"_init\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(DiagramToolbar.prototype), \"_initMarkup\", this).call(this);\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            if (!this.option(\"skipAdjustSize\") && !isServerSide) {\r\n                this.$element().width(\"\")\r\n            }\r\n            this._commands = this._getCommands();\r\n            this._itemHelpers = {};\r\n            this._commandContextMenus = {};\r\n            this._contextMenuList = [];\r\n            var $toolbar = this._createMainElement();\r\n            this._renderToolbar($toolbar);\r\n            if (!this.option(\"skipAdjustSize\") && !isServerSide) {\r\n                var $toolbarContent = this.$element().find(\".dx-toolbar-before\");\r\n                this.$element().width($toolbarContent.width())\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createMainElement\",\r\n        value: function() {\r\n            return (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_TOOLBAR_CLASS).appendTo(this._$element)\r\n        }\r\n    }, {\r\n        key: \"_getCommands\",\r\n        value: function() {\r\n            return this.option(\"commands\") || []\r\n        }\r\n    }, {\r\n        key: \"_renderToolbar\",\r\n        value: function($toolbar) {\r\n            var beforeCommands = this._commands.filter(function(command) {\r\n                return [\"after\", \"center\"].indexOf(command.position) === -1\r\n            });\r\n            var centerCommands = this._commands.filter(function(command) {\r\n                return \"center\" === command.position\r\n            });\r\n            var afterCommands = this._commands.filter(function(command) {\r\n                return \"after\" === command.position\r\n            });\r\n            var dataSource = [].concat(this._prepareToolbarItems(beforeCommands, \"before\", this._executeCommand)).concat(this._prepareToolbarItems(centerCommands, \"center\", this._executeCommand)).concat(this._prepareToolbarItems(afterCommands, \"after\", this._executeCommand));\r\n            this._toolbarInstance = this._createComponent($toolbar, _toolbar.default, {\r\n                dataSource: dataSource\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_prepareToolbarItems\",\r\n        value: function(items, location, actionHandler) {\r\n            var _this = this;\r\n            return items.map(function(item) {\r\n                return (0, _extend.extend)(true, {\r\n                    location: location,\r\n                    locateInMenu: _this.option(\"locateInMenu\")\r\n                }, _this._createItem(item, location, actionHandler), _this._createItemOptions(item), _this._createItemActionOptions(item, actionHandler))\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createItem\",\r\n        value: function(item, location, actionHandler) {\r\n            var _this2 = this;\r\n            if (item.getCommandValue || item.getEditorValue || item.getEditorDisplayValue) {\r\n                this._valueConverters[item.command] = {\r\n                    getCommandValue: item.getCommandValue,\r\n                    getEditorValue: item.getEditorValue,\r\n                    getEditorDisplayValue: item.getEditorDisplayValue\r\n                }\r\n            }\r\n            if (\"separator\" === item.widget) {\r\n                return {\r\n                    template: function(data, index, element) {\r\n                        (0, _renderer.default)(element).addClass(DIAGRAM_TOOLBAR_SEPARATOR_CLASS)\r\n                    },\r\n                    menuItemTemplate: function(data, index, element) {\r\n                        (0, _renderer.default)(element).addClass(DIAGRAM_TOOLBAR_MENU_SEPARATOR_CLASS)\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                widget: item.widget || \"dxButton\",\r\n                cssClass: item.cssClass,\r\n                options: {\r\n                    stylingMode: this.option(\"buttonStylingMode\"),\r\n                    type: this.option(\"buttonType\"),\r\n                    text: item.text,\r\n                    hint: item.hint,\r\n                    icon: item.icon || item.iconUnchecked || item.iconChecked,\r\n                    iconChecked: item.iconChecked,\r\n                    iconUnchecked: item.iconUnchecked,\r\n                    onInitialized: function(e) {\r\n                        return _this2._onItemInitialized(e.component, item)\r\n                    },\r\n                    onContentReady: function(e) {\r\n                        return _this2._onItemContentReady(e.component, item, actionHandler)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createItemOptions\",\r\n        value: function(_ref) {\r\n            var widget = _ref.widget,\r\n                command = _ref.command,\r\n                items = _ref.items,\r\n                valueExpr = _ref.valueExpr,\r\n                displayExpr = _ref.displayExpr,\r\n                showText = _ref.showText,\r\n                hint = _ref.hint,\r\n                icon = _ref.icon;\r\n            if (\"dxSelectBox\" === widget) {\r\n                return this._createSelectBoxItemOptions(command, hint, items, valueExpr, displayExpr)\r\n            } else {\r\n                if (\"dxTextBox\" === widget) {\r\n                    return this._createTextBoxItemOptions(command, hint)\r\n                } else {\r\n                    if (\"dxColorBox\" === widget) {\r\n                        return this._createColorBoxItemOptions(command, hint, icon)\r\n                    } else {\r\n                        if (!widget || \"dxButton\" === widget) {\r\n                            return {\r\n                                showText: showText || \"inMenu\"\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createSelectBoxItemOptions\",\r\n        value: function(command, hint, items, valueExpr, displayExpr) {\r\n            var options = this._createTextEditorItemOptions(hint);\r\n            options = (0, _extend.extend)(true, options, {\r\n                options: {\r\n                    dataSource: items,\r\n                    displayExpr: displayExpr || \"text\",\r\n                    valueExpr: valueExpr || \"value\",\r\n                    dropDownOptions: {\r\n                        container: this.option(\"container\")\r\n                    }\r\n                }\r\n            });\r\n            var isSelectButton = items && items.every(function(i) {\r\n                return void 0 !== i.icon\r\n            });\r\n            if (isSelectButton) {\r\n                options = (0, _extend.extend)(true, options, {\r\n                    options: {\r\n                        fieldTemplate: function(data, container) {\r\n                            (0, _renderer.default)(\"<i>\").addClass(data && data.icon).appendTo(container);\r\n                            (0, _renderer.default)(\"<div>\").dxTextBox({\r\n                                readOnly: true,\r\n                                stylingMode: \"outlined\"\r\n                            }).appendTo(container)\r\n                        },\r\n                        itemTemplate: function(data, index, container) {\r\n                            (0, _renderer.default)(container).attr(\"title\", data.hint);\r\n                            return '<i class=\"'.concat(data.icon, '\"></i>')\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n            return options\r\n        }\r\n    }, {\r\n        key: \"_createTextBoxItemOptions\",\r\n        value: function(command, hint) {\r\n            var _this3 = this;\r\n            var options = this._createTextEditorItemOptions(hint);\r\n            options = (0, _extend.extend)(true, options, {\r\n                options: {\r\n                    readOnly: true,\r\n                    focusStateEnabled: false,\r\n                    hoverStateEnabled: false,\r\n                    buttons: [{\r\n                        name: \"dropDown\",\r\n                        location: \"after\",\r\n                        options: {\r\n                            icon: \"spindown\",\r\n                            disabled: false,\r\n                            stylingMode: \"text\",\r\n                            onClick: function(e) {\r\n                                var contextMenu = _this3._commandContextMenus[command];\r\n                                if (contextMenu) {\r\n                                    _this3._toggleContextMenu(contextMenu)\r\n                                }\r\n                            }\r\n                        }\r\n                    }]\r\n                }\r\n            });\r\n            return options\r\n        }\r\n    }, {\r\n        key: \"_createColorBoxItemOptions\",\r\n        value: function(command, hint, icon) {\r\n            var _this4 = this;\r\n            var options = this._createTextEditorItemOptions(hint);\r\n            if (icon) {\r\n                options = (0, _extend.extend)(true, options, {\r\n                    options: {\r\n                        openOnFieldClick: true,\r\n                        fieldTemplate: function(data, container) {\r\n                            (0, _renderer.default)(\"<i>\").addClass(icon).css(\"borderBottomColor\", data).appendTo(container);\r\n                            (0, _renderer.default)(\"<div>\").dxTextBox({\r\n                                readOnly: true,\r\n                                stylingMode: \"outlined\"\r\n                            }).appendTo(container)\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n            options = (0, _extend.extend)(true, options, {\r\n                options: {\r\n                    dropDownOptions: {\r\n                        container: this.option(\"container\")\r\n                    },\r\n                    onOpened: function() {\r\n                        if (_this4.option(\"isMobileView\")) {\r\n                            (0, _renderer.default)(\"body\").addClass(DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS)\r\n                        }\r\n                    },\r\n                    onClosed: function() {\r\n                        (0, _renderer.default)(\"body\").removeClass(DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS)\r\n                    }\r\n                }\r\n            });\r\n            return options\r\n        }\r\n    }, {\r\n        key: \"_createTextEditorItemOptions\",\r\n        value: function(hint) {\r\n            return {\r\n                options: {\r\n                    stylingMode: this.option(\"editorStylingMode\"),\r\n                    hint: hint\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createItemActionOptions\",\r\n        value: function(item, handler) {\r\n            var _this5 = this;\r\n            switch (item.widget) {\r\n                case \"dxSelectBox\":\r\n                case \"dxColorBox\":\r\n                case \"dxCheckBox\":\r\n                    return {\r\n                        options: {\r\n                            onValueChanged: function(e) {\r\n                                var parameter = _uiDiagram2.default.getItemCommandParameter(_this5, item, e.component.option(\"value\"));\r\n                                handler.call(_this5, item.command, item.name, parameter)\r\n                            }\r\n                        }\r\n                    };\r\n                case \"dxTextBox\":\r\n                    return {};\r\n                default:\r\n                    return {\r\n                        options: {\r\n                            onClick: function(e) {\r\n                                if (!item.items) {\r\n                                    var parameter = _uiDiagram2.default.getItemCommandParameter(_this5, item);\r\n                                    handler.call(_this5, item.command, item.name, parameter)\r\n                                } else {\r\n                                    var contextMenu = e.component._contextMenu;\r\n                                    if (contextMenu) {\r\n                                        _this5._toggleContextMenu(contextMenu)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_toggleContextMenu\",\r\n        value: function(contextMenu) {\r\n            this._contextMenuList.forEach(function(cm) {\r\n                if (contextMenu !== cm) {\r\n                    cm.hide()\r\n                }\r\n            });\r\n            contextMenu.toggle()\r\n        }\r\n    }, {\r\n        key: \"_onItemInitialized\",\r\n        value: function(widget, item) {\r\n            this._addItemHelper(item.command, new DiagramToolbarItemHelper(widget))\r\n        }\r\n    }, {\r\n        key: \"_onItemContentReady\",\r\n        value: function(widget, item, actionHandler) {\r\n            var _this6 = this;\r\n            var _getDiagram = (0, _diagram2.getDiagram)(),\r\n                Browser = _getDiagram.Browser;\r\n            if ((\"dxButton\" === widget.NAME || \"dxTextBox\" === widget.NAME) && item.items) {\r\n                var $menuContainer = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\r\n                widget._contextMenu = this._createComponent($menuContainer, _context_menu.default, {\r\n                    items: item.items,\r\n                    target: widget.$element(),\r\n                    cssClass: _uiDiagram2.default.getContextMenuCssClass(),\r\n                    showEvent: \"\",\r\n                    closeOnOutsideClick: !Browser.TouchUI,\r\n                    focusStateEnabled: false,\r\n                    position: {\r\n                        at: \"left bottom\"\r\n                    },\r\n                    itemTemplate: function(itemData, itemIndex, itemElement) {\r\n                        _uiDiagram2.default.getContextMenuItemTemplate(this, itemData, itemIndex, itemElement)\r\n                    },\r\n                    onItemClick: function(_ref2) {\r\n                        var component = _ref2.component,\r\n                            itemData = _ref2.itemData;\r\n                        _uiDiagram2.default.onContextMenuItemClick(_this6, itemData, actionHandler.bind(_this6));\r\n                        if (!itemData.items || !itemData.items.length) {\r\n                            component.hide()\r\n                        }\r\n                    },\r\n                    onShowing: function(e) {\r\n                        if (_this6._showingSubMenu) {\r\n                            return\r\n                        }\r\n                        _this6._showingSubMenu = e.component;\r\n                        _this6._onSubMenuVisibilityChangingAction({\r\n                            visible: true,\r\n                            component: _this6\r\n                        });\r\n                        e.component.option(\"items\", e.component.option(\"items\"));\r\n                        delete _this6._showingSubMenu\r\n                    },\r\n                    onInitialized: function(_ref3) {\r\n                        var component = _ref3.component;\r\n                        return _this6._onContextMenuInitialized(component, item, widget)\r\n                    },\r\n                    onDisposing: function(_ref4) {\r\n                        var component = _ref4.component;\r\n                        return _this6._onContextMenuDisposing(component, item)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onContextMenuInitialized\",\r\n        value: function(widget, item, rootWidget) {\r\n            this._contextMenuList.push(widget);\r\n            if (item.command) {\r\n                this._commandContextMenus[item.command] = widget\r\n            }\r\n            this._addContextMenuHelper(item, widget, [], rootWidget)\r\n        }\r\n    }, {\r\n        key: \"_addItemHelper\",\r\n        value: function(command, helper) {\r\n            if (void 0 !== command) {\r\n                if (this._itemHelpers[command]) {\r\n                    throw new Error(\"Toolbar cannot contain duplicated commands.\")\r\n                }\r\n                this._itemHelpers[command] = helper\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_addContextMenuHelper\",\r\n        value: function(item, widget, indexPath, rootWidget) {\r\n            var _this7 = this;\r\n            if (item.items) {\r\n                item.items.forEach(function(subItem, index) {\r\n                    var itemIndexPath = indexPath.concat(index);\r\n                    _this7._addItemHelper(subItem.command, new DiagramToolbarSubItemHelper(widget, itemIndexPath, subItem.command, rootWidget));\r\n                    _this7._addContextMenuHelper(subItem, widget, itemIndexPath, rootWidget)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onContextMenuDisposing\",\r\n        value: function(widget, item) {\r\n            this._contextMenuList.splice(this._contextMenuList.indexOf(widget), 1);\r\n            delete this._commandContextMenus[item.command]\r\n        }\r\n    }, {\r\n        key: \"_executeCommand\",\r\n        value: function(command, name, value) {\r\n            if (this._updateLocked) {\r\n                return\r\n            }\r\n            if (\"number\" === typeof command) {\r\n                var valueConverter = this._valueConverters[command];\r\n                if (valueConverter && valueConverter.getCommandValue) {\r\n                    value = valueConverter.getCommandValue(value)\r\n                }\r\n                this.bar.raiseBarCommandExecuted(command, value)\r\n            } else {\r\n                if (\"string\" === typeof command) {\r\n                    this._onInternalCommandAction({\r\n                        command: command\r\n                    })\r\n                }\r\n            }\r\n            if (void 0 !== name) {\r\n                this._onCustomCommandAction({\r\n                    name: name\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createOnInternalCommand\",\r\n        value: function() {\r\n            this._onInternalCommandAction = this._createActionByOption(\"onInternalCommand\")\r\n        }\r\n    }, {\r\n        key: \"_createOnCustomCommand\",\r\n        value: function() {\r\n            this._onCustomCommandAction = this._createActionByOption(\"onCustomCommand\")\r\n        }\r\n    }, {\r\n        key: \"_setItemEnabled\",\r\n        value: function(command, enabled) {\r\n            if (command in this._itemHelpers) {\r\n                var helper = this._itemHelpers[command];\r\n                if (helper.canUpdate(this._showingSubMenu)) {\r\n                    helper.setEnabled(enabled)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setEnabled\",\r\n        value: function(enabled) {\r\n            this._toolbarInstance.option(\"disabled\", !enabled);\r\n            this._contextMenuList.forEach(function(contextMenu) {\r\n                contextMenu.option(\"disabled\", !enabled)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_setItemValue\",\r\n        value: function(command, value) {\r\n            try {\r\n                this._updateLocked = true;\r\n                if (command in this._itemHelpers) {\r\n                    var helper = this._itemHelpers[command];\r\n                    if (helper.canUpdate(this._showingSubMenu)) {\r\n                        var valueConverter = this._valueConverters[command];\r\n                        if (valueConverter && valueConverter.getEditorValue) {\r\n                            value = valueConverter.getEditorValue(value)\r\n                        }\r\n                        var displayValue;\r\n                        if (valueConverter && valueConverter.getEditorDisplayValue) {\r\n                            displayValue = valueConverter.getEditorDisplayValue(value)\r\n                        }\r\n                        var contextMenu = this._commandContextMenus[command];\r\n                        helper.setValue(value, displayValue, contextMenu, contextMenu && command)\r\n                    }\r\n                }\r\n            } finally {\r\n                this._updateLocked = false\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setItemSubItems\",\r\n        value: function(command, items) {\r\n            this._updateLocked = true;\r\n            if (command in this._itemHelpers) {\r\n                var helper = this._itemHelpers[command];\r\n                if (helper.canUpdate(this._showingSubMenu)) {\r\n                    var contextMenu = this._commandContextMenus[command];\r\n                    helper.setItems(items, contextMenu, contextMenu && command)\r\n                }\r\n            }\r\n            this._updateLocked = false\r\n        }\r\n    }, {\r\n        key: \"_createOnSubMenuVisibilityChangingAction\",\r\n        value: function() {\r\n            this._onSubMenuVisibilityChangingAction = this._createActionByOption(\"onSubMenuVisibilityChanging\")\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            switch (args.name) {\r\n                case \"isMobileView\":\r\n                    (0, _renderer.default)(\"body\").removeClass(DIAGRAM_MOBILE_TOOLBAR_COLOR_BOX_OPENED_CLASS);\r\n                    this._invalidate();\r\n                    break;\r\n                case \"onSubMenuVisibilityChanging\":\r\n                    this._createOnSubMenuVisibilityChangingAction();\r\n                    break;\r\n                case \"onInternalCommand\":\r\n                    this._createOnInternalCommand();\r\n                    break;\r\n                case \"onCustomCommand\":\r\n                    this._createOnCustomCommand();\r\n                    break;\r\n                case \"container\":\r\n                case \"commands\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"export\":\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(DiagramToolbar.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(DiagramToolbar.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                isMobileView: false,\r\n                \"export\": {\r\n                    fileName: \"Diagram\",\r\n                    proxyUrl: void 0\r\n                },\r\n                locateInMenu: \"auto\",\r\n                buttonStylingMode: \"text\",\r\n                buttonType: \"normal\",\r\n                editorStylingMode: \"filled\",\r\n                skipAdjustSize: false\r\n            })\r\n        }\r\n    }, {\r\n        key: \"setCommandChecked\",\r\n        value: function(command, checked) {\r\n            this._setItemValue(command, checked)\r\n        }\r\n    }, {\r\n        key: \"setCommandEnabled\",\r\n        value: function(command, enabled) {\r\n            this._setItemEnabled(command, enabled)\r\n        }\r\n    }]);\r\n    return DiagramToolbar\r\n}(_uiDiagram.default);\r\nvar DiagramToolbarBar = function(_DiagramBar) {\r\n    _inherits(DiagramToolbarBar, _DiagramBar);\r\n    var _super2 = _createSuper(DiagramToolbarBar);\r\n\r\n    function DiagramToolbarBar() {\r\n        _classCallCheck(this, DiagramToolbarBar);\r\n        return _super2.apply(this, arguments)\r\n    }\r\n    _createClass(DiagramToolbarBar, [{\r\n        key: \"getCommandKeys\",\r\n        value: function() {\r\n            return this._getKeys(this._owner._commands)\r\n        }\r\n    }, {\r\n        key: \"setItemValue\",\r\n        value: function(key, value) {\r\n            this._owner._setItemValue(key, value)\r\n        }\r\n    }, {\r\n        key: \"setItemEnabled\",\r\n        value: function(key, enabled) {\r\n            this._owner._setItemEnabled(key, enabled)\r\n        }\r\n    }, {\r\n        key: \"setEnabled\",\r\n        value: function(enabled) {\r\n            this._owner._setEnabled(enabled)\r\n        }\r\n    }, {\r\n        key: \"setItemSubItems\",\r\n        value: function(key, items) {\r\n            this._owner._setItemSubItems(key, items)\r\n        }\r\n    }]);\r\n    return DiagramToolbarBar\r\n}(_diagram.default);\r\nvar DiagramToolbarItemHelper = function() {\r\n    function DiagramToolbarItemHelper(widget) {\r\n        _classCallCheck(this, DiagramToolbarItemHelper);\r\n        this._widget = widget\r\n    }\r\n    _createClass(DiagramToolbarItemHelper, [{\r\n        key: \"canUpdate\",\r\n        value: function(showingSubMenu) {\r\n            return void 0 === showingSubMenu\r\n        }\r\n    }, {\r\n        key: \"setEnabled\",\r\n        value: function(enabled) {\r\n            this._widget.option(\"disabled\", !enabled)\r\n        }\r\n    }, {\r\n        key: \"setValue\",\r\n        value: function(value, displayValue, contextMenu, rootCommandKey) {\r\n            if (\"value\" in this._widget.option()) {\r\n                this._updateEditorValue(value, displayValue)\r\n            } else {\r\n                if (void 0 !== value) {\r\n                    this._updateButtonValue(value)\r\n                }\r\n            }\r\n            if (contextMenu) {\r\n                this._updateContextMenuItemValue(contextMenu, \"\", rootCommandKey, value)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"setItems\",\r\n        value: function(items, contextMenu, rootCommandKey) {\r\n            if (contextMenu) {\r\n                this._updateContextMenuItems(contextMenu, \"\", rootCommandKey, items)\r\n            } else {\r\n                this._updateEditorItems(items)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateContextMenuItems\",\r\n        value: function(contextMenu, itemOptionText, rootCommandKey, items) {\r\n            _uiDiagram2.default.updateContextMenuItems(contextMenu, itemOptionText, rootCommandKey, items)\r\n        }\r\n    }, {\r\n        key: \"_updateEditorItems\",\r\n        value: function(items) {\r\n            if (\"items\" in this._widget.option()) {\r\n                this._widget.option(\"items\", items.map(function(item) {\r\n                    return {\r\n                        value: _uiDiagram2.default.getItemValue(item),\r\n                        text: item.text\r\n                    }\r\n                }))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateEditorValue\",\r\n        value: function(value, displayValue) {\r\n            this._widget.option(\"value\", value);\r\n            if (!this._widget.option(\"selectedItem\") && displayValue) {\r\n                this._widget.option(\"value\", displayValue)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateButtonValue\",\r\n        value: function(value) {\r\n            if (this._widget.option(\"iconChecked\") && this._widget.option(\"iconUnchecked\")) {\r\n                this._widget.option(\"icon\", value ? this._widget.option(\"iconChecked\") : this._widget.option(\"iconUnchecked\"))\r\n            } else {\r\n                this._widget.$element().toggleClass(ACTIVE_FORMAT_CLASS, value)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateContextMenuItemValue\",\r\n        value: function(contextMenu, itemOptionText, rootCommandKey, value) {\r\n            _uiDiagram2.default.updateContextMenuItemValue(contextMenu, itemOptionText, rootCommandKey, value)\r\n        }\r\n    }]);\r\n    return DiagramToolbarItemHelper\r\n}();\r\nvar DiagramToolbarSubItemHelper = function(_DiagramToolbarItemHe) {\r\n    _inherits(DiagramToolbarSubItemHelper, _DiagramToolbarItemHe);\r\n    var _super3 = _createSuper(DiagramToolbarSubItemHelper);\r\n\r\n    function DiagramToolbarSubItemHelper(widget, indexPath, rootCommandKey, rootWidget) {\r\n        var _this8;\r\n        _classCallCheck(this, DiagramToolbarSubItemHelper);\r\n        _this8 = _super3.call(this, widget);\r\n        _this8._indexPath = indexPath;\r\n        _this8._rootCommandKey = rootCommandKey;\r\n        _this8._rootWidget = rootWidget;\r\n        return _this8\r\n    }\r\n    _createClass(DiagramToolbarSubItemHelper, [{\r\n        key: \"canUpdate\",\r\n        value: function(showingSubMenu) {\r\n            return _get(_getPrototypeOf(DiagramToolbarSubItemHelper.prototype), \"canUpdate\", this).call(this, showingSubMenu) || showingSubMenu === this._widget\r\n        }\r\n    }, {\r\n        key: \"setEnabled\",\r\n        value: function(enabled) {\r\n            this._widget.option(this._getItemOptionText() + \"disabled\", !enabled);\r\n            var rootEnabled = this._hasEnabledCommandItems(this._widget.option(\"items\"));\r\n            this._rootWidget.option(\"disabled\", !rootEnabled)\r\n        }\r\n    }, {\r\n        key: \"_hasEnabledCommandItems\",\r\n        value: function(items) {\r\n            var _this9 = this;\r\n            if (items) {\r\n                return items.some(function(item) {\r\n                    return void 0 !== item.command && !item.disabled || _this9._hasEnabledCommandItems(item.items)\r\n                })\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"setValue\",\r\n        value: function(value) {\r\n            this._updateContextMenuItemValue(this._widget, this._getItemOptionText(), this._rootCommandKey, value)\r\n        }\r\n    }, {\r\n        key: \"setItems\",\r\n        value: function(items) {\r\n            this._updateContextMenuItems(this._widget, this._getItemOptionText(), this._rootCommandKey, items)\r\n        }\r\n    }, {\r\n        key: \"_getItemOptionText\",\r\n        value: function() {\r\n            return _uiDiagram2.default.getItemOptionText(this._widget, this._indexPath)\r\n        }\r\n    }]);\r\n    return DiagramToolbarSubItemHelper\r\n}(DiagramToolbarItemHelper);\r\nvar _default = DiagramToolbar;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}