{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.navigator.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.errors\"));\n\nvar _date = _interopRequireDefault(require(\"../../core/utils/date\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _ui2 = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _button = _interopRequireDefault(require(\"../button\"));\n\nvar _calendar = _interopRequireDefault(require(\"../calendar\"));\n\nvar _popover = _interopRequireDefault(require(\"../popover\"));\n\nvar _popup = _interopRequireDefault(require(\"../popup\"));\n\nvar _uiScheduler = _interopRequireDefault(require(\"./ui.scheduler.publisher_mixin\"));\n\nvar _date2 = _interopRequireDefault(require(\"../../localization/date\"));\n\nvar _ui3 = _interopRequireDefault(require(\"../scroll_view/ui.scrollable\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar ELEMENT_CLASS = \"dx-scheduler-navigator\";\nvar CALENDAR_CLASS = \"dx-scheduler-navigator-calendar\";\nvar NEXT_BUTTON_CLASS = \"dx-scheduler-navigator-next\";\nvar CAPTION_BUTTON_CLASS = \"dx-scheduler-navigator-caption\";\nvar PREVIOUS_BUTTON_CLASS = \"dx-scheduler-navigator-previous\";\nvar CALENDAR_POPOVER_CLASS = \"dx-scheduler-navigator-calendar-popover\";\nvar MONDAY_INDEX = 1;\n\nvar getDefaultFirstDayOfWeekIndex = function (shift) {\n  return shift ? MONDAY_INDEX : _date2.default.firstDayOfWeekIndex();\n};\n\nvar getDateMonthFormat = function (short) {\n  return function (date) {\n    var monthName = _date2.default.getMonthNames(short ? \"abbreviated\" : \"wide\")[date.getMonth()];\n\n    return [_date2.default.format(date, \"day\"), monthName].join(\" \");\n  };\n};\n\nvar getMonthYearFormat = function (date) {\n  return _date2.default.getMonthNames(\"abbreviated\")[date.getMonth()] + \" \" + _date2.default.format(date, \"year\");\n};\n\nvar getCaptionFormat = function getCaptionFormat(short, intervalCount, duration) {\n  var dateMonthFormat = getDateMonthFormat(short);\n  return function (date) {\n    if (intervalCount > 1) {\n      var lastIntervalDate = new Date(date);\n      var defaultViewDuration = duration;\n      lastIntervalDate.setDate(date.getDate() + defaultViewDuration - 1);\n      var isDifferentMonthDates = date.getMonth() !== lastIntervalDate.getMonth();\n      var useShortFormat = isDifferentMonthDates || short;\n\n      var firstWeekDateText = _date2.default.format(date, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\n\n      var lastWeekDateText = _date2.default.format(lastIntervalDate, getCaptionFormat(useShortFormat));\n\n      return firstWeekDateText + \"-\" + lastWeekDateText;\n    }\n\n    return [dateMonthFormat(date), _date2.default.format(date, \"year\")].join(\" \");\n  };\n};\n\nvar getWeekCaption = function (date, shift, rejectWeekend) {\n  var firstDayOfWeek = this.option(\"firstDayOfWeek\");\n  var firstDayOfWeekIndex = (0, _type.isDefined)(firstDayOfWeek) ? firstDayOfWeek : getDefaultFirstDayOfWeekIndex(shift);\n\n  if (0 === firstDayOfWeekIndex && rejectWeekend) {\n    firstDayOfWeekIndex = MONDAY_INDEX;\n  }\n\n  var firstWeekDate = _date.default.getFirstWeekDate(date, firstDayOfWeekIndex);\n\n  var weekendDuration = 2;\n\n  if (rejectWeekend) {\n    firstWeekDate = _date.default.normalizeDateByWeek(firstWeekDate, date);\n  }\n\n  if (firstDayOfWeek >= 6 && rejectWeekend) {\n    firstWeekDate.setDate(firstWeekDate.getDate() + (7 - firstDayOfWeek + 1));\n  }\n\n  var lastWeekDate = new Date(firstWeekDate);\n  var intervalCount = this.option(\"intervalCount\");\n  shift = shift || 6;\n  lastWeekDate = new Date(lastWeekDate.setDate(lastWeekDate.getDate() + (intervalCount > 1 ? 7 * (intervalCount - 1) + shift : shift)));\n\n  if (lastWeekDate.getDay() % 6 === 0 && rejectWeekend) {\n    lastWeekDate.setDate(lastWeekDate.getDate() + weekendDuration);\n  }\n\n  return {\n    text: formatCaptionByMonths.call(this, lastWeekDate, firstWeekDate),\n    startDate: firstWeekDate,\n    endDate: lastWeekDate\n  };\n};\n\nvar formatCaptionByMonths = function (lastDate, firstDate) {\n  var isDifferentMonthDates = firstDate.getMonth() !== lastDate.getMonth();\n  var isDifferentYears = firstDate.getFullYear() !== lastDate.getFullYear();\n  var useShortFormat = isDifferentMonthDates || this.option(\"_useShortDateFormat\");\n  var lastDateText;\n  var firstDateText;\n\n  if (isDifferentYears) {\n    firstDateText = _date2.default.format(firstDate, getCaptionFormat(true));\n    lastDateText = _date2.default.format(lastDate, getCaptionFormat(true));\n  } else {\n    firstDateText = _date2.default.format(firstDate, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\n    lastDateText = _date2.default.format(lastDate, getCaptionFormat(useShortFormat));\n  }\n\n  return firstDateText + \"-\" + lastDateText;\n};\n\nvar getMonthCaption = function (date) {\n  var firstDate = new Date(_date.default.getFirstMonthDate(date));\n  var lastDate = new Date(_date.default.getLastMonthDate(firstDate));\n  var text;\n\n  if (this.option(\"intervalCount\") > 1) {\n    lastDate = new Date(firstDate);\n    lastDate.setMonth(firstDate.getMonth() + this.option(\"intervalCount\") - 1);\n    lastDate = new Date(_date.default.getLastMonthDate(lastDate));\n    var isSameYear = firstDate.getYear() === lastDate.getYear();\n    var lastDateText = getMonthYearFormat(lastDate);\n    var firstDateText = isSameYear ? _date2.default.getMonthNames(\"abbreviated\")[firstDate.getMonth()] : getMonthYearFormat(firstDate);\n    text = firstDateText + \"-\" + lastDateText;\n  } else {\n    text = _date2.default.format(date, \"monthandyear\");\n  }\n\n  return {\n    text: text,\n    startDate: firstDate,\n    endDate: lastDate\n  };\n};\n\nvar dateGetter = function (date, offset) {\n  return new Date(date[this.setter](date[this.getter]() + offset));\n};\n\nvar getConfig = function (step) {\n  var agendaDuration;\n\n  switch (step) {\n    case \"day\":\n      return {\n        duration: 1 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          var format = getCaptionFormat(false, this.option(\"intervalCount\"), this._getConfig().duration);\n          return {\n            text: _date2.default.format(date, format),\n            startDate: date,\n            endDate: date\n          };\n        }\n      };\n\n    case \"week\":\n      return {\n        duration: 7 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: getWeekCaption\n      };\n\n    case \"workWeek\":\n      return {\n        duration: 7 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          return getWeekCaption.call(this, date, 4, true);\n        }\n      };\n\n    case \"month\":\n      return {\n        duration: 1 * this.option(\"intervalCount\"),\n        setter: \"setMonth\",\n        getter: \"getMonth\",\n        getDate: function (date, offset) {\n          var currentDate = date.getDate();\n          date.setDate(1);\n          date = dateGetter.call(this, date, offset);\n\n          var lastDate = _date.default.getLastMonthDay(date);\n\n          date.setDate(currentDate < lastDate ? currentDate : lastDate);\n          return date;\n        },\n        getCaption: getMonthCaption\n      };\n\n    case \"agenda\":\n      agendaDuration = this.invoke(\"getAgendaDuration\");\n      agendaDuration = (0, _type.isNumeric)(agendaDuration) && agendaDuration > 0 ? agendaDuration : 7;\n      return {\n        duration: agendaDuration,\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          var format = getCaptionFormat(this.option(\"_useShortDateFormat\"));\n          var firstDate = new Date(date);\n          var lastDate = new Date(date);\n          var text;\n\n          if (agendaDuration > 1) {\n            lastDate.setDate(lastDate.getDate() + agendaDuration - 1);\n            text = formatCaptionByMonths.call(this, lastDate, date);\n          } else {\n            text = _date2.default.format(date, format);\n          }\n\n          return {\n            text: text,\n            startDate: firstDate,\n            endDate: lastDate\n          };\n        }\n      };\n  }\n};\n\nvar SchedulerNavigator = _ui2.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      date: new Date(),\n      displayedDate: void 0,\n      step: \"day\",\n      intervalCount: 1,\n      min: void 0,\n      max: void 0,\n      firstDayOfWeek: void 0,\n      _useShortDateFormat: false,\n      todayDate: function () {\n        return new Date();\n      }\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return !_devices.default.real().generic || _devices.default.isSimulator();\n      },\n      options: {\n        _useShortDateFormat: true\n      }\n    }]);\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"step\":\n      case \"date\":\n      case \"intervalCount\":\n      case \"displayedDate\":\n        this._updateButtonsState();\n\n        this._renderCaption();\n\n        this._setCalendarOption(\"value\", this.option(\"date\"));\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        this._updateButtonsState();\n\n        this._setCalendarOption(args.name, args.value);\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._setCalendarOption(args.name, args.value);\n\n        break;\n\n      case \"customizeDateNavigatorText\":\n        this._renderCaption();\n\n        break;\n\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._next.option(args.name, args.value);\n\n        this._caption.option(args.name, args.value);\n\n        this._prev.option(args.name, args.value);\n\n        this._setCalendarOption(args.name, args.value);\n\n        this.callBase(args);\n        break;\n\n      case \"_useShortDateFormat\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _init: function () {\n    this.callBase();\n    this.$element().addClass(ELEMENT_CLASS);\n\n    this._initButtons();\n  },\n  _initButtons: function () {\n    var $next = (0, _renderer.default)(\"<div>\").addClass(NEXT_BUTTON_CLASS);\n    this._next = this._createComponent($next, _button.default, {\n      icon: \"chevronnext\",\n      onClick: this._updateCurrentDate.bind(this, 1),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    var $caption = (0, _renderer.default)(\"<div>\").addClass(CAPTION_BUTTON_CLASS);\n    this._caption = this._createComponent($caption, _button.default, {\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    var $prev = (0, _renderer.default)(\"<div>\").addClass(PREVIOUS_BUTTON_CLASS);\n    this._prev = this._createComponent($prev, _button.default, {\n      icon: \"chevronprev\",\n      onClick: this._updateCurrentDate.bind(this, -1),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    this.setAria(\"label\", \"Next period\", $next);\n    this.setAria(\"label\", \"Previous period\", $prev);\n\n    this._updateButtonsState();\n\n    this.$element().append($prev, $caption, $next);\n  },\n  _updateButtonsState: function () {\n    var min = this.option(\"min\");\n    var max = this.option(\"max\");\n\n    var caption = this._getConfig().getCaption.call(this, this.option(\"displayedDate\") || this.option(\"date\"));\n\n    min = min ? _date.default.trimTime(min) : min;\n    max = max ? _date.default.trimTime(max) : max;\n    max && max.setHours(23, 59, 59);\n\n    this._prev.option(\"disabled\", min && !isNaN(min.getTime()) && this._getNextDate(-1, caption.endDate) < min);\n\n    this._next.option(\"disabled\", max && !isNaN(max.getTime()) && this._getNextDate(1, caption.startDate) > max);\n  },\n  _updateCurrentDate: function (direction) {\n    var date = this._getNextDate(direction);\n\n    _date.default.normalizeDate(date, this.option(\"min\"), this.option(\"max\"));\n\n    this.notifyObserver(\"currentDateUpdated\", date);\n  },\n  _getNextDate: function (direction) {\n    var initialDate = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\n\n    var stepConfig = this._getConfig();\n\n    var offset = stepConfig.duration * direction;\n    var date = stepConfig.getDate(new Date(initialDate || this.option(\"date\")), offset);\n    return date;\n  },\n  _renderFocusTarget: _common.noop,\n  _initMarkup: function () {\n    this.callBase();\n\n    this._renderCaption();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderPopover();\n\n    this._renderCaptionKeys();\n  },\n  _isMobileLayout: function () {\n    return !_devices.default.current().generic;\n  },\n  _renderPopover: function () {\n    var _this = this;\n\n    var overlayType = this._isMobileLayout() ? _popup.default : _popover.default;\n    var popoverContainer = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_POPOVER_CLASS);\n    this._popover = this._createComponent(popoverContainer, overlayType, {\n      contentTemplate: function () {\n        return _this._createPopupContent();\n      },\n      defaultOptionsRules: [{\n        device: function () {\n          return !_devices.default.current().generic;\n        },\n        options: {\n          fullScreen: true,\n          showCloseButton: false,\n          toolbarItems: [{\n            shortcut: \"cancel\"\n          }]\n        }\n      }, {\n        device: function () {\n          return _devices.default.current().generic;\n        },\n        options: {\n          target: this._caption.$element()\n        }\n      }]\n    });\n\n    this._popover.$element().appendTo(this.$element());\n  },\n  _createScrollable: function (content) {\n    var result = this._createComponent((0, _renderer.default)(\"<div>\"), _ui3.default, {\n      direction: \"vertical\"\n    });\n\n    result.$content().append(content);\n    return result;\n  },\n  _createPopupContent: function () {\n    var result = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_CLASS);\n    this._calendar = this._createComponent(result, _calendar.default, this._calendarOptions());\n\n    if (this._isMobileLayout()) {\n      var scrollable = this._createScrollable(result);\n\n      return scrollable.$element();\n    }\n\n    return result;\n  },\n  _calendarOptions: function () {\n    return {\n      min: this.option(\"min\"),\n      max: this.option(\"max\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      value: this.option(\"date\"),\n      _todayDate: this.option(\"todayDate\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      onValueChanged: function (e) {\n        if (!this.option(\"visible\")) {\n          return;\n        }\n\n        this.notifyObserver(\"currentDateUpdated\", e.value);\n\n        this._popover.hide();\n      }.bind(this),\n      hasFocus: function () {\n        return true;\n      },\n      tabIndex: null\n    };\n  },\n  _renderCaption: function () {\n    var _this2 = this;\n\n    var date = this.option(\"displayedDate\") || this.option(\"date\");\n\n    var captionConfig = this._getConfig().getCaption.call(this, date);\n\n    var customizationFunction = this.option(\"customizeDateNavigatorText\");\n    var caption = (0, _type.isFunction)(customizationFunction) ? customizationFunction(captionConfig) : captionConfig.text;\n\n    this._caption.option({\n      text: caption,\n      onKeyboardHandled: function (opts) {\n        _this2.option(\"focusStateEnabled\") && !_this2.option(\"disabled\") && _this2._calendar._keyboardHandler(opts);\n      },\n      onClick: function () {\n        return _this2._popover.toggle();\n      }\n    });\n  },\n  _renderCaptionKeys: function () {\n    if (!this.option(\"focusStateEnabled\") || this.option(\"disabled\")) {\n      return;\n    }\n\n    var that = this;\n\n    var executeHandler = function () {\n      if (that._popover.$content().is(\":hidden\")) {\n        that._popover.show();\n      } else {\n        return true;\n      }\n    };\n\n    var tabHandler = function () {\n      that._popover.hide();\n    };\n\n    this._caption.registerKeyHandler(\"enter\", executeHandler);\n\n    this._caption.registerKeyHandler(\"space\", executeHandler);\n\n    this._caption.registerKeyHandler(\"tab\", tabHandler);\n  },\n  _setCalendarOption: function (name, value) {\n    if (this._calendar) {\n      this._calendar.option(name, value);\n    }\n  },\n  _getConfig: function () {\n    var step = this.option(\"step\");\n    var config = getConfig.call(this, step);\n\n    if (!config) {\n      throw _ui.default.Error(\"E1033\", step);\n    }\n\n    return config;\n  }\n}).include(_uiScheduler.default);\n\n(0, _component_registrator.default)(\"dxSchedulerNavigator\", SchedulerNavigator);\nvar _default = SchedulerNavigator;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["F:/webfe/node_modules/devextreme/ui/scheduler/ui.scheduler.navigator.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_common","_type","_ui","_date","_extend","_component_registrator","_devices","_ui2","_button","_calendar","_popover","_popup","_uiScheduler","_date2","_ui3","obj","__esModule","ELEMENT_CLASS","CALENDAR_CLASS","NEXT_BUTTON_CLASS","CAPTION_BUTTON_CLASS","PREVIOUS_BUTTON_CLASS","CALENDAR_POPOVER_CLASS","MONDAY_INDEX","getDefaultFirstDayOfWeekIndex","shift","firstDayOfWeekIndex","getDateMonthFormat","short","date","monthName","getMonthNames","getMonth","format","join","getMonthYearFormat","getCaptionFormat","intervalCount","duration","dateMonthFormat","lastIntervalDate","Date","defaultViewDuration","setDate","getDate","isDifferentMonthDates","useShortFormat","firstWeekDateText","lastWeekDateText","getWeekCaption","rejectWeekend","firstDayOfWeek","option","isDefined","firstWeekDate","getFirstWeekDate","weekendDuration","normalizeDateByWeek","lastWeekDate","getDay","text","formatCaptionByMonths","call","startDate","endDate","lastDate","firstDate","isDifferentYears","getFullYear","lastDateText","firstDateText","getMonthCaption","getFirstMonthDate","getLastMonthDate","setMonth","isSameYear","getYear","dateGetter","offset","setter","getter","getConfig","step","agendaDuration","getCaption","_getConfig","currentDate","getLastMonthDay","invoke","isNumeric","SchedulerNavigator","inherit","_getDefaultOptions","extend","callBase","displayedDate","min","max","_useShortDateFormat","todayDate","_defaultOptionsRules","concat","device","real","generic","isSimulator","options","_optionChanged","args","name","_updateButtonsState","_renderCaption","_setCalendarOption","value","_next","_caption","_prev","_init","$element","addClass","_initButtons","$next","_createComponent","icon","onClick","_updateCurrentDate","bind","focusStateEnabled","tabIndex","integrationOptions","$caption","$prev","setAria","append","caption","trimTime","setHours","isNaN","getTime","_getNextDate","direction","normalizeDate","notifyObserver","initialDate","arguments","length","stepConfig","_renderFocusTarget","noop","_initMarkup","_render","_renderPopover","_renderCaptionKeys","_isMobileLayout","current","_this","overlayType","popoverContainer","contentTemplate","_createPopupContent","defaultOptionsRules","fullScreen","showCloseButton","toolbarItems","shortcut","target","appendTo","_createScrollable","content","result","$content","_calendarOptions","scrollable","_todayDate","onValueChanged","e","hide","hasFocus","_this2","captionConfig","customizationFunction","isFunction","onKeyboardHandled","opts","_keyboardHandler","toggle","that","executeHandler","is","show","tabHandler","registerKeyHandler","config","Error","include","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.navigator.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.errors\"));\r\nvar _date = _interopRequireDefault(require(\"../../core/utils/date\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _ui2 = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _button = _interopRequireDefault(require(\"../button\"));\r\nvar _calendar = _interopRequireDefault(require(\"../calendar\"));\r\nvar _popover = _interopRequireDefault(require(\"../popover\"));\r\nvar _popup = _interopRequireDefault(require(\"../popup\"));\r\nvar _uiScheduler = _interopRequireDefault(require(\"./ui.scheduler.publisher_mixin\"));\r\nvar _date2 = _interopRequireDefault(require(\"../../localization/date\"));\r\nvar _ui3 = _interopRequireDefault(require(\"../scroll_view/ui.scrollable\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar ELEMENT_CLASS = \"dx-scheduler-navigator\";\r\nvar CALENDAR_CLASS = \"dx-scheduler-navigator-calendar\";\r\nvar NEXT_BUTTON_CLASS = \"dx-scheduler-navigator-next\";\r\nvar CAPTION_BUTTON_CLASS = \"dx-scheduler-navigator-caption\";\r\nvar PREVIOUS_BUTTON_CLASS = \"dx-scheduler-navigator-previous\";\r\nvar CALENDAR_POPOVER_CLASS = \"dx-scheduler-navigator-calendar-popover\";\r\nvar MONDAY_INDEX = 1;\r\nvar getDefaultFirstDayOfWeekIndex = function(shift) {\r\n    return shift ? MONDAY_INDEX : _date2.default.firstDayOfWeekIndex()\r\n};\r\nvar getDateMonthFormat = function(short) {\r\n    return function(date) {\r\n        var monthName = _date2.default.getMonthNames(short ? \"abbreviated\" : \"wide\")[date.getMonth()];\r\n        return [_date2.default.format(date, \"day\"), monthName].join(\" \")\r\n    }\r\n};\r\nvar getMonthYearFormat = function(date) {\r\n    return _date2.default.getMonthNames(\"abbreviated\")[date.getMonth()] + \" \" + _date2.default.format(date, \"year\")\r\n};\r\nvar getCaptionFormat = function getCaptionFormat(short, intervalCount, duration) {\r\n    var dateMonthFormat = getDateMonthFormat(short);\r\n    return function(date) {\r\n        if (intervalCount > 1) {\r\n            var lastIntervalDate = new Date(date);\r\n            var defaultViewDuration = duration;\r\n            lastIntervalDate.setDate(date.getDate() + defaultViewDuration - 1);\r\n            var isDifferentMonthDates = date.getMonth() !== lastIntervalDate.getMonth();\r\n            var useShortFormat = isDifferentMonthDates || short;\r\n            var firstWeekDateText = _date2.default.format(date, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\r\n            var lastWeekDateText = _date2.default.format(lastIntervalDate, getCaptionFormat(useShortFormat));\r\n            return firstWeekDateText + \"-\" + lastWeekDateText\r\n        }\r\n        return [dateMonthFormat(date), _date2.default.format(date, \"year\")].join(\" \")\r\n    }\r\n};\r\nvar getWeekCaption = function(date, shift, rejectWeekend) {\r\n    var firstDayOfWeek = this.option(\"firstDayOfWeek\");\r\n    var firstDayOfWeekIndex = (0, _type.isDefined)(firstDayOfWeek) ? firstDayOfWeek : getDefaultFirstDayOfWeekIndex(shift);\r\n    if (0 === firstDayOfWeekIndex && rejectWeekend) {\r\n        firstDayOfWeekIndex = MONDAY_INDEX\r\n    }\r\n    var firstWeekDate = _date.default.getFirstWeekDate(date, firstDayOfWeekIndex);\r\n    var weekendDuration = 2;\r\n    if (rejectWeekend) {\r\n        firstWeekDate = _date.default.normalizeDateByWeek(firstWeekDate, date)\r\n    }\r\n    if (firstDayOfWeek >= 6 && rejectWeekend) {\r\n        firstWeekDate.setDate(firstWeekDate.getDate() + (7 - firstDayOfWeek + 1))\r\n    }\r\n    var lastWeekDate = new Date(firstWeekDate);\r\n    var intervalCount = this.option(\"intervalCount\");\r\n    shift = shift || 6;\r\n    lastWeekDate = new Date(lastWeekDate.setDate(lastWeekDate.getDate() + (intervalCount > 1 ? 7 * (intervalCount - 1) + shift : shift)));\r\n    if (lastWeekDate.getDay() % 6 === 0 && rejectWeekend) {\r\n        lastWeekDate.setDate(lastWeekDate.getDate() + weekendDuration)\r\n    }\r\n    return {\r\n        text: formatCaptionByMonths.call(this, lastWeekDate, firstWeekDate),\r\n        startDate: firstWeekDate,\r\n        endDate: lastWeekDate\r\n    }\r\n};\r\nvar formatCaptionByMonths = function(lastDate, firstDate) {\r\n    var isDifferentMonthDates = firstDate.getMonth() !== lastDate.getMonth();\r\n    var isDifferentYears = firstDate.getFullYear() !== lastDate.getFullYear();\r\n    var useShortFormat = isDifferentMonthDates || this.option(\"_useShortDateFormat\");\r\n    var lastDateText;\r\n    var firstDateText;\r\n    if (isDifferentYears) {\r\n        firstDateText = _date2.default.format(firstDate, getCaptionFormat(true));\r\n        lastDateText = _date2.default.format(lastDate, getCaptionFormat(true))\r\n    } else {\r\n        firstDateText = _date2.default.format(firstDate, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\r\n        lastDateText = _date2.default.format(lastDate, getCaptionFormat(useShortFormat))\r\n    }\r\n    return firstDateText + \"-\" + lastDateText\r\n};\r\nvar getMonthCaption = function(date) {\r\n    var firstDate = new Date(_date.default.getFirstMonthDate(date));\r\n    var lastDate = new Date(_date.default.getLastMonthDate(firstDate));\r\n    var text;\r\n    if (this.option(\"intervalCount\") > 1) {\r\n        lastDate = new Date(firstDate);\r\n        lastDate.setMonth(firstDate.getMonth() + this.option(\"intervalCount\") - 1);\r\n        lastDate = new Date(_date.default.getLastMonthDate(lastDate));\r\n        var isSameYear = firstDate.getYear() === lastDate.getYear();\r\n        var lastDateText = getMonthYearFormat(lastDate);\r\n        var firstDateText = isSameYear ? _date2.default.getMonthNames(\"abbreviated\")[firstDate.getMonth()] : getMonthYearFormat(firstDate);\r\n        text = firstDateText + \"-\" + lastDateText\r\n    } else {\r\n        text = _date2.default.format(date, \"monthandyear\")\r\n    }\r\n    return {\r\n        text: text,\r\n        startDate: firstDate,\r\n        endDate: lastDate\r\n    }\r\n};\r\nvar dateGetter = function(date, offset) {\r\n    return new Date(date[this.setter](date[this.getter]() + offset))\r\n};\r\nvar getConfig = function(step) {\r\n    var agendaDuration;\r\n    switch (step) {\r\n        case \"day\":\r\n            return {\r\n                duration: 1 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    var format = getCaptionFormat(false, this.option(\"intervalCount\"), this._getConfig().duration);\r\n                    return {\r\n                        text: _date2.default.format(date, format),\r\n                        startDate: date,\r\n                        endDate: date\r\n                    }\r\n                }\r\n            };\r\n        case \"week\":\r\n            return {\r\n                duration: 7 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: getWeekCaption\r\n            };\r\n        case \"workWeek\":\r\n            return {\r\n                duration: 7 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    return getWeekCaption.call(this, date, 4, true)\r\n                }\r\n            };\r\n        case \"month\":\r\n            return {\r\n                duration: 1 * this.option(\"intervalCount\"), setter: \"setMonth\", getter: \"getMonth\", getDate: function(date, offset) {\r\n                    var currentDate = date.getDate();\r\n                    date.setDate(1);\r\n                    date = dateGetter.call(this, date, offset);\r\n                    var lastDate = _date.default.getLastMonthDay(date);\r\n                    date.setDate(currentDate < lastDate ? currentDate : lastDate);\r\n                    return date\r\n                }, getCaption: getMonthCaption\r\n            };\r\n        case \"agenda\":\r\n            agendaDuration = this.invoke(\"getAgendaDuration\");\r\n            agendaDuration = (0, _type.isNumeric)(agendaDuration) && agendaDuration > 0 ? agendaDuration : 7;\r\n            return {\r\n                duration: agendaDuration, setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    var format = getCaptionFormat(this.option(\"_useShortDateFormat\"));\r\n                    var firstDate = new Date(date);\r\n                    var lastDate = new Date(date);\r\n                    var text;\r\n                    if (agendaDuration > 1) {\r\n                        lastDate.setDate(lastDate.getDate() + agendaDuration - 1);\r\n                        text = formatCaptionByMonths.call(this, lastDate, date)\r\n                    } else {\r\n                        text = _date2.default.format(date, format)\r\n                    }\r\n                    return {\r\n                        text: text,\r\n                        startDate: firstDate,\r\n                        endDate: lastDate\r\n                    }\r\n                }\r\n            }\r\n    }\r\n};\r\nvar SchedulerNavigator = _ui2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            date: new Date,\r\n            displayedDate: void 0,\r\n            step: \"day\",\r\n            intervalCount: 1,\r\n            min: void 0,\r\n            max: void 0,\r\n            firstDayOfWeek: void 0,\r\n            _useShortDateFormat: false,\r\n            todayDate: function() {\r\n                return new Date\r\n            }\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !_devices.default.real().generic || _devices.default.isSimulator()\r\n            },\r\n            options: {\r\n                _useShortDateFormat: true\r\n            }\r\n        }])\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"step\":\r\n            case \"date\":\r\n            case \"intervalCount\":\r\n            case \"displayedDate\":\r\n                this._updateButtonsState();\r\n                this._renderCaption();\r\n                this._setCalendarOption(\"value\", this.option(\"date\"));\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this._updateButtonsState();\r\n                this._setCalendarOption(args.name, args.value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._setCalendarOption(args.name, args.value);\r\n                break;\r\n            case \"customizeDateNavigatorText\":\r\n                this._renderCaption();\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._next.option(args.name, args.value);\r\n                this._caption.option(args.name, args.value);\r\n                this._prev.option(args.name, args.value);\r\n                this._setCalendarOption(args.name, args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"_useShortDateFormat\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(ELEMENT_CLASS);\r\n        this._initButtons()\r\n    },\r\n    _initButtons: function() {\r\n        var $next = (0, _renderer.default)(\"<div>\").addClass(NEXT_BUTTON_CLASS);\r\n        this._next = this._createComponent($next, _button.default, {\r\n            icon: \"chevronnext\",\r\n            onClick: this._updateCurrentDate.bind(this, 1),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        var $caption = (0, _renderer.default)(\"<div>\").addClass(CAPTION_BUTTON_CLASS);\r\n        this._caption = this._createComponent($caption, _button.default, {\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        var $prev = (0, _renderer.default)(\"<div>\").addClass(PREVIOUS_BUTTON_CLASS);\r\n        this._prev = this._createComponent($prev, _button.default, {\r\n            icon: \"chevronprev\",\r\n            onClick: this._updateCurrentDate.bind(this, -1),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        this.setAria(\"label\", \"Next period\", $next);\r\n        this.setAria(\"label\", \"Previous period\", $prev);\r\n        this._updateButtonsState();\r\n        this.$element().append($prev, $caption, $next)\r\n    },\r\n    _updateButtonsState: function() {\r\n        var min = this.option(\"min\");\r\n        var max = this.option(\"max\");\r\n        var caption = this._getConfig().getCaption.call(this, this.option(\"displayedDate\") || this.option(\"date\"));\r\n        min = min ? _date.default.trimTime(min) : min;\r\n        max = max ? _date.default.trimTime(max) : max;\r\n        max && max.setHours(23, 59, 59);\r\n        this._prev.option(\"disabled\", min && !isNaN(min.getTime()) && this._getNextDate(-1, caption.endDate) < min);\r\n        this._next.option(\"disabled\", max && !isNaN(max.getTime()) && this._getNextDate(1, caption.startDate) > max)\r\n    },\r\n    _updateCurrentDate: function(direction) {\r\n        var date = this._getNextDate(direction);\r\n        _date.default.normalizeDate(date, this.option(\"min\"), this.option(\"max\"));\r\n        this.notifyObserver(\"currentDateUpdated\", date)\r\n    },\r\n    _getNextDate: function(direction) {\r\n        var initialDate = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\r\n        var stepConfig = this._getConfig();\r\n        var offset = stepConfig.duration * direction;\r\n        var date = stepConfig.getDate(new Date(initialDate || this.option(\"date\")), offset);\r\n        return date\r\n    },\r\n    _renderFocusTarget: _common.noop,\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._renderCaption()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderPopover();\r\n        this._renderCaptionKeys()\r\n    },\r\n    _isMobileLayout: function() {\r\n        return !_devices.default.current().generic\r\n    },\r\n    _renderPopover: function() {\r\n        var _this = this;\r\n        var overlayType = this._isMobileLayout() ? _popup.default : _popover.default;\r\n        var popoverContainer = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_POPOVER_CLASS);\r\n        this._popover = this._createComponent(popoverContainer, overlayType, {\r\n            contentTemplate: function() {\r\n                return _this._createPopupContent()\r\n            },\r\n            defaultOptionsRules: [{\r\n                device: function() {\r\n                    return !_devices.default.current().generic\r\n                },\r\n                options: {\r\n                    fullScreen: true,\r\n                    showCloseButton: false,\r\n                    toolbarItems: [{\r\n                        shortcut: \"cancel\"\r\n                    }]\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return _devices.default.current().generic\r\n                },\r\n                options: {\r\n                    target: this._caption.$element()\r\n                }\r\n            }]\r\n        });\r\n        this._popover.$element().appendTo(this.$element())\r\n    },\r\n    _createScrollable: function(content) {\r\n        var result = this._createComponent((0, _renderer.default)(\"<div>\"), _ui3.default, {\r\n            direction: \"vertical\"\r\n        });\r\n        result.$content().append(content);\r\n        return result\r\n    },\r\n    _createPopupContent: function() {\r\n        var result = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_CLASS);\r\n        this._calendar = this._createComponent(result, _calendar.default, this._calendarOptions());\r\n        if (this._isMobileLayout()) {\r\n            var scrollable = this._createScrollable(result);\r\n            return scrollable.$element()\r\n        }\r\n        return result\r\n    },\r\n    _calendarOptions: function() {\r\n        return {\r\n            min: this.option(\"min\"),\r\n            max: this.option(\"max\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            value: this.option(\"date\"),\r\n            _todayDate: this.option(\"todayDate\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            onValueChanged: function(e) {\r\n                if (!this.option(\"visible\")) {\r\n                    return\r\n                }\r\n                this.notifyObserver(\"currentDateUpdated\", e.value);\r\n                this._popover.hide()\r\n            }.bind(this),\r\n            hasFocus: function() {\r\n                return true\r\n            },\r\n            tabIndex: null\r\n        }\r\n    },\r\n    _renderCaption: function() {\r\n        var _this2 = this;\r\n        var date = this.option(\"displayedDate\") || this.option(\"date\");\r\n        var captionConfig = this._getConfig().getCaption.call(this, date);\r\n        var customizationFunction = this.option(\"customizeDateNavigatorText\");\r\n        var caption = (0, _type.isFunction)(customizationFunction) ? customizationFunction(captionConfig) : captionConfig.text;\r\n        this._caption.option({\r\n            text: caption,\r\n            onKeyboardHandled: function(opts) {\r\n                _this2.option(\"focusStateEnabled\") && !_this2.option(\"disabled\") && _this2._calendar._keyboardHandler(opts)\r\n            },\r\n            onClick: function() {\r\n                return _this2._popover.toggle()\r\n            }\r\n        })\r\n    },\r\n    _renderCaptionKeys: function() {\r\n        if (!this.option(\"focusStateEnabled\") || this.option(\"disabled\")) {\r\n            return\r\n        }\r\n        var that = this;\r\n        var executeHandler = function() {\r\n            if (that._popover.$content().is(\":hidden\")) {\r\n                that._popover.show()\r\n            } else {\r\n                return true\r\n            }\r\n        };\r\n        var tabHandler = function() {\r\n            that._popover.hide()\r\n        };\r\n        this._caption.registerKeyHandler(\"enter\", executeHandler);\r\n        this._caption.registerKeyHandler(\"space\", executeHandler);\r\n        this._caption.registerKeyHandler(\"tab\", tabHandler)\r\n    },\r\n    _setCalendarOption: function(name, value) {\r\n        if (this._calendar) {\r\n            this._calendar.option(name, value)\r\n        }\r\n    },\r\n    _getConfig: function() {\r\n        var step = this.option(\"step\");\r\n        var config = getConfig.call(this, step);\r\n        if (!config) {\r\n            throw _ui.default.Error(\"E1033\", step)\r\n        }\r\n        return config\r\n    }\r\n}).include(_uiScheduler.default);\r\n(0, _component_registrator.default)(\"dxSchedulerNavigator\", SchedulerNavigator);\r\nvar _default = SchedulerNavigator;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}