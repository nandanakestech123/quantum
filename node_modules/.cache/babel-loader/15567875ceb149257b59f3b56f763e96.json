{"ast":null,"code":"import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"./style.scss\";import{Link}from'react-router-dom';import SimpleReactValidator from'simple-react-validator';import{NormalInput,NormalSelect,NormalButton}from'component/common';import{displayImg}from'service/helperFunctions';import{DragFileUpload}from'../../../common';import{createServices,getServices,updateServices}from'redux/actions/services';import{getCategory}from'redux/actions/common';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";export var CreateServiceClass=/*#__PURE__*/function(_Component){_inherits(CreateServiceClass,_Component);var _super=_createSuper(CreateServiceClass);function CreateServiceClass(){var _this;_classCallCheck(this,CreateServiceClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{Course:'',category:'',Price:'',service_tax:'',discount:'',image:''},categoryOption:[],bannerImg:''};_this.getServicesDetail=function(){_this.props.getServices(\"\".concat(_this.props.match.params.id,\"/\")).then(function(res){_this.setDataFromStore();});};_this.setDataFromStore=function(){var servicesDetail=_this.props.servicesDetail;var formFields=_this.state.formFields;formFields['Course']=servicesDetail.Course;formFields['category']=servicesDetail.category;formFields['Price']=parseFloat(servicesDetail.Price).toFixed(2);formFields['service_tax']=Number(servicesDetail.service_tax);formFields['discount']=Number(servicesDetail.discount);// formFields['image'] = servicesDetail.image;\n_this.setState({formFields:formFields});console.log(\"ufjdfjssd services\",servicesDetail,formFields);};_this.getDatafromStore=function(){var categoryList=_this.props.categoryList;var categoryOption=_this.state.categoryOption;var _iterator=_createForOfIteratorHelper(categoryList),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;categoryOption.push({label:key.itm_desc,value:key.id});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({categoryOption:categoryOption});};_this.handleChange=function(_ref){var _ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields});};_this.handleInput=function(_ref2){var _ref2$target=_ref2.target,name=_ref2$target.name,value=_ref2$target.value;var formFields=Object.assign({},_this.state.formFields);if(name===\"image\"){var img=new FormData();img.append(\"image\",value);}formFields[name]=value===true?1:value;_this.setState({formFields:formFields});};_this.handleSubmit=function(){if(_this.validator.allValid()){var formFields=_this.state.formFields;var formData=new FormData();formData.append('image',formFields.image);formData.append('Course',formFields.Course);formData.append('category',formFields.category);formData.append('item_price',formFields.Price);formData.append('tax',formFields.service_tax);formData.append('discount',formFields.discount);if(_this.props.match.params.id){_this.props.updateServices(\"\".concat(_this.props.match.params.id,\"/\"),formData).then(function(res){console.log(res);if(res.status===201){_this.props.history.push(\"/admin/staff\");}});}else{_this.props.createServices(formData).then(function(res){console.log(res);if(res.status===201){_this.props.history.push(\"/admin/staff\");}});}}else{_this.validator.showMessages();}};_this.handleImageUpload=function(file){var formFields=_this.state.formFields;formFields['image']=file;_this.setState({formFields:formFields});};return _this;}_createClass(CreateServiceClass,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.validator=new SimpleReactValidator({validators:{// validations here\nprice:{message:'The :attribute must be a number format.',rule:function rule(val,params,validator){return validator.helpers.testRegex(val,/(?=.*?\\d)^\\$?(([1-9]\\d{0,2}(,\\d{3})*)|\\d+)?(\\.\\d{1,2})?$/)&&params.indexOf(val)===-1;},messageReplace:function messageReplace(message,params){return message.replace('',_this2.helpers.toSentence(params));},required:true},number:{message:'The :attribute must be a number format.',rule:function rule(val,params,validator){return validator.helpers.testRegex(val,/^[0-9\\b]+$/)&&params.indexOf(val)===-1;},messageReplace:function messageReplace(message,params){return message.replace('',_this2.helpers.toSentence(params));},required:true}},element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:this});// get api for category option\nthis.props.getCategory().then(function(){console.log(\"dfsdfsdf\");_this2.getDatafromStore();});if(this.props.match.params.id){this.getServicesDetail();// this.props.getShift(`?employee=${this.props.match.params.id}`).then(() => {\n//     this.getDatafromStore('shift');\n// });\n}}// get services detail\n},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,formFields=_this$state.formFields,categoryOption=_this$state.categoryOption,bannerImg=_this$state.bannerImg;var Course=formFields.Course,category=formFields.category,Price=formFields.Price,service_tax=formFields.service_tax,discount=formFields.discount,image=formFields.image;return/*#__PURE__*/React.createElement(\"div\",{className:\"p-4 create-service\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Add New Service\"),/*#__PURE__*/React.createElement(\"div\",{className:\"service-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Service Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:Course,name:\"Course\",onChange:this.handleChange})),this.validator.message('Course',Course,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Category\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group category-select\"},/*#__PURE__*/React.createElement(NormalSelect,{options:categoryOption,value:category,name:\"category\",onChange:this.handleChange})),this.validator.message('category',category,'required')))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Service Price\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:Price,name:\"Price\",onChange:this.handleChange})),this.validator.message('Price',Price,'required|price')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Service Tax\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:service_tax,name:\"service_tax\",onChange:this.handleChange})),this.validator.message('service_tax',service_tax,'required|currency')))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Discount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:discount,name:\"discount\",onChange:this.handleChange})),this.validator.message('discount',discount,'required|number')))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Upload Images\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 p-0\"},/*#__PURE__*/React.createElement(DragFileUpload,{className:\"file-uploader size-sm \".concat(image?\"\":'no-img'),label:\"Upload Thumbnail\",handleFileUpload:this.handleImageUpload},image?/*#__PURE__*/React.createElement(\"img\",{src:displayImg(image),alt:\"\"}):/*#__PURE__*/React.createElement(\"div\",{className:\"uploader-content text-center\"},/*#__PURE__*/React.createElement(\"span\",null,\"Upload Image\"))),!this.props.match.params.id?this.validator.message('image',image,'required'):\"\")),/*#__PURE__*/React.createElement(\"div\",{className:\"border-bottom-line\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"pt-5 d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/service\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Cancel\",normal:true,className:\"mr-2 col-12\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:function onClick(){return _this3.handleSubmit();},label:\"Save\",mainbg:true,className:\"mr-2 col-12\"})))));}}]);return CreateServiceClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{categoryList:state.common.categoryList,servicesDetail:state.services.servicesDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({createServices:createServices,getCategory:getCategory,getServices:getServices,updateServices:updateServices},dispatch);};export var CreateService=connect(mapStateToProps,mapDispatchToProps)(CreateServiceClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Services/CreateService/index.js"],"names":["React","Component","Link","SimpleReactValidator","NormalInput","NormalSelect","NormalButton","displayImg","DragFileUpload","createServices","getServices","updateServices","getCategory","connect","bindActionCreators","CreateServiceClass","state","formFields","Course","category","Price","service_tax","discount","image","categoryOption","bannerImg","getServicesDetail","props","match","params","id","then","res","setDataFromStore","servicesDetail","parseFloat","toFixed","Number","setState","console","log","getDatafromStore","categoryList","key","push","label","itm_desc","value","handleChange","target","name","Object","assign","handleInput","img","FormData","append","handleSubmit","validator","allValid","formData","status","history","showMessages","handleImageUpload","file","validators","price","message","rule","val","helpers","testRegex","indexOf","messageReplace","replace","toSentence","required","number","element","autoForceUpdate","mapStateToProps","common","services","mapDispatchToProps","dispatch","CreateService"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport \"./style.scss\";\r\nimport { Link } from 'react-router-dom';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport { NormalInput, NormalSelect, NormalButton } from 'component/common';\r\nimport { displayImg } from 'service/helperFunctions';\r\nimport { DragFileUpload } from '../../../common';\r\nimport { createServices, getServices, updateServices } from 'redux/actions/services';\r\nimport { getCategory } from 'redux/actions/common';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nexport class CreateServiceClass extends Component {\r\n    state = {\r\n        formFields: {\r\n            Course: '',\r\n            category: '',\r\n            Price: '',\r\n            service_tax: '',\r\n            discount: '',\r\n            image: '',\r\n        },\r\n        categoryOption: [],\r\n        bannerImg: '',\r\n    };\r\n\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            validators: {\r\n                // validations here\r\n                price: {\r\n                    message: 'The :attribute must be a number format.',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /(?=.*?\\d)^\\$?(([1-9]\\d{0,2}(,\\d{3})*)|\\d+)?(\\.\\d{1,2})?$/) && params.indexOf(val) === -1\r\n                    },\r\n                    messageReplace: (message, params) => message.replace('', this.helpers.toSentence(params)),\r\n                    required: true\r\n                },\r\n                number: {\r\n                    message: 'The :attribute must be a number format.',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^[0-9\\b]+$/) && params.indexOf(val) === -1\r\n                    },\r\n                    messageReplace: (message, params) => message.replace('', this.helpers.toSentence(params)),\r\n                    required: true\r\n                },\r\n\r\n            },\r\n\r\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\r\n            autoForceUpdate: this,\r\n        });\r\n        \r\n        // get api for category option\r\n        this.props.getCategory().then(() => {\r\n            console.log(\"dfsdfsdf\")\r\n            this.getDatafromStore();\r\n        });\r\n\r\n        if (this.props.match.params.id) {\r\n            this.getServicesDetail();\r\n\r\n            // this.props.getShift(`?employee=${this.props.match.params.id}`).then(() => {\r\n            //     this.getDatafromStore('shift');\r\n            // });\r\n        }\r\n    }\r\n\r\n    // get services detail\r\n    getServicesDetail = () => {\r\n        this.props.getServices(`${this.props.match.params.id}/`).then((res) => {\r\n            this.setDataFromStore();\r\n        })\r\n    }\r\n\r\n    // set data to formfield while edit services\r\n    setDataFromStore = () => {\r\n        let { servicesDetail } = this.props;\r\n        let { formFields } = this.state;\r\n        formFields['Course'] = servicesDetail.Course;\r\n        formFields['category'] = servicesDetail.category;\r\n        formFields['Price'] = parseFloat(servicesDetail.Price).toFixed(2);\r\n        formFields['service_tax'] = Number(servicesDetail.service_tax);\r\n        formFields['discount'] = Number(servicesDetail.discount);\r\n        // formFields['image'] = servicesDetail.image;\r\n        this.setState({ formFields })\r\n        console.log(\"ufjdfjssd services\", servicesDetail, formFields)\r\n    }\r\n\r\n    // dropdown option from api\r\n    getDatafromStore = () => {\r\n        let { categoryList } = this.props;\r\n        let { categoryOption } = this.state;\r\n        for (let key of categoryList) {\r\n            categoryOption.push({ label: key.itm_desc, value: key.id })\r\n        }\r\n        this.setState({\r\n            categoryOption\r\n        })\r\n    }\r\n\r\n    handleChange = ({ target: { value, name } }) => {\r\n        let formFields = Object.assign({}, this.state.formFields);\r\n\r\n        formFields[name] = value;\r\n\r\n        this.setState({\r\n            formFields,\r\n        });\r\n    };\r\n\r\n    //  image upload for formfield\r\n    handleInput = ({ target: { name, value } }) => {\r\n        let formFields = Object.assign({}, this.state.formFields)\r\n        if (name === \"image\") {\r\n            let img = new FormData()\r\n            img.append(\"image\", value)\r\n        }\r\n        formFields[name] = (value === true ? 1 : value);\r\n        this.setState({\r\n            formFields\r\n        })\r\n    }\r\n\r\n    // submit service create/update api\r\n    handleSubmit = () => {\r\n        if (this.validator.allValid()) {\r\n            let { formFields } = this.state;\r\n            const formData = new FormData();\r\n            formData.append('image', formFields.image)\r\n            formData.append('Course', formFields.Course)\r\n            formData.append('category', formFields.category)\r\n            formData.append('item_price', formFields.Price)\r\n            formData.append('tax', formFields.service_tax)\r\n            formData.append('discount', formFields.discount)\r\n            if (this.props.match.params.id) {\r\n                this.props.updateServices(`${this.props.match.params.id}/`, formData).then((res) => {\r\n                    console.log(res)\r\n                    if(res.status===201){\r\n                        this.props.history.push(`/admin/staff`);\r\n                    }\r\n                })\r\n            } else {\r\n                this.props.createServices(formData).then((res) => {\r\n                    console.log(res)\r\n                    if(res.status===201){\r\n                        this.props.history.push(`/admin/staff`);\r\n                    }\r\n                })\r\n            }\r\n\r\n        } else {\r\n            this.validator.showMessages();\r\n        }\r\n    };\r\n\r\n\r\n    handleImageUpload = (file) => {\r\n        let { formFields } = this.state;\r\n        formFields['image'] = file;\r\n        this.setState({\r\n            formFields\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let { formFields, categoryOption, bannerImg } = this.state;\r\n\r\n        let {\r\n            Course,\r\n            category,\r\n            Price,\r\n            service_tax,\r\n            discount,\r\n            image } = formFields;\r\n\r\n        return (\r\n            <div className=\"p-4 create-service\">\r\n                <h2>Add New Service</h2>\r\n                <div className=\"service-detail\">\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Service Name\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalInput\r\n                                        placeholder=\"Enter here\"\r\n                                        value={Course}\r\n                                        name=\"Course\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('Course', Course, 'required')}\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Category\r\n                            </label>\r\n                                <div className=\"input-group category-select\">\r\n                                    <NormalSelect\r\n                                        options={categoryOption}\r\n                                        value={category}\r\n                                        name=\"category\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('category', category, 'required')}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Service Price\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalInput\r\n                                        placeholder=\"Enter here\"\r\n                                        value={Price}\r\n                                        name=\"Price\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('Price', Price, 'required|price')}\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Service Tax\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalInput\r\n                                        placeholder=\"Enter here\"\r\n                                        value={service_tax}\r\n                                        name=\"service_tax\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('service_tax', service_tax, 'required|currency')}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Discount\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalInput\r\n                                        placeholder=\"Enter here\"\r\n                                        value={discount}\r\n                                        name=\"discount\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('discount', discount, 'required|number')}\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                            Upload Images\r\n                    </label>\r\n                        <div className=\"col-md-12 p-0\">\r\n                            <DragFileUpload\r\n                                className={`file-uploader size-sm ${image ? \"\" : 'no-img'}`}\r\n                                label=\"Upload Thumbnail\"\r\n                                handleFileUpload={this.handleImageUpload}\r\n                            >\r\n                                {image ?\r\n                                    <img src={displayImg(image)} alt=\"\" /> :\r\n                                    <div className=\"uploader-content text-center\">\r\n                                        <span>Upload Image</span>\r\n                                    </div>\r\n                                }\r\n                            </DragFileUpload>\r\n                            {!this.props.match.params.id ? this.validator.message('image', image, 'required') : \"\"}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"border-bottom-line\"></div>\r\n                    <div className=\"pt-5 d-flex\">\r\n                        <div className=\"col-2\">\r\n                            <Link to=\"/admin/service\">\r\n                                <NormalButton label=\"Cancel\" normal={true} className=\"mr-2 col-12\" />\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"col-2\">\r\n                            <NormalButton onClick={() => this.handleSubmit()} label=\"Save\" mainbg={true} className=\"mr-2 col-12\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    categoryList: state.common.categoryList,\r\n    servicesDetail: state.services.servicesDetail\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        createServices,\r\n        getCategory,\r\n        getServices,\r\n        updateServices\r\n    }, dispatch)\r\n}\r\n\r\nexport const CreateService = connect(mapStateToProps, mapDispatchToProps)(CreateServiceClass)"]},"metadata":{},"sourceType":"module"}