{"ast":null,"code":"/**\r\n * DevExtreme (viz/sparklines/base_sparkline.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _base_widget = _interopRequireDefault(require(\"../core/base_widget\"));\n\nvar _extend2 = require(\"../../core/utils/extend\");\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\n\nvar _utils = require(\"../core/utils\");\n\nvar _translator2d = require(\"../translators/translator2d\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _tooltip = require(\"../core/tooltip\");\n\nvar _export = require(\"../core/export\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_LINE_SPACING = 2;\nvar EVENT_NS = \"sparkline-tooltip\";\nvar POINTER_ACTION = (0, _index.addNamespace)([_pointer.default.down, _pointer.default.move], EVENT_NS);\nvar _extend = _extend2.extend;\nvar _floor = Math.floor;\n\nfunction inCanvas(_ref, x, y) {\n  var left = _ref.left,\n      top = _ref.top,\n      bottom = _ref.bottom,\n      right = _ref.right,\n      width = _ref.width,\n      height = _ref.height;\n  return (0, _utils.pointInCanvas)({\n    left: left,\n    top: top,\n    right: width - right,\n    bottom: height - bottom,\n    width: width,\n    height: height\n  }, x, y);\n}\n\nfunction pointerHandler(_ref2) {\n  var data = _ref2.data;\n  var that = data.widget;\n\n  that._enableOutHandler();\n\n  that._showTooltip();\n}\n\nfunction generateDefaultCustomizeTooltipCallback(fontOptions, rtlEnabled) {\n  var lineSpacing = fontOptions.lineSpacing;\n  var lineHeight = (void 0 !== lineSpacing && null !== lineSpacing ? lineSpacing : DEFAULT_LINE_SPACING) + fontOptions.size;\n  return function (customizeObject) {\n    var html = \"\";\n    var vt = customizeObject.valueText;\n\n    for (var i = 0; i < vt.length; i += 2) {\n      html += \"<tr><td>\" + vt[i] + \"</td><td style='width: 15px'></td><td style='text-align: \" + (rtlEnabled ? \"left\" : \"right\") + \"'>\" + vt[i + 1] + \"</td></tr>\";\n    }\n\n    return {\n      html: \"<table style='border-spacing:0px; line-height: \" + lineHeight + \"px'>\" + html + \"</table>\"\n    };\n  };\n}\n\nfunction generateCustomizeTooltipCallback(customizeTooltip, fontOptions, rtlEnabled) {\n  var defaultCustomizeTooltip = generateDefaultCustomizeTooltipCallback(fontOptions, rtlEnabled);\n\n  if ((0, _type.isFunction)(customizeTooltip)) {\n    return function (customizeObject) {\n      var res = customizeTooltip.call(customizeObject, customizeObject);\n\n      if (!(\"html\" in res) && !(\"text\" in res)) {\n        _extend(res, defaultCustomizeTooltip.call(customizeObject, customizeObject));\n      }\n\n      return res;\n    };\n  } else {\n    return defaultCustomizeTooltip;\n  }\n}\n\nfunction createAxis(isHorizontal) {\n  var translator = new _translator2d.Translator2D({}, {}, {\n    shiftZeroValue: !isHorizontal,\n    isHorizontal: !!isHorizontal\n  });\n  return {\n    getTranslator: function () {\n      return translator;\n    },\n    update: function (range, canvas, options) {\n      translator.update(range, canvas, options);\n    },\n    getVisibleArea: function () {\n      var visibleArea = translator.getCanvasVisibleArea();\n      return [visibleArea.min, visibleArea.max];\n    },\n    visualRange: _common.noop,\n    calculateInterval: _common.noop,\n    getMarginOptions: function () {\n      return {};\n    }\n  };\n}\n\nvar _initTooltip;\n\nvar BaseSparkline = _base_widget.default.inherit({\n  _getLayoutItems: _common.noop,\n  _useLinks: false,\n  _themeDependentChanges: [\"OPTIONS\"],\n  _initCore: function () {\n    var that = this;\n    that._tooltipTracker = that._renderer.root;\n\n    that._tooltipTracker.attr({\n      \"pointer-events\": \"visible\"\n    });\n\n    that._createHtmlElements();\n\n    that._initTooltipEvents();\n\n    that._argumentAxis = createAxis(true);\n    that._valueAxis = createAxis();\n  },\n  _getDefaultSize: function () {\n    return this._defaultSize;\n  },\n  _disposeCore: function () {\n    this._disposeWidgetElements();\n\n    this._disposeTooltipEvents();\n\n    this._ranges = null;\n  },\n  _optionChangesOrder: [\"OPTIONS\"],\n  _change_OPTIONS: function () {\n    this._prepareOptions();\n\n    this._change([\"UPDATE\"]);\n  },\n  _customChangesOrder: [\"UPDATE\"],\n  _change_UPDATE: function () {\n    this._update();\n  },\n  _update: function () {\n    var that = this;\n\n    if (that._tooltipShown) {\n      that._tooltipShown = false;\n\n      that._tooltip.hide();\n    }\n\n    that._cleanWidgetElements();\n\n    that._updateWidgetElements();\n\n    that._drawWidgetElements();\n  },\n  _updateWidgetElements: function () {\n    var canvas = this._getCorrectCanvas();\n\n    this._updateRange();\n\n    this._argumentAxis.update(this._ranges.arg, canvas, this._getStick());\n\n    this._valueAxis.update(this._ranges.val, canvas);\n  },\n  _getStick: function () {},\n  _applySize: function (rect) {\n    this._allOptions.size = {\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    };\n\n    this._change([\"UPDATE\"]);\n  },\n  _setupResizeHandler: _common.noop,\n  _prepareOptions: function () {\n    return _extend(true, {}, this._themeManager.theme(), this.option());\n  },\n  _getTooltipCoords: function () {\n    var canvas = this._canvas;\n\n    var rootOffset = this._renderer.getRootOffset();\n\n    return {\n      x: canvas.width / 2 + rootOffset.left,\n      y: canvas.height / 2 + rootOffset.top\n    };\n  },\n  _initTooltipEvents: function () {\n    var data = {\n      widget: this\n    };\n\n    this._renderer.root.off(\".\" + EVENT_NS).on(POINTER_ACTION, data, pointerHandler);\n  },\n  _showTooltip: function () {\n    var that = this;\n    var tooltip;\n\n    if (!that._tooltipShown) {\n      that._tooltipShown = true;\n      tooltip = that._getTooltip();\n      tooltip.isEnabled() && that._tooltip.show(that._getTooltipData(), that._getTooltipCoords(), {});\n    }\n  },\n  _hideTooltip: function () {\n    if (this._tooltipShown) {\n      this._tooltipShown = false;\n\n      this._tooltip.hide();\n    }\n  },\n  _stopCurrentHandling: function () {\n    this._hideTooltip();\n  },\n  _enableOutHandler: function () {\n    var that = this;\n\n    if (that._outHandler) {\n      return;\n    }\n\n    var handler = function (_ref3) {\n      var pageX = _ref3.pageX,\n          pageY = _ref3.pageY;\n\n      var _that$_renderer$getRo = that._renderer.getRootOffset(),\n          left = _that$_renderer$getRo.left,\n          top = _that$_renderer$getRo.top;\n\n      var x = _floor(pageX - left);\n\n      var y = _floor(pageY - top);\n\n      if (!inCanvas(that._canvas, x, y)) {\n        that._hideTooltip();\n\n        that._disableOutHandler();\n      }\n    };\n\n    _events_engine.default.on(_dom_adapter.default.getDocument(), POINTER_ACTION, handler);\n\n    this._outHandler = handler;\n  },\n  _disableOutHandler: function () {\n    this._outHandler && _events_engine.default.off(_dom_adapter.default.getDocument(), POINTER_ACTION, this._outHandler);\n    this._outHandler = null;\n  },\n  _disposeTooltipEvents: function () {\n    this._tooltipTracker.off();\n\n    this._disableOutHandler();\n\n    this._renderer.root.off(\".\" + EVENT_NS);\n  },\n  _getTooltip: function () {\n    var that = this;\n\n    if (!that._tooltip) {\n      _initTooltip.apply(this, arguments);\n\n      that._setTooltipRendererOptions(that._tooltipRendererOptions);\n\n      that._tooltipRendererOptions = null;\n\n      that._setTooltipOptions();\n    }\n\n    return that._tooltip;\n  }\n});\n\nvar _default = BaseSparkline;\nexports.default = _default;\nBaseSparkline.addPlugin(_tooltip.plugin);\n_initTooltip = BaseSparkline.prototype._initTooltip;\nBaseSparkline.prototype._initTooltip = _common.noop;\nvar _disposeTooltip = BaseSparkline.prototype._disposeTooltip;\n\nBaseSparkline.prototype._disposeTooltip = function () {\n  if (this._tooltip) {\n    _disposeTooltip.apply(this, arguments);\n  }\n};\n\nBaseSparkline.prototype._setTooltipRendererOptions = function () {\n  var options = this._getRendererOptions();\n\n  if (this._tooltip) {\n    this._tooltip.setRendererOptions(options);\n  } else {\n    this._tooltipRendererOptions = options;\n  }\n};\n\nBaseSparkline.prototype._setTooltipOptions = function () {\n  var tooltip = this._tooltip;\n\n  var options = tooltip && this._getOption(\"tooltip\");\n\n  tooltip && tooltip.update(_extend({}, options, {\n    customizeTooltip: generateCustomizeTooltipCallback(options.customizeTooltip, options.font, this.option(\"rtlEnabled\")),\n    enabled: options.enabled && this._isTooltipEnabled()\n  }));\n};\n\nvar exportPlugin = (0, _extend2.extend)(true, {}, _export.plugin, {\n  init: _common.noop,\n  dispose: _common.noop,\n  customize: null,\n  members: {\n    _getExportMenuOptions: null\n  }\n});\nBaseSparkline.addPlugin(exportPlugin);\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/sparklines/base_sparkline.js"],"names":["exports","default","_events_engine","_interopRequireDefault","require","_dom_adapter","_type","_base_widget","_extend2","_index","_pointer","_utils","_translator2d","_common","_tooltip","_export","obj","__esModule","DEFAULT_LINE_SPACING","EVENT_NS","POINTER_ACTION","addNamespace","down","move","_extend","extend","_floor","Math","floor","inCanvas","_ref","x","y","left","top","bottom","right","width","height","pointInCanvas","pointerHandler","_ref2","data","that","widget","_enableOutHandler","_showTooltip","generateDefaultCustomizeTooltipCallback","fontOptions","rtlEnabled","lineSpacing","lineHeight","size","customizeObject","html","vt","valueText","i","length","generateCustomizeTooltipCallback","customizeTooltip","defaultCustomizeTooltip","isFunction","res","call","createAxis","isHorizontal","translator","Translator2D","shiftZeroValue","getTranslator","update","range","canvas","options","getVisibleArea","visibleArea","getCanvasVisibleArea","min","max","visualRange","noop","calculateInterval","getMarginOptions","_initTooltip","BaseSparkline","inherit","_getLayoutItems","_useLinks","_themeDependentChanges","_initCore","_tooltipTracker","_renderer","root","attr","_createHtmlElements","_initTooltipEvents","_argumentAxis","_valueAxis","_getDefaultSize","_defaultSize","_disposeCore","_disposeWidgetElements","_disposeTooltipEvents","_ranges","_optionChangesOrder","_change_OPTIONS","_prepareOptions","_change","_customChangesOrder","_change_UPDATE","_update","_tooltipShown","hide","_cleanWidgetElements","_updateWidgetElements","_drawWidgetElements","_getCorrectCanvas","_updateRange","arg","_getStick","val","_applySize","rect","_allOptions","_setupResizeHandler","_themeManager","theme","option","_getTooltipCoords","_canvas","rootOffset","getRootOffset","off","on","tooltip","_getTooltip","isEnabled","show","_getTooltipData","_hideTooltip","_stopCurrentHandling","_outHandler","handler","_ref3","pageX","pageY","_that$_renderer$getRo","_disableOutHandler","getDocument","apply","arguments","_setTooltipRendererOptions","_tooltipRendererOptions","_setTooltipOptions","_default","addPlugin","plugin","prototype","_disposeTooltip","_getRendererOptions","setRendererOptions","_getOption","font","enabled","_isTooltipEnabled","exportPlugin","init","dispose","customize","members","_getExportMenuOptions","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/sparklines/base_sparkline.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _base_widget = _interopRequireDefault(require(\"../core/base_widget\"));\r\nvar _extend2 = require(\"../../core/utils/extend\");\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\r\nvar _utils = require(\"../core/utils\");\r\nvar _translator2d = require(\"../translators/translator2d\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _tooltip = require(\"../core/tooltip\");\r\nvar _export = require(\"../core/export\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_LINE_SPACING = 2;\r\nvar EVENT_NS = \"sparkline-tooltip\";\r\nvar POINTER_ACTION = (0, _index.addNamespace)([_pointer.default.down, _pointer.default.move], EVENT_NS);\r\nvar _extend = _extend2.extend;\r\nvar _floor = Math.floor;\r\n\r\nfunction inCanvas(_ref, x, y) {\r\n    var left = _ref.left,\r\n        top = _ref.top,\r\n        bottom = _ref.bottom,\r\n        right = _ref.right,\r\n        width = _ref.width,\r\n        height = _ref.height;\r\n    return (0, _utils.pointInCanvas)({\r\n        left: left,\r\n        top: top,\r\n        right: width - right,\r\n        bottom: height - bottom,\r\n        width: width,\r\n        height: height\r\n    }, x, y)\r\n}\r\n\r\nfunction pointerHandler(_ref2) {\r\n    var data = _ref2.data;\r\n    var that = data.widget;\r\n    that._enableOutHandler();\r\n    that._showTooltip()\r\n}\r\n\r\nfunction generateDefaultCustomizeTooltipCallback(fontOptions, rtlEnabled) {\r\n    var lineSpacing = fontOptions.lineSpacing;\r\n    var lineHeight = (void 0 !== lineSpacing && null !== lineSpacing ? lineSpacing : DEFAULT_LINE_SPACING) + fontOptions.size;\r\n    return function(customizeObject) {\r\n        var html = \"\";\r\n        var vt = customizeObject.valueText;\r\n        for (var i = 0; i < vt.length; i += 2) {\r\n            html += \"<tr><td>\" + vt[i] + \"</td><td style='width: 15px'></td><td style='text-align: \" + (rtlEnabled ? \"left\" : \"right\") + \"'>\" + vt[i + 1] + \"</td></tr>\"\r\n        }\r\n        return {\r\n            html: \"<table style='border-spacing:0px; line-height: \" + lineHeight + \"px'>\" + html + \"</table>\"\r\n        }\r\n    }\r\n}\r\n\r\nfunction generateCustomizeTooltipCallback(customizeTooltip, fontOptions, rtlEnabled) {\r\n    var defaultCustomizeTooltip = generateDefaultCustomizeTooltipCallback(fontOptions, rtlEnabled);\r\n    if ((0, _type.isFunction)(customizeTooltip)) {\r\n        return function(customizeObject) {\r\n            var res = customizeTooltip.call(customizeObject, customizeObject);\r\n            if (!(\"html\" in res) && !(\"text\" in res)) {\r\n                _extend(res, defaultCustomizeTooltip.call(customizeObject, customizeObject))\r\n            }\r\n            return res\r\n        }\r\n    } else {\r\n        return defaultCustomizeTooltip\r\n    }\r\n}\r\n\r\nfunction createAxis(isHorizontal) {\r\n    var translator = new _translator2d.Translator2D({}, {}, {\r\n        shiftZeroValue: !isHorizontal,\r\n        isHorizontal: !!isHorizontal\r\n    });\r\n    return {\r\n        getTranslator: function() {\r\n            return translator\r\n        },\r\n        update: function(range, canvas, options) {\r\n            translator.update(range, canvas, options)\r\n        },\r\n        getVisibleArea: function() {\r\n            var visibleArea = translator.getCanvasVisibleArea();\r\n            return [visibleArea.min, visibleArea.max]\r\n        },\r\n        visualRange: _common.noop,\r\n        calculateInterval: _common.noop,\r\n        getMarginOptions: function() {\r\n            return {}\r\n        }\r\n    }\r\n}\r\nvar _initTooltip;\r\nvar BaseSparkline = _base_widget.default.inherit({\r\n    _getLayoutItems: _common.noop,\r\n    _useLinks: false,\r\n    _themeDependentChanges: [\"OPTIONS\"],\r\n    _initCore: function() {\r\n        var that = this;\r\n        that._tooltipTracker = that._renderer.root;\r\n        that._tooltipTracker.attr({\r\n            \"pointer-events\": \"visible\"\r\n        });\r\n        that._createHtmlElements();\r\n        that._initTooltipEvents();\r\n        that._argumentAxis = createAxis(true);\r\n        that._valueAxis = createAxis()\r\n    },\r\n    _getDefaultSize: function() {\r\n        return this._defaultSize\r\n    },\r\n    _disposeCore: function() {\r\n        this._disposeWidgetElements();\r\n        this._disposeTooltipEvents();\r\n        this._ranges = null\r\n    },\r\n    _optionChangesOrder: [\"OPTIONS\"],\r\n    _change_OPTIONS: function() {\r\n        this._prepareOptions();\r\n        this._change([\"UPDATE\"])\r\n    },\r\n    _customChangesOrder: [\"UPDATE\"],\r\n    _change_UPDATE: function() {\r\n        this._update()\r\n    },\r\n    _update: function() {\r\n        var that = this;\r\n        if (that._tooltipShown) {\r\n            that._tooltipShown = false;\r\n            that._tooltip.hide()\r\n        }\r\n        that._cleanWidgetElements();\r\n        that._updateWidgetElements();\r\n        that._drawWidgetElements()\r\n    },\r\n    _updateWidgetElements: function() {\r\n        var canvas = this._getCorrectCanvas();\r\n        this._updateRange();\r\n        this._argumentAxis.update(this._ranges.arg, canvas, this._getStick());\r\n        this._valueAxis.update(this._ranges.val, canvas)\r\n    },\r\n    _getStick: function() {},\r\n    _applySize: function(rect) {\r\n        this._allOptions.size = {\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        };\r\n        this._change([\"UPDATE\"])\r\n    },\r\n    _setupResizeHandler: _common.noop,\r\n    _prepareOptions: function() {\r\n        return _extend(true, {}, this._themeManager.theme(), this.option())\r\n    },\r\n    _getTooltipCoords: function() {\r\n        var canvas = this._canvas;\r\n        var rootOffset = this._renderer.getRootOffset();\r\n        return {\r\n            x: canvas.width / 2 + rootOffset.left,\r\n            y: canvas.height / 2 + rootOffset.top\r\n        }\r\n    },\r\n    _initTooltipEvents: function() {\r\n        var data = {\r\n            widget: this\r\n        };\r\n        this._renderer.root.off(\".\" + EVENT_NS).on(POINTER_ACTION, data, pointerHandler)\r\n    },\r\n    _showTooltip: function() {\r\n        var that = this;\r\n        var tooltip;\r\n        if (!that._tooltipShown) {\r\n            that._tooltipShown = true;\r\n            tooltip = that._getTooltip();\r\n            tooltip.isEnabled() && that._tooltip.show(that._getTooltipData(), that._getTooltipCoords(), {})\r\n        }\r\n    },\r\n    _hideTooltip: function() {\r\n        if (this._tooltipShown) {\r\n            this._tooltipShown = false;\r\n            this._tooltip.hide()\r\n        }\r\n    },\r\n    _stopCurrentHandling: function() {\r\n        this._hideTooltip()\r\n    },\r\n    _enableOutHandler: function() {\r\n        var that = this;\r\n        if (that._outHandler) {\r\n            return\r\n        }\r\n        var handler = function(_ref3) {\r\n            var pageX = _ref3.pageX,\r\n                pageY = _ref3.pageY;\r\n            var _that$_renderer$getRo = that._renderer.getRootOffset(),\r\n                left = _that$_renderer$getRo.left,\r\n                top = _that$_renderer$getRo.top;\r\n            var x = _floor(pageX - left);\r\n            var y = _floor(pageY - top);\r\n            if (!inCanvas(that._canvas, x, y)) {\r\n                that._hideTooltip();\r\n                that._disableOutHandler()\r\n            }\r\n        };\r\n        _events_engine.default.on(_dom_adapter.default.getDocument(), POINTER_ACTION, handler);\r\n        this._outHandler = handler\r\n    },\r\n    _disableOutHandler: function() {\r\n        this._outHandler && _events_engine.default.off(_dom_adapter.default.getDocument(), POINTER_ACTION, this._outHandler);\r\n        this._outHandler = null\r\n    },\r\n    _disposeTooltipEvents: function() {\r\n        this._tooltipTracker.off();\r\n        this._disableOutHandler();\r\n        this._renderer.root.off(\".\" + EVENT_NS)\r\n    },\r\n    _getTooltip: function() {\r\n        var that = this;\r\n        if (!that._tooltip) {\r\n            _initTooltip.apply(this, arguments);\r\n            that._setTooltipRendererOptions(that._tooltipRendererOptions);\r\n            that._tooltipRendererOptions = null;\r\n            that._setTooltipOptions()\r\n        }\r\n        return that._tooltip\r\n    }\r\n});\r\nvar _default = BaseSparkline;\r\nexports.default = _default;\r\nBaseSparkline.addPlugin(_tooltip.plugin);\r\n_initTooltip = BaseSparkline.prototype._initTooltip;\r\nBaseSparkline.prototype._initTooltip = _common.noop;\r\nvar _disposeTooltip = BaseSparkline.prototype._disposeTooltip;\r\nBaseSparkline.prototype._disposeTooltip = function() {\r\n    if (this._tooltip) {\r\n        _disposeTooltip.apply(this, arguments)\r\n    }\r\n};\r\nBaseSparkline.prototype._setTooltipRendererOptions = function() {\r\n    var options = this._getRendererOptions();\r\n    if (this._tooltip) {\r\n        this._tooltip.setRendererOptions(options)\r\n    } else {\r\n        this._tooltipRendererOptions = options\r\n    }\r\n};\r\nBaseSparkline.prototype._setTooltipOptions = function() {\r\n    var tooltip = this._tooltip;\r\n    var options = tooltip && this._getOption(\"tooltip\");\r\n    tooltip && tooltip.update(_extend({}, options, {\r\n        customizeTooltip: generateCustomizeTooltipCallback(options.customizeTooltip, options.font, this.option(\"rtlEnabled\")),\r\n        enabled: options.enabled && this._isTooltipEnabled()\r\n    }))\r\n};\r\nvar exportPlugin = (0, _extend2.extend)(true, {}, _export.plugin, {\r\n    init: _common.noop,\r\n    dispose: _common.noop,\r\n    customize: null,\r\n    members: {\r\n        _getExportMenuOptions: null\r\n    }\r\n});\r\nBaseSparkline.addPlugin(exportPlugin);\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}