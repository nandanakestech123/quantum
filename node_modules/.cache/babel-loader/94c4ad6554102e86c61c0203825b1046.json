{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Toast}from\"service/toast\";import\"./style.scss\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,getProjectStatus,getJobtitle}from\"redux/actions/common\";import{NormalButton,NormalDate,TableWrapper,NormalMultiSelect}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import{withTranslation}from\"react-i18next\";import{NormalInput}from\"component/common\";import{Link}from\"react-router-dom\";import updateBtn from\"../../../../assets/images/edit1.png\";import deleteBtn from\"../../../../assets/images/delete1.png\";import{getProject,deleteProject}from\"redux/actions/project\";import{getTokenDetails}from\"redux/actions/auth\";import _ from\"lodash\";import CustomerSearch from\"component/Admin/Quantum/CustomerSearch\";export var ListProjectClass=/*#__PURE__*/function(_React$Component){_inherits(ListProjectClass,_React$Component);var _super=_createSuper(ListProjectClass);function ListProjectClass(){var _this;_classCallCheck(this,ListProjectClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Project Title\"},{label:\"Customer Name\"},{label:\"Status\"},// { label: \"Action\" },\n{label:\"Edit\"},{label:\"Delete\"}],projectList:[],pageMeta:{// per_page: 8,\n// current_page: 1,\n// total: 7,\n// total_pages: 1\n// chunk: 10,\n// page: 1,\n// total: 10,\n// totalPages: 2,\n},formField:{projectTitle:\"\",status:\"\",custName:\"\"},statusOption:[],selectedStatus:[],statusArr:[],statusStr:\"\",active:false,currentIndex:-1,page:1,// limit: 10,\nlimit:5,isOpenvoidCheckout:false// is_loading: false,\n// isMounted: true,\n// salesCollectionHeader: [\n//   { label: \"Sales Collection\" },\n//   { label: \"Before Tax\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// nonSalesCollectionHeader: [\n//   { label: \"Non Sales Collection\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\n// salesTransactionHeader: [\n//   { label: \"Sales Transaction\" },\n//   { label: \"Amount\" },\n//   { label: \"Paid\" },\n//   { label: \"Outstanding\" },\n// ],\n// ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\n// TreatmentDoneHeader: [\n//   { label: \"Customer\" },\n//   { label: \"Customer Reference\" },\n//   { label: \"Treatment Done\" },\n//   { label: \"Description\" },\n//   { label: \"Staff\" },\n//   { label: \"Amount\" },\n// DayDate: new Date(),\n// runDayEnd: false,\n// reportDate: \"\",\n// sales_collec: null,\n// sales_trasac: null,\n// ar_trasac: null,\n// treatment_done: null,\n// dept_sales: null,\n};_this.componentWillMount=function(){console.log(\"this.props in list project\",_this.props);console.log(\"this.props.tokenDetail\",_this.props.tokenDetail);console.log(\"this.props.tokenDetail.username\",_this.props.tokenDetail.username);_this.getStatus();};_this.handleMultiSelect=function(e){var _this$state=_this.state,selectedStatus=_this$state.selectedStatus,statusArr=_this$state.statusArr,statusStr=_this$state.statusStr;selectedStatus=e;console.log(\"selectedStatus\",selectedStatus);_this.setState({statusStr:\"\",statusArr:[]});var _iterator=_createForOfIteratorHelper(selectedStatus),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;statusArr.push(key.label);}}catch(err){_iterator.e(err);}finally{_iterator.f();}statusStr=statusArr.toString();console.log(\"statusArr\",statusArr);console.log(\"statusStr\",statusStr);// this.updateState({});\n_this.setState({statusStr:statusStr});};_this.getProjects=function(){var _this$state2=_this.state,projectList=_this$state2.projectList,pageMeta=_this$state2.pageMeta,formField=_this$state2.formField,page=_this$state2.page,limit=_this$state2.limit,statusStr=_this$state2.statusStr,statusArr=_this$state2.statusArr;var projectTitle=formField.projectTitle,status=formField.status,custName=formField.custName;// let From = new Date();\n// if (fromDate && fromDate !== \"\") {\n//   From = fromDate;\n// } else {\n//   this.setState({ fromDate: From });\n// }\n// let To = new Date();\n// if (toDate && toDate !== \"\") {\n//   To = toDate;\n// } else {\n//   this.setState({ toDate: To });\n// }\nconsole.log(\"statusStr in getprojects:\",statusStr);console.log(\"statusArr in getprojects:\",statusArr);console.log(\"this.props.tokenDetail.username\",_this.props.tokenDetail.username);_this.props.getCommonApi(\"projectlist/?searchtitle=\".concat(projectTitle,\"&searchstatus=\").concat(statusStr,\"&searchname=\").concat(custName,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(res,\"dsfdfaafg\");_context.next=3;return _this.setState({projectList:[]});case 3:projectList=res.data.dataList;// pageMeta = res.data.meta.pagination;\npageMeta=res.data.pagination;// pageMeta = {per_page:2, current_page:1, total:2, total_pages:4}\n_this.setState({projectList:projectList,pageMeta:pageMeta});// this.setState({ projectList });\nconsole.log(\"projectList\",projectList);console.log(\"pageMeta\",pageMeta);console.log(\"statusStr after clear\",statusStr);console.log(\"statusArr after clear\",statusArr);case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.getStatus=function(){var statusOption=_this.state.statusOption;statusOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"dropdownproject\").then(function(res){// activeMenu = []\nconsole.log(\"res.data\",res);var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;statusOption.push({value:key.id,label:key.dropdown_item,code:key.dropdown_desc,active:key.active});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}console.log(\"statusOption\",statusOption);_this.setState({statusOption:statusOption});});};_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pageNo){var page;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_this.state.page;page=pageNo.page;_context2.next=4;return _this.setState({page:page});case 4:_this.getProjects();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.handleChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _ref3$target,value,name,formField;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;formField=_this.state.formField;formField[name]=value;_context3.next=5;return _this.setState({formField:formField});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.handleSearch=function(){_this.getProjects();console.log(\"projectStatusList\",_this.props.projectStatusList);};_this.handleDeleteProject=function(id){_this.props.deleteProject(\"\".concat(id,\"/\")).then(function(res){return _this.getProjects({});});};_this.handleClick=function(key){if(!_this.state.visible){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{visible:!prevState.visible};});};_this.handleCustomerSearch=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(event){var _this$state3,formField,visible;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:// event.persist();\n_this$state3=_this.state,formField=_this$state3.formField,visible=_this$state3.visible;formField.custName=event.target.value;_context5.next=4;return _this.setState({formField:formField,visible:true});case 4:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.search();case 1:case\"end\":return _context4.stop();}}},_callee4);})),500);}_this.debouncedFn();case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref5.apply(this,arguments);};}();_this.search=function(searchString){var formField=_this.state.formField;_this.props.getCommonApi(\"custappt/?search=\".concat(formField.custName)).then(function(key){var status=key.status,data=key.data;if(status===200){_this.setState({customerOption:data});}});};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){var formField;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:formField=_this.state.formField;formField[\"custName\"]=data.cust_name;_context6.next=4;return _this.setState({formField:formField,customerOption:[]});case 4:_this.handleClick();case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x5){return _ref7.apply(this,arguments);};}();return _this;}_createClass(ListProjectClass,[{key:\"componentDidMount\",value:// componentWillUnmount() {\n//   this.state.isMounted = false;\n// }\n// updateState = data => {\n//   if (this.state.isMounted) this.setState(data);\n// };\nfunction componentDidMount(){// let From = new Date();\n// let { formField } = this.state;\n// let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\n// formField[\"fromDate\"] = firstdayMonth;\n// this.setState({\n//   formField,\n// });\nthis.getProjects();// this.queryHandler({});\n}},{key:\"render\",value:function render(){var _this2=this;var _this$state4=this.state,headerDetails=_this$state4.headerDetails,pageMeta=_this$state4.pageMeta,projectList=_this$state4.projectList,formField=_this$state4.formField,statusOption=_this$state4.statusOption,customerOption=_this$state4.customerOption,visible=_this$state4.visible;var tokenDetail=this.props.tokenDetail;var projectTitle=formField.projectTitle,status=formField.status,custName=formField.custName;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"project-section col-md-10 align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"label-head mb-4\"},t(\"Project\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 filter\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Project Title\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:projectTitle,name:\"projectTitle\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Customer Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Search Customer..\",value:custName,name:\"custName\",onChange:this.handleCustomerSearch,onClick:this.handleClick})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",mainbg:true,className:\"confirm\",label:\"Search\",outline:false,onClick:this.handleSearch}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 filter\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-9 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-black common-label-text mr-2\"},t(\"Status\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalMultiSelect,{options:statusOption// value={status}\n// name=\"status\"\n,handleMultiSelect:this.handleMultiSelect})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"confirm\",label:\"Add project\",onClick:function onClick(){return _this2.props.history.push(\"project/add\");}}))),visible?/*#__PURE__*/React.createElement(CustomerSearch,{t:t,customerOption:customerOption,handleSelectCustomer:function handleSelectCustomer(item){return _this2.handleSelectCustomer(item);}}):null,/*#__PURE__*/React.createElement(\"div\",{className:\"project-table\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta},projectList?projectList.map(function(item,index){var title=item.title,customer_name=item.customer_name,status=item.status,id=item.id;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},title)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},customer_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"img\",{src:updateBtn,width:\"35\",height:\"35\",alt:\"\",className:\"action-img bg-transparent\",onClick:function onClick(){return _this2.props.history.push(\"/admin/project/\".concat(id,\"/editProject\"));}}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"img\",{src:deleteBtn,width:\"35\",height:\"35\",alt:\"\",className:\"action-img bg-transparent\",onClick:function onClick(){return _this2.handleDeleteProject(id);}}))));}):null)))));}}]);return ListProjectClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{tokenDetail:state.authStore.tokenDetails// projectStatusList: state.common.projectStatusList,\n};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,deleteProject:deleteProject,getTokenDetails:getTokenDetails// getProjectStatus,\n// getJobtitle,\n},dispatch);};export var ListProject=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ListProjectClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Project/ListProject/index.js"],"names":["React","Toast","connect","bindActionCreators","getCommonApi","getProjectStatus","getJobtitle","NormalButton","NormalDate","TableWrapper","NormalMultiSelect","dateFormat","withTranslation","NormalInput","Link","updateBtn","deleteBtn","getProject","deleteProject","getTokenDetails","_","CustomerSearch","ListProjectClass","state","headerDetails","label","projectList","pageMeta","formField","projectTitle","status","custName","statusOption","selectedStatus","statusArr","statusStr","active","currentIndex","page","limit","isOpenvoidCheckout","componentWillMount","console","log","props","tokenDetail","username","getStatus","handleMultiSelect","e","setState","key","push","toString","getProjects","then","res","data","dataList","pagination","value","id","dropdown_item","code","dropdown_desc","handlePagination","pageNo","handleClick","document","addEventListener","handleOutsideClick","removeEventListener","prevState","node","contains","target","handleChange","name","handleSearch","projectStatusList","handleDeleteProject","visible","handleCustomerSearch","event","debouncedFn","debounce","search","searchString","customerOption","handleSelectCustomer","cust_name","t","history","item","map","index","title","customer_name","Component","mapStateToProps","authStore","tokenDetails","mapDispatchToProps","dispatch","ListProject"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  getProjectStatus,\r\n  getJobtitle,\r\n} from \"redux/actions/common\";\r\nimport {\r\n  NormalButton,\r\n  NormalDate,\r\n  TableWrapper,\r\n  NormalMultiSelect,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NormalInput } from \"component/common\";\r\nimport { Link } from \"react-router-dom\";\r\nimport updateBtn from \"../../../../assets/images/edit1.png\";\r\nimport deleteBtn from \"../../../../assets/images/delete1.png\";\r\nimport { getProject, deleteProject } from \"redux/actions/project\";\r\nimport { getTokenDetails } from \"redux/actions/auth\";\r\nimport _ from \"lodash\";\r\nimport CustomerSearch from \"component/Admin/Quantum/CustomerSearch\";\r\n\r\nexport class ListProjectClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Project Title\" },\r\n      { label: \"Customer Name\" },\r\n      { label: \"Status\" },\r\n      // { label: \"Action\" },\r\n      { label: \"Edit\" },\r\n      { label: \"Delete\" },\r\n    ],\r\n\r\n    projectList: [],\r\n    pageMeta: {\r\n      // per_page: 8,\r\n      // current_page: 1,\r\n      // total: 7,\r\n      // total_pages: 1\r\n      // chunk: 10,\r\n      // page: 1,\r\n      // total: 10,\r\n      // totalPages: 2,\r\n    },\r\n\r\n    formField: {\r\n      projectTitle: \"\",\r\n      status: \"\",\r\n      custName: \"\",\r\n    },\r\n    statusOption: [],\r\n\r\n    selectedStatus: [],\r\n    statusArr: [],\r\n    statusStr: \"\",\r\n\r\n    active: false,\r\n    currentIndex: -1,\r\n    page: 1,\r\n    // limit: 10,\r\n    limit: 5,\r\n    isOpenvoidCheckout: false,\r\n    // is_loading: false,\r\n    // isMounted: true,\r\n\r\n    // salesCollectionHeader: [\r\n    //   { label: \"Sales Collection\" },\r\n    //   { label: \"Before Tax\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // nonSalesCollectionHeader: [\r\n    //   { label: \"Non Sales Collection\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\r\n    // salesTransactionHeader: [\r\n    //   { label: \"Sales Transaction\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Paid\" },\r\n    //   { label: \"Outstanding\" },\r\n    // ],\r\n    // ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\r\n    // TreatmentDoneHeader: [\r\n    //   { label: \"Customer\" },\r\n    //   { label: \"Customer Reference\" },\r\n    //   { label: \"Treatment Done\" },\r\n    //   { label: \"Description\" },\r\n    //   { label: \"Staff\" },\r\n    //   { label: \"Amount\" },\r\n    // DayDate: new Date(),\r\n    // runDayEnd: false,\r\n    // reportDate: \"\",\r\n    // sales_collec: null,\r\n    // sales_trasac: null,\r\n    // ar_trasac: null,\r\n    // treatment_done: null,\r\n    // dept_sales: null,\r\n  };\r\n\r\n  // componentWillUnmount() {\r\n  //   this.state.isMounted = false;\r\n  // }\r\n\r\n  // updateState = data => {\r\n  //   if (this.state.isMounted) this.setState(data);\r\n  // };\r\n\r\n  componentDidMount() {\r\n    // let From = new Date();\r\n    // let { formField } = this.state;\r\n    // let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\r\n    // formField[\"fromDate\"] = firstdayMonth;\r\n    // this.setState({\r\n    //   formField,\r\n    // });\r\n\r\n    this.getProjects();\r\n    // this.queryHandler({});\r\n  }\r\n\r\n  componentWillMount = () => {\r\n    console.log(\"this.props in list project\", this.props);\r\n    console.log(\"this.props.tokenDetail\", this.props.tokenDetail);\r\n    console.log(\r\n      \"this.props.tokenDetail.username\",\r\n      this.props.tokenDetail.username\r\n    );\r\n    this.getStatus();\r\n  };\r\n\r\n  // componentWillUnmount = () => {\r\n  //   this.handleMultiSelect()\r\n  // }\r\n\r\n  // updateState = data => {\r\n  //   if (this.state.isMounted) this.setState(data);\r\n  // };\r\n\r\n  handleMultiSelect = e => {\r\n    let { selectedStatus, statusArr, statusStr } = this.state;\r\n    selectedStatus = e;\r\n    console.log(\"selectedStatus\", selectedStatus);\r\n\r\n    this.setState({\r\n      statusStr: \"\",\r\n      statusArr: [],\r\n    });\r\n\r\n    for (let key of selectedStatus) {\r\n      statusArr.push(key.label);\r\n    }\r\n    statusStr = statusArr.toString();\r\n    console.log(\"statusArr\", statusArr);\r\n    console.log(\"statusStr\", statusStr);\r\n\r\n    // this.updateState({});\r\n    this.setState({\r\n      statusStr,\r\n    });\r\n  };\r\n  // handleMultiSelect = () => {\r\n  //   // let { projectList, pageMeta, formField, page, limit } = this.state;\r\n  //   // let { projectTitle, status, custName } = formField;\r\n\r\n  //   // this.formField.status = e;\r\n  //   // console.log(\"this.formField.status\",this.formField.status)\r\n  //   // this.setState({ this.formField.status });\r\n\r\n  //   let { formField } = this.state;\r\n  //   formField[status] = value;\r\n  //   await this.setState({\r\n  //     formField,\r\n  //   });\r\n  // };\r\n\r\n  // handleChange = async ({ target: { value, name } }) => {\r\n  //   let { formField } = this.state;\r\n  //   formField[name] = value;\r\n  //   await this.setState({\r\n  //     formField,\r\n  //   });\r\n  // };\r\n\r\n  getProjects = () => {\r\n    let {\r\n      projectList,\r\n      pageMeta,\r\n      formField,\r\n      page,\r\n      limit,\r\n      statusStr,\r\n      statusArr,\r\n    } = this.state;\r\n    let { projectTitle, status, custName } = formField;\r\n\r\n    // let From = new Date();\r\n    // if (fromDate && fromDate !== \"\") {\r\n    //   From = fromDate;\r\n    // } else {\r\n    //   this.setState({ fromDate: From });\r\n    // }\r\n    // let To = new Date();\r\n    // if (toDate && toDate !== \"\") {\r\n    //   To = toDate;\r\n    // } else {\r\n    //   this.setState({ toDate: To });\r\n    // }\r\n    console.log(\"statusStr in getprojects:\", statusStr);\r\n    console.log(\"statusArr in getprojects:\", statusArr);\r\n    console.log(\r\n      \"this.props.tokenDetail.username\",\r\n      this.props.tokenDetail.username\r\n    );\r\n\r\n    this.props\r\n      .getCommonApi(\r\n        `projectlist/?searchtitle=${projectTitle}&searchstatus=${statusStr}&searchname=${custName}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(async res => {\r\n        console.log(res, \"dsfdfaafg\");\r\n        await this.setState({ projectList: [] });\r\n        projectList = res.data.dataList;\r\n        // pageMeta = res.data.meta.pagination;\r\n        pageMeta = res.data.pagination;\r\n        // pageMeta = {per_page:2, current_page:1, total:2, total_pages:4}\r\n        this.setState({ projectList, pageMeta });\r\n        // this.setState({ projectList });\r\n        console.log(\"projectList\", projectList);\r\n        console.log(\"pageMeta\", pageMeta);\r\n        console.log(\"statusStr after clear\", statusStr);\r\n        console.log(\"statusArr after clear\", statusArr);\r\n      });\r\n  };\r\n\r\n  getStatus = () => {\r\n    let { statusOption } = this.state;\r\n    statusOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props.getCommonApi(`dropdownproject`).then(res => {\r\n      // activeMenu = []\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        statusOption.push({\r\n          value: key.id,\r\n          label: key.dropdown_item,\r\n          code: key.dropdown_desc,\r\n          active: key.active,\r\n        });\r\n      }\r\n      console.log(\"statusOption\", statusOption);\r\n      this.setState({ statusOption });\r\n    });\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.getProjects();\r\n  };\r\n  // pagination\r\n  // handlePagination = page => {\r\n  //   this.queryHandler(page);\r\n  // };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    await this.setState({\r\n      formField,\r\n    });\r\n  };\r\n\r\n  handleSearch = () => {\r\n    this.getProjects();\r\n    console.log(\"projectStatusList\", this.props.projectStatusList);\r\n  };\r\n\r\n  // seach change with api call\r\n  // handlesearch = event => {\r\n  //   event.persist();\r\n\r\n  //   if (!this.debouncedFn) {\r\n  //     this.debouncedFn = _.debounce(() => {\r\n  //       let searchString = event.target.value;\r\n  //       let data = { search: searchString };\r\n  //       this.queryHandler(data);\r\n  //     }, 500);\r\n  //   }\r\n  //   this.debouncedFn();\r\n  // };\r\n\r\n  // getProject = async data => {\r\n  //   this.updateState({ isLoading: true });\r\n  //   let { search } = this.state;\r\n  //   let { page = 1, limit = 10 } = data;\r\n  //   await this.props\r\n  //     .getProject(`?page=${page}&limit=${limit}&search=${search}`)\r\n  //     .then(res => {\r\n  //       let { data } = res;\r\n  //       console.log(data);\r\n  //       //  let { customerDetails } = this.props;\r\n  //       this.updateState({\r\n  //         customerList: data.dataList,\r\n  //         meta: data.meta?.pagination,\r\n  //         isLoading: false,\r\n  //       });\r\n  //     });\r\n  // };\r\n\r\n  // api call for staff\r\n  // queryHandler = async data => {\r\n  //   this.updateState({ is_loading: true });\r\n  //   let { page = 1, limit = 10 } = data;\r\n  //   await this.props.getProject(\r\n  //     `?page=${page}&limit=${limit}`\r\n  //   );\r\n  //   let { projectDetails } = this.props;\r\n  //   let { projectList, pageMeta } = this.state;\r\n  //   projectList = projectDetails.data;\r\n  //   pageMeta = projectDetails.meta?.pagination;\r\n  //   this.updateState({\r\n  //     projectList,\r\n  //     pageMeta,\r\n  //     is_loading: false,\r\n  //   });\r\n  // };\r\n\r\n  // delete api call for staff\r\n  handleDeleteProject = id => {\r\n    this.props.deleteProject(`${id}/`).then(res => this.getProjects({}));\r\n  };\r\n  handleClick = key => {\r\n    if (!this.state.visible) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      visible: !prevState.visible,\r\n    }));\r\n  };\r\n  handleCustomerSearch = async event => {\r\n    // event.persist();\r\n    let { formField, visible } = this.state;\r\n    formField.custName = event.target.value;\r\n    await this.setState({ formField, visible: true });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        this.search();\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n  search = searchString => {\r\n    let { formField } = this.state;\r\n    this.props\r\n      .getCommonApi(`custappt/?search=${formField.custName}`)\r\n      .then(key => {\r\n        let { status, data } = key;\r\n\r\n        if (status === 200) {\r\n          this.setState({ customerOption: data });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSelectCustomer = async data => {\r\n    let { formField } = this.state;\r\n    formField[\"custName\"] = data.cust_name;\r\n    await this.setState({\r\n      formField,\r\n      customerOption: [],\r\n    });\r\n    this.handleClick();\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      pageMeta,\r\n      projectList,\r\n      formField,\r\n      statusOption,\r\n      customerOption,\r\n      visible,\r\n    } = this.state;\r\n    let { tokenDetail } = this.props;\r\n\r\n    let { projectTitle, status, custName } = formField;\r\n\r\n    let { t } = this.props;\r\n\r\n    return (\r\n      <div className=\"project-section col-md-10 align-items-center\">\r\n        <div className=\"col-md-12 d-flex\">\r\n          {/* <p className=\"label-head mb-4\">{t(\"Project Listing\")}</p> */}\r\n          <p className=\"label-head mb-4\">{t(\"Project\")}</p>\r\n        </div>\r\n\r\n        <div className=\"row m-0 filter\">\r\n          <div className=\"col-md-4 col-12\">\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"Project Title\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalInput\r\n                  value={projectTitle}\r\n                  name=\"projectTitle\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-5 col-12\">\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"Customer Name\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalInput\r\n                  placeholder=\"Search Customer..\"\r\n                  value={custName}\r\n                  name=\"custName\"\r\n                  onChange={this.handleCustomerSearch}\r\n                  onClick={this.handleClick}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-3 col-12\">\r\n            <NormalButton\r\n              buttonClass={\"mx-2 mb-3\"}\r\n              mainbg={true}\r\n              className=\"confirm\"\r\n              label=\"Search\"\r\n              outline={false}\r\n              onClick={this.handleSearch}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row m-0 filter\">\r\n          <div className=\"col-md-9 col-12\">\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-black common-label-text mr-2\">\r\n                {t(\"Status\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                {/* <NormalInput\r\n                  value={status}\r\n                  name=\"status\"\r\n                  onChange={this.handleChange}\r\n                /> */}\r\n                <NormalMultiSelect\r\n                  options={statusOption}\r\n                  // value={status}\r\n                  // name=\"status\"\r\n                  handleMultiSelect={this.handleMultiSelect}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* <div className=\"col-md-2 col-12\"></div> */}\r\n\r\n          <div className=\"col-md-3 col-12\">\r\n            <NormalButton\r\n              buttonClass={\"mx-2\"}\r\n              mainbg={true}\r\n              className=\"confirm\"\r\n              label=\"Add project\"\r\n              onClick={() => this.props.history.push(\"project/add\")}\r\n            />\r\n          </div>\r\n        </div>\r\n        {visible ? (\r\n          <CustomerSearch\r\n            t={t}\r\n            customerOption={customerOption}\r\n            handleSelectCustomer={item => this.handleSelectCustomer(item)}\r\n          />\r\n        ) : null}\r\n        <div className=\"project-table\">\r\n          <div className=\"py-4\">\r\n            <div className=\"table-container\">\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n                pageMeta={pageMeta}\r\n              >\r\n                {projectList\r\n                  ? projectList.map((item, index) => {\r\n                      let { title, customer_name, status, id } = item;\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {title}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {customer_name}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {status}\r\n                            </div>\r\n                          </td>\r\n\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <img\r\n                                src={updateBtn}\r\n                                width=\"35\"\r\n                                height=\"35\"\r\n                                alt=\"\"\r\n                                className=\"action-img bg-transparent\"\r\n                                onClick={() =>\r\n                                  this.props.history.push(\r\n                                    `/admin/project/${id}/editProject`\r\n                                  )\r\n                                }\r\n                              />\r\n                            </div>\r\n                          </td>\r\n\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <img\r\n                                src={deleteBtn}\r\n                                width=\"35\"\r\n                                height=\"35\"\r\n                                alt=\"\"\r\n                                className=\"action-img bg-transparent\"\r\n                                onClick={() => this.handleDeleteProject(id)}\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetail: state.authStore.tokenDetails,\r\n  // projectStatusList: state.common.projectStatusList,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      deleteProject,\r\n      getTokenDetails,\r\n      // getProjectStatus,\r\n      // getJobtitle,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ListProject = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ListProjectClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}