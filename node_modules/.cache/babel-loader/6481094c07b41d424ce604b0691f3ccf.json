{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NormalInput,NormalSelect,NormalButton,NormalDate,NormalModal}from'component/common';import{CreateAppointment,updateForm}from'redux/actions/appointment';import{getCustomer,getCommonApi}from'redux/actions/common';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import{dateFormat}from'service/helperFunctions';import{history}from'helpers';import SimpleReactValidator from'simple-react-validator';import closeIcon from'assets/images/close.png';import _ from'lodash';export var AppointmentFormClass=/*#__PURE__*/function(_Component){_inherits(AppointmentFormClass,_Component);var _super=_createSuper(AppointmentFormClass);function AppointmentFormClass(){var _this;_classCallCheck(this,AppointmentFormClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={active:false,appt_fr_time:'',appt_to_time:\"\",currentValue:'-1',formFields:{customerName:\"\",emp_id:\"\",appointmentDate:new Date(),bookingStatus:\"\",Source_Codeid:\"\",ItemSite_Codeid:\"\",new_remark:\"\",Appt_typeid:\"\",// emp_noid : 4,\nRoom_Codeid:\"\",sec_status:\"\"},multipleCustomerForm:{noOfCustomer:1,treatment:\"\",room:\"\"},bookingList:[],isOpenModal:false,multipleCustomr:1,customerElement:[],siteList:[],sourceList:[],channelList:[],staffList:[],secStatusList:[],roomList:[],customerOption:[],search:\"\",customerId:0};_this.componentWillMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,staffList,formFields,basicApptDetail;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this),validators:{date:{// name the rule\nmessage:'The :attribute must be grater than today.',rule:function rule(val,params,validator){var date1=new Date(dateFormat(new Date()));var date2=new Date(dateFormat(val));console.log(\"gagasdfsdfsdffqwef\",date1,date2,date1.getTime(),date2.getTime());return date1.getTime()<=date2.getTime();},//   messageReplace: (message, params) => message.replace(':values', this.helpers.toSentence(params)),  // optional\nrequired:true// optional\n}}});_this.props.getCustomer('all/').then(function(){});_this.props.getCommonApi('bookingstatus/').then(function(res){var status=res.status,data=res.data,sec_data=res.sec_data;console.log(data);if(status===200){_this.setState({bookingList:data,secStatusList:sec_data});}});// this.handleCustomerElement()\n_this.props.onRef(_assertThisInitialized(_this));_this$state=_this.state,staffList=_this$state.staffList,formFields=_this$state.formFields;basicApptDetail=_this.props.basicApptDetail;formFields['appointmentDate']=basicApptDetail.date;formFields['ItemSite_Codeid']=basicApptDetail.branchId;_context.next=10;return _this.setState({formFields:formFields});case 10:_this.getListData();_this.props.getCommonApi(\"appointment/Staffs/?Outlet=\".concat(_this.state.formFields.ItemSite_Codeid,\"&date=\").concat(dateFormat(new Date()))).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;staffList.push({value:value.id,label:value.emp_name});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({staffList:staffList});}});case 12:case\"end\":return _context.stop();}}},_callee);}));_this.getListData=function(){var _this$state2=_this.state,staffList=_this$state2.staffList,sourceList=_this$state2.sourceList,siteList=_this$state2.siteList,channelList=_this$state2.channelList,roomList=_this$state2.roomList;_this.props.getCommonApi(\"source/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var value=_step2.value;sourceList.push({value:value.id,label:value.source_desc});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({sourceList:sourceList});console.log(sourceList,\"jhksdfkjsdhfks\");}});_this.props.getCommonApi(\"treatment/Outlet/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator3=_createForOfIteratorHelper(data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var value=_step3.value;siteList.push({value:value.id,label:value.itemsite_code});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState({siteList:siteList});console.log(siteList,\"jhksdfkjsdhfks\");}});_this.props.getCommonApi(\"appttype/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator4=_createForOfIteratorHelper(data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var value=_step4.value;channelList.push({value:value.id,label:value.appt_type_desc});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this.setState({channelList:channelList});console.log(siteList,\"jhksdfkjsdhfks\");}});_this.props.getCommonApi(\"room/?outlet=\".concat(_this.state.formFields.ItemSite_Codeid)).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator5=_createForOfIteratorHelper(data),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var value=_step5.value;roomList.push({value:value.id,label:value.displayname});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_this.setState({roomList:roomList});console.log(roomList,\"jhksdfkjsdhfks\");}});};_this.selectTime=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(key,type){var formFields;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:formFields=_this.state.formFields;if(!(type===\"appt_fr_time\")){_context2.next=7;break;}formFields['appt_fr_time']=key;_context2.next=5;return _this.setState({formFields:formFields,appt_fr_time:key});case 5:_context2.next=10;break;case 7:formFields['appt_to_time']=key;_context2.next=10;return _this.setState({formFields:formFields,appt_to_time:key});case 10:_context2.next=12;return _this.props.updateForm('appointmentCustomerDetail',formFields);case 12:console.log(\"sdfsdfsdfsd\",formFields);case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();_this.handleClick=function(key){if(!_this.state.active){document.addEventListener('click',_this.handleOutsideClick,false);}else{document.removeEventListener('click',_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentValue:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.onFocus=function(){_this.validator.showMessages();};_this.handleChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _ref3$target,value,name,formFields,staffList;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;formFields=_this.state.formFields;formFields[name]=value;_context3.next=5;return _this.setState({formFields:formFields});case 5:_this.props.updateForm('customerDetail',formFields);_context3.next=8;return _this.props.updateForm('appointmentCustomerDetail',formFields);case 8:if(name===\"ItemSite_Codeid\"){staffList=_this.state.staffList;_this.props.getCommonApi(\"appointment/Staffs/?Outlet=\".concat(value)).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator6=_createForOfIteratorHelper(data),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _value=_step6.value;staffList.push({value:_value.id,label:_value.emp_name});}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}_this.setState({staffList:staffList});}});}case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.handleMultiple=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref5){var _ref5$target,value,name,multipleCustomerForm;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;multipleCustomerForm=_this.state.multipleCustomerForm;if(name===\"noOfCustomer\"){multipleCustomerForm[name]=Number(value);}if(name===\"sameForAllTreatment\"||name===\"differentForAllTreatment\"){if(name===\"differentForAllTreatment\"){multipleCustomerForm['treatment']=2;}else{multipleCustomerForm['treatment']=1;}}else{if(name===\"differentForAllRoom\"){multipleCustomerForm['room']=2;}else{multipleCustomerForm['room']=1;}}_context4.next=6;return _this.setState({multipleCustomerForm:multipleCustomerForm});case 6:_this.props.updateForm('multipleCustomerForm',multipleCustomerForm);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref6.apply(this,arguments);};}();_this.handleSubmit=function(){history.push(\"/admin/appointment/create/select-treatment\");};_this.getTime=function(data){var time=data.split(\" \");var time1=time[0].split(\":\");console.log(time,time1,\"kghjhgdjfgsdf\");if(time[1]===\"pm\"){return(Number(time1[0])+12===24?\"00\":Number(time1[0])+12)+\":\"+time1[1];}else{return time1[0]<9?\"0\"+time[0]:time1[0]+\":\"+time1[1];}};_this.handleDialog=function(){var isOpenModal=_this.state.isOpenModal;isOpenModal=!isOpenModal;_this.setState({isOpenModal:isOpenModal});};_this.handleMultipleCustomer=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var multipleCustomerForm;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:multipleCustomerForm=_this.props.multipleCustomerForm;_context5.next=3;return _this.setState({multipleCustomr:multipleCustomerForm.noOfCustomer,customerElement:[]});case 3:console.log(multipleCustomerForm,_this.state,\"dkjfkshgfghdfk\",multipleCustomerForm.noOfCustomer);_this.handleCustomerElement(multipleCustomerForm.noOfCustomer);case 5:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleSearch=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(event){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.setState({search:event.target.value});case 2:console.log(_this.state.search);if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var customerList,basicApptDetail;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:customerList=_this.state.customerList;basicApptDetail=_this.props.basicApptDetail;_this.search(basicApptDetail);case 3:case\"end\":return _context6.stop();}}},_callee6);})),500);}_this.debouncedFn();case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x5){return _ref8.apply(this,arguments);};}();_this.search=function(basicApptDetail){var search=_this.state.search;_this.props.getCommonApi(\"custappt/?Outlet=\".concat(basicApptDetail.branchId?basicApptDetail.branchId:\"\",\"&search=\").concat(search)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});};_this.handleSelectCustomer=function(data){var formFields=_this.state.formFields;formFields[\"customerName\"]=data.id;formFields[\"custName\"]=data.cust_name;_this.setState({formFields:formFields,isOpenModal:false,customerOption:[]});_this.setState({customerId:data.id});_this.props.selectedCustomer(data.id);};return _this;}_createClass(AppointmentFormClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.onRef(null);}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,appt_fr_time=_this$state3.appt_fr_time,active=_this$state3.active,currentValue=_this$state3.currentValue,bookingList=_this$state3.bookingList,channelList=_this$state3.channelList,secStatusList=_this$state3.secStatusList,roomList=_this$state3.roomList,customerOption=_this$state3.customerOption,isOpenModal=_this$state3.isOpenModal,multipleCustomr=_this$state3.multipleCustomr,appt_to_time=_this$state3.appt_to_time,siteList=_this$state3.siteList,sourceList=_this$state3.sourceList,staffList=_this$state3.staffList,customerElement=_this$state3.customerElement,formFields=_this$state3.formFields;var _this$props=this.props,customerDetail=_this$props.customerDetail,customerList=_this$props.customerList,multipleCustomerForm=_this$props.multipleCustomerForm;var noOfCustomer=multipleCustomerForm.noOfCustomer,treatment=multipleCustomerForm.treatment,room=multipleCustomerForm.room;return/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Date \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDate,{value:new Date(formFields.appointmentDate),name:\"appointmentDate\",type:\"date\",onChange:this.handleChange,minDate:new Date(),showDisabledMonthNavigation:true})),this.validator.message('appointmentDate',formFields.appointmentDate,'required|date')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Name \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n// options={siteList}\n,{value:formFields.custName,name:\"customerName\",onClick:function onClick(){return _this2.setState({isOpenModal:true});}// onChange={this.handleSearch}                              \n,className:\"search px-3 p-0\"})),this.validator.message('customerName',formFields.customerName,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Booking status \",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-18\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\" }\n,{options:bookingList,value:formFields.bookingStatus,name:\"bookingStatus\",onChange:this.handleChange,className:\"customer-name status py-1\"}),this.validator.message('Booking Status',formFields.bookingStatus,'required'))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Channel\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:channelList,value:formFields.Appt_typeid,name:\"Appt_typeid\",onChange:this.handleChange,className:\"customer-name py-1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Remark\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n// options={siteList}\n,{value:formFields.new_remark,name:\"new_remark\",onChange:this.handleChange,className:\"customer-name\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Source Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:sourceList,value:formFields.Source_Codeid,name:\"Source_Codeid\",onChange:this.handleChange,className:\"customer-name py-1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Room\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:roomList,value:formFields.Room_Codeid,name:\"Room_Codeid\",onChange:this.handleChange,className:\"customer-name py-1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Secondary status\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:secStatusList,value:formFields.sec_status,name:\"sec_status\",onChange:this.handleChange,className:\"customer-name py-1\"})))),/*#__PURE__*/React.createElement(NormalModal,{className:\"multiple-appointment select-category\",style:{minWidth:\"800px\"},modal:isOpenModal,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2 mb-5 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pl-0 mb-3 fs-18 py-2\"},\"Select Customer\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 pl-0\"},\"Search\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"input\",{name:\"search\",onChange:this.handleSearch,className:\"search m-0 p-0 px-3\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 p-0\",mainbg:true,className:\" fs-15 confirm\",label:\"Search\",outline:false,onClick:function onClick(){return _this2.search(_this2.state.search);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 table-header w-100 m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},\"Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},\"Phone\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},\"Cust Code\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"Email\")),/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100\"},customerOption.length>0?customerOption.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 table-body w-100\",onClick:function onClick(){return _this2.handleSelectCustomer(item);},key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_phone1),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},item.cust_code),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},item.cust_email));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"},\"No Data are available\")))));}}]);return AppointmentFormClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,customerList:state.common.customerList,multipleCustomerForm:state.appointment.multipleCustomerForm,basicApptDetail:state.appointment.basicApptDetail,appointmentCustomerDetail:state.appointment.appointmentCustomerDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({CreateAppointment:CreateAppointment,updateForm:updateForm,getCustomer:getCustomer,getCommonApi:getCommonApi},dispatch);};export var AppointmentForm=connect(mapStateToProps,mapDispatchToProps)(AppointmentFormClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Appointment/CreateAppointment/AppointmentForm.js"],"names":["React","Component","NormalInput","NormalSelect","NormalButton","NormalDate","NormalModal","CreateAppointment","updateForm","getCustomer","getCommonApi","connect","bindActionCreators","dateFormat","history","SimpleReactValidator","closeIcon","_","AppointmentFormClass","state","active","appt_fr_time","appt_to_time","currentValue","formFields","customerName","emp_id","appointmentDate","Date","bookingStatus","Source_Codeid","ItemSite_Codeid","new_remark","Appt_typeid","Room_Codeid","sec_status","multipleCustomerForm","noOfCustomer","treatment","room","bookingList","isOpenModal","multipleCustomr","customerElement","siteList","sourceList","channelList","staffList","secStatusList","roomList","customerOption","search","customerId","componentWillMount","validator","element","message","autoForceUpdate","validators","date","rule","val","params","date1","date2","console","log","getTime","required","props","then","res","status","data","sec_data","setState","onRef","basicApptDetail","branchId","getListData","key","value","push","id","label","emp_name","source_desc","itemsite_code","appt_type_desc","displayname","selectTime","type","handleClick","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","onFocus","showMessages","handleChange","name","handleMultiple","Number","handleSubmit","time","split","time1","handleDialog","handleMultipleCustomer","handleCustomerElement","handleSearch","event","debouncedFn","debounce","customerList","handleSelectCustomer","cust_name","selectedCustomer","customerDetail","custName","minWidth","length","map","item","index","cust_phone1","cust_code","cust_email","mapStateToProps","appointment","common","appointmentCustomerDetail","mapDispatchToProps","dispatch","AppointmentForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { NormalInput, NormalSelect, NormalButton, NormalDate, NormalModal } from 'component/common';\r\nimport { CreateAppointment, updateForm } from 'redux/actions/appointment';\r\nimport { getCustomer, getCommonApi } from 'redux/actions/common';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport { history } from 'helpers';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport closeIcon from 'assets/images/close.png';\r\nimport _ from 'lodash';\r\n\r\nexport class AppointmentFormClass extends Component {\r\n    state = {\r\n        active: false,\r\n        appt_fr_time: '',\r\n        appt_to_time: \"\",\r\n        currentValue: '-1',\r\n        formFields: {\r\n            customerName: \"\",\r\n            emp_id: \"\",\r\n            appointmentDate: new Date(),\r\n            bookingStatus: \"\",\r\n            Source_Codeid: \"\",\r\n            ItemSite_Codeid: \"\",\r\n            new_remark: \"\",\r\n            Appt_typeid: \"\",\r\n            // emp_noid : 4,\r\n            Room_Codeid: \"\",\r\n            sec_status: \"\",\r\n        },\r\n        multipleCustomerForm: {\r\n            noOfCustomer: 1,\r\n            treatment: \"\",\r\n            room: \"\"\r\n        },\r\n        bookingList: [],\r\n        isOpenModal: false,\r\n        multipleCustomr: 1,\r\n        customerElement: [],\r\n        siteList: [],\r\n        sourceList: [],\r\n        channelList: [],\r\n        staffList: [],\r\n        secStatusList: [],\r\n        roomList: [],\r\n        customerOption: [],\r\n        search: \"\", \r\n        customerId: 0,\r\n    }\r\n    \r\n    componentWillMount = async () => {\r\n        this.validator = new SimpleReactValidator({\r\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\r\n            autoForceUpdate: this,\r\n            validators: {\r\n                date: {  // name the rule\r\n                  message: 'The :attribute must be grater than today.',\r\n                  rule: (val, params, validator) => {\r\n                      let date1 = new Date(dateFormat(new Date()));\r\n                      let date2 = new Date(dateFormat(val))\r\n                      console.log(\"gagasdfsdfsdffqwef\", date1, date2, date1.getTime(), date2.getTime())\r\n                    return date1.getTime() <= date2.getTime();\r\n                  },\r\n                //   messageReplace: (message, params) => message.replace(':values', this.helpers.toSentence(params)),  // optional\r\n                  required: true  // optional\r\n                }\r\n              }\r\n        });\r\n        this.props.getCustomer('all/').then(() => { })\r\n        this.props.getCommonApi('bookingstatus/').then((res) => {\r\n            let { status, data, sec_data } = res;\r\n            console.log(data)\r\n            if (status === 200) {\r\n                this.setState({ bookingList: data, secStatusList: sec_data })\r\n            }        \r\n        })\r\n        // this.handleCustomerElement()\r\n        this.props.onRef(this)\r\n        let { staffList, formFields } = this.state;\r\n        let { basicApptDetail } = this.props;\r\n        formFields['appointmentDate'] = basicApptDetail.date;\r\n        formFields['ItemSite_Codeid'] = basicApptDetail.branchId;\r\n        await this.setState({ formFields })\r\n        this.getListData();\r\n        this.props.getCommonApi(`appointment/Staffs/?Outlet=${this.state.formFields.ItemSite_Codeid}&date=${dateFormat(new Date())}`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    staffList.push({ value: value.id, label: value.emp_name })\r\n                }\r\n                this.setState({ staffList })\r\n            }\r\n        })\r\n      \r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.onRef(null);\r\n      }\r\n\r\n    getListData = () => {\r\n        let { staffList, sourceList, siteList, channelList, roomList } = this.state;\r\n\r\n        this.props.getCommonApi(`source/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    sourceList.push({ value: value.id, label: value.source_desc })\r\n                }\r\n                this.setState({ sourceList })\r\n                console.log(sourceList, \"jhksdfkjsdhfks\")\r\n            }\r\n        })\r\n        this.props.getCommonApi(`treatment/Outlet/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    siteList.push({ value: value.id, label: value.itemsite_code })\r\n                }\r\n                this.setState({ siteList })\r\n                console.log(siteList, \"jhksdfkjsdhfks\")\r\n            }\r\n        })\r\n        this.props.getCommonApi(`appttype/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    channelList.push({ value: value.id, label: value.appt_type_desc })\r\n                }\r\n                this.setState({ channelList })\r\n                console.log(siteList, \"jhksdfkjsdhfks\")\r\n            }\r\n        })\r\n        this.props.getCommonApi(`room/?outlet=${this.state.formFields.ItemSite_Codeid}`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    roomList.push({ value: value.id, label: value.displayname })\r\n                }\r\n                this.setState({ roomList })\r\n                console.log(roomList, \"jhksdfkjsdhfks\")\r\n            }\r\n        })\r\n    }\r\n\r\n    selectTime = async (key, type) => {\r\n        let { formFields } = this.state;\r\n        if (type === \"appt_fr_time\") {\r\n            formFields['appt_fr_time'] = key;\r\n            await this.setState({\r\n                formFields,\r\n                appt_fr_time: key\r\n            })\r\n        } else {\r\n            formFields['appt_to_time'] = key;\r\n            await this.setState({\r\n                formFields,\r\n                appt_to_time: key\r\n            })\r\n        }\r\n\r\n        await this.props.updateForm('appointmentCustomerDetail', formFields)\r\n        console.log(\"sdfsdfsdfsd\", formFields)\r\n    }\r\n\r\n    handleClick = (key) => {\r\n        if (!this.state.active) {\r\n            document.addEventListener('click', this.handleOutsideClick, false);\r\n        } else {\r\n            document.removeEventListener('click', this.handleOutsideClick, false);\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n            active: !prevState.active,\r\n            currentValue: key\r\n        }));\r\n    }\r\n\r\n    handleOutsideClick = (e) => {\r\n        if (this.node != null) {\r\n            if (this.node.contains(e.target)) {\r\n                return;\r\n            }\r\n        }\r\n        this.handleClick();\r\n    }\r\n\r\n    onFocus = () => {\r\n        this.validator.showMessages();\r\n    }\r\n\r\n    handleChange = async ({ target: { value, name } }) => {\r\n        let { formFields } = this.state;\r\n        formFields[name] = value;\r\n        await this.setState({\r\n            formFields,\r\n        });\r\n        this.props.updateForm('customerDetail', formFields)\r\n        await this.props.updateForm('appointmentCustomerDetail', formFields)\r\n        if (name === \"ItemSite_Codeid\") {\r\n            let { staffList } = this.state;\r\n            this.props.getCommonApi(`appointment/Staffs/?Outlet=${value}`).then((key) => {\r\n                let { status, data } = key;\r\n                if (status === 200) {\r\n                    for (let value of data) {\r\n                        staffList.push({ value: value.id, label: value.emp_name })\r\n                    }\r\n                    this.setState({ staffList })\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    handleMultiple = async ({ target: { value, name } }) => {\r\n        let { multipleCustomerForm } = this.state;\r\n        if (name === \"noOfCustomer\") {\r\n            multipleCustomerForm[name] = Number(value);\r\n        }\r\n        if (name === \"sameForAllTreatment\" || name === \"differentForAllTreatment\") {\r\n            if (name === \"differentForAllTreatment\") {\r\n                multipleCustomerForm['treatment'] = 2;\r\n            } else {\r\n                multipleCustomerForm['treatment'] = 1;\r\n            }\r\n        } else {\r\n            if (name === \"differentForAllRoom\") {\r\n                multipleCustomerForm['room'] = 2;\r\n            } else {\r\n                multipleCustomerForm['room'] = 1;\r\n            }\r\n        }\r\n\r\n        await this.setState({\r\n            multipleCustomerForm,\r\n        });\r\n        this.props.updateForm('multipleCustomerForm', multipleCustomerForm)\r\n    }\r\n\r\n    handleSubmit = () => {\r\n       \r\n        history.push(`/admin/appointment/create/select-treatment`)\r\n       \r\n    }\r\n\r\n    getTime = (data) => {\r\n        let time = data.split(\" \")\r\n        let time1 = time[0].split(\":\")\r\n        console.log(time, time1, \"kghjhgdjfgsdf\")\r\n        if (time[1] === \"pm\") {\r\n            return ((Number(time1[0]) + 12) === 24 ? \"00\" : Number(time1[0]) + 12) + \":\" + time1[1]\r\n        } else {\r\n            return time1[0] < 9 ? (\"0\" + time[0]) : time1[0] + \":\" + time1[1]\r\n        }\r\n    }\r\n\r\n    handleDialog = () => {\r\n        let { isOpenModal } = this.state;\r\n        isOpenModal = !isOpenModal;\r\n        this.setState({\r\n            isOpenModal\r\n        })\r\n    }\r\n\r\n    handleMultipleCustomer = async () => {\r\n        let { multipleCustomerForm } = this.props;\r\n        await this.setState({ multipleCustomr: multipleCustomerForm.noOfCustomer, customerElement: [] })\r\n        console.log(multipleCustomerForm, this.state, \"dkjfkshgfghdfk\", multipleCustomerForm.noOfCustomer)\r\n        this.handleCustomerElement(multipleCustomerForm.noOfCustomer);\r\n    }\r\n\r\n    // handleSearch = (event) => {\r\n    //     event.persist();\r\n\r\n    //     if (!this.debouncedFn) {\r\n    //         this.debouncedFn = _.debounce(() => {\r\n    //             let searchString = event.target.value;\r\n    //             let data = { search: searchString }\r\n    //             // this.queryHandler(data)\r\n    //             let { customerList } = this.state;\r\n    //             let { basicApptDetail } = this.props;\r\n    //             console.log(basicApptDetail)\r\n    //             this.search(basicApptDetail, searchString)\r\n    //         }, 500);\r\n    //     }\r\n    //     this.debouncedFn();\r\n    // }\r\n\r\n    handleSearch = async (event) => {\r\n        // event.persist();\r\n        await this.setState({ search: event.target.value })\r\n        console.log(this.state.search)\r\n        if (!this.debouncedFn) {\r\n            this.debouncedFn = _.debounce(async () => {\r\n                let { customerList } = this.state;\r\n                let { basicApptDetail } = this.props;\r\n                this.search(basicApptDetail)\r\n            }, 500);\r\n        }\r\n        this.debouncedFn();\r\n    }\r\n\r\n    search = (basicApptDetail) => {\r\n        let {search} = this.state\r\n        this.props.getCommonApi(`custappt/?Outlet=${basicApptDetail.branchId ? basicApptDetail.branchId:\"\"}&search=${search}`).then((key) => {\r\n\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                // for (let value of data) {\r\n                //     customerList.push({ value: value.id, label: value.emp_name })\r\n                // }\r\n                this.setState({ customerOption: data })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleSelectCustomer = (data) => {\r\n        let { formFields } = this.state;\r\n        formFields[\"customerName\"] = data.id;\r\n        formFields[\"custName\"] = data.cust_name;\r\n        this.setState({ formFields, isOpenModal: false, customerOption: [] });\r\n        this.setState({ customerId : data.id});\r\n        this.props.selectedCustomer(data.id)\r\n    }\r\n    render() {\r\n        let { appt_fr_time, active, currentValue, bookingList, channelList, secStatusList, roomList, customerOption, isOpenModal, multipleCustomr, appt_to_time, siteList, sourceList, staffList, customerElement, formFields } = this.state;\r\n        let { customerDetail, customerList, multipleCustomerForm } = this.props;\r\n        let { noOfCustomer, treatment, room } = multipleCustomerForm;\r\n        return (\r\n\r\n            <div className=\"form-group mb-4 pb-2\">\r\n                <div className=\"row\">\r\n                    {/* <div className=\"col-3 mb-3\">\r\n                        <div>\r\n                            <label className=\"text-left text-black common-label-text \">\r\n                                Branch\r\n                                    </label>\r\n                        </div>\r\n                        <div className=\"input-group\">\r\n                            <NormalSelect\r\n                                // placeholder=\"Enter here\"\r\n                                options={siteList}\r\n                                value={formFields.ItemSite_Codeid}\r\n                                name=\"ItemSite_Codeid\"\r\n                                onChange={this.handleChange}\r\n                                className=\"customer-name py-1\"\r\n                            />\r\n                        </div>\r\n                        {this.validator.message('Branch', formFields.ItemSite_Codeid, 'required')}\r\n                    </div> */}\r\n                   \r\n                    <div className=\"col-3 mb-3\">\r\n                        <label className=\"text-left text-black common-label-text \">\r\n                            Date <span className=\"error-message text-danger validNo fs-18\">*</span>\r\n                                </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalDate\r\n                                value={new Date(formFields.appointmentDate)}\r\n                                name=\"appointmentDate\"\r\n                                type=\"date\"\r\n                                onChange={this.handleChange}\r\n                                minDate={new Date()}\r\n                                showDisabledMonthNavigation\r\n                            />\r\n                        </div>\r\n                        {this.validator.message('appointmentDate', formFields.appointmentDate, 'required|date')}\r\n                    </div>\r\n                    <div className=\"col-3 mb-3\">\r\n                        <div>\r\n                            <label className=\"text-left text-black common-label-text \">\r\n                                Name <span className=\"error-message text-danger validNo fs-18\">*</span>\r\n                                    </label>\r\n                        </div>\r\n                        <div className=\"input-group\">\r\n                           \r\n                            <NormalInput\r\n                                // placeholder=\"Enter here\"\r\n                                // options={siteList}\r\n                                value={formFields.custName}\r\n                                name=\"customerName\"\r\n                                onClick={() => this.setState({ isOpenModal: true })}\r\n                                // onChange={this.handleSearch}                              \r\n                                className=\"search px-3 p-0\"\r\n                            />\r\n                        </div>\r\n                        {this.validator.message('customerName', formFields.customerName, 'required')}\r\n                    </div>\r\n\r\n                    <div className=\"col-3 mb-3\">\r\n                        <label className=\"text-left text-black common-label-text \">\r\n                            Booking status <span className=\"error-message text-danger validNo fs-18\">*</span>\r\n                                </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalSelect\r\n                                // placeholder=\"Enter here\" }\r\n                                options={bookingList}\r\n                                value={formFields.bookingStatus}\r\n                                name=\"bookingStatus\"\r\n                                onChange={this.handleChange}\r\n                                className=\"customer-name status py-1\"\r\n                            />\r\n                            {this.validator.message('Booking Status', formFields.bookingStatus, 'required')}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-3 mb-3\">\r\n                        <div>\r\n                            <label className=\"text-left text-black common-label-text \">\r\n                                Channel\r\n                                    </label>\r\n                        </div>\r\n                        <div className=\"input-group\">\r\n                            <NormalSelect\r\n                                // placeholder=\"Enter here\"\r\n                                options={channelList}\r\n                                value={formFields.Appt_typeid}\r\n                                name=\"Appt_typeid\"\r\n                                onChange={this.handleChange}\r\n                                className=\"customer-name py-1\"\r\n                            />\r\n                        </div>\r\n                        {/* {this.validator.message('Appt_typeid', formFields.Appt_typeid, 'required')} */}\r\n                    </div>\r\n                    \r\n                    <div className=\"col-3 mb-3\">\r\n                        <div>\r\n                            <label className=\"text-left text-black common-label-text \">\r\n                                Remark\r\n                                    </label>\r\n                        </div>\r\n                        <div className=\"input-group\">\r\n                            <NormalInput\r\n                                // placeholder=\"Enter here\"\r\n                                // options={siteList}\r\n                                value={formFields.new_remark}\r\n                                name=\"new_remark\"\r\n                                onChange={this.handleChange}\r\n                                className=\"customer-name\"\r\n                            />\r\n                        </div>\r\n                        {/* {this.validator.message('Remark', formFields.new_remark, 'required')} */}\r\n                    </div>\r\n\r\n\r\n                    <div className=\"col-3 mb-3\">\r\n                        <div>\r\n                            <label className=\"text-left text-black common-label-text \">\r\n                                Source Name\r\n                                    </label>\r\n                        </div>\r\n                        <div className=\"input-group\">\r\n                            <NormalSelect\r\n                                // placeholder=\"Enter here\"\r\n                                options={sourceList}\r\n                                value={formFields.Source_Codeid}\r\n                                name=\"Source_Codeid\"\r\n                                onChange={this.handleChange}\r\n                                className=\"customer-name py-1\"\r\n                            />\r\n                        </div>\r\n                        {/* {this.validator.message('Source name', formFields.Source_Codeid, 'required')} */}\r\n                    </div>\r\n                    <div className=\"col-3 mb-3\">\r\n                        <div>\r\n                            <label className=\"text-left text-black common-label-text \">\r\n                                Room\r\n                                    </label>\r\n                        </div>\r\n                        <div className=\"input-group\">\r\n                            <NormalSelect\r\n                                // placeholder=\"Enter here\"\r\n                                options={roomList}\r\n                                value={formFields.Room_Codeid}\r\n                                name=\"Room_Codeid\"\r\n                                onChange={this.handleChange}\r\n                                className=\"customer-name py-1\"\r\n                            />\r\n                        </div>\r\n                        {/* {this.validator.message('Room', formFields.Room_Codeid, 'required')} */}\r\n                    </div>\r\n                   \r\n                    <div className=\"col-3 mb-3\">\r\n                        <label className=\"text-left text-black common-label-text \">\r\n                            Secondary status\r\n                                </label>\r\n                        <div className=\"input-group\">\r\n                            <NormalSelect\r\n                                // placeholder=\"Enter here\"\r\n                                options={secStatusList}\r\n                                value={formFields.sec_status}\r\n                                name=\"sec_status\"\r\n                                onChange={this.handleChange}\r\n                                className=\"customer-name py-1\"\r\n                            />\r\n                            {/* {this.validator.message('Secondary Status', formFields.sec_status, 'required')} */}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {/* <div className=\"create text center create-appointment\">\r\n                    \r\n                    <NormalButton\r\n                        buttonClass={\"mx-2\"}\r\n                        mainbg={true}\r\n                        className=\"col-12 fs-15 confirm\"\r\n                        label=\"Select treatment\"\r\n                        onClick={this.handleSubmit}\r\n                    />\r\n                </div> */}\r\n                \r\n                <NormalModal className={\"multiple-appointment select-category\"} style={{ minWidth: \"800px\" }} modal={isOpenModal} handleModal={this.handleDialog}>\r\n                    <img onClick={this.handleDialog} className=\"close\" src={closeIcon} alt=\"\" />\r\n                    <div className=\"row mt-2 mb-5 mx-3\">\r\n                        <div className=\"col-12 pl-0 mb-3 fs-18 py-2\">\r\n                            Select Customer\r\n                        </div>\r\n                        <div className=\"col-2 pl-0\">Search</div>\r\n                        <div className=\"col-5\">\r\n                            <input\r\n                                name=\"search\"\r\n                                onChange={this.handleSearch}\r\n                                className=\"search m-0 p-0 px-3\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-3\">\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2 p-0\"}\r\n                                mainbg={true}\r\n                                className=\" fs-15 confirm\"\r\n                                label=\"Search\"\r\n                                outline={false}\r\n                                onClick={() => this.search(this.state.search)}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"row mt-4 table-header w-100 m-0\">\r\n                            <div className=\"col-2\">Name</div>\r\n                            <div className=\"col-2\">Phone</div>\r\n                            <div className=\"col-3\">Cust Code</div>\r\n                            <div className=\"col-5\">Email</div>\r\n                        </div>\r\n                        <div className=\"response-table w-100\">\r\n                            {\r\n                                customerOption.length > 0 ? customerOption.map((item, index) => {\r\n                                    return (\r\n                                        <div className=\"row m-0 table-body w-100\" onClick={() => this.handleSelectCustomer(item)} key={index}>\r\n                                            <div className=\"col-2\">{item.cust_name}</div>\r\n                                            <div className=\"col-2\">{item.cust_phone1}</div>\r\n                                            <div className=\"col-3\">{item.cust_code}</div>\r\n                                            <div className=\"col-5\">{item.cust_email}</div>\r\n                                        </div>\r\n                                    )\r\n                                }) : <div className=\"text-center w-100\">\r\n                                        No Data are available\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                        {/* <div className=\"d-flex create m-5 w-100\">\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"col-12 fs-15 multiple-customer\"\r\n                                label=\"Continue\"\r\n                                outline={true}\r\n                                onClick={this.handleMultipleCustomer}\r\n                            />\r\n                        </div> */}\r\n\r\n\r\n                    </div>\r\n                </NormalModal>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    customerDetail: state.appointment.customerDetail,\r\n    customerList: state.common.customerList,\r\n    multipleCustomerForm: state.appointment.multipleCustomerForm,\r\n    basicApptDetail: state.appointment.basicApptDetail,\r\n    appointmentCustomerDetail: state.appointment.appointmentCustomerDetail,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        CreateAppointment,\r\n        updateForm,\r\n        getCustomer,\r\n        getCommonApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const AppointmentForm = connect(mapStateToProps, mapDispatchToProps)(AppointmentFormClass)"]},"metadata":{},"sourceType":"module"}