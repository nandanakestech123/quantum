{"ast":null,"code":"/**\r\n * DevExtreme (ui/tree_list/ui.tree_list.rows.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.RowsView = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _uiTree_list = _interopRequireDefault(require(\"./ui.tree_list.core\"));\n\nvar _uiGrid_core = _interopRequireDefault(require(\"../grid_core/ui.grid_core.rows\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar TREELIST_TEXT_CONTENT = \"dx-treelist-text-content\";\nvar TREELIST_EXPAND_ICON_CONTAINER_CLASS = \"dx-treelist-icon-container\";\nvar TREELIST_CELL_EXPANDABLE_CLASS = \"dx-treelist-cell-expandable\";\nvar TREELIST_EMPTY_SPACE = \"dx-treelist-empty-space\";\nvar TREELIST_EXPANDED_CLASS = \"dx-treelist-expanded\";\nvar TREELIST_COLLAPSED_CLASS = \"dx-treelist-collapsed\";\n\nvar RowsView = _uiGrid_core.default.views.rowsView.inherit(function () {\n  var createCellContent = function ($container) {\n    return (0, _renderer.default)(\"<div>\").addClass(TREELIST_TEXT_CONTENT).appendTo($container);\n  };\n\n  var createIcon = function (hasIcon, isExpanded) {\n    var $iconElement = (0, _renderer.default)(\"<div>\").addClass(TREELIST_EMPTY_SPACE);\n\n    if (hasIcon) {\n      $iconElement.toggleClass(TREELIST_EXPANDED_CLASS, isExpanded).toggleClass(TREELIST_COLLAPSED_CLASS, !isExpanded).append((0, _renderer.default)(\"<span>\"));\n    }\n\n    return $iconElement;\n  };\n\n  return {\n    _renderIconContainer: function ($container, options) {\n      var _this = this;\n\n      var $iconContainer = (0, _renderer.default)(\"<div>\").addClass(TREELIST_EXPAND_ICON_CONTAINER_CLASS).appendTo($container);\n      options.watch && options.watch(function () {\n        return [options.row.level, options.row.isExpanded, options.row.node.hasChildren];\n      }, function () {\n        $iconContainer.empty();\n\n        _this._renderIcons($iconContainer, options);\n      });\n      $container.addClass(TREELIST_CELL_EXPANDABLE_CLASS);\n      return this._renderIcons($iconContainer, options);\n    },\n    _renderIcons: function ($iconContainer, options) {\n      var row = options.row;\n      var level = row.level;\n\n      for (var i = 0; i <= level; i++) {\n        $iconContainer.append(createIcon(i === level && row.node.hasChildren, row.isExpanded));\n      }\n\n      return $iconContainer;\n    },\n    _renderCellCommandContent: function (container, model) {\n      this._renderIconContainer(container, model);\n\n      return true;\n    },\n    _processTemplate: function (template, options) {\n      var that = this;\n      var resultTemplate;\n      var renderingTemplate = this.callBase(template);\n\n      var firstDataColumnIndex = that._columnsController.getFirstDataColumnIndex();\n\n      if (renderingTemplate && options.column.index === firstDataColumnIndex) {\n        resultTemplate = {\n          render: function (options) {\n            var $container = options.container;\n\n            if (that._renderCellCommandContent($container, options.model)) {\n              options.container = createCellContent($container);\n            }\n\n            renderingTemplate.render(options);\n          }\n        };\n      } else {\n        resultTemplate = renderingTemplate;\n      }\n\n      return resultTemplate;\n    },\n    _updateCell: function ($cell, options) {\n      $cell = $cell.hasClass(TREELIST_TEXT_CONTENT) ? $cell.parent() : $cell;\n      this.callBase($cell, options);\n    },\n    _rowClick: function (e) {\n      var dataController = this._dataController;\n      var $targetElement = (0, _renderer.default)(e.event.target);\n      var isExpandIcon = this.isExpandIcon($targetElement);\n      var item = dataController && dataController.items()[e.rowIndex];\n\n      if (isExpandIcon && item) {\n        dataController.changeRowExpand(item.key);\n      }\n\n      this.callBase(e);\n    },\n    _createRow: function (row) {\n      var node = row && row.node;\n      var $rowElement = this.callBase.apply(this, arguments);\n\n      if (node) {\n        this.setAria(\"level\", row.level, $rowElement);\n\n        if (node.hasChildren) {\n          this.setAria(\"expanded\", row.isExpanded, $rowElement);\n        }\n      }\n\n      return $rowElement;\n    },\n    isExpandIcon: function ($targetElement) {\n      return !!$targetElement.closest(\".\" + TREELIST_EXPANDED_CLASS + \", .\" + TREELIST_COLLAPSED_CLASS).length;\n    }\n  };\n}());\n\nexports.RowsView = RowsView;\n\n_uiTree_list.default.registerModule(\"rows\", {\n  defaultOptions: _uiGrid_core.default.defaultOptions,\n  views: {\n    rowsView: RowsView\n  }\n});","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/tree_list/ui.tree_list.rows.js"],"names":["exports","RowsView","_renderer","_interopRequireDefault","require","_uiTree_list","_uiGrid_core","obj","__esModule","TREELIST_TEXT_CONTENT","TREELIST_EXPAND_ICON_CONTAINER_CLASS","TREELIST_CELL_EXPANDABLE_CLASS","TREELIST_EMPTY_SPACE","TREELIST_EXPANDED_CLASS","TREELIST_COLLAPSED_CLASS","default","views","rowsView","inherit","createCellContent","$container","addClass","appendTo","createIcon","hasIcon","isExpanded","$iconElement","toggleClass","append","_renderIconContainer","options","_this","$iconContainer","watch","row","level","node","hasChildren","empty","_renderIcons","i","_renderCellCommandContent","container","model","_processTemplate","template","that","resultTemplate","renderingTemplate","callBase","firstDataColumnIndex","_columnsController","getFirstDataColumnIndex","column","index","render","_updateCell","$cell","hasClass","parent","_rowClick","e","dataController","_dataController","$targetElement","event","target","isExpandIcon","item","items","rowIndex","changeRowExpand","key","_createRow","$rowElement","apply","arguments","setAria","closest","length","registerModule","defaultOptions"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/tree_list/ui.tree_list.rows.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.RowsView = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _uiTree_list = _interopRequireDefault(require(\"./ui.tree_list.core\"));\r\nvar _uiGrid_core = _interopRequireDefault(require(\"../grid_core/ui.grid_core.rows\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar TREELIST_TEXT_CONTENT = \"dx-treelist-text-content\";\r\nvar TREELIST_EXPAND_ICON_CONTAINER_CLASS = \"dx-treelist-icon-container\";\r\nvar TREELIST_CELL_EXPANDABLE_CLASS = \"dx-treelist-cell-expandable\";\r\nvar TREELIST_EMPTY_SPACE = \"dx-treelist-empty-space\";\r\nvar TREELIST_EXPANDED_CLASS = \"dx-treelist-expanded\";\r\nvar TREELIST_COLLAPSED_CLASS = \"dx-treelist-collapsed\";\r\nvar RowsView = _uiGrid_core.default.views.rowsView.inherit(function() {\r\n    var createCellContent = function($container) {\r\n        return (0, _renderer.default)(\"<div>\").addClass(TREELIST_TEXT_CONTENT).appendTo($container)\r\n    };\r\n    var createIcon = function(hasIcon, isExpanded) {\r\n        var $iconElement = (0, _renderer.default)(\"<div>\").addClass(TREELIST_EMPTY_SPACE);\r\n        if (hasIcon) {\r\n            $iconElement.toggleClass(TREELIST_EXPANDED_CLASS, isExpanded).toggleClass(TREELIST_COLLAPSED_CLASS, !isExpanded).append((0, _renderer.default)(\"<span>\"))\r\n        }\r\n        return $iconElement\r\n    };\r\n    return {\r\n        _renderIconContainer: function($container, options) {\r\n            var _this = this;\r\n            var $iconContainer = (0, _renderer.default)(\"<div>\").addClass(TREELIST_EXPAND_ICON_CONTAINER_CLASS).appendTo($container);\r\n            options.watch && options.watch(function() {\r\n                return [options.row.level, options.row.isExpanded, options.row.node.hasChildren]\r\n            }, function() {\r\n                $iconContainer.empty();\r\n                _this._renderIcons($iconContainer, options)\r\n            });\r\n            $container.addClass(TREELIST_CELL_EXPANDABLE_CLASS);\r\n            return this._renderIcons($iconContainer, options)\r\n        },\r\n        _renderIcons: function($iconContainer, options) {\r\n            var row = options.row;\r\n            var level = row.level;\r\n            for (var i = 0; i <= level; i++) {\r\n                $iconContainer.append(createIcon(i === level && row.node.hasChildren, row.isExpanded))\r\n            }\r\n            return $iconContainer\r\n        },\r\n        _renderCellCommandContent: function(container, model) {\r\n            this._renderIconContainer(container, model);\r\n            return true\r\n        },\r\n        _processTemplate: function(template, options) {\r\n            var that = this;\r\n            var resultTemplate;\r\n            var renderingTemplate = this.callBase(template);\r\n            var firstDataColumnIndex = that._columnsController.getFirstDataColumnIndex();\r\n            if (renderingTemplate && options.column.index === firstDataColumnIndex) {\r\n                resultTemplate = {\r\n                    render: function(options) {\r\n                        var $container = options.container;\r\n                        if (that._renderCellCommandContent($container, options.model)) {\r\n                            options.container = createCellContent($container)\r\n                        }\r\n                        renderingTemplate.render(options)\r\n                    }\r\n                }\r\n            } else {\r\n                resultTemplate = renderingTemplate\r\n            }\r\n            return resultTemplate\r\n        },\r\n        _updateCell: function($cell, options) {\r\n            $cell = $cell.hasClass(TREELIST_TEXT_CONTENT) ? $cell.parent() : $cell;\r\n            this.callBase($cell, options)\r\n        },\r\n        _rowClick: function(e) {\r\n            var dataController = this._dataController;\r\n            var $targetElement = (0, _renderer.default)(e.event.target);\r\n            var isExpandIcon = this.isExpandIcon($targetElement);\r\n            var item = dataController && dataController.items()[e.rowIndex];\r\n            if (isExpandIcon && item) {\r\n                dataController.changeRowExpand(item.key)\r\n            }\r\n            this.callBase(e)\r\n        },\r\n        _createRow: function(row) {\r\n            var node = row && row.node;\r\n            var $rowElement = this.callBase.apply(this, arguments);\r\n            if (node) {\r\n                this.setAria(\"level\", row.level, $rowElement);\r\n                if (node.hasChildren) {\r\n                    this.setAria(\"expanded\", row.isExpanded, $rowElement)\r\n                }\r\n            }\r\n            return $rowElement\r\n        },\r\n        isExpandIcon: function($targetElement) {\r\n            return !!$targetElement.closest(\".\" + TREELIST_EXPANDED_CLASS + \", .\" + TREELIST_COLLAPSED_CLASS).length\r\n        }\r\n    }\r\n}());\r\nexports.RowsView = RowsView;\r\n_uiTree_list.default.registerModule(\"rows\", {\r\n    defaultOptions: _uiGrid_core.default.defaultOptions,\r\n    views: {\r\n        rowsView: RowsView\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"script"}