{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"./style.scss\";// import { Appointments, TreatmentHistory, PurchaseHistory, PersonalDetails, Favourites } from './Details'\nimport classnames from'classnames';import{Nav,NavItem,NavLink,TabContent,TabPane}from'reactstrap';import{NormalInput,NormalButton,TableWrapper,NormalRadio,NormalModal}from'component/common';import{Button,Form,FormGroup,Label,Input,FormText}from'reactstrap';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import closeIcon from'assets/images/close.png';export var CreditNoteClass=/*#__PURE__*/function(_Component){_inherits(CreditNoteClass,_Component);var _super=_createSuper(CreditNoteClass);function CreditNoteClass(){var _this;_classCallCheck(this,CreditNoteClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeTab:'1',isOpenTreatmentDone:false,isActiveTab:\"detail\",headerDetails:[{label:'Credit #',sortKey:false,width:\"100px\"},{label:'Date',width:\"82px\"},// { label: 'Transaction #', sortKey: false, width: \"180px\" },\n// { label: 'Item', sortKey: false, width: \"185px\" },\n{label:'Amount',sortKey:false,width:\"100px\"},{label:'Balance',sortKey:false,width:\"100px\"},{label:'Status',sortKey:false,width:\"100px\"},{label:'',sortKey:false,width:\"52px\"}],accountList:[],showActive:false,accountHeader:{},show:\"active\",isOpenUpdate:false,editItem:{},formField:{new_balance:\"\",refund_amt:\"\"}};_this.toggle=function(tab){if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.getAccountData=function(api){var _this$state=_this.state,show=_this$state.show,accountHeader=_this$state.accountHeader;_this.props.getCommonApi(\"creditnotelist/?cust_id=\".concat(_this.props.id).concat(api)).then(function(key){var data=key.data,header_data=key.header_data;var accountList=_this.state.accountList;accountList=data;accountHeader=header_data;_this.setState({accountList:accountList,accountHeader:accountHeader});});};_this.handleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(type){var show;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:show=_this.state.show;show=type;_context.next=4;return _this.setState({show:show});case 4:if(type===\"all\"){_this.getAccountData('&is_all=1');}else{_this.getAccountData('');}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleOpenDetail=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var activeTab;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:activeTab=_this.state.activeTab;activeTab='detail';_context2.next=4;return _this.setState({activeTab:activeTab});case 4:_this.getDetailList(data.id);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.getDetailList=function(id){_this.props.getCommonApi(\"treatmentacclist/\".concat(id)).then(function(key){var data=key.data,header_data=key.header_data;var _this$state2=_this.state,DetailList=_this$state2.DetailList,accountHeader=_this$state2.accountHeader;DetailList=data;accountHeader=header_data;_this.setState({DetailList:DetailList,accountHeader:accountHeader});});};_this.handleBack=function(){var activeTab=_this.state.activeTab;activeTab='';_this.setState({activeTab:activeTab,DetailList:[]});_this.getAccountData();};_this.handleEdit=function(data){var _this$state3=_this.state,isOpenUpdate=_this$state3.isOpenUpdate,editItem=_this$state3.editItem;isOpenUpdate=true;editItem=data;_this.setState({isOpenUpdate:isOpenUpdate,editItem:editItem});};_this.handleChangeUpdate=function(_ref3){var _ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;var formField=_this.state.formField;formField[name]=value;_this.setState({formField:formField});};_this.handleUpdateCredit=function(){var _this$state4=_this.state,formField=_this$state4.formField,editItem=_this$state4.editItem;_this.props.commonPatchApi(\"creditnotelist/\".concat(editItem.id,\"/\"),formField).then(function(){_this.handleCloseDialog();});};_this.handleCloseDialog=function(){var _this$state5=_this.state,formField=_this$state5.formField,editItem=_this$state5.editItem,isOpenUpdate=_this$state5.isOpenUpdate;isOpenUpdate=false;editItem={};formField['new_balance']=\"\";formField['refund_amt']=\"\";_this.setState({editItem:editItem,isOpenUpdate:isOpenUpdate,formField:formField});};return _this;}_createClass(CreditNoteClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getAccountData('');}},{key:\"render\",value:function render(){var _this2=this;var _this$state6=this.state,treatmentList=_this$state6.treatmentList,headerDetails=_this$state6.headerDetails,accountList=_this$state6.accountList,showActive=_this$state6.showActive,show=_this$state6.show,isOpenUpdate=_this$state6.isOpenUpdate,formField=_this$state6.formField;return/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-account credit-note row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2\"},/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{checked:show===\"active\",onChange:function onChange(){return _this2.handleChange(\"active\");},type:\"radio\",name:\"radio1\"}),' ',\" Show Active Credit Notes Only\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{checked:show===\"all\",onChange:function onChange(){return _this2.handleChange(\"all\");},type:\"radio\",name:\"radio1\"}),' ',\" Show All Credit Notes\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination// pageMeta={pageMeta}\n// isEmpty={accountList.length === 0 ? true:false}\n},accountList&&accountList.length>0?accountList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"span\",{className:\"\"},/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{type:\"radio\",name:\"radio1\"}),' '))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.credit_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.amount)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"\",mainbg:true,className:\"col-12 fs-15 mr-2\",label:\"Edit\",outline:false,onClick:function onClick(){return _this2.handleEdit(item);}}))));}):\"\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 d-flex action-bar text-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"credit-note-button\"// mainbg={true}\n,className:\"col-12 fs-15 mr-2\",label:\"Adjust credit note\",outline:false,onClick:function onClick(){return _this2.setState({isOpenEditDisc:false});}}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"print\"// mainbg={true}\n,className:\"col-12 fs-15 \",label:\"Print\"// outline={false}\n,onClick:function onClick(){return _this2.setState({isOpenEditDisc:false});}})),/*#__PURE__*/React.createElement(NormalModal,{className:\"credit-note-update\",style:{minWidth:\"560px\"},modal:isOpenUpdate,handleModal:this.handleCloseDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleCloseDialog,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\" mt-2 mb-5 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pl-0 mb-3 font-600 fs-18\"},\"Update Credit Note\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 d-flex mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"New Balance\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n// options={siteList}\n,{value:formField.new_balance,name:\"new_balance\",onChange:this.handleChangeUpdate,className:\"customer-name\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 d-flex mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Refund\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n// options={siteList}\n,{value:formField.refund_amt,name:\"refund_amt\",onChange:this.handleChangeUpdate,className:\"customer-name\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 d-flex action-bar justify-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"print\",mainbg:true,className:\"col-12 fs-15 \",label:\"Update\"// outline={false}\n,onClick:function onClick(){return _this2.handleUpdateCredit();}}))));}}]);return CreditNoteClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var CreditNote=connect(null,mapDispatchToProps)(CreditNoteClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Customer/CustomerDetails/Accounts/creditNote.js"],"names":["React","Component","classnames","Nav","NavItem","NavLink","TabContent","TabPane","NormalInput","NormalButton","TableWrapper","NormalRadio","NormalModal","Button","Form","FormGroup","Label","Input","FormText","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","closeIcon","CreditNoteClass","state","activeTab","isOpenTreatmentDone","isActiveTab","headerDetails","label","sortKey","width","accountList","showActive","accountHeader","show","isOpenUpdate","editItem","formField","new_balance","refund_amt","toggle","tab","setState","getAccountData","api","props","id","then","key","data","header_data","handleChange","type","handleOpenDetail","getDetailList","DetailList","handleBack","handleEdit","handleChangeUpdate","target","value","name","handleUpdateCredit","handleCloseDialog","treatmentList","handlePagination","length","map","item","index","credit_code","sa_date","amount","balance","status","isOpenEditDisc","minWidth","mapDispatchToProps","dispatch","CreditNote"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport \"./style.scss\";\r\n// import { Appointments, TreatmentHistory, PurchaseHistory, PersonalDetails, Favourites } from './Details'\r\nimport classnames from 'classnames';\r\nimport {\r\n  Nav,\r\n  NavItem,\r\n  NavLink,\r\n  TabContent,\r\n  TabPane,\r\n} from 'reactstrap';\r\nimport { NormalInput, NormalButton, TableWrapper, NormalRadio, NormalModal } from 'component/common';\r\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\r\nimport closeIcon from 'assets/images/close.png';\r\n\r\nexport class CreditNoteClass extends Component {\r\n  state = {\r\n    activeTab: '1',\r\n    isOpenTreatmentDone: false,\r\n    isActiveTab: \"detail\",\r\n    headerDetails: [\r\n      { label: 'Credit #', sortKey: false, width: \"100px\" },\r\n      { label: 'Date', width: \"82px\" },\r\n      // { label: 'Transaction #', sortKey: false, width: \"180px\" },\r\n      // { label: 'Item', sortKey: false, width: \"185px\" },\r\n      { label: 'Amount', sortKey: false, width: \"100px\" },\r\n      { label: 'Balance', sortKey: false, width: \"100px\" },\r\n      { label: 'Status', sortKey: false, width: \"100px\" },\r\n      { label: '', sortKey: false, width: \"52px\" },\r\n    ],\r\n    accountList: [],\r\n    showActive: false,\r\n    accountHeader: {},\r\n    show: \"active\",\r\n    isOpenUpdate: false,\r\n    editItem: {},\r\n    formField: {\r\n      new_balance: \"\",\r\n      refund_amt: \"\"\r\n    }\r\n  }\r\n\r\n  toggle = (tab) => {\r\n    if (this.state.activeTab !== tab) {\r\n      this.setState({\r\n        activeTab: tab\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getAccountData('');\r\n  }\r\n\r\n\r\n  getAccountData = (api) => {\r\n    let { show, accountHeader } = this.state;\r\n    this.props.getCommonApi(`creditnotelist/?cust_id=${this.props.id}${api}`).then((key) => {\r\n      let { data, header_data } = key;\r\n      let { accountList } = this.state;\r\n      accountList = data;\r\n      accountHeader = header_data;\r\n      this.setState({ accountList, accountHeader })\r\n    })\r\n  }\r\n\r\n  handleChange = async (type) => {\r\n    let { show } = this.state;\r\n    show = type\r\n    await this.setState({\r\n      show\r\n    })\r\n    if (type === \"all\") {\r\n      this.getAccountData('&is_all=1');\r\n    } else {\r\n      this.getAccountData('');\r\n    }\r\n  }\r\n\r\n  handleOpenDetail = async (data) => {\r\n    let { activeTab } = this.state\r\n    activeTab = 'detail';\r\n\r\n    await this.setState({\r\n      activeTab\r\n    })\r\n    this.getDetailList(data.id);\r\n  }\r\n\r\n  getDetailList = (id) => {\r\n    this.props.getCommonApi(`treatmentacclist/${id}`).then((key) => {\r\n      let { data, header_data } = key;\r\n      let { DetailList, accountHeader } = this.state;\r\n      DetailList = data;\r\n      accountHeader = header_data;\r\n      this.setState({ DetailList, accountHeader })\r\n    })\r\n  }\r\n\r\n  handleBack = () => {\r\n    let { activeTab } = this.state;\r\n    activeTab = '';\r\n    this.setState({\r\n      activeTab,\r\n      DetailList: []\r\n    })\r\n    this.getAccountData();\r\n  }\r\n\r\n  handleEdit = (data) => {\r\n    let { isOpenUpdate, editItem } = this.state;\r\n    isOpenUpdate = true;\r\n    editItem = data;\r\n    this.setState({\r\n      isOpenUpdate,\r\n      editItem\r\n    })\r\n  }\r\n\r\n  handleChangeUpdate = ({ target: { value, name } }) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    this.setState({\r\n      formField\r\n    })\r\n  }\r\n\r\n  handleUpdateCredit = () => {\r\n    let { formField, editItem } = this.state;\r\n    this.props.commonPatchApi(`creditnotelist/${editItem.id}/`, formField).then(() => {\r\n      this.handleCloseDialog();\r\n    })\r\n  }\r\n\r\n  handleCloseDialog = () => {\r\n    let { formField, editItem, isOpenUpdate } = this.state;\r\n    isOpenUpdate = false;\r\n    editItem = {};\r\n    formField['new_balance'] = \"\";\r\n    formField['refund_amt'] = \"\";\r\n    this.setState({\r\n      editItem,\r\n      isOpenUpdate,\r\n      formField\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    let { treatmentList, headerDetails, accountList, showActive, show, isOpenUpdate, formField } = this.state;\r\n    return (\r\n\r\n      <div className=\"treatment-account credit-note row\">\r\n        <div className=\"col-6 mt-3 mb-4\">\r\n          <div className=\"row m-0\">\r\n            {/* <NormalRadio \r\n            classNam=\"\" \r\n            value={showActive}\r\n            label={\"\"} \r\n            name=\"active\"\r\n            /> */}\r\n            <div className=\"col-12 mb-2\">\r\n              <FormGroup check>\r\n                <Label check>\r\n                  <Input checked={show === \"active\"} onChange={() => this.handleChange(\"active\")} type=\"radio\" name=\"radio1\" />{' '} Show Active Credit Notes Only\r\n              </Label>\r\n              </FormGroup>\r\n            </div>\r\n            <div className=\"col-12\">\r\n              <FormGroup check>\r\n                <Label check>\r\n                  <Input checked={show === \"all\"} onChange={() => this.handleChange(\"all\")} type=\"radio\" name=\"radio1\" />{' '} Show All Credit Notes\r\n              </Label>\r\n              </FormGroup>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-12\">\r\n\r\n          <div className=\"table\">\r\n            <TableWrapper\r\n              headerDetails={headerDetails}\r\n              queryHandler={this.handlePagination}\r\n            // pageMeta={pageMeta}\r\n            // isEmpty={accountList.length === 0 ? true:false}\r\n            >\r\n              {accountList && accountList.length > 0 ? accountList.map((item, index) => {\r\n\r\n                return (\r\n                  <tr key={index}>\r\n\r\n                    <td className=\"position-relative status-type\"><span className={``}>\r\n                      <FormGroup check>\r\n                        <Label check>\r\n                          <Input type=\"radio\" name=\"radio1\" />{' '}\r\n                        </Label>\r\n                      </FormGroup>\r\n                    </span><div className=\"d-flex align-items-center justify-content-center\">{item.credit_code}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.sa_date}</div></td>\r\n                    {/* <td><div className=\"d-flex align-items-center justify-content-center\">{item.transaction}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{}</div></td> */}\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.amount}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.balance}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.status}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">\r\n                      <NormalButton\r\n                        buttonClass={\"\"}\r\n                        mainbg={true}\r\n                        className=\"col-12 fs-15 mr-2\"\r\n                        label=\"Edit\"\r\n                        outline={false}\r\n                        onClick={() => this.handleEdit(item)}\r\n                      />\r\n                    </div></td>\r\n                  </tr>\r\n                )\r\n              }) : \"\"\r\n              }\r\n\r\n            </TableWrapper>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12 d-flex action-bar text-center\">\r\n          <NormalButton\r\n            buttonClass={\"credit-note-button\"}\r\n            // mainbg={true}\r\n            className=\"col-12 fs-15 mr-2\"\r\n            label=\"Adjust credit note\"\r\n            outline={false}\r\n            onClick={() => this.setState({ isOpenEditDisc: false })}\r\n          />\r\n          <NormalButton\r\n            buttonClass={\"print\"}\r\n            // mainbg={true}\r\n            className=\"col-12 fs-15 \"\r\n            label=\"Print\"\r\n            // outline={false}\r\n            onClick={() => this.setState({ isOpenEditDisc: false })}\r\n          />\r\n        </div>\r\n        <NormalModal className={\"credit-note-update\"} style={{ minWidth: \"560px\" }} modal={isOpenUpdate} handleModal={this.handleCloseDialog}>\r\n          <img onClick={this.handleCloseDialog} className=\"close\" src={closeIcon} alt=\"\" />\r\n\r\n          <div className=\" mt-2 mb-5 mx-3\">\r\n            <div className=\"col-12 pl-0 mb-3 font-600 fs-18\">\r\n              Update Credit Note\r\n                        </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-12 d-flex mb-3\">\r\n              <div className=\"w-100\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  New Balance\r\n                                    </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <NormalInput\r\n                  // placeholder=\"Enter here\"\r\n                  // options={siteList}\r\n                  value={formField.new_balance}\r\n                  name=\"new_balance\"\r\n                  onChange={this.handleChangeUpdate}\r\n                  className=\"customer-name\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-12 d-flex mb-3\">\r\n              <div className=\"w-100\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  Refund\r\n                                    </label>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <NormalInput\r\n                  // placeholder=\"Enter here\"\r\n                  // options={siteList}\r\n                  value={formField.refund_amt}\r\n                  name=\"refund_amt\"\r\n                  onChange={this.handleChangeUpdate}\r\n                  className=\"customer-name\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-12 d-flex action-bar justify-center\">\r\n\r\n            <NormalButton\r\n              buttonClass={\"print\"}\r\n              mainbg={true}\r\n              className=\"col-12 fs-15 \"\r\n              label=\"Update\"\r\n              // outline={false}\r\n              onClick={() => this.handleUpdateCredit()}\r\n            />\r\n          </div>\r\n        </NormalModal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators({\r\n    getCommonApi,\r\n    updateForm,\r\n    commonCreateApi,\r\n    commonPatchApi,\r\n    commonDeleteApi\r\n  }, dispatch)\r\n}\r\n\r\nexport const CreditNote = connect(null, mapDispatchToProps)(CreditNoteClass)"]},"metadata":{},"sourceType":"module"}