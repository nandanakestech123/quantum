{"ast":null,"code":"import _objectSpread from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import\"./style.scss\";import{getJobtitle,getCommonApi}from\"redux/actions/common\";import{getStaffPlus,deleteStaffPlus}from\"redux/actions/staffPlus\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import _ from\"lodash\";import{Link}from\"react-router-dom\";import{Navigation}from\"react-minimal-side-navigation\";import{withTranslation}from\"react-i18next\";export var ListStaffPlusClass=/*#__PURE__*/function(_React$Component){_inherits(ListStaffPlusClass,_React$Component);var _super=_createSuper(ListStaffPlusClass);function ListStaffPlusClass(){var _this;_classCallCheck(this,ListStaffPlusClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Status\",sortKey:\"status\"},{label:\"Staff Name\",sortKey:\"emp_name\"},{label:\"Phone\",sortKey:\"emp_phone1\"},{label:\"Staff ID\",sortKey:\"emp_code\"},{label:\"Specialist\",sortKey:\"services\"},{label:\"Home site\",sortKey:\"site_code\"},{label:\"Current site\",sortKey:\"defaultsitecode\"},{label:\"\"}],originalStaffList:[],staffList:[],filter:\"all\",locationOption:[],levelList:[],jobOption:[],pageMeta:{},selectedMenu:\"/all\",active:false,currentIndex:-1,isLoading:false,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.updateState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleFilterChange=function(){var filterOption=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";_this.state.selectedMenu=filterOption;var splitted=filterOption.split(\"/\");var filter=_this.state.filter;console.log(filterOption);if(splitted.length==2){switch(splitted[1]){case\"all\":filter=\"all\";break;case\"withSecurityAccount\":filter=\"is_login=True\";break;case\"withoutSecurityAccount\":filter=\"is_login=False\";break;case\"active\":filter=\"emp_isactive=True\";break;case\"inactive\":filter=\"emp_isactive=False\";break;default:filter=\"\";}}else if(splitted.length==3){switch(splitted[1]){case\"emp_lvl\":filter=\"LEVEL_ItmIDid=\".concat(splitted[2]);break;case\"sitelist\":filter=\"Site_Codeid=\".concat(splitted[2]);break;case\"operation\":filter=\"EMP_TYPEid=\".concat(splitted[2]);break;default:filter=\"\";}}if(_this.state.filter!=filter&&filter!==\"\"){_this.state.filter=filter;_this.queryHandler({});}};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.queryHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _staffDetails$meta;var _data$page,page,_data$limit,limit,_data$search,search,staffDetails,_this$state,staffList,pageMeta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateState({isLoading:true});_data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit,_data$search=data.search,search=_data$search===void 0?\"\":_data$search;_context.next=4;return _this.props.getStaffPlus(\"?page=\".concat(page,\"&limit=\").concat(limit).concat(_this.state.filter===\"all\"?\"\":\"&\".concat(_this.state.filter)).concat(search==\"\"?\"\":\"&search=\".concat(search)));case 4:staffDetails=_this.props.staffDetails;_this$state=_this.state,staffList=_this$state.staffList,pageMeta=_this$state.pageMeta;staffList=staffDetails.dataList;pageMeta=(_staffDetails$meta=staffDetails.meta)===null||_staffDetails$meta===void 0?void 0:_staffDetails$meta.pagination;_this.updateState({staffList:staffList,originalStaffList:staffList,pageMeta:pageMeta,isLoading:false});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlePagination=function(page){_this.queryHandler(page);};_this.handlesearch=function(event){var searchString=event.target.value;var data={search:searchString};_this.queryHandler(data);};_this.getDatafromStore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(type){var jobtitleList,jobOption,_iterator,_step,key;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:jobtitleList=_this.props.jobtitleList;jobOption=_this.state.jobOption;if(type===\"jobtitle\"){_iterator=_createForOfIteratorHelper(jobtitleList);try{for(_iterator.s();!(_step=_iterator.n()).done;){key=_step.value;jobOption.push({title:key.level_desc,itemId:\"/operation/\"+key.id});}}catch(err){_iterator.e(err);}finally{_iterator.f();}}_context2.next=5;return _this.updateState({jobOption:jobOption});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleDeleteStaff=function(id){_this.props.deleteStaffPlus(\"\".concat(id,\"/\")).then(function(res){return _this.queryHandler({});});};return _this;}_createClass(ListStaffPlusClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){var queryParams=new URLSearchParams(window.location.search);var filter=queryParams.get(\"filter\");if(filter){this.state.selectedMenu=\"/\"+filter;this.handleFilterChange(this.state.selectedMenu);this.updateState({});}else this.queryHandler({});}},{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.props.getCommonApi(\"branchlist/\").then(function(res){var locationOption=_this2.state.locationOption;var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;locationOption.push({title:key.itemsite_desc,itemId:\"/sitelist/\"+key.id});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this2.updateState({locationOption:locationOption});});// level option api\nthis.props.getCommonApi(\"securities/\").then(function(res){var levelList=_this2.state.levelList;var _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;levelList.push({itemId:\"/emp_lvl/\"+key.id,title:key.level_name});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this2.updateState({levelList:levelList});});// jobtitle option api\nthis.props.getJobtitle().then(function(){_this2.getDatafromStore(\"jobtitle\");});}// popup open/close\n},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,headerDetails=_this$state2.headerDetails,pageMeta=_this$state2.pageMeta,currentIndex=_this$state2.currentIndex,locationOption=_this$state2.locationOption,levelList=_this$state2.levelList,jobOption=_this$state2.jobOption,staffList=_this$state2.staffList,originalStaffList=_this$state2.originalStaffList,isLoading=_this$state2.isLoading,selectedMenu=_this$state2.selectedMenu;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/schedule\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Schedule\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/authorization\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Authorization\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/skills\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Skill Listing\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 col-lg-3 mb-4\",style:this.state.isLoading?{pointerEvents:\"none\",opacity:0.2}:{}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 p-0\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"Filters\"))),/*#__PURE__*/React.createElement(Navigation,{activeItemId:selectedMenu,onSelect:function onSelect(_ref3){var itemId=_ref3.itemId;return _this3.handleFilterChange(itemId);},items:[{title:t(\"Show All\"),itemId:\"/all\"},{title:t(\"Show Active\"),itemId:\"/active\"},{title:t(\"Show Inactive\"),itemId:\"/inactive\"},{title:t(\"By Emp Level\"),itemId:\"/emplvl\",subNav:levelList.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})},{title:t(\"With Security Account\"),itemId:\"/withSecurityAccount\"},{title:t(\"Without Security Account\"),itemId:\"/withoutSecurityAccount\"},{title:t(\"By Site List\"),itemId:\"/sitelist\",subNav:locationOption.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})},{title:t(\"By Operation\"),itemId:\"/operation\",subNav:jobOption.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})}]})),/*#__PURE__*/React.createElement(\"div\",{className:\"staffList-container col-xl\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"h3\",null,t(\"List of Staffs\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-8\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Staff\",onEnter:this.handlesearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-4 ml-1 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Staff\",onClick:function onClick(){return _this3.props.history.push(\"/admin/staffplus/add\");}}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta,sortData:originalStaffList,onSort:function onSort(staffList){return _this3.updateState({staffList:staffList});}},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))))):staffList.length>0?staffList.map(function(_ref4,index){var id=_ref4.id,emp_name=_ref4.emp_name,emp_phone1=_ref4.emp_phone1,emp_code=_ref4.emp_code,services=_ref4.services,site_code=_ref4.site_code,defaultsitecode=_ref4.defaultsitecode,status=_ref4.status;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(status===\"available\"?\"available\":\"not-available\")})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_phone1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},services?services[0]:\"\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},defaultsitecode)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},site_code)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\",ref:function ref(node){_this3.node=node;},onClick:function onClick(){return _this3.handleClick(index);}},currentIndex===index?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more-active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"option card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-14 pt-3\",onClick:function onClick(){return _this3.props.history.push(\"/admin/staffPlus/\".concat(id,\"/staffDetails\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey px-3\"}),t(\"View\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-14\",onClick:function onClick(){return _this3.props.history.push(\"/admin/staffPlus/\".concat(id,\"/editStaff\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-edit px-3\"}),t(\"Edit\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-14 pb-3\",onClick:function onClick(){return _this3.handleDeleteStaff(id);}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-delete px-3\"}),t(\"Delete\")))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more text-grey\"}))));}):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"palette\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail\"},t(\"Available today\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"color-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color not-available\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail\"},t(\"Unavailable today\"))))))))));}}]);return ListStaffPlusClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{jobtitleList:state.common.jobtitleList,staffDetails:state.staffPlus.staffPlusDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getStaffPlus:getStaffPlus,deleteStaffPlus:deleteStaffPlus,getJobtitle:getJobtitle,getCommonApi:getCommonApi},dispatch);};export var ListStaffPlus=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ListStaffPlusClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/StaffPlus/ListStaffPlus/index.js"],"names":["React","NormalButton","InputSearch","TableWrapper","getJobtitle","getCommonApi","getStaffPlus","deleteStaffPlus","connect","bindActionCreators","_","Link","Navigation","withTranslation","ListStaffPlusClass","state","headerDetails","label","sortKey","originalStaffList","staffList","filter","locationOption","levelList","jobOption","pageMeta","selectedMenu","active","currentIndex","isLoading","isMounted","updateState","data","setState","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","handleFilterChange","filterOption","splitted","split","console","log","length","queryHandler","e","node","contains","target","page","limit","search","props","staffDetails","dataList","meta","pagination","handlePagination","handlesearch","event","searchString","value","getDatafromStore","type","jobtitleList","push","title","level_desc","itemId","id","handleDeleteStaff","then","res","queryParams","URLSearchParams","window","location","get","itemsite_desc","level_name","t","pointerEvents","opacity","subNav","map","history","index","emp_name","emp_phone1","emp_code","services","site_code","defaultsitecode","status","Component","mapStateToProps","common","staffPlus","staffPlusDetail","mapDispatchToProps","dispatch","ListStaffPlus"],"mappings":"opCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,OAASC,WAAT,CAAsBC,YAAtB,KAA0C,kBAA1C,CACA,MAAO,cAAP,CACA,OAASC,WAAT,CAAsBC,YAAtB,KAA0C,sBAA1C,CACA,OAASC,YAAT,CAAuBC,eAAvB,KAA8C,yBAA9C,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,UAAT,KAA2B,+BAA3B,CACA,OAASC,eAAT,KAAgC,eAAhC,CAEA,UAAaC,CAAAA,kBAAb,uXACEC,KADF,CACU,CACNC,aAAa,CAAE,CACb,CAAEC,KAAK,CAAE,QAAT,CAAmBC,OAAO,CAAE,QAA5B,CADa,CAEb,CAAED,KAAK,CAAE,YAAT,CAAuBC,OAAO,CAAE,UAAhC,CAFa,CAGb,CAAED,KAAK,CAAE,OAAT,CAAkBC,OAAO,CAAE,YAA3B,CAHa,CAIb,CAAED,KAAK,CAAE,UAAT,CAAqBC,OAAO,CAAE,UAA9B,CAJa,CAKb,CAAED,KAAK,CAAE,YAAT,CAAuBC,OAAO,CAAE,UAAhC,CALa,CAMb,CAAED,KAAK,CAAE,WAAT,CAAsBC,OAAO,CAAE,WAA/B,CANa,CAOb,CAAED,KAAK,CAAE,cAAT,CAAyBC,OAAO,CAAE,iBAAlC,CAPa,CAQb,CAAED,KAAK,CAAE,EAAT,CARa,CADT,CAWNE,iBAAiB,CAAE,EAXb,CAYNC,SAAS,CAAE,EAZL,CAaNC,MAAM,CAAE,KAbF,CAcNC,cAAc,CAAE,EAdV,CAeNC,SAAS,CAAE,EAfL,CAgBNC,SAAS,CAAE,EAhBL,CAiBNC,QAAQ,CAAE,EAjBJ,CAkBNC,YAAY,CAAE,MAlBR,CAmBNC,MAAM,CAAE,KAnBF,CAoBNC,YAAY,CAAE,CAAC,CApBT,CAqBNC,SAAS,CAAE,KArBL,CAsBNC,SAAS,CAAE,IAtBL,CADV,OA8BEC,WA9BF,CA8BgB,SAACC,IAAD,CAAU,CACtB,GAAI,MAAKjB,KAAL,CAAWe,SAAf,CAA0B,MAAKG,QAAL,CAAcD,IAAd,EAC3B,CAhCH,OAwEEE,WAxEF,CAwEgB,SAACC,GAAD,CAAS,CACrB,GAAI,CAAC,MAAKpB,KAAL,CAAWY,MAAhB,CAAwB,CACtBS,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAmC,MAAKC,kBAAxC,CAA4D,KAA5D,EACD,CAFD,IAEO,CACLF,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,CAAsC,MAAKD,kBAA3C,CAA+D,KAA/D,EACD,CAED,MAAKP,WAAL,CAAiB,SAACS,SAAD,QAAgB,CAC/Bb,MAAM,CAAE,CAACa,SAAS,CAACb,MADY,CAE/BC,YAAY,CAAEO,GAFiB,CAAhB,EAAjB,EAID,CAnFH,OAqFEM,kBArFF,CAqFuB,UAAuB,IAAtBC,CAAAA,YAAsB,2DAAP,EAAO,CAC1C,MAAK3B,KAAL,CAAWW,YAAX,CAA0BgB,YAA1B,CACA,GAAIC,CAAAA,QAAQ,CAAGD,YAAY,CAACE,KAAb,CAAmB,GAAnB,CAAf,CACA,GAAIvB,CAAAA,MAAM,CAAG,MAAKN,KAAL,CAAWM,MAAxB,CACAwB,OAAO,CAACC,GAAR,CAAYJ,YAAZ,EACA,GAAIC,QAAQ,CAACI,MAAT,EAAmB,CAAvB,CAA0B,CACxB,OAAQJ,QAAQ,CAAC,CAAD,CAAhB,EACE,IAAK,KAAL,CACEtB,MAAM,CAAG,KAAT,CACA,MACF,IAAK,qBAAL,CACEA,MAAM,CAAG,eAAT,CACA,MACF,IAAK,wBAAL,CACEA,MAAM,CAAG,gBAAT,CACA,MACF,IAAK,QAAL,CACEA,MAAM,CAAG,mBAAT,CACA,MACF,IAAK,UAAL,CACEA,MAAM,CAAG,oBAAT,CACA,MACF,QACEA,MAAM,CAAG,EAAT,CAjBJ,CAmBD,CApBD,IAoBO,IAAIsB,QAAQ,CAACI,MAAT,EAAmB,CAAvB,CAA0B,CAC/B,OAAQJ,QAAQ,CAAC,CAAD,CAAhB,EACE,IAAK,SAAL,CACEtB,MAAM,yBAAoBsB,QAAQ,CAAC,CAAD,CAA5B,CAAN,CACA,MACF,IAAK,UAAL,CACEtB,MAAM,uBAAkBsB,QAAQ,CAAC,CAAD,CAA1B,CAAN,CACA,MACF,IAAK,WAAL,CACEtB,MAAM,sBAAiBsB,QAAQ,CAAC,CAAD,CAAzB,CAAN,CACA,MACF,QACEtB,MAAM,CAAG,EAAT,CAXJ,CAaD,CACD,GAAI,MAAKN,KAAL,CAAWM,MAAX,EAAqBA,MAArB,EAA+BA,MAAM,GAAK,EAA9C,CAAkD,CAChD,MAAKN,KAAL,CAAWM,MAAX,CAAoBA,MAApB,CACA,MAAK2B,YAAL,CAAkB,EAAlB,EACD,CACF,CAjIH,OAoIEV,kBApIF,CAoIuB,SAACW,CAAD,CAAO,CAC1B,GAAI,MAAKC,IAAL,EAAa,IAAjB,CAAuB,CACrB,GAAI,MAAKA,IAAL,CAAUC,QAAV,CAAmBF,CAAC,CAACG,MAArB,CAAJ,CAAkC,CAChC,OACD,CACF,CACD,MAAKlB,WAAL,GACD,CA3IH,OA8IEc,YA9IF,0FA8IiB,iBAAOhB,IAAP,+OACb,MAAKD,WAAL,CAAiB,CAAEF,SAAS,CAAE,IAAb,CAAjB,EADa,WAE+BG,IAF/B,CAEPqB,IAFO,CAEPA,IAFO,qBAEA,CAFA,wBAE+BrB,IAF/B,CAEGsB,KAFH,CAEGA,KAFH,sBAEW,EAFX,0BAE+BtB,IAF/B,CAEeuB,MAFf,CAEeA,MAFf,uBAEwB,EAFxB,oCAGP,OAAKC,KAAL,CAAWlD,YAAX,iBACK+C,IADL,mBACmBC,KADnB,SAEF,MAAKvC,KAAL,CAAWM,MAAX,GAAsB,KAAtB,CAA8B,EAA9B,YAAuC,MAAKN,KAAL,CAAWM,MAAlD,CAFE,SAGDkC,MAAM,EAAI,EAAV,CAAe,EAAf,mBAA+BA,MAA/B,CAHC,EAHO,QAQPE,YARO,CAQU,MAAKD,KARf,CAQPC,YARO,aASiB,MAAK1C,KATtB,CASPK,SATO,aASPA,SATO,CASIK,QATJ,aASIA,QATJ,CAUbL,SAAS,CAAGqC,YAAY,CAACC,QAAzB,CACAjC,QAAQ,qBAAGgC,YAAY,CAACE,IAAhB,6CAAG,mBAAmBC,UAA9B,CACA,MAAK7B,WAAL,CAAiB,CACfX,SAAS,CAATA,SADe,CAEfD,iBAAiB,CAAEC,SAFJ,CAGfK,QAAQ,CAARA,QAHe,CAIfI,SAAS,CAAE,KAJI,CAAjB,EAZa,sDA9IjB,qEAmKEgC,gBAnKF,CAmKqB,SAACR,IAAD,CAAU,CAC3B,MAAKL,YAAL,CAAkBK,IAAlB,EACD,CArKH,OAwKES,YAxKF,CAwKiB,SAACC,KAAD,CAAW,CACxB,GAAIC,CAAAA,YAAY,CAAGD,KAAK,CAACX,MAAN,CAAaa,KAAhC,CACA,GAAIjC,CAAAA,IAAI,CAAG,CAAEuB,MAAM,CAAES,YAAV,CAAX,CACA,MAAKhB,YAAL,CAAkBhB,IAAlB,EACD,CA5KH,OA8KEkC,gBA9KF,2FA8KqB,kBAAOC,IAAP,qKACXC,YADW,CACM,MAAKZ,KADX,CACXY,YADW,CAEX5C,SAFW,CAEG,MAAKT,KAFR,CAEXS,SAFW,CAGjB,GAAI2C,IAAI,GAAK,UAAb,CAAyB,sCACPC,YADO,MACvB,+CAA8B,CAArBjC,GAAqB,aAC5BX,SAAS,CAAC6C,IAAV,CAAe,CACbC,KAAK,CAAEnC,GAAG,CAACoC,UADE,CAEbC,MAAM,CAAE,cAAgBrC,GAAG,CAACsC,EAFf,CAAf,EAID,CANsB,qDAOxB,CAVgB,uBAWX,OAAK1C,WAAL,CAAiB,CACrBP,SAAS,CAATA,SADqB,CAAjB,CAXW,yDA9KrB,uEA+LEkD,iBA/LF,CA+LsB,SAACD,EAAD,CAAQ,CAC1B,MAAKjB,KAAL,CAAWjD,eAAX,WAA8BkE,EAA9B,OAAqCE,IAArC,CAA0C,SAACC,GAAD,QAAS,OAAK5B,YAAL,CAAkB,EAAlB,CAAT,EAA1C,EACD,CAjMH,kFA0BE,+BAAuB,CACrB,KAAKjC,KAAL,CAAWe,SAAX,CAAuB,KAAvB,CACD,CA5BH,iCAkCE,4BAAoB,CAClB,GAAM+C,CAAAA,WAAW,CAAG,GAAIC,CAAAA,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBzB,MAApC,CAApB,CACA,GAAMlC,CAAAA,MAAM,CAAGwD,WAAW,CAACI,GAAZ,CAAgB,QAAhB,CAAf,CACA,GAAI5D,MAAJ,CAAY,CACV,KAAKN,KAAL,CAAWW,YAAX,CAA0B,IAAML,MAAhC,CACA,KAAKoB,kBAAL,CAAwB,KAAK1B,KAAL,CAAWW,YAAnC,EACA,KAAKK,WAAL,CAAiB,EAAjB,EACD,CAJD,IAIO,MAAKiB,YAAL,CAAkB,EAAlB,EACR,CA1CH,kCA4CE,6BAAqB,iBACnB,KAAKQ,KAAL,CAAWnD,YAAX,CAAwB,aAAxB,EAAuCsE,IAAvC,CAA4C,SAACC,GAAD,CAAS,CACnD,GAAMtD,CAAAA,cAAN,CAAyB,MAAI,CAACP,KAA9B,CAAMO,cAAN,CADmD,0CAEnCsD,GAAG,CAAC5C,IAF+B,aAEnD,kDAA0B,IAAjBG,CAAAA,GAAiB,cACxBb,cAAc,CAAC+C,IAAf,CAAoB,CAClBC,KAAK,CAAEnC,GAAG,CAAC+C,aADO,CAElBV,MAAM,CAAE,aAAerC,GAAG,CAACsC,EAFT,CAApB,EAID,CAPkD,uDAQnD,MAAI,CAAC1C,WAAL,CAAiB,CAAET,cAAc,CAAdA,cAAF,CAAjB,EACD,CATD,EAWA;AACA,KAAKkC,KAAL,CAAWnD,YAAX,CAAwB,aAAxB,EAAuCsE,IAAvC,CAA4C,SAACC,GAAD,CAAS,CACnD,GAAMrD,CAAAA,SAAN,CAAoB,MAAI,CAACR,KAAzB,CAAMQ,SAAN,CADmD,0CAEnCqD,GAAG,CAAC5C,IAF+B,aAEnD,kDAA0B,IAAjBG,CAAAA,GAAiB,cACxBZ,SAAS,CAAC8C,IAAV,CAAe,CAAEG,MAAM,CAAE,YAAcrC,GAAG,CAACsC,EAA5B,CAAgCH,KAAK,CAAEnC,GAAG,CAACgD,UAA3C,CAAf,EACD,CAJkD,uDAKnD,MAAI,CAACpD,WAAL,CAAiB,CAAER,SAAS,CAATA,SAAF,CAAjB,EACD,CAND,EAQA;AACA,KAAKiC,KAAL,CAAWpD,WAAX,GAAyBuE,IAAzB,CAA8B,UAAM,CAClC,MAAI,CAACT,gBAAL,CAAsB,UAAtB,EACD,CAFD,EAGD,CAED;AAvEF,sBAmME,iBAAS,iBACP,iBAWI,KAAKnD,KAXT,CACEC,aADF,cACEA,aADF,CAEES,QAFF,cAEEA,QAFF,CAGEG,YAHF,cAGEA,YAHF,CAIEN,cAJF,cAIEA,cAJF,CAKEC,SALF,cAKEA,SALF,CAMEC,SANF,cAMEA,SANF,CAOEJ,SAPF,cAOEA,SAPF,CAQED,iBARF,cAQEA,iBARF,CASEU,SATF,cASEA,SATF,CAUEH,YAVF,cAUEA,YAVF,CAYA,GAAM0D,CAAAA,CAAN,CAAY,KAAK5B,KAAjB,CAAM4B,CAAN,CAEA,mBACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,2BAAT,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,0BAFZ,CAGE,KAAK,CAAC,UAHR,EADF,CADF,CADF,cAUE,2BAAK,SAAS,CAAC,wBAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,gCAAT,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,0BAFZ,CAGE,KAAK,CAAC,eAHR,EADF,CADF,CAVF,cAmBE,2BAAK,SAAS,CAAC,wBAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,yBAAT,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,0BAFZ,CAGE,KAAK,CAAC,eAHR,EADF,CADF,CAnBF,CADF,cA8BE,2BAAK,SAAS,CAAC,KAAf,eACE,2BACE,SAAS,CAAC,yBADZ,CAEE,KAAK,CACH,KAAKrE,KAAL,CAAWc,SAAX,CACI,CAAEwD,aAAa,CAAE,MAAjB,CAAyBC,OAAO,CAAE,GAAlC,CADJ,CAEI,EALR,eAQE,2BAAK,SAAS,CAAC,cAAf,eACE,8BAAKF,CAAC,CAAC,SAAD,CAAN,CADF,CARF,cAWE,oBAAC,UAAD,EACE,YAAY,CAAE1D,YADhB,CAEE,QAAQ,CAAE,4BAAG8C,CAAAA,MAAH,OAAGA,MAAH,OAAgB,CAAA,MAAI,CAAC/B,kBAAL,CAAwB+B,MAAxB,CAAhB,EAFZ,CAGE,KAAK,CAAE,CACL,CACEF,KAAK,CAAEc,CAAC,CAAC,UAAD,CADV,CAEEZ,MAAM,CAAE,MAFV,CADK,CAKL,CACEF,KAAK,CAAEc,CAAC,CAAC,aAAD,CADV,CAEEZ,MAAM,CAAE,SAFV,CALK,CASL,CACEF,KAAK,CAAEc,CAAC,CAAC,eAAD,CADV,CAEEZ,MAAM,CAAE,WAFV,CATK,CAaL,CACEF,KAAK,CAAEc,CAAC,CAAC,cAAD,CADV,CAEEZ,MAAM,CAAE,SAFV,CAGEe,MAAM,CAAEhE,SAAS,CAACiE,GAAV,CAAc,SAACvC,CAAD,CAAO,CAC3B,sCAAYA,CAAZ,MAAeqB,KAAK,CAAEc,CAAC,CAACnC,CAAC,CAACqB,KAAH,CAAvB,GACD,CAFO,CAHV,CAbK,CAoBL,CACEA,KAAK,CAAEc,CAAC,CAAC,uBAAD,CADV,CAEEZ,MAAM,CAAE,sBAFV,CApBK,CAwBL,CACEF,KAAK,CAAEc,CAAC,CAAC,0BAAD,CADV,CAEEZ,MAAM,CAAE,yBAFV,CAxBK,CA4BL,CACEF,KAAK,CAAEc,CAAC,CAAC,cAAD,CADV,CAEEZ,MAAM,CAAE,WAFV,CAGEe,MAAM,CAAEjE,cAAc,CAACkE,GAAf,CAAmB,SAACvC,CAAD,CAAO,CAChC,sCAAYA,CAAZ,MAAeqB,KAAK,CAAEc,CAAC,CAACnC,CAAC,CAACqB,KAAH,CAAvB,GACD,CAFO,CAHV,CA5BK,CAmCL,CACEA,KAAK,CAAEc,CAAC,CAAC,cAAD,CADV,CAEEZ,MAAM,CAAE,YAFV,CAGEe,MAAM,CAAE/D,SAAS,CAACgE,GAAV,CAAc,SAACvC,CAAD,CAAO,CAC3B,sCAAYA,CAAZ,MAAeqB,KAAK,CAAEc,CAAC,CAACnC,CAAC,CAACqB,KAAH,CAAvB,GACD,CAFO,CAHV,CAnCK,CAHT,EAXF,CADF,cA4DE,2BAAK,SAAS,CAAC,4BAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,8BAAKc,CAAC,CAAC,gBAAD,CAAN,CADF,CADF,cAIE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,gCAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,SAAS,CAAC,EADZ,CAEE,WAAW,CAAC,cAFd,CAGE,OAAO,CAAE,KAAKtB,YAHhB,EADF,CADF,cAQE,2BAAK,SAAS,CAAC,sBAAf,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,0BAFZ,CAGE,KAAK,CAAC,WAHR,CAIE,OAAO,CAAE,yBACP,CAAA,MAAI,CAACN,KAAL,CAAWiC,OAAX,CAAmBpB,IAAnB,CAAwB,sBAAxB,CADO,EAJX,EADF,CARF,CADF,CAJF,CADF,cA2BE,2BAAK,SAAS,CAAC,mBAAf,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,oBAAC,YAAD,EACE,aAAa,CAAErD,aADjB,CAEE,YAAY,CAAE,KAAK6C,gBAFrB,CAGE,QAAQ,CAAEpC,QAHZ,CAIE,QAAQ,CAAEN,iBAJZ,CAKE,MAAM,CAAE,gBAACC,SAAD,QAAe,CAAA,MAAI,CAACW,WAAL,CAAiB,CAAEX,SAAS,CAATA,SAAF,CAAjB,CAAf,EALV,EAOGS,SAAS,cACR,2CACE,0BAAI,OAAO,CAAC,GAAZ,eACE,2BAAK,KAAK,CAAC,uDAAX,eACE,2BAAK,KAAK,CAAC,gBAAX,CAA4B,IAAI,CAAC,QAAjC,eACE,4BAAM,KAAK,CAAC,SAAZ,eADF,CADF,CADF,CADF,CADQ,CAUNT,SAAS,CAAC2B,MAAV,CAAmB,CAAnB,CACF3B,SAAS,CAACoE,GAAV,CACE,eAWEE,KAXF,CAYK,IAVDjB,CAAAA,EAUC,OAVDA,EAUC,CATDkB,QASC,OATDA,QASC,CARDC,UAQC,OARDA,UAQC,CAPDC,QAOC,OAPDA,QAOC,CANDC,QAMC,OANDA,QAMC,CALDC,SAKC,OALDA,SAKC,CAJDC,eAIC,OAJDA,eAIC,CAHDC,MAGC,OAHDA,MAGC,CACH,mBACE,0BAAI,GAAG,CAAEP,KAAT,eACE,0BAAI,SAAS,CAAC,+BAAd,eACE,4BACE,SAAS,WACPO,MAAM,GAAK,WAAX,CACI,WADJ,CAEI,eAHG,CADX,EADF,CADF,cAUE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGN,QADH,CADF,CAVF,cAeE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGC,UADH,CADF,CAfF,cAoBE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGC,QADH,CADF,CApBF,cA0BE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGC,QAAQ,CAAGA,QAAQ,CAAC,CAAD,CAAX,CAAiB,EAD5B,CADF,CA1BF,cA+BE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGE,eADH,CADF,CA/BF,cAoCE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGD,SADH,CADF,CApCF,cAyCE,0BACE,SAAS,CAAC,mBADZ,CAEE,GAAG,CAAE,aAAC7C,IAAD,CAAU,CACb,MAAI,CAACA,IAAL,CAAYA,IAAZ,CACD,CAJH,CAKE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAChB,WAAL,CAAiBwD,KAAjB,CAAN,EALX,EAOG9D,YAAY,GAAK8D,KAAjB,cACC,qDACE,2BAAK,SAAS,CAAC,yEAAf,eACE,yBAAG,SAAS,CAAC,WAAb,EADF,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,2BACE,SAAS,CAAC,sCADZ,CAEE,OAAO,CAAE,yBACP,CAAA,MAAI,CAAClC,KAAL,CAAWiC,OAAX,CAAmBpB,IAAnB,4BACsBI,EADtB,kBADO,EAFX,eAQE,4BAAM,SAAS,CAAC,oBAAhB,EARF,CASGW,CAAC,CAAC,MAAD,CATJ,CADF,cAYE,2BACE,SAAS,CAAC,iCADZ,CAEE,OAAO,CAAE,yBACP,CAAA,MAAI,CAAC5B,KAAL,CAAWiC,OAAX,CAAmBpB,IAAnB,4BACsBI,EADtB,eADO,EAFX,eAQE,4BAAM,SAAS,CAAC,gBAAhB,EARF,CASGW,CAAC,CAAC,MAAD,CATJ,CAZF,cAuBE,2BACE,SAAS,CAAC,sCADZ,CAEE,OAAO,CAAE,yBACP,CAAA,MAAI,CAACV,iBAAL,CAAuBD,EAAvB,CADO,EAFX,eAME,4BAAM,SAAS,CAAC,kBAAhB,EANF,CAOGW,CAAC,CAAC,QAAD,CAPJ,CAvBF,CAJF,CADD,cAwCC,2BAAK,SAAS,CAAC,kEAAf,eACE,yBAAG,SAAS,CAAC,qBAAb,EADF,CA/CJ,CAzCF,CADF,CAgGD,CA9GH,CADE,CAkHF,EAnIJ,CADF,cAuIE,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,cAAf,eACE,2BAAK,SAAS,CAAC,OAAf,EADF,cAEE,2BAAK,SAAS,CAAC,QAAf,EAAyBA,CAAC,CAAC,iBAAD,CAA1B,CAFF,CADF,cAKE,2BAAK,SAAS,CAAC,cAAf,eACE,2BAAK,SAAS,CAAC,qBAAf,EADF,cAEE,2BAAK,SAAS,CAAC,QAAf,EAAyBA,CAAC,CAAC,mBAAD,CAA1B,CAFF,CALF,CAvIF,CADF,CADF,CA3BF,CA5DF,CA9BF,CADF,CAgRD,CAleH,gCAAwCpF,KAAK,CAACkG,SAA9C,EAqeA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACpF,KAAD,QAAY,CAClCqD,YAAY,CAAErD,KAAK,CAACqF,MAAN,CAAahC,YADO,CAElCX,YAAY,CAAE1C,KAAK,CAACsF,SAAN,CAAgBC,eAFI,CAAZ,EAAxB,CAKA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAc,CACvC,MAAO/F,CAAAA,kBAAkB,CACvB,CACEH,YAAY,CAAZA,YADF,CAEEC,eAAe,CAAfA,eAFF,CAGEH,WAAW,CAAXA,WAHF,CAIEC,YAAY,CAAZA,YAJF,CADuB,CAOvBmG,QAPuB,CAAzB,CASD,CAVD,CAYA,MAAO,IAAMC,CAAAA,aAAa,CAAG5F,eAAe,GAC1CL,OAAO,CAAC2F,eAAD,CAAkBI,kBAAlB,CAAP,CAA6CzF,kBAA7C,CAD0C,CAArC","sourcesContent":["import React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport \"./style.scss\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport { getStaffPlus, deleteStaffPlus } from \"redux/actions/staffPlus\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nimport { Link } from \"react-router-dom\";\nimport { Navigation } from \"react-minimal-side-navigation\";\nimport { withTranslation } from \"react-i18next\";\n\nexport class ListStaffPlusClass extends React.Component {\n  state = {\n    headerDetails: [\n      { label: \"Status\", sortKey: \"status\" },\n      { label: \"Staff Name\", sortKey: \"emp_name\" },\n      { label: \"Phone\", sortKey: \"emp_phone1\" },\n      { label: \"Staff ID\", sortKey: \"emp_code\" },\n      { label: \"Specialist\", sortKey: \"services\" },\n      { label: \"Home site\", sortKey: \"site_code\" },\n      { label: \"Current site\", sortKey: \"defaultsitecode\" },\n      { label: \"\" },\n    ],\n    originalStaffList: [],\n    staffList: [],\n    filter: \"all\",\n    locationOption: [],\n    levelList: [],\n    jobOption: [],\n    pageMeta: {},\n    selectedMenu: \"/all\",\n    active: false,\n    currentIndex: -1,\n    isLoading: false,\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount() {\n    const queryParams = new URLSearchParams(window.location.search);\n    const filter = queryParams.get(\"filter\");\n    if (filter) {\n      this.state.selectedMenu = \"/\" + filter;\n      this.handleFilterChange(this.state.selectedMenu);\n      this.updateState({});\n    } else this.queryHandler({});\n  }\n\n  componentWillMount() {\n    this.props.getCommonApi(\"branchlist/\").then((res) => {\n      let { locationOption } = this.state;\n      for (let key of res.data) {\n        locationOption.push({\n          title: key.itemsite_desc,\n          itemId: \"/sitelist/\" + key.id,\n        });\n      }\n      this.updateState({ locationOption });\n    });\n\n    // level option api\n    this.props.getCommonApi(\"securities/\").then((res) => {\n      let { levelList } = this.state;\n      for (let key of res.data) {\n        levelList.push({ itemId: \"/emp_lvl/\" + key.id, title: key.level_name });\n      }\n      this.updateState({ levelList });\n    });\n\n    // jobtitle option api\n    this.props.getJobtitle().then(() => {\n      this.getDatafromStore(\"jobtitle\");\n    });\n  }\n\n  // popup open/close\n  handleClick = (key) => {\n    if (!this.state.active) {\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\n    }\n\n    this.updateState((prevState) => ({\n      active: !prevState.active,\n      currentIndex: key,\n    }));\n  };\n\n  handleFilterChange = (filterOption = \"\") => {\n    this.state.selectedMenu = filterOption;\n    var splitted = filterOption.split(\"/\");\n    var filter = this.state.filter;\n    console.log(filterOption);\n    if (splitted.length == 2) {\n      switch (splitted[1]) {\n        case \"all\":\n          filter = \"all\";\n          break;\n        case \"withSecurityAccount\":\n          filter = \"is_login=True\";\n          break;\n        case \"withoutSecurityAccount\":\n          filter = \"is_login=False\";\n          break;\n        case \"active\":\n          filter = \"emp_isactive=True\";\n          break;\n        case \"inactive\":\n          filter = \"emp_isactive=False\";\n          break;\n        default:\n          filter = \"\";\n      }\n    } else if (splitted.length == 3) {\n      switch (splitted[1]) {\n        case \"emp_lvl\":\n          filter = `LEVEL_ItmIDid=${splitted[2]}`;\n          break;\n        case \"sitelist\":\n          filter = `Site_Codeid=${splitted[2]}`;\n          break;\n        case \"operation\":\n          filter = `EMP_TYPEid=${splitted[2]}`;\n          break;\n        default:\n          filter = \"\";\n      }\n    }\n    if (this.state.filter != filter && filter !== \"\") {\n      this.state.filter = filter;\n      this.queryHandler({});\n    }\n  };\n\n  // while clicking popup close at outside click\n  handleOutsideClick = (e) => {\n    if (this.node != null) {\n      if (this.node.contains(e.target)) {\n        return;\n      }\n    }\n    this.handleClick();\n  };\n\n  // api call for staff\n  queryHandler = async (data) => {\n    this.updateState({ isLoading: true });\n    let { page = 1, limit = 10, search = \"\" } = data;\n    await this.props.getStaffPlus(\n      `?page=${page}&limit=${limit}${\n        this.state.filter === \"all\" ? \"\" : `&${this.state.filter}`\n      }${search == \"\" ? \"\" : `&search=${search}`}`\n    );\n    let { staffDetails } = this.props;\n    let { staffList, pageMeta } = this.state;\n    staffList = staffDetails.dataList;\n    pageMeta = staffDetails.meta?.pagination;\n    this.updateState({\n      staffList,\n      originalStaffList: staffList,\n      pageMeta,\n      isLoading: false,\n    });\n  };\n\n  // pagination\n  handlePagination = (page) => {\n    this.queryHandler(page);\n  };\n\n  // seach change with api call\n  handlesearch = (event) => {\n    let searchString = event.target.value;\n    let data = { search: searchString };\n    this.queryHandler(data);\n  };\n\n  getDatafromStore = async (type) => {\n    let { jobtitleList } = this.props;\n    let { jobOption } = this.state;\n    if (type === \"jobtitle\") {\n      for (let key of jobtitleList) {\n        jobOption.push({\n          title: key.level_desc,\n          itemId: \"/operation/\" + key.id,\n        });\n      }\n    }\n    await this.updateState({\n      jobOption,\n    });\n  };\n\n  // delete api call for staff\n  handleDeleteStaff = (id) => {\n    this.props.deleteStaffPlus(`${id}/`).then((res) => this.queryHandler({}));\n  };\n\n  render() {\n    let {\n      headerDetails,\n      pageMeta,\n      currentIndex,\n      locationOption,\n      levelList,\n      jobOption,\n      staffList,\n      originalStaffList,\n      isLoading,\n      selectedMenu,\n    } = this.state;\n    let { t } = this.props;\n\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"row mb-4\">\n          <div className=\"col-md-4 col-lg-2 mb-2\">\n            <Link to=\"/admin/staffplus/schedule\">\n              <NormalButton\n                normal={true}\n                className=\"col-12 fs-15 float-right\"\n                label=\"Schedule\"\n              />\n            </Link>\n          </div>\n          <div className=\"col-md-4 col-lg-2 mb-2\">\n            <Link to=\"/admin/staffplus/authorization\">\n              <NormalButton\n                normal={true}\n                className=\"col-12 fs-15 float-right\"\n                label=\"Authorization\"\n              />\n            </Link>\n          </div>\n          <div className=\"col-md-4 col-lg-2 mb-2\">\n            <Link to=\"/admin/staffplus/skills\">\n              <NormalButton\n                normal={true}\n                className=\"col-12 fs-15 float-right\"\n                label=\"Skill Listing\"\n              />\n            </Link>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div\n            className=\"col-sm-12 col-lg-3 mb-4\"\n            style={\n              this.state.isLoading\n                ? { pointerEvents: \"none\", opacity: 0.2 }\n                : {}\n            }\n          >\n            <div className=\"col-md-4 p-0\">\n              <h4>{t(\"Filters\")}</h4>\n            </div>\n            <Navigation\n              activeItemId={selectedMenu}\n              onSelect={({ itemId }) => this.handleFilterChange(itemId)}\n              items={[\n                {\n                  title: t(\"Show All\"),\n                  itemId: \"/all\",\n                },\n                {\n                  title: t(\"Show Active\"),\n                  itemId: \"/active\",\n                },\n                {\n                  title: t(\"Show Inactive\"),\n                  itemId: \"/inactive\",\n                },\n                {\n                  title: t(\"By Emp Level\"),\n                  itemId: \"/emplvl\",\n                  subNav: levelList.map((e) => {\n                    return { ...e, title: t(e.title) };\n                  }),\n                },\n                {\n                  title: t(\"With Security Account\"),\n                  itemId: \"/withSecurityAccount\",\n                },\n                {\n                  title: t(\"Without Security Account\"),\n                  itemId: \"/withoutSecurityAccount\",\n                },\n                {\n                  title: t(\"By Site List\"),\n                  itemId: \"/sitelist\",\n                  subNav: locationOption.map((e) => {\n                    return { ...e, title: t(e.title) };\n                  }),\n                },\n                {\n                  title: t(\"By Operation\"),\n                  itemId: \"/operation\",\n                  subNav: jobOption.map((e) => {\n                    return { ...e, title: t(e.title) };\n                  }),\n                },\n              ]}\n            />\n          </div>\n          <div className=\"staffList-container col-xl\">\n            <div className=\"row align-items-center\">\n              <div className=\"col-md-4\">\n                <h3>{t(\"List of Staffs\")}</h3>\n              </div>\n              <div className=\"col-md-8\">\n                <div className=\"d-flex justify-content-between\">\n                  <div className=\"w-100 col-8\">\n                    <InputSearch\n                      className=\"\"\n                      placeholder=\"Search Staff\"\n                      onEnter={this.handlesearch}\n                    />\n                  </div>\n                  <div className=\"w-100 col-4 ml-1 p-0\">\n                    <NormalButton\n                      mainbg={true}\n                      className=\"col-12 fs-15 float-right\"\n                      label=\"Add Staff\"\n                      onClick={() =>\n                        this.props.history.push(\"/admin/staffplus/add\")\n                      }\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                <div className=\"table-container\">\n                  <TableWrapper\n                    headerDetails={headerDetails}\n                    queryHandler={this.handlePagination}\n                    pageMeta={pageMeta}\n                    sortData={originalStaffList}\n                    onSort={(staffList) => this.updateState({ staffList })}\n                  >\n                    {isLoading ? (\n                      <tr>\n                        <td colSpan=\"7\">\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                            <div class=\"spinner-border\" role=\"status\">\n                              <span class=\"sr-only\">Loading...</span>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                    ) : staffList.length > 0 ? (\n                      staffList.map(\n                        (\n                          {\n                            id,\n                            emp_name,\n                            emp_phone1,\n                            emp_code,\n                            services,\n                            site_code,\n                            defaultsitecode,\n                            status,\n                          },\n                          index\n                        ) => {\n                          return (\n                            <tr key={index}>\n                              <td className=\"position-relative status-type\">\n                                <span\n                                  className={`${\n                                    status === \"available\"\n                                      ? \"available\"\n                                      : \"not-available\"\n                                  }`}\n                                ></span>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {emp_name}\n                                </div>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {emp_phone1}\n                                </div>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {emp_code}\n                                </div>\n                              </td>\n                              {/* <td><div className=\"d-flex align-items-center justify-content-center\"></div></td> */}\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {services ? services[0] : \"\"}\n                                </div>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {defaultsitecode}\n                                </div>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {site_code}\n                                </div>\n                              </td>\n                              <td\n                                className=\"position-relative\"\n                                ref={(node) => {\n                                  this.node = node;\n                                }}\n                                onClick={() => this.handleClick(index)}\n                              >\n                                {currentIndex === index ? (\n                                  <>\n                                    <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\n                                      <i className=\"icon-more\"></i>\n                                    </div>\n                                    <div className=\"option card\">\n                                      <div\n                                        className=\"d-flex align-items-center fs-14 pt-3\"\n                                        onClick={() =>\n                                          this.props.history.push(\n                                            `/admin/staffPlus/${id}/staffDetails`\n                                          )\n                                        }\n                                      >\n                                        <span className=\"icon-eye-grey px-3\"></span>\n                                        {t(\"View\")}\n                                      </div>\n                                      <div\n                                        className=\"d-flex align-items-center fs-14\"\n                                        onClick={() =>\n                                          this.props.history.push(\n                                            `/admin/staffPlus/${id}/editStaff`\n                                          )\n                                        }\n                                      >\n                                        <span className=\"icon-edit px-3\"></span>\n                                        {t(\"Edit\")}\n                                      </div>\n                                      <div\n                                        className=\"d-flex align-items-center fs-14 pb-3\"\n                                        onClick={() =>\n                                          this.handleDeleteStaff(id)\n                                        }\n                                      >\n                                        <span className=\"icon-delete px-3\"></span>\n                                        {t(\"Delete\")}\n                                      </div>\n                                    </div>\n                                  </>\n                                ) : (\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\n                                    <i className=\"icon-more text-grey\"></i>\n                                  </div>\n                                )}\n                              </td>\n                            </tr>\n                          );\n                        }\n                      )\n                    ) : (\n                      \"\"\n                    )}\n                  </TableWrapper>\n                  <div className=\"palette\">\n                    <div className=\"color-detail\">\n                      <div className=\"color\"></div>\n                      <div className=\"detail\">{t(\"Available today\")}</div>\n                    </div>\n                    <div className=\"color-detail\">\n                      <div className=\"color not-available\"></div>\n                      <div className=\"detail\">{t(\"Unavailable today\")}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  jobtitleList: state.common.jobtitleList,\n  staffDetails: state.staffPlus.staffPlusDetail,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      getStaffPlus,\n      deleteStaffPlus,\n      getJobtitle,\n      getCommonApi,\n    },\n    dispatch\n  );\n};\n\nexport const ListStaffPlus = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(ListStaffPlusClass)\n);\n"]},"metadata":{},"sourceType":"module"}