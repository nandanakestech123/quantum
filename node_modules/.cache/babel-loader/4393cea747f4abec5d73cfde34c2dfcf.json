{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton}from\"component/common\";import{TableWrapper}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getRewardPlolicySettings}from\"redux/actions/customerPlus\";import _ from\"lodash\";import{withTranslation}from\"react-i18next\";export var RewardPolicyTableClass=/*#__PURE__*/function(_React$Component){_inherits(RewardPolicyTableClass,_React$Component);var _super=_createSuper(RewardPolicyTableClass);function RewardPolicyTableClass(){var _this;_classCallCheck(this,RewardPolicyTableClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Code\",sortKey:\"customerCode\"},{label:\"Cust Type\",sortKey:\"customerType\",enabled:true},{label:\"Reward Stock Type\",sortKey:\"rewardStockType\",enabled:true},{label:\"Currency Value\",sortKey:\"currencyValue\",enabled:true},{label:\"Point Value\",sortKey:\"pointsValue\",enabled:true},{label:\"Active\",sortKey:\"active\",enabled:true},{label:\"\"}],dataList:[],meta:{},currentIndex:-1,isMounted:true,isLoading:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handlePagination=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _data$page;var page,_this$props$rewardPol,diagnosisList,pagination;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:page=(_data$page=data===null||data===void 0?void 0:data.page)!==null&&_data$page!==void 0?_data$page:1;_this.setState({isLoading:true});_context.next=4;return _this.props.getRewardPlolicySettings(\"?limit=10&page=\".concat(page));case 4:_this$props$rewardPol=_this.props.rewardPolicyList,diagnosisList=_this$props$rewardPol.diagnosisList,pagination=_this$props$rewardPol.pagination;_this.updateState({meta:pagination,dataList:diagnosisList,isLoading:false});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.updateState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};return _this;}_createClass(RewardPolicyTableClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.handlePagination();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,headerDetails=_this$state.headerDetails,dataList=_this$state.dataList,meta=_this$state.meta,currentIndex=_this$state.currentIndex,isLoading=_this$state.isLoading;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"head-label\"},t(\"Reward Policy\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-md-6 col-sm-12 fs-15 float-right\",label:\"Add Reward Policy\",onClick:function onClick(){return _this2.props.history.push(\"lpmanagement/addreward\");}}))))),isLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\")))):/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:meta,showFilterColumn:true,parentHeaderChange:function parentHeaderChange(value){return _this2.updateState(function(){return headerDetails=value;});}},dataList?dataList.map(function(item,index){var _headerDetails$0$enab,_headerDetails$0$enab2,_headerDetails$1$enab,_headerDetails$2$enab,_headerDetails$3$enab,_headerDetails$4$enab;var id=item.id,reward_code=item.reward_code,cust_type=item.cust_type,cur_value=item.cur_value,point_value=item.point_value,isactive=item.isactive,reward_item_type=item.reward_item_type;console.log(headerDetails[0]);return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$0$enab=headerDetails[0].enabled)!==null&&_headerDetails$0$enab!==void 0?_headerDetails$0$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},reward_code)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$0$enab2=headerDetails[0].enabled)!==null&&_headerDetails$0$enab2!==void 0?_headerDetails$0$enab2:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_type)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$1$enab=headerDetails[1].enabled)!==null&&_headerDetails$1$enab!==void 0?_headerDetails$1$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},reward_item_type)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$2$enab=headerDetails[2].enabled)!==null&&_headerDetails$2$enab!==void 0?_headerDetails$2$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cur_value)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$3$enab=headerDetails[3].enabled)!==null&&_headerDetails$3$enab!==void 0?_headerDetails$3$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},point_value)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$4$enab=headerDetails[4].enabled)!==null&&_headerDetails$4$enab!==void 0?_headerDetails$4$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},isactive)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\",ref:function ref(node){_this2.node=node;},onClick:function onClick(){return _this2.handleClick(index);}},currentIndex===index?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more-active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"option card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pt-3\",onClick:function onClick(){return _this2.props.history.push(\"lpmanagement/\".concat(id,\"/editredeem\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey px-3\"}),\" \",\"Edit\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"}))));}):null))))));}}]);return RewardPolicyTableClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{rewardPolicyList:state.customerPlus.rewardPolicyList};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getRewardPlolicySettings:getRewardPlolicySettings},dispatch);};export var RewardPolicyTable=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(RewardPolicyTableClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/LoyaltyPointsSettings/RewardPolicyTable/index.js"],"names":["React","NormalButton","TableWrapper","connect","bindActionCreators","getRewardPlolicySettings","_","withTranslation","RewardPolicyTableClass","state","headerDetails","label","sortKey","enabled","dataList","meta","currentIndex","isMounted","isLoading","updateState","data","setState","handlePagination","page","props","rewardPolicyList","diagnosisList","pagination","handleClick","key","active","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","t","history","push","value","map","item","index","id","reward_code","cust_type","cur_value","point_value","isactive","reward_item_type","console","log","Component","mapStateToProps","customerPlus","mapDispatchToProps","dispatch","RewardPolicyTable"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { TableWrapper } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getRewardPlolicySettings } from \"redux/actions/customerPlus\";\nimport _ from \"lodash\";\nimport { withTranslation } from \"react-i18next\";\n\nexport class RewardPolicyTableClass extends React.Component {\n  state = {\n    headerDetails: [\n      { label: \"Code\", sortKey: \"customerCode\" },\n      { label: \"Cust Type\", sortKey: \"customerType\", enabled: true },\n      { label: \"Reward Stock Type\", sortKey: \"rewardStockType\", enabled: true },\n      { label: \"Currency Value\", sortKey: \"currencyValue\", enabled: true },\n      { label: \"Point Value\", sortKey: \"pointsValue\", enabled: true },\n      { label: \"Active\", sortKey: \"active\", enabled: true },\n      { label: \"\" },\n    ],\n    dataList: [],\n    meta: {},\n    currentIndex: -1,\n    isMounted: true,\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    this.handlePagination();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = data => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  handlePagination = async data => {\n    let page = data?.page ?? 1;\n    this.setState({ isLoading: true });\n    await this.props.getRewardPlolicySettings(`?limit=10&page=${page}`);\n    let { diagnosisList, pagination } = this.props.rewardPolicyList;\n    this.updateState({\n      meta: pagination,\n      dataList: diagnosisList,\n      isLoading: false,\n    });\n  };\n\n  handleClick = key => {\n    if (!this.state.active) {\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\n    }\n\n    this.updateState(prevState => ({\n      active: !prevState.active,\n      currentIndex: key,\n    }));\n  };\n\n  handleOutsideClick = e => {\n    if (this.node != null) {\n      if (this.node.contains(e.target)) {\n        return;\n      }\n    }\n    this.handleClick();\n  };\n\n  render() {\n    let { headerDetails, dataList, meta, currentIndex, isLoading } = this.state;\n    let { t } = this.props;\n    return (\n      <>\n        <div className=\"customer-list container-fluid\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-md-4\">\n              <h3 className=\"head-label\">{t(\"Reward Policy\")}</h3>\n            </div>\n            <div className=\"col-md-8\">\n              <div className=\"d-flex\">\n                <div className=\"col-12 p-0\">\n                  <NormalButton\n                    mainbg={true}\n                    className=\"col-md-6 col-sm-12 fs-15 float-right\"\n                    label=\"Add Reward Policy\"\n                    onClick={() =>\n                      this.props.history.push(\"lpmanagement/addreward\")\n                    }\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          {isLoading ? (\n            <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n              <div class=\"spinner-border\" role=\"status\">\n                <span class=\"sr-only\">{t(\"Loading...\")}</span>\n              </div>\n            </div>\n          ) : (\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                <div className=\"table-container\">\n                  <TableWrapper\n                    headerDetails={headerDetails}\n                    queryHandler={this.handlePagination}\n                    pageMeta={meta}\n                    showFilterColumn={true}\n                    parentHeaderChange={value =>\n                      this.updateState(() => (headerDetails = value))\n                    }\n                  >\n                    {dataList\n                      ? dataList.map((item, index) => {\n                          let {\n                            id,\n                            reward_code,\n                            cust_type,\n                            cur_value,\n                            point_value,\n                            isactive,\n                            reward_item_type,\n                          } = item;\n                          console.log(headerDetails[0]);\n                          return (\n                            <tr key={index}>\n                              <td\n                                className={\n                                  headerDetails[0].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {reward_code}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[0].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {cust_type}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[1].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {reward_item_type}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[2].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {cur_value}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[3].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {point_value}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[4].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {isactive}\n                                </div>\n                              </td>\n                              <td\n                                className=\"position-relative\"\n                                ref={node => {\n                                  this.node = node;\n                                }}\n                                onClick={() => this.handleClick(index)}\n                              >\n                                {currentIndex === index ? (\n                                  <>\n                                    <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\n                                      <i className=\"icon-more\"></i>\n                                    </div>\n                                    <div className=\"option card\">\n                                      <div\n                                        className=\"d-flex align-items-center fs-16 pt-3\"\n                                        onClick={() =>\n                                          this.props.history.push(\n                                            `lpmanagement/${id}/editredeem`\n                                          )\n                                        }\n                                      >\n                                        <span className=\"icon-eye-grey px-3\"></span>{\" \"}\n                                        Edit\n                                      </div>\n                                    </div>\n                                  </>\n                                ) : (\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\n                                    <i className=\"icon-more\"></i>\n                                  </div>\n                                )}\n                              </td>\n                            </tr>\n                          );\n                        })\n                      : null}\n                  </TableWrapper>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  rewardPolicyList: state.customerPlus.rewardPolicyList,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      getRewardPlolicySettings,\n    },\n    dispatch\n  );\n};\n\nexport const RewardPolicyTable = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(RewardPolicyTableClass)\n);\n"]},"metadata":{},"sourceType":"module"}