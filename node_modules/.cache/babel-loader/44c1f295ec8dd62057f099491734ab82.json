{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalButton,NormalInput,NormalSelect,InputSearch,NormalModal,TableWrapper}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import _ from\"lodash\";import{history}from\"helpers\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import SimpleReactValidator from\"simple-react-validator\";import{VoidPaidTrans}from\"./voidPaidTrans.js\";import{withTranslation}from\"react-i18next\";export var BillOpsClass=/*#__PURE__*/function(_Component){_inherits(BillOpsClass,_Component);var _super=_createSuper(BillOpsClass);function BillOpsClass(){var _this;_classCallCheck(this,BillOpsClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={tstaffList:[{}],headerDetails:[{label:\"Date\",sortKey:false,width:\"60px\"},{label:\"Treatment\",width:\"120px\"},{label:\"Trans Ref\",sortKey:false,width:\"55px\"},{label:\"Discription\",sortKey:false,width:\"55px\"},{label:\"Type\",sortKey:false,width:\"55px\"},{label:\"Exp Date\",sortKey:false,width:\"55px\"},{label:\"Amount\",sortKey:false,width:\"55px\"},{label:\"Status\",sortKey:false,width:\"55px\"},{label:\"Rev\",sortKey:false,width:\"55px\"},{label:\"Treat No\",sortKey:false,width:\"55px\"},{label:\"Limit\",sortKey:false,width:\"55px\"},{label:\"Sel Staff\",sortKey:false,width:\"55px\"},{label:\"Staff\",sortKey:false,width:\"55px\"}],// cartData: {},\nyearList:[],selectedYear:new Date().getFullYear(),isOpenTreatmentDone:false,tsStaff:{},workPoint:0,isOpenReversal:false,menuItems:[{to:\"/admin/catalog\",label:\"Suspend Bill\",id:\"suspendBill\"},{to:\"/admin/catalog\",label:\"Recall Sus Bill\",id:\"recallSusBill\"},{to:\"/admin/catalog\",label:\"Recall Tran\",id:\"reacallBill\"},{to:\"/admin/catalog\",label:\"Reprint Bill\",id:\"reprint\"},{to:\"/admin/catalog\",label:\"Void item/bill\",id:\"VoidItemBill\"},{to:\"/admin/catalog\",label:\"Void Paid Trans\",id:\"voidPaidTrns\"}],activeMenu:\"voidPaidTrns\"};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});// this.props.getCommonApi('treatmentdone/Year/').then((key) => {\n//     let { status, data } = key;\n//     let { yearList } = this.state;\n//     for (let value of data) {\n//         yearList.push({ value: value, label: value })\n//     }\n//     this.setState({ yearList })\n// })\n// this.getCart();\n};_this.getCart=function(){console.log(_this.props,\"sfgdfsgdfghgf\");var _this$state=_this.state,roomList=_this$state.roomList,sourceList=_this$state.sourceList,staffList=_this$state.staffList,cartData=_this$state.cartData,duration=_this$state.duration,tstaffList=_this$state.tstaffList,selectedYear=_this$state.selectedYear;_this.props.getCommonApi(\"treatmentdone/?year=\".concat(selectedYear,\"&cust_id=\").concat(_this.props.basicApptDetail.custId)).then(function(key){cartData=key;tstaffList=key.data;_this.setState({tstaffList:tstaffList});});};_this.handleYearChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,selectedYear;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;selectedYear=_this.state.selectedYear;selectedYear=value;_context.next=5;return _this.setState({selectedYear:selectedYear});case 5:_this.getCart();case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.getDataFromRes=function(data){var _this$state2=_this.state,formFields=_this$state2.formFields,cartData=_this$state2.cartData,updateFields=_this$state2.updateFields,postFields=_this$state2.postFields;formFields[\"Item\"]=data.value.Item;formFields[\"Price\"]=data.value.Price;formFields[\"Room\"]=data.value.Room;updateFields[\"Room\"]=data.value.Room;formFields[\"Source\"]=data.value.Source;updateFields[\"Source\"]=data.value.Source;formFields[\"add_duration\"]=data.value.add_duration;formFields[\"new_remark\"]=data.value.new_remark;updateFields[\"new_remark\"]=data.value.new_remark;postFields[\"times\"]=data.value.times;postFields[\"work_point\"]=data.value.work_point;_this.setState({formFields:formFields,updateFields:updateFields,postFields:postFields});};_this.handleSubmit=function(id){};_this.handleDialog=function(){_this.setState({isOpenTreatmentDone:false,isOpenReversal:false});};_this.handleSearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;_this.props.getCommonApi(\"custappt/?search=\".concat(searchString)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});},500);}_this.debouncedFn();};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var formFields;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:formFields=_this.state.formFields;formFields[\"custId\"]=data.id;formFields[\"custName\"]=data.cust_name;_this.setState({formFields:formFields,isOpenCustomer:false,customerOption:[]});_context2.next=6;return _this.props.updateForm(\"basicApptDetail\",formFields);case 6:console.log(_this.props.basicApptDetail,\"sdfsadfasdf\");case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleCheckout=function(){var isOpenPayment=_this.state.isOpenPayment;isOpenPayment=true;_this.setState({isOpenPayment:isOpenPayment});};_this.handleChange=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref4){var _ref4$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref4$target=_ref4.target,value=_ref4$target.value,name=_ref4$target.name;formFields=_this.state.formFields;formFields[name]=value;_context3.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref5.apply(this,arguments);};}();_this.handleMenu=function(item,index){};return _this;}_createClass(BillOpsClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,_this$state3$tstaffLi=_this$state3.tstaffList,tstaffList=_this$state3$tstaffLi===void 0?[]:_this$state3$tstaffLi,_this$state3$menuItem=_this$state3.menuItems,menuItems=_this$state3$menuItem===void 0?[]:_this$state3$menuItem,activeMenu=_this$state3.activeMenu,selectedYear=_this$state3.selectedYear,yearList=_this$state3.yearList,isOpenTreatmentDone=_this$state3.isOpenTreatmentDone,headerDetails=_this$state3.headerDetails,tsStaff=_this$state3.tsStaff,isOpenReversal=_this$state3.isOpenReversal,treatmentIds=_this$state3.treatmentIds;var _this$props=this.props,basicApptDetail=_this$props.basicApptDetail,t=_this$props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row treatment-done-new p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 font-700 mb-3 title\"},t(\"Transaction Detail\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"fs-15 clear-line\",label:\"Back\",outline:false,onClick:function onClick(){return history.push(\"/admin/cart\");}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-4\"},menuItems.length>0?menuItems.map(function(data,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"menus fs-14 mr-4 \".concat(activeMenu===data.id?\"active\":\"\"),onClick:function onClick(){return _this2.handleMenu(data.id,data.label);}},t(data.label));}):\"\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(VoidPaidTrans,null))));}}]);return BillOpsClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{selected_cstomer:state.common.selected_cstomer,basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var BillOps=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(BillOpsClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/BillOps/billOps.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","VoidPaidTrans","withTranslation","BillOpsClass","state","tstaffList","headerDetails","label","sortKey","width","yearList","selectedYear","Date","getFullYear","isOpenTreatmentDone","tsStaff","workPoint","isOpenReversal","menuItems","to","id","activeMenu","componentWillMount","validator","element","message","autoForceUpdate","getCart","console","log","props","roomList","sourceList","staffList","cartData","duration","basicApptDetail","custId","then","key","data","setState","handleYearChange","target","value","name","getDataFromRes","formFields","updateFields","postFields","Item","Price","Room","Source","add_duration","new_remark","times","work_point","handleSubmit","handleDialog","handleSearch","event","persist","debouncedFn","debounce","searchString","status","customerOption","handleSelectCustomer","cust_name","isOpenCustomer","handleCheckout","isOpenPayment","handleChange","handleMenu","item","index","treatmentIds","t","push","length","map","mapStateToProps","selected_cstomer","common","appointment","mapDispatchToProps","dispatch","BillOps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalButton,\r\n  NormalInput,\r\n  NormalSelect,\r\n  InputSearch,\r\n  NormalModal,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { VoidPaidTrans } from \"./voidPaidTrans.js\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class BillOpsClass extends Component {\r\n  state = {\r\n    tstaffList: [{}],\r\n    headerDetails: [\r\n      { label: \"Date\", sortKey: false, width: \"60px\" },\r\n      { label: \"Treatment\", width: \"120px\" },\r\n      { label: \"Trans Ref\", sortKey: false, width: \"55px\" },\r\n      { label: \"Discription\", sortKey: false, width: \"55px\" },\r\n      { label: \"Type\", sortKey: false, width: \"55px\" },\r\n      { label: \"Exp Date\", sortKey: false, width: \"55px\" },\r\n      { label: \"Amount\", sortKey: false, width: \"55px\" },\r\n      { label: \"Status\", sortKey: false, width: \"55px\" },\r\n      { label: \"Rev\", sortKey: false, width: \"55px\" },\r\n      { label: \"Treat No\", sortKey: false, width: \"55px\" },\r\n      { label: \"Limit\", sortKey: false, width: \"55px\" },\r\n      { label: \"Sel Staff\", sortKey: false, width: \"55px\" },\r\n      { label: \"Staff\", sortKey: false, width: \"55px\" },\r\n    ],\r\n    // cartData: {},\r\n    yearList: [],\r\n    selectedYear: new Date().getFullYear(),\r\n    isOpenTreatmentDone: false,\r\n    tsStaff: {},\r\n    workPoint: 0,\r\n    isOpenReversal: false,\r\n    menuItems: [\r\n      { to: \"/admin/catalog\", label: \"Suspend Bill\", id: \"suspendBill\" },\r\n      { to: \"/admin/catalog\", label: \"Recall Sus Bill\", id: \"recallSusBill\" },\r\n      { to: \"/admin/catalog\", label: \"Recall Tran\", id: \"reacallBill\" },\r\n      { to: \"/admin/catalog\", label: \"Reprint Bill\", id: \"reprint\" },\r\n      { to: \"/admin/catalog\", label: \"Void item/bill\", id: \"VoidItemBill\" },\r\n      { to: \"/admin/catalog\", label: \"Void Paid Trans\", id: \"voidPaidTrns\" },\r\n    ],\r\n    activeMenu: \"voidPaidTrns\",\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    // this.props.getCommonApi('treatmentdone/Year/').then((key) => {\r\n    //     let { status, data } = key;\r\n    //     let { yearList } = this.state;\r\n    //     for (let value of data) {\r\n    //         yearList.push({ value: value, label: value })\r\n    //     }\r\n    //     this.setState({ yearList })\r\n    // })\r\n\r\n    // this.getCart();\r\n  };\r\n\r\n  getCart = () => {\r\n    console.log(this.props, \"sfgdfsgdfghgf\");\r\n    let {\r\n      roomList,\r\n      sourceList,\r\n      staffList,\r\n      cartData,\r\n      duration,\r\n      tstaffList,\r\n      selectedYear,\r\n    } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `treatmentdone/?year=${selectedYear}&cust_id=${this.props.basicApptDetail.custId}`\r\n      )\r\n      .then(key => {\r\n        cartData = key;\r\n        tstaffList = key.data;\r\n        this.setState({ tstaffList });\r\n      });\r\n  };\r\n\r\n  handleYearChange = async ({ target: { value, name } }) => {\r\n    let { selectedYear } = this.state;\r\n    selectedYear = value;\r\n    await this.setState({\r\n      selectedYear,\r\n    });\r\n    this.getCart();\r\n  };\r\n\r\n  getDataFromRes = data => {\r\n    let { formFields, cartData, updateFields, postFields } = this.state;\r\n    formFields[\"Item\"] = data.value.Item;\r\n    formFields[\"Price\"] = data.value.Price;\r\n    formFields[\"Room\"] = data.value.Room;\r\n    updateFields[\"Room\"] = data.value.Room;\r\n    formFields[\"Source\"] = data.value.Source;\r\n    updateFields[\"Source\"] = data.value.Source;\r\n    formFields[\"add_duration\"] = data.value.add_duration;\r\n    formFields[\"new_remark\"] = data.value.new_remark;\r\n    updateFields[\"new_remark\"] = data.value.new_remark;\r\n    postFields[\"times\"] = data.value.times;\r\n    postFields[\"work_point\"] = data.value.work_point;\r\n    this.setState({\r\n      formFields,\r\n      updateFields,\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  // getYearList = (data) => {\r\n  //     let date = new Date().getFullYear();\r\n\r\n  //     let { yearList } = this.state;\r\n  //     for (let i = date; i > 1970; i--) {\r\n  //         yearList.push({ label: i, value: i });\r\n  //     }\r\n  //     this.setState({\r\n  //         yearList\r\n  //     })\r\n  // }\r\n\r\n  handleSubmit = id => {};\r\n\r\n  handleDialog = () => {\r\n    this.setState({\r\n      isOpenTreatmentDone: false,\r\n      isOpenReversal: false,\r\n    });\r\n  };\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        this.props\r\n          .getCommonApi(`custappt/?search=${searchString}`)\r\n          .then(key => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n              // for (let value of data) {\r\n              //     customerList.push({ value: value.id, label: value.emp_name })\r\n              // }\r\n              this.setState({ customerOption: data });\r\n            }\r\n          });\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleSelectCustomer = async data => {\r\n    let { formFields } = this.state;\r\n    formFields[\"custId\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    this.setState({ formFields, isOpenCustomer: false, customerOption: [] });\r\n    await this.props.updateForm(\"basicApptDetail\", formFields);\r\n    console.log(this.props.basicApptDetail, \"sdfsadfasdf\");\r\n  };\r\n\r\n  handleCheckout = () => {\r\n    let { isOpenPayment } = this.state;\r\n    isOpenPayment = true;\r\n    this.setState({ isOpenPayment });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    // this.props.updateForm('customerDetail', formFields)\r\n    // await this.props.updateForm('appointmentCustomerDetail', formFields)\r\n  };\r\n\r\n  handleMenu = (item, index) => {};\r\n\r\n  render() {\r\n    let {\r\n      tstaffList = [],\r\n      menuItems = [],\r\n      activeMenu,\r\n      selectedYear,\r\n      yearList,\r\n      isOpenTreatmentDone,\r\n      headerDetails,\r\n      tsStaff,\r\n      isOpenReversal,\r\n      treatmentIds,\r\n    } = this.state;\r\n    let { basicApptDetail, t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"row treatment-done-new p-3\">\r\n          <div className=\"col-12 header\">\r\n            <div className=\"row\">\r\n              <div className=\"col-10\">\r\n                <p className=\"fs-18 font-700 mb-3 title\">\r\n                  {t(\"Transaction Detail\")}\r\n                </p>\r\n              </div>\r\n              <div className=\"col-2\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2\"}\r\n                  mainbg={true}\r\n                  className=\"fs-15 clear-line\"\r\n                  label=\"Back\"\r\n                  outline={false}\r\n                  onClick={() => history.push(`/admin/cart`)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"d-flex mb-4\">\r\n              {menuItems.length > 0\r\n                ? menuItems.map((data, index) => {\r\n                    return (\r\n                      <div\r\n                        className={`menus fs-14 mr-4 ${\r\n                          activeMenu === data.id ? \"active\" : \"\"\r\n                        }`}\r\n                        onClick={() => this.handleMenu(data.id, data.label)}\r\n                      >\r\n                        {t(data.label)}\r\n                      </div>\r\n                    );\r\n                  })\r\n                : \"\"}\r\n            </div>\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <VoidPaidTrans></VoidPaidTrans>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const BillOps = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(BillOpsClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}