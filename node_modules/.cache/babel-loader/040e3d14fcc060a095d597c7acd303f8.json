{"ast":null,"code":"/**\r\n * DevExtreme (ui/pivot_grid/ui.pivot_grid.headers_area.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.VerticalHeadersArea = exports.HorizontalHeadersArea = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _uiPivot_grid = require(\"./ui.pivot_grid.area_item\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar PIVOTGRID_AREA_CLASS = \"dx-pivotgrid-area\";\nvar PIVOTGRID_AREA_COLUMN_CLASS = \"dx-pivotgrid-horizontal-headers\";\nvar PIVOTGRID_AREA_ROW_CLASS = \"dx-pivotgrid-vertical-headers\";\nvar PIVOTGRID_TOTAL_CLASS = \"dx-total\";\nvar PIVOTGRID_GRAND_TOTAL_CLASS = \"dx-grandtotal\";\nvar PIVOTGRID_ROW_TOTAL_CLASS = \"dx-row-total\";\nvar PIVOTGRID_EXPANDED_CLASS = \"dx-pivotgrid-expanded\";\nvar PIVOTGRID_COLLAPSED_CLASS = \"dx-pivotgrid-collapsed\";\nvar PIVOTGRID_LAST_CELL_CLASS = \"dx-last-cell\";\nvar PIVOTGRID_VERTICAL_SCROLL_CLASS = \"dx-vertical-scroll\";\nvar PIVOTGRID_EXPAND_BORDER = \"dx-expand-border\";\n\nfunction getCellPath(tableElement, cell) {\n  if (cell) {\n    var data = tableElement.data().data;\n    var rowIndex = cell.parentNode.rowIndex;\n    var cellIndex = cell.cellIndex;\n    return data[rowIndex] && data[rowIndex][cellIndex] && data[rowIndex][cellIndex].path;\n  }\n}\n\nvar HorizontalHeadersArea = _uiPivot_grid.AreaItem.inherit({\n  _getAreaName: function () {\n    return \"column\";\n  },\n  _getAreaClassName: function () {\n    return PIVOTGRID_AREA_COLUMN_CLASS;\n  },\n  _createGroupElement: function () {\n    return (0, _renderer.default)(\"<div>\").addClass(this._getAreaClassName()).addClass(PIVOTGRID_AREA_CLASS);\n  },\n  _applyCustomStyles: function (options) {\n    var cssArray = options.cssArray;\n    var cell = options.cell;\n    var rowsCount = options.rowsCount;\n    var classArray = options.classArray;\n\n    if (options.cellIndex === options.cellsCount - 1) {\n      cssArray.push((options.rtlEnabled ? \"border-left:\" : \"border-right:\") + \"0px\");\n    }\n\n    if (cell.rowspan === rowsCount - options.rowIndex || options.rowIndex + 1 === rowsCount) {\n      cssArray.push(\"border-bottom-width:0px\");\n    }\n\n    if (\"T\" === cell.type || \"GT\" === cell.type) {\n      classArray.push(PIVOTGRID_ROW_TOTAL_CLASS);\n    }\n\n    if (\"T\" === options.cell.type) {\n      classArray.push(PIVOTGRID_TOTAL_CLASS);\n    }\n\n    if (\"GT\" === options.cell.type) {\n      classArray.push(PIVOTGRID_GRAND_TOTAL_CLASS);\n    }\n\n    if ((0, _type.isDefined)(cell.expanded)) {\n      classArray.push(cell.expanded ? PIVOTGRID_EXPANDED_CLASS : PIVOTGRID_COLLAPSED_CLASS);\n    }\n\n    this.callBase(options);\n  },\n  _getMainElementMarkup: function () {\n    return \"<thead class='\" + this._getAreaClassName() + \"'>\";\n  },\n  _getCloseMainElementMarkup: function () {\n    return \"</thead>\";\n  },\n  setVirtualContentParams: function (params) {\n    this.callBase(params);\n\n    this._setTableCss({\n      left: params.left,\n      top: 0\n    });\n\n    this._virtualContentWidth = params.width;\n  },\n  hasScroll: function () {\n    var tableWidth = this._virtualContent ? this._virtualContentWidth : this._tableWidth;\n\n    if (this._groupWidth && tableWidth) {\n      return tableWidth - this._groupWidth >= 1;\n    }\n\n    return false;\n  },\n  processScroll: function () {\n    if (!this._getScrollable()) {\n      this._groupElement.dxScrollable({\n        useNative: false,\n        useSimulatedScrollbar: false,\n        showScrollbar: false,\n        bounceEnabled: false,\n        direction: \"horizontal\",\n        updateManually: true\n      });\n    }\n  },\n  processScrollBarSpacing: function (scrollBarWidth) {\n    var that = this;\n    var groupAlignment = that.option(\"rtlEnabled\") ? \"right\" : \"left\";\n\n    if (that._groupWidth) {\n      that.groupWidth(that._groupWidth - scrollBarWidth);\n    }\n\n    if (that._scrollBarWidth) {\n      that._groupElement.next().remove();\n    }\n\n    that._groupElement.toggleClass(PIVOTGRID_VERTICAL_SCROLL_CLASS, scrollBarWidth > 0);\n\n    that._groupElement.css(\"float\", groupAlignment).width(that._groupHeight);\n\n    that._scrollBarWidth = scrollBarWidth;\n  },\n  ctor: function (component) {\n    this.callBase(component);\n    this._scrollBarWidth = 0;\n  },\n  getScrollPath: function (offset) {\n    var tableElement = this.tableElement();\n    var cell;\n    offset -= parseInt(tableElement[0].style.left, 10) || 0;\n    (0, _iterator.each)(tableElement.find(\"td\"), function (_, td) {\n      if (1 === td.colSpan && td.offsetLeft <= offset && td.offsetWidth + td.offsetLeft > offset) {\n        cell = td;\n        return false;\n      }\n    });\n    return getCellPath(tableElement, cell);\n  },\n  _moveFakeTable: function (scrollPos) {\n    this._moveFakeTableHorizontally(scrollPos);\n\n    this.callBase();\n  }\n});\n\nexports.HorizontalHeadersArea = HorizontalHeadersArea;\nvar VerticalHeadersArea = HorizontalHeadersArea.inherit({\n  _getAreaClassName: function () {\n    return PIVOTGRID_AREA_ROW_CLASS;\n  },\n  _applyCustomStyles: function (options) {\n    this.callBase(options);\n\n    if (options.cellIndex === options.cellsCount - 1) {\n      options.classArray.push(PIVOTGRID_LAST_CELL_CLASS);\n    }\n\n    if (options.rowIndex === options.rowsCount - 1) {\n      options.cssArray.push(\"border-bottom: 0px\");\n    }\n\n    if (options.cell.isWhiteSpace) {\n      options.classArray.push(\"dx-white-space-column\");\n    }\n  },\n  _getAreaName: function () {\n    return \"row\";\n  },\n  setVirtualContentParams: function (params) {\n    this.callBase(params);\n\n    this._setTableCss({\n      top: params.top,\n      left: 0\n    });\n\n    this._virtualContentHeight = params.height;\n  },\n  hasScroll: function () {\n    var tableHeight = this._virtualContent ? this._virtualContentHeight : this._tableHeight;\n\n    if (this._groupHeight && tableHeight) {\n      return tableHeight - this._groupHeight >= 1;\n    }\n\n    return false;\n  },\n  processScroll: function () {\n    if (!this._getScrollable()) {\n      this._groupElement.dxScrollable({\n        useNative: false,\n        useSimulatedScrollbar: false,\n        showScrollbar: false,\n        bounceEnabled: false,\n        direction: \"vertical\",\n        updateManually: true\n      });\n    }\n  },\n  processScrollBarSpacing: function (scrollBarWidth) {\n    var that = this;\n\n    if (that._groupHeight) {\n      that.groupHeight(that._groupHeight - scrollBarWidth);\n    }\n\n    if (that._scrollBarWidth) {\n      that._groupElement.next().remove();\n    }\n\n    if (scrollBarWidth) {\n      that._groupElement.after((0, _renderer.default)(\"<div>\").width(\"100%\").height(scrollBarWidth - 1));\n    }\n\n    that._scrollBarWidth = scrollBarWidth;\n  },\n  getScrollPath: function (offset) {\n    var tableElement = this.tableElement();\n    var cell;\n    offset -= parseInt(tableElement[0].style.top, 10) || 0;\n    (0, _iterator.each)(tableElement.find(\"tr\"), function (_, tr) {\n      var td = tr.childNodes[tr.childNodes.length - 1];\n\n      if (td && 1 === td.rowSpan && td.offsetTop <= offset && td.offsetHeight + td.offsetTop > offset) {\n        cell = td;\n        return false;\n      }\n    });\n    return getCellPath(tableElement, cell);\n  },\n  _moveFakeTable: function (scrollPos) {\n    this._moveFakeTableTop(scrollPos);\n\n    this.callBase();\n  },\n  _getRowClassNames: function (rowIndex, cell, rowClassNames) {\n    if (0 !== rowIndex & cell.expanded && (0, _array.inArray)(PIVOTGRID_EXPAND_BORDER, rowClassNames) === -1) {\n      rowClassNames.push(PIVOTGRID_EXPAND_BORDER);\n    }\n  },\n  _getMainElementMarkup: function () {\n    return \"<tbody class='\" + this._getAreaClassName() + \"'>\";\n  },\n  _getCloseMainElementMarkup: function () {\n    return \"</tbody>\";\n  },\n  updateColspans: function (columnCount) {\n    var rows = this.tableElement()[0].rows;\n    var columnOffset = 0;\n    var columnOffsetResetIndexes = [];\n\n    if (this.getColumnsCount() - columnCount > 0) {\n      return;\n    }\n\n    for (var i = 0; i < rows.length; i++) {\n      for (var j = 0; j < rows[i].cells.length; j++) {\n        var cell = rows[i].cells[j];\n        var rowSpan = cell.rowSpan;\n\n        if (columnOffsetResetIndexes[i]) {\n          columnOffset -= columnOffsetResetIndexes[i];\n          columnOffsetResetIndexes[i] = 0;\n        }\n\n        var diff = columnCount - (columnOffset + cell.colSpan);\n\n        if (j === rows[i].cells.length - 1 && diff > 0) {\n          cell.colSpan = cell.colSpan + diff;\n        }\n\n        columnOffsetResetIndexes[i + rowSpan] = (columnOffsetResetIndexes[i + rowSpan] || 0) + cell.colSpan;\n        columnOffset += cell.colSpan;\n      }\n    }\n  }\n});\nexports.VerticalHeadersArea = VerticalHeadersArea;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/pivot_grid/ui.pivot_grid.headers_area.js"],"names":["exports","VerticalHeadersArea","HorizontalHeadersArea","_renderer","_interopRequireDefault","require","_type","_array","_iterator","_uiPivot_grid","obj","__esModule","PIVOTGRID_AREA_CLASS","PIVOTGRID_AREA_COLUMN_CLASS","PIVOTGRID_AREA_ROW_CLASS","PIVOTGRID_TOTAL_CLASS","PIVOTGRID_GRAND_TOTAL_CLASS","PIVOTGRID_ROW_TOTAL_CLASS","PIVOTGRID_EXPANDED_CLASS","PIVOTGRID_COLLAPSED_CLASS","PIVOTGRID_LAST_CELL_CLASS","PIVOTGRID_VERTICAL_SCROLL_CLASS","PIVOTGRID_EXPAND_BORDER","getCellPath","tableElement","cell","data","rowIndex","parentNode","cellIndex","path","AreaItem","inherit","_getAreaName","_getAreaClassName","_createGroupElement","default","addClass","_applyCustomStyles","options","cssArray","rowsCount","classArray","cellsCount","push","rtlEnabled","rowspan","type","isDefined","expanded","callBase","_getMainElementMarkup","_getCloseMainElementMarkup","setVirtualContentParams","params","_setTableCss","left","top","_virtualContentWidth","width","hasScroll","tableWidth","_virtualContent","_tableWidth","_groupWidth","processScroll","_getScrollable","_groupElement","dxScrollable","useNative","useSimulatedScrollbar","showScrollbar","bounceEnabled","direction","updateManually","processScrollBarSpacing","scrollBarWidth","that","groupAlignment","option","groupWidth","_scrollBarWidth","next","remove","toggleClass","css","_groupHeight","ctor","component","getScrollPath","offset","parseInt","style","each","find","_","td","colSpan","offsetLeft","offsetWidth","_moveFakeTable","scrollPos","_moveFakeTableHorizontally","isWhiteSpace","_virtualContentHeight","height","tableHeight","_tableHeight","groupHeight","after","tr","childNodes","length","rowSpan","offsetTop","offsetHeight","_moveFakeTableTop","_getRowClassNames","rowClassNames","inArray","updateColspans","columnCount","rows","columnOffset","columnOffsetResetIndexes","getColumnsCount","i","j","cells","diff"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/pivot_grid/ui.pivot_grid.headers_area.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.VerticalHeadersArea = exports.HorizontalHeadersArea = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _uiPivot_grid = require(\"./ui.pivot_grid.area_item\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar PIVOTGRID_AREA_CLASS = \"dx-pivotgrid-area\";\r\nvar PIVOTGRID_AREA_COLUMN_CLASS = \"dx-pivotgrid-horizontal-headers\";\r\nvar PIVOTGRID_AREA_ROW_CLASS = \"dx-pivotgrid-vertical-headers\";\r\nvar PIVOTGRID_TOTAL_CLASS = \"dx-total\";\r\nvar PIVOTGRID_GRAND_TOTAL_CLASS = \"dx-grandtotal\";\r\nvar PIVOTGRID_ROW_TOTAL_CLASS = \"dx-row-total\";\r\nvar PIVOTGRID_EXPANDED_CLASS = \"dx-pivotgrid-expanded\";\r\nvar PIVOTGRID_COLLAPSED_CLASS = \"dx-pivotgrid-collapsed\";\r\nvar PIVOTGRID_LAST_CELL_CLASS = \"dx-last-cell\";\r\nvar PIVOTGRID_VERTICAL_SCROLL_CLASS = \"dx-vertical-scroll\";\r\nvar PIVOTGRID_EXPAND_BORDER = \"dx-expand-border\";\r\n\r\nfunction getCellPath(tableElement, cell) {\r\n    if (cell) {\r\n        var data = tableElement.data().data;\r\n        var rowIndex = cell.parentNode.rowIndex;\r\n        var cellIndex = cell.cellIndex;\r\n        return data[rowIndex] && data[rowIndex][cellIndex] && data[rowIndex][cellIndex].path\r\n    }\r\n}\r\nvar HorizontalHeadersArea = _uiPivot_grid.AreaItem.inherit({\r\n    _getAreaName: function() {\r\n        return \"column\"\r\n    },\r\n    _getAreaClassName: function() {\r\n        return PIVOTGRID_AREA_COLUMN_CLASS\r\n    },\r\n    _createGroupElement: function() {\r\n        return (0, _renderer.default)(\"<div>\").addClass(this._getAreaClassName()).addClass(PIVOTGRID_AREA_CLASS)\r\n    },\r\n    _applyCustomStyles: function(options) {\r\n        var cssArray = options.cssArray;\r\n        var cell = options.cell;\r\n        var rowsCount = options.rowsCount;\r\n        var classArray = options.classArray;\r\n        if (options.cellIndex === options.cellsCount - 1) {\r\n            cssArray.push((options.rtlEnabled ? \"border-left:\" : \"border-right:\") + \"0px\")\r\n        }\r\n        if (cell.rowspan === rowsCount - options.rowIndex || options.rowIndex + 1 === rowsCount) {\r\n            cssArray.push(\"border-bottom-width:0px\")\r\n        }\r\n        if (\"T\" === cell.type || \"GT\" === cell.type) {\r\n            classArray.push(PIVOTGRID_ROW_TOTAL_CLASS)\r\n        }\r\n        if (\"T\" === options.cell.type) {\r\n            classArray.push(PIVOTGRID_TOTAL_CLASS)\r\n        }\r\n        if (\"GT\" === options.cell.type) {\r\n            classArray.push(PIVOTGRID_GRAND_TOTAL_CLASS)\r\n        }\r\n        if ((0, _type.isDefined)(cell.expanded)) {\r\n            classArray.push(cell.expanded ? PIVOTGRID_EXPANDED_CLASS : PIVOTGRID_COLLAPSED_CLASS)\r\n        }\r\n        this.callBase(options)\r\n    },\r\n    _getMainElementMarkup: function() {\r\n        return \"<thead class='\" + this._getAreaClassName() + \"'>\"\r\n    },\r\n    _getCloseMainElementMarkup: function() {\r\n        return \"</thead>\"\r\n    },\r\n    setVirtualContentParams: function(params) {\r\n        this.callBase(params);\r\n        this._setTableCss({\r\n            left: params.left,\r\n            top: 0\r\n        });\r\n        this._virtualContentWidth = params.width\r\n    },\r\n    hasScroll: function() {\r\n        var tableWidth = this._virtualContent ? this._virtualContentWidth : this._tableWidth;\r\n        if (this._groupWidth && tableWidth) {\r\n            return tableWidth - this._groupWidth >= 1\r\n        }\r\n        return false\r\n    },\r\n    processScroll: function() {\r\n        if (!this._getScrollable()) {\r\n            this._groupElement.dxScrollable({\r\n                useNative: false,\r\n                useSimulatedScrollbar: false,\r\n                showScrollbar: false,\r\n                bounceEnabled: false,\r\n                direction: \"horizontal\",\r\n                updateManually: true\r\n            })\r\n        }\r\n    },\r\n    processScrollBarSpacing: function(scrollBarWidth) {\r\n        var that = this;\r\n        var groupAlignment = that.option(\"rtlEnabled\") ? \"right\" : \"left\";\r\n        if (that._groupWidth) {\r\n            that.groupWidth(that._groupWidth - scrollBarWidth)\r\n        }\r\n        if (that._scrollBarWidth) {\r\n            that._groupElement.next().remove()\r\n        }\r\n        that._groupElement.toggleClass(PIVOTGRID_VERTICAL_SCROLL_CLASS, scrollBarWidth > 0);\r\n        that._groupElement.css(\"float\", groupAlignment).width(that._groupHeight);\r\n        that._scrollBarWidth = scrollBarWidth\r\n    },\r\n    ctor: function(component) {\r\n        this.callBase(component);\r\n        this._scrollBarWidth = 0\r\n    },\r\n    getScrollPath: function(offset) {\r\n        var tableElement = this.tableElement();\r\n        var cell;\r\n        offset -= parseInt(tableElement[0].style.left, 10) || 0;\r\n        (0, _iterator.each)(tableElement.find(\"td\"), function(_, td) {\r\n            if (1 === td.colSpan && td.offsetLeft <= offset && td.offsetWidth + td.offsetLeft > offset) {\r\n                cell = td;\r\n                return false\r\n            }\r\n        });\r\n        return getCellPath(tableElement, cell)\r\n    },\r\n    _moveFakeTable: function(scrollPos) {\r\n        this._moveFakeTableHorizontally(scrollPos);\r\n        this.callBase()\r\n    }\r\n});\r\nexports.HorizontalHeadersArea = HorizontalHeadersArea;\r\nvar VerticalHeadersArea = HorizontalHeadersArea.inherit({\r\n    _getAreaClassName: function() {\r\n        return PIVOTGRID_AREA_ROW_CLASS\r\n    },\r\n    _applyCustomStyles: function(options) {\r\n        this.callBase(options);\r\n        if (options.cellIndex === options.cellsCount - 1) {\r\n            options.classArray.push(PIVOTGRID_LAST_CELL_CLASS)\r\n        }\r\n        if (options.rowIndex === options.rowsCount - 1) {\r\n            options.cssArray.push(\"border-bottom: 0px\")\r\n        }\r\n        if (options.cell.isWhiteSpace) {\r\n            options.classArray.push(\"dx-white-space-column\")\r\n        }\r\n    },\r\n    _getAreaName: function() {\r\n        return \"row\"\r\n    },\r\n    setVirtualContentParams: function(params) {\r\n        this.callBase(params);\r\n        this._setTableCss({\r\n            top: params.top,\r\n            left: 0\r\n        });\r\n        this._virtualContentHeight = params.height\r\n    },\r\n    hasScroll: function() {\r\n        var tableHeight = this._virtualContent ? this._virtualContentHeight : this._tableHeight;\r\n        if (this._groupHeight && tableHeight) {\r\n            return tableHeight - this._groupHeight >= 1\r\n        }\r\n        return false\r\n    },\r\n    processScroll: function() {\r\n        if (!this._getScrollable()) {\r\n            this._groupElement.dxScrollable({\r\n                useNative: false,\r\n                useSimulatedScrollbar: false,\r\n                showScrollbar: false,\r\n                bounceEnabled: false,\r\n                direction: \"vertical\",\r\n                updateManually: true\r\n            })\r\n        }\r\n    },\r\n    processScrollBarSpacing: function(scrollBarWidth) {\r\n        var that = this;\r\n        if (that._groupHeight) {\r\n            that.groupHeight(that._groupHeight - scrollBarWidth)\r\n        }\r\n        if (that._scrollBarWidth) {\r\n            that._groupElement.next().remove()\r\n        }\r\n        if (scrollBarWidth) {\r\n            that._groupElement.after((0, _renderer.default)(\"<div>\").width(\"100%\").height(scrollBarWidth - 1))\r\n        }\r\n        that._scrollBarWidth = scrollBarWidth\r\n    },\r\n    getScrollPath: function(offset) {\r\n        var tableElement = this.tableElement();\r\n        var cell;\r\n        offset -= parseInt(tableElement[0].style.top, 10) || 0;\r\n        (0, _iterator.each)(tableElement.find(\"tr\"), function(_, tr) {\r\n            var td = tr.childNodes[tr.childNodes.length - 1];\r\n            if (td && 1 === td.rowSpan && td.offsetTop <= offset && td.offsetHeight + td.offsetTop > offset) {\r\n                cell = td;\r\n                return false\r\n            }\r\n        });\r\n        return getCellPath(tableElement, cell)\r\n    },\r\n    _moveFakeTable: function(scrollPos) {\r\n        this._moveFakeTableTop(scrollPos);\r\n        this.callBase()\r\n    },\r\n    _getRowClassNames: function(rowIndex, cell, rowClassNames) {\r\n        if (0 !== rowIndex & cell.expanded && (0, _array.inArray)(PIVOTGRID_EXPAND_BORDER, rowClassNames) === -1) {\r\n            rowClassNames.push(PIVOTGRID_EXPAND_BORDER)\r\n        }\r\n    },\r\n    _getMainElementMarkup: function() {\r\n        return \"<tbody class='\" + this._getAreaClassName() + \"'>\"\r\n    },\r\n    _getCloseMainElementMarkup: function() {\r\n        return \"</tbody>\"\r\n    },\r\n    updateColspans: function(columnCount) {\r\n        var rows = this.tableElement()[0].rows;\r\n        var columnOffset = 0;\r\n        var columnOffsetResetIndexes = [];\r\n        if (this.getColumnsCount() - columnCount > 0) {\r\n            return\r\n        }\r\n        for (var i = 0; i < rows.length; i++) {\r\n            for (var j = 0; j < rows[i].cells.length; j++) {\r\n                var cell = rows[i].cells[j];\r\n                var rowSpan = cell.rowSpan;\r\n                if (columnOffsetResetIndexes[i]) {\r\n                    columnOffset -= columnOffsetResetIndexes[i];\r\n                    columnOffsetResetIndexes[i] = 0\r\n                }\r\n                var diff = columnCount - (columnOffset + cell.colSpan);\r\n                if (j === rows[i].cells.length - 1 && diff > 0) {\r\n                    cell.colSpan = cell.colSpan + diff\r\n                }\r\n                columnOffsetResetIndexes[i + rowSpan] = (columnOffsetResetIndexes[i + rowSpan] || 0) + cell.colSpan;\r\n                columnOffset += cell.colSpan\r\n            }\r\n        }\r\n    }\r\n});\r\nexports.VerticalHeadersArea = VerticalHeadersArea;\r\n"]},"metadata":{},"sourceType":"script"}