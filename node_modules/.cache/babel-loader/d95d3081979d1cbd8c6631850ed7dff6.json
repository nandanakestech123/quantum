{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{Link}from\"react-router-dom\";import SimpleReactValidator from\"simple-react-validator\";import{NormalInput,NormalSelect,NormalButton,NormalDateTime,NormalMultiSelect,NormalTextarea,TableWrapper}from\"component/common\";import{displayImg,dateFormat}from\"service/helperFunctions\";import{getJobtitle,getCommonApi,commonCreateApi,commonUpdateApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{FormGroup,Label,Input}from\"reactstrap\";import{withTranslation}from\"react-i18next\";import{NavLink}from\"react-router-dom\";import{createPO,updatePO,deletePO}from\"redux/actions/po\";import{getTokenDetails}from\"redux/actions/auth\";import{useLocation}from\"react-router-dom\";import updateBtn from\"assets/images/edit1.png\";import deleteBtn from\"assets/images/delete1.png\";import closeBtn from\"assets/images/close.png\";import saveBtn from\"assets/images/save.png\";import{history}from\"helpers\";import{Toast}from\"service/toast\";import{PDFViewer,PDFDownloadLink,BlobProvider}from\"@react-pdf/renderer\";import PDF from\"../../StocksPDF/POHQ/index\";import Blur from\"react-css-blur\";export var AddStocksPOHQClass=/*#__PURE__*/function(_Component){_inherits(AddStocksPOHQClass,_Component);var _super=_createSuper(AddStocksPOHQClass);function AddStocksPOHQClass(){var _this;_classCallCheck(this,AddStocksPOHQClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{PO_NO:\"\",SUPP_Code:\"\",PO_DATE:new Date(),contactPerson:\"\",PO_STATUS:\"\",ItemSite_Code:\"\",PO_REMK1:\"\",terms:\"\",PO_TTQTY:\"\",PO_TTAMT:\"\"},headerSelectedDetails:[{label:\"Item Code\"},{label:\"Item Description\"},{label:\"UOM\"},// { label: \"Brand\" },\n// { label: \"Range\" },\n{label:\"Unit Price\"},{label:\"Total Qty\"},{label:\"Required Qty\"},{label:\"Approved Qty\"}],statusOption:[],contactOption:[],supOption:[],siteOption:[],storedItemList:[],UOM:\"\",// hqonly:0,\nlistDetail:{},isPrintPdfClick:false,siteAddr:[],disableEdit:false,disableEditQty:false,is_loading:true,isMounted:true,blur:false};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({validators:{},element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});};_this.componentDidMount=function(){console.log(\"this.props\",_this.props);console.log(\"this.state\",_this.state);// console.log(\"useLocation()\",useLocation())\n_this.getSiteCode();_this.getSup();_this.getContact();// this.getSiteDetail()\n};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var _this$state,active,currentValue;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,active=_this$state.active,currentValue=_this$state.currentValue;_context.next=3;return _this.setState({selectedMenu:key.id});case 3:_this.setState({active:true,currentValue:key.key,selected:key.id});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(_ref2){var _ref2$target=_ref2.target,value=_ref2$target.value,name=_ref2$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.updateState({formFields:formFields});if(name==\"SUPP_Code\"){var contactOption=_this.state.contactOption;contactOption=[];_this.props.getCommonApi(\"supplycontactinfo/?searchsuppliercode=\".concat(value)).then(function(res){console.log(\"res.data\",res);var _iterator=_createForOfIteratorHelper(res.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;contactOption.push({value:key.ContactInfo_ID,label:key.ContactInfo_Name,suppCode:key.Supplier_Code,phone:key.ContactInfo_PhoneNo,email:key.ContactInfo_Email,active:key.Active});}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(\"contactOption\",contactOption);_this.setState({contactOption:contactOption});});}};_this.handleDatePick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(name,value){var formFields;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// dateFormat(new Date())\nformFields=_this.state.formFields;formFields[name]=value;// formFields[name] = value;\n_context2.next=4;return _this.updateState({formFields:formFields});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();_this.getContact=function(){var _this$state2=_this.state,contactOption=_this$state2.contactOption,blur=_this$state2.blur;contactOption=[];_this.props.getCommonApi(\"supplycontactinfo\").then(function(res){console.log(\"res.data\",res);var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;contactOption.push({value:key.ContactInfo_ID,label:key.ContactInfo_Name,suppCode:key.Supplier_Code,phone:key.ContactInfo_PhoneNo,email:key.ContactInfo_Email,active:key.Active});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}console.log(\"contactOption\",contactOption);_this.setState({contactOption:contactOption});if(_this.props.match.params.id){_this.autoFillForm();}if(_this.props.tokenDetail.role_code!==\"1\"&&_this.props.tokenDetail.role_code!==\"2\"){blur=true;_this.setState({blur:blur});}});};_this.getSiteCode=function(){var siteOption=_this.state.siteOption;siteOption=[];_this.props.getCommonApi(\"sitecode\").then(function(res){console.log(\"res.data\",res);var _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;siteOption.push({value:key.ItemSite_Code,label:key.ItemSite_Desc,id:key.ItemSite_ID// active: key.itm_isactive,\n});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}console.log(\"siteOption\",siteOption);_this.setState({siteOption:siteOption});});};_this.getSup=function(){var supOption=_this.state.supOption;supOption=[];_this.props.getCommonApi(\"itemsupply\").then(function(res){console.log(\"res.data\",res);var _iterator4=_createForOfIteratorHelper(res.data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var key=_step4.value;supOption.push({value:key.SPLY_CODE,label:key.SUPPLYDESC,addr1:key.SPLY_ADDR1,addr2:key.SPLY_ADDR2,addr3:key.SPLY_ADDR3,postalCode:key.SPLY_POSCD,state:key.SPLY_STATE,city:key.SPLY_CITY,country:key.SPLY_CNTRY});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}console.log(\"supOption\",supOption);_this.setState({supOption:supOption});});};_this.getAutofillItemDetails=function(PO_NO){console.log(\"PO_NO\",PO_NO);_this.props.getCommonApi(\"poapprovalitem/?searchpono=\".concat(PO_NO,\"&limit=10000\")).then(function(res){console.log(\"res in getAutofillItemDetails\",res);// this.state.storedItemListStored = res.data.dataList\nif(res.status==200){var _iterator5=_createForOfIteratorHelper(res.data.dataList),_step5;try{var _loop=function _loop(){var item=_step5.value;_this.props.getCommonApi(\"allstocklist/?searchitemdesc=\".concat(item.POD_ITEMDESC,\"&searchsitecode=\").concat(_this.props.tokenDetail.site_code,\"&limit=100\")).then(function(resAll){console.log(resAll,\"dsfdfaafg\");// this.setState({ detailsListFull: [] });\nvar _iterator6=_createForOfIteratorHelper(resAll.data.dataList),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var data=_step6.value;console.log(\"data.Item_Desc\",data.Item_Desc);console.log(\"item.POD_ITEMDESC\",item.POD_ITEMDESC);console.log(\"data.UOM_DESC\",data.UOM_DESC);console.log(\"item.BrandName\",item.BrandName);if(data.Item_Desc==item.POD_ITEMDESC&&data.UOM_DESC==item.BrandName){console.log(\"in if loop\");_this.state.storedItemList.push({item_code:item.POD_ITEMCODE,Item_Desc:item.POD_ITEMDESC,ITEM_UOM:item.BrandCode,UOM_DESC:item.BrandName,POD_ITEMPRICE:item.POD_ITEMPRICE,POD_TTLQTY:data.QTY,POD_QTY:item.POD_QTY,POD_APPQTY:item.POD_APPQTY});}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}_this.setState(_this.state.storedItemList);});// this.state.itemListBeforeEdit.push({\"item_id\":item.PO_ID,\"item_code\":item.POD_ITEMCODE,\"UOM_DESC\":item.BrandName})\n};for(_iterator5.s();!(_step5=_iterator5.n()).done;){_loop();}// this.setState(this.state.itemListBeforeEdit)\n// console.log(\"this.state.itemListBeforeEdit\",this.state.itemListBeforeEdit)\n}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}});};_this.autoFillForm=function(){var _this$state3=_this.state,disableEdit=_this$state3.disableEdit,disableEditQty=_this$state3.disableEditQty,contactOption=_this$state3.contactOption,supOption=_this$state3.supOption;_this.props.getCommonApi(\"poapprovallist/?searchpoid=\".concat(_this.props.match.params.id)).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(res){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"po dataList\",res.data.dataList);// console.log(\"quo dataList cust name\", res.data.dataList[0].customer_name);\n// custName = res.data.dataList[0].customer_name\n// this.state.projectList = res.data.dataList\n_this.state.formFields[\"PO_NO\"]=res.data.dataList[0].PO_NO;_this.state.formFields[\"SUPP_Code\"]=res.data.dataList[0].SUPP_Code;// if (res.data.dataList[0].SUPP_Code && supOption.length!==0) {\n//   //matching status name with the id to set prefill status in dropdown\n//   this.state.formFields[\"SUPP_Code\"] = supOption.find(option => option.label === res.data.dataList[0].SUPP_Code).value\n//   console.log(\"res.data.dataList[0].SUPP_Code\",res.data.dataList[0].SUPP_Code)\n// }\n// this.state.formFields[\"SUPP_Code\"] = res.data.dataList[0].SUPP_Code\n_this.state.formFields[\"PO_DATE\"]=res.data.dataList[0].PO_DATE;console.log(\"contactOption in autofill\",contactOption);console.log(\"res.data.dataList[0].contactPerson\",res.data.dataList[0].contactPerson);if(res.data.dataList[0].contactPerson&&contactOption.length!==0){//matching status name with the id to set prefill status in dropdown\n_this.state.formFields[\"contactPerson\"]=contactOption.find(function(option){return option.label===res.data.dataList[0].contactPerson;}).value;console.log(\"res.data.dataList[0].contactPerson\",res.data.dataList[0].contactPerson);}_this.state.formFields[\"PO_STATUS\"]=res.data.dataList[0].PO_STATUS;if(res.data.dataList[0].PO_STATUS==\"Posted\"||res.data.dataList[0].PO_STATUS==\"Approved\"||res.data.dataList[0].PO_STATUS==\"Not Approved\"){disableEdit=true;_this.setState({disableEdit:disableEdit});}if(res.data.dataList[0].PO_STATUS==\"Approved\"||res.data.dataList[0].PO_STATUS==\"Not Approved\"){disableEditQty=true;_this.setState({disableEditQty:disableEditQty});}// console.log(\"statusOption in prefill\",this.state.statusOption)\n// console.log(\"res.data.dataList[0].status\",res.data.dataList[0].status)\n// if status empty prevent err\n// if (res.data.dataList[0].PO_STATUS && statusOption.length!==0) {\n//   //matching status name with the id to set prefill status in dropdown\n//   this.state.formFields[\"PO_STATUS\"] = statusOption.find(option => option.label === res.data.dataList[0].PO_STATUS).value\n//   console.log(\"res.data.dataList[0].PO_STATUS\",res.data.dataList[0].PO_STATUS)\n//   if(res.data.dataList[0].PO_STATUS == \"Posted\"){\n//     disableEdit = true\n//     // for (var i = 0; i < statusOption.length; i++){\n//     //   if(statusOption[i].label == \"Posted\") {\n//     //     statusOption = statusOption.filter(e => e.label !== 'Open')\n//     //   }\n//     // }\n//     // console.log(\"statusOption when status is posted\",statusOption)\n//     this.setState({disableEdit})\n//     console.log(\"this.state.disableEdit\",disableEdit)\n//   }\n// }\n_this.state.formFields[\"ItemSite_Code\"]=res.data.dataList[0].ItemSite_Code;_this.state.formFields[\"PO_REMK1\"]=res.data.dataList[0].PO_REMK1;_this.state.formFields[\"terms\"]=res.data.dataList[0].terms;_this.state.formFields[\"PO_TTQTY\"]=res.data.dataList[0].PO_TTQTY;_this.state.formFields[\"PO_TTAMT\"]=res.data.dataList[0].PO_TTAMT;// this.state.formFieldsDetailsStored.PO_TTQTY = res.data.dataList[0].PO_TTQTY\n_this.updateState(_this.state.formFields);// this.setState(this.state.formFieldsDetailsStored)\n// console.log(\"this.state.formFieldsDetailsStored\",this.state.formFieldsDetailsStored)\nconsole.log(\"this.state.formFields\",_this.state.formFields);_this.getAutofillItemDetails(res.data.dataList[0].PO_NO);_this.getSiteDetail(res.data.dataList[0].ItemSite_Code);case 19:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref4.apply(this,arguments);};}());};_this.getSiteDetail=function(ItemSite_Code){var _this$state4=_this.state,siteAddr=_this$state4.siteAddr,hqonly=_this$state4.hqonly;siteAddr=[];_this.props.getCommonApi(\"sitecode\").then(function(res){console.log(\"res.data\",res);siteAddr=res.data;console.log(\"siteAddr\",siteAddr);_this.setState({siteAddr:siteAddr});// for(let item of res.data){\n//   if(item.ItemSite_Code == ItemSite_Code){\n//     hqonly = item.hq_only\n//   }\n// }\n// console.log(\"hqonly\",hqonly)\n// this.setState({hqonly})\n});};_this.handleItemDetailsSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(label){var _this$state5,storedItemList,formFields,_iterator7,_step7,_loop2;return _regeneratorRuntime.wrap(function _callee4$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this$state5=_this.state,storedItemList=_this$state5.storedItemList,formFields=_this$state5.formFields;_iterator7=_createForOfIteratorHelper(storedItemList);_context5.prev=2;_loop2=/*#__PURE__*/_regeneratorRuntime.mark(function _loop2(){var item,formDataItem;return _regeneratorRuntime.wrap(function _loop2$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:item=_step7.value;formDataItem=new FormData();console.log(\"item.POD_APPQTY\",item.POD_APPQTY);formDataItem.append(\"POD_APPQTY\",item.POD_APPQTY?item.POD_APPQTY:0);if(label==\"Approved\"){formDataItem.append(\"STATUS\",\"Approved\");}else if(label==\"Not Approved\"){formDataItem.append(\"STATUS\",\"Cancel\");}_context4.next=7;return _this.props.getCommonApi(\"poapprovalitem/?searchpono=\".concat(formFields.PO_NO,\"&searchitemcode=\").concat(item.item_code,\"&searchuom=\").concat(item.UOM_DESC)).then(function(resGetItem){// if (resGetItem.status == 200){\nconsole.log(\"resGetItem\",resGetItem);_this.props.commonUpdateApi(\"poapprovalitem/\".concat(resGetItem.data.dataList[0].PO_ID,\"/\"),formDataItem).then(function(resUpdateItem){console.log(\"resUpdateItem\",resUpdateItem);history.push(\"/admin/inventory\");});// }\n// else if(resGetItem.status == 204){\n//   formDataItem.append(\"fk_po\", resPO.data.id)\n//   this.props\n//     .commonCreateApi(\n//       `poitem/`,\n//       formDataItem\n//     )\n//     .then(resCreateItem => {\n//       console.log(\"resCreateItem\",resCreateItem)\n//     })\n// }\n});case 7:case\"end\":return _context4.stop();}}},_loop2);});_iterator7.s();case 5:if((_step7=_iterator7.n()).done){_context5.next=9;break;}return _context5.delegateYield(_loop2(),\"t0\",7);case 7:_context5.next=5;break;case 9:_context5.next=14;break;case 11:_context5.prev=11;_context5.t1=_context5[\"catch\"](2);_iterator7.e(_context5.t1);case 14:_context5.prev=14;_iterator7.f();return _context5.finish(14);case 17:case\"end\":return _context5.stop();}}},_callee4,null,[[2,11,14,17]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();_this.handleEditChangeQuantity=function(_ref6){var _ref6$target=_ref6.target,value=_ref6$target.value,name=_ref6$target.name;var _this$state6=_this.state,storedItemList=_this$state6.storedItemList,UOM=_this$state6.UOM;for(var list in storedItemList){if(storedItemList[list].item_code==name&&storedItemList[list].UOM_DESC==UOM){storedItemList[list].POD_APPQTY=value;}// console.log(\"storedItemList[list].item_code\",storedItemList[list].item_code)\n}_this.setState({storedItemList:storedItemList});console.log(\"storedItemList in handleEditChange\",storedItemList);};_this.handleSubmit=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(label){var _this$state7,statusOption,storedItemList,_iterator8,_step8,item,_iterator9,_step9,_item,formData,resPOHQ;return _regeneratorRuntime.wrap(function _callee5$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;if(!_this.validator.allValid()){_context6.next=69;break;}_this$state7=_this.state,statusOption=_this$state7.statusOption,storedItemList=_this$state7.storedItemList;console.log(\"label\",label,typeof label);console.log(\"storedItemList in submit\",storedItemList);// window.alert(\"Approved Qty is empty!\")\n_iterator8=_createForOfIteratorHelper(storedItemList);_context6.prev=6;_iterator8.s();case 8:if((_step8=_iterator8.n()).done){_context6.next=16;break;}item=_step8.value;console.log(\"!item.POD_APPQTY\",!item.POD_APPQTY);// console.log(\"item.POD_APPQTY.length == 0\",item.POD_APPQTY.length == 0)\nif(item.POD_APPQTY){_context6.next=14;break;}Toast({type:\"error\",message:\"Approved Qty is empty!\"});return _context6.abrupt(\"return\");case 14:_context6.next=8;break;case 16:_context6.next=21;break;case 18:_context6.prev=18;_context6.t0=_context6[\"catch\"](6);_iterator8.e(_context6.t0);case 21:_context6.prev=21;_iterator8.f();return _context6.finish(21);case 24:_iterator9=_createForOfIteratorHelper(storedItemList);_context6.prev=25;_iterator9.s();case 27:if((_step9=_iterator9.n()).done){_context6.next=34;break;}_item=_step9.value;if(!(_item.POD_TTLQTY<_item.POD_APPQTY)){_context6.next=32;break;}Toast({type:\"error\",message:\"Approved Qty for \"+_item.Item_Desc+\" exceeded limit\"});return _context6.abrupt(\"return\");case 32:_context6.next=27;break;case 34:_context6.next=39;break;case 36:_context6.prev=36;_context6.t1=_context6[\"catch\"](25);_iterator9.e(_context6.t1);case 39:_context6.prev=39;_iterator9.f();return _context6.finish(39);case 42:if(!_this.props.match.params.id){_context6.next=67;break;}console.log(\"if props\");_context6.next=46;return _this.handleItemDetailsSubmit(label);case 46:formData=new FormData();if(!(label==\"Approved\")){_context6.next=55;break;}// formData.append(\"IsApproved\", \"Approved\")\nformData.append(\"PO_STATUS\",\"Approved\");// if(hqonly == 1){\n//   var resPOHQ = await this.props\n//   .commonUpdateApi(\n//     `poapprovalhqonlylist/${this.props.match.params.id}/`,\n//     formData\n//   )\n// }else{\n_context6.next=51;return _this.props.commonUpdateApi(\"poapprovallist/\".concat(_this.props.match.params.id,\"/\"),formData);case 51:resPOHQ=_context6.sent;// }\nconsole.log(resPOHQ);_context6.next=67;break;case 55:if(!(label==\"Not Approved\")){_context6.next=65;break;}console.log(\"label not app\",label);// formData.append(\"IsApproved\", \"Not Approved\")\nformData.append(\"PO_STATUS\",\"Not Approved\");// if(hqonly == 1){\n//   var resPOHQ = await this.props\n//   .commonUpdateApi(\n//     `poapprovalhqonlylist/${this.props.match.params.id}/`,\n//     formData\n//   )\n// }else{\n_context6.next=60;return _this.props.commonUpdateApi(\"poapprovallist/\".concat(_this.props.match.params.id,\"/\"),formData);case 60:resPOHQ=_context6.sent;// }\nconsole.log(resPOHQ);// this.handleItemDetailsSubmit(label);\nhistory.push(\"/admin/inventory\");_context6.next=67;break;case 65:_this.handleItemDetailsSubmit();history.push(\"/admin/inventory\");case 67:_context6.next=70;break;case 69:_this.validator.showMessages();case 70:_context6.next=75;break;case 72:_context6.prev=72;_context6.t2=_context6[\"catch\"](0);_this.updateState({is_loading:false});case 75:case\"end\":return _context6.stop();}}},_callee5,null,[[0,72],[6,18,21,24],[25,36,39,42]]);}));return function(_x6){return _ref7.apply(this,arguments);};}();_this.setUOM=function(UOM_DESC){var UOM=_this.state.UOM;UOM=UOM_DESC;console.log(\"UOM in setUOM\",UOM);_this.setState({UOM:UOM});};_this.handlePrintPdfFormat=function(url){_this.setState({isPrintPdfClick:false});var a=document.createElement(\"a\");a.setAttribute(\"download\",\"\".concat(new Date(),\".pdf\"));a.setAttribute(\"href\",url);a.click();window.open(url);};_this.getListDetail=function(){var _this$state8=_this.state,siteAddr=_this$state8.siteAddr,supOption=_this$state8.supOption,contactOption=_this$state8.contactOption,listDetail=_this$state8.listDetail,formFields=_this$state8.formFields,isPrintPdfClick=_this$state8.isPrintPdfClick;var addr=\"\";var _iterator10=_createForOfIteratorHelper(siteAddr),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var site=_step10.value;if(site.ItemSite_Code==_this.props.tokenDetail.site_code){addr=site.ItemSite_Address;}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}var supAddr=\"\";var supInfo=\"\";if(formFields.SUPP_Code&&supOption){supInfo=supOption.find(function(option){return option.value===formFields.SUPP_Code;});supAddr=supInfo.addr1+\" \"+supInfo.addr2+\" \"+supInfo.addr3+\" \"+supInfo.postalCode+\" \"+supInfo.state+\" \"+supInfo.city+\" \"+supInfo.country;console.log(\"supAddr\",supAddr);}listDetail={PO_NO:formFields.PO_NO,Supplier:formFields.SUPP_Code&&supOption?supOption.find(function(option){return option.value===formFields.SUPP_Code;}).label:\"\",supAddr:supAddr?supAddr:\"\",contactPhone:formFields.contactPerson&&contactOption?contactOption.find(function(option){return option.value===formFields.contactPerson;}).phone:\"\",contactEmail:formFields.contactPerson&&contactOption?contactOption.find(function(option){return option.value===formFields.contactPerson;}).email:\"\",contactPerson:formFields.contactPerson&&contactOption?contactOption.find(function(option){return option.value===formFields.contactPerson;}).label:\"\",PO_DATE:formFields.PO_DATE,terms:formFields.terms,PO_STATUS:formFields.PO_STATUS,storeName:_this.props.tokenDetail.branch,printedBy:_this.props.tokenDetail.username,totalQty:formFields.PO_TTQTY,totalAmt:formFields.PO_TTAMT,addr:addr};console.log(\"listDetail in getListDetail\",listDetail);isPrintPdfClick=true;_this.setState({listDetail:listDetail,isPrintPdfClick:isPrintPdfClick});};return _this;}_createClass(AddStocksPOHQClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state9=this.state,formFields=_this$state9.formFields,storedItemList=_this$state9.storedItemList,headerSelectedDetails=_this$state9.headerSelectedDetails,disableEdit=_this$state9.disableEdit,disableEditQty=_this$state9.disableEditQty,contactOption=_this$state9.contactOption,supOption=_this$state9.supOption,siteOption=_this$state9.siteOption,isPrintPdfClick=_this$state9.isPrintPdfClick,listDetail=_this$state9.listDetail,blur=_this$state9.blur;var PO_NO=formFields.PO_NO,SUPP_Code=formFields.SUPP_Code,PO_DATE=formFields.PO_DATE,contactPerson=formFields.contactPerson,PO_STATUS=formFields.PO_STATUS,ItemSite_Code=formFields.ItemSite_Code,PO_REMK1=formFields.PO_REMK1,terms=formFields.terms,PO_TTQTY=formFields.PO_TTQTY,PO_TTAMT=formFields.PO_TTAMT;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"px-5  create-PO\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category cursor-pointer\",onClick:function onClick(){return history.push(\"/admin/inventory\");}},t(\"HQ Stocks PO Approval\")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},t(\"\".concat(this.props.match.params.id&&\"View/Edit\",\" Stocks PO Approval\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"PO-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"PO No\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{disabled:true,placeholder:\"Auto generated\",value:PO_NO,name:\"PO_NO\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Supplier\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalSelect,{options:supOption,disabled:disableEdit,value:SUPP_Code,name:\"SUPP_Code\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"PO Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:PO_DATE?new Date(PO_DATE):new Date(),name:\"PO_DATE\"//className=\"dob-pick\"\n,showYearDropdown:true,dateFormat:\"dd/MM/yyyy\"// maxDate={new Date(toDate)}\n,showDisabledMonthNavigation:true})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Contact Person\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalSelect,{options:contactOption,disabled:disableEdit,value:contactPerson,name:\"contactPerson\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Status\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{disabled:true// placeholder=\"Auto generated\"\n,value:PO_STATUS,name:\"PO_STATUS\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Store Code\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalSelect,{options:siteOption,disabled:disableEdit,value:ItemSite_Code,name:\"ItemSite_Code\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Remarks\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-desc\"},/*#__PURE__*/React.createElement(NormalTextarea// placeholder=\"Enter here\"\n,{disabled:disableEdit,value:PO_REMK1,name:\"PO_REMK1\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Terms Of Payment\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n,{disabled:disableEdit,value:terms,name:\"terms\",onKeyPress:function onKeyPress(event){if(!/[0-9]/.test(event.key)){event.preventDefault();}},onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 PO-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"}),/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerSelectedDetails// queryHandler={this.handlePagination}\n// pageMeta={pageMeta}\n},storedItemList?storedItemList.map(function(item,index){var item_code=item.item_code,Item_Desc=item.Item_Desc,UOM_DESC=item.UOM_DESC,POD_ITEMPRICE=item.POD_ITEMPRICE,POD_TTLQTY=item.POD_TTLQTY,POD_QTY=item.POD_QTY,POD_APPQTY=item.POD_APPQTY;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},Item_Desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},UOM_DESC)),/*#__PURE__*/React.createElement(Blur,{radius:blur?\"10px\":\"\"},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},POD_ITEMPRICE))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},POD_TTLQTY)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},POD_QTY)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(NormalInput,{value:POD_APPQTY,disabled:disableEditQty,name:item_code,onKeyPress:function onKeyPress(event){if(!/[0-9]/.test(event.key)){event.preventDefault();}},onClick:function onClick(){return _this2.setUOM(UOM_DESC);},onChange:_this2.handleEditChangeQuantity})));}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\"},t(\"Total Cost\")),/*#__PURE__*/React.createElement(Blur,{radius:blur?\"10px\":\"\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-address w-100\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n,{disabled:true,value:PO_TTAMT,name:\"PO_TTAMT\"// onChange={this.handleChangeDetails}\n})))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\"},t(\"Total Quantity\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-address w-100\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n,{disabled:true,value:PO_TTQTY,name:\"PO_TTQTY\",onChange:this.handleChange})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",mainbg:true,className:\"confirm\",label:\"Back\",outline:false,onClick:function onClick(){return history.push(\"/admin/inventory\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",disabled:disableEditQty,mainbg:true,className:\"confirm\",label:\"Save\",outline:false,onClick:function onClick(){return _this2.handleSubmit();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",disabled:disableEditQty,mainbg:true,className:\"confirm\",label:\"Approved\",outline:false,onClick:function onClick(){return _this2.handleSubmit(\"Approved\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",disabled:disableEditQty,mainbg:true,className:\"confirm\",label:\"Not Approved\",outline:false,onClick:function onClick(){return _this2.handleSubmit(\"Not Approved\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",disabled:this.props.match.params.id?false:true,mainbg:true,className:\"confirm\",label:\"Print PDF\",outline:false,onClick:function onClick(){return _this2.getListDetail();}})),isPrintPdfClick?/*#__PURE__*/React.createElement(PDFDownloadLink,{document:/*#__PURE__*/React.createElement(PDF,{listDetail:listDetail,itemDetail:storedItemList// Flag={activeTab !== \"detail\" ? 3 : 4}\n,landscape:false,blur:blur})},function(_ref8){var blob=_ref8.blob,url=_ref8.url,loading=_ref8.loading,error=_ref8.error;return!loading&&url?_this2.handlePrintPdfFormat(url):null;}):null))));}}]);return AddStocksPOHQClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{tokenDetail:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonUpdateApi:commonUpdateApi,updatePO:updatePO,createPO:createPO,deletePO:deletePO,getTokenDetails:getTokenDetails},dispatch);};export var AddStocksPOHQ=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(AddStocksPOHQClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Inventory/StocksPOHQ/AddStocksPOHQ/index.js"],"names":["React","Component","Link","SimpleReactValidator","NormalInput","NormalSelect","NormalButton","NormalDateTime","NormalMultiSelect","NormalTextarea","TableWrapper","displayImg","dateFormat","getJobtitle","getCommonApi","commonCreateApi","commonUpdateApi","connect","bindActionCreators","FormGroup","Label","Input","withTranslation","NavLink","createPO","updatePO","deletePO","getTokenDetails","useLocation","updateBtn","deleteBtn","closeBtn","saveBtn","history","Toast","PDFViewer","PDFDownloadLink","BlobProvider","PDF","Blur","AddStocksPOHQClass","state","formFields","PO_NO","SUPP_Code","PO_DATE","Date","contactPerson","PO_STATUS","ItemSite_Code","PO_REMK1","terms","PO_TTQTY","PO_TTAMT","headerSelectedDetails","label","statusOption","contactOption","supOption","siteOption","storedItemList","UOM","listDetail","isPrintPdfClick","siteAddr","disableEdit","disableEditQty","is_loading","isMounted","blur","componentWillMount","validator","validators","element","message","autoForceUpdate","componentDidMount","console","log","props","getSiteCode","getSup","getContact","updateState","data","setState","handleClick","key","active","currentValue","selectedMenu","id","selected","handleChange","target","value","name","Object","assign","then","res","push","ContactInfo_ID","ContactInfo_Name","suppCode","Supplier_Code","phone","ContactInfo_PhoneNo","email","ContactInfo_Email","Active","handleDatePick","match","params","autoFillForm","tokenDetail","role_code","ItemSite_Desc","ItemSite_ID","SPLY_CODE","SUPPLYDESC","addr1","SPLY_ADDR1","addr2","SPLY_ADDR2","addr3","SPLY_ADDR3","postalCode","SPLY_POSCD","SPLY_STATE","city","SPLY_CITY","country","SPLY_CNTRY","getAutofillItemDetails","status","dataList","item","POD_ITEMDESC","site_code","resAll","Item_Desc","UOM_DESC","BrandName","item_code","POD_ITEMCODE","ITEM_UOM","BrandCode","POD_ITEMPRICE","POD_TTLQTY","QTY","POD_QTY","POD_APPQTY","length","find","option","getSiteDetail","hqonly","handleItemDetailsSubmit","formDataItem","FormData","append","resGetItem","PO_ID","resUpdateItem","handleEditChangeQuantity","list","handleSubmit","allValid","type","formData","resPOHQ","showMessages","setUOM","handlePrintPdfFormat","url","a","document","createElement","setAttribute","click","window","open","getListDetail","addr","site","ItemSite_Address","supAddr","supInfo","Supplier","contactPhone","contactEmail","storeName","branch","printedBy","username","totalQty","totalAmt","t","event","test","preventDefault","map","index","blob","loading","error","mapStateToProps","authStore","tokenDetails","mapDispatchToProps","dispatch","AddStocksPOHQ"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport {\r\n  NormalInput,\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalDateTime,\r\n  NormalMultiSelect,\r\n  NormalTextarea,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { displayImg, dateFormat } from \"service/helperFunctions\";\r\nimport {\r\n  getJobtitle,\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonUpdateApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { FormGroup, Label, Input } from \"reactstrap\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { createPO, updatePO, deletePO } from \"redux/actions/po\";\r\nimport { getTokenDetails } from \"redux/actions/auth\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport updateBtn from \"assets/images/edit1.png\";\r\nimport deleteBtn from \"assets/images/delete1.png\";\r\nimport closeBtn from \"assets/images/close.png\";\r\nimport saveBtn from \"assets/images/save.png\";\r\nimport { history } from \"helpers\";\r\nimport { Toast } from \"service/toast\";\r\nimport { PDFViewer, PDFDownloadLink, BlobProvider } from \"@react-pdf/renderer\";\r\nimport PDF from \"../../StocksPDF/POHQ/index\";\r\nimport Blur from \"react-css-blur\";\r\n\r\nexport class AddStocksPOHQClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      PO_NO: \"\",\r\n      SUPP_Code: \"\",\r\n      PO_DATE: new Date(),\r\n      contactPerson: \"\",\r\n      PO_STATUS: \"\",\r\n      ItemSite_Code: \"\",\r\n      PO_REMK1: \"\",\r\n      terms: \"\",\r\n      PO_TTQTY: \"\",\r\n      PO_TTAMT: \"\",\r\n    },\r\n    headerSelectedDetails: [\r\n      { label: \"Item Code\" },\r\n      { label: \"Item Description\" },\r\n      { label: \"UOM\" },\r\n      // { label: \"Brand\" },\r\n      // { label: \"Range\" },\r\n      { label: \"Unit Price\" },\r\n      { label: \"Total Qty\" },\r\n      { label: \"Required Qty\" },\r\n      { label: \"Approved Qty\" },\r\n    ],\r\n    statusOption: [],\r\n    contactOption: [],\r\n    supOption: [],\r\n    siteOption: [],\r\n\r\n    storedItemList: [],\r\n\r\n    UOM: \"\",\r\n\r\n    // hqonly:0,\r\n\r\n    listDetail: {},\r\n    isPrintPdfClick: false,\r\n    siteAddr: [],\r\n\r\n    disableEdit: false,\r\n    disableEditQty: false,\r\n    is_loading: true,\r\n    isMounted: true,\r\n\r\n    blur: false,\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      validators: {},\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    console.log(\"this.props\", this.props);\r\n\r\n    console.log(\"this.state\", this.state);\r\n    // console.log(\"useLocation()\",useLocation())\r\n    this.getSiteCode();\r\n    this.getSup();\r\n    this.getContact();\r\n    // this.getSiteDetail()\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  handleClick = async key => {\r\n    let { active, currentValue } = this.state;\r\n    await this.setState({\r\n      selectedMenu: key.id,\r\n    });\r\n    this.setState({\r\n      active: true,\r\n      currentValue: key.key,\r\n      selected: key.id,\r\n    });\r\n  };\r\n\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.updateState({\r\n      formFields,\r\n    });\r\n    if (name == \"SUPP_Code\") {\r\n      let { contactOption } = this.state;\r\n      contactOption = [];\r\n      this.props\r\n        .getCommonApi(`supplycontactinfo/?searchsuppliercode=${value}`)\r\n        .then(res => {\r\n          console.log(\"res.data\", res);\r\n          for (let key of res.data) {\r\n            contactOption.push({\r\n              value: key.ContactInfo_ID,\r\n              label: key.ContactInfo_Name,\r\n              suppCode: key.Supplier_Code,\r\n              phone: key.ContactInfo_PhoneNo,\r\n              email: key.ContactInfo_Email,\r\n              active: key.Active,\r\n            });\r\n          }\r\n          console.log(\"contactOption\", contactOption);\r\n          this.setState({ contactOption });\r\n        });\r\n    }\r\n  };\r\n\r\n  handleDatePick = async (name, value) => {\r\n    // dateFormat(new Date())\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    // formFields[name] = value;\r\n    await this.updateState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  getContact = () => {\r\n    let { contactOption, blur } = this.state;\r\n    contactOption = [];\r\n    this.props.getCommonApi(`supplycontactinfo`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        contactOption.push({\r\n          value: key.ContactInfo_ID,\r\n          label: key.ContactInfo_Name,\r\n          suppCode: key.Supplier_Code,\r\n          phone: key.ContactInfo_PhoneNo,\r\n          email: key.ContactInfo_Email,\r\n          active: key.Active,\r\n        });\r\n      }\r\n      console.log(\"contactOption\", contactOption);\r\n      this.setState({ contactOption });\r\n      if (this.props.match.params.id) {\r\n        this.autoFillForm();\r\n      }\r\n      if (\r\n        this.props.tokenDetail.role_code !== \"1\" &&\r\n        this.props.tokenDetail.role_code !== \"2\"\r\n      ) {\r\n        blur = true;\r\n        this.setState({ blur });\r\n      }\r\n    });\r\n  };\r\n\r\n  getSiteCode = () => {\r\n    let { siteOption } = this.state;\r\n    siteOption = [];\r\n    this.props.getCommonApi(`sitecode`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        siteOption.push({\r\n          value: key.ItemSite_Code,\r\n          label: key.ItemSite_Desc,\r\n          id: key.ItemSite_ID,\r\n          // active: key.itm_isactive,\r\n        });\r\n      }\r\n      console.log(\"siteOption\", siteOption);\r\n      this.setState({ siteOption });\r\n    });\r\n  };\r\n\r\n  getSup = () => {\r\n    let { supOption } = this.state;\r\n    supOption = [];\r\n    this.props.getCommonApi(`itemsupply`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        supOption.push({\r\n          value: key.SPLY_CODE,\r\n          label: key.SUPPLYDESC,\r\n          addr1: key.SPLY_ADDR1,\r\n          addr2: key.SPLY_ADDR2,\r\n          addr3: key.SPLY_ADDR3,\r\n          postalCode: key.SPLY_POSCD,\r\n          state: key.SPLY_STATE,\r\n          city: key.SPLY_CITY,\r\n          country: key.SPLY_CNTRY,\r\n        });\r\n      }\r\n      console.log(\"supOption\", supOption);\r\n      this.setState({ supOption });\r\n    });\r\n  };\r\n\r\n  getAutofillItemDetails = PO_NO => {\r\n    console.log(\"PO_NO\", PO_NO);\r\n    this.props\r\n      .getCommonApi(`poapprovalitem/?searchpono=${PO_NO}&limit=10000`)\r\n      .then(res => {\r\n        console.log(\"res in getAutofillItemDetails\", res);\r\n        // this.state.storedItemListStored = res.data.dataList\r\n        if (res.status == 200) {\r\n          for (let item of res.data.dataList) {\r\n            this.props\r\n              .getCommonApi(\r\n                `allstocklist/?searchitemdesc=${item.POD_ITEMDESC}&searchsitecode=${this.props.tokenDetail.site_code}&limit=100`\r\n              )\r\n              .then(resAll => {\r\n                console.log(resAll, \"dsfdfaafg\");\r\n                // this.setState({ detailsListFull: [] });\r\n                for (let data of resAll.data.dataList) {\r\n                  console.log(\"data.Item_Desc\", data.Item_Desc);\r\n                  console.log(\"item.POD_ITEMDESC\", item.POD_ITEMDESC);\r\n                  console.log(\"data.UOM_DESC\", data.UOM_DESC);\r\n                  console.log(\"item.BrandName\", item.BrandName);\r\n                  if (\r\n                    data.Item_Desc == item.POD_ITEMDESC &&\r\n                    data.UOM_DESC == item.BrandName\r\n                  ) {\r\n                    console.log(\"in if loop\");\r\n                    this.state.storedItemList.push({\r\n                      item_code: item.POD_ITEMCODE,\r\n                      Item_Desc: item.POD_ITEMDESC,\r\n                      ITEM_UOM: item.BrandCode,\r\n                      UOM_DESC: item.BrandName,\r\n                      POD_ITEMPRICE: item.POD_ITEMPRICE,\r\n                      POD_TTLQTY: data.QTY,\r\n                      POD_QTY: item.POD_QTY,\r\n                      POD_APPQTY: item.POD_APPQTY,\r\n                    });\r\n                  }\r\n                }\r\n                this.setState(this.state.storedItemList);\r\n              });\r\n            // this.state.itemListBeforeEdit.push({\"item_id\":item.PO_ID,\"item_code\":item.POD_ITEMCODE,\"UOM_DESC\":item.BrandName})\r\n          }\r\n\r\n          // this.setState(this.state.itemListBeforeEdit)\r\n          // console.log(\"this.state.itemListBeforeEdit\",this.state.itemListBeforeEdit)\r\n        }\r\n      });\r\n  };\r\n\r\n  autoFillForm = () => {\r\n    let { disableEdit, disableEditQty, contactOption, supOption } = this.state;\r\n\r\n    this.props\r\n      .getCommonApi(`poapprovallist/?searchpoid=${this.props.match.params.id}`)\r\n      .then(async res => {\r\n        console.log(\"po dataList\", res.data.dataList);\r\n        // console.log(\"quo dataList cust name\", res.data.dataList[0].customer_name);\r\n        // custName = res.data.dataList[0].customer_name\r\n        // this.state.projectList = res.data.dataList\r\n        this.state.formFields[\"PO_NO\"] = res.data.dataList[0].PO_NO;\r\n        this.state.formFields[\"SUPP_Code\"] = res.data.dataList[0].SUPP_Code;\r\n\r\n        // if (res.data.dataList[0].SUPP_Code && supOption.length!==0) {\r\n        //   //matching status name with the id to set prefill status in dropdown\r\n        //   this.state.formFields[\"SUPP_Code\"] = supOption.find(option => option.label === res.data.dataList[0].SUPP_Code).value\r\n        //   console.log(\"res.data.dataList[0].SUPP_Code\",res.data.dataList[0].SUPP_Code)\r\n        // }\r\n        // this.state.formFields[\"SUPP_Code\"] = res.data.dataList[0].SUPP_Code\r\n        this.state.formFields[\"PO_DATE\"] = res.data.dataList[0].PO_DATE;\r\n\r\n        console.log(\"contactOption in autofill\", contactOption);\r\n        console.log(\r\n          \"res.data.dataList[0].contactPerson\",\r\n          res.data.dataList[0].contactPerson\r\n        );\r\n\r\n        if (res.data.dataList[0].contactPerson && contactOption.length !== 0) {\r\n          //matching status name with the id to set prefill status in dropdown\r\n          this.state.formFields[\"contactPerson\"] = contactOption.find(\r\n            option => option.label === res.data.dataList[0].contactPerson\r\n          ).value;\r\n          console.log(\r\n            \"res.data.dataList[0].contactPerson\",\r\n            res.data.dataList[0].contactPerson\r\n          );\r\n        }\r\n\r\n        this.state.formFields[\"PO_STATUS\"] = res.data.dataList[0].PO_STATUS;\r\n        if (\r\n          res.data.dataList[0].PO_STATUS == \"Posted\" ||\r\n          res.data.dataList[0].PO_STATUS == \"Approved\" ||\r\n          res.data.dataList[0].PO_STATUS == \"Not Approved\"\r\n        ) {\r\n          disableEdit = true;\r\n          this.setState({ disableEdit });\r\n        }\r\n        if (\r\n          res.data.dataList[0].PO_STATUS == \"Approved\" ||\r\n          res.data.dataList[0].PO_STATUS == \"Not Approved\"\r\n        ) {\r\n          disableEditQty = true;\r\n          this.setState({ disableEditQty });\r\n        }\r\n\r\n        // console.log(\"statusOption in prefill\",this.state.statusOption)\r\n        // console.log(\"res.data.dataList[0].status\",res.data.dataList[0].status)\r\n        // if status empty prevent err\r\n        // if (res.data.dataList[0].PO_STATUS && statusOption.length!==0) {\r\n        //   //matching status name with the id to set prefill status in dropdown\r\n        //   this.state.formFields[\"PO_STATUS\"] = statusOption.find(option => option.label === res.data.dataList[0].PO_STATUS).value\r\n        //   console.log(\"res.data.dataList[0].PO_STATUS\",res.data.dataList[0].PO_STATUS)\r\n        //   if(res.data.dataList[0].PO_STATUS == \"Posted\"){\r\n        //     disableEdit = true\r\n\r\n        //     // for (var i = 0; i < statusOption.length; i++){\r\n        //     //   if(statusOption[i].label == \"Posted\") {\r\n        //     //     statusOption = statusOption.filter(e => e.label !== 'Open')\r\n        //     //   }\r\n        //     // }\r\n        //     // console.log(\"statusOption when status is posted\",statusOption)\r\n\r\n        //     this.setState({disableEdit})\r\n        //     console.log(\"this.state.disableEdit\",disableEdit)\r\n        //   }\r\n        // }\r\n        this.state.formFields[\"ItemSite_Code\"] =\r\n          res.data.dataList[0].ItemSite_Code;\r\n\r\n        this.state.formFields[\"PO_REMK1\"] = res.data.dataList[0].PO_REMK1;\r\n        this.state.formFields[\"terms\"] = res.data.dataList[0].terms;\r\n        this.state.formFields[\"PO_TTQTY\"] = res.data.dataList[0].PO_TTQTY;\r\n        this.state.formFields[\"PO_TTAMT\"] = res.data.dataList[0].PO_TTAMT;\r\n\r\n        // this.state.formFieldsDetailsStored.PO_TTQTY = res.data.dataList[0].PO_TTQTY\r\n\r\n        this.updateState(this.state.formFields);\r\n        // this.setState(this.state.formFieldsDetailsStored)\r\n        // console.log(\"this.state.formFieldsDetailsStored\",this.state.formFieldsDetailsStored)\r\n        console.log(\"this.state.formFields\", this.state.formFields);\r\n        this.getAutofillItemDetails(res.data.dataList[0].PO_NO);\r\n        this.getSiteDetail(res.data.dataList[0].ItemSite_Code);\r\n      });\r\n  };\r\n\r\n  getSiteDetail = ItemSite_Code => {\r\n    let { siteAddr, hqonly } = this.state;\r\n    siteAddr = [];\r\n    this.props.getCommonApi(`sitecode`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      siteAddr = res.data;\r\n      console.log(\"siteAddr\", siteAddr);\r\n      this.setState({ siteAddr });\r\n\r\n      // for(let item of res.data){\r\n      //   if(item.ItemSite_Code == ItemSite_Code){\r\n      //     hqonly = item.hq_only\r\n      //   }\r\n      // }\r\n      // console.log(\"hqonly\",hqonly)\r\n\r\n      // this.setState({hqonly})\r\n    });\r\n  };\r\n\r\n  handleItemDetailsSubmit = async label => {\r\n    let { storedItemList, formFields } = this.state;\r\n\r\n    for (let item of storedItemList) {\r\n      const formDataItem = new FormData();\r\n      console.log(\"item.POD_APPQTY\", item.POD_APPQTY);\r\n\r\n      formDataItem.append(\"POD_APPQTY\", item.POD_APPQTY ? item.POD_APPQTY : 0);\r\n\r\n      if (label == \"Approved\") {\r\n        formDataItem.append(\"STATUS\", \"Approved\");\r\n      } else if (label == \"Not Approved\") {\r\n        formDataItem.append(\"STATUS\", \"Cancel\");\r\n      }\r\n\r\n      await this.props\r\n        .getCommonApi(\r\n          `poapprovalitem/?searchpono=${formFields.PO_NO}&searchitemcode=${item.item_code}&searchuom=${item.UOM_DESC}`\r\n        )\r\n        .then(resGetItem => {\r\n          // if (resGetItem.status == 200){\r\n          console.log(\"resGetItem\", resGetItem);\r\n          this.props\r\n            .commonUpdateApi(\r\n              `poapprovalitem/${resGetItem.data.dataList[0].PO_ID}/`,\r\n              formDataItem\r\n            )\r\n            .then(resUpdateItem => {\r\n              console.log(\"resUpdateItem\", resUpdateItem);\r\n              history.push(`/admin/inventory`);\r\n            });\r\n          // }\r\n          // else if(resGetItem.status == 204){\r\n          //   formDataItem.append(\"fk_po\", resPO.data.id)\r\n          //   this.props\r\n          //     .commonCreateApi(\r\n          //       `poitem/`,\r\n          //       formDataItem\r\n          //     )\r\n          //     .then(resCreateItem => {\r\n          //       console.log(\"resCreateItem\",resCreateItem)\r\n          //     })\r\n          // }\r\n        });\r\n    }\r\n  };\r\n  handleEditChangeQuantity = ({ target: { value, name } }) => {\r\n    let { storedItemList, UOM } = this.state;\r\n\r\n    for (let list in storedItemList) {\r\n      if (\r\n        storedItemList[list].item_code == name &&\r\n        storedItemList[list].UOM_DESC == UOM\r\n      ) {\r\n        storedItemList[list].POD_APPQTY = value;\r\n      }\r\n      // console.log(\"storedItemList[list].item_code\",storedItemList[list].item_code)\r\n    }\r\n\r\n    this.setState({\r\n      storedItemList,\r\n    });\r\n    console.log(\"storedItemList in handleEditChange\", storedItemList);\r\n  };\r\n\r\n  handleSubmit = async label => {\r\n    try {\r\n      if (this.validator.allValid()) {\r\n        let { statusOption, storedItemList } = this.state;\r\n        console.log(\"label\", label, typeof label);\r\n        console.log(\"storedItemList in submit\", storedItemList);\r\n        // window.alert(\"Approved Qty is empty!\")\r\n        for (let item of storedItemList) {\r\n          console.log(\"!item.POD_APPQTY\", !item.POD_APPQTY);\r\n          // console.log(\"item.POD_APPQTY.length == 0\",item.POD_APPQTY.length == 0)\r\n          if (!item.POD_APPQTY) {\r\n            Toast({\r\n              type: \"error\",\r\n              message: \"Approved Qty is empty!\",\r\n            });\r\n            return;\r\n          }\r\n        }\r\n        for (let item of storedItemList) {\r\n          if (item.POD_TTLQTY < item.POD_APPQTY) {\r\n            Toast({\r\n              type: \"error\",\r\n              message: \"Approved Qty for \" + item.Item_Desc + \" exceeded limit\",\r\n            });\r\n            return;\r\n          }\r\n        }\r\n\r\n        if (this.props.match.params.id) {\r\n          console.log(\"if props\");\r\n          await this.handleItemDetailsSubmit(label);\r\n          const formData = new FormData();\r\n          if (label == \"Approved\") {\r\n            // formData.append(\"IsApproved\", \"Approved\")\r\n            formData.append(\"PO_STATUS\", \"Approved\");\r\n\r\n            // if(hqonly == 1){\r\n            //   var resPOHQ = await this.props\r\n            //   .commonUpdateApi(\r\n            //     `poapprovalhqonlylist/${this.props.match.params.id}/`,\r\n            //     formData\r\n            //   )\r\n            // }else{\r\n            var resPOHQ = await this.props.commonUpdateApi(\r\n              `poapprovallist/${this.props.match.params.id}/`,\r\n              formData\r\n            );\r\n            // }\r\n\r\n            console.log(resPOHQ);\r\n          } else if (label == \"Not Approved\") {\r\n            console.log(\"label not app\", label);\r\n            // formData.append(\"IsApproved\", \"Not Approved\")\r\n            formData.append(\"PO_STATUS\", \"Not Approved\");\r\n            // if(hqonly == 1){\r\n            //   var resPOHQ = await this.props\r\n            //   .commonUpdateApi(\r\n            //     `poapprovalhqonlylist/${this.props.match.params.id}/`,\r\n            //     formData\r\n            //   )\r\n            // }else{\r\n            var resPOHQ = await this.props.commonUpdateApi(\r\n              `poapprovallist/${this.props.match.params.id}/`,\r\n              formData\r\n            );\r\n            // }\r\n\r\n            console.log(resPOHQ);\r\n            // this.handleItemDetailsSubmit(label);\r\n            history.push(`/admin/inventory`);\r\n          } else {\r\n            this.handleItemDetailsSubmit();\r\n            history.push(`/admin/inventory`);\r\n          }\r\n        }\r\n      } else {\r\n        this.validator.showMessages();\r\n      }\r\n      // this.updateState({ is_loading: false });\r\n    } catch (e) {\r\n      this.updateState({ is_loading: false });\r\n    }\r\n  };\r\n\r\n  setUOM = UOM_DESC => {\r\n    let { UOM } = this.state;\r\n    UOM = UOM_DESC;\r\n    console.log(\"UOM in setUOM\", UOM);\r\n    this.setState({ UOM });\r\n  };\r\n\r\n  handlePrintPdfFormat = url => {\r\n    this.setState({\r\n      isPrintPdfClick: false,\r\n    });\r\n    var a = document.createElement(\"a\");\r\n    a.setAttribute(\"download\", `${new Date()}.pdf`);\r\n    a.setAttribute(\"href\", url);\r\n    a.click();\r\n    window.open(url);\r\n  };\r\n\r\n  getListDetail = () => {\r\n    let {\r\n      siteAddr,\r\n      supOption,\r\n      contactOption,\r\n      listDetail,\r\n      formFields,\r\n      isPrintPdfClick,\r\n    } = this.state;\r\n\r\n    let addr = \"\";\r\n\r\n    for (let site of siteAddr) {\r\n      if (site.ItemSite_Code == this.props.tokenDetail.site_code) {\r\n        addr = site.ItemSite_Address;\r\n      }\r\n    }\r\n\r\n    let supAddr = \"\";\r\n    let supInfo = \"\";\r\n\r\n    if (formFields.SUPP_Code && supOption) {\r\n      supInfo = supOption.find(option => option.value === formFields.SUPP_Code);\r\n      supAddr =\r\n        supInfo.addr1 +\r\n        \" \" +\r\n        supInfo.addr2 +\r\n        \" \" +\r\n        supInfo.addr3 +\r\n        \" \" +\r\n        supInfo.postalCode +\r\n        \" \" +\r\n        supInfo.state +\r\n        \" \" +\r\n        supInfo.city +\r\n        \" \" +\r\n        supInfo.country;\r\n      console.log(\"supAddr\", supAddr);\r\n    }\r\n\r\n    listDetail = {\r\n      PO_NO: formFields.PO_NO,\r\n      Supplier:\r\n        formFields.SUPP_Code && supOption\r\n          ? supOption.find(option => option.value === formFields.SUPP_Code)\r\n              .label\r\n          : \"\",\r\n      supAddr: supAddr ? supAddr : \"\",\r\n      contactPhone:\r\n        formFields.contactPerson && contactOption\r\n          ? contactOption.find(\r\n              option => option.value === formFields.contactPerson\r\n            ).phone\r\n          : \"\",\r\n      contactEmail:\r\n        formFields.contactPerson && contactOption\r\n          ? contactOption.find(\r\n              option => option.value === formFields.contactPerson\r\n            ).email\r\n          : \"\",\r\n      contactPerson:\r\n        formFields.contactPerson && contactOption\r\n          ? contactOption.find(\r\n              option => option.value === formFields.contactPerson\r\n            ).label\r\n          : \"\",\r\n      PO_DATE: formFields.PO_DATE,\r\n      terms: formFields.terms,\r\n      PO_STATUS: formFields.PO_STATUS,\r\n      storeName: this.props.tokenDetail.branch,\r\n      printedBy: this.props.tokenDetail.username,\r\n      totalQty: formFields.PO_TTQTY,\r\n      totalAmt: formFields.PO_TTAMT,\r\n      addr: addr,\r\n    };\r\n    console.log(\"listDetail in getListDetail\", listDetail);\r\n\r\n    isPrintPdfClick = true;\r\n    this.setState({ listDetail, isPrintPdfClick });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      formFields,\r\n      storedItemList,\r\n      headerSelectedDetails,\r\n      disableEdit,\r\n      disableEditQty,\r\n      contactOption,\r\n      supOption,\r\n      siteOption,\r\n      isPrintPdfClick,\r\n      listDetail,\r\n      blur,\r\n    } = this.state;\r\n\r\n    let {\r\n      PO_NO,\r\n      SUPP_Code,\r\n      PO_DATE,\r\n      contactPerson,\r\n      PO_STATUS,\r\n      ItemSite_Code,\r\n      PO_REMK1,\r\n      terms,\r\n      PO_TTQTY,\r\n      PO_TTAMT,\r\n    } = formFields;\r\n\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"px-5  create-PO\">\r\n        <div className=\"head-label-nav\">\r\n          <p\r\n            className=\"category cursor-pointer\"\r\n            onClick={() => history.push(`/admin/inventory`)}\r\n          >\r\n            {t(\"HQ Stocks PO Approval\")}\r\n          </p>\r\n          <i className=\"icon-right mx-md-3\"></i>\r\n          <p className=\"sub-category\">\r\n            {t(\r\n              `${this.props.match.params.id && \"View/Edit\"} Stocks PO Approval`\r\n            )}\r\n          </p>\r\n        </div>\r\n        <div className=\"PO-detail\">\r\n          <div className=\"form-group mb-4 pb-2\">\r\n            <div className=\"row mt-5\">\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"PO No\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    disabled={true}\r\n                    placeholder=\"Auto generated\"\r\n                    value={PO_NO}\r\n                    name=\"PO_NO\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                  {this.validator.message(\r\n                    t(\"PO No\"),\r\n                    PONumber,\r\n                    t(\"required\")\r\n                  )}\r\n                </div> */}\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Supplier\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalSelect\r\n                    options={supOption}\r\n                    disabled={disableEdit}\r\n                    value={SUPP_Code}\r\n                    name=\"SUPP_Code\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                  {this.validator.message(\r\n                    t(\"Supplier\"),\r\n                    SUPP_Code,\r\n                    t(\"required\")\r\n                  )}\r\n                </div> */}\r\n              </div>\r\n\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"PO Date\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalDateTime\r\n                    onChange={this.handleDatePick}\r\n                    inputcol=\"p-0 inTime\"\r\n                    value={PO_DATE ? new Date(PO_DATE) : new Date()}\r\n                    name=\"PO_DATE\"\r\n                    //className=\"dob-pick\"\r\n                    showYearDropdown={true}\r\n                    dateFormat=\"dd/MM/yyyy\"\r\n                    // maxDate={new Date(toDate)}\r\n                    showDisabledMonthNavigation\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                  {this.validator.message(\r\n                    t(\"PO Date\"),\r\n                    PO_DATE,\r\n                    t(\"required\")\r\n                  )}\r\n                </div> */}\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Contact Person\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalSelect\r\n                    options={contactOption}\r\n                    disabled={disableEdit}\r\n                    value={contactPerson}\r\n                    name=\"contactPerson\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                  {this.validator.message(\r\n                    t(\"Contact Person\"),\r\n                    contactPerson,\r\n                    t(\"required\")\r\n                  )}\r\n                </div> */}\r\n              </div>\r\n\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Status\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    disabled={true}\r\n                    // placeholder=\"Auto generated\"\r\n                    value={PO_STATUS}\r\n                    name=\"PO_STATUS\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                  {this.validator.message(\r\n                    t(\"Status\"),\r\n                    PO_STATUS,\r\n                    t(\"required\")\r\n                  )}\r\n                </div> */}\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Store Code\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalSelect\r\n                    options={siteOption}\r\n                    disabled={disableEdit}\r\n                    value={ItemSite_Code}\r\n                    name=\"ItemSite_Code\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                  {this.validator.message(\r\n                    t(\"Store Code\"),\r\n                    ItemSite_Code,\r\n                    t(\"required\")\r\n                  )}\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Remarks\")}\r\n                </label>\r\n                <div className=\"input-group-desc\">\r\n                  <NormalTextarea\r\n                    // placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={PO_REMK1}\r\n                    name=\"PO_REMK1\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-2 col-12\"></div>\r\n\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Terms Of Payment\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    // placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={terms}\r\n                    name=\"terms\"\r\n                    onKeyPress={event => {\r\n                      if (!/[0-9]/.test(event.key)) {\r\n                        event.preventDefault();\r\n                      }\r\n                    }}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                    {this.validator.message(\r\n                      t(\"Quotation Number\"),\r\n                      terms,\r\n                      t(\"required\")\r\n                    )}\r\n                  </div> */}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-md-12 PO-content\">\r\n              <div className=\"row mt-5\"></div>\r\n              <TableWrapper\r\n                headerDetails={headerSelectedDetails}\r\n                // queryHandler={this.handlePagination}\r\n                // pageMeta={pageMeta}\r\n              >\r\n                {storedItemList\r\n                  ? storedItemList.map((item, index) => {\r\n                      let {\r\n                        item_code,\r\n                        Item_Desc,\r\n                        UOM_DESC,\r\n                        POD_ITEMPRICE,\r\n                        POD_TTLQTY,\r\n                        POD_QTY,\r\n                        POD_APPQTY,\r\n                      } = item;\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item_code}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {Item_Desc}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {UOM_DESC}\r\n                            </div>\r\n                          </td>\r\n                          <Blur radius={blur ? \"10px\" : \"\"}>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {POD_ITEMPRICE}\r\n                              </div>\r\n                            </td>\r\n                          </Blur>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {POD_TTLQTY}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {POD_QTY}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <NormalInput\r\n                              value={POD_APPQTY}\r\n                              disabled={disableEditQty}\r\n                              name={item_code}\r\n                              onKeyPress={event => {\r\n                                if (!/[0-9]/.test(event.key)) {\r\n                                  event.preventDefault();\r\n                                }\r\n                              }}\r\n                              onClick={() => this.setUOM(UOM_DESC)}\r\n                              onChange={this.handleEditChangeQuantity}\r\n                            />\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n\r\n              <div className=\"row justify-content-end mt-5\">\r\n                <div className=\"col-4\">\r\n                  <div className=\"d-flex mb-3\">\r\n                    <label className=\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\">\r\n                      {t(\"Total Cost\")}\r\n                    </label>\r\n                    <Blur radius={blur ? \"10px\" : \"\"}>\r\n                      <div className=\"input-group-address w-100\">\r\n                        <NormalInput\r\n                          // placeholder=\"Enter here\"\r\n                          disabled={true}\r\n                          value={PO_TTAMT}\r\n                          name=\"PO_TTAMT\"\r\n                          // onChange={this.handleChangeDetails}\r\n                        />\r\n                      </div>\r\n                    </Blur>\r\n                  </div>\r\n                  {/* <div>\r\n                        {this.props.validator.message(\r\n                          t(\"Total Cost\"),\r\n                          PO_TTAMT,\r\n                          t(\"required\")\r\n                        )}\r\n                    </div> */}\r\n\r\n                  <div className=\"d-flex mb-3\">\r\n                    <label className=\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\">\r\n                      {t(\"Total Quantity\")}\r\n                    </label>\r\n                    <div className=\"input-group-address w-100\">\r\n                      <NormalInput\r\n                        // placeholder=\"Enter here\"\r\n                        disabled={true}\r\n                        value={PO_TTQTY}\r\n                        name=\"PO_TTQTY\"\r\n                        onChange={this.handleChange}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  {/* <div>\r\n                        {this.validator.message(\r\n                          t(\"Total\"),\r\n                          PO_TTQTY,\r\n                          t(\"required\")\r\n                        )}\r\n                    </div> */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row justify-content-end\">\r\n              {/* <div className=\"col-md-6 col-12 mt-3\"></div> */}\r\n\r\n              <div className=\"col-md-2 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Back\"\r\n                  outline={false}\r\n                  onClick={() => history.push(`/admin/inventory`)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"col-md-2 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  disabled={disableEditQty}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Save\"\r\n                  outline={false}\r\n                  onClick={() => this.handleSubmit()}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"col-md-2 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  disabled={disableEditQty}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Approved\"\r\n                  outline={false}\r\n                  onClick={() => this.handleSubmit(\"Approved\")}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"col-md-2 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  disabled={disableEditQty}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Not Approved\"\r\n                  outline={false}\r\n                  onClick={() => this.handleSubmit(\"Not Approved\")}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"col-md-2 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  disabled={this.props.match.params.id ? false : true}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Print PDF\"\r\n                  outline={false}\r\n                  onClick={() => this.getListDetail()}\r\n                />\r\n              </div>\r\n              {isPrintPdfClick ? (\r\n                <PDFDownloadLink\r\n                  document={\r\n                    <PDF\r\n                      listDetail={listDetail}\r\n                      itemDetail={storedItemList}\r\n                      // Flag={activeTab !== \"detail\" ? 3 : 4}\r\n                      landscape={false}\r\n                      blur={blur}\r\n                    />\r\n                  }\r\n                >\r\n                  {({ blob, url, loading, error }) =>\r\n                    !loading && url ? this.handlePrintPdfFormat(url) : null\r\n                  }\r\n                </PDFDownloadLink>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* )} */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetail: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonUpdateApi,\r\n      updatePO,\r\n      createPO,\r\n      deletePO,\r\n      getTokenDetails,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const AddStocksPOHQ = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(AddStocksPOHQClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}