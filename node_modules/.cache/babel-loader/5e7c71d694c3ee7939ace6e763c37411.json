{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\CustomerPlus\\\\LoyaltyPointsSettings\\\\RewardPolicyTable\\\\index.js\";\nimport React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { TableWrapper } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getRewardPlolicySettings } from \"redux/actions/customerPlus\";\nimport _ from \"lodash\";\nexport class RewardPolicyTableClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [{\n        label: \"Code\",\n        sortKey: \"customerCode\"\n      }, {\n        label: \"Cust Type\",\n        sortKey: \"customerType\",\n        enabled: true\n      }, {\n        label: \"Reward Stock Type\",\n        sortKey: \"rewardStockType\",\n        enabled: true\n      }, {\n        label: \"Currency Value\",\n        sortKey: \"currencyValue\",\n        enabled: true\n      }, {\n        label: \"Point Value\",\n        sortKey: \"pointsValue\",\n        enabled: true\n      }, {\n        label: \"Active\",\n        sortKey: \"active\",\n        enabled: true\n      }, {\n        label: \"\"\n      }],\n      dataList: [],\n      meta: {},\n      currentIndex: -1,\n      isMounted: true,\n      isLoading: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.handlePagination = async data => {\n      var _data$page;\n\n      let page = (_data$page = data === null || data === void 0 ? void 0 : data.page) !== null && _data$page !== void 0 ? _data$page : 1;\n      this.setState({\n        isLoading: true\n      });\n      await this.props.getRewardPlolicySettings(`?limit=10&page=${page}`);\n      let {\n        diagnosisList,\n        pagination\n      } = this.props.rewardPolicyList;\n      this.updateState({\n        meta: pagination,\n        dataList: diagnosisList,\n        isLoading: false\n      });\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.updateState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n  }\n\n  componentDidMount() {\n    this.handlePagination();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  render() {\n    let {\n      headerDetails,\n      dataList,\n      meta,\n      currentIndex,\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customer-list container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"head-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, \"Redward Policy\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-md-6 col-sm-12 fs-15 float-right\",\n      label: \"Add Reward Policy\",\n      onClick: () => this.props.history.push(\"lpmanagement/addreward\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }))))), isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, \"Loading...\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: meta,\n      showFilterColumn: true,\n      parentHeaderChange: value => this.updateState(() => headerDetails = value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 19\n      }\n    }, dataList ? dataList.map((item, index) => {\n      var _headerDetails$0$enab, _headerDetails$0$enab2, _headerDetails$1$enab, _headerDetails$2$enab, _headerDetails$3$enab, _headerDetails$4$enab;\n\n      let {\n        id,\n        reward_code,\n        cust_type,\n        cur_value,\n        point_value,\n        isactive,\n        reward_item_type\n      } = item;\n      console.log(headerDetails[0]);\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$0$enab = headerDetails[0].enabled) !== null && _headerDetails$0$enab !== void 0 ? _headerDetails$0$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 33\n        }\n      }, reward_code)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$0$enab2 = headerDetails[0].enabled) !== null && _headerDetails$0$enab2 !== void 0 ? _headerDetails$0$enab2 : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 33\n        }\n      }, cust_type)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$1$enab = headerDetails[1].enabled) !== null && _headerDetails$1$enab !== void 0 ? _headerDetails$1$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 33\n        }\n      }, reward_item_type)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$2$enab = headerDetails[2].enabled) !== null && _headerDetails$2$enab !== void 0 ? _headerDetails$2$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 33\n        }\n      }, cur_value)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$3$enab = headerDetails[3].enabled) !== null && _headerDetails$3$enab !== void 0 ? _headerDetails$3$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 33\n        }\n      }, point_value)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$4$enab = headerDetails[4].enabled) !== null && _headerDetails$4$enab !== void 0 ? _headerDetails$4$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 33\n        }\n      }, isactive)), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"position-relative\",\n        ref: node => {\n          this.node = node;\n        },\n        onClick: () => this.handleClick(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 31\n        }\n      }, currentIndex === index ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more-active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 39\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"option card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pt-3\",\n        onClick: () => this.props.history.push(`lpmanagement/${id}/editredeem`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-eye-grey px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 41\n        }\n      }), \" \", \"Edit\"))) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 37\n        }\n      }))));\n    }) : \"\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  rewardPolicyList: state.customerPlus.rewardPolicyList\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getRewardPlolicySettings\n  }, dispatch);\n};\n\nexport const RewardPolicyTable = connect(mapStateToProps, mapDispatchToProps)(RewardPolicyTableClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/LoyaltyPointsSettings/RewardPolicyTable/index.js"],"names":["React","NormalButton","TableWrapper","connect","bindActionCreators","getRewardPlolicySettings","_","RewardPolicyTableClass","Component","state","headerDetails","label","sortKey","enabled","dataList","meta","currentIndex","isMounted","isLoading","updateState","data","setState","handlePagination","page","props","diagnosisList","pagination","rewardPolicyList","handleClick","key","active","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","componentDidMount","componentWillUnmount","render","history","push","value","map","item","index","id","reward_code","cust_type","cur_value","point_value","isactive","reward_item_type","console","log","mapStateToProps","customerPlus","mapDispatchToProps","dispatch","RewardPolicyTable"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { TableWrapper } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getRewardPlolicySettings } from \"redux/actions/customerPlus\";\nimport _ from \"lodash\";\n\nexport class RewardPolicyTableClass extends React.Component {\n  state = {\n    headerDetails: [\n      { label: \"Code\", sortKey: \"customerCode\" },\n      { label: \"Cust Type\", sortKey: \"customerType\", enabled: true },\n      { label: \"Reward Stock Type\", sortKey: \"rewardStockType\", enabled: true },\n      { label: \"Currency Value\", sortKey: \"currencyValue\", enabled: true },\n      { label: \"Point Value\", sortKey: \"pointsValue\", enabled: true },\n      { label: \"Active\", sortKey: \"active\", enabled: true },\n      { label: \"\" },\n    ],\n    dataList: [],\n    meta: {},\n    currentIndex: -1,\n    isMounted: true,\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    this.handlePagination();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  handlePagination = async (data) => {\n    let page = data?.page ?? 1;\n    this.setState({ isLoading: true });\n    await this.props.getRewardPlolicySettings(`?limit=10&page=${page}`);\n    let { diagnosisList, pagination } = this.props.rewardPolicyList;\n    this.updateState({\n      meta: pagination,\n      dataList: diagnosisList,\n      isLoading: false,\n    });\n  };\n\n  handleClick = (key) => {\n    if (!this.state.active) {\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\n    }\n\n    this.updateState((prevState) => ({\n      active: !prevState.active,\n      currentIndex: key,\n    }));\n  };\n\n  handleOutsideClick = (e) => {\n    if (this.node != null) {\n      if (this.node.contains(e.target)) {\n        return;\n      }\n    }\n    this.handleClick();\n  };\n\n  render() {\n    let { headerDetails, dataList, meta, currentIndex, isLoading } = this.state;\n    return (\n      <>\n        <div className=\"customer-list container-fluid\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-md-4\">\n              <h3 className=\"head-label\">Redward Policy</h3>\n            </div>\n            <div className=\"col-md-8\">\n              <div className=\"d-flex\">\n                <div className=\"col-12 p-0\">\n                  <NormalButton\n                    mainbg={true}\n                    className=\"col-md-6 col-sm-12 fs-15 float-right\"\n                    label=\"Add Reward Policy\"\n                    onClick={() =>\n                      this.props.history.push(\"lpmanagement/addreward\")\n                    }\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          {isLoading ? (\n            <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n              <div class=\"spinner-border\" role=\"status\">\n                <span class=\"sr-only\">Loading...</span>\n              </div>\n            </div>\n          ) : (\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                <div className=\"table-container\">\n                  <TableWrapper\n                    headerDetails={headerDetails}\n                    queryHandler={this.handlePagination}\n                    pageMeta={meta}\n                    showFilterColumn={true}\n                    parentHeaderChange={(value) =>\n                      this.updateState(() => (headerDetails = value))\n                    }\n                  >\n                    {dataList\n                      ? dataList.map((item, index) => {\n                          let {\n                            id,\n                            reward_code,\n                            cust_type,\n                            cur_value,\n                            point_value,\n                            isactive,\n                            reward_item_type,\n                          } = item;\n                          console.log(headerDetails[0]);\n                          return (\n                            <tr key={index}>\n                              <td\n                                className={\n                                  headerDetails[0].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {reward_code}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[0].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {cust_type}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[1].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {reward_item_type}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[2].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {cur_value}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[3].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {point_value}\n                                </div>\n                              </td>\n                              <td\n                                className={\n                                  headerDetails[4].enabled ?? true\n                                    ? \"\"\n                                    : \"d-none\"\n                                }\n                              >\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {isactive}\n                                </div>\n                              </td>\n                              <td\n                                className=\"position-relative\"\n                                ref={(node) => {\n                                  this.node = node;\n                                }}\n                                onClick={() => this.handleClick(index)}\n                              >\n                                {currentIndex === index ? (\n                                  <>\n                                    <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\n                                      <i className=\"icon-more\"></i>\n                                    </div>\n                                    <div className=\"option card\">\n                                      <div\n                                        className=\"d-flex align-items-center fs-16 pt-3\"\n                                        onClick={() =>\n                                          this.props.history.push(\n                                            `lpmanagement/${id}/editredeem`\n                                          )\n                                        }\n                                      >\n                                        <span className=\"icon-eye-grey px-3\"></span>{\" \"}\n                                        Edit\n                                      </div>\n                                    </div>\n                                  </>\n                                ) : (\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\n                                    <i className=\"icon-more\"></i>\n                                  </div>\n                                )}\n                              </td>\n                            </tr>\n                          );\n                        })\n                      : \"\"}\n                  </TableWrapper>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  rewardPolicyList: state.customerPlus.rewardPolicyList,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      getRewardPlolicySettings,\n    },\n    dispatch\n  );\n};\n\nexport const RewardPolicyTable = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(RewardPolicyTableClass);\n"]},"metadata":{},"sourceType":"module"}