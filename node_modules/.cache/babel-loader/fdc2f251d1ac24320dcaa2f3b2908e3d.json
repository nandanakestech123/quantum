{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\Cart\\\\index.js\";\nimport React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { NormalButton } from \"component/common\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport _ from \"lodash\";\nimport { history } from \"helpers\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi } from \"redux/actions/common\";\nexport class CartClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isOpen: false,\n      currentIndex: -1,\n      cartList: [],\n      cartData: {}\n    };\n\n    this.componentDidMount = () => {// this.getCart()\n    };\n\n    this.getCart = () => {\n      let {\n        productCard,\n        cartList\n      } = this.state;\n      let {\n        selected_cstomer\n      } = this.props; // this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${\"2020-09-17\"}&cust_noid=${selected_cstomer.cust_noid}`).then((key) => {\n\n      this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date())}&cust_noid=${selected_cstomer.cust_noid}`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          this.props.getCommonApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date())}&cust_noid=${selected_cstomer.cust_noid}&cart_id=${data[0].cart_id}`).then(res => {\n            // this.props.getCommonApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_date=${\"2020-09-17\"}&cust_noid=${selected_cstomer.cust_noid}&cart_id=${data[0].cart_id}`).then((res) => {\n            let {\n              status,\n              data\n            } = res;\n\n            if (status === 200) {\n              this.setState({\n                cartList: data,\n                cartData: res\n              });\n            }\n          });\n        }\n      });\n    };\n\n    this.handleOpen = async () => {\n      let {\n        isOpen\n      } = this.state;\n      await this.setState({\n        isOpen: !isOpen\n      });\n\n      if (isOpen === false) {\n        this.getCart();\n      }\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.setState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.getDateTime = data => {\n      let date = new Date(data);\n      date = String(date).split(\" \");\n      let date1 = date[2] + \"th \" + date[1] + \", \" + date[3];\n      let time = date[4].split(\":\");\n      let time1 = String(Number(time[0]) > 12 ? Number(time[0]) - 12 : time[0]) + \":\" + time[1] + (Number(time[0]) > 12 ? \"PM\" : \"AM\");\n      return time1 + \", \" + date1;\n    };\n\n    this.handleSubmit = id => {\n      history.push(`/admin/payment/${id}`);\n    };\n  }\n\n  render() {\n    let {\n      isOpen,\n      currentIndex,\n      cartList,\n      cartData\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: `cart-holder ${isOpen ? \"open\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-head\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-left-arrow\",\n      onClick: () => this.handleOpen(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, \"Cart\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: `${!isOpen ? \"item-list\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, isOpen ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row item-list-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-9 list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row my-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, \"Treatment\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, \"Cost\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }, \"Quantity\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, \"Booking Detail\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    })), cartList.map((item, index) => {\n      let {\n        name,\n        staffId,\n        specialist,\n        homeSite,\n        currentSite,\n        contact,\n        status\n      } = item;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row detail m-2\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4 treatment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"title mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 27\n        }\n      }, item.itemdesc), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sub-title mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 27\n        }\n      }, item.item_class), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"time\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 27\n        }\n      }, item.cart_date ? this.getDateTime(item.cart_date) : \"\", \", \", item.sitecode_name)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2 cost\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }\n      }, \"$ \", item.total_price), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2 quantity\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 25\n        }\n      }, item.quantity), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2 booking\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }\n      }, \"$ \", item.deposit), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2 action\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"position-relative\",\n        ref: node => {\n          this.node = node;\n        },\n        onClick: () => this.handleClick(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 27\n        }\n      }, currentIndex === index ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more-active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 35\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"option card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pt-3\",\n        onClick: () => this.props.history.push(\"/admin/staff/staffDetails\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-eye-grey px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 37\n        }\n      }), \" \", \"View\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-edit px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 37\n        }\n      }), \" \", \"Edit\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-delete px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 37\n        }\n      }), \" \", \"Delete\", \" \"))) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 33\n        }\n      })))));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 billable-amount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    }, \"Subtotal\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }\n    }, \"$ \", cartData.subtotal), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, \"Discount\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }, \"$ \", cartData.discount)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right-total text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, \"Billable Amount\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"amount text-orenge\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    }, \"$ \", cartData.trans_amt)))) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }, \"No Items available\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"total\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, \"Total\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, \"$ \", cartData.trans_amt)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"confirm-booking\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"treatment\",\n      mainbg: true,\n      className: \"col-12 fs-15 \",\n      label: \"Checkout to payment\",\n      onClick: cartList.length > 0 ? () => this.handleSubmit(cartList[0].cart_id) : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  customerDetail: state.appointment.customerDetail,\n  selected_cstomer: state.common.selected_cstomer\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    // getCustomer,\n    getCommonApi\n  }, dispatch);\n};\n\nexport const Cart = connect(mapStateToProps, mapDispatchToProps)(CartClass);","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/Cart/index.js"],"names":["React","Component","NormalButton","dateFormat","_","history","connect","bindActionCreators","getCommonApi","CartClass","state","isOpen","currentIndex","cartList","cartData","componentDidMount","getCart","productCard","selected_cstomer","props","branchId","Date","cust_noid","then","key","status","data","cart_id","res","setState","handleOpen","handleClick","active","document","addEventListener","handleOutsideClick","removeEventListener","prevState","getDateTime","date","String","split","date1","time","time1","Number","handleSubmit","id","push","render","map","item","index","name","staffId","specialist","homeSite","currentSite","contact","itemdesc","item_class","cart_date","sitecode_name","total_price","quantity","deposit","node","subtotal","discount","trans_amt","length","mapStateToProps","customerDetail","appointment","common","mapDispatchToProps","dispatch","Cart"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { NormalButton } from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi } from \"redux/actions/common\";\r\n\r\nexport class CartClass extends Component {\r\n  state = {\r\n    isOpen: false,\r\n    currentIndex: -1,\r\n    cartList: [],\r\n    cartData: {},\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    // this.getCart()\r\n  };\r\n\r\n  getCart = () => {\r\n    let { productCard, cartList } = this.state;\r\n    let { selected_cstomer } = this.props;\r\n    // this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${\"2020-09-17\"}&cust_noid=${selected_cstomer.cust_noid}`).then((key) => {\r\n    this.props\r\n      .getCommonApi(\r\n        `itemcart/Check/?sitecodeid=${\r\n          selected_cstomer.branchId\r\n        }&cart_date=${dateFormat(new Date())}&cust_noid=${\r\n          selected_cstomer.cust_noid\r\n        }`\r\n      )\r\n      .then((key) => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          this.props\r\n            .getCommonApi(\r\n              `itemcart/?sitecodeid=${\r\n                selected_cstomer.branchId\r\n              }&cart_date=${dateFormat(new Date())}&cust_noid=${\r\n                selected_cstomer.cust_noid\r\n              }&cart_id=${data[0].cart_id}`\r\n            )\r\n            .then((res) => {\r\n              // this.props.getCommonApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_date=${\"2020-09-17\"}&cust_noid=${selected_cstomer.cust_noid}&cart_id=${data[0].cart_id}`).then((res) => {\r\n              let { status, data } = res;\r\n              if (status === 200) {\r\n                this.setState({ cartList: data, cartData: res });\r\n              }\r\n            });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleOpen = async () => {\r\n    let { isOpen } = this.state;\r\n    await this.setState({\r\n      isOpen: !isOpen,\r\n    });\r\n    if (isOpen === false) {\r\n      this.getCart();\r\n    }\r\n  };\r\n\r\n  handleClick = (key) => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState((prevState) => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  getDateTime = (data) => {\r\n    let date = new Date(data);\r\n    date = String(date).split(\" \");\r\n    let date1 = date[2] + \"th \" + date[1] + \", \" + date[3];\r\n    let time = date[4].split(\":\");\r\n    let time1 =\r\n      String(Number(time[0]) > 12 ? Number(time[0]) - 12 : time[0]) +\r\n      \":\" +\r\n      time[1] +\r\n      (Number(time[0]) > 12 ? \"PM\" : \"AM\");\r\n    return time1 + \", \" + date1;\r\n  };\r\n\r\n  handleSubmit = (id) => {\r\n    history.push(`/admin/payment/${id}`);\r\n  };\r\n\r\n  render() {\r\n    let { isOpen, currentIndex, cartList, cartData } = this.state;\r\n    return (\r\n      <>\r\n        <div className={`cart-holder ${isOpen ? \"open\" : \"\"}`}>\r\n          <div className=\"cart-head\">\r\n            <i\r\n              className=\"icon-left-arrow\"\r\n              onClick={() => this.handleOpen()}\r\n            ></i>\r\n            <p>Cart</p>\r\n          </div>\r\n          <div className={`${!isOpen ? \"item-list\" : \"\"}`}>\r\n            {isOpen ? (\r\n              <div className=\"row item-list-detail\">\r\n                <div className=\"col-9 list\">\r\n                  <div className=\"row my-2\">\r\n                    <div className=\"col-4 text-center\">Treatment</div>\r\n                    <div className=\"col-2 text-center\">Cost</div>\r\n                    <div className=\"col-2 text-center\">Quantity</div>\r\n                    <div className=\"col-2 text-center\">Booking Detail</div>\r\n                    <div className=\"col-2 text-center\"></div>\r\n                  </div>\r\n                  {cartList.map((item, index) => {\r\n                    let {\r\n                      name,\r\n                      staffId,\r\n                      specialist,\r\n                      homeSite,\r\n                      currentSite,\r\n                      contact,\r\n                      status,\r\n                    } = item;\r\n                    return (\r\n                      <div className=\"row detail m-2\" key={index}>\r\n                        <div className=\"col-4 treatment\">\r\n                          <p className=\"title mb-2\">{item.itemdesc}</p>\r\n                          <p className=\"sub-title mb-2\">{item.item_class}</p>\r\n                          <p className=\"time\">\r\n                            {item.cart_date\r\n                              ? this.getDateTime(item.cart_date)\r\n                              : \"\"}\r\n                            , {item.sitecode_name}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"col-2 cost\">$ {item.total_price}</div>\r\n                        <div className=\"col-2 quantity\">{item.quantity}</div>\r\n                        <div className=\"col-2 booking\">$ {item.deposit}</div>\r\n                        <div className=\"col-2 action\">\r\n                          <div\r\n                            className=\"position-relative\"\r\n                            ref={(node) => {\r\n                              this.node = node;\r\n                            }}\r\n                            onClick={() => this.handleClick(index)}\r\n                          >\r\n                            {currentIndex === index ? (\r\n                              <>\r\n                                <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\r\n                                  <i className=\"icon-more\"></i>\r\n                                </div>\r\n                                <div className=\"option card\">\r\n                                  <div\r\n                                    className=\"d-flex align-items-center fs-16 pt-3\"\r\n                                    onClick={() =>\r\n                                      this.props.history.push(\r\n                                        \"/admin/staff/staffDetails\"\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    <span className=\"icon-eye-grey px-3\"></span>{\" \"}\r\n                                    View{\" \"}\r\n                                  </div>\r\n                                  <div className=\"d-flex align-items-center fs-16\">\r\n                                    <span className=\"icon-edit px-3\"></span>{\" \"}\r\n                                    Edit{\" \"}\r\n                                  </div>\r\n                                  <div className=\"d-flex align-items-center fs-16 pb-3\">\r\n                                    <span className=\"icon-delete px-3\"></span>{\" \"}\r\n                                    Delete{\" \"}\r\n                                  </div>\r\n                                </div>\r\n                              </>\r\n                            ) : (\r\n                              <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\r\n                                <i className=\"icon-more\"></i>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n                <div className=\"col-3 billable-amount\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-6\">Subtotal</div>\r\n                    <div className=\"col-6\">$ {cartData.subtotal}</div>\r\n                    {/* <div className=\"col-6\">Tax</div>\r\n                                    <div className=\"col-6\">$ 20</div> */}\r\n                    <div className=\"col-6\">Discount</div>\r\n                    <div className=\"col-6\">$ {cartData.discount}</div>\r\n                    {/* <div className=\"col-6\">Voucher</div>\r\n                                    <div className=\"col-6\"></div> */}\r\n                  </div>\r\n                  <div className=\"right-total text-center\">\r\n                    <p className=\"label\">Billable Amount</p>\r\n                    <p className=\"amount text-orenge\">$ {cartData.trans_amt}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <p>No Items available</p>\r\n            )}\r\n          </div>\r\n          <div className=\"total\">\r\n            <p>Total</p>\r\n            <p>$ {cartData.trans_amt}</p>\r\n          </div>\r\n          <div className=\"confirm-booking\">\r\n            <NormalButton\r\n              buttonClass={\"treatment\"}\r\n              mainbg={true}\r\n              className=\"col-12 fs-15 \"\r\n              label=\"Checkout to payment\"\r\n              onClick={\r\n                cartList.length > 0\r\n                  ? () => this.handleSubmit(cartList[0].cart_id)\r\n                  : \"\"\r\n              }\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  customerDetail: state.appointment.customerDetail,\r\n  selected_cstomer: state.common.selected_cstomer,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const Cart = connect(mapStateToProps, mapDispatchToProps)(CartClass);\r\n"]},"metadata":{},"sourceType":"module"}