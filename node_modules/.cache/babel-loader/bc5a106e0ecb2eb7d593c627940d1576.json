{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{SchedulerModal}from'component/common/Plugins';// import BigSchedulerModal from 'component/common/Plugins/BigScheduler';\nimport{NormalDateTime}from'component/common';import{getCustomer,getCommonApi,commonDeleteApi}from'redux/actions/common';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";// import timeOption from 'data/timeOption.json'\nimport{dateFormat}from'service/helperFunctions';import{history}from'helpers';import'./style.scss';import SimpleReactValidator from'simple-react-validator';import{CreateAppointment,updateForm}from'redux/actions/appointment';import{Scheduler}from'./Scheduler';var data=[{start_date:'2020-06-09 4:00',end_date:'2020-06-09 6:00',text:'Event 1',id:1},{start_date:'2020-06-11 8:00',end_date:'2020-06-11 10:00',text:'Event 2',id:2},{start_date:'2020-06-12 12:00',end_date:'2018-06-12 14:00',text:'dblclick me!',id:3}];export var SchedulerClass=/*#__PURE__*/function(_Component){_inherits(SchedulerClass,_Component);var _super=_createSuper(SchedulerClass);function SchedulerClass(props){var _this;_classCallCheck(this,SchedulerClass);_this=_super.call(this,props);_this.state={events:[],formField:{search:\"\",menuOption:\"\",menuId:\"\",appointmentDate:new Date()},list:[],filterDate:new Date(),filterType:'day',selectedId:\"\",menuOption:[{lable:\"Name\",value:\"name\"}],dayWeekMonth:\"day\"};_this.componentWillMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,brachList,appointment,formField,filterDate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});_this$state=_this.state,brachList=_this$state.brachList,appointment=_this$state.appointment,formField=_this$state.formField,filterDate=_this$state.filterDate;_this.props.getCommonApi(\"treatment/Outlet/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){// brachList.push({ value: value.id, label: value.itemsite_desc })\nvar value=_step.value;}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({brachList:brachList});// console.log(brachList, \"jhksdfkjsdhfks\")\n}});_this.getAvailability();if(!_this.props.selectedDate){_context.next=7;break;}_context.next=7;return _this.setState({filterDate:_this.props.selectedDate});case 7:_this.getAppointment();case 8:case\"end\":return _context.stop();}}},_callee);}));_this.getAvailability=function(){var filterDate=_this.state.filterDate;_this.setState({list:[]});_this.props.getCommonApi(\"staffsavailable/?Appt_date=\".concat(dateFormat(filterDate,\"yyyy-mm-dd\"))).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     staffList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({list:data});}});};_this.handleAppointmentOpen=function(id,e){console.log(e,id,\"hgjsydfisuyfsdfm ==== handleAppointmentOpen\");};_this.handleEmptyEvent=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(date,e){var customerDetail,formField,time;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:customerDetail=_this.props.customerDetail;formField=_this.state.formField;// if (this.validator.allValid()) {\ntime=new Date(date);formField['time']=time.getHours()>9?time.getHours()+\":00\":\"0\"+time.getHours()+\":00\";_context2.next=6;return _this.setState({formField:formField});case 6:console.log(date,e,\"hgjsydfisuyfsdfm ==== handleEmptyEvent\",time.getHours);_context2.next=9;return _this.props.updateForm('basicApptDetail',formField);case 9:history.push(\"/admin/appointment/create\");// console.log(date, e, \"hgjsydfisuyfsdfm ====\");\n// } else {\n//     this.validator.showMessages();\n// }\ncase 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();_this.getAppointment=function(){var _this$state2=_this.state,brachList=_this$state2.brachList,events=_this$state2.events,formField=_this$state2.formField,filterType=_this$state2.filterType,filterDate=_this$state2.filterDate;_this.props.getCommonApi(\"appointmentcalender/?date=\".concat(dateFormat(filterDate,\"yyyy-mm-dd\"),\"&check=\").concat(filterType)).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(key){var status,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:status=key.status,data=key.data;events=[];if(!(status===200)){_context3.next=8;break;}_context3.next=5;return _this.setState({events:null});case 5:events=data;_context3.next=8;return _this.setState({events:events});case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}());};_this.handleChangeFilter=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(prevMode,prevDate,newMode,newDate){var _this$state3,filterDate,filterType;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$state3=_this.state,filterDate=_this$state3.filterDate,filterType=_this$state3.filterType;filterDate=newDate;filterType=newMode;_context4.next=5;return _this.setState({filterDate:filterDate,filterType:filterType});case 5:_this.getAvailability();_this.getAppointment();case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4,_x5,_x6,_x7){return _ref4.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref5){var _ref5$target,value,name,formField;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;formField=_this.state.formField;formField[name]=value;_context5.next=5;return _this.setState({formField:formField});case 5:if(name===\"branchId\"){_this.getAvailability();_this.getAppointment();}// console.log(formField, \"afasfasdfdfasd\")\n_this.props.updateForm('basicApptDetail',formField);case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x8){return _ref6.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id,event){var selectedId;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:selectedId=_this.state.selectedId;console.log(id,\"===afasfasdfdfasd=====\",selectedId);if(!(id!==selectedId)){_context6.next=7;break;}_context6.next=5;return _this.setState({selectedId:id});case 5:_context6.next=7;return _this.props.commonDeleteApi(\"appointment/\".concat(id,\"/\")).then(function(res){});case 7:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x9,_x10){return _ref7.apply(this,arguments);};}();_this.handleDatePick=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(name,value){var filterDate;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:filterDate=_this.state.filterDate;filterDate=value;_context7.next=4;return _this.setState({filterDate:filterDate});case 4:_this.props.handleFilterChange(value);_this.child.handleAppointment(value);_this.getAppointment();case 7:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x11,_x12){return _ref8.apply(this,arguments);};}();_this.openDetail=function(id){history.push(\"/admin/appointment/\".concat(id,\"/detail\"));};_this.handleChangeView=function(data){var dayWeekMonth=_this.state.dayWeekMonth;dayWeekMonth=data;_this.setState({dayWeekMonth:dayWeekMonth});};_this.child=React.createRef();return _this;}_createClass(SchedulerClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state4=this.state,appointment=_this$state4.appointment,brachList=_this$state4.brachList,branchId=_this$state4.branchId,formField=_this$state4.formField,list=_this$state4.list,events=_this$state4.events,filterType=_this$state4.filterType,menuOption=_this$state4.menuOption,dayWeekMonth=_this$state4.dayWeekMonth,filterDate=_this$state4.filterDate;var search=formField.search,menuId=formField.menuId,appointmentDate=formField.appointmentDate;return/*#__PURE__*/React.createElement(\"div\",{className:\"row define-height px-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 day-week-month filter-date d-flex pl-2 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group py-3\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:filterDate?new Date(filterDate):new Date(),name:\"cust_dob\",className:\"dob-pick\",showYearDropdown:true,dateFormat:\"MM/dd/yyyy\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-8 day-week-month d-flex pl-2 \"},/*#__PURE__*/React.createElement(\"div\",{onClick:this.props.handleBack,className:\"menu my-3 \".concat(dayWeekMonth==='day'?\"active\":\"\")},\"Back\")),/*#__PURE__*/React.createElement(Scheduler,{data:events,filterDate:filterDate,onRef:function onRef(ref){return _this2.child=ref;}}));}}]);return SchedulerClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,customerList:state.common.customerList,multipleCustomerForm:state.appointment.multipleCustomerForm};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomer:getCustomer,getCommonApi:getCommonApi,updateForm:updateForm,commonDeleteApi:commonDeleteApi},dispatch);};export var Calander=connect(mapStateToProps,mapDispatchToProps)(SchedulerClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Appointment/ListAppointment/CommonScheduler/Calander.js"],"names":["React","Component","SchedulerModal","NormalDateTime","getCustomer","getCommonApi","commonDeleteApi","connect","bindActionCreators","dateFormat","history","SimpleReactValidator","CreateAppointment","updateForm","Scheduler","data","start_date","end_date","text","id","SchedulerClass","props","state","events","formField","search","menuOption","menuId","appointmentDate","Date","list","filterDate","filterType","selectedId","lable","value","dayWeekMonth","componentWillMount","validator","element","message","autoForceUpdate","brachList","appointment","then","key","status","setState","getAvailability","selectedDate","getAppointment","handleAppointmentOpen","e","console","log","handleEmptyEvent","date","customerDetail","time","getHours","push","handleChangeFilter","prevMode","prevDate","newMode","newDate","handleChange","target","name","handleDelete","event","res","handleDatePick","handleFilterChange","child","handleAppointment","openDetail","handleChangeView","createRef","branchId","handleBack","ref","mapStateToProps","customerList","common","multipleCustomerForm","mapDispatchToProps","dispatch","Calander"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { SchedulerModal } from 'component/common/Plugins';\r\n// import BigSchedulerModal from 'component/common/Plugins/BigScheduler';\r\nimport { NormalDateTime } from 'component/common';\r\nimport { getCustomer, getCommonApi, commonDeleteApi } from 'redux/actions/common';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\n// import timeOption from 'data/timeOption.json'\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport { history } from 'helpers';\r\nimport './style.scss';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport { CreateAppointment, updateForm } from 'redux/actions/appointment';\r\nimport { Scheduler } from './Scheduler';\r\n\r\nconst data = [\r\n    { start_date: '2020-06-09 4:00', end_date: '2020-06-09 6:00', text: 'Event 1', id: 1 },\r\n    { start_date: '2020-06-11 8:00', end_date: '2020-06-11 10:00', text: 'Event 2', id: 2 },\r\n    { start_date: '2020-06-12 12:00', end_date: '2018-06-12 14:00', text: 'dblclick me!', id: 3 }\r\n];\r\n\r\nexport class SchedulerClass extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.child = React.createRef();\r\n      }\r\n    state = {\r\n\r\n        events: [],\r\n\r\n        formField: {\r\n            search: \"\",\r\n            menuOption: \"\",\r\n            menuId: \"\",\r\n            appointmentDate: new Date()\r\n        },\r\n        list: [],\r\n        filterDate: new Date(),\r\n        filterType: 'day',\r\n        selectedId: \"\",\r\n        menuOption: [\r\n            { lable: \"Name\", value: \"name\" }\r\n        ],\r\n        dayWeekMonth: \"day\"\r\n    }\r\n\r\n    componentWillMount = async() => {\r\n        this.validator = new SimpleReactValidator({\r\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\r\n            autoForceUpdate: this,\r\n        });\r\n        let { brachList, appointment, formField, filterDate } = this.state;\r\n        this.props.getCommonApi(`treatment/Outlet/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    // brachList.push({ value: value.id, label: value.itemsite_desc })\r\n                }\r\n                this.setState({ brachList })\r\n                // console.log(brachList, \"jhksdfkjsdhfks\")\r\n            }\r\n        })\r\n        this.getAvailability()\r\n        if(this.props.selectedDate){\r\n            await this.setState({\r\n                filterDate: this.props.selectedDate\r\n            })\r\n        }\r\n        this.getAppointment();\r\n    }\r\n\r\n    getAvailability = () => {\r\n        let { filterDate } = this.state;\r\n        this.setState({ list: [] })\r\n        this.props.getCommonApi(`staffsavailable/?Appt_date=${dateFormat(filterDate, \"yyyy-mm-dd\")}`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                // for (let value of data) {\r\n                //     staffList.push({ value: value.id, label: value.emp_name })\r\n                // }\r\n                this.setState({ list: data })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleAppointmentOpen = (id, e) => {\r\n        console.log(e, id, \"hgjsydfisuyfsdfm ==== handleAppointmentOpen\");\r\n    }\r\n\r\n    handleEmptyEvent = async (date, e) => {\r\n        let { customerDetail } = this.props;\r\n        let { formField } = this.state;\r\n        // if (this.validator.allValid()) {\r\n        let time = new Date(date)\r\n        formField['time'] = time.getHours() > 9 ? (time.getHours() + \":00\") : (\"0\" + time.getHours()) + \":00\";\r\n        await this.setState({ formField });\r\n        console.log(date, e, \"hgjsydfisuyfsdfm ==== handleEmptyEvent\", time.getHours);\r\n        await this.props.updateForm('basicApptDetail', formField);\r\n        history.push(`/admin/appointment/create`)\r\n        // console.log(date, e, \"hgjsydfisuyfsdfm ====\");\r\n        // } else {\r\n        //     this.validator.showMessages();\r\n        // }\r\n\r\n    }\r\n\r\n    getAppointment = () => {\r\n        let { brachList, events, formField, filterType, filterDate } = this.state;\r\n        this.props.getCommonApi(`appointmentcalender/?date=${dateFormat(filterDate, \"yyyy-mm-dd\")}&check=${filterType}`).then(async (key) => {\r\n            let { status, data } = key;\r\n            events = [];\r\n            if (status === 200) {\r\n                await this.setState({ events: null })\r\n                events = data;\r\n                await this.setState({ events })\r\n                // console.log(events, \"jhksdfkjsdhfks\", key)\r\n            }\r\n        })\r\n    }\r\n    handleChangeFilter = async (prevMode, prevDate, newMode, newDate) => {\r\n\r\n        let { filterDate, filterType } = this.state;\r\n        filterDate = newDate;\r\n        filterType = newMode;\r\n        await this.setState({\r\n            filterDate,\r\n            filterType\r\n        })\r\n        this.getAvailability();\r\n        this.getAppointment()\r\n    }\r\n\r\n    handleChange = async ({ target: { value, name } }) => {\r\n        let { formField } = this.state;\r\n        formField[name] = value;\r\n        await this.setState({\r\n            formField,\r\n        });\r\n        if (name === \"branchId\") {\r\n            this.getAvailability();\r\n            this.getAppointment();\r\n        }\r\n        // console.log(formField, \"afasfasdfdfasd\")\r\n        this.props.updateForm('basicApptDetail', formField);\r\n    };\r\n\r\n    handleDelete = async (id, event) => {\r\n        let { selectedId } = this.state;\r\n        console.log(id, \"===afasfasdfdfasd=====\", selectedId)\r\n        if (id !== selectedId) {\r\n            await this.setState({\r\n                selectedId: id\r\n            })\r\n            await this.props.commonDeleteApi(`appointment/${id}/`).then((res) => {\r\n\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    handleDatePick = async (name, value) => {\r\n        let { filterDate } = this.state;\r\n        filterDate = value;\r\n        await this.setState({\r\n            filterDate,\r\n        });\r\n        this.props.handleFilterChange(value)\r\n        this.child.handleAppointment(value);\r\n        this.getAppointment();\r\n    };\r\n\r\n    openDetail = (id) => {\r\n        history.push(`/admin/appointment/${id}/detail`)\r\n    }\r\n\r\n    handleChangeView = (data) => {\r\n        let { dayWeekMonth } = this.state;\r\n        dayWeekMonth = data;\r\n        this.setState({\r\n            dayWeekMonth\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let { appointment, brachList, branchId, formField, list, events, filterType, menuOption, dayWeekMonth, filterDate } = this.state;\r\n        let { search, menuId, appointmentDate } = formField;\r\n        return (\r\n            <div className=\"row define-height px-3\">\r\n                <div className=\"col-4 day-week-month filter-date d-flex pl-2 \">\r\n                <div className=\"input-group py-3\">\r\n                        <NormalDateTime\r\n                            onChange={this.handleDatePick}\r\n                            inputcol=\"p-0 inTime\"\r\n                            value={filterDate ? (new Date(filterDate)): new Date()}\r\n                            name=\"cust_dob\"\r\n                            className=\"dob-pick\"\r\n                            showYearDropdown={true}\r\n                            dateFormat=\"MM/dd/yyyy\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-8 day-week-month d-flex pl-2 \">\r\n                    <div onClick={this.props.handleBack} className={`menu my-3 ${dayWeekMonth === 'day' ? \"active\" : \"\"}`}>Back</div>\r\n                    {/* <div onClick={() => this.handleChangeView('week')} className={`menu ${dayWeekMonth === 'week' ? \"active\" : \"\"}`}>Week</div>\r\n                    <div onClick={() => this.handleChangeView('month')} className={`menu ${dayWeekMonth === 'month' ? \"active\" : \"\"}`}>Month</div> */}\r\n                </div>\r\n                    <Scheduler data={events} filterDate={filterDate} onRef={ref => (this.child = ref)}></Scheduler>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    customerDetail: state.appointment.customerDetail,\r\n    customerList: state.common.customerList,\r\n    multipleCustomerForm: state.appointment.multipleCustomerForm\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        getCustomer,\r\n        getCommonApi,\r\n        updateForm,\r\n        commonDeleteApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const Calander = connect(mapStateToProps, mapDispatchToProps)(SchedulerClass)"]},"metadata":{},"sourceType":"module"}