{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\Inventory\\\\InventoryMainPage\\\\InventoryList.js\";\nimport React, { Component } from \"react\";\nimport { NormalInput, NormalSelect, NormalButton, NormalDate, NormalModal, TableWrapper } from \"component/common\";\nimport { Toast } from \"service/toast\";\nimport { getCommonApi, commonPatchApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport closeIcon from \"assets/images/close.png\";\nimport { CreateNewInventory } from \"./Model\";\nimport \"./style.scss\";\nimport { withTranslation } from \"react-i18next\";\nexport class InventoryListClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searchDate: new Date(),\n      stockMemoList: [],\n      meta: {},\n      stockMemoListHeader: [{\n        label: \"Date\"\n      }, {\n        label: \"Product\"\n      }, {\n        label: \"Employee\"\n      }, {\n        label: \"Qty\"\n      }, {\n        label: \"UOM\"\n      }, {\n        label: \"Remark\"\n      }, {\n        label: \"Reversal\"\n      }],\n      isCreateNewInventoryPopup: false,\n      isReversalPopup: false,\n      stockMemoId: 0,\n      reversalqty: 0,\n      qty: 0\n    };\n\n    this.componentDidMount = () => {\n      this.getstockMemoList({});\n    };\n\n    this.getstockMemoList = data => {\n      let {\n        searchDate\n      } = this.state;\n      let {\n        page = 1,\n        limit = 10,\n        search = \"\"\n      } = data;\n      this.props.getCommonApi(`stockusagememo/?date=${dateFormat(searchDate)}&page=${page}&limit=${limit}`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          if (data) {\n            this.setState({\n              stockMemoList: data.dataList,\n              meta: data.meta.pagination\n            });\n          }\n        }\n      });\n    };\n\n    this.handleDateChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      await this.setState({\n        [name]: value\n      });\n      this.getstockMemoList({});\n    };\n\n    this.handlePagination = page => {\n      this.getstockMemoList(page);\n    };\n\n    this.handleCreateNewPopup = async () => {\n      await this.setState(prevState => ({\n        isCreateNewInventoryPopup: !prevState.isCreateNewInventoryPopup\n      }));\n    };\n\n    this.handleCreateNewSave = () => {\n      this.handleCreateNewPopup();\n      this.getstockMemoList({});\n    };\n\n    this.handleReversalPopup = async () => {\n      await this.setState(prevState => ({\n        isReversalPopup: !prevState.isReversalPopup\n      }));\n    };\n\n    this.handleReversal = async data => {\n      await this.setState({\n        stockMemoId: 0,\n        qty: 0,\n        reversalqty: 0\n      });\n      await this.setState({\n        stockMemoId: data.id,\n        qty: data.qty\n      });\n      this.handleReversalPopup();\n    };\n\n    this.handleReversalSubmitClick = () => {\n      let {\n        reversalqty,\n        qty\n      } = this.state;\n\n      if (reversalqty <= 0 || reversalqty == \"\" || reversalqty > qty) {\n        Toast({\n          type: \"error\",\n          message: \"Please enter valid Qty!\"\n        });\n      } else {\n        this.handleReversalUpdate();\n      }\n    };\n\n    this.handleReversalUpdate = () => {\n      let {\n        reversalqty,\n        stockMemoId\n      } = this.state;\n      let data = {\n        quantity: Number(reversalqty)\n      };\n      this.props.commonPatchApi(`stockusagememo/${stockMemoId}/`, data).then(async res => {\n        console.log(res);\n\n        if (res.status === 200) {\n          this.handleReversalPopup();\n          this.getstockMemoList({});\n        }\n      });\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      await this.setState({\n        [name]: value\n      });\n    };\n  }\n\n  render() {\n    let {\n      searchDate,\n      stockMemoList,\n      stockMemoListHeader,\n      isCreateNewInventoryPopup,\n      meta,\n      isReversalPopup,\n      qty,\n      reversalqty\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 p-0 m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalDate, {\n      value: new Date(searchDate),\n      name: \"searchDate\",\n      type: \"date\",\n      onChange: this.handleDateChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"col-3\",\n      mainbg: true,\n      className: \"col-12 ml-4 fs-15 \",\n      label: \"Add New\",\n      onClick: this.handleCreateNewPopup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container table-responsive mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: stockMemoListHeader,\n      queryHandler: this.handlePagination,\n      pageMeta: meta,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, stockMemoList && stockMemoList.length > 0 ? stockMemoList.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        className: \"w-100\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 27\n        }\n      }, item.date_out)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 27\n        }\n      }, item.item_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 27\n        }\n      }, item.staff_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 27\n        }\n      }, item.qty)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 27\n        }\n      }, item.uom)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 27\n        }\n      }, item.memo_remarks)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(NormalButton, {\n        mainbg: true,\n        className: \"col-12 fs-15 \",\n        label: \"Reversal\",\n        onClick: () => this.handleReversal(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 29\n        }\n      }))));\n    }) : null), isReversalPopup ? /*#__PURE__*/React.createElement(NormalModal, {\n      className: \"select-category Treatment-usage\",\n      style: {\n        minWidth: \"25%\"\n      },\n      modal: isReversalPopup,\n      handleModal: this.handleReversalPopup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: this.handleReversalPopup,\n      className: \"close\",\n      src: closeIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex h5 justify-content-center p-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, \"Reversal\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row p-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 21\n      }\n    }, \"Qty\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: qty,\n      name: \"qty\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 23\n      }\n    }, \"Reversal Qty\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error-message text-danger validNo fs-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 25\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: reversalqty,\n      name: \"reversalqty\",\n      onChange: this.handleChange,\n      type: `number`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center p-4 w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 ml-4 fs-15 \",\n      label: \"Submit\",\n      onClick: this.handleReversalSubmitClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 23\n      }\n    }))))) : null, isCreateNewInventoryPopup ? /*#__PURE__*/React.createElement(CreateNewInventory, {\n      isCreateNewInventoryPopup: isCreateNewInventoryPopup,\n      handleCreateNewPopup: this.handleCreateNewPopup,\n      handleCreateNewSave: this.handleCreateNewSave,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 15\n      }\n    }) : null)));\n  }\n\n}\n\nconst mapStateToProps = state => ({});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    commonPatchApi\n  }, dispatch);\n};\n\nexport const InventoryList = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(InventoryListClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Inventory/InventoryMainPage/InventoryList.js"],"names":["React","Component","NormalInput","NormalSelect","NormalButton","NormalDate","NormalModal","TableWrapper","Toast","getCommonApi","commonPatchApi","connect","bindActionCreators","dateFormat","closeIcon","CreateNewInventory","withTranslation","InventoryListClass","state","searchDate","Date","stockMemoList","meta","stockMemoListHeader","label","isCreateNewInventoryPopup","isReversalPopup","stockMemoId","reversalqty","qty","componentDidMount","getstockMemoList","data","page","limit","search","props","then","key","status","setState","dataList","pagination","handleDateChange","target","value","name","handlePagination","handleCreateNewPopup","prevState","handleCreateNewSave","handleReversalPopup","handleReversal","id","handleReversalSubmitClick","type","message","handleReversalUpdate","quantity","Number","res","console","log","handleChange","render","length","map","item","index","date_out","item_name","staff_name","uom","memo_remarks","minWidth","mapStateToProps","mapDispatchToProps","dispatch","InventoryList"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalInput,\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalDate,\r\n  NormalModal,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { Toast } from \"service/toast\";\r\nimport { getCommonApi, commonPatchApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { CreateNewInventory } from \"./Model\";\r\nimport \"./style.scss\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class InventoryListClass extends Component {\r\n  state = {\r\n    searchDate: new Date(),\r\n    stockMemoList: [],\r\n    meta: {},\r\n    stockMemoListHeader: [\r\n      { label: \"Date\" },\r\n      { label: \"Product\" },\r\n      { label: \"Employee\" },\r\n      { label: \"Qty\" },\r\n      { label: \"UOM\" },\r\n      { label: \"Remark\" },\r\n      { label: \"Reversal\" },\r\n    ],\r\n    isCreateNewInventoryPopup: false,\r\n    isReversalPopup: false,\r\n    stockMemoId: 0,\r\n    reversalqty: 0,\r\n    qty: 0,\r\n  };\r\n  componentDidMount = () => {\r\n    this.getstockMemoList({});\r\n  };\r\n\r\n  getstockMemoList = data => {\r\n    let { searchDate } = this.state;\r\n    let { page = 1, limit = 10, search = \"\" } = data;\r\n    this.props\r\n      .getCommonApi(\r\n        `stockusagememo/?date=${dateFormat(\r\n          searchDate\r\n        )}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          if (data) {\r\n            this.setState({\r\n              stockMemoList: data.dataList,\r\n              meta: data.meta.pagination,\r\n            });\r\n          }\r\n        }\r\n      });\r\n  };\r\n  handleDateChange = async ({ target: { value, name } }) => {\r\n    await this.setState({\r\n      [name]: value,\r\n    });\r\n    this.getstockMemoList({});\r\n  };\r\n  handlePagination = page => {\r\n    this.getstockMemoList(page);\r\n  };\r\n\r\n  handleCreateNewPopup = async () => {\r\n    await this.setState(prevState => ({\r\n      isCreateNewInventoryPopup: !prevState.isCreateNewInventoryPopup,\r\n    }));\r\n  };\r\n  handleCreateNewSave = () => {\r\n    this.handleCreateNewPopup();\r\n    this.getstockMemoList({});\r\n  };\r\n  handleReversalPopup = async () => {\r\n    await this.setState(prevState => ({\r\n      isReversalPopup: !prevState.isReversalPopup,\r\n    }));\r\n  };\r\n\r\n  handleReversal = async data => {\r\n    await this.setState({\r\n      stockMemoId: 0,\r\n      qty: 0,\r\n      reversalqty: 0,\r\n    });\r\n    await this.setState({\r\n      stockMemoId: data.id,\r\n      qty: data.qty,\r\n    });\r\n    this.handleReversalPopup();\r\n  };\r\n  handleReversalSubmitClick = () => {\r\n    let { reversalqty, qty } = this.state;\r\n    if (reversalqty <= 0 || reversalqty == \"\" || reversalqty > qty) {\r\n      Toast({ type: \"error\", message: \"Please enter valid Qty!\" });\r\n    } else {\r\n      this.handleReversalUpdate();\r\n    }\r\n  };\r\n  handleReversalUpdate = () => {\r\n    let { reversalqty, stockMemoId } = this.state;\r\n    let data = { quantity: Number(reversalqty) };\r\n    this.props\r\n      .commonPatchApi(`stockusagememo/${stockMemoId}/`, data)\r\n      .then(async res => {\r\n        console.log(res);\r\n        if (res.status === 200) {\r\n          this.handleReversalPopup();\r\n          this.getstockMemoList({});\r\n        }\r\n      });\r\n  };\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    await this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  render() {\r\n    let {\r\n      searchDate,\r\n      stockMemoList,\r\n      stockMemoListHeader,\r\n      isCreateNewInventoryPopup,\r\n      meta,\r\n      isReversalPopup,\r\n      qty,\r\n      reversalqty,\r\n    } = this.state;\r\n    return (\r\n      <>\r\n        <div className=\"row mt-3\">\r\n          <div className=\"col-6 p-0 m-0\">\r\n            <div className=\"col-3 p-0\">\r\n              <div className=\"\">\r\n                <NormalDate\r\n                  value={new Date(searchDate)}\r\n                  name=\"searchDate\"\r\n                  type=\"date\"\r\n                  onChange={this.handleDateChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-6 mb-3\">\r\n            <div className=\"d-flex justify-content-end\">\r\n              <NormalButton\r\n                buttonClass={\"col-3\"}\r\n                mainbg={true}\r\n                className=\"col-12 ml-4 fs-15 \"\r\n                label=\"Add New\"\r\n                onClick={this.handleCreateNewPopup}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"table-container table-responsive mt-3\">\r\n            <TableWrapper\r\n              headerDetails={stockMemoListHeader}\r\n              queryHandler={this.handlePagination}\r\n              pageMeta={meta}\r\n            >\r\n              {stockMemoList && stockMemoList.length > 0\r\n                ? stockMemoList.map((item, index) => {\r\n                    return (\r\n                      <tr className=\"w-100\" key={index}>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {item.date_out}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {item.item_name}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {item.staff_name}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {item.qty}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {item.uom}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {item.memo_remarks}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            <NormalButton\r\n                              mainbg={true}\r\n                              className=\"col-12 fs-15 \"\r\n                              label=\"Reversal\"\r\n                              onClick={() => this.handleReversal(item)}\r\n                            />\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                : null}\r\n            </TableWrapper>\r\n            {isReversalPopup ? (\r\n              <NormalModal\r\n                className={\"select-category Treatment-usage\"}\r\n                style={{ minWidth: \"25%\" }}\r\n                modal={isReversalPopup}\r\n                handleModal={this.handleReversalPopup}\r\n              >\r\n                <img\r\n                  onClick={this.handleReversalPopup}\r\n                  className=\"close\"\r\n                  src={closeIcon}\r\n                  alt=\"\"\r\n                />\r\n                <div className=\"d-flex h5 justify-content-center p-1\">\r\n                  Reversal\r\n                </div>\r\n                <div className=\"row p-3\">\r\n                  <div className=\"col-4 mb-3\">\r\n                    <label className=\"text-left text-black common-label-text \">\r\n                      Qty\r\n                    </label>\r\n                    <div className=\"input-group\">\r\n                      <NormalInput value={qty} name=\"qty\" disabled />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"col-4 mb-3\">\r\n                    <div>\r\n                      <label className=\"text-left text-black common-label-text \">\r\n                        Reversal Qty\r\n                        <span className=\"error-message text-danger validNo fs-16\">\r\n                          *\r\n                        </span>\r\n                      </label>\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                      <NormalInput\r\n                        value={reversalqty}\r\n                        name=\"reversalqty\"\r\n                        onChange={this.handleChange}\r\n                        type={`number`}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-4 mb-3\">\r\n                    <div className=\"d-flex justify-content-center p-4 w-100\">\r\n                      <NormalButton\r\n                        mainbg={true}\r\n                        className=\"col-12 ml-4 fs-15 \"\r\n                        label=\"Submit\"\r\n                        onClick={this.handleReversalSubmitClick}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </NormalModal>\r\n            ) : null}\r\n            {isCreateNewInventoryPopup ? (\r\n              <CreateNewInventory\r\n                isCreateNewInventoryPopup={isCreateNewInventoryPopup}\r\n                handleCreateNewPopup={this.handleCreateNewPopup}\r\n                handleCreateNewSave={this.handleCreateNewSave}\r\n              />\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const InventoryList = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(InventoryListClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}