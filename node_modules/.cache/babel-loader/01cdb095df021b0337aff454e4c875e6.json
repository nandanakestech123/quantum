{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NewSchedulerModal}from\"component/common/Plugins/NewScheduler\";// import BigSchedulerModal from 'component/common/Plugins/BigScheduler';\nimport{getCustomer,getCommonApi,commonDeleteApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";// import timeOption from 'data/timeOption.json'\nimport{dateFormat}from\"service/helperFunctions\";import{history}from\"helpers\";import\"./style.scss\";import SimpleReactValidator from\"simple-react-validator\";import{CreateAppointment,updateForm}from\"redux/actions/appointment\";import{NewCreateAppointment}from\"../../NewCreateAppointment/index\";import{LoadPanel}from\"devextreme-react/load-panel\";import moment from\"moment\";import{isMobile}from\"react-device-detect\";export var SchedulerClass=/*#__PURE__*/function(_Component){_inherits(SchedulerClass,_Component);var _super=_createSuper(SchedulerClass);function SchedulerClass(){var _this;_classCallCheck(this,SchedulerClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={appointment:[{time:\"10.00 AM,\",date:\"Wednesday, 1st April, 2020\",name:\"Benjamin\",treatment:\"Head Massage\"},{time:\"12.00 PM,\",date:\"Wednesday, 1st April, 2020\",name:\"Daniel\",treatment:\"Pedicure\"},{time:\"1.00 PM,\",date:\"Wednesday, 1st April, 2020\",name:\"John\",treatment:\"Haircut\"},{time:\"2.00 PM,\",date:\"Wednesday, 1st April, 2020\",name:\"Josua\",treatment:\"Manicure\"},{time:\"4.00 PM, \",date:\"Wednesday, 1st April, 2020\",name:\"Derrik\",treatment:\"Body Massage\"}],events:[],brachList:[],formField:{branchId:\"\",time:\"\",staff_id:\"\"},list:[],filterDate:new Date(),filterType:\"day\",selectedId:\"\",staffList:[],page:1,meta:[],searchtext:\"\",staffSortlist:[],isOpenModal:false,loadPanelVisible:false,showIndicator:true,shading:true,showPane:true,groupByType:\"staff\",SchedulerSetting:{settingId:0,startday_hour:\"\",endday_hour:\"\",cell_duration:\"\",resource_count:\"\"}};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});};_this.componentDidMount=function(){_this.getSettingInfo();};_this.getSettingInfo=function(){var SchedulerSetting=_this.state.SchedulerSetting;_this.props.getCommonApi(\"siteappointsetting/\").then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var status,data,_this$state,filterDate,filterType;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=key.status,data=key.data;console.log(key,\"siteappointsetting\");if(!(status==\"200\")){_context.next=16;break;}if(!data){_context.next=16;break;}SchedulerSetting[\"settingId\"]=data[0].id;SchedulerSetting[\"startday_hour\"]=data[0].startday_hour?Number(data[0].startday_hour):8;SchedulerSetting[\"endday_hour\"]=data[0].endday_hour?Number(data[0].endday_hour):21;SchedulerSetting[\"cell_duration\"]=data[0].cell_duration?Number(data[0].cell_duration):15;if(isMobile){SchedulerSetting[\"resource_count\"]=2;}else{SchedulerSetting[\"resource_count\"]=data[0].resource_count?Number(data[0].resource_count):5;}console.log(SchedulerSetting,\"siteappointsettingafterrender\");_context.next=12;return _this.setState({SchedulerSetting:SchedulerSetting});case 12:_context.next=14;return _this.props.updateForm(\"SchedulerSetting\",SchedulerSetting);case 14:_this$state=_this.state,filterDate=_this$state.filterDate,filterType=_this$state.filterType;// this.props\n//   .getCommonApi(\n//     `customeroutstanding/?date=${dateFormat(\n//       filterDate\n//     )}&check=${filterType}`\n//   )\n//   .then(key => {});\n_this.getAppointmentWithStaff();case 16:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.getHoursFromDate=function(date){var hour=date.getHours();var minute=date.getMinutes();var hours=hour>9?hour:\"0\"+hour;var minutes;if(minute<15){minutes=\"00\";}else if(minute>=15&&minute<30){minutes=\"15\";}else if(minute>=30&&minute<45){minutes=\"30\";}else if(minute>=45&&minute<59){minutes=\"45\";}return hours+\":\"+minutes;};_this.handleEmptyEvent=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(date,e){var customerDetail,formField,time;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:customerDetail=_this.props.customerDetail;formField=_this.state.formField;time=new Date(date);formField[\"time\"]=_this.getHoursFromDate(time);formField[\"date\"]=date;formField[\"appt_id\"]=0;if(e.groups){formField[\"staff_id\"]=e.groups.id;}if(e.appt_id){formField[\"appt_id\"]=e.appt_id;}_context2.next=10;return _this.setState({formField:formField});case 10:console.log(date,e,\"hgjsydfisuyfsdfm ==== handleEmptyEvent\",time.getHours);_context2.next=13;return _this.props.updateForm(\"basicApptDetail\",formField);case 13:_context2.next=15;return _this.setState({isOpenModal:true});case 15:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this.handleCloseDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.props.updateForm(\"treatmentList\",[]);case 2:_context3.next=4;return _this.props.updateForm(\"basicApptDetail\",{});case 4:_context3.next=6;return _this.props.updateForm(\"appointmentCustomerDetail\",{});case 6:_context3.next=8;return _this.setState({isOpenModal:false});case 8:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleChangeFilter=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(prevMode,prevDate,newMode,newDate,search){var _this$state2,filterDate,filterType,searchtext;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$state2=_this.state,filterDate=_this$state2.filterDate,filterType=_this$state2.filterType,searchtext=_this$state2.searchtext;filterDate=newDate;filterType=newMode;searchtext=search;_context4.next=6;return _this.setState({filterDate:filterDate,filterType:filterType,searchtext:searchtext});case 6://if (newMode === \"day\" || newMode === \"week\") {\n// this.props\n//   .getCommonApi(\n//     `customeroutstanding/?date=${dateFormat(newDate)}&check=${newMode}`\n//   )\n//   .then(key => {});\n//}\nconsole.log(\"dfhgfhjhjghjdfhg\",prevMode,prevDate,newMode,newDate);if(prevMode!==newMode||prevDate!==newDate){_this.getAppointmentWithStaff();}case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4,_x5,_x6,_x7,_x8){return _ref4.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref5){var _ref5$target,value,name,formField;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;formField=_this.state.formField;formField[name]=value;_context5.next=5;return _this.setState({formField:formField});case 5:if(name===\"branchId\"){_this.getAppointmentWithStaff();}_this.props.updateForm(\"basicApptDetail\",formField);case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x9){return _ref6.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id,event){var selectedId;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:selectedId=_this.state.selectedId;console.log(id,\"===afasfasdfdfasd=====\",selectedId);if(!(id!==selectedId)){_context6.next=7;break;}_context6.next=5;return _this.setState({selectedId:id});case 5:_context6.next=7;return _this.props.commonDeleteApi(\"appointment/\".concat(id,\"/\")).then(function(res){});case 7:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x10,_x11){return _ref7.apply(this,arguments);};}();_this.handleOpenStaff=function(one,two,three){console.log(\"namdfsfgsghsfghf\",one,two,three);var filterDate=_this.state.filterDate;_this.props.handleOpen(filterDate);};_this.getAppointmentWithStaff=function(){_this.setState({loadPanelVisible:true},function(){var _this$state3=_this.state,filterDate=_this$state3.filterDate,filterType=_this$state3.filterType,page=_this$state3.page,searchtext=_this$state3.searchtext,staffList=_this$state3.staffList,events=_this$state3.events,meta=_this$state3.meta,groupByType=_this$state3.groupByType;_this.props.getCommonApi(\"empappointmentview/?date=\".concat(dateFormat(filterDate),\"&check=\").concat(filterType,\"&page=\").concat(page,\"&limit=\").concat(Number(_this.props.SchedulerSetting.resource_count),\"&search=\").concat(searchtext,\"&type=\").concat(groupByType)).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(key){var status,data,event;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:console.log(\"starttime: \",moment(new Date(),\"DD/MM/YYYY HH:mm:ss\"));status=key.status,data=key.data,event=key.event;setTimeout(_this.hideLoadPanel);if(!(status===200)){_context7.next=14;break;}if(!data){_context7.next=14;break;}staffList=[];if(data.dataList.length>0){staffList=data.dataList;}events=[];meta=[];//this.setState({ events, meta });\nmeta=data.meta;//events = event;\nif(event.length>0){events=event;// event.forEach(cell => {\n//   let filterList = events.find(\n//     Appoint =>\n//       Appoint.linkcode === cell.linkcode &&\n//       Appoint.id === cell.id &&\n//       Appoint.cust_id === cell.cust_id &&\n//       (Appoint.endDate === cell.startDate ||\n//         Appoint.startDate === cell.endDate)\n//   );\n//   if (filterList) {\n//     if (filterList.startDate < cell.startDate) {\n//       filterList[\"startDate\"] = filterList.startDate;\n//     } else {\n//       filterList[\"startDate\"] = cell.startDate;\n//     }\n//     if (filterList.endDate > cell.endDate) {\n//       filterList[\"endDate\"] = filterList.endDate;\n//     } else {\n//       filterList[\"endDate\"] = cell.endDate;\n//     }\n//     filterList[\"appt_remark\"] =\n//       filterList.appt_remark + \" \" + \"/\" + \" \" + cell.appt_remark;\n//     filterList[\"Merged\"] = true;\n//     this.setState({ ...this.state.events, filterList });\n//   } else {\n//     events.push(cell);\n//     this.setState({ ...events, events });\n//   }\n// });\n}_context7.next=13;return _this.setState({events:events,meta:meta,staffList:staffList});case 13:console.log(\"endtime: \",moment(new Date(),\"DD/MM/YYYY HH:mm:ss\"));// await this.setState({ events, staffList, meta });\n//console.log(event, \"appointment cell data\");\ncase 14:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x12){return _ref8.apply(this,arguments);};}());});};_this.handleNext=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var page;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:page=_this.state.page;page=page+1;_context8.next=4;return _this.setState({page:page});case 4:if(page>0){_this.getAppointmentWithStaff();}case 5:case\"end\":return _context8.stop();}}},_callee8);}));_this.handleBack=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var page;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:page=_this.state.page;page=page-1;_context9.next=4;return _this.setState({page:page});case 4:if(page>0){_this.getAppointmentWithStaff();}case 5:case\"end\":return _context9.stop();}}},_callee9);}));_this.hideLoadPanel=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var loadPanelVisible;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:loadPanelVisible=Object.assign({},_this.state.loadPanelVisible);loadPanelVisible=false;_context10.next=4;return _this.setState({loadPanelVisible:loadPanelVisible});case 4:case\"end\":return _context10.stop();}}},_callee10);}));_this.groupByAppointment=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(groupBy){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this.setState({groupByType:groupBy});case 2:_this.getAppointmentWithStaff();case 3:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x13){return _ref12.apply(this,arguments);};}();_this.timeToMins=function(time){var b=time.split(\":\");return b[0]*60+ +b[1];};return _this;}_createClass(SchedulerClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state4=this.state,appointment=_this$state4.appointment,brachList=_this$state4.brachList,branchId=_this$state4.branchId,formField=_this$state4.formField,list=_this$state4.list,events=_this$state4.events,filterType=_this$state4.filterType,filterDate=_this$state4.filterDate,staffList=_this$state4.staffList,meta=_this$state4.meta,searchtext=_this$state4.searchtext,staffSortlist=_this$state4.staffSortlist,isLoading=_this$state4.isLoading,isOpenModal=_this$state4.isOpenModal,SchedulerSetting=_this$state4.SchedulerSetting;return/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0\",id:\"appointment\"},/*#__PURE__*/React.createElement(LoadPanel,{shadingColor:\"rgba(0,0,0,0.4)\",position:\"center\",onHiding:this.hideLoadPanel,visible:this.state.loadPanelVisible,showIndicator:this.state.showIndicator,shading:this.state.shading,showPane:this.state.showPane}),/*#__PURE__*/React.createElement(\"div\",{className:\"scheduler-container pr-0\"},/*#__PURE__*/React.createElement(NewSchedulerModal,{staffList:this.state.staffList,meta:this.state.meta,event:this.state.events,onEmptyClick:function onEmptyClick(date,e){return _this2.handleEmptyEvent(date,e);},handleChangeFilter:this.handleChangeFilter,filterType:filterType,filterDate:filterDate,searchtext:searchtext,onDeleteEvent:this.handleDelete,handleBack:this.handleBack,handleNext:this.handleNext,staffSortlist:this.state.staffSortlist,getAppointmentWithStaff:this.getAppointmentWithStaff,groupByAppointment:function groupByAppointment(groupBy){return _this2.groupByAppointment(groupBy);},handleAppointmentSetting:this.getSettingInfo})),/*#__PURE__*/React.createElement(NewCreateAppointment,{isOpenModal:isOpenModal,handleCloseDialog:this.handleCloseDialog,handleSaveorUpdate:this.getAppointmentWithStaff}));}}]);return SchedulerClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,customerList:state.common.customerList,multipleCustomerForm:state.appointment.multipleCustomerForm,SchedulerSetting:state.appointment.SchedulerSetting};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomer:getCustomer,getCommonApi:getCommonApi,updateForm:updateForm,commonDeleteApi:commonDeleteApi},dispatch);};export var Scheduler=connect(mapStateToProps,mapDispatchToProps)(SchedulerClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/NewAppointment/NewListAppointment/Scheduler/index.js"],"names":["React","Component","NewSchedulerModal","getCustomer","getCommonApi","commonDeleteApi","connect","bindActionCreators","dateFormat","history","SimpleReactValidator","CreateAppointment","updateForm","NewCreateAppointment","LoadPanel","moment","isMobile","SchedulerClass","state","appointment","time","date","name","treatment","events","brachList","formField","branchId","staff_id","list","filterDate","Date","filterType","selectedId","staffList","page","meta","searchtext","staffSortlist","isOpenModal","loadPanelVisible","showIndicator","shading","showPane","groupByType","SchedulerSetting","settingId","startday_hour","endday_hour","cell_duration","resource_count","componentWillMount","validator","element","message","autoForceUpdate","componentDidMount","getSettingInfo","props","then","key","status","data","console","log","id","Number","setState","getAppointmentWithStaff","getHoursFromDate","hour","getHours","minute","getMinutes","hours","minutes","handleEmptyEvent","e","customerDetail","groups","appt_id","handleCloseDialog","handleChangeFilter","prevMode","prevDate","newMode","newDate","search","handleChange","target","value","handleDelete","event","res","handleOpenStaff","one","two","three","handleOpen","setTimeout","hideLoadPanel","dataList","length","handleNext","handleBack","Object","assign","groupByAppointment","groupBy","timeToMins","b","split","isLoading","mapStateToProps","customerList","common","multipleCustomerForm","mapDispatchToProps","dispatch","Scheduler"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NewSchedulerModal } from \"component/common/Plugins/NewScheduler\";\r\n// import BigSchedulerModal from 'component/common/Plugins/BigScheduler';\r\n\r\nimport {\r\n  getCustomer,\r\n  getCommonApi,\r\n  commonDeleteApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\n// import timeOption from 'data/timeOption.json'\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { history } from \"helpers\";\r\nimport \"./style.scss\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { CreateAppointment, updateForm } from \"redux/actions/appointment\";\r\nimport { NewCreateAppointment } from \"../../NewCreateAppointment/index\";\r\nimport { LoadPanel } from \"devextreme-react/load-panel\";\r\nimport moment from \"moment\";\r\nimport { isMobile } from \"react-device-detect\";\r\n\r\nexport class SchedulerClass extends Component {\r\n  state = {\r\n    appointment: [\r\n      {\r\n        time: \"10.00 AM,\",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"Benjamin\",\r\n        treatment: \"Head Massage\",\r\n      },\r\n      {\r\n        time: \"12.00 PM,\",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"Daniel\",\r\n        treatment: \"Pedicure\",\r\n      },\r\n      {\r\n        time: \"1.00 PM,\",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"John\",\r\n        treatment: \"Haircut\",\r\n      },\r\n      {\r\n        time: \"2.00 PM,\",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"Josua\",\r\n        treatment: \"Manicure\",\r\n      },\r\n      {\r\n        time: \"4.00 PM, \",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"Derrik\",\r\n        treatment: \"Body Massage\",\r\n      },\r\n    ],\r\n    events: [],\r\n    brachList: [],\r\n    formField: {\r\n      branchId: \"\",\r\n      time: \"\",\r\n      staff_id: \"\",\r\n    },\r\n    list: [],\r\n    filterDate: new Date(),\r\n    filterType: \"day\",\r\n    selectedId: \"\",\r\n    staffList: [],\r\n    page: 1,\r\n    meta: [],\r\n    searchtext: \"\",\r\n    staffSortlist: [],\r\n    isOpenModal: false,\r\n    loadPanelVisible: false,\r\n    showIndicator: true,\r\n    shading: true,\r\n    showPane: true,\r\n    groupByType: \"staff\",\r\n    SchedulerSetting: {\r\n      settingId: 0,\r\n      startday_hour: \"\",\r\n      endday_hour: \"\",\r\n      cell_duration: \"\",\r\n      resource_count: \"\",\r\n    },\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n  componentDidMount = () => {\r\n    this.getSettingInfo();\r\n  };\r\n  getSettingInfo = () => {\r\n    let { SchedulerSetting } = this.state;\r\n    this.props.getCommonApi(`siteappointsetting/`).then(async key => {\r\n      let { status, data } = key;\r\n      console.log(key, \"siteappointsetting\");\r\n      if (status == \"200\") {\r\n        if (data) {\r\n          SchedulerSetting[\"settingId\"] = data[0].id;\r\n          SchedulerSetting[\"startday_hour\"] = data[0].startday_hour\r\n            ? Number(data[0].startday_hour)\r\n            : 8;\r\n          SchedulerSetting[\"endday_hour\"] = data[0].endday_hour\r\n            ? Number(data[0].endday_hour)\r\n            : 21;\r\n          SchedulerSetting[\"cell_duration\"] = data[0].cell_duration\r\n            ? Number(data[0].cell_duration)\r\n            : 15;\r\n          if (isMobile)  {\r\n            SchedulerSetting[\"resource_count\"] = 2;\r\n          } else {\r\n            SchedulerSetting[\"resource_count\"] = data[0].resource_count\r\n            ? Number(data[0].resource_count)\r\n            : 5;\r\n          }\r\n          console.log(SchedulerSetting, \"siteappointsettingafterrender\");\r\n          await this.setState({\r\n            SchedulerSetting,\r\n          });\r\n          await this.props.updateForm(\"SchedulerSetting\", SchedulerSetting);\r\n          let { filterDate, filterType } = this.state;\r\n          // this.props\r\n          //   .getCommonApi(\r\n          //     `customeroutstanding/?date=${dateFormat(\r\n          //       filterDate\r\n          //     )}&check=${filterType}`\r\n          //   )\r\n          //   .then(key => {});\r\n          this.getAppointmentWithStaff();\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  getHoursFromDate = date => {\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let hours = hour > 9 ? hour : \"0\" + hour;\r\n    let minutes;\r\n    if (minute < 15) {\r\n      minutes = \"00\";\r\n    } else if (minute >= 15 && minute < 30) {\r\n      minutes = \"15\";\r\n    } else if (minute >= 30 && minute < 45) {\r\n      minutes = \"30\";\r\n    } else if (minute >= 45 && minute < 59) {\r\n      minutes = \"45\";\r\n    }\r\n    return hours + \":\" + minutes;\r\n  };\r\n\r\n  handleEmptyEvent = async (date, e) => {\r\n    let { customerDetail } = this.props;\r\n    let { formField } = this.state;\r\n\r\n    let time = new Date(date);\r\n\r\n    formField[\"time\"] = this.getHoursFromDate(time);\r\n    formField[\"date\"] = date;\r\n    formField[\"appt_id\"] = 0;\r\n    if (e.groups) {\r\n      formField[\"staff_id\"] = e.groups.id;\r\n    }\r\n    if (e.appt_id) {\r\n      formField[\"appt_id\"] = e.appt_id;\r\n    }\r\n\r\n    await this.setState({ formField });\r\n    console.log(\r\n      date,\r\n      e,\r\n      \"hgjsydfisuyfsdfm ==== handleEmptyEvent\",\r\n      time.getHours\r\n    );\r\n    await this.props.updateForm(\"basicApptDetail\", formField);\r\n    await this.setState({ isOpenModal: true });\r\n  };\r\n  handleCloseDialog = async () => {\r\n    await this.props.updateForm(\"treatmentList\", []);\r\n    await this.props.updateForm(\"basicApptDetail\", {});\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", {});\r\n    await this.setState({\r\n      isOpenModal: false,\r\n    });\r\n  };\r\n\r\n  handleChangeFilter = async (prevMode, prevDate, newMode, newDate, search) => {\r\n    let { filterDate, filterType, searchtext } = this.state;\r\n    filterDate = newDate;\r\n    filterType = newMode;\r\n    searchtext = search;\r\n    await this.setState({\r\n      filterDate,\r\n      filterType,\r\n      searchtext,\r\n    });\r\n    //if (newMode === \"day\" || newMode === \"week\") {\r\n    // this.props\r\n    //   .getCommonApi(\r\n    //     `customeroutstanding/?date=${dateFormat(newDate)}&check=${newMode}`\r\n    //   )\r\n    //   .then(key => {});\r\n    //}\r\n    console.log(\"dfhgfhjhjghjdfhg\", prevMode, prevDate, newMode, newDate);\r\n    if (prevMode !== newMode || prevDate !== newDate) {\r\n      this.getAppointmentWithStaff();\r\n    }\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    await this.setState({\r\n      formField,\r\n    });\r\n    if (name === \"branchId\") {\r\n      this.getAppointmentWithStaff();\r\n    }\r\n    this.props.updateForm(\"basicApptDetail\", formField);\r\n  };\r\n\r\n  handleDelete = async (id, event) => {\r\n    let { selectedId } = this.state;\r\n    console.log(id, \"===afasfasdfdfasd=====\", selectedId);\r\n    if (id !== selectedId) {\r\n      await this.setState({\r\n        selectedId: id,\r\n      });\r\n      await this.props.commonDeleteApi(`appointment/${id}/`).then(res => {});\r\n    }\r\n  };\r\n\r\n  handleOpenStaff = (one, two, three) => {\r\n    console.log(\"namdfsfgsghsfghf\", one, two, three);\r\n    let { filterDate } = this.state;\r\n    this.props.handleOpen(filterDate);\r\n  };\r\n\r\n  getAppointmentWithStaff = () => {\r\n    this.setState(\r\n      {\r\n        loadPanelVisible: true,\r\n      },\r\n      () => {\r\n        let {\r\n          filterDate,\r\n          filterType,\r\n          page,\r\n          searchtext,\r\n          staffList,\r\n          events,\r\n          meta,\r\n          groupByType,\r\n        } = this.state;\r\n\r\n        this.props\r\n          .getCommonApi(\r\n            `empappointmentview/?date=${dateFormat(\r\n              filterDate\r\n            )}&check=${filterType}&page=${page}&limit=${Number(\r\n              this.props.SchedulerSetting.resource_count\r\n            )}&search=${searchtext}&type=${groupByType}`\r\n          )\r\n          .then(async key => {\r\n            console.log(\r\n              \"starttime: \",\r\n              moment(new Date(), \"DD/MM/YYYY HH:mm:ss\")\r\n            );\r\n            let { status, data, event } = key;\r\n            setTimeout(this.hideLoadPanel);\r\n            if (status === 200) {\r\n              if (data) {\r\n                staffList = [];\r\n                if (data.dataList.length > 0) {\r\n                  staffList = data.dataList;\r\n                }\r\n                events = [];\r\n                meta = [];\r\n                //this.setState({ events, meta });\r\n                meta = data.meta;\r\n                //events = event;\r\n\r\n                if (event.length > 0) {\r\n                  events = event;\r\n                  // event.forEach(cell => {\r\n                  //   let filterList = events.find(\r\n                  //     Appoint =>\r\n                  //       Appoint.linkcode === cell.linkcode &&\r\n                  //       Appoint.id === cell.id &&\r\n                  //       Appoint.cust_id === cell.cust_id &&\r\n                  //       (Appoint.endDate === cell.startDate ||\r\n                  //         Appoint.startDate === cell.endDate)\r\n                  //   );\r\n                  //   if (filterList) {\r\n                  //     if (filterList.startDate < cell.startDate) {\r\n                  //       filterList[\"startDate\"] = filterList.startDate;\r\n                  //     } else {\r\n                  //       filterList[\"startDate\"] = cell.startDate;\r\n                  //     }\r\n                  //     if (filterList.endDate > cell.endDate) {\r\n                  //       filterList[\"endDate\"] = filterList.endDate;\r\n                  //     } else {\r\n                  //       filterList[\"endDate\"] = cell.endDate;\r\n                  //     }\r\n                  //     filterList[\"appt_remark\"] =\r\n                  //       filterList.appt_remark + \" \" + \"/\" + \" \" + cell.appt_remark;\r\n                  //     filterList[\"Merged\"] = true;\r\n                  //     this.setState({ ...this.state.events, filterList });\r\n                  //   } else {\r\n                  //     events.push(cell);\r\n                  //     this.setState({ ...events, events });\r\n                  //   }\r\n                  // });\r\n                }\r\n                await this.setState({ events, meta, staffList });\r\n                console.log(\r\n                  \"endtime: \",\r\n                  moment(new Date(), \"DD/MM/YYYY HH:mm:ss\")\r\n                );\r\n                // await this.setState({ events, staffList, meta });\r\n\r\n                //console.log(event, \"appointment cell data\");\r\n              }\r\n            }\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  handleNext = async () => {\r\n    let { page } = this.state;\r\n    page = page + 1;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    if (page > 0) {\r\n      this.getAppointmentWithStaff();\r\n    }\r\n  };\r\n\r\n  handleBack = async () => {\r\n    let { page } = this.state;\r\n    page = page - 1;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    if (page > 0) {\r\n      this.getAppointmentWithStaff();\r\n    }\r\n  };\r\n  hideLoadPanel = async () => {\r\n    let loadPanelVisible = Object.assign({}, this.state.loadPanelVisible);\r\n    loadPanelVisible = false;\r\n    await this.setState({\r\n      loadPanelVisible,\r\n    });\r\n  };\r\n\r\n  groupByAppointment = async groupBy => {\r\n    await this.setState({\r\n      groupByType: groupBy,\r\n    });\r\n    this.getAppointmentWithStaff();\r\n  };\r\n  timeToMins = time => {\r\n    var b = time.split(\":\");\r\n    return b[0] * 60 + +b[1];\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      appointment,\r\n      brachList,\r\n      branchId,\r\n      formField,\r\n      list,\r\n      events,\r\n      filterType,\r\n      filterDate,\r\n      staffList,\r\n      meta,\r\n      searchtext,\r\n      staffSortlist,\r\n      isLoading,\r\n      isOpenModal,\r\n      SchedulerSetting,\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className=\"row m-0\" id=\"appointment\">\r\n        <LoadPanel\r\n          shadingColor=\"rgba(0,0,0,0.4)\"\r\n          position={`center`}\r\n          onHiding={this.hideLoadPanel}\r\n          visible={this.state.loadPanelVisible}\r\n          showIndicator={this.state.showIndicator}\r\n          shading={this.state.shading}\r\n          showPane={this.state.showPane}\r\n        />\r\n        <div className=\"scheduler-container pr-0\">\r\n          <NewSchedulerModal\r\n            staffList={this.state.staffList}\r\n            meta={this.state.meta}\r\n            event={this.state.events}\r\n            onEmptyClick={(date, e) => this.handleEmptyEvent(date, e)}\r\n            handleChangeFilter={this.handleChangeFilter}\r\n            filterType={filterType}\r\n            filterDate={filterDate}\r\n            searchtext={searchtext}\r\n            onDeleteEvent={this.handleDelete}\r\n            handleBack={this.handleBack}\r\n            handleNext={this.handleNext}\r\n            staffSortlist={this.state.staffSortlist}\r\n            getAppointmentWithStaff={this.getAppointmentWithStaff}\r\n            groupByAppointment={groupBy => this.groupByAppointment(groupBy)}\r\n            handleAppointmentSetting={this.getSettingInfo}\r\n          />\r\n        </div>\r\n        <NewCreateAppointment\r\n          isOpenModal={isOpenModal}\r\n          handleCloseDialog={this.handleCloseDialog}\r\n          handleSaveorUpdate={this.getAppointmentWithStaff}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  customerDetail: state.appointment.customerDetail,\r\n  customerList: state.common.customerList,\r\n  multipleCustomerForm: state.appointment.multipleCustomerForm,\r\n  SchedulerSetting: state.appointment.SchedulerSetting,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const Scheduler = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SchedulerClass);\r\n"]},"metadata":{},"sourceType":"module"}