{"ast":null,"code":"import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{Link}from\"react-router-dom\";import SimpleReactValidator from\"simple-react-validator\";import{NormalInput,NormalSelect,NormalButton,NormalDateTime}from\"component/common\";import{displayImg,dateFormat}from\"service/helperFunctions\";import{DragFileUpload}from\"../../../common\";import{createStaffPlus,getStaffPlus,updateStaffPlus,getWorkSchedule,updateWorkSchedule}from\"redux/actions/staffPlus\";import{getJobtitle,getCommonApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{FormGroup,Label,Input}from\"reactstrap\";import{ScheduleTable}from\"./ScheduleTable\";export var AddStaffClass=/*#__PURE__*/function(_Component){_inherits(AddStaffClass,_Component);var _super=_createSuper(AddStaffClass);function AddStaffClass(){var _this;_classCallCheck(this,AddStaffClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:_defineProperty({emp_name:\"\",emp_nric:\"\",display_name:\"\",emp_joindate:\"\",defaultSiteCodeid:\"\",EMP_TYPEid:\"\",emp_pic:\"\",emp_isactive:false,is_login:false,pw_password:\"\",LEVEL_ItmIDid:\"\",show_in_sales:false,show_in_appt:false,show_in_trmt:false,max_disc:\"\",work_schedule:{monday:\"YES\",tuesday:\"YES\",wednesday:\"YES\",thursday:\"YES\",friday:\"YES\",saturday:\"NO\",sunday:\"NO\"}},\"defaultSiteCodeid\",\"\"),scheduleOptions:[],jobOption:[],locationOption:[],levelList:[],is_loading:false,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.getStaffDetail=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateState({is_loading:true});_context.next=3;return _this.props.getStaffPlus(\"\".concat(_this.props.match.params.id,\"/\"));case 3:_context.next=5;return _this.props.getWorkSchedule(\"\".concat(_this.props.match.params.id));case 5:_this.setDataFromStore();_this.updateState({is_loading:false});case 7:case\"end\":return _context.stop();}}},_callee);}));_this.getDatafromStore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(type){var _this$props,branchList,jobtitleList,_this$state,jobOption,locationOption,_iterator,_step,key,_iterator2,_step2,_key2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,branchList=_this$props.branchList,jobtitleList=_this$props.jobtitleList;_this$state=_this.state,jobOption=_this$state.jobOption,locationOption=_this$state.locationOption;if(type===\"jobtitle\"){_iterator=_createForOfIteratorHelper(jobtitleList);try{for(_iterator.s();!(_step=_iterator.n()).done;){key=_step.value;jobOption.push({label:key.level_desc,value:key.id});}}catch(err){_iterator.e(err);}finally{_iterator.f();}}else if(type===\"branch\"){_iterator2=_createForOfIteratorHelper(branchList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_key2=_step2.value;locationOption.push({label:_key2.itemsite_desc,value:_key2.id});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}_this.updateState({locationOption:locationOption,jobOption:jobOption});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.setDataFromStore=function(){var _this$props2=_this.props,staffPlusDetail=_this$props2.staffPlusDetail,staffPlusWorkScheduleDetails=_this$props2.staffPlusWorkScheduleDetails;var formFields=_this.state.formFields;formFields[\"emp_name\"]=staffPlusDetail.emp_name;formFields[\"display_name\"]=staffPlusDetail.display_name;formFields[\"emp_joindate\"]=new Date(staffPlusDetail.emp_joindate);formFields[\"defaultSiteCodeid\"]=staffPlusDetail.defaultSiteCodeid;formFields[\"EMP_TYPEid\"]=staffPlusDetail.EMP_TYPEid;formFields[\"emp_pic\"]=staffPlusDetail.emp_pic;formFields[\"emp_nric\"]=staffPlusDetail.emp_nric;formFields[\"is_login\"]=staffPlusDetail.is_login;formFields[\"emp_isactive\"]=staffPlusDetail.emp_isactive;formFields[\"max_disc\"]=staffPlusDetail.max_disc;formFields[\"LEVEL_ItmIDid\"]=staffPlusDetail.LEVEL_ItmIDid;formFields[\"show_in_sales\"]=staffPlusDetail.show_in_sales;formFields[\"show_in_appt\"]=staffPlusDetail.show_in_appt;formFields[\"show_in_trmt\"]=staffPlusDetail.show_in_trmt;formFields.work_schedule.monday=staffPlusWorkScheduleDetails.monday;formFields.work_schedule.tuesday=staffPlusWorkScheduleDetails.tuesday;formFields.work_schedule.wednesday=staffPlusWorkScheduleDetails.wednesday;formFields.work_schedule.thursday=staffPlusWorkScheduleDetails.thursday;formFields.work_schedule.friday=staffPlusWorkScheduleDetails.friday;formFields.work_schedule.saturday=staffPlusWorkScheduleDetails.saturday;formFields.work_schedule.sunday=staffPlusWorkScheduleDetails.sunday;_this.updateState({formFields:formFields});};_this.handleChange=function(_ref3){var _ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.updateState({formFields:formFields});};_this.handleDatePick=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,value){var formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// dateFormat(new Date())\nformFields=_this.state.formFields;formFields[name]=value;// formFields[name] = value;\n_context3.next=4;return _this.updateState({formFields:formFields});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}();_this.handleInput=function(_ref5){var _ref5$target=_ref5.target,name=_ref5$target.name,value=_ref5$target.value;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value===true?1:value;_this.updateState({formFields:formFields});};_this.handleImageUpload=function(file){var formFields=_this.state.formFields;formFields[\"emp_pic\"]=file;_this.updateState({formFields:formFields});};_this.removepostImage=function(e,name){var staffImage=_this.state.formFields.staffImage;var index=staffImage.indexOf(name);if(index===0){staffImage.shift();}else{staffImage.pop();}_this.updateState({staffImage:staffImage});};_this.handleSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var formFields,formData,scheduleData,res,res2;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;if(!_this.validator.allValid()){_context4.next=51;break;}_this.updateState({is_loading:true});formFields=_this.state.formFields;formData=new FormData();formData.append(\"emp_name\",formFields.emp_name);formData.append(\"display_name\",formFields.display_name);formData.append(\"pw_password\",formFields.pw_password);formData.append(\"emp_joindate\",dateFormat(formFields.emp_joindate));formData.append(\"defaultSiteCodeid\",formFields.defaultSiteCodeid);formData.append(\"EMP_TYPEid\",formFields.EMP_TYPEid);if(typeof formFields.emp_pic===\"object\")formData.append(\"emp_pic\",formFields.emp_pic);formData.append(\"emp_nric\",formFields.emp_nric);formData.append(\"is_login\",formFields.is_login);formData.append(\"emp_isactive\",formFields.emp_isactive);formData.append(\"max_disc\",formFields.max_disc);formData.append(\"LEVEL_ItmIDid\",formFields.LEVEL_ItmIDid);formData.append(\"show_in_sales\",formFields.show_in_sales);formData.append(\"show_in_appt\",formFields.show_in_appt);formData.append(\"show_in_trmt\",formFields.show_in_trmt);scheduleData=new FormData();scheduleData.append(\"monday\",formFields.work_schedule.monday);scheduleData.append(\"tuesday\",formFields.work_schedule.tuesday);scheduleData.append(\"wednesday\",formFields.work_schedule.wednesday);scheduleData.append(\"tuesday\",formFields.work_schedule.tuesday);scheduleData.append(\"friday\",formFields.work_schedule.friday);scheduleData.append(\"saturday\",formFields.work_schedule.saturday);scheduleData.append(\"sunday\",formFields.work_schedule.sunday);if(!_this.props.match.params.id){_context4.next=40;break;}_context4.next=31;return _this.props.updateStaffPlus(\"\".concat(_this.props.match.params.id,\"/\"),formData);case 31:res=_context4.sent;console.log(res);if(!(res.status===200)){_context4.next=36;break;}_context4.next=36;return _this.props.updateWorkSchedule(_this.props.match.params.id,scheduleData);case 36:_context4.next=38;return _this.getStaffDetail();case 38:_context4.next=49;break;case 40:_context4.next=42;return _this.props.createStaffPlus(formData);case 42:res=_context4.sent;console.log(res);if(!(res.status===201)){_context4.next=49;break;}_context4.next=47;return _this.props.updateWorkSchedule(res.data.id,scheduleData);case 47:res2=_context4.sent;if(res2.status===200)_this.props.history.push(\"/admin/staffPlus/\".concat(res.data.id,\"/editStaff\"));case 49:_context4.next=52;break;case 51:_this.validator.showMessages();case 52:_this.updateState({is_loading:false});_context4.next=58;break;case 55:_context4.prev=55;_context4.t0=_context4[\"catch\"](0);_this.updateState({is_loading:false});case 58:case\"end\":return _context4.stop();}}},_callee4,null,[[0,55]]);}));_this.handleChangeBox=function(event){var formFields=Object.assign({},_this.state.formFields);formFields[event.target.name]=event.target.checked;_this.updateState({formFields:formFields});};return _this;}_createClass(AddStaffClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.validator=new SimpleReactValidator({validators:{contactNumber:{message:\"The :attribute must be a valid format.\",rule:function rule(val,params,validator){return validator.helpers.testRegex(val,/^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/)&&params.indexOf(val)===-1;},messageReplace:function messageReplace(message,params){return message.replace(\"\",_this2.helpers.toSentence(params));},required:true}},element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:this});// branch option api\nthis.props.getCommonApi(\"branchlist/\").then(function(res){var locationOption=_this2.state.locationOption;var _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;locationOption.push({value:key.id,label:key.itemsite_desc});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this2.updateState({locationOption:locationOption});});// level option api\nthis.props.getCommonApi(\"securities/\").then(function(res){var levelList=_this2.state.levelList;var _iterator4=_createForOfIteratorHelper(res.data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var key=_step4.value;levelList.push({value:key.id,label:key.level_name});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this2.updateState({levelList:levelList});});// schedule hours api\nthis.props.getCommonApi(\"WorkScheduleHours/\").then(function(res){var scheduleOptions=_this2.state.scheduleOptions;var _iterator5=_createForOfIteratorHelper(res.schedules),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var key=_step5.value;scheduleOptions.push({id:key.id,value:key.itm_code,label:key.itm_desc,color:key.itm_color,shortDesc:key.shortDesc});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_this2.updateState({scheduleOptions:scheduleOptions});});// jobtitle option api\nthis.props.getJobtitle().then(function(){_this2.getDatafromStore(\"jobtitle\");});// get api for staff while\nif(this.props.match.params.id){this.getStaffDetail();}}// get api for staff\n},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,formFields=_this$state2.formFields,jobOption=_this$state2.jobOption,locationOption=_this$state2.locationOption,is_loading=_this$state2.is_loading,levelList=_this$state2.levelList,scheduleOptions=_this$state2.scheduleOptions;var emp_name=formFields.emp_name,emp_nric=formFields.emp_nric,display_name=formFields.display_name,is_login=formFields.is_login,EMP_TYPEid=formFields.EMP_TYPEid,emp_joindate=formFields.emp_joindate,emp_pic=formFields.emp_pic,emp_isactive=formFields.emp_isactive,pw_password=formFields.pw_password,LEVEL_ItmIDid=formFields.LEVEL_ItmIDid,show_in_sales=formFields.show_in_sales,show_in_appt=formFields.show_in_appt,show_in_trmt=formFields.show_in_trmt,defaultSiteCodeid=formFields.defaultSiteCodeid,max_disc=formFields.max_disc,work_schedule=formFields.work_schedule;return/*#__PURE__*/React.createElement(\"div\",{className:\"px-5 container create-staff\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},\"StaffPlus\"),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},this.props.match.params.id?\"Edit\":\"New\",\" Staff\")),is_loading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"staff-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Upload Staff Photo\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 p-0\"},/*#__PURE__*/React.createElement(DragFileUpload,{className:\"file-uploader size-lg \".concat(emp_pic?\"\":\"no-img\"),label:\"Upload Thumbnail\",handleFileUpload:this.handleImageUpload}),emp_pic?/*#__PURE__*/React.createElement(React.Fragment,null,typeof emp_pic==\"string\"?/*#__PURE__*/React.createElement(\"img\",{src:emp_pic,alt:\"\",width:\"50%\"}):null):null)),this.props.match.params.id?/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/\"+this.props.match.params.id+\"/empinfo\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Emp Info\",outline:true,className:\"mr-2 col-12\"}))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pb-4 pt-4\"},/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{type:\"checkbox\",onChange:this.handleChangeBox,checked:emp_isactive,name:\"emp_isactive\"}),\" \",\"Active\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Employee Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:display_name,name:\"display_name\",onChange:this.handleChange})),this.validator.message(\"staff name\",display_name,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"NRIC/WP\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:emp_nric,name:\"emp_nric\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"User Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:emp_name,name:\"emp_name\",onChange:this.handleChange})),this.validator.message(\"display_name\",emp_name,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Employee Type\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:jobOption,value:EMP_TYPEid,name:\"EMP_TYPEid\",onChange:this.handleChange})),this.validator.message(\"employee type\",EMP_TYPEid,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Discount Limit\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{type:\"number\",placeholder:\"Enter here\",value:max_disc,name:\"max_disc\",onChange:this.handleChange})),this.validator.message(\"discount limit\",max_disc,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Join Date\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:emp_joindate,name:\"emp_joindate\",className:\"dob-pick\",showYearDropdown:true,dateFormat:\"MM/dd/yyyy\"})),this.validator.message(\"join date\",emp_joindate,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Site List\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:locationOption,value:defaultSiteCodeid,name:\"defaultSiteCodeid\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pb-4 pt-4\"},/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{type:\"checkbox\",onChange:this.handleChangeBox,checked:is_login,name:\"is_login\"}),\"Security AC\"))),is_login?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:pw_password,name:\"pw_password\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Employee Level\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:levelList,value:LEVEL_ItmIDid,name:\"LEVEL_ItmIDid\",onChange:this.handleChange})),this.validator.message(\"employee level\",LEVEL_ItmIDid,\"required\"))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"To Show At\"),/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{type:\"checkbox\",onChange:this.handleChangeBox,checked:show_in_sales,name:\"show_in_sales\"}),\"Sales\")),/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{type:\"checkbox\",onChange:this.handleChangeBox,checked:show_in_trmt,name:\"show_in_trmt\"}),\"Treatment\")),/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{type:\"checkbox\",onChange:this.handleChangeBox,checked:show_in_appt,name:\"show_in_appt\"}),\"Appointment\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Work Schedule\"),/*#__PURE__*/React.createElement(ScheduleTable,{data:work_schedule,optionList:scheduleOptions,onChange:function onChange(data){var formFields=_this3.state.formFields;formFields[\"work_schedule\"]=data;_this3.updateState({formFields:formFields});}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"pt-5 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-lg-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Cancel\",danger:true,className:\"mr-2 col-12\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-lg-2\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:function onClick(){return _this3.handleSubmit();},label:\"Save\",success:true,className:\"mr-2 col-12\"}))))));}}]);return AddStaffClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{branchList:state.common.branchList,jobtitleList:state.common.jobtitleList,staffPlusDetail:state.staffPlus.staffPlusDetail,staffPlusWorkScheduleDetails:state.staffPlus.staffPlusWorkScheduleDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({createStaffPlus:createStaffPlus,getJobtitle:getJobtitle,getStaffPlus:getStaffPlus,updateStaffPlus:updateStaffPlus,getCommonApi:getCommonApi,getWorkSchedule:getWorkSchedule,updateWorkSchedule:updateWorkSchedule},dispatch);};export var AddStaffPlus=connect(mapStateToProps,mapDispatchToProps)(AddStaffClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/StaffPlus/AddStaffPlus/index.js"],"names":["React","Component","Link","SimpleReactValidator","NormalInput","NormalSelect","NormalButton","NormalDateTime","displayImg","dateFormat","DragFileUpload","createStaffPlus","getStaffPlus","updateStaffPlus","getWorkSchedule","updateWorkSchedule","getJobtitle","getCommonApi","connect","bindActionCreators","FormGroup","Label","Input","ScheduleTable","AddStaffClass","state","formFields","emp_name","emp_nric","display_name","emp_joindate","defaultSiteCodeid","EMP_TYPEid","emp_pic","emp_isactive","is_login","pw_password","LEVEL_ItmIDid","show_in_sales","show_in_appt","show_in_trmt","max_disc","work_schedule","monday","tuesday","wednesday","thursday","friday","saturday","sunday","scheduleOptions","jobOption","locationOption","levelList","is_loading","isMounted","updateState","data","setState","getStaffDetail","props","match","params","id","setDataFromStore","getDatafromStore","type","branchList","jobtitleList","key","push","label","level_desc","value","itemsite_desc","staffPlusDetail","staffPlusWorkScheduleDetails","Date","handleChange","target","name","Object","assign","handleDatePick","handleInput","handleImageUpload","file","removepostImage","e","staffImage","index","indexOf","shift","pop","handleSubmit","validator","allValid","formData","FormData","append","scheduleData","res","console","log","status","res2","history","showMessages","handleChangeBox","event","checked","validators","contactNumber","message","rule","val","helpers","testRegex","messageReplace","replace","toSentence","required","element","autoForceUpdate","then","level_name","schedules","itm_code","itm_desc","color","itm_color","shortDesc","mapStateToProps","common","staffPlus","mapDispatchToProps","dispatch","AddStaffPlus"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { Link } from \"react-router-dom\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  NormalInput,\n  NormalSelect,\n  NormalButton,\n  NormalDateTime,\n} from \"component/common\";\nimport { displayImg, dateFormat } from \"service/helperFunctions\";\nimport { DragFileUpload } from \"../../../common\";\nimport {\n  createStaffPlus,\n  getStaffPlus,\n  updateStaffPlus,\n  getWorkSchedule,\n  updateWorkSchedule,\n} from \"redux/actions/staffPlus\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { FormGroup, Label, Input } from \"reactstrap\";\nimport { ScheduleTable } from \"./ScheduleTable\";\n\nexport class AddStaffClass extends Component {\n  state = {\n    formFields: {\n      emp_name: \"\",\n      emp_nric: \"\",\n      display_name: \"\",\n      emp_joindate: \"\",\n      defaultSiteCodeid: \"\",\n      EMP_TYPEid: \"\",\n      emp_pic: \"\",\n      emp_isactive: false,\n      is_login: false,\n      pw_password: \"\",\n      LEVEL_ItmIDid: \"\",\n      show_in_sales: false,\n      show_in_appt: false,\n      show_in_trmt: false,\n      max_disc: \"\",\n      work_schedule: {\n        monday: \"YES\",\n        tuesday: \"YES\",\n        wednesday: \"YES\",\n        thursday: \"YES\",\n        friday: \"YES\",\n        saturday: \"NO\",\n        sunday: \"NO\",\n      },\n      defaultSiteCodeid: \"\",\n    },\n    scheduleOptions: [],\n    jobOption: [],\n    locationOption: [],\n    levelList: [],\n    is_loading: false,\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentWillMount() {\n    this.validator = new SimpleReactValidator({\n      validators: {\n        contactNumber: {\n          message: \"The :attribute must be a valid format.\",\n          rule: (val, params, validator) => {\n            return (\n              validator.helpers.testRegex(\n                val,\n                /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/\n              ) && params.indexOf(val) === -1\n            );\n          },\n          messageReplace: (message, params) =>\n            message.replace(\"\", this.helpers.toSentence(params)),\n          required: true,\n        },\n      },\n      element: (message) => (\n        <span className=\"error-message text-danger validNo fs14\">\n          {message}\n        </span>\n      ),\n      autoForceUpdate: this,\n    });\n\n    // branch option api\n    this.props.getCommonApi(\"branchlist/\").then((res) => {\n      let { locationOption } = this.state;\n      for (let key of res.data) {\n        locationOption.push({ value: key.id, label: key.itemsite_desc });\n      }\n      this.updateState({ locationOption });\n    });\n\n    // level option api\n    this.props.getCommonApi(\"securities/\").then((res) => {\n      let { levelList } = this.state;\n      for (let key of res.data) {\n        levelList.push({ value: key.id, label: key.level_name });\n      }\n      this.updateState({ levelList });\n    });\n\n    // schedule hours api\n    this.props.getCommonApi(\"WorkScheduleHours/\").then((res) => {\n      let { scheduleOptions } = this.state;\n      for (let key of res.schedules) {\n        scheduleOptions.push({\n          id: key.id,\n          value: key.itm_code,\n          label: key.itm_desc,\n          color: key.itm_color,\n          shortDesc: key.shortDesc,\n        });\n      }\n      this.updateState({ scheduleOptions });\n    });\n\n    // jobtitle option api\n    this.props.getJobtitle().then(() => {\n      this.getDatafromStore(\"jobtitle\");\n    });\n\n    // get api for staff while\n    if (this.props.match.params.id) {\n      this.getStaffDetail();\n    }\n  }\n\n  // get api for staff\n  getStaffDetail = async () => {\n    this.updateState({ is_loading: true });\n    await this.props.getStaffPlus(`${this.props.match.params.id}/`);\n    await this.props.getWorkSchedule(`${this.props.match.params.id}`);\n    this.setDataFromStore();\n    this.updateState({ is_loading: false });\n  };\n\n  // set dropdown data from response\n  getDatafromStore = async (type) => {\n    let { branchList, jobtitleList } = this.props;\n    let { jobOption, locationOption } = this.state;\n    if (type === \"jobtitle\") {\n      for (let key of jobtitleList) {\n        jobOption.push({ label: key.level_desc, value: key.id });\n      }\n    } else if (type === \"branch\") {\n      for (let key of branchList) {\n        locationOption.push({ label: key.itemsite_desc, value: key.id });\n      }\n    }\n    this.updateState({\n      locationOption,\n      jobOption,\n    });\n  };\n\n  // set data to formfield from response while edit\n  setDataFromStore = () => {\n    let { staffPlusDetail, staffPlusWorkScheduleDetails } = this.props;\n    let { formFields } = this.state;\n    formFields[\"emp_name\"] = staffPlusDetail.emp_name;\n    formFields[\"display_name\"] = staffPlusDetail.display_name;\n    formFields[\"emp_joindate\"] = new Date(staffPlusDetail.emp_joindate);\n    formFields[\"defaultSiteCodeid\"] = staffPlusDetail.defaultSiteCodeid;\n    formFields[\"EMP_TYPEid\"] = staffPlusDetail.EMP_TYPEid;\n    formFields[\"emp_pic\"] = staffPlusDetail.emp_pic;\n    formFields[\"emp_nric\"] = staffPlusDetail.emp_nric;\n    formFields[\"is_login\"] = staffPlusDetail.is_login;\n    formFields[\"emp_isactive\"] = staffPlusDetail.emp_isactive;\n    formFields[\"max_disc\"] = staffPlusDetail.max_disc;\n    formFields[\"LEVEL_ItmIDid\"] = staffPlusDetail.LEVEL_ItmIDid;\n    formFields[\"show_in_sales\"] = staffPlusDetail.show_in_sales;\n    formFields[\"show_in_appt\"] = staffPlusDetail.show_in_appt;\n    formFields[\"show_in_trmt\"] = staffPlusDetail.show_in_trmt;\n    formFields.work_schedule.monday = staffPlusWorkScheduleDetails.monday;\n    formFields.work_schedule.tuesday = staffPlusWorkScheduleDetails.tuesday;\n    formFields.work_schedule.wednesday = staffPlusWorkScheduleDetails.wednesday;\n    formFields.work_schedule.thursday = staffPlusWorkScheduleDetails.thursday;\n    formFields.work_schedule.friday = staffPlusWorkScheduleDetails.friday;\n    formFields.work_schedule.saturday = staffPlusWorkScheduleDetails.saturday;\n    formFields.work_schedule.sunday = staffPlusWorkScheduleDetails.sunday;\n    this.updateState({ formFields });\n  };\n\n  handleChange = ({ target: { value, name } }) => {\n    let formFields = Object.assign({}, this.state.formFields);\n\n    formFields[name] = value;\n\n    this.updateState({\n      formFields,\n    });\n  };\n\n  handleDatePick = async (name, value) => {\n    // dateFormat(new Date())\n    let { formFields } = this.state;\n    formFields[name] = value;\n    // formFields[name] = value;\n    await this.updateState({\n      formFields,\n    });\n  };\n\n  handleInput = ({ target: { name, value } }) => {\n    let formFields = Object.assign({}, this.state.formFields);\n    formFields[name] = value === true ? 1 : value;\n    this.updateState({\n      formFields,\n    });\n  };\n\n  // upload imag to formfield\n  handleImageUpload = (file) => {\n    let { formFields } = this.state;\n    formFields[\"emp_pic\"] = file;\n    this.updateState({\n      formFields,\n    });\n  };\n\n  // remove image to formfield\n  removepostImage = (e, name) => {\n    let { staffImage } = this.state.formFields;\n    let index = staffImage.indexOf(name);\n    if (index === 0) {\n      staffImage.shift();\n    } else {\n      staffImage.pop();\n    }\n    this.updateState({\n      staffImage,\n    });\n  };\n\n  // submit to create/update staff\n  handleSubmit = async () => {\n    try {\n      if (this.validator.allValid()) {\n        this.updateState({ is_loading: true });\n        let { formFields } = this.state;\n        const formData = new FormData();\n        formData.append(\"emp_name\", formFields.emp_name);\n        formData.append(\"display_name\", formFields.display_name);\n        formData.append(\"pw_password\", formFields.pw_password);\n        formData.append(\"emp_joindate\", dateFormat(formFields.emp_joindate));\n        formData.append(\"defaultSiteCodeid\", formFields.defaultSiteCodeid);\n        formData.append(\"EMP_TYPEid\", formFields.EMP_TYPEid);\n        if (typeof formFields.emp_pic === \"object\")\n          formData.append(\"emp_pic\", formFields.emp_pic);\n        formData.append(\"emp_nric\", formFields.emp_nric);\n        formData.append(\"is_login\", formFields.is_login);\n        formData.append(\"emp_isactive\", formFields.emp_isactive);\n        formData.append(\"max_disc\", formFields.max_disc);\n        formData.append(\"LEVEL_ItmIDid\", formFields.LEVEL_ItmIDid);\n        formData.append(\"show_in_sales\", formFields.show_in_sales);\n        formData.append(\"show_in_appt\", formFields.show_in_appt);\n        formData.append(\"show_in_trmt\", formFields.show_in_trmt);\n        const scheduleData = new FormData();\n        scheduleData.append(\"monday\", formFields.work_schedule.monday);\n        scheduleData.append(\"tuesday\", formFields.work_schedule.tuesday);\n        scheduleData.append(\"wednesday\", formFields.work_schedule.wednesday);\n        scheduleData.append(\"tuesday\", formFields.work_schedule.tuesday);\n        scheduleData.append(\"friday\", formFields.work_schedule.friday);\n        scheduleData.append(\"saturday\", formFields.work_schedule.saturday);\n        scheduleData.append(\"sunday\", formFields.work_schedule.sunday);\n        if (this.props.match.params.id) {\n          var res = await this.props.updateStaffPlus(\n            `${this.props.match.params.id}/`,\n            formData\n          );\n          console.log(res);\n          if (res.status === 200) {\n            await this.props.updateWorkSchedule(\n              this.props.match.params.id,\n              scheduleData\n            );\n          }\n          await this.getStaffDetail();\n        } else {\n          var res = await this.props.createStaffPlus(formData);\n          console.log(res);\n          if (res.status === 201) {\n            var res2 = await this.props.updateWorkSchedule(\n              res.data.id,\n              scheduleData\n            );\n            if (res2.status === 200)\n              this.props.history.push(\n                `/admin/staffPlus/${res.data.id}/editStaff`\n              );\n          }\n        }\n      } else {\n        this.validator.showMessages();\n      }\n      this.updateState({ is_loading: false });\n    } catch (e) {\n      this.updateState({ is_loading: false });\n    }\n  };\n\n  handleChangeBox = (event) => {\n    let formFields = Object.assign({}, this.state.formFields);\n    formFields[event.target.name] = event.target.checked;\n\n    this.updateState({\n      formFields,\n    });\n  };\n\n  render() {\n    let {\n      formFields,\n      jobOption,\n      locationOption,\n      is_loading,\n      levelList,\n      scheduleOptions,\n    } = this.state;\n\n    let {\n      emp_name,\n      emp_nric,\n      display_name,\n      is_login,\n      EMP_TYPEid,\n      emp_joindate,\n      emp_pic,\n      emp_isactive,\n      pw_password,\n      LEVEL_ItmIDid,\n      show_in_sales,\n      show_in_appt,\n      show_in_trmt,\n      defaultSiteCodeid,\n      max_disc,\n      work_schedule,\n    } = formFields;\n    return (\n      <div className=\"px-5 container create-staff\">\n        {/* <p className=\"list-heading pb-4\"> {id ? \"Edit\" : \"Add\"} Staff</p> */}\n        <div className=\"head-label-nav\">\n          <p className=\"category\">StaffPlus</p>\n          <i className=\"icon-right mx-md-3\"></i>\n          <p className=\"sub-category\">\n            {this.props.match.params.id ? \"Edit\" : \"New\"} Staff\n          </p>\n        </div>\n        {is_loading ? (\n          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n            <div class=\"spinner-border\" role=\"status\">\n              <span class=\"sr-only\">Loading...</span>\n            </div>\n          </div>\n        ) : (\n          <div className=\"staff-detail\">\n            <div className=\"form-group mb-4 pb-2\">\n              <div className=\"row\">\n                <div className=\"col-6\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    Upload Staff Photo\n                  </label>\n                  <div className=\"col-md-12 p-0\">\n                    <DragFileUpload\n                      className={`file-uploader size-lg ${\n                        emp_pic ? \"\" : \"no-img\"\n                      }`}\n                      label=\"Upload Thumbnail\"\n                      handleFileUpload={this.handleImageUpload}\n                    ></DragFileUpload>\n\n                    {emp_pic ? (\n                      <>\n                        {typeof emp_pic == \"string\" ? (\n                          <img src={emp_pic} alt=\"\" width=\"50%\" />\n                        ) : null}\n                      </>\n                    ) : null}\n                  </div>\n                </div>\n                {this.props.match.params.id ? (\n                  <div className=\"col-6\">\n                    <Link\n                      to={\n                        \"/admin/staffplus/\" +\n                        this.props.match.params.id +\n                        \"/empinfo\"\n                      }\n                    >\n                      <NormalButton\n                        label=\"Emp Info\"\n                        outline={true}\n                        className=\"mr-2 col-12\"\n                      />\n                    </Link>\n                  </div>\n                ) : null}\n                <div className=\"col-12 pb-4 pt-4\">\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"checkbox\"\n                        onChange={this.handleChangeBox}\n                        checked={emp_isactive}\n                        name=\"emp_isactive\"\n                      />{\" \"}\n                      Active\n                    </Label>\n                  </FormGroup>\n                </div>\n\n                <div className=\"col-12 mb-4\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    Employee Name\n                  </label>\n                  <div className=\"input-group\">\n                    <NormalInput\n                      placeholder=\"Enter here\"\n                      value={display_name}\n                      name=\"display_name\"\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                  {this.validator.message(\n                    \"staff name\",\n                    display_name,\n                    \"required\"\n                  )}\n                </div>\n                <div className=\"col-12 mb-4\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    NRIC/WP\n                  </label>\n                  <div className=\"input-group\">\n                    <NormalInput\n                      placeholder=\"Enter here\"\n                      value={emp_nric}\n                      name=\"emp_nric\"\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                </div>\n                <div className=\"col-12 mb-4\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    User Name\n                  </label>\n                  <div className=\"input-group\">\n                    <NormalInput\n                      placeholder=\"Enter here\"\n                      value={emp_name}\n                      name=\"emp_name\"\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                  {this.validator.message(\"display_name\", emp_name, \"required\")}\n                </div>\n                <div className=\"col-6 mb-4\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    Employee Type\n                  </label>\n                  <div className=\"input-group\">\n                    <NormalSelect\n                      options={jobOption}\n                      value={EMP_TYPEid}\n                      name=\"EMP_TYPEid\"\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                  {this.validator.message(\n                    \"employee type\",\n                    EMP_TYPEid,\n                    \"required\"\n                  )}\n                </div>\n                <div className=\"col-6 mb-4\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    Discount Limit\n                  </label>\n                  <div className=\"input-group\">\n                    <NormalInput\n                      type=\"number\"\n                      placeholder=\"Enter here\"\n                      value={max_disc}\n                      name=\"max_disc\"\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                  {this.validator.message(\n                    \"discount limit\",\n                    max_disc,\n                    \"required\"\n                  )}\n                </div>\n                <div className=\"col-6 mb-4\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    Join Date\n                  </label>\n                  <div className=\"input-group\">\n                    <NormalDateTime\n                      onChange={this.handleDatePick}\n                      inputcol=\"p-0 inTime\"\n                      value={emp_joindate}\n                      name=\"emp_joindate\"\n                      className=\"dob-pick\"\n                      showYearDropdown={true}\n                      dateFormat=\"MM/dd/yyyy\"\n                    />\n                  </div>\n                  {this.validator.message(\n                    \"join date\",\n                    emp_joindate,\n                    \"required\"\n                  )}\n                </div>\n                <div className=\"col-6 mb-4\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    Site List\n                  </label>\n                  <div className=\"input-group\">\n                    <NormalSelect\n                      options={locationOption}\n                      value={defaultSiteCodeid}\n                      name=\"defaultSiteCodeid\"\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                </div>\n                <div className=\"col-12 pb-4 pt-4\">\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"checkbox\"\n                        onChange={this.handleChangeBox}\n                        checked={is_login}\n                        name=\"is_login\"\n                      />\n                      Security AC\n                    </Label>\n                  </FormGroup>\n                </div>\n                {is_login ? (\n                  <div>\n                    <div className=\"col-12 mb-4\">\n                      <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                        Password\n                      </label>\n                      <div className=\"input-group\">\n                        <NormalInput\n                          placeholder=\"Enter here\"\n                          value={pw_password}\n                          name=\"pw_password\"\n                          onChange={this.handleChange}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"col-12 mb-4\">\n                      <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                        Employee Level\n                      </label>\n                      <div className=\"input-group\">\n                        <NormalSelect\n                          options={levelList}\n                          value={LEVEL_ItmIDid}\n                          name=\"LEVEL_ItmIDid\"\n                          onChange={this.handleChange}\n                        />\n                      </div>\n                      {this.validator.message(\n                        \"employee level\",\n                        LEVEL_ItmIDid,\n                        \"required\"\n                      )}\n                    </div>\n                  </div>\n                ) : null}\n                <div className=\"col-12 mb-4\">\n                  <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                    To Show At\n                  </label>\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"checkbox\"\n                        onChange={this.handleChangeBox}\n                        checked={show_in_sales}\n                        name=\"show_in_sales\"\n                      />\n                      Sales\n                    </Label>\n                  </FormGroup>\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"checkbox\"\n                        onChange={this.handleChangeBox}\n                        checked={show_in_trmt}\n                        name=\"show_in_trmt\"\n                      />\n                      Treatment\n                    </Label>\n                  </FormGroup>\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"checkbox\"\n                        onChange={this.handleChangeBox}\n                        checked={show_in_appt}\n                        name=\"show_in_appt\"\n                      />\n                      Appointment\n                    </Label>\n                  </FormGroup>\n                </div>\n              </div>\n\n              <div className=\"form-group mb-4 pb-2\">\n                <div className=\"row\">\n                  <div className=\"col-12\">\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                      Work Schedule\n                    </label>\n                    <ScheduleTable\n                      data={work_schedule}\n                      optionList={scheduleOptions}\n                      onChange={(data) => {\n                        let { formFields } = this.state;\n                        formFields[\"work_schedule\"] = data;\n                        this.updateState({\n                          formFields,\n                        });\n                      }}\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"pt-5 d-flex justify-content-center\">\n                <div className=\"col-md-3 col-lg-2\">\n                  <Link to=\"/admin/staffplus\">\n                    <NormalButton\n                      label=\"Cancel\"\n                      danger={true}\n                      className=\"mr-2 col-12\"\n                    />\n                  </Link>\n                </div>\n                <div className=\"col-md-3 col-lg-2\">\n                  <NormalButton\n                    onClick={() => this.handleSubmit()}\n                    label=\"Save\"\n                    success={true}\n                    className=\"mr-2 col-12\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  branchList: state.common.branchList,\n  jobtitleList: state.common.jobtitleList,\n  staffPlusDetail: state.staffPlus.staffPlusDetail,\n  staffPlusWorkScheduleDetails: state.staffPlus.staffPlusWorkScheduleDetails,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      createStaffPlus,\n      getJobtitle,\n      getStaffPlus,\n      updateStaffPlus,\n      getCommonApi,\n      getWorkSchedule,\n      updateWorkSchedule,\n    },\n    dispatch\n  );\n};\n\nexport const AddStaffPlus = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(AddStaffClass);\n"]},"metadata":{},"sourceType":"module"}