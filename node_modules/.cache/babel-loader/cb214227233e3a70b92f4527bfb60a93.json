{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\StaffPlus\\\\SecurityAuthorization\\\\index.js\";\nimport React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { Link } from \"react-router-dom\";\nimport { NormalSelect, NormalButton } from \"component/common\";\nimport { getIndividualAuthorizationSettings, updateIndividualAuthorizationSettings, getAuthorizationSettings, updateAuthorizationSettings } from \"redux/actions/staffPlus\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { GroupAuthorizationTable } from \"./GroupAuthorizationTable\";\nimport { IndividualAuthorizationTable } from \"./IndividualAuthorizationTable\";\nimport { withTranslation } from \"react-i18next\";\nimport { Navigation } from \"react-minimal-side-navigation/lib\";\nimport { getStaffPlus } from \"redux/actions/staffPlus\";\nexport class SecurityAuthorizationClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentMenu: \"/group\",\n      empLvlOptions: [],\n      selected_empLVl: \"\",\n      staffList: [],\n      staffList_selected: \"\",\n      jobOptions: [],\n      jobOptions_selected: \"\",\n      security_groups: [],\n      selected_securityGroup: \"\",\n      individualData: [],\n      groupData: [],\n      groupColumns: [\"Administrator\", \"Director\", \"Manager\", \"Supervisor\", \"Beauticion\", \"Therapist\"],\n      isMounted: true,\n      isLoading: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.loadData = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      await this.props.getJobtitle();\n      await this.props.getAuthorizationSettings();\n      let emp_lvls = await this.props.getCommonApi(\"EmployeeLevels\");\n      let {\n        staffPlusAuthorization,\n        jobtitleList\n      } = this.props;\n      let {\n        jobOptions,\n        empLvlOptions\n      } = this.state;\n\n      for (let key of jobtitleList) {\n        jobOptions.push({\n          label: key.level_desc,\n          value: key.id\n        });\n      }\n\n      for (let key of emp_lvls.language) {\n        empLvlOptions.push({\n          label: key.level_description,\n          value: key.level_code\n        });\n      }\n\n      this.updateState({\n        jobOptions,\n        empLvlOptions,\n        isLoading: false,\n        groupData: staffPlusAuthorization\n      });\n    };\n\n    this.onJobChanged = e => {\n      this.state.jobOptions_selected = e.target.value;\n      this.state.selected_empLVl = \"\";\n      this.state.staffList_selected = \"\";\n      this.updateState({});\n      this.updateStaffList();\n    };\n\n    this.updateStaffList = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        staffList,\n        staffList_selected,\n        individualData\n      } = this.state;\n      staffList_selected = \"\";\n      staffList = [];\n      individualData = [];\n\n      if (this.state.jobOptions_selected != \"\") {\n        await this.props.getStaffPlus(`?limit=100&EMP_TYPEid=${this.state.jobOptions_selected}`);\n        let {\n          staffPlusDetail\n        } = this.props;\n        staffPlusDetail.dataList.forEach(key => {\n          staffList.push({\n            label: key.emp_name,\n            value: key.id,\n            sites: key.site_list.map(e => e.site_code)\n          });\n        });\n      }\n\n      this.updateState({\n        staffList,\n        individualData,\n        staffList_selected,\n        isLoading: false\n      });\n    };\n\n    this.onStaffChanged = async e => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        staffList_selected,\n        individualData,\n        selected_empLVl\n      } = this.state;\n      staffList_selected = e.target.value;\n\n      if (staffList_selected != \"\") {\n        await this.props.getIndividualAuthorizationSettings(staffList_selected);\n        let {\n          staffPlusIndividualAuthorization\n        } = this.props;\n        selected_empLVl = staffPlusIndividualAuthorization === null || staffPlusIndividualAuthorization === void 0 ? void 0 : staffPlusIndividualAuthorization.LEVEL_ItmIDid;\n        individualData = staffPlusIndividualAuthorization === null || staffPlusIndividualAuthorization === void 0 ? void 0 : staffPlusIndividualAuthorization.settings_list;\n      }\n\n      this.updateState({\n        selected_empLVl,\n        staffList_selected,\n        individualData,\n        isLoading: false\n      });\n    };\n\n    this.onEmpLvlChange = async e => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        selected_empLVl,\n        individualData\n      } = this.state;\n      selected_empLVl = e.target.value;\n      let individualSettings = await this.props.getCommonApi(`EmployeeLevelsSettings?code=${selected_empLVl}`);\n      individualData = individualSettings.settings;\n      this.updateState({\n        isLoading: false,\n        selected_empLVl,\n        individualData\n      });\n    };\n\n    this.onSumbit = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        currentMenu,\n        groupData,\n        individualData,\n        selected_empLVl,\n        staffList_selected\n      } = this.state;\n\n      try {\n        if (currentMenu == \"/group\") {\n          let level_list = groupData.reduce((a, e) => a.concat(e.levels), []);\n          await this.props.updateAuthorizationSettings({\n            level_list\n          });\n        } else {\n          await this.props.updateIndividualAuthorizationSettings(staffList_selected, {\n            level_code: selected_empLVl\n          });\n          await this.props.getIndividualAuthorizationSettings(staffList_selected);\n          let {\n            staffPlusIndividualAuthorization\n          } = this.props;\n          selected_empLVl = staffPlusIndividualAuthorization === null || staffPlusIndividualAuthorization === void 0 ? void 0 : staffPlusIndividualAuthorization.LEVEL_ItmIDid;\n          individualData = staffPlusIndividualAuthorization === null || staffPlusIndividualAuthorization === void 0 ? void 0 : staffPlusIndividualAuthorization.settings_list;\n          this.updateState({\n            selected_empLVl,\n            individualData\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n\n      this.updateState({\n        isLoading: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  render() {\n    let {\n      isLoading,\n      currentMenu,\n      groupData,\n      jobOptions,\n      jobOptions_selected,\n      staffList,\n      staffList_selected,\n      individualData,\n      empLvlOptions,\n      selected_empLVl\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-lg-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Navigation, {\n      activeItemId: currentMenu,\n      onSelect: ({\n        itemId\n      }) => {\n        this.updateState({\n          currentMenu: itemId\n        });\n      },\n      items: [{\n        title: t(\"Group Authorization\"),\n        itemId: \"/group\"\n      }, {\n        title: t(\"Individual Authorization\"),\n        itemId: \"/indi\"\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    })), isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 19\n      }\n    }, \"Loading...\")))) : currentMenu == \"/group\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 19\n      }\n    }, t(\"Group Authorization\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(GroupAuthorizationTable, {\n      data: groupData,\n      onChange: data => this.updateState(() => this.state.groupData = data),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }))))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mt-4 mb-4 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 19\n      }\n    }, t(\"Individual Authorization\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 21\n      }\n    }, t(\"Employee Type\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: jobOptions,\n      value: jobOptions_selected,\n      onChange: this.onJobChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }, t(\"Employee\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: staffList,\n      value: staffList_selected,\n      onChange: this.onStaffChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 21\n      }\n    }, t(\"Employee Level\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: empLvlOptions,\n      value: selected_empLVl,\n      disabled: staffList_selected == \"\",\n      onChange: this.onEmpLvlChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IndividualAuthorizationTable, {\n      data: individualData,\n      onChange: individualData => this.updateState({\n        individualData\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }\n    }))))), !isLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pt-5 d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 col-md-4 col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/admin/staffplus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Cancel\",\n      className: \"mr-2 bg-danger text-light col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 col-md-4 col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Save\",\n      success: true,\n      className: \"mr-2 col-12\",\n      onClick: this.onSumbit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 19\n      }\n    }))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  staffPlusAuthorization: state.staffPlus.staffPlusAuthorization,\n  staffPlusIndividualAuthorization: state.staffPlus.staffPlusIndividualAuthorization,\n  jobtitleList: state.common.jobtitleList,\n  staffPlusDetail: state.staffPlus.staffPlusDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getAuthorizationSettings,\n    updateAuthorizationSettings,\n    getJobtitle,\n    getStaffPlus,\n    getIndividualAuthorizationSettings,\n    updateIndividualAuthorizationSettings,\n    getCommonApi\n  }, dispatch);\n};\n\nexport const SecurityAuthorization = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(SecurityAuthorizationClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/StaffPlus/SecurityAuthorization/index.js"],"names":["React","Component","Link","NormalSelect","NormalButton","getIndividualAuthorizationSettings","updateIndividualAuthorizationSettings","getAuthorizationSettings","updateAuthorizationSettings","getJobtitle","getCommonApi","connect","bindActionCreators","GroupAuthorizationTable","IndividualAuthorizationTable","withTranslation","Navigation","getStaffPlus","SecurityAuthorizationClass","state","currentMenu","empLvlOptions","selected_empLVl","staffList","staffList_selected","jobOptions","jobOptions_selected","security_groups","selected_securityGroup","individualData","groupData","groupColumns","isMounted","isLoading","updateState","data","setState","loadData","props","emp_lvls","staffPlusAuthorization","jobtitleList","key","push","label","level_desc","value","id","language","level_description","level_code","onJobChanged","e","target","updateStaffList","staffPlusDetail","dataList","forEach","emp_name","sites","site_list","map","site_code","onStaffChanged","staffPlusIndividualAuthorization","LEVEL_ItmIDid","settings_list","onEmpLvlChange","individualSettings","settings","onSumbit","level_list","reduce","a","concat","levels","error","console","log","componentDidMount","componentWillUnmount","render","t","itemId","title","mapStateToProps","staffPlus","common","mapDispatchToProps","dispatch","SecurityAuthorization"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { Link } from \"react-router-dom\";\nimport { NormalSelect, NormalButton } from \"component/common\";\nimport {\n  getIndividualAuthorizationSettings,\n  updateIndividualAuthorizationSettings,\n  getAuthorizationSettings,\n  updateAuthorizationSettings,\n} from \"redux/actions/staffPlus\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { GroupAuthorizationTable } from \"./GroupAuthorizationTable\";\nimport { IndividualAuthorizationTable } from \"./IndividualAuthorizationTable\";\nimport { withTranslation } from \"react-i18next\";\nimport { Navigation } from \"react-minimal-side-navigation/lib\";\nimport { getStaffPlus } from \"redux/actions/staffPlus\";\n\nexport class SecurityAuthorizationClass extends Component {\n  state = {\n    currentMenu: \"/group\",\n    empLvlOptions: [],\n    selected_empLVl: \"\",\n    staffList: [],\n    staffList_selected: \"\",\n    jobOptions: [],\n    jobOptions_selected: \"\",\n    security_groups: [],\n    selected_securityGroup: \"\",\n    individualData: [],\n    groupData: [],\n    groupColumns: [\n      \"Administrator\",\n      \"Director\",\n      \"Manager\",\n      \"Supervisor\",\n      \"Beauticion\",\n      \"Therapist\",\n    ],\n    isMounted: true,\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  loadData = async () => {\n    this.updateState({ isLoading: true });\n    await this.props.getJobtitle();\n    await this.props.getAuthorizationSettings();\n    let emp_lvls = await this.props.getCommonApi(\"EmployeeLevels\");\n    let { staffPlusAuthorization, jobtitleList } = this.props;\n    let { jobOptions, empLvlOptions } = this.state;\n    for (let key of jobtitleList) {\n      jobOptions.push({ label: key.level_desc, value: key.id });\n    }\n    for (let key of emp_lvls.language) {\n      empLvlOptions.push({\n        label: key.level_description,\n        value: key.level_code,\n      });\n    }\n    this.updateState({\n      jobOptions,\n      empLvlOptions,\n      isLoading: false,\n      groupData: staffPlusAuthorization,\n    });\n  };\n\n  onJobChanged = (e) => {\n    this.state.jobOptions_selected = e.target.value;\n    this.state.selected_empLVl = \"\";\n    this.state.staffList_selected = \"\";\n    this.updateState({});\n    this.updateStaffList();\n  };\n\n  updateStaffList = async () => {\n    this.updateState({ isLoading: true });\n    let { staffList, staffList_selected, individualData } = this.state;\n    staffList_selected = \"\";\n    staffList = [];\n    individualData = [];\n    if (this.state.jobOptions_selected != \"\") {\n      await this.props.getStaffPlus(\n        `?limit=100&EMP_TYPEid=${this.state.jobOptions_selected}`\n      );\n\n      let { staffPlusDetail } = this.props;\n\n      staffPlusDetail.dataList.forEach((key) => {\n        staffList.push({\n          label: key.emp_name,\n          value: key.id,\n          sites: key.site_list.map((e) => e.site_code),\n        });\n      });\n    }\n    this.updateState({\n      staffList,\n      individualData,\n      staffList_selected,\n      isLoading: false,\n    });\n  };\n\n  onStaffChanged = async (e) => {\n    this.updateState({ isLoading: true });\n    let { staffList_selected, individualData, selected_empLVl } = this.state;\n    staffList_selected = e.target.value;\n    if (staffList_selected != \"\") {\n      await this.props.getIndividualAuthorizationSettings(staffList_selected);\n      let { staffPlusIndividualAuthorization } = this.props;\n      selected_empLVl = staffPlusIndividualAuthorization?.LEVEL_ItmIDid;\n      individualData = staffPlusIndividualAuthorization?.settings_list;\n    }\n    this.updateState({\n      selected_empLVl,\n      staffList_selected,\n      individualData,\n      isLoading: false,\n    });\n  };\n\n  onEmpLvlChange = async (e) => {\n    this.updateState({ isLoading: true });\n    let { selected_empLVl, individualData } = this.state;\n    selected_empLVl = e.target.value;\n    let individualSettings = await this.props.getCommonApi(\n      `EmployeeLevelsSettings?code=${selected_empLVl}`\n    );\n    individualData = individualSettings.settings;\n    this.updateState({ isLoading: false, selected_empLVl, individualData });\n  };\n\n  onSumbit = async () => {\n    this.updateState({ isLoading: true });\n    let {\n      currentMenu,\n      groupData,\n      individualData,\n      selected_empLVl,\n      staffList_selected,\n    } = this.state;\n    try {\n      if (currentMenu == \"/group\") {\n        let level_list = groupData.reduce((a, e) => a.concat(e.levels), []);\n        await this.props.updateAuthorizationSettings({ level_list });\n      } else {\n        await this.props.updateIndividualAuthorizationSettings(\n          staffList_selected,\n          { level_code: selected_empLVl }\n        );\n        await this.props.getIndividualAuthorizationSettings(staffList_selected);\n        let { staffPlusIndividualAuthorization } = this.props;\n        selected_empLVl = staffPlusIndividualAuthorization?.LEVEL_ItmIDid;\n        individualData = staffPlusIndividualAuthorization?.settings_list;\n        this.updateState({ selected_empLVl, individualData });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    this.updateState({ isLoading: false });\n  };\n\n  render() {\n    let {\n      isLoading,\n      currentMenu,\n      groupData,\n      jobOptions,\n      jobOptions_selected,\n      staffList,\n      staffList_selected,\n      individualData,\n      empLvlOptions,\n      selected_empLVl,\n    } = this.state;\n    let { t } = this.props;\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-md-12 col-lg-2 mb-4\">\n            <Navigation\n              activeItemId={currentMenu}\n              onSelect={({ itemId }) => {\n                this.updateState({ currentMenu: itemId });\n              }}\n              items={[\n                {\n                  title: t(\"Group Authorization\"),\n                  itemId: \"/group\",\n                },\n                {\n                  title: t(\"Individual Authorization\"),\n                  itemId: \"/indi\",\n                },\n              ]}\n            />\n          </div>\n          {isLoading ? (\n            <div className=\"col\">\n              <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                <div class=\"spinner-border\" role=\"status\">\n                  <span class=\"sr-only\">Loading...</span>\n                </div>\n              </div>\n            </div>\n          ) : currentMenu == \"/group\" ? (\n            <div className=\"col-lg-10 col-md-12\">\n              <div className=\"row align-items-center\">\n                <div className=\"col-md-12 mt-4\">\n                  <h3>{t(\"Group Authorization\")}</h3>\n                </div>\n              </div>\n              <div className=\"tab-table-content\">\n                <div className=\"py-4\">\n                  <div className=\"table-container\">\n                    <GroupAuthorizationTable\n                      data={groupData}\n                      onChange={(data) =>\n                        this.updateState(() => (this.state.groupData = data))\n                      }\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"col-lg-10 col-md-12\">\n              <div className=\"row align-items-center\">\n                <div className=\"col-md-12 mt-4 mb-4 \">\n                  <h3>{t(\"Individual Authorization\")}</h3>\n                </div>\n              </div>\n              <div className=\"form-group mb-4 pb-2\">\n                <div className=\"row\">\n                  <div className=\"col-12\">\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                      {t(\"Employee Type\")}\n                    </label>\n                    <div className=\"input-group\">\n                      <NormalSelect\n                        options={jobOptions}\n                        value={jobOptions_selected}\n                        onChange={this.onJobChanged}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"form-group mb-4 pb-2\">\n                <div className=\"row\">\n                  <div className=\"col-12\">\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                      {t(\"Employee\")}\n                    </label>\n                    <div className=\"input-group\">\n                      <NormalSelect\n                        options={staffList}\n                        value={staffList_selected}\n                        onChange={this.onStaffChanged}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"form-group mb-4 pb-2\">\n                <div className=\"row\">\n                  <div className=\"col-12\">\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                      {t(\"Employee Level\")}\n                    </label>\n                    <div className=\"input-group\">\n                      <NormalSelect\n                        options={empLvlOptions}\n                        value={selected_empLVl}\n                        disabled={staffList_selected == \"\"}\n                        onChange={this.onEmpLvlChange}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"tab-table-content\">\n                <div className=\"py-4\">\n                  <div className=\"table-container\">\n                    <IndividualAuthorizationTable\n                      data={individualData}\n                      onChange={(individualData) =>\n                        this.updateState({ individualData })\n                      }\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          {!isLoading && (\n            <div className=\"col-12 form-group mb-4 pb-2\">\n              <div className=\"pt-5 d-flex justify-content-center\">\n                <div className=\"col-6 col-md-4 col-lg-2\">\n                  <Link to=\"/admin/staffplus\">\n                    <NormalButton\n                      label=\"Cancel\"\n                      className=\"mr-2 bg-danger text-light col-12\"\n                    />\n                  </Link>\n                </div>\n                <div className=\"col-6 col-md-4 col-lg-2\">\n                  <NormalButton\n                    label=\"Save\"\n                    success={true}\n                    className=\"mr-2 col-12\"\n                    onClick={this.onSumbit}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  staffPlusAuthorization: state.staffPlus.staffPlusAuthorization,\n  staffPlusIndividualAuthorization:\n    state.staffPlus.staffPlusIndividualAuthorization,\n  jobtitleList: state.common.jobtitleList,\n  staffPlusDetail: state.staffPlus.staffPlusDetail,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      getAuthorizationSettings,\n      updateAuthorizationSettings,\n      getJobtitle,\n      getStaffPlus,\n      getIndividualAuthorizationSettings,\n      updateIndividualAuthorizationSettings,\n      getCommonApi,\n    },\n    dispatch\n  );\n};\n\nexport const SecurityAuthorization = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(SecurityAuthorizationClass)\n);\n"]},"metadata":{},"sourceType":"module"}