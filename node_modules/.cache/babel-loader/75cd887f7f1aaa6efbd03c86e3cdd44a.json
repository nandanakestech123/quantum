{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{Link}from\"react-router-dom\";import SimpleReactValidator from\"simple-react-validator\";import{NormalInput,NormalSelect,NormalButton,NormalDateTime,NormalMultiSelect,NormalTextarea,TableWrapper}from\"component/common\";import{displayImg,dateFormat}from\"service/helperFunctions\";import{getJobtitle,getCommonApi,commonCreateApi,commonUpdateApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{FormGroup,Label,Input}from\"reactstrap\";import{withTranslation}from\"react-i18next\";import{NavLink}from\"react-router-dom\";import{getTokenDetails}from\"redux/actions/auth\";import{history}from\"helpers\";import{PDFViewer,PDFDownloadLink,BlobProvider}from\"@react-pdf/renderer\";import PDF from\"../../StocksPDF/POApproved/index\";import Blur from\"react-css-blur\";export var AddStocksPOApprovedClass=/*#__PURE__*/function(_Component){_inherits(AddStocksPOApprovedClass,_Component);var _super=_createSuper(AddStocksPOApprovedClass);function AddStocksPOApprovedClass(){var _this;_classCallCheck(this,AddStocksPOApprovedClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{PO_NO:\"\",SUPP_Code:\"\",PO_DATE:new Date(),contactPerson:\"\",PO_STATUS:\"\",ItemSite_Code:\"\",PO_REMK1:\"\",terms:\"\",PO_TTQTY:\"\",PO_TTAMT:\"\"},headerSelectedDetails:[{label:\"Item Code\"},{label:\"Item Description\"},{label:\"UOM\"},// { label: \"Brand\" },\n// { label: \"Range\" },\n{label:\"Unit Price\"},{label:\"Required Qty\"},{label:\"Approved Qty\"}],listDetail:{},siteAddr:[],statusOption:[],contactOption:[],supOption:[],storedItemList:[],isPrintPdfClick:false,disableEdit:true,is_loading:true,isMounted:true,blur:false};_this.componentDidMount=function(){console.log(\"this.props\",_this.props);console.log(\"this.state\",_this.state);// console.log(\"useLocation()\",useLocation())\n_this.getSup();_this.getContact();_this.getSiteDetail();};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.getContact=function(){var _this$state=_this.state,contactOption=_this$state.contactOption,blur=_this$state.blur;contactOption=[];_this.props.getCommonApi(\"supplycontactinfo\").then(function(res){console.log(\"res.data\",res);var _iterator=_createForOfIteratorHelper(res.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;contactOption.push({value:key.ContactInfo_ID,label:key.ContactInfo_Name,suppCode:key.Supplier_Code,phone:key.ContactInfo_PhoneNo,email:key.ContactInfo_Email,active:key.Active});}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(\"contactOption\",contactOption);_this.setState({contactOption:contactOption});if(_this.props.match.params.id){_this.autoFillForm();}if(_this.props.tokenDetail.role_code!==\"1\"&&_this.props.tokenDetail.role_code!==\"2\"){blur=true;_this.setState({blur:blur});}});};_this.getSup=function(){var supOption=_this.state.supOption;supOption=[];_this.props.getCommonApi(\"itemsupply\").then(function(res){console.log(\"res.data\",res);var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;supOption.push({value:key.SPLY_CODE,label:key.SUPPLYDESC,addr1:key.SPLY_ADDR1,addr2:key.SPLY_ADDR2,addr3:key.SPLY_ADDR3,postalCode:key.SPLY_POSCD,state:key.SPLY_STATE,city:key.SPLY_CITY,country:key.SPLY_CNTRY// active: key.itm_isactive,\n});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}console.log(\"supOption\",supOption);_this.setState({supOption:supOption});});};_this.getSiteDetail=function(){var siteAddr=_this.state.siteAddr;siteAddr=[];_this.props.getCommonApi(\"sitecode\").then(function(res){console.log(\"res.data\",res);siteAddr=res.data;console.log(\"siteAddr\",siteAddr);_this.setState({siteAddr:siteAddr});});};_this.getAutofillItemDetails=function(PO_NO){console.log(\"PO_NO\",PO_NO);_this.props.getCommonApi(\"poapprovalitem/?searchpono=\".concat(PO_NO,\"&limit=10000\")).then(function(res){console.log(\"res in getAutofillItemDetails\",res);// this.state.storedItemListStored = res.data.dataList\nif(res.status==200){var _iterator3=_createForOfIteratorHelper(res.data.dataList),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var item=_step3.value;_this.state.storedItemList.push({item_code:item.POD_ITEMCODE,Item_Desc:item.POD_ITEMDESC,ITEM_UOM:item.BrandCode,UOM_DESC:item.BrandName,POD_ITEMPRICE:item.POD_ITEMPRICE,POD_QTY:item.POD_QTY,POD_APPQTY:item.POD_APPQTY});// this.state.itemListBeforeEdit.push({\"item_id\":item.PO_ID,\"item_code\":item.POD_ITEMCODE,\"UOM_DESC\":item.BrandName})\n}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState(_this.state.storedItemList);// this.setState(this.state.itemListBeforeEdit)\n// console.log(\"this.state.itemListBeforeEdit\",this.state.itemListBeforeEdit)\n}});};_this.autoFillForm=function(){var _this$state2=_this.state,disableEdit=_this$state2.disableEdit,statusOption=_this$state2.statusOption,contactOption=_this$state2.contactOption,supOption=_this$state2.supOption;_this.props.getCommonApi(\"poapprovallist/?searchpoid=\".concat(_this.props.match.params.id)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"po dataList\",res.data.dataList);// console.log(\"quo dataList cust name\", res.data.dataList[0].customer_name);\n// custName = res.data.dataList[0].customer_name\n// this.state.projectList = res.data.dataList\n_this.state.formFields[\"PO_NO\"]=res.data.dataList[0].PO_NO;_this.state.formFields[\"SUPP_Code\"]=res.data.dataList[0].SUPP_Code;// if (res.data.dataList[0].SUPP_Code && supOption.length!==0) {\n//   //matching status name with the id to set prefill status in dropdown\n//   this.state.formFields[\"SUPP_Code\"] = supOption.find(option => option.label === res.data.dataList[0].SUPP_Code).value\n//   console.log(\"res.data.dataList[0].SUPP_Code\",res.data.dataList[0].SUPP_Code)\n// }\n// this.state.formFields[\"SUPP_Code\"] = res.data.dataList[0].SUPP_Code\n_this.state.formFields[\"PO_DATE\"]=res.data.dataList[0].PO_DATE;console.log(\"contactOption in autofill\",contactOption);console.log(\"res.data.dataList[0].contactPerson\",res.data.dataList[0].contactPerson);if(res.data.dataList[0].contactPerson&&contactOption.length!==0){//matching status name with the id to set prefill status in dropdown\n_this.state.formFields[\"contactPerson\"]=contactOption.find(function(option){return option.label===res.data.dataList[0].contactPerson;}).value;console.log(\"res.data.dataList[0].contactPerson\",res.data.dataList[0].contactPerson);}_this.state.formFields[\"PO_STATUS\"]=res.data.dataList[0].PO_STATUS;// console.log(\"statusOption in prefill\",this.state.statusOption)\n// console.log(\"res.data.dataList[0].status\",res.data.dataList[0].status)\n// if status empty prevent err\n// if (res.data.dataList[0].PO_STATUS && statusOption.length!==0) {\n//   //matching status name with the id to set prefill status in dropdown\n//   this.state.formFields[\"PO_STATUS\"] = statusOption.find(option => option.label === res.data.dataList[0].PO_STATUS).value\n//   console.log(\"res.data.dataList[0].PO_STATUS\",res.data.dataList[0].PO_STATUS)\n//   if(res.data.dataList[0].PO_STATUS == \"Posted\"){\n//     disableEdit = true\n//     // for (var i = 0; i < statusOption.length; i++){\n//     //   if(statusOption[i].label == \"Posted\") {\n//     //     statusOption = statusOption.filter(e => e.label !== 'Open')\n//     //   }\n//     // }\n//     // console.log(\"statusOption when status is posted\",statusOption)\n//     this.setState({disableEdit})\n//     console.log(\"this.state.disableEdit\",disableEdit)\n//   }\n// }\n_this.state.formFields[\"ItemSite_Code\"]=1;_this.state.formFields[\"PO_REMK1\"]=res.data.dataList[0].PO_REMK1;_this.state.formFields[\"terms\"]=res.data.dataList[0].terms;_this.state.formFields[\"PO_TTQTY\"]=res.data.dataList[0].PO_TTQTY;_this.state.formFields[\"PO_TTAMT\"]=res.data.dataList[0].PO_TTAMT;// this.state.formFieldsDetailsStored.PO_TTQTY = res.data.dataList[0].PO_TTQTY\n_this.updateState(_this.state.formFields);// this.setState(this.state.formFieldsDetailsStored)\n// console.log(\"this.state.formFieldsDetailsStored\",this.state.formFieldsDetailsStored)\nconsole.log(\"this.state.formFields\",_this.state.formFields);_this.getAutofillItemDetails(res.data.dataList[0].PO_NO);case 16:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handlePrintPdfFormat=function(url){_this.setState({isPrintPdfClick:false});var a=document.createElement(\"a\");a.setAttribute(\"download\",\"\".concat(new Date(),\".pdf\"));a.setAttribute(\"href\",url);a.click();window.open(url);};_this.getListDetail=function(){var _this$state3=_this.state,siteAddr=_this$state3.siteAddr,supOption=_this$state3.supOption,contactOption=_this$state3.contactOption,listDetail=_this$state3.listDetail,formFields=_this$state3.formFields,isPrintPdfClick=_this$state3.isPrintPdfClick;var addr=\"\";var _iterator4=_createForOfIteratorHelper(siteAddr),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var site=_step4.value;if(site.ItemSite_Code==_this.props.tokenDetail.site_code){addr=site.ItemSite_Address;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}var supAddr=\"\";var supInfo=\"\";if(formFields.SUPP_Code&&supOption){supInfo=supOption.find(function(option){return option.value===formFields.SUPP_Code;});supAddr=supInfo.addr1+\" \"+supInfo.addr2+\" \"+supInfo.addr3+\" \"+supInfo.postalCode+\" \"+supInfo.state+\" \"+supInfo.city+\" \"+supInfo.country;console.log(\"supAddr\",supAddr);}listDetail={PO_NO:formFields.PO_NO,Supplier:formFields.SUPP_Code&&supOption?supOption.find(function(option){return option.value===formFields.SUPP_Code;}).label:\"\",supAddr:supAddr?supAddr:\"\",contactPhone:formFields.contactPerson&&contactOption?contactOption.find(function(option){return option.value===formFields.contactPerson;}).phone:\"\",contactEmail:formFields.contactPerson&&contactOption?contactOption.find(function(option){return option.value===formFields.contactPerson;}).email:\"\",contactPerson:formFields.contactPerson&&contactOption?contactOption.find(function(option){return option.value===formFields.contactPerson;}).label:\"\",PO_DATE:formFields.PO_DATE,terms:formFields.terms,storeName:_this.props.tokenDetail.branch,printedBy:_this.props.tokenDetail.username,totalQty:formFields.PO_TTQTY,totalAmt:formFields.PO_TTAMT,addr:addr};console.log(\"listDetail in getListDetail\",listDetail);isPrintPdfClick=true;_this.setState({listDetail:listDetail,isPrintPdfClick:isPrintPdfClick});};return _this;}_createClass(AddStocksPOApprovedClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state4=this.state,formFields=_this$state4.formFields,storedItemList=_this$state4.storedItemList,headerSelectedDetails=_this$state4.headerSelectedDetails,disableEdit=_this$state4.disableEdit,contactOption=_this$state4.contactOption,supOption=_this$state4.supOption,isPrintPdfClick=_this$state4.isPrintPdfClick,listDetail=_this$state4.listDetail,blur=_this$state4.blur;var PO_NO=formFields.PO_NO,SUPP_Code=formFields.SUPP_Code,PO_DATE=formFields.PO_DATE,contactPerson=formFields.contactPerson,PO_STATUS=formFields.PO_STATUS,ItemSite_Code=formFields.ItemSite_Code,PO_REMK1=formFields.PO_REMK1,terms=formFields.terms,PO_TTQTY=formFields.PO_TTQTY,PO_TTAMT=formFields.PO_TTAMT;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"px-5  create-PO\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category cursor-pointer\",onClick:function onClick(){return history.push(\"/admin/inventory\");}},t(\"Stocks PO\")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},t(\"\".concat(this.props.match.params.id&&\"View\",\" Stocks PO Approved\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"PO-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"PO No\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{disabled:true,placeholder:\"Auto generated\",value:PO_NO,name:\"PO_NO\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Supplier\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalSelect,{options:supOption,disabled:disableEdit,value:SUPP_Code,name:\"SUPP_Code\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"PO Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:PO_DATE?new Date(PO_DATE):new Date(),name:\"PO_DATE\"//className=\"dob-pick\"\n,showYearDropdown:true,dateFormat:\"dd/MM/yyyy\"// maxDate={new Date(toDate)}\n,showDisabledMonthNavigation:true})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Contact Person\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalSelect,{options:contactOption,disabled:disableEdit,value:contactPerson,name:\"contactPerson\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Status\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{disabled:true// placeholder=\"Auto generated\"\n,value:PO_STATUS,name:\"PO_STATUS\",onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Store Code\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalSelect,{options:[{value:1,label:this.props.tokenDetail.branch}],disabled:disableEdit,value:ItemSite_Code,name:\"ItemSite_Code\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Remarks\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-desc\"},/*#__PURE__*/React.createElement(NormalTextarea,{placeholder:\"Enter here\",disabled:disableEdit,value:PO_REMK1,name:\"PO_REMK1\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pt-3\"},t(\"Terms Of Payment\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-normal\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:disableEdit,value:terms,name:\"terms\",onKeyPress:function onKeyPress(event){if(!/[0-9]/.test(event.key)){event.preventDefault();}},onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 PO-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"}),/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerSelectedDetails// queryHandler={this.handlePagination}\n// pageMeta={pageMeta}\n},storedItemList?storedItemList.map(function(item,index){var item_code=item.item_code,Item_Desc=item.Item_Desc,UOM_DESC=item.UOM_DESC,POD_ITEMPRICE=item.POD_ITEMPRICE,POD_QTY=item.POD_QTY,POD_APPQTY=item.POD_APPQTY;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},Item_Desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},UOM_DESC)),/*#__PURE__*/React.createElement(Blur,{radius:blur?\"10px\":\"\"},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},POD_ITEMPRICE))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},POD_QTY)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},POD_APPQTY)));}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\"},t(\"Total Cost\")),/*#__PURE__*/React.createElement(Blur,{radius:blur?\"10px\":\"\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-address w-100\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:true,value:PO_TTAMT,name:\"PO_TTAMT\"// onChange={this.handleChangeDetails}\n})))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\"},t(\"Total Quantity\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-address w-100\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:true,value:PO_TTQTY,name:\"PO_TTQTY\",onChange:this.handleChange})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",mainbg:true,className:\"confirm\",label:\"Back\",outline:false,onClick:function onClick(){return history.push(\"/admin/inventory\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",disabled:this.props.match.params.id?false:true,mainbg:true,className:\"confirm\",label:\"Print PDF\",outline:false,onClick:function onClick(){return _this2.getListDetail();}})),isPrintPdfClick?/*#__PURE__*/React.createElement(PDFDownloadLink,{document:/*#__PURE__*/React.createElement(PDF,{listDetail:listDetail,itemDetail:storedItemList// Flag={activeTab !== \"detail\" ? 3 : 4}\n,landscape:false,blur:blur})},function(_ref2){var blob=_ref2.blob,url=_ref2.url,loading=_ref2.loading,error=_ref2.error;return!loading&&url?_this2.handlePrintPdfFormat(url):null;}):null))));}}]);return AddStocksPOApprovedClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{tokenDetail:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonUpdateApi:commonUpdateApi,getTokenDetails:getTokenDetails},dispatch);};export var AddStocksPOApproved=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(AddStocksPOApprovedClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Inventory/StocksPOApproved/AddStocksPOApproved/index.js"],"names":["React","Component","Link","SimpleReactValidator","NormalInput","NormalSelect","NormalButton","NormalDateTime","NormalMultiSelect","NormalTextarea","TableWrapper","displayImg","dateFormat","getJobtitle","getCommonApi","commonCreateApi","commonUpdateApi","connect","bindActionCreators","FormGroup","Label","Input","withTranslation","NavLink","getTokenDetails","history","PDFViewer","PDFDownloadLink","BlobProvider","PDF","Blur","AddStocksPOApprovedClass","state","formFields","PO_NO","SUPP_Code","PO_DATE","Date","contactPerson","PO_STATUS","ItemSite_Code","PO_REMK1","terms","PO_TTQTY","PO_TTAMT","headerSelectedDetails","label","listDetail","siteAddr","statusOption","contactOption","supOption","storedItemList","isPrintPdfClick","disableEdit","is_loading","isMounted","blur","componentDidMount","console","log","props","getSup","getContact","getSiteDetail","updateState","data","setState","then","res","key","push","value","ContactInfo_ID","ContactInfo_Name","suppCode","Supplier_Code","phone","ContactInfo_PhoneNo","email","ContactInfo_Email","active","Active","match","params","id","autoFillForm","tokenDetail","role_code","SPLY_CODE","SUPPLYDESC","addr1","SPLY_ADDR1","addr2","SPLY_ADDR2","addr3","SPLY_ADDR3","postalCode","SPLY_POSCD","SPLY_STATE","city","SPLY_CITY","country","SPLY_CNTRY","getAutofillItemDetails","status","dataList","item","item_code","POD_ITEMCODE","Item_Desc","POD_ITEMDESC","ITEM_UOM","BrandCode","UOM_DESC","BrandName","POD_ITEMPRICE","POD_QTY","POD_APPQTY","length","find","option","handlePrintPdfFormat","url","a","document","createElement","setAttribute","click","window","open","getListDetail","addr","site","site_code","ItemSite_Address","supAddr","supInfo","Supplier","contactPhone","contactEmail","storeName","branch","printedBy","username","totalQty","totalAmt","t","handleChange","handleDatePick","event","test","preventDefault","map","index","blob","loading","error","mapStateToProps","authStore","tokenDetails","mapDispatchToProps","dispatch","AddStocksPOApproved"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport {\r\n  NormalInput,\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalDateTime,\r\n  NormalMultiSelect,\r\n  NormalTextarea,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { displayImg, dateFormat } from \"service/helperFunctions\";\r\nimport {\r\n  getJobtitle,\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonUpdateApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { FormGroup, Label, Input } from \"reactstrap\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { getTokenDetails } from \"redux/actions/auth\";\r\nimport { history } from \"helpers\";\r\nimport { PDFViewer, PDFDownloadLink, BlobProvider } from \"@react-pdf/renderer\";\r\nimport PDF from \"../../StocksPDF/POApproved/index\";\r\nimport Blur from \"react-css-blur\";\r\n\r\nexport class AddStocksPOApprovedClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      PO_NO: \"\",\r\n      SUPP_Code: \"\",\r\n      PO_DATE: new Date(),\r\n      contactPerson: \"\",\r\n      PO_STATUS: \"\",\r\n      ItemSite_Code: \"\",\r\n      PO_REMK1: \"\",\r\n      terms: \"\",\r\n      PO_TTQTY: \"\",\r\n      PO_TTAMT: \"\",\r\n    },\r\n    headerSelectedDetails: [\r\n      { label: \"Item Code\" },\r\n      { label: \"Item Description\" },\r\n      { label: \"UOM\" },\r\n      // { label: \"Brand\" },\r\n      // { label: \"Range\" },\r\n      { label: \"Unit Price\" },\r\n      { label: \"Required Qty\" },\r\n      { label: \"Approved Qty\" },\r\n    ],\r\n\r\n    listDetail: {},\r\n    siteAddr: [],\r\n\r\n    statusOption: [],\r\n    contactOption: [],\r\n    supOption: [],\r\n\r\n    storedItemList: [],\r\n    isPrintPdfClick: false,\r\n\r\n    disableEdit: true,\r\n    is_loading: true,\r\n    isMounted: true,\r\n\r\n    blur: false,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    console.log(\"this.props\", this.props);\r\n\r\n    console.log(\"this.state\", this.state);\r\n    // console.log(\"useLocation()\",useLocation())\r\n\r\n    this.getSup();\r\n    this.getContact();\r\n    this.getSiteDetail();\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  getContact = () => {\r\n    let { contactOption, blur } = this.state;\r\n    contactOption = [];\r\n    this.props.getCommonApi(`supplycontactinfo`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        contactOption.push({\r\n          value: key.ContactInfo_ID,\r\n          label: key.ContactInfo_Name,\r\n          suppCode: key.Supplier_Code,\r\n          phone: key.ContactInfo_PhoneNo,\r\n          email: key.ContactInfo_Email,\r\n          active: key.Active,\r\n        });\r\n      }\r\n      console.log(\"contactOption\", contactOption);\r\n      this.setState({ contactOption });\r\n      if (this.props.match.params.id) {\r\n        this.autoFillForm();\r\n      }\r\n      if (\r\n        this.props.tokenDetail.role_code !== \"1\" &&\r\n        this.props.tokenDetail.role_code !== \"2\"\r\n      ) {\r\n        blur = true;\r\n        this.setState({ blur });\r\n      }\r\n    });\r\n  };\r\n\r\n  getSup = () => {\r\n    let { supOption } = this.state;\r\n    supOption = [];\r\n    this.props.getCommonApi(`itemsupply`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        supOption.push({\r\n          value: key.SPLY_CODE,\r\n          label: key.SUPPLYDESC,\r\n          addr1: key.SPLY_ADDR1,\r\n          addr2: key.SPLY_ADDR2,\r\n          addr3: key.SPLY_ADDR3,\r\n          postalCode: key.SPLY_POSCD,\r\n          state: key.SPLY_STATE,\r\n          city: key.SPLY_CITY,\r\n          country: key.SPLY_CNTRY,\r\n          // active: key.itm_isactive,\r\n        });\r\n      }\r\n      console.log(\"supOption\", supOption);\r\n      this.setState({ supOption });\r\n    });\r\n  };\r\n\r\n  getSiteDetail = () => {\r\n    let { siteAddr } = this.state;\r\n    siteAddr = [];\r\n    this.props.getCommonApi(`sitecode`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      siteAddr = res.data;\r\n      console.log(\"siteAddr\", siteAddr);\r\n      this.setState({ siteAddr });\r\n    });\r\n  };\r\n\r\n  getAutofillItemDetails = PO_NO => {\r\n    console.log(\"PO_NO\", PO_NO);\r\n    this.props\r\n      .getCommonApi(`poapprovalitem/?searchpono=${PO_NO}&limit=10000`)\r\n      .then(res => {\r\n        console.log(\"res in getAutofillItemDetails\", res);\r\n        // this.state.storedItemListStored = res.data.dataList\r\n        if (res.status == 200) {\r\n          for (let item of res.data.dataList) {\r\n            this.state.storedItemList.push({\r\n              item_code: item.POD_ITEMCODE,\r\n              Item_Desc: item.POD_ITEMDESC,\r\n              ITEM_UOM: item.BrandCode,\r\n              UOM_DESC: item.BrandName,\r\n              POD_ITEMPRICE: item.POD_ITEMPRICE,\r\n              POD_QTY: item.POD_QTY,\r\n              POD_APPQTY: item.POD_APPQTY,\r\n            });\r\n            // this.state.itemListBeforeEdit.push({\"item_id\":item.PO_ID,\"item_code\":item.POD_ITEMCODE,\"UOM_DESC\":item.BrandName})\r\n          }\r\n          this.setState(this.state.storedItemList);\r\n          // this.setState(this.state.itemListBeforeEdit)\r\n          // console.log(\"this.state.itemListBeforeEdit\",this.state.itemListBeforeEdit)\r\n        }\r\n      });\r\n  };\r\n\r\n  autoFillForm = () => {\r\n    let { disableEdit, statusOption, contactOption, supOption } = this.state;\r\n\r\n    this.props\r\n      .getCommonApi(`poapprovallist/?searchpoid=${this.props.match.params.id}`)\r\n      .then(async res => {\r\n        console.log(\"po dataList\", res.data.dataList);\r\n        // console.log(\"quo dataList cust name\", res.data.dataList[0].customer_name);\r\n        // custName = res.data.dataList[0].customer_name\r\n        // this.state.projectList = res.data.dataList\r\n        this.state.formFields[\"PO_NO\"] = res.data.dataList[0].PO_NO;\r\n        this.state.formFields[\"SUPP_Code\"] = res.data.dataList[0].SUPP_Code;\r\n\r\n        // if (res.data.dataList[0].SUPP_Code && supOption.length!==0) {\r\n        //   //matching status name with the id to set prefill status in dropdown\r\n        //   this.state.formFields[\"SUPP_Code\"] = supOption.find(option => option.label === res.data.dataList[0].SUPP_Code).value\r\n        //   console.log(\"res.data.dataList[0].SUPP_Code\",res.data.dataList[0].SUPP_Code)\r\n        // }\r\n        // this.state.formFields[\"SUPP_Code\"] = res.data.dataList[0].SUPP_Code\r\n        this.state.formFields[\"PO_DATE\"] = res.data.dataList[0].PO_DATE;\r\n\r\n        console.log(\"contactOption in autofill\", contactOption);\r\n        console.log(\r\n          \"res.data.dataList[0].contactPerson\",\r\n          res.data.dataList[0].contactPerson\r\n        );\r\n\r\n        if (res.data.dataList[0].contactPerson && contactOption.length !== 0) {\r\n          //matching status name with the id to set prefill status in dropdown\r\n          this.state.formFields[\"contactPerson\"] = contactOption.find(\r\n            option => option.label === res.data.dataList[0].contactPerson\r\n          ).value;\r\n          console.log(\r\n            \"res.data.dataList[0].contactPerson\",\r\n            res.data.dataList[0].contactPerson\r\n          );\r\n        }\r\n\r\n        this.state.formFields[\"PO_STATUS\"] = res.data.dataList[0].PO_STATUS;\r\n\r\n        // console.log(\"statusOption in prefill\",this.state.statusOption)\r\n        // console.log(\"res.data.dataList[0].status\",res.data.dataList[0].status)\r\n        // if status empty prevent err\r\n        // if (res.data.dataList[0].PO_STATUS && statusOption.length!==0) {\r\n        //   //matching status name with the id to set prefill status in dropdown\r\n        //   this.state.formFields[\"PO_STATUS\"] = statusOption.find(option => option.label === res.data.dataList[0].PO_STATUS).value\r\n        //   console.log(\"res.data.dataList[0].PO_STATUS\",res.data.dataList[0].PO_STATUS)\r\n        //   if(res.data.dataList[0].PO_STATUS == \"Posted\"){\r\n        //     disableEdit = true\r\n\r\n        //     // for (var i = 0; i < statusOption.length; i++){\r\n        //     //   if(statusOption[i].label == \"Posted\") {\r\n        //     //     statusOption = statusOption.filter(e => e.label !== 'Open')\r\n        //     //   }\r\n        //     // }\r\n        //     // console.log(\"statusOption when status is posted\",statusOption)\r\n\r\n        //     this.setState({disableEdit})\r\n        //     console.log(\"this.state.disableEdit\",disableEdit)\r\n        //   }\r\n        // }\r\n        this.state.formFields[\"ItemSite_Code\"] = 1;\r\n        this.state.formFields[\"PO_REMK1\"] = res.data.dataList[0].PO_REMK1;\r\n        this.state.formFields[\"terms\"] = res.data.dataList[0].terms;\r\n        this.state.formFields[\"PO_TTQTY\"] = res.data.dataList[0].PO_TTQTY;\r\n        this.state.formFields[\"PO_TTAMT\"] = res.data.dataList[0].PO_TTAMT;\r\n\r\n        // this.state.formFieldsDetailsStored.PO_TTQTY = res.data.dataList[0].PO_TTQTY\r\n\r\n        this.updateState(this.state.formFields);\r\n        // this.setState(this.state.formFieldsDetailsStored)\r\n        // console.log(\"this.state.formFieldsDetailsStored\",this.state.formFieldsDetailsStored)\r\n        console.log(\"this.state.formFields\", this.state.formFields);\r\n        this.getAutofillItemDetails(res.data.dataList[0].PO_NO);\r\n      });\r\n  };\r\n\r\n  handlePrintPdfFormat = url => {\r\n    this.setState({\r\n      isPrintPdfClick: false,\r\n    });\r\n    var a = document.createElement(\"a\");\r\n    a.setAttribute(\"download\", `${new Date()}.pdf`);\r\n    a.setAttribute(\"href\", url);\r\n    a.click();\r\n    window.open(url);\r\n  };\r\n\r\n  getListDetail = () => {\r\n    let {\r\n      siteAddr,\r\n      supOption,\r\n      contactOption,\r\n      listDetail,\r\n      formFields,\r\n      isPrintPdfClick,\r\n    } = this.state;\r\n\r\n    let addr = \"\";\r\n\r\n    for (let site of siteAddr) {\r\n      if (site.ItemSite_Code == this.props.tokenDetail.site_code) {\r\n        addr = site.ItemSite_Address;\r\n      }\r\n    }\r\n\r\n    let supAddr = \"\";\r\n    let supInfo = \"\";\r\n\r\n    if (formFields.SUPP_Code && supOption) {\r\n      supInfo = supOption.find(option => option.value === formFields.SUPP_Code);\r\n      supAddr =\r\n        supInfo.addr1 +\r\n        \" \" +\r\n        supInfo.addr2 +\r\n        \" \" +\r\n        supInfo.addr3 +\r\n        \" \" +\r\n        supInfo.postalCode +\r\n        \" \" +\r\n        supInfo.state +\r\n        \" \" +\r\n        supInfo.city +\r\n        \" \" +\r\n        supInfo.country;\r\n      console.log(\"supAddr\", supAddr);\r\n    }\r\n\r\n    listDetail = {\r\n      PO_NO: formFields.PO_NO,\r\n      Supplier:\r\n        formFields.SUPP_Code && supOption\r\n          ? supOption.find(option => option.value === formFields.SUPP_Code)\r\n              .label\r\n          : \"\",\r\n      supAddr: supAddr ? supAddr : \"\",\r\n      contactPhone:\r\n        formFields.contactPerson && contactOption\r\n          ? contactOption.find(\r\n              option => option.value === formFields.contactPerson\r\n            ).phone\r\n          : \"\",\r\n      contactEmail:\r\n        formFields.contactPerson && contactOption\r\n          ? contactOption.find(\r\n              option => option.value === formFields.contactPerson\r\n            ).email\r\n          : \"\",\r\n      contactPerson:\r\n        formFields.contactPerson && contactOption\r\n          ? contactOption.find(\r\n              option => option.value === formFields.contactPerson\r\n            ).label\r\n          : \"\",\r\n      PO_DATE: formFields.PO_DATE,\r\n      terms: formFields.terms,\r\n      storeName: this.props.tokenDetail.branch,\r\n      printedBy: this.props.tokenDetail.username,\r\n      totalQty: formFields.PO_TTQTY,\r\n      totalAmt: formFields.PO_TTAMT,\r\n      addr: addr,\r\n    };\r\n    console.log(\"listDetail in getListDetail\", listDetail);\r\n\r\n    isPrintPdfClick = true;\r\n    this.setState({ listDetail, isPrintPdfClick });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      formFields,\r\n      storedItemList,\r\n      headerSelectedDetails,\r\n      disableEdit,\r\n      contactOption,\r\n      supOption,\r\n      isPrintPdfClick,\r\n      listDetail,\r\n      blur,\r\n    } = this.state;\r\n\r\n    let {\r\n      PO_NO,\r\n      SUPP_Code,\r\n      PO_DATE,\r\n      contactPerson,\r\n      PO_STATUS,\r\n      ItemSite_Code,\r\n      PO_REMK1,\r\n      terms,\r\n      PO_TTQTY,\r\n      PO_TTAMT,\r\n    } = formFields;\r\n\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"px-5  create-PO\">\r\n        <div className=\"head-label-nav\">\r\n          <p\r\n            className=\"category cursor-pointer\"\r\n            onClick={() => history.push(`/admin/inventory`)}\r\n          >\r\n            {t(\"Stocks PO\")}\r\n          </p>\r\n          <i className=\"icon-right mx-md-3\"></i>\r\n          <p className=\"sub-category\">\r\n            {t(`${this.props.match.params.id && \"View\"} Stocks PO Approved`)}\r\n          </p>\r\n        </div>\r\n        <div className=\"PO-detail\">\r\n          <div className=\"form-group mb-4 pb-2\">\r\n            <div className=\"row mt-5\">\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"PO No\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    disabled={true}\r\n                    placeholder=\"Auto generated\"\r\n                    value={PO_NO}\r\n                    name=\"PO_NO\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                    {this.validator.message(\r\n                      t(\"PO No\"),\r\n                      PONumber,\r\n                      t(\"required\")\r\n                    )}\r\n                  </div> */}\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Supplier\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalSelect\r\n                    options={supOption}\r\n                    disabled={disableEdit}\r\n                    value={SUPP_Code}\r\n                    name=\"SUPP_Code\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                    {this.validator.message(\r\n                      t(\"Supplier\"),\r\n                      SUPP_Code,\r\n                      t(\"required\")\r\n                    )}\r\n                  </div> */}\r\n              </div>\r\n\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"PO Date\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalDateTime\r\n                    onChange={this.handleDatePick}\r\n                    inputcol=\"p-0 inTime\"\r\n                    value={PO_DATE ? new Date(PO_DATE) : new Date()}\r\n                    name=\"PO_DATE\"\r\n                    //className=\"dob-pick\"\r\n                    showYearDropdown={true}\r\n                    dateFormat=\"dd/MM/yyyy\"\r\n                    // maxDate={new Date(toDate)}\r\n                    showDisabledMonthNavigation\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                    {this.validator.message(\r\n                      t(\"PO Date\"),\r\n                      PO_DATE,\r\n                      t(\"required\")\r\n                    )}\r\n                  </div> */}\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Contact Person\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalSelect\r\n                    options={contactOption}\r\n                    disabled={disableEdit}\r\n                    value={contactPerson}\r\n                    name=\"contactPerson\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                    {this.validator.message(\r\n                      t(\"Contact Person\"),\r\n                      contactPerson,\r\n                      t(\"required\")\r\n                    )}\r\n                  </div> */}\r\n              </div>\r\n\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Status\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    disabled={true}\r\n                    // placeholder=\"Auto generated\"\r\n                    value={PO_STATUS}\r\n                    name=\"PO_STATUS\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                    {this.validator.message(\r\n                      t(\"Status\"),\r\n                      PO_STATUS,\r\n                      t(\"required\")\r\n                    )}\r\n                  </div> */}\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Store Code\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalSelect\r\n                    options={[\r\n                      { value: 1, label: this.props.tokenDetail.branch },\r\n                    ]}\r\n                    disabled={disableEdit}\r\n                    value={ItemSite_Code}\r\n                    name=\"ItemSite_Code\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                    {this.validator.message(\r\n                      t(\"Store Code\"),\r\n                      ItemSite_Code,\r\n                      t(\"required\")\r\n                    )}\r\n                  </div> */}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Remarks\")}\r\n                </label>\r\n                <div className=\"input-group-desc\">\r\n                  <NormalTextarea\r\n                    placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={PO_REMK1}\r\n                    name=\"PO_REMK1\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-2 col-12\"></div>\r\n\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-3\">\r\n                  {t(\"Terms Of Payment\")}\r\n                </label>\r\n                <div className=\"input-group-normal\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    disabled={disableEdit}\r\n                    value={terms}\r\n                    name=\"terms\"\r\n                    onKeyPress={event => {\r\n                      if (!/[0-9]/.test(event.key)) {\r\n                        event.preventDefault();\r\n                      }\r\n                    }}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {/* <div>\r\n                    {this.validator.message(\r\n                      t(\"Quotation Number\"),\r\n                      terms,\r\n                      t(\"required\")\r\n                    )}\r\n                  </div> */}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-md-12 PO-content\">\r\n              <div className=\"row mt-5\"></div>\r\n              <TableWrapper\r\n                headerDetails={headerSelectedDetails}\r\n                // queryHandler={this.handlePagination}\r\n                // pageMeta={pageMeta}\r\n              >\r\n                {storedItemList\r\n                  ? storedItemList.map((item, index) => {\r\n                      let {\r\n                        item_code,\r\n                        Item_Desc,\r\n                        UOM_DESC,\r\n                        POD_ITEMPRICE,\r\n                        POD_QTY,\r\n                        POD_APPQTY,\r\n                      } = item;\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {item_code}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {Item_Desc}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {UOM_DESC}\r\n                            </div>\r\n                          </td>\r\n                          <Blur radius={blur ? \"10px\" : \"\"}>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {POD_ITEMPRICE}\r\n                              </div>\r\n                            </td>\r\n                          </Blur>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {POD_QTY}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              {POD_APPQTY}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n\r\n              <div className=\"row justify-content-end mt-5\">\r\n                <div className=\"col-4\">\r\n                  <div className=\"d-flex mb-3\">\r\n                    <label className=\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\">\r\n                      {t(\"Total Cost\")}\r\n                    </label>\r\n                    <Blur radius={blur ? \"10px\" : \"\"}>\r\n                      <div className=\"input-group-address w-100\">\r\n                        <NormalInput\r\n                          placeholder=\"Enter here\"\r\n                          disabled={true}\r\n                          value={PO_TTAMT}\r\n                          name=\"PO_TTAMT\"\r\n                          // onChange={this.handleChangeDetails}\r\n                        />\r\n                      </div>\r\n                    </Blur>\r\n                  </div>\r\n                  {/* <div>\r\n                        {this.props.validator.message(\r\n                          t(\"Total Cost\"),\r\n                          PO_TTAMT,\r\n                          t(\"required\")\r\n                        )}\r\n                    </div> */}\r\n\r\n                  <div className=\"d-flex mb-3\">\r\n                    <label className=\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\">\r\n                      {t(\"Total Quantity\")}\r\n                    </label>\r\n                    <div className=\"input-group-address w-100\">\r\n                      <NormalInput\r\n                        placeholder=\"Enter here\"\r\n                        disabled={true}\r\n                        value={PO_TTQTY}\r\n                        name=\"PO_TTQTY\"\r\n                        onChange={this.handleChange}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  {/* <div>\r\n                        {this.validator.message(\r\n                          t(\"Total\"),\r\n                          PO_TTQTY,\r\n                          t(\"required\")\r\n                        )}\r\n                    </div> */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row justify-content-end\">\r\n              {/* <div className=\"col-md-6 col-12 mt-3\"></div> */}\r\n\r\n              <div className=\"col-md-3 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Back\"\r\n                  outline={false}\r\n                  onClick={() => history.push(`/admin/inventory`)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"col-md-3 col-12 mt-3\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  disabled={this.props.match.params.id ? false : true}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Print PDF\"\r\n                  outline={false}\r\n                  onClick={() => this.getListDetail()}\r\n                />\r\n              </div>\r\n              {isPrintPdfClick ? (\r\n                <PDFDownloadLink\r\n                  document={\r\n                    <PDF\r\n                      listDetail={listDetail}\r\n                      itemDetail={storedItemList}\r\n                      // Flag={activeTab !== \"detail\" ? 3 : 4}\r\n                      landscape={false}\r\n                      blur={blur}\r\n                    />\r\n                  }\r\n                >\r\n                  {({ blob, url, loading, error }) =>\r\n                    !loading && url ? this.handlePrintPdfFormat(url) : null\r\n                  }\r\n                </PDFDownloadLink>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* )} */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetail: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonUpdateApi,\r\n      getTokenDetails,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const AddStocksPOApproved = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(AddStocksPOApprovedClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}