{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\Admin\\\\CustomerPlus\\\\ListCustomerPlus\\\\index.js\";\nimport React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport { Link } from \"react-router-dom\";\nimport \"./style.scss\";\nimport { getCustomerPlus, getCustomerPlusSettings } from \"redux/actions/customerPlus\";\nimport { updateForm, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nimport birthdayIcon from \"assets/images/app-icons/3.png\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { withTranslation } from \"react-i18next\";\nexport class ListCustomerPlusClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [],\n      customerList: [],\n      originalCustomerList: [],\n      search: \"\",\n      meta: {},\n      active: false,\n      currentIndex: -1,\n      isLoading: true,\n      isExportLoading: false,\n      isMounted: true,\n      orderBy: \"desc\"\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.componentDidMount = () => {\n      this.getCustomerPlus({});\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.updateState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n\n    this.getCustomerPlus = async data => {\n      this.updateState({\n        isLoading: true\n      });\n\n      try {\n        var _customerDetails$meta;\n\n        let {\n          search,\n          headerDetails\n        } = this.state;\n        let {\n          page = 1,\n          limit = 10\n        } = data;\n\n        if (headerDetails.length == 0) {\n          await this.props.getCustomerPlusSettings();\n          let {\n            settings\n          } = this.props;\n\n          for (let {\n            display_field_name,\n            field_name,\n            visible_in_listing\n          } of settings) {\n            if (visible_in_listing) headerDetails.push({\n              label: display_field_name,\n              field: field_name,\n              sortKey: field_name,\n              singleClickFunc: () => this.handleSort(field_name)\n            });\n          }\n\n          headerDetails.push({\n            label: \"\"\n          });\n          this.updateState({\n            headerDetails\n          });\n        }\n\n        await this.props.getCustomerPlus(`?page=${page}&limit=${limit}&search=${search}`);\n        let {\n          customerDetails\n        } = this.props;\n        this.updateState({\n          customerList: customerDetails.dataList,\n          originalCustomerList: customerDetails.dataList,\n          meta: (_customerDetails$meta = customerDetails.meta) === null || _customerDetails$meta === void 0 ? void 0 : _customerDetails$meta.pagination,\n          isLoading: false\n        });\n      } catch (e) {\n        console.log(e, \"listcustomerplus\");\n      }\n    };\n\n    this.handlePagination = page => {\n      this.getCustomerPlus(page);\n    };\n\n    this.handlesearch = event => {\n      console.log(event.target.value);\n      let {\n        search\n      } = this.state;\n      search = event.target.value;\n      this.setState({\n        search\n      });\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(async () => {\n          this.getCustomerPlus({});\n        }, 500);\n      }\n\n      this.debouncedFn();\n    };\n\n    this.bookAppointment = async data => {\n      let formFields = {};\n      formFields[\"custId\"] = data.id;\n      formFields[\"custName\"] = data.cust_name;\n      await this.props.updateForm(\"basicApptDetail\", formFields);\n      this.props.history.push(`/admin/newappointment`);\n    };\n\n    this.handleExportClick = async () => {\n      this.updateState({\n        isExportLoading: true\n      });\n      let {\n        search\n      } = this.state;\n      let {\n        page\n      } = 1;\n      let {\n        limit\n      } = 10;\n      let exceldata = 1;\n      this.props.getCustomerPlus(`?page=${page}&limit=${limit}&search=${search}&excel=${exceldata}`).then(async res => {\n        let {\n          data\n        } = res;\n        console.log(res, \"exportclickresponse\");\n        await this.updateState({\n          isExportLoading: false\n        });\n\n        if (data) {\n          // window.open(data);\n          var a = document.createElement(\"a\");\n          a.setAttribute(\"href\", data);\n          a.click();\n        }\n      });\n    };\n\n    this.handleSort = (sortkey, order) => {\n      let {\n        customerList,\n        headerDetails,\n        orderBy\n      } = this.state;\n      this.setState({\n        orderBy: this.state.orderBy == \"asc\" ? \"desc\" : \"asc\"\n      });\n\n      if (orderBy === \"asc\") {\n        customerList.sort((a, b) => a[sortkey] > b[sortkey] ? 1 : b[sortkey] > a[sortkey] ? -1 : 0);\n      } else {\n        customerList.sort((a, b) => a[sortkey] < b[sortkey] ? 1 : b[sortkey] < a[sortkey] ? -1 : 0);\n      }\n\n      this.setState({\n        customerList\n      });\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  render() {\n    let {\n      headerDetails,\n      originalCustomerList,\n      customerList,\n      meta,\n      currentIndex,\n      isLoading,\n      isExportLoading\n    } = this.state;\n    let {\n      t,\n      tokenDetail\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customer-list container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }, Number(tokenDetail.role_code) === 1 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-lg-2 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/admin/customerplus/settings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      normal: true,\n      className: \"col-12 fs-15 float-right\",\n      label: \"Settings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-lg-3 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/admin/customerplus/lpmanagement\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      normal: true,\n      className: \"col-12 fs-15 float-right\",\n      label: \"LP Management\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    })))) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5 col-12 h5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 19\n      }\n    }, t(\"Customer List\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end flex-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 float-right\",\n      label: \"Outstanding Customer List\",\n      onClick: () => this.props.history.push(\"/admin/customerplus/outstanding\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12 col-sm-12 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(InputSearch, {\n      className: \"\",\n      placeholder: \"Search Customer\",\n      onChange: this.handlesearch,\n      disabled: isLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 float-right\",\n      label: \"Add Customer\",\n      onClick: () => this.props.history.push(\"/admin/customerplus/add\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: meta,\n      showFilterColumn: true,\n      parentHeaderChange: value => this.updateState(() => headerDetails = value) // sortData={originalCustomerList}\n      // onSort={list => this.updateState({ customerList: list })}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 19\n      }\n    }, isLoading ? /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 31\n      }\n    }, \"Loading...\"))))) : customerList ? customerList.map((item, index) => {\n      let {\n        id,\n        cust_code,\n        cust_refer,\n        cust_name,\n        cust_phone2,\n        cust_dob,\n        class_name,\n        birthday\n      } = item;\n      let date = new Date(cust_dob); //cust_dob = date.toLocaleDateString();\n\n      cust_dob = dateFormat(date, \"dd-mm-yyyy\");\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        onClick: () => this.props.history.push(`/admin/customerplus/${id}/details`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 27\n        }\n      }, headerDetails.map((e, index) => e.field ? /*#__PURE__*/React.createElement(\"td\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 35\n        }\n      }, item[e.field])) : null), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"position-relative d-none\",\n        ref: node => {\n          this.node = node;\n        },\n        onClick: () => this.handleClick(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 29\n        }\n      }, currentIndex === index ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more-active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"option card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pt-3\",\n        onClick: () => this.props.history.push(`/admin/customerplus/${id}/details`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-eye-grey px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 39\n        }\n      }), t(\"View\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16\",\n        onClick: () => this.props.history.push(`/admin/customerplus/${id}/lpmanagement`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"px-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"31\",\n        height: \"30\",\n        fill: \"currentColor\",\n        viewBox: \"0 0 15 30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"path\", {\n        d: \"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 43\n        }\n      }))), t(\"Loyalty Points Management\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-schedule px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 39\n        }\n      }), \" \", t(\"Reschedule Appointment\"), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16\",\n        onClick: () => this.bookAppointment(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"px-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        width: \"31\",\n        height: \"30\",\n        viewBox: \"0 0 31 30\",\n        fill: \"none\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"rect\", {\n        width: \"31\",\n        height: \"30\",\n        fill: \"#F9F9F9\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 43\n        }\n      }), /*#__PURE__*/React.createElement(\"path\", {\n        d: \"M15 8V22\",\n        stroke: \"#848484\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 43\n        }\n      }), /*#__PURE__*/React.createElement(\"path\", {\n        d: \"M8 15H22\",\n        stroke: \"#848484\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 43\n        }\n      }))), t(\"Book Appointment\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-cancel-schedule px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 39\n        }\n      }), \" \", t(\"Cancel Appointment\"), \" \"))) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 35\n        }\n      }))));\n    }) : null)))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  customerDetails: state.customerPlus.customerPlusDetail,\n  settings: state.customerPlus.customerPlusSettings,\n  tokenDetail: state.authStore.tokenDetails\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCustomerPlus,\n    updateForm,\n    getCustomerPlusSettings,\n    getCommonApi\n  }, dispatch);\n};\n\nexport const ListCustomerPlus = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(ListCustomerPlusClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/CustomerPlus/ListCustomerPlus/index.js"],"names":["React","NormalButton","InputSearch","TableWrapper","Link","getCustomerPlus","getCustomerPlusSettings","updateForm","getCommonApi","connect","bindActionCreators","_","birthdayIcon","dateFormat","withTranslation","ListCustomerPlusClass","Component","state","headerDetails","customerList","originalCustomerList","search","meta","active","currentIndex","isLoading","isExportLoading","isMounted","orderBy","updateState","data","setState","componentDidMount","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","page","limit","length","props","settings","display_field_name","field_name","visible_in_listing","push","label","field","sortKey","singleClickFunc","handleSort","customerDetails","dataList","pagination","console","log","handlePagination","handlesearch","event","value","debouncedFn","debounce","bookAppointment","formFields","id","cust_name","history","handleExportClick","exceldata","then","res","a","createElement","setAttribute","click","sortkey","order","sort","b","componentWillUnmount","render","t","tokenDetail","Number","role_code","map","item","index","cust_code","cust_refer","cust_phone2","cust_dob","class_name","birthday","date","Date","mapStateToProps","customerPlus","customerPlusDetail","customerPlusSettings","authStore","tokenDetails","mapDispatchToProps","dispatch","ListCustomerPlus"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport { Link } from \"react-router-dom\";\nimport \"./style.scss\";\nimport {\n  getCustomerPlus,\n  getCustomerPlusSettings,\n} from \"redux/actions/customerPlus\";\nimport { updateForm, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nimport birthdayIcon from \"assets/images/app-icons/3.png\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { withTranslation } from \"react-i18next\";\n\nexport class ListCustomerPlusClass extends React.Component {\n  state = {\n    headerDetails: [],\n    customerList: [],\n    originalCustomerList: [],\n    search: \"\",\n    meta: {},\n    active: false,\n    currentIndex: -1,\n    isLoading: true,\n    isExportLoading: false,\n    isMounted: true,\n    orderBy: \"desc\",\n  };\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = data => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount = () => {\n    this.getCustomerPlus({});\n  };\n\n  handleClick = key => {\n    if (!this.state.active) {\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\n    }\n\n    this.updateState(prevState => ({\n      active: !prevState.active,\n      currentIndex: key,\n    }));\n  };\n\n  handleOutsideClick = e => {\n    if (this.node != null) {\n      if (this.node.contains(e.target)) {\n        return;\n      }\n    }\n    this.handleClick();\n  };\n\n  getCustomerPlus = async data => {\n    this.updateState({ isLoading: true });\n    try {\n      let { search, headerDetails } = this.state;\n      let { page = 1, limit = 10 } = data;\n      if (headerDetails.length == 0) {\n        await this.props.getCustomerPlusSettings();\n        let { settings } = this.props;\n        for (let {\n          display_field_name,\n          field_name,\n          visible_in_listing,\n        } of settings) {\n          if (visible_in_listing)\n            headerDetails.push({\n              label: display_field_name,\n              field: field_name,\n              sortKey: field_name,\n              singleClickFunc: () => this.handleSort(field_name),\n            });\n        }\n        headerDetails.push({ label: \"\" });\n        this.updateState({ headerDetails });\n      }\n      await this.props.getCustomerPlus(\n        `?page=${page}&limit=${limit}&search=${search}`\n      );\n      let { customerDetails } = this.props;\n      this.updateState({\n        customerList: customerDetails.dataList,\n        originalCustomerList: customerDetails.dataList,\n        meta: customerDetails.meta?.pagination,\n        isLoading: false,\n      });\n    } catch (e) {\n      console.log(e, \"listcustomerplus\");\n    }\n  };\n\n  handlePagination = page => {\n    this.getCustomerPlus(page);\n  };\n\n  handlesearch = event => {\n    console.log(event.target.value);\n    let { search } = this.state;\n    search = event.target.value;\n    this.setState({ search });\n    if (!this.debouncedFn) {\n      this.debouncedFn = _.debounce(async () => {\n        this.getCustomerPlus({});\n      }, 500);\n    }\n    this.debouncedFn();\n  };\n\n  bookAppointment = async data => {\n    let formFields = {};\n    formFields[\"custId\"] = data.id;\n    formFields[\"custName\"] = data.cust_name;\n    await this.props.updateForm(\"basicApptDetail\", formFields);\n    this.props.history.push(`/admin/newappointment`);\n  };\n  handleExportClick = async () => {\n    this.updateState({ isExportLoading: true });\n    let { search } = this.state;\n    let { page } = 1;\n    let { limit } = 10;\n    let exceldata = 1;\n    this.props\n      .getCustomerPlus(\n        `?page=${page}&limit=${limit}&search=${search}&excel=${exceldata}`\n      )\n      .then(async res => {\n        let { data } = res;\n        console.log(res, \"exportclickresponse\");\n        await this.updateState({\n          isExportLoading: false,\n        });\n        if (data) {\n          // window.open(data);\n          var a = document.createElement(\"a\");\n          a.setAttribute(\"href\", data);\n          a.click();\n        }\n      });\n  };\n\n  handleSort = (sortkey, order) => {\n    let { customerList, headerDetails, orderBy } = this.state;\n    this.setState({\n      orderBy: this.state.orderBy == \"asc\" ? \"desc\" : \"asc\",\n    });\n\n    if (orderBy === \"asc\") {\n      customerList.sort((a, b) =>\n        a[sortkey] > b[sortkey] ? 1 : b[sortkey] > a[sortkey] ? -1 : 0\n      );\n    } else {\n      customerList.sort((a, b) =>\n        a[sortkey] < b[sortkey] ? 1 : b[sortkey] < a[sortkey] ? -1 : 0\n      );\n    }\n    this.setState({\n      customerList,\n    });\n  };\n\n  render() {\n    let {\n      headerDetails,\n      originalCustomerList,\n      customerList,\n      meta,\n      currentIndex,\n      isLoading,\n      isExportLoading,\n    } = this.state;\n    let { t, tokenDetail } = this.props;\n    return (\n      <div className=\"customer-list container-fluid\">\n        {Number(tokenDetail.role_code) === 1 ? (\n          <div className=\"row mb-4\">\n            <div className=\"col-md-4 col-lg-2 mb-2\">\n              <Link to=\"/admin/customerplus/settings\">\n                <NormalButton\n                  normal={true}\n                  className=\"col-12 fs-15 float-right\"\n                  label=\"Settings\"\n                />\n              </Link>\n            </div>\n            <div className=\"col-md-4 col-lg-3 mb-2\">\n              <Link to=\"/admin/customerplus/lpmanagement\">\n                <NormalButton\n                  normal={true}\n                  className=\"col-12 fs-15 float-right\"\n                  label=\"LP Management\"\n                />\n              </Link>\n            </div>\n          </div>\n        ) : null}\n        <div className=\"row\">\n          <div className=\"col\">\n            <div className=\"row\">\n              <div className=\"col-md-12 mb-1\">\n                <div className=\"d-flex flex-wrap\">\n                  <div className=\"col-md-5 col-12 h5\">{t(\"Customer List\")}</div>\n                  <div className=\"col-md-7\">\n                    <div className=\"d-flex justify-content-end flex-wrap\">\n                      <div className=\"col-md-4 col-12 col-sm-12\">\n                        <NormalButton\n                          mainbg={true}\n                          className=\"col-12 fs-15 float-right\"\n                          label=\"Outstanding Customer List\"\n                          onClick={() =>\n                            this.props.history.push(\n                              \"/admin/customerplus/outstanding\"\n                            )\n                          }\n                        />\n                      </div>\n                      <div className=\"col-md-3 col-12 col-sm-12 mb-2\">\n                        <InputSearch\n                          className=\"\"\n                          placeholder=\"Search Customer\"\n                          onChange={this.handlesearch}\n                          disabled={isLoading}\n                        />\n                      </div>\n                      <div className=\"col-md-3 col-12 col-sm-12\">\n                        <NormalButton\n                          mainbg={true}\n                          className=\"col-12 fs-15 float-right\"\n                          label=\"Add Customer\"\n                          onClick={() =>\n                            this.props.history.push(\"/admin/customerplus/add\")\n                          }\n                        />\n                      </div>\n                      <div className=\"col-md-2 col-12 col-sm-12\">\n                        {/*\n                        {isExportLoading ? (\n                          <div class=\"d-flex align-items-center justify-content-center\">\n                            <div class=\"spinner-border\" role=\"status\">\n                              <span class=\"sr-only\">{t(\"Loading...\")}</span>\n                            </div>\n                          </div>\n                        ) : (\n                          <NormalButton\n                            mainbg={true}\n                            className=\"col-12 fs-15 float-right\"\n                            label=\"Export\"\n                            onClick={this.handleExportClick}\n                          />\n                        )}\n                        */}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-md-12\"></div>\n            </div>\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                <div className=\"table-container\">\n                  <TableWrapper\n                    headerDetails={headerDetails}\n                    queryHandler={this.handlePagination}\n                    pageMeta={meta}\n                    showFilterColumn={true}\n                    parentHeaderChange={value =>\n                      this.updateState(() => (headerDetails = value))\n                    }\n                    // sortData={originalCustomerList}\n                    // onSort={list => this.updateState({ customerList: list })}\n                  >\n                    {isLoading ? (\n                      <tr>\n                        <td colSpan=\"7\">\n                          <div className=\"d-flex mt-5 align-items-center justify-content-center\">\n                            <div className=\"spinner-border\" role=\"status\">\n                              <span className=\"sr-only\">Loading...</span>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                    ) : customerList ? (\n                      customerList.map((item, index) => {\n                        let {\n                          id,\n                          cust_code,\n                          cust_refer,\n                          cust_name,\n                          cust_phone2,\n                          cust_dob,\n                          class_name,\n                          birthday,\n                        } = item;\n                        let date = new Date(cust_dob);\n                        //cust_dob = date.toLocaleDateString();\n                        cust_dob = dateFormat(date, \"dd-mm-yyyy\");\n                        return (\n                          <tr\n                            key={index}\n                            onClick={() =>\n                              this.props.history.push(\n                                `/admin/customerplus/${id}/details`\n                              )\n                            }\n                          >\n                            {headerDetails.map((e, index) =>\n                              e.field ? (\n                                <td key={index}>\n                                  <div className=\"text-left\">\n                                    {item[e.field]}\n                                  </div>\n                                </td>\n                              ) : null\n                            )}\n                            <td\n                              className=\"position-relative d-none\"\n                              ref={node => {\n                                this.node = node;\n                              }}\n                              onClick={() => this.handleClick(index)}\n                            >\n                              {currentIndex === index ? (\n                                <>\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\n                                    <i className=\"icon-more\"></i>\n                                  </div>\n                                  <div className=\"option card\">\n                                    <div\n                                      className=\"d-flex align-items-center fs-16 pt-3\"\n                                      onClick={() =>\n                                        this.props.history.push(\n                                          `/admin/customerplus/${id}/details`\n                                        )\n                                      }\n                                    >\n                                      <span className=\"icon-eye-grey px-3\"></span>\n                                      {t(\"View\")}\n                                    </div>\n                                    <div\n                                      className=\"d-flex align-items-center fs-16\"\n                                      onClick={() =>\n                                        this.props.history.push(\n                                          `/admin/customerplus/${id}/lpmanagement`\n                                        )\n                                      }\n                                    >\n                                      <span className=\"px-2\">\n                                        <svg\n                                          xmlns=\"http://www.w3.org/2000/svg\"\n                                          width=\"31\"\n                                          height=\"30\"\n                                          fill=\"currentColor\"\n                                          viewBox=\"0 0 15 30\"\n                                        >\n                                          <path d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\" />\n                                        </svg>\n                                      </span>\n                                      {t(\"Loyalty Points Management\")}\n                                    </div>\n                                    <div className=\"d-flex align-items-center fs-16\">\n                                      <span className=\"icon-schedule px-3\"></span>{\" \"}\n                                      {t(\"Reschedule Appointment\")}{\" \"}\n                                    </div>\n                                    <div\n                                      className=\"d-flex align-items-center fs-16\"\n                                      onClick={() => this.bookAppointment(item)}\n                                    >\n                                      <span className=\"px-2\">\n                                        <svg\n                                          width=\"31\"\n                                          height=\"30\"\n                                          viewBox=\"0 0 31 30\"\n                                          fill=\"none\"\n                                          xmlns=\"http://www.w3.org/2000/svg\"\n                                        >\n                                          <rect\n                                            width=\"31\"\n                                            height=\"30\"\n                                            fill=\"#F9F9F9\"\n                                          />\n                                          <path\n                                            d=\"M15 8V22\"\n                                            stroke=\"#848484\"\n                                            strokeLinecap=\"round\"\n                                            strokeLinejoin=\"round\"\n                                          />\n                                          <path\n                                            d=\"M8 15H22\"\n                                            stroke=\"#848484\"\n                                            strokeLinecap=\"round\"\n                                            strokeLinejoin=\"round\"\n                                          />\n                                        </svg>\n                                      </span>\n                                      {t(\"Book Appointment\")}\n                                    </div>\n                                    <div className=\"d-flex align-items-center fs-16 pb-3\">\n                                      <span className=\"icon-cancel-schedule px-3\"></span>{\" \"}\n                                      {t(\"Cancel Appointment\")}{\" \"}\n                                    </div>\n                                  </div>\n                                </>\n                              ) : (\n                                <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\n                                  <i className=\"icon-more\"></i>\n                                </div>\n                              )}\n                            </td>\n                          </tr>\n                        );\n                      })\n                    ) : null}\n                  </TableWrapper>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  customerDetails: state.customerPlus.customerPlusDetail,\n  settings: state.customerPlus.customerPlusSettings,\n  tokenDetail: state.authStore.tokenDetails,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      getCustomerPlus,\n      updateForm,\n      getCustomerPlusSettings,\n      getCommonApi,\n    },\n    dispatch\n  );\n};\n\nexport const ListCustomerPlus = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(ListCustomerPlusClass)\n);\n"]},"metadata":{},"sourceType":"module"}