{"ast":null,"code":"import _defineProperty from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NormalInput,NormalCheckbox,NormalButton,NormalSelect}from'component/common';import Cookies from'universal-cookie';import{connect}from'react-redux';import{bindActionCreators}from'redux';import SimpleReactValidator from'simple-react-validator';import{login,getLoginSaloon}from'redux/actions/auth';import{history}from'helpers/index';import'assets/scss/pages/login.scss';import{Link}from'react-router-dom';var cookies=new Cookies();export var LoginClass=/*#__PURE__*/function(_Component){_inherits(LoginClass,_Component);var _super=_createSuper(LoginClass);function LoginClass(){var _this;_classCallCheck(this,LoginClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{salon:0,username:'',password:''},rememberme:'',passwordVisible:false,salonList:[]};_this.handleChange=function(_ref){var _ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields});};_this.handleChangeAndSubmit=function(_ref2){var _ref2$target=_ref2.target,value=_ref2$target.value,name=_ref2$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields},function(){_this.handleSubmit();});};_this.handleFirstLogin=function(event){event.preventDefault();if(_this.validator.allValid()){var _this$state=_this.state,formFields=_this$state.formFields,rememberme=_this$state.rememberme,salonList=_this$state.salonList;_this.props.login(formFields).then(function(res){var status=res.status,data=res.data;if(status===200){if(res.data.sites.length>1){var _iterator=_createForOfIteratorHelper(res.data.sites),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;salonList.push({value:key.id,label:key.itemsite_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({salonList:salonList});}else{formFields.salon=res.data.sites[0].id;_this.handleSubmit();}}});}else{_this.validator.showMessages();}};_this.toggle=function(key){_this.setState(function(prevState){return _defineProperty({},key,!prevState[key]);});};return _this;}_createClass(LoginClass,[{key:\"componentWillMount\",value:function componentWillMount(){this.validator=new SimpleReactValidator({// validators: {\n//   password: {\n//     message: 'The :attribute must be a valid format.',\n//     rule: (val, params, validator) => {\n//       return validator.helpers.testRegex(val, /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&]).{8,20}$/) && params.indexOf(val) === -1\n//     },\n//     messageReplace: (message, params) => message.replace('', this.helpers.toSentence(params)),\n//     required: true\n//   }\n// },\nelement:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message font-md\"},message);},autoForceUpdate:this});/*let { salonList } = this.state;\r\n    this.props.getLoginSaloon().then((res) => {\r\n      for (let key of res.data) {\r\n        salonList.push({ value: key.id, label: key.itemsite_desc })\r\n      }\r\n      this.setState({ salonList })\r\n    })*/}},{key:\"handleSubmit\",value:function handleSubmit(){// event.preventDefault();\nif(this.validator.allValid()){var _this$state2=this.state,formFields=_this$state2.formFields,rememberme=_this$state2.rememberme;this.props.login(formFields).then(function(res){var status=res.status,data=res.data;if(status===200){history.push('/admin/dashboard');if(rememberme){var date=new Date();date.setTime(date.getTime()+48*60*60*1000);var dateString=date.toGMTString();cookies.set('emailId',formFields.emailId,[{path:'/'},{expires:dateString}]);cookies.set('password',formFields.password,[{path:'/'},{expires:dateString}]);}}});}else{this.validator.showMessages();}}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,formFields=_this$state3.formFields,passwordVisible=_this$state3.passwordVisible,rememberme=_this$state3.rememberme,salonList=_this$state3.salonList;var username=formFields.username,password=formFields.password,salon=formFields.salon;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"login-container h-100 py-5\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-left login-heading mb-5\"},\"Sign in to access BeauteSoft\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Username\",value:username,name:\"username\",onChange:this.handleChange})),this.validator.message('Username',username,'required|string')),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{type:passwordVisible?'text':'password',placeholder:\"Password\",value:password,name:\"password\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-addon right fs-14\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this2.toggle('passwordVisible');},className:\"icon-\".concat(passwordVisible?\"eye\":\"eye-blocked\",\" cursor-pointer fs-24\")}))),this.validator.message('Password',password,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-center mb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"checkbox\"},/*#__PURE__*/React.createElement(NormalCheckbox,{value:\"\",label:\"Keep me signed in\",name:\"rememberme\",checked:rememberme,onChange:function onChange(){return _this2.toggle('rememberme');}})),/*#__PURE__*/React.createElement(Link,{className:\"d-flex align-items-center ml-2\",to:\"/auth/forgotPassword\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fs-13 text-right tc-primary link-text\"},\"Forgot Password\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-0 p-0 d-flex justify-content-center col-12\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"w-100\",onClick:this.handleFirstLogin,id:\"loginBtn\",label:\"LOGIN\",mainbg:true,className:\"mr-2 fs-14 col-12\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),salonList.length>1&&/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{placeholder:\"Please Select Site\",options:salonList,value:salon,name:\"salon\",onChange:this.handleChangeAndSubmit})),this.validator.message('salon',salon,'required|string')),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Copyrights (c) Acy7lab.com.\"),/*#__PURE__*/React.createElement(\"p\",null,\" Licensed to Sequoia - Version 6.6\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Dated: 6.15\"))));}}]);return LoginClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({login:login,getLoginSaloon:getLoginSaloon},dispatch);};var component=LoginClass;export var Login=connect(null,mapDispatchToProps)(component);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/pages/Auth/Login.js"],"names":["React","Component","NormalInput","NormalCheckbox","NormalButton","NormalSelect","Cookies","connect","bindActionCreators","SimpleReactValidator","login","getLoginSaloon","history","Link","cookies","LoginClass","state","formFields","salon","username","password","rememberme","passwordVisible","salonList","handleChange","target","value","name","Object","assign","setState","handleChangeAndSubmit","handleSubmit","handleFirstLogin","event","preventDefault","validator","allValid","props","then","res","status","data","sites","length","key","push","id","label","itemsite_desc","showMessages","toggle","prevState","element","message","autoForceUpdate","date","Date","setTime","getTime","dateString","toGMTString","set","emailId","path","expires","mapDispatchToProps","dispatch","component","Login"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { NormalInput, NormalCheckbox, NormalButton, NormalSelect } from 'component/common';\r\nimport Cookies from 'universal-cookie';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport { login, getLoginSaloon } from 'redux/actions/auth';\r\nimport { history } from 'helpers/index';\r\nimport 'assets/scss/pages/login.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst cookies = new Cookies();\r\n\r\nexport class LoginClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      salon: 0,\r\n      username: '',\r\n      password: ''\r\n    },\r\n    rememberme: '',\r\n    passwordVisible: false,\r\n    salonList: []\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.validator = new SimpleReactValidator({\r\n      // validators: {\r\n      //   password: {\r\n      //     message: 'The :attribute must be a valid format.',\r\n      //     rule: (val, params, validator) => {\r\n      //       return validator.helpers.testRegex(val, /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&]).{8,20}$/) && params.indexOf(val) === -1\r\n      //     },\r\n      //     messageReplace: (message, params) => message.replace('', this.helpers.toSentence(params)),\r\n      //     required: true\r\n      //   }\r\n      // },\r\n      element: message => <span className=\"error-message font-md\">{message}</span>,\r\n      autoForceUpdate: this,\r\n    });\r\n    /*let { salonList } = this.state;\r\n    this.props.getLoginSaloon().then((res) => {\r\n      for (let key of res.data) {\r\n        salonList.push({ value: key.id, label: key.itemsite_desc })\r\n      }\r\n      this.setState({ salonList })\r\n    })*/\r\n  }\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n  handleChangeAndSubmit = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.setState({\r\n      formFields,\r\n    }, () => {\r\n      this.handleSubmit();\r\n    });\r\n  };\r\n\r\n  handleFirstLogin = event => {\r\n    event.preventDefault();\r\n\r\n    if (this.validator.allValid()) {\r\n      let { formFields, rememberme,salonList} = this.state;\r\n\r\n      this.props.login(formFields).then((res) => {\r\n        let { status, data } = res;\r\n         if (status === 200) {\r\n           if(res.data.sites.length>1){\r\n            for (let key of res.data.sites) {\r\n              salonList.push({ value: key.id, label: key.itemsite_desc })\r\n            }\r\n            this.setState({ salonList })\r\n           }\r\n           else{\r\n             formFields.salon=res.data.sites[0].id;\r\n             this.handleSubmit();\r\n           }\r\n          \r\n        }\r\n      });\r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  };\r\n\r\n  handleSubmit () {\r\n   // event.preventDefault();\r\n\r\n    if (this.validator.allValid()) {\r\n      let { formFields, rememberme } = this.state;\r\n\r\n      this.props.login(formFields).then((res) => {\r\n        let { status, data } = res;\r\n         if (status === 200) {\r\n          history.push('/admin/dashboard');\r\n          if (rememberme) {\r\n            let date = new Date();\r\n            date.setTime(date.getTime() + 48 * 60 * 60 * 1000);\r\n            let dateString = date.toGMTString();\r\n            cookies.set('emailId', formFields.emailId, [{ path: '/' }, { expires: dateString }]);\r\n            cookies.set('password', formFields.password, [{ path: '/' }, { expires: dateString }]);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  };\r\n\r\n  toggle = key => {\r\n    this.setState(prevState => ({\r\n      [key]: !prevState[key],\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    let { formFields, passwordVisible, rememberme, salonList } = this.state;\r\n\r\n    let { username, password, salon } = formFields;\r\n\r\n    return (\r\n      <>\r\n        <div className=\"login-container h-100 py-5\">\r\n          <h1 className=\"text-left login-heading mb-5\">Sign in to access BeauteSoft</h1>\r\n         \r\n          <div className=\"form-group mb-4 pb-3\">\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                placeholder=\"Username\"\r\n                value={username}\r\n                name=\"username\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </div>\r\n            {this.validator.message('Username', username, 'required|string')}\r\n          </div>\r\n          <div className=\"form-group mb-4 pb-3\">\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                type={passwordVisible ? 'text' : 'password'}\r\n                placeholder=\"Password\"\r\n                value={password}\r\n                name=\"password\"\r\n                onChange={this.handleChange}\r\n              />\r\n              <div className=\"input-group-addon right fs-14\">\r\n                <span\r\n                  onClick={() => this.toggle('passwordVisible')}\r\n                  className={`icon-${passwordVisible ? \"eye\" : \"eye-blocked\"} cursor-pointer fs-24`}\r\n                ></span>\r\n              </div>\r\n            </div>\r\n            {/* {this.validator.message('Password', password, 'required|password')} */}\r\n            {this.validator.message('Password', password, 'required')}\r\n          </div>\r\n          <div className=\"d-flex justify-content-between align-items-center mb-5\">\r\n            <div className=\"checkbox\">\r\n              <NormalCheckbox\r\n                value=\"\"\r\n                label=\"Keep me signed in\"\r\n                name=\"rememberme\"\r\n                checked={rememberme}\r\n                onChange={() => this.toggle('rememberme')}\r\n              />\r\n            </div>\r\n            <Link className=\"d-flex align-items-center ml-2\" to=\"/auth/forgotPassword\">\r\n              <span className=\"fs-13 text-right tc-primary link-text\">Forgot Password</span>\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"form-group mb-0 p-0 d-flex justify-content-center col-12\">\r\n            <NormalButton buttonClass={\"w-100\"} onClick={this.handleFirstLogin} id=\"loginBtn\" label=\"LOGIN\" mainbg={true} className=\"mr-2 fs-14 col-12\" />\r\n          </div>\r\n          <br/><br/>\r\n          {salonList.length>1 &&\r\n          <div className=\"form-group mb-4 pb-3\">\r\n            <div className=\"input-group\">\r\n              <NormalSelect\r\n                placeholder=\"Please Select Site\"\r\n                options={salonList}\r\n                value={salon}\r\n                name=\"salon\"\r\n                onChange={this.handleChangeAndSubmit}\r\n              />\r\n            </div>\r\n            {this.validator.message('salon', salon, 'required|string')}\r\n          </div>\r\n         }\r\n          <center><p>Copyrights (c) Acy7lab.com. \r\n          </p><p> Licensed to Sequoia - Version 6.6</p>\r\n          <br/>\r\n          <p>Dated: 6.15</p></center>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      login,\r\n      getLoginSaloon\r\n    },\r\n    dispatch,\r\n  );\r\n};\r\n\r\nlet component = LoginClass;\r\n\r\nexport const Login = connect(null, mapDispatchToProps)(component);\r\n"]},"metadata":{},"sourceType":"module"}