{"ast":null,"code":"/**\r\n * DevExtreme (viz/vector_map/gesture_handler.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.GestureHandler = GestureHandler;\nvar _ln = Math.log;\nvar _LN2 = Math.LN2;\n\nfunction GestureHandler(params) {\n  var that = this;\n  that._projection = params.projection;\n  that._renderer = params.renderer;\n  that._x = that._y = 0;\n\n  that._subscribeToTracker(params.tracker);\n}\n\nGestureHandler.prototype = {\n  constructor: GestureHandler,\n  dispose: function () {\n    this._offTracker();\n\n    this._offTracker = null;\n  },\n  _subscribeToTracker: function (tracker) {\n    var that = this;\n    var isActive = false;\n    that._offTracker = tracker.on({\n      start: function (arg) {\n        isActive = \"control-bar\" !== arg.data.name;\n\n        if (isActive) {\n          that._processStart(arg);\n        }\n      },\n      move: function (arg) {\n        if (isActive) {\n          that._processMove(arg);\n        }\n      },\n      end: function () {\n        if (isActive) {\n          that._processEnd();\n        }\n      },\n      zoom: function (arg) {\n        that._processZoom(arg);\n      }\n    });\n  },\n  setInteraction: function (options) {\n    this._processEnd();\n\n    this._centeringEnabled = options.centeringEnabled;\n    this._zoomingEnabled = options.zoomingEnabled;\n  },\n  _processStart: function (arg) {\n    if (this._centeringEnabled) {\n      this._x = arg.x;\n      this._y = arg.y;\n\n      this._projection.beginMoveCenter();\n    }\n  },\n  _processMove: function (arg) {\n    var that = this;\n\n    if (that._centeringEnabled) {\n      that._renderer.root.attr({\n        cursor: \"move\"\n      });\n\n      that._projection.moveCenter([that._x - arg.x, that._y - arg.y]);\n\n      that._x = arg.x;\n      that._y = arg.y;\n    }\n  },\n  _processEnd: function () {\n    if (this._centeringEnabled) {\n      this._renderer.root.attr({\n        cursor: \"default\"\n      });\n\n      this._projection.endMoveCenter();\n    }\n  },\n  _processZoom: function (arg) {\n    var that = this;\n    var delta;\n    var screenPosition;\n    var coords;\n\n    if (that._zoomingEnabled) {\n      if (arg.delta) {\n        delta = arg.delta;\n      } else {\n        if (arg.ratio) {\n          delta = _ln(arg.ratio) / _LN2;\n        }\n      }\n\n      if (that._centeringEnabled) {\n        screenPosition = that._renderer.getRootOffset();\n        screenPosition = [arg.x - screenPosition.left, arg.y - screenPosition.top];\n        coords = that._projection.fromScreenPoint(screenPosition);\n      }\n\n      that._projection.changeScaledZoom(delta);\n\n      if (that._centeringEnabled) {\n        that._projection.setCenterByPoint(coords, screenPosition);\n      }\n    }\n  }\n};","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/vector_map/gesture_handler.js"],"names":["exports","GestureHandler","_ln","Math","log","_LN2","LN2","params","that","_projection","projection","_renderer","renderer","_x","_y","_subscribeToTracker","tracker","prototype","constructor","dispose","_offTracker","isActive","on","start","arg","data","name","_processStart","move","_processMove","end","_processEnd","zoom","_processZoom","setInteraction","options","_centeringEnabled","centeringEnabled","_zoomingEnabled","zoomingEnabled","x","y","beginMoveCenter","root","attr","cursor","moveCenter","endMoveCenter","delta","screenPosition","coords","ratio","getRootOffset","left","top","fromScreenPoint","changeScaledZoom","setCenterByPoint"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/vector_map/gesture_handler.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.GestureHandler = GestureHandler;\r\nvar _ln = Math.log;\r\nvar _LN2 = Math.LN2;\r\n\r\nfunction GestureHandler(params) {\r\n    var that = this;\r\n    that._projection = params.projection;\r\n    that._renderer = params.renderer;\r\n    that._x = that._y = 0;\r\n    that._subscribeToTracker(params.tracker)\r\n}\r\nGestureHandler.prototype = {\r\n    constructor: GestureHandler,\r\n    dispose: function() {\r\n        this._offTracker();\r\n        this._offTracker = null\r\n    },\r\n    _subscribeToTracker: function(tracker) {\r\n        var that = this;\r\n        var isActive = false;\r\n        that._offTracker = tracker.on({\r\n            start: function(arg) {\r\n                isActive = \"control-bar\" !== arg.data.name;\r\n                if (isActive) {\r\n                    that._processStart(arg)\r\n                }\r\n            },\r\n            move: function(arg) {\r\n                if (isActive) {\r\n                    that._processMove(arg)\r\n                }\r\n            },\r\n            end: function() {\r\n                if (isActive) {\r\n                    that._processEnd()\r\n                }\r\n            },\r\n            zoom: function(arg) {\r\n                that._processZoom(arg)\r\n            }\r\n        })\r\n    },\r\n    setInteraction: function(options) {\r\n        this._processEnd();\r\n        this._centeringEnabled = options.centeringEnabled;\r\n        this._zoomingEnabled = options.zoomingEnabled\r\n    },\r\n    _processStart: function(arg) {\r\n        if (this._centeringEnabled) {\r\n            this._x = arg.x;\r\n            this._y = arg.y;\r\n            this._projection.beginMoveCenter()\r\n        }\r\n    },\r\n    _processMove: function(arg) {\r\n        var that = this;\r\n        if (that._centeringEnabled) {\r\n            that._renderer.root.attr({\r\n                cursor: \"move\"\r\n            });\r\n            that._projection.moveCenter([that._x - arg.x, that._y - arg.y]);\r\n            that._x = arg.x;\r\n            that._y = arg.y\r\n        }\r\n    },\r\n    _processEnd: function() {\r\n        if (this._centeringEnabled) {\r\n            this._renderer.root.attr({\r\n                cursor: \"default\"\r\n            });\r\n            this._projection.endMoveCenter()\r\n        }\r\n    },\r\n    _processZoom: function(arg) {\r\n        var that = this;\r\n        var delta;\r\n        var screenPosition;\r\n        var coords;\r\n        if (that._zoomingEnabled) {\r\n            if (arg.delta) {\r\n                delta = arg.delta\r\n            } else {\r\n                if (arg.ratio) {\r\n                    delta = _ln(arg.ratio) / _LN2\r\n                }\r\n            }\r\n            if (that._centeringEnabled) {\r\n                screenPosition = that._renderer.getRootOffset();\r\n                screenPosition = [arg.x - screenPosition.left, arg.y - screenPosition.top];\r\n                coords = that._projection.fromScreenPoint(screenPosition)\r\n            }\r\n            that._projection.changeScaledZoom(delta);\r\n            if (that._centeringEnabled) {\r\n                that._projection.setCenterByPoint(coords, screenPosition)\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}