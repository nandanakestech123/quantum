{"ast":null,"code":"/**\r\n * DevExtreme (viz/range_selector/tracker.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.Tracker = Tracker;\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _support = require(\"../../core/utils/support\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar MIN_MANUAL_SELECTING_WIDTH = 10;\nvar window = (0, _window.getWindow)();\n\nfunction isLeftButtonPressed(event) {\n  var e = event || window.event;\n  var originalEvent = e.originalEvent;\n  var touches = e.touches;\n  var pointerType = originalEvent ? originalEvent.pointerType : false;\n  var eventTouches = originalEvent ? originalEvent.touches : false;\n  var isMSPointerLeftClick = originalEvent && void 0 !== pointerType && (pointerType === (originalEvent.MSPOINTER_TYPE_TOUCH || \"touch\") || pointerType === (originalEvent.MSPOINTER_TYPE_MOUSE || \"mouse\") && 1 === originalEvent.buttons);\n  var isTouches = touches && touches.length > 0 || eventTouches && eventTouches.length > 0;\n  return 1 === e.which || isMSPointerLeftClick || isTouches;\n}\n\nfunction isMultiTouches(event) {\n  var originalEvent = event.originalEvent;\n  var touches = event.touches;\n  var eventTouches = originalEvent && originalEvent.touches;\n  return touches && touches.length > 1 || eventTouches && eventTouches.length > 1 || null;\n}\n\nfunction preventDefault(e) {\n  if (!isMultiTouches(e)) {\n    e.preventDefault();\n  }\n}\n\nfunction stopPropagationAndPreventDefault(e) {\n  if (!isMultiTouches(e)) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n}\n\nfunction isTouchEventArgs(e) {\n  return e && e.type && 0 === e.type.indexOf(\"touch\");\n}\n\nfunction getEventPageX(event) {\n  var originalEvent = event.originalEvent;\n  var result = 0;\n\n  if (event.pageX) {\n    result = event.pageX;\n  } else {\n    if (originalEvent && originalEvent.pageX) {\n      result = originalEvent.pageX;\n    }\n  }\n\n  if (originalEvent && originalEvent.touches) {\n    if (originalEvent.touches.length > 0) {\n      result = originalEvent.touches[0].pageX;\n    } else {\n      if (originalEvent.changedTouches.length > 0) {\n        result = originalEvent.changedTouches[0].pageX;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction initializeAreaEvents(controller, area, state, getRootOffsetLeft) {\n  var _docEvents;\n\n  var isTouchEvent;\n  var isActive = false;\n  var initialPosition;\n  var movingHandler = null;\n  var docEvents = (_docEvents = {}, _defineProperty(_docEvents, _pointer.default.move, function (e) {\n    var position;\n    var offset;\n\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      position = getEventPageX(e);\n      offset = getRootOffsetLeft();\n\n      if (movingHandler) {\n        movingHandler(position - offset, e);\n      } else {\n        if (state.manualRangeSelectionEnabled && Math.abs(initialPosition - position) >= MIN_MANUAL_SELECTING_WIDTH) {\n          movingHandler = controller.placeSliderAndBeginMoving(initialPosition - offset, position - offset, e);\n        }\n      }\n    }\n  }), _defineProperty(_docEvents, _pointer.default.up, function (e) {\n    var position;\n\n    if (isActive) {\n      position = getEventPageX(e);\n\n      if (!movingHandler && state.moveSelectedRangeByClick && Math.abs(initialPosition - position) < MIN_MANUAL_SELECTING_WIDTH) {\n        controller.moveSelectedArea(position - getRootOffsetLeft(), e);\n      }\n\n      cancel(e);\n    }\n  }), _docEvents);\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n\n      if (movingHandler) {\n        movingHandler.complete(e);\n        movingHandler = null;\n      }\n    }\n  }\n\n  area.on(_pointer.default.down, function (e) {\n    if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n      return;\n    }\n\n    isActive = true;\n    isTouchEvent = isTouchEventArgs(e);\n    initialPosition = getEventPageX(e);\n  });\n  return docEvents;\n}\n\nfunction initializeSelectedAreaEvents(controller, area, state, getRootOffsetLeft) {\n  var _docEvents2;\n\n  var isTouchEvent;\n  var isActive = false;\n  var movingHandler = null;\n  var docEvents = (_docEvents2 = {}, _defineProperty(_docEvents2, _pointer.default.move, function (e) {\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      preventDefault(e);\n      movingHandler(getEventPageX(e) - getRootOffsetLeft(), e);\n    }\n  }), _defineProperty(_docEvents2, _pointer.default.up, cancel), _docEvents2);\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n      movingHandler.complete(e);\n      movingHandler = null;\n    }\n  }\n\n  area.on(_pointer.default.down, function (e) {\n    if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n      return;\n    }\n\n    isActive = true;\n    isTouchEvent = isTouchEventArgs(e);\n    movingHandler = controller.beginSelectedAreaMoving(getEventPageX(e) - getRootOffsetLeft());\n    stopPropagationAndPreventDefault(e);\n  });\n  return docEvents;\n}\n\nfunction initializeSliderEvents(controller, sliders, state, getRootOffsetLeft) {\n  var _docEvents3;\n\n  var isTouchEvent;\n  var isActive = false;\n  var movingHandler = null;\n  var docEvents = (_docEvents3 = {}, _defineProperty(_docEvents3, _pointer.default.move, function (e) {\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      preventDefault(e);\n      movingHandler(getEventPageX(e) - getRootOffsetLeft(), e);\n    }\n  }), _defineProperty(_docEvents3, _pointer.default.up, cancel), _docEvents3);\n  (0, _iterator.each)(sliders, function (i, slider) {\n    var _slider$on;\n\n    slider.on((_slider$on = {}, _defineProperty(_slider$on, _pointer.default.down, function (e) {\n      if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n        return;\n      }\n\n      isActive = true;\n      isTouchEvent = isTouchEventArgs(e);\n      movingHandler = controller.beginSliderMoving(i, getEventPageX(e) - getRootOffsetLeft());\n      stopPropagationAndPreventDefault(e);\n    }), _defineProperty(_slider$on, _pointer.default.move, function () {\n      if (!movingHandler) {\n        controller.foregroundSlider(i);\n      }\n    }), _slider$on));\n  });\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n      movingHandler.complete(e);\n      movingHandler = null;\n    }\n  }\n\n  return docEvents;\n}\n\nfunction Tracker(params) {\n  var state = this._state = {};\n  var targets = params.controller.getTrackerTargets();\n\n  if (_support.pointerEvents) {\n    params.renderer.root.css({\n      msTouchAction: \"pinch-zoom\"\n    });\n  }\n\n  this._docEvents = [initializeSelectedAreaEvents(params.controller, targets.selectedArea, state, getRootOffsetLeft), initializeAreaEvents(params.controller, targets.area, state, getRootOffsetLeft), initializeSliderEvents(params.controller, targets.sliders, state, getRootOffsetLeft)];\n  (0, _iterator.each)(this._docEvents, function (_, events) {\n    _events_engine.default.on(_dom_adapter.default.getDocument(), events);\n  });\n\n  function getRootOffsetLeft() {\n    return params.renderer.getRootOffset().left;\n  }\n}\n\nTracker.prototype = {\n  constructor: Tracker,\n  dispose: function () {\n    (0, _iterator.each)(this._docEvents, function (_, events) {\n      _events_engine.default.off(_dom_adapter.default.getDocument(), events);\n    });\n  },\n  update: function (enabled, behavior) {\n    var state = this._state;\n    state.enabled = enabled;\n    state.moveSelectedRangeByClick = behavior.moveSelectedRangeByClick;\n    state.manualRangeSelectionEnabled = behavior.manualRangeSelectionEnabled;\n  }\n};","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/range_selector/tracker.js"],"names":["exports","Tracker","_events_engine","_interopRequireDefault","require","_pointer","_window","_dom_adapter","_iterator","_support","obj","__esModule","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","MIN_MANUAL_SELECTING_WIDTH","window","getWindow","isLeftButtonPressed","event","e","originalEvent","touches","pointerType","eventTouches","isMSPointerLeftClick","MSPOINTER_TYPE_TOUCH","MSPOINTER_TYPE_MOUSE","buttons","isTouches","length","which","isMultiTouches","preventDefault","stopPropagationAndPreventDefault","stopPropagation","isTouchEventArgs","type","indexOf","getEventPageX","result","pageX","changedTouches","initializeAreaEvents","controller","area","state","getRootOffsetLeft","_docEvents","isTouchEvent","isActive","initialPosition","movingHandler","docEvents","default","move","position","offset","cancel","manualRangeSelectionEnabled","Math","abs","placeSliderAndBeginMoving","up","moveSelectedRangeByClick","moveSelectedArea","complete","on","down","enabled","initializeSelectedAreaEvents","_docEvents2","beginSelectedAreaMoving","initializeSliderEvents","sliders","_docEvents3","each","i","slider","_slider$on","beginSliderMoving","foregroundSlider","params","_state","targets","getTrackerTargets","pointerEvents","renderer","root","css","msTouchAction","selectedArea","_","events","getDocument","getRootOffset","left","prototype","constructor","dispose","off","update","behavior"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/range_selector/tracker.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.Tracker = Tracker;\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _support = require(\"../../core/utils/support\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\nvar MIN_MANUAL_SELECTING_WIDTH = 10;\r\nvar window = (0, _window.getWindow)();\r\n\r\nfunction isLeftButtonPressed(event) {\r\n    var e = event || window.event;\r\n    var originalEvent = e.originalEvent;\r\n    var touches = e.touches;\r\n    var pointerType = originalEvent ? originalEvent.pointerType : false;\r\n    var eventTouches = originalEvent ? originalEvent.touches : false;\r\n    var isMSPointerLeftClick = originalEvent && void 0 !== pointerType && (pointerType === (originalEvent.MSPOINTER_TYPE_TOUCH || \"touch\") || pointerType === (originalEvent.MSPOINTER_TYPE_MOUSE || \"mouse\") && 1 === originalEvent.buttons);\r\n    var isTouches = touches && touches.length > 0 || eventTouches && eventTouches.length > 0;\r\n    return 1 === e.which || isMSPointerLeftClick || isTouches\r\n}\r\n\r\nfunction isMultiTouches(event) {\r\n    var originalEvent = event.originalEvent;\r\n    var touches = event.touches;\r\n    var eventTouches = originalEvent && originalEvent.touches;\r\n    return touches && touches.length > 1 || eventTouches && eventTouches.length > 1 || null\r\n}\r\n\r\nfunction preventDefault(e) {\r\n    if (!isMultiTouches(e)) {\r\n        e.preventDefault()\r\n    }\r\n}\r\n\r\nfunction stopPropagationAndPreventDefault(e) {\r\n    if (!isMultiTouches(e)) {\r\n        e.stopPropagation();\r\n        e.preventDefault()\r\n    }\r\n}\r\n\r\nfunction isTouchEventArgs(e) {\r\n    return e && e.type && 0 === e.type.indexOf(\"touch\")\r\n}\r\n\r\nfunction getEventPageX(event) {\r\n    var originalEvent = event.originalEvent;\r\n    var result = 0;\r\n    if (event.pageX) {\r\n        result = event.pageX\r\n    } else {\r\n        if (originalEvent && originalEvent.pageX) {\r\n            result = originalEvent.pageX\r\n        }\r\n    }\r\n    if (originalEvent && originalEvent.touches) {\r\n        if (originalEvent.touches.length > 0) {\r\n            result = originalEvent.touches[0].pageX\r\n        } else {\r\n            if (originalEvent.changedTouches.length > 0) {\r\n                result = originalEvent.changedTouches[0].pageX\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction initializeAreaEvents(controller, area, state, getRootOffsetLeft) {\r\n    var _docEvents;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var initialPosition;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents = {}, _defineProperty(_docEvents, _pointer.default.move, function(e) {\r\n        var position;\r\n        var offset;\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            position = getEventPageX(e);\r\n            offset = getRootOffsetLeft();\r\n            if (movingHandler) {\r\n                movingHandler(position - offset, e)\r\n            } else {\r\n                if (state.manualRangeSelectionEnabled && Math.abs(initialPosition - position) >= MIN_MANUAL_SELECTING_WIDTH) {\r\n                    movingHandler = controller.placeSliderAndBeginMoving(initialPosition - offset, position - offset, e)\r\n                }\r\n            }\r\n        }\r\n    }), _defineProperty(_docEvents, _pointer.default.up, function(e) {\r\n        var position;\r\n        if (isActive) {\r\n            position = getEventPageX(e);\r\n            if (!movingHandler && state.moveSelectedRangeByClick && Math.abs(initialPosition - position) < MIN_MANUAL_SELECTING_WIDTH) {\r\n                controller.moveSelectedArea(position - getRootOffsetLeft(), e)\r\n            }\r\n            cancel(e)\r\n        }\r\n    }), _docEvents);\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            if (movingHandler) {\r\n                movingHandler.complete(e);\r\n                movingHandler = null\r\n            }\r\n        }\r\n    }\r\n    area.on(_pointer.default.down, function(e) {\r\n        if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n            return\r\n        }\r\n        isActive = true;\r\n        isTouchEvent = isTouchEventArgs(e);\r\n        initialPosition = getEventPageX(e)\r\n    });\r\n    return docEvents\r\n}\r\n\r\nfunction initializeSelectedAreaEvents(controller, area, state, getRootOffsetLeft) {\r\n    var _docEvents2;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents2 = {}, _defineProperty(_docEvents2, _pointer.default.move, function(e) {\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            preventDefault(e);\r\n            movingHandler(getEventPageX(e) - getRootOffsetLeft(), e)\r\n        }\r\n    }), _defineProperty(_docEvents2, _pointer.default.up, cancel), _docEvents2);\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            movingHandler.complete(e);\r\n            movingHandler = null\r\n        }\r\n    }\r\n    area.on(_pointer.default.down, function(e) {\r\n        if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n            return\r\n        }\r\n        isActive = true;\r\n        isTouchEvent = isTouchEventArgs(e);\r\n        movingHandler = controller.beginSelectedAreaMoving(getEventPageX(e) - getRootOffsetLeft());\r\n        stopPropagationAndPreventDefault(e)\r\n    });\r\n    return docEvents\r\n}\r\n\r\nfunction initializeSliderEvents(controller, sliders, state, getRootOffsetLeft) {\r\n    var _docEvents3;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents3 = {}, _defineProperty(_docEvents3, _pointer.default.move, function(e) {\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            preventDefault(e);\r\n            movingHandler(getEventPageX(e) - getRootOffsetLeft(), e)\r\n        }\r\n    }), _defineProperty(_docEvents3, _pointer.default.up, cancel), _docEvents3);\r\n    (0, _iterator.each)(sliders, function(i, slider) {\r\n        var _slider$on;\r\n        slider.on((_slider$on = {}, _defineProperty(_slider$on, _pointer.default.down, function(e) {\r\n            if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n                return\r\n            }\r\n            isActive = true;\r\n            isTouchEvent = isTouchEventArgs(e);\r\n            movingHandler = controller.beginSliderMoving(i, getEventPageX(e) - getRootOffsetLeft());\r\n            stopPropagationAndPreventDefault(e)\r\n        }), _defineProperty(_slider$on, _pointer.default.move, function() {\r\n            if (!movingHandler) {\r\n                controller.foregroundSlider(i)\r\n            }\r\n        }), _slider$on))\r\n    });\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            movingHandler.complete(e);\r\n            movingHandler = null\r\n        }\r\n    }\r\n    return docEvents\r\n}\r\n\r\nfunction Tracker(params) {\r\n    var state = this._state = {};\r\n    var targets = params.controller.getTrackerTargets();\r\n    if (_support.pointerEvents) {\r\n        params.renderer.root.css({\r\n            msTouchAction: \"pinch-zoom\"\r\n        })\r\n    }\r\n    this._docEvents = [initializeSelectedAreaEvents(params.controller, targets.selectedArea, state, getRootOffsetLeft), initializeAreaEvents(params.controller, targets.area, state, getRootOffsetLeft), initializeSliderEvents(params.controller, targets.sliders, state, getRootOffsetLeft)];\r\n    (0, _iterator.each)(this._docEvents, function(_, events) {\r\n        _events_engine.default.on(_dom_adapter.default.getDocument(), events)\r\n    });\r\n\r\n    function getRootOffsetLeft() {\r\n        return params.renderer.getRootOffset().left\r\n    }\r\n}\r\nTracker.prototype = {\r\n    constructor: Tracker,\r\n    dispose: function() {\r\n        (0, _iterator.each)(this._docEvents, function(_, events) {\r\n            _events_engine.default.off(_dom_adapter.default.getDocument(), events)\r\n        })\r\n    },\r\n    update: function(enabled, behavior) {\r\n        var state = this._state;\r\n        state.enabled = enabled;\r\n        state.moveSelectedRangeByClick = behavior.moveSelectedRangeByClick;\r\n        state.manualRangeSelectionEnabled = behavior.manualRangeSelectionEnabled\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}