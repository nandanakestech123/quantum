{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalButton,NormalSelect}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import{NormalInput,NormalDateTime}from\"component/common\";import\"./style.scss\";import{dateFormat}from\"service/helperFunctions\";import{history}from\"helpers\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,commonCreateApi}from\"redux/actions/common\";import{withTranslation}from\"react-i18next\";export var TransactionHistoryClass=/*#__PURE__*/function(_Component){_inherits(TransactionHistoryClass,_Component);var _super=_createSuper(TransactionHistoryClass);function TransactionHistoryClass(){var _this;_classCallCheck(this,TransactionHistoryClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Cust Code\"},{label:\"Cust Name\"},{label:\"Paid On\"},{label:\"Modified Date\",className:\"d-none\",divClass:\"justify-content-end text-right\"},{label:\"Amount\",divClass:\"justify-content-end text-right\"},{label:\"Total Amount\",className:\"d-none\",divClass:\"justify-content-end text-right\"},{label:\"Paid Amount\",className:\"d-none\",divClass:\"justify-content-end text-right\"},{label:\"Item\",width:\"300px\",className:\"d-none\"},{label:\"Transaction No\"},{label:\"Reference No\"},{label:\"Billed By\"},{label:\"No of Qty\",className:\"d-none\",divClass:\"justify-content-end text-right\"},{label:\"No of Lines\",className:\"d-none\",divClass:\"justify-content-end text-right\"},{label:\"OR\",className:\"d-none\",divClass:\"justify-content-end text-right\"},{label:\"Status\"},{label:\"Type\"},{label:\"Payment Remark\"},{label:\"\"}],billingList:[],pageMeta:{chunk:10,page:1,total:10,totalPages:2},formField:{fromDate:new Date(),toDate:new Date(),transCode:\"\",custCode:\"\",custName:\"\",transtype:\"All\"},active:false,currentIndex:-1,page:1,limit:10,isOpenvoidCheckout:false,transtypeOptions:[{label:\"All\",value:\"All\"},{label:\"Sales\",value:\"Sales\"},{label:\"Void\",value:\"Void\"},{label:\"TD\",value:\"TD\"},{label:\"Non-Sales\",value:\"NonSales\"}],settingData:{},TotalTransactionAmount:\"\"};_this.handleItemSettings=function(){var settingData=_this.state.settingData;_this.props.getCommonApi(\"userlist/\").then(function(key){var status=key.status,data=key.data;console.log(key,\"settingsData changeprice\");if(status===200){settingData=data;_this.setState({settingData:settingData});}});};_this.getTransactions=function(){var _this$state=_this.state,billingList=_this$state.billingList,pageMeta=_this$state.pageMeta,formField=_this$state.formField,page=_this$state.page,limit=_this$state.limit,TotalTransactionAmount=_this$state.TotalTransactionAmount;var fromDate=formField.fromDate,toDate=formField.toDate,transCode=formField.transCode,custCode=formField.custCode,custName=formField.custName,transtype=formField.transtype;var From=new Date();if(fromDate&&fromDate!==\"\"){From=fromDate;}else{_this.setState({fromDate:From});}var To=new Date();if(toDate&&toDate!==\"\"){To=toDate;}else{_this.setState({toDate:To});}_this.props.getCommonApi(\"transactionhistory/?from_date=\".concat(dateFormat(From,\"yyyy-mm-dd\"),\"&to_date=\").concat(dateFormat(To,\"yyyy-mm-dd\"),\"&transac_no=\").concat(transCode,\"&cust_code=\").concat(custCode,\"&cust_name=\").concat(custName,\"&page=\").concat(page,\"&limit=\").concat(limit,\"&invoice_type=\").concat(transtype)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(res,\"transactionlistdsfdfaafg\");_context.next=3;return _this.setState({billingList:[]});case 3:billingList=res.data.dataList;pageMeta=res.data.meta.pagination;TotalTransactionAmount=res.sa_total;_this.setState({billingList:billingList,pageMeta:pageMeta,TotalTransactionAmount:TotalTransactionAmount});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handlePrint=function(id){var _this$state2=_this.state,billingList=_this$state2.billingList,pageMeta=_this$state2.pageMeta,formField=_this$state2.formField,page=_this$state2.page,limit=_this$state2.limit;var fromDate=formField.fromDate,toDate=formField.toDate,transCode=formField.transCode,custCode=formField.custCode,custName=formField.custName;_this.props.getCommonApi(\"receiptpdf/?sa_transacno=\".concat(id)).then(function(res){});};_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pageNo){var page;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_this.state.page;page=pageNo.page;_context2.next=4;return _this.setState({page:page});case 4:_this.getTransactions();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleShare=function(id){_this.props.commonCreateApi(\"receiptpdfsend/?sa_transacno=\".concat(id)).then(function(res){});};_this.handleInvoice=function(id){_this.props.getCommonApi(\"customerreceiptprint/?sa_transacno=\".concat(id)).then(function(res){});};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.handleChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _ref3$target,value,name,formField;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;formField=_this.state.formField;formField[name]=value;_context3.next=5;return _this.setState({formField:formField});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.handleDatePick=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(name,value){var formField;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:formField=_this.state.formField;formField[name]=value;_context4.next=4;return _this.setState({formField:formField});case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4,_x5){return _ref5.apply(this,arguments);};}();_this.handleSearch=function(){_this.getTransactions();};return _this;}_createClass(TransactionHistoryClass,[{key:\"componentDidMount\",value:function componentDidMount(){var From=new Date();var formField=this.state.formField;var firstdayMonth=new Date(From.getFullYear(),From.getMonth(),1);formField[\"fromDate\"]=firstdayMonth;this.setState({formField:formField});this.getTransactions();this.handleItemSettings();}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,headerDetails=_this$state3.headerDetails,pageMeta=_this$state3.pageMeta,billingList=_this$state3.billingList,formField=_this$state3.formField,transtypeOptions=_this$state3.transtypeOptions,settingData=_this$state3.settingData,TotalTransactionAmount=_this$state3.TotalTransactionAmount;var fromDate=formField.fromDate,toDate=formField.toDate,transCode=formField.transCode,custCode=formField.custCode,custName=formField.custName,transtype=formField.transtype;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"billing-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"p\",{className:\"label-head mb-4\"},t(\"Transaction History\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 filter\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"From Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:fromDate?new Date(fromDate):new Date(),name:\"fromDate\"//className=\"dob-pick\"\n,showYearDropdown:true,dateFormat:\"dd/MM/yyyy\",maxDate:new Date(toDate),showDisabledMonthNavigation:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"To Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:toDate?new Date(toDate):new Date(),name:\"toDate\"// className=\"dob-pick\"\n,showYearDropdown:true,dateFormat:\"dd/MM/yyyy\",minDate:new Date(fromDate),showDisabledMonthNavigation:true})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Customer Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:custName,name:\"custName\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Customer Code\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:custCode,name:\"custCode\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Transaction Code\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:transCode,name:\"transCode\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Transaction Type\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{placeholderrequired:false,options:transtypeOptions,value:t(transtype),iconname:\"icon-down-key\",name:\"transtype\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\" w-100 mb-2\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"confirm\",label:\"Search\",outline:false,onClick:this.handleSearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex w-100 mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-50 fw-500 common-label-text p-2\"},t(\"Total Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 fw-500 common-label-text p-2\"},\"$\",this.state.TotalTransactionAmount?this.state.TotalTransactionAmount:0))))),/*#__PURE__*/React.createElement(\"div\",{className:\"billing-table\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta},billingList?billingList.map(function(dataitem,index){var icon=dataitem.icon,id=dataitem.id,sa_custno=dataitem.sa_custno,sa_custname=dataitem.sa_custname,sa_date=dataitem.sa_date,sa_totamt=dataitem.sa_totamt,sa_transacno_ref=dataitem.sa_transacno_ref,void_refno=dataitem.void_refno,sa_staffname=dataitem.sa_staffname,sa_status=dataitem.sa_status,sa_transacno_type=dataitem.sa_transacno_type,sa_transacno=dataitem.sa_transacno,payment_remarks=dataitem.payment_remarks,isvoid=dataitem.isvoid,no_of_qty=dataitem.no_of_qty,no_of_lines=dataitem.no_of_lines,or=dataitem.or,paid_amount=dataitem.paid_amount,total_amount=dataitem.total_amount,item=dataitem.item,new_date=dataitem.new_date;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},sa_custno)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},sa_custname)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},sa_date)),/*#__PURE__*/React.createElement(\"td\",{className:\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},new_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},sa_totamt)),/*#__PURE__*/React.createElement(\"td\",{className:\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},total_amount)),/*#__PURE__*/React.createElement(\"td\",{className:\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},paid_amount)),/*#__PURE__*/React.createElement(\"td\",{className:\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},sa_transacno_ref)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},void_refno)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},sa_staffname)),/*#__PURE__*/React.createElement(\"td\",{className:\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},no_of_qty)),/*#__PURE__*/React.createElement(\"td\",{className:\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},no_of_lines)),/*#__PURE__*/React.createElement(\"td\",{className:\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},or)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},sa_status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},sa_transacno_type)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},payment_remarks)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-0\",mainbgrev:true,className:\"confirm fs-11\",label:t(\"View\"),outline:false,onClick:function onClick(){return history.push(\"/admin/transactionhistory/print/bill/\".concat(sa_transacno));}}),(Number(_this2.props.tokenDetails.role_code)==1||Number(_this2.props.tokenDetails.role_code)==2)&&settingData.showChangePrice?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-0 ml-1\",mainbgrev:true,className:\"confirm fs-11\",label:t(\"Change Price\"),outline:false,onClick:function onClick(){return history.push(\"/admin/transactionhistory/pricechange/\".concat(id));},disabled:!isvoid?false:true}):\"\")));}):null))))));}}]);return TransactionHistoryClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{tokenDetails:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonCreateApi:commonCreateApi},dispatch);};export var TransactionHistory=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(TransactionHistoryClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/TransactionHistory/index.js"],"names":["React","Component","NormalButton","NormalSelect","InputSearch","TableWrapper","NormalInput","NormalDateTime","dateFormat","history","connect","bindActionCreators","getCommonApi","commonCreateApi","withTranslation","TransactionHistoryClass","state","headerDetails","label","className","divClass","width","billingList","pageMeta","chunk","page","total","totalPages","formField","fromDate","Date","toDate","transCode","custCode","custName","transtype","active","currentIndex","limit","isOpenvoidCheckout","transtypeOptions","value","settingData","TotalTransactionAmount","handleItemSettings","props","then","key","status","data","console","log","setState","getTransactions","From","To","res","dataList","meta","pagination","sa_total","handlePrint","id","handlePagination","pageNo","handleShare","handleInvoice","handleClick","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","handleChange","name","handleDatePick","handleSearch","firstdayMonth","getFullYear","getMonth","t","map","dataitem","index","icon","sa_custno","sa_custname","sa_date","sa_totamt","sa_transacno_ref","void_refno","sa_staffname","sa_status","sa_transacno_type","sa_transacno","payment_remarks","isvoid","no_of_qty","no_of_lines","or","paid_amount","total_amount","item","new_date","push","Number","tokenDetails","role_code","showChangePrice","mapStateToProps","authStore","mapDispatchToProps","dispatch","TransactionHistory"],"mappings":"2wBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,kBAA3C,CACA,OAASC,WAAT,CAAsBC,YAAtB,KAA0C,kBAA1C,CACA,OAASC,WAAT,CAAsBC,cAAtB,KAA4C,kBAA5C,CAEA,MAAO,cAAP,CACA,OAASC,UAAT,KAA2B,yBAA3B,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,YAAT,CAAuBC,eAAvB,KAA8C,sBAA9C,CACA,OAASC,eAAT,KAAgC,eAAhC,CAEA,UAAaC,CAAAA,uBAAb,+XACEC,KADF,CACU,CACNC,aAAa,CAAE,CACb,CAAEC,KAAK,CAAE,WAAT,CADa,CAEb,CAAEA,KAAK,CAAE,WAAT,CAFa,CAGb,CAAEA,KAAK,CAAE,SAAT,CAHa,CAIb,CACEA,KAAK,CAAE,eADT,CAEEC,SAAS,CAAE,QAFb,CAGEC,QAAQ,CAAE,gCAHZ,CAJa,CASb,CAAEF,KAAK,CAAE,QAAT,CAAmBE,QAAQ,CAAE,gCAA7B,CATa,CAUb,CACEF,KAAK,CAAE,cADT,CAEEC,SAAS,CAAE,QAFb,CAGEC,QAAQ,CAAE,gCAHZ,CAVa,CAeb,CACEF,KAAK,CAAE,aADT,CAEEC,SAAS,CAAE,QAFb,CAGEC,QAAQ,CAAE,gCAHZ,CAfa,CAoBb,CAAEF,KAAK,CAAE,MAAT,CAAiBG,KAAK,CAAE,OAAxB,CAAiCF,SAAS,CAAE,QAA5C,CApBa,CAqBb,CAAED,KAAK,CAAE,gBAAT,CArBa,CAsBb,CAAEA,KAAK,CAAE,cAAT,CAtBa,CAuBb,CAAEA,KAAK,CAAE,WAAT,CAvBa,CAwBb,CACEA,KAAK,CAAE,WADT,CAEEC,SAAS,CAAE,QAFb,CAGEC,QAAQ,CAAE,gCAHZ,CAxBa,CA6Bb,CACEF,KAAK,CAAE,aADT,CAEEC,SAAS,CAAE,QAFb,CAGEC,QAAQ,CAAE,gCAHZ,CA7Ba,CAkCb,CACEF,KAAK,CAAE,IADT,CAEEC,SAAS,CAAE,QAFb,CAGEC,QAAQ,CAAE,gCAHZ,CAlCa,CAuCb,CAAEF,KAAK,CAAE,QAAT,CAvCa,CAwCb,CAAEA,KAAK,CAAE,MAAT,CAxCa,CAyCb,CAAEA,KAAK,CAAE,gBAAT,CAzCa,CA0Cb,CAAEA,KAAK,CAAE,EAAT,CA1Ca,CADT,CA6CNI,WAAW,CAAE,EA7CP,CA8CNC,QAAQ,CAAE,CACRC,KAAK,CAAE,EADC,CAERC,IAAI,CAAE,CAFE,CAGRC,KAAK,CAAE,EAHC,CAIRC,UAAU,CAAE,CAJJ,CA9CJ,CAoDNC,SAAS,CAAE,CACTC,QAAQ,CAAE,GAAIC,CAAAA,IAAJ,EADD,CAETC,MAAM,CAAE,GAAID,CAAAA,IAAJ,EAFC,CAGTE,SAAS,CAAE,EAHF,CAITC,QAAQ,CAAE,EAJD,CAKTC,QAAQ,CAAE,EALD,CAMTC,SAAS,CAAE,KANF,CApDL,CA4DNC,MAAM,CAAE,KA5DF,CA6DNC,YAAY,CAAE,CAAC,CA7DT,CA8DNZ,IAAI,CAAE,CA9DA,CA+DNa,KAAK,CAAE,EA/DD,CAgENC,kBAAkB,CAAE,KAhEd,CAiENC,gBAAgB,CAAE,CAChB,CAAEtB,KAAK,CAAE,KAAT,CAAgBuB,KAAK,CAAE,KAAvB,CADgB,CAEhB,CAAEvB,KAAK,CAAE,OAAT,CAAkBuB,KAAK,CAAE,OAAzB,CAFgB,CAGhB,CAAEvB,KAAK,CAAE,MAAT,CAAiBuB,KAAK,CAAE,MAAxB,CAHgB,CAIhB,CAAEvB,KAAK,CAAE,IAAT,CAAeuB,KAAK,CAAE,IAAtB,CAJgB,CAKhB,CAAEvB,KAAK,CAAE,WAAT,CAAsBuB,KAAK,CAAE,UAA7B,CALgB,CAjEZ,CAwENC,WAAW,CAAE,EAxEP,CAyENC,sBAAsB,CAAE,EAzElB,CADV,OA0FEC,kBA1FF,CA0FuB,UAAM,CACzB,GAAMF,CAAAA,WAAN,CAAsB,MAAK1B,KAA3B,CAAM0B,WAAN,CACA,MAAKG,KAAL,CAAWjC,YAAX,cAAqCkC,IAArC,CAA0C,SAAAC,GAAG,CAAI,CAC/C,GAAMC,CAAAA,MAAN,CAAuBD,GAAvB,CAAMC,MAAN,CAAcC,IAAd,CAAuBF,GAAvB,CAAcE,IAAd,CACAC,OAAO,CAACC,GAAR,CAAYJ,GAAZ,CAAiB,0BAAjB,EACA,GAAIC,MAAM,GAAK,GAAf,CAAoB,CAClBN,WAAW,CAAGO,IAAd,CACA,MAAKG,QAAL,CAAc,CAAEV,WAAW,CAAXA,WAAF,CAAd,EACD,CACF,CAPD,EAQD,CApGH,OAqGEW,eArGF,CAqGoB,UAAM,CACtB,gBAOI,MAAKrC,KAPT,CACEM,WADF,aACEA,WADF,CAEEC,QAFF,aAEEA,QAFF,CAGEK,SAHF,aAGEA,SAHF,CAIEH,IAJF,aAIEA,IAJF,CAKEa,KALF,aAKEA,KALF,CAMEK,sBANF,aAMEA,sBANF,CAQA,GAAMd,CAAAA,QAAN,CACED,SADF,CAAMC,QAAN,CAAgBE,MAAhB,CACEH,SADF,CAAgBG,MAAhB,CAAwBC,SAAxB,CACEJ,SADF,CAAwBI,SAAxB,CAAmCC,QAAnC,CACEL,SADF,CAAmCK,QAAnC,CAA6CC,QAA7C,CACEN,SADF,CAA6CM,QAA7C,CAAuDC,SAAvD,CACEP,SADF,CAAuDO,SAAvD,CAGA,GAAImB,CAAAA,IAAI,CAAG,GAAIxB,CAAAA,IAAJ,EAAX,CACA,GAAID,QAAQ,EAAIA,QAAQ,GAAK,EAA7B,CAAiC,CAC/ByB,IAAI,CAAGzB,QAAP,CACD,CAFD,IAEO,CACL,MAAKuB,QAAL,CAAc,CAAEvB,QAAQ,CAAEyB,IAAZ,CAAd,EACD,CACD,GAAIC,CAAAA,EAAE,CAAG,GAAIzB,CAAAA,IAAJ,EAAT,CACA,GAAIC,MAAM,EAAIA,MAAM,GAAK,EAAzB,CAA6B,CAC3BwB,EAAE,CAAGxB,MAAL,CACD,CAFD,IAEO,CACL,MAAKqB,QAAL,CAAc,CAAErB,MAAM,CAAEwB,EAAV,CAAd,EACD,CACD,MAAKV,KAAL,CACGjC,YADH,yCAEqCJ,UAAU,CACzC8C,IADyC,CAEzC,YAFyC,CAF/C,qBAKiB9C,UAAU,CACrB+C,EADqB,CAErB,YAFqB,CAL3B,wBAQoBvB,SARpB,uBAQ2CC,QAR3C,uBAQiEC,QARjE,kBAQkFT,IARlF,mBAQgGa,KARhG,0BAQsHH,SARtH,GAUGW,IAVH,0FAUQ,iBAAMU,GAAN,kHACJN,OAAO,CAACC,GAAR,CAAYK,GAAZ,CAAiB,0BAAjB,EADI,sBAEE,OAAKJ,QAAL,CAAc,CAAE9B,WAAW,CAAE,EAAf,CAAd,CAFF,QAGJA,WAAW,CAAGkC,GAAG,CAACP,IAAJ,CAASQ,QAAvB,CACAlC,QAAQ,CAAGiC,GAAG,CAACP,IAAJ,CAASS,IAAT,CAAcC,UAAzB,CACAhB,sBAAsB,CAAGa,GAAG,CAACI,QAA7B,CACA,MAAKR,QAAL,CAAc,CAAE9B,WAAW,CAAXA,WAAF,CAAeC,QAAQ,CAARA,QAAf,CAAyBoB,sBAAsB,CAAtBA,sBAAzB,CAAd,EANI,sDAVR,gEAkBD,CA/IH,OAgJEkB,WAhJF,CAgJgB,SAAAC,EAAE,CAAI,CAClB,iBAAwD,MAAK9C,KAA7D,CAAMM,WAAN,cAAMA,WAAN,CAAmBC,QAAnB,cAAmBA,QAAnB,CAA6BK,SAA7B,cAA6BA,SAA7B,CAAwCH,IAAxC,cAAwCA,IAAxC,CAA8Ca,KAA9C,cAA8CA,KAA9C,CACA,GAAMT,CAAAA,QAAN,CAA0DD,SAA1D,CAAMC,QAAN,CAAgBE,MAAhB,CAA0DH,SAA1D,CAAgBG,MAAhB,CAAwBC,SAAxB,CAA0DJ,SAA1D,CAAwBI,SAAxB,CAAmCC,QAAnC,CAA0DL,SAA1D,CAAmCK,QAAnC,CAA6CC,QAA7C,CAA0DN,SAA1D,CAA6CM,QAA7C,CACA,MAAKW,KAAL,CAAWjC,YAAX,oCAAoDkD,EAApD,GAA0DhB,IAA1D,CAA+D,SAAAU,GAAG,CAAI,CAAE,CAAxE,EACD,CApJH,OAsJEO,gBAtJF,2FAsJqB,kBAAMC,MAAN,+HACXvC,IADW,CACF,MAAKT,KADH,CACXS,IADW,CAEjBA,IAAI,CAAGuC,MAAM,CAACvC,IAAd,CAFiB,uBAGX,OAAK2B,QAAL,CAAc,CAClB3B,IAAI,CAAJA,IADkB,CAAd,CAHW,QAMjB,MAAK4B,eAAL,GANiB,wDAtJrB,uEA+JEY,WA/JF,CA+JgB,SAAAH,EAAE,CAAI,CAClB,MAAKjB,KAAL,CACGhC,eADH,wCACmDiD,EADnD,GAEGhB,IAFH,CAEQ,SAAAU,GAAG,CAAI,CAAE,CAFjB,EAGD,CAnKH,OAqKEU,aArKF,CAqKkB,SAAAJ,EAAE,CAAI,CACpB,MAAKjB,KAAL,CACGjC,YADH,8CACsDkD,EADtD,GAEGhB,IAFH,CAEQ,SAAAU,GAAG,CAAI,CAAE,CAFjB,EAGD,CAzKH,OA2KEW,WA3KF,CA2KgB,SAAApB,GAAG,CAAI,CACnB,GAAI,CAAC,MAAK/B,KAAL,CAAWoB,MAAhB,CAAwB,CACtBgC,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAmC,MAAKC,kBAAxC,CAA4D,KAA5D,EACD,CAFD,IAEO,CACLF,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,CAAsC,MAAKD,kBAA3C,CAA+D,KAA/D,EACD,CAED,MAAKlB,QAAL,CAAc,SAAAoB,SAAS,QAAK,CAC1BpC,MAAM,CAAE,CAACoC,SAAS,CAACpC,MADO,CAE1BC,YAAY,CAAEU,GAFY,CAAL,EAAvB,EAID,CAtLH,OAwLEuB,kBAxLF,CAwLuB,SAAAG,CAAC,CAAI,CACxB,GAAI,MAAKC,IAAL,EAAa,IAAjB,CAAuB,CACrB,GAAI,MAAKA,IAAL,CAAUC,QAAV,CAAmBF,CAAC,CAACG,MAArB,CAAJ,CAAkC,CAChC,OACD,CACF,CACD,MAAKT,WAAL,GACD,CA/LH,OAiMEU,YAjMF,2FAiMiB,sMAASD,MAAT,CAAmBnC,KAAnB,cAAmBA,KAAnB,CAA0BqC,IAA1B,cAA0BA,IAA1B,CACPlD,SADO,CACO,MAAKZ,KADZ,CACPY,SADO,CAEbA,SAAS,CAACkD,IAAD,CAAT,CAAkBrC,KAAlB,CAFa,uBAGP,OAAKW,QAAL,CAAc,CAClBxB,SAAS,CAATA,SADkB,CAAd,CAHO,yDAjMjB,uEAyMEmD,cAzMF,2FAyMmB,kBAAOD,IAAP,CAAarC,KAAb,oIACTb,SADS,CACK,MAAKZ,KADV,CACTY,SADS,CAEfA,SAAS,CAACkD,IAAD,CAAT,CAAkBrC,KAAlB,CAFe,uBAGT,OAAKW,QAAL,CAAc,CAClBxB,SAAS,CAATA,SADkB,CAAd,CAHS,yDAzMnB,2EAiNEoD,YAjNF,CAiNiB,UAAM,CACnB,MAAK3B,eAAL,GACD,CAnNH,oFA6EE,4BAAoB,CAClB,GAAIC,CAAAA,IAAI,CAAG,GAAIxB,CAAAA,IAAJ,EAAX,CACA,GAAMF,CAAAA,SAAN,CAAoB,KAAKZ,KAAzB,CAAMY,SAAN,CACA,GAAIqD,CAAAA,aAAa,CAAG,GAAInD,CAAAA,IAAJ,CAASwB,IAAI,CAAC4B,WAAL,EAAT,CAA6B5B,IAAI,CAAC6B,QAAL,EAA7B,CAA8C,CAA9C,CAApB,CACAvD,SAAS,CAAC,UAAD,CAAT,CAAwBqD,aAAxB,CACA,KAAK7B,QAAL,CAAc,CACZxB,SAAS,CAATA,SADY,CAAd,EAIA,KAAKyB,eAAL,GACA,KAAKT,kBAAL,GACD,CAxFH,sBAqNE,iBAAS,iBACP,iBAQI,KAAK5B,KART,CACEC,aADF,cACEA,aADF,CAEEM,QAFF,cAEEA,QAFF,CAGED,WAHF,cAGEA,WAHF,CAIEM,SAJF,cAIEA,SAJF,CAKEY,gBALF,cAKEA,gBALF,CAMEE,WANF,cAMEA,WANF,CAOEC,sBAPF,cAOEA,sBAPF,CASA,GAAMd,CAAAA,QAAN,CACED,SADF,CAAMC,QAAN,CAAgBE,MAAhB,CACEH,SADF,CAAgBG,MAAhB,CAAwBC,SAAxB,CACEJ,SADF,CAAwBI,SAAxB,CAAmCC,QAAnC,CACEL,SADF,CAAmCK,QAAnC,CAA6CC,QAA7C,CACEN,SADF,CAA6CM,QAA7C,CAAuDC,SAAvD,CACEP,SADF,CAAuDO,SAAvD,CAEA,GAAMiD,CAAAA,CAAN,CAAY,KAAKvC,KAAjB,CAAMuC,CAAN,CACA,mBACE,qDACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,qCAAf,eACE,yBAAG,SAAS,CAAC,iBAAb,EAAgCA,CAAC,CAAC,qBAAD,CAAjC,CADF,CADF,cAIE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,SAAS,CAAC,mDAAjB,EACGA,CAAC,CAAC,WAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,cAAD,EACE,QAAQ,CAAE,KAAKL,cADjB,CAEE,QAAQ,CAAC,YAFX,CAGE,KAAK,CAAElD,QAAQ,CAAG,GAAIC,CAAAA,IAAJ,CAASD,QAAT,CAAH,CAAwB,GAAIC,CAAAA,IAAJ,EAHzC,CAIE,IAAI,CAAC,UACL;AALF,CAME,gBAAgB,CAAE,IANpB,CAOE,UAAU,CAAC,YAPb,CAQE,OAAO,CAAE,GAAIA,CAAAA,IAAJ,CAASC,MAAT,CARX,CASE,2BAA2B,KAT7B,EADF,CAJF,CADF,cAmBE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,SAAS,CAAC,mDAAjB,EACGqD,CAAC,CAAC,SAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,cAAD,EACE,QAAQ,CAAE,KAAKL,cADjB,CAEE,QAAQ,CAAC,YAFX,CAGE,KAAK,CAAEhD,MAAM,CAAG,GAAID,CAAAA,IAAJ,CAASC,MAAT,CAAH,CAAsB,GAAID,CAAAA,IAAJ,EAHrC,CAIE,IAAI,CAAC,QACL;AALF,CAME,gBAAgB,CAAE,IANpB,CAOE,UAAU,CAAC,YAPb,CAQE,OAAO,CAAE,GAAIA,CAAAA,IAAJ,CAASD,QAAT,CARX,CASE,2BAA2B,KAT7B,EADF,CAJF,CAnBF,CADF,cAuCE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,SAAS,CAAC,mDAAjB,EACGuD,CAAC,CAAC,eAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,KAAK,CAAElD,QADT,CAEE,IAAI,CAAC,UAFP,CAGE,QAAQ,CAAE,KAAK2C,YAHjB,EADF,CAJF,CADF,cAaE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,SAAS,CAAC,mDAAjB,EACGO,CAAC,CAAC,eAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,KAAK,CAAEnD,QADT,CAEE,IAAI,CAAC,UAFP,CAGE,QAAQ,CAAE,KAAK4C,YAHjB,EADF,CAJF,CAbF,CAvCF,cAkEE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,SAAS,CAAC,mDAAjB,EACGO,CAAC,CAAC,kBAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,WAAD,EACE,KAAK,CAAEpD,SADT,CAEE,IAAI,CAAC,WAFP,CAGE,QAAQ,CAAE,KAAK6C,YAHjB,EADF,CAJF,CADF,cAaE,2BAAK,SAAS,CAAC,aAAf,eACE,6BAAO,SAAS,CAAC,mDAAjB,EACGO,CAAC,CAAC,kBAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,YAAD,EACE,mBAAmB,CAAE,KADvB,CAEE,OAAO,CAAE5C,gBAFX,CAGE,KAAK,CAAE4C,CAAC,CAACjD,SAAD,CAHV,CAIE,QAAQ,CAAC,eAJX,CAKE,IAAI,CAAC,WALP,CAME,QAAQ,CAAE,KAAK0C,YANjB,EADF,CAJF,CAbF,CAlEF,cAgGE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,YAAD,EACE,WAAW,CAAE,MADf,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,SAHZ,CAIE,KAAK,CAAC,QAJR,CAKE,OAAO,CAAE,KALX,CAME,OAAO,CAAE,KAAKG,YANhB,EADF,CADF,cAWE,2BAAK,SAAS,CAAC,mBAAf,eACE,6BAAO,SAAS,CAAC,6CAAjB,EACGI,CAAC,CAAC,cAAD,CADJ,CADF,cAIE,2BAAK,SAAS,CAAC,EAAf,eACE,6BAAO,SAAS,CAAC,8CAAjB,MAEG,KAAKpE,KAAL,CAAW2B,sBAAX,CACG,KAAK3B,KAAL,CAAW2B,sBADd,CAEG,CAJN,CADF,CAJF,CAXF,CAhGF,CAJF,cA+HE,2BAAK,SAAS,CAAC,eAAf,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,oBAAC,YAAD,EACE,aAAa,CAAE1B,aADjB,CAEE,YAAY,CAAE,KAAK8C,gBAFrB,CAGE,QAAQ,CAAExC,QAHZ,EAKGD,WAAW,CACRA,WAAW,CAAC+D,GAAZ,CAAgB,SAACC,QAAD,CAAWC,KAAX,CAAqB,CACnC,GACEC,CAAAA,IADF,CAsBIF,QAtBJ,CACEE,IADF,CAEE1B,EAFF,CAsBIwB,QAtBJ,CAEExB,EAFF,CAGE2B,SAHF,CAsBIH,QAtBJ,CAGEG,SAHF,CAIEC,WAJF,CAsBIJ,QAtBJ,CAIEI,WAJF,CAKEC,OALF,CAsBIL,QAtBJ,CAKEK,OALF,CAMEC,SANF,CAsBIN,QAtBJ,CAMEM,SANF,CAOEC,gBAPF,CAsBIP,QAtBJ,CAOEO,gBAPF,CAQEC,UARF,CAsBIR,QAtBJ,CAQEQ,UARF,CASEC,YATF,CAsBIT,QAtBJ,CASES,YATF,CAUEC,SAVF,CAsBIV,QAtBJ,CAUEU,SAVF,CAWEC,iBAXF,CAsBIX,QAtBJ,CAWEW,iBAXF,CAYEC,YAZF,CAsBIZ,QAtBJ,CAYEY,YAZF,CAaEC,eAbF,CAsBIb,QAtBJ,CAaEa,eAbF,CAcEC,MAdF,CAsBId,QAtBJ,CAcEc,MAdF,CAeEC,SAfF,CAsBIf,QAtBJ,CAeEe,SAfF,CAgBEC,WAhBF,CAsBIhB,QAtBJ,CAgBEgB,WAhBF,CAiBEC,EAjBF,CAsBIjB,QAtBJ,CAiBEiB,EAjBF,CAkBEC,WAlBF,CAsBIlB,QAtBJ,CAkBEkB,WAlBF,CAmBEC,YAnBF,CAsBInB,QAtBJ,CAmBEmB,YAnBF,CAoBEC,IApBF,CAsBIpB,QAtBJ,CAoBEoB,IApBF,CAqBEC,QArBF,CAsBIrB,QAtBJ,CAqBEqB,QArBF,CAuBA,mBACE,0BAAI,GAAG,CAAEpB,KAAT,eAsBE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BE,SAA5B,CADF,CAtBF,cAyBE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BC,WAA5B,CADF,CAzBF,cA4BE,2CACE,2BAAK,SAAS,CAAC,YAAf,EAA6BC,OAA7B,CADF,CA5BF,cA+BE,0BAAI,SAAS,CAAC,QAAd,eACE,2BAAK,SAAS,CAAC,YAAf,EAA6BgB,QAA7B,CADF,CA/BF,cAkCE,2CACE,2BAAK,SAAS,CAAC,YAAf,EAA6Bf,SAA7B,CADF,CAlCF,cAqCE,0BAAI,SAAS,CAAC,QAAd,eACE,2BAAK,SAAS,CAAC,YAAf,EAA6Ba,YAA7B,CADF,CArCF,cAwCE,0BAAI,SAAS,CAAC,QAAd,eACE,2BAAK,SAAS,CAAC,YAAf,EAA6BD,WAA7B,CADF,CAxCF,cA2CE,0BAAI,SAAS,CAAC,QAAd,eACE,2BAAK,SAAS,CAAC,WAAf,EAA4BE,IAA5B,CADF,CA3CF,cA8CE,2CACE,2BAAK,SAAS,CAAC,WAAf,EACGb,gBADH,CADF,CA9CF,cAmDE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BC,UAA5B,CADF,CAnDF,cAsDE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BC,YAA5B,CADF,CAtDF,cAyDE,0BAAI,SAAS,CAAC,QAAd,eACE,2BAAK,SAAS,CAAC,YAAf,EAA6BM,SAA7B,CADF,CAzDF,cA4DE,0BAAI,SAAS,CAAC,QAAd,eACE,2BAAK,SAAS,CAAC,YAAf,EAA6BC,WAA7B,CADF,CA5DF,cA+DE,0BAAI,SAAS,CAAC,QAAd,eACE,2BAAK,SAAS,CAAC,YAAf,EAA6BC,EAA7B,CADF,CA/DF,cAmEE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BP,SAA5B,CADF,CAnEF,cAsEE,2CACE,2BAAK,SAAS,CAAC,WAAf,EACGC,iBADH,CADF,CAtEF,cA2EE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BE,eAA5B,CADF,CA3EF,cA8EE,0BAAI,SAAS,CAAC,mBAAd,eACE,2BAAK,SAAS,CAAC,+BAAf,eACE,oBAAC,YAAD,EACE,WAAW,CAAE,MADf,CAEE,SAAS,CAAE,IAFb,CAGE,SAAS,CAAC,eAHZ,CAIE,KAAK,CAAEf,CAAC,CAAC,MAAD,CAJV,CAKE,OAAO,CAAE,KALX,CAME,OAAO,CAAE,yBACP3E,CAAAA,OAAO,CAACmG,IAAR,gDAC0CV,YAD1C,EADO,EANX,EADF,CAaG,CAACW,MAAM,CAAC,MAAI,CAAChE,KAAL,CAAWiE,YAAX,CAAwBC,SAAzB,CAAN,EACA,CADA,EAEAF,MAAM,CAAC,MAAI,CAAChE,KAAL,CAAWiE,YAAX,CAAwBC,SAAzB,CAAN,EACE,CAHH,GAIDrE,WAAW,CAACsE,eAJX,cAKC,oBAAC,YAAD,EACE,WAAW,CAAE,WADf,CAEE,SAAS,CAAE,IAFb,CAGE,SAAS,CAAC,eAHZ,CAIE,KAAK,CAAE5B,CAAC,CAAC,cAAD,CAJV,CAKE,OAAO,CAAE,KALX,CAME,OAAO,CAAE,yBACP3E,CAAAA,OAAO,CAACmG,IAAR,iDAC2C9C,EAD3C,EADO,EANX,CAWE,QAAQ,CAAE,CAACsC,MAAD,CAAU,KAAV,CAAkB,IAX9B,EALD,CAmBC,EAhCJ,CADF,CA9EF,CADF,CAsHD,CA9ID,CADQ,CAgJR,IArJN,CADF,CADF,CADF,CA/HF,CADF,CADF,CAiSD,CAngBH,qCAA6CnG,SAA7C,EAsgBA,GAAMgH,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAjG,KAAK,QAAK,CAChC8F,YAAY,CAAE9F,KAAK,CAACkG,SAAN,CAAgBJ,YADE,CAAL,EAA7B,CAIA,GAAMK,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAOzG,CAAAA,kBAAkB,CACvB,CACEC,YAAY,CAAZA,YADF,CAEEC,eAAe,CAAfA,eAFF,CADuB,CAKvBuG,QALuB,CAAzB,CAOD,CARD,CAUA,MAAO,IAAMC,CAAAA,kBAAkB,CAAGvG,eAAe,GAC/CJ,OAAO,CAACuG,eAAD,CAAkBE,kBAAlB,CAAP,CAA6CpG,uBAA7C,CAD+C,CAA1C","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NormalButton, NormalSelect } from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport { NormalInput, NormalDateTime } from \"component/common\";\r\n\r\nimport \"./style.scss\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, commonCreateApi } from \"redux/actions/common\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class TransactionHistoryClass extends Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Cust Code\" },\r\n      { label: \"Cust Name\" },\r\n      { label: \"Paid On\" },\r\n      {\r\n        label: \"Modified Date\",\r\n        className: \"d-none\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Amount\", divClass: \"justify-content-end text-right\" },\r\n      {\r\n        label: \"Total Amount\",\r\n        className: \"d-none\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Paid Amount\",\r\n        className: \"d-none\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Item\", width: \"300px\", className: \"d-none\" },\r\n      { label: \"Transaction No\" },\r\n      { label: \"Reference No\" },\r\n      { label: \"Billed By\" },\r\n      {\r\n        label: \"No of Qty\",\r\n        className: \"d-none\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"No of Lines\",\r\n        className: \"d-none\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"OR\",\r\n        className: \"d-none\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Status\" },\r\n      { label: \"Type\" },\r\n      { label: \"Payment Remark\" },\r\n      { label: \"\" },\r\n    ],\r\n    billingList: [],\r\n    pageMeta: {\r\n      chunk: 10,\r\n      page: 1,\r\n      total: 10,\r\n      totalPages: 2,\r\n    },\r\n    formField: {\r\n      fromDate: new Date(),\r\n      toDate: new Date(),\r\n      transCode: \"\",\r\n      custCode: \"\",\r\n      custName: \"\",\r\n      transtype: \"All\",\r\n    },\r\n    active: false,\r\n    currentIndex: -1,\r\n    page: 1,\r\n    limit: 10,\r\n    isOpenvoidCheckout: false,\r\n    transtypeOptions: [\r\n      { label: \"All\", value: \"All\" },\r\n      { label: \"Sales\", value: \"Sales\" },\r\n      { label: \"Void\", value: \"Void\" },\r\n      { label: \"TD\", value: \"TD\" },\r\n      { label: \"Non-Sales\", value: \"NonSales\" },\r\n    ],\r\n    settingData: {},\r\n    TotalTransactionAmount: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    let From = new Date();\r\n    let { formField } = this.state;\r\n    let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\r\n    formField[\"fromDate\"] = firstdayMonth;\r\n    this.setState({\r\n      formField,\r\n    });\r\n\r\n    this.getTransactions();\r\n    this.handleItemSettings();\r\n  }\r\n\r\n  handleItemSettings = () => {\r\n    let { settingData } = this.state;\r\n    this.props.getCommonApi(`userlist/`).then(key => {\r\n      let { status, data } = key;\r\n      console.log(key, \"settingsData changeprice\");\r\n      if (status === 200) {\r\n        settingData = data;\r\n        this.setState({ settingData });\r\n      }\r\n    });\r\n  };\r\n  getTransactions = () => {\r\n    let {\r\n      billingList,\r\n      pageMeta,\r\n      formField,\r\n      page,\r\n      limit,\r\n      TotalTransactionAmount,\r\n    } = this.state;\r\n    let { fromDate, toDate, transCode, custCode, custName, transtype } =\r\n      formField;\r\n\r\n    let From = new Date();\r\n    if (fromDate && fromDate !== \"\") {\r\n      From = fromDate;\r\n    } else {\r\n      this.setState({ fromDate: From });\r\n    }\r\n    let To = new Date();\r\n    if (toDate && toDate !== \"\") {\r\n      To = toDate;\r\n    } else {\r\n      this.setState({ toDate: To });\r\n    }\r\n    this.props\r\n      .getCommonApi(\r\n        `transactionhistory/?from_date=${dateFormat(\r\n          From,\r\n          \"yyyy-mm-dd\"\r\n        )}&to_date=${dateFormat(\r\n          To,\r\n          \"yyyy-mm-dd\"\r\n        )}&transac_no=${transCode}&cust_code=${custCode}&cust_name=${custName}&page=${page}&limit=${limit}&invoice_type=${transtype}`\r\n      )\r\n      .then(async res => {\r\n        console.log(res, \"transactionlistdsfdfaafg\");\r\n        await this.setState({ billingList: [] });\r\n        billingList = res.data.dataList;\r\n        pageMeta = res.data.meta.pagination;\r\n        TotalTransactionAmount = res.sa_total;\r\n        this.setState({ billingList, pageMeta, TotalTransactionAmount });\r\n      });\r\n  };\r\n  handlePrint = id => {\r\n    let { billingList, pageMeta, formField, page, limit } = this.state;\r\n    let { fromDate, toDate, transCode, custCode, custName } = formField;\r\n    this.props.getCommonApi(`receiptpdf/?sa_transacno=${id}`).then(res => {});\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.getTransactions();\r\n  };\r\n\r\n  handleShare = id => {\r\n    this.props\r\n      .commonCreateApi(`receiptpdfsend/?sa_transacno=${id}`)\r\n      .then(res => {});\r\n  };\r\n\r\n  handleInvoice = id => {\r\n    this.props\r\n      .getCommonApi(`customerreceiptprint/?sa_transacno=${id}`)\r\n      .then(res => {});\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    await this.setState({\r\n      formField,\r\n    });\r\n  };\r\n\r\n  handleDatePick = async (name, value) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    await this.setState({\r\n      formField,\r\n    });\r\n  };\r\n\r\n  handleSearch = () => {\r\n    this.getTransactions();\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      pageMeta,\r\n      billingList,\r\n      formField,\r\n      transtypeOptions,\r\n      settingData,\r\n      TotalTransactionAmount,\r\n    } = this.state;\r\n    let { fromDate, toDate, transCode, custCode, custName, transtype } =\r\n      formField;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"billing-section\">\r\n          <div className=\"col-md-12 d-flex align-items-center\">\r\n            <p className=\"label-head mb-4\">{t(\"Transaction History\")}</p>\r\n          </div>\r\n          <div className=\"row m-0 filter\">\r\n            <div className=\"col-md-3 col-12\">\r\n              <div className=\"d-flex mb-2\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {t(\"From Date\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalDateTime\r\n                    onChange={this.handleDatePick}\r\n                    inputcol=\"p-0 inTime\"\r\n                    value={fromDate ? new Date(fromDate) : new Date()}\r\n                    name=\"fromDate\"\r\n                    //className=\"dob-pick\"\r\n                    showYearDropdown={true}\r\n                    dateFormat=\"dd/MM/yyyy\"\r\n                    maxDate={new Date(toDate)}\r\n                    showDisabledMonthNavigation\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex mb-2\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {t(\"To Date\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalDateTime\r\n                    onChange={this.handleDatePick}\r\n                    inputcol=\"p-0 inTime\"\r\n                    value={toDate ? new Date(toDate) : new Date()}\r\n                    name=\"toDate\"\r\n                    // className=\"dob-pick\"\r\n                    showYearDropdown={true}\r\n                    dateFormat=\"dd/MM/yyyy\"\r\n                    minDate={new Date(fromDate)}\r\n                    showDisabledMonthNavigation\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3 col-12\">\r\n              <div className=\"d-flex mb-2\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {t(\"Customer Name\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    value={custName}\r\n                    name=\"custName\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex mb-2\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {t(\"Customer Code\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    value={custCode}\r\n                    name=\"custCode\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-md-3 col-12\">\r\n              <div className=\"d-flex mb-2\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {t(\"Transaction Code\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    value={transCode}\r\n                    name=\"transCode\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex mb-2\">\r\n                <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                  {t(\"Transaction Type\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    placeholderrequired={false}\r\n                    options={transtypeOptions}\r\n                    value={t(transtype)}\r\n                    iconname=\"icon-down-key\"\r\n                    name=\"transtype\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-md-3 col-12\">\r\n              <div className=\" w-100 mb-2\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2\"}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Search\"\r\n                  outline={false}\r\n                  onClick={this.handleSearch}\r\n                />\r\n              </div>\r\n              <div className=\"d-flex w-100 mb-2\">\r\n                <label className=\"text-left w-50 fw-500 common-label-text p-2\">\r\n                  {t(\"Total Amount\")}\r\n                </label>\r\n                <div className=\"\">\r\n                  <label className=\"text-left w-100 fw-500 common-label-text p-2\">\r\n                    $\r\n                    {this.state.TotalTransactionAmount\r\n                      ? this.state.TotalTransactionAmount\r\n                      : 0}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"billing-table\">\r\n            <div className=\"py-4\">\r\n              <div className=\"table-container\">\r\n                <TableWrapper\r\n                  headerDetails={headerDetails}\r\n                  queryHandler={this.handlePagination}\r\n                  pageMeta={pageMeta}\r\n                >\r\n                  {billingList\r\n                    ? billingList.map((dataitem, index) => {\r\n                        let {\r\n                          icon,\r\n                          id,\r\n                          sa_custno,\r\n                          sa_custname,\r\n                          sa_date,\r\n                          sa_totamt,\r\n                          sa_transacno_ref,\r\n                          void_refno,\r\n                          sa_staffname,\r\n                          sa_status,\r\n                          sa_transacno_type,\r\n                          sa_transacno,\r\n                          payment_remarks,\r\n                          isvoid,\r\n                          no_of_qty,\r\n                          no_of_lines,\r\n                          or,\r\n                          paid_amount,\r\n                          total_amount,\r\n                          item,\r\n                          new_date,\r\n                        } = dataitem;\r\n                        return (\r\n                          <tr key={index}>\r\n                            {/* {Number(this.props.tokenDetails.role_code) == 1 ||\r\n                            Number(this.props.tokenDetails.role_code) == 2 ? (\r\n                              <td className=\"position-relative\">\r\n                                <NormalButton\r\n                                  buttonClass={\"mx-0\"}\r\n                                  mainbgrev={true}\r\n                                  className=\"confirm fs-11\"\r\n                                  label={t(\"Change Price\")}\r\n                                  outline={false}\r\n                                  onClick={() =>\r\n                                    history.push(\r\n                                      `/admin/transactionhistory/pricechange/${id}`\r\n                                    )\r\n                                  }\r\n                                  disabled={!isvoid ? false : true}\r\n                                />\r\n                              </td>\r\n                            ) : (\r\n                              \"\"\r\n                            )} */}\r\n\r\n                            <td>\r\n                              <div className=\"text-left\">{sa_custno}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{sa_custname}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-right\">{sa_date}</div>\r\n                            </td>\r\n                            <td className=\"d-none\">\r\n                              <div className=\"text-right\">{new_date}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-right\">{sa_totamt}</div>\r\n                            </td>\r\n                            <td className=\"d-none\">\r\n                              <div className=\"text-right\">{total_amount}</div>\r\n                            </td>\r\n                            <td className=\"d-none\">\r\n                              <div className=\"text-right\">{paid_amount}</div>\r\n                            </td>\r\n                            <td className=\"d-none\">\r\n                              <div className=\"text-left\">{item}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">\r\n                                {sa_transacno_ref}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{void_refno}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{sa_staffname}</div>\r\n                            </td>\r\n                            <td className=\"d-none\">\r\n                              <div className=\"text-right\">{no_of_qty}</div>\r\n                            </td>\r\n                            <td className=\"d-none\">\r\n                              <div className=\"text-right\">{no_of_lines}</div>\r\n                            </td>\r\n                            <td className=\"d-none\">\r\n                              <div className=\"text-right\">{or}</div>\r\n                            </td>\r\n\r\n                            <td>\r\n                              <div className=\"text-left\">{sa_status}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">\r\n                                {sa_transacno_type}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-left\">{payment_remarks}</div>\r\n                            </td>\r\n                            <td className=\"position-relative\">\r\n                              <div className=\"d-flex justify-content-center\">\r\n                                <NormalButton\r\n                                  buttonClass={\"mx-0\"}\r\n                                  mainbgrev={true}\r\n                                  className=\"confirm fs-11\"\r\n                                  label={t(\"View\")}\r\n                                  outline={false}\r\n                                  onClick={() =>\r\n                                    history.push(\r\n                                      `/admin/transactionhistory/print/bill/${sa_transacno}`\r\n                                    )\r\n                                  }\r\n                                />\r\n                                {(Number(this.props.tokenDetails.role_code) ==\r\n                                  1 ||\r\n                                  Number(this.props.tokenDetails.role_code) ==\r\n                                    2) &&\r\n                                settingData.showChangePrice ? (\r\n                                  <NormalButton\r\n                                    buttonClass={\"mx-0 ml-1\"}\r\n                                    mainbgrev={true}\r\n                                    className=\"confirm fs-11\"\r\n                                    label={t(\"Change Price\")}\r\n                                    outline={false}\r\n                                    onClick={() =>\r\n                                      history.push(\r\n                                        `/admin/transactionhistory/pricechange/${id}`\r\n                                      )\r\n                                    }\r\n                                    disabled={!isvoid ? false : true}\r\n                                  />\r\n                                ) : (\r\n                                  \"\"\r\n                                )}\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    : null}\r\n                </TableWrapper>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetails: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonCreateApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TransactionHistory = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(TransactionHistoryClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}