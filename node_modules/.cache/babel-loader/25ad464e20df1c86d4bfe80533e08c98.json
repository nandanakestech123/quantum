{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalCheckbox,NormalInput,NormalButton,NormalModal,TableWrapper}from\"component/common\";import _ from\"lodash\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonUpdateApi,commonCreateApi}from\"redux/actions/common\";import SimpleReactValidator from\"simple-react-validator\";// import { Treatment, Payment, EditCart } from './cart/index';\nimport{Label}from\"reactstrap\";import{PackageTreatmentDone}from\"./packageTreatmentDone\";import closeIcon from\"assets/images/close.png\";import{withTranslation}from\"react-i18next\";export var PackageCartClass=/*#__PURE__*/function(_Component){_inherits(PackageCartClass,_Component);var _super=_createSuper(PackageCartClass);function PackageCartClass(){var _this;_classCallCheck(this,PackageCartClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={cartPackageList:[],auto_deposit:\"\",auto_deposit_new:\"\",deposit:\"\",net_deposit:\"\",checked:true,isOpenTreatmentDone:false,TransactionHeader:[{label:\"Description\"},{label:\"Qty\",width:\"60px\",divClass:\"justify-content-end text-right\"},{label:\"Deposit\",width:\"80px\",divClass:\"justify-content-center text-center\"},{label:\"Net Amount\",width:\"80px\",divClass:\"justify-content-end text-right\"},{label:\"Action\",width:\"20px\"}],selectedData:\"\"};_this.componentWillMount=function(){_this.getCartData();};_this.getCartData=function(){_this.props.getCommonApi(\"pospackagedeposit/?cartid=\".concat(_this.props.id)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var _this$state,cartPackageList,auto_deposit,auto_deposit_new,deposit,net_deposit,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,cartPackageList=_this$state.cartPackageList,auto_deposit=_this$state.auto_deposit,auto_deposit_new=_this$state.auto_deposit_new,deposit=_this$state.deposit,net_deposit=_this$state.net_deposit;data=key.data;cartPackageList=data;auto_deposit=key.auto_deposit;auto_deposit_new=key.auto_deposit;deposit=key.deposit;net_deposit=key.net_deposit;_this.setState({cartPackageList:cartPackageList,auto_deposit:auto_deposit,auto_deposit_new:auto_deposit_new,deposit:deposit,net_deposit:net_deposit});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.autoMatch=function(){var testData=[];var original_number=_this.state.net_deposit;var net_deposit=_this.state.net_deposit;var new_number=_this.state.auto_deposit_new;if(parseFloat(new_number)>parseFloat(net_deposit)){alert(\"Entered amount should not greater than Net Amount\");return;}var decrease=original_number-new_number;var percentageOfDecrease=(decrease/original_number*100).toFixed(2);var depositAmount=0;var totalDepositAmount=0;for(var i=0;i<_this.state.cartPackageList.length;i++){var xRowNetAmount=_this.state.cartPackageList[i].net_amt;var xDecreasedRowAmount=(xRowNetAmount*percentageOfDecrease/100).toFixed(2);depositAmount=(xRowNetAmount-xDecreasedRowAmount).toFixed(2);totalDepositAmount+=parseFloat(depositAmount);if(i==_this.state.cartPackageList.length-1){//Assign Difference value into last row\nvar difference=new_number-totalDepositAmount;totalDepositAmount+=difference;depositAmount=parseFloat(depositAmount)+parseFloat(difference);}testData.push({id:_this.state.cartPackageList[i].id,description:_this.state.cartPackageList[i].description,qty:_this.state.cartPackageList[i].qty,deposit_amt:parseFloat(depositAmount).toFixed(2),net_amt:_this.state.cartPackageList[i].net_amt,auto:_this.state.cartPackageList[i].auto,hold_qty:0,itemcart:_this.state.cartPackageList[i].itemcart});}//console.log(\"data\")\n_this.setState({cartPackageList:testData,deposit:totalDepositAmount.toFixed(2)});};_this.clear=function(){_this.fillCartDepositModifyData(\"Clear\");};_this.fullPayment=function(){_this.fillCartDepositModifyData(\"Full\");};_this.handleCancel=function(){_this.props.handleModal();};_this.handleConfirm=function(){var data=_this.state.cartPackageList;_this.props.commonCreateApi(\"pospackagedeposit/confirm/?cartid=\".concat(_this.props.id),data).then(function(){//console.log(\"succ\")\n_this.props.handleModal();});};_this.handleChange_auto_deposit_new=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2){var value,auto_deposit_new;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:value=_ref2.target.value;auto_deposit_new=_this.state.auto_deposit_new;auto_deposit_new=value;_context2.next=5;return _this.setState({auto_deposit_new:auto_deposit_new});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleCheck=function(){_this.setState({checked:!_this.state.checked});};_this.handleDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var isOpenTreatmentDone;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:isOpenTreatmentDone=_this.state.isOpenTreatmentDone;isOpenTreatmentDone=false;_context3.next=4;return _this.setState({isOpenTreatmentDone:isOpenTreatmentDone});case 4:_this.getCartData();case 5:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleTreatmentDone=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(cartPackage){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:debugger;_context4.next=3;return _this.props.updateForm(\"Select_Package\",cartPackage.id);case 3:_context4.next=5;return _this.setState({selectedData:cartPackage.id,isOpenTreatmentDone:true});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref5.apply(this,arguments);};}();return _this;}_createClass(PackageCartClass,[{key:\"fillCartDepositModifyData\",value:function fillCartDepositModifyData(xMode){var depositAmount;var totalDepositAmount=0;var testData=[];for(var i=0;i<this.state.cartPackageList.length;i++){if(xMode==\"Clear\"){depositAmount=0;totalDepositAmount+=parseFloat(depositAmount);}else if(xMode==\"Full\"){depositAmount=this.state.cartPackageList[i].net_amt;totalDepositAmount+=parseFloat(depositAmount);}testData.push({id:this.state.cartPackageList[i].id,description:this.state.cartPackageList[i].description,qty:this.state.cartPackageList[i].qty,deposit_amt:depositAmount,net_amt:this.state.cartPackageList[i].net_amt,auto:this.state.cartPackageList[i].auto,hold_qty:0,itemcart:this.state.cartPackageList[i].itemcart});}this.setState({cartPackageList:testData,deposit:totalDepositAmount});}},{key:\"handleChangeForEachRow\",value:function handleChangeForEachRow(userId,event){//var inputElement = event.target;\nvar userEnteredValue=parseFloat(event.target.value);var userEnteredKeyUnique=event.target.name;var totalDepositAmount=0;//console.log(inputElement.name + ': ' + inputElement.value);\nvar testData=[];for(var i=0;i<this.state.cartPackageList.length;i++){var deposit=0;var xRowNetAmount=parseFloat(this.state.cartPackageList[i].net_amt);if(i==userEnteredKeyUnique){if(userEnteredValue>xRowNetAmount){return;}deposit=userEnteredValue;totalDepositAmount+=parseFloat(deposit);}else{deposit=this.state.cartPackageList[i].deposit_amt;totalDepositAmount+=parseFloat(deposit);}testData.push({id:this.state.cartPackageList[i].id,description:this.state.cartPackageList[i].description,qty:this.state.cartPackageList[i].qty,deposit_amt:deposit,net_amt:this.state.cartPackageList[i].net_amt,auto:this.state.cartPackageList[i].auto,hold_qty:0,itemcart:this.state.cartPackageList[i].itemcart});}this.setState({cartPackageList:testData,deposit:totalDepositAmount.toFixed(2)});}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,cartPackageList=_this$state2.cartPackageList,auto_deposit_new=_this$state2.auto_deposit_new,deposit=_this$state2.deposit,net_deposit=_this$state2.net_deposit,isOpenTreatmentDone=_this$state2.isOpenTreatmentDone,TransactionHeader=_this$state2.TransactionHeader;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"row new-cart treatment-done\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 font-700 mb-3 title\"},t(\"Package Details\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(NormalCheckbox,{type:\"checkbox\",checked:this.state.checked,onChange:function onChange(){return _this2.handleCheck();},label:\"Auto Deposit\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(NormalInput,{value:auto_deposit_new,name:\"auto_deposit_new\",className:\"customer-name w-100 h-100 text-right fs-24\",onChange:this.handleChange_auto_deposit_new})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 fs-15 \",label:\"Start AutoMatch\",disabled:!this.state.checked,onClick:function onClick(){return _this2.autoMatch();}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mt-3\"},/*#__PURE__*/React.createElement(TableWrapper,{className:\"mb-3\",headerDetails:TransactionHeader},cartPackageList&&cartPackageList.length>0?cartPackageList.map(function(cartPackage,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},cartPackage.description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},cartPackage.qty)),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"input\",{onChange:_this2.handleChangeForEachRow.bind(_this2,cartPackage.id),name:index,type:\"number\",min:\"0\",className:\"w-50 text-right\",value:cartPackage.deposit_amt,disabled:_this2.state.checked}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},cartPackage.net_amt)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justifiy-content-center\"},cartPackage.is_td?/*#__PURE__*/React.createElement(NormalButton,{mainbgrev:true,label:\"TD\",onClick:_this2.handleTreatmentDone.bind(_this2,cartPackage),className:\"w-30\"}):\"\")));}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},t(\"No Data\")))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center fw-700\"},t(\"Deposit\")),/*#__PURE__*/React.createElement(\"div\",{className:\"fw-700\"},/*#__PURE__*/React.createElement(NormalInput,{value:deposit,disabled:true,className:\"text-right w-70\"})))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center fw-700\"},t(\"Net Total\")),/*#__PURE__*/React.createElement(\"div\",{className:\"fw-700\"},/*#__PURE__*/React.createElement(NormalInput,{value:net_deposit,disabled:true,className:\"text-right w-70\"})))),/*#__PURE__*/React.createElement(\"td\",null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-center my-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 fs-15 \",label:\"Full Payment\",onClick:function onClick(){return _this2.fullPayment();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",mainbg:true,className:\"col-12 fs-15 \",label:\"Clear Deposit\",onClick:function onClick(){return _this2.clear();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"treatment\",resetbg:true,className:\"col-12 fs-15 \",label:\"Cancel\",onClick:function onClick(){return _this2.handleCancel();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6\"},/*#__PURE__*/React.createElement(NormalButton,{submitBtn:true,className:\"col-12 fs-15 \",label:\"Confirm\",onClick:function onClick(){return _this2.handleConfirm();}})))),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-modal\",style:{minWidth:\"60%\"},modal:isOpenTreatmentDone,handleModal:function handleModal(){}},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(PackageTreatmentDone,{id:this.state.selectedData,handleModal:this.handleDialog})));}}]);return PackageCartClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{selected_cstomer:state.common.selected_cstomer,basicApptDetail:state.appointment.basicApptDetail,tokenDetails:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm,commonUpdateApi:commonUpdateApi,commonCreateApi:commonCreateApi},dispatch);};export var PackageCart=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(PackageCartClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Cart/cart/package.js"],"names":["React","Component","NormalCheckbox","NormalInput","NormalButton","NormalModal","TableWrapper","_","connect","bindActionCreators","getCommonApi","updateForm","commonUpdateApi","commonCreateApi","SimpleReactValidator","Label","PackageTreatmentDone","closeIcon","withTranslation","PackageCartClass","state","cartPackageList","auto_deposit","auto_deposit_new","deposit","net_deposit","checked","isOpenTreatmentDone","TransactionHeader","label","width","divClass","selectedData","componentWillMount","getCartData","props","id","then","key","data","setState","autoMatch","testData","original_number","new_number","parseFloat","alert","decrease","percentageOfDecrease","toFixed","depositAmount","totalDepositAmount","i","length","xRowNetAmount","net_amt","xDecreasedRowAmount","difference","push","description","qty","deposit_amt","auto","hold_qty","itemcart","clear","fillCartDepositModifyData","fullPayment","handleCancel","handleModal","handleConfirm","handleChange_auto_deposit_new","value","target","handleCheck","handleDialog","handleTreatmentDone","cartPackage","xMode","userId","event","userEnteredValue","userEnteredKeyUnique","name","t","map","index","handleChangeForEachRow","bind","is_td","minWidth","mapStateToProps","selected_cstomer","common","basicApptDetail","appointment","tokenDetails","authStore","mapDispatchToProps","dispatch","PackageCart"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalCheckbox,\r\n  NormalInput,\r\n  NormalButton,\r\n  NormalModal,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport _ from \"lodash\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonUpdateApi,\r\n  commonCreateApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\n// import { Treatment, Payment, EditCart } from './cart/index';\r\nimport { Label } from \"reactstrap\";\r\nimport { PackageTreatmentDone } from \"./packageTreatmentDone\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class PackageCartClass extends Component {\r\n  state = {\r\n    cartPackageList: [],\r\n    auto_deposit: \"\",\r\n    auto_deposit_new: \"\",\r\n    deposit: \"\",\r\n    net_deposit: \"\",\r\n    checked: true,\r\n    isOpenTreatmentDone: false,\r\n\r\n    TransactionHeader: [\r\n      { label: \"Description\" },\r\n      {\r\n        label: \"Qty\",\r\n        width: \"60px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Deposit\",\r\n        width: \"80px\",\r\n        divClass: \"justify-content-center text-center\",\r\n      },\r\n      {\r\n        label: \"Net Amount\",\r\n        width: \"80px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Action\", width: \"20px\" },\r\n    ],\r\n    selectedData: \"\",\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.getCartData();\r\n  };\r\n\r\n  getCartData = () => {\r\n    this.props\r\n      .getCommonApi(`pospackagedeposit/?cartid=${this.props.id}`)\r\n      .then(async key => {\r\n        let {\r\n          cartPackageList,\r\n          auto_deposit,\r\n          auto_deposit_new,\r\n          deposit,\r\n          net_deposit,\r\n        } = this.state;\r\n        let { data } = key;\r\n        cartPackageList = data;\r\n        auto_deposit = key.auto_deposit;\r\n        auto_deposit_new = key.auto_deposit;\r\n        deposit = key.deposit;\r\n        net_deposit = key.net_deposit;\r\n        this.setState({\r\n          cartPackageList,\r\n          auto_deposit,\r\n          auto_deposit_new,\r\n          deposit,\r\n          net_deposit,\r\n        });\r\n      });\r\n  };\r\n  autoMatch = () => {\r\n    const testData = [];\r\n    const original_number = this.state.net_deposit;\r\n    const net_deposit = this.state.net_deposit;\r\n    const new_number = this.state.auto_deposit_new;\r\n    if (parseFloat(new_number) > parseFloat(net_deposit)) {\r\n      alert(\"Entered amount should not greater than Net Amount\");\r\n      return;\r\n    }\r\n    let decrease = original_number - new_number;\r\n    let percentageOfDecrease = ((decrease / original_number) * 100).toFixed(2);\r\n    var depositAmount = 0;\r\n    var totalDepositAmount = 0;\r\n    for (var i = 0; i < this.state.cartPackageList.length; i++) {\r\n      var xRowNetAmount = this.state.cartPackageList[i].net_amt;\r\n      var xDecreasedRowAmount = (\r\n        (xRowNetAmount * percentageOfDecrease) /\r\n        100\r\n      ).toFixed(2);\r\n      depositAmount = (xRowNetAmount - xDecreasedRowAmount).toFixed(2);\r\n      totalDepositAmount += parseFloat(depositAmount);\r\n      if (i == this.state.cartPackageList.length - 1) {\r\n        //Assign Difference value into last row\r\n        var difference = new_number - totalDepositAmount;\r\n        totalDepositAmount += difference;\r\n        depositAmount = parseFloat(depositAmount) + parseFloat(difference);\r\n      }\r\n      testData.push({\r\n        id: this.state.cartPackageList[i].id,\r\n        description: this.state.cartPackageList[i].description,\r\n        qty: this.state.cartPackageList[i].qty,\r\n        deposit_amt: parseFloat(depositAmount).toFixed(2),\r\n        net_amt: this.state.cartPackageList[i].net_amt,\r\n        auto: this.state.cartPackageList[i].auto,\r\n        hold_qty: 0,\r\n        itemcart: this.state.cartPackageList[i].itemcart,\r\n      });\r\n    }\r\n    //console.log(\"data\")\r\n    this.setState({\r\n      cartPackageList: testData,\r\n      deposit: totalDepositAmount.toFixed(2),\r\n    });\r\n  };\r\n  clear = () => {\r\n    this.fillCartDepositModifyData(\"Clear\");\r\n  };\r\n  fullPayment = () => {\r\n    this.fillCartDepositModifyData(\"Full\");\r\n  };\r\n  handleCancel = () => {\r\n    this.props.handleModal();\r\n  };\r\n\r\n  handleConfirm = () => {\r\n    let data = this.state.cartPackageList;\r\n    this.props\r\n      .commonCreateApi(\r\n        `pospackagedeposit/confirm/?cartid=${this.props.id}`,\r\n        data\r\n      )\r\n      .then(() => {\r\n        //console.log(\"succ\")\r\n        this.props.handleModal();\r\n      });\r\n  };\r\n\r\n  fillCartDepositModifyData(xMode) {\r\n    let depositAmount;\r\n    var totalDepositAmount = 0;\r\n    const testData = [];\r\n    for (var i = 0; i < this.state.cartPackageList.length; i++) {\r\n      if (xMode == \"Clear\") {\r\n        depositAmount = 0;\r\n        totalDepositAmount += parseFloat(depositAmount);\r\n      } else if (xMode == \"Full\") {\r\n        depositAmount = this.state.cartPackageList[i].net_amt;\r\n        totalDepositAmount += parseFloat(depositAmount);\r\n      }\r\n      testData.push({\r\n        id: this.state.cartPackageList[i].id,\r\n        description: this.state.cartPackageList[i].description,\r\n        qty: this.state.cartPackageList[i].qty,\r\n        deposit_amt: depositAmount,\r\n        net_amt: this.state.cartPackageList[i].net_amt,\r\n        auto: this.state.cartPackageList[i].auto,\r\n        hold_qty: 0,\r\n        itemcart: this.state.cartPackageList[i].itemcart,\r\n      });\r\n    }\r\n    this.setState({ cartPackageList: testData, deposit: totalDepositAmount });\r\n  }\r\n  handleChange_auto_deposit_new = async ({ target: { value } }) => {\r\n    let { auto_deposit_new } = this.state;\r\n    auto_deposit_new = value;\r\n    await this.setState({\r\n      auto_deposit_new,\r\n    });\r\n  };\r\n  handleCheck = () => {\r\n    this.setState({\r\n      checked: !this.state.checked,\r\n    });\r\n  };\r\n\r\n  handleChangeForEachRow(userId, event) {\r\n    //var inputElement = event.target;\r\n    var userEnteredValue = parseFloat(event.target.value);\r\n    var userEnteredKeyUnique = event.target.name;\r\n    var totalDepositAmount = 0;\r\n    //console.log(inputElement.name + ': ' + inputElement.value);\r\n    const testData = [];\r\n    for (var i = 0; i < this.state.cartPackageList.length; i++) {\r\n      let deposit = 0;\r\n      var xRowNetAmount = parseFloat(this.state.cartPackageList[i].net_amt);\r\n\r\n      if (i == userEnteredKeyUnique) {\r\n        if (userEnteredValue > xRowNetAmount) {\r\n          return;\r\n        }\r\n        deposit = userEnteredValue;\r\n        totalDepositAmount += parseFloat(deposit);\r\n      } else {\r\n        deposit = this.state.cartPackageList[i].deposit_amt;\r\n        totalDepositAmount += parseFloat(deposit);\r\n      }\r\n      testData.push({\r\n        id: this.state.cartPackageList[i].id,\r\n        description: this.state.cartPackageList[i].description,\r\n        qty: this.state.cartPackageList[i].qty,\r\n        deposit_amt: deposit,\r\n        net_amt: this.state.cartPackageList[i].net_amt,\r\n        auto: this.state.cartPackageList[i].auto,\r\n        hold_qty: 0,\r\n        itemcart: this.state.cartPackageList[i].itemcart,\r\n      });\r\n    }\r\n    this.setState({\r\n      cartPackageList: testData,\r\n      deposit: totalDepositAmount.toFixed(2),\r\n    });\r\n  }\r\n  handleDialog = async () => {\r\n    let { isOpenTreatmentDone } = this.state;\r\n\r\n    isOpenTreatmentDone = false;\r\n\r\n    await this.setState({\r\n      isOpenTreatmentDone,\r\n    });\r\n    this.getCartData();\r\n  };\r\n  handleTreatmentDone = async cartPackage => {\r\n    debugger;\r\n    await this.props.updateForm(\"Select_Package\", cartPackage.id);\r\n    await this.setState({\r\n      selectedData: cartPackage.id,\r\n      isOpenTreatmentDone: true,\r\n    });\r\n  };\r\n  render() {\r\n    let {\r\n      cartPackageList,\r\n      auto_deposit_new,\r\n      deposit,\r\n      net_deposit,\r\n      isOpenTreatmentDone,\r\n      TransactionHeader,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n\r\n    return (\r\n      <div className=\"row new-cart treatment-done\">\r\n        <div className=\"col-12\">\r\n          <p className=\"fs-18 font-700 mb-3 title\">{t(\"Package Details\")}</p>\r\n        </div>\r\n        <div className=\"col-12\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-3\"></div>\r\n            <div className=\"col-md-2 col-12\">\r\n              <NormalCheckbox\r\n                type=\"checkbox\"\r\n                checked={this.state.checked}\r\n                onChange={() => this.handleCheck()}\r\n                label=\"Auto Deposit\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-2 col-12\">\r\n              <NormalInput\r\n                value={auto_deposit_new}\r\n                name=\"auto_deposit_new\"\r\n                className=\"customer-name w-100 h-100 text-right fs-24\"\r\n                onChange={this.handleChange_auto_deposit_new}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 col-12\">\r\n              <NormalButton\r\n                buttonClass={\"treatment\"}\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Start AutoMatch\"\r\n                disabled={!this.state.checked}\r\n                onClick={() => this.autoMatch()}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12 mt-3\">\r\n          <TableWrapper className=\"mb-3\" headerDetails={TransactionHeader}>\r\n            {cartPackageList && cartPackageList.length > 0 ? (\r\n              cartPackageList.map((cartPackage, index) => {\r\n                return (\r\n                  <tr key={index}>\r\n                    <td>\r\n                      <div className=\"text-left\">{cartPackage.description}</div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"text-right\">{cartPackage.qty}</div>\r\n                    </td>\r\n                    <td className=\"text-center\">\r\n                      <div className=\"text-center\">\r\n                        <input\r\n                          onChange={this.handleChangeForEachRow.bind(\r\n                            this,\r\n                            cartPackage.id\r\n                          )}\r\n                          name={index}\r\n                          type=\"number\"\r\n                          min=\"0\"\r\n                          className=\"w-50 text-right\"\r\n                          value={cartPackage.deposit_amt}\r\n                          disabled={this.state.checked}\r\n                        />\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"text-right\">{cartPackage.net_amt}</div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"d-flex justifiy-content-center\">\r\n                        {cartPackage.is_td ? (\r\n                          <NormalButton\r\n                            mainbgrev={true}\r\n                            label=\"TD\"\r\n                            onClick={this.handleTreatmentDone.bind(\r\n                              this,\r\n                              cartPackage\r\n                            )}\r\n                            className=\"w-30\"\r\n                          />\r\n                        ) : (\r\n                          \"\"\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"12\">\r\n                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                    {t(\"No Data\")}\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            )}\r\n\r\n            <tr>\r\n              <td></td>\r\n              <td></td>\r\n              <td>\r\n                <div className=\"\">\r\n                  <div className=\"text-center fw-700\">{t(\"Deposit\")}</div>\r\n                  <div className=\"fw-700\">\r\n                    <NormalInput\r\n                      value={deposit}\r\n                      disabled={true}\r\n                      className=\"text-right w-70\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div className=\"text-right\">\r\n                  <div className=\"text-center fw-700\">{t(\"Net Total\")}</div>\r\n                  <div className=\"fw-700\">\r\n                    <NormalInput\r\n                      value={net_deposit}\r\n                      disabled={true}\r\n                      className=\"text-right w-70\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td></td>\r\n            </tr>\r\n          </TableWrapper>\r\n        </div>\r\n\r\n        {/* <table className=\"table table-striped\">\r\n          <tr>\r\n            <td>Description</td>\r\n            <td>Qty</td>\r\n            <td>Deposit</td>\r\n            <td>Net Amount</td>\r\n          </tr>\r\n          {cartPackageList.map((cartPackage, index) => (\r\n            <tr key={index} style={{ cursor: \"pointer\" }}>\r\n              <td>{cartPackage.description}</td>\r\n              <td>{cartPackage.qty}</td>\r\n              <td>\r\n                <input\r\n                  onChange={this.handleChangeForEachRow.bind(\r\n                    this,\r\n                    cartPackage.id\r\n                  )}\r\n                  name={index}\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  className=\"w-50\"\r\n                  value={cartPackage.deposit_amt}\r\n                  disabled={this.state.checked}\r\n                />\r\n              </td>\r\n\r\n              <td className=\"d-flex align-items-center justify-content-center\">\r\n                {cartPackage.net_amt}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </table>\r\n\r\n        <div className=\"col-12\">\r\n          <div className=\"row\">\r\n            <div className=\"col-8\"></div>\r\n            <div className=\"col-2\">\r\n              <Label>Deposit:</Label>\r\n              <NormalInput value={deposit} disabled={true} />\r\n            </div>\r\n            <div className=\"col-2\">\r\n              <Label>Net Total:</Label>\r\n              <NormalInput value={net_deposit} disabled={true} />\r\n            </div>\r\n            <br />\r\n            <br />\r\n            <br />\r\n          </div>\r\n        </div> */}\r\n\r\n        <div className=\"col-12\">\r\n          <div className=\"d-flex flex-wrap justify-content-center my-2\">\r\n            <div className=\"col-md-2 col-6\">\r\n              <NormalButton\r\n                buttonClass={\"treatment\"}\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Full Payment\"\r\n                onClick={() => this.fullPayment()}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-2 col-6\">\r\n              <NormalButton\r\n                buttonClass={\"treatment\"}\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Clear Deposit\"\r\n                onClick={() => this.clear()}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"col-md-2 col-6\">\r\n              <NormalButton\r\n                buttonClass={\"treatment\"}\r\n                resetbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Cancel\"\r\n                onClick={() => this.handleCancel()}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-2 col-6\">\r\n              <NormalButton\r\n                submitBtn={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Confirm\"\r\n                onClick={() => this.handleConfirm()}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <NormalModal\r\n          className={\"transaction-done-modal\"}\r\n          style={{ minWidth: \"60%\" }}\r\n          modal={isOpenTreatmentDone}\r\n          handleModal={() => {}}\r\n        >\r\n          <img\r\n            onClick={this.handleDialog}\r\n            className=\"close cursor-pointer\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n\r\n          <PackageTreatmentDone\r\n            id={this.state.selectedData}\r\n            handleModal={this.handleDialog}\r\n          />\r\n        </NormalModal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n  tokenDetails: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonUpdateApi,\r\n      commonCreateApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const PackageCart = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(PackageCartClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}