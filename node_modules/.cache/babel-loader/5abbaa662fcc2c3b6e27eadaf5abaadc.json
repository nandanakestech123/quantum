{"ast":null,"code":"import _defineProperty from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{updateForm,getCommonApi,commonCreateApi,commonPatchApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{NormalButton,NormalModal,NormalInput,NormalCheckbox,TableWrapper,NormalTextarea}from\"component/common\";import classnames from\"classnames\";import{Nav,NavItem,NavLink,TabContent,TabPane}from\"reactstrap\";import closeIcon from\"assets/images/close.png\";import{ItemUsageUpdatePopup}from\"./ItemUsageUpdatePopup\";import{Toast}from\"service/toast\";import{TreatmentUsageDetail}from\"./TreatmentUsageDetail\";import{withTranslation}from\"react-i18next\";export var TreatmentUsagePopupClass=/*#__PURE__*/function(_Component){_inherits(TreatmentUsagePopupClass,_Component);var _super=_createSuper(TreatmentUsagePopupClass);function TreatmentUsagePopupClass(){var _this;_classCallCheck(this,TreatmentUsagePopupClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={TreatmentUsageListHeader:[{label:\"No\",divClass:\"justify-content-end text-right\"},{label:\"Item Code\"},{label:\"Link Code\"},{label:\"Item Desc\"},{label:\"Quantity\",divClass:\"justify-content-end text-right\"},{label:\"UOM\"},{label:\"Optional\",divClass:\"justify-content-center\"},{label:\"Remove\",divClass:\"justify-content-center\"}],TreatmentUsageList:[],meta:{},ExchangeTreatmentListHeader:[{label:\"No\",divClass:\"justify-content-end text-right\"},{label:\"Staff Code\"},{label:\"Staff Name\"},{label:\"Trmt No\"},{label:\"Original Item Code\"},{label:\"Original Item Desc\"},{label:\"Exchange Item Code\"},{label:\"Exchange Item Desc\"},{label:\"Trans#\"},{label:\"Trans. Date\"},{label:\"Exchange Date\"}],ExchangeTreatmentList:[],ExchangeMeta:{},activeTab:\"3\",isItemUsageUpdatePopup:false,TreatmentHistoryId:0,treatment_code:\"\",course:\"\",remarks:\"\",EditableRemark:true,ExchangeStaffListHeader:[{label:\"No\",divClass:\"justify-content-end text-right\"},{label:\"Staff Code\"},{label:\"Staff Name\"}],ExchangeStaffList:[],autoProductFlag:\"False\",cust_data:{}};_this.componentDidMount=function(){_this.getTreatmentUsageList(_this.props.TreatmentHistoryId);};_this.getTreatmentUsageList=function(data){var TreatmentUsageList=_this.state.TreatmentUsageList;_this.setState({TreatmentHistoryId:data});if(data>0){_this.props.getCommonApi(\"stockusage/\".concat(data,\"/\")).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var data,status,ExchangeStaffList,_iterator,_step,datalist,item_code,link_code,item_desc,qty,uom,optional,optionalSelected,stock_id,Treatmentid;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.setState({treatmentUsageList:[]});case 2:data=res.data,status=res.status;console.log(res,\"treatmenthistory list autoproductflag\");if(!(status===200&&res.error!==true)){_context.next=13;break;}if(!data){_context.next=13;break;}_context.next=8;return _this.setState({TreatmentHistoryId:data.id,treatment_code:data.treatment_code,course:data.course,remarks:data.remarks,autoProductFlag:data.auto,cust_data:data.cust});case 8:ExchangeStaffList=data.staffs;_iterator=_createForOfIteratorHelper(data.usage);try{for(_iterator.s();!(_step=_iterator.n()).done;){datalist=_step.value;item_code=datalist.item_code;link_code=datalist.link_code;item_desc=datalist.item_desc;qty=datalist.qty;uom=datalist.uom;optional=datalist.optional;optionalSelected=false;stock_id=0;Treatmentid=0;if(datalist&&!datalist.auto_table){Treatmentid=data.id;stock_id=datalist.id;}else{stock_id=datalist.stock_id;Treatmentid=0;}TreatmentUsageList.push({item_code:item_code,link_code:link_code,item_desc:item_desc,qty:qty,uom:uom,stock_id:stock_id,Treatmentid:Treatmentid,optional:optional,optionalSelected:optionalSelected});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_context.next=13;return _this.setState({TreatmentUsageList:TreatmentUsageList,ExchangeStaffList:ExchangeStaffList});case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}};_this.toggle=function(tab){if(tab==\"3\"){_this.setState({EditableRemark:true});}else if(tab==\"1\"){var TreatmentUsageList=_this.state.TreatmentUsageList;var filterEditableRemark=TreatmentUsageList.find(function(account){return account.Treatmentid===0;});if(filterEditableRemark){_this.setState({EditableRemark:true});}else{_this.setState({EditableRemark:false});}}else{_this.setState({EditableRemark:false});}if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.itemCloseUsageUpdatePopup=function(){_this.setState(function(prevState){return{isItemUsageUpdatePopup:!prevState.isItemUsageUpdatePopup};});};_this.itemUsageUpdatePopup=function(){var autoProductFlag=_this.state.autoProductFlag;if(autoProductFlag==\"False\"){_this.setState(function(prevState){return{isItemUsageUpdatePopup:!prevState.isItemUsageUpdatePopup};});}else{Toast({type:\"error\",message:\"Auto product update enabled for this treatment!\"});}};_this.remarkHandle=function(_ref2){var _ref2$target=_ref2.target,name=_ref2$target.name,value=_ref2$target.value;_this.setState(_defineProperty({},name,value));};_this.includeNewItems=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var TreatmentUsageList,_iterator2,_step2,value;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.setState({isItemUsageUpdatePopup:false,EditableRemark:true});case 2:TreatmentUsageList=_this.state.TreatmentUsageList;_iterator2=_createForOfIteratorHelper(data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){value=_step2.value;TreatmentUsageList.push({item_code:value.item_code,link_code:value.link_code,item_desc:value.ItemDesc,qty:parseInt(value.qty),uom:value.uom,stock_id:value.stock_id,Treatmentid:0,optional:true,optionalSelected:false});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_context2.next=7;return _this.setState({TreatmentUsageList:TreatmentUsageList});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleSave=function(){var _this$state=_this.state,TreatmentUsageList=_this$state.TreatmentUsageList,TreatmentHistoryId=_this$state.TreatmentHistoryId,remarks=_this$state.remarks;var data=[];var _iterator3=_createForOfIteratorHelper(TreatmentUsageList),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var final=_step3.value;if(final.Treatmentid==0&&!final.optionalSelected){data.push({item_code:final.item_code,link_code:final.link_code,item_desc:final.item_desc,qty:final.qty,uom:final.uom,stock_id:final.stock_id});}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}if(data.length>0){_this.props.commonCreateApi(\"stockusage/?treat_id=\".concat(TreatmentHistoryId,\"&treat_remarks=\").concat(remarks),data).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(res){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(res.status===201){_this.setState({TreatmentUsageList:[],TreatmentHistoryId:0});_this.props.treatmentUsagePopupclose();}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}());}else{Toast({type:\"error\",message:\"Please Add New Product and then try!\"});}};_this.deleteSelectedItem=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(item){var TreatmentUsageList,filterEditableRemark,TreatmentHistoryId;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(item.Treatmentid===0)){_context5.next=8;break;}_context5.next=3;return _this.setState(function(data){return{TreatmentUsageList:data.TreatmentUsageList.filter(function(x){return x.stock_id!=item.stock_id;})};});case 3:TreatmentUsageList=_this.state.TreatmentUsageList;filterEditableRemark=TreatmentUsageList.find(function(account){return account.Treatmentid===0;});if(filterEditableRemark){_this.setState({EditableRemark:true});}else{_this.setState({EditableRemark:false});}_context5.next=10;break;case 8:TreatmentHistoryId=_this.state.TreatmentHistoryId;_this.props.commonPatchApi(\"stockusage/\".concat(item.stock_id,\"/?treat_id=\").concat(TreatmentHistoryId)).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(res.status===200)){_context4.next=3;break;}_context4.next=3;return _this.setState(function(data){return{TreatmentUsageList:data.TreatmentUsageList.filter(function(x){return x.stock_id!=item.stock_id;})};});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref6.apply(this,arguments);};}());case 10:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref5.apply(this,arguments);};}();_this.handleCheckbox=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref7,index){var _ref7$target,value,name,TreatmentUsageList,allowOptional;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref7$target=_ref7.target,value=_ref7$target.value,name=_ref7$target.name;TreatmentUsageList=_this.state.TreatmentUsageList;allowOptional=TreatmentUsageList[index][\"optional\"];if(!allowOptional){_context6.next=9;break;}TreatmentUsageList[index][name]=value;_context6.next=7;return _this.setState({TreatmentUsageList:TreatmentUsageList});case 7:_context6.next=10;break;case 9:Toast({type:\"error\",message:\"This is not an Optional Product!\"});case 10:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6,_x7){return _ref8.apply(this,arguments);};}();return _this;}_createClass(TreatmentUsagePopupClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,TreatmentUsageList=_this$state2.TreatmentUsageList,TreatmentUsageListHeader=_this$state2.TreatmentUsageListHeader,meta=_this$state2.meta,isItemUsageUpdatePopup=_this$state2.isItemUsageUpdatePopup,ExchangeTreatmentList=_this$state2.ExchangeTreatmentList,ExchangeTreatmentListHeader=_this$state2.ExchangeTreatmentListHeader,ExchangeMeta=_this$state2.ExchangeMeta,TreatmentHistoryId=_this$state2.TreatmentHistoryId,treatment_code=_this$state2.treatment_code,course=_this$state2.course,remarks=_this$state2.remarks,EditableRemark=_this$state2.EditableRemark,ExchangeStaffList=_this$state2.ExchangeStaffList,ExchangeStaffListHeader=_this$state2.ExchangeStaffListHeader,cust_data=_this$state2.cust_data;var t=this.props.t;return/*#__PURE__*/React.createElement(NormalModal,{className:\"select-category\",style:{minWidth:\"75%\"},modal:this.props.isTreatmentUsagePopup,handleModal:this.props.treatmentUsagePopupclose},/*#__PURE__*/React.createElement(\"img\",{onClick:this.props.treatmentUsagePopupclose,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex h4 justify-content-center p-1\"},t(\"Treatment Usage\")),/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},t(\"Customer Name\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left fs-15 fw-500\"},cust_data.cust_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},t(\"Reference\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left fs-15 fw-500\"},cust_data.cust_refer))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-left mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},t(\"Treatment Code\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left fs-15 fw-500\"},treatment_code)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},t(\"Treatment Name\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left fs-15 fw-500\"},course))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-left mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},t(\"Remarks\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-left fs-15 fw-500\"},EditableRemark?/*#__PURE__*/React.createElement(NormalTextarea,{value:remarks,name:\"remarks\",onChange:this.remarkHandle}):/*#__PURE__*/React.createElement(NormalTextarea,{value:remarks,name:\"remarks\",onChange:this.remarkHandle,disabled:true})))),/*#__PURE__*/React.createElement(\"div\",{className:\"beautesoft-navlink customer-detail mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"filled-tabs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tabs-block\"},/*#__PURE__*/React.createElement(Nav,{tabs:true},/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:this.state.activeTab===\"3\"}),onClick:function onClick(){_this2.toggle(\"3\");}},t(\"Detail\"))),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:this.state.activeTab===\"1\"}),onClick:function onClick(){_this2.toggle(\"1\");}},t(\"Stock Usage\"))),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:this.state.activeTab===\"4\"}),onClick:function onClick(){_this2.toggle(\"4\");}},t(\"Staff\"))),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:this.state.activeTab===\"2\"}),onClick:function onClick(){_this2.toggle(\"2\");}},t(\"Exchange\"),\" \",t(\"Treatment\"))))),/*#__PURE__*/React.createElement(TabContent,{activeTab:this.state.activeTab},/*#__PURE__*/React.createElement(TabPane,{tabId:\"1\"},this.state.activeTab===\"1\"?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-2 fs-15 mt-3\",label:\"Add Item Usage\",onClick:this.itemUsageUpdatePopup}),/*#__PURE__*/React.createElement(\"div\",{className:\"table-container table-responsive mt-3\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:TreatmentUsageListHeader},TreatmentUsageList&&TreatmentUsageList.length>0?TreatmentUsageList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\",key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},index+1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.item_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.link_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.item_desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.qty)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.uom)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalCheckbox,{onChange:function onChange(e){return _this2.handleCheckbox(e,index);},value:item.optionalSelected,name:\"optionalSelected\",checked:item.optionalSelected}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\",onClick:function onClick(){return _this2.deleteSelectedItem(item);}},/*#__PURE__*/React.createElement(\"img\",{width:\"25\",height:\"25\",className:\"ml-3\",src:closeIcon,alt:\"\"}))));}):/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\"},/*#__PURE__*/React.createElement(\"td\",{colSpan:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},t(\"No Data Available\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center justify-content-end w-100 mt-3\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-2\",mainbg:true,className:\"col-12 ml-4 fs-15 \",label:\"Save\",onClick:this.handleSave}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-2\",resetbg:true,className:\"col-12 ml-4 fs-15 \",label:\"Cancel\",onClick:this.props.treatmentUsagePopupclose}))):null),/*#__PURE__*/React.createElement(TabPane,{tabId:\"2\"},this.state.activeTab===\"2\"?/*#__PURE__*/React.createElement(\"div\",{className:\"table-container table-responsive mt-3\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:ExchangeTreatmentListHeader//queryHandler={this.handlePagination}\n,pageMeta:ExchangeMeta},ExchangeTreatmentList&&ExchangeTreatmentList.length>0?ExchangeTreatmentList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\",onClick:function onClick(){return _this2.handleSelectTreatment(item);},key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.Item_Class)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.item_desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.add_duration)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.item_price)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.item_price)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.item_price)));}):/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\"},/*#__PURE__*/React.createElement(\"td\",{colSpan:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},t(\"No Data Available\")))))):null),/*#__PURE__*/React.createElement(TabPane,{tabId:\"3\"},this.state.activeTab===\"3\"?/*#__PURE__*/React.createElement(TreatmentUsageDetail,{TreatmentHistoryId:this.props.TreatmentHistoryId,remarks:this.state.remarks,treatment_code:this.state.treatment_code}):null),/*#__PURE__*/React.createElement(TabPane,{tabId:\"4\"},this.state.activeTab===\"4\"?/*#__PURE__*/React.createElement(\"div\",{className:\"table-container table-responsive mt-3\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:ExchangeStaffListHeader//queryHandler={this.handlePagination}\n,pageMeta:ExchangeMeta},ExchangeStaffList&&ExchangeStaffList.length>0?ExchangeStaffList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\",key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.no)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.staff_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.helper_name)));}):/*#__PURE__*/React.createElement(\"tr\",{className:\"w-100\"},/*#__PURE__*/React.createElement(\"td\",{colSpan:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},t(\"No Data Available\")))))):null))))),isItemUsageUpdatePopup?/*#__PURE__*/React.createElement(ItemUsageUpdatePopup,{isItemUsageUpdatePopup:isItemUsageUpdatePopup,itemUsageUpdatePopup:this.itemCloseUsageUpdatePopup,newItemlist:function newItemlist(StockItemUsageList){return _this2.includeNewItems(StockItemUsageList);}}):null);}}]);return TreatmentUsagePopupClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{// filter: state.dashboard\n};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({updateForm:updateForm,getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi},dispatch);};export var TreatmentUsagePopup=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(TreatmentUsagePopupClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Cart/treatmentDone/TreatmentUsagePopup.js"],"names":["React","Component","updateForm","getCommonApi","commonCreateApi","commonPatchApi","connect","bindActionCreators","NormalButton","NormalModal","NormalInput","NormalCheckbox","TableWrapper","NormalTextarea","classnames","Nav","NavItem","NavLink","TabContent","TabPane","closeIcon","ItemUsageUpdatePopup","Toast","TreatmentUsageDetail","withTranslation","TreatmentUsagePopupClass","state","TreatmentUsageListHeader","label","divClass","TreatmentUsageList","meta","ExchangeTreatmentListHeader","ExchangeTreatmentList","ExchangeMeta","activeTab","isItemUsageUpdatePopup","TreatmentHistoryId","treatment_code","course","remarks","EditableRemark","ExchangeStaffListHeader","ExchangeStaffList","autoProductFlag","cust_data","componentDidMount","getTreatmentUsageList","props","data","setState","then","res","treatmentUsageList","status","console","log","error","id","auto","cust","staffs","usage","datalist","item_code","link_code","item_desc","qty","uom","optional","optionalSelected","stock_id","Treatmentid","auto_table","push","toggle","tab","filterEditableRemark","find","account","itemCloseUsageUpdatePopup","prevState","itemUsageUpdatePopup","type","message","remarkHandle","target","name","value","includeNewItems","ItemDesc","parseInt","handleSave","final","length","treatmentUsagePopupclose","deleteSelectedItem","item","filter","x","handleCheckbox","index","allowOptional","t","minWidth","isTreatmentUsagePopup","cust_name","cust_refer","active","map","e","handleSelectTreatment","Item_Class","add_duration","item_price","no","staff_code","helper_name","StockItemUsageList","mapStateToProps","mapDispatchToProps","dispatch","TreatmentUsagePopup"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  updateForm,\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  NormalButton,\r\n  NormalModal,\r\n  NormalInput,\r\n  NormalCheckbox,\r\n  TableWrapper,\r\n  NormalTextarea,\r\n} from \"component/common\";\r\nimport classnames from \"classnames\";\r\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from \"reactstrap\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { ItemUsageUpdatePopup } from \"./ItemUsageUpdatePopup\";\r\nimport { Toast } from \"service/toast\";\r\nimport { TreatmentUsageDetail } from \"./TreatmentUsageDetail\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class TreatmentUsagePopupClass extends Component {\r\n  state = {\r\n    TreatmentUsageListHeader: [\r\n      { label: \"No\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Item Code\" },\r\n      { label: \"Link Code\" },\r\n      { label: \"Item Desc\" },\r\n      { label: \"Quantity\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"UOM\" },\r\n      { label: \"Optional\", divClass: \"justify-content-center\" },\r\n      { label: \"Remove\", divClass: \"justify-content-center\" },\r\n    ],\r\n    TreatmentUsageList: [],\r\n    meta: {},\r\n    ExchangeTreatmentListHeader: [\r\n      { label: \"No\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Staff Code\" },\r\n      { label: \"Staff Name\" },\r\n      { label: \"Trmt No\" },\r\n      { label: \"Original Item Code\" },\r\n      { label: \"Original Item Desc\" },\r\n      { label: \"Exchange Item Code\" },\r\n      { label: \"Exchange Item Desc\" },\r\n      { label: \"Trans#\" },\r\n      { label: \"Trans. Date\" },\r\n      { label: \"Exchange Date\" },\r\n    ],\r\n    ExchangeTreatmentList: [],\r\n    ExchangeMeta: {},\r\n    activeTab: \"3\",\r\n    isItemUsageUpdatePopup: false,\r\n    TreatmentHistoryId: 0,\r\n    treatment_code: \"\",\r\n    course: \"\",\r\n    remarks: \"\",\r\n    EditableRemark: true,\r\n    ExchangeStaffListHeader: [\r\n      { label: \"No\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Staff Code\" },\r\n      { label: \"Staff Name\" },\r\n    ],\r\n    ExchangeStaffList: [],\r\n    autoProductFlag: \"False\",\r\n    cust_data: {},\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.getTreatmentUsageList(this.props.TreatmentHistoryId);\r\n  };\r\n\r\n  getTreatmentUsageList = data => {\r\n    let { TreatmentUsageList } = this.state;\r\n    this.setState({\r\n      TreatmentHistoryId: data,\r\n    });\r\n    if (data > 0) {\r\n      this.props.getCommonApi(`stockusage/${data}/`).then(async res => {\r\n        await this.setState({ treatmentUsageList: [] });\r\n        let { data, status } = res;\r\n        console.log(res, \"treatmenthistory list autoproductflag\");\r\n        if (status === 200 && res.error !== true) {\r\n          if (data) {\r\n            await this.setState({\r\n              TreatmentHistoryId: data.id,\r\n              treatment_code: data.treatment_code,\r\n              course: data.course,\r\n              remarks: data.remarks,\r\n              autoProductFlag: data.auto,\r\n              cust_data: data.cust,\r\n            });\r\n\r\n            let ExchangeStaffList = data.staffs;\r\n            for (let datalist of data.usage) {\r\n              let item_code = datalist.item_code;\r\n              let link_code = datalist.link_code;\r\n              let item_desc = datalist.item_desc;\r\n              let qty = datalist.qty;\r\n              let uom = datalist.uom;\r\n              let optional = datalist.optional;\r\n              let optionalSelected = false;\r\n              let stock_id = 0;\r\n              let Treatmentid = 0;\r\n              if (datalist && !datalist.auto_table) {\r\n                Treatmentid = data.id;\r\n                stock_id = datalist.id;\r\n              } else {\r\n                stock_id = datalist.stock_id;\r\n                Treatmentid = 0;\r\n              }\r\n              TreatmentUsageList.push({\r\n                item_code,\r\n                link_code,\r\n                item_desc,\r\n                qty,\r\n                uom,\r\n                stock_id,\r\n                Treatmentid,\r\n                optional,\r\n                optionalSelected,\r\n              });\r\n            }\r\n            await this.setState({ TreatmentUsageList, ExchangeStaffList });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  toggle = tab => {\r\n    if (tab == \"3\") {\r\n      this.setState({ EditableRemark: true });\r\n    } else if (tab == \"1\") {\r\n      let { TreatmentUsageList } = this.state;\r\n      let filterEditableRemark = TreatmentUsageList.find(\r\n        account => account.Treatmentid === 0\r\n      );\r\n      if (filterEditableRemark) {\r\n        this.setState({ EditableRemark: true });\r\n      } else {\r\n        this.setState({ EditableRemark: false });\r\n      }\r\n    } else {\r\n      this.setState({ EditableRemark: false });\r\n    }\r\n    if (this.state.activeTab !== tab) {\r\n      this.setState({\r\n        activeTab: tab,\r\n      });\r\n    }\r\n  };\r\n\r\n  itemCloseUsageUpdatePopup = () => {\r\n    this.setState(prevState => ({\r\n      isItemUsageUpdatePopup: !prevState.isItemUsageUpdatePopup,\r\n    }));\r\n  };\r\n  itemUsageUpdatePopup = () => {\r\n    let { autoProductFlag } = this.state;\r\n    if (autoProductFlag == \"False\") {\r\n      this.setState(prevState => ({\r\n        isItemUsageUpdatePopup: !prevState.isItemUsageUpdatePopup,\r\n      }));\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Auto product update enabled for this treatment!\",\r\n      });\r\n    }\r\n  };\r\n\r\n  remarkHandle = ({ target: { name, value } }) => {\r\n    this.setState({ [name]: value });\r\n  };\r\n  includeNewItems = async data => {\r\n    await this.setState({\r\n      isItemUsageUpdatePopup: false,\r\n      EditableRemark: true,\r\n    });\r\n\r\n    let { TreatmentUsageList } = this.state;\r\n    for (let value of data) {\r\n      TreatmentUsageList.push({\r\n        item_code: value.item_code,\r\n        link_code: value.link_code,\r\n        item_desc: value.ItemDesc,\r\n        qty: parseInt(value.qty),\r\n        uom: value.uom,\r\n        stock_id: value.stock_id,\r\n        Treatmentid: 0,\r\n        optional: true,\r\n        optionalSelected: false,\r\n      });\r\n    }\r\n    await this.setState({ TreatmentUsageList });\r\n  };\r\n  handleSave = () => {\r\n    let { TreatmentUsageList, TreatmentHistoryId, remarks } = this.state;\r\n\r\n    let data = [];\r\n    for (let final of TreatmentUsageList) {\r\n      if (final.Treatmentid == 0 && !final.optionalSelected) {\r\n        data.push({\r\n          item_code: final.item_code,\r\n          link_code: final.link_code,\r\n          item_desc: final.item_desc,\r\n          qty: final.qty,\r\n          uom: final.uom,\r\n          stock_id: final.stock_id,\r\n        });\r\n      }\r\n    }\r\n    if (data.length > 0) {\r\n      this.props\r\n        .commonCreateApi(\r\n          `stockusage/?treat_id=${TreatmentHistoryId}&treat_remarks=${remarks}`,\r\n          data\r\n        )\r\n        .then(async res => {\r\n          if (res.status === 201) {\r\n            this.setState({ TreatmentUsageList: [], TreatmentHistoryId: 0 });\r\n            this.props.treatmentUsagePopupclose();\r\n          }\r\n        });\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please Add New Product and then try!\" });\r\n    }\r\n  };\r\n  deleteSelectedItem = async item => {\r\n    if (item.Treatmentid === 0) {\r\n      await this.setState(data => ({\r\n        TreatmentUsageList: data.TreatmentUsageList.filter(\r\n          x => x.stock_id != item.stock_id\r\n        ),\r\n      }));\r\n      let { TreatmentUsageList } = this.state;\r\n      let filterEditableRemark = TreatmentUsageList.find(\r\n        account => account.Treatmentid === 0\r\n      );\r\n      if (filterEditableRemark) {\r\n        this.setState({\r\n          EditableRemark: true,\r\n        });\r\n      } else {\r\n        this.setState({\r\n          EditableRemark: false,\r\n        });\r\n      }\r\n    } else {\r\n      let { TreatmentHistoryId } = this.state;\r\n      this.props\r\n        .commonPatchApi(\r\n          `stockusage/${item.stock_id}/?treat_id=${TreatmentHistoryId}`\r\n        )\r\n        .then(async res => {\r\n          if (res.status === 200) {\r\n            await this.setState(data => ({\r\n              TreatmentUsageList: data.TreatmentUsageList.filter(\r\n                x => x.stock_id != item.stock_id\r\n              ),\r\n            }));\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  handleCheckbox = async ({ target: { value, name } }, index) => {\r\n    let { TreatmentUsageList } = this.state;\r\n\r\n    let allowOptional = TreatmentUsageList[index][\"optional\"];\r\n    if (allowOptional) {\r\n      TreatmentUsageList[index][name] = value;\r\n      await this.setState({\r\n        TreatmentUsageList,\r\n      });\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"This is not an Optional Product!\",\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      TreatmentUsageList,\r\n      TreatmentUsageListHeader,\r\n      meta,\r\n      isItemUsageUpdatePopup,\r\n      ExchangeTreatmentList,\r\n      ExchangeTreatmentListHeader,\r\n      ExchangeMeta,\r\n      TreatmentHistoryId,\r\n      treatment_code,\r\n      course,\r\n      remarks,\r\n      EditableRemark,\r\n      ExchangeStaffList,\r\n      ExchangeStaffListHeader,\r\n      cust_data,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <NormalModal\r\n        className={\"select-category\"}\r\n        style={{ minWidth: \"75%\" }}\r\n        modal={this.props.isTreatmentUsagePopup}\r\n        handleModal={this.props.treatmentUsagePopupclose}\r\n      >\r\n        <img\r\n          onClick={this.props.treatmentUsagePopupclose}\r\n          className=\"close\"\r\n          src={closeIcon}\r\n          alt=\"\"\r\n        />\r\n        <div className=\"d-flex h4 justify-content-center p-1\">\r\n          {t(\"Treatment Usage\")}\r\n        </div>\r\n        <div className=\"customer-list container\">\r\n          <div className=\"d-flex justify-content-left\">\r\n            <div className=\"col-2\">\r\n              <div className=\"text-left\">{t(\"Customer Name\")}</div>\r\n            </div>\r\n            <div className=\"col-3\">\r\n              <div className=\"text-left fs-15 fw-500\">\r\n                {cust_data.cust_name}\r\n              </div>\r\n            </div>\r\n            <div className=\"col-2\">\r\n              <div className=\"text-left\">{t(\"Reference\")}</div>\r\n            </div>\r\n            <div className=\"col-3\">\r\n              <div className=\"text-left fs-15 fw-500\">\r\n                {cust_data.cust_refer}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"d-flex justify-content-left mt-2\">\r\n            <div className=\"col-2\">\r\n              <div className=\"text-left\">{t(\"Treatment Code\")}</div>\r\n            </div>\r\n            <div className=\"col-3\">\r\n              <div className=\"text-left fs-15 fw-500\">{treatment_code}</div>\r\n            </div>\r\n            <div className=\"col-2\">\r\n              <div className=\"text-left\">{t(\"Treatment Name\")}</div>\r\n            </div>\r\n            <div className=\"col-5\">\r\n              <div className=\"text-left fs-15 fw-500\">{course}</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"d-flex justify-content-left mt-2\">\r\n            <div className=\"col-2\">\r\n              <div className=\"text-left\">{t(\"Remarks\")}</div>\r\n            </div>\r\n            <div className=\"col-8\">\r\n              <div className=\"text-left fs-15 fw-500\">\r\n                {EditableRemark ? (\r\n                  <NormalTextarea\r\n                    value={remarks}\r\n                    name=\"remarks\"\r\n                    onChange={this.remarkHandle}\r\n                  />\r\n                ) : (\r\n                  <NormalTextarea\r\n                    value={remarks}\r\n                    name=\"remarks\"\r\n                    onChange={this.remarkHandle}\r\n                    disabled\r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"beautesoft-navlink customer-detail mt-3\">\r\n            <div className=\"filled-tabs\">\r\n              <div className=\"tabs-block\">\r\n                <Nav tabs>\r\n                  <NavItem>\r\n                    <NavLink\r\n                      className={classnames({\r\n                        active: this.state.activeTab === \"3\",\r\n                      })}\r\n                      onClick={() => {\r\n                        this.toggle(\"3\");\r\n                      }}\r\n                    >\r\n                      {t(\"Detail\")}\r\n                    </NavLink>\r\n                  </NavItem>\r\n                  <NavItem>\r\n                    <NavLink\r\n                      className={classnames({\r\n                        active: this.state.activeTab === \"1\",\r\n                      })}\r\n                      onClick={() => {\r\n                        this.toggle(\"1\");\r\n                      }}\r\n                    >\r\n                      {t(\"Stock Usage\")}\r\n                    </NavLink>\r\n                  </NavItem>\r\n                  <NavItem>\r\n                    <NavLink\r\n                      className={classnames({\r\n                        active: this.state.activeTab === \"4\",\r\n                      })}\r\n                      onClick={() => {\r\n                        this.toggle(\"4\");\r\n                      }}\r\n                    >\r\n                      {t(\"Staff\")}\r\n                    </NavLink>\r\n                  </NavItem>\r\n                  <NavItem>\r\n                    <NavLink\r\n                      className={classnames({\r\n                        active: this.state.activeTab === \"2\",\r\n                      })}\r\n                      onClick={() => {\r\n                        this.toggle(\"2\");\r\n                      }}\r\n                    >\r\n                      {t(\"Exchange\")} {t(\"Treatment\")}\r\n                    </NavLink>\r\n                  </NavItem>\r\n                </Nav>\r\n              </div>\r\n              <TabContent activeTab={this.state.activeTab}>\r\n                <TabPane tabId=\"1\">\r\n                  {this.state.activeTab === \"1\" ? (\r\n                    <div>\r\n                      <NormalButton\r\n                        mainbg={true}\r\n                        className=\"col-2 fs-15 mt-3\"\r\n                        label=\"Add Item Usage\"\r\n                        onClick={this.itemUsageUpdatePopup}\r\n                      />\r\n\r\n                      <div className=\"table-container table-responsive mt-3\">\r\n                        <TableWrapper headerDetails={TreatmentUsageListHeader}>\r\n                          {TreatmentUsageList &&\r\n                          TreatmentUsageList.length > 0 ? (\r\n                            TreatmentUsageList.map((item, index) => {\r\n                              return (\r\n                                <tr className=\"w-100\" key={index}>\r\n                                  <td>\r\n                                    <div className=\"text-right\">\r\n                                      {index + 1}\r\n                                    </div>\r\n                                  </td>\r\n                                  <td>\r\n                                    <div className=\"text-left\">\r\n                                      {item.item_code}\r\n                                    </div>\r\n                                  </td>\r\n                                  <td>\r\n                                    <div className=\"text-left\">\r\n                                      {item.link_code}\r\n                                    </div>\r\n                                  </td>\r\n                                  <td>\r\n                                    <div className=\"text-left\">\r\n                                      {item.item_desc}\r\n                                    </div>\r\n                                  </td>\r\n                                  <td>\r\n                                    <div className=\"text-right\">{item.qty}</div>\r\n                                  </td>\r\n                                  <td>\r\n                                    <div className=\"text-left\">{item.uom}</div>\r\n                                  </td>\r\n                                  <td>\r\n                                    <div className=\"d-flex align-items-center justify-content-center\">\r\n                                      <NormalCheckbox\r\n                                        onChange={e =>\r\n                                          this.handleCheckbox(e, index)\r\n                                        }\r\n                                        value={item.optionalSelected}\r\n                                        name=\"optionalSelected\"\r\n                                        checked={item.optionalSelected}\r\n                                      />\r\n                                    </div>\r\n                                  </td>\r\n\r\n                                  <td>\r\n                                    <div\r\n                                      className=\"d-flex align-items-center justify-content-center\"\r\n                                      onClick={() =>\r\n                                        this.deleteSelectedItem(item)\r\n                                      }\r\n                                    >\r\n                                      <img\r\n                                        width=\"25\"\r\n                                        height=\"25\"\r\n                                        className=\"ml-3\"\r\n                                        src={closeIcon}\r\n                                        alt=\"\"\r\n                                      />\r\n                                    </div>\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            })\r\n                          ) : (\r\n                            <tr className=\"w-100\">\r\n                              <td colSpan=\"12\">\r\n                                <div className=\"d-flex align-items-center justify-content-center\">\r\n                                  {t(\"No Data Available\")}\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                          )}\r\n                        </TableWrapper>\r\n                      </div>\r\n                      <div className=\"row text-center justify-content-end w-100 mt-3\">\r\n                        <NormalButton\r\n                          buttonClass={\"col-2\"}\r\n                          mainbg={true}\r\n                          className=\"col-12 ml-4 fs-15 \"\r\n                          label=\"Save\"\r\n                          onClick={this.handleSave}\r\n                        />\r\n                        <NormalButton\r\n                          buttonClass={\"col-2\"}\r\n                          resetbg={true}\r\n                          className=\"col-12 ml-4 fs-15 \"\r\n                          label=\"Cancel\"\r\n                          onClick={this.props.treatmentUsagePopupclose}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ) : null}\r\n                </TabPane>\r\n                <TabPane tabId=\"2\">\r\n                  {this.state.activeTab === \"2\" ? (\r\n                    <div className=\"table-container table-responsive mt-3\">\r\n                      <TableWrapper\r\n                        headerDetails={ExchangeTreatmentListHeader}\r\n                        //queryHandler={this.handlePagination}\r\n                        pageMeta={ExchangeMeta}\r\n                      >\r\n                        {ExchangeTreatmentList &&\r\n                        ExchangeTreatmentList.length > 0 ? (\r\n                          ExchangeTreatmentList.map((item, index) => {\r\n                            return (\r\n                              <tr\r\n                                className=\"w-100\"\r\n                                onClick={() => this.handleSelectTreatment(item)}\r\n                                key={index}\r\n                              >\r\n                                <td>\r\n                                  <div className=\"text-left\">\r\n                                    {item.Item_Class}\r\n                                  </div>\r\n                                </td>\r\n                                <td>\r\n                                  <div className=\"text-left\">\r\n                                    {item.item_desc}\r\n                                  </div>\r\n                                </td>\r\n                                <td>\r\n                                  <div className=\"text-right\">\r\n                                    {item.add_duration}\r\n                                  </div>\r\n                                </td>\r\n                                <td>\r\n                                  <div className=\"text-right\">\r\n                                    {item.item_price}\r\n                                  </div>\r\n                                </td>\r\n                                <td>\r\n                                  <div className=\"text-right\">\r\n                                    {item.item_price}\r\n                                  </div>\r\n                                </td>\r\n                                <td>\r\n                                  <div className=\"text-right\">\r\n                                    {item.item_price}\r\n                                  </div>\r\n                                </td>\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <tr className=\"w-100\">\r\n                            <td colSpan=\"12\">\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {t(\"No Data Available\")}\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        )}\r\n                      </TableWrapper>\r\n                    </div>\r\n                  ) : null}\r\n                </TabPane>\r\n                <TabPane tabId=\"3\">\r\n                  {this.state.activeTab === \"3\" ? (\r\n                    <TreatmentUsageDetail\r\n                      TreatmentHistoryId={this.props.TreatmentHistoryId}\r\n                      remarks={this.state.remarks}\r\n                      treatment_code={this.state.treatment_code}\r\n                    />\r\n                  ) : null}\r\n                </TabPane>\r\n                <TabPane tabId=\"4\">\r\n                  {this.state.activeTab === \"4\" ? (\r\n                    <div className=\"table-container table-responsive mt-3\">\r\n                      <TableWrapper\r\n                        headerDetails={ExchangeStaffListHeader}\r\n                        //queryHandler={this.handlePagination}\r\n                        pageMeta={ExchangeMeta}\r\n                      >\r\n                        {ExchangeStaffList && ExchangeStaffList.length > 0 ? (\r\n                          ExchangeStaffList.map((item, index) => {\r\n                            return (\r\n                              <tr className=\"w-100\" key={index}>\r\n                                <td>\r\n                                  <div className=\"text-right\">{item.no}</div>\r\n                                </td>\r\n                                <td>\r\n                                  <div className=\"text-left\">\r\n                                    {item.staff_code}\r\n                                  </div>\r\n                                </td>\r\n                                <td>\r\n                                  <div className=\"text-left\">\r\n                                    {item.helper_name}\r\n                                  </div>\r\n                                </td>\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <tr className=\"w-100\">\r\n                            <td colSpan=\"12\">\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {t(\"No Data Available\")}\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        )}\r\n                      </TableWrapper>\r\n                    </div>\r\n                  ) : null}\r\n                </TabPane>\r\n              </TabContent>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {isItemUsageUpdatePopup ? (\r\n          <ItemUsageUpdatePopup\r\n            isItemUsageUpdatePopup={isItemUsageUpdatePopup}\r\n            itemUsageUpdatePopup={this.itemCloseUsageUpdatePopup}\r\n            newItemlist={StockItemUsageList =>\r\n              this.includeNewItems(StockItemUsageList)\r\n            }\r\n          />\r\n        ) : null}\r\n      </NormalModal>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      updateForm,\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentUsagePopup = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(TreatmentUsagePopupClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}