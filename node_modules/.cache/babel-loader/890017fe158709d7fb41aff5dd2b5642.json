{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"./style.scss\";import{Link}from'react-router-dom';import SimpleReactValidator from'simple-react-validator';import{NormalInput,NormalSelect,NormalButton,NormalDate,NormalMultiSelect,NormalDateTime}from'component/common';import{displayImg,dateFormat}from'service/helperFunctions';import{DragFileUpload}from'../../../common';import{createStaff,getStaff,updateStaff}from'redux/actions/staff';import{getBranch,getJobtitle,getShift,getSkills,getCommonApi}from'redux/actions/common';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import{FormGroup,Label,Input}from'reactstrap';export var AddStaffClass=/*#__PURE__*/function(_Component){_inherits(AddStaffClass,_Component);var _super=_createSuper(AddStaffClass);function AddStaffClass(){var _this;_classCallCheck(this,AddStaffClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{emp_name:'',emp_phone1:'',emp_joindate:'',defaultSiteCodeid:'',skills_list:'',emp_address:'',Emp_sexesid:'',shift:[],emp_dob:'',EMP_TYPEid:'',emp_pic:\"\",is_login:false,pw_password:\"\",LEVEL_ItmIDid:\"\",emp_email:\"\"},imageArray:[],jobOption:[],shiftOptions:[],locationOption:[],sexOption:[{value:1,label:\"Male\"},{value:2,label:\"Female\"}],skillsOptions:[],selectedSkills:[],levelList:[]};_this.getStaffDetail=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,selectedSkills,formFields;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,selectedSkills=_this$state.selectedSkills,formFields=_this$state.formFields;_context.next=3;return _this.props.getStaff(\"\".concat(_this.props.match.params.id,\"/\")).then(function(res){_this.setDataFromStore();});case 3:_context.next=5;return _this.props.getShift(\"?employee=\".concat(_this.props.match.params.id)).then(function(){_this.getDatafromStore('shift');var skillsList=_this.props.skillsList;// for (let key of skillsList) {\n//     for (let value of formFields.skills_list) {\n//         if (key.id === value) {\n//             selectedSkills.push({ value: key.value, label: key.label })\n//         }\n//     }\n// }\n// for (let key of skillsList) {\n//     for (let value of formFields.skills_list) {\n//         if (key.id === value) {\n//             selectedSkills.push({ value: key.value, label: key.label })\n//         }\n//     }\n// }\n_this.getDefaultSkills();});case 5:_this.setState({selectedSkills:selectedSkills});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.getDefaultSkills=function(){var _this$state2=_this.state,selectedSkills=_this$state2.selectedSkills,formFields=_this$state2.formFields,skillsOptions=_this$state2.skillsOptions;selectedSkills=[];var _iterator=_createForOfIteratorHelper(formFields.skills_list),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;console.log(selectedSkills,\"dfssfgsdfgsdfg\",value,skillsOptions);var _iterator2=_createForOfIteratorHelper(skillsOptions),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;if(key.value===value){console.log(selectedSkills,\"dfssfgsdfgsdfg =========\",key,value);selectedSkills.push({value:key.value,label:key.label});}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({selectedSkills:selectedSkills});};_this.getDatafromStore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(type){var _this$props,branchList,jobtitleList,shiftList,skillsList,_this$state3,jobOption,shiftOptions,locationOption,skillsOptions,_iterator3,_step3,key,_iterator4,_step4,_key2,_iterator5,_step5,_key3,_iterator6,_step6,_key4;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,branchList=_this$props.branchList,jobtitleList=_this$props.jobtitleList,shiftList=_this$props.shiftList,skillsList=_this$props.skillsList;_this$state3=_this.state,jobOption=_this$state3.jobOption,shiftOptions=_this$state3.shiftOptions,locationOption=_this$state3.locationOption,skillsOptions=_this$state3.skillsOptions;if(type==='jobtitle'){_iterator3=_createForOfIteratorHelper(jobtitleList);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){key=_step3.value;jobOption.push({label:key.level_desc,value:key.id});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}else if(type==='branch'){_iterator4=_createForOfIteratorHelper(branchList);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){_key2=_step4.value;locationOption.push({label:_key2.itemsite_desc,value:_key2.id});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}else if(type==='shift'){_iterator5=_createForOfIteratorHelper(shiftList);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){_key3=_step5.value;shiftOptions.push({label:_key3.shift_name,value:_key3.id});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}else if(type==='skills'){_iterator6=_createForOfIteratorHelper(skillsList);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){_key4=_step6.value;skillsOptions.push({value:_key4.id,label:_key4.item_desc});}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}_context2.next=5;return _this.setState({locationOption:locationOption,jobOption:jobOption,shiftOptions:shiftOptions,skillsOptions:skillsOptions});case 5:_this.getDefaultSkills();case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.setDataFromStore=function(){var staffDetail=_this.props.staffDetail;var formFields=_this.state.formFields;// console.log(\"ufjdfjssd staff\", staffDetail, formFields)\nformFields['emp_name']=staffDetail.emp_name;formFields['emp_phone1']=staffDetail.emp_phone1;formFields['emp_joindate']=new Date(staffDetail.emp_joindate);formFields['defaultSiteCodeid']=staffDetail.defaultSiteCodeid;formFields['skills_list']=staffDetail.skills;formFields['emp_address']=staffDetail.emp_address;formFields['Emp_sexesid']=staffDetail.Emp_sexesid;formFields['shift']=staffDetail.shift;formFields['emp_dob']=new Date(staffDetail.emp_dob);formFields['EMP_TYPEid']=staffDetail.EMP_TYPEid;formFields['emp_pic']=staffDetail.emp_pic;_this.setState({formFields:formFields});};_this.handleChange=function(_ref3){var _ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields});};_this.handleDatePick=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,value){var formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(name,value,\"sdfgdfhfshg\",dateFormat(new Date()));// dateFormat(new Date())\nformFields=_this.state.formFields;formFields[name]=value;// formFields[name] = value;\n_context3.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}();_this.handleInput=function(_ref5){var _ref5$target=_ref5.target,name=_ref5$target.name,value=_ref5$target.value;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value===true?1:value;_this.setState({formFields:formFields});};_this.handleImageUpload=function(file){var formFields=_this.state.formFields;formFields['emp_pic']=file;_this.setState({formFields:formFields});};_this.removepostImage=function(e,name){var staffImage=_this.state.formFields.staffImage;var index=staffImage.indexOf(name);if(index===0){staffImage.shift();}else{staffImage.pop();}_this.setState({staffImage:staffImage});};_this.handleSubmit=function(){if(_this.validator.allValid()){var formFields=_this.state.formFields;var formData=new FormData();formData.append('emp_name',formFields.emp_name);formData.append('emp_phone1',formFields.emp_phone1);formData.append('emp_joindate',dateFormat(formFields.emp_joindate));// if (formFields.defaultSiteCodeid === \"\") {\nformData.append('defaultSiteCodeid',formFields.defaultSiteCodeid);// }\nformData.append('skills_list',formFields.skills_list);formData.append('emp_address',formFields.emp_address);formData.append('Emp_sexesid',formFields.Emp_sexesid);// formData.append('shift', formFields.shift)\nformData.append('emp_dob',dateFormat(formFields.emp_dob));formData.append('EMP_TYPEid',formFields.EMP_TYPEid);formData.append('is_login',formFields.is_login);formData.append('pw_password',formFields.pw_password);formData.append('LEVEL_ItmIDid',formFields.LEVEL_ItmIDid);formData.append('emp_pic',formFields.emp_pic);formData.append('emp_email',formFields.emp_email);if(_this.props.match.params.id){_this.props.updateStaff(\"\".concat(_this.props.match.params.id,\"/\"),formData).then(function(res){console.log(res);if(res.status===200){_this.props.history.push(\"/admin/staff/\".concat(res.data.id,\"/staffDetails\"));}});}else{_this.props.createStaff(formData).then(function(res){console.log(res);if(res.status===201){_this.props.history.push(\"/admin/staff\");}});}}else{_this.validator.showMessages();}};_this.handleMultiSelect=function(data){var formFields=_this.state.formFields;var list=[];var _iterator7=_createForOfIteratorHelper(data),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var key=_step7.value;list.push(key.value);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}formFields['skills_list']=list;_this.setState({formFields:formFields});console.log(formFields,\"oyokkjk\");};_this.handleChangeBox=function(event){var formFields=Object.assign({},_this.state.formFields);console.log(formFields,\"oyokkjk\",event.target.name,event.target);formFields[event.target.name]=event.target.checked;_this.setState({formFields:formFields});};return _this;}_createClass(AddStaffClass,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.validator=new SimpleReactValidator({validators:{contactNumber:{message:'The :attribute must be a valid format.',rule:function rule(val,params,validator){return validator.helpers.testRegex(val,/^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/)&&params.indexOf(val)===-1;},messageReplace:function messageReplace(message,params){return message.replace('',_this2.helpers.toSentence(params));},required:true}},element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:this});// branch option api \nthis.props.getCommonApi(\"branchlist/\").then(function(res){var locationOption=_this2.state.locationOption;var _iterator8=_createForOfIteratorHelper(res.data),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var key=_step8.value;locationOption.push({value:key.id,label:key.itemsite_desc});}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}_this2.setState({locationOption:locationOption});});// level option api \nthis.props.getCommonApi(\"securities/\").then(function(res){var levelList=_this2.state.levelList;var _iterator9=_createForOfIteratorHelper(res.data),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var key=_step9.value;levelList.push({value:key.id,label:key.level_name});}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}_this2.setState({levelList:levelList});});// jobtitle option api\nthis.props.getJobtitle().then(function(){_this2.getDatafromStore('jobtitle');});// get api for staff while\nif(this.props.match.params.id){this.getStaffDetail();}// skills option api\nthis.props.getSkills().then(function(){_this2.getDatafromStore('skills');});}// get api for staff\n},{key:\"render\",value:function render(){var _this3=this;var _this$state4=this.state,formFields=_this$state4.formFields,jobOption=_this$state4.jobOption,shiftOptions=_this$state4.shiftOptions,locationOption=_this$state4.locationOption,sexOption=_this$state4.sexOption,skillsOptions=_this$state4.skillsOptions,selectedSkills=_this$state4.selectedSkills,levelList=_this$state4.levelList;var emp_name=formFields.emp_name,emp_email=formFields.emp_email,emp_phone1=formFields.emp_phone1,emp_joindate=formFields.emp_joindate,defaultSiteCodeid=formFields.defaultSiteCodeid,skills_list=formFields.skills_list,emp_address=formFields.emp_address,Emp_sexesid=formFields.Emp_sexesid,shift=formFields.shift,emp_dob=formFields.emp_dob,EMP_TYPEid=formFields.EMP_TYPEid,emp_pic=formFields.emp_pic,is_login=formFields.is_login,pw_password=formFields.pw_password,LEVEL_ItmIDid=formFields.LEVEL_ItmIDid;return/*#__PURE__*/React.createElement(\"div\",{className:\"px-5 container create-staff\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},\"Staffs \"),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},\"Add \",this.props.match.params.id?\"Edit\":\"New\",\" Staff\")),/*#__PURE__*/React.createElement(\"div\",{className:\"staff-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Staff Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:emp_name,name:\"emp_name\",onChange:this.handleChange})),this.validator.message('staff name',emp_name,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Job Title\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:jobOption,value:EMP_TYPEid,name:\"EMP_TYPEid\",onChange:this.handleChange})),this.validator.message('job tilte',EMP_TYPEid,'required')))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Skills\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},!this.props.match.params.id?skillsOptions.length>0?/*#__PURE__*/React.createElement(NormalMultiSelect,{name:\"skills_list\",className:\"staff-skills-select \".concat(skills_list!==\"\"?\"overflow-y-set\":\"\"),options:skillsOptions,handleMultiSelect:this.handleMultiSelect}):\"\":skillsOptions.length>0&&selectedSkills.length>0?/*#__PURE__*/React.createElement(NormalMultiSelect,{name:\"skills_list\",value:selectedSkills.length>0?selectedSkills:[],className:\"staff-skills-select \".concat(skills_list!==\"\"?\"overflow-y-set\":\"\"),options:skillsOptions,handleMultiSelect:this.handleMultiSelect}):\"\"),this.validator.message('skills',skills_list,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Contact Number\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:emp_phone1,name:\"emp_phone1\",onChange:this.handleChange})),this.validator.message('phone number',emp_phone1,'required')))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Address\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:emp_address,name:\"emp_address\",onChange:this.handleChange})),this.validator.message('address',emp_address,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Gender\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:sexOption,value:Emp_sexesid,name:\"Emp_sexesid\",onChange:this.handleChange})),this.validator.message('Emp_sexesid',Emp_sexesid,'required')))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"DOB\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\"// value={outTime}\n,value:emp_dob// label=\"inTime\"\n,name:\"emp_dob\",className:\"dob-pick\",showYearDropdown:true,dateFormat:\"dd/MM/yyyy\"})),this.validator.message('date of birth',emp_dob,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Starting Date\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\"// value={outTime}\n,value:emp_joindate// label=\"inTime\"\n,name:\"emp_joindate\",className:\"dob-pick\",showYearDropdown:true,dateFormat:\"dd/MM/yyyy\"})),this.validator.message('Joined date',emp_joindate,'required')))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Email\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:emp_email,name:\"emp_email\",onChange:this.handleChange})),this.validator.message('emp_email',emp_email,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Branch / Location\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:locationOption,value:defaultSiteCodeid,name:\"defaultSiteCodeid\",onChange:this.handleChange})),this.validator.message('defaultSiteCodeid',defaultSiteCodeid,'required')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 my-5\"},/*#__PURE__*/React.createElement(FormGroup,{check:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(Input,{type:\"checkbox\",onChange:this.handleChangeBox,checked:is_login,name:\"is_login\"}),' ',\" Is Login\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"}),is_login?/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:pw_password,name:\"pw_password\",onChange:this.handleChange}))):\"\",is_login?/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Category Level\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:levelList,value:LEVEL_ItmIDid,name:\"LEVEL_ItmIDid\",onChange:this.handleChange}))):\"\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Upload Staff Photo\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 p-0\"},/*#__PURE__*/React.createElement(DragFileUpload,{className:\"file-uploader size-sm \".concat(emp_pic?\"\":'no-img'),label:\"Upload Thumbnail\",handleFileUpload:this.handleImageUpload},emp_pic?/*#__PURE__*/React.createElement(React.Fragment,null,console.log(typeof emp_pic,\"kjusytdifshwosdhfs\"),typeof emp_pic=='string'?/*#__PURE__*/React.createElement(\"img\",{src:emp_pic,alt:\"\"}):/*#__PURE__*/React.createElement(\"img\",{src:displayImg(emp_pic),alt:\"\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"uploader-content text-center\"},/*#__PURE__*/React.createElement(\"span\",null,\"Upload Image\"))),this.validator.message('emp_pic',emp_pic,'required'))),/*#__PURE__*/React.createElement(\"div\",{className:\"border-bottom-line\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"pt-5 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staff\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Cancel\",danger:true,className:\"mr-2 col-12\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:function onClick(){return _this3.handleSubmit();},label:\"Save\",success:true,className:\"mr-2 col-12\"})))));}}]);return AddStaffClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{branchList:state.common.branchList,jobtitleList:state.common.jobtitleList,shiftList:state.common.shiftList,skillsList:state.common.skillsList,staffDetail:state.staff.staffDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({createStaff:createStaff,getBranch:getBranch,getJobtitle:getJobtitle,getShift:getShift,getSkills:getSkills,getStaff:getStaff,updateStaff:updateStaff,getCommonApi:getCommonApi},dispatch);};export var AddStaff=connect(mapStateToProps,mapDispatchToProps)(AddStaffClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Staff/AddStaff/index.js"],"names":["React","Component","Link","SimpleReactValidator","NormalInput","NormalSelect","NormalButton","NormalDate","NormalMultiSelect","NormalDateTime","displayImg","dateFormat","DragFileUpload","createStaff","getStaff","updateStaff","getBranch","getJobtitle","getShift","getSkills","getCommonApi","connect","bindActionCreators","FormGroup","Label","Input","AddStaffClass","state","formFields","emp_name","emp_phone1","emp_joindate","defaultSiteCodeid","skills_list","emp_address","Emp_sexesid","shift","emp_dob","EMP_TYPEid","emp_pic","is_login","pw_password","LEVEL_ItmIDid","emp_email","imageArray","jobOption","shiftOptions","locationOption","sexOption","value","label","skillsOptions","selectedSkills","levelList","getStaffDetail","props","match","params","id","then","res","setDataFromStore","getDatafromStore","skillsList","getDefaultSkills","setState","console","log","key","push","type","branchList","jobtitleList","shiftList","level_desc","itemsite_desc","shift_name","item_desc","staffDetail","Date","skills","handleChange","target","name","Object","assign","handleDatePick","handleInput","handleImageUpload","file","removepostImage","e","staffImage","index","indexOf","pop","handleSubmit","validator","allValid","formData","FormData","append","status","history","data","showMessages","handleMultiSelect","list","handleChangeBox","event","checked","validators","contactNumber","message","rule","val","helpers","testRegex","messageReplace","replace","toSentence","required","element","autoForceUpdate","level_name","length","mapStateToProps","common","staff","mapDispatchToProps","dispatch","AddStaff"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport \"./style.scss\";\r\nimport { Link } from 'react-router-dom';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport { NormalInput, NormalSelect, NormalButton, NormalDate, NormalMultiSelect, NormalDateTime } from 'component/common';\r\nimport { displayImg, dateFormat } from 'service/helperFunctions';\r\nimport { DragFileUpload } from '../../../common';\r\nimport { createStaff, getStaff, updateStaff } from 'redux/actions/staff'\r\nimport { getBranch, getJobtitle, getShift, getSkills, getCommonApi } from 'redux/actions/common'\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { FormGroup, Label, Input } from 'reactstrap';\r\n\r\nexport class AddStaffClass extends Component {\r\n    state = {\r\n        formFields: {\r\n            emp_name: '',\r\n            emp_phone1: '',\r\n            emp_joindate: '',\r\n            defaultSiteCodeid: '',\r\n            skills_list: '',\r\n            emp_address: '',\r\n            Emp_sexesid: '',\r\n            shift: [],\r\n            emp_dob: '',\r\n            EMP_TYPEid: '',\r\n            emp_pic: \"\",\r\n            is_login: false,\r\n            pw_password: \"\",\r\n            LEVEL_ItmIDid: \"\",\r\n            emp_email: \"\"\r\n        },\r\n        imageArray: [],\r\n        jobOption: [],\r\n        shiftOptions: [],\r\n        locationOption: [],\r\n        sexOption: [\r\n            { value: 1, label: \"Male\" },\r\n            { value: 2, label: \"Female\" }\r\n        ],\r\n        skillsOptions: [],\r\n        selectedSkills: [],\r\n        levelList: []\r\n    };\r\n\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            validators: {\r\n                contactNumber: {\r\n                    message: 'The :attribute must be a valid format.',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/) && params.indexOf(val) === -1\r\n                    },\r\n                    messageReplace: (message, params) => message.replace('', this.helpers.toSentence(params)),\r\n                    required: true\r\n                },\r\n            },\r\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\r\n            autoForceUpdate: this,\r\n        });\r\n\r\n        // branch option api \r\n        this.props.getCommonApi(\"branchlist/\").then((res) => {\r\n            let { locationOption } = this.state;\r\n            for (let key of res.data) {\r\n                locationOption.push({ value: key.id, label: key.itemsite_desc })\r\n            }\r\n            this.setState({ locationOption })\r\n        });\r\n\r\n        // level option api \r\n        this.props.getCommonApi(\"securities/\").then((res) => {\r\n            let { levelList } = this.state;\r\n            for (let key of res.data) {\r\n                levelList.push({ value: key.id, label: key.level_name })\r\n            }\r\n            this.setState({ levelList })\r\n        });\r\n\r\n        // jobtitle option api\r\n        this.props.getJobtitle().then(() => {\r\n            this.getDatafromStore('jobtitle');\r\n        });\r\n\r\n        // get api for staff while\r\n        if (this.props.match.params.id) {\r\n            this.getStaffDetail();\r\n        }\r\n\r\n        // skills option api\r\n        this.props.getSkills().then(() => {\r\n            this.getDatafromStore('skills');\r\n        });\r\n    }\r\n\r\n    // get api for staff\r\n    getStaffDetail = async () => {\r\n\r\n        let { selectedSkills, formFields } = this.state;\r\n        await this.props.getStaff(`${this.props.match.params.id}/`).then((res) => {\r\n            this.setDataFromStore();\r\n        })\r\n        await this.props.getShift(`?employee=${this.props.match.params.id}`).then(() => {\r\n            this.getDatafromStore('shift');\r\n            let { skillsList } = this.props;\r\n            // for (let key of skillsList) {\r\n            //     for (let value of formFields.skills_list) {\r\n            //         if (key.id === value) {\r\n            //             selectedSkills.push({ value: key.value, label: key.label })\r\n            //         }\r\n            //     }\r\n            // }\r\n            this.getDefaultSkills();\r\n        });\r\n        this.setState({ selectedSkills })\r\n\r\n    }\r\n\r\n    getDefaultSkills = () => {\r\n        let { selectedSkills, formFields, skillsOptions } = this.state;\r\n        selectedSkills = []\r\n        for (let value of formFields.skills_list) {\r\n            console.log(selectedSkills, \"dfssfgsdfgsdfg\", value, skillsOptions)\r\n            for (let key of skillsOptions) {\r\n\r\n                if (key.value === value) {\r\n                    console.log(selectedSkills, \"dfssfgsdfgsdfg =========\", key, value)\r\n                    selectedSkills.push({ value: key.value, label: key.label })\r\n                }\r\n            }\r\n        }\r\n        this.setState({ selectedSkills })\r\n    }\r\n\r\n    // set dropdown data from response\r\n    getDatafromStore = async (type) => {\r\n        let { branchList, jobtitleList, shiftList, skillsList } = this.props;\r\n        let { jobOption, shiftOptions, locationOption, skillsOptions } = this.state;\r\n        if (type === 'jobtitle') {\r\n            for (let key of jobtitleList) {\r\n                jobOption.push({ label: key.level_desc, value: key.id })\r\n            }\r\n        } else if (type === 'branch') {\r\n            for (let key of branchList) {\r\n                locationOption.push({ label: key.itemsite_desc, value: key.id })\r\n            }\r\n        } else if (type === 'shift') {\r\n            for (let key of shiftList) {\r\n                shiftOptions.push({ label: key.shift_name, value: key.id })\r\n            }\r\n        } else if (type === 'skills') {\r\n            for (let key of skillsList) {\r\n                skillsOptions.push({ value: key.id, label: key.item_desc })\r\n            }\r\n        }\r\n        await this.setState({\r\n            locationOption,\r\n            jobOption,\r\n            shiftOptions,\r\n            skillsOptions\r\n        })\r\n        this.getDefaultSkills();\r\n    }\r\n\r\n    // set data to formfield from response while edit\r\n    setDataFromStore = () => {\r\n        let { staffDetail } = this.props;\r\n        let { formFields } = this.state;\r\n        // console.log(\"ufjdfjssd staff\", staffDetail, formFields)\r\n        formFields['emp_name'] = staffDetail.emp_name;\r\n        formFields['emp_phone1'] = staffDetail.emp_phone1;\r\n        formFields['emp_joindate'] = new Date(staffDetail.emp_joindate);\r\n        formFields['defaultSiteCodeid'] = staffDetail.defaultSiteCodeid;\r\n        formFields['skills_list'] = staffDetail.skills;\r\n        formFields['emp_address'] = staffDetail.emp_address;\r\n        formFields['Emp_sexesid'] = staffDetail.Emp_sexesid;\r\n        formFields['shift'] = staffDetail.shift;\r\n        formFields['emp_dob'] = new Date(staffDetail.emp_dob);\r\n        formFields['EMP_TYPEid'] = staffDetail.EMP_TYPEid;\r\n        formFields['emp_pic'] = staffDetail.emp_pic;\r\n        this.setState({ formFields })\r\n    }\r\n\r\n    handleChange = ({ target: { value, name } }) => {\r\n        let formFields = Object.assign({}, this.state.formFields);\r\n\r\n        formFields[name] = value;\r\n\r\n        this.setState({\r\n            formFields,\r\n        });\r\n    };\r\n\r\n    handleDatePick = async (name, value) => {\r\n        console.log(name, value, \"sdfgdfhfshg\", dateFormat(new Date()))\r\n        // dateFormat(new Date())\r\n        let { formFields } = this.state;\r\n        formFields[name] = value;\r\n        // formFields[name] = value;\r\n        await this.setState({\r\n            formFields,\r\n        });\r\n    };\r\n\r\n    handleInput = ({ target: { name, value } }) => {\r\n\r\n        let formFields = Object.assign({}, this.state.formFields)\r\n        formFields[name] = (value === true ? 1 : value);\r\n        this.setState({\r\n            formFields\r\n        })\r\n\r\n    }\r\n\r\n    // upload imag to formfield\r\n    handleImageUpload = (file) => {\r\n        let { formFields } = this.state;\r\n        formFields['emp_pic'] = file;\r\n        this.setState({\r\n            formFields\r\n        })\r\n    }\r\n\r\n    // remove image to formfield\r\n    removepostImage = (e, name) => {\r\n        let { staffImage } = this.state.formFields;\r\n        let index = staffImage.indexOf(name);\r\n        if (index === 0) {\r\n            staffImage.shift();\r\n        } else {\r\n            staffImage.pop();\r\n        }\r\n        this.setState({\r\n            staffImage\r\n        })\r\n    }\r\n\r\n    // submit to create/update staff\r\n    handleSubmit = () => {\r\n        if (this.validator.allValid()) {\r\n            let { formFields } = this.state;\r\n            const formData = new FormData();\r\n            formData.append('emp_name', formFields.emp_name)\r\n            formData.append('emp_phone1', formFields.emp_phone1)\r\n            formData.append('emp_joindate', dateFormat(formFields.emp_joindate))\r\n            // if (formFields.defaultSiteCodeid === \"\") {\r\n            formData.append('defaultSiteCodeid', formFields.defaultSiteCodeid)\r\n            // }\r\n            formData.append('skills_list', formFields.skills_list)\r\n            formData.append('emp_address', formFields.emp_address)\r\n            formData.append('Emp_sexesid', formFields.Emp_sexesid)\r\n            // formData.append('shift', formFields.shift)\r\n            formData.append('emp_dob', dateFormat(formFields.emp_dob))\r\n            formData.append('EMP_TYPEid', formFields.EMP_TYPEid)\r\n            formData.append('is_login', formFields.is_login)\r\n            formData.append('pw_password', formFields.pw_password)\r\n            formData.append('LEVEL_ItmIDid', formFields.LEVEL_ItmIDid)\r\n            formData.append('emp_pic', formFields.emp_pic)\r\n            formData.append('emp_email', formFields.emp_email)\r\n            if (this.props.match.params.id) {\r\n                this.props.updateStaff(`${this.props.match.params.id}/`, formData).then((res) => {\r\n                    console.log(res)\r\n                    if (res.status === 200) {\r\n                        this.props.history.push(`/admin/staff/${res.data.id}/staffDetails`);\r\n                    }\r\n                })\r\n            } else {\r\n                this.props.createStaff(formData).then((res) => {\r\n                    console.log(res)\r\n                    if (res.status === 201) {\r\n                        this.props.history.push(`/admin/staff`);\r\n                    }\r\n                })\r\n            }\r\n\r\n        } else {\r\n            this.validator.showMessages();\r\n        }\r\n    };\r\n\r\n    handleMultiSelect = (data) => {\r\n        let { formFields } = this.state;\r\n        let list = []\r\n        for (let key of data) {\r\n            list.push(key.value);\r\n        }\r\n        formFields['skills_list'] = list;\r\n        this.setState({ formFields });\r\n        console.log(formFields, \"oyokkjk\")\r\n    }\r\n\r\n    handleChangeBox = (event) => {\r\n        let formFields = Object.assign({}, this.state.formFields);\r\n        console.log(formFields, \"oyokkjk\", event.target.name, event.target)\r\n        formFields[event.target.name] = event.target.checked;\r\n\r\n        this.setState({\r\n            formFields,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        let { formFields, jobOption, shiftOptions, locationOption, sexOption, skillsOptions, selectedSkills, levelList } = this.state;\r\n\r\n        let { emp_name, emp_email, emp_phone1, emp_joindate, defaultSiteCodeid, skills_list, emp_address, Emp_sexesid, shift, emp_dob, EMP_TYPEid, emp_pic, is_login, pw_password, LEVEL_ItmIDid } = formFields;\r\n        return (\r\n            <div className=\"px-5 container create-staff\">\r\n                {/* <p className=\"list-heading pb-4\"> {id ? \"Edit\" : \"Add\"} Staff</p> */}\r\n                <div className=\"head-label-nav\">\r\n                    <p className=\"category\">Staffs </p>\r\n                    <i className=\"icon-right mx-md-3\"></i>\r\n                    <p className=\"sub-category\">Add {this.props.match.params.id ? \"Edit\" : \"New\"} Staff</p>\r\n                </div>\r\n                <div className=\"staff-detail\">\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Staff Name\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalInput\r\n                                        placeholder=\"Enter here\"\r\n                                        value={emp_name}\r\n                                        name=\"emp_name\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('staff name', emp_name, 'required')}\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Job Title\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalSelect\r\n                                        options={jobOption}\r\n                                        value={EMP_TYPEid}\r\n                                        name=\"EMP_TYPEid\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('job tilte', EMP_TYPEid, 'required')}\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Skills\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    {/* <NormalSelect\r\n                                        options={skillsOptions}\r\n                                        value={skills_list}\r\n                                        name=\"skills_list\"\r\n                                        onChange={this.handleChange}\r\n                                    /> */}\r\n                                    {!this.props.match.params.id ? (skillsOptions.length > 0 ? <NormalMultiSelect name=\"skills_list\" className={`staff-skills-select ${skills_list !== \"\" ? \"overflow-y-set\" : \"\"}`} options={skillsOptions} handleMultiSelect={this.handleMultiSelect}></NormalMultiSelect> : \"\") : (\r\n                                        skillsOptions.length > 0 && selectedSkills.length > 0 ? <NormalMultiSelect name=\"skills_list\" value={selectedSkills.length > 0 ? selectedSkills : []} className={`staff-skills-select ${skills_list !== \"\" ? \"overflow-y-set\" : \"\"}`} options={skillsOptions} handleMultiSelect={this.handleMultiSelect}></NormalMultiSelect> : \"\"\r\n                                    )\r\n                                    }\r\n                                </div>\r\n                                {this.validator.message('skills', skills_list, 'required')}\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Contact Number\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalInput\r\n                                        placeholder=\"Enter here\"\r\n                                        value={emp_phone1}\r\n                                        name=\"emp_phone1\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('phone number', emp_phone1, 'required')}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Address\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalInput\r\n                                        placeholder=\"Enter here\"\r\n                                        value={emp_address}\r\n                                        name=\"emp_address\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('address', emp_address, 'required')}\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Gender\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalSelect\r\n                                        // placeholder=\"Enter here\"\r\n                                        options={sexOption}\r\n                                        value={Emp_sexesid}\r\n                                        name=\"Emp_sexesid\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('Emp_sexesid', Emp_sexesid, 'required')}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    DOB\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    {/* <NormalDate\r\n                                        value={emp_dob}\r\n                                        name=\"emp_dob\"\r\n                                        type=\"date\"\r\n                                        onChange={this.handleChange}\r\n                                    /> */}\r\n                                    <NormalDateTime\r\n                                        onChange={this.handleDatePick}\r\n                                        inputcol=\"p-0 inTime\"\r\n                                        // value={outTime}\r\n                                        value={emp_dob}\r\n                                        // label=\"inTime\"\r\n                                        name=\"emp_dob\"\r\n                                        className=\"dob-pick\"\r\n                                        showYearDropdown={true}\r\n                                        dateFormat=\"dd/MM/yyyy\" />\r\n                                </div>\r\n                                {this.validator.message('date of birth', emp_dob, 'required')}\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Starting Date\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    {/* <NormalDate\r\n                                        value={emp_joindate}\r\n                                        name=\"emp_joindate\"\r\n                                        type=\"date\"\r\n                                        onChange={this.handleChange}\r\n\r\n                                    /> */}\r\n                                    <NormalDateTime\r\n                                        onChange={this.handleDatePick}\r\n                                        inputcol=\"p-0 inTime\"\r\n                                        // value={outTime}\r\n                                        value={emp_joindate}\r\n                                        // label=\"inTime\"\r\n                                        name=\"emp_joindate\"\r\n                                        className=\"dob-pick\"\r\n                                        showYearDropdown={true}\r\n                                        dateFormat=\"dd/MM/yyyy\" />\r\n\r\n                                </div>\r\n                                {this.validator.message('Joined date', emp_joindate, 'required')}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <div className=\"row\">\r\n                            {/* <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Shift\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalSelect\r\n                                        options={shiftOptions}\r\n                                        value={shift}\r\n                                        name=\"shift\"\r\n                                        disabled={!this.props.match.params.id ? true : false}\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                 {this.validator.message('shift', shift, 'required')} \r\n                            </div> */}\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Email\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalInput\r\n                                        placeholder=\"Enter here\"\r\n                                        value={emp_email}\r\n                                        name=\"emp_email\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('emp_email', emp_email, 'required')}\r\n                            </div>\r\n\r\n                            <div className=\"col-6\">\r\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                    Branch / Location\r\n                            </label>\r\n                                <div className=\"input-group\">\r\n                                    <NormalSelect\r\n                                        options={locationOption}\r\n                                        value={defaultSiteCodeid}\r\n                                        name=\"defaultSiteCodeid\"\r\n                                        onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                                {this.validator.message('defaultSiteCodeid', defaultSiteCodeid, 'required')}\r\n                            </div>\r\n\r\n                            <div className=\"col-6 my-5\">\r\n                                <FormGroup check>\r\n                                    <Label check>\r\n                                        <Input\r\n                                            type=\"checkbox\"\r\n                                            onChange={this.handleChangeBox}\r\n                                            checked={is_login}\r\n                                            name=\"is_login\" />{' '} Is Login\r\n                                    </Label>\r\n                                </FormGroup>\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n\r\n                            </div>\r\n                            {\r\n                                is_login ? <div className=\"col-6\">\r\n                                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                        Password\r\n                            </label>\r\n                                    <div className=\"input-group\">\r\n                                        <NormalInput\r\n                                            placeholder=\"Enter here\"\r\n                                            value={pw_password}\r\n                                            name=\"pw_password\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n                                    </div>\r\n                                </div> : \"\"\r\n                            }\r\n\r\n                            {\r\n                                is_login ? <div className=\"col-6\">\r\n                                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                                        Category Level\r\n                            </label>\r\n                                    <div className=\"input-group\">\r\n                                        <NormalSelect\r\n                                            options={levelList}\r\n                                            value={LEVEL_ItmIDid}\r\n                                            name=\"LEVEL_ItmIDid\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n                                    </div>\r\n                                </div> : \"\"\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                            Upload Staff Photo\r\n                    </label>\r\n                        <div className=\"col-md-12 p-0\">\r\n                        <DragFileUpload\r\n                                className={`file-uploader size-sm ${emp_pic ? \"\" : 'no-img'}`}\r\n                                label=\"Upload Thumbnail\"\r\n                                handleFileUpload={this.handleImageUpload}\r\n                            >\r\n                                {emp_pic ?\r\n                                    <>\r\n                                        {console.log(typeof emp_pic, \"kjusytdifshwosdhfs\")}\r\n                                        {typeof emp_pic == 'string' ? <img src={emp_pic} alt=\"\" /> : <img src={displayImg(emp_pic)} alt=\"\" />}\r\n\r\n                                    </> :\r\n                                    <div className=\"uploader-content text-center\">\r\n                                        <span>Upload Image</span>\r\n                                    </div>\r\n                                }\r\n                            </DragFileUpload>\r\n                            {/* <img src={emp_pic} alt=\"\" /> */}\r\n                            {this.validator.message('emp_pic', emp_pic, 'required')}\r\n                            {/*                             \r\n                            <div className=\"d-flex flex-wrap image-upload\">\r\n                                <div className=\"p-0\" >\r\n                                    <label for=\"imageUpload\" class=\"btn cursor-pointer\">Upload Image</label>\r\n                                    <input type=\"file\" onChange={this.uploadImageFiles} id=\"imageUpload\" accept=\"image/*\" className=\"d-none\"></input>\r\n                                </div>\r\n                                {(emp_pic || []).map(url => (\r\n                                    <>\r\n                                        <div className=\"position-relative image-folder\">\r\n                                            <img src={url} alt=\"...\" className=\"image-upload position-relative\" />\r\n                                            <div className=\"close-icon\">\r\n                                                <span className=\"icon-close fs-10\" onClick={(e) => this.removepostImage(e, url)}></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </>\r\n                                ))}\r\n                            </div> */}\r\n                            {/* <DragFileUpload /> */}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"border-bottom-line\"></div>\r\n                    <div className=\"pt-5 d-flex justify-content-center\">\r\n                        <div className=\"col-2\">\r\n                            <Link to=\"/admin/staff\">\r\n                                <NormalButton label=\"Cancel\" danger={true} className=\"mr-2 col-12\" />\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"col-2\">\r\n                            <NormalButton onClick={() => this.handleSubmit()} label=\"Save\" success={true} className=\"mr-2 col-12\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    branchList: state.common.branchList,\r\n    jobtitleList: state.common.jobtitleList,\r\n    shiftList: state.common.shiftList,\r\n    skillsList: state.common.skillsList,\r\n    staffDetail: state.staff.staffDetail\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        createStaff,\r\n        getBranch,\r\n        getJobtitle,\r\n        getShift,\r\n        getSkills,\r\n        getStaff,\r\n        updateStaff,\r\n        getCommonApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const AddStaff = connect(mapStateToProps, mapDispatchToProps)(AddStaffClass)"]},"metadata":{},"sourceType":"module"}