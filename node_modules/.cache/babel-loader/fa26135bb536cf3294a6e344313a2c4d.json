{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\CustomerPlus\\\\LoyaltyPointsManagement\\\\CustomerPointsTable\\\\index.js\";\nimport React from \"react\";\nimport { InputSearch, NormalButton, NormalDate, TableWrapper } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport { getCustomerPoints } from \"redux/actions/customerPlus\";\nimport { bindActionCreators } from \"redux\";\nimport { dateFormat } from \"service/helperFunctions\";\nexport class CustomerPointsTableClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [{\n        label: \"Date\",\n        sortKey: \"remarks\",\n        enabled: true,\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Transcation No\",\n        sortKey: \"transacno\"\n      }, {\n        label: \"Type\",\n        sortKey: \"type\",\n        enabled: true\n      }, {\n        label: \"Remarks\",\n        sortKey: \"remarks\",\n        enabled: true\n      }, {\n        label: \"Earn pts (+)\",\n        sortKey: \"earned\",\n        enabled: true,\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Used pts (-)\",\n        sortKey: \"used\",\n        enabled: true,\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Balance Pts\",\n        sortKey: \"now_point\",\n        enabled: true,\n        divClass: \"justify-content-end text-right\"\n      }],\n      type: \"all\",\n      dataList: [],\n      originalDataList: [],\n      meta: {},\n      searchStartDate: \"\",\n      searchEndDate: \"\",\n      searchString: \"\",\n      isMounted: true,\n      isLoading: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.handlePagination = async data => {\n      let {\n        page = 1\n      } = data;\n      let {\n        searchStartDate,\n        searchEndDate,\n        type,\n        searchString\n      } = this.state;\n      this.setState({\n        isLoading: true\n      });\n      let searchParams = `&search=${searchString}`;\n      if (type == \"redeem\" || type == \"reward\") searchParams += `&type=${type}`;\n\n      if (searchStartDate != \"\") {\n        let startdate = dateFormat(searchStartDate);\n        let endDate = dateFormat(searchEndDate == \"\" ? searchStartDate : searchEndDate);\n        searchParams += `&startDate=${startdate}&endDate=${endDate}`;\n      }\n\n      await this.props.getCustomerPoints(this.props.id, `?limit=10&page=${page}` + searchParams);\n      let {\n        PointList,\n        pagination\n      } = this.props.dataList;\n      PointList.forEach(e => {\n        if (e.lp_type == \"Reward\") {\n          e.earned = e.total_point;\n          e.used = \"\";\n        } else {\n          e.earned = \"\";\n          e.used = e.total_point;\n        }\n      });\n      this.updateState({\n        meta: pagination,\n        dataList: PointList,\n        originalDataList: PointList,\n        isLoading: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.state.searchEndDate = new Date();\n    let date = new Date();\n    date.setMonth(date.getMonth() - 3);\n    this.state.searchStartDate = date;\n    this.handlePagination({});\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  render() {\n    let {\n      headerDetails,\n      dataList,\n      meta,\n      isLoading,\n      originalDataList,\n      searchStartDate,\n      searchEndDate,\n      type\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customer-list container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"head-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, t(\"Customer Points\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Add Manual Reward\",\n      mainbg: true,\n      onClick: () => this.props.history.push(`/admin/customerplus/${this.props.id}/lpmanagement/reward`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Add Manual Redeem\",\n      mainbg: true,\n      onClick: () => this.props.history.push(`/admin/customerplus/${this.props.id}/lpmanagement/redeem`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fuild border rounded p-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, t(\"Type\"), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      className: \"mr-2\",\n      checked: type == \"all\",\n      onChange: e => this.updateState({\n        type: \"all\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }, \"All\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      className: \"mr-2\",\n      checked: type == \"reward\",\n      onChange: e => this.updateState({\n        type: \"reward\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, \"Reward\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      className: \"mr-2\",\n      checked: type == \"redeem\",\n      onChange: e => this.updateState({\n        type: \"redeem\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, \"Redeem\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, t(\"Start Date\"), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalDate, {\n      value: searchStartDate,\n      onChange: e => this.updateState({\n        searchStartDate: e.target.value,\n        searchEndDate: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, t(\"End Date\"), \":\"), /*#__PURE__*/React.createElement(NormalDate, {\n      value: searchEndDate,\n      disabled: searchStartDate == \"\",\n      minDate: searchStartDate,\n      onChange: e => this.updateState({\n        searchEndDate: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 pt-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(InputSearch, {\n      placeholder: \"Search Policy\",\n      onChange: e => this.updateState({\n        searchString: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row-reverse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Search\",\n      mainbg: true,\n      onClick: e => {\n        this.handlePagination({});\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Clear\",\n      resetbg: true,\n      onClick: async e => {\n        await this.updateState({\n          searchStartDate: \"\",\n          searchEndDate: \"\",\n          type: \"all\",\n          searchString: \"\"\n        });\n        this.handlePagination({});\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    })))), isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, \"Loading...\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: meta,\n      showFilterColumn: true,\n      parentHeaderChange: value => this.updateState(() => headerDetails = value),\n      sortData: originalDataList,\n      onSort: dataList => this.updateState({\n        dataList\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 19\n      }\n    }, dataList && dataList.map((item, index) => {\n      var _headerDetails$2$enab, _headerDetails$0$enab, _headerDetails$2$enab2, _headerDetails$2$enab3, _headerDetails$1$enab, _headerDetails$3$enab, _headerDetails$3$enab2;\n\n      let {\n        transacno,\n        remarks,\n        earned,\n        used,\n        now_point,\n        lp_type,\n        date\n      } = item;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$2$enab = headerDetails[2].enabled) !== null && _headerDetails$2$enab !== void 0 ? _headerDetails$2$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 31\n        }\n      }, new Date(date).toLocaleDateString() + \" \" + new Date(date).toLocaleTimeString())), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$0$enab = headerDetails[0].enabled) !== null && _headerDetails$0$enab !== void 0 ? _headerDetails$0$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 31\n        }\n      }, transacno)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$2$enab2 = headerDetails[2].enabled) !== null && _headerDetails$2$enab2 !== void 0 ? _headerDetails$2$enab2 : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 31\n        }\n      }, lp_type)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$2$enab3 = headerDetails[2].enabled) !== null && _headerDetails$2$enab3 !== void 0 ? _headerDetails$2$enab3 : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 31\n        }\n      }, remarks)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$1$enab = headerDetails[1].enabled) !== null && _headerDetails$1$enab !== void 0 ? _headerDetails$1$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 31\n        }\n      }, earned)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$3$enab = headerDetails[3].enabled) !== null && _headerDetails$3$enab !== void 0 ? _headerDetails$3$enab : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 31\n        }\n      }, used)), /*#__PURE__*/React.createElement(\"td\", {\n        className: ((_headerDetails$3$enab2 = headerDetails[3].enabled) !== null && _headerDetails$3$enab2 !== void 0 ? _headerDetails$3$enab2 : true) ? \"\" : \"d-none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 31\n        }\n      }, now_point)));\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  dataList: state.customerPlus.customerPoints\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCustomerPoints\n  }, dispatch);\n};\n\nexport const CustomerPointsTable = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(CustomerPointsTableClass));","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/CustomerPlus/LoyaltyPointsManagement/CustomerPointsTable/index.js"],"names":["React","InputSearch","NormalButton","NormalDate","TableWrapper","connect","withTranslation","getCustomerPoints","bindActionCreators","dateFormat","CustomerPointsTableClass","Component","state","headerDetails","label","sortKey","enabled","divClass","type","dataList","originalDataList","meta","searchStartDate","searchEndDate","searchString","isMounted","isLoading","updateState","data","setState","handlePagination","page","searchParams","startdate","endDate","props","id","PointList","pagination","forEach","e","lp_type","earned","total_point","used","componentDidMount","Date","date","setMonth","getMonth","componentWillUnmount","render","t","history","push","target","value","map","item","index","transacno","remarks","now_point","toLocaleDateString","toLocaleTimeString","mapStateToProps","customerPlus","customerPoints","mapDispatchToProps","dispatch","CustomerPointsTable"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  InputSearch,\r\n  NormalButton,\r\n  NormalDate,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { getCustomerPoints } from \"redux/actions/customerPlus\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\n\r\nexport class CustomerPointsTableClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      {\r\n        label: \"Date\",\r\n        sortKey: \"remarks\",\r\n        enabled: true,\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Transcation No\", sortKey: \"transacno\" },\r\n      { label: \"Type\", sortKey: \"type\", enabled: true },\r\n      { label: \"Remarks\", sortKey: \"remarks\", enabled: true },\r\n      {\r\n        label: \"Earn pts (+)\",\r\n        sortKey: \"earned\",\r\n        enabled: true,\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Used pts (-)\",\r\n        sortKey: \"used\",\r\n        enabled: true,\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Balance Pts\",\r\n        sortKey: \"now_point\",\r\n        enabled: true,\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n    ],\r\n    type: \"all\",\r\n    dataList: [],\r\n    originalDataList: [],\r\n    meta: {},\r\n    searchStartDate: \"\",\r\n    searchEndDate: \"\",\r\n    searchString: \"\",\r\n    isMounted: true,\r\n    isLoading: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.state.searchEndDate = new Date();\r\n    let date = new Date();\r\n    date.setMonth(date.getMonth() - 3);\r\n    this.state.searchStartDate = date;\r\n    this.handlePagination({});\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  handlePagination = async data => {\r\n    let { page = 1 } = data;\r\n    let { searchStartDate, searchEndDate, type, searchString } = this.state;\r\n    this.setState({ isLoading: true });\r\n    let searchParams = `&search=${searchString}`;\r\n    if (type == \"redeem\" || type == \"reward\") searchParams += `&type=${type}`;\r\n    if (searchStartDate != \"\") {\r\n      let startdate = dateFormat(searchStartDate);\r\n      let endDate = dateFormat(\r\n        searchEndDate == \"\" ? searchStartDate : searchEndDate\r\n      );\r\n      searchParams += `&startDate=${startdate}&endDate=${endDate}`;\r\n    }\r\n    await this.props.getCustomerPoints(\r\n      this.props.id,\r\n      `?limit=10&page=${page}` + searchParams\r\n    );\r\n    let { PointList, pagination } = this.props.dataList;\r\n    PointList.forEach(e => {\r\n      if (e.lp_type == \"Reward\") {\r\n        e.earned = e.total_point;\r\n        e.used = \"\";\r\n      } else {\r\n        e.earned = \"\";\r\n        e.used = e.total_point;\r\n      }\r\n    });\r\n    this.updateState({\r\n      meta: pagination,\r\n      dataList: PointList,\r\n      originalDataList: PointList,\r\n      isLoading: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      dataList,\r\n      meta,\r\n      isLoading,\r\n      originalDataList,\r\n      searchStartDate,\r\n      searchEndDate,\r\n      type,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"customer-list container-fluid\">\r\n          <div className=\"row mb-2\">\r\n            <div className=\"col-md-4 mb-2\">\r\n              <h3 className=\"head-label\">{t(\"Customer Points\")}</h3>\r\n            </div>\r\n            <div className=\"col-md-4 mb-2\">\r\n              <NormalButton\r\n                label=\"Add Manual Reward\"\r\n                mainbg={true}\r\n                onClick={() =>\r\n                  this.props.history.push(\r\n                    `/admin/customerplus/${this.props.id}/lpmanagement/reward`\r\n                  )\r\n                }\r\n              />\r\n            </div>\r\n            <div className=\"col-md-4\">\r\n              <NormalButton\r\n                label=\"Add Manual Redeem\"\r\n                mainbg={true}\r\n                onClick={() =>\r\n                  this.props.history.push(\r\n                    `/admin/customerplus/${this.props.id}/lpmanagement/redeem`\r\n                  )\r\n                }\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"container-fuild border rounded p-2\">\r\n            <div className=\"row mb-2\">\r\n              <div className=\"col-md-2 mb-3\">{t(\"Type\")}:</div>\r\n              <div className=\"col col-md-3\">\r\n                <input\r\n                  type=\"radio\"\r\n                  className=\"mr-2\"\r\n                  checked={type == \"all\"}\r\n                  onChange={e => this.updateState({ type: \"all\" })}\r\n                />\r\n                <label>All</label>\r\n              </div>\r\n              <div className=\"col col-md-3\">\r\n                <input\r\n                  type=\"radio\"\r\n                  className=\"mr-2\"\r\n                  checked={type == \"reward\"}\r\n                  onChange={e => this.updateState({ type: \"reward\" })}\r\n                />\r\n                <label>Reward</label>\r\n              </div>\r\n              <div className=\"col col-md-3\">\r\n                <input\r\n                  type=\"radio\"\r\n                  className=\"mr-2\"\r\n                  checked={type == \"redeem\"}\r\n                  onChange={e => this.updateState({ type: \"redeem\" })}\r\n                />\r\n                <label>Redeem</label>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mb-3\">\r\n              <div className=\"col-md-4 mb-2\">\r\n                <label>{t(\"Start Date\")}:</label>\r\n                <div className=\"input-group\">\r\n                  <NormalDate\r\n                    value={searchStartDate}\r\n                    onChange={e =>\r\n                      this.updateState({\r\n                        searchStartDate: e.target.value,\r\n                        searchEndDate: e.target.value,\r\n                      })\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4 mb-2\">\r\n                <label>{t(\"End Date\")}:</label>\r\n                <NormalDate\r\n                  value={searchEndDate}\r\n                  disabled={searchStartDate == \"\"}\r\n                  minDate={searchStartDate}\r\n                  onChange={e =>\r\n                    this.updateState({ searchEndDate: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"col-md-4 pt-md-2\">\r\n                <label></label>\r\n                <InputSearch\r\n                  placeholder=\"Search Policy\"\r\n                  onChange={e =>\r\n                    this.updateState({ searchString: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"d-flex flex-row-reverse\">\r\n              <div className=\"col-md-3 mb-2\">\r\n                <NormalButton\r\n                  label=\"Search\"\r\n                  mainbg={true}\r\n                  onClick={e => {\r\n                    this.handlePagination({});\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2 mb-2\">\r\n                <NormalButton\r\n                  label=\"Clear\"\r\n                  resetbg={true}\r\n                  onClick={async e => {\r\n                    await this.updateState({\r\n                      searchStartDate: \"\",\r\n                      searchEndDate: \"\",\r\n                      type: \"all\",\r\n                      searchString: \"\",\r\n                    });\r\n                    this.handlePagination({});\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {isLoading ? (\r\n            <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n              <div class=\"spinner-border\" role=\"status\">\r\n                <span class=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"tab-table-content\">\r\n              <div className=\"py-4\">\r\n                <div className=\"table-container\">\r\n                  <TableWrapper\r\n                    headerDetails={headerDetails}\r\n                    queryHandler={this.handlePagination}\r\n                    pageMeta={meta}\r\n                    showFilterColumn={true}\r\n                    parentHeaderChange={value =>\r\n                      this.updateState(() => (headerDetails = value))\r\n                    }\r\n                    sortData={originalDataList}\r\n                    onSort={dataList => this.updateState({ dataList })}\r\n                  >\r\n                    {dataList &&\r\n                      dataList.map((item, index) => {\r\n                        let {\r\n                          transacno,\r\n                          remarks,\r\n                          earned,\r\n                          used,\r\n                          now_point,\r\n                          lp_type,\r\n                          date,\r\n                        } = item;\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td\r\n                              className={\r\n                                headerDetails[2].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"text-right\">\r\n                                {new Date(date).toLocaleDateString() +\r\n                                  \" \" +\r\n                                  new Date(date).toLocaleTimeString()}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[0].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"text-left\">{transacno}</div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[2].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"text-left\">{lp_type}</div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[2].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"text-left\">{remarks}</div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[1].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"text-right\">{earned}</div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[3].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"text-right\">{used}</div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[3].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"text-right\">{now_point}</div>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                  </TableWrapper>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  dataList: state.customerPlus.customerPoints,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators({ getCustomerPoints }, dispatch);\r\n};\r\n\r\nexport const CustomerPointsTable = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(CustomerPointsTableClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}