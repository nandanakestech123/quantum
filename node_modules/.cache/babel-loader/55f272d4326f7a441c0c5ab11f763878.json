{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Link}from\"react-router-dom\";import{getJobtitle,getCommonApi}from\"redux/actions/common\";import{getStaffPlus,updateEmpSkillList,getEmpSkillList}from\"redux/actions/staffPlus\";import{NormalSelect,NormalButton,NormalMultiSelect}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";var AddStaffSkillClass=/*#__PURE__*/function(_React$Component){_inherits(AddStaffSkillClass,_React$Component);var _super=_createSuper(AddStaffSkillClass);function AddStaffSkillClass(){var _this;_classCallCheck(this,AddStaffSkillClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={staffOptions:[],selectedStaff:\"\",jobOptions:[],selectedJobOption:\"\",skillList:[],skillCategories:[],selectedSkillCategory:\"\",skills:[],selectedSkills:[],isLoading:true,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var skillCatRes,jobtitleList,_this$state,jobOptions,skillCategories,_iterator,_step,key,_iterator2,_step2,_key2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.getJobtitle();case 2:_context.next=4;return _this.props.getCommonApi(\"SkillsItemTypeList\");case 4:skillCatRes=_context.sent;jobtitleList=_this.props.jobtitleList;_this$state=_this.state,jobOptions=_this$state.jobOptions,skillCategories=_this$state.skillCategories;_iterator=_createForOfIteratorHelper(skillCatRes.skillsTypes);try{for(_iterator.s();!(_step=_iterator.n()).done;){key=_step.value;skillCategories.push({value:key.itm_id,label:key.itm_name});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_iterator2=_createForOfIteratorHelper(jobtitleList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_key2=_step2.value;jobOptions.push({value:_key2.id,label:_key2.level_desc});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.updateState({jobOptions:jobOptions,skillCategories:skillCategories});case 12:case\"end\":return _context.stop();}}},_callee);}));_this.getStaff=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$state2,selectedJobOption,staffOptions,staffDetails,_iterator3,_step3,key;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state2=_this.state,selectedJobOption=_this$state2.selectedJobOption,staffOptions=_this$state2.staffOptions;_context2.next=3;return _this.props.getStaffPlus(\"?limit=100&EMP_TYPEid=\".concat(selectedJobOption));case 3:staffDetails=_this.props.staffDetails;_iterator3=_createForOfIteratorHelper(staffDetails.dataList);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){key=_step3.value;staffOptions.push({value:key.id,label:key.display_name});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.updateState({staffOptions:staffOptions});case 7:case\"end\":return _context2.stop();}}},_callee2);}));_this.getStaffDetails=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var empSkillList,skills;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.props.getEmpSkillList(_this.state.selectedStaff);case 2:empSkillList=_this.props.empSkillList;skills=empSkillList.skills;_this.updateState({skills:skills,isLoading:false});case 5:case\"end\":return _context3.stop();}}},_callee3);}));_this.getSkills=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var skillSetRes,skillList,_iterator4,_step4,e;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.props.getCommonApi(\"SkillsView?item_type=\".concat(_this.state.selectedSkillCategory));case 2:skillSetRes=_context4.sent;skillList=[];_iterator4=_createForOfIteratorHelper(skillSetRes.data);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){e=_step4.value;skillList.push({label:e.item_desc,value:e.item_code,item_code:e.item_code,item_name:e.item_name});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this.updateState({skillList:skillList});case 7:case\"end\":return _context4.stop();}}},_callee4);}));_this.handleJobChange=function(e){if(e.target.value==_this.state.selectedJobOption)return;_this.state.selectedJobOption=e.target.value;_this.updateState({isLoading:true,selectedStaff:\"\",staffOptions:[]});if(e.target.value!=\"\")_this.getStaff();};_this.handleStaffChange=function(e){if(e.target.value==_this.state.selectedStaff)return;_this.state.selectedStaff=e.target.value;_this.updateState({skills:[],isLoading:true});if(e.target.value!=\"\")_this.getStaffDetails();};_this.handleSkillCategoryChange=function(e){if(e.target.value==_this.state.selectedSkillCategory)return;_this.state.selectedSkillCategory=e.target.value;_this.updateState({});if(e.target.value!=\"\")_this.getSkills();};_this.handleSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this.updateState({isLoading:true});data={};data.skillsCodeList=_this.state.skills.map(function(e){return e.item_code;});_context5.next=5;return _this.props.updateEmpSkillList(_this.state.selectedStaff,JSON.stringify(data));case 5:_this.updateState({isLoading:false});case 6:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleDeleteSkill=function(id){_this.state.skills=_this.state.skills.filter(function(e){return e.item_code!=id;});_this.updateState({});};_this.handleAddSkills=function(){var _iterator5=_createForOfIteratorHelper(_this.state.selectedSkills),_step5;try{var _loop=function _loop(){var e=_step5.value;if(_this.state.skills.filter(function(element){return element.item_code==e.item_code;}).length==0)_this.state.skills.push(e);};for(_iterator5.s();!(_step5=_iterator5.n()).done;){_loop();}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_this.state.selectedSkills=[];_this.updateState({});};_this.handleMultiSelect=function(e){_this.state.selectedSkills=e;_this.updateState({});};return _this;}_createClass(AddStaffSkillClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,isLoading=_this$state3.isLoading,jobOptions=_this$state3.jobOptions,selectedJobOption=_this$state3.selectedJobOption,staffOptions=_this$state3.staffOptions,selectedStaff=_this$state3.selectedStaff,skillCategories=_this$state3.skillCategories,selectedSkillCategory=_this$state3.selectedSkillCategory,skills=_this$state3.skills,skillList=_this$state3.skillList;return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fuild\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},\"StaffPlus\"),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},\"Staff Skill\"),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},\"Add/Edit Skill\")),/*#__PURE__*/React.createElement(\"div\",{className:\"container-lg mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Add/Edit Skill\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group pb-2 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Select Skill Category\"),/*#__PURE__*/React.createElement(NormalSelect,{options:skillCategories,value:selectedSkillCategory,onChange:this.handleSkillCategoryChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group pb-2 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Select Employee Type\"),/*#__PURE__*/React.createElement(NormalSelect,{options:jobOptions,value:selectedJobOption,onChange:this.handleJobChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group pb-2 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Select Staff\"),/*#__PURE__*/React.createElement(NormalSelect,{options:staffOptions,value:selectedStaff,onChange:this.handleStaffChange})))),isLoading?null:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group pb-2 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 \"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Add Skills\"),/*#__PURE__*/React.createElement(NormalMultiSelect,{options:skillList,handleMultiSelect:this.handleMultiSelect})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 mb-4 pt-5\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,label:\"Add Selected Skills\",onClick:this.handleAddSkills})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group pb-2 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 \"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Skills Assigned\"),skills.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},index+1,\". \",item.item_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",class:\"bi bi-trash-fill cursor-pointer\",onClick:function onClick(e){return _this2.handleDeleteSkill(item.item_code);},viewBox:\"0 0 16 16\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"}))));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pt-5 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/skills\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Cancel\",className:\"mr-2 bg-danger text-light col-12\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Save\",success:true,className:\"mr-2 col-12\",onClick:this.handleSubmit})))))));}}]);return AddStaffSkillClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{jobtitleList:state.common.jobtitleList,staffDetails:state.staffPlus.staffPlusDetail,empSkillList:state.staffPlus.staffPlustEmpSkillList};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getJobtitle:getJobtitle,getStaffPlus:getStaffPlus,getCommonApi:getCommonApi,updateEmpSkillList:updateEmpSkillList,getEmpSkillList:getEmpSkillList},dispatch);};export var AddStaffSkill=connect(mapStateToProps,mapDispatchToProps)(AddStaffSkillClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/StaffPlus/AddStaffSkill/index.js"],"names":["React","Link","getJobtitle","getCommonApi","getStaffPlus","updateEmpSkillList","getEmpSkillList","NormalSelect","NormalButton","NormalMultiSelect","connect","bindActionCreators","AddStaffSkillClass","state","staffOptions","selectedStaff","jobOptions","selectedJobOption","skillList","skillCategories","selectedSkillCategory","skills","selectedSkills","isLoading","isMounted","updateState","data","setState","getData","props","skillCatRes","jobtitleList","skillsTypes","key","push","value","itm_id","label","itm_name","id","level_desc","getStaff","staffDetails","dataList","display_name","getStaffDetails","empSkillList","getSkills","skillSetRes","e","item_desc","item_code","item_name","handleJobChange","target","handleStaffChange","handleSkillCategoryChange","handleSubmit","skillsCodeList","map","JSON","stringify","handleDeleteSkill","filter","handleAddSkills","element","length","handleMultiSelect","item","index","Component","mapStateToProps","common","staffPlus","staffPlusDetail","staffPlustEmpSkillList","mapDispatchToProps","dispatch","AddStaffSkill"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport {\n  getStaffPlus,\n  updateEmpSkillList,\n  getEmpSkillList,\n} from \"redux/actions/staffPlus\";\nimport {\n  NormalSelect,\n  NormalButton,\n  NormalMultiSelect,\n} from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nclass AddStaffSkillClass extends React.Component {\n  state = {\n    staffOptions: [],\n    selectedStaff: \"\",\n    jobOptions: [],\n    selectedJobOption: \"\",\n    skillList: [],\n    skillCategories: [],\n    selectedSkillCategory: \"\",\n    skills: [],\n    selectedSkills: [],\n    isLoading: true,\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount() {\n    this.getData();\n  }\n  getData = async () => {\n    await this.props.getJobtitle();\n    var skillCatRes = await this.props.getCommonApi(\"SkillsItemTypeList\");\n    let { jobtitleList } = this.props;\n    let { jobOptions, skillCategories } = this.state;\n    for (let key of skillCatRes.skillsTypes) {\n      skillCategories.push({ value: key.itm_id, label: key.itm_name });\n    }\n    for (let key of jobtitleList) {\n      jobOptions.push({ value: key.id, label: key.level_desc });\n    }\n    this.updateState({ jobOptions, skillCategories });\n  };\n  getStaff = async () => {\n    let { selectedJobOption, staffOptions } = this.state;\n    await this.props.getStaffPlus(`?limit=100&EMP_TYPEid=${selectedJobOption}`);\n    let { staffDetails } = this.props;\n    for (let key of staffDetails.dataList) {\n      staffOptions.push({ value: key.id, label: key.display_name });\n    }\n    this.updateState({ staffOptions });\n  };\n  getStaffDetails = async () => {\n    await this.props.getEmpSkillList(this.state.selectedStaff);\n    let { empSkillList } = this.props;\n    let skills = empSkillList.skills;\n    this.updateState({ skills, isLoading: false });\n  };\n  getSkills = async () => {\n    let skillSetRes = await this.props.getCommonApi(\n      `SkillsView?item_type=${this.state.selectedSkillCategory}`\n    );\n    let skillList = [];\n    for (let e of skillSetRes.data) {\n      skillList.push({\n        label: e.item_desc,\n        value: e.item_code,\n        item_code: e.item_code,\n        item_name: e.item_name,\n      });\n    }\n    this.updateState({ skillList });\n  };\n  handleJobChange = (e) => {\n    if (e.target.value == this.state.selectedJobOption) return;\n    this.state.selectedJobOption = e.target.value;\n    this.updateState({\n      isLoading: true,\n      selectedStaff: \"\",\n      staffOptions: [],\n    });\n    if (e.target.value != \"\") this.getStaff();\n  };\n  handleStaffChange = (e) => {\n    if (e.target.value == this.state.selectedStaff) return;\n    this.state.selectedStaff = e.target.value;\n    this.updateState({\n      skills: [],\n      isLoading: true,\n    });\n    if (e.target.value != \"\") this.getStaffDetails();\n  };\n  handleSkillCategoryChange = (e) => {\n    if (e.target.value == this.state.selectedSkillCategory) return;\n    this.state.selectedSkillCategory = e.target.value;\n    this.updateState({});\n    if (e.target.value != \"\") this.getSkills();\n  };\n  handleSubmit = async () => {\n    this.updateState({ isLoading: true });\n    let data = {};\n    data.skillsCodeList = this.state.skills.map((e) => e.item_code);\n    await this.props.updateEmpSkillList(\n      this.state.selectedStaff,\n      JSON.stringify(data)\n    );\n    this.updateState({ isLoading: false });\n  };\n  handleDeleteSkill = (id) => {\n    this.state.skills = this.state.skills.filter((e) => e.item_code != id);\n    this.updateState({});\n  };\n  handleAddSkills = () => {\n    for (let e of this.state.selectedSkills) {\n      if (\n        this.state.skills.filter((element) => element.item_code == e.item_code)\n          .length == 0\n      )\n        this.state.skills.push(e);\n    }\n    this.state.selectedSkills = [];\n    this.updateState({});\n  };\n  handleMultiSelect = (e) => {\n    this.state.selectedSkills = e;\n    this.updateState({});\n  };\n  render() {\n    let {\n      isLoading,\n      jobOptions,\n      selectedJobOption,\n      staffOptions,\n      selectedStaff,\n      skillCategories,\n      selectedSkillCategory,\n      skills,\n      skillList,\n    } = this.state;\n    return (\n      <div className=\"container-fuild\">\n        <div className=\"head-label-nav\">\n          <p className=\"category\">StaffPlus</p>\n          <i className=\"icon-right mx-md-3\"></i>\n          <p className=\"sub-category\">Staff Skill</p>\n          <i className=\"icon-right mx-md-3\"></i>\n          <p className=\"sub-category\">Add/Edit Skill</p>\n        </div>\n        <div className=\"container-lg mt-5\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-md-12 mb-4\">\n              <h3>Add/Edit Skill</h3>\n            </div>\n          </div>\n          <div className=\"form-group pb-2 mb-4\">\n            <div className=\"row\">\n              <div className=\"col-md-12 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  Select Skill Category\n                </label>\n                <NormalSelect\n                  options={skillCategories}\n                  value={selectedSkillCategory}\n                  onChange={this.handleSkillCategoryChange}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"form-group pb-2 mb-4\">\n            <div className=\"row\">\n              <div className=\"col-md-12 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  Select Employee Type\n                </label>\n                <NormalSelect\n                  options={jobOptions}\n                  value={selectedJobOption}\n                  onChange={this.handleJobChange}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"form-group pb-2 mb-4\">\n            <div className=\"row\">\n              <div className=\"col-md-12 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  Select Staff\n                </label>\n                <NormalSelect\n                  options={staffOptions}\n                  value={selectedStaff}\n                  onChange={this.handleStaffChange}\n                />\n              </div>\n            </div>\n          </div>\n\n          {isLoading ? null : (\n            <>\n              <div className=\"form-group pb-2 mb-4\">\n                <div className=\"row\">\n                  <div className=\"col-md-8 \">\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                      Add Skills\n                    </label>\n                    <NormalMultiSelect\n                      options={skillList}\n                      handleMultiSelect={this.handleMultiSelect}\n                    />\n                  </div>\n                  <div className=\"col-md-4 mb-4 pt-5\">\n                    <NormalButton\n                      mainbg={true}\n                      label=\"Add Selected Skills\"\n                      onClick={this.handleAddSkills}\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"form-group pb-2 mb-4\">\n                <div className=\"row\">\n                  <div className=\"col-md-8 \">\n                    <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                      Skills Assigned\n                    </label>\n                    {skills.map((item, index) => (\n                      <div className=\"row w-100\">\n                        <div className=\"col-10\">\n                          <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                            {index + 1}. {item.item_name}\n                          </label>\n                        </div>\n                        <div className=\"col-2\">\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"16\"\n                            height=\"16\"\n                            fill=\"currentColor\"\n                            class=\"bi bi-trash-fill cursor-pointer\"\n                            onClick={(e) =>\n                              this.handleDeleteSkill(item.item_code)\n                            }\n                            viewBox=\"0 0 16 16\"\n                          >\n                            <path d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\" />\n                          </svg>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"form-group mb-4 pb-2\">\n                <div className=\"pt-5 d-flex justify-content-center\">\n                  <div className=\"col-2\">\n                    <Link to=\"/admin/staffplus/skills\">\n                      <NormalButton\n                        label=\"Cancel\"\n                        className=\"mr-2 bg-danger text-light col-12\"\n                      />\n                    </Link>\n                  </div>\n                  <div className=\"col-2\">\n                    <NormalButton\n                      label=\"Save\"\n                      success={true}\n                      className=\"mr-2 col-12\"\n                      onClick={this.handleSubmit}\n                    />\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => ({\n  jobtitleList: state.common.jobtitleList,\n  staffDetails: state.staffPlus.staffPlusDetail,\n  empSkillList: state.staffPlus.staffPlustEmpSkillList,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      getJobtitle,\n      getStaffPlus,\n      getCommonApi,\n      updateEmpSkillList,\n      getEmpSkillList,\n    },\n    dispatch\n  );\n};\n\nexport const AddStaffSkill = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(AddStaffSkillClass);\n"]},"metadata":{},"sourceType":"module"}