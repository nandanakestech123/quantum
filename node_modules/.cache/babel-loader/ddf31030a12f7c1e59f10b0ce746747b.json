{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/file_items_controller.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _provider_base = _interopRequireDefault(require(\"../../file_management/provider_base\"));\n\nvar _file_system_item = _interopRequireDefault(require(\"../../file_management/file_system_item\"));\n\nvar _object_provider = _interopRequireDefault(require(\"../../file_management/object_provider\"));\n\nvar _remote_provider = _interopRequireDefault(require(\"../../file_management/remote_provider\"));\n\nvar _custom_provider = _interopRequireDefault(require(\"../../file_management/custom_provider\"));\n\nvar _errors = _interopRequireDefault(require(\"../../file_management/errors\"));\n\nvar _utils = require(\"../../file_management/utils\");\n\nvar _uiFile_manager = require(\"./ui.file_manager.common\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _common = require(\"../../core/utils/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    return _arrayLikeToArray(arr);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar DEFAULT_ROOT_FILE_SYSTEM_ITEM_NAME = \"Files\";\n\nvar FileItemsController = function () {\n  function FileItemsController(options) {\n    _classCallCheck(this, FileItemsController);\n\n    options = options || {};\n    this._options = (0, _extend.extend)({}, options);\n    this._isInitialized = false;\n    this._dataLoading = false;\n    this._dataLoadingDeferred = null;\n    this._rootDirectoryInfo = this._createRootDirectoryInfo(options.rootText);\n    this._currentDirectoryInfo = this._rootDirectoryInfo;\n    this._defaultIconMap = this._createDefaultIconMap();\n    this._securityController = new FileSecurityController({\n      allowedFileExtensions: this._options.allowedFileExtensions,\n      maxFileSize: this._options.uploadMaxFileSize\n    });\n\n    this._setProvider(options.fileProvider);\n\n    this._initialize();\n  }\n\n  _createClass(FileItemsController, [{\n    key: \"_setProvider\",\n    value: function (fileProvider) {\n      this._fileProvider = this._createFileProvider(fileProvider);\n\n      this._resetState();\n    }\n  }, {\n    key: \"_createFileProvider\",\n    value: function (fileProvider) {\n      if (!fileProvider) {\n        fileProvider = [];\n      }\n\n      if (Array.isArray(fileProvider)) {\n        return new _object_provider.default({\n          data: fileProvider\n        });\n      }\n\n      if (fileProvider instanceof _provider_base.default) {\n        return fileProvider;\n      }\n\n      switch (fileProvider.type) {\n        case \"remote\":\n          return new _remote_provider.default(fileProvider);\n\n        case \"custom\":\n          return new _custom_provider.default(fileProvider);\n      }\n\n      return new _object_provider.default(fileProvider);\n    }\n  }, {\n    key: \"setCurrentPath\",\n    value: function (path) {\n      var pathParts = (0, _utils.getPathParts)(path);\n\n      var rawPath = _utils.pathCombine.apply(void 0, _toConsumableArray(pathParts));\n\n      if (this.getCurrentDirectory().fileItem.relativeName === rawPath) {\n        return;\n      }\n\n      return this._setCurrentDirectoryByPathParts(pathParts);\n    }\n  }, {\n    key: \"setCurrentPathByKeys\",\n    value: function (pathKeys) {\n      if ((0, _common.equalByValue)(this.getCurrentDirectory().fileItem.pathKeys, pathKeys, 0, true)) {\n        return;\n      }\n\n      return this._setCurrentDirectoryByPathParts(pathKeys, true);\n    }\n  }, {\n    key: \"getCurrentPath\",\n    value: function () {\n      var currentPath = \"\";\n      var directory = this.getCurrentDirectory();\n\n      while (directory && !directory.fileItem.isRoot()) {\n        var escapedName = (0, _utils.getEscapedFileName)(directory.fileItem.name);\n        currentPath = (0, _utils.pathCombine)(escapedName, currentPath);\n        directory = directory.parentDirectory;\n      }\n\n      return currentPath;\n    }\n  }, {\n    key: \"getCurrentDirectory\",\n    value: function () {\n      return this._currentDirectoryInfo;\n    }\n  }, {\n    key: \"setCurrentDirectory\",\n    value: function (directoryInfo) {\n      if (!directoryInfo) {\n        return;\n      }\n\n      if (this._currentDirectoryInfo && this._currentDirectoryInfo === directoryInfo) {\n        return;\n      }\n\n      var requireRaiseSelectedDirectory = this._currentDirectoryInfo.fileItem.key !== directoryInfo.fileItem.key;\n      this._currentDirectoryInfo = directoryInfo;\n\n      if (requireRaiseSelectedDirectory && this._isInitialized) {\n        if (!this._dataLoading) {\n          this._raiseDataLoading(\"navigation\");\n        }\n\n        this._raiseSelectedDirectoryChanged(directoryInfo);\n      }\n    }\n  }, {\n    key: \"getCurrentItems\",\n    value: function (onlyFiles) {\n      var _this = this;\n\n      return this._dataLoadingDeferred ? this._dataLoadingDeferred.then(function () {\n        return _this._getCurrentItemsInternal(onlyFiles);\n      }) : this._getCurrentItemsInternal(onlyFiles);\n    }\n  }, {\n    key: \"_getCurrentItemsInternal\",\n    value: function (onlyFiles) {\n      var currentDirectory = this.getCurrentDirectory();\n      return onlyFiles ? this.getFiles(currentDirectory) : this.getDirectoryContents(currentDirectory);\n    }\n  }, {\n    key: \"getDirectories\",\n    value: function (parentDirectoryInfo, skipNavigationOnError) {\n      return this.getDirectoryContents(parentDirectoryInfo, skipNavigationOnError).then(function (itemInfos) {\n        return itemInfos.filter(function (info) {\n          return info.fileItem.isDirectory;\n        });\n      });\n    }\n  }, {\n    key: \"getFiles\",\n    value: function (parentDirectoryInfo) {\n      return this.getDirectoryContents(parentDirectoryInfo).then(function (itemInfos) {\n        return itemInfos.filter(function (info) {\n          return !info.fileItem.isDirectory;\n        });\n      });\n    }\n  }, {\n    key: \"getDirectoryContents\",\n    value: function (parentDirectoryInfo, skipNavigationOnError) {\n      var _this2 = this;\n\n      if (!parentDirectoryInfo) {\n        return new _deferred.Deferred().resolve([this._rootDirectoryInfo]).promise();\n      }\n\n      if (parentDirectoryInfo.itemsLoaded) {\n        return new _deferred.Deferred().resolve(parentDirectoryInfo.items).promise();\n      }\n\n      var dirKey = parentDirectoryInfo.getInternalKey();\n      var loadItemsDeferred = this._loadedItems[dirKey];\n\n      if (loadItemsDeferred) {\n        return loadItemsDeferred;\n      }\n\n      loadItemsDeferred = this._getFileItems(parentDirectoryInfo, skipNavigationOnError).then(function (fileItems) {\n        fileItems = fileItems || [];\n        parentDirectoryInfo.items = fileItems.map(function (fileItem) {\n          return fileItem.isDirectory && _this2._createDirectoryInfo(fileItem, parentDirectoryInfo) || _this2._createFileInfo(fileItem, parentDirectoryInfo);\n        });\n        parentDirectoryInfo.itemsLoaded = true;\n        return parentDirectoryInfo.items;\n      });\n      this._loadedItems[dirKey] = loadItemsDeferred;\n      loadItemsDeferred.always(function () {\n        delete _this2._loadedItems[dirKey];\n      });\n      return loadItemsDeferred;\n    }\n  }, {\n    key: \"_getFileItems\",\n    value: function (parentDirectoryInfo, skipNavigationOnError) {\n      var _this3 = this;\n\n      var loadItemsDeferred = null;\n\n      try {\n        loadItemsDeferred = this._fileProvider.getItems(parentDirectoryInfo.fileItem);\n      } catch (error) {\n        return this._handleItemLoadError(parentDirectoryInfo, error, skipNavigationOnError);\n      }\n\n      return (0, _deferred.when)(loadItemsDeferred).then(function (fileItems) {\n        return _this3._securityController.getAllowedItems(fileItems);\n      }, function (errorInfo) {\n        return _this3._handleItemLoadError(parentDirectoryInfo, errorInfo, skipNavigationOnError);\n      });\n    }\n  }, {\n    key: \"createDirectory\",\n    value: function (parentDirectoryInfo, name) {\n      var _this4 = this;\n\n      var tempDirInfo = this._createDirInfoByName(name, parentDirectoryInfo);\n\n      var actionInfo = this._createEditActionInfo(\"create\", tempDirInfo, parentDirectoryInfo);\n\n      return this._processEditAction(actionInfo, function () {\n        return _this4._fileProvider.createDirectory(parentDirectoryInfo.fileItem, name);\n      }, function () {\n        return _this4._resetDirectoryState(parentDirectoryInfo, true);\n      });\n    }\n  }, {\n    key: \"renameItem\",\n    value: function (fileItemInfo, name) {\n      var _this5 = this;\n\n      var actionInfo = this._createEditActionInfo(\"rename\", fileItemInfo, fileItemInfo.parentDirectory, {\n        itemNewName: name\n      });\n\n      return this._processEditAction(actionInfo, function () {\n        if (!fileItemInfo.fileItem.isDirectory) {\n          _this5._securityController.validateExtension(name);\n        }\n\n        return _this5._fileProvider.renameItem(fileItemInfo.fileItem, name);\n      }, function () {\n        var parentDirectory = _this5._getActualDirectoryInfo(fileItemInfo.parentDirectory);\n\n        _this5._resetDirectoryState(parentDirectory);\n\n        _this5.setCurrentDirectory(parentDirectory);\n      });\n    }\n  }, {\n    key: \"moveItems\",\n    value: function (itemInfos, destinationDirectory) {\n      var _this6 = this;\n\n      var items = itemInfos.map(function (i) {\n        return i.fileItem;\n      });\n\n      var actionInfo = this._createEditActionInfo(\"move\", itemInfos, destinationDirectory);\n\n      return this._processEditAction(actionInfo, function () {\n        return _this6._fileProvider.moveItems(items, destinationDirectory.fileItem);\n      }, function () {\n        destinationDirectory = _this6._getActualDirectoryInfo(destinationDirectory);\n        itemInfos.forEach(function (itemInfo) {\n          return _this6._resetDirectoryState(itemInfo.parentDirectory, true);\n        });\n\n        _this6._resetDirectoryState(destinationDirectory);\n\n        _this6.setCurrentDirectory(destinationDirectory);\n\n        destinationDirectory.expanded = true;\n      });\n    }\n  }, {\n    key: \"copyItems\",\n    value: function (itemInfos, destinationDirectory) {\n      var _this7 = this;\n\n      var items = itemInfos.map(function (i) {\n        return i.fileItem;\n      });\n\n      var actionInfo = this._createEditActionInfo(\"copy\", itemInfos, destinationDirectory);\n\n      return this._processEditAction(actionInfo, function () {\n        return _this7._fileProvider.copyItems(items, destinationDirectory.fileItem);\n      }, function () {\n        destinationDirectory = _this7._getActualDirectoryInfo(destinationDirectory);\n\n        _this7._resetDirectoryState(destinationDirectory);\n\n        _this7.setCurrentDirectory(destinationDirectory);\n\n        destinationDirectory.expanded = true;\n      });\n    }\n  }, {\n    key: \"deleteItems\",\n    value: function (itemInfos) {\n      var _this8 = this;\n\n      var items = itemInfos.map(function (i) {\n        return i.fileItem;\n      });\n      var directory = itemInfos.length > 0 ? itemInfos[0].parentDirectory : null;\n\n      var actionInfo = this._createEditActionInfo(\"delete\", itemInfos, directory);\n\n      return this._processEditAction(actionInfo, function () {\n        return _this8._fileProvider.deleteItems(items);\n      }, function () {\n        itemInfos.forEach(function (itemInfo) {\n          var parentDir = _this8._getActualDirectoryInfo(itemInfo.parentDirectory);\n\n          _this8._resetDirectoryState(parentDir);\n\n          _this8.setCurrentDirectory(parentDir);\n        });\n      });\n    }\n  }, {\n    key: \"processUploadSession\",\n    value: function (sessionInfo, uploadDirectoryInfo) {\n      var _this9 = this;\n\n      var itemInfos = this._getItemInfosForUploaderFiles(sessionInfo.files, uploadDirectoryInfo);\n\n      var actionInfo = this._createEditActionInfo(\"upload\", itemInfos, uploadDirectoryInfo, {\n        sessionInfo: sessionInfo\n      });\n\n      return this._processEditAction(actionInfo, function () {\n        return sessionInfo.deferreds;\n      }, function () {\n        return _this9._resetDirectoryState(uploadDirectoryInfo, true);\n      });\n    }\n  }, {\n    key: \"uploadFileChunk\",\n    value: function (fileData, chunksInfo, destinationDirectory) {\n      this._securityController.validateMaxFileSize(fileData.size);\n\n      this._securityController.validateExtension(fileData.name);\n\n      return (0, _deferred.when)(this._fileProvider.uploadFileChunk(fileData, chunksInfo, destinationDirectory));\n    }\n  }, {\n    key: \"abortFileUpload\",\n    value: function (fileData, chunksInfo, destinationDirectory) {\n      return (0, _deferred.when)(this._fileProvider.abortFileUpload(fileData, chunksInfo, destinationDirectory));\n    }\n  }, {\n    key: \"getFileUploadChunkSize\",\n    value: function () {\n      var chunkSize = this._options.uploadChunkSize;\n\n      if (chunkSize && chunkSize > 0) {\n        return chunkSize;\n      }\n\n      return this._fileProvider.getFileUploadChunkSize();\n    }\n  }, {\n    key: \"downloadItems\",\n    value: function (itemInfos) {\n      var items = itemInfos.map(function (i) {\n        return i.fileItem;\n      });\n\n      this._fileProvider.downloadItems(items);\n    }\n  }, {\n    key: \"getItemContent\",\n    value: function (itemInfos) {\n      var items = itemInfos.map(function (i) {\n        return i.fileItem;\n      });\n      return (0, _deferred.when)(this._fileProvider.getItemsContent(items));\n    }\n  }, {\n    key: \"_handleItemLoadError\",\n    value: function (parentDirectoryInfo, errorInfo, skipNavigationOnError) {\n      parentDirectoryInfo = this._getActualDirectoryInfo(parentDirectoryInfo);\n\n      var actionInfo = this._createEditActionInfo(\"getItems\", parentDirectoryInfo, parentDirectoryInfo);\n\n      this._raiseEditActionStarting(actionInfo);\n\n      this._raiseEditActionResultAcquired(actionInfo);\n\n      this._raiseEditActionError(actionInfo, {\n        errorId: errorInfo.errorId,\n        fileItem: parentDirectoryInfo.fileItem,\n        index: 0\n      });\n\n      this._resetDirectoryState(parentDirectoryInfo);\n\n      parentDirectoryInfo.expanded = false;\n\n      if (!skipNavigationOnError) {\n        this.setCurrentDirectory(parentDirectoryInfo.parentDirectory);\n      }\n\n      return new _deferred.Deferred().reject().promise();\n    }\n  }, {\n    key: \"_processEditAction\",\n    value: function (actionInfo, action, completeAction) {\n      var _this10 = this;\n\n      var actionResult = null;\n\n      this._raiseEditActionStarting(actionInfo);\n\n      try {\n        actionResult = action();\n      } catch (errorInfo) {\n        this._raiseEditActionError(actionInfo, errorInfo);\n\n        return new _deferred.Deferred().reject().promise();\n      }\n\n      if (!Array.isArray(actionResult)) {\n        actionResult = [actionResult];\n      } else {\n        if (actionResult.length > 1) {\n          actionInfo.singleRequest = false;\n        }\n      }\n\n      this._raiseEditActionResultAcquired(actionInfo);\n\n      return (0, _uiFile_manager.whenSome)(actionResult, function (info) {\n        return _this10._raiseCompleteEditActionItem(actionInfo, info);\n      }, function (errorInfo) {\n        return _this10._raiseEditActionItemError(actionInfo, errorInfo);\n      }).then(function () {\n        completeAction();\n\n        _this10._raiseCompleteEditAction(actionInfo);\n      });\n    }\n  }, {\n    key: \"_createEditActionInfo\",\n    value: function (name, targetItemInfos, directory, customData) {\n      targetItemInfos = Array.isArray(targetItemInfos) ? targetItemInfos : [targetItemInfos];\n      customData = customData || {};\n      var items = targetItemInfos.map(function (itemInfo) {\n        return itemInfo.fileItem;\n      });\n      return {\n        name: name,\n        itemInfos: targetItemInfos,\n        items: items,\n        directory: directory,\n        customData: customData,\n        singleRequest: true\n      };\n    }\n  }, {\n    key: \"_getItemInfosForUploaderFiles\",\n    value: function (files, parentDirectoryInfo) {\n      var pathInfo = this._getPathInfo(parentDirectoryInfo);\n\n      var result = [];\n\n      for (var i = 0; i < files.length; i++) {\n        var file = files[i];\n        var item = new _file_system_item.default(pathInfo, file.name, false);\n\n        var itemInfo = this._createFileInfo(item, parentDirectoryInfo);\n\n        result.push(itemInfo);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"refresh\",\n    value: function () {\n      var _this11 = this;\n\n      if (this._lockRefresh) {\n        return this._refreshDeferred;\n      }\n\n      this._lockRefresh = true;\n      return this._executeDataLoad(function () {\n        return _this11._refreshDeferred = _this11._refreshInternal();\n      }, \"refresh\");\n    }\n  }, {\n    key: \"_refreshInternal\",\n    value: function () {\n      var _this12 = this;\n\n      var cachedRootInfo = {\n        items: this._rootDirectoryInfo.items\n      };\n\n      var selectedKeyParts = this._getDirectoryPathKeyParts(this.getCurrentDirectory());\n\n      this._resetDirectoryState(this._rootDirectoryInfo);\n\n      return this._loadItemsRecursive(this._rootDirectoryInfo, cachedRootInfo).then(function () {\n        var dirInfo = _this12._findDirectoryByPathKeyParts(selectedKeyParts);\n\n        _this12.setCurrentDirectory(dirInfo);\n\n        delete _this12._lockRefresh;\n      });\n    }\n  }, {\n    key: \"_loadItemsRecursive\",\n    value: function (directoryInfo, cachedDirectoryInfo) {\n      var _this13 = this;\n\n      return this.getDirectories(directoryInfo).then(function (dirInfos) {\n        var itemDeferreds = [];\n\n        var _loop = function (i) {\n          var cachedItem = (0, _array.find)(cachedDirectoryInfo.items, function (cache) {\n            return dirInfos[i].fileItem.key === cache.fileItem.key;\n          });\n\n          if (!cachedItem) {\n            return \"continue\";\n          }\n\n          dirInfos[i].expanded = cachedItem.expanded;\n\n          if (dirInfos[i].expanded) {\n            itemDeferreds.push(_this13._loadItemsRecursive(dirInfos[i], cachedItem));\n          }\n        };\n\n        for (var i = 0; i < dirInfos.length; i++) {\n          var _ret = _loop(i);\n\n          if (\"continue\" === _ret) {\n            continue;\n          }\n        }\n\n        return (0, _uiFile_manager.whenSome)(itemDeferreds);\n      }, function () {\n        return null;\n      });\n    }\n  }, {\n    key: \"_initialize\",\n    value: function () {\n      var _this14 = this;\n\n      var result = this._options.currentPathKeys && this._options.currentPathKeys.length ? this.setCurrentPathByKeys(this._options.currentPathKeys) : this.setCurrentPath(this._options.currentPath);\n\n      var completeInitialization = function () {\n        _this14._isInitialized = true;\n\n        _this14._raiseInitialized();\n      };\n\n      if (result) {\n        (0, _deferred.when)(result).always(completeInitialization);\n      } else {\n        completeInitialization();\n      }\n    }\n  }, {\n    key: \"_setCurrentDirectoryByPathParts\",\n    value: function (pathParts, useKeys) {\n      var _this15 = this;\n\n      return this._executeDataLoad(function () {\n        return _this15._setCurrentDirectoryByPathPartsInternal(pathParts, useKeys);\n      }, \"navigation\");\n    }\n  }, {\n    key: \"_setCurrentDirectoryByPathPartsInternal\",\n    value: function (pathParts, useKeys) {\n      var _this16 = this;\n\n      return this._getDirectoryByPathParts(this._rootDirectoryInfo, pathParts, useKeys).then(function (directoryInfo) {\n        for (var info = directoryInfo.parentDirectory; info; info = info.parentDirectory) {\n          info.expanded = true;\n        }\n\n        _this16.setCurrentDirectory(directoryInfo);\n      });\n    }\n  }, {\n    key: \"_executeDataLoad\",\n    value: function (action, operation) {\n      var _this17 = this;\n\n      this._dataLoading = true;\n      this._dataLoadingDeferred = new _deferred.Deferred();\n\n      if (this._isInitialized) {\n        this._raiseDataLoading(operation);\n      }\n\n      return action().always(function () {\n        _this17._dataLoadingDeferred.resolve();\n\n        _this17._dataLoadingDeferred = null;\n        _this17._dataLoading = false;\n      });\n    }\n  }, {\n    key: \"_getDirectoryByPathParts\",\n    value: function (parentDirectoryInfo, pathParts, useKeys) {\n      var _this18 = this;\n\n      if (pathParts.length < 1) {\n        return new _deferred.Deferred().resolve(parentDirectoryInfo).promise();\n      }\n\n      var fieldName = useKeys ? \"key\" : \"name\";\n      return this.getDirectories(parentDirectoryInfo).then(function (dirInfos) {\n        var subDirInfo = (0, _array.find)(dirInfos, function (d) {\n          return d.fileItem[fieldName] === pathParts[0];\n        });\n\n        if (!subDirInfo) {\n          return new _deferred.Deferred().reject().promise();\n        }\n\n        var restPathParts = _toConsumableArray(pathParts).splice(1);\n\n        return _this18._getDirectoryByPathParts(subDirInfo, restPathParts, useKeys);\n      });\n    }\n  }, {\n    key: \"_getDirectoryPathKeyParts\",\n    value: function (directoryInfo) {\n      var pathParts = [];\n\n      while (directoryInfo && directoryInfo.parentDirectory) {\n        pathParts.unshift(directoryInfo.fileItem.key);\n        directoryInfo = directoryInfo.parentDirectory;\n      }\n\n      return pathParts;\n    }\n  }, {\n    key: \"_findDirectoryByPathKeyParts\",\n    value: function (keyParts) {\n      var selectedDirInfo = this._rootDirectoryInfo;\n\n      if (0 === keyParts.length) {\n        return selectedDirInfo;\n      }\n\n      var i = 0;\n      var newSelectedDir = selectedDirInfo;\n\n      while (newSelectedDir && i < keyParts.length) {\n        newSelectedDir = (0, _array.find)(selectedDirInfo.items, function (info) {\n          return info.fileItem.key === keyParts[i];\n        });\n\n        if (newSelectedDir) {\n          selectedDirInfo = newSelectedDir;\n        }\n\n        i++;\n      }\n\n      return selectedDirInfo;\n    }\n  }, {\n    key: \"_getActualDirectoryInfo\",\n    value: function (directoryInfo) {\n      var keys = this._getDirectoryPathKeyParts(directoryInfo);\n\n      return this._findDirectoryByPathKeyParts(keys);\n    }\n  }, {\n    key: \"_createDirInfoByName\",\n    value: function (name, parentDirectoryInfo) {\n      var dirPathInfo = this._getPathInfo(parentDirectoryInfo);\n\n      var fileItem = new _file_system_item.default(dirPathInfo, name, true);\n      return this._createDirectoryInfo(fileItem, parentDirectoryInfo);\n    }\n  }, {\n    key: \"_createDirectoryInfo\",\n    value: function (fileItem, parentDirectoryInfo) {\n      return (0, _extend.extend)(this._createFileInfo(fileItem, parentDirectoryInfo), {\n        icon: \"folder\",\n        expanded: fileItem.isRoot(),\n        items: []\n      });\n    }\n  }, {\n    key: \"_createFileInfo\",\n    value: function (fileItem, parentDirectoryInfo) {\n      return {\n        fileItem: fileItem,\n        parentDirectory: parentDirectoryInfo,\n        icon: this._getFileItemDefaultIcon(fileItem),\n        getInternalKey: function () {\n          return \"FIK_\".concat(this.fileItem.key);\n        },\n        getDisplayName: function () {\n          return this.displayName || this.fileItem.name;\n        }\n      };\n    }\n  }, {\n    key: \"_resetDirectoryState\",\n    value: function (directoryInfo, isActualDirectoryRequired) {\n      if (isActualDirectoryRequired) {\n        directoryInfo = this._getActualDirectoryInfo(directoryInfo);\n      }\n\n      directoryInfo.itemsLoaded = false;\n      directoryInfo.items = [];\n    }\n  }, {\n    key: \"_getFileItemDefaultIcon\",\n    value: function (fileItem) {\n      if (fileItem.isDirectory) {\n        return \"folder\";\n      }\n\n      var extension = fileItem.getFileExtension();\n      var icon = this._defaultIconMap[extension];\n      return icon || \"doc\";\n    }\n  }, {\n    key: \"_createDefaultIconMap\",\n    value: function () {\n      var result = {\n        \".txt\": \"txtfile\",\n        \".rtf\": \"rtffile\",\n        \".doc\": \"docfile\",\n        \".docx\": \"docxfile\",\n        \".xls\": \"xlsfile\",\n        \".xlsx\": \"xlsxfile\",\n        \".ppt\": \"pptfile\",\n        \".pptx\": \"pptxfile\",\n        \".pdf\": \"pdffile\"\n      };\n      [\".png\", \".gif\", \".jpg\", \".jpeg\", \".ico\", \".bmp\"].forEach(function (extension) {\n        result[extension] = \"image\";\n      });\n      return result;\n    }\n  }, {\n    key: \"_createRootDirectoryInfo\",\n    value: function (text) {\n      var rootDirectory = new _file_system_item.default(null, \"\", true);\n\n      var result = this._createDirectoryInfo(rootDirectory, null);\n\n      result.displayName = text || DEFAULT_ROOT_FILE_SYSTEM_ITEM_NAME;\n      return result;\n    }\n  }, {\n    key: \"_raiseInitialized\",\n    value: function () {\n      var e = {\n        controller: this\n      };\n\n      if (this._options.onInitialized) {\n        this._options.onInitialized(e);\n      }\n    }\n  }, {\n    key: \"_raiseDataLoading\",\n    value: function (operation) {\n      if (this._options.onDataLoading) {\n        this._options.onDataLoading({\n          operation: operation\n        });\n      }\n    }\n  }, {\n    key: \"_raiseSelectedDirectoryChanged\",\n    value: function (directoryInfo) {\n      var e = {\n        selectedDirectoryInfo: directoryInfo\n      };\n\n      if (this._options.onSelectedDirectoryChanged) {\n        this._options.onSelectedDirectoryChanged(e);\n      }\n    }\n  }, {\n    key: \"_raiseEditActionStarting\",\n    value: function (actionInfo) {\n      if (this._options.onEditActionStarting) {\n        this._options.onEditActionStarting(actionInfo);\n      }\n    }\n  }, {\n    key: \"_raiseEditActionResultAcquired\",\n    value: function (actionInfo) {\n      if (this._options.onEditActionResultAcquired) {\n        this._options.onEditActionResultAcquired(actionInfo);\n      }\n    }\n  }, {\n    key: \"_raiseEditActionError\",\n    value: function (actionInfo, errorInfo) {\n      if (this._options.onEditActionError) {\n        this._options.onEditActionError(actionInfo, errorInfo);\n      }\n    }\n  }, {\n    key: \"_raiseEditActionItemError\",\n    value: function (actionInfo, errorInfo) {\n      if (this._options.onEditActionItemError) {\n        this._options.onEditActionItemError(actionInfo, errorInfo);\n      }\n    }\n  }, {\n    key: \"_raiseCompleteEditActionItem\",\n    value: function (actionInfo, info) {\n      if (this._options.onCompleteEditActionItem) {\n        this._options.onCompleteEditActionItem(actionInfo, info);\n      }\n    }\n  }, {\n    key: \"_raiseCompleteEditAction\",\n    value: function (actionInfo) {\n      if (this._options.onCompleteEditAction) {\n        this._options.onCompleteEditAction(actionInfo);\n      }\n    }\n  }, {\n    key: \"_resetState\",\n    value: function () {\n      this._selectedDirectory = null;\n      this._rootDirectoryInfo.items = [];\n      this._loadedItems = {};\n    }\n  }, {\n    key: \"_getPathInfo\",\n    value: function (directoryInfo) {\n      var pathInfo = [];\n\n      for (var dirInfo = directoryInfo; dirInfo && !dirInfo.fileItem.isRoot(); dirInfo = dirInfo.parentDirectory) {\n        pathInfo.unshift({\n          key: dirInfo.fileItem.key,\n          name: dirInfo.fileItem.name\n        });\n      }\n\n      return pathInfo;\n    }\n  }, {\n    key: \"on\",\n    value: function (eventName, eventHandler) {\n      var finalEventName = \"on\".concat(eventName);\n      this._options[finalEventName] = eventHandler;\n    }\n  }]);\n\n  return FileItemsController;\n}();\n\nexports.default = FileItemsController;\n\nvar FileSecurityController = function () {\n  function FileSecurityController(options) {\n    var _this19 = this;\n\n    _classCallCheck(this, FileSecurityController);\n\n    var defaultOptions = {\n      allowedFileExtensions: [],\n      maxFileSize: 0\n    };\n    this._options = (0, _extend.extend)(defaultOptions, options);\n    this._extensionsMap = {};\n\n    this._allowedFileExtensions.forEach(function (extension) {\n      _this19._extensionsMap[extension.toUpperCase()] = true;\n    });\n  }\n\n  _createClass(FileSecurityController, [{\n    key: \"getAllowedItems\",\n    value: function (items) {\n      var _this20 = this;\n\n      if (0 === this._allowedFileExtensions.length) {\n        return items;\n      }\n\n      return items.filter(function (item) {\n        return item.isDirectory || _this20._isValidExtension(item.name);\n      });\n    }\n  }, {\n    key: \"validateExtension\",\n    value: function (name) {\n      if (!this._isValidExtension(name)) {\n        this._throwError(_errors.default.WrongFileExtension);\n      }\n    }\n  }, {\n    key: \"validateMaxFileSize\",\n    value: function (size) {\n      if (this._maxFileSize && size > this._maxFileSize) {\n        this._throwError(_errors.default.MaxFileSizeExceeded);\n      }\n    }\n  }, {\n    key: \"_isValidExtension\",\n    value: function (name) {\n      if (0 === this._allowedFileExtensions.length) {\n        return true;\n      }\n\n      var extension = (0, _utils.getFileExtension)(name).toUpperCase();\n      return this._extensionsMap[extension];\n    }\n  }, {\n    key: \"_throwError\",\n    value: function (errorId) {\n      throw {\n        errorId: errorId\n      };\n    }\n  }, {\n    key: \"_allowedFileExtensions\",\n    get: function () {\n      return this._options.allowedFileExtensions;\n    }\n  }, {\n    key: \"_maxFileSize\",\n    get: function () {\n      return this._options.maxFileSize;\n    }\n  }]);\n\n  return FileSecurityController;\n}();\n\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/file_manager/file_items_controller.js"],"names":["exports","default","_provider_base","_interopRequireDefault","require","_file_system_item","_object_provider","_remote_provider","_custom_provider","_errors","_utils","_uiFile_manager","_deferred","_array","_extend","_common","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","DEFAULT_ROOT_FILE_SYSTEM_ITEM_NAME","FileItemsController","options","_options","extend","_isInitialized","_dataLoading","_dataLoadingDeferred","_rootDirectoryInfo","_createRootDirectoryInfo","rootText","_currentDirectoryInfo","_defaultIconMap","_createDefaultIconMap","_securityController","FileSecurityController","allowedFileExtensions","maxFileSize","uploadMaxFileSize","_setProvider","fileProvider","_initialize","value","_fileProvider","_createFileProvider","_resetState","data","type","path","pathParts","getPathParts","rawPath","pathCombine","apply","getCurrentDirectory","fileItem","relativeName","_setCurrentDirectoryByPathParts","pathKeys","equalByValue","currentPath","directory","isRoot","escapedName","getEscapedFileName","parentDirectory","directoryInfo","requireRaiseSelectedDirectory","_raiseDataLoading","_raiseSelectedDirectoryChanged","onlyFiles","_this","then","_getCurrentItemsInternal","currentDirectory","getFiles","getDirectoryContents","parentDirectoryInfo","skipNavigationOnError","itemInfos","filter","info","isDirectory","_this2","Deferred","resolve","promise","itemsLoaded","items","dirKey","getInternalKey","loadItemsDeferred","_loadedItems","_getFileItems","fileItems","map","_createDirectoryInfo","_createFileInfo","always","_this3","getItems","error","_handleItemLoadError","when","getAllowedItems","errorInfo","_this4","tempDirInfo","_createDirInfoByName","actionInfo","_createEditActionInfo","_processEditAction","createDirectory","_resetDirectoryState","fileItemInfo","_this5","itemNewName","validateExtension","renameItem","_getActualDirectoryInfo","setCurrentDirectory","destinationDirectory","_this6","moveItems","forEach","itemInfo","expanded","_this7","copyItems","_this8","deleteItems","parentDir","sessionInfo","uploadDirectoryInfo","_this9","_getItemInfosForUploaderFiles","files","deferreds","fileData","chunksInfo","validateMaxFileSize","size","uploadFileChunk","abortFileUpload","chunkSize","uploadChunkSize","getFileUploadChunkSize","downloadItems","getItemsContent","_raiseEditActionStarting","_raiseEditActionResultAcquired","_raiseEditActionError","errorId","index","reject","action","completeAction","_this10","actionResult","singleRequest","whenSome","_raiseCompleteEditActionItem","_raiseEditActionItemError","_raiseCompleteEditAction","targetItemInfos","customData","pathInfo","_getPathInfo","result","file","item","push","_this11","_lockRefresh","_refreshDeferred","_executeDataLoad","_refreshInternal","_this12","cachedRootInfo","selectedKeyParts","_getDirectoryPathKeyParts","_loadItemsRecursive","dirInfo","_findDirectoryByPathKeyParts","cachedDirectoryInfo","_this13","getDirectories","dirInfos","itemDeferreds","_loop","cachedItem","find","cache","_ret","_this14","currentPathKeys","setCurrentPathByKeys","setCurrentPath","completeInitialization","_raiseInitialized","useKeys","_this15","_setCurrentDirectoryByPathPartsInternal","_this16","_getDirectoryByPathParts","operation","_this17","_this18","fieldName","subDirInfo","d","restPathParts","splice","unshift","keyParts","selectedDirInfo","newSelectedDir","keys","dirPathInfo","icon","_getFileItemDefaultIcon","concat","getDisplayName","displayName","isActualDirectoryRequired","extension","getFileExtension","text","rootDirectory","e","controller","onInitialized","onDataLoading","selectedDirectoryInfo","onSelectedDirectoryChanged","onEditActionStarting","onEditActionResultAcquired","onEditActionError","onEditActionItemError","onCompleteEditActionItem","onCompleteEditAction","_selectedDirectory","eventName","eventHandler","finalEventName","_this19","defaultOptions","_extensionsMap","_allowedFileExtensions","toUpperCase","_this20","_isValidExtension","_throwError","WrongFileExtension","_maxFileSize","MaxFileSizeExceeded","get","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/file_items_controller.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _provider_base = _interopRequireDefault(require(\"../../file_management/provider_base\"));\r\nvar _file_system_item = _interopRequireDefault(require(\"../../file_management/file_system_item\"));\r\nvar _object_provider = _interopRequireDefault(require(\"../../file_management/object_provider\"));\r\nvar _remote_provider = _interopRequireDefault(require(\"../../file_management/remote_provider\"));\r\nvar _custom_provider = _interopRequireDefault(require(\"../../file_management/custom_provider\"));\r\nvar _errors = _interopRequireDefault(require(\"../../file_management/errors\"));\r\nvar _utils = require(\"../../file_management/utils\");\r\nvar _uiFile_manager = require(\"./ui.file_manager.common\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _common = require(\"../../core/utils/common\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return _arrayLikeToArray(arr)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar DEFAULT_ROOT_FILE_SYSTEM_ITEM_NAME = \"Files\";\r\nvar FileItemsController = function() {\r\n    function FileItemsController(options) {\r\n        _classCallCheck(this, FileItemsController);\r\n        options = options || {};\r\n        this._options = (0, _extend.extend)({}, options);\r\n        this._isInitialized = false;\r\n        this._dataLoading = false;\r\n        this._dataLoadingDeferred = null;\r\n        this._rootDirectoryInfo = this._createRootDirectoryInfo(options.rootText);\r\n        this._currentDirectoryInfo = this._rootDirectoryInfo;\r\n        this._defaultIconMap = this._createDefaultIconMap();\r\n        this._securityController = new FileSecurityController({\r\n            allowedFileExtensions: this._options.allowedFileExtensions,\r\n            maxFileSize: this._options.uploadMaxFileSize\r\n        });\r\n        this._setProvider(options.fileProvider);\r\n        this._initialize()\r\n    }\r\n    _createClass(FileItemsController, [{\r\n        key: \"_setProvider\",\r\n        value: function(fileProvider) {\r\n            this._fileProvider = this._createFileProvider(fileProvider);\r\n            this._resetState()\r\n        }\r\n    }, {\r\n        key: \"_createFileProvider\",\r\n        value: function(fileProvider) {\r\n            if (!fileProvider) {\r\n                fileProvider = []\r\n            }\r\n            if (Array.isArray(fileProvider)) {\r\n                return new _object_provider.default({\r\n                    data: fileProvider\r\n                })\r\n            }\r\n            if (fileProvider instanceof _provider_base.default) {\r\n                return fileProvider\r\n            }\r\n            switch (fileProvider.type) {\r\n                case \"remote\":\r\n                    return new _remote_provider.default(fileProvider);\r\n                case \"custom\":\r\n                    return new _custom_provider.default(fileProvider)\r\n            }\r\n            return new _object_provider.default(fileProvider)\r\n        }\r\n    }, {\r\n        key: \"setCurrentPath\",\r\n        value: function(path) {\r\n            var pathParts = (0, _utils.getPathParts)(path);\r\n            var rawPath = _utils.pathCombine.apply(void 0, _toConsumableArray(pathParts));\r\n            if (this.getCurrentDirectory().fileItem.relativeName === rawPath) {\r\n                return\r\n            }\r\n            return this._setCurrentDirectoryByPathParts(pathParts)\r\n        }\r\n    }, {\r\n        key: \"setCurrentPathByKeys\",\r\n        value: function(pathKeys) {\r\n            if ((0, _common.equalByValue)(this.getCurrentDirectory().fileItem.pathKeys, pathKeys, 0, true)) {\r\n                return\r\n            }\r\n            return this._setCurrentDirectoryByPathParts(pathKeys, true)\r\n        }\r\n    }, {\r\n        key: \"getCurrentPath\",\r\n        value: function() {\r\n            var currentPath = \"\";\r\n            var directory = this.getCurrentDirectory();\r\n            while (directory && !directory.fileItem.isRoot()) {\r\n                var escapedName = (0, _utils.getEscapedFileName)(directory.fileItem.name);\r\n                currentPath = (0, _utils.pathCombine)(escapedName, currentPath);\r\n                directory = directory.parentDirectory\r\n            }\r\n            return currentPath\r\n        }\r\n    }, {\r\n        key: \"getCurrentDirectory\",\r\n        value: function() {\r\n            return this._currentDirectoryInfo\r\n        }\r\n    }, {\r\n        key: \"setCurrentDirectory\",\r\n        value: function(directoryInfo) {\r\n            if (!directoryInfo) {\r\n                return\r\n            }\r\n            if (this._currentDirectoryInfo && this._currentDirectoryInfo === directoryInfo) {\r\n                return\r\n            }\r\n            var requireRaiseSelectedDirectory = this._currentDirectoryInfo.fileItem.key !== directoryInfo.fileItem.key;\r\n            this._currentDirectoryInfo = directoryInfo;\r\n            if (requireRaiseSelectedDirectory && this._isInitialized) {\r\n                if (!this._dataLoading) {\r\n                    this._raiseDataLoading(\"navigation\")\r\n                }\r\n                this._raiseSelectedDirectoryChanged(directoryInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getCurrentItems\",\r\n        value: function(onlyFiles) {\r\n            var _this = this;\r\n            return this._dataLoadingDeferred ? this._dataLoadingDeferred.then(function() {\r\n                return _this._getCurrentItemsInternal(onlyFiles)\r\n            }) : this._getCurrentItemsInternal(onlyFiles)\r\n        }\r\n    }, {\r\n        key: \"_getCurrentItemsInternal\",\r\n        value: function(onlyFiles) {\r\n            var currentDirectory = this.getCurrentDirectory();\r\n            return onlyFiles ? this.getFiles(currentDirectory) : this.getDirectoryContents(currentDirectory)\r\n        }\r\n    }, {\r\n        key: \"getDirectories\",\r\n        value: function(parentDirectoryInfo, skipNavigationOnError) {\r\n            return this.getDirectoryContents(parentDirectoryInfo, skipNavigationOnError).then(function(itemInfos) {\r\n                return itemInfos.filter(function(info) {\r\n                    return info.fileItem.isDirectory\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"getFiles\",\r\n        value: function(parentDirectoryInfo) {\r\n            return this.getDirectoryContents(parentDirectoryInfo).then(function(itemInfos) {\r\n                return itemInfos.filter(function(info) {\r\n                    return !info.fileItem.isDirectory\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"getDirectoryContents\",\r\n        value: function(parentDirectoryInfo, skipNavigationOnError) {\r\n            var _this2 = this;\r\n            if (!parentDirectoryInfo) {\r\n                return (new _deferred.Deferred).resolve([this._rootDirectoryInfo]).promise()\r\n            }\r\n            if (parentDirectoryInfo.itemsLoaded) {\r\n                return (new _deferred.Deferred).resolve(parentDirectoryInfo.items).promise()\r\n            }\r\n            var dirKey = parentDirectoryInfo.getInternalKey();\r\n            var loadItemsDeferred = this._loadedItems[dirKey];\r\n            if (loadItemsDeferred) {\r\n                return loadItemsDeferred\r\n            }\r\n            loadItemsDeferred = this._getFileItems(parentDirectoryInfo, skipNavigationOnError).then(function(fileItems) {\r\n                fileItems = fileItems || [];\r\n                parentDirectoryInfo.items = fileItems.map(function(fileItem) {\r\n                    return fileItem.isDirectory && _this2._createDirectoryInfo(fileItem, parentDirectoryInfo) || _this2._createFileInfo(fileItem, parentDirectoryInfo)\r\n                });\r\n                parentDirectoryInfo.itemsLoaded = true;\r\n                return parentDirectoryInfo.items\r\n            });\r\n            this._loadedItems[dirKey] = loadItemsDeferred;\r\n            loadItemsDeferred.always(function() {\r\n                delete _this2._loadedItems[dirKey]\r\n            });\r\n            return loadItemsDeferred\r\n        }\r\n    }, {\r\n        key: \"_getFileItems\",\r\n        value: function(parentDirectoryInfo, skipNavigationOnError) {\r\n            var _this3 = this;\r\n            var loadItemsDeferred = null;\r\n            try {\r\n                loadItemsDeferred = this._fileProvider.getItems(parentDirectoryInfo.fileItem)\r\n            } catch (error) {\r\n                return this._handleItemLoadError(parentDirectoryInfo, error, skipNavigationOnError)\r\n            }\r\n            return (0, _deferred.when)(loadItemsDeferred).then(function(fileItems) {\r\n                return _this3._securityController.getAllowedItems(fileItems)\r\n            }, function(errorInfo) {\r\n                return _this3._handleItemLoadError(parentDirectoryInfo, errorInfo, skipNavigationOnError)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"createDirectory\",\r\n        value: function(parentDirectoryInfo, name) {\r\n            var _this4 = this;\r\n            var tempDirInfo = this._createDirInfoByName(name, parentDirectoryInfo);\r\n            var actionInfo = this._createEditActionInfo(\"create\", tempDirInfo, parentDirectoryInfo);\r\n            return this._processEditAction(actionInfo, function() {\r\n                return _this4._fileProvider.createDirectory(parentDirectoryInfo.fileItem, name)\r\n            }, function() {\r\n                return _this4._resetDirectoryState(parentDirectoryInfo, true)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"renameItem\",\r\n        value: function(fileItemInfo, name) {\r\n            var _this5 = this;\r\n            var actionInfo = this._createEditActionInfo(\"rename\", fileItemInfo, fileItemInfo.parentDirectory, {\r\n                itemNewName: name\r\n            });\r\n            return this._processEditAction(actionInfo, function() {\r\n                if (!fileItemInfo.fileItem.isDirectory) {\r\n                    _this5._securityController.validateExtension(name)\r\n                }\r\n                return _this5._fileProvider.renameItem(fileItemInfo.fileItem, name)\r\n            }, function() {\r\n                var parentDirectory = _this5._getActualDirectoryInfo(fileItemInfo.parentDirectory);\r\n                _this5._resetDirectoryState(parentDirectory);\r\n                _this5.setCurrentDirectory(parentDirectory)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"moveItems\",\r\n        value: function(itemInfos, destinationDirectory) {\r\n            var _this6 = this;\r\n            var items = itemInfos.map(function(i) {\r\n                return i.fileItem\r\n            });\r\n            var actionInfo = this._createEditActionInfo(\"move\", itemInfos, destinationDirectory);\r\n            return this._processEditAction(actionInfo, function() {\r\n                return _this6._fileProvider.moveItems(items, destinationDirectory.fileItem)\r\n            }, function() {\r\n                destinationDirectory = _this6._getActualDirectoryInfo(destinationDirectory);\r\n                itemInfos.forEach(function(itemInfo) {\r\n                    return _this6._resetDirectoryState(itemInfo.parentDirectory, true)\r\n                });\r\n                _this6._resetDirectoryState(destinationDirectory);\r\n                _this6.setCurrentDirectory(destinationDirectory);\r\n                destinationDirectory.expanded = true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"copyItems\",\r\n        value: function(itemInfos, destinationDirectory) {\r\n            var _this7 = this;\r\n            var items = itemInfos.map(function(i) {\r\n                return i.fileItem\r\n            });\r\n            var actionInfo = this._createEditActionInfo(\"copy\", itemInfos, destinationDirectory);\r\n            return this._processEditAction(actionInfo, function() {\r\n                return _this7._fileProvider.copyItems(items, destinationDirectory.fileItem)\r\n            }, function() {\r\n                destinationDirectory = _this7._getActualDirectoryInfo(destinationDirectory);\r\n                _this7._resetDirectoryState(destinationDirectory);\r\n                _this7.setCurrentDirectory(destinationDirectory);\r\n                destinationDirectory.expanded = true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"deleteItems\",\r\n        value: function(itemInfos) {\r\n            var _this8 = this;\r\n            var items = itemInfos.map(function(i) {\r\n                return i.fileItem\r\n            });\r\n            var directory = itemInfos.length > 0 ? itemInfos[0].parentDirectory : null;\r\n            var actionInfo = this._createEditActionInfo(\"delete\", itemInfos, directory);\r\n            return this._processEditAction(actionInfo, function() {\r\n                return _this8._fileProvider.deleteItems(items)\r\n            }, function() {\r\n                itemInfos.forEach(function(itemInfo) {\r\n                    var parentDir = _this8._getActualDirectoryInfo(itemInfo.parentDirectory);\r\n                    _this8._resetDirectoryState(parentDir);\r\n                    _this8.setCurrentDirectory(parentDir)\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"processUploadSession\",\r\n        value: function(sessionInfo, uploadDirectoryInfo) {\r\n            var _this9 = this;\r\n            var itemInfos = this._getItemInfosForUploaderFiles(sessionInfo.files, uploadDirectoryInfo);\r\n            var actionInfo = this._createEditActionInfo(\"upload\", itemInfos, uploadDirectoryInfo, {\r\n                sessionInfo: sessionInfo\r\n            });\r\n            return this._processEditAction(actionInfo, function() {\r\n                return sessionInfo.deferreds\r\n            }, function() {\r\n                return _this9._resetDirectoryState(uploadDirectoryInfo, true)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"uploadFileChunk\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {\r\n            this._securityController.validateMaxFileSize(fileData.size);\r\n            this._securityController.validateExtension(fileData.name);\r\n            return (0, _deferred.when)(this._fileProvider.uploadFileChunk(fileData, chunksInfo, destinationDirectory))\r\n        }\r\n    }, {\r\n        key: \"abortFileUpload\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {\r\n            return (0, _deferred.when)(this._fileProvider.abortFileUpload(fileData, chunksInfo, destinationDirectory))\r\n        }\r\n    }, {\r\n        key: \"getFileUploadChunkSize\",\r\n        value: function() {\r\n            var chunkSize = this._options.uploadChunkSize;\r\n            if (chunkSize && chunkSize > 0) {\r\n                return chunkSize\r\n            }\r\n            return this._fileProvider.getFileUploadChunkSize()\r\n        }\r\n    }, {\r\n        key: \"downloadItems\",\r\n        value: function(itemInfos) {\r\n            var items = itemInfos.map(function(i) {\r\n                return i.fileItem\r\n            });\r\n            this._fileProvider.downloadItems(items)\r\n        }\r\n    }, {\r\n        key: \"getItemContent\",\r\n        value: function(itemInfos) {\r\n            var items = itemInfos.map(function(i) {\r\n                return i.fileItem\r\n            });\r\n            return (0, _deferred.when)(this._fileProvider.getItemsContent(items))\r\n        }\r\n    }, {\r\n        key: \"_handleItemLoadError\",\r\n        value: function(parentDirectoryInfo, errorInfo, skipNavigationOnError) {\r\n            parentDirectoryInfo = this._getActualDirectoryInfo(parentDirectoryInfo);\r\n            var actionInfo = this._createEditActionInfo(\"getItems\", parentDirectoryInfo, parentDirectoryInfo);\r\n            this._raiseEditActionStarting(actionInfo);\r\n            this._raiseEditActionResultAcquired(actionInfo);\r\n            this._raiseEditActionError(actionInfo, {\r\n                errorId: errorInfo.errorId,\r\n                fileItem: parentDirectoryInfo.fileItem,\r\n                index: 0\r\n            });\r\n            this._resetDirectoryState(parentDirectoryInfo);\r\n            parentDirectoryInfo.expanded = false;\r\n            if (!skipNavigationOnError) {\r\n                this.setCurrentDirectory(parentDirectoryInfo.parentDirectory)\r\n            }\r\n            return (new _deferred.Deferred).reject().promise()\r\n        }\r\n    }, {\r\n        key: \"_processEditAction\",\r\n        value: function(actionInfo, action, completeAction) {\r\n            var _this10 = this;\r\n            var actionResult = null;\r\n            this._raiseEditActionStarting(actionInfo);\r\n            try {\r\n                actionResult = action()\r\n            } catch (errorInfo) {\r\n                this._raiseEditActionError(actionInfo, errorInfo);\r\n                return (new _deferred.Deferred).reject().promise()\r\n            }\r\n            if (!Array.isArray(actionResult)) {\r\n                actionResult = [actionResult]\r\n            } else {\r\n                if (actionResult.length > 1) {\r\n                    actionInfo.singleRequest = false\r\n                }\r\n            }\r\n            this._raiseEditActionResultAcquired(actionInfo);\r\n            return (0, _uiFile_manager.whenSome)(actionResult, function(info) {\r\n                return _this10._raiseCompleteEditActionItem(actionInfo, info)\r\n            }, function(errorInfo) {\r\n                return _this10._raiseEditActionItemError(actionInfo, errorInfo)\r\n            }).then(function() {\r\n                completeAction();\r\n                _this10._raiseCompleteEditAction(actionInfo)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createEditActionInfo\",\r\n        value: function(name, targetItemInfos, directory, customData) {\r\n            targetItemInfos = Array.isArray(targetItemInfos) ? targetItemInfos : [targetItemInfos];\r\n            customData = customData || {};\r\n            var items = targetItemInfos.map(function(itemInfo) {\r\n                return itemInfo.fileItem\r\n            });\r\n            return {\r\n                name: name,\r\n                itemInfos: targetItemInfos,\r\n                items: items,\r\n                directory: directory,\r\n                customData: customData,\r\n                singleRequest: true\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getItemInfosForUploaderFiles\",\r\n        value: function(files, parentDirectoryInfo) {\r\n            var pathInfo = this._getPathInfo(parentDirectoryInfo);\r\n            var result = [];\r\n            for (var i = 0; i < files.length; i++) {\r\n                var file = files[i];\r\n                var item = new _file_system_item.default(pathInfo, file.name, false);\r\n                var itemInfo = this._createFileInfo(item, parentDirectoryInfo);\r\n                result.push(itemInfo)\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"refresh\",\r\n        value: function() {\r\n            var _this11 = this;\r\n            if (this._lockRefresh) {\r\n                return this._refreshDeferred\r\n            }\r\n            this._lockRefresh = true;\r\n            return this._executeDataLoad(function() {\r\n                return _this11._refreshDeferred = _this11._refreshInternal()\r\n            }, \"refresh\")\r\n        }\r\n    }, {\r\n        key: \"_refreshInternal\",\r\n        value: function() {\r\n            var _this12 = this;\r\n            var cachedRootInfo = {\r\n                items: this._rootDirectoryInfo.items\r\n            };\r\n            var selectedKeyParts = this._getDirectoryPathKeyParts(this.getCurrentDirectory());\r\n            this._resetDirectoryState(this._rootDirectoryInfo);\r\n            return this._loadItemsRecursive(this._rootDirectoryInfo, cachedRootInfo).then(function() {\r\n                var dirInfo = _this12._findDirectoryByPathKeyParts(selectedKeyParts);\r\n                _this12.setCurrentDirectory(dirInfo);\r\n                delete _this12._lockRefresh\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_loadItemsRecursive\",\r\n        value: function(directoryInfo, cachedDirectoryInfo) {\r\n            var _this13 = this;\r\n            return this.getDirectories(directoryInfo).then(function(dirInfos) {\r\n                var itemDeferreds = [];\r\n                var _loop = function(i) {\r\n                    var cachedItem = (0, _array.find)(cachedDirectoryInfo.items, function(cache) {\r\n                        return dirInfos[i].fileItem.key === cache.fileItem.key\r\n                    });\r\n                    if (!cachedItem) {\r\n                        return \"continue\"\r\n                    }\r\n                    dirInfos[i].expanded = cachedItem.expanded;\r\n                    if (dirInfos[i].expanded) {\r\n                        itemDeferreds.push(_this13._loadItemsRecursive(dirInfos[i], cachedItem))\r\n                    }\r\n                };\r\n                for (var i = 0; i < dirInfos.length; i++) {\r\n                    var _ret = _loop(i);\r\n                    if (\"continue\" === _ret) {\r\n                        continue\r\n                    }\r\n                }\r\n                return (0, _uiFile_manager.whenSome)(itemDeferreds)\r\n            }, function() {\r\n                return null\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_initialize\",\r\n        value: function() {\r\n            var _this14 = this;\r\n            var result = this._options.currentPathKeys && this._options.currentPathKeys.length ? this.setCurrentPathByKeys(this._options.currentPathKeys) : this.setCurrentPath(this._options.currentPath);\r\n            var completeInitialization = function() {\r\n                _this14._isInitialized = true;\r\n                _this14._raiseInitialized()\r\n            };\r\n            if (result) {\r\n                (0, _deferred.when)(result).always(completeInitialization)\r\n            } else {\r\n                completeInitialization()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setCurrentDirectoryByPathParts\",\r\n        value: function(pathParts, useKeys) {\r\n            var _this15 = this;\r\n            return this._executeDataLoad(function() {\r\n                return _this15._setCurrentDirectoryByPathPartsInternal(pathParts, useKeys)\r\n            }, \"navigation\")\r\n        }\r\n    }, {\r\n        key: \"_setCurrentDirectoryByPathPartsInternal\",\r\n        value: function(pathParts, useKeys) {\r\n            var _this16 = this;\r\n            return this._getDirectoryByPathParts(this._rootDirectoryInfo, pathParts, useKeys).then(function(directoryInfo) {\r\n                for (var info = directoryInfo.parentDirectory; info; info = info.parentDirectory) {\r\n                    info.expanded = true\r\n                }\r\n                _this16.setCurrentDirectory(directoryInfo)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_executeDataLoad\",\r\n        value: function(action, operation) {\r\n            var _this17 = this;\r\n            this._dataLoading = true;\r\n            this._dataLoadingDeferred = new _deferred.Deferred;\r\n            if (this._isInitialized) {\r\n                this._raiseDataLoading(operation)\r\n            }\r\n            return action().always(function() {\r\n                _this17._dataLoadingDeferred.resolve();\r\n                _this17._dataLoadingDeferred = null;\r\n                _this17._dataLoading = false\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getDirectoryByPathParts\",\r\n        value: function(parentDirectoryInfo, pathParts, useKeys) {\r\n            var _this18 = this;\r\n            if (pathParts.length < 1) {\r\n                return (new _deferred.Deferred).resolve(parentDirectoryInfo).promise()\r\n            }\r\n            var fieldName = useKeys ? \"key\" : \"name\";\r\n            return this.getDirectories(parentDirectoryInfo).then(function(dirInfos) {\r\n                var subDirInfo = (0, _array.find)(dirInfos, function(d) {\r\n                    return d.fileItem[fieldName] === pathParts[0]\r\n                });\r\n                if (!subDirInfo) {\r\n                    return (new _deferred.Deferred).reject().promise()\r\n                }\r\n                var restPathParts = _toConsumableArray(pathParts).splice(1);\r\n                return _this18._getDirectoryByPathParts(subDirInfo, restPathParts, useKeys)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getDirectoryPathKeyParts\",\r\n        value: function(directoryInfo) {\r\n            var pathParts = [];\r\n            while (directoryInfo && directoryInfo.parentDirectory) {\r\n                pathParts.unshift(directoryInfo.fileItem.key);\r\n                directoryInfo = directoryInfo.parentDirectory\r\n            }\r\n            return pathParts\r\n        }\r\n    }, {\r\n        key: \"_findDirectoryByPathKeyParts\",\r\n        value: function(keyParts) {\r\n            var selectedDirInfo = this._rootDirectoryInfo;\r\n            if (0 === keyParts.length) {\r\n                return selectedDirInfo\r\n            }\r\n            var i = 0;\r\n            var newSelectedDir = selectedDirInfo;\r\n            while (newSelectedDir && i < keyParts.length) {\r\n                newSelectedDir = (0, _array.find)(selectedDirInfo.items, function(info) {\r\n                    return info.fileItem.key === keyParts[i]\r\n                });\r\n                if (newSelectedDir) {\r\n                    selectedDirInfo = newSelectedDir\r\n                }\r\n                i++\r\n            }\r\n            return selectedDirInfo\r\n        }\r\n    }, {\r\n        key: \"_getActualDirectoryInfo\",\r\n        value: function(directoryInfo) {\r\n            var keys = this._getDirectoryPathKeyParts(directoryInfo);\r\n            return this._findDirectoryByPathKeyParts(keys)\r\n        }\r\n    }, {\r\n        key: \"_createDirInfoByName\",\r\n        value: function(name, parentDirectoryInfo) {\r\n            var dirPathInfo = this._getPathInfo(parentDirectoryInfo);\r\n            var fileItem = new _file_system_item.default(dirPathInfo, name, true);\r\n            return this._createDirectoryInfo(fileItem, parentDirectoryInfo)\r\n        }\r\n    }, {\r\n        key: \"_createDirectoryInfo\",\r\n        value: function(fileItem, parentDirectoryInfo) {\r\n            return (0, _extend.extend)(this._createFileInfo(fileItem, parentDirectoryInfo), {\r\n                icon: \"folder\",\r\n                expanded: fileItem.isRoot(),\r\n                items: []\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createFileInfo\",\r\n        value: function(fileItem, parentDirectoryInfo) {\r\n            return {\r\n                fileItem: fileItem,\r\n                parentDirectory: parentDirectoryInfo,\r\n                icon: this._getFileItemDefaultIcon(fileItem),\r\n                getInternalKey: function() {\r\n                    return \"FIK_\".concat(this.fileItem.key)\r\n                },\r\n                getDisplayName: function() {\r\n                    return this.displayName || this.fileItem.name\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_resetDirectoryState\",\r\n        value: function(directoryInfo, isActualDirectoryRequired) {\r\n            if (isActualDirectoryRequired) {\r\n                directoryInfo = this._getActualDirectoryInfo(directoryInfo)\r\n            }\r\n            directoryInfo.itemsLoaded = false;\r\n            directoryInfo.items = []\r\n        }\r\n    }, {\r\n        key: \"_getFileItemDefaultIcon\",\r\n        value: function(fileItem) {\r\n            if (fileItem.isDirectory) {\r\n                return \"folder\"\r\n            }\r\n            var extension = fileItem.getFileExtension();\r\n            var icon = this._defaultIconMap[extension];\r\n            return icon || \"doc\"\r\n        }\r\n    }, {\r\n        key: \"_createDefaultIconMap\",\r\n        value: function() {\r\n            var result = {\r\n                \".txt\": \"txtfile\",\r\n                \".rtf\": \"rtffile\",\r\n                \".doc\": \"docfile\",\r\n                \".docx\": \"docxfile\",\r\n                \".xls\": \"xlsfile\",\r\n                \".xlsx\": \"xlsxfile\",\r\n                \".ppt\": \"pptfile\",\r\n                \".pptx\": \"pptxfile\",\r\n                \".pdf\": \"pdffile\"\r\n            };\r\n            [\".png\", \".gif\", \".jpg\", \".jpeg\", \".ico\", \".bmp\"].forEach(function(extension) {\r\n                result[extension] = \"image\"\r\n            });\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_createRootDirectoryInfo\",\r\n        value: function(text) {\r\n            var rootDirectory = new _file_system_item.default(null, \"\", true);\r\n            var result = this._createDirectoryInfo(rootDirectory, null);\r\n            result.displayName = text || DEFAULT_ROOT_FILE_SYSTEM_ITEM_NAME;\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_raiseInitialized\",\r\n        value: function() {\r\n            var e = {\r\n                controller: this\r\n            };\r\n            if (this._options.onInitialized) {\r\n                this._options.onInitialized(e)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseDataLoading\",\r\n        value: function(operation) {\r\n            if (this._options.onDataLoading) {\r\n                this._options.onDataLoading({\r\n                    operation: operation\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseSelectedDirectoryChanged\",\r\n        value: function(directoryInfo) {\r\n            var e = {\r\n                selectedDirectoryInfo: directoryInfo\r\n            };\r\n            if (this._options.onSelectedDirectoryChanged) {\r\n                this._options.onSelectedDirectoryChanged(e)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEditActionStarting\",\r\n        value: function(actionInfo) {\r\n            if (this._options.onEditActionStarting) {\r\n                this._options.onEditActionStarting(actionInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEditActionResultAcquired\",\r\n        value: function(actionInfo) {\r\n            if (this._options.onEditActionResultAcquired) {\r\n                this._options.onEditActionResultAcquired(actionInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEditActionError\",\r\n        value: function(actionInfo, errorInfo) {\r\n            if (this._options.onEditActionError) {\r\n                this._options.onEditActionError(actionInfo, errorInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEditActionItemError\",\r\n        value: function(actionInfo, errorInfo) {\r\n            if (this._options.onEditActionItemError) {\r\n                this._options.onEditActionItemError(actionInfo, errorInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseCompleteEditActionItem\",\r\n        value: function(actionInfo, info) {\r\n            if (this._options.onCompleteEditActionItem) {\r\n                this._options.onCompleteEditActionItem(actionInfo, info)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseCompleteEditAction\",\r\n        value: function(actionInfo) {\r\n            if (this._options.onCompleteEditAction) {\r\n                this._options.onCompleteEditAction(actionInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_resetState\",\r\n        value: function() {\r\n            this._selectedDirectory = null;\r\n            this._rootDirectoryInfo.items = [];\r\n            this._loadedItems = {}\r\n        }\r\n    }, {\r\n        key: \"_getPathInfo\",\r\n        value: function(directoryInfo) {\r\n            var pathInfo = [];\r\n            for (var dirInfo = directoryInfo; dirInfo && !dirInfo.fileItem.isRoot(); dirInfo = dirInfo.parentDirectory) {\r\n                pathInfo.unshift({\r\n                    key: dirInfo.fileItem.key,\r\n                    name: dirInfo.fileItem.name\r\n                })\r\n            }\r\n            return pathInfo\r\n        }\r\n    }, {\r\n        key: \"on\",\r\n        value: function(eventName, eventHandler) {\r\n            var finalEventName = \"on\".concat(eventName);\r\n            this._options[finalEventName] = eventHandler\r\n        }\r\n    }]);\r\n    return FileItemsController\r\n}();\r\nexports.default = FileItemsController;\r\nvar FileSecurityController = function() {\r\n    function FileSecurityController(options) {\r\n        var _this19 = this;\r\n        _classCallCheck(this, FileSecurityController);\r\n        var defaultOptions = {\r\n            allowedFileExtensions: [],\r\n            maxFileSize: 0\r\n        };\r\n        this._options = (0, _extend.extend)(defaultOptions, options);\r\n        this._extensionsMap = {};\r\n        this._allowedFileExtensions.forEach(function(extension) {\r\n            _this19._extensionsMap[extension.toUpperCase()] = true\r\n        })\r\n    }\r\n    _createClass(FileSecurityController, [{\r\n        key: \"getAllowedItems\",\r\n        value: function(items) {\r\n            var _this20 = this;\r\n            if (0 === this._allowedFileExtensions.length) {\r\n                return items\r\n            }\r\n            return items.filter(function(item) {\r\n                return item.isDirectory || _this20._isValidExtension(item.name)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"validateExtension\",\r\n        value: function(name) {\r\n            if (!this._isValidExtension(name)) {\r\n                this._throwError(_errors.default.WrongFileExtension)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"validateMaxFileSize\",\r\n        value: function(size) {\r\n            if (this._maxFileSize && size > this._maxFileSize) {\r\n                this._throwError(_errors.default.MaxFileSizeExceeded)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isValidExtension\",\r\n        value: function(name) {\r\n            if (0 === this._allowedFileExtensions.length) {\r\n                return true\r\n            }\r\n            var extension = (0, _utils.getFileExtension)(name).toUpperCase();\r\n            return this._extensionsMap[extension]\r\n        }\r\n    }, {\r\n        key: \"_throwError\",\r\n        value: function(errorId) {\r\n            throw {\r\n                errorId: errorId\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_allowedFileExtensions\",\r\n        get: function() {\r\n            return this._options.allowedFileExtensions\r\n        }\r\n    }, {\r\n        key: \"_maxFileSize\",\r\n        get: function() {\r\n            return this._options.maxFileSize\r\n        }\r\n    }]);\r\n    return FileSecurityController\r\n}();\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}