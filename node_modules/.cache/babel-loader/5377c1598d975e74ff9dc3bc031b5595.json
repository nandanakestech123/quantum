{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import Modal from\"assets/images/modal-avatar.png\";import filter from\"assets/images/filter.png\";import{Appointments,PurchaseHistory,PersonalDetails,Favourites}from\"./Details\";import{history}from\"helpers\";import classnames from\"classnames\";import{Nav,NavItem,NavLink,TabContent,TabPane}from\"reactstrap\";import{NormalButton,NormalModal,InputSearch,NormalInput,NormalCheckbox}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCustomer}from\"redux/actions/customer\";import closeIcon from\"assets/images/close.png\";import{Details}from\"./Detail\";import{Account}from\"./Account\";import{TreatmentHistory}from\"./TreatmentHistory\";import{withTranslation}from\"react-i18next\";import _ from\"lodash\";import{getCommonApi}from\"redux/actions/common\";export var AccountDetailsClass=/*#__PURE__*/function(_Component){_inherits(AccountDetailsClass,_Component);var _super=_createSuper(AccountDetailsClass);function AccountDetailsClass(){var _this;_classCallCheck(this,AccountDetailsClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeTab:\"1\",isOpenTreatmentDone:false,formFields:{auto:false,totalOutstanding:\"\",outstanding:\"\"},isActiveTab:\"detail\",customerOption:[],visible:false};_this.toggle=function(tab){if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.getCustomer=function(){_this.props.getCustomer(_this.props.match.params.id).then(function(res){console.log(res,\"asdasdfasdfasdf resssssss\");});};_this.handleDialog=function(){var isOpenTreatmentDone=_this.state.isOpenTreatmentDone;isOpenTreatmentDone=false;_this.setState({isOpenTreatmentDone:isOpenTreatmentDone});};_this.handleTopup=function(){var isOpenTreatmentDone=_this.state.isOpenTreatmentDone;isOpenTreatmentDone=true;_this.setState({isOpenTreatmentDone:isOpenTreatmentDone});};_this.handleChange=function(_ref){var _ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;var formFields=Object.assign({},_this.state.formFields);console.log(value,name,\"ghfhgfhjfkhjg\");formFields[name]=value;_this.setState({formFields:formFields});};_this.handleSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var _this$state,formFields,visible;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// event.persist();\n_this$state=_this.state,formFields=_this$state.formFields,visible=_this$state.visible;formFields.custName=event.target.value;_context2.next=4;return _this.setState({formFields:formFields,visible:true});case 4:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.search();case 1:case\"end\":return _context.stop();}}},_callee);})),500);}_this.debouncedFn();case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.search=function(searchString){var formFields=_this.state.formFields;_this.props.getCommonApi(\"custappt/?search=\".concat(formFields.custName)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});};_this.handleClick=function(key){if(!_this.state.visible){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}if(_this.state.visible){var basicApptDetail=_this.props.basicApptDetail;_this.search(basicApptDetail);}_this.setState(function(prevState){return{visible:!prevState.visible};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({customerOption:[]});case 2:_this.props.history.push(\"/admin/customerplus/\".concat(data.id,\"/details\"));window.location.reload();_this.handleClick();case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref4.apply(this,arguments);};}();return _this;}_createClass(AccountDetailsClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getCustomer();}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,_this$props$customerD=_this$props.customerDetail,customerDetail=_this$props$customerD===void 0?{}:_this$props$customerD,t=_this$props.t;console.log(customerDetail,\"asdasdfasdfasdf === sdfasdfagf\");var id=customerDetail.id,cust_name=customerDetail.cust_name,cust_refer=customerDetail.cust_refer,cust_img=customerDetail.cust_img;var _this$state2=this.state,isOpenTreatmentDone=_this$state2.isOpenTreatmentDone,formFields=_this$state2.formFields,isActiveTab=_this$state2.isActiveTab,visible=_this$state2.visible,customerOption=_this$state2.customerOption;return/*#__PURE__*/React.createElement(\"div\",{className:\"view-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row pb-md-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\",onClick:function onClick(){return history.push(\"/admin/customerplus\");}},t(\"Customer\")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},\" \",t(\"Customer Details\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-container\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Search Customer..\",value:formFields.custName,name:\"custName\",onChange:this.handleSearch,onClick:this.handleClick})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-4 mx-2 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Customer\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/add\");}}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"view-detail-box p-4 d-flex flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex pb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"modal-avatar\",src:cust_img?cust_img:Modal,alt:\"\",height:\"80\",width:\"80\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"pl-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-28 fw-500 customer-detail-heading py-2\"},t(cust_name)),/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 fw-500 customer-detail-heading py-2\"},t(cust_refer)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 icon-change menu-list p-0\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn outline-btn col-2 mr-1 fs-14 float-left text-capitalize detail\",onClick:function onClick(){return history.push(\"/admin/customerplus/\".concat(_this2.props.match.params.id,\"/details\"));}},t(\"Detail\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn outline-btn col-2 mr-1 fs-14 active float-left text-capitalize account\",onClick:function onClick(){return history.push(\"/admin/customerplus/\".concat(_this2.props.match.params.id,\"/account\"));}},t(\"Account\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn outline-btn col-2 mr-1 fs-14 float-left text-capitalize hold\",onClick:function onClick(){return history.push(\"/admin/customerplus/\".concat(_this2.props.match.params.id,\"/hold\"));}},t(\"Hold\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn outline-btn col-3 mr-1 fs-14 p-1 float-left text-capitalize invoice\",onClick:function onClick(){return history.push(\"/admin/customerplus/\".concat(_this2.props.match.params.id,\"/invoice\"));}},t(\"Invoice History\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 icon-change edit\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn outline-btn col-2 mx-2 fs-15 float-right text-capitalize\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/\".concat(_this2.props.match.params.id,\"/editCustomer\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-edit mr-2\"}),t(\"Edit\")))),/*#__PURE__*/React.createElement(Account,{id:this.props.match.params.id})),visible?/*#__PURE__*/React.createElement(\"div\",{className:\"customerSearch-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mt-4 table table-header w-100 m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Phone\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Cust Code\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Reference\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},t(\"Email\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},t(\"NRIC\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100\"},customerOption.length>0?customerOption.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 table-body w-100 border\",onClick:function onClick(){return _this2.handleSelectCustomer(item);},key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_phone1),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_code),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_refer),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},item.cust_email),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},item.cust_nric));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"},t(\"No Data are available\")))):null);}}]);return AccountDetailsClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.customer.customerDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomer:getCustomer,getCommonApi:getCommonApi},dispatch);};export var AccountDetails=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(AccountDetailsClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/AccountDetail.js"],"names":["React","Component","Modal","filter","Appointments","PurchaseHistory","PersonalDetails","Favourites","history","classnames","Nav","NavItem","NavLink","TabContent","TabPane","NormalButton","NormalModal","InputSearch","NormalInput","NormalCheckbox","connect","bindActionCreators","getCustomer","closeIcon","Details","Account","TreatmentHistory","withTranslation","_","getCommonApi","AccountDetailsClass","state","activeTab","isOpenTreatmentDone","formFields","auto","totalOutstanding","outstanding","isActiveTab","customerOption","visible","toggle","tab","setState","props","match","params","id","then","res","console","log","handleDialog","handleTopup","handleChange","target","value","name","Object","assign","handleSearch","event","custName","debouncedFn","debounce","search","searchString","key","status","data","handleClick","document","addEventListener","handleOutsideClick","removeEventListener","basicApptDetail","prevState","e","node","contains","handleSelectCustomer","push","window","location","reload","customerDetail","t","cust_name","cust_refer","cust_img","length","map","item","index","cust_phone1","cust_code","cust_email","cust_nric","mapStateToProps","customer","mapDispatchToProps","dispatch","AccountDetails"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport Modal from \"assets/images/modal-avatar.png\";\r\nimport filter from \"assets/images/filter.png\";\r\nimport {\r\n  Appointments,\r\n  PurchaseHistory,\r\n  PersonalDetails,\r\n  Favourites,\r\n} from \"./Details\";\r\nimport { history } from \"helpers\";\r\nimport classnames from \"classnames\";\r\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from \"reactstrap\";\r\nimport {\r\n  NormalButton,\r\n  NormalModal,\r\n  InputSearch,\r\n  NormalInput,\r\n  NormalCheckbox,\r\n} from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCustomer } from \"redux/actions/customer\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { Details } from \"./Detail\";\r\nimport { Account } from \"./Account\";\r\nimport { TreatmentHistory } from \"./TreatmentHistory\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport _ from \"lodash\";\r\nimport { getCommonApi } from \"redux/actions/common\";\r\n\r\nexport class AccountDetailsClass extends Component {\r\n  state = {\r\n    activeTab: \"1\",\r\n    isOpenTreatmentDone: false,\r\n    formFields: {\r\n      auto: false,\r\n      totalOutstanding: \"\",\r\n      outstanding: \"\",\r\n    },\r\n    isActiveTab: \"detail\",\r\n    customerOption: [],\r\n    visible: false,\r\n  };\r\n\r\n  toggle = tab => {\r\n    if (this.state.activeTab !== tab) {\r\n      this.setState({\r\n        activeTab: tab,\r\n      });\r\n    }\r\n  };\r\n  componentDidMount() {\r\n    this.getCustomer();\r\n  }\r\n\r\n  getCustomer = () => {\r\n    this.props.getCustomer(this.props.match.params.id).then(res => {\r\n      console.log(res, \"asdasdfasdfasdf resssssss\");\r\n    });\r\n  };\r\n\r\n  handleDialog = () => {\r\n    let { isOpenTreatmentDone } = this.state;\r\n    isOpenTreatmentDone = false;\r\n    this.setState({\r\n      isOpenTreatmentDone,\r\n    });\r\n  };\r\n\r\n  handleTopup = () => {\r\n    let { isOpenTreatmentDone } = this.state;\r\n    isOpenTreatmentDone = true;\r\n    this.setState({\r\n      isOpenTreatmentDone,\r\n    });\r\n  };\r\n\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n    console.log(value, name, \"ghfhgfhjfkhjg\");\r\n    formFields[name] = value;\r\n\r\n    this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n  handleSearch = async event => {\r\n    // event.persist();\r\n    let { formFields, visible } = this.state;\r\n    formFields.custName = event.target.value;\r\n    await this.setState({ formFields, visible: true });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        this.search();\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  search = searchString => {\r\n    let { formFields } = this.state;\r\n    this.props\r\n      .getCommonApi(`custappt/?search=${formFields.custName}`)\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          // for (let value of data) {\r\n          //     customerList.push({ value: value.id, label: value.emp_name })\r\n          // }\r\n          this.setState({ customerOption: data });\r\n        }\r\n      });\r\n  };\r\n  handleClick = key => {\r\n    if (!this.state.visible) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    if (this.state.visible) {\r\n      let { basicApptDetail } = this.props;\r\n      this.search(basicApptDetail);\r\n    }\r\n    this.setState(prevState => ({\r\n      visible: !prevState.visible,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n  handleSelectCustomer = async data => {\r\n    await this.setState({\r\n      customerOption: [],\r\n    });\r\n    this.props.history.push(`/admin/customerplus/${data.id}/details`);\r\n    window.location.reload();\r\n    this.handleClick();\r\n  };\r\n\r\n  render() {\r\n    let { customerDetail = {}, t } = this.props;\r\n    console.log(customerDetail, \"asdasdfasdfasdf === sdfasdfagf\");\r\n    let { id, cust_name, cust_refer, cust_img } = customerDetail;\r\n    let {\r\n      isOpenTreatmentDone,\r\n      formFields,\r\n      isActiveTab,\r\n      visible,\r\n      customerOption,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"view-detail\">\r\n        <div className=\"row pb-md-4\">\r\n          <div className=\"col-md-6 head-label-nav\">\r\n            <p\r\n              className=\"category\"\r\n              onClick={() => history.push(\"/admin/customerplus\")}\r\n            >\r\n              {t(`Customer`)}\r\n            </p>\r\n            <i className=\"icon-right mx-md-3\"></i>\r\n            <p className=\"sub-category\"> {t(`Customer Details`)}</p>\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <div className=\"d-flex justify-content-end\">\r\n              <div className=\"input-container\">\r\n                <NormalInput\r\n                  placeholder=\"Search Customer..\"\r\n                  value={formFields.custName}\r\n                  name=\"custName\"\r\n                  onChange={this.handleSearch}\r\n                  onClick={this.handleClick}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"w-100 col-4 mx-2 p-0\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  className=\"col-12 fs-15 float-right\"\r\n                  label=\"Add Customer\"\r\n                  onClick={() =>\r\n                    this.props.history.push(\"/admin/customerplus/add\")\r\n                  }\r\n                />\r\n              </div>\r\n              {/* <div className=\"bg-white \">\r\n                <img src={filter} alt=\"\" />\r\n              </div> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"view-detail-box p-4 d-flex flex-column\">\r\n          <div className=\"d-flex pb-3\">\r\n            <div className=\"col-4 d-flex align-items-center\">\r\n              <div>\r\n                <img\r\n                  className=\"modal-avatar\"\r\n                  src={cust_img ? cust_img : Modal}\r\n                  alt=\"\"\r\n                  height=\"80\"\r\n                  width=\"80\"\r\n                />\r\n              </div>\r\n              <div className=\"pl-3\">\r\n                <p className=\"fs-28 fw-500 customer-detail-heading py-2\">\r\n                  {t(cust_name)}\r\n                </p>\r\n                <p className=\"fs-18 fw-500 customer-detail-heading py-2\">\r\n                  {t(cust_refer)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-6 icon-change menu-list p-0\">\r\n              <button\r\n                className={`btn outline-btn col-2 mr-1 fs-14 float-left text-capitalize detail`}\r\n                onClick={() =>\r\n                  history.push(\r\n                    `/admin/customerplus/${this.props.match.params.id}/details`\r\n                  )\r\n                }\r\n              >\r\n                {t(\"Detail\")}\r\n              </button>\r\n              <button\r\n                className={`btn outline-btn col-2 mr-1 fs-14 active float-left text-capitalize account`}\r\n                onClick={() =>\r\n                  history.push(\r\n                    `/admin/customerplus/${this.props.match.params.id}/account`\r\n                  )\r\n                }\r\n              >\r\n                {t(\"Account\")}\r\n              </button>\r\n              <button\r\n                className={`btn outline-btn col-2 mr-1 fs-14 float-left text-capitalize hold`}\r\n                onClick={() =>\r\n                  history.push(\r\n                    `/admin/customerplus/${this.props.match.params.id}/hold`\r\n                  )\r\n                }\r\n              >\r\n                {t(\"Hold\")}\r\n              </button>\r\n              <button\r\n                className={`btn outline-btn col-3 mr-1 fs-14 p-1 float-left text-capitalize invoice`}\r\n                onClick={() =>\r\n                  history.push(\r\n                    `/admin/customerplus/${this.props.match.params.id}/invoice`\r\n                  )\r\n                }\r\n              >\r\n                {t(\"Invoice History\")}\r\n              </button>\r\n              {/* <button className={`btn outline-btn col-2 mx-2 fs-14 float-left text-capitalize treatment`} onClick={() => history.push(`/admin/customerplus/${this.props.match.params.id}/treatment`)}>\r\n                                Treatment History\r\n                            </button> */}\r\n            </div>\r\n            <div className=\"col-2 icon-change edit\">\r\n              <button\r\n                className=\"btn outline-btn col-2 mx-2 fs-15 float-right text-capitalize\"\r\n                onClick={() =>\r\n                  this.props.history.push(\r\n                    `/admin/customerplus/${this.props.match.params.id}/editCustomer`\r\n                  )\r\n                }\r\n              >\r\n                <span className=\"icon-edit mr-2\"></span>\r\n                {t(`Edit`)}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <Account id={this.props.match.params.id}></Account>\r\n        </div>\r\n        {visible ? (\r\n          <div className=\"customerSearch-block\">\r\n            <div className=\"d-flex mt-4 table table-header w-100 m-0\">\r\n              <div className=\"col-2\">{t(\"Name\")}</div>\r\n              <div className=\"col-2\">{t(\"Phone\")}</div>\r\n              <div className=\"col-2\">{t(\"Cust Code\")}</div>\r\n              <div className=\"col-2\">{t(\"Reference\")}</div>\r\n              <div className=\"col-3\">{t(\"Email\")}</div>\r\n              <div className=\"col-1\">{t(\"NRIC\")}</div>\r\n            </div>\r\n            <div className=\"response-table w-100\">\r\n              {customerOption.length > 0 ? (\r\n                customerOption.map((item, index) => {\r\n                  return (\r\n                    <div\r\n                      className=\"row m-0 table-body w-100 border\"\r\n                      onClick={() => this.handleSelectCustomer(item)}\r\n                      key={index}\r\n                    >\r\n                      <div className=\"col-2\">{item.cust_name}</div>\r\n                      <div className=\"col-2\">{item.cust_phone1}</div>\r\n                      <div className=\"col-2\">{item.cust_code}</div>\r\n                      <div className=\"col-2\">{item.cust_refer}</div>\r\n                      <div className=\"col-3\">{item.cust_email}</div>\r\n                      <div className=\"col-1\">{item.cust_nric}</div>\r\n                    </div>\r\n                  );\r\n                })\r\n              ) : (\r\n                <div className=\"text-center w-100\">\r\n                  {t(\"No Data are available\")}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => ({\r\n  customerDetail: state.customer.customerDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCustomer,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const AccountDetails = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(AccountDetailsClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}