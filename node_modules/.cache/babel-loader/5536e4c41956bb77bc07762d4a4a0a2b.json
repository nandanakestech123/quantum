{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\Cart\\\\cart\\\\ItemDiscountPopup.js\";\nimport React, { Component } from \"react\";\nimport { NormalInput, NormalButton, TableWrapper, NormalSelect, NormalTextarea, NormalCheckbox } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, commonUpdateApi, commonPatchApi } from \"redux/actions/common\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { Toast } from \"service/toast\";\nimport \"./style.scss\";\nexport class ItemDiscountPopupClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      item_data: {\n        item_name: \"\"\n      },\n      quantity: 0,\n      discount_reason_options: [],\n      discount_reason: null,\n      discount_reasons: [],\n      unit_price: 0,\n      unit_price_after_discount: 0,\n      total_after_discount: 0,\n      deposit: 0,\n      discount: 0,\n      is_percentage: \"\",\n      discountFields: {\n        discount: 0,\n        discount_amt: 0,\n        disc_reason: \"\",\n        discreason_txt: null\n      },\n      discount_price_txt: \"\",\n      discType: [{\n        value: 1,\n        label: \"%\"\n      }, {\n        value: 2,\n        label: \"$\"\n      }]\n    };\n\n    this.componentWillMount = () => {\n      this.validator = new SimpleReactValidator({\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message text-danger validNo fs14\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 9\n          }\n        }, message),\n        autoForceUpdate: this\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.getDiscountInfo();\n      this.getDiscountReasons();\n    };\n\n    this.handleClear = () => {\n      this.setState({\n        item_data: {\n          item_name: \"\"\n        },\n        quantity: 0,\n        discount_reason_options: [],\n        discount_reason: null,\n        unit_price: 0,\n        unit_price_after_discount: 0,\n        total_after_discount: 0,\n        deposit: 0,\n        discount: 0,\n        discountFields: {\n          discount: 0,\n          discount_amt: 0,\n          disc_reason: \"\",\n          discreason_txt: null\n        },\n        discount_price_txt: \"\",\n        is_percentage: \"\"\n      });\n    };\n\n    this.getDiscountReasons = () => {\n      let {\n        discount_reason_options\n      } = this.state;\n      this.props.getCommonApi(`paymentremarks/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            discount_reason_options.push({\n              value: value.id,\n              label: value.r_desc\n            });\n          }\n\n          this.setState({\n            discount_reason_options\n          });\n        }\n      });\n    };\n\n    this.getDiscountInfo = () => {\n      let {\n        item_data,\n        quantity,\n        unit_price,\n        unit_price_after_discount,\n        deposit,\n        total_after_discount,\n        discount_reasons\n      } = this.state;\n      this.props.getCommonApi(`cartpopup/${this.props.cartId}/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n        console.log(data, \"cartdiscountdatapopup\");\n\n        if (status == \"200\") {\n          item_data[\"item_name\"] = data.itemdesc;\n          quantity = data.quantity;\n          unit_price = data.price;\n          unit_price_after_discount = data.discount_price;\n          deposit = data.deposit;\n          total_after_discount = data.trans_amt;\n          discount_reasons = data.disc_lst;\n          this.setState({\n            item_data,\n            quantity,\n            unit_price,\n            unit_price_after_discount,\n            deposit,\n            total_after_discount,\n            discount_reasons\n          });\n        }\n      });\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        discountFields,\n        deposit,\n        discount_price_txt,\n        is_percentage\n      } = this.state;\n      discountFields[name] = value;\n\n      if (name === \"discount_price_txt\") {\n        discount_price_txt = value;\n        this.setState({\n          discount_price_txt\n        });\n      }\n\n      if (name == \"is_percentage\") {\n        is_percentage = value;\n        this.setState({\n          is_percentage\n        });\n      }\n\n      if (name === \"disc_reason\" && Number(value) !== 182) {\n        discountFields[\"discreason_txt\"] = \"\";\n        this.setState({\n          discountFields\n        });\n      }\n\n      await this.setState({\n        discountFields\n      });\n\n      if (name === \"deposit\") {\n        deposit = value;\n        this.setState({\n          deposit\n        });\n      }\n    };\n\n    this.handleApply = async () => {\n      debugger;\n      let {\n        discountFields,\n        unit_price_after_discount,\n        discount_price_txt,\n        is_percentage\n      } = this.state;\n\n      if (Number(discount_price_txt) > 0) {\n        if (Number(is_percentage) == 1) {\n          if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\n            if (Number(discountFields.disc_reason) != 182 || Number(discountFields.disc_reason) == 182 && discountFields.discreason_txt != \"\") {\n              discountFields[\"discount_amt\"] = Number(Number(unit_price_after_discount).toFixed(2) / 100 * Number(discount_price_txt)).toFixed(2);\n              discountFields[\"discount\"] = Number(Number(discountFields[\"discount_amt\"]).toFixed(2) / Number(unit_price_after_discount).toFixed(2) * 100).toFixed(2);\n              await this.setState({\n                discountFields\n              });\n            } else {\n              Toast({\n                type: \"error\",\n                message: \"Please Enter Discount Reason Text\"\n              });\n              return false;\n            }\n          } else {\n            Toast({\n              type: \"error\",\n              message: \"Please select Discount Reason\"\n            });\n            return false;\n          }\n        } else if (Number(is_percentage) == 2) {\n          if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\n            if (Number(discountFields.disc_reason) != 182 || Number(discountFields.disc_reason) == 182 && discountFields.discreason_txt != \"\") {\n              discountFields[\"discount_amt\"] = Number(discount_price_txt).toFixed(2);\n              discountFields[\"discount\"] = null;\n              await this.setState({\n                discountFields\n              });\n            } else {\n              Toast({\n                type: \"error\",\n                message: \"Please Enter Discount Reason Text\"\n              });\n              return false;\n            }\n          } else {\n            Toast({\n              type: \"error\",\n              message: \"Please select Discount Reason\"\n            });\n            return false;\n          }\n        } else {\n          Toast({\n            type: \"error\",\n            message: \"Please select Discount Type\"\n          });\n          return false;\n        }\n\n        let body = {\n          discount: Number(discountFields.discount),\n          discount_amt: Number(discountFields.discount_amt),\n          disc_reason: Number(discountFields.disc_reason),\n          discreason_txt: discountFields.discreason_txt\n        };\n        this.props.commonUpdateApi(`itemcart/${this.props.cartId}/?disc_add=1&disc_reset=0`, body).then(key => {\n          this.handleClear();\n          this.getDiscountInfo();\n          this.getDiscountReasons();\n        });\n      } else {\n        Toast({\n          type: \"error\",\n          message: \"Discount should be greater than zero\"\n        });\n        return false;\n      }\n    };\n\n    this.handleReset = async () => {\n      let {\n        discountFields\n      } = this.state;\n      let body = {\n        discount: Number(discountFields.discount),\n        discount_amt: Number(discountFields.discount_amt),\n        disc_reason: Number(discountFields.disc_reason),\n        discreason_txt: discountFields.discreason_txt\n      };\n      this.props.commonUpdateApi(`itemcart/${this.props.cartId}/?disc_add=0&disc_reset=1`, body).then(key => {\n        this.handleClear();\n        this.getDiscountInfo();\n        this.getDiscountReasons();\n      });\n    };\n\n    this.handleSubmit = () => {\n      let {\n        deposit,\n        total_after_discount\n      } = this.state;\n      let body = {};\n\n      if (Number(deposit).toFixed(2) > Number(total_after_discount).toFixed(2)) {\n        Toast({\n          type: \"error\",\n          message: \"Deposit amount should be less than or equal to transaction amount\"\n        });\n      } else {\n        body = {\n          deposit: Number(deposit).toFixed(2)\n        };\n        this.props.commonPatchApi(`cartpopup/${this.props.cartId}/`, body).then(key => {\n          let {\n            status\n          } = key;\n          console.log(key, \"response for submit\");\n\n          if (status == \"200\") {\n            this.props.handleModal();\n          }\n        });\n      }\n    };\n  }\n\n  render() {\n    let {\n      item_data,\n      quantity,\n      unit_price,\n      is_percentage,\n      deposit,\n      discount_reason_options,\n      discount_reasons,\n      total_after_discount,\n      unit_price_after_discount,\n      discountFields,\n      discount_price_txt,\n      discType\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-9 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"text-secondary fs-18\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 15\n      }\n    }, \"Item Discount\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 15\n      }\n    }, item_data.item_name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: false,\n      className: \"col-12 fs-15 submit-btn\",\n      label: \"Submit\",\n      onClick: () => this.handleSubmit(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row pl-5 pr-5 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 17\n      }\n    }, \"Quantity\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: quantity,\n      type: \"number\",\n      name: \"quantity\",\n      onChange: () => {},\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 17\n      }\n    }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: unit_price,\n      type: \"number\",\n      name: \"unit_price\",\n      onChange: () => {},\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 17\n      }\n    }, \"Discount\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"\",\n      value: discount_price_txt,\n      type: \"number\",\n      name: \"discount_price_txt\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 19\n      }\n    }, \"Type\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      className: `col`,\n      options: discType,\n      value: is_percentage,\n      name: \"is_percentage\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 21\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row w-100 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 17\n      }\n    }, \"Discount Reason\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: discount_reason_options,\n      value: discountFields.disc_reason,\n      name: \"disc_reason\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 19\n      }\n    })), this.validator.message(\"discount reason\", discountFields.disc_reason, \"required\")), discountFields.disc_reason == \"182\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 19\n      }\n    }, \"Discount reason\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalTextarea, {\n      value: discountFields.discreason_txt,\n      name: \"discreason_txt\",\n      onChange: this.handleChange,\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 21\n      }\n    }), this.validator.message(\"discount reason\", discountFields.discreason_txt, \"required\"))) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12 mt-4 pt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col\",\n      label: \"Apply\",\n      onClick: this.handleApply,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12 mt-4 pt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col\",\n      label: \"Reset\",\n      onClick: this.handleReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row w-100 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 17\n      }\n    }, \"Discount List\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-12 w-100 bg-light p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 17\n      }\n    }, discount_reasons && discount_reasons.length > 0 && discount_reasons.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"text-left text-black common-label-text fs-17 pb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 29\n        }\n      }, item.remark)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"text-left text-black common-label-text fs-17 pb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 29\n        }\n      }, item.disc_per, \" %\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"text-left text-black common-label-text fs-17 pb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 29\n        }\n      }, \"$ \", item.disc_amt)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(NormalCheckbox, {\n        name: \"transac\",\n        label: \"Trans.\",\n        checked: item.transac,\n        value: item.transac,\n        onChange: () => {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 29\n        }\n      })));\n    }), !discount_reasons || discount_reasons.length <= 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 21\n      }\n    }, \"No record found\") : null))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row w-100 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 17\n      }\n    }, \"Unit Price After Discount\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 17\n      }\n    }, unit_price_after_discount))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row w-100 mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 17\n      }\n    }, \"Total After Discount\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 17\n      }\n    }, quantity, \" * \", unit_price_after_discount)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 17\n      }\n    }, total_after_discount))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row w-100 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 17\n      }\n    }, \"Deposit\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: deposit,\n      name: \"deposit\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  basicApptDetail: state.appointment.basicApptDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    commonUpdateApi,\n    commonPatchApi\n  }, dispatch);\n};\n\nexport const ItemDiscountPopup = connect(mapStateToProps, mapDispatchToProps)(ItemDiscountPopupClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/cart/ItemDiscountPopup.js"],"names":["React","Component","NormalInput","NormalButton","TableWrapper","NormalSelect","NormalTextarea","NormalCheckbox","connect","bindActionCreators","getCommonApi","commonUpdateApi","commonPatchApi","SimpleReactValidator","Toast","ItemDiscountPopupClass","state","item_data","item_name","quantity","discount_reason_options","discount_reason","discount_reasons","unit_price","unit_price_after_discount","total_after_discount","deposit","discount","is_percentage","discountFields","discount_amt","disc_reason","discreason_txt","discount_price_txt","discType","value","label","componentWillMount","validator","element","message","autoForceUpdate","componentDidMount","getDiscountInfo","getDiscountReasons","handleClear","setState","props","then","key","status","data","push","id","r_desc","cartId","console","log","itemdesc","price","discount_price","trans_amt","disc_lst","handleChange","target","name","Number","handleApply","toFixed","type","body","handleReset","handleSubmit","handleModal","render","length","map","item","index","remark","disc_per","disc_amt","transac","mapStateToProps","basicApptDetail","appointment","mapDispatchToProps","dispatch","ItemDiscountPopup"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  NormalInput,\n  NormalButton,\n  TableWrapper,\n  NormalSelect,\n  NormalTextarea,\n  NormalCheckbox,\n} from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport {\n  getCommonApi,\n  commonUpdateApi,\n  commonPatchApi,\n} from \"redux/actions/common\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { Toast } from \"service/toast\";\nimport \"./style.scss\";\n\nexport class ItemDiscountPopupClass extends Component {\n  state = {\n    item_data: {\n      item_name: \"\",\n    },\n    quantity: 0,\n    discount_reason_options: [],\n    discount_reason: null,\n    discount_reasons: [],\n    unit_price: 0,\n    unit_price_after_discount: 0,\n    total_after_discount: 0,\n    deposit: 0,\n    discount: 0,\n    is_percentage: \"\",\n    discountFields: {\n      discount: 0,\n      discount_amt: 0,\n      disc_reason: \"\",\n      discreason_txt: null,\n    },\n    discount_price_txt: \"\",\n    discType: [\n      { value: 1, label: \"%\" },\n      { value: 2, label: \"$\" },\n    ],\n  };\n  componentWillMount = () => {\n    this.validator = new SimpleReactValidator({\n      element: message => (\n        <span className=\"error-message text-danger validNo fs14\">\n          {message}\n        </span>\n      ),\n      autoForceUpdate: this,\n    });\n  };\n  componentDidMount = () => {\n    this.getDiscountInfo();\n    this.getDiscountReasons();\n  };\n  handleClear = () => {\n    this.setState({\n      item_data: {\n        item_name: \"\",\n      },\n      quantity: 0,\n      discount_reason_options: [],\n      discount_reason: null,\n      unit_price: 0,\n      unit_price_after_discount: 0,\n      total_after_discount: 0,\n      deposit: 0,\n      discount: 0,\n      discountFields: {\n        discount: 0,\n        discount_amt: 0,\n        disc_reason: \"\",\n        discreason_txt: null,\n      },\n      discount_price_txt: \"\",\n      is_percentage: \"\",\n    });\n  };\n  getDiscountReasons = () => {\n    let { discount_reason_options } = this.state;\n\n    this.props.getCommonApi(`paymentremarks/`).then(key => {\n      let { status, data } = key;\n      if (status === 200) {\n        for (let value of data) {\n          discount_reason_options.push({\n            value: value.id,\n            label: value.r_desc,\n          });\n        }\n        this.setState({ discount_reason_options });\n      }\n    });\n  };\n  getDiscountInfo = () => {\n    let {\n      item_data,\n      quantity,\n      unit_price,\n      unit_price_after_discount,\n      deposit,\n      total_after_discount,\n      discount_reasons,\n    } = this.state;\n    this.props.getCommonApi(`cartpopup/${this.props.cartId}/`).then(key => {\n      let { status, data } = key;\n      console.log(data, \"cartdiscountdatapopup\");\n      if (status == \"200\") {\n        item_data[\"item_name\"] = data.itemdesc;\n        quantity = data.quantity;\n        unit_price = data.price;\n        unit_price_after_discount = data.discount_price;\n        deposit = data.deposit;\n        total_after_discount = data.trans_amt;\n        discount_reasons = data.disc_lst;\n        this.setState({\n          item_data,\n          quantity,\n          unit_price,\n          unit_price_after_discount,\n          deposit,\n          total_after_discount,\n          discount_reasons,\n        });\n      }\n    });\n  };\n\n  handleChange = async ({ target: { value, name } }) => {\n    let { discountFields, deposit, discount_price_txt, is_percentage } =\n      this.state;\n    discountFields[name] = value;\n\n    if (name === \"discount_price_txt\") {\n      discount_price_txt = value;\n      this.setState({\n        discount_price_txt,\n      });\n    }\n    if (name == \"is_percentage\") {\n      is_percentage = value;\n      this.setState({\n        is_percentage,\n      });\n    }\n    if (name === \"disc_reason\" && Number(value) !== 182) {\n      discountFields[\"discreason_txt\"] = \"\";\n      this.setState({\n        discountFields,\n      });\n    }\n    await this.setState({\n      discountFields,\n    });\n\n    if (name === \"deposit\") {\n      deposit = value;\n\n      this.setState({\n        deposit,\n      });\n    }\n  };\n  handleApply = async () => {\n    debugger;\n    let {\n      discountFields,\n      unit_price_after_discount,\n      discount_price_txt,\n      is_percentage,\n    } = this.state;\n    if (Number(discount_price_txt) > 0) {\n      if (Number(is_percentage) == 1) {\n        if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\n          if (\n            Number(discountFields.disc_reason) != 182 ||\n            (Number(discountFields.disc_reason) == 182 &&\n              discountFields.discreason_txt != \"\")\n          ) {\n            discountFields[\"discount_amt\"] = Number(\n              (Number(unit_price_after_discount).toFixed(2) / 100) *\n                Number(discount_price_txt)\n            ).toFixed(2);\n\n            discountFields[\"discount\"] = Number(\n              (Number(discountFields[\"discount_amt\"]).toFixed(2) /\n                Number(unit_price_after_discount).toFixed(2)) *\n                100\n            ).toFixed(2);\n            await this.setState({ discountFields });\n          } else {\n            Toast({\n              type: \"error\",\n              message: \"Please Enter Discount Reason Text\",\n            });\n            return false;\n          }\n        } else {\n          Toast({\n            type: \"error\",\n            message: \"Please select Discount Reason\",\n          });\n          return false;\n        }\n      } else if (Number(is_percentage) == 2) {\n        if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\n          if (\n            Number(discountFields.disc_reason) != 182 ||\n            (Number(discountFields.disc_reason) == 182 &&\n              discountFields.discreason_txt != \"\")\n          ) {\n            discountFields[\"discount_amt\"] =\n              Number(discount_price_txt).toFixed(2);\n            discountFields[\"discount\"] = null;\n            await this.setState({ discountFields });\n          } else {\n            Toast({\n              type: \"error\",\n              message: \"Please Enter Discount Reason Text\",\n            });\n            return false;\n          }\n        } else {\n          Toast({\n            type: \"error\",\n            message: \"Please select Discount Reason\",\n          });\n          return false;\n        }\n      } else {\n        Toast({\n          type: \"error\",\n          message: \"Please select Discount Type\",\n        });\n        return false;\n      }\n      let body = {\n        discount: Number(discountFields.discount),\n        discount_amt: Number(discountFields.discount_amt),\n        disc_reason: Number(discountFields.disc_reason),\n        discreason_txt: discountFields.discreason_txt,\n      };\n      this.props\n        .commonUpdateApi(\n          `itemcart/${this.props.cartId}/?disc_add=1&disc_reset=0`,\n          body\n        )\n        .then(key => {\n          this.handleClear();\n          this.getDiscountInfo();\n          this.getDiscountReasons();\n        });\n    } else {\n      Toast({\n        type: \"error\",\n        message: \"Discount should be greater than zero\",\n      });\n      return false;\n    }\n  };\n  // handleApply = async () => {\n  //   debugger;\n  //   let {\n  //     discountFields,\n  //     unit_price_after_discount,\n  //     discount_price_txt,\n  //     is_percentage,\n  //   } = this.state;\n\n  //   if (this.validator.allValid()) {\n  //     if (Number(discount_price_txt) > 0) {\n  //       if (is_percentage) {\n  //         discountFields[\"discount_amt\"] = Number(\n  //           (unit_price_after_discount / 100) * Number(discount_price_txt)\n  //         ).toFixed(2);\n\n  //         discountFields[\"discount\"] = Number(\n  //           (discountFields[\"discount_amt\"] / unit_price_after_discount) * 100\n  //         ).toFixed(2);\n  //         await this.setState({ discountFields });\n  //       }\n  //       if (!is_percentage) {\n  //         discountFields[\"discount_amt\"] =\n  //           Number(discount_price_txt).toFixed(2);\n  //         discountFields[\"discount\"] = null;\n  //         await this.setState({ discountFields });\n  //       }\n  //     } else {\n  //       Toast({\n  //         type: \"error\",\n  //         message: \"Discount should be greater than zero\",\n  //       });\n  //       return false;\n  //     }\n  //     this.props\n  //       .commonUpdateApi(\n  //         `itemcart/${this.props.cartId}/?disc_add=1&disc_reset=0`,\n  //         discountFields\n  //       )\n  //       .then(key => {\n  //         this.handleClear();\n  //         this.getDiscountInfo();\n  //         this.getDiscountReasons();\n  //       });\n  //   } else {\n  //     this.validator.showMessages();\n  //   }\n  // };\n  handleReset = async () => {\n    let { discountFields } = this.state;\n    let body = {\n      discount: Number(discountFields.discount),\n      discount_amt: Number(discountFields.discount_amt),\n      disc_reason: Number(discountFields.disc_reason),\n      discreason_txt: discountFields.discreason_txt,\n    };\n    this.props\n      .commonUpdateApi(\n        `itemcart/${this.props.cartId}/?disc_add=0&disc_reset=1`,\n        body\n      )\n      .then(key => {\n        this.handleClear();\n        this.getDiscountInfo();\n        this.getDiscountReasons();\n      });\n  };\n  handleSubmit = () => {\n    let { deposit, total_after_discount } = this.state;\n    let body = {};\n    if (Number(deposit).toFixed(2) > Number(total_after_discount).toFixed(2)) {\n      Toast({\n        type: \"error\",\n        message:\n          \"Deposit amount should be less than or equal to transaction amount\",\n      });\n    } else {\n      body = {\n        deposit: Number(deposit).toFixed(2),\n      };\n      this.props\n        .commonPatchApi(\n          `cartpopup/${this.props.cartId}/`,\n\n          body\n        )\n        .then(key => {\n          let { status } = key;\n          console.log(key, \"response for submit\");\n          if (status == \"200\") {\n            this.props.handleModal();\n          }\n        });\n    }\n  };\n\n  render() {\n    let {\n      item_data,\n      quantity,\n      unit_price,\n      is_percentage,\n      deposit,\n      discount_reason_options,\n      discount_reasons,\n      total_after_discount,\n      unit_price_after_discount,\n      discountFields,\n      discount_price_txt,\n      discType,\n    } = this.state;\n    return (\n      <>\n        <div className=\"container-fluid mb-4\">\n          <div className=\"row pl-3\">\n            <div className=\"col-md-9 col-12\">\n              <h6 className=\"text-secondary fs-18\">Item Discount</h6>\n\n              <h4>{item_data.item_name}</h4>\n            </div>\n            <div className=\"col-md-2 col-12\">\n              <NormalButton\n                mainbg={false}\n                className=\"col-12 fs-15 submit-btn\"\n                label=\"Submit\"\n                onClick={() => this.handleSubmit()}\n              />\n            </div>\n          </div>\n          <div className=\"row pl-5 pr-5 mt-4\">\n            <div className=\"row mb-3\">\n              <div className=\"col-md-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  Quantity\n                </label>\n                <div className=\"input-group\">\n                  <NormalInput\n                    placeholder=\"Enter here\"\n                    value={quantity}\n                    type=\"number\"\n                    name=\"quantity\"\n                    onChange={() => {}}\n                    disabled\n                  />\n                </div>\n              </div>\n              <div className=\"col-md-4 col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  Unit Price\n                </label>\n                <div className=\"input-group\">\n                  <NormalInput\n                    placeholder=\"Enter here\"\n                    value={unit_price}\n                    type=\"number\"\n                    name=\"unit_price\"\n                    onChange={() => {}}\n                    disabled\n                  />\n                </div>\n              </div>\n\n              <div className=\"col-md-2 col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  Discount\n                </label>\n                <div className=\"input-group\">\n                  <NormalInput\n                    placeholder=\"\"\n                    value={discount_price_txt}\n                    type=\"number\"\n                    name=\"discount_price_txt\"\n                    onChange={this.handleChange}\n                  />\n\n                  {/* <NormalButton\n                    mainbg={!is_percentage}\n                    className=\"col h-100\"\n                    label=\"$\"\n                    onClick={() =>\n                      this.setState({ is_percentage: !is_percentage })\n                    }\n                  />\n                  <NormalButton\n                    mainbg={is_percentage}\n                    className=\"col h-100\"\n                    label=\"%\"\n                    onClick={async () =>\n                      await this.setState({ is_percentage: !is_percentage })\n                    }\n                  />  */}\n                </div>\n              </div>\n              <div className=\"col-md-2 col-12\">\n                <div className=\"row\">\n                  <label className=\"text-left text-black common-label-text pb-2\">\n                    Type\n                  </label>\n                  <div className=\"input-group\">\n                    <NormalSelect\n                      className={`col`}\n                      options={discType}\n                      value={is_percentage}\n                      name=\"is_percentage\"\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"row w-100 mb-3\">\n              <div className=\"col-md-4 col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  Discount Reason\n                </label>\n                <div className=\"input-group\">\n                  <NormalSelect\n                    options={discount_reason_options}\n                    value={discountFields.disc_reason}\n                    name=\"disc_reason\"\n                    onChange={this.handleChange}\n                  />\n                </div>\n                {this.validator.message(\n                  \"discount reason\",\n                  discountFields.disc_reason,\n                  \"required\"\n                )}\n              </div>\n              {discountFields.disc_reason == \"182\" ? (\n                <div className=\"col-md-4 col-12\">\n                  <label className=\"text-left text-black common-label-text \">\n                    Discount reason\n                  </label>\n                  <div className=\"input-group mb-2\">\n                    <NormalTextarea\n                      value={discountFields.discreason_txt}\n                      name=\"discreason_txt\"\n                      onChange={this.handleChange}\n                      className=\"w-100\"\n                    />\n                    {this.validator.message(\n                      \"discount reason\",\n                      discountFields.discreason_txt,\n                      \"required\"\n                    )}\n                  </div>\n                </div>\n              ) : (\n                \"\"\n              )}\n              <div className=\"col-md-2 col-12 mt-4 pt-3\">\n                <NormalButton\n                  mainbg={true}\n                  className=\"col\"\n                  label=\"Apply\"\n                  onClick={this.handleApply}\n                />\n              </div>\n              <div className=\"col-md-2 col-12 mt-4 pt-3\">\n                <NormalButton\n                  mainbg={true}\n                  className=\"col\"\n                  label=\"Reset\"\n                  onClick={this.handleReset}\n                />\n              </div>\n            </div>\n            <div className=\"row w-100 mt-4\">\n              <div className=\"col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  Discount List\n                </label>\n                <div className=\"col-md-12 col-12 w-100 bg-light p-3 border\">\n                  {discount_reasons &&\n                    discount_reasons.length > 0 &&\n                    discount_reasons.map((item, index) => {\n                      return (\n                        <div className=\"row\" key={index}>\n                          <div className=\"col-6\">\n                            <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                              {item.remark}\n                            </label>\n                          </div>\n                          <div className=\"col-2\">\n                            <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                              {item.disc_per} %\n                            </label>\n                          </div>\n                          <div className=\"col-2\">\n                            <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                              $ {item.disc_amt}\n                            </label>\n                          </div>\n                          <div className=\"col-2\">\n                            <NormalCheckbox\n                              name=\"transac\"\n                              label=\"Trans.\"\n                              checked={item.transac}\n                              value={item.transac}\n                              onChange={() => {}}\n                            />\n                          </div>\n                        </div>\n                      );\n                    })}\n                  {!discount_reasons || discount_reasons.length <= 0 ? (\n                    <div className=\"row\">No record found</div>\n                  ) : null}\n                </div>\n              </div>\n            </div>\n            <div className=\"row w-100 mt-5\">\n              <div className=\"col-md-8 col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  Unit Price After Discount\n                </label>\n              </div>\n              <div className=\"col-md-4 col-12 \">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  {unit_price_after_discount}\n                </label>\n              </div>\n            </div>\n            <div className=\"row w-100 mt-2\">\n              <div className=\"col-md-4 col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  Total After Discount\n                </label>\n              </div>\n              <div className=\"col-md-4 col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  {quantity} * {unit_price_after_discount}\n                </label>\n              </div>\n              <div className=\"col-md-4 col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  {total_after_discount}\n                </label>\n              </div>\n            </div>\n            <div className=\"row w-100 mt-4\">\n              <div className=\"col-md-8 col-12\">\n                <h6>Deposit</h6>\n              </div>\n              <div className=\"col-md-4 col-12\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                  <NormalInput\n                    value={deposit}\n                    name=\"deposit\"\n                    onChange={this.handleChange}\n                  />\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  basicApptDetail: state.appointment.basicApptDetail,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      getCommonApi,\n      commonUpdateApi,\n      commonPatchApi,\n    },\n    dispatch\n  );\n};\nexport const ItemDiscountPopup = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ItemDiscountPopupClass);\n"]},"metadata":{},"sourceType":"module"}