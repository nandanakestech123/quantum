{"ast":null,"code":"import _toConsumableArray from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalButton,NormalSelect,NormalModal}from\"component/common\";import{getPayment,createPayment}from\"redux/actions/payment\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{history}from\"helpers\";import{getCommonApi}from\"redux/actions/common\";import{dateFormat}from\"service/helperFunctions\";import\"./style.scss\";import SimpleReactValidator from\"simple-react-validator\";import Label from\"reactstrap/lib/Label\";import closeIcon from\"assets/images/close.png\";import deleteIcon from\"assets/images/delete.jpg\";import helpers from\"../../../../service/Helper\";var moment=require(\"moment\");export var MakePaymentClass=/*#__PURE__*/function(_Component){_inherits(MakePaymentClass,_Component);var _super=_createSuper(MakePaymentClass);function MakePaymentClass(){var _this;_classCallCheck(this,MakePaymentClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{name:\"\",contact:\"\",address:\"\",searchStaff:\"\",payTableDropDownValue:\"\"},responseData:{},premisesOption:[],selectedCards:[],selectedCardsPayAmount:0,cardOption:[],ewalletoptions:[],ewalletField:{pay_typeid:null,pay_amt:\"\",credit_debit:true},cardField:{pay_typeid:null,pay_amt:\"\",credit_debit:true,pay_rem1:\"\",pay_rem2:\"\",pay_rem3:\"\",pay_rem4:\"\"},balance:0,errorMessage:\"123\",prepaidCustomerData:[],voucherCustomerData:[],creditNoteCustomerData:[],accountHeader:[],isMakePaymentButtonClicked:\"false\",isTreatmentDoneButton:true,itemProductAmount:0,itemServiceAmount:0,itemProductServiceVoucherAmount:0,displayTablePrepaid:[],displayTableCreditNote:[],displayTableVoucher:[],paytableData:[],paytableFullData:[],payGroupData:[],selectPaymentGroup:\"\",selectPaymentGroupId:\"\",isSelectedPaymentType:\"\",displayModelPaymentType:\"\",txtUserPayAmount:0,isOpenSubPayment:false};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});};_this.getPayment=function(){var _this$props=_this.props,id=_this$props.id,cartId=_this$props.cartId,cartData=_this$props.cartData;//id = 82318;\n//cartId = \"ICMD100226\";\n//cartData={\"status\":200,\"message\":\"Listed Succesfully\",\"error\":false,\"data\":[{\"id\":57500,\"cust_noid\":82318,\"customer\":\"test17011\",\"customercode\":\"021427HQ\",\"cart_id\":\"ICHQ100234\",\"cart_date\":\"2021-03-14\",\"cart_status\":\"Inprogress\",\"lineno\":1,\"check\":\"New\",\"itemcodeid\":10067,\"itemdesc\":\"Short - Chin Length(Before Shoulder) 128\",\"quantity\":1,\"price\":\"128.00\",\"total_price\":\"128.00\",\"sitecodeid\":31,\"sitecode_name\":\"HQ OFFICE (DEMO)\",\"sitecode\":\"HQ\",\"discount\":\"0.00\",\"discount_amt\":0,\"discount_price\":\"128.00\",\"additional_discount\":0,\"additional_discountamt\":0,\"deposit\":\"128.00\",\"trans_amt\":\"128.00\",\"tax\":0,\"itemstatus\":null,\"ratio\":\"100.000000000000000\",\"helper_name\":null,\"done_sessions\":null,\"type\":\"Deposit\",\"treatment_account\":null,\"treatment\":null,\"deposit_account\":null,\"prepaid_account\":null,\"item_uom\":null,\"recorddetail\":\"Service\",\"itemtype\":\"SINGLE\",\"item_class\":\"HERBAL TREATMENT\",\"sales_staff\":\"SEQ ADMIN\",\"service_staff\":\"\",\"total_disc\":\"0.00\",\"treatment_name\":\"Short - Chin Length(Before Shoulder) 128  (1)\",\"item_name\":\"Short - Chin Length(Before Shoulder) 128\"}],\"subtotal\":\"128.00\",\"discount\":\"0.00\",\"trans_amt\":\"128.00\",\"deposit_amt\":\"128.00\",\"billable_amount\":\"128.00\"}\nif(id){_this.props.getPayment(\"?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(id,\"&cart_id=\").concat(cartId)).then(function(res){_this.setState({responseData:res.data,balance:Number(res.data.billable_amount),txtUserPayAmount:Number(res.data.billable_amount)});});}else{// history.push(\"/admin/cart\");\n}//let {cartData} = this.props;\nvar stringifiedCartData=cartData.data;var _this$state=_this.state,itemProductAmount=_this$state.itemProductAmount,itemServiceAmount=_this$state.itemServiceAmount,itemProductServiceVoucherAmount=_this$state.itemProductServiceVoucherAmount;if(stringifiedCartData){stringifiedCartData.map(function(item){//alert(JSON.stringify(item));\nif(item.recorddetail===\"Product\"){itemProductAmount+=parseFloat(item.total_price);}if(item.recorddetail===\"Service\"){itemServiceAmount+=parseFloat(item.total_price);}if(item.recorddetail===\"Product\"||item.recorddetail===\"Service\"||item.recorddetail===\"Voucher\"){itemProductServiceVoucherAmount+=parseFloat(item.total_price);}});}_this.setState({itemProductAmount:itemProductAmount,itemServiceAmount:itemServiceAmount,itemProductServiceVoucherAmount:itemProductServiceVoucherAmount});};_this.getPrepaidData=function(){_this.getPrepaidAccountData(\"\");};_this.getVoucherData=function(api){_this.props.getCommonApi(\"voucher/?cust_id=\".concat(_this.props.id).concat(api)).then(function(key){var data=key.data;var voucherCustomerData=_this.state.voucherCustomerData;voucherCustomerData=data;console.log(\"voucherCustomerData\",data);// accountHeader = header_data;\n_this.setState({voucherCustomerData:voucherCustomerData},function(){console.log(\"test\");_this.HideVoucherTableData();});});};_this.getPrepaidAccountData=function(api){_this.props.getCommonApi(\"prepaidacclist/?cust_id=\".concat(_this.props.id).concat(api)).then(function(key){var data=key.data;var prepaidCustomerData=_this.state.prepaidCustomerData;prepaidCustomerData=data;console.log(\"prepaidCustomerData\",data);// accountHeader = header_data;\n_this.setState({prepaidCustomerData:prepaidCustomerData},function(){_this.HidePrepaidTableData();});});};_this.getCreditNoteAccountData=function(api){_this.props.getCommonApi(\"creditnotelist/?cust_id=\".concat(_this.props.id).concat(api)).then(function(key){var data=key.data;var creditNoteCustomerData=_this.state.creditNoteCustomerData;creditNoteCustomerData=data;// accountHeader = header_data;\n_this.setState({creditNoteCustomerData:creditNoteCustomerData},function(){_this.HideCreditNoteTableData();});});};_this.getPayGroup=function(){_this.props.getCommonApi(\"paygroup/\").then(function(res){var payGroupData=_this.state.payGroupData;var _iterator=_createForOfIteratorHelper(res.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;payGroupData.push({label:key.pay_group_code,value:key.id,picturelocation:key.picturelocation});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({payGroupData:payGroupData});});};_this.getFullPayTable=function(){_this.props.getCommonApi(\"paytablenew/\").then(function(res){var paytableFullData=_this.state.paytableFullData;paytableFullData=res.data;_this.setState({paytableFullData:paytableFullData});});};_this.getPayTableNameBasedOnId=function(payTableId){var paytableFullData=_this.state.paytableFullData;var test=paytableFullData.filter(function(res){return res.id==payTableId;});return test[0].pay_description;};_this.handleChange=function(_ref){var _ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields});var _this$state2=_this.state,balance=_this$state2.balance,selectedCards=_this$state2.selectedCards,txtUserPayAmount=_this$state2.txtUserPayAmount,isOpenSubPayment=_this$state2.isOpenSubPayment;isOpenSubPayment=false;selectedCards.push({pay_typeid:value,pay_amt:parseFloat(txtUserPayAmount),credit_debit:false,pay_premise:true,prepaid:false});balance=parseFloat(balance-txtUserPayAmount).toFixed(2);txtUserPayAmount=balance;_this.setState({txtUserPayAmount:txtUserPayAmount,balance:balance,isOpenSubPayment:isOpenSubPayment});};_this.handleCreditChange=function(_ref2){var _ref2$target=_ref2.target,value=_ref2$target.value,name=_ref2$target.name;var cardField=Object.assign({},_this.state.cardField);cardField[name]=value;_this.setState({cardField:cardField});};_this.handleTreatmentDone=function(){var selectedCards=_this.state.selectedCards;selectedCards.push({pay_typeid:2,pay_amt:0,credit_debit:false,pay_premise:true,prepaid:false});var data=selectedCards;var _this$props2=_this.props,id=_this$props2.id,cartId=_this$props2.cartId;_this.props.createPayment(\"?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(id,\"&cart_id=\").concat(cartId),data).then(function(res){history.push(\"/admin/billing/print/bill/\".concat(res.data.sa_transacno));});};_this.handleSubmit=function(){var selectedCards=_this.state.selectedCards;_this.setState({isMakePaymentButtonClicked:\"true\"});var data=selectedCards;console.log(\"SubmitData\",data);var _this$props3=_this.props,id=_this$props3.id,cartId=_this$props3.cartId;_this.props.createPayment(\"?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(id,\"&cart_id=\").concat(cartId),data).then(function(res){history.push(\"/admin/billing/print/bill/\".concat(res.data.sa_transacno));});};_this.addCreditCard=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state3,cardField,selectedCards,balance,responseData,txtUserPayAmount,userPayAmount;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.validator.fieldValid(\"cardFieldType\")){_context.next=3;break;}_this.validator.showMessageFor(\"cardFieldType\");return _context.abrupt(\"return\");case 3:_this$state3=_this.state,cardField=_this$state3.cardField,selectedCards=_this$state3.selectedCards,balance=_this$state3.balance,responseData=_this$state3.responseData,txtUserPayAmount=_this$state3.txtUserPayAmount;userPayAmount=parseFloat(txtUserPayAmount);if(!(parseFloat(_this.state.responseData.billable_amount)>0)){_context.next=8;break;}if(!(userPayAmount==0)){_context.next=8;break;}return _context.abrupt(\"return\");case 8:if(!_this.checkPayTypeIdAlreadyExists(cardField.pay_typeid)){_context.next=13;break;}alert(_this.getPayTableNameBasedOnId(cardField.pay_typeid)+\" already exists\");return _context.abrupt(\"return\");case 13:selectedCards.push({pay_typeid:cardField.pay_typeid,pay_amt:userPayAmount,credit_debit:true,pay_premise:false,pay_rem1:cardField.pay_rem1,pay_rem2:cardField.pay_rem2,pay_rem3:cardField.pay_rem3,pay_rem4:cardField.pay_rem4,prepaid:false});case 14:balance=parseFloat(balance-userPayAmount).toFixed(2);_this.setState({isOpenSubPayment:false});_this.setBalanceToAllTextBoxes(balance);case 17:case\"end\":return _context.stop();}}},_callee);}));_this.addPrepaid=function(selectedPrepaid){var prepaidExpDate=moment(selectedPrepaid.exp_date).format(\"YYYY-MM-DD\");var todaysDate=moment(new Date()).format(\"YYYY-MM-DD\");var isValid=moment(todaysDate).isSameOrAfter(prepaidExpDate);var userPayAmount=0;var _this$state4=_this.state,itemServiceAmount=_this$state4.itemServiceAmount,itemProductAmount=_this$state4.itemProductAmount,itemProductServiceVoucherAmount=_this$state4.itemProductServiceVoucherAmount,txtUserPayAmount=_this$state4.txtUserPayAmount;userPayAmount=parseFloat(txtUserPayAmount);if(isValid){alert(\"Check Expiry Date\");return;}if(userPayAmount<=0){// alert(\"hi\");\nreturn;}var selectedRemainingPrepaidAmount=parseFloat(selectedPrepaid.remain);if(selectedRemainingPrepaidAmount<userPayAmount){//return\n}/*\r\n    if (!this.validator.fieldValid(\"PrepaidBalanceAmount\")) {\r\n      this.validator.showMessageFor(\"PrepaidBalanceAmount\");\r\n      return;\r\n    }\r\n    if (!this.validator.fieldValid(\"PrepaidBalanceAmount\")) {\r\n      this.validator.showMessageFor(\"PrepaidBalanceAmount\");\r\n      return;\r\n    }\r\n*/if(selectedPrepaid.conditiontype1===\"Service Only\"){//For Service\nif(parseFloat(itemServiceAmount)==0){return;}if(parseFloat(itemServiceAmount)<=selectedRemainingPrepaidAmount){userPayAmount=parseFloat(txtUserPayAmount)<parseFloat(itemServiceAmount)?parseFloat(txtUserPayAmount):parseFloat(itemServiceAmount);}else{userPayAmount=selectedRemainingPrepaidAmount;}itemServiceAmount=itemServiceAmount-userPayAmount;_this.setState({itemServiceAmount:itemServiceAmount});}else if(selectedPrepaid.conditiontype1===\"Product Only\"){//For Product\nif(parseFloat(itemProductAmount)==0){return;}if(parseFloat(itemProductAmount)<=selectedRemainingPrepaidAmount){userPayAmount=parseFloat(txtUserPayAmount)<parseFloat(itemProductAmount)?parseFloat(txtUserPayAmount):parseFloat(itemProductAmount);}else{userPayAmount=selectedRemainingPrepaidAmount;}itemProductAmount=itemProductAmount-userPayAmount;_this.setState({itemProductAmount:itemProductAmount});}else{if(parseFloat(itemProductServiceVoucherAmount)==0){return;}if(parseFloat(itemProductServiceVoucherAmount)<=selectedRemainingPrepaidAmount){userPayAmount=parseFloat(txtUserPayAmount)<parseFloat(itemProductServiceVoucherAmount)?parseFloat(txtUserPayAmount):parseFloat(itemProductServiceVoucherAmount);}else{userPayAmount=selectedRemainingPrepaidAmount;}itemProductServiceVoucherAmount=itemProductServiceVoucherAmount-userPayAmount;_this.setState({itemProductServiceVoucherAmount:itemProductServiceVoucherAmount});}if(userPayAmount==0){return;}var payTypeId=23;var _this$state5=_this.state,cardField=_this$state5.cardField,ewalletField=_this$state5.ewalletField,balance=_this$state5.balance,selectedCards=_this$state5.selectedCards,isOpenSubPayment=_this$state5.isOpenSubPayment;selectedCards.push({pay_typeid:payTypeId,prepaid:true,pay_amt:userPayAmount,credit_debit:false,pay_premise:false,pay_rem1:selectedPrepaid.pp_no+\" - \"+selectedPrepaid.line_no+\" - \"+selectedPrepaid.pp_desc,pay_rem2:selectedPrepaid.id,prepaid_ct:selectedPrepaid.conditiontype1});console.log(\"BeforeAdd-displayTablePrepaid\",_this.state.displayTablePrepaid);var setdisplayTablePrepaid=_this.state.displayTablePrepaid;setdisplayTablePrepaid.push(selectedPrepaid.id);_this.setState({displayTablePrepaid:setdisplayTablePrepaid});console.log(\"AfterAdd-displayTablePrepaid\",_this.state.displayTablePrepaid);_this.HidePrepaidTableData();balance=parseFloat(balance-userPayAmount).toFixed(2);_this.setBalanceToAllTextBoxes(balance);_this.setState({isOpenSubPayment:false});};_this.addVoucher=function(selectedVoucher){var _this$state6=_this.state,cardField=_this$state6.cardField,ewalletField=_this$state6.ewalletField,balance=_this$state6.balance,txtUserPayAmount=_this$state6.txtUserPayAmount,isOpenSubPayment=_this$state6.isOpenSubPayment,selectedCards=_this$state6.selectedCards;if(txtUserPayAmount==0){return;}var selectedVoucherAmount=parseFloat(selectedVoucher.value);var pay_amt_setup=0;if(selectedVoucherAmount<=parseFloat(txtUserPayAmount)){pay_amt_setup=selectedVoucherAmount;}else{alert(\"Partial Amount is not applicable in voucher\");return;}var payTypeId=9;selectedCards.push({pay_typeid:payTypeId,prepaid:false,pay_amt:parseFloat(pay_amt_setup),credit_debit:false,pay_premise:false,pay_rem1:selectedVoucher.voucher_no,pay_rem2:selectedVoucher.voucher_no});console.log(\"BeforeAdd-displayTableVoucher\",_this.state.displayTableVoucher);var setdisplayTableVoucher=_this.state.displayTableVoucher;setdisplayTableVoucher.push(selectedVoucher.voucher_no);_this.setState({displayTableVoucher:setdisplayTableVoucher});console.log(\"AfterAdd-displayTableCreditNote\",_this.state.displayTableVoucher);_this.HideVoucherTableData();balance=parseFloat(balance-pay_amt_setup).toFixed(2);_this.setState({isOpenSubPayment:false});_this.setBalanceToAllTextBoxes(balance);};_this.addCreditNote=function(selectedCreditNote){var _this$state7=_this.state,cardField=_this$state7.cardField,ewalletField=_this$state7.ewalletField,balance=_this$state7.balance,txtUserPayAmount=_this$state7.txtUserPayAmount,selectedCards=_this$state7.selectedCards;if(txtUserPayAmount==0){return;}var selectedCreditNoteAmount=parseFloat(selectedCreditNote.balance);var pay_amt_setup=0;if(selectedCreditNoteAmount<=parseFloat(txtUserPayAmount)){pay_amt_setup=selectedCreditNoteAmount;}else{pay_amt_setup=txtUserPayAmount;}var payTypeId=17;selectedCards.push({pay_typeid:payTypeId,prepaid:false,pay_amt:parseFloat(pay_amt_setup),credit_debit:false,pay_premise:false,pay_rem1:selectedCreditNote.credit_code,pay_rem2:selectedCreditNote.transaction});console.log(\"BeforeAdd-displayTableCreditNote\",_this.state.displayTableCreditNote);var setdisplayTableCreditNote=_this.state.displayTableCreditNote;setdisplayTableCreditNote.push(selectedCreditNote.credit_code);_this.setState({displayTableCreditNote:setdisplayTableCreditNote});console.log(\"AfterAdd-displayTableCreditNote\",_this.state.displayTableCreditNote);_this.HideCreditNoteTableData();balance=parseFloat(balance-pay_amt_setup).toFixed(2);_this.setState({isOpenSubPayment:false});_this.setBalanceToAllTextBoxes(balance);};_this.removeCards=function(idx){return function(){var _this$state8=_this.state,selectedCards=_this$state8.selectedCards,balance=_this$state8.balance,cardField=_this$state8.cardField,ewalletField=_this$state8.ewalletField,itemProductServiceVoucherAmount=_this$state8.itemProductServiceVoucherAmount,itemProductAmount=_this$state8.itemProductAmount,itemServiceAmount=_this$state8.itemServiceAmount;_this.setState({isMakePaymentButtonClicked:\"false\"});balance=parseFloat(balance)+parseFloat(idx.pay_amt);var array=_toConsumableArray(selectedCards);// make a separate copy of the array\nvar index=array.indexOf(idx);if(idx.pay_typeid==23){if(idx.prepaid_ct==\"Product Only\"){itemProductAmount=itemProductAmount+idx.pay_amt;}else if(idx.prepaid_ct==\"Service Only\"){itemServiceAmount=itemServiceAmount+idx.pay_amt;}else{itemProductServiceVoucherAmount=itemProductServiceVoucherAmount+idx.pay_amt;}_this.setState({itemProductServiceVoucherAmount:itemProductServiceVoucherAmount,itemProductAmount:itemProductAmount,itemServiceAmount:itemServiceAmount});}if(index!==-1){array.splice(index,1);_this.setState({selectedCards:array,balance:balance});}//console.log(\"idx\", idx);\nvar removedTerm=idx.pay_typeid;//console.log(\"removedTerm\", removedTerm);\n//console.log(\"idx.pay_rem2\", idx.pay_rem2);\nif(removedTerm==\"23\"){var items=_this.state.displayTablePrepaid;console.log(\"BeforeRemove-displayTablePrepaid\",items);var valueToRemove=idx.pay_rem2;//For Prepaid Ony we have added unique id here\nconsole.log(\"BeforeRemove-valueToRemove\",valueToRemove);var filteredItems=items.filter(function(item){return item!==valueToRemove;});_this.setState({displayTablePrepaid:filteredItems},function(){console.log(\"AfterRemove-displayTablePrepaid\",_this.state.displayTablePrepaid);});_this.getPrepaidAccountData(\"\");// this.HidePrepaidTableData();\n}if(removedTerm==\"17\"){var _items=_this.state.displayTableCreditNote;console.log(\"BeforeRemove-displayTableCreditNote\",_items);var _valueToRemove=idx.pay_rem1;//For Credit Note Ony we have added unique id here\nconsole.log(\"BeforeRemove-valueToRemove\",_valueToRemove);var _filteredItems=_items.filter(function(item){return item!==_valueToRemove;});_this.setState({displayTableCreditNote:_filteredItems},function(){console.log(\"AfterRemove-displayTableCreditNote\",_this.state.displayTableCreditNote);});_this.getCreditNoteAccountData(\"\");// this.HidePrepaidTableData();\n}if(removedTerm==\"9\"){var _items2=_this.state.displayTableVoucher;console.log(\"BeforeRemove-displayTableVoucher\",_items2);var _valueToRemove2=idx.pay_rem1;//For Credit Note Ony we have added unique id here\nconsole.log(\"BeforeRemove-valueToRemove\",_valueToRemove2);var _filteredItems2=_items2.filter(function(item){return item!==_valueToRemove2;});_this.setState({displayTableVoucher:_filteredItems2},function(){console.log(\"AfterRemove-displayTableVoucher\",_this.state.displayTableVoucher);});_this.getVoucherData(\"\");}cardField[\"pay_amt\"]=balance;ewalletField[\"pay_amt\"]=balance;_this.setBalanceToAllTextBoxes(balance);};};_this.addNewPaymentData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(selPayTypeId,selPayTypeName){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.validator.fieldValid(\"Amount\")){_context2.next=3;break;}_this.validator.showMessageFor(\"Amount\");return _context2.abrupt(\"return\");case 3:if(_this.validator.fieldValid(\"Amount\")){_context2.next=6;break;}_this.validator.showMessageFor(\"Amount\");return _context2.abrupt(\"return\");case 6:_this.props.getCommonApi(\"paytablenew/?paygroupid=\".concat(selPayTypeId)).then(function(res){_this.setState({paytableData:[]});var _this$state9=_this.state,paytableData=_this$state9.paytableData,isSelectedPaymentType=_this$state9.isSelectedPaymentType,displayModelPaymentType=_this$state9.displayModelPaymentType;isSelectedPaymentType=selPayTypeName.trim();displayModelPaymentType=selPayTypeName.trim();var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;paytableData.push({label:key.pay_description,value:key.id});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({paytableData:paytableData},function(){var isOpenSubPayment=_this.state.isOpenSubPayment;if(paytableData.length==0){alert(\"Pay Table Not Exists\");return;}else if(selPayTypeName.trim()===\"VOUCHER\"){isOpenSubPayment=true;}else if(selPayTypeName.trim()===\"PREPAID\"){isOpenSubPayment=true;}else if(selPayTypeName.trim()===\"Credit\"){isOpenSubPayment=true;}else if(selPayTypeName.trim()===\"CARD\"){isOpenSubPayment=true;}else if(paytableData.length==1){isOpenSubPayment=false;var payTypeId=paytableData[0].value;var _this$state10=_this.state,balance=_this$state10.balance,selectedCards=_this$state10.selectedCards,txtUserPayAmount=_this$state10.txtUserPayAmount;if(parseFloat(_this.state.responseData.billable_amount)>0){if(parseFloat(txtUserPayAmount)==0){return;}}if(_this.checkPayTypeIdAlreadyExists(payTypeId)){alert(_this.getPayTableNameBasedOnId(payTypeId)+\" already exists\");//alert(\"Already Exists\");\nreturn;}else{selectedCards.push({pay_typeid:payTypeId,pay_amt:parseFloat(txtUserPayAmount),credit_debit:false,pay_premise:true,prepaid:false});balance=parseFloat(balance-txtUserPayAmount).toFixed(2);txtUserPayAmount=balance;_this.setState({txtUserPayAmount:txtUserPayAmount,balance:balance});return;}}else if(paytableData.length>=1){isOpenSubPayment=true;isSelectedPaymentType=\"Multiple\";}_this.setState({isOpenSubPayment:isOpenSubPayment,isSelectedPaymentType:isSelectedPaymentType,displayModelPaymentType:displayModelPaymentType});});});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref4.apply(this,arguments);};}();_this.handleDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var isOpenSubPayment;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:isOpenSubPayment=_this.state.isOpenSubPayment;isOpenSubPayment=false;_context3.next=4;return _this.setState({isOpenSubPayment:isOpenSubPayment});case 4:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleChangeCard=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref6){var _ref6$target,value,name,cardField;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref6$target=_ref6.target,value=_ref6$target.value,name=_ref6$target.name;cardField=Object.assign({},_this.state.cardField);cardField[name]=value;_context4.next=5;return _this.setState({cardField:cardField});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref7.apply(this,arguments);};}();return _this;}_createClass(MakePaymentClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getPayment();this.getPayGroup();this.getFullPayTable();this.getPrepaidData();this.getCreditNoteAccountData(\"\");this.getVoucherData(\"\");}},{key:\"handleChangeTextBox\",value:function handleChangeTextBox(event){this.setState({txtUserPayAmount:event.target.value});}},{key:\"checkPayTypeIdAlreadyExists\",value:function checkPayTypeIdAlreadyExists(val){return this.state.selectedCards.some(function(item){return val===item.pay_typeid;});}},{key:\"HidePrepaidTableData\",value:function HidePrepaidTableData(){var _this2=this;var _this$state11=this.state,prepaidCustomerData=_this$state11.prepaidCustomerData,displayTablePrepaid=_this$state11.displayTablePrepaid;displayTablePrepaid.map(function(item){var selectedPrepaid=prepaidCustomerData.filter(function(prepaid){return prepaid.id!=item;});_this2.setState({prepaidCustomerData:selectedPrepaid});});}},{key:\"HideCreditNoteTableData\",value:function HideCreditNoteTableData(){var _this3=this;var _this$state12=this.state,creditNoteCustomerData=_this$state12.creditNoteCustomerData,displayTableCreditNote=_this$state12.displayTableCreditNote;displayTableCreditNote.map(function(item){var selectedCreditNote=creditNoteCustomerData.filter(function(creditNote){return creditNote.credit_code!=item;});_this3.setState({creditNoteCustomerData:selectedCreditNote});});}},{key:\"HideVoucherTableData\",value:function HideVoucherTableData(){var _this4=this;var _this$state13=this.state,voucherCustomerData=_this$state13.voucherCustomerData,displayTableVoucher=_this$state13.displayTableVoucher;displayTableVoucher.map(function(item){var selectedVoucher=voucherCustomerData.filter(function(voucher){return voucher.voucher_no!=item;});_this4.setState({voucherCustomerData:selectedVoucher});});}},{key:\"setBalanceToAllTextBoxes\",value:function setBalanceToAllTextBoxes(balance){this.setState({balance:balance,txtUserPayAmount:balance});}},{key:\"checkTypeOfCartItemContainsDeposit\",value:function checkTypeOfCartItemContainsDeposit(cartData){var _this5=this;var stringifiedCartData=cartData.data;if(stringifiedCartData){stringifiedCartData.map(function(item){if(item.type===\"Deposit\"||item.type===\"Top Up\"){_this5.state.isTreatmentDoneButton=false;}});}}// Function New code from 17/March/2020\n},{key:\"render\",value:function render(){var _this6=this;var _this$state14=this.state,responseData=_this$state14.responseData,balance=_this$state14.balance,isTreatmentDoneButton=_this$state14.isTreatmentDoneButton,payGroupData=_this$state14.payGroupData,paytableData=_this$state14.paytableData,isOpenSubPayment=_this$state14.isOpenSubPayment,isSelectedPaymentType=_this$state14.isSelectedPaymentType,displayModelPaymentType=_this$state14.displayModelPaymentType,cardField=_this$state14.cardField;var payTableDropDownValue=this.state.formFields.payTableDropDownValue;var insideRadioButtonData;if(isSelectedPaymentType==\"VOUCHER\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Vocucher No\"),/*#__PURE__*/React.createElement(\"td\",null,\"Value\"),/*#__PURE__*/React.createElement(\"td\",null,\"Exp.Date\")),this.state.voucherCustomerData.map(function(selectedVoucher,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,style:{cursor:\"pointer\"},onClick:_this6.addVoucher.bind(_this6,selectedVoucher)},/*#__PURE__*/React.createElement(\"td\",null,selectedVoucher.voucher_no),/*#__PURE__*/React.createElement(\"td\",null,selectedVoucher.value),/*#__PURE__*/React.createElement(\"td\",null,selectedVoucher.issued_expiry_date));})));}else if(isSelectedPaymentType==\"PREPAID\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Category\"),/*#__PURE__*/React.createElement(\"td\",null,\"Amount\"),/*#__PURE__*/React.createElement(\"td\",null,\"Remaining\"),/*#__PURE__*/React.createElement(\"td\",null,\"InvoiceNo\"),/*#__PURE__*/React.createElement(\"td\",null,\"ExpDate\"),/*#__PURE__*/React.createElement(\"td\",null,\"ConditionType\")),this.state.prepaidCustomerData.map(function(selectedPrepaid,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,style:{cursor:\"pointer\"},onClick:_this6.addPrepaid.bind(_this6,selectedPrepaid)},/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.pp_desc),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.pp_total),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.remain),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.prepaid),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.exp_date),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.conditiontype1));})));}else if(isSelectedPaymentType==\"Credit\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Credit #\"),/*#__PURE__*/React.createElement(\"td\",null,\"Date\"),/*#__PURE__*/React.createElement(\"td\",null,\"Amount\"),/*#__PURE__*/React.createElement(\"td\",null,\"Balance\"),/*#__PURE__*/React.createElement(\"td\",null,\"Status\")),this.state.creditNoteCustomerData.map(function(creditNote,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,style:{cursor:\"pointer\"},onClick:_this6.addCreditNote.bind(_this6,creditNote)},/*#__PURE__*/React.createElement(\"td\",null,creditNote.credit_code),/*#__PURE__*/React.createElement(\"td\",null,creditNote.sa_date),/*#__PURE__*/React.createElement(\"td\",null,creditNote.amount),/*#__PURE__*/React.createElement(\"td\",null,creditNote.balance),/*#__PURE__*/React.createElement(\"td\",null,creditNote.status));})));}else if(isSelectedPaymentType==\"CARD\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Select Card\",/*#__PURE__*/React.createElement(NormalSelect,{placeholder:\"Search type...\",options:paytableData,value:cardField.pay_typeid,name:\"pay_typeid\",onChange:this.handleCreditChange})),this.validator.message(\"cardFieldType\",cardField.pay_typeid,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Card No\",/*#__PURE__*/React.createElement(NormalInput,{value:cardField.pay_rem1,name:\"pay_rem1\",onChange:this.handleChangeCard}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Name\",/*#__PURE__*/React.createElement(NormalInput,{value:cardField.pay_rem2,name:\"pay_rem2\",onChange:this.handleChangeCard}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Exp Month\",/*#__PURE__*/React.createElement(NormalInput,{value:cardField.pay_rem3,name:\"pay_rem3\",onChange:this.handleChangeCard}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Exp Year\",/*#__PURE__*/React.createElement(NormalInput,{value:cardField.pay_rem4,name:\"pay_rem4\",onChange:this.handleChangeCard})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 mt-4 ml-2\",label:\"CONFIRM\",onClick:function onClick(){return _this6.addCreditCard();}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 mt-4 ml-2\",label:\"CANCEL\",onClick:function onClick(){return _this6.setState({isOpenSubPayment:false});}})))));}else if(isSelectedPaymentType==\"Multiple\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(Label,{className:\"col-12 fs-15\"},\"Choose Option\"),/*#__PURE__*/React.createElement(NormalSelect,{placeholder:\"Search type...\",options:paytableData,value:payTableDropDownValue,name:\"payTableDropDownValue\",onChange:this.handleChange})))));}else{insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null);}var payGroupDataContent=[];payGroupData.forEach(function(item,i){payGroupDataContent.push(/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\",style:{width:\"100px\",margin:\"50px\"}},/*#__PURE__*/React.createElement(\"img\",{src:helpers.getUrl()+\"media/\"+item.picturelocation,label:item.label,onClick:function onClick(){return _this6.addNewPaymentData(item.value,item.label);},style:{cursor:'pointer'}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"p\",{style:{width:\"100px\",textAlign:'center'}},item.label))));});var _this$props4=this.props,cartData=_this$props4.cartData,tokenDetails=_this$props4.tokenDetails;this.checkTypeOfCartItemContainsDeposit(cartData);var userAddedPayTableData=/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered\"},this.state.selectedCards.map(function(selectedCards,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"fs-18\"},_this6.getPayTableNameBasedOnId(selectedCards.pay_typeid)),/*#__PURE__*/React.createElement(\"td\",{className:\"fs-18\",style:{textAlign:\"right\"}},selectedCards.pay_amt.toFixed(2)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"img\",{onClick:_this6.removeCards(selectedCards),width:\"30px\",height:\"30px\",src:deleteIcon,alt:\"\"})));}));return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(NormalModal,{className:\"payment-modal\",style:{minWidth:\"800px\"},modal:isOpenSubPayment,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 f-600\"},displayModelPaymentType)),/*#__PURE__*/React.createElement(\"br\",null),insideRadioButtonData),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"row \"},/*#__PURE__*/React.createElement(Label,{className:\"col-2 fs-18\"},\"Enter Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalInput,{value:this.state.txtUserPayAmount,onChange:this.handleChangeTextBox.bind(this)}),this.validator.message(\"Amount\",this.state.txtUserPayAmount,\"required|numeric|min:0,num\"),this.validator.message(\"Amount\",this.state.txtUserPayAmount,\"required|numeric|max:\"+this.state.balance+\",num\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 \"},/*#__PURE__*/React.createElement(\"h4\",null,\"Select Payment Method\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row col-12 paymentGroup\"},payGroupDataContent)),/*#__PURE__*/React.createElement(\"div\",{className:\"make-payment-section mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row \"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-8 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 ml-1 payment fs-12\"},userAddedPayTableData)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 ml-1 payment\"},/*#__PURE__*/React.createElement(\"p\",null,\"List of selection's\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row fs-14\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},\"Subtotal\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},tokenDetails.currency,\" \",responseData.subtotal),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},\"Discount (\",tokenDetails.currency,\")\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},tokenDetails.currency,\" \",responseData.discount),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},\"Transac amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},tokenDetails.currency,\" \",responseData.trans_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},\"Deposit\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},tokenDetails.currency,\" \",responseData.deposit_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},responseData.tax_lable),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},tokenDetails.currency,\" \",responseData.tax_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 fs-22 text-center mt-5\"},\"Billing Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 fs-22 f-700 text-center text-orenge\"},tokenDetails.currency,\" \",responseData.billable_amount),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 f-600 text-center mt-5\"},\"Balance Amount: \",Number(balance).toFixed(2))))))),isTreatmentDoneButton?/*#__PURE__*/React.createElement(\"div\",{className:\"make-payment mt-3 text-center\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 \",label:\"TREATMENT DONE\",onClick:function onClick(){return _this6.handleTreatmentDone();}})):null,/*#__PURE__*/React.createElement(\"div\",{className:\"make-payment mt-3 text-center\"},this.state.isMakePaymentButtonClicked==\"true\"?/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 \",label:\"Make payment\",disabled:true}):/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 \",label:\"Make payment \",onClick:function onClick(){return _this6.handleSubmit();},disabled:this.state.selectedCards.length<=0||balance>0}))));}}]);return MakePaymentClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{appointmentDetail:state.appointment.appointmentDetail,selected_cstomer:state.common.selected_cstomer,tokenDetails:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getPayment:getPayment,getCommonApi:getCommonApi,createPayment:createPayment},dispatch);};export var Payment=connect(mapStateToProps,mapDispatchToProps)(MakePaymentClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/cart/payment.js"],"names":["React","Component","NormalInput","NormalButton","NormalSelect","NormalModal","getPayment","createPayment","connect","bindActionCreators","history","getCommonApi","dateFormat","SimpleReactValidator","Label","closeIcon","deleteIcon","helpers","moment","require","MakePaymentClass","state","formFields","name","contact","address","searchStaff","payTableDropDownValue","responseData","premisesOption","selectedCards","selectedCardsPayAmount","cardOption","ewalletoptions","ewalletField","pay_typeid","pay_amt","credit_debit","cardField","pay_rem1","pay_rem2","pay_rem3","pay_rem4","balance","errorMessage","prepaidCustomerData","voucherCustomerData","creditNoteCustomerData","accountHeader","isMakePaymentButtonClicked","isTreatmentDoneButton","itemProductAmount","itemServiceAmount","itemProductServiceVoucherAmount","displayTablePrepaid","displayTableCreditNote","displayTableVoucher","paytableData","paytableFullData","payGroupData","selectPaymentGroup","selectPaymentGroupId","isSelectedPaymentType","displayModelPaymentType","txtUserPayAmount","isOpenSubPayment","componentWillMount","validator","element","message","autoForceUpdate","props","id","cartId","cartData","Date","then","res","setState","data","Number","billable_amount","stringifiedCartData","map","item","recorddetail","parseFloat","total_price","getPrepaidData","getPrepaidAccountData","getVoucherData","api","key","console","log","HideVoucherTableData","HidePrepaidTableData","getCreditNoteAccountData","HideCreditNoteTableData","getPayGroup","push","label","pay_group_code","value","picturelocation","getFullPayTable","getPayTableNameBasedOnId","payTableId","test","filter","pay_description","handleChange","target","Object","assign","pay_premise","prepaid","toFixed","handleCreditChange","handleTreatmentDone","sa_transacno","handleSubmit","addCreditCard","fieldValid","showMessageFor","userPayAmount","checkPayTypeIdAlreadyExists","alert","setBalanceToAllTextBoxes","addPrepaid","selectedPrepaid","prepaidExpDate","exp_date","format","todaysDate","isValid","isSameOrAfter","selectedRemainingPrepaidAmount","remain","conditiontype1","payTypeId","pp_no","line_no","pp_desc","prepaid_ct","setdisplayTablePrepaid","addVoucher","selectedVoucher","selectedVoucherAmount","pay_amt_setup","voucher_no","setdisplayTableVoucher","addCreditNote","selectedCreditNote","selectedCreditNoteAmount","credit_code","transaction","setdisplayTableCreditNote","removeCards","idx","array","index","indexOf","splice","removedTerm","items","valueToRemove","filteredItems","addNewPaymentData","selPayTypeId","selPayTypeName","trim","length","handleDialog","handleChangeCard","event","val","some","creditNote","voucher","type","insideRadioButtonData","cursor","bind","issued_expiry_date","pp_total","sa_date","amount","status","payGroupDataContent","forEach","i","width","margin","getUrl","textAlign","tokenDetails","checkTypeOfCartItemContainsDeposit","userAddedPayTableData","minWidth","handleChangeTextBox","currency","subtotal","discount","trans_amt","deposit_amt","tax_lable","tax_amt","mapStateToProps","appointmentDetail","appointment","selected_cstomer","common","authStore","mapDispatchToProps","dispatch","Payment"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalInput,\r\n  NormalButton,\r\n  NormalSelect,\r\n  NormalModal,\r\n} from \"component/common\";\r\nimport { getPayment, createPayment } from \"redux/actions/payment\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { history } from \"helpers\";\r\nimport { getCommonApi } from \"redux/actions/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport \"./style.scss\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport Label from \"reactstrap/lib/Label\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport deleteIcon from \"assets/images/delete.jpg\";\r\nimport helpers from \"../../../../service/Helper\";\r\nconst moment = require(\"moment\");\r\nexport class MakePaymentClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      name: \"\",\r\n      contact: \"\",\r\n      address: \"\",\r\n      searchStaff: \"\",\r\n      payTableDropDownValue: \"\",\r\n    },\r\n    responseData: {},\r\n\r\n    premisesOption: [],\r\n    selectedCards: [],\r\n    selectedCardsPayAmount: 0,\r\n    cardOption: [],\r\n    ewalletoptions: [],\r\n\r\n    ewalletField: {\r\n      pay_typeid: null,\r\n      pay_amt: \"\",\r\n      credit_debit: true,\r\n    },\r\n    cardField: {\r\n      pay_typeid: null,\r\n      pay_amt: \"\",\r\n      credit_debit: true,\r\n      pay_rem1: \"\",\r\n      pay_rem2: \"\",\r\n      pay_rem3: \"\",\r\n      pay_rem4: \"\",\r\n    },\r\n    balance: 0,\r\n    errorMessage: \"123\",\r\n    prepaidCustomerData: [],\r\n    voucherCustomerData: [],\r\n    creditNoteCustomerData: [],\r\n    accountHeader: [],\r\n    isMakePaymentButtonClicked: \"false\",\r\n    isTreatmentDoneButton: true,\r\n    itemProductAmount: 0,\r\n    itemServiceAmount: 0,\r\n    itemProductServiceVoucherAmount: 0,\r\n    displayTablePrepaid: [],\r\n    displayTableCreditNote: [],\r\n    displayTableVoucher: [],\r\n    paytableData: [],\r\n    paytableFullData: [],\r\n    payGroupData: [],\r\n    selectPaymentGroup: \"\",\r\n    selectPaymentGroupId: \"\",\r\n    isSelectedPaymentType: \"\",\r\n    displayModelPaymentType:\"\",\r\n    txtUserPayAmount: 0,\r\n    isOpenSubPayment: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getPayment();\r\n    this.getPayGroup();\r\n    this.getFullPayTable();\r\n    this.getPrepaidData();\r\n    this.getCreditNoteAccountData(\"\");\r\n    this.getVoucherData(\"\");\r\n  }\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: (message) => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n  // get method for payment detail against appointment\r\n  getPayment = () => {\r\n    let { id, cartId, cartData } = this.props;\r\n    //id = 82318;\r\n    //cartId = \"ICMD100226\";\r\n    //cartData={\"status\":200,\"message\":\"Listed Succesfully\",\"error\":false,\"data\":[{\"id\":57500,\"cust_noid\":82318,\"customer\":\"test17011\",\"customercode\":\"021427HQ\",\"cart_id\":\"ICHQ100234\",\"cart_date\":\"2021-03-14\",\"cart_status\":\"Inprogress\",\"lineno\":1,\"check\":\"New\",\"itemcodeid\":10067,\"itemdesc\":\"Short - Chin Length(Before Shoulder) 128\",\"quantity\":1,\"price\":\"128.00\",\"total_price\":\"128.00\",\"sitecodeid\":31,\"sitecode_name\":\"HQ OFFICE (DEMO)\",\"sitecode\":\"HQ\",\"discount\":\"0.00\",\"discount_amt\":0,\"discount_price\":\"128.00\",\"additional_discount\":0,\"additional_discountamt\":0,\"deposit\":\"128.00\",\"trans_amt\":\"128.00\",\"tax\":0,\"itemstatus\":null,\"ratio\":\"100.000000000000000\",\"helper_name\":null,\"done_sessions\":null,\"type\":\"Deposit\",\"treatment_account\":null,\"treatment\":null,\"deposit_account\":null,\"prepaid_account\":null,\"item_uom\":null,\"recorddetail\":\"Service\",\"itemtype\":\"SINGLE\",\"item_class\":\"HERBAL TREATMENT\",\"sales_staff\":\"SEQ ADMIN\",\"service_staff\":\"\",\"total_disc\":\"0.00\",\"treatment_name\":\"Short - Chin Length(Before Shoulder) 128  (1)\",\"item_name\":\"Short - Chin Length(Before Shoulder) 128\"}],\"subtotal\":\"128.00\",\"discount\":\"0.00\",\"trans_amt\":\"128.00\",\"deposit_amt\":\"128.00\",\"billable_amount\":\"128.00\"}\r\n    if (id) {\r\n      this.props\r\n        .getPayment(\r\n          `?cart_date=${dateFormat(\r\n            new Date(),\r\n            \"yyyy-mm-dd\"\r\n          )}&cust_noid=${id}&cart_id=${cartId}`\r\n        )\r\n        .then((res) => {\r\n          this.setState({\r\n            responseData: res.data,\r\n            balance: Number(res.data.billable_amount),\r\n            txtUserPayAmount: Number(res.data.billable_amount),\r\n          });\r\n        });\r\n    } else {\r\n      // history.push(\"/admin/cart\");\r\n    }\r\n\r\n    //let {cartData} = this.props;\r\n    let stringifiedCartData = cartData.data;\r\n    let {\r\n      itemProductAmount,\r\n      itemServiceAmount,\r\n      itemProductServiceVoucherAmount,\r\n    } = this.state;\r\n    if (stringifiedCartData) {\r\n      stringifiedCartData.map((item) => {\r\n        //alert(JSON.stringify(item));\r\n        if (item.recorddetail === \"Product\") {\r\n          itemProductAmount += parseFloat(item.total_price);\r\n        }\r\n        if (item.recorddetail === \"Service\") {\r\n          itemServiceAmount += parseFloat(item.total_price);\r\n        }\r\n        if (\r\n          item.recorddetail === \"Product\" ||\r\n          item.recorddetail === \"Service\" ||\r\n          item.recorddetail === \"Voucher\"\r\n        ) {\r\n          itemProductServiceVoucherAmount += parseFloat(item.total_price);\r\n        }\r\n      });\r\n    }\r\n    this.setState({\r\n      itemProductAmount,\r\n      itemServiceAmount,\r\n      itemProductServiceVoucherAmount,\r\n    });\r\n  };\r\n  getPrepaidData = () => {\r\n    this.getPrepaidAccountData(\"\");\r\n  };\r\n\r\n  getVoucherData = (api) => {\r\n    this.props\r\n      .getCommonApi(`voucher/?cust_id=${this.props.id}${api}`)\r\n      .then((key) => {\r\n        let { data } = key;\r\n        let { voucherCustomerData } = this.state;\r\n        voucherCustomerData = data;\r\n        console.log(\"voucherCustomerData\", data);\r\n        // accountHeader = header_data;\r\n        this.setState({ voucherCustomerData }, () => {\r\n          console.log(\"test\");\r\n          this.HideVoucherTableData();\r\n        });\r\n      });\r\n  };\r\n  getPrepaidAccountData = (api) => {\r\n    this.props\r\n      .getCommonApi(`prepaidacclist/?cust_id=${this.props.id}${api}`)\r\n      .then((key) => {\r\n        let { data } = key;\r\n        let { prepaidCustomerData } = this.state;\r\n        prepaidCustomerData = data;\r\n        console.log(\"prepaidCustomerData\", data);\r\n        // accountHeader = header_data;\r\n        this.setState({ prepaidCustomerData }, () => {\r\n          this.HidePrepaidTableData();\r\n        });\r\n      });\r\n  };\r\n  getCreditNoteAccountData = (api) => {\r\n    this.props\r\n      .getCommonApi(`creditnotelist/?cust_id=${this.props.id}${api}`)\r\n      .then((key) => {\r\n        let { data } = key;\r\n        let { creditNoteCustomerData } = this.state;\r\n        creditNoteCustomerData = data;\r\n        // accountHeader = header_data;\r\n        this.setState({ creditNoteCustomerData }, () => {\r\n          this.HideCreditNoteTableData();\r\n        });\r\n      });\r\n  };\r\n\r\n  getPayGroup = () => {\r\n    this.props.getCommonApi(`paygroup/`).then((res) => {\r\n      let { payGroupData } = this.state;\r\n      for (let key of res.data) {\r\n        payGroupData.push({\r\n          label: key.pay_group_code,\r\n          value: key.id,\r\n          picturelocation: key.picturelocation,\r\n        });\r\n      }\r\n      this.setState({\r\n        payGroupData,\r\n      });\r\n    });\r\n  };\r\n  getFullPayTable = () => {\r\n    this.props.getCommonApi(`paytablenew/`).then((res) => {\r\n      let { paytableFullData } = this.state;\r\n      paytableFullData = res.data;\r\n      this.setState({\r\n        paytableFullData,\r\n      });\r\n    });\r\n  };\r\n\r\n  getPayTableNameBasedOnId = (payTableId) => {\r\n    let { paytableFullData } = this.state;\r\n    const test = paytableFullData.filter((res) => res.id == payTableId);\r\n    return test[0].pay_description;\r\n  };\r\n\r\n  handleChangeTextBox(event) {\r\n    this.setState({\r\n      txtUserPayAmount: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n    this.setState({\r\n      formFields,\r\n    });\r\n    let {\r\n      balance,\r\n      selectedCards,\r\n      txtUserPayAmount,\r\n      isOpenSubPayment,\r\n    } = this.state;\r\n    isOpenSubPayment = false;\r\n    selectedCards.push({\r\n      pay_typeid: value,\r\n      pay_amt: parseFloat(txtUserPayAmount),\r\n      credit_debit: false,\r\n      pay_premise: true,\r\n      prepaid: false,\r\n    });\r\n    balance = parseFloat(balance - txtUserPayAmount).toFixed(2);\r\n    txtUserPayAmount = balance;\r\n    this.setState({ txtUserPayAmount, balance, isOpenSubPayment });\r\n  };\r\n  handleCreditChange = ({ target: { value, name } }) => {\r\n    let cardField = Object.assign({}, this.state.cardField);\r\n\r\n    cardField[name] = value;\r\n    this.setState({\r\n      cardField,\r\n    });\r\n  };\r\n  handleTreatmentDone = () => {\r\n    let { selectedCards } = this.state;\r\n    selectedCards.push({\r\n      pay_typeid: 2,\r\n      pay_amt: 0,\r\n      credit_debit: false,\r\n      pay_premise: true,\r\n      prepaid: false,\r\n    });\r\n    let data = selectedCards;\r\n    let { id, cartId } = this.props;\r\n    this.props\r\n      .createPayment(\r\n        `?cart_date=${dateFormat(\r\n          new Date(),\r\n          \"yyyy-mm-dd\"\r\n        )}&cust_noid=${id}&cart_id=${cartId}`,\r\n        data\r\n      )\r\n      .then((res) => {\r\n        history.push(`/admin/billing/print/bill/${res.data.sa_transacno}`);\r\n      });\r\n  };\r\n  // create payment detail\r\n  handleSubmit = () => {\r\n    let { selectedCards } = this.state;\r\n\r\n    this.setState({ isMakePaymentButtonClicked: \"true\" });\r\n    let data = selectedCards;\r\n    console.log(\"SubmitData\", data);\r\n      let { id, cartId } = this.props;\r\n    this.props\r\n      .createPayment(\r\n        `?cart_date=${dateFormat(\r\n          new Date(),\r\n          \"yyyy-mm-dd\"\r\n        )}&cust_noid=${id}&cart_id=${cartId}`,\r\n        data\r\n      )\r\n      .then((res) => {\r\n        history.push(`/admin/billing/print/bill/${res.data.sa_transacno}`);\r\n      });\r\n  };\r\n\r\n  checkPayTypeIdAlreadyExists(val) {\r\n    return this.state.selectedCards.some((item) => val === item.pay_typeid);\r\n  }\r\n  addCreditCard = async () => {\r\n    if (!this.validator.fieldValid(\"cardFieldType\")) {\r\n      this.validator.showMessageFor(\"cardFieldType\");\r\n      return;\r\n    }\r\n\r\n    let {\r\n      cardField,\r\n      selectedCards,\r\n      balance,\r\n      responseData,\r\n      txtUserPayAmount,\r\n    } = this.state;\r\n    let userPayAmount = parseFloat(txtUserPayAmount);\r\n    if (parseFloat(this.state.responseData.billable_amount) > 0) {\r\n      if (userPayAmount == 0) {\r\n        return;\r\n      }\r\n    }\r\n    if (this.checkPayTypeIdAlreadyExists(cardField.pay_typeid)) {\r\n      alert(\r\n        this.getPayTableNameBasedOnId(cardField.pay_typeid) + \" already exists\"\r\n      );\r\n      return;\r\n    } else {\r\n      selectedCards.push({\r\n        pay_typeid: cardField.pay_typeid,\r\n        pay_amt: userPayAmount,\r\n        credit_debit: true,\r\n        pay_premise: false,\r\n        pay_rem1: cardField.pay_rem1,\r\n        pay_rem2: cardField.pay_rem2,\r\n        pay_rem3: cardField.pay_rem3,\r\n        pay_rem4: cardField.pay_rem4,\r\n        prepaid: false,\r\n      });\r\n    }\r\n\r\n    balance = parseFloat(balance - userPayAmount).toFixed(2);\r\n    this.setState({ isOpenSubPayment: false });\r\n    this.setBalanceToAllTextBoxes(balance);\r\n  };\r\n\r\n  addPrepaid = (selectedPrepaid) => {\r\n    const prepaidExpDate = moment(selectedPrepaid.exp_date).format(\r\n      \"YYYY-MM-DD\"\r\n    );\r\n    const todaysDate = moment(new Date()).format(\"YYYY-MM-DD\");\r\n    const isValid = moment(todaysDate).isSameOrAfter(prepaidExpDate);\r\n    let userPayAmount = 0;\r\n    let {\r\n      itemServiceAmount,\r\n      itemProductAmount,\r\n      itemProductServiceVoucherAmount,\r\n      txtUserPayAmount,\r\n    } = this.state;\r\n    userPayAmount = parseFloat(txtUserPayAmount);\r\n    if (isValid) {\r\n      alert(\"Check Expiry Date\");\r\n      return;\r\n    }\r\n    if (userPayAmount <= 0) {\r\n      // alert(\"hi\");\r\n      return;\r\n    }\r\n\r\n    const selectedRemainingPrepaidAmount = parseFloat(selectedPrepaid.remain);\r\n    if (selectedRemainingPrepaidAmount < userPayAmount) {\r\n      //return\r\n    }\r\n    /*\r\n    if (!this.validator.fieldValid(\"PrepaidBalanceAmount\")) {\r\n      this.validator.showMessageFor(\"PrepaidBalanceAmount\");\r\n      return;\r\n    }\r\n    if (!this.validator.fieldValid(\"PrepaidBalanceAmount\")) {\r\n      this.validator.showMessageFor(\"PrepaidBalanceAmount\");\r\n      return;\r\n    }\r\n*/\r\n    if (selectedPrepaid.conditiontype1 === \"Service Only\") {\r\n      //For Service\r\n      if (parseFloat(itemServiceAmount) == 0) {\r\n        return;\r\n      }\r\n      if (parseFloat(itemServiceAmount) <= selectedRemainingPrepaidAmount) {\r\n        userPayAmount =\r\n          parseFloat(txtUserPayAmount) < parseFloat(itemServiceAmount)\r\n            ? parseFloat(txtUserPayAmount)\r\n            : parseFloat(itemServiceAmount);\r\n      } else {\r\n        userPayAmount = selectedRemainingPrepaidAmount;\r\n      }\r\n      itemServiceAmount = itemServiceAmount - userPayAmount;\r\n      this.setState({ itemServiceAmount });\r\n    } else if (selectedPrepaid.conditiontype1 === \"Product Only\") {\r\n      //For Product\r\n      if (parseFloat(itemProductAmount) == 0) {\r\n        return;\r\n      }\r\n      if (parseFloat(itemProductAmount) <= selectedRemainingPrepaidAmount) {\r\n        userPayAmount =\r\n          parseFloat(txtUserPayAmount) < parseFloat(itemProductAmount)\r\n            ? parseFloat(txtUserPayAmount)\r\n            : parseFloat(itemProductAmount);\r\n      } else {\r\n        userPayAmount = selectedRemainingPrepaidAmount;\r\n      }\r\n      itemProductAmount = itemProductAmount - userPayAmount;\r\n      this.setState({ itemProductAmount });\r\n    } else {\r\n      if (parseFloat(itemProductServiceVoucherAmount) == 0) {\r\n        return;\r\n      }\r\n      if (\r\n        parseFloat(itemProductServiceVoucherAmount) <=\r\n        selectedRemainingPrepaidAmount\r\n      ) {\r\n        userPayAmount =\r\n          parseFloat(txtUserPayAmount) <\r\n          parseFloat(itemProductServiceVoucherAmount)\r\n            ? parseFloat(txtUserPayAmount)\r\n            : parseFloat(itemProductServiceVoucherAmount);\r\n      } else {\r\n        userPayAmount = selectedRemainingPrepaidAmount;\r\n      }\r\n      itemProductServiceVoucherAmount =\r\n        itemProductServiceVoucherAmount - userPayAmount;\r\n      this.setState({ itemProductServiceVoucherAmount });\r\n    }\r\n    if (userPayAmount == 0) {\r\n      return;\r\n    }\r\n    const payTypeId = 23;\r\n    let {\r\n      cardField,\r\n      ewalletField,\r\n      balance,\r\n      selectedCards,\r\n      isOpenSubPayment,\r\n    } = this.state;\r\n\r\n    selectedCards.push({\r\n      pay_typeid: payTypeId,\r\n      prepaid: true,\r\n      pay_amt: userPayAmount,\r\n      credit_debit: false,\r\n      pay_premise: false,\r\n      pay_rem1:\r\n        selectedPrepaid.pp_no +\r\n        \" - \" +\r\n        selectedPrepaid.line_no +\r\n        \" - \" +\r\n        selectedPrepaid.pp_desc,\r\n      pay_rem2: selectedPrepaid.id,\r\n      prepaid_ct: selectedPrepaid.conditiontype1,\r\n    });\r\n    console.log(\r\n      \"BeforeAdd-displayTablePrepaid\",\r\n      this.state.displayTablePrepaid\r\n    );\r\n    let setdisplayTablePrepaid = this.state.displayTablePrepaid;\r\n    setdisplayTablePrepaid.push(selectedPrepaid.id);\r\n    this.setState({ displayTablePrepaid: setdisplayTablePrepaid });\r\n    console.log(\"AfterAdd-displayTablePrepaid\", this.state.displayTablePrepaid);\r\n    this.HidePrepaidTableData();\r\n\r\n    balance = parseFloat(balance - userPayAmount).toFixed(2);\r\n    this.setBalanceToAllTextBoxes(balance);\r\n    this.setState({ isOpenSubPayment: false });\r\n  };\r\n  HidePrepaidTableData() {\r\n    let { prepaidCustomerData, displayTablePrepaid } = this.state;\r\n    displayTablePrepaid.map((item) => {\r\n      var selectedPrepaid = prepaidCustomerData.filter(\r\n        (prepaid) => prepaid.id != item\r\n      );\r\n      this.setState({ prepaidCustomerData: selectedPrepaid });\r\n    });\r\n  }\r\n  HideCreditNoteTableData() {\r\n    let { creditNoteCustomerData, displayTableCreditNote } = this.state;\r\n    displayTableCreditNote.map((item) => {\r\n      var selectedCreditNote = creditNoteCustomerData.filter(\r\n        (creditNote) => creditNote.credit_code != item\r\n      );\r\n      this.setState({ creditNoteCustomerData: selectedCreditNote });\r\n    });\r\n  }\r\n  HideVoucherTableData() {\r\n    let { voucherCustomerData, displayTableVoucher } = this.state;\r\n    displayTableVoucher.map((item) => {\r\n      var selectedVoucher = voucherCustomerData.filter(\r\n        (voucher) => voucher.voucher_no != item\r\n      );\r\n      this.setState({ voucherCustomerData: selectedVoucher });\r\n    });\r\n  }\r\n  addVoucher = (selectedVoucher) => {\r\n    let {\r\n      cardField,\r\n      ewalletField,\r\n      balance,\r\n      txtUserPayAmount,\r\n      isOpenSubPayment,\r\n      selectedCards,\r\n    } = this.state;\r\n    if (txtUserPayAmount == 0) {\r\n      return;\r\n    }\r\n    const selectedVoucherAmount = parseFloat(selectedVoucher.value);\r\n    let pay_amt_setup = 0;\r\n    if (selectedVoucherAmount <= parseFloat(txtUserPayAmount)) {\r\n      pay_amt_setup = selectedVoucherAmount;\r\n    } else {\r\n      alert(\"Partial Amount is not applicable in voucher\");\r\n      return;\r\n    }\r\n    const payTypeId = 9;\r\n\r\n    selectedCards.push({\r\n      pay_typeid: payTypeId,\r\n      prepaid: false,\r\n      pay_amt: parseFloat(pay_amt_setup),\r\n      credit_debit: false,\r\n      pay_premise: false,\r\n      pay_rem1: selectedVoucher.voucher_no,\r\n      pay_rem2: selectedVoucher.voucher_no,\r\n    });\r\n    console.log(\r\n      \"BeforeAdd-displayTableVoucher\",\r\n      this.state.displayTableVoucher\r\n    );\r\n    let setdisplayTableVoucher = this.state.displayTableVoucher;\r\n    setdisplayTableVoucher.push(selectedVoucher.voucher_no);\r\n    this.setState({ displayTableVoucher: setdisplayTableVoucher });\r\n    console.log(\r\n      \"AfterAdd-displayTableCreditNote\",\r\n      this.state.displayTableVoucher\r\n    );\r\n    this.HideVoucherTableData();\r\n\r\n    balance = parseFloat(balance - pay_amt_setup).toFixed(2);\r\n    this.setState({ isOpenSubPayment: false });\r\n    this.setBalanceToAllTextBoxes(balance);\r\n  };\r\n  addCreditNote = (selectedCreditNote) => {\r\n    let {\r\n      cardField,\r\n      ewalletField,\r\n      balance,\r\n      txtUserPayAmount,\r\n      selectedCards,\r\n    } = this.state;\r\n    if (txtUserPayAmount == 0) {\r\n      return;\r\n    }\r\n    const selectedCreditNoteAmount = parseFloat(selectedCreditNote.balance);\r\n    let pay_amt_setup = 0;\r\n    if (selectedCreditNoteAmount <= parseFloat(txtUserPayAmount)) {\r\n      pay_amt_setup = selectedCreditNoteAmount;\r\n    } else {\r\n      pay_amt_setup = txtUserPayAmount;\r\n    }\r\n    const payTypeId = 17;\r\n\r\n    selectedCards.push({\r\n      pay_typeid: payTypeId,\r\n      prepaid: false,\r\n      pay_amt: parseFloat(pay_amt_setup),\r\n      credit_debit: false,\r\n      pay_premise: false,\r\n      pay_rem1: selectedCreditNote.credit_code,\r\n      pay_rem2: selectedCreditNote.transaction,\r\n    });\r\n    console.log(\r\n      \"BeforeAdd-displayTableCreditNote\",\r\n      this.state.displayTableCreditNote\r\n    );\r\n    let setdisplayTableCreditNote = this.state.displayTableCreditNote;\r\n    setdisplayTableCreditNote.push(selectedCreditNote.credit_code);\r\n    this.setState({ displayTableCreditNote: setdisplayTableCreditNote });\r\n    console.log(\r\n      \"AfterAdd-displayTableCreditNote\",\r\n      this.state.displayTableCreditNote\r\n    );\r\n    this.HideCreditNoteTableData();\r\n\r\n    balance = parseFloat(balance - pay_amt_setup).toFixed(2);\r\n    this.setState({ isOpenSubPayment: false });\r\n    this.setBalanceToAllTextBoxes(balance);\r\n  };\r\n\r\n  setBalanceToAllTextBoxes(balance) {\r\n    this.setState({\r\n      balance: balance,\r\n      txtUserPayAmount: balance,\r\n    });\r\n  }\r\n\r\n  removeCards = (idx) => () => {\r\n    let {\r\n      selectedCards,\r\n      balance,\r\n      cardField,\r\n      ewalletField,\r\n      itemProductServiceVoucherAmount,\r\n      itemProductAmount,\r\n      itemServiceAmount,\r\n    } = this.state;\r\n    this.setState({ isMakePaymentButtonClicked: \"false\" });\r\n    balance = parseFloat(balance) + parseFloat(idx.pay_amt);\r\n    var array = [...selectedCards]; // make a separate copy of the array\r\n    var index = array.indexOf(idx);\r\n    if (idx.pay_typeid == 23) {\r\n      if (idx.prepaid_ct == \"Product Only\") {\r\n        itemProductAmount = itemProductAmount + idx.pay_amt;\r\n      } else if (idx.prepaid_ct == \"Service Only\") {\r\n        itemServiceAmount = itemServiceAmount + idx.pay_amt;\r\n      } else {\r\n        itemProductServiceVoucherAmount =\r\n          itemProductServiceVoucherAmount + idx.pay_amt;\r\n      }\r\n      this.setState({\r\n        itemProductServiceVoucherAmount,\r\n        itemProductAmount,\r\n        itemServiceAmount,\r\n      });\r\n    }\r\n    if (index !== -1) {\r\n      array.splice(index, 1);\r\n      this.setState({ selectedCards: array, balance });\r\n    }\r\n    //console.log(\"idx\", idx);\r\n    var removedTerm = idx.pay_typeid;\r\n    //console.log(\"removedTerm\", removedTerm);\r\n    //console.log(\"idx.pay_rem2\", idx.pay_rem2);\r\n    if (removedTerm == \"23\") {\r\n      const items = this.state.displayTablePrepaid;\r\n      console.log(\"BeforeRemove-displayTablePrepaid\", items);\r\n      const valueToRemove = idx.pay_rem2; //For Prepaid Ony we have added unique id here\r\n      console.log(\"BeforeRemove-valueToRemove\", valueToRemove);\r\n      const filteredItems = items.filter((item) => item !== valueToRemove);\r\n      this.setState({ displayTablePrepaid: filteredItems }, () => {\r\n        console.log(\r\n          \"AfterRemove-displayTablePrepaid\",\r\n          this.state.displayTablePrepaid\r\n        );\r\n      });\r\n      this.getPrepaidAccountData(\"\");\r\n      // this.HidePrepaidTableData();\r\n    }\r\n    if (removedTerm == \"17\") {\r\n      const items = this.state.displayTableCreditNote;\r\n      console.log(\"BeforeRemove-displayTableCreditNote\", items);\r\n      const valueToRemove = idx.pay_rem1; //For Credit Note Ony we have added unique id here\r\n      console.log(\"BeforeRemove-valueToRemove\", valueToRemove);\r\n      const filteredItems = items.filter((item) => item !== valueToRemove);\r\n      this.setState({ displayTableCreditNote: filteredItems }, () => {\r\n        console.log(\r\n          \"AfterRemove-displayTableCreditNote\",\r\n          this.state.displayTableCreditNote\r\n        );\r\n      });\r\n      this.getCreditNoteAccountData(\"\");\r\n      // this.HidePrepaidTableData();\r\n    }\r\n\r\n    if (removedTerm == \"9\") {\r\n      const items = this.state.displayTableVoucher;\r\n      console.log(\"BeforeRemove-displayTableVoucher\", items);\r\n      const valueToRemove = idx.pay_rem1; //For Credit Note Ony we have added unique id here\r\n      console.log(\"BeforeRemove-valueToRemove\", valueToRemove);\r\n      const filteredItems = items.filter((item) => item !== valueToRemove);\r\n      this.setState({ displayTableVoucher: filteredItems }, () => {\r\n        console.log(\r\n          \"AfterRemove-displayTableVoucher\",\r\n          this.state.displayTableVoucher\r\n        );\r\n      });\r\n      this.getVoucherData(\"\");\r\n    }\r\n    cardField[\"pay_amt\"] = balance;\r\n    ewalletField[\"pay_amt\"] = balance;\r\n    this.setBalanceToAllTextBoxes(balance);\r\n  };\r\n  checkTypeOfCartItemContainsDeposit(cartData) {\r\n    let stringifiedCartData = cartData.data;\r\n    if (stringifiedCartData) {\r\n      stringifiedCartData.map((item) => {\r\n        if (item.type === \"Deposit\" || item.type === \"Top Up\") {\r\n          this.state.isTreatmentDoneButton = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  // Function New code from 17/March/2020\r\n  addNewPaymentData = async (selPayTypeId, selPayTypeName) => {\r\n    if (!this.validator.fieldValid(\"Amount\")) {\r\n      this.validator.showMessageFor(\"Amount\");\r\n      return;\r\n    }\r\n    if (!this.validator.fieldValid(\"Amount\")) {\r\n      this.validator.showMessageFor(\"Amount\");\r\n      return;\r\n    }\r\n\r\n    this.props\r\n      .getCommonApi(`paytablenew/?paygroupid=${selPayTypeId}`)\r\n      .then((res) => {\r\n        this.setState({\r\n          paytableData: [],\r\n        });\r\n        let { paytableData, isSelectedPaymentType,displayModelPaymentType } = this.state;\r\n        isSelectedPaymentType = selPayTypeName.trim();\r\n        displayModelPaymentType=selPayTypeName.trim();\r\n        for (let key of res.data) {\r\n          paytableData.push({ label: key.pay_description, value: key.id });\r\n        }\r\n        this.setState(\r\n          {\r\n            paytableData,\r\n          },\r\n          () => {\r\n            let { isOpenSubPayment } = this.state;\r\n            if (paytableData.length == 0) {\r\n              alert(\"Pay Table Not Exists\");\r\n              return;\r\n            } else if (selPayTypeName.trim() === \"VOUCHER\") {\r\n              isOpenSubPayment = true;\r\n            } else if (selPayTypeName.trim() === \"PREPAID\") {\r\n              isOpenSubPayment = true;\r\n            } else if (selPayTypeName.trim() === \"Credit\") {\r\n              isOpenSubPayment = true;\r\n            } else if (selPayTypeName.trim() === \"CARD\") {\r\n              isOpenSubPayment = true;\r\n            } else if (paytableData.length == 1) {\r\n              isOpenSubPayment = false;\r\n              let payTypeId = paytableData[0].value;\r\n              let { balance, selectedCards, txtUserPayAmount } = this.state;\r\n              if (parseFloat(this.state.responseData.billable_amount) > 0) {\r\n                if (parseFloat(txtUserPayAmount) == 0) {\r\n                  return;\r\n                }\r\n              }\r\n              if (this.checkPayTypeIdAlreadyExists(payTypeId)) {\r\n                alert(\r\n                  this.getPayTableNameBasedOnId(payTypeId) + \" already exists\"\r\n                );\r\n                //alert(\"Already Exists\");\r\n                return;\r\n              } else {\r\n                selectedCards.push({\r\n                  pay_typeid: payTypeId,\r\n                  pay_amt: parseFloat(txtUserPayAmount),\r\n                  credit_debit: false,\r\n                  pay_premise: true,\r\n                  prepaid: false,\r\n                });\r\n                balance = parseFloat(balance - txtUserPayAmount).toFixed(2);\r\n                txtUserPayAmount = balance;\r\n                this.setState({ txtUserPayAmount, balance });\r\n                return;\r\n              }\r\n            } else if (paytableData.length >= 1) {\r\n              isOpenSubPayment = true;\r\n              isSelectedPaymentType = \"Multiple\";\r\n            }\r\n            this.setState({ isOpenSubPayment, isSelectedPaymentType,displayModelPaymentType });\r\n          }\r\n        );\r\n      });\r\n  };\r\n\r\n  handleDialog = async () => {\r\n    let { isOpenSubPayment } = this.state;\r\n    isOpenSubPayment = false;\r\n    await this.setState({\r\n      isOpenSubPayment,\r\n    });\r\n  };\r\n\r\n  handleChangeCard = async ({ target: { value, name } }) => {\r\n    let cardField = Object.assign({}, this.state.cardField);\r\n\r\n    cardField[name] = value;\r\n\r\n    await this.setState({\r\n      cardField,\r\n    });\r\n  };\r\n  render() {\r\n    let {\r\n      responseData,\r\n      balance,\r\n      isTreatmentDoneButton,\r\n      payGroupData,\r\n      paytableData,\r\n      isOpenSubPayment,\r\n      isSelectedPaymentType,\r\n      displayModelPaymentType,\r\n      cardField,\r\n    } = this.state;\r\n    let { payTableDropDownValue } = this.state.formFields;\r\n    let insideRadioButtonData;\r\n\r\n    if (isSelectedPaymentType == \"VOUCHER\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          <table className=\"table table-bordered\">\r\n            <tr>\r\n              <td>Vocucher No</td>\r\n              <td>Value</td>\r\n              <td>Exp.Date</td>\r\n            </tr>\r\n            {this.state.voucherCustomerData.map((selectedVoucher, index) => (\r\n              <tr\r\n                key={index}\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={this.addVoucher.bind(this, selectedVoucher)}\r\n              >\r\n                <td>{selectedVoucher.voucher_no}</td>\r\n                <td>{selectedVoucher.value}</td>\r\n                <td>{selectedVoucher.issued_expiry_date}</td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        </div>\r\n      );\r\n    } else if (isSelectedPaymentType == \"PREPAID\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          <table className=\"table table-striped\">\r\n            <tr>\r\n              <td>Category</td>\r\n              <td>Amount</td>\r\n              <td>Remaining</td>\r\n              <td>InvoiceNo</td>\r\n              <td>ExpDate</td>\r\n              <td>ConditionType</td>\r\n            </tr>\r\n            {this.state.prepaidCustomerData.map((selectedPrepaid, index) => (\r\n              <tr\r\n                key={index}\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={this.addPrepaid.bind(this, selectedPrepaid)}\r\n              >\r\n                <td>{selectedPrepaid.pp_desc}</td>\r\n                <td>{selectedPrepaid.pp_total}</td>\r\n                <td>{selectedPrepaid.remain}</td>\r\n                <td>{selectedPrepaid.prepaid}</td>\r\n                <td>{selectedPrepaid.exp_date}</td>\r\n                <td>{selectedPrepaid.conditiontype1}</td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        </div>\r\n      );\r\n    } else if (isSelectedPaymentType == \"Credit\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          {\" \"}\r\n          <table className=\"table table-striped\">\r\n            <tr>\r\n              <td>Credit #</td>\r\n              <td>Date</td>\r\n              <td>Amount</td>\r\n              <td>Balance</td>\r\n              <td>Status</td>\r\n            </tr>\r\n            {this.state.creditNoteCustomerData.map((creditNote, index) => (\r\n              <tr\r\n                key={index}\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={this.addCreditNote.bind(this, creditNote)}\r\n              >\r\n                <td>{creditNote.credit_code}</td>\r\n                <td>{creditNote.sa_date}</td>\r\n                <td>{creditNote.amount}</td>\r\n                <td>{creditNote.balance}</td>\r\n                <td>{creditNote.status}</td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        </div>\r\n      );\r\n    } else if (isSelectedPaymentType == \"CARD\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          <div className=\"row\">\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Select Card\r\n                <NormalSelect\r\n                  placeholder=\"Search type...\"\r\n                  options={paytableData}\r\n                  value={cardField.pay_typeid}\r\n                  name=\"pay_typeid\"\r\n                  onChange={this.handleCreditChange}\r\n                />\r\n              </div>\r\n              {this.validator.message(\r\n                \"cardFieldType\",\r\n                cardField.pay_typeid,\r\n                \"required\"\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Card No\r\n                <NormalInput\r\n                  value={cardField.pay_rem1}\r\n                  name=\"pay_rem1\"\r\n                  onChange={this.handleChangeCard}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Name\r\n                <NormalInput\r\n                  value={cardField.pay_rem2}\r\n                  name=\"pay_rem2\"\r\n                  onChange={this.handleChangeCard}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Exp Month\r\n                <NormalInput\r\n                  value={cardField.pay_rem3}\r\n                  name=\"pay_rem3\"\r\n                  onChange={this.handleChangeCard}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Exp Year\r\n                <NormalInput\r\n                  value={cardField.pay_rem4}\r\n                  name=\"pay_rem4\"\r\n                  onChange={this.handleChangeCard}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-2\">\r\n              <div className=\"input-group\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  className=\"col-12 mt-4 ml-2\"\r\n                  label=\"CONFIRM\"\r\n                  onClick={() => this.addCreditCard()}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-2\">\r\n              <div className=\"input-group\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  className=\"col-12 mt-4 ml-2\"\r\n                  label=\"CANCEL\"\r\n                  onClick={() => this.setState({ isOpenSubPayment: false })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (isSelectedPaymentType == \"Multiple\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          <div className=\"row\">\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                <Label className=\"col-12 fs-15\">Choose Option</Label>\r\n                <NormalSelect\r\n                  placeholder=\"Search type...\"\r\n                  options={paytableData}\r\n                  value={payTableDropDownValue}\r\n                  name=\"payTableDropDownValue\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      insideRadioButtonData = <div></div>;\r\n    }\r\n    let payGroupDataContent = [];\r\n    payGroupData.forEach((item, i) => {\r\n      payGroupDataContent.push(\r\n        <div className=\"col-md-1\" style={{ width: \"100px\", margin: \"50px\" }}>\r\n          <img\r\n            src={helpers.getUrl() + \"media/\" + item.picturelocation}\r\n            label={item.label}\r\n            onClick={() => this.addNewPaymentData(item.value, item.label)}\r\n            style={{cursor:'pointer'}}\r\n          />\r\n          <br />\r\n          <center>\r\n            <p\r\n              style={{ width: \"100px\",textAlign: 'center'}}\r\n            >\r\n              {item.label}\r\n            </p>\r\n          </center>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    let { cartData, tokenDetails } = this.props;\r\n    this.checkTypeOfCartItemContainsDeposit(cartData);\r\n\r\n    let userAddedPayTableData = (\r\n      <table className=\"table table-bordered\">\r\n        {this.state.selectedCards.map((selectedCards, index) => (\r\n          <tr key={index}>\r\n            <td className=\"fs-18\">\r\n              {this.getPayTableNameBasedOnId(selectedCards.pay_typeid)}\r\n            </td>\r\n            <td className=\"fs-18\" style={{ textAlign: \"right\" }}>\r\n              {selectedCards.pay_amt.toFixed(2)}\r\n            </td>\r\n            <td>\r\n              <img\r\n                onClick={this.removeCards(selectedCards)}\r\n                width=\"30px\"\r\n                height=\"30px\"\r\n                src={deleteIcon}\r\n                alt=\"\"\r\n              />\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </table>\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <div className=\"row\">\r\n          <NormalModal\r\n            className={\"payment-modal\"}\r\n            style={{ minWidth: \"800px\" }}\r\n            modal={isOpenSubPayment}\r\n            handleModal={this.handleDialog}\r\n          >\r\n            <img\r\n              onClick={this.handleDialog}\r\n              className=\"close cursor-pointer\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <center><p className=\"fs-18 f-600\">{displayModelPaymentType}</p></center><br/>\r\n            {insideRadioButtonData}\r\n          </NormalModal>\r\n          <div className=\"col-12 \">\r\n            <div className=\"row \">\r\n              <Label className=\"col-2 fs-18\">Enter Amount</Label>\r\n              <div className=\"col-2\">\r\n                <NormalInput\r\n                  value={this.state.txtUserPayAmount}\r\n                  onChange={this.handleChangeTextBox.bind(this)}\r\n                />\r\n\r\n                {this.validator.message(\r\n                  \"Amount\",\r\n                  this.state.txtUserPayAmount,\r\n                  \"required|numeric|min:0,num\"\r\n                )}\r\n                {this.validator.message(\r\n                  \"Amount\",\r\n                  this.state.txtUserPayAmount,\r\n                  \"required|numeric|max:\" + this.state.balance + \",num\"\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-12 \">\r\n            <h4>Select Payment Method</h4>\r\n          </div>\r\n          <div className=\"row col-12 paymentGroup\">{payGroupDataContent}</div>\r\n        </div>\r\n        <div className=\"make-payment-section mb-4\">\r\n          <div className=\"row pl-3\">\r\n            {/* <div className=\"text-right f-600\">Balance: {Number(balance).toFixed(2)}</div> */}\r\n            <div className=\"row \">\r\n              <div className=\"col-8 \">\r\n                <div className=\"p-2 ml-1 payment fs-12\">\r\n                  {userAddedPayTableData}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-4 \">\r\n                <div className=\"p-2 ml-1 payment\">\r\n                  <p>List of selection's</p>\r\n\r\n                  <div className=\"row fs-14\">\r\n                    <div className=\"col-7\">Subtotal</div>\r\n                    <div className=\"col-5\">\r\n                      {tokenDetails.currency} {responseData.subtotal}\r\n                    </div>\r\n                    <div className=\"col-7\">\r\n                      Discount ({tokenDetails.currency})\r\n                    </div>\r\n                    <div className=\"col-5\">\r\n                      {tokenDetails.currency} {responseData.discount}\r\n                    </div>\r\n                    <div className=\"col-7\">Transac amount</div>\r\n                    <div className=\"col-5\">\r\n                      {tokenDetails.currency} {responseData.trans_amt}\r\n                    </div>\r\n                    <div className=\"col-7\">Deposit</div>\r\n                    <div className=\"col-5\">\r\n                      {tokenDetails.currency} {responseData.deposit_amt}\r\n                    </div>\r\n                    <div className=\"col-7\">{responseData.tax_lable}</div>\r\n                    <div className=\"col-5\">\r\n                      {tokenDetails.currency} {responseData.tax_amt}\r\n                    </div>\r\n                    <div className=\"col-12 fs-22 text-center mt-5\">\r\n                      Billing Amount\r\n                    </div>\r\n                    <div className=\"col-12 fs-22 f-700 text-center text-orenge\">\r\n                      {tokenDetails.currency} {responseData.billable_amount}\r\n                    </div>\r\n                    <div className=\"col-12 f-600 text-center mt-5\">\r\n                      Balance Amount: {Number(balance).toFixed(2)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {isTreatmentDoneButton ? (\r\n            <div className=\"make-payment mt-3 text-center\">\r\n              <NormalButton\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"TREATMENT DONE\"\r\n                onClick={() => this.handleTreatmentDone()}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          <div className=\"make-payment mt-3 text-center\">\r\n            {this.state.isMakePaymentButtonClicked == \"true\" ? (\r\n              <NormalButton\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Make payment\"\r\n                disabled={true}\r\n              />\r\n            ) : (\r\n              <NormalButton\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Make payment \"\r\n                onClick={() => this.handleSubmit()}\r\n                disabled={this.state.selectedCards.length <= 0 || balance > 0}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  appointmentDetail: state.appointment.appointmentDetail,\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  tokenDetails: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return bindActionCreators(\r\n    {\r\n      getPayment,\r\n      getCommonApi,\r\n      createPayment,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const Payment = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(MakePaymentClass);\r\n"]},"metadata":{},"sourceType":"module"}