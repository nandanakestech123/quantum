{"ast":null,"code":"/**\r\n * DevExtreme (viz/tree_map/selection.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _tree_map = _interopRequireDefault(require(\"./tree_map.base\"));\n\nvar _node = _interopRequireDefault(require(\"./node\"));\n\nvar _helpers = require(\"../core/helpers\");\n\nvar _common = require(\"./common\");\n\nvar _utils = require(\"../core/utils\");\n\nvar _array = require(\"../../core/utils/array\");\n\nrequire(\"./api\");\n\nrequire(\"./states\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar proto = _tree_map.default.prototype;\nvar nodeProto = _node.default.prototype;\nvar MODE_NONE = 0;\nvar MODE_SINGLE = 1;\nvar MODE_MULTIPLE = 2;\nvar STATE_CODE = 2;\nproto._eventsMap.onSelectionChanged = {\n  name: \"selectionChanged\"\n};\n(0, _helpers.expand)(proto._handlers, \"calculateAdditionalStates\", function (states, options) {\n  states[2] = options.selectionStyle ? (0, _common.buildRectAppearance)(options.selectionStyle) : {};\n});\nnodeProto.statesMap[2] = nodeProto.statesMap[3] = STATE_CODE;\nnodeProto.additionalStates.push(2);\n(0, _helpers.expand)(proto, \"_onNodesCreated\", function () {\n  this._selectionList.length = 0;\n});\n(0, _helpers.expand)(proto, \"_extendProxyType\", function (proto) {\n  var that = this;\n\n  proto.select = function (state) {\n    that._selectNode(this._id, !!state);\n  };\n\n  proto.isSelected = function () {\n    return (0, _array.inArray)(this._id, that._selectionList) >= 0;\n  };\n\n  that._selectionList = [];\n});\n\n_tree_map.default.addChange({\n  code: \"SELECTION_MODE\",\n  handler: function () {\n    var that = this;\n    var option = (0, _utils.normalizeEnum)(that._getOption(\"selectionMode\", true));\n    var selectionList = that._selectionList;\n    var tmp;\n    var mode = \"none\" === option ? MODE_NONE : \"multiple\" === option ? MODE_MULTIPLE : MODE_SINGLE;\n\n    if (mode === MODE_SINGLE && selectionList.length > 1) {\n      tmp = selectionList.pop();\n      that.clearSelection();\n      selectionList.push(tmp);\n    } else {\n      if (mode === MODE_NONE) {\n        that.clearSelection();\n      }\n    }\n\n    that._selectionMode = mode;\n  },\n  isThemeDependent: true,\n  isOptionChange: true,\n  option: \"selectionMode\"\n});\n\n(0, _helpers.expand)(proto, \"_applyTilesAppearance\", function () {\n  if (this._selectionList.length) {\n    bringSelectedTilesToForeground(this._nodes, this._selectionList);\n  }\n});\nvar tileToFront = [leafToFront, groupToFront];\n\nfunction bringSelectedTilesToForeground(nodes, selectionList) {\n  var i;\n  var ii = selectionList.length;\n  var node;\n\n  for (i = 0; i < ii; ++i) {\n    node = nodes[selectionList[i]];\n    tileToFront[Number(node.isNode())](node.tile);\n  }\n}\n\nfunction leafToFront(content) {\n  content.toForeground();\n}\n\nfunction groupToFront(content) {\n  content.outer.toForeground();\n  content.inner.toForeground();\n}\n\nproto._applySelectionState = function (index, state) {\n  var node = this._nodes[index];\n  node.setState(STATE_CODE, state);\n\n  this._eventTrigger(\"selectionChanged\", {\n    node: node.proxy\n  });\n};\n\nproto._selectNode = function (index, state) {\n  var that = this;\n  var selectionList;\n  var k;\n  var tmp;\n\n  if (that._selectionMode !== MODE_NONE) {\n    that._context.suspend();\n\n    selectionList = that._selectionList;\n    k = (0, _array.inArray)(index, selectionList);\n\n    if (state && k === -1) {\n      if (that._selectionMode === MODE_SINGLE) {\n        if (selectionList.length) {\n          tmp = selectionList.pop();\n\n          that._applySelectionState(tmp, false);\n        }\n      }\n\n      selectionList.push(index);\n\n      that._applySelectionState(index, true);\n    } else {\n      if (!state && k >= 0) {\n        selectionList.splice(k, 1);\n\n        that._applySelectionState(index, false);\n      }\n    }\n\n    that._context.resume();\n  }\n};\n\nproto.clearSelection = function () {\n  var that = this;\n  var selectionList = that._selectionList;\n  var i;\n  var ii = selectionList.length;\n\n  if (that._selectionMode !== MODE_NONE) {\n    that._context.suspend();\n\n    for (i = 0; i < ii; ++i) {\n      that._applySelectionState(selectionList[i], false);\n    }\n\n    selectionList.length = 0;\n\n    that._context.resume();\n  }\n};","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/tree_map/selection.js"],"names":["_tree_map","_interopRequireDefault","require","_node","_helpers","_common","_utils","_array","obj","__esModule","proto","default","prototype","nodeProto","MODE_NONE","MODE_SINGLE","MODE_MULTIPLE","STATE_CODE","_eventsMap","onSelectionChanged","name","expand","_handlers","states","options","selectionStyle","buildRectAppearance","statesMap","additionalStates","push","_selectionList","length","that","select","state","_selectNode","_id","isSelected","inArray","addChange","code","handler","option","normalizeEnum","_getOption","selectionList","tmp","mode","pop","clearSelection","_selectionMode","isThemeDependent","isOptionChange","bringSelectedTilesToForeground","_nodes","tileToFront","leafToFront","groupToFront","nodes","i","ii","node","Number","isNode","tile","content","toForeground","outer","inner","_applySelectionState","index","setState","_eventTrigger","proxy","k","_context","suspend","splice","resume"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/tree_map/selection.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _tree_map = _interopRequireDefault(require(\"./tree_map.base\"));\r\nvar _node = _interopRequireDefault(require(\"./node\"));\r\nvar _helpers = require(\"../core/helpers\");\r\nvar _common = require(\"./common\");\r\nvar _utils = require(\"../core/utils\");\r\nvar _array = require(\"../../core/utils/array\");\r\nrequire(\"./api\");\r\nrequire(\"./states\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar proto = _tree_map.default.prototype;\r\nvar nodeProto = _node.default.prototype;\r\nvar MODE_NONE = 0;\r\nvar MODE_SINGLE = 1;\r\nvar MODE_MULTIPLE = 2;\r\nvar STATE_CODE = 2;\r\nproto._eventsMap.onSelectionChanged = {\r\n    name: \"selectionChanged\"\r\n};\r\n(0, _helpers.expand)(proto._handlers, \"calculateAdditionalStates\", function(states, options) {\r\n    states[2] = options.selectionStyle ? (0, _common.buildRectAppearance)(options.selectionStyle) : {}\r\n});\r\nnodeProto.statesMap[2] = nodeProto.statesMap[3] = STATE_CODE;\r\nnodeProto.additionalStates.push(2);\r\n(0, _helpers.expand)(proto, \"_onNodesCreated\", function() {\r\n    this._selectionList.length = 0\r\n});\r\n(0, _helpers.expand)(proto, \"_extendProxyType\", function(proto) {\r\n    var that = this;\r\n    proto.select = function(state) {\r\n        that._selectNode(this._id, !!state)\r\n    };\r\n    proto.isSelected = function() {\r\n        return (0, _array.inArray)(this._id, that._selectionList) >= 0\r\n    };\r\n    that._selectionList = []\r\n});\r\n_tree_map.default.addChange({\r\n    code: \"SELECTION_MODE\",\r\n    handler: function() {\r\n        var that = this;\r\n        var option = (0, _utils.normalizeEnum)(that._getOption(\"selectionMode\", true));\r\n        var selectionList = that._selectionList;\r\n        var tmp;\r\n        var mode = \"none\" === option ? MODE_NONE : \"multiple\" === option ? MODE_MULTIPLE : MODE_SINGLE;\r\n        if (mode === MODE_SINGLE && selectionList.length > 1) {\r\n            tmp = selectionList.pop();\r\n            that.clearSelection();\r\n            selectionList.push(tmp)\r\n        } else {\r\n            if (mode === MODE_NONE) {\r\n                that.clearSelection()\r\n            }\r\n        }\r\n        that._selectionMode = mode\r\n    },\r\n    isThemeDependent: true,\r\n    isOptionChange: true,\r\n    option: \"selectionMode\"\r\n});\r\n(0, _helpers.expand)(proto, \"_applyTilesAppearance\", function() {\r\n    if (this._selectionList.length) {\r\n        bringSelectedTilesToForeground(this._nodes, this._selectionList)\r\n    }\r\n});\r\nvar tileToFront = [leafToFront, groupToFront];\r\n\r\nfunction bringSelectedTilesToForeground(nodes, selectionList) {\r\n    var i;\r\n    var ii = selectionList.length;\r\n    var node;\r\n    for (i = 0; i < ii; ++i) {\r\n        node = nodes[selectionList[i]];\r\n        tileToFront[Number(node.isNode())](node.tile)\r\n    }\r\n}\r\n\r\nfunction leafToFront(content) {\r\n    content.toForeground()\r\n}\r\n\r\nfunction groupToFront(content) {\r\n    content.outer.toForeground();\r\n    content.inner.toForeground()\r\n}\r\nproto._applySelectionState = function(index, state) {\r\n    var node = this._nodes[index];\r\n    node.setState(STATE_CODE, state);\r\n    this._eventTrigger(\"selectionChanged\", {\r\n        node: node.proxy\r\n    })\r\n};\r\nproto._selectNode = function(index, state) {\r\n    var that = this;\r\n    var selectionList;\r\n    var k;\r\n    var tmp;\r\n    if (that._selectionMode !== MODE_NONE) {\r\n        that._context.suspend();\r\n        selectionList = that._selectionList;\r\n        k = (0, _array.inArray)(index, selectionList);\r\n        if (state && k === -1) {\r\n            if (that._selectionMode === MODE_SINGLE) {\r\n                if (selectionList.length) {\r\n                    tmp = selectionList.pop();\r\n                    that._applySelectionState(tmp, false)\r\n                }\r\n            }\r\n            selectionList.push(index);\r\n            that._applySelectionState(index, true)\r\n        } else {\r\n            if (!state && k >= 0) {\r\n                selectionList.splice(k, 1);\r\n                that._applySelectionState(index, false)\r\n            }\r\n        }\r\n        that._context.resume()\r\n    }\r\n};\r\nproto.clearSelection = function() {\r\n    var that = this;\r\n    var selectionList = that._selectionList;\r\n    var i;\r\n    var ii = selectionList.length;\r\n    if (that._selectionMode !== MODE_NONE) {\r\n        that._context.suspend();\r\n        for (i = 0; i < ii; ++i) {\r\n            that._applySelectionState(selectionList[i], false)\r\n        }\r\n        selectionList.length = 0;\r\n        that._context.resume()\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}