{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalButton,NormalInput,NormalSelect,InputSearch,NormalModal,TableWrapper,NormalCheckbox,Pagination}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import _ from\"lodash\";import{history}from\"helpers\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import SimpleReactValidator from\"simple-react-validator\";import{SelectStaff}from\"./treatmentDone\";import{Reversal}from\"./reversal\";import service from\"assets/images/make-up-brush.png\";// import Discount from './cart/discount';\nimport closeIcon from\"assets/images/close.png\";import{FormGroup,Label,Input}from\"reactstrap\";import{TreatmentHistoryCart}from\"./TreatmentHistoryCart\";import{Nav,NavItem,NavLink,TabContent,TabPane}from\"reactstrap\";import classnames from\"classnames\";import{Toast}from\"service/toast\";import{withTranslation}from\"react-i18next\";import{max}from\"moment\";export var TreatmentDoneClass=/*#__PURE__*/function(_Component){_inherits(TreatmentDoneClass,_Component);var _super=_createSuper(TreatmentDoneClass);function TreatmentDoneClass(){var _this;_classCallCheck(this,TreatmentDoneClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={tstaffList:[],headerDetails:[{label:\"Branch\"},{label:\"Date\",sortKey:false,width:\"110px\",divClass:\"justify-content-end text-right\"},{label:\"Treatment\",width:\"120px\"},{label:\"Trans Ref\",sortKey:false,width:\"50px\"},//{ label: 'Type', sortKey: false, width: \"55px\" },\n// { label: 'Exp-Date', sortKey: false, width: \"80px\" },\n{label:\"Amount\",sortKey:false,width:\"50px\",divClass:\"justify-content-end text-right\"},{label:\"Treat-Code\",sortKey:false,width:\"105px\"},{label:\"TD\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"},{label:\"Rev\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"},{label:\"Open\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"},{label:\"AR\",sortKey:false,width:\"35px\",divClass:\"justify-content-end text-right\"},{label:\"Session\",sortKey:false,width:\"55px\",divClass:\"justify-content-center\"},{label:\"Redeem\",sortKey:false,width:\"55px\",divClass:\"justify-content-center\"},{label:\"Reversal\",sortKey:false,width:\"55px\",divClass:\"justify-content-center\"},{label:\"Exchange\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"}],// cartData: {},\nyearList:[],selectedYear:new Date().getFullYear(),isOpenTreatmentDone:false,tsStaff:{},workPoint:0,isOpenReversal:false,checkBoxConfirmReversal:[],selectedSession:\"\",selectedItemTreatmentIds:[],activeMenu:\"treatmentdone\",productCard:[],list:[],isOpenExchangeService:false,page:1,rangeId:\"\",menuId:\"\",rangeName:\"\",rangeOption:[],ExchangeItem:{},SelectedExchangeItem:{},cust_data:{}};_this.componentDidMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});_this.props.getCommonApi(\"treatmentdone/Year/\").then(function(key){var status=key.status,data=key.data;var yearList=_this.state.yearList;var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;yearList.push({value:value,label:value});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({yearList:yearList});});_this.getCart();};_this.handleCheckboxChangeWithNormalCheckBox=function(item){var newArray=[].concat(_toConsumableArray(_this.state.checkBoxConfirmReversal),[item.target.name]);if(_this.state.checkBoxConfirmReversal.includes(item.target.name)){newArray=newArray.filter(function(day){return day!==item.target.name;});}_this.setState({checkBoxConfirmReversal:newArray});};_this.getCart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$state,roomList,sourceList,staffList,cartData,duration,tstaffList,selectedYear,cust_data,custId;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(_this.props,\"sfgdfsgdfghgf\");_this$state=_this.state,roomList=_this$state.roomList,sourceList=_this$state.sourceList,staffList=_this$state.staffList,cartData=_this$state.cartData,duration=_this$state.duration,tstaffList=_this$state.tstaffList,selectedYear=_this$state.selectedYear,cust_data=_this$state.cust_data;custId=\"\";if(_this.props.match.params.id){custId=_this.props.match.params.id;}else{custId=_this.props.basicApptDetail.custId;}_this.props.getCommonApi(\"treatmentdone/?year=\".concat(selectedYear,\"&cust_id=\").concat(custId)).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var formFields;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cartData=key;console.log(key,\"Service Redeem List data\");tstaffList=[];tstaffList=key.data;cust_data=key.cust_data;_context.next=7;return _this.setState({tstaffList:tstaffList,cust_data:cust_data});case 7:if(!cust_data){_context.next=14;break;}formFields={};formFields[\"custId\"]=_this.props.match.params.id;formFields[\"custName\"]=cust_data.cust_name;formFields[\"cust_refer\"]=cust_data.cust_refer;_context.next=14;return _this.props.updateForm(\"basicApptDetail\",formFields);case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());case 5:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleYearChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _ref3$target,value,name,selectedYear;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;selectedYear=_this.state.selectedYear;selectedYear=value;_context3.next=5;return _this.setState({selectedYear:selectedYear});case 5:_this.getCart();case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref4.apply(this,arguments);};}();_this.getDataFromRes=function(data){var _this$state2=_this.state,formFields=_this$state2.formFields,cartData=_this$state2.cartData,updateFields=_this$state2.updateFields,postFields=_this$state2.postFields;formFields[\"Item\"]=data.value.Item;formFields[\"Price\"]=data.value.Price;formFields[\"Room\"]=data.value.Room;updateFields[\"Room\"]=data.value.Room;formFields[\"Source\"]=data.value.Source;updateFields[\"Source\"]=data.value.Source;formFields[\"add_duration\"]=data.value.add_duration;formFields[\"new_remark\"]=data.value.new_remark;updateFields[\"new_remark\"]=data.value.new_remark;postFields[\"times\"]=data.value.times;postFields[\"work_point\"]=data.value.work_point;_this.setState({formFields:formFields,updateFields:updateFields,postFields:postFields});};_this.handleSubmit=function(id){};_this.handleDialog=function(){_this.setState({isOpenTreatmentDone:false,isOpenReversal:false,checkBoxConfirmReversal:[],isOpenExchangeService:false,isHandleExchangeConfirmation:false});_this.getCart();};_this.handleSearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;_this.props.getCommonApi(\"custappt/?search=\".concat(searchString)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});},500);}_this.debouncedFn();};_this.handleCartCreated=function(data,price,id){var basicApptDetail=_this.props.basicApptDetail;var tstaffList=_this.state.tstaffList;var payload=[];var _iterator2=_createForOfIteratorHelper(tstaffList),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;var reverseTreatmentIds=[];//reverseTreatmentIds = key.treatmentids.reverse();\nvar ItemTreatmentIds=key.treatmentids;reverseTreatmentIds=ItemTreatmentIds.sort(function(a,b){return b-a;});if(key.sel===true){var obj={cust_noid:_this.props.match.params.id,cart_date:dateFormat(new Date(),\"yyyy-mm-dd\"),itemcodeid:key.stockid,price:key.unit_amount,item_uom:null,treatment_account:key.TreatmentAccountid,treatment:reverseTreatmentIds.slice(0,key.session),ori_stockid:null};payload.push(obj);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(payload.length>0){var test=payload;console.log(\"payload-data\",test);_this.props.getCommonApi(\"itemcart/Check/?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(_this.props.match.params.id)).then(function(res){if(res.data.length===0){_this.props.commonCreateApi(\"itemcart/TrmtDoneCartCreate/\",payload).then(function(res){// this.props.handleCartCreated()\n_this.setState({activeTab:\"treatment\",isOpenPriceModal:false});history.push(\"/admin/cart\");});}else{_this.props.commonCreateApi(\"itemcart/TrmtDoneCartCreate/?cart_id=\".concat(res.cart_id),payload).then(function(res){// this.props.handleCartCreated()\n_this.setState({activeTab:\"treatment\",isOpenPriceModal:false});history.push(\"/admin/cart\");});}});}};_this.handleCheckout=function(){var isOpenPayment=_this.state.isOpenPayment;isOpenPayment=true;_this.setState({isOpenPayment:isOpenPayment});};_this.handleChange=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref5){var _ref5$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;formFields=_this.state.formFields;formFields[name]=value;_context4.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref6.apply(this,arguments);};}();_this.handlePostChange=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref7){var _ref7$target,value,name,postFields;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_ref7$target=_ref7.target,value=_ref7$target.value,name=_ref7$target.name;postFields=_this.state.postFields;postFields[name]=value;_context5.next=5;return _this.setState({postFields:postFields});case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref8.apply(this,arguments);};}();_this.handleUpdateChange=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref9){var _ref9$target,value,name,updateFields,event;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref9$target=_ref9.target,value=_ref9$target.value,name=_ref9$target.name;updateFields=_this.state.updateFields;updateFields[name]=value;_context6.next=5;return _this.setState({updateFields:updateFields});case 5:event={target:{value:value,name:name}};// this.handleUpdatestaff(event);\ncase 6:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x5){return _ref10.apply(this,arguments);};}();_this.handleAddstaff=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(item){var _this$state3,tstaffList,selectedSession,selectedItemTreatmentIds,ItemTreatmentIds,reverseTreatmentIds,unit_rate,qualifiedAmount;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!item.is_allow){_context7.next=15;break;}_this$state3=_this.state,tstaffList=_this$state3.tstaffList,selectedSession=_this$state3.selectedSession,selectedItemTreatmentIds=_this$state3.selectedItemTreatmentIds;selectedSession=item.session;// let reverseTreatmentIds = [];\n// reverseTreatmentIds = item.treatmentids.reverse();\nItemTreatmentIds=item.treatmentids;reverseTreatmentIds=ItemTreatmentIds.sort(function(a,b){return b-a;});if(selectedSession==0){selectedSession=1;}selectedItemTreatmentIds=reverseTreatmentIds.slice(0,selectedSession);unit_rate=item.unit_amount;qualifiedAmount=selectedSession*unit_rate;_this.setState({selectedSession:selectedSession,selectedItemTreatmentIds:selectedItemTreatmentIds});/* let test=0;\r\n        const currentParentCodeBalance = tstaffList.filter(\r\n            (res) => res.treatment_parentcode ===  item.treatment_parentcode\r\n          ).reduce((sum, currentValue) => {\r\n            return  currentValue.balance;\r\n          }, 0);\r\n        const currentParentCodeSelectedStaffValue = tstaffList.filter(\r\n            (res) => res.treatment_parentcode ===  item.treatment_parentcode && res.staff!=null\r\n            ).reduce((sum, currentValue) => {\r\n                return parseFloat((eval(sum))) + parseFloat((eval(currentValue.unit_amount)));\r\n              }, 0);\r\n        \r\n        if(item.staff==null)\r\n        {\r\n            test=parseFloat((eval(currentParentCodeSelectedStaffValue))) + parseFloat((eval(item.unit_amount))) ;\r\n        }\r\n        else{\r\n            test=parseFloat((eval(currentParentCodeSelectedStaffValue))) - parseFloat((eval(item.unit_amount))) ;\r\n        }\r\n        */ //if (currentParentCodeBalance >= test) {\n// if (item.balance >= qualifiedAmount) {\n//   let { tstaffList, formFields, cartData, postFields } = this.state;\n//   await this.setState({ tsStaff: item });\n//   this.setState({\n//     isOpenTreatmentDone: true,\n//   });\n// } else {\n//   this.handleDialog();\n//   Toast({\n//     type: \"error\",\n//     message: \"Insufficient balance to redeem\",\n//   });\n// }\n_context7.next=12;return _this.setState({tsStaff:item});case 12:_this.setState({isOpenTreatmentDone:true});_context7.next=16;break;case 15:Toast({type:\"error\",message:\"Treatment done is not allowed in other outlets\"});case 16:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x6){return _ref11.apply(this,arguments);};}();_this.handleUpdatestaff=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(event,item,index){var _this$state4,tstaffList,formFields,cartData,updateFields,data;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this$state4=_this.state,tstaffList=_this$state4.tstaffList,formFields=_this$state4.formFields,cartData=_this$state4.cartData,updateFields=_this$state4.updateFields;tstaffList[index][event.target.name]=event.target.value;_this.setState({tstaffList:tstaffList});data={};if(event.target.name===\"appt_fr_time\"){data={appt_fr_time:event.target.value,add_duration:formFields[\"add_duration\"]};}if(event.target.name===\"add_duration\"){data={appt_fr_time:item.appt_fr_time,add_duration:event.target.value};}// if (updateFields.Source && updateFields.Room) {\n_this.props.commonPatchApi(\"tmpitemhelper/\".concat(item.id,\"/?Room_Codeid=\").concat(updateFields.Room,\"&Source_Codeid=\").concat(updateFields.Source,\"&new_remark=\").concat(updateFields.new_remark),data).then(function(){_this.getCart();});// } else {\n//     this.setState({ showUpdateError: true })\n// }\ncase 7:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x7,_x8,_x9){return _ref12.apply(this,arguments);};}();_this.handleClearLine=function(){_this.props.commonDeleteApi(\"tmpitemhelper/delete/?clear_all=0&cartid=\".concat(_this.props.cartId)).then(function(){_this.getCart();});};_this.handleClearAll=function(){_this.props.commonDeleteApi(\"tmpitemhelper/delete/?clear_all=1&cartid=\".concat(_this.props.cartId)).then(function(){var _this$state5=_this.state,formFields=_this$state5.formFields,postFields=_this$state5.postFields;formFields[\"work_point\"]=\"\";postFields[\"times\"]=\"\";_this.setState({formFields:formFields,postFields:postFields});_this.getCart();});};_this.handleReversalTreatmentAll=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var treatmentIds;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:treatmentIds=_this.state.checkBoxConfirmReversal;_context9.next=3;return _this.setState({treatmentIds:treatmentIds});case 3:_this.setState({isOpenReversal:true});case 4:case\"end\":return _context9.stop();}}},_callee9);}));_this.handleReversalTreatment=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(item){var reverseTreatmentIds,selectedSession,ItemTreatmentIds,TreatmentIds;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!item.is_allow){_context10.next=13;break;}reverseTreatmentIds=[];selectedSession=_this.state.selectedSession;selectedSession=item.session;ItemTreatmentIds=item.treatmentids;TreatmentIds=ItemTreatmentIds.sort(function(a,b){return b-a;});if(selectedSession==0){selectedSession=1;}reverseTreatmentIds=TreatmentIds.slice(0,selectedSession);_context10.next=10;return _this.setState({treatmentIds:reverseTreatmentIds,selectedSession:selectedSession});case 10:_this.setState({isOpenReversal:true});_context10.next=14;break;case 13:Toast({type:\"error\",message:\"You are not allowed to do this transaction\"});case 14:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x10){return _ref14.apply(this,arguments);};}();_this.handleReverse=function(item,index){var tstaffList=_this.state.tstaffList;tstaffList[index][\"rev\"]=true;_this.setState({tstaffList:tstaffList});// onClick={this.handleReversalTreatment}\n};_this.changeIndexSession=function(index,value,item){if(item.is_allow){if(Number(value)<=Number(item.open)){var tstaffList=_this.state.tstaffList;tstaffList[index][\"session\"]=value;_this.setState({tstaffList:tstaffList});}else{Toast({type:\"error\",message:\"Please enter valid session\"});}}else{Toast({type:\"error\",message:\"You are not allowed to do this transaction\"});}};_this.toggle=function(tab){if(_this.state.activeMenu!==tab){_this.setState({activeMenu:tab});}};_this.getServices=function(query){var _query$page=query.page,page=_query$page===void 0?_this.state.page:_query$page,_query$menuId=query.menuId,menuId=_query$menuId===void 0?_this.state.menuId:_query$menuId,_query$rangeId=query.rangeId,rangeId=_query$rangeId===void 0?_this.state.rangeId:_query$rangeId;_this.props.getCommonApi(\"servicestock/?Item_Deptid=\".concat(menuId,\"&page=\").concat(page,\"&Item_Rangeid=\").concat(rangeId)).then(function(key){var status=key.status,data=key.data;if(status===200){_this.setState({productCard:data,list:data.dataList});}});};_this.getMenus=function(){var menuOption=_this.state.menuOption;menuOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"catalogitemdept/?Item_Dept=\".concat(\"SERVICE\")).then(function(res){// activeMenu = []\nconsole.log(\"sdfsdhfghjghj ress\",res);var _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;menuOption.push({value:key.id,label:key.itm_desc,code:key.itm_code,seq:key.itm_seq});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState({menuOption:menuOption});});};_this.getRange=function(){var _this$state6=_this.state,rangeOption=_this$state6.rangeOption,menuId=_this$state6.menuId;rangeOption=[];_this.props.getCommonApi(\"catalogitemrange?Item_Deptid=\".concat(menuId)).then(function(res){// activeMenu = []\nvar _iterator4=_createForOfIteratorHelper(res.data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var key=_step4.value;rangeOption.push({value:key.id,label:key.itm_desc});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this.setState({rangeOption:rangeOption});});};_this.handleExchangeClick=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(index,item){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!item.is_allow){_context11.next=15;break;}if(!item.sel){_context11.next=12;break;}_context11.next=4;return _this.setState({ExchangeItem:[]});case 4:_this.getMenus();_this.getRange();_this.getServices({});_context11.next=9;return _this.setState({isOpenExchangeService:true,ExchangeItem:item});case 9:console.log(_this.state.ExchangeItem,\"selected row of treatment done data - exchange item\");_context11.next=13;break;case 12:Toast({type:\"error\",message:\"Select Staff should not be empty\"});case 13:_context11.next=16;break;case 15:Toast({type:\"error\",message:\"You are not allowed to do this transaction\"});case 16:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x11,_x12){return _ref15.apply(this,arguments);};}();_this.handlePagination=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(page){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return _this.setState({page:page});case 2:_this.getServices({page:page});case 3:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x13){return _ref16.apply(this,arguments);};}();_this.handleMenuChange=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(_ref17){var _ref17$target,value,name,menuId;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_ref17$target=_ref17.target,value=_ref17$target.value,name=_ref17$target.name;menuId=Object.assign({},_this.state.menuId);menuId=value;_context13.next=5;return _this.setState({menuId:menuId});case 5:_this.getRange();_this.getServices({});case 7:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x14){return _ref18.apply(this,arguments);};}();_this.handleRangeChange=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(_ref19){var _ref19$target,value,name,rangeId,rangeName,rangeOption,_iterator5,_step5,key;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_ref19$target=_ref19.target,value=_ref19$target.value,name=_ref19$target.name;rangeId=Object.assign({},_this.state.rangeId);rangeName=Object.assign({},_this.state.rangeName);rangeOption=_this.state.rangeOption;rangeId=value;_iterator5=_createForOfIteratorHelper(rangeOption);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){key=_step5.value;if(key.value==value){rangeName=key.label;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_context14.next=9;return _this.setState({rangeId:rangeId,rangeName:rangeName});case 9:_this.getServices({});case 10:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x15){return _ref20.apply(this,arguments);};}();_this.handleSelectedService=/*#__PURE__*/function(){var _ref21=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(data){var ExchangeItem;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:ExchangeItem=_this.state.ExchangeItem;_context15.next=3;return _this.setState({SelectedExchangeItem:data});case 3:if(Number(data.item_price)>Number(ExchangeItem.unit_amount)){_this.setState({isHandleExchangeConfirmation:true});}else{_this.handleExchangePostAction();}case 4:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x16){return _ref21.apply(this,arguments);};}();_this.handleExchangePostAction=function(){var basicApptDetail=_this.props.basicApptDetail;var _this$state7=_this.state,ExchangeItem=_this$state7.ExchangeItem,SelectedExchangeItem=_this$state7.SelectedExchangeItem;var payload=[];var obj={cust_noid:_this.props.match.params.id,cart_date:dateFormat(new Date(),\"yyyy-mm-dd\"),itemcodeid:SelectedExchangeItem.id,price:ExchangeItem.unit_amount,item_uom:null,treatment_account:ExchangeItem.TreatmentAccountid,treatment:ExchangeItem.id,ori_stockid:ExchangeItem.stockid};payload.push(obj);console.log(payload,\"exchange input\");_this.props.getCommonApi(\"itemcart/Check/?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(_this.props.match.params.id)).then(function(res){if(res.data.length===0){_this.props.commonCreateApi(\"itemcart/TrmtDoneCartCreate/\",payload).then(function(res){console.log(res,\"result of exchnage final click\");_this.setState({activeTab:\"treatment\",isOpenExchangeService:false});history.push(\"/admin/cart\");});}else{_this.props.commonCreateApi(\"itemcart/TrmtDoneCartCreate/?cart_id=\".concat(res.cart_id),payload).then(function(res){// this.props.handleCartCreated()\n_this.setState({activeTab:\"treatment\",isOpenExchangeService:false});history.push(\"/admin/cart\");});}});};_this.handleDialogExchangeConfirm=function(){_this.setState({isHandleExchangeConfirmation:false,SelectedExchangeItem:{}});};return _this;}_createClass(TreatmentDoneClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state8=this.state,_this$state8$productC=_this$state8.productCard,productCard=_this$state8$productC===void 0?{}:_this$state8$productC,list=_this$state8.list,_this$state8$tstaffLi=_this$state8.tstaffList,tstaffList=_this$state8$tstaffLi===void 0?[]:_this$state8$tstaffLi,selectedYear=_this$state8.selectedYear,yearList=_this$state8.yearList,isOpenTreatmentDone=_this$state8.isOpenTreatmentDone,headerDetails=_this$state8.headerDetails,tsStaff=_this$state8.tsStaff,isOpenReversal=_this$state8.isOpenReversal,treatmentIds=_this$state8.treatmentIds,activeMenu=_this$state8.activeMenu,isOpenExchangeService=_this$state8.isOpenExchangeService,menuOption=_this$state8.menuOption,menuId=_this$state8.menuId,rangeOption=_this$state8.rangeOption,rangeId=_this$state8.rangeId,isHandleExchangeConfirmation=_this$state8.isHandleExchangeConfirmation,ExchangeItem=_this$state8.ExchangeItem,SelectedExchangeItem=_this$state8.SelectedExchangeItem,cust_data=_this$state8.cust_data;var localtStaffList=_toConsumableArray(tstaffList);var _this$props=this.props,basicApptDetail=_this$props.basicApptDetail,t=_this$props.t;var _productCard$dataList=productCard.dataList,dataList=_productCard$dataList===void 0?[]:_productCard$dataList,_productCard$meta=productCard.meta,meta=_productCard$meta===void 0?{}:_productCard$meta;var pagination=meta.pagination;return/*#__PURE__*/React.createElement(\"div\",{className:\"treatmentDone-menu\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"beautesoft-navlink customer-detail mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"filled-tabs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tabs-block\"},/*#__PURE__*/React.createElement(Nav,{tabs:true},/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:this.state.activeMenu===\"treatmentdone\"}),onClick:function onClick(){_this2.toggle(\"treatmentdone\");}},t(\"Treatment Done\"))),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:this.state.activeMenu===\"treatmenthistory\"}),onClick:function onClick(){_this2.toggle(\"treatmenthistory\");}},t(\"Treatment History\")))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"fs-15 clear-line\",label:\"Back\",outline:false,onClick:function onClick(){return history.push(\"/admin/cart\");}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-section ml-1 p-2 pr-0\"},/*#__PURE__*/React.createElement(TabContent,{activeTab:this.state.activeMenu},/*#__PURE__*/React.createElement(TabPane,{tabId:\"treatmentdone\"},activeMenu===\"treatmentdone\"?/*#__PURE__*/React.createElement(\"div\",{className:\"row treatment-done-new p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10 header\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 font-700 mb-3 title\"},t(\"Available Treatments\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex select-year\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pl-0 mb-2 name fs-16 py-2\"},t(\"Select Year\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:yearList,value:selectedYear,name:\"selectedYear\",onChange:this.handleYearChange,className:\"selected-year mb-2 py-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start align-self-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,t(\"Customer Name\"),\" : \",cust_data.cust_name),/*#__PURE__*/React.createElement(\"p\",null,t(\"Reference\"),\" : \",cust_data.cust_refer)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 cart-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"item-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination// pageMeta={pageMeta}\n// isEmpty={tstaffList.length === 0 ? true:false}\n},tstaffList.length>0?tstaffList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left \".concat(!item.iscurrentloggedinsalon?\"text-danger\":\"\")},item.site_code)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.treatment_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.course)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.transacno_ref)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.unit_amount)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.treatment_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.td)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.rev)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.open)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.ar)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"number\",style:{width:\"50px\"// textAlign: \"right\",\n},value:item.session,onChange:function onChange(e){return _this2.changeIndexSession(index,e.target.value,item);},className:\"text-right\",min:\"0\",max:item.open,disabled:item.session_flag&&item.session!==Number(0)?true:false})),/*#__PURE__*/React.createElement(\"td\",{style:{width:\"50px\"}},/*#__PURE__*/React.createElement(\"button\",{className:\"btnRedeem\",onClick:function onClick(){return _this2.handleAddstaff(item);}},t(\"Select\"))),/*#__PURE__*/React.createElement(\"td\",{style:{width:\"50px\"}},item.iscurrentloggedinsalon&&/*#__PURE__*/React.createElement(\"button\",{className:\"btnReversal\",onClick:function onClick(){return _this2.handleReversalTreatment(item);}},t(\"Select\"))),/*#__PURE__*/React.createElement(\"td\",{style:{width:\"50px\"}},item.exchange_flag&&/*#__PURE__*/React.createElement(\"button\",{className:\"btnExchange\",label:\"Exchange\",onClick:function onClick(){return _this2.handleExchangeClick(index,item);}},t(\"Select\"))));}):null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pt-4 action-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7 d-flex\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\" fs-15 confirm\",label:\"Confirm Treatment Done\",outline:false,onClick:function onClick(){return _this2.handleCartCreated();}})))))),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-exchange\",style:{minWidth:\"70%\"},modal:isOpenExchangeService,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 input-group pl-2 range-filter\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:menuOption,value:menuId,name:\"menuId\",onChange:this.handleMenuChange,className:\"py-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 input-group range-filter\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:rangeOption,value:rangeId,name:\"rangeId\",onChange:this.handleRangeChange,className:\"py-0\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},console.log(list,\"card list\"),/*#__PURE__*/React.createElement(\"div\",{className:\"services m-0 row\"},list.length>0?list.map(function(data,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 fs-12 p-2 cursor-pointer\",key:data.id,onClick:function onClick(){return _this2.handleSelectedService(data);}},/*#__PURE__*/React.createElement(\"div\",{className:\"service-tab p-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"service-ttl px-2 font-700 fs-11\"},data.item_desc),/*#__PURE__*/React.createElement(\"div\",{className:\"price px-2 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"non-retail\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-orenge font-700\"},\"$\"),/*#__PURE__*/React.createElement(\"span\",{className:\"text-orenge font-700\"},data.item_price?Number(data.item_price).toFixed(2):\"\"),/*#__PURE__*/React.createElement(\"span\",{className:\"foc-icon\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"32\",height:\"32\",className:\"cursor-pointer\",viewBox:\"0 0 32 32\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"circle\",{cx:\"16\",cy:\"16\",r:\"15.5\",fill:\"rgba(60, 64, 135, 0.31)\",stroke:\"#3C4087\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M3.996 11.456H9.42V12.476H5.22V15.152H9.18V16.172H5.22V20H3.996V11.456ZM14.3243 20.096C13.5163 20.096 12.8123 19.92 12.2123 19.568C11.6203 19.208 11.1603 18.7 10.8323 18.044C10.5123 17.388 10.3523 16.616 10.3523 15.728C10.3523 14.832 10.5123 14.056 10.8323 13.4C11.1523 12.744 11.6123 12.24 12.2123 11.888C12.8123 11.536 13.5163 11.36 14.3243 11.36C15.1403 11.36 15.8443 11.536 16.4362 11.888C17.0363 12.24 17.4963 12.744 17.8163 13.4C18.1363 14.056 18.2963 14.828 18.2963 15.716C18.2963 16.612 18.1363 17.388 17.8163 18.044C17.4963 18.7 17.0363 19.208 16.4362 19.568C15.8363 19.92 15.1323 20.096 14.3243 20.096ZM14.3243 19.088C15.1803 19.088 15.8443 18.796 16.3163 18.212C16.7963 17.628 17.0363 16.796 17.0363 15.716C17.0363 14.644 16.7963 13.82 16.3163 13.244C15.8443 12.66 15.1803 12.368 14.3243 12.368C13.4683 12.368 12.8043 12.66 12.3323 13.244C11.8603 13.82 11.6243 14.644 11.6243 15.716C11.6243 16.796 11.8603 17.628 12.3323 18.212C12.8123 18.796 13.4763 19.088 14.3243 19.088ZM23.7598 20.096C22.9358 20.096 22.2158 19.92 21.5998 19.568C20.9918 19.208 20.5238 18.7 20.1958 18.044C19.8678 17.388 19.7038 16.612 19.7038 15.716C19.7038 14.828 19.8678 14.056 20.1958 13.4C20.5238 12.744 20.9918 12.24 21.5998 11.888C22.2158 11.536 22.9358 11.36 23.7598 11.36C24.3438 11.36 24.8838 11.452 25.3798 11.636C25.8838 11.812 26.3078 12.072 26.6518 12.416L26.2198 13.328C25.8198 13 25.4238 12.764 25.0318 12.62C24.6478 12.468 24.2278 12.392 23.7718 12.392C22.8838 12.392 22.1958 12.68 21.7078 13.256C21.2278 13.832 20.9878 14.652 20.9878 15.716C20.9878 16.788 21.2278 17.616 21.7078 18.2C22.1958 18.776 22.8838 19.064 23.7718 19.064C24.2278 19.064 24.6478 18.992 25.0318 18.848C25.4238 18.696 25.8198 18.456 26.2198 18.128L26.6518 19.04C26.3078 19.384 25.8838 19.648 25.3798 19.832C24.8838 20.008 24.3438 20.096 23.7598 20.096Z\",fill:\"#3C4087\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"images\"},/*#__PURE__*/React.createElement(\"img\",{src:data.Stock_PIC,alt:\"\"}))));}):\"\",pagination&&/*#__PURE__*/React.createElement(Pagination,{handlePagination:this.handlePagination,pageMeta:pagination})))),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-reversal\",style:{minWidth:\"75%\"},modal:isOpenReversal,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(Reversal,{id:this.props.match.params.id,treatmentId:tsStaff.id,reversalId:treatmentIds,cartId:this.props.id,handleModal:this.handleDialog})),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-modal\",style:{minWidth:\"60%\"},modal:isOpenTreatmentDone,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(SelectStaff,{id:this.state.selectedItemTreatmentIds//id={tsStaff.id}\n,session:this.state.selectedSession,cartId:basicApptDetail.cartId,handleModal:this.handleDialog})),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-reversal\",style:{minWidth:\"432px\"},modal:isHandleExchangeConfirmation,handleModal:this.handleDialogExchangeConfirm},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialogExchangeConfirm,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"Confirmation\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2\"},/*#__PURE__*/React.createElement(\"p\",null,t(\"Service Price\"),\" : $\",SelectedExchangeItem.item_price,\"\\xA0\",t(\"larger than\")),/*#__PURE__*/React.createElement(\"p\",null,t(\"Previous Service Price\"),\" : $\",ExchangeItem.unit_amount)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2\"},/*#__PURE__*/React.createElement(\"p\",null,t(\"Are you sure want to continue\"),\" ?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Confirm\",mainbg:true,name:\"Exconfirm\",className:\"w-100 col-12\",onClick:this.handleExchangePostAction})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Cancel\",resetbg:true,name:\"ExCancel\",className:\"w-100 col-12\",onClick:this.handleDialogExchangeConfirm}))))))):null),/*#__PURE__*/React.createElement(TabPane,{tabId:\"treatmenthistory\"},activeMenu===\"treatmenthistory\"?/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-done-new p-3\"},/*#__PURE__*/React.createElement(TreatmentHistoryCart,{customerNumber:this.props.match.params.id})):null))));}}]);return TreatmentDoneClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{selected_cstomer:state.common.selected_cstomer,basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var TreatmentDone=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(TreatmentDoneClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Cart/treatmentDone/treatment.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","NormalCheckbox","Pagination","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","SelectStaff","Reversal","service","closeIcon","FormGroup","Label","Input","TreatmentHistoryCart","Nav","NavItem","NavLink","TabContent","TabPane","classnames","Toast","withTranslation","max","TreatmentDoneClass","state","tstaffList","headerDetails","label","sortKey","width","divClass","yearList","selectedYear","Date","getFullYear","isOpenTreatmentDone","tsStaff","workPoint","isOpenReversal","checkBoxConfirmReversal","selectedSession","selectedItemTreatmentIds","activeMenu","productCard","list","isOpenExchangeService","page","rangeId","menuId","rangeName","rangeOption","ExchangeItem","SelectedExchangeItem","cust_data","componentDidMount","validator","element","message","autoForceUpdate","props","then","key","status","data","value","push","setState","getCart","handleCheckboxChangeWithNormalCheckBox","item","newArray","target","name","includes","filter","day","console","log","roomList","sourceList","staffList","cartData","duration","custId","match","params","id","basicApptDetail","formFields","cust_name","cust_refer","handleYearChange","getDataFromRes","updateFields","postFields","Item","Price","Room","Source","add_duration","new_remark","times","work_point","handleSubmit","handleDialog","isHandleExchangeConfirmation","handleSearch","event","persist","debouncedFn","debounce","searchString","customerOption","handleCartCreated","price","payload","reverseTreatmentIds","ItemTreatmentIds","treatmentids","sort","a","b","sel","obj","cust_noid","cart_date","itemcodeid","stockid","unit_amount","item_uom","treatment_account","TreatmentAccountid","treatment","slice","session","ori_stockid","length","test","res","activeTab","isOpenPriceModal","cart_id","handleCheckout","isOpenPayment","handleChange","handlePostChange","handleUpdateChange","handleAddstaff","is_allow","unit_rate","qualifiedAmount","type","handleUpdatestaff","index","appt_fr_time","handleClearLine","cartId","handleClearAll","handleReversalTreatmentAll","treatmentIds","handleReversalTreatment","TreatmentIds","handleReverse","changeIndexSession","Number","open","toggle","tab","getServices","query","dataList","getMenus","menuOption","itm_desc","code","itm_code","seq","itm_seq","getRange","handleExchangeClick","handlePagination","handleMenuChange","Object","assign","handleRangeChange","handleSelectedService","item_price","handleExchangePostAction","handleDialogExchangeConfirm","localtStaffList","t","meta","pagination","active","map","iscurrentloggedinsalon","site_code","treatment_date","course","transacno_ref","treatment_code","td","rev","ar","e","session_flag","exchange_flag","minWidth","item_desc","toFixed","Stock_PIC","mapStateToProps","selected_cstomer","common","appointment","mapDispatchToProps","dispatch","TreatmentDone"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalButton,\r\n  NormalInput,\r\n  NormalSelect,\r\n  InputSearch,\r\n  NormalModal,\r\n  TableWrapper,\r\n  NormalCheckbox,\r\n  Pagination,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { SelectStaff } from \"./treatmentDone\";\r\nimport { Reversal } from \"./reversal\";\r\nimport service from \"assets/images/make-up-brush.png\";\r\n// import Discount from './cart/discount';\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { FormGroup, Label, Input } from \"reactstrap\";\r\nimport { TreatmentHistoryCart } from \"./TreatmentHistoryCart\";\r\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from \"reactstrap\";\r\nimport classnames from \"classnames\";\r\nimport { Toast } from \"service/toast\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { max } from \"moment\";\r\n\r\nexport class TreatmentDoneClass extends Component {\r\n  state = {\r\n    tstaffList: [],\r\n    headerDetails: [\r\n      { label: \"Branch\" },\r\n      {\r\n        label: \"Date\",\r\n        sortKey: false,\r\n        width: \"110px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Treatment\", width: \"120px\" },\r\n      { label: \"Trans Ref\", sortKey: false, width: \"50px\" },\r\n\r\n      //{ label: 'Type', sortKey: false, width: \"55px\" },\r\n      // { label: 'Exp-Date', sortKey: false, width: \"80px\" },\r\n      {\r\n        label: \"Amount\",\r\n        sortKey: false,\r\n        width: \"50px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n\r\n      {\r\n        label: \"Treat-Code\",\r\n        sortKey: false,\r\n        width: \"105px\",\r\n      },\r\n      {\r\n        label: \"TD\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Rev\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Open\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"AR\",\r\n        sortKey: false,\r\n        width: \"35px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Session\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Redeem\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Reversal\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Exchange\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n    ],\r\n    // cartData: {},\r\n    yearList: [],\r\n    selectedYear: new Date().getFullYear(),\r\n    isOpenTreatmentDone: false,\r\n    tsStaff: {},\r\n    workPoint: 0,\r\n    isOpenReversal: false,\r\n    checkBoxConfirmReversal: [],\r\n    selectedSession: \"\",\r\n    selectedItemTreatmentIds: [],\r\n    activeMenu: \"treatmentdone\",\r\n    productCard: [],\r\n    list: [],\r\n    isOpenExchangeService: false,\r\n    page: 1,\r\n    rangeId: \"\",\r\n    menuId: \"\",\r\n    rangeName: \"\",\r\n    rangeOption: [],\r\n    ExchangeItem: {},\r\n    SelectedExchangeItem: {},\r\n    cust_data: {},\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    this.props.getCommonApi(\"treatmentdone/Year/\").then(key => {\r\n      let { status, data } = key;\r\n      let { yearList } = this.state;\r\n      for (let value of data) {\r\n        yearList.push({ value: value, label: value });\r\n      }\r\n      this.setState({ yearList });\r\n    });\r\n    this.getCart();\r\n  };\r\n  handleCheckboxChangeWithNormalCheckBox = item => {\r\n    let newArray = [...this.state.checkBoxConfirmReversal, item.target.name];\r\n    if (this.state.checkBoxConfirmReversal.includes(item.target.name)) {\r\n      newArray = newArray.filter(day => day !== item.target.name);\r\n    }\r\n    this.setState({\r\n      checkBoxConfirmReversal: newArray,\r\n    });\r\n  };\r\n  getCart = async () => {\r\n    console.log(this.props, \"sfgdfsgdfghgf\");\r\n    let {\r\n      roomList,\r\n      sourceList,\r\n      staffList,\r\n      cartData,\r\n      duration,\r\n      tstaffList,\r\n      selectedYear,\r\n      cust_data,\r\n    } = this.state;\r\n    let custId = \"\";\r\n    if (this.props.match.params.id) {\r\n      custId = this.props.match.params.id;\r\n    } else {\r\n      custId = this.props.basicApptDetail.custId;\r\n    }\r\n\r\n    this.props\r\n      .getCommonApi(`treatmentdone/?year=${selectedYear}&cust_id=${custId}`)\r\n      .then(async key => {\r\n        cartData = key;\r\n        console.log(key, \"Service Redeem List data\");\r\n        tstaffList = [];\r\n        tstaffList = key.data;\r\n        cust_data = key.cust_data;\r\n        await this.setState({\r\n          tstaffList,\r\n          cust_data,\r\n        });\r\n        if (cust_data) {\r\n          let formFields = {};\r\n          formFields[\"custId\"] = this.props.match.params.id;\r\n          formFields[\"custName\"] = cust_data.cust_name;\r\n          formFields[\"cust_refer\"] = cust_data.cust_refer;\r\n          await this.props.updateForm(\"basicApptDetail\", formFields);\r\n        }\r\n      });\r\n  };\r\n\r\n  handleYearChange = async ({ target: { value, name } }) => {\r\n    let { selectedYear } = this.state;\r\n    selectedYear = value;\r\n    await this.setState({\r\n      selectedYear,\r\n    });\r\n    this.getCart();\r\n  };\r\n\r\n  getDataFromRes = data => {\r\n    let { formFields, cartData, updateFields, postFields } = this.state;\r\n    formFields[\"Item\"] = data.value.Item;\r\n    formFields[\"Price\"] = data.value.Price;\r\n    formFields[\"Room\"] = data.value.Room;\r\n    updateFields[\"Room\"] = data.value.Room;\r\n    formFields[\"Source\"] = data.value.Source;\r\n    updateFields[\"Source\"] = data.value.Source;\r\n    formFields[\"add_duration\"] = data.value.add_duration;\r\n    formFields[\"new_remark\"] = data.value.new_remark;\r\n    updateFields[\"new_remark\"] = data.value.new_remark;\r\n    postFields[\"times\"] = data.value.times;\r\n    postFields[\"work_point\"] = data.value.work_point;\r\n    this.setState({\r\n      formFields,\r\n      updateFields,\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  // getYearList = (data) => {\r\n  //     let date = new Date().getFullYear();\r\n\r\n  //     let { yearList } = this.state;\r\n  //     for (let i = date; i > 1970; i--) {\r\n  //         yearList.push({ label: i, value: i });\r\n  //     }\r\n  //     this.setState({\r\n  //         yearList\r\n  //     })\r\n  // }\r\n\r\n  handleSubmit = id => {};\r\n\r\n  handleDialog = () => {\r\n    this.setState({\r\n      isOpenTreatmentDone: false,\r\n      isOpenReversal: false,\r\n      checkBoxConfirmReversal: [],\r\n      isOpenExchangeService: false,\r\n      isHandleExchangeConfirmation: false,\r\n    });\r\n    this.getCart();\r\n  };\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        this.props\r\n          .getCommonApi(`custappt/?search=${searchString}`)\r\n          .then(key => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n              // for (let value of data) {\r\n              //     customerList.push({ value: value.id, label: value.emp_name })\r\n              // }\r\n              this.setState({ customerOption: data });\r\n            }\r\n          });\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  // handleSelectCustomer = async data => {\r\n  //   let { formFields } = this.state;\r\n  //   formFields[\"custId\"] = data.id;\r\n  //   formFields[\"custName\"] = data.cust_name;\r\n  //   this.setState({ formFields, isOpenCustomer: false, customerOption: [] });\r\n  //   await this.props.updateForm(\"basicApptDetail\", formFields);\r\n  //   console.log(this.props.basicApptDetail, \"sdfsadfasdf\");\r\n  // };\r\n\r\n  handleCartCreated = (data, price, id) => {\r\n    let { basicApptDetail } = this.props;\r\n    let { tstaffList } = this.state;\r\n    let payload = [];\r\n\r\n    for (let key of tstaffList) {\r\n      let reverseTreatmentIds = [];\r\n      //reverseTreatmentIds = key.treatmentids.reverse();\r\n      let ItemTreatmentIds = key.treatmentids;\r\n      reverseTreatmentIds = ItemTreatmentIds.sort((a, b) => b - a);\r\n      if (key.sel === true) {\r\n        let obj = {\r\n          cust_noid: this.props.match.params.id,\r\n          cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n          itemcodeid: key.stockid,\r\n          price: key.unit_amount,\r\n          item_uom: null,\r\n          treatment_account: key.TreatmentAccountid,\r\n          treatment: reverseTreatmentIds.slice(0, key.session),\r\n          ori_stockid: null,\r\n        };\r\n        payload.push(obj);\r\n      }\r\n    }\r\n    if (payload.length > 0) {\r\n      let test = payload;\r\n      console.log(\"payload-data\", test);\r\n      this.props\r\n        .getCommonApi(\r\n          `itemcart/Check/?cart_date=${dateFormat(\r\n            new Date(),\r\n            \"yyyy-mm-dd\"\r\n          )}&cust_noid=${this.props.match.params.id}`\r\n        )\r\n        .then(res => {\r\n          if (res.data.length === 0) {\r\n            this.props\r\n              .commonCreateApi(\"itemcart/TrmtDoneCartCreate/\", payload)\r\n              .then(res => {\r\n                // this.props.handleCartCreated()\r\n                this.setState({\r\n                  activeTab: \"treatment\",\r\n                  isOpenPriceModal: false,\r\n                });\r\n                history.push(\"/admin/cart\");\r\n              });\r\n          } else {\r\n            this.props\r\n              .commonCreateApi(\r\n                `itemcart/TrmtDoneCartCreate/?cart_id=${res.cart_id}`,\r\n                payload\r\n              )\r\n              .then(res => {\r\n                // this.props.handleCartCreated()\r\n                this.setState({\r\n                  activeTab: \"treatment\",\r\n                  isOpenPriceModal: false,\r\n                });\r\n                history.push(\"/admin/cart\");\r\n              });\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  handleCheckout = () => {\r\n    let { isOpenPayment } = this.state;\r\n    isOpenPayment = true;\r\n    this.setState({ isOpenPayment });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    // this.props.updateForm('customerDetail', formFields)\r\n    // await this.props.updateForm('appointmentCustomerDetail', formFields)\r\n  };\r\n\r\n  handlePostChange = async ({ target: { value, name } }) => {\r\n    let { postFields } = this.state;\r\n    postFields[name] = value;\r\n    await this.setState({\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  handleUpdateChange = async ({ target: { value, name } }) => {\r\n    let { updateFields } = this.state;\r\n    updateFields[name] = value;\r\n    await this.setState({\r\n      updateFields,\r\n    });\r\n    let event = { target: { value: value, name: name } };\r\n    // this.handleUpdatestaff(event);\r\n  };\r\n\r\n  handleAddstaff = async item => {\r\n    if (item.is_allow) {\r\n      let { tstaffList, selectedSession, selectedItemTreatmentIds } =\r\n        this.state;\r\n      selectedSession = item.session;\r\n      // let reverseTreatmentIds = [];\r\n      // reverseTreatmentIds = item.treatmentids.reverse();\r\n      let ItemTreatmentIds = item.treatmentids;\r\n      let reverseTreatmentIds = ItemTreatmentIds.sort((a, b) => b - a);\r\n      if (selectedSession == 0) {\r\n        selectedSession = 1;\r\n      }\r\n      selectedItemTreatmentIds = reverseTreatmentIds.slice(0, selectedSession);\r\n      var unit_rate = item.unit_amount;\r\n      var qualifiedAmount = selectedSession * unit_rate;\r\n      this.setState({ selectedSession, selectedItemTreatmentIds });\r\n\r\n      /* let test=0;\r\n        const currentParentCodeBalance = tstaffList.filter(\r\n            (res) => res.treatment_parentcode ===  item.treatment_parentcode\r\n          ).reduce((sum, currentValue) => {\r\n            return  currentValue.balance;\r\n          }, 0);\r\n        const currentParentCodeSelectedStaffValue = tstaffList.filter(\r\n            (res) => res.treatment_parentcode ===  item.treatment_parentcode && res.staff!=null\r\n            ).reduce((sum, currentValue) => {\r\n                return parseFloat((eval(sum))) + parseFloat((eval(currentValue.unit_amount)));\r\n              }, 0);\r\n        \r\n        if(item.staff==null)\r\n        {\r\n            test=parseFloat((eval(currentParentCodeSelectedStaffValue))) + parseFloat((eval(item.unit_amount))) ;\r\n        }\r\n        else{\r\n            test=parseFloat((eval(currentParentCodeSelectedStaffValue))) - parseFloat((eval(item.unit_amount))) ;\r\n        }\r\n        */\r\n\r\n      //if (currentParentCodeBalance >= test) {\r\n      // if (item.balance >= qualifiedAmount) {\r\n      //   let { tstaffList, formFields, cartData, postFields } = this.state;\r\n      //   await this.setState({ tsStaff: item });\r\n      //   this.setState({\r\n      //     isOpenTreatmentDone: true,\r\n      //   });\r\n      // } else {\r\n      //   this.handleDialog();\r\n      //   Toast({\r\n      //     type: \"error\",\r\n      //     message: \"Insufficient balance to redeem\",\r\n      //   });\r\n      // }\r\n      await this.setState({ tsStaff: item });\r\n      this.setState({\r\n        isOpenTreatmentDone: true,\r\n      });\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Treatment done is not allowed in other outlets\",\r\n      });\r\n    }\r\n  };\r\n\r\n  handleUpdatestaff = async (event, item, index) => {\r\n    let { tstaffList, formFields, cartData, updateFields } = this.state;\r\n    tstaffList[index][event.target.name] = event.target.value;\r\n    this.setState({\r\n      tstaffList,\r\n    });\r\n    let data = {};\r\n    if (event.target.name === \"appt_fr_time\") {\r\n      data = {\r\n        appt_fr_time: event.target.value,\r\n        add_duration: formFields[\"add_duration\"],\r\n      };\r\n    }\r\n    if (event.target.name === \"add_duration\") {\r\n      data = {\r\n        appt_fr_time: item.appt_fr_time,\r\n        add_duration: event.target.value,\r\n      };\r\n    }\r\n\r\n    // if (updateFields.Source && updateFields.Room) {\r\n    this.props\r\n      .commonPatchApi(\r\n        `tmpitemhelper/${item.id}/?Room_Codeid=${updateFields.Room}&Source_Codeid=${updateFields.Source}&new_remark=${updateFields.new_remark}`,\r\n        data\r\n      )\r\n      .then(() => {\r\n        this.getCart();\r\n      });\r\n    // } else {\r\n    //     this.setState({ showUpdateError: true })\r\n    // }\r\n  };\r\n\r\n  handleClearLine = () => {\r\n    this.props\r\n      .commonDeleteApi(\r\n        `tmpitemhelper/delete/?clear_all=0&cartid=${this.props.cartId}`\r\n      )\r\n      .then(() => {\r\n        this.getCart();\r\n      });\r\n  };\r\n\r\n  handleClearAll = () => {\r\n    this.props\r\n      .commonDeleteApi(\r\n        `tmpitemhelper/delete/?clear_all=1&cartid=${this.props.cartId}`\r\n      )\r\n      .then(() => {\r\n        let { formFields, postFields } = this.state;\r\n        formFields[\"work_point\"] = \"\";\r\n        postFields[\"times\"] = \"\";\r\n        this.setState({\r\n          formFields,\r\n          postFields,\r\n        });\r\n        this.getCart();\r\n      });\r\n  };\r\n  handleReversalTreatmentAll = async () => {\r\n    let treatmentIds = this.state.checkBoxConfirmReversal;\r\n\r\n    await this.setState({\r\n      treatmentIds,\r\n    });\r\n\r\n    this.setState({\r\n      isOpenReversal: true,\r\n    });\r\n  };\r\n  handleReversalTreatment = async item => {\r\n    if (item.is_allow) {\r\n      let reverseTreatmentIds = [];\r\n      let { selectedSession } = this.state;\r\n      selectedSession = item.session;\r\n      let ItemTreatmentIds = item.treatmentids;\r\n      let TreatmentIds = ItemTreatmentIds.sort((a, b) => b - a);\r\n      if (selectedSession == 0) {\r\n        selectedSession = 1;\r\n      }\r\n      reverseTreatmentIds = TreatmentIds.slice(0, selectedSession);\r\n      await this.setState({\r\n        treatmentIds: reverseTreatmentIds,\r\n        selectedSession,\r\n      });\r\n\r\n      this.setState({\r\n        isOpenReversal: true,\r\n      });\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"You are not allowed to do this transaction\",\r\n      });\r\n    }\r\n  };\r\n\r\n  handleReverse = (item, index) => {\r\n    let { tstaffList } = this.state;\r\n    tstaffList[index][\"rev\"] = true;\r\n    this.setState({\r\n      tstaffList,\r\n    });\r\n    // onClick={this.handleReversalTreatment}\r\n  };\r\n  changeIndexSession = (index, value, item) => {\r\n    if (item.is_allow) {\r\n      if (Number(value) <= Number(item.open)) {\r\n        let { tstaffList } = this.state;\r\n        tstaffList[index][\"session\"] = value;\r\n        this.setState({\r\n          tstaffList,\r\n        });\r\n      } else {\r\n        Toast({\r\n          type: \"error\",\r\n          message: \"Please enter valid session\",\r\n        });\r\n      }\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"You are not allowed to do this transaction\",\r\n      });\r\n    }\r\n  };\r\n\r\n  toggle = tab => {\r\n    if (this.state.activeMenu !== tab) {\r\n      this.setState({\r\n        activeMenu: tab,\r\n      });\r\n    }\r\n  };\r\n  getServices = query => {\r\n    let {\r\n      page = this.state.page,\r\n      menuId = this.state.menuId,\r\n      rangeId = this.state.rangeId,\r\n    } = query;\r\n    this.props\r\n      .getCommonApi(\r\n        `servicestock/?Item_Deptid=${menuId}&page=${page}&Item_Rangeid=${rangeId}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          this.setState({ productCard: data, list: data.dataList });\r\n        }\r\n      });\r\n  };\r\n  getMenus = () => {\r\n    let { menuOption } = this.state;\r\n    menuOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props\r\n      .getCommonApi(`catalogitemdept/?Item_Dept=${`SERVICE`}`)\r\n      .then(res => {\r\n        // activeMenu = []\r\n        console.log(\"sdfsdhfghjghj ress\", res);\r\n        for (let key of res.data) {\r\n          menuOption.push({\r\n            value: key.id,\r\n            label: key.itm_desc,\r\n            code: key.itm_code,\r\n            seq: key.itm_seq,\r\n          });\r\n        }\r\n        this.setState({ menuOption });\r\n      });\r\n  };\r\n\r\n  getRange = () => {\r\n    let { rangeOption, menuId } = this.state;\r\n    rangeOption = [];\r\n\r\n    this.props\r\n      .getCommonApi(`catalogitemrange?Item_Deptid=${menuId}`)\r\n      .then(res => {\r\n        // activeMenu = []\r\n        for (let key of res.data) {\r\n          rangeOption.push({ value: key.id, label: key.itm_desc });\r\n        }\r\n        this.setState({ rangeOption });\r\n      });\r\n  };\r\n\r\n  handleExchangeClick = async (index, item) => {\r\n    if (item.is_allow) {\r\n      if (item.sel) {\r\n        await this.setState({\r\n          ExchangeItem: [],\r\n        });\r\n        this.getMenus();\r\n        this.getRange();\r\n        this.getServices({});\r\n\r\n        await this.setState({\r\n          isOpenExchangeService: true,\r\n          ExchangeItem: item,\r\n        });\r\n        console.log(\r\n          this.state.ExchangeItem,\r\n          \"selected row of treatment done data - exchange item\"\r\n        );\r\n      } else {\r\n        Toast({\r\n          type: \"error\",\r\n          message: \"Select Staff should not be empty\",\r\n        });\r\n      }\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"You are not allowed to do this transaction\",\r\n      });\r\n    }\r\n  };\r\n\r\n  handlePagination = async page => {\r\n    await this.setState({ page: page });\r\n    this.getServices({ page: page });\r\n  };\r\n  handleMenuChange = async ({ target: { value, name } }) => {\r\n    let menuId = Object.assign({}, this.state.menuId);\r\n    menuId = value;\r\n    await this.setState({ menuId });\r\n\r\n    this.getRange();\r\n\r\n    this.getServices({});\r\n  };\r\n\r\n  handleRangeChange = async ({ target: { value, name } }) => {\r\n    let rangeId = Object.assign({}, this.state.rangeId);\r\n    let rangeName = Object.assign({}, this.state.rangeName);\r\n    let { rangeOption } = this.state;\r\n    rangeId = value;\r\n\r\n    for (let key of rangeOption) {\r\n      if (key.value == value) {\r\n        rangeName = key.label;\r\n      }\r\n    }\r\n\r\n    await this.setState({\r\n      rangeId,\r\n      rangeName,\r\n    });\r\n    this.getServices({});\r\n  };\r\n\r\n  handleSelectedService = async data => {\r\n    let { ExchangeItem } = this.state;\r\n    await this.setState({\r\n      SelectedExchangeItem: data,\r\n    });\r\n    if (Number(data.item_price) > Number(ExchangeItem.unit_amount)) {\r\n      this.setState({ isHandleExchangeConfirmation: true });\r\n    } else {\r\n      this.handleExchangePostAction();\r\n    }\r\n  };\r\n\r\n  handleExchangePostAction = () => {\r\n    let { basicApptDetail } = this.props;\r\n    let { ExchangeItem, SelectedExchangeItem } = this.state;\r\n    let payload = [];\r\n    let obj = {\r\n      cust_noid: this.props.match.params.id,\r\n      cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n      itemcodeid: SelectedExchangeItem.id,\r\n      price: ExchangeItem.unit_amount,\r\n      item_uom: null,\r\n      treatment_account: ExchangeItem.TreatmentAccountid,\r\n      treatment: ExchangeItem.id,\r\n      ori_stockid: ExchangeItem.stockid,\r\n    };\r\n    payload.push(obj);\r\n    console.log(payload, \"exchange input\");\r\n    this.props\r\n      .getCommonApi(\r\n        `itemcart/Check/?cart_date=${dateFormat(\r\n          new Date(),\r\n          \"yyyy-mm-dd\"\r\n        )}&cust_noid=${this.props.match.params.id}`\r\n      )\r\n      .then(res => {\r\n        if (res.data.length === 0) {\r\n          this.props\r\n            .commonCreateApi(\"itemcart/TrmtDoneCartCreate/\", payload)\r\n            .then(res => {\r\n              console.log(res, \"result of exchnage final click\");\r\n              this.setState({\r\n                activeTab: \"treatment\",\r\n                isOpenExchangeService: false,\r\n              });\r\n              history.push(\"/admin/cart\");\r\n            });\r\n        } else {\r\n          this.props\r\n            .commonCreateApi(\r\n              `itemcart/TrmtDoneCartCreate/?cart_id=${res.cart_id}`,\r\n              payload\r\n            )\r\n            .then(res => {\r\n              // this.props.handleCartCreated()\r\n              this.setState({\r\n                activeTab: \"treatment\",\r\n                isOpenExchangeService: false,\r\n              });\r\n              history.push(\"/admin/cart\");\r\n            });\r\n        }\r\n      });\r\n  };\r\n  handleDialogExchangeConfirm = () => {\r\n    this.setState({\r\n      isHandleExchangeConfirmation: false,\r\n      SelectedExchangeItem: {},\r\n    });\r\n  };\r\n  render() {\r\n    let {\r\n      productCard = {},\r\n      list,\r\n      tstaffList = [],\r\n      selectedYear,\r\n      yearList,\r\n      isOpenTreatmentDone,\r\n      headerDetails,\r\n      tsStaff,\r\n      isOpenReversal,\r\n      treatmentIds,\r\n      activeMenu,\r\n      isOpenExchangeService,\r\n      menuOption,\r\n      menuId,\r\n      rangeOption,\r\n      rangeId,\r\n      isHandleExchangeConfirmation,\r\n      ExchangeItem,\r\n      SelectedExchangeItem,\r\n      cust_data,\r\n    } = this.state;\r\n    let localtStaffList = [...tstaffList];\r\n    let { basicApptDetail, t } = this.props;\r\n    let { dataList = [], meta = {} } = productCard;\r\n    let { pagination } = meta;\r\n    return (\r\n      <div className=\"treatmentDone-menu\">\r\n        <div className=\"row\">\r\n          <div className=\"col-10\">\r\n            <div className=\"beautesoft-navlink customer-detail mt-3\">\r\n              <div className=\"filled-tabs\">\r\n                <div className=\"tabs-block\">\r\n                  <Nav tabs>\r\n                    <NavItem>\r\n                      <NavLink\r\n                        className={classnames({\r\n                          active: this.state.activeMenu === \"treatmentdone\",\r\n                        })}\r\n                        onClick={() => {\r\n                          this.toggle(\"treatmentdone\");\r\n                        }}\r\n                      >\r\n                        {t(\"Treatment Done\")}\r\n                      </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                      <NavLink\r\n                        className={classnames({\r\n                          active: this.state.activeMenu === \"treatmenthistory\",\r\n                        })}\r\n                        onClick={() => {\r\n                          this.toggle(\"treatmenthistory\");\r\n                        }}\r\n                      >\r\n                        {t(\"Treatment History\")}\r\n                      </NavLink>\r\n                    </NavItem>\r\n                  </Nav>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-2\">\r\n            <NormalButton\r\n              buttonClass={\"mx-2\"}\r\n              mainbg={true}\r\n              className=\"fs-15 clear-line\"\r\n              label=\"Back\"\r\n              outline={false}\r\n              onClick={() => history.push(`/admin/cart`)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"treatment-section ml-1 p-2 pr-0\">\r\n          <TabContent activeTab={this.state.activeMenu}>\r\n            <TabPane tabId=\"treatmentdone\">\r\n              {activeMenu === \"treatmentdone\" ? (\r\n                <div className=\"row treatment-done-new p-3\">\r\n                  <div className=\"col-10 header\">\r\n                    <p className=\"fs-18 font-700 mb-3 title\">\r\n                      {t(\"Available Treatments\")}\r\n                    </p>\r\n                    <div className=\"d-flex select-year\">\r\n                      <div className=\"pl-0 mb-2 name fs-16 py-2\">\r\n                        {t(\"Select Year\")}\r\n                      </div>\r\n                      <div className=\"input-group\">\r\n                        <NormalSelect\r\n                          // placeholder=\"Enter here\"\r\n                          options={yearList}\r\n                          value={selectedYear}\r\n                          name=\"selectedYear\"\r\n                          onChange={this.handleYearChange}\r\n                          className=\"selected-year mb-2 py-0\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"\">\r\n                        <div className=\"d-flex justify-content-start align-self-center\">\r\n                          <div className=\"col-md-12\">\r\n                            <p>\r\n                              {t(\"Customer Name\")} : {cust_data.cust_name}\r\n                            </p>\r\n                            <p>\r\n                              {t(\"Reference\")} : {cust_data.cust_refer}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className={`col-12 cart-item`}>\r\n                    <div className={`item-list`}>\r\n                      <div className=\"table\">\r\n                        <TableWrapper\r\n                          headerDetails={headerDetails}\r\n                          queryHandler={this.handlePagination}\r\n                          // pageMeta={pageMeta}\r\n                          // isEmpty={tstaffList.length === 0 ? true:false}\r\n                        >\r\n                          {tstaffList.length > 0\r\n                            ? tstaffList.map((item, index) => {\r\n                                return (\r\n                                  <tr key={index}>\r\n                                    <td>\r\n                                      <div\r\n                                        className={`text-left ${\r\n                                          !item.iscurrentloggedinsalon\r\n                                            ? \"text-danger\"\r\n                                            : \"\"\r\n                                        }`}\r\n                                      >\r\n                                        {item.site_code}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td className=\"position-relative status-type\">\r\n                                      <div className={`text-right`}>\r\n                                        {item.treatment_date}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-left`}>\r\n                                        {item.course}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-left`}>\r\n                                        {item.transacno_ref}\r\n                                      </div>\r\n                                    </td>\r\n\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.unit_amount}\r\n                                      </div>\r\n                                    </td>\r\n\r\n                                    <td>\r\n                                      <div className={`text-left`}>\r\n                                        {item.treatment_code}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.td}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.rev}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.open}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.ar}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <input\r\n                                        type=\"number\"\r\n                                        style={{\r\n                                          width: \"50px\",\r\n                                          // textAlign: \"right\",\r\n                                        }}\r\n                                        value={item.session}\r\n                                        onChange={e =>\r\n                                          this.changeIndexSession(\r\n                                            index,\r\n                                            e.target.value,\r\n                                            item\r\n                                          )\r\n                                        }\r\n                                        className={`text-right`}\r\n                                        min={`0`}\r\n                                        max={item.open}\r\n                                        disabled={\r\n                                          item.session_flag &&\r\n                                          item.session !== Number(0)\r\n                                            ? true\r\n                                            : false\r\n                                        }\r\n                                      />\r\n                                    </td>\r\n                                    <td style={{ width: \"50px\" }}>\r\n                                      <button\r\n                                        className=\"btnRedeem\"\r\n                                        onClick={() =>\r\n                                          this.handleAddstaff(item)\r\n                                        }\r\n                                      >\r\n                                        {t(\"Select\")}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td style={{ width: \"50px\" }}>\r\n                                      {item.iscurrentloggedinsalon && (\r\n                                        <button\r\n                                          className=\"btnReversal\"\r\n                                          onClick={() =>\r\n                                            this.handleReversalTreatment(item)\r\n                                          }\r\n                                        >\r\n                                          {t(\"Select\")}\r\n                                        </button>\r\n                                      )}\r\n                                    </td>\r\n                                    <td style={{ width: \"50px\" }}>\r\n                                      {item.exchange_flag && (\r\n                                        <button\r\n                                          className=\"btnExchange\"\r\n                                          label=\"Exchange\"\r\n                                          onClick={() =>\r\n                                            this.handleExchangeClick(\r\n                                              index,\r\n                                              item\r\n                                            )\r\n                                          }\r\n                                        >\r\n                                          {t(\"Select\")}\r\n                                        </button>\r\n                                      )}\r\n                                    </td>\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            : null}\r\n                        </TableWrapper>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-12 pt-4 action-bar\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-7 d-flex\">\r\n                        {/* <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-line\"\r\n                                label=\"Clear Line\"\r\n                                outline={false}\r\n                                onClick={this.handleClearLine}\r\n                            />\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-all\"\r\n                                label=\"Clear All\"\r\n                                outline={false}\r\n                                onClick={this.handleClearAll}\r\n                            /> */}\r\n                      </div>\r\n                      <div className=\"col-5\">\r\n                        <div className=\"row\">\r\n                          <div className=\"col-6 text-right\"></div>\r\n                          <div className=\"col-6 text-right\">\r\n                            <NormalButton\r\n                              buttonClass={\"mx-2\"}\r\n                              mainbg={true}\r\n                              className=\" fs-15 confirm\"\r\n                              label=\"Confirm Treatment Done\"\r\n                              outline={false}\r\n                              onClick={() => this.handleCartCreated()}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <NormalModal\r\n                    className={\"transaction-done-exchange\"}\r\n                    style={{ minWidth: \"70%\" }}\r\n                    modal={isOpenExchangeService}\r\n                    handleModal={this.handleDialog}\r\n                  >\r\n                    <img\r\n                      onClick={this.handleDialog}\r\n                      className=\"close cursor-pointer\"\r\n                      src={closeIcon}\r\n                      alt=\"\"\r\n                    />\r\n                    <div className=\"d-flex mb-2\">\r\n                      <div className=\"col-md-3 input-group pl-2 range-filter\">\r\n                        <NormalSelect\r\n                          // placeholder=\"Enter here\"\r\n                          options={menuOption}\r\n                          value={menuId}\r\n                          name={\"menuId\"}\r\n                          onChange={this.handleMenuChange}\r\n                          className=\"py-0\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"col-md-4 input-group range-filter\">\r\n                        <NormalSelect\r\n                          // placeholder=\"Enter here\"\r\n                          options={rangeOption}\r\n                          value={rangeId}\r\n                          name={\"rangeId\"}\r\n                          onChange={this.handleRangeChange}\r\n                          className=\"py-0\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"\">\r\n                      {console.log(list, \"card list\")}\r\n                      <div className=\"services m-0 row\">\r\n                        {list.length > 0\r\n                          ? list.map((data, index) => {\r\n                              return (\r\n                                <div\r\n                                  className=\"col-md-2 col-12 fs-12 p-2 cursor-pointer\"\r\n                                  key={data.id}\r\n                                  onClick={() =>\r\n                                    this.handleSelectedService(data)\r\n                                  }\r\n                                >\r\n                                  <div className=\"service-tab p-0\">\r\n                                    <div className=\"service-ttl px-2 font-700 fs-11\">\r\n                                      {data.item_desc}\r\n                                    </div>\r\n                                    <div className=\"price px-2 py-1\">\r\n                                      <div className=\"non-retail\">\r\n                                        <span className=\"text-orenge font-700\">\r\n                                          $\r\n                                        </span>\r\n                                        <span className=\"text-orenge font-700\">\r\n                                          {data.item_price\r\n                                            ? Number(data.item_price).toFixed(2)\r\n                                            : \"\"}\r\n                                        </span>\r\n\r\n                                        <span className=\"foc-icon\">\r\n                                          <svg\r\n                                            width=\"32\"\r\n                                            height=\"32\"\r\n                                            className=\"cursor-pointer\"\r\n                                            viewBox=\"0 0 32 32\"\r\n                                            fill=\"none\"\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                          >\r\n                                            <circle\r\n                                              cx=\"16\"\r\n                                              cy=\"16\"\r\n                                              r=\"15.5\"\r\n                                              fill=\"rgba(60, 64, 135, 0.31)\"\r\n                                              stroke=\"#3C4087\"\r\n                                            />\r\n                                            <path\r\n                                              d=\"M3.996 11.456H9.42V12.476H5.22V15.152H9.18V16.172H5.22V20H3.996V11.456ZM14.3243 20.096C13.5163 20.096 12.8123 19.92 12.2123 19.568C11.6203 19.208 11.1603 18.7 10.8323 18.044C10.5123 17.388 10.3523 16.616 10.3523 15.728C10.3523 14.832 10.5123 14.056 10.8323 13.4C11.1523 12.744 11.6123 12.24 12.2123 11.888C12.8123 11.536 13.5163 11.36 14.3243 11.36C15.1403 11.36 15.8443 11.536 16.4362 11.888C17.0363 12.24 17.4963 12.744 17.8163 13.4C18.1363 14.056 18.2963 14.828 18.2963 15.716C18.2963 16.612 18.1363 17.388 17.8163 18.044C17.4963 18.7 17.0363 19.208 16.4362 19.568C15.8363 19.92 15.1323 20.096 14.3243 20.096ZM14.3243 19.088C15.1803 19.088 15.8443 18.796 16.3163 18.212C16.7963 17.628 17.0363 16.796 17.0363 15.716C17.0363 14.644 16.7963 13.82 16.3163 13.244C15.8443 12.66 15.1803 12.368 14.3243 12.368C13.4683 12.368 12.8043 12.66 12.3323 13.244C11.8603 13.82 11.6243 14.644 11.6243 15.716C11.6243 16.796 11.8603 17.628 12.3323 18.212C12.8123 18.796 13.4763 19.088 14.3243 19.088ZM23.7598 20.096C22.9358 20.096 22.2158 19.92 21.5998 19.568C20.9918 19.208 20.5238 18.7 20.1958 18.044C19.8678 17.388 19.7038 16.612 19.7038 15.716C19.7038 14.828 19.8678 14.056 20.1958 13.4C20.5238 12.744 20.9918 12.24 21.5998 11.888C22.2158 11.536 22.9358 11.36 23.7598 11.36C24.3438 11.36 24.8838 11.452 25.3798 11.636C25.8838 11.812 26.3078 12.072 26.6518 12.416L26.2198 13.328C25.8198 13 25.4238 12.764 25.0318 12.62C24.6478 12.468 24.2278 12.392 23.7718 12.392C22.8838 12.392 22.1958 12.68 21.7078 13.256C21.2278 13.832 20.9878 14.652 20.9878 15.716C20.9878 16.788 21.2278 17.616 21.7078 18.2C22.1958 18.776 22.8838 19.064 23.7718 19.064C24.2278 19.064 24.6478 18.992 25.0318 18.848C25.4238 18.696 25.8198 18.456 26.2198 18.128L26.6518 19.04C26.3078 19.384 25.8838 19.648 25.3798 19.832C24.8838 20.008 24.3438 20.096 23.7598 20.096Z\"\r\n                                              fill=\"#3C4087\"\r\n                                            />\r\n                                          </svg>\r\n                                        </span>\r\n                                      </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"images\">\r\n                                      <img src={data.Stock_PIC} alt=\"\" />\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              );\r\n                            })\r\n                          : \"\"}\r\n                        {pagination && (\r\n                          <Pagination\r\n                            handlePagination={this.handlePagination}\r\n                            pageMeta={pagination}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </NormalModal>\r\n                  <NormalModal\r\n                    className={\"transaction-done-reversal\"}\r\n                    style={{ minWidth: \"75%\" }}\r\n                    modal={isOpenReversal}\r\n                    handleModal={this.handleDialog}\r\n                  >\r\n                    <img\r\n                      onClick={this.handleDialog}\r\n                      className=\"close cursor-pointer\"\r\n                      src={closeIcon}\r\n                      alt=\"\"\r\n                    />\r\n                    <Reversal\r\n                      id={this.props.match.params.id}\r\n                      treatmentId={tsStaff.id}\r\n                      reversalId={treatmentIds}\r\n                      cartId={this.props.id}\r\n                      handleModal={this.handleDialog}\r\n                    ></Reversal>\r\n                  </NormalModal>\r\n                  <NormalModal\r\n                    className={\"transaction-done-modal\"}\r\n                    style={{ minWidth: \"60%\" }}\r\n                    modal={isOpenTreatmentDone}\r\n                    handleModal={this.handleDialog}\r\n                  >\r\n                    <img\r\n                      onClick={this.handleDialog}\r\n                      className=\"close cursor-pointer\"\r\n                      src={closeIcon}\r\n                      alt=\"\"\r\n                    />\r\n                    <SelectStaff\r\n                      id={this.state.selectedItemTreatmentIds}\r\n                      //id={tsStaff.id}\r\n                      session={this.state.selectedSession}\r\n                      cartId={basicApptDetail.cartId}\r\n                      handleModal={this.handleDialog}\r\n                    ></SelectStaff>\r\n                  </NormalModal>\r\n                  <NormalModal\r\n                    className={\"transaction-done-reversal\"}\r\n                    style={{ minWidth: \"432px\" }}\r\n                    modal={isHandleExchangeConfirmation}\r\n                    handleModal={this.handleDialogExchangeConfirm}\r\n                  >\r\n                    <img\r\n                      onClick={this.handleDialogExchangeConfirm}\r\n                      className=\"close cursor-pointer\"\r\n                      src={closeIcon}\r\n                      alt=\"\"\r\n                    />\r\n                    <div className=\"row\">\r\n                      <div className=\"d-flex flex-wrap\">\r\n                        <div className=\"col-12\">\r\n                          <h4>{t(\"Confirmation\")}</h4>\r\n                        </div>\r\n                        <div className=\"col-12 mb-2\">\r\n                          <p>\r\n                            {t(\"Service Price\")} : $\r\n                            {SelectedExchangeItem.item_price}\r\n                            &nbsp;{t(\"larger than\")}\r\n                          </p>\r\n                          <p>\r\n                            {t(\"Previous Service Price\")} : $\r\n                            {ExchangeItem.unit_amount}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"col-12 mb-2\">\r\n                          <p>{t(\"Are you sure want to continue\")} ?</p>\r\n                        </div>\r\n                        <div className=\"row p-3\">\r\n                          <div className=\"col-6\">\r\n                            <NormalButton\r\n                              label=\"Confirm\"\r\n                              mainbg={true}\r\n                              name=\"Exconfirm\"\r\n                              className={`w-100 col-12`}\r\n                              onClick={this.handleExchangePostAction}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-6\">\r\n                            <NormalButton\r\n                              label=\"Cancel\"\r\n                              resetbg={true}\r\n                              name=\"ExCancel\"\r\n                              className={`w-100 col-12`}\r\n                              onClick={this.handleDialogExchangeConfirm}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </NormalModal>\r\n                </div>\r\n              ) : null}\r\n            </TabPane>\r\n            <TabPane tabId=\"treatmenthistory\">\r\n              {activeMenu === \"treatmenthistory\" ? (\r\n                <div className=\"treatment-done-new p-3\">\r\n                  <TreatmentHistoryCart\r\n                    customerNumber={this.props.match.params.id}\r\n                  />\r\n                </div>\r\n              ) : null}\r\n            </TabPane>\r\n          </TabContent>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentDone = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(TreatmentDoneClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}