{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\TransactionHistory\\\\ChangeStaffTD.js\";\nimport React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { NormalButton, NormalInput, NormalSelect, InputSearch, NormalModal, TableWrapper, NormalMultiSelect } from \"component/common\";\nimport { Toast } from \"service/toast\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport _ from \"lodash\";\nimport { history } from \"helpers\";\nimport { connect } from \"react-redux\";\nimport Tree from \"react-animated-tree\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\nimport SimpleReactValidator from \"simple-react-validator\"; // import { Treatment, Payment, EditCart } from './cart/index';\n\nimport service from \"assets/images/make-up-brush.png\";\nimport { StaffList } from \"../Cart/cart/StaffList\";\nimport { withTranslation } from \"react-i18next\"; // import Discount from './cart/discount';\n\nexport class ChangeStaffTDClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isOpen: false,\n      currentIndex: -1,\n      tstaffList: [],\n      cartData: {},\n      postFields: {\n        work_point: \"\"\n      },\n      Room: null,\n      Source: null,\n      new_remark: null,\n      updateFields: {\n        Room_Codeid: \"\",\n        Source_Codeid: \"\",\n        new_remark: \"\"\n      },\n      outletList: [],\n      headerDetails: [{\n        label: \"Employee name\",\n        sortKey: false,\n        width: \"130px\"\n      }, {\n        label: \"Sessions\",\n        width: \"30px\",\n        divClass: \"justify-content-center\"\n      }, {\n        label: \"WP1\",\n        width: \"42px\",\n        divClass: \"justify-content-center\"\n      }, {\n        label: \"St. time\",\n        sortKey: false,\n        width: \"55px\",\n        divClass: \"justify-content-center\"\n      }, {\n        label: \"End time\",\n        sortKey: false,\n        width: \"55px\",\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Duration\",\n        sortKey: false,\n        width: \"55px\",\n        divClass: \"justify-content-center\"\n      }],\n      sessionTableHeader: [{\n        label: \"Sessions\",\n        width: \"30px\",\n        divClass: \"justify-content-center\"\n      }, {\n        label: \"Employees\",\n        divClass: \"justify-content-center\"\n      }, {\n        label: \"\"\n      }],\n      sessionTableDetails: [],\n      employeeOptions: [],\n      customerOption: [],\n      // cartData: {},\n      roomList: [],\n      sourceList: [],\n      staffList: [],\n      duration: [],\n      startDuration: [],\n      showPostError: false,\n      showUpdateError: false,\n      staffData: {},\n      page: 1,\n      limit: 7,\n      meta: {},\n      hideNotNeededControls: \"false\"\n    };\n\n    this.componentDidMount = () => {\n      // this.getCart();\n      this.validator = new SimpleReactValidator({\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message text-danger validNo fs14\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 9\n          }\n        }, message),\n        autoForceUpdate: this\n      }); // let { basicApptDetail } = this.props;\n      // if (basicApptDetail.custId) {\n      //     let { formFields } = this.state;\n      //     formFields[\"custId\"] = basicApptDetail.custId;\n      //     formFields[\"custName\"] = basicApptDetail.custName;\n      //     this.setState({ formFields });\n      // }\n\n      let {\n        roomList,\n        sourceList,\n        staffList,\n        cartData,\n        duration,\n        startDuration,\n        tstaffList\n      } = this.state;\n      this.props.getCommonApi(\"room/\").then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        for (let value of data) {\n          roomList.push({\n            value: value.id,\n            label: value.displayname\n          });\n        }\n\n        this.setState({\n          roomList\n        });\n      });\n      this.props.getCommonApi(`source/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            sourceList.push({\n              value: value.id,\n              label: value.source_desc\n            });\n          }\n\n          this.setState({\n            sourceList\n          });\n        }\n      });\n      this.getStaffList();\n      this.getCart();\n      this.props.getCommonApi(`treatment/Duration/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            duration.push({\n              value: value,\n              label: value\n            });\n          }\n\n          this.setState({\n            duration\n          });\n        }\n      });\n      const startDurationLocal = [\"08:00\", \"08:10\", \"08:20\", \"08:30\", \"08:40\", \"08:50\", \"09:00\", \"09:10\", \"09:20\", \"09:30\", \"09:40\", \"09:50\", \"10:00\", \"10:10\", \"10:20\", \"10:30\", \"10:40\", \"10:50\", \"11:00\", \"11:10\", \"11:20\", \"11:30\", \"11:40\", \"11:50\", \"12:00\", \"12:10\", \"12:20\", \"12:30\", \"12:40\", \"12:50\", \"13:00\", \"13:10\", \"13:20\", \"13:30\", \"13:40\", \"13:50\", \"14:00\", \"14:10\", \"14:20\", \"14:30\", \"14:40\", \"14:50\", \"15:00\", \"15:10\", \"15:20\", \"15:30\", \"15:40\", \"15:50\", \"16:00\", \"16:10\", \"16:20\", \"16:30\", \"16:40\", \"16:50\", \"17:00\", \"17:10\", \"17:20\", \"17:30\", \"17:40\", \"17:50\", \"18:00\", \"18:10\", \"18:20\", \"18:30\", \"18:40\", \"18:50\", \"19:00\", \"19:10\", \"19:20\", \"19:30\", \"19:40\", \"19:50\", \"20:00\", \"20:10\", \"20:20\", \"20:30\", \"20:40\", \"20:50\", \"21:00\", \"21:10\", \"21:20\", \"21:30\", \"21:40\", \"21:50\", \"22:00\", \"22:10\", \"22:20\", \"22:30\", \"22:40\", \"22:50\", \"23:00\"]; //this.props.getCommonApi(`treatment/Duration/`).then((key) => {\n      //let { status, data } = key;\n      //if (status === 200) {\n\n      for (let value of startDurationLocal) {\n        startDuration.push({\n          value: value,\n          label: value\n        });\n      }\n\n      this.setState({\n        duration,\n        startDuration\n      }); //}\n      //})\n      //this.setState({ duration:durationLocal })\n    };\n\n    this.getCart = () => {\n      let {\n        roomList,\n        sourceList,\n        staffList,\n        cartData,\n        duration,\n        tstaffList,\n        employeeOptions\n      } = this.state;\n      let selectedItemTreatmentIds = this.props.id;\n      let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\n      console.log(HightoLow, \"hightoLow\");\n      this.props.getCommonApi(`trmttmpitemhelper/?treatmentid=${HightoLow}&sessions=${this.props.session}`).then(async key => {\n        cartData = key;\n        await this.setState({\n          tstaffList: [],\n          employeeOptions: [],\n          sessionTableDetails: []\n        });\n        tstaffList = key.data;\n        employeeOptions = [];\n        tstaffList.forEach(e => {\n          employeeOptions.push({\n            label: e.helper_name,\n            value: e.helper_id\n          });\n        });\n        this.setState({\n          cartData,\n          tstaffList,\n          employeeOptions\n        });\n        this.getDataFromRes(key);\n      });\n    };\n\n    this.getDataFromRes = async key => {\n      let {\n        postFields,\n        updateFields\n      } = this.state;\n      postFields[\"work_point\"] = key.value.work_point ? key.value.work_point : \"\";\n      updateFields[\"Room_Codeid\"] = key.value.room_id ? key.value.room_id : \"\";\n      updateFields[\"Source_Codeid\"] = key.value.source_id ? key.value.source_id : \"\";\n      updateFields[\"new_remark\"] = key.value.new_remark ? key.value.new_remark : \"\";\n      await this.setState({\n        postFields,\n        updateFields\n      });\n    };\n\n    this.handleSubmit = id => {\n      console.log(\"this.state.updateFields.Source_Codeid\", this.state.updateFields.Source_Codeid);\n      /* if(this.state.updateFields.Room_Codeid==\"\")\r\n          {\r\n              alert(\"Room Must be selected\");\r\n              return\r\n          }\r\n          if(this.state.updateFields.Source_Codeid==\"01\")\r\n          {\r\n              alert(\"Source Must be selected\");\r\n              return\r\n          }*/\n\n      let {\n        tstaffList,\n        formFields,\n        cartData,\n        postFields\n      } = this.state;\n      let xTotalWp1Amount = 0;\n\n      for (var i = 0; i < this.state.tstaffList.length; i++) {\n        xTotalWp1Amount += parseFloat(this.state.tstaffList[i].wp1);\n      }\n\n      if (parseFloat(xTotalWp1Amount) == parseFloat(postFields.work_point)) {} else {\n        Toast({\n          type: \"error\",\n          message: \"User Entry should not greater or lesser than Work point\"\n        });\n        return;\n      }\n\n      let selectedItemTreatmentIds = this.props.id;\n      let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\n      this.props.getCommonApi(`trmttmpitemhelper/confirm/?treatmentid=${HightoLow}&sessions=${this.props.session}&cart_id=${this.props.cartId}`).then(async key => {\n        if (key.status === 200) {\n          this.props.handleModal();\n        }\n      });\n    };\n\n    this.handleDialog = () => {};\n\n    this.handleAddstaff = item => {\n      let {\n        tstaffList,\n        formFields,\n        cartData,\n        postFields\n      } = this.state;\n      let data = {\n        helper_id: item.id\n      };\n      let selectedItemTreatmentIds = this.props.id;\n      let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\n\n      if (postFields.work_point && postFields.times) {\n        this.props.commonCreateApi(`trmttmpitemhelper/?treatmentid=${HightoLow}&workcommpoints=${postFields.work_point}&sessions=${this.props.session}`, data).then(() => {\n          this.getCart();\n        });\n      } else {\n        this.setState({\n          showPostError: true\n        });\n      }\n    };\n\n    this.handleuUpdateWp = async (event, item, index) => {\n      // event.persist();\n      let {\n        postFields\n      } = this.state;\n      let workpoint = Number(postFields.work_point);\n      let userEnteredValue = Number(event.target.value);\n\n      if (userEnteredValue > workpoint) {\n        return false;\n      }\n\n      let {\n        tstaffList\n      } = this.state;\n      tstaffList[index][event.target.name] = event.target.value;\n      await this.setState({\n        tstaffList\n      });\n      console.log(event, item, index, \"sfdgfdgsgf too\");\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(async (event, item, index) => {\n          console.log(event, item, index, \"sfdgfdgsgf inside\");\n          this.handleUpdatestaff(event, item, index);\n        }, 1000);\n      }\n\n      this.debouncedFn(event, item, index);\n    };\n\n    this.handleUpdateSession = async (event, item, index) => {\n      // event.persist();\n      let {\n        postFields\n      } = this.state;\n      let sessionPoints = this.props.session;\n      let userEnteredValue = parseFloat(event.target.value);\n\n      if (userEnteredValue > sessionPoints) {\n        return false;\n      }\n\n      let {\n        tstaffList\n      } = this.state;\n      tstaffList[index][event.target.name] = event.target.value;\n      await this.setState({\n        tstaffList\n      });\n      console.log(event, item, index, \"sfdgfdgsgf too\");\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(async (event, item, index) => {\n          console.log(event, item, index, \"sfdgfdgsgf inside\");\n          this.handleUpdatestaff(event, item, index);\n        }, 1000);\n      }\n\n      this.debouncedFn(event, item, index);\n    };\n\n    this.handleUpdatestaff = async (event, item, index) => {\n      //this.state.updateFields.Source_Codeid=\"\";\n      let {\n        tstaffList,\n        cartData,\n        updateFields\n      } = this.state;\n      let {\n        Room_Codeid,\n        Source_Codeid,\n        new_remark\n      } = updateFields;\n\n      if (event.target.name !== \"wp1\" && event.target.name !== \"session\") {\n        tstaffList[index][event.target.name] = event.target.value;\n        this.setState({\n          tstaffList\n        });\n      }\n\n      console.log(event, item, index, \"sfdgfdgsgf\");\n      let data = {};\n\n      if (event.target.name === \"appt_fr_time\") {\n        data = {\n          appt_fr_time: event.target.value,\n          add_duration: cartData.value.add_duration,\n          wp1: Number(item.wp1).toFixed(2)\n        };\n      }\n\n      if (event.target.name === \"add_duration\") {\n        data = {\n          appt_fr_time: item.appt_fr_time,\n          add_duration: event.target.value,\n          wp1: Number(item.wp1).toFixed(2)\n        };\n      }\n\n      if (event.target.name === \"wp1\") {\n        data = {\n          appt_fr_time: item.appt_fr_time,\n          add_duration: cartData.value.add_duration,\n          wp1: Number(item.wp1).toFixed(2)\n        };\n      }\n\n      if (event.target.name === \"session\") {\n        data = {\n          appt_fr_time: item.appt_fr_time,\n          add_duration: cartData.value.add_duration,\n          wp1: Number(item.wp1).toFixed(2),\n          session: Number(item.session).toFixed(2)\n        };\n      } // if (updateFields.Source && updateFields.Room) {\n\n\n      this.props.commonPatchApi(`trmttmpitemhelper/${item.id}/?Room_Codeid=${Room_Codeid}&Source_Codeid=${Source_Codeid}&new_remark=${new_remark}`, data).then(res => {\n        if (res.status == 200) {\n          console.log(res, \"updatesessiononblur\");\n          this.getCart();\n        }\n      }); // } else {\n      //     this.setState({ showUpdateError: true })\n      // }\n    };\n\n    this.handleClearLine = () => {\n      let selectedItemTreatmentIds = this.props.id;\n      let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\n      this.props.commonDeleteApi(`trmttmpitemhelper/delete/?clear_all=0&treatmentid=${HightoLow}&sessions=${this.props.session}`).then(() => {\n        this.getCart();\n      });\n    };\n\n    this.handleClearAll = () => {\n      let selectedItemTreatmentIds = this.props.id;\n      let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\n      this.props.commonDeleteApi(`trmttmpitemhelper/delete/?clear_all=1&treatmentid=${HightoLow}&sessions=${this.props.session}`).then(() => {\n        this.getCart();\n      });\n    };\n\n    this.getStaffList = data => {\n      let {\n        page,\n        limit\n      } = this.state;\n      this.props.getCommonApi(`empcartlist/?sales_staff=0&page=${page}&limit=${limit}`).then(async key => {\n        let {\n          status,\n          data\n        } = key;\n        console.log(key, \"sdfgsdfgsdfgdfg sdfgsdfgsdfg\");\n        let {\n          staffList\n        } = this.state;\n        let {\n          meta\n        } = this.state;\n        staffList = [];\n        meta = {};\n        staffList = data;\n        meta = data.meta.pagination;\n        console.log(meta, \"metalist\");\n        this.setState({\n          staffList,\n          meta\n        });\n      });\n    };\n\n    this.handleNext = async () => {\n      let {\n        page\n      } = this.state;\n      page = page + 1;\n      await this.setState({\n        page\n      });\n\n      if (page > 0) {\n        this.getStaffList();\n      }\n    };\n\n    this.handleBack = async () => {\n      let {\n        page\n      } = this.state;\n      page = page - 1;\n      await this.setState({\n        page\n      });\n\n      if (page > 0) {\n        this.getStaffList();\n      }\n    };\n\n    this.handleSelect_Staff = async staff => {\n      let {\n        tstaffList,\n        postFields,\n        cartData,\n        updateFields\n      } = this.state;\n      console.log(\"handleSelect_Staff-Source_Codeid\", this.state.updateFields);\n      let {\n        Room_Codeid,\n        Source_Codeid,\n        new_remark\n      } = updateFields;\n      let {\n        work_point\n      } = postFields;\n      console.log(\"workpoint\", this.props.workPoint);\n      let data = {\n        helper_id: staff.id\n      };\n      let selectedItemTreatmentIds = this.props.id;\n      let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\n      await this.props.commonCreateApi(`trmttmpitemhelper/?treatmentid=${HightoLow}&workcommpoints=${work_point}&sessions=${this.props.session}`, data).then(key => {\n        this.getCart1();\n      });\n    };\n\n    this.getCart1 = () => {\n      let {\n        roomList,\n        sourceList,\n        staffList,\n        cartData,\n        duration,\n        tstaffList,\n        employeeOptions\n      } = this.state;\n      let selectedItemTreatmentIds = this.props.id;\n      let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\n      this.props.getCommonApi(`trmttmpitemhelper/?treatmentid=${HightoLow}&sessions=${this.props.session}`).then(async key => {\n        cartData = key;\n        await this.setState({\n          tstaffList: [],\n          employeeOptions: [],\n          sessionTableDetails: []\n        });\n        tstaffList = key.data;\n        employeeOptions = [];\n        tstaffList.forEach(e => {\n          employeeOptions.push({\n            label: e.helper_name,\n            value: e.helper_id\n          });\n        });\n        this.setState({\n          cartData,\n          tstaffList,\n          employeeOptions\n        }, () => {\n          this.checkFirstArrayAndUpdateTiming();\n        });\n        this.getDataFromRes(key);\n      });\n    };\n\n    this.checkFirstArrayAndUpdateTiming = () => {\n      let {\n        tstaffList,\n        cartData,\n        updateFields\n      } = this.state;\n      var item = tstaffList[0];\n      let {\n        Room_Codeid,\n        Source_Codeid,\n        new_remark\n      } = updateFields;\n      var today = new Date(),\n          time = today.getHours() + \":\" + today.getMinutes();\n      let data = {};\n      data = {\n        appt_fr_time: this.roundTime(time, 10),\n        add_duration: cartData.value.add_duration,\n        wp1: item.wp1\n      };\n      this.props.commonPatchApi(`trmttmpitemhelper/${item.id}/?Room_Codeid=${Room_Codeid}&Source_Codeid=${Source_Codeid}&new_remark=${new_remark}`, data).then(() => {\n        this.getCart();\n      });\n    };\n\n    this.roundTime = (time, minutesToRound) => {\n      let [hours, minutes] = time.split(\":\");\n      hours = parseInt(hours);\n      minutes = parseInt(minutes); // Convert hours and minutes to time in minutes\n\n      time = hours * 60 + minutes;\n      let rounded = Math.round(time / minutesToRound) * minutesToRound;\n      let rHr = \"\" + Math.floor(rounded / 60);\n      let rMin = \"\" + rounded % 60;\n      return rHr.padStart(2, \"0\") + \":\" + rMin.padStart(2, \"0\");\n    };\n\n    this.handleUpdatChanges = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        updateFields\n      } = this.state;\n      updateFields[name] = value;\n      this.setState({\n        updateFields\n      });\n    };\n\n    this.handlePostChanges = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        postFields\n      } = this.state;\n      postFields[name] = value;\n      this.setState({\n        postFields\n      });\n    };\n\n    this.handleAddRow = () => {\n      this.state.sessionTableDetails.push({\n        sessions: 0.0,\n        values: []\n      });\n      this.setState({});\n    };\n\n    this.handleRemoveRow = index => {\n      let {\n        sessionTableDetails\n      } = this.state;\n\n      if (index > -1) {\n        sessionTableDetails.splice(index, 1);\n      }\n\n      this.setState({\n        sessionTableDetails\n      });\n    };\n\n    this.handleSessionsChange = (e, index) => {\n      let {\n        sessionTableDetails\n      } = this.state;\n      sessionTableDetails[index].sessions = parseFloat(e.target.value);\n      this.setState({\n        sessionTableDetails\n      });\n    };\n\n    this.handleSessionEmpChange = (e, index) => {\n      let {\n        sessionTableDetails\n      } = this.state;\n      let values = [];\n      e.forEach(e => {\n        values.push(e.value);\n      });\n      sessionTableDetails[index].values = values;\n      this.setState({\n        sessionTableDetails\n      });\n    };\n\n    this.calculateSessions = () => {\n      let {\n        sessionTableDetails,\n        employeeOptions,\n        tstaffList\n      } = this.state;\n      console.log(sessionTableDetails, employeeOptions, tstaffList, \"Megalaaaa\");\n      let sessionCount = 0;\n      sessionTableDetails.forEach(e => {\n        sessionCount += e.sessions;\n      });\n\n      if (sessionCount > this.props.session) {\n        Toast({\n          type: \"error\",\n          message: \"Session count cannot exceed!\"\n        });\n        return;\n      }\n\n      let employeeStartCount = 1;\n      employeeOptions.forEach(e => {\n        let total = 0.0;\n        console.log(e.value, \"Employee ID \");\n        let employeeid = e.value;\n        sessionTableDetails.forEach((sessionTable, index) => {\n          let splitSessionAdjustCount = Number(sessionTableDetails[index].sessions / sessionTableDetails[index].values.length).toFixed(2);\n          let splitSessionreminder = Number(sessionTableDetails[index].sessions - splitSessionAdjustCount * sessionTableDetails[index].values.length).toFixed(2);\n          let includeSplitReminder = Number(splitSessionAdjustCount) + Number(splitSessionreminder);\n\n          if (sessionTable.values.includes(e.value)) {\n            let finalemployee = sessionTableDetails[index].values;\n            let lastElement = finalemployee[finalemployee.length - 1];\n\n            if (employeeid == lastElement) {\n              total += includeSplitReminder;\n              employeeStartCount = 1;\n            } else {\n              total = Number(total) + Number(splitSessionAdjustCount);\n              employeeStartCount += 1;\n            }\n          }\n        });\n        tstaffList.filter(ele => ele.helper_id == e.value)[0].session = total;\n      });\n      console.log(tstaffList, \"list with sessions\");\n      this.setState({\n        tstaffList\n      });\n      let event = {\n        target: {\n          name: \"session\"\n        }\n      };\n      tstaffList.forEach((item, index) => {\n        this.handleUpdatestaff(event, item, index);\n      });\n    };\n  }\n\n  render() {\n    let {\n      staffList = [],\n      tstaffList = [],\n      roomList,\n      Room,\n      Source,\n      duration,\n      startDuration,\n      sourceList,\n      updateFields,\n      headerDetails,\n      cartData = {},\n      postFields,\n      employeeOptions,\n      sessionTableDetails,\n      sessionTableHeader,\n      meta\n    } = this.state;\n    let {\n      value = {}\n    } = cartData;\n    let {\n      work_point\n    } = postFields;\n    let {\n      Room_Codeid,\n      Source_Codeid,\n      new_remark\n    } = updateFields;\n    let {\n      Item,\n      Price,\n      add_duration,\n      room_id,\n      room_name,\n      source_id,\n      source_name,\n      times\n    } = value;\n    let {\n      tsStaff = {},\n      t\n    } = this.props;\n    let {\n      course,\n      unit_amount,\n      workpoint\n    } = tsStaff;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row new-cart treatment-done\",\n      id: \"treatment-done-sesiions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 767,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 768,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"fs-18 font-700 mb-3 title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 11\n      }\n    }, t(\"Treatment Done\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 772,\n        columnNumber: 11\n      }\n    }, t(\"Item\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 775,\n        columnNumber: 11\n      }\n    }, Item), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 776,\n        columnNumber: 11\n      }\n    }, t(\"Price\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 779,\n        columnNumber: 11\n      }\n    }, Price), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 780,\n        columnNumber: 11\n      }\n    }, t(\"Work Point\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 784,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: work_point ? work_point : \"\",\n      name: \"work_point\",\n      onChange: this.handlePostChanges,\n      className: `customer-name`,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 785,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 794,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 795,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 796,\n        columnNumber: 11\n      }\n    }, t(\"Session\")), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 800,\n        columnNumber: 11\n      }\n    }, this.props.session)), /*#__PURE__*/React.createElement(\"div\", {\n      className: `col-12 cart-item emp-image`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 802,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(StaffList, {\n      staffList: staffList,\n      meta: meta,\n      handleNext: () => this.handleNext(),\n      handleBack: () => this.handleBack(),\n      handleSelectedStaff: item => this.handleSelect_Staff(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 803,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: `col-12 cart-item`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 811,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `item-list`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 812,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 813,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination // pageMeta={pageMeta}\n      // isEmpty={tstaffList.length === 0 ? true:false}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 814,\n        columnNumber: 15\n      }\n    }, tstaffList && tstaffList.length > 0 ? tstaffList.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 823,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: \"position-relative status-type\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 824,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left fs-20\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 29\n        }\n      }, item.helper_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 829,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 830,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(NormalInput // placeholder=\"Enter here\"\n      // options={siteList}\n      , {\n        value: item.session,\n        name: \"session\",\n        type: \"number\",\n        min: \"0\",\n        max: this.props.session,\n        onChange: e => this.handleUpdateSession(e, item, index),\n        onBlur: e => this.handleUpdatestaff(e, item, index),\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 831,\n          columnNumber: 31\n        }\n      }))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 849,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 850,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(NormalInput // placeholder=\"Enter here\"\n      // options={siteList}\n      , {\n        value: item.wp1,\n        name: \"wp1\",\n        type: \"number\",\n        min: \"0\",\n        max: postFields.work_point,\n        onChange: e => this.handleuUpdateWp(e, item, index),\n        onBlur: e => this.handleUpdatestaff(e, item, index),\n        className: \"text-right\" //className=\"wpr\"\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 31\n        }\n      }))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 870,\n          columnNumber: 27\n        }\n      }, this.state.hideNotNeededControls == \"true\" && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 872,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 873,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"\n      , {\n        options: startDuration,\n        value: item.appt_fr_time,\n        name: \"appt_fr_time\",\n        onChange: e => this.handleUpdatestaff(e, item, index),\n        className: \"customer-name py-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 874,\n          columnNumber: 35\n        }\n      })))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 27\n        }\n      }, this.state.hideNotNeededControls == \"true\" && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 890,\n          columnNumber: 31\n        }\n      }, item.appt_to_time)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 896,\n          columnNumber: 27\n        }\n      }, this.state.hideNotNeededControls == \"true\" && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 899,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"this.setState({add_duration:e.target.value})\n      , {\n        options: duration,\n        value: item.add_duration,\n        name: \"add_duration\",\n        onChange: e => this.handleUpdatestaff(e, item, index),\n        className: \"customer-name p-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 900,\n          columnNumber: 35\n        }\n      })))));\n    }) : null)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 cart-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 923,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Tree, {\n      content: \"Assign Sessions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 924,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item-list p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 925,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 926,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 p-0 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 927,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      label: \"Add Row\",\n      onClick: this.handleAddRow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 928,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 935,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: sessionTableHeader,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 936,\n        columnNumber: 17\n      }\n    }, sessionTableDetails && sessionTableDetails.length > 0 ? sessionTableDetails.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 940,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(NormalInput // placeholder=\"Enter here\"\n      // options={siteList}\n      , {\n        value: item.sessions,\n        name: \"session\",\n        type: \"number\",\n        min: \"0\",\n        max: this.props.session,\n        onChange: e => this.handleSessionsChange(e, index),\n        className: \"text-right\" //className=\"wpr\"\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 959,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 960,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(NormalMultiSelect // placeholder=\"Enter here\"\n      , {\n        target: document.getElementById(\"treatment-done-sesiions\"),\n        options: employeeOptions,\n        value: item.values,\n        handleMultiSelect: e => this.handleSessionEmpChange(e, index) //className=\"wpr\"\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 961,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 975,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 976,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"icon\",\n        onClick: () => this.handleRemoveRow(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 977,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"30\",\n        height: \"30\",\n        fill: \"red\",\n        class: \"bi bi-x\",\n        viewBox: \"0 0 16 16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 981,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"path\", {\n        d: \"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 989,\n          columnNumber: 37\n        }\n      }))))));\n    }) : null)), (sessionTableDetails === null || sessionTableDetails === void 0 ? void 0 : sessionTableDetails.length) > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1001,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 p-0 mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1002,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      label: \"Assign Sessions\",\n      onClick: this.calculateSessions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1003,\n        columnNumber: 21\n      }\n    }))) : null))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1015,\n        columnNumber: 9\n      }\n    }, this.state.hideNotNeededControls == \"true\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1017,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1018,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1019,\n        columnNumber: 17\n      }\n    }, t(\"Room\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1023,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"\n    , {\n      options: roomList,\n      value: Room_Codeid,\n      name: \"Room_Codeid\",\n      onChange: this.handleUpdatChanges,\n      className: \"customer-name py-0\" // disabled={Room_Codeid}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1035,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1036,\n        columnNumber: 17\n      }\n    }, \"Source\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1040,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect // placeholder=\"Enter here\"\n    , {\n      options: sourceList,\n      value: Source_Codeid,\n      name: \"Source_Codeid\",\n      onChange: this.handleUpdatChanges,\n      className: \"customer-name py-0\" // disabled={Source_Codeid}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1041,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1053,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1054,\n        columnNumber: 17\n      }\n    }, t(\"New Remark\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1058,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput // placeholder=\"Enter here\"\n    // options={siteList}\n    , {\n      value: new_remark,\n      name: \"new_remark\",\n      onChange: this.handleUpdatChanges,\n      className: \"customer-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1059,\n        columnNumber: 19\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 pt-4 action-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1072,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1073,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1074,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2\",\n      resetbg: true,\n      className: \"fs-15\",\n      label: \"Clear Line\",\n      outline: false,\n      onClick: this.handleClearLine,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1075,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2\",\n      resetbg: true,\n      className: \"fs-15\",\n      label: \"Clear All\",\n      outline: false,\n      onClick: this.handleClearAll,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1083,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1092,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1102,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2\",\n      mainbg: true,\n      className: \" fs-15 confirm\",\n      label: \"Confirm\",\n      outline: false,\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1103,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  selected_cstomer: state.common.selected_cstomer,\n  basicApptDetail: state.appointment.basicApptDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    // getCustomer,\n    getCommonApi,\n    updateForm,\n    commonCreateApi,\n    commonPatchApi,\n    commonDeleteApi\n  }, dispatch);\n};\n\nexport const ChangeStaffTD = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(ChangeStaffTDClass));","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/TransactionHistory/ChangeStaffTD.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","NormalMultiSelect","Toast","dateFormat","_","history","connect","Tree","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","service","StaffList","withTranslation","ChangeStaffTDClass","state","isOpen","currentIndex","tstaffList","cartData","postFields","work_point","Room","Source","new_remark","updateFields","Room_Codeid","Source_Codeid","outletList","headerDetails","label","sortKey","width","divClass","sessionTableHeader","sessionTableDetails","employeeOptions","customerOption","roomList","sourceList","staffList","duration","startDuration","showPostError","showUpdateError","staffData","page","limit","meta","hideNotNeededControls","componentDidMount","validator","element","message","autoForceUpdate","props","then","key","status","data","value","push","id","displayname","setState","source_desc","getStaffList","getCart","startDurationLocal","selectedItemTreatmentIds","HightoLow","sort","a","b","console","log","session","forEach","e","helper_name","helper_id","getDataFromRes","room_id","source_id","handleSubmit","formFields","xTotalWp1Amount","i","length","parseFloat","wp1","type","cartId","handleModal","handleDialog","handleAddstaff","item","times","handleuUpdateWp","event","index","workpoint","Number","userEnteredValue","target","name","debouncedFn","debounce","handleUpdatestaff","handleUpdateSession","sessionPoints","appt_fr_time","add_duration","toFixed","res","handleClearLine","handleClearAll","pagination","handleNext","handleBack","handleSelect_Staff","staff","workPoint","getCart1","checkFirstArrayAndUpdateTiming","today","Date","time","getHours","getMinutes","roundTime","minutesToRound","hours","minutes","split","parseInt","rounded","Math","round","rHr","floor","rMin","padStart","handleUpdatChanges","handlePostChanges","handleAddRow","sessions","values","handleRemoveRow","splice","handleSessionsChange","handleSessionEmpChange","calculateSessions","sessionCount","employeeStartCount","total","employeeid","sessionTable","splitSessionAdjustCount","splitSessionreminder","includeSplitReminder","includes","finalemployee","lastElement","filter","ele","render","Item","Price","room_name","source_name","tsStaff","t","course","unit_amount","handlePagination","map","appt_to_time","document","getElementById","mapStateToProps","selected_cstomer","common","basicApptDetail","appointment","mapDispatchToProps","dispatch","ChangeStaffTD"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalButton,\r\n  NormalInput,\r\n  NormalSelect,\r\n  InputSearch,\r\n  NormalModal,\r\n  TableWrapper,\r\n  NormalMultiSelect,\r\n} from \"component/common\";\r\nimport { Toast } from \"service/toast\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport Tree from \"react-animated-tree\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\n// import { Treatment, Payment, EditCart } from './cart/index';\r\nimport service from \"assets/images/make-up-brush.png\";\r\nimport { StaffList } from \"../Cart/cart/StaffList\";\r\nimport { withTranslation } from \"react-i18next\";\r\n// import Discount from './cart/discount';\r\n\r\nexport class ChangeStaffTDClass extends Component {\r\n  state = {\r\n    isOpen: false,\r\n    currentIndex: -1,\r\n    tstaffList: [],\r\n    cartData: {},\r\n    postFields: {\r\n      work_point: \"\",\r\n    },\r\n    Room: null,\r\n    Source: null,\r\n    new_remark: null,\r\n    updateFields: {\r\n      Room_Codeid: \"\",\r\n      Source_Codeid: \"\",\r\n      new_remark: \"\",\r\n    },\r\n    outletList: [],\r\n    headerDetails: [\r\n      { label: \"Employee name\", sortKey: false, width: \"130px\" },\r\n      { label: \"Sessions\", width: \"30px\", divClass: \"justify-content-center\" },\r\n      { label: \"WP1\", width: \"42px\", divClass: \"justify-content-center\" },\r\n      {\r\n        label: \"St. time\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"End time\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Duration\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n    ],\r\n    sessionTableHeader: [\r\n      { label: \"Sessions\", width: \"30px\", divClass: \"justify-content-center\" },\r\n      { label: \"Employees\", divClass: \"justify-content-center\" },\r\n      { label: \"\" },\r\n    ],\r\n    sessionTableDetails: [],\r\n    employeeOptions: [],\r\n    customerOption: [],\r\n    // cartData: {},\r\n    roomList: [],\r\n    sourceList: [],\r\n    staffList: [],\r\n    duration: [],\r\n    startDuration: [],\r\n    showPostError: false,\r\n    showUpdateError: false,\r\n    staffData: {},\r\n    page: 1,\r\n    limit: 7,\r\n    meta: {},\r\n    hideNotNeededControls: \"false\",\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    // this.getCart();\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    // let { basicApptDetail } = this.props;\r\n    // if (basicApptDetail.custId) {\r\n    //     let { formFields } = this.state;\r\n    //     formFields[\"custId\"] = basicApptDetail.custId;\r\n    //     formFields[\"custName\"] = basicApptDetail.custName;\r\n    //     this.setState({ formFields });\r\n    // }\r\n    let {\r\n      roomList,\r\n      sourceList,\r\n      staffList,\r\n      cartData,\r\n      duration,\r\n      startDuration,\r\n      tstaffList,\r\n    } = this.state;\r\n    this.props.getCommonApi(\"room/\").then(key => {\r\n      let { status, data } = key;\r\n      for (let value of data) {\r\n        roomList.push({ value: value.id, label: value.displayname });\r\n      }\r\n      this.setState({ roomList });\r\n    });\r\n    this.props.getCommonApi(`source/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          sourceList.push({ value: value.id, label: value.source_desc });\r\n        }\r\n        this.setState({ sourceList });\r\n      }\r\n    });\r\n    this.getStaffList();\r\n    this.getCart();\r\n    this.props.getCommonApi(`treatment/Duration/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          duration.push({ value: value, label: value });\r\n        }\r\n        this.setState({ duration });\r\n      }\r\n    });\r\n\r\n    const startDurationLocal = [\r\n      \"08:00\",\r\n      \"08:10\",\r\n      \"08:20\",\r\n      \"08:30\",\r\n      \"08:40\",\r\n      \"08:50\",\r\n      \"09:00\",\r\n      \"09:10\",\r\n      \"09:20\",\r\n      \"09:30\",\r\n      \"09:40\",\r\n      \"09:50\",\r\n      \"10:00\",\r\n      \"10:10\",\r\n      \"10:20\",\r\n      \"10:30\",\r\n      \"10:40\",\r\n      \"10:50\",\r\n      \"11:00\",\r\n      \"11:10\",\r\n      \"11:20\",\r\n      \"11:30\",\r\n      \"11:40\",\r\n      \"11:50\",\r\n      \"12:00\",\r\n      \"12:10\",\r\n      \"12:20\",\r\n      \"12:30\",\r\n      \"12:40\",\r\n      \"12:50\",\r\n      \"13:00\",\r\n      \"13:10\",\r\n      \"13:20\",\r\n      \"13:30\",\r\n      \"13:40\",\r\n      \"13:50\",\r\n      \"14:00\",\r\n      \"14:10\",\r\n      \"14:20\",\r\n      \"14:30\",\r\n      \"14:40\",\r\n      \"14:50\",\r\n      \"15:00\",\r\n      \"15:10\",\r\n      \"15:20\",\r\n      \"15:30\",\r\n      \"15:40\",\r\n      \"15:50\",\r\n      \"16:00\",\r\n      \"16:10\",\r\n      \"16:20\",\r\n      \"16:30\",\r\n      \"16:40\",\r\n      \"16:50\",\r\n      \"17:00\",\r\n      \"17:10\",\r\n      \"17:20\",\r\n      \"17:30\",\r\n      \"17:40\",\r\n      \"17:50\",\r\n      \"18:00\",\r\n      \"18:10\",\r\n      \"18:20\",\r\n      \"18:30\",\r\n      \"18:40\",\r\n      \"18:50\",\r\n      \"19:00\",\r\n      \"19:10\",\r\n      \"19:20\",\r\n      \"19:30\",\r\n      \"19:40\",\r\n      \"19:50\",\r\n      \"20:00\",\r\n      \"20:10\",\r\n      \"20:20\",\r\n      \"20:30\",\r\n      \"20:40\",\r\n      \"20:50\",\r\n      \"21:00\",\r\n      \"21:10\",\r\n      \"21:20\",\r\n      \"21:30\",\r\n      \"21:40\",\r\n      \"21:50\",\r\n      \"22:00\",\r\n      \"22:10\",\r\n      \"22:20\",\r\n      \"22:30\",\r\n      \"22:40\",\r\n      \"22:50\",\r\n      \"23:00\",\r\n    ];\r\n    //this.props.getCommonApi(`treatment/Duration/`).then((key) => {\r\n    //let { status, data } = key;\r\n    //if (status === 200) {\r\n    for (let value of startDurationLocal) {\r\n      startDuration.push({ value: value, label: value });\r\n    }\r\n    this.setState({ duration, startDuration });\r\n    //}\r\n    //})\r\n\r\n    //this.setState({ duration:durationLocal })\r\n  };\r\n\r\n  getCart = () => {\r\n    let {\r\n      roomList,\r\n      sourceList,\r\n      staffList,\r\n      cartData,\r\n      duration,\r\n      tstaffList,\r\n      employeeOptions,\r\n    } = this.state;\r\n    let selectedItemTreatmentIds = this.props.id;\r\n    let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\r\n    console.log(HightoLow, \"hightoLow\");\r\n    this.props\r\n      .getCommonApi(\r\n        `trmttmpitemhelper/?treatmentid=${HightoLow}&sessions=${this.props.session}`\r\n      )\r\n      .then(async key => {\r\n        cartData = key;\r\n        await this.setState({\r\n          tstaffList: [],\r\n          employeeOptions: [],\r\n          sessionTableDetails: [],\r\n        });\r\n        tstaffList = key.data;\r\n        employeeOptions = [];\r\n        tstaffList.forEach(e => {\r\n          employeeOptions.push({ label: e.helper_name, value: e.helper_id });\r\n        });\r\n        this.setState({ cartData, tstaffList, employeeOptions });\r\n        this.getDataFromRes(key);\r\n      });\r\n  };\r\n\r\n  getDataFromRes = async key => {\r\n    let { postFields, updateFields } = this.state;\r\n    postFields[\"work_point\"] = key.value.work_point ? key.value.work_point : \"\";\r\n    updateFields[\"Room_Codeid\"] = key.value.room_id ? key.value.room_id : \"\";\r\n    updateFields[\"Source_Codeid\"] = key.value.source_id\r\n      ? key.value.source_id\r\n      : \"\";\r\n    updateFields[\"new_remark\"] = key.value.new_remark\r\n      ? key.value.new_remark\r\n      : \"\";\r\n    await this.setState({\r\n      postFields,\r\n      updateFields,\r\n    });\r\n  };\r\n\r\n  handleSubmit = id => {\r\n    console.log(\r\n      \"this.state.updateFields.Source_Codeid\",\r\n      this.state.updateFields.Source_Codeid\r\n    );\r\n    /* if(this.state.updateFields.Room_Codeid==\"\")\r\n        {\r\n            alert(\"Room Must be selected\");\r\n            return\r\n        }\r\n        if(this.state.updateFields.Source_Codeid==\"01\")\r\n        {\r\n            alert(\"Source Must be selected\");\r\n            return\r\n        }*/\r\n    let { tstaffList, formFields, cartData, postFields } = this.state;\r\n    let xTotalWp1Amount = 0;\r\n    for (var i = 0; i < this.state.tstaffList.length; i++) {\r\n      xTotalWp1Amount += parseFloat(this.state.tstaffList[i].wp1);\r\n    }\r\n    if (parseFloat(xTotalWp1Amount) == parseFloat(postFields.work_point)) {\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"User Entry should not greater or lesser than Work point\",\r\n      });\r\n      return;\r\n    }\r\n    let selectedItemTreatmentIds = this.props.id;\r\n    let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\r\n    this.props\r\n      .getCommonApi(\r\n        `trmttmpitemhelper/confirm/?treatmentid=${HightoLow}&sessions=${this.props.session}&cart_id=${this.props.cartId}`\r\n      )\r\n      .then(async key => {\r\n        if (key.status === 200) {\r\n          this.props.handleModal();\r\n        }\r\n      });\r\n  };\r\n\r\n  handleDialog = () => {};\r\n\r\n  handleAddstaff = item => {\r\n    let { tstaffList, formFields, cartData, postFields } = this.state;\r\n    let data = {\r\n      helper_id: item.id,\r\n    };\r\n    let selectedItemTreatmentIds = this.props.id;\r\n    let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\r\n    if (postFields.work_point && postFields.times) {\r\n      this.props\r\n        .commonCreateApi(\r\n          `trmttmpitemhelper/?treatmentid=${HightoLow}&workcommpoints=${postFields.work_point}&sessions=${this.props.session}`,\r\n          data\r\n        )\r\n        .then(() => {\r\n          this.getCart();\r\n        });\r\n    } else {\r\n      this.setState({ showPostError: true });\r\n    }\r\n  };\r\n\r\n  handleuUpdateWp = async (event, item, index) => {\r\n    // event.persist();\r\n    let { postFields } = this.state;\r\n    let workpoint = Number(postFields.work_point);\r\n    let userEnteredValue = Number(event.target.value);\r\n    if (userEnteredValue > workpoint) {\r\n      return false;\r\n    }\r\n\r\n    let { tstaffList } = this.state;\r\n    tstaffList[index][event.target.name] = event.target.value;\r\n    await this.setState({\r\n      tstaffList,\r\n    });\r\n    console.log(event, item, index, \"sfdgfdgsgf too\");\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async (event, item, index) => {\r\n        console.log(event, item, index, \"sfdgfdgsgf inside\");\r\n        this.handleUpdatestaff(event, item, index);\r\n      }, 1000);\r\n    }\r\n    this.debouncedFn(event, item, index);\r\n  };\r\n\r\n  handleUpdateSession = async (event, item, index) => {\r\n    // event.persist();\r\n    let { postFields } = this.state;\r\n    let sessionPoints = this.props.session;\r\n    let userEnteredValue = parseFloat(event.target.value);\r\n    if (userEnteredValue > sessionPoints) {\r\n      return false;\r\n    }\r\n    let { tstaffList } = this.state;\r\n    tstaffList[index][event.target.name] = event.target.value;\r\n    await this.setState({\r\n      tstaffList,\r\n    });\r\n\r\n    console.log(event, item, index, \"sfdgfdgsgf too\");\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async (event, item, index) => {\r\n        console.log(event, item, index, \"sfdgfdgsgf inside\");\r\n        this.handleUpdatestaff(event, item, index);\r\n      }, 1000);\r\n    }\r\n    this.debouncedFn(event, item, index);\r\n  };\r\n\r\n  handleUpdatestaff = async (event, item, index) => {\r\n    //this.state.updateFields.Source_Codeid=\"\";\r\n    let { tstaffList, cartData, updateFields } = this.state;\r\n    let { Room_Codeid, Source_Codeid, new_remark } = updateFields;\r\n    if (event.target.name !== \"wp1\" && event.target.name !== \"session\") {\r\n      tstaffList[index][event.target.name] = event.target.value;\r\n      this.setState({\r\n        tstaffList,\r\n      });\r\n    }\r\n    console.log(event, item, index, \"sfdgfdgsgf\");\r\n    let data = {};\r\n    if (event.target.name === \"appt_fr_time\") {\r\n      data = {\r\n        appt_fr_time: event.target.value,\r\n        add_duration: cartData.value.add_duration,\r\n        wp1: Number(item.wp1).toFixed(2),\r\n      };\r\n    }\r\n    if (event.target.name === \"add_duration\") {\r\n      data = {\r\n        appt_fr_time: item.appt_fr_time,\r\n        add_duration: event.target.value,\r\n        wp1: Number(item.wp1).toFixed(2),\r\n      };\r\n    }\r\n    if (event.target.name === \"wp1\") {\r\n      data = {\r\n        appt_fr_time: item.appt_fr_time,\r\n        add_duration: cartData.value.add_duration,\r\n        wp1: Number(item.wp1).toFixed(2),\r\n      };\r\n    }\r\n    if (event.target.name === \"session\") {\r\n      data = {\r\n        appt_fr_time: item.appt_fr_time,\r\n        add_duration: cartData.value.add_duration,\r\n        wp1: Number(item.wp1).toFixed(2),\r\n        session: Number(item.session).toFixed(2),\r\n      };\r\n    }\r\n\r\n    // if (updateFields.Source && updateFields.Room) {\r\n    this.props\r\n      .commonPatchApi(\r\n        `trmttmpitemhelper/${item.id}/?Room_Codeid=${Room_Codeid}&Source_Codeid=${Source_Codeid}&new_remark=${new_remark}`,\r\n        data\r\n      )\r\n      .then(res => {\r\n        if (res.status == 200) {\r\n          console.log(res, \"updatesessiononblur\");\r\n          this.getCart();\r\n        }\r\n      });\r\n    // } else {\r\n    //     this.setState({ showUpdateError: true })\r\n    // }\r\n  };\r\n  handleClearLine = () => {\r\n    let selectedItemTreatmentIds = this.props.id;\r\n    let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\r\n    this.props\r\n      .commonDeleteApi(\r\n        `trmttmpitemhelper/delete/?clear_all=0&treatmentid=${HightoLow}&sessions=${this.props.session}`\r\n      )\r\n      .then(() => {\r\n        this.getCart();\r\n      });\r\n  };\r\n\r\n  handleClearAll = () => {\r\n    let selectedItemTreatmentIds = this.props.id;\r\n    let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\r\n    this.props\r\n      .commonDeleteApi(\r\n        `trmttmpitemhelper/delete/?clear_all=1&treatmentid=${HightoLow}&sessions=${this.props.session}`\r\n      )\r\n      .then(() => {\r\n        this.getCart();\r\n      });\r\n  };\r\n\r\n  getStaffList = data => {\r\n    let { page, limit } = this.state;\r\n    this.props\r\n      .getCommonApi(`empcartlist/?sales_staff=0&page=${page}&limit=${limit}`)\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        console.log(key, \"sdfgsdfgsdfgdfg sdfgsdfgsdfg\");\r\n        let { staffList } = this.state;\r\n        let { meta } = this.state;\r\n        staffList = [];\r\n        meta = {};\r\n        staffList = data;\r\n        meta = data.meta.pagination;\r\n        console.log(meta, \"metalist\");\r\n        this.setState({\r\n          staffList,\r\n          meta,\r\n        });\r\n      });\r\n  };\r\n\r\n  handleNext = async () => {\r\n    let { page } = this.state;\r\n    page = page + 1;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    if (page > 0) {\r\n      this.getStaffList();\r\n    }\r\n  };\r\n\r\n  handleBack = async () => {\r\n    let { page } = this.state;\r\n    page = page - 1;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    if (page > 0) {\r\n      this.getStaffList();\r\n    }\r\n  };\r\n\r\n  handleSelect_Staff = async staff => {\r\n    let { tstaffList, postFields, cartData, updateFields } = this.state;\r\n    console.log(\"handleSelect_Staff-Source_Codeid\", this.state.updateFields);\r\n    let { Room_Codeid, Source_Codeid, new_remark } = updateFields;\r\n    let { work_point } = postFields;\r\n    console.log(\"workpoint\", this.props.workPoint);\r\n    let data = {\r\n      helper_id: staff.id,\r\n    };\r\n    let selectedItemTreatmentIds = this.props.id;\r\n    let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\r\n    await this.props\r\n      .commonCreateApi(\r\n        `trmttmpitemhelper/?treatmentid=${HightoLow}&workcommpoints=${work_point}&sessions=${this.props.session}`,\r\n        data\r\n      )\r\n      .then(key => {\r\n        this.getCart1();\r\n      });\r\n  };\r\n  getCart1 = () => {\r\n    let {\r\n      roomList,\r\n      sourceList,\r\n      staffList,\r\n      cartData,\r\n      duration,\r\n      tstaffList,\r\n      employeeOptions,\r\n    } = this.state;\r\n    let selectedItemTreatmentIds = this.props.id;\r\n    let HightoLow = selectedItemTreatmentIds.sort((a, b) => b - a);\r\n    this.props\r\n      .getCommonApi(\r\n        `trmttmpitemhelper/?treatmentid=${HightoLow}&sessions=${this.props.session}`\r\n      )\r\n      .then(async key => {\r\n        cartData = key;\r\n        await this.setState({\r\n          tstaffList: [],\r\n          employeeOptions: [],\r\n          sessionTableDetails: [],\r\n        });\r\n        tstaffList = key.data;\r\n        employeeOptions = [];\r\n        tstaffList.forEach(e => {\r\n          employeeOptions.push({ label: e.helper_name, value: e.helper_id });\r\n        });\r\n        this.setState({ cartData, tstaffList, employeeOptions }, () => {\r\n          this.checkFirstArrayAndUpdateTiming();\r\n        });\r\n        this.getDataFromRes(key);\r\n      });\r\n  };\r\n  checkFirstArrayAndUpdateTiming = () => {\r\n    let { tstaffList, cartData, updateFields } = this.state;\r\n    var item = tstaffList[0];\r\n    let { Room_Codeid, Source_Codeid, new_remark } = updateFields;\r\n    var today = new Date(),\r\n      time = today.getHours() + \":\" + today.getMinutes();\r\n    let data = {};\r\n\r\n    data = {\r\n      appt_fr_time: this.roundTime(time, 10),\r\n      add_duration: cartData.value.add_duration,\r\n      wp1: item.wp1,\r\n    };\r\n\r\n    this.props\r\n      .commonPatchApi(\r\n        `trmttmpitemhelper/${item.id}/?Room_Codeid=${Room_Codeid}&Source_Codeid=${Source_Codeid}&new_remark=${new_remark}`,\r\n        data\r\n      )\r\n      .then(() => {\r\n        this.getCart();\r\n      });\r\n  };\r\n  roundTime = (time, minutesToRound) => {\r\n    let [hours, minutes] = time.split(\":\");\r\n    hours = parseInt(hours);\r\n    minutes = parseInt(minutes);\r\n\r\n    // Convert hours and minutes to time in minutes\r\n    time = hours * 60 + minutes;\r\n\r\n    let rounded = Math.round(time / minutesToRound) * minutesToRound;\r\n    let rHr = \"\" + Math.floor(rounded / 60);\r\n    let rMin = \"\" + (rounded % 60);\r\n\r\n    return rHr.padStart(2, \"0\") + \":\" + rMin.padStart(2, \"0\");\r\n  };\r\n  handleUpdatChanges = async ({ target: { value, name } }) => {\r\n    let { updateFields } = this.state;\r\n    updateFields[name] = value;\r\n    this.setState({\r\n      updateFields,\r\n    });\r\n  };\r\n\r\n  handlePostChanges = async ({ target: { value, name } }) => {\r\n    let { postFields } = this.state;\r\n    postFields[name] = value;\r\n    this.setState({\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  handleAddRow = () => {\r\n    this.state.sessionTableDetails.push({ sessions: 0.0, values: [] });\r\n    this.setState({});\r\n  };\r\n\r\n  handleRemoveRow = index => {\r\n    let { sessionTableDetails } = this.state;\r\n    if (index > -1) {\r\n      sessionTableDetails.splice(index, 1);\r\n    }\r\n    this.setState({ sessionTableDetails });\r\n  };\r\n\r\n  handleSessionsChange = (e, index) => {\r\n    let { sessionTableDetails } = this.state;\r\n    sessionTableDetails[index].sessions = parseFloat(e.target.value);\r\n    this.setState({ sessionTableDetails });\r\n  };\r\n\r\n  handleSessionEmpChange = (e, index) => {\r\n    let { sessionTableDetails } = this.state;\r\n    let values = [];\r\n    e.forEach(e => {\r\n      values.push(e.value);\r\n    });\r\n    sessionTableDetails[index].values = values;\r\n    this.setState({ sessionTableDetails });\r\n  };\r\n\r\n  calculateSessions = () => {\r\n    let { sessionTableDetails, employeeOptions, tstaffList } = this.state;\r\n    console.log(sessionTableDetails, employeeOptions, tstaffList, \"Megalaaaa\");\r\n    let sessionCount = 0;\r\n    sessionTableDetails.forEach(e => {\r\n      sessionCount += e.sessions;\r\n    });\r\n    if (sessionCount > this.props.session) {\r\n      Toast({ type: \"error\", message: \"Session count cannot exceed!\" });\r\n      return;\r\n    }\r\n    let employeeStartCount = 1;\r\n    employeeOptions.forEach(e => {\r\n      let total = 0.0;\r\n      console.log(e.value,\"Employee ID \")\r\n      let employeeid = e.value;\r\n      sessionTableDetails.forEach((sessionTable, index) => {\r\n        let splitSessionAdjustCount = Number(\r\n          sessionTableDetails[index].sessions /\r\n            sessionTableDetails[index].values.length\r\n        ).toFixed(2);\r\n        let splitSessionreminder = Number(\r\n          sessionTableDetails[index].sessions -\r\n            splitSessionAdjustCount * sessionTableDetails[index].values.length\r\n        ).toFixed(2);\r\n        let includeSplitReminder =\r\n          Number(splitSessionAdjustCount) + Number(splitSessionreminder);\r\n\r\n        if (sessionTable.values.includes(e.value)) {\r\n          let finalemployee = sessionTableDetails[index].values;\r\n          let lastElement = finalemployee[finalemployee.length - 1];\r\n          if (employeeid == lastElement) {\r\n            total += includeSplitReminder;\r\n            employeeStartCount = 1;\r\n          } else {\r\n            total = Number(total) + Number(splitSessionAdjustCount);\r\n            employeeStartCount += 1;\r\n          }\r\n        }\r\n      });\r\n\r\n      tstaffList.filter(ele => ele.helper_id == e.value)[0].session = total;\r\n    });\r\n    console.log(tstaffList, \"list with sessions\");\r\n    this.setState({ tstaffList });\r\n\r\n    let event = { target: { name: \"session\" } };\r\n    tstaffList.forEach((item, index) => {\r\n      this.handleUpdatestaff(event, item, index);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      staffList = [],\r\n      tstaffList = [],\r\n      roomList,\r\n      Room,\r\n      Source,\r\n      duration,\r\n      startDuration,\r\n      sourceList,\r\n      updateFields,\r\n      headerDetails,\r\n      cartData = {},\r\n      postFields,\r\n      employeeOptions,\r\n      sessionTableDetails,\r\n      sessionTableHeader,\r\n      meta,\r\n    } = this.state;\r\n    let { value = {} } = cartData;\r\n    let { work_point } = postFields;\r\n    let { Room_Codeid, Source_Codeid, new_remark } = updateFields;\r\n    let {\r\n      Item,\r\n      Price,\r\n      add_duration,\r\n      room_id,\r\n      room_name,\r\n      source_id,\r\n      source_name,\r\n      times,\r\n    } = value;\r\n    let { tsStaff = {}, t } = this.props;\r\n    let { course, unit_amount, workpoint } = tsStaff;\r\n    return (\r\n      <div className=\"row new-cart treatment-done\" id=\"treatment-done-sesiions\">\r\n        <div className=\"col-12\">\r\n          <p className=\"fs-18 font-700 mb-3 title\">{t(\"Treatment Done\")}</p>\r\n        </div>\r\n        <div className=\"col-6 mb-2\">\r\n          <label className=\"text-left text-black common-label-text \">\r\n            {t(\"Item\")}\r\n          </label>\r\n          <div className=\"input-group mb-2\">{Item}</div>\r\n          <label className=\"text-left text-black common-label-text \">\r\n            {t(\"Price\")}\r\n          </label>\r\n          <div className=\"input-group mb-2\">{Price}</div>\r\n          <label className=\"text-left text-black common-label-text \">\r\n            {t(\"Work Point\")}\r\n          </label>\r\n\r\n          <div className=\"input-group\">\r\n            <NormalInput\r\n              value={work_point ? work_point : \"\"}\r\n              name=\"work_point\"\r\n              onChange={this.handlePostChanges}\r\n              className={`customer-name`}\r\n              disabled={true}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-4 mb-2\"></div>\r\n        <div className=\"col-2 mb-2\">\r\n          <label className=\"text-left text-black common-label-text \">\r\n            {t(\"Session\")}\r\n          </label>\r\n\r\n          <h1>{this.props.session}</h1>\r\n        </div>\r\n        <div className={`col-12 cart-item emp-image`}>\r\n          <StaffList\r\n            staffList={staffList}\r\n            meta={meta}\r\n            handleNext={() => this.handleNext()}\r\n            handleBack={() => this.handleBack()}\r\n            handleSelectedStaff={item => this.handleSelect_Staff(item)}\r\n          />\r\n        </div>\r\n        <div className={`col-12 cart-item`}>\r\n          <div className={`item-list`}>\r\n            <div className=\"table\">\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n                // pageMeta={pageMeta}\r\n                // isEmpty={tstaffList.length === 0 ? true:false}\r\n              >\r\n                {tstaffList && tstaffList.length > 0\r\n                  ? tstaffList.map((item, index) => {\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td className=\"position-relative status-type\">\r\n                            <div className=\"text-left fs-20\">\r\n                              {item.helper_name}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <NormalInput\r\n                                // placeholder=\"Enter here\"\r\n                                // options={siteList}\r\n                                value={item.session}\r\n                                name=\"session\"\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                max={this.props.session}\r\n                                onChange={e =>\r\n                                  this.handleUpdateSession(e, item, index)\r\n                                }\r\n                                onBlur={e =>\r\n                                  this.handleUpdatestaff(e, item, index)\r\n                                }\r\n                                className=\"text-right\"\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <NormalInput\r\n                                // placeholder=\"Enter here\"\r\n                                // options={siteList}\r\n                                value={item.wp1}\r\n                                name=\"wp1\"\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                max={postFields.work_point}\r\n                                onChange={e =>\r\n                                  this.handleuUpdateWp(e, item, index)\r\n                                }\r\n                                onBlur={e =>\r\n                                  this.handleUpdatestaff(e, item, index)\r\n                                }\r\n                                className=\"text-right\"\r\n                                //className=\"wpr\"\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            {this.state.hideNotNeededControls == \"true\" && (\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <div className=\"input-group\">\r\n                                  <NormalSelect\r\n                                    // placeholder=\"Enter here\"\r\n                                    options={startDuration}\r\n                                    value={item.appt_fr_time}\r\n                                    name=\"appt_fr_time\"\r\n                                    onChange={e =>\r\n                                      this.handleUpdatestaff(e, item, index)\r\n                                    }\r\n                                    className=\"customer-name py-0\"\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </td>\r\n                          <td>\r\n                            {this.state.hideNotNeededControls == \"true\" && (\r\n                              <div className=\"text-right\">\r\n                                {item.appt_to_time}\r\n                              </div>\r\n                            )}\r\n                          </td>\r\n\r\n                          <td>\r\n                            {this.state.hideNotNeededControls == \"true\" && (\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <div className=\"input-group\">\r\n                                  <NormalSelect\r\n                                    // placeholder=\"Enter here\"this.setState({add_duration:e.target.value})\r\n                                    options={duration}\r\n                                    value={item.add_duration}\r\n                                    name=\"add_duration\"\r\n                                    onChange={e =>\r\n                                      this.handleUpdatestaff(e, item, index)\r\n                                    }\r\n                                    className=\"customer-name p-0\"\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-12 cart-item\">\r\n          <Tree content=\"Assign Sessions\">\r\n            <div className=\"item-list p-0\">\r\n              <div className=\"d-flex justify-content-end\">\r\n                <div className=\"col-md-4 p-0 mb-2\">\r\n                  <NormalButton\r\n                    mainbg={true}\r\n                    label=\"Add Row\"\r\n                    onClick={this.handleAddRow}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"table\">\r\n                <TableWrapper headerDetails={sessionTableHeader}>\r\n                  {sessionTableDetails && sessionTableDetails.length > 0\r\n                    ? sessionTableDetails.map((item, index) => {\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <NormalInput\r\n                                  // placeholder=\"Enter here\"\r\n                                  // options={siteList}\r\n                                  value={item.sessions}\r\n                                  name=\"session\"\r\n                                  type=\"number\"\r\n                                  min=\"0\"\r\n                                  max={this.props.session}\r\n                                  onChange={e =>\r\n                                    this.handleSessionsChange(e, index)\r\n                                  }\r\n                                  className=\"text-right\"\r\n                                  //className=\"wpr\"\r\n                                />\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <NormalMultiSelect\r\n                                  // placeholder=\"Enter here\"\r\n                                  target={document.getElementById(\r\n                                    \"treatment-done-sesiions\"\r\n                                  )}\r\n                                  options={employeeOptions}\r\n                                  value={item.values}\r\n                                  handleMultiSelect={e =>\r\n                                    this.handleSessionEmpChange(e, index)\r\n                                  }\r\n                                  //className=\"wpr\"\r\n                                />\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <div\r\n                                  className=\"icon\"\r\n                                  onClick={() => this.handleRemoveRow(index)}\r\n                                >\r\n                                  <svg\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                    width=\"30\"\r\n                                    height=\"30\"\r\n                                    fill=\"red\"\r\n                                    class=\"bi bi-x\"\r\n                                    viewBox=\"0 0 16 16\"\r\n                                  >\r\n                                    <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\" />\r\n                                  </svg>\r\n                                </div>\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    : null}\r\n                </TableWrapper>\r\n              </div>\r\n              {sessionTableDetails?.length > 0 ? (\r\n                <div className=\"d-flex justify-content-end\">\r\n                  <div className=\"col-md-4 p-0 mt-2\">\r\n                    <NormalButton\r\n                      mainbg={true}\r\n                      label=\"Assign Sessions\"\r\n                      onClick={this.calculateSessions}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </Tree>\r\n        </div>\r\n\r\n        <div className=\"col-12 mb-2\">\r\n          {this.state.hideNotNeededControls == \"true\" && (\r\n            <div className=\"row\">\r\n              <div className=\"col-4\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"Room\")}\r\n                </label>\r\n\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    // placeholder=\"Enter here\"\r\n                    options={roomList}\r\n                    value={Room_Codeid}\r\n                    name=\"Room_Codeid\"\r\n                    onChange={this.handleUpdatChanges}\r\n                    className=\"customer-name py-0\"\r\n                    // disabled={Room_Codeid}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-4\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  Source\r\n                </label>\r\n\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    // placeholder=\"Enter here\"\r\n                    options={sourceList}\r\n                    value={Source_Codeid}\r\n                    name=\"Source_Codeid\"\r\n                    onChange={this.handleUpdatChanges}\r\n                    className=\"customer-name py-0\"\r\n                    // disabled={Source_Codeid}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-4\">\r\n                <label className=\"text-left text-black common-label-text \">\r\n                  {t(\"New Remark\")}\r\n                </label>\r\n\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    // placeholder=\"Enter here\"\r\n                    // options={siteList}\r\n                    value={new_remark}\r\n                    name=\"new_remark\"\r\n                    onChange={this.handleUpdatChanges}\r\n                    className=\"customer-name\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"col-12 pt-4 action-bar\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6 d-flex\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                resetbg={true}\r\n                className=\"fs-15\"\r\n                label=\"Clear Line\"\r\n                outline={false}\r\n                onClick={this.handleClearLine}\r\n              />\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                resetbg={true}\r\n                className=\"fs-15\"\r\n                label=\"Clear All\"\r\n                outline={false}\r\n                onClick={this.handleClearAll}\r\n              />\r\n            </div>\r\n            <div className=\"col-4 text-right\">\r\n              {/* <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                danger={true}\r\n                                className=\" fs-15 close\"\r\n                                label=\"Close\"\r\n                                outline={false}\r\n                                onClick={this.props.handleModal}\r\n                            /> */}\r\n            </div>\r\n            <div className=\"col-2 text-right\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2\"}\r\n                mainbg={true}\r\n                className=\" fs-15 confirm\"\r\n                label=\"Confirm\"\r\n                outline={false}\r\n                onClick={this.handleSubmit}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ChangeStaffTD = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ChangeStaffTDClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}