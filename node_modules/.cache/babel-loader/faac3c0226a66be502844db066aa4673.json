{"ast":null,"code":"/**\r\n * DevExtreme (ui/pivot_grid/remote_store.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _data_source = require(\"../../data/data_source/data_source\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _uiPivot_grid = require(\"./ui.pivot_grid.utils\");\n\nvar _remote_store = require(\"./remote_store.utils\");\n\nvar _date_serialization = _interopRequireDefault(require(\"../../core/utils/date_serialization\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    return _arrayLikeToArray(arr);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction createGroupingOptions(dimensionOptions, useSortOrder) {\n  var groupingOptions = [];\n  (0, _iterator.each)(dimensionOptions, function (index, dimensionOption) {\n    groupingOptions.push({\n      selector: dimensionOption.dataField,\n      groupInterval: dimensionOption.groupInterval,\n      desc: useSortOrder && \"desc\" === dimensionOption.sortOrder,\n      isExpanded: index < dimensionOptions.length - 1\n    });\n  });\n  return groupingOptions;\n}\n\nfunction getFieldFilterSelector(field) {\n  var selector = field.dataField;\n  var groupInterval = field.groupInterval;\n\n  if (\"date\" === field.dataType && \"string\" === typeof groupInterval) {\n    if (\"quarter\" === groupInterval.toLowerCase()) {\n      groupInterval = \"Month\";\n    }\n\n    selector = selector + \".\" + (0, _uiPivot_grid.capitalizeFirstLetter)(groupInterval);\n  }\n\n  return selector;\n}\n\nfunction getIntervalFilterExpression(selector, numericInterval, numericValue, isExcludedFilterType) {\n  var startFilterValue = [selector, isExcludedFilterType ? \"<\" : \">=\", numericValue];\n  var endFilterValue = [selector, isExcludedFilterType ? \">=\" : \"<\", numericValue + numericInterval];\n  return [startFilterValue, isExcludedFilterType ? \"or\" : \"and\", endFilterValue];\n}\n\nfunction getFilterExpressionForFilterValue(field, filterValue) {\n  var selector = getFieldFilterSelector(field);\n  var isExcludedFilterType = \"exclude\" === field.filterType;\n  var expression = [selector, isExcludedFilterType ? \"<>\" : \"=\", filterValue];\n\n  if ((0, _type.isDefined)(field.groupInterval)) {\n    if (\"string\" === typeof field.groupInterval && \"quarter\" === field.groupInterval.toLowerCase()) {\n      expression = getIntervalFilterExpression(selector, 3, 3 * (filterValue - 1) + 1, isExcludedFilterType);\n    } else {\n      if (\"number\" === typeof field.groupInterval && \"date\" !== field.dataType) {\n        expression = getIntervalFilterExpression(selector, field.groupInterval, filterValue, isExcludedFilterType);\n      }\n    }\n  }\n\n  return expression;\n}\n\nfunction createFieldFilterExpressions(field, operation) {\n  var fieldFilterExpressions = [];\n\n  if (field.searchValue) {\n    return [field.dataField, \"contains\", field.searchValue];\n  }\n\n  if (\"exclude\" === field.filterType) {\n    operation = operation || \"and\";\n  } else {\n    operation = operation || \"or\";\n  }\n\n  (0, _iterator.each)(field.filterValues, function (index, filterValue) {\n    var currentExpression = [];\n\n    if (Array.isArray(filterValue)) {\n      var parseLevelsRecursive = field.levels && field.levels.length;\n\n      if (parseLevelsRecursive) {\n        currentExpression = createFieldFilterExpressions({\n          filterValues: filterValue,\n          filterType: field.filterType,\n          levels: field.levels\n        }, \"and\");\n      }\n    } else {\n      var currentField = field.levels ? field.levels[index] : field;\n      currentExpression = getFilterExpressionForFilterValue(currentField, filterValue);\n    }\n\n    if (!currentExpression.length) {\n      return;\n    }\n\n    if (fieldFilterExpressions.length) {\n      fieldFilterExpressions.push(operation);\n    }\n\n    fieldFilterExpressions.push(currentExpression);\n  });\n  return fieldFilterExpressions;\n}\n\nfunction createFilterExpressions(fields) {\n  var filterExpressions = [];\n  (0, _iterator.each)(fields, function (_, field) {\n    var fieldExpressions = createFieldFilterExpressions(field);\n\n    if (!fieldExpressions.length) {\n      return [];\n    }\n\n    if (filterExpressions.length) {\n      filterExpressions.push(\"and\");\n    }\n\n    filterExpressions.push(fieldExpressions);\n  });\n\n  if (1 === filterExpressions.length) {\n    filterExpressions = filterExpressions[0];\n  }\n\n  return filterExpressions;\n}\n\nfunction mergeFilters(filter1, filter2) {\n  var mergedFilter;\n\n  var notEmpty = function (filter) {\n    return filter && filter.length;\n  };\n\n  if (notEmpty(filter1) && notEmpty(filter2)) {\n    mergedFilter = [filter1, \"and\", filter2];\n  } else {\n    mergedFilter = notEmpty(filter1) ? filter1 : filter2;\n  }\n\n  return mergedFilter;\n}\n\nfunction createLoadOptions(options, externalFilterExpr, hasRows) {\n  var filterExpressions = createFilterExpressions(options.filters);\n  var groupingOptions = createGroupingOptions(options.rows, options.rowTake).concat(createGroupingOptions(options.columns, options.columnTake));\n  var loadOptions = {\n    groupSummary: [],\n    totalSummary: [],\n    group: groupingOptions.length ? groupingOptions : void 0,\n    take: groupingOptions.length ? void 0 : 1\n  };\n\n  if (options.rows.length && options.rowTake) {\n    loadOptions.skip = options.rowSkip;\n    loadOptions.take = options.rowTake;\n    loadOptions.requireGroupCount = true;\n  } else {\n    if (options.columns.length && options.columnTake && !hasRows) {\n      loadOptions.skip = options.columnSkip;\n      loadOptions.take = options.columnTake;\n      loadOptions.requireGroupCount = true;\n    }\n  }\n\n  if (externalFilterExpr) {\n    filterExpressions = mergeFilters(filterExpressions, externalFilterExpr);\n  }\n\n  if (filterExpressions.length) {\n    loadOptions.filter = filterExpressions;\n  }\n\n  (0, _iterator.each)(options.values, function (_, value) {\n    var summaryOption = {\n      selector: value.dataField,\n      summaryType: value.summaryType || \"count\"\n    };\n    loadOptions.groupSummary.push(summaryOption);\n    options.includeTotalSummary && loadOptions.totalSummary.push(summaryOption);\n  });\n  return loadOptions;\n}\n\nfunction setValue(valuesArray, value, rowIndex, columnIndex, dataIndex) {\n  valuesArray[rowIndex] = valuesArray[rowIndex] || [];\n  valuesArray[rowIndex][columnIndex] = valuesArray[rowIndex][columnIndex] || [];\n\n  if (!(0, _type.isDefined)(valuesArray[rowIndex][columnIndex][dataIndex])) {\n    valuesArray[rowIndex][columnIndex][dataIndex] = value;\n  }\n}\n\nfunction parseValue(value, field) {\n  if (field && \"number\" === field.dataType && (0, _type.isString)(value)) {\n    return Number(value);\n  }\n\n  if (field && \"date\" === field.dataType && !field.groupInterval && !(value instanceof Date)) {\n    return _date_serialization.default.deserializeDate(value);\n  }\n\n  return value;\n}\n\nfunction parseResult(data, total, descriptions, result) {\n  var rowPath = [];\n  var columnPath = [];\n  var rowHash = result.rowHash;\n  var columnHash = result.columnHash;\n\n  if (total && total.summary) {\n    (0, _iterator.each)(total.summary, function (index, summary) {\n      setValue(result.values, summary, result.grandTotalRowIndex, result.grandTotalColumnIndex, index);\n    });\n  }\n\n  if (total && total.groupCount >= 0) {\n    var skip = descriptions.rows.length ? descriptions.rowSkip : descriptions.columnSkip;\n    data = _toConsumableArray(Array(skip)).concat(data);\n    data.length = total.groupCount;\n  }\n\n  function getItem(dataItem, dimensionName, path, level, field) {\n    var dimensionHash = result[dimensionName + \"Hash\"];\n    var parentItem;\n    var parentItemChildren;\n    var item;\n    var pathValue = path.slice(0, level + 1).join(\"/\");\n    var parentPathValue;\n\n    if (void 0 !== dimensionHash[pathValue]) {\n      item = dimensionHash[pathValue];\n    } else {\n      item = {\n        value: parseValue(dataItem.key, field),\n        index: result[dimensionName + \"Index\"]++\n      };\n      parentPathValue = path.slice(0, level).join(\"/\");\n\n      if (level > 0 && void 0 !== dimensionHash[parentPathValue]) {\n        parentItem = dimensionHash[parentPathValue];\n        parentItemChildren = parentItem.children = parentItem.children || [];\n      } else {\n        parentItemChildren = result[dimensionName + \"s\"];\n      }\n\n      parentItemChildren.push(item);\n      dimensionHash[pathValue] = item;\n    }\n\n    return item;\n  }\n\n  (0, _remote_store.forEachGroup)(data, function (item, level) {\n    var rowLevel = level >= descriptions.rows.length ? descriptions.rows.length : level;\n    var columnLevel = level >= descriptions.rows.length ? level - descriptions.rows.length : 0;\n    var columnItem;\n    var rowItem;\n\n    if (level >= descriptions.rows.length && columnLevel >= descriptions.columns.length) {\n      return;\n    }\n\n    if (level < descriptions.rows.length) {\n      columnPath = [];\n    }\n\n    if (level >= descriptions.rows.length) {\n      if (item) {\n        columnPath[columnLevel] = item.key + \"\";\n        columnItem = getItem(item, \"column\", columnPath, columnLevel, descriptions.columns[columnLevel]);\n        rowItem = rowHash[rowPath.slice(0, rowLevel + 1).join(\"/\")];\n      } else {\n        result.columns.push({});\n      }\n    } else {\n      if (item) {\n        rowPath[rowLevel] = item.key + \"\";\n        rowItem = getItem(item, \"row\", rowPath, rowLevel, descriptions.rows[rowLevel]);\n        columnItem = columnHash[columnPath.slice(0, columnLevel + 1).join(\"/\")];\n      } else {\n        result.rows.push({});\n      }\n    }\n\n    var currentRowIndex = rowItem && rowItem.index || result.grandTotalRowIndex;\n    var currentColumnIndex = columnItem && columnItem.index || result.grandTotalColumnIndex;\n    (0, _iterator.each)(item && item.summary || [], function (i, summary) {\n      setValue(result.values, summary, currentRowIndex, currentColumnIndex, i);\n    });\n  });\n  return result;\n}\n\nfunction getFiltersForDimension(fields) {\n  return (fields || []).filter(function (f) {\n    return f.filterValues && f.filterValues.length || f.searchValue;\n  });\n}\n\nfunction getExpandedIndex(options, axis) {\n  if (options.headerName) {\n    if (axis === options.headerName) {\n      return options.path.length;\n    } else {\n      if (options.oppositePath) {\n        return options.oppositePath.length;\n      }\n    }\n  }\n\n  return 0;\n}\n\nfunction getFiltersForExpandedDimension(options) {\n  return (0, _uiPivot_grid.getFiltersByPath)(options[options.headerName], options.path).concat((0, _uiPivot_grid.getFiltersByPath)(options[\"rows\" === options.headerName ? \"columns\" : \"rows\"], options.oppositePath || []));\n}\n\nfunction getExpandedPathSliceFilter(options, dimensionName, level, firstCollapsedFieldIndex) {\n  var result = [];\n  var startSliceIndex = level > firstCollapsedFieldIndex ? 0 : firstCollapsedFieldIndex;\n  var fields = options.headerName !== dimensionName ? options[dimensionName].slice(startSliceIndex, level) : [];\n  var paths = \"rows\" === dimensionName ? options.rowExpandedPaths : options.columnExpandedPaths;\n  (0, _iterator.each)(fields, function (index, field) {\n    var filterValues = [];\n    (0, _iterator.each)(paths, function (_, path) {\n      path = path.slice(startSliceIndex, level);\n\n      if (index < path.length) {\n        var filterValue = path[index];\n\n        if (filterValues.indexOf(filterValue) === -1) {\n          filterValues.push(filterValue);\n        }\n      }\n    });\n\n    if (filterValues.length) {\n      result.push((0, _extend.extend)({}, field, {\n        filterType: \"include\",\n        filterValues: filterValues\n      }));\n    }\n  });\n  return result;\n}\n\nfunction getGrandTotalRequest(options, dimensionName, expandedIndex, expandedLevel, commonFilters, firstCollapsedFieldIndex) {\n  var expandedPaths = (\"columns\" === dimensionName ? options.columnExpandedPaths : options.rowExpandedPaths) || [];\n  var oppositeDimensionName = \"columns\" === dimensionName ? \"rows\" : \"columns\";\n  var fields = options[dimensionName];\n  var result = [];\n  var newOptions;\n\n  if (expandedPaths.length) {\n    for (var i = expandedIndex; i < expandedLevel + 1; i++) {\n      newOptions = {\n        filters: commonFilters.concat(getExpandedPathSliceFilter(options, dimensionName, i, firstCollapsedFieldIndex))\n      };\n      newOptions[dimensionName] = fields.slice(expandedIndex, i + 1);\n      newOptions[oppositeDimensionName] = [];\n      result.push((0, _extend.extend)({}, options, newOptions));\n    }\n  } else {\n    newOptions = {\n      filters: commonFilters\n    };\n    newOptions[dimensionName] = fields.slice(expandedIndex, expandedLevel + 1);\n    newOptions[oppositeDimensionName] = [];\n    result.push((0, _extend.extend)({}, options, newOptions));\n  }\n\n  result[0].includeTotalSummary = true;\n  return result;\n}\n\nfunction getFirstCollapsedIndex(fields) {\n  var firstCollapsedIndex = 0;\n  (0, _iterator.each)(fields, function (index, field) {\n    if (!field.expanded) {\n      firstCollapsedIndex = index;\n      return false;\n    }\n  });\n  return firstCollapsedIndex;\n}\n\nfunction getRequestsData(options) {\n  var rowExpandedLevel = (0, _uiPivot_grid.getExpandedLevel)(options, \"rows\");\n  var columnExpandedLevel = (0, _uiPivot_grid.getExpandedLevel)(options, \"columns\");\n  var filters = options.filters || [];\n  var columnExpandedIndex = getExpandedIndex(options, \"columns\");\n  var firstCollapsedColumnIndex = getFirstCollapsedIndex(options.columns);\n  var firstCollapsedRowIndex = getFirstCollapsedIndex(options.rows);\n  var rowExpandedIndex = getExpandedIndex(options, \"rows\");\n  var data = [];\n  filters = filters.concat(getFiltersForDimension(options.rows)).concat(getFiltersForDimension(options.columns)).concat(getFiltersForExpandedDimension(options));\n  var columnTotalsOptions = getGrandTotalRequest(options, \"columns\", columnExpandedIndex, columnExpandedLevel, filters, firstCollapsedColumnIndex);\n\n  if (options.rows.length && options.columns.length) {\n    if (\"rows\" !== options.headerName) {\n      data = data.concat(columnTotalsOptions);\n    }\n\n    for (var i = rowExpandedIndex; i < rowExpandedLevel + 1; i++) {\n      var rows = options.rows.slice(rowExpandedIndex, i + 1);\n      var rowFilterByExpandedPaths = getExpandedPathSliceFilter(options, \"rows\", i, firstCollapsedRowIndex);\n\n      for (var j = columnExpandedIndex; j < columnExpandedLevel + 1; j++) {\n        var preparedOptions = (0, _extend.extend)({}, options, {\n          columns: options.columns.slice(columnExpandedIndex, j + 1),\n          rows: rows,\n          filters: filters.concat(getExpandedPathSliceFilter(options, \"columns\", j, firstCollapsedColumnIndex)).concat(rowFilterByExpandedPaths)\n        });\n        data.push(preparedOptions);\n      }\n    }\n  } else {\n    data = options.columns.length ? columnTotalsOptions : getGrandTotalRequest(options, \"rows\", rowExpandedIndex, rowExpandedLevel, filters, firstCollapsedRowIndex);\n  }\n\n  return data;\n}\n\nfunction prepareFields(fields) {\n  (0, _iterator.each)(fields || [], function (_, field) {\n    var levels = field.levels;\n\n    if (levels) {\n      prepareFields(levels);\n    }\n\n    (0, _uiPivot_grid.setDefaultFieldValueFormatting)(field);\n  });\n}\n\nvar _default = _class.default.inherit(function () {\n  return {\n    ctor: function (options) {\n      this._dataSource = new _data_source.DataSource(options);\n      this._store = this._dataSource.store();\n    },\n    getFields: function (fields) {\n      var d = new _deferred.Deferred();\n\n      this._store.load({\n        skip: 0,\n        take: 20\n      }).done(function (data) {\n        d.resolve((0, _uiPivot_grid.discoverObjectFields)(data, fields));\n      }).fail(d.reject);\n\n      return d;\n    },\n    key: function () {\n      return this._store.key();\n    },\n    load: function (options) {\n      var that = this;\n      var d = new _deferred.Deferred();\n      var result = {\n        rows: [],\n        columns: [],\n        values: [],\n        grandTotalRowIndex: 0,\n        grandTotalColumnIndex: 0,\n        rowHash: {},\n        columnHash: {},\n        rowIndex: 1,\n        columnIndex: 1\n      };\n      var requestsData = getRequestsData(options);\n      var deferreds = [];\n      prepareFields(options.rows);\n      prepareFields(options.columns);\n      prepareFields(options.filters);\n      (0, _iterator.each)(requestsData, function (_, dataItem) {\n        deferreds.push(that._store.load(createLoadOptions(dataItem, that.filter(), options.rows.length)));\n      });\n\n      _deferred.when.apply(null, deferreds).done(function () {\n        var args = deferreds.length > 1 ? arguments : [arguments];\n        (0, _iterator.each)(args, function (index, argument) {\n          parseResult(argument[0], argument[1], requestsData[index], result);\n        });\n        d.resolve({\n          rows: result.rows,\n          columns: result.columns,\n          values: result.values,\n          grandTotalRowIndex: result.grandTotalRowIndex,\n          grandTotalColumnIndex: result.grandTotalColumnIndex\n        });\n      }).fail(d.reject);\n\n      return d;\n    },\n    filter: function () {\n      return this._dataSource.filter.apply(this._dataSource, arguments);\n    },\n    supportPaging: function () {\n      return false;\n    },\n    createDrillDownDataSource: function (loadOptions, params) {\n      loadOptions = loadOptions || {};\n      params = params || {};\n      var store = this._store;\n      var filters = (0, _uiPivot_grid.getFiltersByPath)(loadOptions.rows, params.rowPath).concat((0, _uiPivot_grid.getFiltersByPath)(loadOptions.columns, params.columnPath)).concat(getFiltersForDimension(loadOptions.rows)).concat(loadOptions.filters || []).concat(getFiltersForDimension(loadOptions.columns));\n      var filterExp = createFilterExpressions(filters);\n      return new _data_source.DataSource({\n        load: function (loadOptions) {\n          return store.load((0, _extend.extend)({}, loadOptions, {\n            filter: mergeFilters(filterExp, loadOptions.filter),\n            select: params.customColumns\n          }));\n        }\n      });\n    }\n  };\n}());\n\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/pivot_grid/remote_store.js"],"names":["exports","default","_type","require","_class","_interopRequireDefault","_extend","_iterator","_data_source","_deferred","_uiPivot_grid","_remote_store","_date_serialization","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","createGroupingOptions","dimensionOptions","useSortOrder","groupingOptions","each","index","dimensionOption","push","selector","dataField","groupInterval","desc","sortOrder","isExpanded","getFieldFilterSelector","field","dataType","toLowerCase","capitalizeFirstLetter","getIntervalFilterExpression","numericInterval","numericValue","isExcludedFilterType","startFilterValue","endFilterValue","getFilterExpressionForFilterValue","filterValue","filterType","expression","isDefined","createFieldFilterExpressions","operation","fieldFilterExpressions","searchValue","filterValues","currentExpression","parseLevelsRecursive","levels","currentField","createFilterExpressions","fields","filterExpressions","_","fieldExpressions","mergeFilters","filter1","filter2","mergedFilter","notEmpty","filter","createLoadOptions","options","externalFilterExpr","hasRows","filters","rows","rowTake","concat","columns","columnTake","loadOptions","groupSummary","totalSummary","group","take","skip","rowSkip","requireGroupCount","columnSkip","values","value","summaryOption","summaryType","includeTotalSummary","setValue","valuesArray","rowIndex","columnIndex","dataIndex","parseValue","isString","Number","Date","deserializeDate","parseResult","data","total","descriptions","result","rowPath","columnPath","rowHash","columnHash","summary","grandTotalRowIndex","grandTotalColumnIndex","groupCount","getItem","dataItem","dimensionName","path","level","dimensionHash","parentItem","parentItemChildren","item","pathValue","join","parentPathValue","key","children","forEachGroup","rowLevel","columnLevel","columnItem","rowItem","currentRowIndex","currentColumnIndex","getFiltersForDimension","f","getExpandedIndex","axis","headerName","oppositePath","getFiltersForExpandedDimension","getFiltersByPath","getExpandedPathSliceFilter","firstCollapsedFieldIndex","startSliceIndex","paths","rowExpandedPaths","columnExpandedPaths","indexOf","extend","getGrandTotalRequest","expandedIndex","expandedLevel","commonFilters","expandedPaths","oppositeDimensionName","newOptions","getFirstCollapsedIndex","firstCollapsedIndex","expanded","getRequestsData","rowExpandedLevel","getExpandedLevel","columnExpandedLevel","columnExpandedIndex","firstCollapsedColumnIndex","firstCollapsedRowIndex","rowExpandedIndex","columnTotalsOptions","rowFilterByExpandedPaths","j","preparedOptions","prepareFields","setDefaultFieldValueFormatting","_default","inherit","ctor","_dataSource","DataSource","_store","store","getFields","d","Deferred","load","done","resolve","discoverObjectFields","fail","reject","that","requestsData","deferreds","when","apply","args","arguments","argument","supportPaging","createDrillDownDataSource","params","filterExp","select","customColumns","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/pivot_grid/remote_store.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _data_source = require(\"../../data/data_source/data_source\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _uiPivot_grid = require(\"./ui.pivot_grid.utils\");\r\nvar _remote_store = require(\"./remote_store.utils\");\r\nvar _date_serialization = _interopRequireDefault(require(\"../../core/utils/date_serialization\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return _arrayLikeToArray(arr)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\n\r\nfunction createGroupingOptions(dimensionOptions, useSortOrder) {\r\n    var groupingOptions = [];\r\n    (0, _iterator.each)(dimensionOptions, function(index, dimensionOption) {\r\n        groupingOptions.push({\r\n            selector: dimensionOption.dataField,\r\n            groupInterval: dimensionOption.groupInterval,\r\n            desc: useSortOrder && \"desc\" === dimensionOption.sortOrder,\r\n            isExpanded: index < dimensionOptions.length - 1\r\n        })\r\n    });\r\n    return groupingOptions\r\n}\r\n\r\nfunction getFieldFilterSelector(field) {\r\n    var selector = field.dataField;\r\n    var groupInterval = field.groupInterval;\r\n    if (\"date\" === field.dataType && \"string\" === typeof groupInterval) {\r\n        if (\"quarter\" === groupInterval.toLowerCase()) {\r\n            groupInterval = \"Month\"\r\n        }\r\n        selector = selector + \".\" + (0, _uiPivot_grid.capitalizeFirstLetter)(groupInterval)\r\n    }\r\n    return selector\r\n}\r\n\r\nfunction getIntervalFilterExpression(selector, numericInterval, numericValue, isExcludedFilterType) {\r\n    var startFilterValue = [selector, isExcludedFilterType ? \"<\" : \">=\", numericValue];\r\n    var endFilterValue = [selector, isExcludedFilterType ? \">=\" : \"<\", numericValue + numericInterval];\r\n    return [startFilterValue, isExcludedFilterType ? \"or\" : \"and\", endFilterValue]\r\n}\r\n\r\nfunction getFilterExpressionForFilterValue(field, filterValue) {\r\n    var selector = getFieldFilterSelector(field);\r\n    var isExcludedFilterType = \"exclude\" === field.filterType;\r\n    var expression = [selector, isExcludedFilterType ? \"<>\" : \"=\", filterValue];\r\n    if ((0, _type.isDefined)(field.groupInterval)) {\r\n        if (\"string\" === typeof field.groupInterval && \"quarter\" === field.groupInterval.toLowerCase()) {\r\n            expression = getIntervalFilterExpression(selector, 3, 3 * (filterValue - 1) + 1, isExcludedFilterType)\r\n        } else {\r\n            if (\"number\" === typeof field.groupInterval && \"date\" !== field.dataType) {\r\n                expression = getIntervalFilterExpression(selector, field.groupInterval, filterValue, isExcludedFilterType)\r\n            }\r\n        }\r\n    }\r\n    return expression\r\n}\r\n\r\nfunction createFieldFilterExpressions(field, operation) {\r\n    var fieldFilterExpressions = [];\r\n    if (field.searchValue) {\r\n        return [field.dataField, \"contains\", field.searchValue]\r\n    }\r\n    if (\"exclude\" === field.filterType) {\r\n        operation = operation || \"and\"\r\n    } else {\r\n        operation = operation || \"or\"\r\n    }(0, _iterator.each)(field.filterValues, function(index, filterValue) {\r\n        var currentExpression = [];\r\n        if (Array.isArray(filterValue)) {\r\n            var parseLevelsRecursive = field.levels && field.levels.length;\r\n            if (parseLevelsRecursive) {\r\n                currentExpression = createFieldFilterExpressions({\r\n                    filterValues: filterValue,\r\n                    filterType: field.filterType,\r\n                    levels: field.levels\r\n                }, \"and\")\r\n            }\r\n        } else {\r\n            var currentField = field.levels ? field.levels[index] : field;\r\n            currentExpression = getFilterExpressionForFilterValue(currentField, filterValue)\r\n        }\r\n        if (!currentExpression.length) {\r\n            return\r\n        }\r\n        if (fieldFilterExpressions.length) {\r\n            fieldFilterExpressions.push(operation)\r\n        }\r\n        fieldFilterExpressions.push(currentExpression)\r\n    });\r\n    return fieldFilterExpressions\r\n}\r\n\r\nfunction createFilterExpressions(fields) {\r\n    var filterExpressions = [];\r\n    (0, _iterator.each)(fields, function(_, field) {\r\n        var fieldExpressions = createFieldFilterExpressions(field);\r\n        if (!fieldExpressions.length) {\r\n            return []\r\n        }\r\n        if (filterExpressions.length) {\r\n            filterExpressions.push(\"and\")\r\n        }\r\n        filterExpressions.push(fieldExpressions)\r\n    });\r\n    if (1 === filterExpressions.length) {\r\n        filterExpressions = filterExpressions[0]\r\n    }\r\n    return filterExpressions\r\n}\r\n\r\nfunction mergeFilters(filter1, filter2) {\r\n    var mergedFilter;\r\n    var notEmpty = function(filter) {\r\n        return filter && filter.length\r\n    };\r\n    if (notEmpty(filter1) && notEmpty(filter2)) {\r\n        mergedFilter = [filter1, \"and\", filter2]\r\n    } else {\r\n        mergedFilter = notEmpty(filter1) ? filter1 : filter2\r\n    }\r\n    return mergedFilter\r\n}\r\n\r\nfunction createLoadOptions(options, externalFilterExpr, hasRows) {\r\n    var filterExpressions = createFilterExpressions(options.filters);\r\n    var groupingOptions = createGroupingOptions(options.rows, options.rowTake).concat(createGroupingOptions(options.columns, options.columnTake));\r\n    var loadOptions = {\r\n        groupSummary: [],\r\n        totalSummary: [],\r\n        group: groupingOptions.length ? groupingOptions : void 0,\r\n        take: groupingOptions.length ? void 0 : 1\r\n    };\r\n    if (options.rows.length && options.rowTake) {\r\n        loadOptions.skip = options.rowSkip;\r\n        loadOptions.take = options.rowTake;\r\n        loadOptions.requireGroupCount = true\r\n    } else {\r\n        if (options.columns.length && options.columnTake && !hasRows) {\r\n            loadOptions.skip = options.columnSkip;\r\n            loadOptions.take = options.columnTake;\r\n            loadOptions.requireGroupCount = true\r\n        }\r\n    }\r\n    if (externalFilterExpr) {\r\n        filterExpressions = mergeFilters(filterExpressions, externalFilterExpr)\r\n    }\r\n    if (filterExpressions.length) {\r\n        loadOptions.filter = filterExpressions\r\n    }(0, _iterator.each)(options.values, function(_, value) {\r\n        var summaryOption = {\r\n            selector: value.dataField,\r\n            summaryType: value.summaryType || \"count\"\r\n        };\r\n        loadOptions.groupSummary.push(summaryOption);\r\n        options.includeTotalSummary && loadOptions.totalSummary.push(summaryOption)\r\n    });\r\n    return loadOptions\r\n}\r\n\r\nfunction setValue(valuesArray, value, rowIndex, columnIndex, dataIndex) {\r\n    valuesArray[rowIndex] = valuesArray[rowIndex] || [];\r\n    valuesArray[rowIndex][columnIndex] = valuesArray[rowIndex][columnIndex] || [];\r\n    if (!(0, _type.isDefined)(valuesArray[rowIndex][columnIndex][dataIndex])) {\r\n        valuesArray[rowIndex][columnIndex][dataIndex] = value\r\n    }\r\n}\r\n\r\nfunction parseValue(value, field) {\r\n    if (field && \"number\" === field.dataType && (0, _type.isString)(value)) {\r\n        return Number(value)\r\n    }\r\n    if (field && \"date\" === field.dataType && !field.groupInterval && !(value instanceof Date)) {\r\n        return _date_serialization.default.deserializeDate(value)\r\n    }\r\n    return value\r\n}\r\n\r\nfunction parseResult(data, total, descriptions, result) {\r\n    var rowPath = [];\r\n    var columnPath = [];\r\n    var rowHash = result.rowHash;\r\n    var columnHash = result.columnHash;\r\n    if (total && total.summary) {\r\n        (0, _iterator.each)(total.summary, function(index, summary) {\r\n            setValue(result.values, summary, result.grandTotalRowIndex, result.grandTotalColumnIndex, index)\r\n        })\r\n    }\r\n    if (total && total.groupCount >= 0) {\r\n        var skip = descriptions.rows.length ? descriptions.rowSkip : descriptions.columnSkip;\r\n        data = _toConsumableArray(Array(skip)).concat(data);\r\n        data.length = total.groupCount\r\n    }\r\n\r\n    function getItem(dataItem, dimensionName, path, level, field) {\r\n        var dimensionHash = result[dimensionName + \"Hash\"];\r\n        var parentItem;\r\n        var parentItemChildren;\r\n        var item;\r\n        var pathValue = path.slice(0, level + 1).join(\"/\");\r\n        var parentPathValue;\r\n        if (void 0 !== dimensionHash[pathValue]) {\r\n            item = dimensionHash[pathValue]\r\n        } else {\r\n            item = {\r\n                value: parseValue(dataItem.key, field),\r\n                index: result[dimensionName + \"Index\"]++\r\n            };\r\n            parentPathValue = path.slice(0, level).join(\"/\");\r\n            if (level > 0 && void 0 !== dimensionHash[parentPathValue]) {\r\n                parentItem = dimensionHash[parentPathValue];\r\n                parentItemChildren = parentItem.children = parentItem.children || []\r\n            } else {\r\n                parentItemChildren = result[dimensionName + \"s\"]\r\n            }\r\n            parentItemChildren.push(item);\r\n            dimensionHash[pathValue] = item\r\n        }\r\n        return item\r\n    }(0, _remote_store.forEachGroup)(data, function(item, level) {\r\n        var rowLevel = level >= descriptions.rows.length ? descriptions.rows.length : level;\r\n        var columnLevel = level >= descriptions.rows.length ? level - descriptions.rows.length : 0;\r\n        var columnItem;\r\n        var rowItem;\r\n        if (level >= descriptions.rows.length && columnLevel >= descriptions.columns.length) {\r\n            return\r\n        }\r\n        if (level < descriptions.rows.length) {\r\n            columnPath = []\r\n        }\r\n        if (level >= descriptions.rows.length) {\r\n            if (item) {\r\n                columnPath[columnLevel] = item.key + \"\";\r\n                columnItem = getItem(item, \"column\", columnPath, columnLevel, descriptions.columns[columnLevel]);\r\n                rowItem = rowHash[rowPath.slice(0, rowLevel + 1).join(\"/\")]\r\n            } else {\r\n                result.columns.push({})\r\n            }\r\n        } else {\r\n            if (item) {\r\n                rowPath[rowLevel] = item.key + \"\";\r\n                rowItem = getItem(item, \"row\", rowPath, rowLevel, descriptions.rows[rowLevel]);\r\n                columnItem = columnHash[columnPath.slice(0, columnLevel + 1).join(\"/\")]\r\n            } else {\r\n                result.rows.push({})\r\n            }\r\n        }\r\n        var currentRowIndex = rowItem && rowItem.index || result.grandTotalRowIndex;\r\n        var currentColumnIndex = columnItem && columnItem.index || result.grandTotalColumnIndex;\r\n        (0, _iterator.each)(item && item.summary || [], function(i, summary) {\r\n            setValue(result.values, summary, currentRowIndex, currentColumnIndex, i)\r\n        })\r\n    });\r\n    return result\r\n}\r\n\r\nfunction getFiltersForDimension(fields) {\r\n    return (fields || []).filter(function(f) {\r\n        return f.filterValues && f.filterValues.length || f.searchValue\r\n    })\r\n}\r\n\r\nfunction getExpandedIndex(options, axis) {\r\n    if (options.headerName) {\r\n        if (axis === options.headerName) {\r\n            return options.path.length\r\n        } else {\r\n            if (options.oppositePath) {\r\n                return options.oppositePath.length\r\n            }\r\n        }\r\n    }\r\n    return 0\r\n}\r\n\r\nfunction getFiltersForExpandedDimension(options) {\r\n    return (0, _uiPivot_grid.getFiltersByPath)(options[options.headerName], options.path).concat((0, _uiPivot_grid.getFiltersByPath)(options[\"rows\" === options.headerName ? \"columns\" : \"rows\"], options.oppositePath || []))\r\n}\r\n\r\nfunction getExpandedPathSliceFilter(options, dimensionName, level, firstCollapsedFieldIndex) {\r\n    var result = [];\r\n    var startSliceIndex = level > firstCollapsedFieldIndex ? 0 : firstCollapsedFieldIndex;\r\n    var fields = options.headerName !== dimensionName ? options[dimensionName].slice(startSliceIndex, level) : [];\r\n    var paths = \"rows\" === dimensionName ? options.rowExpandedPaths : options.columnExpandedPaths;\r\n    (0, _iterator.each)(fields, function(index, field) {\r\n        var filterValues = [];\r\n        (0, _iterator.each)(paths, function(_, path) {\r\n            path = path.slice(startSliceIndex, level);\r\n            if (index < path.length) {\r\n                var filterValue = path[index];\r\n                if (filterValues.indexOf(filterValue) === -1) {\r\n                    filterValues.push(filterValue)\r\n                }\r\n            }\r\n        });\r\n        if (filterValues.length) {\r\n            result.push((0, _extend.extend)({}, field, {\r\n                filterType: \"include\",\r\n                filterValues: filterValues\r\n            }))\r\n        }\r\n    });\r\n    return result\r\n}\r\n\r\nfunction getGrandTotalRequest(options, dimensionName, expandedIndex, expandedLevel, commonFilters, firstCollapsedFieldIndex) {\r\n    var expandedPaths = (\"columns\" === dimensionName ? options.columnExpandedPaths : options.rowExpandedPaths) || [];\r\n    var oppositeDimensionName = \"columns\" === dimensionName ? \"rows\" : \"columns\";\r\n    var fields = options[dimensionName];\r\n    var result = [];\r\n    var newOptions;\r\n    if (expandedPaths.length) {\r\n        for (var i = expandedIndex; i < expandedLevel + 1; i++) {\r\n            newOptions = {\r\n                filters: commonFilters.concat(getExpandedPathSliceFilter(options, dimensionName, i, firstCollapsedFieldIndex))\r\n            };\r\n            newOptions[dimensionName] = fields.slice(expandedIndex, i + 1);\r\n            newOptions[oppositeDimensionName] = [];\r\n            result.push((0, _extend.extend)({}, options, newOptions))\r\n        }\r\n    } else {\r\n        newOptions = {\r\n            filters: commonFilters\r\n        };\r\n        newOptions[dimensionName] = fields.slice(expandedIndex, expandedLevel + 1);\r\n        newOptions[oppositeDimensionName] = [];\r\n        result.push((0, _extend.extend)({}, options, newOptions))\r\n    }\r\n    result[0].includeTotalSummary = true;\r\n    return result\r\n}\r\n\r\nfunction getFirstCollapsedIndex(fields) {\r\n    var firstCollapsedIndex = 0;\r\n    (0, _iterator.each)(fields, function(index, field) {\r\n        if (!field.expanded) {\r\n            firstCollapsedIndex = index;\r\n            return false\r\n        }\r\n    });\r\n    return firstCollapsedIndex\r\n}\r\n\r\nfunction getRequestsData(options) {\r\n    var rowExpandedLevel = (0, _uiPivot_grid.getExpandedLevel)(options, \"rows\");\r\n    var columnExpandedLevel = (0, _uiPivot_grid.getExpandedLevel)(options, \"columns\");\r\n    var filters = options.filters || [];\r\n    var columnExpandedIndex = getExpandedIndex(options, \"columns\");\r\n    var firstCollapsedColumnIndex = getFirstCollapsedIndex(options.columns);\r\n    var firstCollapsedRowIndex = getFirstCollapsedIndex(options.rows);\r\n    var rowExpandedIndex = getExpandedIndex(options, \"rows\");\r\n    var data = [];\r\n    filters = filters.concat(getFiltersForDimension(options.rows)).concat(getFiltersForDimension(options.columns)).concat(getFiltersForExpandedDimension(options));\r\n    var columnTotalsOptions = getGrandTotalRequest(options, \"columns\", columnExpandedIndex, columnExpandedLevel, filters, firstCollapsedColumnIndex);\r\n    if (options.rows.length && options.columns.length) {\r\n        if (\"rows\" !== options.headerName) {\r\n            data = data.concat(columnTotalsOptions)\r\n        }\r\n        for (var i = rowExpandedIndex; i < rowExpandedLevel + 1; i++) {\r\n            var rows = options.rows.slice(rowExpandedIndex, i + 1);\r\n            var rowFilterByExpandedPaths = getExpandedPathSliceFilter(options, \"rows\", i, firstCollapsedRowIndex);\r\n            for (var j = columnExpandedIndex; j < columnExpandedLevel + 1; j++) {\r\n                var preparedOptions = (0, _extend.extend)({}, options, {\r\n                    columns: options.columns.slice(columnExpandedIndex, j + 1),\r\n                    rows: rows,\r\n                    filters: filters.concat(getExpandedPathSliceFilter(options, \"columns\", j, firstCollapsedColumnIndex)).concat(rowFilterByExpandedPaths)\r\n                });\r\n                data.push(preparedOptions)\r\n            }\r\n        }\r\n    } else {\r\n        data = options.columns.length ? columnTotalsOptions : getGrandTotalRequest(options, \"rows\", rowExpandedIndex, rowExpandedLevel, filters, firstCollapsedRowIndex)\r\n    }\r\n    return data\r\n}\r\n\r\nfunction prepareFields(fields) {\r\n    (0, _iterator.each)(fields || [], function(_, field) {\r\n        var levels = field.levels;\r\n        if (levels) {\r\n            prepareFields(levels)\r\n        }(0, _uiPivot_grid.setDefaultFieldValueFormatting)(field)\r\n    })\r\n}\r\nvar _default = _class.default.inherit(function() {\r\n    return {\r\n        ctor: function(options) {\r\n            this._dataSource = new _data_source.DataSource(options);\r\n            this._store = this._dataSource.store()\r\n        },\r\n        getFields: function(fields) {\r\n            var d = new _deferred.Deferred;\r\n            this._store.load({\r\n                skip: 0,\r\n                take: 20\r\n            }).done(function(data) {\r\n                d.resolve((0, _uiPivot_grid.discoverObjectFields)(data, fields))\r\n            }).fail(d.reject);\r\n            return d\r\n        },\r\n        key: function() {\r\n            return this._store.key()\r\n        },\r\n        load: function(options) {\r\n            var that = this;\r\n            var d = new _deferred.Deferred;\r\n            var result = {\r\n                rows: [],\r\n                columns: [],\r\n                values: [],\r\n                grandTotalRowIndex: 0,\r\n                grandTotalColumnIndex: 0,\r\n                rowHash: {},\r\n                columnHash: {},\r\n                rowIndex: 1,\r\n                columnIndex: 1\r\n            };\r\n            var requestsData = getRequestsData(options);\r\n            var deferreds = [];\r\n            prepareFields(options.rows);\r\n            prepareFields(options.columns);\r\n            prepareFields(options.filters);\r\n            (0, _iterator.each)(requestsData, function(_, dataItem) {\r\n                deferreds.push(that._store.load(createLoadOptions(dataItem, that.filter(), options.rows.length)))\r\n            });\r\n            _deferred.when.apply(null, deferreds).done(function() {\r\n                var args = deferreds.length > 1 ? arguments : [arguments];\r\n                (0, _iterator.each)(args, function(index, argument) {\r\n                    parseResult(argument[0], argument[1], requestsData[index], result)\r\n                });\r\n                d.resolve({\r\n                    rows: result.rows,\r\n                    columns: result.columns,\r\n                    values: result.values,\r\n                    grandTotalRowIndex: result.grandTotalRowIndex,\r\n                    grandTotalColumnIndex: result.grandTotalColumnIndex\r\n                })\r\n            }).fail(d.reject);\r\n            return d\r\n        },\r\n        filter: function() {\r\n            return this._dataSource.filter.apply(this._dataSource, arguments)\r\n        },\r\n        supportPaging: function() {\r\n            return false\r\n        },\r\n        createDrillDownDataSource: function(loadOptions, params) {\r\n            loadOptions = loadOptions || {};\r\n            params = params || {};\r\n            var store = this._store;\r\n            var filters = (0, _uiPivot_grid.getFiltersByPath)(loadOptions.rows, params.rowPath).concat((0, _uiPivot_grid.getFiltersByPath)(loadOptions.columns, params.columnPath)).concat(getFiltersForDimension(loadOptions.rows)).concat(loadOptions.filters || []).concat(getFiltersForDimension(loadOptions.columns));\r\n            var filterExp = createFilterExpressions(filters);\r\n            return new _data_source.DataSource({\r\n                load: function(loadOptions) {\r\n                    return store.load((0, _extend.extend)({}, loadOptions, {\r\n                        filter: mergeFilters(filterExp, loadOptions.filter),\r\n                        select: params.customColumns\r\n                    }))\r\n                }\r\n            })\r\n        }\r\n    }\r\n}());\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}