{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Toast}from\"service/toast\";import\"./style.scss\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi}from\"redux/actions/common\";import{NormalButton,NormalDate,TableWrapper,NormalMultiSelect}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import{withTranslation}from\"react-i18next\";import{NormalInput,NormalDateTime}from\"component/common\";import{Link}from\"react-router-dom\";import updateBtn from\"assets/images/edit1.png\";import deleteBtn from\"assets/images/delete1.png\";import{getProject,deleteProject}from\"redux/actions/project\";import{history}from\"helpers\";import _ from\"lodash\";import CustomerSearch from\"../../CustomerSearch\";export var ListQuotationClass=/*#__PURE__*/function(_React$Component){_inherits(ListQuotationClass,_React$Component);var _super=_createSuper(ListQuotationClass);function ListQuotationClass(){var _this;_classCallCheck(this,ListQuotationClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Date\"},{label:\"Quotation Number\"},{label:\"Customer Name\"},{label:\"Project Name\"},{label:\"Total Amount\"},{label:\"Status\"}],quotationList:[],pageMeta:{// chunk: 10,\n// page: 1,\n// total: 10,\n// totalPages: 2,\n// chunk: 2,\n// page: 1,\n// total: 8,\n// totalPages: 4,\n},formField:{fromDate:new Date(),toDate:new Date(),custName:\"\",quoNumber:\"\",projectName:\"\",status:\"\",customerOption:[]},active:false,currentIndex:-1,page:1,// limit: 10,\nlimit:5,isLoading:true,isOpenvoidCheckout:false,// is_loading: false,\nisMounted:true,statusOption:[],selectedStatus:[],statusArr:[],statusStr:\"\",visible:false// salesCollectionHeader: [\n//   { label: \"Sales Collection\" },\n//   { label: \"Before Tax\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// nonSalesCollectionHeader: [\n//   { label: \"Non Sales Collection\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\n// salesTransactionHeader: [\n//   { label: \"Sales Transaction\" },\n//   { label: \"Amount\" },\n//   { label: \"Paid\" },\n//   { label: \"Outstanding\" },\n// ],\n// ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\n// TreatmentDoneHeader: [\n//   { label: \"Customer\" },\n//   { label: \"Customer Reference\" },\n//   { label: \"Treatment Done\" },\n//   { label: \"Description\" },\n//   { label: \"Staff\" },\n//   { label: \"Amount\" },\n// DayDate: new Date(),\n// runDayEnd: false,\n// reportDate: \"\",\n// sales_collec: null,\n// sales_trasac: null,\n// ar_trasac: null,\n// treatment_done: null,\n// dept_sales: null,\n};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.getQuotations=function(){_this.updateState({isLoading:true});var _this$state=_this.state,quotationList=_this$state.quotationList,pageMeta=_this$state.pageMeta,formField=_this$state.formField,page=_this$state.page,limit=_this$state.limit,statusStr=_this$state.statusStr;var fromDate=formField.fromDate,toDate=formField.toDate,custName=formField.custName,quoNumber=formField.quoNumber,projectName=formField.projectName,status=formField.status;var From=new Date();if(fromDate&&fromDate!==\"\"){From=fromDate;}else{_this.setState({fromDate:From});}var To=new Date();if(toDate&&toDate!==\"\"){To=toDate;}else{_this.setState({toDate:To});}_this.props.getCommonApi(\"quotationlist/?searchfrom=\".concat(dateFormat(From,\"yyyy-mm-dd\"),\"&searchto=\").concat(dateFormat(To,\"yyyy-mm-dd\"),\"&searchtitle=\").concat(projectName,\"&searchstatus=\").concat(statusStr,\"&searchname=\").concat(custName,\"&searchnumber=\").concat(quoNumber,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(res,\"dsfdfaafg\");_context.next=3;return _this.setState({quotationList:[]});case 3:quotationList=res.data.dataList;// pageMeta = res.data.meta.pagination;\npageMeta=res.data.pagination;// pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\n_this.setState({quotationList:quotationList,pageMeta:pageMeta});_this.updateState({isLoading:false});// this.setState({ quotationList });\nconsole.log(\"res.data\",res.data);console.log(\"quotationList\",quotationList);console.log(\"pageMeta\",pageMeta);case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pageNo){var page;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_this.state.page;page=pageNo.page;_context2.next=4;return _this.setState({page:page});case 4:_this.getQuotations();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.handleChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _ref3$target,value,name,formField;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;formField=_this.state.formField;formField[name]=value;_context3.next=5;return _this.setState({formField:formField});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.handleDatePick=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(name,value){var formField;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:formField=_this.state.formField;formField[name]=value;_context4.next=4;return _this.setState({formField:formField});case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4,_x5){return _ref5.apply(this,arguments);};}();_this.handleSearch=function(){_this.getQuotations();};_this.getStatus=function(){var statusOption=_this.state.statusOption;statusOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"dropdown\").then(function(res){console.log(\"res.data\",res);var _iterator=_createForOfIteratorHelper(res.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;statusOption.push({value:key.id,label:key.dropdown_item});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({statusOption:statusOption});});};_this.handleMultiSelect=function(e){var _this$state2=_this.state,selectedStatus=_this$state2.selectedStatus,statusArr=_this$state2.statusArr,statusStr=_this$state2.statusStr;selectedStatus=e;console.log(\"selectedStatus\",selectedStatus);_this.setState({statusStr:\"\",statusArr:[]});var _iterator2=_createForOfIteratorHelper(selectedStatus),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;statusArr.push(key.label);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}statusStr=statusArr.toString();console.log(\"statusArr\",statusArr);console.log(\"statusStr\",statusStr);// this.updateState({});\n_this.setState({statusStr:statusStr});};_this.handleClick=function(key){if(!_this.state.visible){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{visible:!prevState.visible};});};_this.handleCustomerSearch=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(event){var _this$state3,formField,visible;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:// event.persist();\n_this$state3=_this.state,formField=_this$state3.formField,visible=_this$state3.visible;formField.custName=event.target.value;_context6.next=4;return _this.setState({formField:formField,visible:true});case 4:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this.search();case 1:case\"end\":return _context5.stop();}}},_callee5);})),500);}_this.debouncedFn();case 6:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}();_this.search=function(searchString){var formField=_this.state.formField;_this.props.getCommonApi(\"custappt/?search=\".concat(formField.custName)).then(function(key){var status=key.status,data=key.data;if(status===200){_this.setState({customerOption:data});}});};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data){var formField;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:formField=_this.state.formField;formField[\"custName\"]=data.cust_name;_context7.next=4;return _this.setState({formField:formField,customerOption:[]});case 4:_this.handleClick();case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref8.apply(this,arguments);};}();return _this;}_createClass(ListQuotationClass,[{key:\"componentDidMount\",value:function componentDidMount(){var From=new Date();var formField=this.state.formField;var firstdayMonth=new Date(From.getFullYear(),From.getMonth(),1);formField[\"fromDate\"]=firstdayMonth;this.setState({formField:formField});this.getQuotations();this.getStatus();// this.queryHandler({});\n}},{key:\"render\",value:function render(){var _this2=this;var _this$state4=this.state,headerDetails=_this$state4.headerDetails,pageMeta=_this$state4.pageMeta,quotationList=_this$state4.quotationList,formField=_this$state4.formField,isLoading=_this$state4.isLoading,visible=_this$state4.visible,customerOption=_this$state4.customerOption,statusOption=_this$state4.statusOption;var fromDate=formField.fromDate,toDate=formField.toDate,custName=formField.custName,quoNumber=formField.quoNumber,projectName=formField.projectName,status=formField.status;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"project-section col-md-12 align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"label-head mb-4\"},t(\"Quotation Listing\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 filter\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"From Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:fromDate?new Date(fromDate):new Date(),name:\"fromDate\"//className=\"dob-pick\"\n,showYearDropdown:true,dateFormat:\"dd/MM/yyyy\",maxDate:new Date(toDate),showDisabledMonthNavigation:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Customer Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Search Customer..\",value:custName,name:\"custName\",onChange:this.handleCustomerSearch,onClick:this.handleClick}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Quotation Number\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:quoNumber,name:\"quoNumber\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"To Date\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalDateTime,{onChange:this.handleDatePick,inputcol:\"p-0 inTime\",value:toDate?new Date(toDate):new Date(),name:\"toDate\"// className=\"dob-pick\"\n,showYearDropdown:true,dateFormat:\"dd/MM/yyyy\",minDate:new Date(fromDate),showDisabledMonthNavigation:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Project Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:projectName,name:\"projectName\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Status\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalMultiSelect,{options:statusOption// value={status}\n//name=\"status\"\n,handleMultiSelect:this.handleMultiSelect})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"py-3\",mainbg:true,className:\"confirm\",label:\"Search\",outline:false,onClick:this.handleSearch}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"pb-3\",mainbg:true,className:\"confirm\",label:\"Add Quotation\",outline:false,onClick:function onClick(){return history.push(\"quantum/quotation/add\");}}))),visible?/*#__PURE__*/React.createElement(CustomerSearch,{t:t,customerOption:customerOption,handleSelectCustomer:function handleSelectCustomer(item){return _this2.handleSelectCustomer(item);}}):null,/*#__PURE__*/React.createElement(\"div\",{className:\"project-table\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\")))))):quotationList?quotationList.map(function(item,index){var id=item.id,status=item.status,title=item.title,quotation_number=item.quotation_number,created_at=item.created_at,in_charge=item.in_charge,total_amount=item.total_amount;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},created_at)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(Link,{to:\"quantum/quotation/\".concat(id,\"/edit\")},quotation_number))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},in_charge)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},title)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},total_amount)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},status)));}):null)))));}}]);return ListQuotationClass;}(React.Component);// const mapStateToProps = state => ({\n//   projectDetail: state.project.projectDetail,\n// });\nvar mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi// deleteProject,\n// getProject\n},dispatch);};export var ListQuotation=withTranslation()(connect(null,mapDispatchToProps)(ListQuotationClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Quantum/Quotation/ListQuotation/index.js"],"names":["React","Toast","connect","bindActionCreators","getCommonApi","NormalButton","NormalDate","TableWrapper","NormalMultiSelect","dateFormat","withTranslation","NormalInput","NormalDateTime","Link","updateBtn","deleteBtn","getProject","deleteProject","history","_","CustomerSearch","ListQuotationClass","state","headerDetails","label","quotationList","pageMeta","formField","fromDate","Date","toDate","custName","quoNumber","projectName","status","customerOption","active","currentIndex","page","limit","isLoading","isOpenvoidCheckout","isMounted","statusOption","selectedStatus","statusArr","statusStr","visible","updateState","data","setState","getQuotations","From","To","props","then","res","console","log","dataList","pagination","handlePagination","pageNo","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","handleChange","value","name","handleDatePick","handleSearch","getStatus","push","id","dropdown_item","handleMultiSelect","toString","handleCustomerSearch","event","debouncedFn","debounce","search","searchString","handleSelectCustomer","cust_name","firstdayMonth","getFullYear","getMonth","t","item","map","index","title","quotation_number","created_at","in_charge","total_amount","Component","mapDispatchToProps","dispatch","ListQuotation"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi } from \"redux/actions/common\";\r\nimport {\r\n  NormalButton,\r\n  NormalDate,\r\n  TableWrapper,\r\n  NormalMultiSelect,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NormalInput, NormalDateTime } from \"component/common\";\r\nimport { Link } from \"react-router-dom\";\r\nimport updateBtn from \"assets/images/edit1.png\";\r\nimport deleteBtn from \"assets/images/delete1.png\";\r\nimport { getProject, deleteProject } from \"redux/actions/project\";\r\nimport { history } from \"helpers\";\r\nimport _ from \"lodash\";\r\nimport CustomerSearch from \"../../CustomerSearch\";\r\n\r\nexport class ListQuotationClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Date\" },\r\n      { label: \"Quotation Number\" },\r\n      { label: \"Customer Name\" },\r\n      { label: \"Project Name\" },\r\n      { label: \"Total Amount\" },\r\n      { label: \"Status\" },\r\n    ],\r\n\r\n    quotationList: [],\r\n    pageMeta: {\r\n      // chunk: 10,\r\n      // page: 1,\r\n      // total: 10,\r\n      // totalPages: 2,\r\n      // chunk: 2,\r\n      // page: 1,\r\n      // total: 8,\r\n      // totalPages: 4,\r\n    },\r\n\r\n    formField: {\r\n      fromDate: new Date(),\r\n      toDate: new Date(),\r\n      custName: \"\",\r\n      quoNumber: \"\",\r\n      projectName: \"\",\r\n      status: \"\",\r\n      customerOption: [],\r\n    },\r\n\r\n    active: false,\r\n    currentIndex: -1,\r\n    page: 1,\r\n    // limit: 10,\r\n    limit: 5,\r\n    isLoading: true,\r\n    isOpenvoidCheckout: false,\r\n    // is_loading: false,\r\n    isMounted: true,\r\n    statusOption: [],\r\n\r\n    selectedStatus: [],\r\n    statusArr: [],\r\n    statusStr: \"\",\r\n    visible: false,\r\n\r\n    // salesCollectionHeader: [\r\n    //   { label: \"Sales Collection\" },\r\n    //   { label: \"Before Tax\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // nonSalesCollectionHeader: [\r\n    //   { label: \"Non Sales Collection\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\r\n    // salesTransactionHeader: [\r\n    //   { label: \"Sales Transaction\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Paid\" },\r\n    //   { label: \"Outstanding\" },\r\n    // ],\r\n    // ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\r\n    // TreatmentDoneHeader: [\r\n    //   { label: \"Customer\" },\r\n    //   { label: \"Customer Reference\" },\r\n    //   { label: \"Treatment Done\" },\r\n    //   { label: \"Description\" },\r\n    //   { label: \"Staff\" },\r\n    //   { label: \"Amount\" },\r\n    // DayDate: new Date(),\r\n    // runDayEnd: false,\r\n    // reportDate: \"\",\r\n    // sales_collec: null,\r\n    // sales_trasac: null,\r\n    // ar_trasac: null,\r\n    // treatment_done: null,\r\n    // dept_sales: null,\r\n  };\r\n\r\n  // componentWillUnmount() {\r\n  //   this.state.isMounted = false;\r\n  // }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount() {\r\n    let From = new Date();\r\n    let { formField } = this.state;\r\n    let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\r\n    formField[\"fromDate\"] = firstdayMonth;\r\n    this.setState({\r\n      formField,\r\n    });\r\n\r\n    this.getQuotations();\r\n    this.getStatus();\r\n    // this.queryHandler({});\r\n  }\r\n\r\n  getQuotations = () => {\r\n    this.updateState({ isLoading: true });\r\n    let { quotationList, pageMeta, formField, page, limit, statusStr } =\r\n      this.state;\r\n    let { fromDate, toDate, custName, quoNumber, projectName, status } =\r\n      formField;\r\n\r\n    let From = new Date();\r\n    if (fromDate && fromDate !== \"\") {\r\n      From = fromDate;\r\n    } else {\r\n      this.setState({ fromDate: From });\r\n    }\r\n    let To = new Date();\r\n    if (toDate && toDate !== \"\") {\r\n      To = toDate;\r\n    } else {\r\n      this.setState({ toDate: To });\r\n    }\r\n    this.props\r\n      .getCommonApi(\r\n        `quotationlist/?searchfrom=${dateFormat(\r\n          From,\r\n          \"yyyy-mm-dd\"\r\n        )}&searchto=${dateFormat(\r\n          To,\r\n          \"yyyy-mm-dd\"\r\n        )}&searchtitle=${projectName}&searchstatus=${statusStr}&searchname=${custName}&searchnumber=${quoNumber}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(async res => {\r\n        console.log(res, \"dsfdfaafg\");\r\n        await this.setState({ quotationList: [] });\r\n        quotationList = res.data.dataList;\r\n        // pageMeta = res.data.meta.pagination;\r\n        pageMeta = res.data.pagination;\r\n        // pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\r\n        this.setState({ quotationList, pageMeta });\r\n        this.updateState({\r\n          isLoading: false,\r\n        });\r\n        // this.setState({ quotationList });\r\n        console.log(\"res.data\", res.data);\r\n        console.log(\"quotationList\", quotationList);\r\n        console.log(\"pageMeta\", pageMeta);\r\n      });\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.getQuotations();\r\n  };\r\n  // pagination\r\n  // handlePagination = page => {\r\n  //   this.queryHandler(page);\r\n  // };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    await this.setState({\r\n      formField,\r\n    });\r\n  };\r\n\r\n  handleDatePick = async (name, value) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    await this.setState({\r\n      formField,\r\n    });\r\n  };\r\n\r\n  handleSearch = () => {\r\n    this.getQuotations();\r\n  };\r\n\r\n  // seach change with api call\r\n  // handlesearch = event => {\r\n  //   event.persist();\r\n\r\n  //   if (!this.debouncedFn) {\r\n  //     this.debouncedFn = _.debounce(() => {\r\n  //       let searchString = event.target.value;\r\n  //       let data = { search: searchString };\r\n  //       this.queryHandler(data);\r\n  //     }, 500);\r\n  //   }\r\n  //   this.debouncedFn();\r\n  // };\r\n\r\n  // getProject = async data => {\r\n  //   this.updateState({ isLoading: true });\r\n  //   let { search } = this.state;\r\n  //   let { page = 1, limit = 10 } = data;\r\n  //   await this.props\r\n  //     .getProject(`?page=${page}&limit=${limit}&search=${search}`)\r\n  //     .then(res => {\r\n  //       let { data } = res;\r\n  //       console.log(data);\r\n  //       //  let { customerDetails } = this.props;\r\n  //       this.updateState({\r\n  //         customerList: data.dataList,\r\n  //         meta: data.meta?.pagination,\r\n  //         isLoading: false,\r\n  //       });\r\n  //     });\r\n  // };\r\n\r\n  // api call for staff\r\n  // queryHandler = async data => {\r\n  //   this.updateState({ is_loading: true });\r\n  //   let { page = 1, limit = 10 } = data;\r\n  //   await this.props.getProject(\r\n  //     `?page=${page}&limit=${limit}`\r\n  //   );\r\n  //   let { projectDetails } = this.props;\r\n  //   let { quotationList, pageMeta } = this.state;\r\n  //   quotationList = projectDetails.data;\r\n  //   pageMeta = projectDetails.meta?.pagination;\r\n  //   this.updateState({\r\n  //     quotationList,\r\n  //     pageMeta,\r\n  //     is_loading: false,\r\n  //   });\r\n  // };\r\n\r\n  // // delete api call for staff\r\n  // handleDeleteProject = id => {\r\n  //   this.props.deleteProject(`${id}/`).then(res => this.queryHandler({}));\r\n  // };\r\n  getStatus = () => {\r\n    let { statusOption } = this.state;\r\n    statusOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props.getCommonApi(`dropdown`).then(res => {\r\n      console.log(\"res.data\", res);\r\n      for (let key of res.data) {\r\n        statusOption.push({\r\n          value: key.id,\r\n          label: key.dropdown_item,\r\n        });\r\n      }\r\n\r\n      this.setState({ statusOption });\r\n    });\r\n  };\r\n  handleMultiSelect = e => {\r\n    let { selectedStatus, statusArr, statusStr } = this.state;\r\n    selectedStatus = e;\r\n    console.log(\"selectedStatus\", selectedStatus);\r\n\r\n    this.setState({\r\n      statusStr: \"\",\r\n      statusArr: [],\r\n    });\r\n\r\n    for (let key of selectedStatus) {\r\n      statusArr.push(key.label);\r\n    }\r\n    statusStr = statusArr.toString();\r\n    console.log(\"statusArr\", statusArr);\r\n    console.log(\"statusStr\", statusStr);\r\n\r\n    // this.updateState({});\r\n    this.setState({\r\n      statusStr,\r\n    });\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.visible) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      visible: !prevState.visible,\r\n    }));\r\n  };\r\n  handleCustomerSearch = async event => {\r\n    // event.persist();\r\n    let { formField, visible } = this.state;\r\n    formField.custName = event.target.value;\r\n    await this.setState({ formField, visible: true });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        this.search();\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n  search = searchString => {\r\n    let { formField } = this.state;\r\n    this.props\r\n      .getCommonApi(`custappt/?search=${formField.custName}`)\r\n      .then(key => {\r\n        let { status, data } = key;\r\n\r\n        if (status === 200) {\r\n          this.setState({ customerOption: data });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSelectCustomer = async data => {\r\n    let { formField } = this.state;\r\n    formField[\"custName\"] = data.cust_name;\r\n    await this.setState({\r\n      formField,\r\n      customerOption: [],\r\n    });\r\n    this.handleClick();\r\n  };\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      pageMeta,\r\n      quotationList,\r\n      formField,\r\n      isLoading,\r\n      visible,\r\n      customerOption,\r\n      statusOption,\r\n    } = this.state;\r\n\r\n    let { fromDate, toDate, custName, quoNumber, projectName, status } =\r\n      formField;\r\n\r\n    let { t } = this.props;\r\n\r\n    return (\r\n      <div className=\"project-section col-md-12 align-items-center\">\r\n        <div className=\"col-md-12 d-flex\">\r\n          <p className=\"label-head mb-4\">{t(\"Quotation Listing\")}</p>\r\n        </div>\r\n\r\n        <div className=\"row m-0 filter\">\r\n          <div className=\"col-md-5 col-12\">\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"From Date\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalDateTime\r\n                  onChange={this.handleDatePick}\r\n                  inputcol=\"p-0 inTime\"\r\n                  value={fromDate ? new Date(fromDate) : new Date()}\r\n                  name=\"fromDate\"\r\n                  //className=\"dob-pick\"\r\n                  showYearDropdown={true}\r\n                  dateFormat=\"dd/MM/yyyy\"\r\n                  maxDate={new Date(toDate)}\r\n                  showDisabledMonthNavigation\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"Customer Name\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                {/* <NormalInput\r\n                  value={custName}\r\n                  name=\"custName\"\r\n                  onChange={this.handleChange}\r\n                /> */}\r\n                <NormalInput\r\n                  placeholder=\"Search Customer..\"\r\n                  value={custName}\r\n                  name=\"custName\"\r\n                  onChange={this.handleCustomerSearch}\r\n                  onClick={this.handleClick}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"Quotation Number\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalInput\r\n                  value={quoNumber}\r\n                  name=\"quoNumber\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-5 col-12\">\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"To Date\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalDateTime\r\n                  onChange={this.handleDatePick}\r\n                  inputcol=\"p-0 inTime\"\r\n                  value={toDate ? new Date(toDate) : new Date()}\r\n                  name=\"toDate\"\r\n                  // className=\"dob-pick\"\r\n                  showYearDropdown={true}\r\n                  dateFormat=\"dd/MM/yyyy\"\r\n                  minDate={new Date(fromDate)}\r\n                  showDisabledMonthNavigation\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"Project Name\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalInput\r\n                  value={projectName}\r\n                  name=\"projectName\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"Status\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalMultiSelect\r\n                  options={statusOption}\r\n                  // value={status}\r\n                  //name=\"status\"\r\n                  handleMultiSelect={this.handleMultiSelect}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-2 col-12\">\r\n            <NormalButton\r\n              buttonClass={\"py-3\"}\r\n              mainbg={true}\r\n              className=\"confirm\"\r\n              label=\"Search\"\r\n              outline={false}\r\n              onClick={this.handleSearch}\r\n            />\r\n\r\n            <NormalButton\r\n              buttonClass={\"pb-3\"}\r\n              mainbg={true}\r\n              className=\"confirm\"\r\n              label=\"Add Quotation\"\r\n              outline={false}\r\n              onClick={() => history.push(\"quantum/quotation/add\")}\r\n            />\r\n          </div>\r\n        </div>\r\n        {visible ? (\r\n          <CustomerSearch\r\n            t={t}\r\n            customerOption={customerOption}\r\n            handleSelectCustomer={item => this.handleSelectCustomer(item)}\r\n          />\r\n        ) : null}\r\n        <div className=\"project-table\">\r\n          <div className=\"py-4\">\r\n            <div className=\"table-container\">\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n                pageMeta={pageMeta}\r\n              >\r\n                {isLoading ? (\r\n                  <tr>\r\n                    <td colSpan=\"7\">\r\n                      <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                        <div class=\"spinner-border\" role=\"status\">\r\n                          <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : quotationList ? (\r\n                  quotationList.map((item, index) => {\r\n                    let {\r\n                      id,\r\n                      status,\r\n                      title,\r\n                      quotation_number,\r\n                      created_at,\r\n                      in_charge,\r\n                      total_amount,\r\n                    } = item;\r\n                    return (\r\n                      <tr key={index}>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {created_at}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            <Link to={`quantum/quotation/${id}/edit`}>\r\n                              {quotation_number}\r\n                            </Link>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {in_charge}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {title}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {total_amount}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {status}\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : null}\r\n              </TableWrapper>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// const mapStateToProps = state => ({\r\n//   projectDetail: state.project.projectDetail,\r\n// });\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      // deleteProject,\r\n      // getProject\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ListQuotation = withTranslation()(\r\n  connect(null, mapDispatchToProps)(ListQuotationClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}