{"ast":null,"code":"/**\r\n * DevExtreme (viz/tree_map/api.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _tree_map = _interopRequireDefault(require(\"./tree_map.base\"));\n\nvar _node = _interopRequireDefault(require(\"./node\"));\n\nvar _extend2 = require(\"../../core/utils/extend\");\n\nvar _common = require(\"../../core/utils/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar proto = _tree_map.default.prototype;\nvar nodeProto = _node.default.prototype;\nproto._eventsMap.onNodesInitialized = {\n  name: \"nodesInitialized\"\n};\nproto._eventsMap.onNodesRendering = {\n  name: \"nodesRendering\"\n};\n\nproto._createProxyType = function () {\n  var that = this;\n  var nodes;\n  Proxy.prototype = {\n    constructor: Proxy,\n    getParent: function () {\n      return nodes[this._id].parent.proxy || null;\n    },\n    getChild: function (index) {\n      var _nodes = nodes[this._id].nodes;\n      return _nodes ? _nodes[index].proxy : null;\n    },\n    getChildrenCount: function () {\n      var _nodes = nodes[this._id].nodes;\n      return _nodes ? _nodes.length : 0;\n    },\n    getAllChildren: function () {\n      var _nodes = nodes[this._id].nodes;\n      var i;\n      var ii = _nodes && _nodes.length;\n      var list = [];\n\n      for (i = 0; i < ii; ++i) {\n        list.push(_nodes[i].proxy);\n      }\n\n      return list;\n    },\n    getAllNodes: function () {\n      var list = [];\n      collectNodes(nodes[this._id], list);\n      return list;\n    },\n    isLeaf: function () {\n      return !nodes[this._id].isNode();\n    },\n    isActive: function () {\n      return nodes[this._id].isActive();\n    },\n    value: function (arg) {\n      var node = nodes[this._id];\n      var result;\n\n      if (void 0 !== arg) {\n        updateValue(node, arg > 0 ? Number(arg) : 0);\n        change(node, [\"TILING\"]);\n        result = this;\n      } else {\n        result = node.value;\n      }\n\n      return result;\n    },\n    label: function (arg) {\n      var node = nodes[this._id];\n      var result;\n\n      if (void 0 !== arg) {\n        node.customLabel = arg ? String(arg) : null;\n        change(node, [\"LABELS\"]);\n        result = this;\n      } else {\n        result = node.customLabel || node.label;\n      }\n\n      return result;\n    },\n    customize: function (settings) {\n      var node = nodes[this._id];\n\n      if (settings) {\n        node._custom = node._custom || {};\n        (0, _extend2.extend)(true, node._custom, settings);\n        node._partialState = node._partialLabelState = null;\n      }\n\n      change(node, [\"TILES\", \"LABELS\"]);\n      return this;\n    },\n    resetCustomization: function () {\n      var node = nodes[this._id];\n      node._custom = node._partialState = node._partialLabelState = null;\n      change(node, [\"TILES\", \"LABELS\"]);\n      return this;\n    }\n  };\n\n  that._extendProxyType(Proxy.prototype);\n\n  function Proxy(node) {\n    var that = this;\n    node.proxy = that;\n    that._id = node._id;\n    that.level = node.level;\n    that.index = node.index;\n    that.data = node.data;\n  }\n\n  that._handlers.beginBuildNodes = function () {\n    nodes = that._nodes;\n    new Proxy(that._root);\n  };\n\n  that._handlers.buildNode = function (node) {\n    new Proxy(node);\n  };\n\n  that._handlers.endBuildNodes = function () {\n    that._eventTrigger(\"nodesInitialized\", {\n      root: that._root.proxy\n    });\n  };\n};\n\nfunction change(node, codes) {\n  var ctx = node.ctx;\n  ctx.suspend();\n  ctx.change(codes);\n  ctx.resume();\n}\n\nfunction collectNodes(node, list) {\n  var nodes = node.nodes;\n  var i;\n  var ii = nodes && nodes.length;\n\n  for (i = 0; i < ii; ++i) {\n    list.push(nodes[i].proxy);\n    collectNodes(nodes[i], list);\n  }\n}\n\nfunction updateValue(node, value) {\n  var delta = value - node.value;\n\n  while (node) {\n    node.value += delta;\n    node = node.parent;\n  }\n}\n\nproto._extendProxyType = _common.noop;\nvar _resetNodes = proto._resetNodes;\n\nproto._resetNodes = function () {\n  _resetNodes.call(this);\n\n  this._eventTrigger(\"nodesRendering\", {\n    node: this._topNode.proxy\n  });\n};\n\nvar _updateStyles = nodeProto.updateStyles;\n\nnodeProto.updateStyles = function () {\n  var that = this;\n\n  _updateStyles.call(that);\n\n  if (that._custom) {\n    that._partialState = !that.ctx.forceReset && that._partialState || that.ctx.calculateState(that._custom);\n    (0, _extend2.extend)(true, that.state, that._partialState);\n  }\n};\n\nvar _updateLabelStyle = nodeProto.updateLabelStyle;\n\nnodeProto.updateLabelStyle = function () {\n  var that = this;\n  var custom = that._custom;\n\n  _updateLabelStyle.call(that);\n\n  if (custom && custom.label) {\n    that._partialLabelState = !that.ctx.forceReset && that._partialLabelState || calculatePartialLabelState(that, custom.label);\n    that.labelState = (0, _extend2.extend)(true, {}, that.labelState, that._partialLabelState);\n  }\n};\n\nfunction calculatePartialLabelState(node, settings) {\n  var state = node.ctx.calculateLabelState(settings);\n\n  if (\"visible\" in settings) {\n    state.visible = !!settings.visible;\n  }\n\n  return state;\n}\n\nproto.getRootNode = function () {\n  return this._root.proxy;\n};\n\nproto.resetNodes = function () {\n  var context = this._context;\n  context.suspend();\n  context.change([\"NODES_CREATE\"]);\n  context.resume();\n  return this;\n};","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/tree_map/api.js"],"names":["_tree_map","_interopRequireDefault","require","_node","_extend2","_common","obj","__esModule","proto","default","prototype","nodeProto","_eventsMap","onNodesInitialized","name","onNodesRendering","_createProxyType","that","nodes","Proxy","constructor","getParent","_id","parent","proxy","getChild","index","_nodes","getChildrenCount","length","getAllChildren","i","ii","list","push","getAllNodes","collectNodes","isLeaf","isNode","isActive","value","arg","node","result","updateValue","Number","change","label","customLabel","String","customize","settings","_custom","extend","_partialState","_partialLabelState","resetCustomization","_extendProxyType","level","data","_handlers","beginBuildNodes","_root","buildNode","endBuildNodes","_eventTrigger","root","codes","ctx","suspend","resume","delta","noop","_resetNodes","call","_topNode","_updateStyles","updateStyles","forceReset","calculateState","state","_updateLabelStyle","updateLabelStyle","custom","calculatePartialLabelState","labelState","calculateLabelState","visible","getRootNode","resetNodes","context","_context"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/tree_map/api.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _tree_map = _interopRequireDefault(require(\"./tree_map.base\"));\r\nvar _node = _interopRequireDefault(require(\"./node\"));\r\nvar _extend2 = require(\"../../core/utils/extend\");\r\nvar _common = require(\"../../core/utils/common\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar proto = _tree_map.default.prototype;\r\nvar nodeProto = _node.default.prototype;\r\nproto._eventsMap.onNodesInitialized = {\r\n    name: \"nodesInitialized\"\r\n};\r\nproto._eventsMap.onNodesRendering = {\r\n    name: \"nodesRendering\"\r\n};\r\nproto._createProxyType = function() {\r\n    var that = this;\r\n    var nodes;\r\n    Proxy.prototype = {\r\n        constructor: Proxy,\r\n        getParent: function() {\r\n            return nodes[this._id].parent.proxy || null\r\n        },\r\n        getChild: function(index) {\r\n            var _nodes = nodes[this._id].nodes;\r\n            return _nodes ? _nodes[index].proxy : null\r\n        },\r\n        getChildrenCount: function() {\r\n            var _nodes = nodes[this._id].nodes;\r\n            return _nodes ? _nodes.length : 0\r\n        },\r\n        getAllChildren: function() {\r\n            var _nodes = nodes[this._id].nodes;\r\n            var i;\r\n            var ii = _nodes && _nodes.length;\r\n            var list = [];\r\n            for (i = 0; i < ii; ++i) {\r\n                list.push(_nodes[i].proxy)\r\n            }\r\n            return list\r\n        },\r\n        getAllNodes: function() {\r\n            var list = [];\r\n            collectNodes(nodes[this._id], list);\r\n            return list\r\n        },\r\n        isLeaf: function() {\r\n            return !nodes[this._id].isNode()\r\n        },\r\n        isActive: function() {\r\n            return nodes[this._id].isActive()\r\n        },\r\n        value: function(arg) {\r\n            var node = nodes[this._id];\r\n            var result;\r\n            if (void 0 !== arg) {\r\n                updateValue(node, arg > 0 ? Number(arg) : 0);\r\n                change(node, [\"TILING\"]);\r\n                result = this\r\n            } else {\r\n                result = node.value\r\n            }\r\n            return result\r\n        },\r\n        label: function(arg) {\r\n            var node = nodes[this._id];\r\n            var result;\r\n            if (void 0 !== arg) {\r\n                node.customLabel = arg ? String(arg) : null;\r\n                change(node, [\"LABELS\"]);\r\n                result = this\r\n            } else {\r\n                result = node.customLabel || node.label\r\n            }\r\n            return result\r\n        },\r\n        customize: function(settings) {\r\n            var node = nodes[this._id];\r\n            if (settings) {\r\n                node._custom = node._custom || {};\r\n                (0, _extend2.extend)(true, node._custom, settings);\r\n                node._partialState = node._partialLabelState = null\r\n            }\r\n            change(node, [\"TILES\", \"LABELS\"]);\r\n            return this\r\n        },\r\n        resetCustomization: function() {\r\n            var node = nodes[this._id];\r\n            node._custom = node._partialState = node._partialLabelState = null;\r\n            change(node, [\"TILES\", \"LABELS\"]);\r\n            return this\r\n        }\r\n    };\r\n    that._extendProxyType(Proxy.prototype);\r\n\r\n    function Proxy(node) {\r\n        var that = this;\r\n        node.proxy = that;\r\n        that._id = node._id;\r\n        that.level = node.level;\r\n        that.index = node.index;\r\n        that.data = node.data\r\n    }\r\n    that._handlers.beginBuildNodes = function() {\r\n        nodes = that._nodes;\r\n        new Proxy(that._root)\r\n    };\r\n    that._handlers.buildNode = function(node) {\r\n        new Proxy(node)\r\n    };\r\n    that._handlers.endBuildNodes = function() {\r\n        that._eventTrigger(\"nodesInitialized\", {\r\n            root: that._root.proxy\r\n        })\r\n    }\r\n};\r\n\r\nfunction change(node, codes) {\r\n    var ctx = node.ctx;\r\n    ctx.suspend();\r\n    ctx.change(codes);\r\n    ctx.resume()\r\n}\r\n\r\nfunction collectNodes(node, list) {\r\n    var nodes = node.nodes;\r\n    var i;\r\n    var ii = nodes && nodes.length;\r\n    for (i = 0; i < ii; ++i) {\r\n        list.push(nodes[i].proxy);\r\n        collectNodes(nodes[i], list)\r\n    }\r\n}\r\n\r\nfunction updateValue(node, value) {\r\n    var delta = value - node.value;\r\n    while (node) {\r\n        node.value += delta;\r\n        node = node.parent\r\n    }\r\n}\r\nproto._extendProxyType = _common.noop;\r\nvar _resetNodes = proto._resetNodes;\r\nproto._resetNodes = function() {\r\n    _resetNodes.call(this);\r\n    this._eventTrigger(\"nodesRendering\", {\r\n        node: this._topNode.proxy\r\n    })\r\n};\r\nvar _updateStyles = nodeProto.updateStyles;\r\nnodeProto.updateStyles = function() {\r\n    var that = this;\r\n    _updateStyles.call(that);\r\n    if (that._custom) {\r\n        that._partialState = !that.ctx.forceReset && that._partialState || that.ctx.calculateState(that._custom);\r\n        (0, _extend2.extend)(true, that.state, that._partialState)\r\n    }\r\n};\r\nvar _updateLabelStyle = nodeProto.updateLabelStyle;\r\nnodeProto.updateLabelStyle = function() {\r\n    var that = this;\r\n    var custom = that._custom;\r\n    _updateLabelStyle.call(that);\r\n    if (custom && custom.label) {\r\n        that._partialLabelState = !that.ctx.forceReset && that._partialLabelState || calculatePartialLabelState(that, custom.label);\r\n        that.labelState = (0, _extend2.extend)(true, {}, that.labelState, that._partialLabelState)\r\n    }\r\n};\r\n\r\nfunction calculatePartialLabelState(node, settings) {\r\n    var state = node.ctx.calculateLabelState(settings);\r\n    if (\"visible\" in settings) {\r\n        state.visible = !!settings.visible\r\n    }\r\n    return state\r\n}\r\nproto.getRootNode = function() {\r\n    return this._root.proxy\r\n};\r\nproto.resetNodes = function() {\r\n    var context = this._context;\r\n    context.suspend();\r\n    context.change([\"NODES_CREATE\"]);\r\n    context.resume();\r\n    return this\r\n};\r\n"]},"metadata":{},"sourceType":"script"}