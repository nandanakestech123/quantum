{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Link}from\"react-router-dom\";import{NormalInput,NormalSelect,NormalButton}from\"component/common\";import{bindActionCreators}from\"redux\";import{AddManualLoyaltyPoints}from\"redux/actions/customerPlus\";import{connect}from\"react-redux\";import{withTranslation}from\"react-i18next\";import{Toast}from\"service/toast\";var AddManualPointsClass=/*#__PURE__*/function(_React$Component){_inherits(AddManualPointsClass,_React$Component);var _super=_createSuper(AddManualPointsClass);function AddManualPointsClass(){var _this;_classCallCheck(this,AddManualPointsClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={policyOptions:[],description:\"\",points:0,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.onChange=function(e){_this.updateState(_defineProperty({},e.target.name,e.target.value));};_this.onSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,description,points,data,tzoffset,localISOTime;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,description=_this$state.description,points=_this$state.points;if(!(!description||!points||points==0)){_context.next=3;break;}return _context.abrupt(\"return\",Toast({type:\"error\",message:\"Errors in Fields\"}));case 3:data={};data.total_point=points;data.remarks=description;tzoffset=new Date().getTimezoneOffset()*60000;//offset in milliseconds\nlocalISOTime=new Date(Date.now()-tzoffset).toISOString().slice(0,-1);data.date=localISOTime;_context.next=11;return _this.props.AddManualLoyaltyPoints(_this.props.match.params.id,\"?type=\".concat(_this.props.match.params.type),data);case 11:_this.props.history.goBack();case 12:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(AddManualPointsClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){var type=this.props.match.params.type;if(type!==\"reward\"&&type!==\"redeem\")this.props.history.push(\"./\");}},{key:\"render\",value:function render(){var t=this.props.t;var _this$state2=this.state,description=_this$state2.description,points=_this$state2.points;var type=this.props.match.params.type.charAt(0).toUpperCase()+this.props.match.params.type.slice(1);return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fuild\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-label-nav\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},t(\"CustomerPlus\")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},this.props.match.params.id),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},t(\"LP Management\")),/*#__PURE__*/React.createElement(\"i\",{className:\"icon-right mx-md-3\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"sub-category\"},t(\"Add Manual \"+type))),/*#__PURE__*/React.createElement(\"div\",{className:\"container-lg mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4\"},/*#__PURE__*/React.createElement(\"h3\",null,t(\" Add Manual \"+type)))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group pb-2 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},t(\"Description\")),/*#__PURE__*/React.createElement(NormalInput,{name:\"description\",value:description,onChange:this.onChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},t(\"Points\")),/*#__PURE__*/React.createElement(NormalInput,{name:\"points\",value:points,type:\"number\",onChange:this.onChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row pt-5 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-4\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/customerplus/\".concat(this.props.match.params.id,\"/lpmanagement\")},/*#__PURE__*/React.createElement(NormalButton,{label:\"Cancel\",className:\"mr-2 bg-danger text-light col-12\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Save\",success:true,className:\"mr-2 col-12\",onClick:this.onSubmit}))))));}}]);return AddManualPointsClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({AddManualLoyaltyPoints:AddManualLoyaltyPoints},dispatch);};export var AddManualPoints=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(AddManualPointsClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/LoyaltyPointsManagement/AddManualPoints/index.js"],"names":["React","Link","NormalInput","NormalSelect","NormalButton","bindActionCreators","AddManualLoyaltyPoints","connect","withTranslation","Toast","AddManualPointsClass","state","policyOptions","description","points","isMounted","updateState","data","setState","onChange","e","target","name","value","onSubmit","type","message","total_point","remarks","tzoffset","Date","getTimezoneOffset","localISOTime","now","toISOString","slice","date","props","match","params","id","history","goBack","push","t","charAt","toUpperCase","Component","mapStateToProps","mapDispatchToProps","dispatch","AddManualPoints"],"mappings":"6+BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,CAAsBC,YAAtB,CAAoCC,YAApC,KAAwD,kBAAxD,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,sBAAT,KAAuC,4BAAvC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,eAAT,KAAgC,eAAhC,CACA,OAASC,KAAT,KAAsB,eAAtB,C,GAEMC,CAAAA,oB,+XACJC,K,CAAQ,CACNC,aAAa,CAAE,EADT,CAENC,WAAW,CAAE,EAFP,CAGNC,MAAM,CAAE,CAHF,CAINC,SAAS,CAAE,IAJL,C,OAWRC,W,CAAc,SAACC,IAAD,CAAU,CACtB,GAAI,MAAKN,KAAL,CAAWI,SAAf,CAA0B,MAAKG,QAAL,CAAcD,IAAd,EAC3B,C,OAODE,Q,CAAW,SAACC,CAAD,CAAO,CAChB,MAAKJ,WAAL,oBAAoBI,CAAC,CAACC,MAAF,CAASC,IAA7B,CAAoCF,CAAC,CAACC,MAAF,CAASE,KAA7C,GACD,C,OAEDC,Q,sEAAW,6MACqB,MAAKb,KAD1B,CACHE,WADG,aACHA,WADG,CACUC,MADV,aACUA,MADV,MAEL,CAACD,WAAD,EAAgB,CAACC,MAAjB,EAA2BA,MAAM,EAAI,CAFhC,0DAGAL,KAAK,CAAC,CAAEgB,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAE,kBAA1B,CAAD,CAHL,SAILT,IAJK,CAIE,EAJF,CAKTA,IAAI,CAACU,WAAL,CAAmBb,MAAnB,CACAG,IAAI,CAACW,OAAL,CAAef,WAAf,CACIgB,QAPK,CAOM,GAAIC,CAAAA,IAAJ,GAAWC,iBAAX,GAAiC,KAPvC,CAO8C;AACnDC,YARK,CAQU,GAAIF,CAAAA,IAAJ,CAASA,IAAI,CAACG,GAAL,GAAaJ,QAAtB,EAChBK,WADgB,GAEhBC,KAFgB,CAEV,CAFU,CAEP,CAAC,CAFM,CARV,CAWTlB,IAAI,CAACmB,IAAL,CAAYJ,YAAZ,CAXS,uBAYH,OAAKK,KAAL,CAAW/B,sBAAX,CACJ,MAAK+B,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EADpB,iBAEK,MAAKH,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBd,IAF7B,EAGJR,IAHI,CAZG,SAiBT,MAAKoB,KAAL,CAAWI,OAAX,CAAmBC,MAAnB,GAjBS,uD,sFAjBX,+BAAuB,CACrB,KAAK/B,KAAL,CAAWI,SAAX,CAAuB,KAAvB,CACD,C,iCAMD,4BAAoB,CAClB,GAAIU,CAAAA,IAAI,CAAG,KAAKY,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBd,IAAnC,CACA,GAAIA,IAAI,GAAK,QAAT,EAAqBA,IAAI,GAAK,QAAlC,CAA4C,KAAKY,KAAL,CAAWI,OAAX,CAAmBE,IAAnB,CAAwB,IAAxB,EAC7C,C,sBAyBD,iBAAS,CACP,GAAMC,CAAAA,CAAN,CAAY,KAAKP,KAAjB,CAAMO,CAAN,CACA,iBAA8B,KAAKjC,KAAnC,CAAME,WAAN,cAAMA,WAAN,CAAmBC,MAAnB,cAAmBA,MAAnB,CACA,GAAIW,CAAAA,IAAI,CACN,KAAKY,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBd,IAAxB,CAA6BoB,MAA7B,CAAoC,CAApC,EAAuCC,WAAvC,GACA,KAAKT,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBd,IAAxB,CAA6BU,KAA7B,CAAmC,CAAnC,CAFF,CAGA,mBACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,yBAAG,SAAS,CAAC,UAAb,EAAyBS,CAAC,CAAC,cAAD,CAA1B,CADF,cAEE,yBAAG,SAAS,CAAC,oBAAb,EAFF,cAGE,yBAAG,SAAS,CAAC,cAAb,EAA6B,KAAKP,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAArD,CAHF,cAIE,yBAAG,SAAS,CAAC,oBAAb,EAJF,cAKE,yBAAG,SAAS,CAAC,cAAb,EAA6BI,CAAC,CAAC,eAAD,CAA9B,CALF,cAME,yBAAG,SAAS,CAAC,oBAAb,EANF,cAOE,yBAAG,SAAS,CAAC,cAAb,EAA6BA,CAAC,CAAC,cAAgBnB,IAAjB,CAA9B,CAPF,CADF,cAUE,2BAAK,SAAS,CAAC,mBAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,8BAAKmB,CAAC,CAAC,eAAiBnB,IAAlB,CAAN,CADF,CADF,CADF,cAME,2BAAK,SAAS,CAAC,sBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,eAAf,eACE,6BAAO,SAAS,CAAC,mDAAjB,EACGmB,CAAC,CAAC,aAAD,CADJ,CADF,cAIE,oBAAC,WAAD,EACE,IAAI,CAAC,aADP,CAEE,KAAK,CAAE/B,WAFT,CAGE,QAAQ,CAAE,KAAKM,QAHjB,EAJF,CADF,cAWE,2BAAK,SAAS,CAAC,eAAf,eACE,6BAAO,SAAS,CAAC,mDAAjB,EACGyB,CAAC,CAAC,QAAD,CADJ,CADF,cAIE,oBAAC,WAAD,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAE9B,MAFT,CAGE,IAAI,CAAC,QAHP,CAIE,QAAQ,CAAE,KAAKK,QAJjB,EAJF,CAXF,CADF,cAwBE,2BAAK,SAAS,CAAC,wCAAf,eACE,2BAAK,SAAS,CAAC,eAAf,eACE,oBAAC,IAAD,EACE,EAAE,+BAAyB,KAAKkB,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAjD,iBADJ,eAGE,oBAAC,YAAD,EACE,KAAK,CAAC,QADR,CAEE,SAAS,CAAC,kCAFZ,EAHF,CADF,CADF,cAWE,2BAAK,SAAS,CAAC,UAAf,eACE,oBAAC,YAAD,EACE,KAAK,CAAC,MADR,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAC,aAHZ,CAIE,OAAO,CAAE,KAAKhB,QAJhB,EADF,CAXF,CAxBF,CANF,CAVF,CADF,CAiED,C,kCAnHgCxB,KAAK,CAAC+C,S,EAsHzC,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACrC,KAAD,QAAY,EAAZ,EAAxB,CAEA,GAAMsC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAc,CACvC,MAAO7C,CAAAA,kBAAkB,CAAC,CAAEC,sBAAsB,CAAtBA,sBAAF,CAAD,CAA6B4C,QAA7B,CAAzB,CACD,CAFD,CAIA,MAAO,IAAMC,CAAAA,eAAe,CAAG3C,eAAe,GAC5CD,OAAO,CAACyC,eAAD,CAAkBC,kBAAlB,CAAP,CAA6CvC,oBAA7C,CAD4C,CAAvC","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { NormalInput, NormalSelect, NormalButton } from \"component/common\";\nimport { bindActionCreators } from \"redux\";\nimport { AddManualLoyaltyPoints } from \"redux/actions/customerPlus\";\nimport { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport { Toast } from \"service/toast\";\n\nclass AddManualPointsClass extends React.Component {\n  state = {\n    policyOptions: [],\n    description: \"\",\n    points: 0,\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount() {\n    let type = this.props.match.params.type;\n    if (type !== \"reward\" && type !== \"redeem\") this.props.history.push(\"./\");\n  }\n\n  onChange = (e) => {\n    this.updateState({ [e.target.name]: e.target.value });\n  };\n\n  onSubmit = async () => {\n    let { description, points } = this.state;\n    if (!description || !points || points == 0)\n      return Toast({ type: \"error\", message: \"Errors in Fields\" });\n    let data = {};\n    data.total_point = points;\n    data.remarks = description;\n    var tzoffset = new Date().getTimezoneOffset() * 60000; //offset in milliseconds\n    var localISOTime = new Date(Date.now() - tzoffset)\n      .toISOString()\n      .slice(0, -1);\n    data.date = localISOTime;\n    await this.props.AddManualLoyaltyPoints(\n      this.props.match.params.id,\n      `?type=${this.props.match.params.type}`,\n      data\n    );\n    this.props.history.goBack();\n  };\n  render() {\n    let { t } = this.props;\n    let { description, points } = this.state;\n    let type =\n      this.props.match.params.type.charAt(0).toUpperCase() +\n      this.props.match.params.type.slice(1);\n    return (\n      <div className=\"container-fuild\">\n        <div className=\"head-label-nav\">\n          <p className=\"category\">{t(\"CustomerPlus\")}</p>\n          <i className=\"icon-right mx-md-3\"></i>\n          <p className=\"sub-category\">{this.props.match.params.id}</p>\n          <i className=\"icon-right mx-md-3\"></i>\n          <p className=\"sub-category\">{t(\"LP Management\")}</p>\n          <i className=\"icon-right mx-md-3\"></i>\n          <p className=\"sub-category\">{t(\"Add Manual \" + type)}</p>\n        </div>\n        <div className=\"container-lg mt-5\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-md-12 mb-4\">\n              <h3>{t(\" Add Manual \" + type)}</h3>\n            </div>\n          </div>\n          <div className=\"form-group pb-2 mb-4\">\n            <div className=\"row\">\n              <div className=\"col-md-6 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  {t(\"Description\")}\n                </label>\n                <NormalInput\n                  name=\"description\"\n                  value={description}\n                  onChange={this.onChange}\n                />\n              </div>\n              <div className=\"col-md-6 mb-4\">\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                  {t(\"Points\")}\n                </label>\n                <NormalInput\n                  name=\"points\"\n                  value={points}\n                  type=\"number\"\n                  onChange={this.onChange}\n                />\n              </div>\n            </div>\n            <div className=\"row pt-5 d-flex justify-content-center\">\n              <div className=\"col-md-3 mb-4\">\n                <Link\n                  to={`/admin/customerplus/${this.props.match.params.id}/lpmanagement`}\n                >\n                  <NormalButton\n                    label=\"Cancel\"\n                    className=\"mr-2 bg-danger text-light col-12\"\n                  />\n                </Link>\n              </div>\n              <div className=\"col-md-3\">\n                <NormalButton\n                  label=\"Save\"\n                  success={true}\n                  className=\"mr-2 col-12\"\n                  onClick={this.onSubmit}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({ AddManualLoyaltyPoints }, dispatch);\n};\n\nexport const AddManualPoints = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(AddManualPointsClass)\n);\n"]},"metadata":{},"sourceType":"module"}