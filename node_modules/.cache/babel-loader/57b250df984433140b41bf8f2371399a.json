{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{NormalButton,NormalSelect}from'component/common';import{InputSearch,TableWrapper}from'component/common';import filter from\"../../../../assets/images/filter.png\";import'./style.scss';import{getCustomer}from'redux/actions/customer';import{updateForm}from'redux/actions/common';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import _ from'lodash';export var ListCustomerClass=/*#__PURE__*/function(_React$Component){_inherits(ListCustomerClass,_React$Component);var _super=_createSuper(ListCustomerClass);function ListCustomerClass(){var _this;_classCallCheck(this,ListCustomerClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:'Customer Name',sortKey:\"customerName\"},{label:'Contact Number'},{label:'Card No1'},{label:'Card No2'},{label:'Card No3'},{label:'Card No4'},{label:'Card No5'},{label:''}],customerList:[],meta:{},active:false,currentIndex:-1};_this.componentDidMount=function(){_this.getCustomer({});};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener('click',_this.handleOutsideClick,false);}else{document.removeEventListener('click',_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.getCustomer=function(data){var _data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit,_data$search=data.search,search=_data$search===void 0?\"\":_data$search;_this.props.getCustomer(\"?page=\".concat(page,\"&limit=\").concat(limit,\"&search=\").concat(search)).then(function(res){console.log(res,\"dsfdfaafg\");_this.setState({customerList:res.data.dataList,meta:res.data.meta.pagination});});};_this.handlePagination=function(page){console.log(page,\"dsfsdfsdfsdf\");_this.getCustomer(page);};_this.handlesearch=function(event){console.log(\"sadfasdfasdf\",event.target.value);event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;var data={search:searchString};_this.getCustomer(data);},500);}_this.debouncedFn();};_this.bookAppointment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var formFields;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formFields={};formFields[\"custId\"]=data.id;formFields[\"custName\"]=data.cust_name;_context.next=5;return _this.props.updateForm('basicApptDetail',formFields);case 5:_this.props.history.push(\"/admin/appointment\");case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(ListCustomerClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,headerDetails=_this$state.headerDetails,customerList=_this$state.customerList,meta=_this$state.meta,currentIndex=_this$state.currentIndex,active=_this$state.active;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"head-label\"},\"Customer\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 mr-5\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Customer\",onChange:this.handlesearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-4 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Customer\",onClick:function onClick(){return _this2.props.history.push('/admin/customer/add');}}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:meta},customerList?customerList.map(function(item,index){var id=item.id,cust_name=item.cust_name,cardno1=item.cardno1,cardno2=item.cardno2,cardno3=item.cardno3,cardno4=item.cardno4,cardno5=item.cardno5,cust_phone2=item.cust_phone2;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_phone2)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cardno1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cardno2)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cardno3)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cardno4)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cardno5)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\",ref:function ref(node){_this2.node=node;},onClick:function onClick(){return _this2.handleClick(index);}},currentIndex===index?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more-active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"option card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pt-3\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customer/\".concat(id,\"/details\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey px-3\"}),\" View \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-schedule px-3\"}),\" Reschedule Appointment \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\",onClick:function onClick(){return _this2.bookAppointment(item);}},/*#__PURE__*/React.createElement(\"span\",{className:\"px-2\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"31\",height:\"30\",viewBox:\"0 0 31 30\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"rect\",{width:\"31\",height:\"30\",fill:\"#F9F9F9\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M15 8V22\",stroke:\"#848484\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M8 15H22\",stroke:\"#848484\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}))),\"Book Appointment\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-cancel-schedule px-3\"}),\" Cancel Appointment \"))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"}))));}):\"\"))))));}}]);return ListCustomerClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{// filter: state.dashboard\n};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomer:getCustomer,updateForm:updateForm},dispatch);};export var ListCustomer=connect(mapStateToProps,mapDispatchToProps)(ListCustomerClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Customer/ListCustomer/index.js"],"names":["React","NormalButton","NormalSelect","InputSearch","TableWrapper","filter","getCustomer","updateForm","connect","bindActionCreators","_","ListCustomerClass","state","headerDetails","label","sortKey","customerList","meta","active","currentIndex","componentDidMount","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","setState","prevState","e","node","contains","target","data","page","limit","search","props","then","res","console","log","dataList","pagination","handlePagination","handlesearch","event","value","persist","debouncedFn","debounce","searchString","bookAppointment","formFields","id","cust_name","history","push","map","item","index","cardno1","cardno2","cardno3","cardno4","cardno5","cust_phone2","Component","mapStateToProps","mapDispatchToProps","dispatch","ListCustomer"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { NormalButton, NormalSelect } from 'component/common';\r\nimport { InputSearch, TableWrapper } from 'component/common';\r\nimport filter from \"../../../../assets/images/filter.png\";\r\nimport './style.scss'\r\nimport { getCustomer } from 'redux/actions/customer';\r\nimport { updateForm } from 'redux/actions/common';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport _ from 'lodash';\r\n\r\nexport class ListCustomerClass extends React.Component {\r\n    state = {\r\n        headerDetails: [\r\n            { label: 'Customer Name', sortKey: \"customerName\" },\r\n            { label: 'Contact Number' },\r\n            { label: 'Card No1' },\r\n            { label: 'Card No2' },\r\n            { label: 'Card No3' },\r\n            { label: 'Card No4' },\r\n            { label: 'Card No5' },\r\n            { label: '' }\r\n        ],\r\n        customerList: [],\r\n        meta: {},\r\n        active: false,\r\n        currentIndex: -1,\r\n    }\r\n    // handleClick = (key,active) => {\r\n    //     let currentIndex;\r\n    //     if (this.state.active == true) {\r\n    //         this.setState({\r\n    //             active: false,\r\n    //             currentIndex: '-1'\r\n    //         })\r\n    //     }\r\n    //     else {\r\n    //         this.setState({\r\n    //             active: active,\r\n    //             currentIndex: key\r\n    //         })\r\n    //     }\r\n    // }\r\n\r\n    componentDidMount = () => {\r\n        this.getCustomer({});\r\n    }\r\n\r\n    handleClick = (key) => {\r\n        if (!this.state.active) {\r\n            document.addEventListener('click', this.handleOutsideClick, false);\r\n        } else {\r\n            document.removeEventListener('click', this.handleOutsideClick, false);\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n            active: !prevState.active,\r\n            currentIndex: key\r\n        }));\r\n    }\r\n\r\n    handleOutsideClick = (e) => {\r\n        if (this.node != null) {\r\n            if (this.node.contains(e.target)) {\r\n                return;\r\n            }\r\n        }\r\n        this.handleClick();\r\n    }\r\n\r\n    getCustomer = (data) => {\r\n        let { page = 1, limit = 10, search = \"\" } = data\r\n        this.props.getCustomer(`?page=${page}&limit=${limit}&search=${search}`).then((res) => {\r\n            console.log(res, \"dsfdfaafg\")\r\n            this.setState({ customerList: res.data.dataList, meta: res.data.meta.pagination })\r\n        })\r\n    }\r\n\r\n    handlePagination = (page) => {\r\n        console.log(page, \"dsfsdfsdfsdf\")\r\n        this.getCustomer(page)\r\n    }\r\n\r\n    handlesearch = (event) => {\r\n        console.log(\"sadfasdfasdf\", event.target.value)\r\n        event.persist();\r\n\r\n        if (!this.debouncedFn) {\r\n            this.debouncedFn = _.debounce(() => {\r\n                let searchString = event.target.value;\r\n                let data = { search: searchString }\r\n                this.getCustomer(data)\r\n            }, 500);\r\n        }\r\n        this.debouncedFn();\r\n    }\r\n\r\n    bookAppointment = async (data) => {\r\n        let formFields = {};\r\n        formFields[\"custId\"] = data.id;\r\n        formFields[\"custName\"] = data.cust_name;\r\n        await this.props.updateForm('basicApptDetail', formFields)\r\n        this.props.history.push(`/admin/appointment`);\r\n    }\r\n\r\n    render() {\r\n        let { headerDetails, customerList, meta, currentIndex, active } = this.state\r\n        return (\r\n            <>\r\n                <div className=\"customer-list container\">\r\n                    <div className=\"row align-items-center\">\r\n                        <div className=\"col-md-6\">\r\n                            <h3 className=\"head-label\">Customer</h3>\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                            <div className=\"d-flex\">\r\n                                <div className=\"w-100 mr-5\">\r\n                                    <InputSearch\r\n                                        className=\"\"\r\n                                        placeholder='Search Customer'\r\n                                        onChange={this.handlesearch} />\r\n                                </div>\r\n                                <div className=\"w-100 col-4 p-0\">\r\n                                    <NormalButton\r\n                                        mainbg={true}\r\n                                        className=\"col-12 fs-15 float-right\"\r\n                                        label=\"Add Customer\"\r\n                                        onClick={() => this.props.history.push('/admin/customer/add')}\r\n                                    />\r\n                                </div>\r\n                                {/* <div className=\"bg-white ml-5 filter-icon filter-section\" onClick={() => { this.handleClick('filter') }}>\r\n                                    <img src={filter} alt=\"\" />\r\n                                    {currentIndex === 'filter' &&\r\n                                        <>\r\n                                            <div className=\"filter-category\">\r\n                                                <p className=\"subcategory\">Available today</p>\r\n                                                <p className=\"subcategory\">Unavailable today</p>\r\n                                                <p className=\"subcategory\">Morning shift</p>\r\n                                                <p className=\"subcategory\">Evening shift</p>\r\n                                            </div>\r\n                                        </>\r\n                                    }\r\n                                </div> */}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {/* <div className=\"filter-by\">\r\n                        <p className=\"head\">Filter</p>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-3\">\r\n                                <div>\r\n                                    <label className=\"label\">Location</label>\r\n                                    <div className=\"input-group\">\r\n                                        <NormalSelect\r\n                                            placeholder=\"Masseuse\"\r\n                                            // options={treatmentOption}\r\n                                            // value={treatment}\r\n                                            iconname=\"icon-down-key\"\r\n                                            name=\"treatment\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-3\">\r\n                                <div>\r\n                                    <label className=\"label\">Service</label>\r\n                                    <div className=\"input-group\">\r\n                                        <NormalSelect\r\n                                            placeholder=\"Select department\"\r\n                                            // options={treatmentOption}\r\n                                            // value={treatment}\r\n                                            iconname=\"icon-down-key\"\r\n                                            name=\"treatment\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-3\">\r\n                                <div>\r\n                                    <label className=\"label\">Date</label>\r\n                                    <div className=\"input-group\">\r\n                                        <NormalSelect\r\n                                            placeholder=\"Select date\"\r\n                                            // options={treatmentOption}\r\n                                            // value={treatment}\r\n                                            iconname=\"icon-down-key\"\r\n                                            name=\"treatment\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div> */}\r\n\r\n                    <div className=\"tab-table-content\">\r\n                        <div className=\"py-4\">\r\n                            <div className=\"table-container\">\r\n                                <TableWrapper\r\n                                    headerDetails={headerDetails}\r\n                                    queryHandler={this.handlePagination}\r\n                                    pageMeta={meta}\r\n                                >\r\n\r\n                                    {customerList ? customerList.map((item, index) => {\r\n\r\n                                        let {\r\n                                            id,\r\n                                            cust_name,\r\n                                            cardno1,\r\n                                            cardno2,\r\n                                            cardno3,\r\n                                            cardno4,\r\n                                            cardno5,\r\n                                            cust_phone2\r\n                                        } = item\r\n                                        return (\r\n                                            <tr key={index}>\r\n                                                <td><div className=\"d-flex align-items-center justify-content-center\">{cust_name}</div></td>\r\n                                                <td><div className=\"d-flex align-items-center justify-content-center\">{cust_phone2}</div></td>\r\n                                                <td><div className=\"d-flex align-items-center justify-content-center\">{cardno1}</div></td>\r\n                                                <td><div className=\"d-flex align-items-center justify-content-center\">{cardno2}</div></td>\r\n                                                <td><div className=\"d-flex align-items-center justify-content-center\">{cardno3}</div></td>\r\n                                                <td><div className=\"d-flex align-items-center justify-content-center\">{cardno4}</div></td>\r\n                                                <td><div className=\"d-flex align-items-center justify-content-center\">{cardno5}</div></td>\r\n                                                <td className=\"position-relative\" ref={node => { this.node = node; }}\r\n                                                    onClick={() => this.handleClick(index)}\r\n                                                >\r\n\r\n                                                    {currentIndex === index ?\r\n                                                        <>\r\n                                                            <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\"><i className=\"icon-more\"></i></div>\r\n                                                            <div className=\"option card\">\r\n                                                                <div className=\"d-flex align-items-center fs-16 pt-3\" onClick={() => this.props.history.push(`/admin/customer/${id}/details`)}><span className=\"icon-eye-grey px-3\"></span> View </div>\r\n                                                                <div className=\"d-flex align-items-center fs-16\" ><span className=\"icon-schedule px-3\"></span> Reschedule Appointment </div>\r\n                                                                <div className=\"d-flex align-items-center fs-16\" onClick={() => this.bookAppointment(item)}>\r\n                                                                    <span className=\"px-2\">\r\n                                                                        <svg width=\"31\" height=\"30\" viewBox=\"0 0 31 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                                                            <rect width=\"31\" height=\"30\" fill=\"#F9F9F9\" />\r\n                                                                            <path d=\"M15 8V22\" stroke=\"#848484\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                                                                            <path d=\"M8 15H22\" stroke=\"#848484\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                                                                        </svg>\r\n                                                                    </span>\r\n                                                                    Book Appointment\r\n                                                                </div>\r\n                                                                <div className=\"d-flex align-items-center fs-16 pb-3\"><span className=\"icon-cancel-schedule px-3\"></span> Cancel Appointment </div>\r\n                                                            </div>\r\n                                                        </>\r\n                                                        :\r\n                                                        <div className=\"d-flex align-items-center justify-content-center horizontal-more\"><i className=\"icon-more\"></i></div>\r\n                                                    }\r\n                                                </td>\r\n                                            </tr>\r\n                                        )\r\n                                    }) : \"\"}\r\n\r\n                                </TableWrapper>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    // filter: state.dashboard\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        getCustomer,\r\n        updateForm\r\n    }, dispatch)\r\n}\r\n\r\nexport const ListCustomer = connect(mapStateToProps, mapDispatchToProps)(ListCustomerClass)"]},"metadata":{},"sourceType":"module"}