{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _defineProperty from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Routes}from\"routes\";import i18n from\"i18next\";import{initReactI18next}from\"react-i18next\";import{getMultiLanguage}from\"redux/actions/multiLanguage\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";var MultiLanguageClass=/*#__PURE__*/function(_Component){_inherits(MultiLanguageClass,_Component);var _super=_createSuper(MultiLanguageClass);function MultiLanguageClass(){var _this;_classCallCheck(this,MultiLanguageClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLanguageReady:false};_this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,resources;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.getMultiLanguage();case 2:res=_context.sent;console.log(res,\"translations\");resources={en:{translation:{}},zh_sg:{translation:{}}};resources.en.translation=res.language.ENGLISH.reduce(function(a,e){return _objectSpread(_objectSpread({},a),{},_defineProperty({},e.word,e.word));},{});resources.zh_sg.translation=res.language.CHINESE.reduce(function(a,e){return _objectSpread(_objectSpread({},a),{},_defineProperty({},res.language.ENGLISH.find(function(e2){return e2.wordCode==e.wordCode;}).word,e.word));},{});console.log(resources,\"lang obj\");localStorage.setItem(\"translations\",JSON.stringify(resources));_this.init();case 10:case\"end\":return _context.stop();}}},_callee);}));_this.init=function(){var _localStorage$getItem;i18n.use(initReactI18next)// passes i18n down to react-i18next\n.init({// the translations\n// (tip move them in a JSON file and import them,\n// or even better, manage them via a UI: https://react.i18next.com/guides/multiple-translation-files#manage-your-translations-with-a-management-gui)\nresources:JSON.parse(localStorage.getItem(\"translations\")),lng:(_localStorage$getItem=localStorage.getItem(\"lang\"))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:\"en\",// if you're using a language detector, do not define the lng option\nfallbackLng:\"en\"});_this.setState({isLanguageReady:true});};return _this;}_createClass(MultiLanguageClass,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem(\"translations\")==null){this.getData();}else{this.getData();this.init();}}},{key:\"render\",value:function render(){var isLanguageReady=this.state.isLanguageReady;return isLanguageReady?/*#__PURE__*/React.createElement(Routes,null):/*#__PURE__*/React.createElement(\"div\",null);}}]);return MultiLanguageClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getMultiLanguage:getMultiLanguage},dispatch);};export var MultiLanguage=connect(mapStateToProps,mapDispatchToProps)(MultiLanguageClass);","map":{"version":3,"sources":["F:/webfe/src/multiLanguage.js"],"names":["React","Component","Routes","i18n","initReactI18next","getMultiLanguage","connect","bindActionCreators","MultiLanguageClass","state","isLanguageReady","getData","props","res","console","log","resources","en","translation","zh_sg","language","ENGLISH","reduce","a","e","word","CHINESE","find","e2","wordCode","localStorage","setItem","JSON","stringify","init","use","parse","getItem","lng","fallbackLng","setState","mapStateToProps","mapDispatchToProps","dispatch","MultiLanguage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Routes } from \"routes\";\r\nimport i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport { getMultiLanguage } from \"redux/actions/multiLanguage\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nclass MultiLanguageClass extends Component {\r\n  state = {\r\n    isLanguageReady: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (localStorage.getItem(\"translations\") == null) {\r\n      this.getData();\r\n    } else {\r\n      this.getData();\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  getData = async () => {\r\n    let res = await this.props.getMultiLanguage();\r\n    console.log(res, \"translations\");\r\n    let resources = { en: { translation: {} }, zh_sg: { translation: {} } };\r\n    resources.en.translation = res.language.ENGLISH.reduce((a, e) => {\r\n      return { ...a, [e.word]: e.word };\r\n    }, {});\r\n    resources.zh_sg.translation = res.language.CHINESE.reduce((a, e) => {\r\n      return {\r\n        ...a,\r\n        [res.language.ENGLISH.find(e2 => e2.wordCode == e.wordCode).word]:\r\n          e.word,\r\n      };\r\n    }, {});\r\n    console.log(resources, \"lang obj\");\r\n    localStorage.setItem(\"translations\", JSON.stringify(resources));\r\n    this.init();\r\n  };\r\n\r\n  init = () => {\r\n    i18n\r\n      .use(initReactI18next) // passes i18n down to react-i18next\r\n      .init({\r\n        // the translations\r\n        // (tip move them in a JSON file and import them,\r\n        // or even better, manage them via a UI: https://react.i18next.com/guides/multiple-translation-files#manage-your-translations-with-a-management-gui)\r\n        resources: JSON.parse(localStorage.getItem(\"translations\")),\r\n        lng: localStorage.getItem(\"lang\") ?? \"en\", // if you're using a language detector, do not define the lng option\r\n        fallbackLng: \"en\",\r\n      });\r\n    this.setState({ isLanguageReady: true });\r\n  };\r\n\r\n  render() {\r\n    let { isLanguageReady } = this.state;\r\n    return isLanguageReady ? <Routes /> : <div></div>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getMultiLanguage,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const MultiLanguage = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(MultiLanguageClass);\r\n"]},"metadata":{},"sourceType":"module"}