{"ast":null,"code":"/**\r\n * DevExtreme (ui/gallery.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _common = require(\"../core/utils/common\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _window = require(\"../core/utils/window\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _element = require(\"../core/element\");\n\nvar _fx = _interopRequireDefault(require(\"../animation/fx\"));\n\nvar _click = require(\"../events/click\");\n\nvar _translator = require(\"../animation/translator\");\n\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\n\nvar _ui = _interopRequireDefault(require(\"./widget/ui.widget\"));\n\nvar _index = require(\"../events/utils/index\");\n\nvar _uiCollection_widget = _interopRequireDefault(require(\"./collection/ui.collection_widget.edit\"));\n\nvar _swipeable = _interopRequireDefault(require(\"../events/gesture/swipeable\"));\n\nvar _bindable_template = require(\"../core/templates/bindable_template\");\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar GALLERY_CLASS = \"dx-gallery\";\nvar GALLERY_WRAPPER_CLASS = GALLERY_CLASS + \"-wrapper\";\nvar GALLERY_LOOP_CLASS = \"dx-gallery-loop\";\nvar GALLERY_ITEM_CONTAINER_CLASS = GALLERY_CLASS + \"-container\";\nvar GALLERY_ACTIVE_CLASS = GALLERY_CLASS + \"-active\";\nvar GALLERY_ITEM_CLASS = GALLERY_CLASS + \"-item\";\nvar GALLERY_INVISIBLE_ITEM_CLASS = GALLERY_CLASS + \"-item-invisible\";\nvar GALLERY_LOOP_ITEM_CLASS = GALLERY_ITEM_CLASS + \"-loop\";\nvar GALLERY_ITEM_SELECTOR = \".\" + GALLERY_ITEM_CLASS;\nvar GALLERY_ITEM_SELECTED_CLASS = GALLERY_ITEM_CLASS + \"-selected\";\nvar GALLERY_INDICATOR_CLASS = GALLERY_CLASS + \"-indicator\";\nvar GALLERY_INDICATOR_ITEM_CLASS = GALLERY_INDICATOR_CLASS + \"-item\";\nvar GALLERY_INDICATOR_ITEM_SELECTOR = \".\" + GALLERY_INDICATOR_ITEM_CLASS;\nvar GALLERY_INDICATOR_ITEM_SELECTED_CLASS = GALLERY_INDICATOR_ITEM_CLASS + \"-selected\";\nvar GALLERY_IMAGE_CLASS = \"dx-gallery-item-image\";\nvar GALLERY_ITEM_DATA_KEY = \"dxGalleryItemData\";\nvar MAX_CALC_ERROR = 1;\n\nvar GalleryNavButton = _ui.default.inherit({\n  _supportedKeys: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      pageUp: _common.noop,\n      pageDown: _common.noop\n    });\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      direction: \"next\",\n      onClick: null,\n      hoverStateEnabled: true,\n      activeStateEnabled: true\n    });\n  },\n  _render: function () {\n    this.callBase();\n    var that = this;\n    var $element = this.$element();\n    var eventName = (0, _index.addNamespace)(_click.name, this.NAME);\n    $element.addClass(GALLERY_CLASS + \"-nav-button-\" + this.option(\"direction\"));\n\n    _events_engine.default.off($element, eventName);\n\n    _events_engine.default.on($element, eventName, function (e) {\n      that._createActionByOption(\"onClick\")({\n        event: e\n      });\n    });\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"onClick\":\n      case \"direction\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\n\nvar Gallery = _uiCollection_widget.default.inherit({\n  _activeStateUnit: GALLERY_ITEM_SELECTOR,\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      activeStateEnabled: false,\n      animationDuration: 400,\n      animationEnabled: true,\n      loop: false,\n      swipeEnabled: true,\n      indicatorEnabled: true,\n      showIndicator: true,\n      selectedIndex: 0,\n      slideshowDelay: 0,\n      showNavButtons: false,\n      wrapAround: false,\n      initialItemWidth: void 0,\n      stretchImages: false,\n      _itemAttributes: {\n        role: \"option\"\n      },\n      loopItemFocus: false,\n      selectOnFocus: true,\n      selectionMode: \"single\",\n      selectionRequired: true,\n      selectionByClick: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _init: function () {\n    this.callBase();\n    this.option(\"loopItemFocus\", this.option(\"loop\"));\n  },\n  _initTemplates: function () {\n    this.callBase();\n\n    this._templateManager.addDefaultTemplates({\n      item: new _bindable_template.BindableTemplate(function ($container, data) {\n        var $img = (0, _renderer.default)(\"<img>\").addClass(GALLERY_IMAGE_CLASS);\n\n        if ((0, _type.isPlainObject)(data)) {\n          this._prepareDefaultItemTemplate(data, $container);\n\n          $img.attr({\n            src: data.imageSrc,\n            alt: data.imageAlt\n          }).appendTo($container);\n        } else {\n          $img.attr(\"src\", String(data)).appendTo($container);\n        }\n      }.bind(this), [\"imageSrc\", \"imageAlt\", \"text\", \"html\"], this.option(\"integrationOptions.watchMethod\"))\n    });\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _itemContainer: function () {\n    return this._$container;\n  },\n  _itemClass: function () {\n    return GALLERY_ITEM_CLASS;\n  },\n  _itemDataKey: function () {\n    return GALLERY_ITEM_DATA_KEY;\n  },\n  _actualItemWidth: function () {\n    var isWrapAround = this.option(\"wrapAround\");\n\n    if (this.option(\"stretchImages\")) {\n      var itemPerPage = isWrapAround ? this._itemsPerPage() + 1 : this._itemsPerPage();\n      return 1 / itemPerPage;\n    }\n\n    if (isWrapAround) {\n      return this._itemPercentWidth() * this._itemsPerPage() / (this._itemsPerPage() + 1);\n    }\n\n    return this._itemPercentWidth();\n  },\n  _itemPercentWidth: function () {\n    var percentWidth;\n    var elementWidth = this.$element().outerWidth();\n    var initialItemWidth = this.option(\"initialItemWidth\");\n\n    if (initialItemWidth && initialItemWidth <= elementWidth) {\n      percentWidth = initialItemWidth / elementWidth;\n    } else {\n      percentWidth = 1;\n    }\n\n    return percentWidth;\n  },\n  _itemsPerPage: function () {\n    var itemsPerPage = (0, _window.hasWindow)() ? Math.floor(1 / this._itemPercentWidth()) : 1;\n    return Math.min(itemsPerPage, this._itemsCount());\n  },\n  _pagesCount: function () {\n    return Math.ceil(this._itemsCount() / this._itemsPerPage());\n  },\n  _itemsCount: function () {\n    return (this.option(\"items\") || []).length;\n  },\n  _offsetDirection: function () {\n    return this.option(\"rtlEnabled\") ? -1 : 1;\n  },\n  _initMarkup: function () {\n    this._renderWrapper();\n\n    this._renderItemsContainer();\n\n    this.$element().addClass(GALLERY_CLASS);\n    this.$element().toggleClass(GALLERY_LOOP_CLASS, this.option(\"loop\"));\n    this.callBase();\n    this.setAria({\n      role: \"listbox\",\n      label: \"gallery\"\n    });\n  },\n  _render: function () {\n    this._renderDragHandler();\n\n    this._renderContainerPosition();\n\n    this._renderItemSizes();\n\n    this._renderItemPositions();\n\n    this._renderNavButtons();\n\n    this._renderIndicator();\n\n    this._renderSelectedItem();\n\n    this._renderItemVisibility();\n\n    this._renderUserInteraction();\n\n    this._setupSlideShow();\n\n    this._reviseDimensions();\n\n    this.callBase();\n  },\n  _dimensionChanged: function () {\n    var selectedIndex = this.option(\"selectedIndex\") || 0;\n\n    this._stopItemAnimations();\n\n    this._clearCacheWidth();\n\n    this._cloneDuplicateItems();\n\n    this._renderItemSizes();\n\n    this._renderItemPositions();\n\n    this._renderIndicator();\n\n    this._renderContainerPosition(this._calculateIndexOffset(selectedIndex), true);\n\n    this._renderItemVisibility();\n  },\n  _renderDragHandler: function () {\n    var eventName = (0, _index.addNamespace)(\"dragstart\", this.NAME);\n\n    _events_engine.default.off(this.$element(), eventName);\n\n    _events_engine.default.on(this.$element(), eventName, \"img\", function () {\n      return false;\n    });\n  },\n  _renderWrapper: function () {\n    if (this._$wrapper) {\n      return;\n    }\n\n    this._$wrapper = (0, _renderer.default)(\"<div>\").addClass(GALLERY_WRAPPER_CLASS).appendTo(this.$element());\n  },\n  _renderItems: function (items) {\n    if (!(0, _window.hasWindow)()) {\n      var selectedIndex = this.option(\"selectedIndex\");\n      items = items.length > selectedIndex ? items.slice(selectedIndex, selectedIndex + 1) : items.slice(0, 1);\n    }\n\n    this.callBase(items);\n\n    this._loadNextPageIfNeeded();\n  },\n  _renderItemsContainer: function () {\n    if (this._$container) {\n      return;\n    }\n\n    this._$container = (0, _renderer.default)(\"<div>\").addClass(GALLERY_ITEM_CONTAINER_CLASS).appendTo(this._$wrapper);\n  },\n  _cloneDuplicateItems: function () {\n    if (!this.option(\"loop\")) {\n      return;\n    }\n\n    var items = this.option(\"items\") || [];\n    var itemsCount = items.length;\n    var lastItemIndex = itemsCount - 1;\n    var i;\n\n    if (!itemsCount) {\n      return;\n    }\n\n    this._getLoopedItems().remove();\n\n    var duplicateCount = Math.min(this._itemsPerPage(), itemsCount);\n\n    var $items = this._getRealItems();\n\n    var $container = this._itemContainer();\n\n    for (i = 0; i < duplicateCount; i++) {\n      this._cloneItemForDuplicate($items[i], $container);\n    }\n\n    for (i = 0; i < duplicateCount; i++) {\n      this._cloneItemForDuplicate($items[lastItemIndex - i], $container);\n    }\n  },\n  _cloneItemForDuplicate: function (item, $container) {\n    if (item) {\n      (0, _renderer.default)(item).clone(true).addClass(GALLERY_LOOP_ITEM_CLASS).css(\"margin\", 0).appendTo($container);\n    }\n  },\n  _getRealItems: function () {\n    var selector = \".\" + GALLERY_ITEM_CLASS + \":not(.\" + GALLERY_LOOP_ITEM_CLASS + \")\";\n    return this.$element().find(selector);\n  },\n  _getLoopedItems: function () {\n    return this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS);\n  },\n  _emptyMessageContainer: function () {\n    return this._$wrapper;\n  },\n  _renderItemSizes: function (startIndex) {\n    var $items = this._itemElements();\n\n    var itemWidth = this._actualItemWidth();\n\n    if (void 0 !== startIndex) {\n      $items = $items.slice(startIndex);\n    }\n\n    $items.each(function (index) {\n      (0, _renderer.default)($items[index]).outerWidth(100 * itemWidth + \"%\");\n    });\n  },\n  _renderItemPositions: function () {\n    var itemWidth = this._actualItemWidth();\n\n    var itemsCount = this._itemsCount();\n\n    var itemsPerPage = this._itemsPerPage();\n\n    var loopItemsCount = this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS).length;\n    var lastItemDuplicateIndex = itemsCount + loopItemsCount - 1;\n    var offsetRatio = this.option(\"wrapAround\") ? .5 : 0;\n\n    var freeSpace = this._itemFreeSpace();\n\n    var isGapBetweenImages = !!freeSpace;\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var selectedIndex = this.option(\"selectedIndex\");\n    var side = rtlEnabled ? \"Right\" : \"Left\";\n\n    this._itemElements().each(function (index) {\n      var realIndex = index;\n      var isLoopItem = (0, _renderer.default)(this).hasClass(GALLERY_LOOP_ITEM_CLASS);\n\n      if (index > itemsCount + itemsPerPage - 1) {\n        realIndex = lastItemDuplicateIndex - realIndex - itemsPerPage;\n      }\n\n      if (!isLoopItem && 0 !== realIndex) {\n        if (isGapBetweenImages) {\n          (0, _renderer.default)(this).css(\"margin\" + side, 100 * freeSpace + \"%\");\n        }\n\n        return;\n      }\n\n      var itemPosition = itemWidth * (realIndex + offsetRatio) + freeSpace * (realIndex + 1 - offsetRatio);\n      var property = isLoopItem ? side.toLowerCase() : \"margin\" + side;\n      (0, _renderer.default)(this).css(property, 100 * itemPosition + \"%\");\n    });\n\n    this._relocateItems(selectedIndex, selectedIndex, true);\n  },\n  _itemFreeSpace: function () {\n    var itemsPerPage = this._itemsPerPage();\n\n    if (this.option(\"wrapAround\")) {\n      itemsPerPage += 1;\n    }\n\n    return (1 - this._actualItemWidth() * itemsPerPage) / (itemsPerPage + 1);\n  },\n  _renderContainerPosition: function (offset, hideItems, animate) {\n    this._releaseInvisibleItems();\n\n    offset = offset || 0;\n    var that = this;\n\n    var itemWidth = this._actualItemWidth();\n\n    var targetIndex = offset;\n\n    var targetPosition = this._offsetDirection() * targetIndex * (itemWidth + this._itemFreeSpace());\n\n    var positionReady;\n\n    if ((0, _type.isDefined)(this._animationOverride)) {\n      animate = this._animationOverride;\n      delete this._animationOverride;\n    }\n\n    if (animate) {\n      that._startSwipe();\n\n      positionReady = that._animate(targetPosition).done(that._endSwipe.bind(that));\n    } else {\n      (0, _translator.move)(this._$container, {\n        left: targetPosition * this._elementWidth(),\n        top: 0\n      });\n      positionReady = new _deferred.Deferred().resolveWith(that);\n    }\n\n    positionReady.done(function () {\n      this._deferredAnimate && that._deferredAnimate.resolveWith(that);\n      hideItems && this._renderItemVisibility();\n    });\n    return positionReady.promise();\n  },\n  _startSwipe: function () {\n    this.$element().addClass(GALLERY_ACTIVE_CLASS);\n  },\n  _endSwipe: function () {\n    this.$element().removeClass(GALLERY_ACTIVE_CLASS);\n  },\n  _animate: function (targetPosition, extraConfig) {\n    var that = this;\n    var $container = this._$container;\n    var animationComplete = new _deferred.Deferred();\n\n    _fx.default.animate(this._$container, (0, _extend.extend)({\n      type: \"slide\",\n      to: {\n        left: targetPosition * this._elementWidth()\n      },\n      duration: that.option(\"animationDuration\"),\n      complete: function () {\n        if (that._needMoveContainerForward()) {\n          (0, _translator.move)($container, {\n            left: 0,\n            top: 0\n          });\n        }\n\n        if (that._needMoveContainerBack()) {\n          (0, _translator.move)($container, {\n            left: that._maxContainerOffset() * that._elementWidth(),\n            top: 0\n          });\n        }\n\n        animationComplete.resolveWith(that);\n      }\n    }, extraConfig || {}));\n\n    return animationComplete;\n  },\n  _needMoveContainerForward: function () {\n    var expectedPosition = this._$container.position().left * this._offsetDirection();\n\n    var actualPosition = -this._maxItemWidth() * this._elementWidth() * this._itemsCount();\n\n    return expectedPosition <= actualPosition + MAX_CALC_ERROR;\n  },\n  _needMoveContainerBack: function () {\n    var expectedPosition = this._$container.position().left * this._offsetDirection();\n\n    var actualPosition = this._actualItemWidth() * this._elementWidth();\n\n    return expectedPosition >= actualPosition - MAX_CALC_ERROR;\n  },\n  _maxContainerOffset: function () {\n    return -this._maxItemWidth() * (this._itemsCount() - this._itemsPerPage()) * this._offsetDirection();\n  },\n  _maxItemWidth: function () {\n    return this._actualItemWidth() + this._itemFreeSpace();\n  },\n  _reviseDimensions: function () {\n    var that = this;\n\n    var $firstItem = that._itemElements().first().find(\".dx-item-content\");\n\n    if (!$firstItem || $firstItem.is(\":hidden\")) {\n      return;\n    }\n\n    if (!that.option(\"height\")) {\n      that.option(\"height\", $firstItem.outerHeight());\n    }\n\n    if (!that.option(\"width\")) {\n      that.option(\"width\", $firstItem.outerWidth());\n    }\n\n    this._dimensionChanged();\n  },\n  _renderIndicator: function () {\n    this._cleanIndicators();\n\n    if (!this.option(\"showIndicator\")) {\n      return;\n    }\n\n    var indicator = this._$indicator = (0, _renderer.default)(\"<div>\").addClass(GALLERY_INDICATOR_CLASS).appendTo(this._$wrapper);\n    var isIndicatorEnabled = this.option(\"indicatorEnabled\");\n\n    for (var i = 0; i < this._pagesCount(); i++) {\n      var $indicatorItem = (0, _renderer.default)(\"<div>\").addClass(GALLERY_INDICATOR_ITEM_CLASS).appendTo(indicator);\n\n      if (isIndicatorEnabled) {\n        this._attachIndicatorClickHandler($indicatorItem, i);\n      }\n    }\n\n    this._renderSelectedPageIndicator();\n  },\n  _attachIndicatorClickHandler: function ($element, index) {\n    _events_engine.default.on($element, (0, _index.addNamespace)(_click.name, this.NAME), function (event) {\n      this._indicatorSelectHandler(event, index);\n    }.bind(this));\n  },\n  _detachIndicatorClickHandler: function ($element) {\n    _events_engine.default.off($element, (0, _index.addNamespace)(_click.name, this.NAME));\n  },\n  _toggleIndicatorInteraction: function (clickEnabled) {\n    var _this$_$indicator;\n\n    var $indicatorItems = (null === (_this$_$indicator = this._$indicator) || void 0 === _this$_$indicator ? void 0 : _this$_$indicator.find(GALLERY_INDICATOR_ITEM_SELECTOR)) || [];\n\n    if ($indicatorItems.length) {\n      $indicatorItems.each(function (index, element) {\n        clickEnabled ? this._attachIndicatorClickHandler((0, _renderer.default)(element), index) : this._detachIndicatorClickHandler((0, _renderer.default)(element));\n      }.bind(this));\n    }\n  },\n  _cleanIndicators: function () {\n    if (this._$indicator) {\n      this._$indicator.remove();\n    }\n  },\n  _renderSelectedItem: function () {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    this._itemElements().removeClass(GALLERY_ITEM_SELECTED_CLASS).eq(selectedIndex).addClass(GALLERY_ITEM_SELECTED_CLASS);\n  },\n  _renderItemVisibility: function () {\n    if (this.option(\"initialItemWidth\") || this.option(\"wrapAround\")) {\n      this._releaseInvisibleItems();\n\n      return;\n    }\n\n    this._itemElements().each(function (index, item) {\n      if (this.option(\"selectedIndex\") === index) {\n        (0, _renderer.default)(item).removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n      } else {\n        (0, _renderer.default)(item).addClass(GALLERY_INVISIBLE_ITEM_CLASS);\n      }\n    }.bind(this));\n\n    this._getLoopedItems().addClass(GALLERY_INVISIBLE_ITEM_CLASS);\n  },\n  _releaseInvisibleItems: function () {\n    this._itemElements().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n\n    this._getLoopedItems().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n  },\n  _renderSelectedPageIndicator: function () {\n    if (!this._$indicator) {\n      return;\n    }\n\n    var itemIndex = this.option(\"selectedIndex\");\n    var lastIndex = this._pagesCount() - 1;\n    var pageIndex = Math.ceil(itemIndex / this._itemsPerPage());\n    pageIndex = Math.min(lastIndex, pageIndex);\n\n    this._$indicator.find(GALLERY_INDICATOR_ITEM_SELECTOR).removeClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS).eq(pageIndex).addClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS);\n  },\n  _renderUserInteraction: function () {\n    var rootElement = this.$element();\n    var swipeEnabled = this.option(\"swipeEnabled\") && this._itemsCount() > 1;\n\n    this._createComponent(rootElement, _swipeable.default, {\n      disabled: this.option(\"disabled\") || !swipeEnabled,\n      onStart: this._swipeStartHandler.bind(this),\n      onUpdated: this._swipeUpdateHandler.bind(this),\n      onEnd: this._swipeEndHandler.bind(this),\n      itemSizeFunc: this._elementWidth.bind(this)\n    });\n  },\n  _indicatorSelectHandler: function (e, indicatorIndex) {\n    if (!this.option(\"indicatorEnabled\")) {\n      return;\n    }\n\n    var itemIndex = this._fitPaginatedIndex(indicatorIndex * this._itemsPerPage());\n\n    this._needLongMove = true;\n    this.option(\"selectedIndex\", itemIndex);\n\n    this._loadNextPageIfNeeded(itemIndex);\n  },\n  _renderNavButtons: function () {\n    var that = this;\n\n    if (!that.option(\"showNavButtons\")) {\n      that._cleanNavButtons();\n\n      return;\n    }\n\n    that._prevNavButton = (0, _renderer.default)(\"<div>\").appendTo(this._$wrapper);\n\n    that._createComponent(that._prevNavButton, GalleryNavButton, {\n      direction: \"prev\",\n      onClick: function () {\n        that._prevPage();\n      }\n    });\n\n    that._nextNavButton = (0, _renderer.default)(\"<div>\").appendTo(this._$wrapper);\n\n    that._createComponent(that._nextNavButton, GalleryNavButton, {\n      direction: \"next\",\n      onClick: function () {\n        that._nextPage();\n      }\n    });\n\n    this._renderNavButtonsVisibility();\n  },\n  _prevPage: function () {\n    var visiblePageSize = this._itemsPerPage();\n\n    var newSelectedIndex = this.option(\"selectedIndex\") - visiblePageSize;\n\n    if (newSelectedIndex === -visiblePageSize && visiblePageSize === this._itemsCount()) {\n      return this._relocateItems(newSelectedIndex, 0);\n    } else {\n      return this.goToItem(this._fitPaginatedIndex(newSelectedIndex));\n    }\n  },\n  _nextPage: function () {\n    var visiblePageSize = this._itemsPerPage();\n\n    var newSelectedIndex = this.option(\"selectedIndex\") + visiblePageSize;\n\n    if (newSelectedIndex === visiblePageSize && visiblePageSize === this._itemsCount()) {\n      return this._relocateItems(newSelectedIndex, 0);\n    } else {\n      return this.goToItem(this._fitPaginatedIndex(newSelectedIndex)).done(this._loadNextPageIfNeeded);\n    }\n  },\n  _loadNextPageIfNeeded: function (selectedIndex) {\n    selectedIndex = void 0 === selectedIndex ? this.option(\"selectedIndex\") : selectedIndex;\n\n    if (this._dataSource && this._dataSource.paginate() && this._shouldLoadNextPage(selectedIndex) && !this._isDataSourceLoading() && !this._isLastPage()) {\n      this._loadNextPage().done(function () {\n        this._renderIndicator();\n\n        this._cloneDuplicateItems();\n\n        this._renderItemPositions();\n\n        this._renderNavButtonsVisibility();\n\n        this._renderItemSizes(selectedIndex);\n      }.bind(this));\n    }\n  },\n  _shouldLoadNextPage: function (selectedIndex) {\n    var visiblePageSize = this._itemsPerPage();\n\n    return selectedIndex + 2 * visiblePageSize > this.option(\"items\").length;\n  },\n  _allowDynamicItemsAppend: function () {\n    return true;\n  },\n  _fitPaginatedIndex: function (itemIndex) {\n    var itemsPerPage = this._itemsPerPage();\n\n    var restItemsCount = itemIndex < 0 ? itemsPerPage + itemIndex : this._itemsCount() - itemIndex;\n\n    if (itemIndex > this._itemsCount() - 1) {\n      itemIndex = 0;\n      this._goToGhostItem = true;\n    } else {\n      if (restItemsCount < itemsPerPage && restItemsCount > 0) {\n        if (itemIndex > 0) {\n          itemIndex -= itemsPerPage - restItemsCount;\n        } else {\n          itemIndex += itemsPerPage - restItemsCount;\n        }\n      }\n    }\n\n    return itemIndex;\n  },\n  _cleanNavButtons: function () {\n    if (this._prevNavButton) {\n      this._prevNavButton.remove();\n\n      delete this._prevNavButton;\n    }\n\n    if (this._nextNavButton) {\n      this._nextNavButton.remove();\n\n      delete this._nextNavButton;\n    }\n  },\n  _renderNavButtonsVisibility: function () {\n    if (!this.option(\"showNavButtons\") || !this._prevNavButton || !this._nextNavButton) {\n      return;\n    }\n\n    var selectedIndex = this.option(\"selectedIndex\");\n    var loop = this.option(\"loop\");\n\n    var itemsCount = this._itemsCount();\n\n    this._prevNavButton.show();\n\n    this._nextNavButton.show();\n\n    if (0 === itemsCount) {\n      this._prevNavButton.hide();\n\n      this._nextNavButton.hide();\n    }\n\n    if (loop) {\n      return;\n    }\n\n    var nextHidden = selectedIndex === itemsCount - this._itemsPerPage();\n\n    var prevHidden = itemsCount < 2 || 0 === selectedIndex;\n\n    if (this._dataSource && this._dataSource.paginate()) {\n      nextHidden = nextHidden && this._isLastPage();\n    } else {\n      nextHidden = nextHidden || itemsCount < 2;\n    }\n\n    if (prevHidden) {\n      this._prevNavButton.hide();\n    }\n\n    if (nextHidden) {\n      this._nextNavButton.hide();\n    }\n  },\n  _setupSlideShow: function () {\n    var that = this;\n    var slideshowDelay = that.option(\"slideshowDelay\");\n    clearTimeout(that._slideshowTimer);\n\n    if (!slideshowDelay) {\n      return;\n    }\n\n    that._slideshowTimer = setTimeout(function () {\n      if (that._userInteraction) {\n        that._setupSlideShow();\n\n        return;\n      }\n\n      that.nextItem(true).done(that._setupSlideShow);\n    }, slideshowDelay);\n  },\n  _elementWidth: function () {\n    if (!this._cacheElementWidth) {\n      this._cacheElementWidth = this.$element().width();\n    }\n\n    return this._cacheElementWidth;\n  },\n  _clearCacheWidth: function () {\n    delete this._cacheElementWidth;\n  },\n  _swipeStartHandler: function (e) {\n    this._releaseInvisibleItems();\n\n    this._clearCacheWidth();\n\n    this._elementWidth();\n\n    var itemsCount = this._itemsCount();\n\n    if (!itemsCount) {\n      e.event.cancel = true;\n      return;\n    }\n\n    this._stopItemAnimations();\n\n    this._startSwipe();\n\n    this._userInteraction = true;\n\n    if (!this.option(\"loop\")) {\n      var selectedIndex = this.option(\"selectedIndex\");\n\n      var startOffset = itemsCount - selectedIndex - this._itemsPerPage();\n\n      var endOffset = selectedIndex;\n      var rtlEnabled = this.option(\"rtlEnabled\");\n      e.event.maxLeftOffset = rtlEnabled ? endOffset : startOffset;\n      e.event.maxRightOffset = rtlEnabled ? startOffset : endOffset;\n    }\n  },\n  _stopItemAnimations: function () {\n    _fx.default.stop(this._$container, true);\n  },\n  _swipeUpdateHandler: function (e) {\n    var wrapAroundRatio = this.option(\"wrapAround\") ? 1 : 0;\n    var offset = this._offsetDirection() * e.event.offset * (this._itemsPerPage() + wrapAroundRatio) - this.option(\"selectedIndex\");\n\n    if (offset < 0) {\n      this._loadNextPageIfNeeded(Math.ceil(Math.abs(offset)));\n    }\n\n    this._renderContainerPosition(offset);\n  },\n  _swipeEndHandler: function (e) {\n    var targetOffset = e.event.targetOffset * this._offsetDirection() * this._itemsPerPage();\n\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    var newIndex = this._fitIndex(selectedIndex - targetOffset);\n\n    var paginatedIndex = this._fitPaginatedIndex(newIndex);\n\n    if (Math.abs(targetOffset) < this._itemsPerPage()) {\n      this._relocateItems(selectedIndex);\n\n      return;\n    }\n\n    if (this._itemsPerPage() === this._itemsCount()) {\n      if (targetOffset > 0) {\n        this._relocateItems(-targetOffset);\n      } else {\n        this._relocateItems(0);\n      }\n\n      return;\n    }\n\n    this.option(\"selectedIndex\", paginatedIndex);\n  },\n  _setFocusOnSelect: function () {\n    this._userInteraction = true;\n    var selectedItem = this.itemElements().filter(\".\" + GALLERY_ITEM_SELECTED_CLASS);\n    this.option(\"focusedElement\", (0, _element.getPublicElement)(selectedItem));\n    this._userInteraction = false;\n  },\n  _flipIndex: function (index) {\n    var itemsCount = this._itemsCount();\n\n    index %= itemsCount;\n\n    if (index > (itemsCount + 1) / 2) {\n      index -= itemsCount;\n    }\n\n    if (index < -(itemsCount - 1) / 2) {\n      index += itemsCount;\n    }\n\n    return index;\n  },\n  _fitIndex: function (index) {\n    if (!this.option(\"loop\")) {\n      return index;\n    }\n\n    var itemsCount = this._itemsCount();\n\n    if (index >= itemsCount || index < 0) {\n      this._goToGhostItem = true;\n    }\n\n    if (index >= itemsCount) {\n      index = itemsCount - index;\n    }\n\n    index %= itemsCount;\n\n    if (index < 0) {\n      index += itemsCount;\n    }\n\n    return index;\n  },\n  _clean: function () {\n    this.callBase();\n\n    this._cleanIndicators();\n\n    this._cleanNavButtons();\n  },\n  _dispose: function () {\n    clearTimeout(this._slideshowTimer);\n    this.callBase();\n  },\n  _updateSelection: function (addedSelection, removedSelection) {\n    this._stopItemAnimations();\n\n    this._renderNavButtonsVisibility();\n\n    this._renderSelectedItem();\n\n    this._relocateItems(addedSelection[0], removedSelection[0]);\n\n    this._renderSelectedPageIndicator();\n  },\n  _relocateItems: function (newIndex, prevIndex, withoutAnimation) {\n    if (void 0 === prevIndex) {\n      prevIndex = newIndex;\n    }\n\n    var indexOffset = this._calculateIndexOffset(newIndex, prevIndex);\n\n    this._renderContainerPosition(indexOffset, true, this.option(\"animationEnabled\") && !withoutAnimation).done(function () {\n      this._setFocusOnSelect();\n\n      this._userInteraction = false;\n\n      this._setupSlideShow();\n    });\n  },\n  _focusInHandler: function () {\n    if (_fx.default.isAnimating(this._$container) || this._userInteraction) {\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function () {\n    if (_fx.default.isAnimating(this._$container) || this._userInteraction) {\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n  },\n  _selectFocusedItem: _common.noop,\n  _moveFocus: function () {\n    this._stopItemAnimations();\n\n    this.callBase.apply(this, arguments);\n    var index = this.itemElements().index((0, _renderer.default)(this.option(\"focusedElement\")));\n    this.goToItem(index, this.option(\"animationEnabled\"));\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      this._reviseDimensions();\n    }\n  },\n  _calculateIndexOffset: function (newIndex, lastIndex) {\n    if (void 0 === lastIndex) {\n      lastIndex = newIndex;\n    }\n\n    var indexOffset = lastIndex - newIndex;\n\n    if (this.option(\"loop\") && !this._needLongMove && this._goToGhostItem) {\n      if (this._isItemOnFirstPage(newIndex) && this._isItemOnLastPage(lastIndex)) {\n        indexOffset = -this._itemsPerPage();\n      } else {\n        if (this._isItemOnLastPage(newIndex) && this._isItemOnFirstPage(lastIndex)) {\n          indexOffset = this._itemsPerPage();\n        }\n      }\n\n      this._goToGhostItem = false;\n    }\n\n    this._needLongMove = false;\n    indexOffset -= lastIndex;\n    return indexOffset;\n  },\n  _isItemOnLastPage: function (itemIndex) {\n    return itemIndex >= this._itemsCount() - this._itemsPerPage();\n  },\n  _isItemOnFirstPage: function (itemIndex) {\n    return itemIndex <= this._itemsPerPage();\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"width\":\n      case \"initialItemWidth\":\n        this.callBase.apply(this, arguments);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"animationDuration\":\n        this._renderNavButtonsVisibility();\n\n        break;\n\n      case \"animationEnabled\":\n        break;\n\n      case \"loop\":\n        this.$element().toggleClass(GALLERY_LOOP_CLASS, args.value);\n        this.option(\"loopItemFocus\", args.value);\n\n        if ((0, _window.hasWindow)()) {\n          this._cloneDuplicateItems();\n\n          this._renderItemPositions();\n\n          this._renderNavButtonsVisibility();\n        }\n\n        break;\n\n      case \"showIndicator\":\n        this._renderIndicator();\n\n        break;\n\n      case \"showNavButtons\":\n        this._renderNavButtons();\n\n        break;\n\n      case \"slideshowDelay\":\n        this._setupSlideShow();\n\n        break;\n\n      case \"wrapAround\":\n      case \"stretchImages\":\n        if ((0, _window.hasWindow)()) {\n          this._renderItemSizes();\n\n          this._renderItemPositions();\n\n          this._renderItemVisibility();\n        }\n\n        break;\n\n      case \"swipeEnabled\":\n        this._renderUserInteraction();\n\n        break;\n\n      case \"indicatorEnabled\":\n        this._toggleIndicatorInteraction(args.value);\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  goToItem: function (itemIndex, animation) {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    var itemsCount = this._itemsCount();\n\n    if (void 0 !== animation) {\n      this._animationOverride = animation;\n    }\n\n    itemIndex = this._fitIndex(itemIndex);\n    this._deferredAnimate = new _deferred.Deferred();\n\n    if (itemIndex > itemsCount - 1 || itemIndex < 0 || selectedIndex === itemIndex) {\n      return this._deferredAnimate.resolveWith(this).promise();\n    }\n\n    this.option(\"selectedIndex\", itemIndex);\n    return this._deferredAnimate.promise();\n  },\n  prevItem: function (animation) {\n    return this.goToItem(this.option(\"selectedIndex\") - 1, animation);\n  },\n  nextItem: function (animation) {\n    return this.goToItem(this.option(\"selectedIndex\") + 1, animation);\n  }\n});\n\n(0, _component_registrator.default)(\"dxGallery\", Gallery);\nvar _default = Gallery;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/gallery.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_component_registrator","_common","_type","_window","_extend","_element","_fx","_click","_translator","_devices","_ui","_index","_uiCollection_widget","_swipeable","_bindable_template","_deferred","obj","__esModule","GALLERY_CLASS","GALLERY_WRAPPER_CLASS","GALLERY_LOOP_CLASS","GALLERY_ITEM_CONTAINER_CLASS","GALLERY_ACTIVE_CLASS","GALLERY_ITEM_CLASS","GALLERY_INVISIBLE_ITEM_CLASS","GALLERY_LOOP_ITEM_CLASS","GALLERY_ITEM_SELECTOR","GALLERY_ITEM_SELECTED_CLASS","GALLERY_INDICATOR_CLASS","GALLERY_INDICATOR_ITEM_CLASS","GALLERY_INDICATOR_ITEM_SELECTOR","GALLERY_INDICATOR_ITEM_SELECTED_CLASS","GALLERY_IMAGE_CLASS","GALLERY_ITEM_DATA_KEY","MAX_CALC_ERROR","GalleryNavButton","inherit","_supportedKeys","extend","callBase","pageUp","noop","pageDown","_getDefaultOptions","direction","onClick","hoverStateEnabled","activeStateEnabled","_render","that","$element","eventName","addNamespace","name","NAME","addClass","option","off","on","e","_createActionByOption","event","_optionChanged","args","_invalidate","Gallery","_activeStateUnit","animationDuration","animationEnabled","loop","swipeEnabled","indicatorEnabled","showIndicator","selectedIndex","slideshowDelay","showNavButtons","wrapAround","initialItemWidth","stretchImages","_itemAttributes","role","loopItemFocus","selectOnFocus","selectionMode","selectionRequired","selectionByClick","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_init","_initTemplates","_templateManager","addDefaultTemplates","item","BindableTemplate","$container","data","$img","isPlainObject","_prepareDefaultItemTemplate","attr","src","imageSrc","alt","imageAlt","appendTo","String","bind","_dataSourceOptions","paginate","_itemContainer","_$container","_itemClass","_itemDataKey","_actualItemWidth","isWrapAround","itemPerPage","_itemsPerPage","_itemPercentWidth","percentWidth","elementWidth","outerWidth","itemsPerPage","hasWindow","Math","floor","min","_itemsCount","_pagesCount","ceil","length","_offsetDirection","_initMarkup","_renderWrapper","_renderItemsContainer","toggleClass","setAria","label","_renderDragHandler","_renderContainerPosition","_renderItemSizes","_renderItemPositions","_renderNavButtons","_renderIndicator","_renderSelectedItem","_renderItemVisibility","_renderUserInteraction","_setupSlideShow","_reviseDimensions","_dimensionChanged","_stopItemAnimations","_clearCacheWidth","_cloneDuplicateItems","_calculateIndexOffset","_$wrapper","_renderItems","items","slice","_loadNextPageIfNeeded","itemsCount","lastItemIndex","i","_getLoopedItems","remove","duplicateCount","$items","_getRealItems","_cloneItemForDuplicate","clone","css","selector","find","_emptyMessageContainer","startIndex","_itemElements","itemWidth","each","index","loopItemsCount","lastItemDuplicateIndex","offsetRatio","freeSpace","_itemFreeSpace","isGapBetweenImages","rtlEnabled","side","realIndex","isLoopItem","hasClass","itemPosition","property","toLowerCase","_relocateItems","offset","hideItems","animate","_releaseInvisibleItems","targetIndex","targetPosition","positionReady","isDefined","_animationOverride","_startSwipe","_animate","done","_endSwipe","move","left","_elementWidth","top","Deferred","resolveWith","_deferredAnimate","promise","removeClass","extraConfig","animationComplete","type","to","duration","complete","_needMoveContainerForward","_needMoveContainerBack","_maxContainerOffset","expectedPosition","position","actualPosition","_maxItemWidth","$firstItem","first","is","outerHeight","_cleanIndicators","indicator","_$indicator","isIndicatorEnabled","$indicatorItem","_attachIndicatorClickHandler","_renderSelectedPageIndicator","_indicatorSelectHandler","_detachIndicatorClickHandler","_toggleIndicatorInteraction","clickEnabled","_this$_$indicator","$indicatorItems","element","eq","itemIndex","lastIndex","pageIndex","rootElement","_createComponent","disabled","onStart","_swipeStartHandler","onUpdated","_swipeUpdateHandler","onEnd","_swipeEndHandler","itemSizeFunc","indicatorIndex","_fitPaginatedIndex","_needLongMove","_cleanNavButtons","_prevNavButton","_prevPage","_nextNavButton","_nextPage","_renderNavButtonsVisibility","visiblePageSize","newSelectedIndex","goToItem","_dataSource","_shouldLoadNextPage","_isDataSourceLoading","_isLastPage","_loadNextPage","_allowDynamicItemsAppend","restItemsCount","_goToGhostItem","show","hide","nextHidden","prevHidden","clearTimeout","_slideshowTimer","setTimeout","_userInteraction","nextItem","_cacheElementWidth","width","cancel","startOffset","endOffset","maxLeftOffset","maxRightOffset","stop","wrapAroundRatio","abs","targetOffset","newIndex","_fitIndex","paginatedIndex","_setFocusOnSelect","selectedItem","itemElements","filter","getPublicElement","_flipIndex","_clean","_dispose","_updateSelection","addedSelection","removedSelection","prevIndex","withoutAnimation","indexOffset","_focusInHandler","isAnimating","apply","arguments","_focusOutHandler","_selectFocusedItem","_moveFocus","_visibilityChanged","visible","_isItemOnFirstPage","_isItemOnLastPage","value","animation","prevItem","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/gallery.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _common = require(\"../core/utils/common\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _window = require(\"../core/utils/window\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _element = require(\"../core/element\");\r\nvar _fx = _interopRequireDefault(require(\"../animation/fx\"));\r\nvar _click = require(\"../events/click\");\r\nvar _translator = require(\"../animation/translator\");\r\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\r\nvar _ui = _interopRequireDefault(require(\"./widget/ui.widget\"));\r\nvar _index = require(\"../events/utils/index\");\r\nvar _uiCollection_widget = _interopRequireDefault(require(\"./collection/ui.collection_widget.edit\"));\r\nvar _swipeable = _interopRequireDefault(require(\"../events/gesture/swipeable\"));\r\nvar _bindable_template = require(\"../core/templates/bindable_template\");\r\nvar _deferred = require(\"../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar GALLERY_CLASS = \"dx-gallery\";\r\nvar GALLERY_WRAPPER_CLASS = GALLERY_CLASS + \"-wrapper\";\r\nvar GALLERY_LOOP_CLASS = \"dx-gallery-loop\";\r\nvar GALLERY_ITEM_CONTAINER_CLASS = GALLERY_CLASS + \"-container\";\r\nvar GALLERY_ACTIVE_CLASS = GALLERY_CLASS + \"-active\";\r\nvar GALLERY_ITEM_CLASS = GALLERY_CLASS + \"-item\";\r\nvar GALLERY_INVISIBLE_ITEM_CLASS = GALLERY_CLASS + \"-item-invisible\";\r\nvar GALLERY_LOOP_ITEM_CLASS = GALLERY_ITEM_CLASS + \"-loop\";\r\nvar GALLERY_ITEM_SELECTOR = \".\" + GALLERY_ITEM_CLASS;\r\nvar GALLERY_ITEM_SELECTED_CLASS = GALLERY_ITEM_CLASS + \"-selected\";\r\nvar GALLERY_INDICATOR_CLASS = GALLERY_CLASS + \"-indicator\";\r\nvar GALLERY_INDICATOR_ITEM_CLASS = GALLERY_INDICATOR_CLASS + \"-item\";\r\nvar GALLERY_INDICATOR_ITEM_SELECTOR = \".\" + GALLERY_INDICATOR_ITEM_CLASS;\r\nvar GALLERY_INDICATOR_ITEM_SELECTED_CLASS = GALLERY_INDICATOR_ITEM_CLASS + \"-selected\";\r\nvar GALLERY_IMAGE_CLASS = \"dx-gallery-item-image\";\r\nvar GALLERY_ITEM_DATA_KEY = \"dxGalleryItemData\";\r\nvar MAX_CALC_ERROR = 1;\r\nvar GalleryNavButton = _ui.default.inherit({\r\n    _supportedKeys: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            pageUp: _common.noop,\r\n            pageDown: _common.noop\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            direction: \"next\",\r\n            onClick: null,\r\n            hoverStateEnabled: true,\r\n            activeStateEnabled: true\r\n        })\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var eventName = (0, _index.addNamespace)(_click.name, this.NAME);\r\n        $element.addClass(GALLERY_CLASS + \"-nav-button-\" + this.option(\"direction\"));\r\n        _events_engine.default.off($element, eventName);\r\n        _events_engine.default.on($element, eventName, function(e) {\r\n            that._createActionByOption(\"onClick\")({\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"onClick\":\r\n            case \"direction\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nvar Gallery = _uiCollection_widget.default.inherit({\r\n    _activeStateUnit: GALLERY_ITEM_SELECTOR,\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            animationDuration: 400,\r\n            animationEnabled: true,\r\n            loop: false,\r\n            swipeEnabled: true,\r\n            indicatorEnabled: true,\r\n            showIndicator: true,\r\n            selectedIndex: 0,\r\n            slideshowDelay: 0,\r\n            showNavButtons: false,\r\n            wrapAround: false,\r\n            initialItemWidth: void 0,\r\n            stretchImages: false,\r\n            _itemAttributes: {\r\n                role: \"option\"\r\n            },\r\n            loopItemFocus: false,\r\n            selectOnFocus: true,\r\n            selectionMode: \"single\",\r\n            selectionRequired: true,\r\n            selectionByClick: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.option(\"loopItemFocus\", this.option(\"loop\"))\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new _bindable_template.BindableTemplate(function($container, data) {\r\n                var $img = (0, _renderer.default)(\"<img>\").addClass(GALLERY_IMAGE_CLASS);\r\n                if ((0, _type.isPlainObject)(data)) {\r\n                    this._prepareDefaultItemTemplate(data, $container);\r\n                    $img.attr({\r\n                        src: data.imageSrc,\r\n                        alt: data.imageAlt\r\n                    }).appendTo($container)\r\n                } else {\r\n                    $img.attr(\"src\", String(data)).appendTo($container)\r\n                }\r\n            }.bind(this), [\"imageSrc\", \"imageAlt\", \"text\", \"html\"], this.option(\"integrationOptions.watchMethod\"))\r\n        })\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _itemContainer: function() {\r\n        return this._$container\r\n    },\r\n    _itemClass: function() {\r\n        return GALLERY_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return GALLERY_ITEM_DATA_KEY\r\n    },\r\n    _actualItemWidth: function() {\r\n        var isWrapAround = this.option(\"wrapAround\");\r\n        if (this.option(\"stretchImages\")) {\r\n            var itemPerPage = isWrapAround ? this._itemsPerPage() + 1 : this._itemsPerPage();\r\n            return 1 / itemPerPage\r\n        }\r\n        if (isWrapAround) {\r\n            return this._itemPercentWidth() * this._itemsPerPage() / (this._itemsPerPage() + 1)\r\n        }\r\n        return this._itemPercentWidth()\r\n    },\r\n    _itemPercentWidth: function() {\r\n        var percentWidth;\r\n        var elementWidth = this.$element().outerWidth();\r\n        var initialItemWidth = this.option(\"initialItemWidth\");\r\n        if (initialItemWidth && initialItemWidth <= elementWidth) {\r\n            percentWidth = initialItemWidth / elementWidth\r\n        } else {\r\n            percentWidth = 1\r\n        }\r\n        return percentWidth\r\n    },\r\n    _itemsPerPage: function() {\r\n        var itemsPerPage = (0, _window.hasWindow)() ? Math.floor(1 / this._itemPercentWidth()) : 1;\r\n        return Math.min(itemsPerPage, this._itemsCount())\r\n    },\r\n    _pagesCount: function() {\r\n        return Math.ceil(this._itemsCount() / this._itemsPerPage())\r\n    },\r\n    _itemsCount: function() {\r\n        return (this.option(\"items\") || []).length\r\n    },\r\n    _offsetDirection: function() {\r\n        return this.option(\"rtlEnabled\") ? -1 : 1\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderWrapper();\r\n        this._renderItemsContainer();\r\n        this.$element().addClass(GALLERY_CLASS);\r\n        this.$element().toggleClass(GALLERY_LOOP_CLASS, this.option(\"loop\"));\r\n        this.callBase();\r\n        this.setAria({\r\n            role: \"listbox\",\r\n            label: \"gallery\"\r\n        })\r\n    },\r\n    _render: function() {\r\n        this._renderDragHandler();\r\n        this._renderContainerPosition();\r\n        this._renderItemSizes();\r\n        this._renderItemPositions();\r\n        this._renderNavButtons();\r\n        this._renderIndicator();\r\n        this._renderSelectedItem();\r\n        this._renderItemVisibility();\r\n        this._renderUserInteraction();\r\n        this._setupSlideShow();\r\n        this._reviseDimensions();\r\n        this.callBase()\r\n    },\r\n    _dimensionChanged: function() {\r\n        var selectedIndex = this.option(\"selectedIndex\") || 0;\r\n        this._stopItemAnimations();\r\n        this._clearCacheWidth();\r\n        this._cloneDuplicateItems();\r\n        this._renderItemSizes();\r\n        this._renderItemPositions();\r\n        this._renderIndicator();\r\n        this._renderContainerPosition(this._calculateIndexOffset(selectedIndex), true);\r\n        this._renderItemVisibility()\r\n    },\r\n    _renderDragHandler: function() {\r\n        var eventName = (0, _index.addNamespace)(\"dragstart\", this.NAME);\r\n        _events_engine.default.off(this.$element(), eventName);\r\n        _events_engine.default.on(this.$element(), eventName, \"img\", function() {\r\n            return false\r\n        })\r\n    },\r\n    _renderWrapper: function() {\r\n        if (this._$wrapper) {\r\n            return\r\n        }\r\n        this._$wrapper = (0, _renderer.default)(\"<div>\").addClass(GALLERY_WRAPPER_CLASS).appendTo(this.$element())\r\n    },\r\n    _renderItems: function(items) {\r\n        if (!(0, _window.hasWindow)()) {\r\n            var selectedIndex = this.option(\"selectedIndex\");\r\n            items = items.length > selectedIndex ? items.slice(selectedIndex, selectedIndex + 1) : items.slice(0, 1)\r\n        }\r\n        this.callBase(items);\r\n        this._loadNextPageIfNeeded()\r\n    },\r\n    _renderItemsContainer: function() {\r\n        if (this._$container) {\r\n            return\r\n        }\r\n        this._$container = (0, _renderer.default)(\"<div>\").addClass(GALLERY_ITEM_CONTAINER_CLASS).appendTo(this._$wrapper)\r\n    },\r\n    _cloneDuplicateItems: function() {\r\n        if (!this.option(\"loop\")) {\r\n            return\r\n        }\r\n        var items = this.option(\"items\") || [];\r\n        var itemsCount = items.length;\r\n        var lastItemIndex = itemsCount - 1;\r\n        var i;\r\n        if (!itemsCount) {\r\n            return\r\n        }\r\n        this._getLoopedItems().remove();\r\n        var duplicateCount = Math.min(this._itemsPerPage(), itemsCount);\r\n        var $items = this._getRealItems();\r\n        var $container = this._itemContainer();\r\n        for (i = 0; i < duplicateCount; i++) {\r\n            this._cloneItemForDuplicate($items[i], $container)\r\n        }\r\n        for (i = 0; i < duplicateCount; i++) {\r\n            this._cloneItemForDuplicate($items[lastItemIndex - i], $container)\r\n        }\r\n    },\r\n    _cloneItemForDuplicate: function(item, $container) {\r\n        if (item) {\r\n            (0, _renderer.default)(item).clone(true).addClass(GALLERY_LOOP_ITEM_CLASS).css(\"margin\", 0).appendTo($container)\r\n        }\r\n    },\r\n    _getRealItems: function() {\r\n        var selector = \".\" + GALLERY_ITEM_CLASS + \":not(.\" + GALLERY_LOOP_ITEM_CLASS + \")\";\r\n        return this.$element().find(selector)\r\n    },\r\n    _getLoopedItems: function() {\r\n        return this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS)\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._$wrapper\r\n    },\r\n    _renderItemSizes: function(startIndex) {\r\n        var $items = this._itemElements();\r\n        var itemWidth = this._actualItemWidth();\r\n        if (void 0 !== startIndex) {\r\n            $items = $items.slice(startIndex)\r\n        }\r\n        $items.each(function(index) {\r\n            (0, _renderer.default)($items[index]).outerWidth(100 * itemWidth + \"%\")\r\n        })\r\n    },\r\n    _renderItemPositions: function() {\r\n        var itemWidth = this._actualItemWidth();\r\n        var itemsCount = this._itemsCount();\r\n        var itemsPerPage = this._itemsPerPage();\r\n        var loopItemsCount = this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS).length;\r\n        var lastItemDuplicateIndex = itemsCount + loopItemsCount - 1;\r\n        var offsetRatio = this.option(\"wrapAround\") ? .5 : 0;\r\n        var freeSpace = this._itemFreeSpace();\r\n        var isGapBetweenImages = !!freeSpace;\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var side = rtlEnabled ? \"Right\" : \"Left\";\r\n        this._itemElements().each(function(index) {\r\n            var realIndex = index;\r\n            var isLoopItem = (0, _renderer.default)(this).hasClass(GALLERY_LOOP_ITEM_CLASS);\r\n            if (index > itemsCount + itemsPerPage - 1) {\r\n                realIndex = lastItemDuplicateIndex - realIndex - itemsPerPage\r\n            }\r\n            if (!isLoopItem && 0 !== realIndex) {\r\n                if (isGapBetweenImages) {\r\n                    (0, _renderer.default)(this).css(\"margin\" + side, 100 * freeSpace + \"%\")\r\n                }\r\n                return\r\n            }\r\n            var itemPosition = itemWidth * (realIndex + offsetRatio) + freeSpace * (realIndex + 1 - offsetRatio);\r\n            var property = isLoopItem ? side.toLowerCase() : \"margin\" + side;\r\n            (0, _renderer.default)(this).css(property, 100 * itemPosition + \"%\")\r\n        });\r\n        this._relocateItems(selectedIndex, selectedIndex, true)\r\n    },\r\n    _itemFreeSpace: function() {\r\n        var itemsPerPage = this._itemsPerPage();\r\n        if (this.option(\"wrapAround\")) {\r\n            itemsPerPage += 1\r\n        }\r\n        return (1 - this._actualItemWidth() * itemsPerPage) / (itemsPerPage + 1)\r\n    },\r\n    _renderContainerPosition: function(offset, hideItems, animate) {\r\n        this._releaseInvisibleItems();\r\n        offset = offset || 0;\r\n        var that = this;\r\n        var itemWidth = this._actualItemWidth();\r\n        var targetIndex = offset;\r\n        var targetPosition = this._offsetDirection() * targetIndex * (itemWidth + this._itemFreeSpace());\r\n        var positionReady;\r\n        if ((0, _type.isDefined)(this._animationOverride)) {\r\n            animate = this._animationOverride;\r\n            delete this._animationOverride\r\n        }\r\n        if (animate) {\r\n            that._startSwipe();\r\n            positionReady = that._animate(targetPosition).done(that._endSwipe.bind(that))\r\n        } else {\r\n            (0, _translator.move)(this._$container, {\r\n                left: targetPosition * this._elementWidth(),\r\n                top: 0\r\n            });\r\n            positionReady = (new _deferred.Deferred).resolveWith(that)\r\n        }\r\n        positionReady.done(function() {\r\n            this._deferredAnimate && that._deferredAnimate.resolveWith(that);\r\n            hideItems && this._renderItemVisibility()\r\n        });\r\n        return positionReady.promise()\r\n    },\r\n    _startSwipe: function() {\r\n        this.$element().addClass(GALLERY_ACTIVE_CLASS)\r\n    },\r\n    _endSwipe: function() {\r\n        this.$element().removeClass(GALLERY_ACTIVE_CLASS)\r\n    },\r\n    _animate: function(targetPosition, extraConfig) {\r\n        var that = this;\r\n        var $container = this._$container;\r\n        var animationComplete = new _deferred.Deferred;\r\n        _fx.default.animate(this._$container, (0, _extend.extend)({\r\n            type: \"slide\",\r\n            to: {\r\n                left: targetPosition * this._elementWidth()\r\n            },\r\n            duration: that.option(\"animationDuration\"),\r\n            complete: function() {\r\n                if (that._needMoveContainerForward()) {\r\n                    (0, _translator.move)($container, {\r\n                        left: 0,\r\n                        top: 0\r\n                    })\r\n                }\r\n                if (that._needMoveContainerBack()) {\r\n                    (0, _translator.move)($container, {\r\n                        left: that._maxContainerOffset() * that._elementWidth(),\r\n                        top: 0\r\n                    })\r\n                }\r\n                animationComplete.resolveWith(that)\r\n            }\r\n        }, extraConfig || {}));\r\n        return animationComplete\r\n    },\r\n    _needMoveContainerForward: function() {\r\n        var expectedPosition = this._$container.position().left * this._offsetDirection();\r\n        var actualPosition = -this._maxItemWidth() * this._elementWidth() * this._itemsCount();\r\n        return expectedPosition <= actualPosition + MAX_CALC_ERROR\r\n    },\r\n    _needMoveContainerBack: function() {\r\n        var expectedPosition = this._$container.position().left * this._offsetDirection();\r\n        var actualPosition = this._actualItemWidth() * this._elementWidth();\r\n        return expectedPosition >= actualPosition - MAX_CALC_ERROR\r\n    },\r\n    _maxContainerOffset: function() {\r\n        return -this._maxItemWidth() * (this._itemsCount() - this._itemsPerPage()) * this._offsetDirection()\r\n    },\r\n    _maxItemWidth: function() {\r\n        return this._actualItemWidth() + this._itemFreeSpace()\r\n    },\r\n    _reviseDimensions: function() {\r\n        var that = this;\r\n        var $firstItem = that._itemElements().first().find(\".dx-item-content\");\r\n        if (!$firstItem || $firstItem.is(\":hidden\")) {\r\n            return\r\n        }\r\n        if (!that.option(\"height\")) {\r\n            that.option(\"height\", $firstItem.outerHeight())\r\n        }\r\n        if (!that.option(\"width\")) {\r\n            that.option(\"width\", $firstItem.outerWidth())\r\n        }\r\n        this._dimensionChanged()\r\n    },\r\n    _renderIndicator: function() {\r\n        this._cleanIndicators();\r\n        if (!this.option(\"showIndicator\")) {\r\n            return\r\n        }\r\n        var indicator = this._$indicator = (0, _renderer.default)(\"<div>\").addClass(GALLERY_INDICATOR_CLASS).appendTo(this._$wrapper);\r\n        var isIndicatorEnabled = this.option(\"indicatorEnabled\");\r\n        for (var i = 0; i < this._pagesCount(); i++) {\r\n            var $indicatorItem = (0, _renderer.default)(\"<div>\").addClass(GALLERY_INDICATOR_ITEM_CLASS).appendTo(indicator);\r\n            if (isIndicatorEnabled) {\r\n                this._attachIndicatorClickHandler($indicatorItem, i)\r\n            }\r\n        }\r\n        this._renderSelectedPageIndicator()\r\n    },\r\n    _attachIndicatorClickHandler: function($element, index) {\r\n        _events_engine.default.on($element, (0, _index.addNamespace)(_click.name, this.NAME), function(event) {\r\n            this._indicatorSelectHandler(event, index)\r\n        }.bind(this))\r\n    },\r\n    _detachIndicatorClickHandler: function($element) {\r\n        _events_engine.default.off($element, (0, _index.addNamespace)(_click.name, this.NAME))\r\n    },\r\n    _toggleIndicatorInteraction: function(clickEnabled) {\r\n        var _this$_$indicator;\r\n        var $indicatorItems = (null === (_this$_$indicator = this._$indicator) || void 0 === _this$_$indicator ? void 0 : _this$_$indicator.find(GALLERY_INDICATOR_ITEM_SELECTOR)) || [];\r\n        if ($indicatorItems.length) {\r\n            $indicatorItems.each(function(index, element) {\r\n                clickEnabled ? this._attachIndicatorClickHandler((0, _renderer.default)(element), index) : this._detachIndicatorClickHandler((0, _renderer.default)(element))\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _cleanIndicators: function() {\r\n        if (this._$indicator) {\r\n            this._$indicator.remove()\r\n        }\r\n    },\r\n    _renderSelectedItem: function() {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        this._itemElements().removeClass(GALLERY_ITEM_SELECTED_CLASS).eq(selectedIndex).addClass(GALLERY_ITEM_SELECTED_CLASS)\r\n    },\r\n    _renderItemVisibility: function() {\r\n        if (this.option(\"initialItemWidth\") || this.option(\"wrapAround\")) {\r\n            this._releaseInvisibleItems();\r\n            return\r\n        }\r\n        this._itemElements().each(function(index, item) {\r\n            if (this.option(\"selectedIndex\") === index) {\r\n                (0, _renderer.default)(item).removeClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n            } else {\r\n                (0, _renderer.default)(item).addClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n            }\r\n        }.bind(this));\r\n        this._getLoopedItems().addClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n    },\r\n    _releaseInvisibleItems: function() {\r\n        this._itemElements().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\r\n        this._getLoopedItems().removeClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n    },\r\n    _renderSelectedPageIndicator: function() {\r\n        if (!this._$indicator) {\r\n            return\r\n        }\r\n        var itemIndex = this.option(\"selectedIndex\");\r\n        var lastIndex = this._pagesCount() - 1;\r\n        var pageIndex = Math.ceil(itemIndex / this._itemsPerPage());\r\n        pageIndex = Math.min(lastIndex, pageIndex);\r\n        this._$indicator.find(GALLERY_INDICATOR_ITEM_SELECTOR).removeClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS).eq(pageIndex).addClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS)\r\n    },\r\n    _renderUserInteraction: function() {\r\n        var rootElement = this.$element();\r\n        var swipeEnabled = this.option(\"swipeEnabled\") && this._itemsCount() > 1;\r\n        this._createComponent(rootElement, _swipeable.default, {\r\n            disabled: this.option(\"disabled\") || !swipeEnabled,\r\n            onStart: this._swipeStartHandler.bind(this),\r\n            onUpdated: this._swipeUpdateHandler.bind(this),\r\n            onEnd: this._swipeEndHandler.bind(this),\r\n            itemSizeFunc: this._elementWidth.bind(this)\r\n        })\r\n    },\r\n    _indicatorSelectHandler: function(e, indicatorIndex) {\r\n        if (!this.option(\"indicatorEnabled\")) {\r\n            return\r\n        }\r\n        var itemIndex = this._fitPaginatedIndex(indicatorIndex * this._itemsPerPage());\r\n        this._needLongMove = true;\r\n        this.option(\"selectedIndex\", itemIndex);\r\n        this._loadNextPageIfNeeded(itemIndex)\r\n    },\r\n    _renderNavButtons: function() {\r\n        var that = this;\r\n        if (!that.option(\"showNavButtons\")) {\r\n            that._cleanNavButtons();\r\n            return\r\n        }\r\n        that._prevNavButton = (0, _renderer.default)(\"<div>\").appendTo(this._$wrapper);\r\n        that._createComponent(that._prevNavButton, GalleryNavButton, {\r\n            direction: \"prev\",\r\n            onClick: function() {\r\n                that._prevPage()\r\n            }\r\n        });\r\n        that._nextNavButton = (0, _renderer.default)(\"<div>\").appendTo(this._$wrapper);\r\n        that._createComponent(that._nextNavButton, GalleryNavButton, {\r\n            direction: \"next\",\r\n            onClick: function() {\r\n                that._nextPage()\r\n            }\r\n        });\r\n        this._renderNavButtonsVisibility()\r\n    },\r\n    _prevPage: function() {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        var newSelectedIndex = this.option(\"selectedIndex\") - visiblePageSize;\r\n        if (newSelectedIndex === -visiblePageSize && visiblePageSize === this._itemsCount()) {\r\n            return this._relocateItems(newSelectedIndex, 0)\r\n        } else {\r\n            return this.goToItem(this._fitPaginatedIndex(newSelectedIndex))\r\n        }\r\n    },\r\n    _nextPage: function() {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        var newSelectedIndex = this.option(\"selectedIndex\") + visiblePageSize;\r\n        if (newSelectedIndex === visiblePageSize && visiblePageSize === this._itemsCount()) {\r\n            return this._relocateItems(newSelectedIndex, 0)\r\n        } else {\r\n            return this.goToItem(this._fitPaginatedIndex(newSelectedIndex)).done(this._loadNextPageIfNeeded)\r\n        }\r\n    },\r\n    _loadNextPageIfNeeded: function(selectedIndex) {\r\n        selectedIndex = void 0 === selectedIndex ? this.option(\"selectedIndex\") : selectedIndex;\r\n        if (this._dataSource && this._dataSource.paginate() && this._shouldLoadNextPage(selectedIndex) && !this._isDataSourceLoading() && !this._isLastPage()) {\r\n            this._loadNextPage().done(function() {\r\n                this._renderIndicator();\r\n                this._cloneDuplicateItems();\r\n                this._renderItemPositions();\r\n                this._renderNavButtonsVisibility();\r\n                this._renderItemSizes(selectedIndex)\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _shouldLoadNextPage: function(selectedIndex) {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        return selectedIndex + 2 * visiblePageSize > this.option(\"items\").length\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return true\r\n    },\r\n    _fitPaginatedIndex: function(itemIndex) {\r\n        var itemsPerPage = this._itemsPerPage();\r\n        var restItemsCount = itemIndex < 0 ? itemsPerPage + itemIndex : this._itemsCount() - itemIndex;\r\n        if (itemIndex > this._itemsCount() - 1) {\r\n            itemIndex = 0;\r\n            this._goToGhostItem = true\r\n        } else {\r\n            if (restItemsCount < itemsPerPage && restItemsCount > 0) {\r\n                if (itemIndex > 0) {\r\n                    itemIndex -= itemsPerPage - restItemsCount\r\n                } else {\r\n                    itemIndex += itemsPerPage - restItemsCount\r\n                }\r\n            }\r\n        }\r\n        return itemIndex\r\n    },\r\n    _cleanNavButtons: function() {\r\n        if (this._prevNavButton) {\r\n            this._prevNavButton.remove();\r\n            delete this._prevNavButton\r\n        }\r\n        if (this._nextNavButton) {\r\n            this._nextNavButton.remove();\r\n            delete this._nextNavButton\r\n        }\r\n    },\r\n    _renderNavButtonsVisibility: function() {\r\n        if (!this.option(\"showNavButtons\") || !this._prevNavButton || !this._nextNavButton) {\r\n            return\r\n        }\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var loop = this.option(\"loop\");\r\n        var itemsCount = this._itemsCount();\r\n        this._prevNavButton.show();\r\n        this._nextNavButton.show();\r\n        if (0 === itemsCount) {\r\n            this._prevNavButton.hide();\r\n            this._nextNavButton.hide()\r\n        }\r\n        if (loop) {\r\n            return\r\n        }\r\n        var nextHidden = selectedIndex === itemsCount - this._itemsPerPage();\r\n        var prevHidden = itemsCount < 2 || 0 === selectedIndex;\r\n        if (this._dataSource && this._dataSource.paginate()) {\r\n            nextHidden = nextHidden && this._isLastPage()\r\n        } else {\r\n            nextHidden = nextHidden || itemsCount < 2\r\n        }\r\n        if (prevHidden) {\r\n            this._prevNavButton.hide()\r\n        }\r\n        if (nextHidden) {\r\n            this._nextNavButton.hide()\r\n        }\r\n    },\r\n    _setupSlideShow: function() {\r\n        var that = this;\r\n        var slideshowDelay = that.option(\"slideshowDelay\");\r\n        clearTimeout(that._slideshowTimer);\r\n        if (!slideshowDelay) {\r\n            return\r\n        }\r\n        that._slideshowTimer = setTimeout(function() {\r\n            if (that._userInteraction) {\r\n                that._setupSlideShow();\r\n                return\r\n            }\r\n            that.nextItem(true).done(that._setupSlideShow)\r\n        }, slideshowDelay)\r\n    },\r\n    _elementWidth: function() {\r\n        if (!this._cacheElementWidth) {\r\n            this._cacheElementWidth = this.$element().width()\r\n        }\r\n        return this._cacheElementWidth\r\n    },\r\n    _clearCacheWidth: function() {\r\n        delete this._cacheElementWidth\r\n    },\r\n    _swipeStartHandler: function(e) {\r\n        this._releaseInvisibleItems();\r\n        this._clearCacheWidth();\r\n        this._elementWidth();\r\n        var itemsCount = this._itemsCount();\r\n        if (!itemsCount) {\r\n            e.event.cancel = true;\r\n            return\r\n        }\r\n        this._stopItemAnimations();\r\n        this._startSwipe();\r\n        this._userInteraction = true;\r\n        if (!this.option(\"loop\")) {\r\n            var selectedIndex = this.option(\"selectedIndex\");\r\n            var startOffset = itemsCount - selectedIndex - this._itemsPerPage();\r\n            var endOffset = selectedIndex;\r\n            var rtlEnabled = this.option(\"rtlEnabled\");\r\n            e.event.maxLeftOffset = rtlEnabled ? endOffset : startOffset;\r\n            e.event.maxRightOffset = rtlEnabled ? startOffset : endOffset\r\n        }\r\n    },\r\n    _stopItemAnimations: function() {\r\n        _fx.default.stop(this._$container, true)\r\n    },\r\n    _swipeUpdateHandler: function(e) {\r\n        var wrapAroundRatio = this.option(\"wrapAround\") ? 1 : 0;\r\n        var offset = this._offsetDirection() * e.event.offset * (this._itemsPerPage() + wrapAroundRatio) - this.option(\"selectedIndex\");\r\n        if (offset < 0) {\r\n            this._loadNextPageIfNeeded(Math.ceil(Math.abs(offset)))\r\n        }\r\n        this._renderContainerPosition(offset)\r\n    },\r\n    _swipeEndHandler: function(e) {\r\n        var targetOffset = e.event.targetOffset * this._offsetDirection() * this._itemsPerPage();\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var newIndex = this._fitIndex(selectedIndex - targetOffset);\r\n        var paginatedIndex = this._fitPaginatedIndex(newIndex);\r\n        if (Math.abs(targetOffset) < this._itemsPerPage()) {\r\n            this._relocateItems(selectedIndex);\r\n            return\r\n        }\r\n        if (this._itemsPerPage() === this._itemsCount()) {\r\n            if (targetOffset > 0) {\r\n                this._relocateItems(-targetOffset)\r\n            } else {\r\n                this._relocateItems(0)\r\n            }\r\n            return\r\n        }\r\n        this.option(\"selectedIndex\", paginatedIndex)\r\n    },\r\n    _setFocusOnSelect: function() {\r\n        this._userInteraction = true;\r\n        var selectedItem = this.itemElements().filter(\".\" + GALLERY_ITEM_SELECTED_CLASS);\r\n        this.option(\"focusedElement\", (0, _element.getPublicElement)(selectedItem));\r\n        this._userInteraction = false\r\n    },\r\n    _flipIndex: function(index) {\r\n        var itemsCount = this._itemsCount();\r\n        index %= itemsCount;\r\n        if (index > (itemsCount + 1) / 2) {\r\n            index -= itemsCount\r\n        }\r\n        if (index < -(itemsCount - 1) / 2) {\r\n            index += itemsCount\r\n        }\r\n        return index\r\n    },\r\n    _fitIndex: function(index) {\r\n        if (!this.option(\"loop\")) {\r\n            return index\r\n        }\r\n        var itemsCount = this._itemsCount();\r\n        if (index >= itemsCount || index < 0) {\r\n            this._goToGhostItem = true\r\n        }\r\n        if (index >= itemsCount) {\r\n            index = itemsCount - index\r\n        }\r\n        index %= itemsCount;\r\n        if (index < 0) {\r\n            index += itemsCount\r\n        }\r\n        return index\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._cleanIndicators();\r\n        this._cleanNavButtons()\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._slideshowTimer);\r\n        this.callBase()\r\n    },\r\n    _updateSelection: function(addedSelection, removedSelection) {\r\n        this._stopItemAnimations();\r\n        this._renderNavButtonsVisibility();\r\n        this._renderSelectedItem();\r\n        this._relocateItems(addedSelection[0], removedSelection[0]);\r\n        this._renderSelectedPageIndicator()\r\n    },\r\n    _relocateItems: function(newIndex, prevIndex, withoutAnimation) {\r\n        if (void 0 === prevIndex) {\r\n            prevIndex = newIndex\r\n        }\r\n        var indexOffset = this._calculateIndexOffset(newIndex, prevIndex);\r\n        this._renderContainerPosition(indexOffset, true, this.option(\"animationEnabled\") && !withoutAnimation).done(function() {\r\n            this._setFocusOnSelect();\r\n            this._userInteraction = false;\r\n            this._setupSlideShow()\r\n        })\r\n    },\r\n    _focusInHandler: function() {\r\n        if (_fx.default.isAnimating(this._$container) || this._userInteraction) {\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _focusOutHandler: function() {\r\n        if (_fx.default.isAnimating(this._$container) || this._userInteraction) {\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _selectFocusedItem: _common.noop,\r\n    _moveFocus: function() {\r\n        this._stopItemAnimations();\r\n        this.callBase.apply(this, arguments);\r\n        var index = this.itemElements().index((0, _renderer.default)(this.option(\"focusedElement\")));\r\n        this.goToItem(index, this.option(\"animationEnabled\"))\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._reviseDimensions()\r\n        }\r\n    },\r\n    _calculateIndexOffset: function(newIndex, lastIndex) {\r\n        if (void 0 === lastIndex) {\r\n            lastIndex = newIndex\r\n        }\r\n        var indexOffset = lastIndex - newIndex;\r\n        if (this.option(\"loop\") && !this._needLongMove && this._goToGhostItem) {\r\n            if (this._isItemOnFirstPage(newIndex) && this._isItemOnLastPage(lastIndex)) {\r\n                indexOffset = -this._itemsPerPage()\r\n            } else {\r\n                if (this._isItemOnLastPage(newIndex) && this._isItemOnFirstPage(lastIndex)) {\r\n                    indexOffset = this._itemsPerPage()\r\n                }\r\n            }\r\n            this._goToGhostItem = false\r\n        }\r\n        this._needLongMove = false;\r\n        indexOffset -= lastIndex;\r\n        return indexOffset\r\n    },\r\n    _isItemOnLastPage: function(itemIndex) {\r\n        return itemIndex >= this._itemsCount() - this._itemsPerPage()\r\n    },\r\n    _isItemOnFirstPage: function(itemIndex) {\r\n        return itemIndex <= this._itemsPerPage()\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"width\":\r\n            case \"initialItemWidth\":\r\n                this.callBase.apply(this, arguments);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"animationDuration\":\r\n                this._renderNavButtonsVisibility();\r\n                break;\r\n            case \"animationEnabled\":\r\n                break;\r\n            case \"loop\":\r\n                this.$element().toggleClass(GALLERY_LOOP_CLASS, args.value);\r\n                this.option(\"loopItemFocus\", args.value);\r\n                if ((0, _window.hasWindow)()) {\r\n                    this._cloneDuplicateItems();\r\n                    this._renderItemPositions();\r\n                    this._renderNavButtonsVisibility()\r\n                }\r\n                break;\r\n            case \"showIndicator\":\r\n                this._renderIndicator();\r\n                break;\r\n            case \"showNavButtons\":\r\n                this._renderNavButtons();\r\n                break;\r\n            case \"slideshowDelay\":\r\n                this._setupSlideShow();\r\n                break;\r\n            case \"wrapAround\":\r\n            case \"stretchImages\":\r\n                if ((0, _window.hasWindow)()) {\r\n                    this._renderItemSizes();\r\n                    this._renderItemPositions();\r\n                    this._renderItemVisibility()\r\n                }\r\n                break;\r\n            case \"swipeEnabled\":\r\n                this._renderUserInteraction();\r\n                break;\r\n            case \"indicatorEnabled\":\r\n                this._toggleIndicatorInteraction(args.value);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    goToItem: function(itemIndex, animation) {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var itemsCount = this._itemsCount();\r\n        if (void 0 !== animation) {\r\n            this._animationOverride = animation\r\n        }\r\n        itemIndex = this._fitIndex(itemIndex);\r\n        this._deferredAnimate = new _deferred.Deferred;\r\n        if (itemIndex > itemsCount - 1 || itemIndex < 0 || selectedIndex === itemIndex) {\r\n            return this._deferredAnimate.resolveWith(this).promise()\r\n        }\r\n        this.option(\"selectedIndex\", itemIndex);\r\n        return this._deferredAnimate.promise()\r\n    },\r\n    prevItem: function(animation) {\r\n        return this.goToItem(this.option(\"selectedIndex\") - 1, animation)\r\n    },\r\n    nextItem: function(animation) {\r\n        return this.goToItem(this.option(\"selectedIndex\") + 1, animation)\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxGallery\", Gallery);\r\nvar _default = Gallery;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}