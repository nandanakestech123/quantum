{"ast":null,"code":"/**\r\n * DevExtreme (viz/gauges/base_range_container.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _base_indicators = require(\"./base_indicators\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _Number = Number;\nvar _isArray = Array.isArray;\nvar _isFinite = isFinite;\n\nvar BaseRangeContainer = _base_indicators.BaseElement.inherit({\n  _init: function () {\n    this._root = this._renderer.g().attr({\n      \"class\": \"dxg-range-container\"\n    }).linkOn(this._container, \"range-container\");\n  },\n  _dispose: function () {\n    this._root.linkOff();\n  },\n  clean: function () {\n    this._root.linkRemove().clear();\n\n    this._options = this.enabled = null;\n    return this;\n  },\n  _getRanges: function () {\n    var that = this;\n    var options = that._options;\n    var translator = that._translator;\n    var totalStart = translator.getDomain()[0];\n    var totalEnd = translator.getDomain()[1];\n    var totalDelta = totalEnd - totalStart;\n    var isValidSegment = totalDelta >= 0 ? isValidSegmentAsc : isValidSegmentDesc;\n    var subtractSegment = totalDelta >= 0 ? subtractSegmentAsc : subtractSegmentDesc;\n    var list = [];\n    var ranges = [];\n    var backgroundRanges = [{\n      start: totalStart,\n      end: totalEnd\n    }];\n    var backgroundColor = (0, _type.isString)(options.backgroundColor) ? options.backgroundColor : \"none\";\n    var width = options.width || {};\n\n    var startWidth = _Number(width > 0 ? width : width.start);\n\n    var endWidth = _Number(width > 0 ? width : width.end);\n\n    var deltaWidth = endWidth - startWidth;\n\n    if (void 0 !== options.ranges && !_isArray(options.ranges)) {\n      return null;\n    }\n\n    if (!(startWidth >= 0 && endWidth >= 0 && startWidth + endWidth > 0)) {\n      return null;\n    }\n\n    list = (_isArray(options.ranges) ? options.ranges : []).reduce(function (result, rangeOptions, i) {\n      rangeOptions = rangeOptions || {};\n      var start = translator.adjust(rangeOptions.startValue);\n      var end = translator.adjust(rangeOptions.endValue);\n\n      if (_isFinite(start) && _isFinite(end) && isValidSegment(start, end, rangeOptions)) {\n        result.push({\n          start: start,\n          end: end,\n          color: rangeOptions.color,\n          classIndex: i\n        });\n      }\n\n      return result;\n    }, []);\n\n    var palette = that._themeManager.createPalette(options.palette, {\n      type: \"indicatingSet\",\n      extensionMode: options.paletteExtensionMode,\n      keepLastColorInEnd: true,\n      count: list.length\n    });\n\n    (0, _iterator.each)(list, function (_, item) {\n      var paletteColor = palette.getNextColor();\n      item.color = (0, _type.isString)(item.color) && item.color || paletteColor || \"none\";\n      item.className = \"dxg-range dxg-range-\" + item.classIndex;\n      delete item.classIndex;\n    });\n    (0, _iterator.each)(list, function (_, item) {\n      var i;\n      var ii;\n      var sub;\n      var subs;\n      var range;\n      var newRanges = [];\n      var newBackgroundRanges = [];\n\n      for (i = 0, ii = ranges.length; i < ii; ++i) {\n        range = ranges[i];\n        subs = subtractSegment(range.start, range.end, item.start, item.end);\n        (sub = subs[0]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\n        (sub = subs[1]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\n      }\n\n      newRanges.push(item);\n      ranges = newRanges;\n\n      for (i = 0, ii = backgroundRanges.length; i < ii; ++i) {\n        range = backgroundRanges[i];\n        subs = subtractSegment(range.start, range.end, item.start, item.end);\n        (sub = subs[0]) && newBackgroundRanges.push(sub);\n        (sub = subs[1]) && newBackgroundRanges.push(sub);\n      }\n\n      backgroundRanges = newBackgroundRanges;\n    });\n    (0, _iterator.each)(backgroundRanges, function (_, range) {\n      range.color = backgroundColor;\n      range.className = \"dxg-range dxg-background-range\";\n      ranges.push(range);\n    });\n    (0, _iterator.each)(ranges, function (_, range) {\n      range.startWidth = (range.start - totalStart) / totalDelta * deltaWidth + startWidth;\n      range.endWidth = (range.end - totalStart) / totalDelta * deltaWidth + startWidth;\n    });\n    return ranges;\n  },\n  render: function (options) {\n    var that = this;\n    that._options = options;\n\n    that._processOptions();\n\n    that._ranges = that._getRanges();\n\n    if (that._ranges) {\n      that.enabled = true;\n\n      that._root.linkAppend();\n    }\n\n    return that;\n  },\n  resize: function (layout) {\n    var that = this;\n\n    that._root.clear();\n\n    if (that._isVisible(layout)) {\n      (0, _iterator.each)(that._ranges, function (_, range) {\n        that._createRange(range, layout).attr({\n          fill: range.color,\n          \"class\": range.className\n        }).append(that._root);\n      });\n    }\n\n    return that;\n  },\n  _processOptions: null,\n  _isVisible: null,\n  _createRange: null,\n  getColorForValue: function (value) {\n    var color = null;\n    (0, _iterator.each)(this._ranges, function (_, range) {\n      if (range.start <= value && value <= range.end || range.start >= value && value >= range.end) {\n        color = range.color;\n        return false;\n      }\n    });\n    return color;\n  }\n});\n\nfunction subtractSegmentAsc(segmentStart, segmentEnd, otherStart, otherEnd) {\n  var result;\n\n  if (otherStart > segmentStart && otherEnd < segmentEnd) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }, {\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  } else {\n    if (otherStart >= segmentEnd || otherEnd <= segmentStart) {\n      result = [{\n        start: segmentStart,\n        end: segmentEnd\n      }];\n    } else {\n      if (otherStart <= segmentStart && otherEnd >= segmentEnd) {\n        result = [];\n      } else {\n        if (otherStart > segmentStart) {\n          result = [{\n            start: segmentStart,\n            end: otherStart\n          }];\n        } else {\n          if (otherEnd < segmentEnd) {\n            result = [{\n              start: otherEnd,\n              end: segmentEnd\n            }];\n          }\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction subtractSegmentDesc(segmentStart, segmentEnd, otherStart, otherEnd) {\n  var result;\n\n  if (otherStart < segmentStart && otherEnd > segmentEnd) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }, {\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  } else {\n    if (otherStart <= segmentEnd || otherEnd >= segmentStart) {\n      result = [{\n        start: segmentStart,\n        end: segmentEnd\n      }];\n    } else {\n      if (otherStart >= segmentStart && otherEnd <= segmentEnd) {\n        result = [];\n      } else {\n        if (otherStart < segmentStart) {\n          result = [{\n            start: segmentStart,\n            end: otherStart\n          }];\n        } else {\n          if (otherEnd > segmentEnd) {\n            result = [{\n              start: otherEnd,\n              end: segmentEnd\n            }];\n          }\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction areEqualValues(start, end, _ref) {\n  var startValue = _ref.startValue,\n      endValue = _ref.endValue;\n  return endValue === startValue && startValue === start && end === start;\n}\n\nfunction isValidSegmentAsc(start, end, options) {\n  return end - start > 0 || areEqualValues(start, end, options);\n}\n\nfunction isValidSegmentDesc(start, end, options) {\n  return start - end > 0 || areEqualValues(start, end, options);\n}\n\nvar _default = BaseRangeContainer;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/gauges/base_range_container.js"],"names":["exports","default","_iterator","require","_base_indicators","_type","_Number","Number","_isArray","Array","isArray","_isFinite","isFinite","BaseRangeContainer","BaseElement","inherit","_init","_root","_renderer","g","attr","linkOn","_container","_dispose","linkOff","clean","linkRemove","clear","_options","enabled","_getRanges","that","options","translator","_translator","totalStart","getDomain","totalEnd","totalDelta","isValidSegment","isValidSegmentAsc","isValidSegmentDesc","subtractSegment","subtractSegmentAsc","subtractSegmentDesc","list","ranges","backgroundRanges","start","end","backgroundColor","isString","width","startWidth","endWidth","deltaWidth","reduce","result","rangeOptions","i","adjust","startValue","endValue","push","color","classIndex","palette","_themeManager","createPalette","type","extensionMode","paletteExtensionMode","keepLastColorInEnd","count","length","each","_","item","paletteColor","getNextColor","className","ii","sub","subs","range","newRanges","newBackgroundRanges","render","_processOptions","_ranges","linkAppend","resize","layout","_isVisible","_createRange","fill","append","getColorForValue","value","segmentStart","segmentEnd","otherStart","otherEnd","areEqualValues","_ref","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/gauges/base_range_container.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _base_indicators = require(\"./base_indicators\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _Number = Number;\r\nvar _isArray = Array.isArray;\r\nvar _isFinite = isFinite;\r\nvar BaseRangeContainer = _base_indicators.BaseElement.inherit({\r\n    _init: function() {\r\n        this._root = this._renderer.g().attr({\r\n            \"class\": \"dxg-range-container\"\r\n        }).linkOn(this._container, \"range-container\")\r\n    },\r\n    _dispose: function() {\r\n        this._root.linkOff()\r\n    },\r\n    clean: function() {\r\n        this._root.linkRemove().clear();\r\n        this._options = this.enabled = null;\r\n        return this\r\n    },\r\n    _getRanges: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var translator = that._translator;\r\n        var totalStart = translator.getDomain()[0];\r\n        var totalEnd = translator.getDomain()[1];\r\n        var totalDelta = totalEnd - totalStart;\r\n        var isValidSegment = totalDelta >= 0 ? isValidSegmentAsc : isValidSegmentDesc;\r\n        var subtractSegment = totalDelta >= 0 ? subtractSegmentAsc : subtractSegmentDesc;\r\n        var list = [];\r\n        var ranges = [];\r\n        var backgroundRanges = [{\r\n            start: totalStart,\r\n            end: totalEnd\r\n        }];\r\n        var backgroundColor = (0, _type.isString)(options.backgroundColor) ? options.backgroundColor : \"none\";\r\n        var width = options.width || {};\r\n        var startWidth = _Number(width > 0 ? width : width.start);\r\n        var endWidth = _Number(width > 0 ? width : width.end);\r\n        var deltaWidth = endWidth - startWidth;\r\n        if (void 0 !== options.ranges && !_isArray(options.ranges)) {\r\n            return null\r\n        }\r\n        if (!(startWidth >= 0 && endWidth >= 0 && startWidth + endWidth > 0)) {\r\n            return null\r\n        }\r\n        list = (_isArray(options.ranges) ? options.ranges : []).reduce(function(result, rangeOptions, i) {\r\n            rangeOptions = rangeOptions || {};\r\n            var start = translator.adjust(rangeOptions.startValue);\r\n            var end = translator.adjust(rangeOptions.endValue);\r\n            if (_isFinite(start) && _isFinite(end) && isValidSegment(start, end, rangeOptions)) {\r\n                result.push({\r\n                    start: start,\r\n                    end: end,\r\n                    color: rangeOptions.color,\r\n                    classIndex: i\r\n                })\r\n            }\r\n            return result\r\n        }, []);\r\n        var palette = that._themeManager.createPalette(options.palette, {\r\n            type: \"indicatingSet\",\r\n            extensionMode: options.paletteExtensionMode,\r\n            keepLastColorInEnd: true,\r\n            count: list.length\r\n        });\r\n        (0, _iterator.each)(list, function(_, item) {\r\n            var paletteColor = palette.getNextColor();\r\n            item.color = (0, _type.isString)(item.color) && item.color || paletteColor || \"none\";\r\n            item.className = \"dxg-range dxg-range-\" + item.classIndex;\r\n            delete item.classIndex\r\n        });\r\n        (0, _iterator.each)(list, function(_, item) {\r\n            var i;\r\n            var ii;\r\n            var sub;\r\n            var subs;\r\n            var range;\r\n            var newRanges = [];\r\n            var newBackgroundRanges = [];\r\n            for (i = 0, ii = ranges.length; i < ii; ++i) {\r\n                range = ranges[i];\r\n                subs = subtractSegment(range.start, range.end, item.start, item.end);\r\n                (sub = subs[0]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\r\n                (sub = subs[1]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub)\r\n            }\r\n            newRanges.push(item);\r\n            ranges = newRanges;\r\n            for (i = 0, ii = backgroundRanges.length; i < ii; ++i) {\r\n                range = backgroundRanges[i];\r\n                subs = subtractSegment(range.start, range.end, item.start, item.end);\r\n                (sub = subs[0]) && newBackgroundRanges.push(sub);\r\n                (sub = subs[1]) && newBackgroundRanges.push(sub)\r\n            }\r\n            backgroundRanges = newBackgroundRanges\r\n        });\r\n        (0, _iterator.each)(backgroundRanges, function(_, range) {\r\n            range.color = backgroundColor;\r\n            range.className = \"dxg-range dxg-background-range\";\r\n            ranges.push(range)\r\n        });\r\n        (0, _iterator.each)(ranges, function(_, range) {\r\n            range.startWidth = (range.start - totalStart) / totalDelta * deltaWidth + startWidth;\r\n            range.endWidth = (range.end - totalStart) / totalDelta * deltaWidth + startWidth\r\n        });\r\n        return ranges\r\n    },\r\n    render: function(options) {\r\n        var that = this;\r\n        that._options = options;\r\n        that._processOptions();\r\n        that._ranges = that._getRanges();\r\n        if (that._ranges) {\r\n            that.enabled = true;\r\n            that._root.linkAppend()\r\n        }\r\n        return that\r\n    },\r\n    resize: function(layout) {\r\n        var that = this;\r\n        that._root.clear();\r\n        if (that._isVisible(layout)) {\r\n            (0, _iterator.each)(that._ranges, function(_, range) {\r\n                that._createRange(range, layout).attr({\r\n                    fill: range.color,\r\n                    \"class\": range.className\r\n                }).append(that._root)\r\n            })\r\n        }\r\n        return that\r\n    },\r\n    _processOptions: null,\r\n    _isVisible: null,\r\n    _createRange: null,\r\n    getColorForValue: function(value) {\r\n        var color = null;\r\n        (0, _iterator.each)(this._ranges, function(_, range) {\r\n            if (range.start <= value && value <= range.end || range.start >= value && value >= range.end) {\r\n                color = range.color;\r\n                return false\r\n            }\r\n        });\r\n        return color\r\n    }\r\n});\r\n\r\nfunction subtractSegmentAsc(segmentStart, segmentEnd, otherStart, otherEnd) {\r\n    var result;\r\n    if (otherStart > segmentStart && otherEnd < segmentEnd) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }, {\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    } else {\r\n        if (otherStart >= segmentEnd || otherEnd <= segmentStart) {\r\n            result = [{\r\n                start: segmentStart,\r\n                end: segmentEnd\r\n            }]\r\n        } else {\r\n            if (otherStart <= segmentStart && otherEnd >= segmentEnd) {\r\n                result = []\r\n            } else {\r\n                if (otherStart > segmentStart) {\r\n                    result = [{\r\n                        start: segmentStart,\r\n                        end: otherStart\r\n                    }]\r\n                } else {\r\n                    if (otherEnd < segmentEnd) {\r\n                        result = [{\r\n                            start: otherEnd,\r\n                            end: segmentEnd\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction subtractSegmentDesc(segmentStart, segmentEnd, otherStart, otherEnd) {\r\n    var result;\r\n    if (otherStart < segmentStart && otherEnd > segmentEnd) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }, {\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    } else {\r\n        if (otherStart <= segmentEnd || otherEnd >= segmentStart) {\r\n            result = [{\r\n                start: segmentStart,\r\n                end: segmentEnd\r\n            }]\r\n        } else {\r\n            if (otherStart >= segmentStart && otherEnd <= segmentEnd) {\r\n                result = []\r\n            } else {\r\n                if (otherStart < segmentStart) {\r\n                    result = [{\r\n                        start: segmentStart,\r\n                        end: otherStart\r\n                    }]\r\n                } else {\r\n                    if (otherEnd > segmentEnd) {\r\n                        result = [{\r\n                            start: otherEnd,\r\n                            end: segmentEnd\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction areEqualValues(start, end, _ref) {\r\n    var startValue = _ref.startValue,\r\n        endValue = _ref.endValue;\r\n    return endValue === startValue && startValue === start && end === start\r\n}\r\n\r\nfunction isValidSegmentAsc(start, end, options) {\r\n    return end - start > 0 || areEqualValues(start, end, options)\r\n}\r\n\r\nfunction isValidSegmentDesc(start, end, options) {\r\n    return start - end > 0 || areEqualValues(start, end, options)\r\n}\r\nvar _default = BaseRangeContainer;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}