{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"./style.scss\";import{NormalButton,NormalInput,NormalSelect,InputSearch,NormalModal,TableWrapper}from'component/common';import{dateFormat}from'service/helperFunctions';import _ from'lodash';import{history}from'helpers';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import SimpleReactValidator from'simple-react-validator';import closeIcon from'assets/images/close.png';import{Toast}from'service/toast';export var IssuedStaffClass=/*#__PURE__*/function(_Component){_inherits(IssuedStaffClass,_Component);var _super=_createSuper(IssuedStaffClass);function IssuedStaffClass(){var _this;_classCallCheck(this,IssuedStaffClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isOpen:false,currentIndex:-1,headerDetails:[{label:'Employee name',sortKey:false,width:\"130px\"}],staffList:[],page:1,holdData:{id:0,hi_itemdesc:'',holditemqty:0,issueQty:0,issuedstaff:'',emp_id:0,emp_name:''}};_this.componentDidMount=function(){_this.props.getCommonApi(\"holditem/\".concat(_this.props.holdItem.id)).then(function(key){var data=key.data;var holdData=Object.assign({},_this.state.holdData);holdData[\"id\"]=data.id;holdData[\"hi_itemdesc\"]=data.hi_itemdesc;holdData[\"holditemqty\"]=data.holditemqty;holdData[\"issueQty\"]=_this.props.holdItem.qty_issued;holdData[\"issuedstaff\"]=_this.props.holdItem.staff_issued;holdData[\"emp_name\"]=_this.props.holdItem.emp_name;holdData[\"emp_id\"]=_this.props.holdItem.emp_id;_this.setState({holdData:holdData});});};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});_this.getStaffList();};_this.handleInput=function(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value,index=_ref$target.index;var holdData=Object.assign({},_this.state.holdData);holdData[index][name]=value;_this.setState({holdData:holdData});};_this.getStaffList=function(){_this.props.getCommonApi(\"empcartlist/?sales_staff=2&page=\".concat(_this.state.page)).then(function(key){var status=key.status,data=key.data;if(status===200){_this.setState({staffList:data.dataList});}});};_this.handleNext=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var page;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:page=_this.state.page;page=page+1;_context.next=4;return _this.setState({page:page});case 4:if(page>0){_this.getStaffList();}case 5:case\"end\":return _context.stop();}}},_callee);}));_this.handleBack=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var page;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_this.state.page;page=page-1;_context2.next=4;return _this.setState({page:page});case 4:if(page>0){_this.getStaffList();}case 5:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleChange=function(_ref4){var _ref4$target=_ref4.target,value=_ref4$target.value,name=_ref4$target.name;var holdData=Object.assign({},_this.state.holdData);holdData[name]=value;_this.setState({holdData:holdData});};_this.handleissuedconfirm=function(event){event.preventDefault();var holdData=_this.state.holdData;if(isNaN(holdData.issueQty)||holdData.issueQty<=0||holdData.issueQty==null||holdData.issueQty==\"\"){Toast({type:\"error\",message:'invalid issue quantity'});return false;}else if(holdData.issueQty>holdData.holditemqty){Toast({type:\"error\",message:'issue quantity should be less than or equal to hold quantity'});return false;}else if(holdData.emp_id==0||holdData.emp_id==''||holdData.emp_id==null){Toast({type:\"error\",message:'please select staff'});return false;}else{_this.props.issuedlistupdate(holdData);_this.props.issuedlisttableupdate(holdData);_this.setState({holdData:{}});_this.props.toggle();}};_this.handleSelect_Staff=function(staff){var holdData=Object.assign({},_this.state.holdData);holdData[\"emp_name\"]=staff.emp_name;holdData[\"emp_id\"]=staff.id;_this.setState({holdData:holdData});};_this.handleClearLine=function(){var holdData=Object.assign({},_this.state.holdData);holdData[\"emp_name\"]='';holdData[\"emp_id\"]='';_this.setState({holdData:holdData});};return _this;}_createClass(IssuedStaffClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,_this$state$staffList=_this$state.staffList,staffList=_this$state$staffList===void 0?[]:_this$state$staffList,headerDetails=_this$state.headerDetails,_this$state$holdData=_this$state.holdData,holdData=_this$state$holdData===void 0?{}:_this$state$holdData;var isIssued=this.props.isIssued;var hi_itemdesc=holdData.hi_itemdesc,holditemqty=holdData.holditemqty,issueQty=holdData.issueQty,emp_id=holdData.emp_id,emp_name=holdData.emp_name;return/*#__PURE__*/React.createElement(NormalModal,{style:{minWidth:\"560px\"},modal:isIssued,handleModal:this.props.toggle},/*#__PURE__*/React.createElement(\"img\",{onClick:this.props.toggle,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row new-cart issued-staff\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 font-700 mb-3 title\"},\"Select Staff\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2 form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-3\"},\"Item\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"\",value:hi_itemdesc,name:\"hi_itemdesc\",onChange:this.handleChange,disabled:true}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2 form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Hold Qty\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"\",value:holditemqty,name:\"holditemqty\",onChange:this.handleChange,disabled:true}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2 form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Issue Qty\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:issueQty,name:\"issueQty\",onChange:this.handleChange}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 cart-item emp-image\"},/*#__PURE__*/React.createElement(\"div\",{className:\"staff-listing d-flex emp-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"forward-button cursor-pointer\",onClick:this.handleBack},/*#__PURE__*/React.createElement(\"svg\",{width:\"6\",height:\"10\",viewBox:\"0 0 6 10\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M5 0.5L1 5L5 9.5\",stroke:\"#888888\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}))),staffList.length>0?staffList.map(function(staff){return/*#__PURE__*/React.createElement(\"div\",{className:\"mx-1 staff-list cursor-pointer \",key:staff.id,onClick:function onClick(){return _this2.handleSelect_Staff(staff);}},/*#__PURE__*/React.createElement(\"img\",{className:\"img emp\",src:staff.emp_pic,alt:\"\"}),/*#__PURE__*/React.createElement(\"p\",null,staff.emp_name));}):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"back-button cursor-pointer\",onClick:this.handleNext},/*#__PURE__*/React.createElement(\"svg\",{width:\"5\",height:\"10\",viewBox:\"0 0 5 10\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M0.5 9.5L4.5 5L0.5 0.5\",stroke:\"#888888\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 cart-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"item-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination},holdData.emp_id?/*#__PURE__*/React.createElement(\"tr\",{key:emp_id},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:emp_name,name:\"issueQty\",onChange:this.handleChange,disabled:true}))))):\"\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pt-4 action-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 d-flex text-left\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"fs-15 clear-line\",label:\"Clear Line\",outline:false,onClick:this.handleClearLine})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 d-flex\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 d-flex text-right\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\" fs-15 confirm\",label:\"Done\",outline:false,onClick:function onClick(event){return _this2.handleissuedconfirm(event);}}))))));}}]);return IssuedStaffClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var IssuedStaff=connect(null,mapDispatchToProps)(IssuedStaffClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/HoldSection/modal/issuedStaff.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","closeIcon","Toast","IssuedStaffClass","state","isOpen","currentIndex","headerDetails","label","sortKey","width","staffList","page","holdData","id","hi_itemdesc","holditemqty","issueQty","issuedstaff","emp_id","emp_name","componentDidMount","props","holdItem","then","key","data","Object","assign","qty_issued","staff_issued","setState","componentWillMount","validator","element","message","autoForceUpdate","getStaffList","handleInput","target","name","value","index","status","dataList","handleNext","handleBack","handleChange","handleissuedconfirm","event","preventDefault","isNaN","type","issuedlistupdate","issuedlisttableupdate","toggle","handleSelect_Staff","staff","handleClearLine","isIssued","minWidth","length","map","emp_pic","handlePagination","mapDispatchToProps","dispatch","IssuedStaff"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport \"./style.scss\";\nimport { NormalButton, NormalInput, NormalSelect, InputSearch, NormalModal, TableWrapper } from 'component/common';\nimport { dateFormat } from 'service/helperFunctions';\nimport _ from 'lodash';\nimport { history } from 'helpers';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\"\nimport SimpleReactValidator from 'simple-react-validator';\nimport closeIcon from 'assets/images/close.png';\nimport { Toast } from 'service/toast';\n\n\nexport class IssuedStaffClass extends Component {\n    state = {\n        isOpen: false,\n        currentIndex: -1,     \n        headerDetails: [\n            { label: 'Employee name', sortKey: false, width: \"130px\" },\n        ],       \n        staffList: [],        \n        page:1,\n        holdData: \n        {   id: 0,\n            hi_itemdesc: '',\n            holditemqty: 0,\n            issueQty: 0,\n            issuedstaff: '', \n            emp_id: 0,\n            emp_name: '',    \n         }\n        \n    }    \n    componentDidMount = () => {    \n        \n        this.props.getCommonApi(`holditem/${this.props.holdItem.id}`).then((key) => {\n            let { data } = key;\n            let holdData = Object.assign({}, this.state.holdData);\n            holdData[\"id\"] = data.id;\n            holdData[\"hi_itemdesc\"] = data.hi_itemdesc;\n            holdData[\"holditemqty\"] = data.holditemqty;\n            holdData[\"issueQty\"] = this.props.holdItem.qty_issued;\n            holdData[\"issuedstaff\"] =  this.props.holdItem.staff_issued;\n            holdData[\"emp_name\"] = this.props.holdItem.emp_name;\n            holdData[\"emp_id\"] = this.props.holdItem.emp_id;\n            this.setState({ holdData })\n        })\n      }\n    componentWillMount = () => {\n        this.validator = new SimpleReactValidator({\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\n            autoForceUpdate: this,\n        });              \n        this.getStaffList();  \n    }\n   \n    handleInput = ({ target: { name, value, index } }) => {\n\n        let holdData = Object.assign({}, this.state.holdData)\n        holdData[index][name] = value;\n        this.setState({\n            holdData\n        })\n    }\n    \n    getStaffList = () => {\n        \n        this.props.getCommonApi(`empcartlist/?sales_staff=2&page=${this.state.page}`).then((key) => {\n            let { status, data } = key;\n            if (status === 200) {\n                this.setState({ staffList:data.dataList })\n            }\n        })\n    }\n\n    handleNext = async () => {\n        let { page } = this.state;\n        page = page + 1;\n        await this.setState({\n            page\n        })\n        if (page > 0) {\n            this.getStaffList();\n        }\n    }\n\n    handleBack = async () => {\n        let { page } = this.state;\n        page = page - 1;\n        await this.setState({\n            page\n        })\n        if (page > 0) {\n            this.getStaffList();\n        }\n    }\n\n      handleChange = ({ target: { value, name } }) => {\n        let holdData = Object.assign({}, this.state.holdData);\n        holdData[name] = value;\n        this.setState({\n            holdData,\n        });\n    };\n\n    handleissuedconfirm = (event) => {\n        event.preventDefault();\n        let { holdData } = this.state;\n        \n            if (isNaN(holdData.issueQty) || holdData.issueQty <= 0 || holdData.issueQty == null || holdData.issueQty == \"\") {\n                Toast({ type: \"error\", message: 'invalid issue quantity' })\n                return false;\n            }            \n            else if (holdData.issueQty > holdData.holditemqty) {\n                Toast({ type: \"error\", message: 'issue quantity should be less than or equal to hold quantity' })\n                return false;\n            }\n            else if (holdData.emp_id == 0 || holdData.emp_id == '' || holdData.emp_id == null ) {\n                Toast({ type: \"error\", message: 'please select staff' })\n                return false;\n            }\n            else {\n                this.props.issuedlistupdate(holdData);\n                this.props.issuedlisttableupdate(holdData);\n                this.setState({\n                    holdData : {}\n                })\n                this.props.toggle();\n            }\n        }\n    \n        handleSelect_Staff = (staff) => {\n            let holdData = Object.assign({}, this.state.holdData);\n            holdData[\"emp_name\"] = staff.emp_name;\n            holdData[\"emp_id\"] = staff.id;\n            this.setState({\n            holdData,\n            });\n        \n        }\n\n        handleClearLine = () => {\n            let holdData = Object.assign({}, this.state.holdData);\n            holdData[\"emp_name\"] = '';\n            holdData[\"emp_id\"] = '';\n            this.setState({\n            holdData,\n            });\n        } \n\n    render() {\n        let { staffList = [], headerDetails, holdData = {}} = this.state;\n        let { isIssued } = this.props;\n        let {hi_itemdesc, holditemqty, issueQty, emp_id, emp_name } = holdData;\n        \n     return (\n        <NormalModal  style={{ minWidth: \"560px\" }} modal ={isIssued} handleModal={this.props.toggle} >\n                <img onClick={this.props.toggle} className=\"close\" src={closeIcon} alt=\"\" />\n            <div className=\"row new-cart issued-staff\">\n                <div className=\"col-12\">\n                    <p className=\"fs-18 font-700 mb-3 title\">Select Staff</p>\n                </div>\n                \n                <div className=\"col-12 mb-2 form-group\">\n                        <div className=\"row\">\n                            <div className=\"col-12\">\n                                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\n                                Item\n                            </label>\n                                <div className=\"input-group\">\n                                    <NormalInput\n                                        placeholder=\"\"\n                                        value={hi_itemdesc}\n                                        name=\"hi_itemdesc\"\n                                        onChange={this.handleChange}\n                                        disabled ={true}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                </div>\n                <div className=\"col-12 mb-2 form-group\">\n                    <div className=\"row\">\n                            <div className=\"col-6\">\n                                <label className=\"text-left text-black common-label-text \">\n                                Hold Qty\n                                </label>                  \n                                <div className=\"input-group\">\n                                <NormalInput\n                                        placeholder=\"\"\n                                        value={holditemqty}\n                                        name=\"holditemqty\"\n                                        onChange={this.handleChange}\n                                        disabled={true}\n                                    />                  \n                                </div>\n                            </div>\n                    </div>\n                </div>                   \n \n                    <div className=\"col-12 mb-2 form-group\">\n                        <div className=\"row\">\n                            <div className=\"col-6\">\n                            <label className=\"text-left text-black common-label-text \">\n                                Issue Qty\n                            </label>\n                            <div className=\"input-group\">\n                                <NormalInput\n                                    value={issueQty}\n                                    name=\"issueQty\"\n                                    onChange={this.handleChange}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className={`col-12 cart-item emp-image`}>\n                        <div className={`staff-listing d-flex emp-list`}>\n                            <div className=\"forward-button cursor-pointer\" onClick={this.handleBack}>\n                                <svg width=\"6\" height=\"10\" viewBox=\"0 0 6 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <path d=\"M5 0.5L1 5L5 9.5\" stroke=\"#888888\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n                                </svg>\n                            </div>\n                            {\n                                staffList.length>0 ? staffList.map((staff) => {\n                                    return (\n                                    <div className=\"mx-1 staff-list cursor-pointer \" key={staff.id} onClick={() => this.handleSelect_Staff(staff)}>\n                                        <img className=\"img emp\" src={staff.emp_pic} alt=''/>\n                                        <p>{staff.emp_name}</p>\n                                    </div>\n                                    )\n                                }):\"\"\n                            }\n                            <div className=\"back-button cursor-pointer\" onClick={this.handleNext}>\n                            <svg width=\"5\" height=\"10\" viewBox=\"0 0 5 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path d=\"M0.5 9.5L4.5 5L0.5 0.5\" stroke=\"#888888\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n                            </svg>\n                        </div>\n                        </div>\n                </div>\n                <div className='col-12 cart-item'>\n                    <div className='item-list'>\n\n                        <div className=\"table\">\n                            \n                            <TableWrapper\n                                headerDetails={headerDetails}\n                                queryHandler={this.handlePagination}>\n                                 \n                                {holdData.emp_id ? \n                                 ( <tr key={emp_id}>\n                                 <td>\n                                 <div className=\"d-flex align-items-center justify-content-center\">\n                                    <div className='input-group'>\n                                    <NormalInput\n                                        value={emp_name}\n                                        name=\"issueQty\"\n                                        onChange={this.handleChange}\n                                        disabled={true}\n                                    />\n                                    </div>    \n                            </div>\n                            </td>\n                            </tr>\n                           \n                            )\n                             : \"\"\n                            }\n                            </TableWrapper>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-12 pt-4 action-bar\">\n                    <div className=\"row\">\n                        <div className=\"col-4 d-flex text-left\">\n                            <NormalButton\n                                buttonClass={\"mx-2\"}\n                                mainbg={true}\n                                className=\"fs-15 clear-line\"\n                                label=\"Clear Line\"\n                                outline={false}\n                                onClick={this.handleClearLine}\n                            />\n                        </div>\n                        <div className='col-4 d-flex'></div>\n                        <div className=\"col-4 d-flex text-right\">                           \n                            <NormalButton\n                                buttonClass={\"mx-2\"}\n                                mainbg={true}\n                                className=\" fs-15 confirm\"\n                                label=\"Done\"\n                                outline={false}\n                                onClick={(event) => this.handleissuedconfirm(event)}\n                            />\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            </NormalModal>\n        );\n    }\n}\n\n\nconst mapDispatchToProps = dispatch => {\n    return bindActionCreators({\n        // getCustomer,\n        getCommonApi,\n        updateForm,\n        commonCreateApi,\n        commonPatchApi,\n        commonDeleteApi\n    }, dispatch)\n}\n\nexport const IssuedStaff = connect(null, mapDispatchToProps)(IssuedStaffClass)"]},"metadata":{},"sourceType":"module"}