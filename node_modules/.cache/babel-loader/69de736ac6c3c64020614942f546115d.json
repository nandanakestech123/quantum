{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./style.scss';import{NormalButton,NormalInput,NormalSelect,InputSearch,NormalModal,TableWrapper}from'component/common';import{dateFormat}from'service/helperFunctions';import _ from'lodash';import{history}from'helpers';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import SimpleReactValidator from'simple-react-validator';import{VoidPaidTrans}from'./voidPaidTrans.js';export var BillOpsClass=/*#__PURE__*/function(_Component){_inherits(BillOpsClass,_Component);var _super=_createSuper(BillOpsClass);function BillOpsClass(){var _this;_classCallCheck(this,BillOpsClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={tstaffList:[{}],headerDetails:[{label:'Date',sortKey:false,width:\"60px\"},{label:'Treatment',width:\"120px\"},{label:'Trans Ref',sortKey:false,width:\"55px\"},{label:'Discription',sortKey:false,width:\"55px\"},{label:'Type',sortKey:false,width:\"55px\"},{label:'Exp Date',sortKey:false,width:\"55px\"},{label:'Amount',sortKey:false,width:\"55px\"},{label:'Status',sortKey:false,width:\"55px\"},{label:'Rev',sortKey:false,width:\"55px\"},{label:'Treat No',sortKey:false,width:\"55px\"},{label:'Limit',sortKey:false,width:\"55px\"},{label:'Sel Staff',sortKey:false,width:\"55px\"},{label:'Staff',sortKey:false,width:\"55px\"}],// cartData: {},\nyearList:[],selectedYear:new Date().getFullYear(),isOpenTreatmentDone:false,tsStaff:{},workPoint:0,isOpenReversal:false,menuItems:[//{ to: '/admin/catalog', label: \"Suspend Bill\", id: \"suspendBill\" },\n//{ to: '/admin/catalog', label: \"Recall Sus Bill\", id: \"recallSusBill\" },\n//{ to: '/admin/catalog', label: \"Recall Tran\", id: \"reacallBill\" },\n//{ to: '/admin/catalog', label: \"Reprint Bill\", id: \"reprint\" },\n// { to: '/admin/catalog', label: \"Void itam/bill\", id: \"VoidItemBill\" },\n{to:'/admin/catalog',label:\"Void Paid Trans\",id:\"voidPaidTrns\"}],activeMenu:\"voidPaidTrns\"};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});// this.props.getCommonApi('treatmentdone/Year/').then((key) => {\n//     let { status, data } = key;\n//     let { yearList } = this.state;\n//     for (let value of data) {\n//         yearList.push({ value: value, label: value })\n//     }\n//     this.setState({ yearList })\n// })\n// this.getCart();\n};_this.getCart=function(){console.log(_this.props,\"sfgdfsgdfghgf\");var _this$state=_this.state,roomList=_this$state.roomList,sourceList=_this$state.sourceList,staffList=_this$state.staffList,cartData=_this$state.cartData,duration=_this$state.duration,tstaffList=_this$state.tstaffList,selectedYear=_this$state.selectedYear;_this.props.getCommonApi(\"treatmentdone/?year=\".concat(selectedYear,\"&cust_id=\").concat(_this.props.basicApptDetail.custId)).then(function(key){cartData=key;tstaffList=key.data;_this.setState({tstaffList:tstaffList});});};_this.handleYearChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,selectedYear;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;selectedYear=_this.state.selectedYear;selectedYear=value;_context.next=5;return _this.setState({selectedYear:selectedYear});case 5:_this.getCart();case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.getDataFromRes=function(data){var _this$state2=_this.state,formFields=_this$state2.formFields,cartData=_this$state2.cartData,updateFields=_this$state2.updateFields,postFields=_this$state2.postFields;formFields['Item']=data.value.Item;formFields['Price']=data.value.Price;formFields['Room']=data.value.Room;updateFields['Room']=data.value.Room;formFields['Source']=data.value.Source;updateFields['Source']=data.value.Source;formFields['add_duration']=data.value.add_duration;formFields['new_remark']=data.value.new_remark;updateFields['new_remark']=data.value.new_remark;postFields['times']=data.value.times;postFields['work_point']=data.value.work_point;_this.setState({formFields:formFields,updateFields:updateFields,postFields:postFields});};_this.handleSubmit=function(id){};_this.handleDialog=function(){_this.setState({isOpenTreatmentDone:false,isOpenReversal:false});};_this.handleSearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;_this.props.getCommonApi(\"custappt/?search=\".concat(searchString)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});},500);}_this.debouncedFn();};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var formFields;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:formFields=_this.state.formFields;formFields[\"custId\"]=data.id;formFields[\"custName\"]=data.cust_name;_this.setState({formFields:formFields,isOpenCustomer:false,customerOption:[]});_context2.next=6;return _this.props.updateForm('basicApptDetail',formFields);case 6:console.log(_this.props.basicApptDetail,\"sdfsadfasdf\");case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleCheckout=function(){var isOpenPayment=_this.state.isOpenPayment;isOpenPayment=true;_this.setState({isOpenPayment:isOpenPayment});};_this.handleChange=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref4){var _ref4$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref4$target=_ref4.target,value=_ref4$target.value,name=_ref4$target.name;formFields=_this.state.formFields;formFields[name]=value;_context3.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref5.apply(this,arguments);};}();_this.handleMenu=function(item,index){};return _this;}_createClass(BillOpsClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,_this$state3$tstaffLi=_this$state3.tstaffList,tstaffList=_this$state3$tstaffLi===void 0?[]:_this$state3$tstaffLi,_this$state3$menuItem=_this$state3.menuItems,menuItems=_this$state3$menuItem===void 0?[]:_this$state3$menuItem,activeMenu=_this$state3.activeMenu,selectedYear=_this$state3.selectedYear,yearList=_this$state3.yearList,isOpenTreatmentDone=_this$state3.isOpenTreatmentDone,headerDetails=_this$state3.headerDetails,tsStaff=_this$state3.tsStaff,isOpenReversal=_this$state3.isOpenReversal,treatmentIds=_this$state3.treatmentIds;var basicApptDetail=this.props.basicApptDetail;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row treatment-done-new p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 font-700 mb-3 title\"},\"Transaction Detail\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"fs-15 clear-line\",label:\"Back\",outline:false,onClick:function onClick(){return history.push(\"/admin/cart\");}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-4\"},menuItems.length>0?menuItems.map(function(data,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"menus fs-14 mr-4 \".concat(activeMenu===data.id?\"active\":\"\"),onClick:function onClick(){return _this2.handleMenu(data.id,data.label);}},data.label);}):\"\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(VoidPaidTrans,null))));}}]);return BillOpsClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{selected_cstomer:state.common.selected_cstomer,basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var BillOps=connect(mapStateToProps,mapDispatchToProps)(BillOpsClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/BillOps/billOps.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","VoidPaidTrans","BillOpsClass","state","tstaffList","headerDetails","label","sortKey","width","yearList","selectedYear","Date","getFullYear","isOpenTreatmentDone","tsStaff","workPoint","isOpenReversal","menuItems","to","id","activeMenu","componentWillMount","validator","element","message","autoForceUpdate","getCart","console","log","props","roomList","sourceList","staffList","cartData","duration","basicApptDetail","custId","then","key","data","setState","handleYearChange","target","value","name","getDataFromRes","formFields","updateFields","postFields","Item","Price","Room","Source","add_duration","new_remark","times","work_point","handleSubmit","handleDialog","handleSearch","event","persist","debouncedFn","debounce","searchString","status","customerOption","handleSelectCustomer","cust_name","isOpenCustomer","handleCheckout","isOpenPayment","handleChange","handleMenu","item","index","treatmentIds","push","length","map","mapStateToProps","selected_cstomer","common","appointment","mapDispatchToProps","dispatch","BillOps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './style.scss';\r\nimport { NormalButton, NormalInput, NormalSelect, InputSearch, NormalModal, TableWrapper } from 'component/common';\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport _ from 'lodash';\r\nimport { history } from 'helpers';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\"\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport { VoidPaidTrans } from './voidPaidTrans.js';\r\n\r\n\r\nexport class BillOpsClass extends Component {\r\n    state = {\r\n        tstaffList: [{}],\r\n        headerDetails: [\r\n            { label: 'Date', sortKey: false, width: \"60px\" },\r\n            { label: 'Treatment', width: \"120px\" },\r\n            { label: 'Trans Ref', sortKey: false, width: \"55px\" },\r\n            { label: 'Discription', sortKey: false, width: \"55px\" },\r\n            { label: 'Type', sortKey: false, width: \"55px\" },\r\n            { label: 'Exp Date', sortKey: false, width: \"55px\" },\r\n            { label: 'Amount', sortKey: false, width: \"55px\" },\r\n            { label: 'Status', sortKey: false, width: \"55px\" },\r\n            { label: 'Rev', sortKey: false, width: \"55px\" },\r\n            { label: 'Treat No', sortKey: false, width: \"55px\" },\r\n            { label: 'Limit', sortKey: false, width: \"55px\" },\r\n            { label: 'Sel Staff', sortKey: false, width: \"55px\" },\r\n            { label: 'Staff', sortKey: false, width: \"55px\" },\r\n        ],\r\n        // cartData: {},\r\n        yearList: [],\r\n        selectedYear: new Date().getFullYear(),\r\n        isOpenTreatmentDone: false,\r\n        tsStaff: {},\r\n        workPoint: 0,\r\n        isOpenReversal: false,\r\n        menuItems: [\r\n            //{ to: '/admin/catalog', label: \"Suspend Bill\", id: \"suspendBill\" },\r\n            //{ to: '/admin/catalog', label: \"Recall Sus Bill\", id: \"recallSusBill\" },\r\n            //{ to: '/admin/catalog', label: \"Recall Tran\", id: \"reacallBill\" },\r\n            //{ to: '/admin/catalog', label: \"Reprint Bill\", id: \"reprint\" },\r\n           // { to: '/admin/catalog', label: \"Void itam/bill\", id: \"VoidItemBill\" },\r\n            { to: '/admin/catalog', label: \"Void Paid Trans\", id: \"voidPaidTrns\" }\r\n        ],\r\n        activeMenu: \"voidPaidTrns\",\r\n    }\r\n\r\n    componentWillMount = () => {\r\n        this.validator = new SimpleReactValidator({\r\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\r\n            autoForceUpdate: this,\r\n        });\r\n        // this.props.getCommonApi('treatmentdone/Year/').then((key) => {\r\n        //     let { status, data } = key;\r\n        //     let { yearList } = this.state;\r\n        //     for (let value of data) {\r\n        //         yearList.push({ value: value, label: value })\r\n        //     }\r\n        //     this.setState({ yearList })\r\n        // })\r\n\r\n        // this.getCart();\r\n\r\n    }\r\n\r\n    getCart = () => {\r\n        console.log(this.props, \"sfgdfsgdfghgf\")\r\n        let { roomList, sourceList, staffList, cartData, duration, tstaffList, selectedYear } = this.state;\r\n        this.props.getCommonApi(`treatmentdone/?year=${selectedYear}&cust_id=${this.props.basicApptDetail.custId}`).then((key) => {\r\n            cartData = key;\r\n            tstaffList = key.data;\r\n            this.setState({ tstaffList });\r\n        })\r\n    }\r\n\r\n    handleYearChange = async ({ target: { value, name } }) => {\r\n        let { selectedYear } = this.state;\r\n        selectedYear = value;\r\n        await this.setState({\r\n            selectedYear\r\n        })\r\n        this.getCart();\r\n    }\r\n\r\n    getDataFromRes = (data) => {\r\n        let { formFields, cartData, updateFields, postFields } = this.state;\r\n        formFields['Item'] = data.value.Item;\r\n        formFields['Price'] = data.value.Price;\r\n        formFields['Room'] = data.value.Room;\r\n        updateFields['Room'] = data.value.Room;\r\n        formFields['Source'] = data.value.Source;\r\n        updateFields['Source'] = data.value.Source;\r\n        formFields['add_duration'] = data.value.add_duration;\r\n        formFields['new_remark'] = data.value.new_remark;\r\n        updateFields['new_remark'] = data.value.new_remark;\r\n        postFields['times'] = data.value.times;\r\n        postFields['work_point'] = data.value.work_point;\r\n        this.setState({\r\n            formFields,\r\n            updateFields,\r\n            postFields\r\n        })\r\n    }\r\n\r\n\r\n    // getYearList = (data) => {\r\n    //     let date = new Date().getFullYear();\r\n\r\n    //     let { yearList } = this.state;\r\n    //     for (let i = date; i > 1970; i--) {\r\n    //         yearList.push({ label: i, value: i });\r\n    //     }\r\n    //     this.setState({\r\n    //         yearList\r\n    //     })\r\n    // }\r\n\r\n    handleSubmit = (id) => {\r\n\r\n    }\r\n\r\n    handleDialog = () => {\r\n        this.setState({\r\n            isOpenTreatmentDone: false,\r\n            isOpenReversal: false\r\n        });\r\n    }\r\n\r\n    handleSearch = (event) => {\r\n        event.persist();\r\n\r\n        if (!this.debouncedFn) {\r\n            this.debouncedFn = _.debounce(() => {\r\n                let searchString = event.target.value;\r\n                this.props.getCommonApi(`custappt/?search=${searchString}`).then((key) => {\r\n\r\n                    let { status, data } = key;\r\n                    if (status === 200) {\r\n                        // for (let value of data) {\r\n                        //     customerList.push({ value: value.id, label: value.emp_name })\r\n                        // }\r\n                        this.setState({ customerOption: data })\r\n                    }\r\n                })\r\n            }, 500);\r\n        }\r\n        this.debouncedFn();\r\n    }\r\n\r\n    handleSelectCustomer = async (data) => {\r\n        let { formFields } = this.state;\r\n        formFields[\"custId\"] = data.id;\r\n        formFields[\"custName\"] = data.cust_name;\r\n        this.setState({ formFields, isOpenCustomer: false, customerOption: [] });\r\n        await this.props.updateForm('basicApptDetail', formFields)\r\n        console.log(this.props.basicApptDetail, \"sdfsadfasdf\")\r\n    }\r\n\r\n\r\n    handleCheckout = () => {\r\n        let { isOpenPayment } = this.state;\r\n        isOpenPayment = true;\r\n        this.setState({ isOpenPayment });\r\n    }\r\n\r\n    handleChange = async ({ target: { value, name } }) => {\r\n        let { formFields } = this.state;\r\n        formFields[name] = value;\r\n        await this.setState({\r\n            formFields,\r\n        });\r\n        // this.props.updateForm('customerDetail', formFields)\r\n        // await this.props.updateForm('appointmentCustomerDetail', formFields)\r\n    };\r\n\r\n\r\n    handleMenu = (item, index) => {\r\n\r\n    }\r\n\r\n    render() {\r\n        let { tstaffList = [], menuItems = [], activeMenu, selectedYear, yearList, isOpenTreatmentDone, headerDetails, tsStaff, isOpenReversal, treatmentIds } = this.state;\r\n        let { basicApptDetail } = this.props;\r\n        return (\r\n            <>\r\n                <div className=\"row treatment-done-new p-3\">\r\n                    <div className=\"col-12 header\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-10\">\r\n                                <p className=\"fs-18 font-700 mb-3 title\">Transaction Detail</p>\r\n                            </div>\r\n                            <div className=\"col-2\">\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-line\"\r\n                                label=\"Back\"\r\n                                outline={false}\r\n                                onClick={()=>history.push(`/admin/cart`)}\r\n                            />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"d-flex mb-4\">\r\n                            {\r\n                                menuItems.length > 0 ? menuItems.map((data, index) => {\r\n                                    return (\r\n\r\n                                        <div className={`menus fs-14 mr-4 ${activeMenu === data.id ? \"active\" : \"\"}`} onClick={() => this.handleMenu(data.id, data.label)}>{data.label}</div>\r\n\r\n                                    )\r\n                                }) : \"\"\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                        <VoidPaidTrans></VoidPaidTrans>\r\n                    </div>\r\n                </div>\r\n\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    selected_cstomer: state.common.selected_cstomer,\r\n    basicApptDetail: state.appointment.basicApptDetail,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        // getCustomer,\r\n        getCommonApi,\r\n        updateForm,\r\n        commonCreateApi,\r\n        commonPatchApi,\r\n        commonDeleteApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const BillOps = connect(mapStateToProps, mapDispatchToProps)(BillOpsClass)"]},"metadata":{},"sourceType":"module"}