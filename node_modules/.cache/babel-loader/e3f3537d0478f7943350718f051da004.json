{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/appointmentDragBehavior.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _draggable = _interopRequireDefault(require(\"../draggable\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar APPOINTMENT_ITEM_CLASS = \"dx-scheduler-appointment\";\n\nvar AppointmentDragBehavior = function () {\n  function AppointmentDragBehavior(scheduler) {\n    _classCallCheck(this, AppointmentDragBehavior);\n\n    this.scheduler = scheduler;\n    this.appointments = scheduler._appointments;\n    this.initialPosition = {\n      left: 0,\n      top: 0\n    };\n    this.appointmentInfo = null;\n  }\n\n  _createClass(AppointmentDragBehavior, [{\n    key: \"isAllDay\",\n    value: function (appointment) {\n      return appointment.data(\"dxAppointmentSettings\").allDay;\n    }\n  }, {\n    key: \"onDragStart\",\n    value: function (e) {\n      var itemSettings = e.itemSettings,\n          itemData = e.itemData,\n          initialPosition = e.initialPosition;\n      this.initialPosition = initialPosition;\n      this.appointmentInfo = {\n        appointment: itemData,\n        settings: itemSettings\n      };\n      this.appointments.notifyObserver(\"hideAppointmentTooltip\");\n    }\n  }, {\n    key: \"onDragMove\",\n    value: function (e) {\n      if (e.fromComponent !== e.toComponent) {\n        this.appointments.notifyObserver(\"removeDroppableCellClass\");\n      }\n    }\n  }, {\n    key: \"getAppointmentElement\",\n    value: function (e) {\n      var itemElement = e.event.data && e.event.data.itemElement || e.itemElement;\n      return (0, _renderer.default)(itemElement);\n    }\n  }, {\n    key: \"onDragEnd\",\n    value: function (e) {\n      var element = this.getAppointmentElement(e);\n\n      var rawAppointment = this.appointments._getItemData(element);\n\n      var container = this.appointments._getAppointmentContainer(this.isAllDay(element));\n\n      container.append(element);\n      this.appointments.notifyObserver(\"updateAppointmentAfterDrag\", {\n        event: e,\n        element: element,\n        rawAppointment: rawAppointment,\n        coordinates: this.initialPosition\n      });\n    }\n  }, {\n    key: \"getItemData\",\n    value: function (appointmentElement) {\n      var dataFromTooltip = (0, _renderer.default)(appointmentElement).data(_constants.LIST_ITEM_DATA_KEY);\n      var itemDataFromTooltip = null === dataFromTooltip || void 0 === dataFromTooltip ? void 0 : dataFromTooltip.appointment;\n\n      var itemDataFromGrid = this.appointments._getItemData(appointmentElement);\n\n      return itemDataFromTooltip || itemDataFromGrid;\n    }\n  }, {\n    key: \"getItemSettings\",\n    value: function (appointment) {\n      var itemData = (0, _renderer.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\n      return itemData && itemData.settings || [];\n    }\n  }, {\n    key: \"createDragStartHandler\",\n    value: function (options, appointmentDragging) {\n      var _this = this;\n\n      return function (e) {\n        e.itemData = _this.getItemData(e.itemElement);\n        e.itemSettings = _this.getItemSettings(e.itemElement);\n        appointmentDragging.onDragStart && appointmentDragging.onDragStart(e);\n\n        if (!e.cancel) {\n          options.onDragStart(e);\n        }\n      };\n    }\n  }, {\n    key: \"createDragMoveHandler\",\n    value: function (options, appointmentDragging) {\n      return function (e) {\n        appointmentDragging.onDragMove && appointmentDragging.onDragMove(e);\n\n        if (!e.cancel) {\n          options.onDragMove(e);\n        }\n      };\n    }\n  }, {\n    key: \"createDragEndHandler\",\n    value: function (options, appointmentDragging) {\n      var _this2 = this;\n\n      return function (e) {\n        _this2.appointmentInfo = null;\n        appointmentDragging.onDragEnd && appointmentDragging.onDragEnd(e);\n\n        if (!e.cancel) {\n          options.onDragEnd(e);\n\n          if (e.fromComponent !== e.toComponent) {\n            appointmentDragging.onRemove && appointmentDragging.onRemove(e);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"createDropHandler\",\n    value: function (appointmentDragging) {\n      var _this3 = this;\n\n      return function (e) {\n        var updatedData = _this3.appointments.invoke(\"getUpdatedData\", e.itemData);\n\n        e.itemData = (0, _extend.extend)({}, e.itemData, updatedData);\n\n        if (e.fromComponent !== e.toComponent) {\n          appointmentDragging.onAdd && appointmentDragging.onAdd(e);\n        }\n      };\n    }\n  }, {\n    key: \"addTo\",\n    value: function (container, config) {\n      var appointmentDragging = this.scheduler.option(\"appointmentDragging\") || {};\n      var options = (0, _extend.extend)({\n        component: this.scheduler,\n        contentTemplate: null,\n        filter: \".\".concat(APPOINTMENT_ITEM_CLASS),\n        immediate: false,\n        onDragStart: this.onDragStart.bind(this),\n        onDragMove: this.onDragMove.bind(this),\n        onDragEnd: this.onDragEnd.bind(this)\n      }, config);\n\n      this.appointments._createComponent(container, _draggable.default, (0, _extend.extend)({}, options, appointmentDragging, {\n        onDragStart: this.createDragStartHandler(options, appointmentDragging),\n        onDragMove: this.createDragMoveHandler(options, appointmentDragging),\n        onDragEnd: this.createDragEndHandler(options, appointmentDragging),\n        onDrop: this.createDropHandler(appointmentDragging)\n      }));\n    }\n  }, {\n    key: \"updateDragSource\",\n    value: function (appointment, settings) {\n      var appointmentInfo = this.appointmentInfo;\n\n      if (appointmentInfo || appointment) {\n        var currentAppointment = appointment || appointmentInfo.appointment;\n        var currentSettings = settings || appointmentInfo.settings;\n\n        this.appointments._setDragSourceAppointment(currentAppointment, currentSettings);\n      }\n    }\n  }]);\n\n  return AppointmentDragBehavior;\n}();\n\nexports.default = AppointmentDragBehavior;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/node_modules/devextreme/ui/scheduler/appointmentDragBehavior.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_draggable","_extend","_constants","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","APPOINTMENT_ITEM_CLASS","AppointmentDragBehavior","scheduler","appointments","_appointments","initialPosition","left","top","appointmentInfo","value","appointment","data","allDay","e","itemSettings","itemData","settings","notifyObserver","fromComponent","toComponent","itemElement","event","element","getAppointmentElement","rawAppointment","_getItemData","container","_getAppointmentContainer","isAllDay","append","coordinates","appointmentElement","dataFromTooltip","LIST_ITEM_DATA_KEY","itemDataFromTooltip","itemDataFromGrid","options","appointmentDragging","_this","getItemData","getItemSettings","onDragStart","cancel","onDragMove","_this2","onDragEnd","onRemove","_this3","updatedData","invoke","extend","onAdd","config","option","component","contentTemplate","filter","concat","immediate","bind","_createComponent","createDragStartHandler","createDragMoveHandler","createDragEndHandler","onDrop","createDropHandler","currentAppointment","currentSettings","_setDragSourceAppointment","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/appointmentDragBehavior.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _draggable = _interopRequireDefault(require(\"../draggable\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _constants = require(\"./constants\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar APPOINTMENT_ITEM_CLASS = \"dx-scheduler-appointment\";\r\nvar AppointmentDragBehavior = function() {\r\n    function AppointmentDragBehavior(scheduler) {\r\n        _classCallCheck(this, AppointmentDragBehavior);\r\n        this.scheduler = scheduler;\r\n        this.appointments = scheduler._appointments;\r\n        this.initialPosition = {\r\n            left: 0,\r\n            top: 0\r\n        };\r\n        this.appointmentInfo = null\r\n    }\r\n    _createClass(AppointmentDragBehavior, [{\r\n        key: \"isAllDay\",\r\n        value: function(appointment) {\r\n            return appointment.data(\"dxAppointmentSettings\").allDay\r\n        }\r\n    }, {\r\n        key: \"onDragStart\",\r\n        value: function(e) {\r\n            var itemSettings = e.itemSettings,\r\n                itemData = e.itemData,\r\n                initialPosition = e.initialPosition;\r\n            this.initialPosition = initialPosition;\r\n            this.appointmentInfo = {\r\n                appointment: itemData,\r\n                settings: itemSettings\r\n            };\r\n            this.appointments.notifyObserver(\"hideAppointmentTooltip\")\r\n        }\r\n    }, {\r\n        key: \"onDragMove\",\r\n        value: function(e) {\r\n            if (e.fromComponent !== e.toComponent) {\r\n                this.appointments.notifyObserver(\"removeDroppableCellClass\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getAppointmentElement\",\r\n        value: function(e) {\r\n            var itemElement = e.event.data && e.event.data.itemElement || e.itemElement;\r\n            return (0, _renderer.default)(itemElement)\r\n        }\r\n    }, {\r\n        key: \"onDragEnd\",\r\n        value: function(e) {\r\n            var element = this.getAppointmentElement(e);\r\n            var rawAppointment = this.appointments._getItemData(element);\r\n            var container = this.appointments._getAppointmentContainer(this.isAllDay(element));\r\n            container.append(element);\r\n            this.appointments.notifyObserver(\"updateAppointmentAfterDrag\", {\r\n                event: e,\r\n                element: element,\r\n                rawAppointment: rawAppointment,\r\n                coordinates: this.initialPosition\r\n            })\r\n        }\r\n    }, {\r\n        key: \"getItemData\",\r\n        value: function(appointmentElement) {\r\n            var dataFromTooltip = (0, _renderer.default)(appointmentElement).data(_constants.LIST_ITEM_DATA_KEY);\r\n            var itemDataFromTooltip = null === dataFromTooltip || void 0 === dataFromTooltip ? void 0 : dataFromTooltip.appointment;\r\n            var itemDataFromGrid = this.appointments._getItemData(appointmentElement);\r\n            return itemDataFromTooltip || itemDataFromGrid\r\n        }\r\n    }, {\r\n        key: \"getItemSettings\",\r\n        value: function(appointment) {\r\n            var itemData = (0, _renderer.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\r\n            return itemData && itemData.settings || []\r\n        }\r\n    }, {\r\n        key: \"createDragStartHandler\",\r\n        value: function(options, appointmentDragging) {\r\n            var _this = this;\r\n            return function(e) {\r\n                e.itemData = _this.getItemData(e.itemElement);\r\n                e.itemSettings = _this.getItemSettings(e.itemElement);\r\n                appointmentDragging.onDragStart && appointmentDragging.onDragStart(e);\r\n                if (!e.cancel) {\r\n                    options.onDragStart(e)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createDragMoveHandler\",\r\n        value: function(options, appointmentDragging) {\r\n            return function(e) {\r\n                appointmentDragging.onDragMove && appointmentDragging.onDragMove(e);\r\n                if (!e.cancel) {\r\n                    options.onDragMove(e)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createDragEndHandler\",\r\n        value: function(options, appointmentDragging) {\r\n            var _this2 = this;\r\n            return function(e) {\r\n                _this2.appointmentInfo = null;\r\n                appointmentDragging.onDragEnd && appointmentDragging.onDragEnd(e);\r\n                if (!e.cancel) {\r\n                    options.onDragEnd(e);\r\n                    if (e.fromComponent !== e.toComponent) {\r\n                        appointmentDragging.onRemove && appointmentDragging.onRemove(e)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createDropHandler\",\r\n        value: function(appointmentDragging) {\r\n            var _this3 = this;\r\n            return function(e) {\r\n                var updatedData = _this3.appointments.invoke(\"getUpdatedData\", e.itemData);\r\n                e.itemData = (0, _extend.extend)({}, e.itemData, updatedData);\r\n                if (e.fromComponent !== e.toComponent) {\r\n                    appointmentDragging.onAdd && appointmentDragging.onAdd(e)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"addTo\",\r\n        value: function(container, config) {\r\n            var appointmentDragging = this.scheduler.option(\"appointmentDragging\") || {};\r\n            var options = (0, _extend.extend)({\r\n                component: this.scheduler,\r\n                contentTemplate: null,\r\n                filter: \".\".concat(APPOINTMENT_ITEM_CLASS),\r\n                immediate: false,\r\n                onDragStart: this.onDragStart.bind(this),\r\n                onDragMove: this.onDragMove.bind(this),\r\n                onDragEnd: this.onDragEnd.bind(this)\r\n            }, config);\r\n            this.appointments._createComponent(container, _draggable.default, (0, _extend.extend)({}, options, appointmentDragging, {\r\n                onDragStart: this.createDragStartHandler(options, appointmentDragging),\r\n                onDragMove: this.createDragMoveHandler(options, appointmentDragging),\r\n                onDragEnd: this.createDragEndHandler(options, appointmentDragging),\r\n                onDrop: this.createDropHandler(appointmentDragging)\r\n            }))\r\n        }\r\n    }, {\r\n        key: \"updateDragSource\",\r\n        value: function(appointment, settings) {\r\n            var appointmentInfo = this.appointmentInfo;\r\n            if (appointmentInfo || appointment) {\r\n                var currentAppointment = appointment || appointmentInfo.appointment;\r\n                var currentSettings = settings || appointmentInfo.settings;\r\n                this.appointments._setDragSourceAppointment(currentAppointment, currentSettings)\r\n            }\r\n        }\r\n    }]);\r\n    return AppointmentDragBehavior\r\n}();\r\nexports.default = AppointmentDragBehavior;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}