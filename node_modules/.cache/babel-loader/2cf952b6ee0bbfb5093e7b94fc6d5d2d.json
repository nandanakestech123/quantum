{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\Catalog\\\\services\\\\itemsDetail.js\";\nimport React, { Component } from 'react';\nimport { NormalButton, NormalSelect, NormalModal, NormalInput } from 'component/common';\nimport { InputSearch, TableWrapper } from 'component/common';\nimport Brush from 'assets/images/make-up-brush.png';\nimport filter from \"assets/images/filter.png\";\nimport CartImg from \"assets/images/shopping-cart.png\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, commonCreateApi, updateForm } from 'redux/actions/common';\nimport closeIcon from 'assets/images/close.png';\nimport { dateFormat } from 'service/helperFunctions';\nimport _ from 'lodash';\nimport { history } from 'helpers';\nexport class ItemDetailClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      servicesDetail: {},\n      isOpenModal: false,\n      branchList: [],\n      customerDetail: {\n        branchId: \"\",\n        cust_noid: \"\"\n      },\n      customerList: []\n    };\n\n    this.componentDidMount = () => {\n      console.log(this.props, \"jhksdfkjsdhfks\");\n      this.getDetail();\n      let {\n        productCard,\n        branchList\n      } = this.state;\n      this.props.getCommonApi(`treatment/Outlet/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            branchList.push({\n              value: value.id,\n              label: value.itemsite_desc\n            });\n          }\n\n          this.setState({\n            branchList\n          }); // console.log(brachList, \"jhksdfkjsdhfks\")\n        }\n      });\n    };\n\n    this.getDetail = () => {\n      let {\n        productCard,\n        branchList\n      } = this.state;\n      let {\n        menuId,\n        id,\n        api\n      } = this.props;\n      this.props.getCommonApi(`${api}/${id}/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          this.setState({\n            servicesDetail: data\n          });\n        }\n      });\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        customerDetail,\n        customerList\n      } = this.state;\n      console.log(\"uihwkjrwkej\", name, value);\n      customerDetail[name] = value;\n      await this.setState({\n        customerDetail\n      });\n\n      if (name === \"branchId\") {\n        this.props.getCommonApi(`custappt/?Outlet=${value}`).then(key => {\n          let {\n            status,\n            data\n          } = key;\n\n          if (status === 200) {\n            for (let value of data) {\n              customerList.push({\n                value: value.id,\n                label: value.cust_name + \" | \" + value.cust_phone1 + \" | \" + value.cust_code\n              });\n            }\n\n            this.setState({\n              customerList\n            });\n          }\n        });\n      } // this.props.updateForm('selected_customer', customerDetail)\n\n    };\n\n    this.handleCreateCart = () => {\n      let {\n        productCard,\n        customerDetail,\n        servicesDetail\n      } = this.state;\n      let {\n        selected_cstomer\n      } = this.props;\n      console.log(servicesDetail, customerDetail, selected_cstomer, \"sfdgsdfhshgf\");\n      let payload = {\n        cust_noid: selected_cstomer.cust_noid,\n        cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\n        // lineno : 1,\n        itemcodeid: selected_cstomer.branchId,\n        quantity: customerDetail.quantity,\n        price: servicesDetail.item_price\n      };\n      this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}&cust_noid=${selected_cstomer.cust_noid}`).then(key => {\n        let {\n          status,\n          data,\n          error\n        } = key; // if (status === 200) {\n\n        console.log(\"asdfasdfasaff\", data, payload);\n\n        if (data.length > 0) {\n          console.log(\"asdfasdfasaff == if\", data, payload);\n          this.props.commonCreateApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_id=${data[0].cart_id}`, payload).then(key => {\n            let {\n              status,\n              data\n            } = key;\n\n            if (status === 201) {\n              this.setState({\n                isOpenModal: false\n              });\n            }\n          });\n        } else {\n          console.log(\"asdfasdfasaff == else\", data, payload);\n          this.props.commonCreateApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}`, payload).then(key => {\n            let {\n              status,\n              data\n            } = key;\n\n            if (status === 201) {\n              this.setState({\n                isOpenModal: false\n              });\n              history.push('/admin/catalog');\n            }\n          });\n        } // }\n\n      });\n    };\n\n    this.handleSearch = event => {\n      event.persist();\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(() => {\n          let searchString = event.target.value;\n          let data = {\n            search: searchString\n          }; // this.queryHandler(data)\n\n          let {\n            customerList,\n            customerDetail\n          } = this.state;\n          this.props.getCommonApi(`custappt/?Outlet=${customerDetail.branchId}&search=${searchString}`).then(key => {\n            let {\n              status,\n              data\n            } = key;\n\n            if (status === 200) {\n              // for (let value of data) {\n              //     customerList.push({ value: value.id, label: value.emp_name })\n              // }\n              this.setState({\n                customerList: data\n              });\n            }\n          });\n        }, 500);\n      }\n\n      this.debouncedFn();\n    };\n\n    this.handleCloseDialog = () => {\n      this.setState({\n        isOpenModal: false\n      });\n    };\n\n    this.handleSelectCustomer = data => {\n      let {\n        customerList,\n        customerDetail,\n        servicesDetail\n      } = this.state;\n      customerDetail['cust_noid'] = data.id;\n      customerDetail['cust_name'] = data.cust_name;\n      this.setState({\n        customerDetail\n      }); // this.props.updateForm('selected_customer', customerDetail)\n    };\n\n    this.handleAddCart = async (data, price) => {\n      await this.props.updateForm('selectedCart', data); // setTimeout(() => {\n      // history.push(\"/admin/cart\");\n\n      this.props.handleAddCart(data, price); // }, 5000); \n    };\n  }\n\n  render() {\n    let {\n      servicesDetail,\n      isOpenModal,\n      branchList,\n      customerList,\n      customerDetail\n    } = this.state;\n    let {\n      selected_cstomer\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-detail p-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, servicesDetail ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-view text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      width: \"230\",\n      src: servicesDetail.Stock_PIC,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"product-name fs-18\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 37\n      }\n    }, servicesDetail.item_desc), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"fs-14 my-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 37\n      }\n    }, servicesDetail.item_name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"list-price fs-14\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 41\n      }\n    }, \"Price:\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fs-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 79\n      }\n    }, \" $ \", servicesDetail.item_price))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 mt-5\",\n      label: \"Add to Cart\",\n      onClick: () => this.handleAddCart(servicesDetail, servicesDetail.item_price),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 37\n      }\n    })))) : \"\"));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  // customerDetail: state.appointment.customerDetail,\n  selected_cstomer: state.common.selected_cstomer\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    // getCustomer,\n    getCommonApi,\n    commonCreateApi,\n    updateForm\n  }, dispatch);\n};\n\nexport const ItemDetail = connect(mapStateToProps, mapDispatchToProps)(ItemDetailClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Catalog/services/itemsDetail.js"],"names":["React","Component","NormalButton","NormalSelect","NormalModal","NormalInput","InputSearch","TableWrapper","Brush","filter","CartImg","connect","bindActionCreators","getCommonApi","commonCreateApi","updateForm","closeIcon","dateFormat","_","history","ItemDetailClass","state","servicesDetail","isOpenModal","branchList","customerDetail","branchId","cust_noid","customerList","componentDidMount","console","log","props","getDetail","productCard","then","key","status","data","value","push","id","label","itemsite_desc","setState","menuId","api","handleChange","target","name","cust_name","cust_phone1","cust_code","handleCreateCart","selected_cstomer","payload","cart_date","Date","itemcodeid","quantity","price","item_price","error","length","cart_id","handleSearch","event","persist","debouncedFn","debounce","searchString","search","handleCloseDialog","handleSelectCustomer","handleAddCart","render","Stock_PIC","item_desc","item_name","mapStateToProps","common","mapDispatchToProps","dispatch","ItemDetail"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,YAAT,EAAuBC,YAAvB,EAAqCC,WAArC,EAAkDC,WAAlD,QAAqE,kBAArE;AACA,SAASC,WAAT,EAAsBC,YAAtB,QAA0C,kBAA1C;AACA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP,MAAoB,iCAApB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,YAAT,EAAuBC,eAAvB,EAAwCC,UAAxC,QAA0D,sBAA1D;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,OAAT,QAAwB,SAAxB;AAEA,OAAO,MAAMC,eAAN,SAA8BnB,SAA9B,CAAwC;AAAA;AAAA;AAAA,SAC3CoB,KAD2C,GACnC;AACJC,MAAAA,cAAc,EAAE,EADZ;AAIJC,MAAAA,WAAW,EAAE,KAJT;AAKJC,MAAAA,UAAU,EAAE,EALR;AAMJC,MAAAA,cAAc,EAAE;AACZC,QAAAA,QAAQ,EAAE,EADE;AAEZC,QAAAA,SAAS,EAAE;AAFC,OANZ;AAUJC,MAAAA,YAAY,EAAE;AAVV,KADmC;;AAAA,SAc3CC,iBAd2C,GAcvB,MAAM;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB,EAAwB,gBAAxB;AACA,WAAKC,SAAL;AACA,UAAI;AAAEC,QAAAA,WAAF;AAAeV,QAAAA;AAAf,UAA8B,KAAKH,KAAvC;AAEA,WAAKW,KAAL,CAAWnB,YAAX,CAAyB,mBAAzB,EAA6CsB,IAA7C,CAAmDC,GAAD,IAAS;AACvD,YAAI;AAAEC,UAAAA,MAAF;AAAUC,UAAAA;AAAV,YAAmBF,GAAvB;;AACA,YAAIC,MAAM,KAAK,GAAf,EAAoB;AAChB,eAAK,IAAIE,KAAT,IAAkBD,IAAlB,EAAwB;AACpBd,YAAAA,UAAU,CAACgB,IAAX,CAAgB;AAAED,cAAAA,KAAK,EAAEA,KAAK,CAACE,EAAf;AAAmBC,cAAAA,KAAK,EAAEH,KAAK,CAACI;AAAhC,aAAhB;AACH;;AACD,eAAKC,QAAL,CAAc;AAAEpB,YAAAA;AAAF,WAAd,EAJgB,CAKhB;AACH;AACJ,OATD;AAUH,KA7B0C;;AAAA,SA+B3CS,SA/B2C,GA+B/B,MAAM;AACd,UAAI;AAAEC,QAAAA,WAAF;AAAeV,QAAAA;AAAf,UAA8B,KAAKH,KAAvC;AACA,UAAI;AAAEwB,QAAAA,MAAF;AAAUJ,QAAAA,EAAV;AAAcK,QAAAA;AAAd,UAAsB,KAAKd,KAA/B;AACA,WAAKA,KAAL,CAAWnB,YAAX,CAAyB,GAAEiC,GAAI,IAAGL,EAAG,GAArC,EAAyCN,IAAzC,CAA+CC,GAAD,IAAS;AACnD,YAAI;AAAEC,UAAAA,MAAF;AAAUC,UAAAA;AAAV,YAAmBF,GAAvB;;AACA,YAAIC,MAAM,KAAK,GAAf,EAAoB;AAEhB,eAAKO,QAAL,CAAc;AAAEtB,YAAAA,cAAc,EAAEgB;AAAlB,WAAd;AACH;AACJ,OAND;AAOH,KAzC0C;;AAAA,SA2C3CS,YA3C2C,GA2C5B,OAAO;AAAEC,MAAAA,MAAM,EAAE;AAAET,QAAAA,KAAF;AAASU,QAAAA;AAAT;AAAV,KAAP,KAAuC;AAClD,UAAI;AAAExB,QAAAA,cAAF;AAAkBG,QAAAA;AAAlB,UAAmC,KAAKP,KAA5C;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BkB,IAA3B,EAAiCV,KAAjC;AACAd,MAAAA,cAAc,CAACwB,IAAD,CAAd,GAAuBV,KAAvB;AACA,YAAM,KAAKK,QAAL,CAAc;AAChBnB,QAAAA;AADgB,OAAd,CAAN;;AAGA,UAAIwB,IAAI,KAAK,UAAb,EAAyB;AACrB,aAAKjB,KAAL,CAAWnB,YAAX,CAAyB,oBAAmB0B,KAAM,EAAlD,EAAqDJ,IAArD,CAA2DC,GAAD,IAAS;AAC/D,cAAI;AAAEC,YAAAA,MAAF;AAAUC,YAAAA;AAAV,cAAmBF,GAAvB;;AACA,cAAIC,MAAM,KAAK,GAAf,EAAoB;AAChB,iBAAK,IAAIE,KAAT,IAAkBD,IAAlB,EAAwB;AACpBV,cAAAA,YAAY,CAACY,IAAb,CAAkB;AAAED,gBAAAA,KAAK,EAAEA,KAAK,CAACE,EAAf;AAAmBC,gBAAAA,KAAK,EAAEH,KAAK,CAACW,SAAN,GAAkB,KAAlB,GAA0BX,KAAK,CAACY,WAAhC,GAA8C,KAA9C,GAAsDZ,KAAK,CAACa;AAAtF,eAAlB;AACH;;AACD,iBAAKR,QAAL,CAAc;AAAEhB,cAAAA;AAAF,aAAd;AACH;AACJ,SARD;AASH,OAjBiD,CAkBlD;;AACH,KA9D0C;;AAAA,SAgE3CyB,gBAhE2C,GAgExB,MAAM;AACrB,UAAI;AAAEnB,QAAAA,WAAF;AAAeT,QAAAA,cAAf;AAA+BH,QAAAA;AAA/B,UAAkD,KAAKD,KAA3D;AACA,UAAI;AAAEiC,QAAAA;AAAF,UAAuB,KAAKtB,KAAhC;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAYT,cAAZ,EAA4BG,cAA5B,EAA4C6B,gBAA5C,EAA8D,cAA9D;AACA,UAAIC,OAAO,GAAG;AACV5B,QAAAA,SAAS,EAAE2B,gBAAgB,CAAC3B,SADlB;AAEV6B,QAAAA,SAAS,EAAEvC,UAAU,CAAC,IAAIwC,IAAJ,EAAD,EAAa,YAAb,CAFX;AAGV;AACAC,QAAAA,UAAU,EAAEJ,gBAAgB,CAAC5B,QAJnB;AAKViC,QAAAA,QAAQ,EAAElC,cAAc,CAACkC,QALf;AAMVC,QAAAA,KAAK,EAAEtC,cAAc,CAACuC;AANZ,OAAd;AAQA,WAAK7B,KAAL,CAAWnB,YAAX,CAAyB,8BAA6ByC,gBAAgB,CAAC5B,QAAS,cAAaT,UAAU,CAAC,IAAIwC,IAAJ,EAAD,EAAa,YAAb,CAA2B,cAAaH,gBAAgB,CAAC3B,SAAU,EAA1K,EAA6KQ,IAA7K,CAAmLC,GAAD,IAAS;AACvL,YAAI;AAAEC,UAAAA,MAAF;AAAUC,UAAAA,IAAV;AAAgBwB,UAAAA;AAAhB,YAA0B1B,GAA9B,CADuL,CAEvL;;AACAN,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BO,IAA7B,EAAmCiB,OAAnC;;AACA,YAAIjB,IAAI,CAACyB,MAAL,GAAc,CAAlB,EAAqB;AACjBjC,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCO,IAAnC,EAAyCiB,OAAzC;AACA,eAAKvB,KAAL,CAAWlB,eAAX,CAA4B,wBAAuBwC,gBAAgB,CAAC5B,QAAS,YAAWY,IAAI,CAAC,CAAD,CAAJ,CAAQ0B,OAAQ,EAAxG,EAA2GT,OAA3G,EAAoHpB,IAApH,CAA0HC,GAAD,IAAS;AAC9H,gBAAI;AAAEC,cAAAA,MAAF;AAAUC,cAAAA;AAAV,gBAAmBF,GAAvB;;AACA,gBAAIC,MAAM,KAAK,GAAf,EAAoB;AAChB,mBAAKO,QAAL,CAAc;AAAErB,gBAAAA,WAAW,EAAE;AAAf,eAAd;AACH;AACJ,WALD;AAMH,SARD,MAQO;AACHO,UAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCO,IAArC,EAA2CiB,OAA3C;AACA,eAAKvB,KAAL,CAAWlB,eAAX,CAA4B,wBAAuBwC,gBAAgB,CAAC5B,QAAS,EAA7E,EAAgF6B,OAAhF,EAAyFpB,IAAzF,CAA+FC,GAAD,IAAS;AACnG,gBAAI;AAAEC,cAAAA,MAAF;AAAUC,cAAAA;AAAV,gBAAmBF,GAAvB;;AACA,gBAAIC,MAAM,KAAK,GAAf,EAAoB;AAChB,mBAAKO,QAAL,CAAc;AAAErB,gBAAAA,WAAW,EAAE;AAAf,eAAd;AACAJ,cAAAA,OAAO,CAACqB,IAAR,CAAa,gBAAb;AACH;AACJ,WAND;AAOH,SArBsL,CAuBvL;;AACH,OAxBD;AA2BH,KAvG0C;;AAAA,SAyG3CyB,YAzG2C,GAyG3BC,KAAD,IAAW;AACtBA,MAAAA,KAAK,CAACC,OAAN;;AAEA,UAAI,CAAC,KAAKC,WAAV,EAAuB;AACnB,aAAKA,WAAL,GAAmBlD,CAAC,CAACmD,QAAF,CAAW,MAAM;AAChC,cAAIC,YAAY,GAAGJ,KAAK,CAAClB,MAAN,CAAaT,KAAhC;AACA,cAAID,IAAI,GAAG;AAAEiC,YAAAA,MAAM,EAAED;AAAV,WAAX,CAFgC,CAGhC;;AACA,cAAI;AAAE1C,YAAAA,YAAF;AAAgBH,YAAAA;AAAhB,cAAmC,KAAKJ,KAA5C;AACA,eAAKW,KAAL,CAAWnB,YAAX,CAAyB,oBAAmBY,cAAc,CAACC,QAAS,WAAU4C,YAAa,EAA3F,EAA8FnC,IAA9F,CAAoGC,GAAD,IAAS;AAExG,gBAAI;AAAEC,cAAAA,MAAF;AAAUC,cAAAA;AAAV,gBAAmBF,GAAvB;;AACA,gBAAIC,MAAM,KAAK,GAAf,EAAoB;AAChB;AACA;AACA;AACA,mBAAKO,QAAL,CAAc;AAAEhB,gBAAAA,YAAY,EAAEU;AAAhB,eAAd;AACH;AACJ,WATD;AAUH,SAfkB,EAehB,GAfgB,CAAnB;AAgBH;;AACD,WAAK8B,WAAL;AACH,KA/H0C;;AAAA,SAiI3CI,iBAjI2C,GAiIvB,MAAM;AACtB,WAAK5B,QAAL,CAAc;AACVrB,QAAAA,WAAW,EAAE;AADH,OAAd;AAGH,KArI0C;;AAAA,SAuI3CkD,oBAvI2C,GAuInBnC,IAAD,IAAU;AAC7B,UAAI;AAAEV,QAAAA,YAAF;AAAgBH,QAAAA,cAAhB;AAAgCH,QAAAA;AAAhC,UAAmD,KAAKD,KAA5D;AACAI,MAAAA,cAAc,CAAC,WAAD,CAAd,GAA8Ba,IAAI,CAACG,EAAnC;AACAhB,MAAAA,cAAc,CAAC,WAAD,CAAd,GAA8Ba,IAAI,CAACY,SAAnC;AACA,WAAKN,QAAL,CAAc;AAAEnB,QAAAA;AAAF,OAAd,EAJ6B,CAK7B;AACH,KA7I0C;;AAAA,SA+I3CiD,aA/I2C,GA+I3B,OAAOpC,IAAP,EAAasB,KAAb,KAAuB;AAEnC,YAAM,KAAK5B,KAAL,CAAWjB,UAAX,CAAsB,cAAtB,EAAsCuB,IAAtC,CAAN,CAFmC,CAGnC;AACA;;AACA,WAAKN,KAAL,CAAW0C,aAAX,CAAyBpC,IAAzB,EAA+BsB,KAA/B,EALmC,CAMnC;AACH,KAtJ0C;AAAA;;AAwJ3Ce,EAAAA,MAAM,GAAG;AACL,QAAI;AAAErD,MAAAA,cAAF;AAAkBC,MAAAA,WAAlB;AAA+BC,MAAAA,UAA/B;AAA2CI,MAAAA,YAA3C;AAAyDH,MAAAA;AAAzD,QAA4E,KAAKJ,KAArF;AACA,QAAI;AAAEiC,MAAAA;AAAF,QAAuB,KAAKtB,KAAhC;AACA,wBACI,uDACI;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKV,cAAc,gBACX;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAC,KAAX;AAAiB,MAAA,GAAG,EAAEA,cAAc,CAACsD,SAArC;AAAgD,MAAA,GAAG,EAAC,EAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CAFJ,eAOI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAmCtD,cAAc,CAACuD,SAAlD,CADJ,eAEI;AAAG,MAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2BvD,cAAc,CAACwD,SAA1C,CAFJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAsC;AAAM,MAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA4BxD,cAAc,CAACuC,UAA3C,CAAtC,CADJ,CAJJ,CADJ,CAPJ,eAkBI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AACI,MAAA,MAAM,EAAE,IADZ;AAEI,MAAA,SAAS,EAAC,mBAFd;AAGI,MAAA,KAAK,EAAC,aAHV;AAII,MAAA,OAAO,EAAE,MAAM,KAAKa,aAAL,CAAmBpD,cAAnB,EAAmCA,cAAc,CAACuC,UAAlD,CAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CAlBJ,CADW,GA8BF,EA/BjB,CADJ,CADJ;AAsCH;;AAjM0C;;AAqM/C,MAAMkB,eAAe,GAAI1D,KAAD,KAAY;AAChC;AACAiC,EAAAA,gBAAgB,EAAEjC,KAAK,CAAC2D,MAAN,CAAa1B;AAFC,CAAZ,CAAxB;;AAKA,MAAM2B,kBAAkB,GAAGC,QAAQ,IAAI;AACnC,SAAOtE,kBAAkB,CAAC;AACtB;AACAC,IAAAA,YAFsB;AAGtBC,IAAAA,eAHsB;AAItBC,IAAAA;AAJsB,GAAD,EAKtBmE,QALsB,CAAzB;AAMH,CAPD;;AASA,OAAO,MAAMC,UAAU,GAAGxE,OAAO,CAACoE,eAAD,EAAkBE,kBAAlB,CAAP,CAA6C7D,eAA7C,CAAnB","sourcesContent":["import React, { Component } from 'react'\r\nimport { NormalButton, NormalSelect, NormalModal, NormalInput } from 'component/common';\r\nimport { InputSearch, TableWrapper } from 'component/common';\r\nimport Brush from 'assets/images/make-up-brush.png'\r\nimport filter from \"assets/images/filter.png\";\r\nimport CartImg from \"assets/images/shopping-cart.png\";\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, commonCreateApi, updateForm } from 'redux/actions/common';\r\nimport closeIcon from 'assets/images/close.png';\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport _ from 'lodash';\r\nimport { history } from 'helpers';\r\n\r\nexport class ItemDetailClass extends Component {\r\n    state = {\r\n        servicesDetail: {\r\n\r\n        },\r\n        isOpenModal: false,\r\n        branchList: [],\r\n        customerDetail: {\r\n            branchId: \"\",\r\n            cust_noid: \"\"\r\n        },\r\n        customerList: []\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        console.log(this.props, \"jhksdfkjsdhfks\")\r\n        this.getDetail();\r\n        let { productCard, branchList } = this.state;\r\n\r\n        this.props.getCommonApi(`treatment/Outlet/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    branchList.push({ value: value.id, label: value.itemsite_desc })\r\n                }\r\n                this.setState({ branchList })\r\n                // console.log(brachList, \"jhksdfkjsdhfks\")\r\n            }\r\n        })\r\n    }\r\n\r\n    getDetail = () => {\r\n        let { productCard, branchList } = this.state;\r\n        let { menuId, id, api } = this.props;\r\n        this.props.getCommonApi(`${api}/${id}/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n\r\n                this.setState({ servicesDetail: data })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleChange = async ({ target: { value, name } }) => {\r\n        let { customerDetail, customerList } = this.state;\r\n        console.log(\"uihwkjrwkej\", name, value)\r\n        customerDetail[name] = value;\r\n        await this.setState({\r\n            customerDetail,\r\n        });\r\n        if (name === \"branchId\") {\r\n            this.props.getCommonApi(`custappt/?Outlet=${value}`).then((key) => {\r\n                let { status, data } = key;\r\n                if (status === 200) {\r\n                    for (let value of data) {\r\n                        customerList.push({ value: value.id, label: value.cust_name + \" | \" + value.cust_phone1 + \" | \" + value.cust_code })\r\n                    }\r\n                    this.setState({ customerList })\r\n                }\r\n            })\r\n        }\r\n        // this.props.updateForm('selected_customer', customerDetail)\r\n    }\r\n\r\n    handleCreateCart = () => {\r\n        let { productCard, customerDetail, servicesDetail } = this.state;\r\n        let { selected_cstomer } = this.props;\r\n        console.log(servicesDetail, customerDetail, selected_cstomer, \"sfdgsdfhshgf\")\r\n        let payload = {\r\n            cust_noid: selected_cstomer.cust_noid,\r\n            cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n            // lineno : 1,\r\n            itemcodeid: selected_cstomer.branchId,\r\n            quantity: customerDetail.quantity,\r\n            price: servicesDetail.item_price\r\n        }\r\n        this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}&cust_noid=${selected_cstomer.cust_noid}`).then((key) => {\r\n            let { status, data, error } = key;\r\n            // if (status === 200) {\r\n            console.log(\"asdfasdfasaff\", data, payload)\r\n            if (data.length > 0) {\r\n                console.log(\"asdfasdfasaff == if\", data, payload)\r\n                this.props.commonCreateApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_id=${data[0].cart_id}`, payload).then((key) => {\r\n                    let { status, data } = key;\r\n                    if (status === 201) {\r\n                        this.setState({ isOpenModal: false })\r\n                    }\r\n                })\r\n            } else {\r\n                console.log(\"asdfasdfasaff == else\", data, payload)\r\n                this.props.commonCreateApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}`, payload).then((key) => {\r\n                    let { status, data } = key;\r\n                    if (status === 201) {\r\n                        this.setState({ isOpenModal: false })\r\n                        history.push('/admin/catalog')\r\n                    }\r\n                })\r\n            }\r\n\r\n            // }\r\n        })\r\n\r\n\r\n    }\r\n\r\n    handleSearch = (event) => {\r\n        event.persist();\r\n\r\n        if (!this.debouncedFn) {\r\n            this.debouncedFn = _.debounce(() => {\r\n                let searchString = event.target.value;\r\n                let data = { search: searchString }\r\n                // this.queryHandler(data)\r\n                let { customerList, customerDetail } = this.state;\r\n                this.props.getCommonApi(`custappt/?Outlet=${customerDetail.branchId}&search=${searchString}`).then((key) => {\r\n\r\n                    let { status, data } = key;\r\n                    if (status === 200) {\r\n                        // for (let value of data) {\r\n                        //     customerList.push({ value: value.id, label: value.emp_name })\r\n                        // }\r\n                        this.setState({ customerList: data })\r\n                    }\r\n                })\r\n            }, 500);\r\n        }\r\n        this.debouncedFn();\r\n    }\r\n\r\n    handleCloseDialog = () => {\r\n        this.setState({\r\n            isOpenModal: false,\r\n        })\r\n    }\r\n\r\n    handleSelectCustomer = (data) => {\r\n        let { customerList, customerDetail, servicesDetail } = this.state;\r\n        customerDetail['cust_noid'] = data.id;\r\n        customerDetail['cust_name'] = data.cust_name;\r\n        this.setState({ customerDetail })\r\n        // this.props.updateForm('selected_customer', customerDetail)\r\n    }\r\n\r\n    handleAddCart = async (data, price) => {\r\n\r\n        await this.props.updateForm('selectedCart', data)\r\n        // setTimeout(() => {\r\n        // history.push(\"/admin/cart\");\r\n        this.props.handleAddCart(data, price);\r\n        // }, 5000); \r\n    }\r\n\r\n    render() {\r\n        let { servicesDetail, isOpenModal, branchList, customerList, customerDetail } = this.state;\r\n        let { selected_cstomer } = this.props;\r\n        return (\r\n            <>\r\n                <div className=\"product-detail p-5\">\r\n                    {servicesDetail ?\r\n                        <div className=\"row\">\r\n\r\n                            <div className=\"col-md-6\">\r\n                                <div className=\"detail-view text-center\">\r\n                                    <img width=\"230\" src={servicesDetail.Stock_PIC} alt=\"\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-5\">\r\n                                <div className=\"product-left\">\r\n                                    <p className=\"product-name fs-18\">{servicesDetail.item_desc}</p>\r\n                                    <p className=\"fs-14 my-2\">{servicesDetail.item_name}</p>\r\n\r\n                                    <div>\r\n                                        <p className=\"list-price fs-14\">Price:<span className=\"fs-16\"> $ {servicesDetail.item_price}</span></p>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-12\">\r\n                                <div>\r\n                                    <NormalButton\r\n                                        mainbg={true}\r\n                                        className=\"col-12 fs-15 mt-5\"\r\n                                        label=\"Add to Cart\"\r\n                                        onClick={() => this.handleAddCart(servicesDetail, servicesDetail.item_price)}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div> : \"\"}\r\n                </div>\r\n\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    // customerDetail: state.appointment.customerDetail,\r\n    selected_cstomer: state.common.selected_cstomer,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        // getCustomer,\r\n        getCommonApi,\r\n        commonCreateApi,\r\n        updateForm\r\n    }, dispatch)\r\n}\r\n\r\nexport const ItemDetail = connect(mapStateToProps, mapDispatchToProps)(ItemDetailClass)"]},"metadata":{},"sourceType":"module"}