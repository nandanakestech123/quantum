{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\NewAppointment\\\\NewCreateAppointment\\\\modal\\\\TreatmentPackage.js\";\nimport React from \"react\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport { updateForm, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { NormalModal } from \"component/common\";\nimport closeIcon from \"assets/images/close.png\";\nimport _ from \"lodash\";\nimport { Toast } from \"service/toast\";\nimport { withTranslation } from \"react-i18next\";\nexport class ListTreatmentPackageClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [{\n        label: \"Course\"\n      }, {\n        label: \"Tr. #\",\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Total\",\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Price\",\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Expiry Date\",\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Balance\",\n        divClass: \"justify-content-end text-right\"\n      }, {\n        label: \"Outstanding\",\n        divClass: \"justify-content-end text-right\"\n      }],\n      treatmentPackageList: [],\n      meta: {},\n      active: false,\n      currentIndex: -1,\n      isTreatementModal: false,\n      formFields: {},\n      cust_data: {},\n      isLoading: false\n    };\n\n    this.componentDidMount = () => {\n      this.setState({\n        isLoading: true\n      });\n      this.getPackageList({});\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.setState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n\n    this.getPackageList = data => {\n      this.setState({\n        isLoading: true\n      });\n      let {\n        page = 1,\n        limit = 10,\n        search = \"\"\n      } = data;\n      this.props.getCommonApi(`treatmentpackages/?cust_id=${this.props.customerNumber}&page=${page}&limit=${limit}`).then(res => {\n        console.log(res, \"treatmentpackagelistresponse\");\n        let {\n          status,\n          data,\n          cust_data\n        } = res;\n\n        if (status === 200) {\n          if (data) {\n            let cust = {};\n            cust[\"cust_name\"] = cust_data.cust_name;\n            cust[\"cust_refer\"] = cust_data.cust_refer;\n            this.setState({\n              treatmentPackageList: res.data.dataList,\n              meta: res.data.meta.pagination,\n              cust_data: cust\n            });\n          }\n        }\n\n        this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    this.handlePagination = page => {\n      console.log(page, \"dsfsdfsdfsdf\");\n      this.getPackageList(page);\n    };\n\n    this.handleDialog = () => {\n      let {\n        isTreatementModal\n      } = this.state;\n      isTreatementModal = !isTreatementModal;\n      this.setState({\n        isTreatementModal\n      });\n    };\n\n    this.handleSelectTreatmentPackage = item => {\n      if (String(item.type).toUpperCase() == \"TD\") {\n        let {\n          formFields\n        } = this.state;\n        formFields[\"id\"] = item.stock_id;\n        formFields[\"item_desc\"] = item.item_name;\n        formFields[\"add_duration\"] = item.add_duration;\n        formFields[\"Item_CodeName\"] = item.item_name;\n        formFields[\"treatment_parentcode\"] = item.treatment_parentcode;\n        this.setState({\n          formFields\n        });\n        console.log(formFields);\n        this.props.handleSelectPackage(formFields);\n        this.props.handleTreatementmodal();\n      } else {\n        Toast({\n          type: \"error\",\n          message: \"This Package is not allowed\"\n        });\n      }\n    };\n  }\n\n  render() {\n    let {\n      headerDetails,\n      treatmentPackageList,\n      meta,\n      currentIndex,\n      active,\n      isTreatementModal,\n      formFields,\n      cust_data,\n      isLoading\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NormalModal, {\n      className: \"multiple-appointment select-category\",\n      style: {\n        minWidth: \"70%\"\n      },\n      modal: this.props.isTreatementModal,\n      handleModal: this.props.handleTreatementmodal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: this.props.handleTreatementmodal,\n      className: \"close\",\n      src: closeIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customer-list container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 p-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"fw-500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    }, t(\"Treatment\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-noWrap mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, t(\"Name\"), \" :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fw-500 h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 23\n      }\n    }, cust_data.cust_name))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, t(\"Reference\"), \" :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fw-500 h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    }, cust_data.cust_refer))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, t(\"Phone\"), \" :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fw-500 h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }\n    }, this.props.custPhone))), this.props.CustomerRemarkFlag ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 23\n      }\n    }, t(\"Permanent Remark\"), \" :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fw-500 h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 25\n      }\n    }, this.props.CustomerRemark))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: meta,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 19\n      }\n    }, isLoading ? /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 31\n      }\n    }, \"Loading...\"))))) : treatmentPackageList && treatmentPackageList.length > 0 ? treatmentPackageList.map((item, index) => {\n      let {\n        item_name,\n        tr_open,\n        tr_done,\n        stock_id,\n        price,\n        expiry,\n        add_duration,\n        treatment_parentcode,\n        balance,\n        outstanding\n      } = item;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        onClick: () => this.handleSelectTreatmentPackage(item, index),\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 31\n        }\n      }, item_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 31\n        }\n      }, tr_open)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 31\n        }\n      }, tr_done)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 31\n        }\n      }, price)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 31\n        }\n      }, expiry)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 31\n        }\n      }, balance)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 31\n        }\n      }, outstanding)));\n    }) : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 27\n      }\n    }, t(\"No data available\")))))))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({// filter: state.dashboard\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    updateForm,\n    getCommonApi\n  }, dispatch);\n};\n\nexport const TreatmentPackage = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(ListTreatmentPackageClass));","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/NewAppointment/NewCreateAppointment/modal/TreatmentPackage.js"],"names":["React","InputSearch","TableWrapper","updateForm","getCommonApi","connect","bindActionCreators","NormalModal","closeIcon","_","Toast","withTranslation","ListTreatmentPackageClass","Component","state","headerDetails","label","divClass","treatmentPackageList","meta","active","currentIndex","isTreatementModal","formFields","cust_data","isLoading","componentDidMount","setState","getPackageList","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","data","page","limit","search","props","customerNumber","then","res","console","log","status","cust","cust_name","cust_refer","dataList","pagination","handlePagination","handleDialog","handleSelectTreatmentPackage","item","String","type","toUpperCase","stock_id","item_name","add_duration","treatment_parentcode","handleSelectPackage","handleTreatementmodal","message","render","t","minWidth","custPhone","CustomerRemarkFlag","CustomerRemark","length","map","index","tr_open","tr_done","price","expiry","balance","outstanding","mapStateToProps","mapDispatchToProps","dispatch","TreatmentPackage"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport { updateForm, getCommonApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { NormalModal } from \"component/common\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport _ from \"lodash\";\r\nimport { Toast } from \"service/toast\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class ListTreatmentPackageClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Course\" },\r\n      { label: \"Tr. #\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Total\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Price\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Expiry Date\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Balance\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Outstanding\", divClass: \"justify-content-end text-right\" },\r\n    ],\r\n    treatmentPackageList: [],\r\n    meta: {},\r\n    active: false,\r\n    currentIndex: -1,\r\n    isTreatementModal: false,\r\n    formFields: {},\r\n    cust_data: {},\r\n    isLoading: false,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n    this.getPackageList({});\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  getPackageList = data => {\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n    let { page = 1, limit = 10, search = \"\" } = data;\r\n    this.props\r\n      .getCommonApi(\r\n        `treatmentpackages/?cust_id=${this.props.customerNumber}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(res => {\r\n        console.log(res, \"treatmentpackagelistresponse\");\r\n        let { status, data, cust_data } = res;\r\n        if (status === 200) {\r\n          if (data) {\r\n            let cust = {};\r\n            cust[\"cust_name\"] = cust_data.cust_name;\r\n            cust[\"cust_refer\"] = cust_data.cust_refer;\r\n            this.setState({\r\n              treatmentPackageList: res.data.dataList,\r\n              meta: res.data.meta.pagination,\r\n              cust_data: cust,\r\n            });\r\n          }\r\n        }\r\n        this.setState({\r\n          isLoading: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  handlePagination = page => {\r\n    console.log(page, \"dsfsdfsdfsdf\");\r\n    this.getPackageList(page);\r\n  };\r\n\r\n  // handlesearch = (event) => {\r\n  //     console.log(\"sadfasdfasdf\", event.target.value)\r\n  //     event.persist();\r\n\r\n  //     if (!this.debouncedFn) {\r\n  //         this.debouncedFn = _.debounce(() => {\r\n  //             let searchString = event.target.value;\r\n  //             let data = { search: searchString }\r\n  //             this.getPackageList(data)\r\n  //         }, 500);\r\n  //     }\r\n  //     this.debouncedFn();\r\n  // }\r\n\r\n  handleDialog = () => {\r\n    let { isTreatementModal } = this.state;\r\n    isTreatementModal = !isTreatementModal;\r\n    this.setState({\r\n      isTreatementModal,\r\n    });\r\n  };\r\n\r\n  handleSelectTreatmentPackage = item => {\r\n    if (String(item.type).toUpperCase() == \"TD\") {\r\n      let { formFields } = this.state;\r\n      formFields[\"id\"] = item.stock_id;\r\n      formFields[\"item_desc\"] = item.item_name;\r\n      formFields[\"add_duration\"] = item.add_duration;\r\n      formFields[\"Item_CodeName\"] = item.item_name;\r\n      formFields[\"treatment_parentcode\"] = item.treatment_parentcode;\r\n\r\n      this.setState({\r\n        formFields,\r\n      });\r\n      console.log(formFields);\r\n      this.props.handleSelectPackage(formFields);\r\n      this.props.handleTreatementmodal();\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"This Package is not allowed\",\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      treatmentPackageList,\r\n      meta,\r\n      currentIndex,\r\n      active,\r\n      isTreatementModal,\r\n      formFields,\r\n      cust_data,\r\n      isLoading,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <NormalModal\r\n          className={\"multiple-appointment select-category\"}\r\n          style={{ minWidth: \"70%\" }}\r\n          modal={this.props.isTreatementModal}\r\n          handleModal={this.props.handleTreatementmodal}\r\n        >\r\n          <img\r\n            onClick={this.props.handleTreatementmodal}\r\n            className=\"close\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n          <div className=\"customer-list container\">\r\n            <div className=\"tab-table-content\">\r\n              <div className=\"py-4\">\r\n                <div className=\"col-12 p-2\">\r\n                  <h5 className=\"fw-500\">{t(\"Treatment\")}</h5>\r\n                </div>\r\n                <div className=\"d-flex flex-noWrap mb-2\">\r\n                  <div className=\"col-3\">\r\n                    <div className=\"col-12\">\r\n                      {t(\"Name\")} :{\" \"}\r\n                      <span className=\"fw-500 h6\">{cust_data.cust_name}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-3\">\r\n                    <div className=\"col-12\">\r\n                      {t(\"Reference\")} :{\" \"}\r\n                      <span className=\"fw-500 h6\">{cust_data.cust_refer}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-3\">\r\n                    <div className=\"col-12\">\r\n                      {t(\"Phone\")} :{\" \"}\r\n                      <span className=\"fw-500 h6\">{this.props.custPhone}</span>\r\n                    </div>\r\n                  </div>\r\n                  {this.props.CustomerRemarkFlag ? (\r\n                    <div className=\"col-3\">\r\n                      <div className=\"col-12\">\r\n                        {t(\"Permanent Remark\")} :{\" \"}\r\n                        <span className=\"fw-500 h6\">\r\n                          {this.props.CustomerRemark}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div className=\"table-container\">\r\n                  <TableWrapper\r\n                    headerDetails={headerDetails}\r\n                    queryHandler={this.handlePagination}\r\n                    pageMeta={meta}\r\n                  >\r\n                    {isLoading ? (\r\n                      <tr>\r\n                        <td colSpan=\"7\">\r\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                            <div class=\"spinner-border\" role=\"status\">\r\n                              <span class=\"sr-only\">Loading...</span>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ) : treatmentPackageList &&\r\n                      treatmentPackageList.length > 0 ? (\r\n                      treatmentPackageList.map((item, index) => {\r\n                        let {\r\n                          item_name,\r\n                          tr_open,\r\n                          tr_done,\r\n                          stock_id,\r\n                          price,\r\n                          expiry,\r\n                          add_duration,\r\n                          treatment_parentcode,\r\n                          balance,\r\n                          outstanding,\r\n                        } = item;\r\n                        return (\r\n                          <tr\r\n                            onClick={() =>\r\n                              this.handleSelectTreatmentPackage(item, index)\r\n                            }\r\n                            key={index}\r\n                          >\r\n                            <td>\r\n                              <div className=\"text-left\">{item_name}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-right\">{tr_open}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-right\">{tr_done}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-right\">{price}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-right\">{expiry}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-right\">{balance}</div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"text-right\">{outstanding}</div>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    ) : (\r\n                      <tr>\r\n                        <td colSpan=\"12\">\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            {t(\"No data available\")}\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </TableWrapper>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </NormalModal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      updateForm,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentPackage = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ListTreatmentPackageClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}