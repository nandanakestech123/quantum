{"ast":null,"code":"/**\r\n * DevExtreme (ui/context_menu/ui.context_menu.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _element = require(\"../../core/element\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _fx = _interopRequireDefault(require(\"../../animation/fx\"));\n\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _overlay = _interopRequireDefault(require(\"../overlay\"));\n\nvar _ui = _interopRequireDefault(require(\"./ui.menu_base\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar DX_MENU_CLASS = \"dx-menu\";\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\nvar DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\nvar DX_MENU_ITEM_WRAPPER_CLASS = DX_MENU_ITEM_CLASS + \"-wrapper\";\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\nvar DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\nvar DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_FIRST = \"first\";\nvar FOCUS_LAST = \"last\";\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\nvar LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP, FOCUS_DOWN, FOCUS_FIRST, FOCUS_LAST];\nvar DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\n\nvar ContextMenu = function (_MenuBase) {\n  _inherits(ContextMenu, _MenuBase);\n\n  var _super = _createSuper(ContextMenu);\n\n  function ContextMenu() {\n    _classCallCheck(this, ContextMenu);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ContextMenu, [{\n    key: \"getShowEvent\",\n    value: function (showEventOption) {\n      var result = null;\n\n      if ((0, _type.isObject)(showEventOption)) {\n        if (null !== showEventOption.name) {\n          result = showEventOption.name || DEFAULT_SHOW_EVENT;\n        }\n      } else {\n        result = showEventOption;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"getShowDelay\",\n    value: function (showEventOption) {\n      return (0, _type.isObject)(showEventOption) && showEventOption.delay;\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function () {\n      return (0, _extend.extend)(_get(_getPrototypeOf(ContextMenu.prototype), \"_getDefaultOptions\", this).call(this), {\n        showEvent: DEFAULT_SHOW_EVENT,\n        closeOnOutsideClick: true,\n        position: {\n          at: \"top left\",\n          my: \"top left\"\n        },\n        onShowing: null,\n        onShown: null,\n        onSubmenuCreated: null,\n        onHiding: null,\n        onHidden: null,\n        onPositioning: null,\n        submenuDirection: \"auto\",\n        visible: false,\n        target: void 0,\n        onLeftFirstItem: null,\n        onLeftLastItem: null,\n        onCloseRootSubmenu: null,\n        onExpandLastSubmenu: null\n      });\n    }\n  }, {\n    key: \"_defaultOptionsRules\",\n    value: function () {\n      return _get(_getPrototypeOf(ContextMenu.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\n        device: function () {\n          return !(0, _window.hasWindow)();\n        },\n        options: {\n          animation: null\n        }\n      }]);\n    }\n  }, {\n    key: \"_initActions\",\n    value: function () {\n      var _this = this;\n\n      this._actions = {};\n      (0, _iterator.each)(ACTIONS, function (index, action) {\n        _this._actions[action] = _this._createActionByOption(action) || _common.noop;\n      });\n    }\n  }, {\n    key: \"_setOptionsByReference\",\n    value: function () {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_setOptionsByReference\", this).call(this);\n\n      (0, _extend.extend)(this._optionsByReference, {\n        animation: true,\n        selectedItem: true\n      });\n    }\n  }, {\n    key: \"_focusInHandler\",\n    value: function () {}\n  }, {\n    key: \"_itemContainer\",\n    value: function () {\n      return this._overlay ? this._overlay.$content() : (0, _renderer.default)();\n    }\n  }, {\n    key: \"_eventBindingTarget\",\n    value: function () {\n      return this._itemContainer();\n    }\n  }, {\n    key: \"itemsContainer\",\n    value: function () {\n      return this._overlay ? this._overlay.$content() : void 0;\n    }\n  }, {\n    key: \"_supportedKeys\",\n    value: function () {\n      var _this2 = this;\n\n      var selectItem = function () {\n        var $item = (0, _renderer.default)(_this2.option(\"focusedElement\"));\n\n        _this2.hide();\n\n        if (!$item.length || !_this2._isSelectionEnabled()) {\n          return;\n        }\n\n        _this2.selectItem($item[0]);\n      };\n\n      return (0, _extend.extend)(_get(_getPrototypeOf(ContextMenu.prototype), \"_supportedKeys\", this).call(this), {\n        space: selectItem,\n        escape: this.hide\n      });\n    }\n  }, {\n    key: \"_getActiveItem\",\n    value: function () {\n      var $availableItems = this._getAvailableItems();\n\n      var $focusedItem = $availableItems.filter(\".\".concat(DX_STATE_FOCUSED_CLASS));\n      var $hoveredItem = $availableItems.filter(\".\".concat(DX_STATE_HOVER_CLASS));\n      var $hoveredItemContainer = $hoveredItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n\n      if ($hoveredItemContainer.find(\".\".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {\n        return $focusedItem;\n      }\n\n      if ($hoveredItem.length) {\n        return $hoveredItem;\n      }\n\n      return _get(_getPrototypeOf(ContextMenu.prototype), \"_getActiveItem\", this).call(this);\n    }\n  }, {\n    key: \"_moveFocus\",\n    value: function (location) {\n      var $items = this._getItemsByLocation(location);\n\n      var $oldTarget = this._getActiveItem(true);\n\n      var $hoveredItem = this.itemsContainer().find(\".\".concat(DX_STATE_HOVER_CLASS));\n      var $focusedItem = (0, _renderer.default)(this.option(\"focusedElement\"));\n      var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\n      var $newTarget;\n\n      switch (location) {\n        case FOCUS_UP:\n          $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\n\n          this._setFocusedElement($newTarget);\n\n          if ($oldTarget.is($items.first())) {\n            this._actions.onLeftFirstItem($oldTarget);\n          }\n\n          break;\n\n        case FOCUS_DOWN:\n          $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\n\n          this._setFocusedElement($newTarget);\n\n          if ($oldTarget.is($items.last())) {\n            this._actions.onLeftLastItem($oldTarget);\n          }\n\n          break;\n\n        case FOCUS_RIGHT:\n          $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\n\n          this._setFocusedElement($newTarget);\n\n          break;\n\n        case FOCUS_LEFT:\n          $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\n\n          this._setFocusedElement($newTarget);\n\n          break;\n\n        case FOCUS_FIRST:\n          $newTarget = $items.first();\n\n          this._setFocusedElement($newTarget);\n\n          break;\n\n        case FOCUS_LAST:\n          $newTarget = $items.last();\n\n          this._setFocusedElement($newTarget);\n\n          break;\n\n        default:\n          return _get(_getPrototypeOf(ContextMenu.prototype), \"_moveFocus\", this).call(this, location);\n      }\n    }\n  }, {\n    key: \"_setFocusedElement\",\n    value: function ($element) {\n      if ($element && 0 !== $element.length) {\n        this.option(\"focusedElement\", (0, _element.getPublicElement)($element));\n      }\n    }\n  }, {\n    key: \"_getItemsByLocation\",\n    value: function (location) {\n      var $activeItem = this._getActiveItem(true);\n\n      var $items;\n\n      if ((0, _array.inArray)(location, LOCAL_SUBMENU_DIRECTIONS) >= 0) {\n        $items = $activeItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).children().children();\n      }\n\n      $items = this._getAvailableItems($items);\n      return $items;\n    }\n  }, {\n    key: \"_getAriaTarget\",\n    value: function () {\n      return this.$element();\n    }\n  }, {\n    key: \"_refreshActiveDescendant\",\n    value: function () {\n      if ((0, _type.isDefined)(this._overlay)) {\n        var $target = this._overlay.$content();\n\n        _get(_getPrototypeOf(ContextMenu.prototype), \"_refreshActiveDescendant\", this).call(this, $target);\n      }\n    }\n  }, {\n    key: \"_hideSubmenuHandler\",\n    value: function () {\n      var $curItem = this._getActiveItem(true);\n\n      var $parentItem = $curItem.parents(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).first();\n\n      if ($parentItem.length) {\n        this._hideSubmenusOnSameLevel($parentItem);\n\n        this._hideSubmenu($curItem.closest(\".\".concat(DX_SUBMENU_CLASS)));\n\n        return $parentItem;\n      }\n\n      this._actions.onCloseRootSubmenu($curItem);\n\n      return $curItem;\n    }\n  }, {\n    key: \"_expandSubmenuHandler\",\n    value: function ($items, location) {\n      var $curItem = this._getActiveItem(true);\n\n      var itemData = this._getItemData($curItem);\n\n      var node = this._dataAdapter.getNodeByItem(itemData);\n\n      var isItemHasSubmenu = this._hasSubmenu(node);\n\n      var $submenu = $curItem.children(\".\".concat(DX_SUBMENU_CLASS));\n\n      if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {\n        if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\n          this._showSubmenu($curItem);\n        }\n\n        return this._nextItem(this._getItemsByLocation(location));\n      }\n\n      this._actions.onExpandLastSubmenu($curItem);\n\n      return;\n    }\n  }, {\n    key: \"_clean\",\n    value: function () {\n      if (this._overlay) {\n        this._overlay.$element().remove();\n\n        this._overlay = null;\n      }\n\n      this._detachShowContextMenuEvents(this._getTarget());\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function () {\n      this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_initMarkup\", this).call(this);\n    }\n  }, {\n    key: \"_render\",\n    value: function () {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_render\", this).call(this);\n\n      this._renderVisibility(this.option(\"visible\"));\n\n      this._addWidgetClass();\n    }\n  }, {\n    key: \"_renderContentImpl\",\n    value: function () {\n      this._detachShowContextMenuEvents(this._getTarget());\n\n      this._attachShowContextMenuEvents();\n    }\n  }, {\n    key: \"_attachKeyboardEvents\",\n    value: function () {\n      !this._keyboardListenerId && this._focusTarget().length && _get(_getPrototypeOf(ContextMenu.prototype), \"_attachKeyboardEvents\", this).call(this);\n    }\n  }, {\n    key: \"_renderContextMenuOverlay\",\n    value: function () {\n      if (this._overlay) {\n        return;\n      }\n\n      var overlayOptions = this._getOverlayOptions();\n\n      this._overlay = this._createComponent((0, _renderer.default)(\"<div>\").appendTo(this._$element), _overlay.default, overlayOptions);\n\n      var $overlayContent = this._overlay.$content();\n\n      $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);\n\n      this._addCustomCssClass($overlayContent);\n\n      this._addPlatformDependentClass($overlayContent);\n\n      this._attachContextMenuEvent();\n    }\n  }, {\n    key: \"_itemContextMenuHandler\",\n    value: function (e) {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_itemContextMenuHandler\", this).call(this, e);\n\n      e.stopPropagation();\n    }\n  }, {\n    key: \"_addPlatformDependentClass\",\n    value: function ($element) {\n      if (_devices.default.current().phone) {\n        $element.addClass(DX_MENU_PHONE_CLASS);\n      }\n    }\n  }, {\n    key: \"_detachShowContextMenuEvents\",\n    value: function (target) {\n      var showEvent = this.getShowEvent(this.option(\"showEvent\"));\n\n      if (!showEvent) {\n        return;\n      }\n\n      var eventName = (0, _index.addNamespace)(showEvent, this.NAME);\n\n      if (this._showContextMenuEventHandler) {\n        _events_engine.default.off(_dom_adapter.default.getDocument(), eventName, target, this._showContextMenuEventHandler);\n      } else {\n        _events_engine.default.off((0, _renderer.default)(target), eventName);\n      }\n    }\n  }, {\n    key: \"_attachShowContextMenuEvents\",\n    value: function () {\n      var _this3 = this;\n\n      var target = this._getTarget();\n\n      var showEvent = this.getShowEvent(this.option(\"showEvent\"));\n\n      if (!showEvent) {\n        return;\n      }\n\n      var eventName = (0, _index.addNamespace)(showEvent, this.NAME);\n\n      var contextMenuAction = this._createAction(function (e) {\n        var delay = _this3.getShowDelay(_this3.option(\"showEvent\"));\n\n        if (delay) {\n          setTimeout(function () {\n            return _this3._show(e.event);\n          }, delay);\n        } else {\n          _this3._show(e.event);\n        }\n      }, {\n        validatingTargetName: \"target\"\n      });\n\n      var handler = function (e) {\n        return contextMenuAction({\n          event: e,\n          target: (0, _renderer.default)(e.currentTarget)\n        });\n      };\n\n      contextMenuAction = this._createAction(contextMenuAction);\n\n      if ((0, _type.isRenderer)(target) || target.nodeType || (0, _type.isWindow)(target)) {\n        this._showContextMenuEventHandler = void 0;\n\n        _events_engine.default.on(target, eventName, handler);\n      } else {\n        this._showContextMenuEventHandler = handler;\n\n        _events_engine.default.on(_dom_adapter.default.getDocument(), eventName, target, this._showContextMenuEventHandler);\n      }\n    }\n  }, {\n    key: \"_hoverEndHandler\",\n    value: function (e) {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_hoverEndHandler\", this).call(this, e);\n\n      e.stopPropagation();\n    }\n  }, {\n    key: \"_renderDimensions\",\n    value: function () {}\n  }, {\n    key: \"_renderContainer\",\n    value: function ($wrapper, submenuContainer) {\n      var $holder = submenuContainer || this._itemContainer();\n\n      $wrapper = (0, _renderer.default)(\"<div>\");\n      $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\n\n      var $itemsContainer = _get(_getPrototypeOf(ContextMenu.prototype), \"_renderContainer\", this).call(this, $wrapper);\n\n      if (submenuContainer) {\n        return $itemsContainer;\n      }\n\n      if (this.option(\"width\")) {\n        return $itemsContainer.css(\"minWidth\", this.option(\"width\"));\n      }\n\n      if (this.option(\"height\")) {\n        return $itemsContainer.css(\"minHeight\", this.option(\"height\"));\n      }\n\n      return $itemsContainer;\n    }\n  }, {\n    key: \"_renderSubmenuItems\",\n    value: function (node, $itemFrame) {\n      this._renderItems(this._getChildNodes(node), $itemFrame);\n\n      this._actions.onSubmenuCreated({\n        itemElement: (0, _element.getPublicElement)($itemFrame),\n        itemData: node.internalFields.item,\n        submenuElement: (0, _element.getPublicElement)($itemFrame.children(\".\".concat(DX_SUBMENU_CLASS)))\n      });\n    }\n  }, {\n    key: \"_getOverlayOptions\",\n    value: function () {\n      var position = this.option(\"position\");\n      var overlayOptions = {\n        focusStateEnabled: this.option(\"focusStateEnabled\"),\n        animation: this.option(\"animation\"),\n        innerOverlay: true,\n        closeOnOutsideClick: this._closeOnOutsideClickHandler.bind(this),\n        propagateOutsideClick: true,\n        closeOnTargetScroll: true,\n        deferRendering: false,\n        position: {\n          at: position.at,\n          my: position.my,\n          of: this._getTarget(),\n          collision: \"flipfit\"\n        },\n        shading: false,\n        showTitle: false,\n        height: \"auto\",\n        width: \"auto\",\n        onShown: this._overlayShownActionHandler.bind(this),\n        onHiding: this._overlayHidingActionHandler.bind(this),\n        onHidden: this._overlayHiddenActionHandler.bind(this)\n      };\n      return overlayOptions;\n    }\n  }, {\n    key: \"_overlayShownActionHandler\",\n    value: function (arg) {\n      this._actions.onShown(arg);\n    }\n  }, {\n    key: \"_overlayHidingActionHandler\",\n    value: function (arg) {\n      this._actions.onHiding(arg);\n\n      if (!arg.cancel) {\n        this._hideAllShownSubmenus();\n\n        this._setOptionWithoutOptionChange(\"visible\", false);\n      }\n    }\n  }, {\n    key: \"_overlayHiddenActionHandler\",\n    value: function (arg) {\n      this._actions.onHidden(arg);\n    }\n  }, {\n    key: \"_closeOnOutsideClickHandler\",\n    value: function (e) {\n      var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\n\n      if ((0, _type.isFunction)(closeOnOutsideClick)) {\n        return closeOnOutsideClick(e);\n      }\n\n      if (!closeOnOutsideClick) {\n        return false;\n      }\n\n      if (_dom_adapter.default.isDocument(e.target)) {\n        return true;\n      }\n\n      var $activeItemContainer = this._getActiveItemsContainer(e.target);\n\n      var $itemContainers = this._getItemsContainers();\n\n      var $clickedItem = this._searchActiveItem(e.target);\n\n      var $rootItem = this.$element().parents(\".\".concat(DX_MENU_ITEM_CLASS));\n      var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\n      var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\n\n      if (isInnerOverlayClicked || isRootItemClicked) {\n        if (\"onClick\" === this._getShowSubmenuMode()) {\n          this._hideAllShownChildSubmenus($clickedItem);\n        }\n\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_getActiveItemsContainer\",\n    value: function (target) {\n      return (0, _renderer.default)(target).closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n    }\n  }, {\n    key: \"_getItemsContainers\",\n    value: function () {\n      return this._overlay._$content.find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n    }\n  }, {\n    key: \"_searchActiveItem\",\n    value: function (target) {\n      return (0, _renderer.default)(target).closest(\".\".concat(DX_MENU_ITEM_CLASS)).eq(0);\n    }\n  }, {\n    key: \"_isIncludeOverlay\",\n    value: function ($activeOverlay, $allOverlays) {\n      var isSame = false;\n      (0, _iterator.each)($allOverlays, function (index, $overlay) {\n        if ($activeOverlay.is($overlay) && !isSame) {\n          isSame = true;\n        }\n      });\n      return isSame;\n    }\n  }, {\n    key: \"_hideAllShownChildSubmenus\",\n    value: function ($clickedItem) {\n      var _this4 = this;\n\n      var $submenuElements = $clickedItem.find(\".\".concat(DX_SUBMENU_CLASS));\n      var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n\n      if ($submenuElements.length > 0) {\n        (0, _iterator.each)(shownSubmenus, function (index, $submenu) {\n          var $context = _this4._searchActiveItem($submenu.context).parent();\n\n          if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\n            _this4._hideSubmenu($submenu);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_showSubmenu\",\n    value: function ($item) {\n      var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\n\n      this._hideSubmenusOnSameLevel($item);\n\n      if (!this._hasSubmenu(node)) {\n        return;\n      }\n\n      var $submenu = $item.children(\".\".concat(DX_SUBMENU_CLASS));\n      var isSubmenuRendered = $submenu.length;\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_showSubmenu\", this).call(this, $item);\n\n      if (!isSubmenuRendered) {\n        this._renderSubmenuItems(node, $item);\n      }\n\n      if (!this._isSubmenuVisible($submenu)) {\n        this._drawSubmenu($item);\n      }\n    }\n  }, {\n    key: \"_hideSubmenusOnSameLevel\",\n    value: function ($item) {\n      var $expandedItems = $item.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS)).siblings().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\n\n      if ($expandedItems.length) {\n        $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n\n        this._hideSubmenu($expandedItems.find(\".\".concat(DX_SUBMENU_CLASS)));\n      }\n    }\n  }, {\n    key: \"_hideSubmenuGroup\",\n    value: function ($submenu) {\n      if (this._isSubmenuVisible($submenu)) {\n        this._hideSubmenuCore($submenu);\n      }\n    }\n  }, {\n    key: \"_isSubmenuVisible\",\n    value: function ($submenu) {\n      return \"visible\" === $submenu.css(\"visibility\");\n    }\n  }, {\n    key: \"_drawSubmenu\",\n    value: function ($itemElement) {\n      var animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\n      var $submenu = $itemElement.children(\".\".concat(DX_SUBMENU_CLASS));\n\n      var submenuPosition = this._getSubmenuPosition($itemElement);\n\n      if (this._overlay && this._overlay.option(\"visible\")) {\n        if (!(0, _type.isDefined)(this._shownSubmenus)) {\n          this._shownSubmenus = [];\n        }\n\n        if ((0, _array.inArray)($submenu, this._shownSubmenus)) {\n          this._shownSubmenus.push($submenu);\n        }\n\n        if (animation) {\n          _fx.default.stop($submenu);\n        }\n\n        _position.default.setup($submenu, submenuPosition);\n\n        if (animation) {\n          if ((0, _type.isPlainObject)(animation.to)) {\n            animation.to.position = submenuPosition;\n          }\n\n          this._animate($submenu, animation);\n        }\n\n        $submenu.css(\"visibility\", \"visible\");\n      }\n    }\n  }, {\n    key: \"_animate\",\n    value: function ($container, options) {\n      _fx.default.animate($container, options);\n    }\n  }, {\n    key: \"_getSubmenuPosition\",\n    value: function ($rootItem) {\n      var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\n      var $rootItemWrapper = $rootItem.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS));\n      var position = {\n        collision: \"flip\",\n        of: $rootItemWrapper,\n        offset: {\n          h: 0,\n          v: -1\n        }\n      };\n\n      switch (submenuDirection) {\n        case \"left\":\n          position.at = \"left top\";\n          position.my = \"right top\";\n          break;\n\n        case \"right\":\n          position.at = \"right top\";\n          position.my = \"left top\";\n          break;\n\n        default:\n          if (this.option(\"rtlEnabled\")) {\n            position.at = \"left top\";\n            position.my = \"right top\";\n          } else {\n            position.at = \"right top\";\n            position.my = \"left top\";\n          }\n\n      }\n\n      return position;\n    }\n  }, {\n    key: \"_updateSubmenuVisibilityOnClick\",\n    value: function (actionArgs) {\n      if (!actionArgs.args.length) {\n        return;\n      }\n\n      var itemData = actionArgs.args[0].itemData;\n\n      var node = this._dataAdapter.getNodeByItem(itemData);\n\n      if (!node) {\n        return;\n      }\n\n      var $itemElement = (0, _renderer.default)(actionArgs.args[0].itemElement);\n      var $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\n      var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\n\n      if (shouldRenderSubmenu) {\n        this._renderSubmenuItems(node, $itemElement);\n\n        $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\n      }\n\n      if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\n        return;\n      }\n\n      var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\n\n      if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\n        return;\n      }\n\n      this._updateSelectedItemOnClick(actionArgs);\n\n      if (0 === $submenu.length) {\n        var $prevSubmenu = (0, _renderer.default)($itemElement.parents(\".\".concat(DX_SUBMENU_CLASS))[0]);\n\n        this._hideSubmenu($prevSubmenu);\n\n        if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\n          this.option(\"visible\", false);\n        }\n      } else {\n        if (this._shownSubmenus && this._shownSubmenus.length > 0) {\n          if (this._shownSubmenus[0].is($submenu)) {\n            this._hideSubmenu($submenu);\n          }\n        }\n\n        this._showSubmenu($itemElement);\n      }\n    }\n  }, {\n    key: \"_hideSubmenu\",\n    value: function ($curSubmenu) {\n      var _this5 = this;\n\n      var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n      (0, _iterator.each)(shownSubmenus, function (index, $submenu) {\n        if ($curSubmenu.is($submenu) || (0, _dom.contains)($curSubmenu[0], $submenu[0])) {\n          $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n\n          _this5._hideSubmenuCore($submenu);\n        }\n      });\n    }\n  }, {\n    key: \"_hideSubmenuCore\",\n    value: function ($submenu) {\n      var index = (0, _array.inArray)($submenu, this._shownSubmenus);\n      var animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\n\n      if (index >= 0) {\n        this._shownSubmenus.splice(index, 1);\n      }\n\n      this._stopAnimate($submenu);\n\n      animation && this._animate($submenu, animation);\n      $submenu.css(\"visibility\", \"hidden\");\n    }\n  }, {\n    key: \"_stopAnimate\",\n    value: function ($container) {\n      _fx.default.stop($container, true);\n    }\n  }, {\n    key: \"_hideAllShownSubmenus\",\n    value: function () {\n      var _this6 = this;\n\n      var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n\n      var $expandedItems = this._overlay.$content().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\n\n      $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n      (0, _iterator.each)(shownSubmenus, function (_, $submenu) {\n        _this6._hideSubmenu($submenu);\n      });\n    }\n  }, {\n    key: \"_visibilityChanged\",\n    value: function (visible) {\n      if (visible) {\n        this._renderContentImpl();\n      }\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      if ((0, _array.inArray)(args.name, ACTIONS) > -1) {\n        this._initActions();\n\n        return;\n      }\n\n      switch (args.name) {\n        case \"visible\":\n          this._renderVisibility(args.value);\n\n          break;\n\n        case \"showEvent\":\n        case \"position\":\n        case \"submenuDirection\":\n          this._invalidate();\n\n          break;\n\n        case \"target\":\n          args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\n\n          this._invalidate();\n\n          break;\n\n        case \"closeOnOutsideClick\":\n          break;\n\n        default:\n          _get(_getPrototypeOf(ContextMenu.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_renderVisibility\",\n    value: function (showing) {\n      return showing ? this._show() : this._hide();\n    }\n  }, {\n    key: \"_toggleVisibility\",\n    value: function () {}\n  }, {\n    key: \"_show\",\n    value: function (event) {\n      var args = {\n        jQEvent: event\n      };\n      var promise = new _deferred.Deferred().reject().promise();\n\n      this._actions.onShowing(args);\n\n      if (args.cancel) {\n        return promise;\n      }\n\n      var position = this._positionContextMenu(event);\n\n      if (position) {\n        if (!this._overlay) {\n          this._renderContextMenuOverlay();\n\n          this._overlay.$content().addClass(this._widgetClass());\n\n          this._renderFocusState();\n\n          this._attachHoverEvents();\n\n          this._attachClickEvent();\n\n          this._renderItems(this._dataAdapter.getRootNodes());\n        }\n\n        this._setOptionWithoutOptionChange(\"visible\", true);\n\n        this._overlay.option(\"position\", position);\n\n        promise = this._overlay.show();\n        event && event.stopPropagation();\n\n        this._setAriaAttributes();\n      }\n\n      return promise;\n    }\n  }, {\n    key: \"_setAriaAttributes\",\n    value: function () {\n      this._overlayContentId = \"dx-\".concat(new _guid.default());\n      this.setAria(\"owns\", this._overlayContentId);\n      this.setAria({\n        id: this._overlayContentId,\n        role: \"menu\"\n      }, this._overlay.$content());\n    }\n  }, {\n    key: \"_cleanAriaAttributes\",\n    value: function () {\n      this._overlay && this.setAria(\"id\", null, this._overlay.$content());\n      this.setAria(\"owns\", void 0);\n    }\n  }, {\n    key: \"_getTarget\",\n    value: function () {\n      return this.option(\"target\") || this.option(\"position\").of || (0, _renderer.default)(_dom_adapter.default.getDocument());\n    }\n  }, {\n    key: \"_getContextMenuPosition\",\n    value: function () {\n      return (0, _extend.extend)({}, this.option(\"position\"), {\n        of: this._getTarget()\n      });\n    }\n  }, {\n    key: \"_positionContextMenu\",\n    value: function (jQEvent) {\n      var position = this._getContextMenuPosition();\n\n      var isInitialPosition = this._isInitialOptionValue(\"position\");\n\n      var positioningAction = this._createActionByOption(\"onPositioning\", actionArgs);\n\n      if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\n        position.of = jQEvent;\n      }\n\n      var actionArgs = {\n        position: position,\n        event: jQEvent\n      };\n      positioningAction(actionArgs);\n\n      if (actionArgs.cancel) {\n        position = null;\n      } else {\n        if (actionArgs.event) {\n          actionArgs.event.cancel = true;\n          jQEvent.preventDefault();\n        }\n      }\n\n      return position;\n    }\n  }, {\n    key: \"_refresh\",\n    value: function () {\n      if (!(0, _window.hasWindow)()) {\n        _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n      } else {\n        if (this._overlay) {\n          var lastPosition = this._overlay.option(\"position\");\n\n          _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n\n          this._overlay && this._overlay.option(\"position\", lastPosition);\n        } else {\n          _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n        }\n      }\n    }\n  }, {\n    key: \"_hide\",\n    value: function () {\n      var promise;\n\n      if (this._overlay) {\n        promise = this._overlay.hide();\n\n        this._setOptionWithoutOptionChange(\"visible\", false);\n      }\n\n      this._cleanAriaAttributes();\n\n      this.option(\"focusedElement\", null);\n      return promise || new _deferred.Deferred().reject().promise();\n    }\n  }, {\n    key: \"toggle\",\n    value: function (showing) {\n      var visible = this.option(\"visible\");\n      showing = void 0 === showing ? !visible : showing;\n      return this._renderVisibility(showing);\n    }\n  }, {\n    key: \"show\",\n    value: function () {\n      return this.toggle(true);\n    }\n  }, {\n    key: \"hide\",\n    value: function () {\n      return this.toggle(false);\n    }\n  }]);\n\n  return ContextMenu;\n}(_ui.default);\n\n(0, _component_registrator.default)(\"dxContextMenu\", ContextMenu);\nvar _default = ContextMenu;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/context_menu/ui.context_menu.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_renderer","_interopRequireDefault","require","_dom_adapter","_events_engine","_guid","_component_registrator","_common","_type","_dom","_element","_iterator","_array","_extend","_window","_fx","_position","_devices","_index","_overlay","_ui","_deferred","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","value","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","DX_MENU_CLASS","DX_MENU_ITEM_CLASS","DX_MENU_ITEM_EXPANDED_CLASS","DX_MENU_PHONE_CLASS","DX_MENU_ITEMS_CONTAINER_CLASS","DX_MENU_ITEM_WRAPPER_CLASS","DX_SUBMENU_CLASS","DX_CONTEXT_MENU_CLASS","DX_HAS_CONTEXT_MENU_CLASS","DX_STATE_DISABLED_CLASS","DX_STATE_FOCUSED_CLASS","DX_STATE_HOVER_CLASS","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_FIRST","FOCUS_LAST","ACTIONS","LOCAL_SUBMENU_DIRECTIONS","DEFAULT_SHOW_EVENT","ContextMenu","_MenuBase","_super","showEventOption","isObject","name","delay","extend","showEvent","closeOnOutsideClick","position","at","my","onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","submenuDirection","visible","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu","concat","device","hasWindow","options","animation","_this","_actions","each","index","action","_createActionByOption","noop","_optionsByReference","selectedItem","$content","_itemContainer","_this2","selectItem","$item","option","hide","_isSelectionEnabled","space","escape","$availableItems","_getAvailableItems","$focusedItem","filter","$hoveredItem","$hoveredItemContainer","closest","find","location","$items","_getItemsByLocation","$oldTarget","_getActiveItem","itemsContainer","$activeItemHighlighted","$newTarget","_prevItem","_setFocusedElement","is","first","_nextItem","last","_hideSubmenuHandler","_expandSubmenuHandler","$element","getPublicElement","$activeItem","inArray","children","isDefined","$target","$curItem","$parentItem","parents","_hideSubmenusOnSameLevel","_hideSubmenu","itemData","_getItemData","node","_dataAdapter","getNodeByItem","isItemHasSubmenu","_hasSubmenu","$submenu","hasClass","css","_showSubmenu","remove","_detachShowContextMenuEvents","_getTarget","addClass","_renderVisibility","_addWidgetClass","_attachShowContextMenuEvents","_keyboardListenerId","_focusTarget","overlayOptions","_getOverlayOptions","_createComponent","appendTo","_$element","$overlayContent","_addCustomCssClass","_addPlatformDependentClass","_attachContextMenuEvent","stopPropagation","current","phone","getShowEvent","eventName","addNamespace","NAME","_showContextMenuEventHandler","off","getDocument","_this3","contextMenuAction","_createAction","getShowDelay","setTimeout","_show","event","validatingTargetName","handler","currentTarget","isRenderer","nodeType","isWindow","on","$wrapper","submenuContainer","$holder","$itemsContainer","$itemFrame","_renderItems","_getChildNodes","itemElement","internalFields","item","submenuElement","focusStateEnabled","innerOverlay","_closeOnOutsideClickHandler","bind","propagateOutsideClick","closeOnTargetScroll","deferRendering","of","collision","shading","showTitle","height","width","_overlayShownActionHandler","_overlayHidingActionHandler","_overlayHiddenActionHandler","arg","cancel","_hideAllShownSubmenus","_setOptionWithoutOptionChange","isFunction","isDocument","$activeItemContainer","_getActiveItemsContainer","$itemContainers","_getItemsContainers","$clickedItem","_searchActiveItem","$rootItem","isRootItemClicked","isInnerOverlayClicked","_isIncludeOverlay","_getShowSubmenuMode","_hideAllShownChildSubmenus","_$content","eq","$activeOverlay","$allOverlays","isSame","$overlay","_this4","$submenuElements","shownSubmenus","_shownSubmenus","$context","context","parent","isSubmenuRendered","_renderSubmenuItems","_isSubmenuVisible","_drawSubmenu","$expandedItems","siblings","removeClass","_hideSubmenuCore","$itemElement","show","submenuPosition","_getSubmenuPosition","push","stop","setup","isPlainObject","to","_animate","$container","animate","toLowerCase","$rootItemWrapper","offset","h","v","actionArgs","args","shouldRenderSubmenu","notCloseMenuOnItemClick","closeMenuOnClick","disabled","_updateSelectedItemOnClick","$prevSubmenu","canceled","$curSubmenu","_this5","contains","splice","_stopAnimate","_this6","_","_renderContentImpl","_initActions","_invalidate","previousValue","showing","_hide","jQEvent","promise","Deferred","reject","_positionContextMenu","_renderContextMenuOverlay","_widgetClass","_renderFocusState","_attachHoverEvents","_attachClickEvent","getRootNodes","_setAriaAttributes","_overlayContentId","setAria","id","role","_getContextMenuPosition","isInitialPosition","_isInitialOptionValue","positioningAction","preventDefault","lastPosition","_cleanAriaAttributes","toggle","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/context_menu/ui.context_menu.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _element = require(\"../../core/element\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _fx = _interopRequireDefault(require(\"../../animation/fx\"));\r\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _overlay = _interopRequireDefault(require(\"../overlay\"));\r\nvar _ui = _interopRequireDefault(require(\"./ui.menu_base\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar DX_MENU_CLASS = \"dx-menu\";\r\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\r\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\r\nvar DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\r\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\r\nvar DX_MENU_ITEM_WRAPPER_CLASS = DX_MENU_ITEM_CLASS + \"-wrapper\";\r\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\r\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\r\nvar DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\r\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\r\nvar DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\r\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar FOCUS_LAST = \"last\";\r\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\r\nvar LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP, FOCUS_DOWN, FOCUS_FIRST, FOCUS_LAST];\r\nvar DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\r\nvar ContextMenu = function(_MenuBase) {\r\n    _inherits(ContextMenu, _MenuBase);\r\n    var _super = _createSuper(ContextMenu);\r\n\r\n    function ContextMenu() {\r\n        _classCallCheck(this, ContextMenu);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(ContextMenu, [{\r\n        key: \"getShowEvent\",\r\n        value: function(showEventOption) {\r\n            var result = null;\r\n            if ((0, _type.isObject)(showEventOption)) {\r\n                if (null !== showEventOption.name) {\r\n                    result = showEventOption.name || DEFAULT_SHOW_EVENT\r\n                }\r\n            } else {\r\n                result = showEventOption\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"getShowDelay\",\r\n        value: function(showEventOption) {\r\n            return (0, _type.isObject)(showEventOption) && showEventOption.delay\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(ContextMenu.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                showEvent: DEFAULT_SHOW_EVENT,\r\n                closeOnOutsideClick: true,\r\n                position: {\r\n                    at: \"top left\",\r\n                    my: \"top left\"\r\n                },\r\n                onShowing: null,\r\n                onShown: null,\r\n                onSubmenuCreated: null,\r\n                onHiding: null,\r\n                onHidden: null,\r\n                onPositioning: null,\r\n                submenuDirection: \"auto\",\r\n                visible: false,\r\n                target: void 0,\r\n                onLeftFirstItem: null,\r\n                onLeftLastItem: null,\r\n                onCloseRootSubmenu: null,\r\n                onExpandLastSubmenu: null\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_defaultOptionsRules\",\r\n        value: function() {\r\n            return _get(_getPrototypeOf(ContextMenu.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\r\n                device: function() {\r\n                    return !(0, _window.hasWindow)()\r\n                },\r\n                options: {\r\n                    animation: null\r\n                }\r\n            }])\r\n        }\r\n    }, {\r\n        key: \"_initActions\",\r\n        value: function() {\r\n            var _this = this;\r\n            this._actions = {};\r\n            (0, _iterator.each)(ACTIONS, function(index, action) {\r\n                _this._actions[action] = _this._createActionByOption(action) || _common.noop\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_setOptionsByReference\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_setOptionsByReference\", this).call(this);\r\n            (0, _extend.extend)(this._optionsByReference, {\r\n                animation: true,\r\n                selectedItem: true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_focusInHandler\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_itemContainer\",\r\n        value: function() {\r\n            return this._overlay ? this._overlay.$content() : (0, _renderer.default)()\r\n        }\r\n    }, {\r\n        key: \"_eventBindingTarget\",\r\n        value: function() {\r\n            return this._itemContainer()\r\n        }\r\n    }, {\r\n        key: \"itemsContainer\",\r\n        value: function() {\r\n            return this._overlay ? this._overlay.$content() : void 0\r\n        }\r\n    }, {\r\n        key: \"_supportedKeys\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            var selectItem = function() {\r\n                var $item = (0, _renderer.default)(_this2.option(\"focusedElement\"));\r\n                _this2.hide();\r\n                if (!$item.length || !_this2._isSelectionEnabled()) {\r\n                    return\r\n                }\r\n                _this2.selectItem($item[0])\r\n            };\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(ContextMenu.prototype), \"_supportedKeys\", this).call(this), {\r\n                space: selectItem,\r\n                escape: this.hide\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getActiveItem\",\r\n        value: function() {\r\n            var $availableItems = this._getAvailableItems();\r\n            var $focusedItem = $availableItems.filter(\".\".concat(DX_STATE_FOCUSED_CLASS));\r\n            var $hoveredItem = $availableItems.filter(\".\".concat(DX_STATE_HOVER_CLASS));\r\n            var $hoveredItemContainer = $hoveredItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\r\n            if ($hoveredItemContainer.find(\".\".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {\r\n                return $focusedItem\r\n            }\r\n            if ($hoveredItem.length) {\r\n                return $hoveredItem\r\n            }\r\n            return _get(_getPrototypeOf(ContextMenu.prototype), \"_getActiveItem\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_moveFocus\",\r\n        value: function(location) {\r\n            var $items = this._getItemsByLocation(location);\r\n            var $oldTarget = this._getActiveItem(true);\r\n            var $hoveredItem = this.itemsContainer().find(\".\".concat(DX_STATE_HOVER_CLASS));\r\n            var $focusedItem = (0, _renderer.default)(this.option(\"focusedElement\"));\r\n            var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\r\n            var $newTarget;\r\n            switch (location) {\r\n                case FOCUS_UP:\r\n                    $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\r\n                    this._setFocusedElement($newTarget);\r\n                    if ($oldTarget.is($items.first())) {\r\n                        this._actions.onLeftFirstItem($oldTarget)\r\n                    }\r\n                    break;\r\n                case FOCUS_DOWN:\r\n                    $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\r\n                    this._setFocusedElement($newTarget);\r\n                    if ($oldTarget.is($items.last())) {\r\n                        this._actions.onLeftLastItem($oldTarget)\r\n                    }\r\n                    break;\r\n                case FOCUS_RIGHT:\r\n                    $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\r\n                    this._setFocusedElement($newTarget);\r\n                    break;\r\n                case FOCUS_LEFT:\r\n                    $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\r\n                    this._setFocusedElement($newTarget);\r\n                    break;\r\n                case FOCUS_FIRST:\r\n                    $newTarget = $items.first();\r\n                    this._setFocusedElement($newTarget);\r\n                    break;\r\n                case FOCUS_LAST:\r\n                    $newTarget = $items.last();\r\n                    this._setFocusedElement($newTarget);\r\n                    break;\r\n                default:\r\n                    return _get(_getPrototypeOf(ContextMenu.prototype), \"_moveFocus\", this).call(this, location)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setFocusedElement\",\r\n        value: function($element) {\r\n            if ($element && 0 !== $element.length) {\r\n                this.option(\"focusedElement\", (0, _element.getPublicElement)($element))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getItemsByLocation\",\r\n        value: function(location) {\r\n            var $activeItem = this._getActiveItem(true);\r\n            var $items;\r\n            if ((0, _array.inArray)(location, LOCAL_SUBMENU_DIRECTIONS) >= 0) {\r\n                $items = $activeItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).children().children()\r\n            }\r\n            $items = this._getAvailableItems($items);\r\n            return $items\r\n        }\r\n    }, {\r\n        key: \"_getAriaTarget\",\r\n        value: function() {\r\n            return this.$element()\r\n        }\r\n    }, {\r\n        key: \"_refreshActiveDescendant\",\r\n        value: function() {\r\n            if ((0, _type.isDefined)(this._overlay)) {\r\n                var $target = this._overlay.$content();\r\n                _get(_getPrototypeOf(ContextMenu.prototype), \"_refreshActiveDescendant\", this).call(this, $target)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenuHandler\",\r\n        value: function() {\r\n            var $curItem = this._getActiveItem(true);\r\n            var $parentItem = $curItem.parents(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).first();\r\n            if ($parentItem.length) {\r\n                this._hideSubmenusOnSameLevel($parentItem);\r\n                this._hideSubmenu($curItem.closest(\".\".concat(DX_SUBMENU_CLASS)));\r\n                return $parentItem\r\n            }\r\n            this._actions.onCloseRootSubmenu($curItem);\r\n            return $curItem\r\n        }\r\n    }, {\r\n        key: \"_expandSubmenuHandler\",\r\n        value: function($items, location) {\r\n            var $curItem = this._getActiveItem(true);\r\n            var itemData = this._getItemData($curItem);\r\n            var node = this._dataAdapter.getNodeByItem(itemData);\r\n            var isItemHasSubmenu = this._hasSubmenu(node);\r\n            var $submenu = $curItem.children(\".\".concat(DX_SUBMENU_CLASS));\r\n            if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {\r\n                if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\r\n                    this._showSubmenu($curItem)\r\n                }\r\n                return this._nextItem(this._getItemsByLocation(location))\r\n            }\r\n            this._actions.onExpandLastSubmenu($curItem);\r\n            return\r\n        }\r\n    }, {\r\n        key: \"_clean\",\r\n        value: function() {\r\n            if (this._overlay) {\r\n                this._overlay.$element().remove();\r\n                this._overlay = null\r\n            }\r\n            this._detachShowContextMenuEvents(this._getTarget());\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_clean\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_initMarkup\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_render\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_render\", this).call(this);\r\n            this._renderVisibility(this.option(\"visible\"));\r\n            this._addWidgetClass()\r\n        }\r\n    }, {\r\n        key: \"_renderContentImpl\",\r\n        value: function() {\r\n            this._detachShowContextMenuEvents(this._getTarget());\r\n            this._attachShowContextMenuEvents()\r\n        }\r\n    }, {\r\n        key: \"_attachKeyboardEvents\",\r\n        value: function() {\r\n            !this._keyboardListenerId && this._focusTarget().length && _get(_getPrototypeOf(ContextMenu.prototype), \"_attachKeyboardEvents\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_renderContextMenuOverlay\",\r\n        value: function() {\r\n            if (this._overlay) {\r\n                return\r\n            }\r\n            var overlayOptions = this._getOverlayOptions();\r\n            this._overlay = this._createComponent((0, _renderer.default)(\"<div>\").appendTo(this._$element), _overlay.default, overlayOptions);\r\n            var $overlayContent = this._overlay.$content();\r\n            $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);\r\n            this._addCustomCssClass($overlayContent);\r\n            this._addPlatformDependentClass($overlayContent);\r\n            this._attachContextMenuEvent()\r\n        }\r\n    }, {\r\n        key: \"_itemContextMenuHandler\",\r\n        value: function(e) {\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_itemContextMenuHandler\", this).call(this, e);\r\n            e.stopPropagation()\r\n        }\r\n    }, {\r\n        key: \"_addPlatformDependentClass\",\r\n        value: function($element) {\r\n            if (_devices.default.current().phone) {\r\n                $element.addClass(DX_MENU_PHONE_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_detachShowContextMenuEvents\",\r\n        value: function(target) {\r\n            var showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n            if (!showEvent) {\r\n                return\r\n            }\r\n            var eventName = (0, _index.addNamespace)(showEvent, this.NAME);\r\n            if (this._showContextMenuEventHandler) {\r\n                _events_engine.default.off(_dom_adapter.default.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n            } else {\r\n                _events_engine.default.off((0, _renderer.default)(target), eventName)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_attachShowContextMenuEvents\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            var target = this._getTarget();\r\n            var showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n            if (!showEvent) {\r\n                return\r\n            }\r\n            var eventName = (0, _index.addNamespace)(showEvent, this.NAME);\r\n            var contextMenuAction = this._createAction(function(e) {\r\n                var delay = _this3.getShowDelay(_this3.option(\"showEvent\"));\r\n                if (delay) {\r\n                    setTimeout(function() {\r\n                        return _this3._show(e.event)\r\n                    }, delay)\r\n                } else {\r\n                    _this3._show(e.event)\r\n                }\r\n            }, {\r\n                validatingTargetName: \"target\"\r\n            });\r\n            var handler = function(e) {\r\n                return contextMenuAction({\r\n                    event: e,\r\n                    target: (0, _renderer.default)(e.currentTarget)\r\n                })\r\n            };\r\n            contextMenuAction = this._createAction(contextMenuAction);\r\n            if ((0, _type.isRenderer)(target) || target.nodeType || (0, _type.isWindow)(target)) {\r\n                this._showContextMenuEventHandler = void 0;\r\n                _events_engine.default.on(target, eventName, handler)\r\n            } else {\r\n                this._showContextMenuEventHandler = handler;\r\n                _events_engine.default.on(_dom_adapter.default.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hoverEndHandler\",\r\n        value: function(e) {\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_hoverEndHandler\", this).call(this, e);\r\n            e.stopPropagation()\r\n        }\r\n    }, {\r\n        key: \"_renderDimensions\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_renderContainer\",\r\n        value: function($wrapper, submenuContainer) {\r\n            var $holder = submenuContainer || this._itemContainer();\r\n            $wrapper = (0, _renderer.default)(\"<div>\");\r\n            $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\r\n            var $itemsContainer = _get(_getPrototypeOf(ContextMenu.prototype), \"_renderContainer\", this).call(this, $wrapper);\r\n            if (submenuContainer) {\r\n                return $itemsContainer\r\n            }\r\n            if (this.option(\"width\")) {\r\n                return $itemsContainer.css(\"minWidth\", this.option(\"width\"))\r\n            }\r\n            if (this.option(\"height\")) {\r\n                return $itemsContainer.css(\"minHeight\", this.option(\"height\"))\r\n            }\r\n            return $itemsContainer\r\n        }\r\n    }, {\r\n        key: \"_renderSubmenuItems\",\r\n        value: function(node, $itemFrame) {\r\n            this._renderItems(this._getChildNodes(node), $itemFrame);\r\n            this._actions.onSubmenuCreated({\r\n                itemElement: (0, _element.getPublicElement)($itemFrame),\r\n                itemData: node.internalFields.item,\r\n                submenuElement: (0, _element.getPublicElement)($itemFrame.children(\".\".concat(DX_SUBMENU_CLASS)))\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getOverlayOptions\",\r\n        value: function() {\r\n            var position = this.option(\"position\");\r\n            var overlayOptions = {\r\n                focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n                animation: this.option(\"animation\"),\r\n                innerOverlay: true,\r\n                closeOnOutsideClick: this._closeOnOutsideClickHandler.bind(this),\r\n                propagateOutsideClick: true,\r\n                closeOnTargetScroll: true,\r\n                deferRendering: false,\r\n                position: {\r\n                    at: position.at,\r\n                    my: position.my,\r\n                    of: this._getTarget(),\r\n                    collision: \"flipfit\"\r\n                },\r\n                shading: false,\r\n                showTitle: false,\r\n                height: \"auto\",\r\n                width: \"auto\",\r\n                onShown: this._overlayShownActionHandler.bind(this),\r\n                onHiding: this._overlayHidingActionHandler.bind(this),\r\n                onHidden: this._overlayHiddenActionHandler.bind(this)\r\n            };\r\n            return overlayOptions\r\n        }\r\n    }, {\r\n        key: \"_overlayShownActionHandler\",\r\n        value: function(arg) {\r\n            this._actions.onShown(arg)\r\n        }\r\n    }, {\r\n        key: \"_overlayHidingActionHandler\",\r\n        value: function(arg) {\r\n            this._actions.onHiding(arg);\r\n            if (!arg.cancel) {\r\n                this._hideAllShownSubmenus();\r\n                this._setOptionWithoutOptionChange(\"visible\", false)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_overlayHiddenActionHandler\",\r\n        value: function(arg) {\r\n            this._actions.onHidden(arg)\r\n        }\r\n    }, {\r\n        key: \"_closeOnOutsideClickHandler\",\r\n        value: function(e) {\r\n            var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\r\n            if ((0, _type.isFunction)(closeOnOutsideClick)) {\r\n                return closeOnOutsideClick(e)\r\n            }\r\n            if (!closeOnOutsideClick) {\r\n                return false\r\n            }\r\n            if (_dom_adapter.default.isDocument(e.target)) {\r\n                return true\r\n            }\r\n            var $activeItemContainer = this._getActiveItemsContainer(e.target);\r\n            var $itemContainers = this._getItemsContainers();\r\n            var $clickedItem = this._searchActiveItem(e.target);\r\n            var $rootItem = this.$element().parents(\".\".concat(DX_MENU_ITEM_CLASS));\r\n            var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\r\n            var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\r\n            if (isInnerOverlayClicked || isRootItemClicked) {\r\n                if (\"onClick\" === this._getShowSubmenuMode()) {\r\n                    this._hideAllShownChildSubmenus($clickedItem)\r\n                }\r\n                return false\r\n            }\r\n            return true\r\n        }\r\n    }, {\r\n        key: \"_getActiveItemsContainer\",\r\n        value: function(target) {\r\n            return (0, _renderer.default)(target).closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS))\r\n        }\r\n    }, {\r\n        key: \"_getItemsContainers\",\r\n        value: function() {\r\n            return this._overlay._$content.find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS))\r\n        }\r\n    }, {\r\n        key: \"_searchActiveItem\",\r\n        value: function(target) {\r\n            return (0, _renderer.default)(target).closest(\".\".concat(DX_MENU_ITEM_CLASS)).eq(0)\r\n        }\r\n    }, {\r\n        key: \"_isIncludeOverlay\",\r\n        value: function($activeOverlay, $allOverlays) {\r\n            var isSame = false;\r\n            (0, _iterator.each)($allOverlays, function(index, $overlay) {\r\n                if ($activeOverlay.is($overlay) && !isSame) {\r\n                    isSame = true\r\n                }\r\n            });\r\n            return isSame\r\n        }\r\n    }, {\r\n        key: \"_hideAllShownChildSubmenus\",\r\n        value: function($clickedItem) {\r\n            var _this4 = this;\r\n            var $submenuElements = $clickedItem.find(\".\".concat(DX_SUBMENU_CLASS));\r\n            var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n            if ($submenuElements.length > 0) {\r\n                (0, _iterator.each)(shownSubmenus, function(index, $submenu) {\r\n                    var $context = _this4._searchActiveItem($submenu.context).parent();\r\n                    if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\r\n                        _this4._hideSubmenu($submenu)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_showSubmenu\",\r\n        value: function($item) {\r\n            var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\r\n            this._hideSubmenusOnSameLevel($item);\r\n            if (!this._hasSubmenu(node)) {\r\n                return\r\n            }\r\n            var $submenu = $item.children(\".\".concat(DX_SUBMENU_CLASS));\r\n            var isSubmenuRendered = $submenu.length;\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_showSubmenu\", this).call(this, $item);\r\n            if (!isSubmenuRendered) {\r\n                this._renderSubmenuItems(node, $item)\r\n            }\r\n            if (!this._isSubmenuVisible($submenu)) {\r\n                this._drawSubmenu($item)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenusOnSameLevel\",\r\n        value: function($item) {\r\n            var $expandedItems = $item.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS)).siblings().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\r\n            if ($expandedItems.length) {\r\n                $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n                this._hideSubmenu($expandedItems.find(\".\".concat(DX_SUBMENU_CLASS)))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenuGroup\",\r\n        value: function($submenu) {\r\n            if (this._isSubmenuVisible($submenu)) {\r\n                this._hideSubmenuCore($submenu)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isSubmenuVisible\",\r\n        value: function($submenu) {\r\n            return \"visible\" === $submenu.css(\"visibility\")\r\n        }\r\n    }, {\r\n        key: \"_drawSubmenu\",\r\n        value: function($itemElement) {\r\n            var animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\r\n            var $submenu = $itemElement.children(\".\".concat(DX_SUBMENU_CLASS));\r\n            var submenuPosition = this._getSubmenuPosition($itemElement);\r\n            if (this._overlay && this._overlay.option(\"visible\")) {\r\n                if (!(0, _type.isDefined)(this._shownSubmenus)) {\r\n                    this._shownSubmenus = []\r\n                }\r\n                if ((0, _array.inArray)($submenu, this._shownSubmenus)) {\r\n                    this._shownSubmenus.push($submenu)\r\n                }\r\n                if (animation) {\r\n                    _fx.default.stop($submenu)\r\n                }\r\n                _position.default.setup($submenu, submenuPosition);\r\n                if (animation) {\r\n                    if ((0, _type.isPlainObject)(animation.to)) {\r\n                        animation.to.position = submenuPosition\r\n                    }\r\n                    this._animate($submenu, animation)\r\n                }\r\n                $submenu.css(\"visibility\", \"visible\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_animate\",\r\n        value: function($container, options) {\r\n            _fx.default.animate($container, options)\r\n        }\r\n    }, {\r\n        key: \"_getSubmenuPosition\",\r\n        value: function($rootItem) {\r\n            var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\r\n            var $rootItemWrapper = $rootItem.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS));\r\n            var position = {\r\n                collision: \"flip\",\r\n                of: $rootItemWrapper,\r\n                offset: {\r\n                    h: 0,\r\n                    v: -1\r\n                }\r\n            };\r\n            switch (submenuDirection) {\r\n                case \"left\":\r\n                    position.at = \"left top\";\r\n                    position.my = \"right top\";\r\n                    break;\r\n                case \"right\":\r\n                    position.at = \"right top\";\r\n                    position.my = \"left top\";\r\n                    break;\r\n                default:\r\n                    if (this.option(\"rtlEnabled\")) {\r\n                        position.at = \"left top\";\r\n                        position.my = \"right top\"\r\n                    } else {\r\n                        position.at = \"right top\";\r\n                        position.my = \"left top\"\r\n                    }\r\n            }\r\n            return position\r\n        }\r\n    }, {\r\n        key: \"_updateSubmenuVisibilityOnClick\",\r\n        value: function(actionArgs) {\r\n            if (!actionArgs.args.length) {\r\n                return\r\n            }\r\n            var itemData = actionArgs.args[0].itemData;\r\n            var node = this._dataAdapter.getNodeByItem(itemData);\r\n            if (!node) {\r\n                return\r\n            }\r\n            var $itemElement = (0, _renderer.default)(actionArgs.args[0].itemElement);\r\n            var $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\r\n            var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\r\n            if (shouldRenderSubmenu) {\r\n                this._renderSubmenuItems(node, $itemElement);\r\n                $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS))\r\n            }\r\n            if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\r\n                return\r\n            }\r\n            var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\r\n            if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\r\n                return\r\n            }\r\n            this._updateSelectedItemOnClick(actionArgs);\r\n            if (0 === $submenu.length) {\r\n                var $prevSubmenu = (0, _renderer.default)($itemElement.parents(\".\".concat(DX_SUBMENU_CLASS))[0]);\r\n                this._hideSubmenu($prevSubmenu);\r\n                if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\r\n                    this.option(\"visible\", false)\r\n                }\r\n            } else {\r\n                if (this._shownSubmenus && this._shownSubmenus.length > 0) {\r\n                    if (this._shownSubmenus[0].is($submenu)) {\r\n                        this._hideSubmenu($submenu)\r\n                    }\r\n                }\r\n                this._showSubmenu($itemElement)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenu\",\r\n        value: function($curSubmenu) {\r\n            var _this5 = this;\r\n            var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n            (0, _iterator.each)(shownSubmenus, function(index, $submenu) {\r\n                if ($curSubmenu.is($submenu) || (0, _dom.contains)($curSubmenu[0], $submenu[0])) {\r\n                    $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n                    _this5._hideSubmenuCore($submenu)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenuCore\",\r\n        value: function($submenu) {\r\n            var index = (0, _array.inArray)($submenu, this._shownSubmenus);\r\n            var animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\r\n            if (index >= 0) {\r\n                this._shownSubmenus.splice(index, 1)\r\n            }\r\n            this._stopAnimate($submenu);\r\n            animation && this._animate($submenu, animation);\r\n            $submenu.css(\"visibility\", \"hidden\")\r\n        }\r\n    }, {\r\n        key: \"_stopAnimate\",\r\n        value: function($container) {\r\n            _fx.default.stop($container, true)\r\n        }\r\n    }, {\r\n        key: \"_hideAllShownSubmenus\",\r\n        value: function() {\r\n            var _this6 = this;\r\n            var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n            var $expandedItems = this._overlay.$content().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\r\n            $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n            (0, _iterator.each)(shownSubmenus, function(_, $submenu) {\r\n                _this6._hideSubmenu($submenu)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_visibilityChanged\",\r\n        value: function(visible) {\r\n            if (visible) {\r\n                this._renderContentImpl()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            if ((0, _array.inArray)(args.name, ACTIONS) > -1) {\r\n                this._initActions();\r\n                return\r\n            }\r\n            switch (args.name) {\r\n                case \"visible\":\r\n                    this._renderVisibility(args.value);\r\n                    break;\r\n                case \"showEvent\":\r\n                case \"position\":\r\n                case \"submenuDirection\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"target\":\r\n                    args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\r\n                    this._invalidate();\r\n                    break;\r\n                case \"closeOnOutsideClick\":\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(ContextMenu.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderVisibility\",\r\n        value: function(showing) {\r\n            return showing ? this._show() : this._hide()\r\n        }\r\n    }, {\r\n        key: \"_toggleVisibility\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_show\",\r\n        value: function(event) {\r\n            var args = {\r\n                jQEvent: event\r\n            };\r\n            var promise = (new _deferred.Deferred).reject().promise();\r\n            this._actions.onShowing(args);\r\n            if (args.cancel) {\r\n                return promise\r\n            }\r\n            var position = this._positionContextMenu(event);\r\n            if (position) {\r\n                if (!this._overlay) {\r\n                    this._renderContextMenuOverlay();\r\n                    this._overlay.$content().addClass(this._widgetClass());\r\n                    this._renderFocusState();\r\n                    this._attachHoverEvents();\r\n                    this._attachClickEvent();\r\n                    this._renderItems(this._dataAdapter.getRootNodes())\r\n                }\r\n                this._setOptionWithoutOptionChange(\"visible\", true);\r\n                this._overlay.option(\"position\", position);\r\n                promise = this._overlay.show();\r\n                event && event.stopPropagation();\r\n                this._setAriaAttributes()\r\n            }\r\n            return promise\r\n        }\r\n    }, {\r\n        key: \"_setAriaAttributes\",\r\n        value: function() {\r\n            this._overlayContentId = \"dx-\".concat(new _guid.default);\r\n            this.setAria(\"owns\", this._overlayContentId);\r\n            this.setAria({\r\n                id: this._overlayContentId,\r\n                role: \"menu\"\r\n            }, this._overlay.$content())\r\n        }\r\n    }, {\r\n        key: \"_cleanAriaAttributes\",\r\n        value: function() {\r\n            this._overlay && this.setAria(\"id\", null, this._overlay.$content());\r\n            this.setAria(\"owns\", void 0)\r\n        }\r\n    }, {\r\n        key: \"_getTarget\",\r\n        value: function() {\r\n            return this.option(\"target\") || this.option(\"position\").of || (0, _renderer.default)(_dom_adapter.default.getDocument())\r\n        }\r\n    }, {\r\n        key: \"_getContextMenuPosition\",\r\n        value: function() {\r\n            return (0, _extend.extend)({}, this.option(\"position\"), {\r\n                of: this._getTarget()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_positionContextMenu\",\r\n        value: function(jQEvent) {\r\n            var position = this._getContextMenuPosition();\r\n            var isInitialPosition = this._isInitialOptionValue(\"position\");\r\n            var positioningAction = this._createActionByOption(\"onPositioning\", actionArgs);\r\n            if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\r\n                position.of = jQEvent\r\n            }\r\n            var actionArgs = {\r\n                position: position,\r\n                event: jQEvent\r\n            };\r\n            positioningAction(actionArgs);\r\n            if (actionArgs.cancel) {\r\n                position = null\r\n            } else {\r\n                if (actionArgs.event) {\r\n                    actionArgs.event.cancel = true;\r\n                    jQEvent.preventDefault()\r\n                }\r\n            }\r\n            return position\r\n        }\r\n    }, {\r\n        key: \"_refresh\",\r\n        value: function() {\r\n            if (!(0, _window.hasWindow)()) {\r\n                _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this)\r\n            } else {\r\n                if (this._overlay) {\r\n                    var lastPosition = this._overlay.option(\"position\");\r\n                    _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\r\n                    this._overlay && this._overlay.option(\"position\", lastPosition)\r\n                } else {\r\n                    _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hide\",\r\n        value: function() {\r\n            var promise;\r\n            if (this._overlay) {\r\n                promise = this._overlay.hide();\r\n                this._setOptionWithoutOptionChange(\"visible\", false)\r\n            }\r\n            this._cleanAriaAttributes();\r\n            this.option(\"focusedElement\", null);\r\n            return promise || (new _deferred.Deferred).reject().promise()\r\n        }\r\n    }, {\r\n        key: \"toggle\",\r\n        value: function(showing) {\r\n            var visible = this.option(\"visible\");\r\n            showing = void 0 === showing ? !visible : showing;\r\n            return this._renderVisibility(showing)\r\n        }\r\n    }, {\r\n        key: \"show\",\r\n        value: function() {\r\n            return this.toggle(true)\r\n        }\r\n    }, {\r\n        key: \"hide\",\r\n        value: function() {\r\n            return this.toggle(false)\r\n        }\r\n    }]);\r\n    return ContextMenu\r\n}(_ui.default);\r\n(0, _component_registrator.default)(\"dxContextMenu\", ContextMenu);\r\nvar _default = ContextMenu;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}