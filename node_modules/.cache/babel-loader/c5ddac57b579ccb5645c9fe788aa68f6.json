{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\Customer\\\\ListCustomer\\\\index.js\";\nimport React from \"react\";\nimport { NormalButton, NormalSelect } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport filter from \"../../../../assets/images/filter.png\";\nimport \"./style.scss\";\nimport { getCustomer } from \"redux/actions/customer\";\nimport { updateForm } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nexport class ListCustomerClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [{\n        label: \"Customer Name\",\n        sortKey: \"customerName\"\n      }, {\n        label: \"Address\",\n        sortKey: \"address\"\n      }, {\n        label: \"Contact Number\"\n      }, {\n        label: \"Last Visit\",\n        sortKey: \"lastVisit\"\n      }, {\n        label: \"Upcoming Appointments\"\n      }, {\n        label: \"\"\n      }],\n      customerList: [],\n      meta: {},\n      active: false,\n      currentIndex: -1\n    };\n\n    this.componentDidMount = () => {\n      this.getCustomer({});\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.setState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n\n    this.getCustomer = data => {\n      let {\n        page = 1,\n        limit = 10,\n        search = \"\"\n      } = data;\n      this.props.getCustomer(`?page=${page}&limit=${limit}&search=${search}`).then(res => {\n        console.log(res, \"dsfdfaafg\");\n        this.setState({\n          customerList: res.data.dataList,\n          meta: res.data.meta.pagination\n        });\n      });\n    };\n\n    this.handlePagination = page => {\n      console.log(page, \"dsfsdfsdfsdf\");\n      this.getCustomer(page);\n    };\n\n    this.handlesearch = event => {\n      console.log(\"sadfasdfasdf\", event.target.value);\n      event.persist();\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(() => {\n          let searchString = event.target.value;\n          let data = {\n            search: searchString\n          };\n          this.getCustomer(data);\n        }, 500);\n      }\n\n      this.debouncedFn();\n    };\n\n    this.bookAppointment = async data => {\n      let formFields = {};\n      formFields[\"custId\"] = data.id;\n      formFields[\"custName\"] = data.cust_name;\n      await this.props.updateForm(\"basicApptDetail\", formFields);\n      this.props.history.push(`/admin/newappointment`);\n    };\n  }\n\n  render() {\n    let {\n      headerDetails,\n      customerList,\n      meta,\n      currentIndex,\n      active\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customer-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"head-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, \"Customer\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100 mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(InputSearch, {\n      className: \"\",\n      placeholder: \"Search Customer\",\n      onChange: this.handlesearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100 col-4 p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 float-right\",\n      label: \"Add Customer\",\n      onClick: () => this.props.history.push(\"/admin/customer/add\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 19\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-table-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: meta,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, customerList ? customerList.map((item, index) => {\n      let {\n        id,\n        cust_name,\n        cust_address,\n        last_visit,\n        upcoming_appointments,\n        cust_phone2\n      } = item;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 31\n        }\n      }, cust_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 31\n        }\n      }, cust_address)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 31\n        }\n      }, cust_phone2)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 31\n        }\n      }, last_visit)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 31\n        }\n      }, upcoming_appointments)), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"position-relative\",\n        ref: node => {\n          this.node = node;\n        },\n        onClick: () => this.handleClick(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 29\n        }\n      }, currentIndex === index ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more-active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"option card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pt-3\",\n        onClick: () => this.props.history.push(`/admin/customer/${id}/details`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-eye-grey px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 39\n        }\n      }), \" \", \"View\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-schedule px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 39\n        }\n      }), \" \", \"Reschedule Appointment\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16\",\n        onClick: () => this.bookAppointment(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"px-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        width: \"31\",\n        height: \"30\",\n        viewBox: \"0 0 31 30\",\n        fill: \"none\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"rect\", {\n        width: \"31\",\n        height: \"30\",\n        fill: \"#F9F9F9\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 43\n        }\n      }), /*#__PURE__*/React.createElement(\"path\", {\n        d: \"M15 8V22\",\n        stroke: \"#848484\",\n        \"stroke-linecap\": \"round\",\n        \"stroke-linejoin\": \"round\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 43\n        }\n      }), /*#__PURE__*/React.createElement(\"path\", {\n        d: \"M8 15H22\",\n        stroke: \"#848484\",\n        \"stroke-linecap\": \"round\",\n        \"stroke-linejoin\": \"round\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 43\n        }\n      }))), \"Book Appointment\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-cancel-schedule px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 39\n        }\n      }), \" \", \"Cancel Appointment\", \" \"))) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 35\n        }\n      }))));\n    }) : \"\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({// filter: state.dashboard\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCustomer,\n    updateForm\n  }, dispatch);\n};\n\nexport const ListCustomer = connect(mapStateToProps, mapDispatchToProps)(ListCustomerClass);","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/Customer/ListCustomer/index.js"],"names":["React","NormalButton","NormalSelect","InputSearch","TableWrapper","filter","getCustomer","updateForm","connect","bindActionCreators","_","ListCustomerClass","Component","state","headerDetails","label","sortKey","customerList","meta","active","currentIndex","componentDidMount","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","setState","prevState","e","node","contains","target","data","page","limit","search","props","then","res","console","log","dataList","pagination","handlePagination","handlesearch","event","value","persist","debouncedFn","debounce","searchString","bookAppointment","formFields","id","cust_name","history","push","render","map","item","index","cust_address","last_visit","upcoming_appointments","cust_phone2","mapStateToProps","mapDispatchToProps","dispatch","ListCustomer"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { NormalButton, NormalSelect } from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport filter from \"../../../../assets/images/filter.png\";\r\nimport \"./style.scss\";\r\nimport { getCustomer } from \"redux/actions/customer\";\r\nimport { updateForm } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport _ from \"lodash\";\r\n\r\nexport class ListCustomerClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Customer Name\", sortKey: \"customerName\" },\r\n      { label: \"Address\", sortKey: \"address\" },\r\n      { label: \"Contact Number\" },\r\n      { label: \"Last Visit\", sortKey: \"lastVisit\" },\r\n      { label: \"Upcoming Appointments\" },\r\n      { label: \"\" },\r\n    ],\r\n    customerList: [],\r\n    meta: {},\r\n    active: false,\r\n    currentIndex: -1,\r\n  };\r\n  // handleClick = (key,active) => {\r\n  //     let currentIndex;\r\n  //     if (this.state.active == true) {\r\n  //         this.setState({\r\n  //             active: false,\r\n  //             currentIndex: '-1'\r\n  //         })\r\n  //     }\r\n  //     else {\r\n  //         this.setState({\r\n  //             active: active,\r\n  //             currentIndex: key\r\n  //         })\r\n  //     }\r\n  // }\r\n\r\n  componentDidMount = () => {\r\n    this.getCustomer({});\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  getCustomer = data => {\r\n    let { page = 1, limit = 10, search = \"\" } = data;\r\n    this.props\r\n      .getCustomer(`?page=${page}&limit=${limit}&search=${search}`)\r\n      .then(res => {\r\n        console.log(res, \"dsfdfaafg\");\r\n        this.setState({\r\n          customerList: res.data.dataList,\r\n          meta: res.data.meta.pagination,\r\n        });\r\n      });\r\n  };\r\n\r\n  handlePagination = page => {\r\n    console.log(page, \"dsfsdfsdfsdf\");\r\n    this.getCustomer(page);\r\n  };\r\n\r\n  handlesearch = event => {\r\n    console.log(\"sadfasdfasdf\", event.target.value);\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        let data = { search: searchString };\r\n        this.getCustomer(data);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  bookAppointment = async data => {\r\n    let formFields = {};\r\n    formFields[\"custId\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    await this.props.updateForm(\"basicApptDetail\", formFields);\r\n    this.props.history.push(`/admin/newappointment`);\r\n  };\r\n\r\n  render() {\r\n    let { headerDetails, customerList, meta, currentIndex, active } =\r\n      this.state;\r\n    return (\r\n      <>\r\n        <div className=\"customer-list\">\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col-md-6\">\r\n              <h3 className=\"head-label\">Customer</h3>\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <div className=\"d-flex\">\r\n                <div className=\"w-100 mr-5\">\r\n                  <InputSearch\r\n                    className=\"\"\r\n                    placeholder=\"Search Customer\"\r\n                    onChange={this.handlesearch}\r\n                  />\r\n                </div>\r\n                <div className=\"w-100 col-4 p-0\">\r\n                  <NormalButton\r\n                    mainbg={true}\r\n                    className=\"col-12 fs-15 float-right\"\r\n                    label=\"Add Customer\"\r\n                    onClick={() =>\r\n                      this.props.history.push(\"/admin/customer/add\")\r\n                    }\r\n                  />\r\n                </div>\r\n                {/* <div className=\"bg-white ml-5 filter-icon filter-section\" onClick={() => { this.handleClick('filter') }}>\r\n                                    <img src={filter} alt=\"\" />\r\n                                    {currentIndex === 'filter' &&\r\n                                        <>\r\n                                            <div className=\"filter-category\">\r\n                                                <p className=\"subcategory\">Available today</p>\r\n                                                <p className=\"subcategory\">Unavailable today</p>\r\n                                                <p className=\"subcategory\">Morning shift</p>\r\n                                                <p className=\"subcategory\">Evening shift</p>\r\n                                            </div>\r\n                                        </>\r\n                                    }\r\n                                </div> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* <div className=\"filter-by\">\r\n                        <p className=\"head\">Filter</p>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-3\">\r\n                                <div>\r\n                                    <label className=\"label\">Location</label>\r\n                                    <div className=\"input-group\">\r\n                                        <NormalSelect\r\n                                            placeholder=\"Masseuse\"\r\n                                            // options={treatmentOption}\r\n                                            // value={treatment}\r\n                                            iconname=\"icon-down-key\"\r\n                                            name=\"treatment\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-3\">\r\n                                <div>\r\n                                    <label className=\"label\">Service</label>\r\n                                    <div className=\"input-group\">\r\n                                        <NormalSelect\r\n                                            placeholder=\"Select department\"\r\n                                            // options={treatmentOption}\r\n                                            // value={treatment}\r\n                                            iconname=\"icon-down-key\"\r\n                                            name=\"treatment\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-3\">\r\n                                <div>\r\n                                    <label className=\"label\">Date</label>\r\n                                    <div className=\"input-group\">\r\n                                        <NormalSelect\r\n                                            placeholder=\"Select date\"\r\n                                            // options={treatmentOption}\r\n                                            // value={treatment}\r\n                                            iconname=\"icon-down-key\"\r\n                                            name=\"treatment\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div> */}\r\n\r\n          <div className=\"tab-table-content\">\r\n            <div className=\"py-4\">\r\n              <div className=\"table-container\">\r\n                <TableWrapper\r\n                  headerDetails={headerDetails}\r\n                  queryHandler={this.handlePagination}\r\n                  pageMeta={meta}\r\n                >\r\n                  {customerList\r\n                    ? customerList.map((item, index) => {\r\n                        let {\r\n                          id,\r\n                          cust_name,\r\n                          cust_address,\r\n                          last_visit,\r\n                          upcoming_appointments,\r\n                          cust_phone2,\r\n                        } = item;\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {cust_name}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {cust_address}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {cust_phone2}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {last_visit}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {upcoming_appointments}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className=\"position-relative\"\r\n                              ref={node => {\r\n                                this.node = node;\r\n                              }}\r\n                              onClick={() => this.handleClick(index)}\r\n                            >\r\n                              {currentIndex === index ? (\r\n                                <>\r\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\r\n                                    <i className=\"icon-more\"></i>\r\n                                  </div>\r\n                                  <div className=\"option card\">\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-16 pt-3\"\r\n                                      onClick={() =>\r\n                                        this.props.history.push(\r\n                                          `/admin/customer/${id}/details`\r\n                                        )\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-eye-grey px-3\"></span>{\" \"}\r\n                                      View{\" \"}\r\n                                    </div>\r\n                                    <div className=\"d-flex align-items-center fs-16\">\r\n                                      <span className=\"icon-schedule px-3\"></span>{\" \"}\r\n                                      Reschedule Appointment{\" \"}\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-16\"\r\n                                      onClick={() => this.bookAppointment(item)}\r\n                                    >\r\n                                      <span className=\"px-2\">\r\n                                        <svg\r\n                                          width=\"31\"\r\n                                          height=\"30\"\r\n                                          viewBox=\"0 0 31 30\"\r\n                                          fill=\"none\"\r\n                                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        >\r\n                                          <rect\r\n                                            width=\"31\"\r\n                                            height=\"30\"\r\n                                            fill=\"#F9F9F9\"\r\n                                          />\r\n                                          <path\r\n                                            d=\"M15 8V22\"\r\n                                            stroke=\"#848484\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                          />\r\n                                          <path\r\n                                            d=\"M8 15H22\"\r\n                                            stroke=\"#848484\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                          />\r\n                                        </svg>\r\n                                      </span>\r\n                                      Book Appointment\r\n                                    </div>\r\n                                    <div className=\"d-flex align-items-center fs-16 pb-3\">\r\n                                      <span className=\"icon-cancel-schedule px-3\"></span>{\" \"}\r\n                                      Cancel Appointment{\" \"}\r\n                                    </div>\r\n                                  </div>\r\n                                </>\r\n                              ) : (\r\n                                <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\r\n                                  <i className=\"icon-more\"></i>\r\n                                </div>\r\n                              )}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    : \"\"}\r\n                </TableWrapper>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCustomer,\r\n      updateForm,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ListCustomer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ListCustomerClass);\r\n"]},"metadata":{},"sourceType":"module"}