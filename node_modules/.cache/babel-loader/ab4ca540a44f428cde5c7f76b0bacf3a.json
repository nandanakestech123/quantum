{"ast":null,"code":"import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NormalInput,NormalSelect,NormalTextarea,NormalDate,NormalButton,NormalModal}from'component/common';import Modal from\"assets/images/modal-avatar.png\";import'./style.scss';import{getCommonApi,commonPatchApi}from'redux/actions/common';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import closeIcon from'assets/images/close.png';import _ from'lodash';import{dateFormat}from'service/helperFunctions';import{history}from'helpers';export var AppointmentDetailClass=/*#__PURE__*/function(_Component){_inherits(AppointmentDetailClass,_Component);var _super=_createSuper(AppointmentDetailClass);function AppointmentDetailClass(){var _this;_classCallCheck(this,AppointmentDetailClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{appt_status:\"\",sec_status:\"\",Treatment:{emp_no:null}},appointmentDetail:{},userDetail:[{label:'Joined',value:'02.05.2020'},{label:'D.O.B',value:'02.05.1995'},{label:'Gender',value:'Female'},{label:'Phone',value:'+65 62970125'},{label:'Email',value:'jamie@gmail.com'},{label:'Address',value:'1/2, Jurong west, Singapore.'},{label:'Member type',value:'Premium'}],bookingList:[],secStatusList:[],isOpenModal:false,customerOption:[],search:\"\",staffOption:[]};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$state,formFields,staffOption;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=_this.state,formFields=_this$state.formFields,staffOption=_this$state.staffOption;_context2.next=3;return _this.props.getCommonApi('bookingstatus/').then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var status,data,sec_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=res.status,data=res.data,sec_data=res.sec_data;if(!(status===200)){_context.next=4;break;}_context.next=4;return _this.setState({bookingList:data,secStatusList:sec_data});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());case 3:_context2.next=5;return _this.props.getCommonApi(\"appointment/Staffs/?Outlet=&date=\".concat(dateFormat(new Date()))).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;staffOption.push({value:value.id,label:value.emp_name});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({staffOption:staffOption});}});case 5:_this.getAppointmentDetail();case 6:case\"end\":return _context2.stop();}}},_callee2);}));_this.getAppointmentDetail=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var appointmentDetail;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:appointmentDetail=_this.state.appointmentDetail;_context4.next=3;return _this.props.getCommonApi(\"appointment/\".concat(_this.props.match.params.id,\"/\")).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(key){var status,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:status=key.status,data=key.data;if(!(status===200)){_context3.next=6;break;}appointmentDetail=data;_context3.next=5;return _this.setState({appointmentDetail:appointmentDetail});case 5:_this.getDataFromStore();case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref4.apply(this,arguments);};}());case 3:case\"end\":return _context4.stop();}}},_callee4);}));_this.getDataFromStore=function(){var _this$state2=_this.state,appointmentDetail=_this$state2.appointmentDetail,formFields=_this$state2.formFields;formFields['appt_status']=appointmentDetail.Appointment_details.Booking_status;formFields['sec_status']=appointmentDetail.Appointment_details.Secondary_Status;formFields['Treatment']['emp_no']=appointmentDetail.Treatment.emp_id;_this.setState({formFields:formFields});};_this.handleInput=function(_ref5){var _ref5$target=_ref5.target,name=_ref5$target.name,value=_ref5$target.value;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value===true?1:value;_this.setState({formFields:formFields});};_this.handleRemark=function(_ref6){var _ref6$target=_ref6.target,name=_ref6$target.name,value=_ref6$target.value;var appointmentDetail=_this.state.appointmentDetail;appointmentDetail['Remark']['New_Remark']=value;_this.setState({appointmentDetail:appointmentDetail});};_this.handleBookingStatus=function(_ref7){var _ref7$target=_ref7.target,name=_ref7$target.name,value=_ref7$target.value;var formFields=Object.assign({},_this.state.formFields);formFields['appt_status']=value;_this.setState({formFields:formFields});};_this.handleSecStatus=function(_ref8){var _ref8$target=_ref8.target,name=_ref8$target.name,value=_ref8$target.value;var formFields=Object.assign({},_this.state.formFields);formFields['sec_status']=value;_this.setState({formFields:formFields});};_this.handleChangeTerapist=function(_ref9){var _ref9$target=_ref9.target,name=_ref9$target.name,value=_ref9$target.value;var formFields=Object.assign({},_this.state.formFields);formFields['Treatment']['emp_no']=value;_this.setState({formFields:formFields});};_this.handleDialog=function(){var isOpenModal=_this.state.isOpenModal;isOpenModal=!isOpenModal;_this.setState({isOpenModal:isOpenModal});};_this.handleSearch=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(event){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var searchString,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:searchString=event.target.value;data={search:searchString};// this.queryHandler(data)\n_context5.next=4;return _this.setState({search:searchString});case 4:_this.search(searchString);case 5:case\"end\":return _context5.stop();}}},_callee5);})),500);}_this.debouncedFn();case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x3){return _ref10.apply(this,arguments);};}();_this.search=function(searchString){var search=_this.state.search;_this.props.getCommonApi(\"custappt/?search=\".concat(search)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});};_this.handleSubmit=function(){var formFields=_this.state.formFields;_this.props.commonPatchApi(\"appointment/\".concat(_this.props.match.params.id,\"/UpdateDetail/\"),formFields).then(function(res){});};return _this;}_createClass(AppointmentDetailClass,[{key:\"render\",value:function render(){var _this$state3=this.state,_this$state3$appointm=_this$state3.appointmentDetail,appointmentDetail=_this$state3$appointm===void 0?{}:_this$state3$appointm,formFields=_this$state3.formFields,bookingList=_this$state3.bookingList,secStatusList=_this$state3.secStatusList,customerOption=_this$state3.customerOption,isOpenModal=_this$state3.isOpenModal,staffOption=_this$state3.staffOption;var _appointmentDetail$Ap=appointmentDetail.Appointment_details,Appointment_details=_appointmentDetail$Ap===void 0?{}:_appointmentDetail$Ap,_appointmentDetail$Bo=appointmentDetail.Booking_details,Booking_details=_appointmentDetail$Bo===void 0?{}:_appointmentDetail$Bo,_appointmentDetail$Re=appointmentDetail.Remark,Remark=_appointmentDetail$Re===void 0?{}:_appointmentDetail$Re,_appointmentDetail$Tr=appointmentDetail.Treatment,Treatment=_appointmentDetail$Tr===void 0?{}:_appointmentDetail$Tr,_appointmentDetail$cu=appointmentDetail.customer_detail,customer_detail=_appointmentDetail$cu===void 0?{}:_appointmentDetail$cu,Payment=appointmentDetail.Payment,Customer_Request=appointmentDetail.Customer_Request;var Booking_status=Appointment_details.Booking_status,Date=Appointment_details.Date,Outlet=Appointment_details.Outlet,Secondary_Status=Appointment_details.Secondary_Status,Time=Appointment_details.Time;// let { Booking_status,Date,Outlet,Secondary_Status, Time } = Appointment_details;\nvar Appointment_channel=Booking_details.Appointment_channel,Booked_by=Booking_details.Booked_by,Source=Booking_details.Source;var New_Remark=Remark.New_Remark,Remark_Points=Remark.Remark_Points;var Duration=Treatment.Duration,End_Time=Treatment.End_Time,Room=Treatment.Room,Start_Time=Treatment.Start_Time,Status=Treatment.Status,Therapist=Treatment.Therapist,id=Treatment.id,emp_no=Treatment.emp_no;var cust_address=customer_detail.cust_address,cust_code=customer_detail.cust_code,cust_dob=customer_detail.cust_dob,cust_email=customer_detail.cust_email,cust_joindate=customer_detail.cust_joindate,cust_name=customer_detail.cust_name,cust_phone2=customer_detail.cust_phone2,cust_pic=customer_detail.cust_pic,cust_sex=customer_detail.cust_sex,member_type=customer_detail.member_type;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"appointment-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-9\"},/*#__PURE__*/React.createElement(\"div\",{className:\"re-direct\",onClick:function onClick(){return history.push(\"/admin/appointment\");}},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-left-arrow\"}),/*#__PURE__*/React.createElement(\"p\",null,\"Back to appointments\")),/*#__PURE__*/React.createElement(\"p\",{className:\"head-label\"},\"Appointment details\"),/*#__PURE__*/React.createElement(\"div\",{className:\"appointment\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{className:\"first-value\"},\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Time\"),/*#__PURE__*/React.createElement(\"th\",null,\"Outlet\"),/*#__PURE__*/React.createElement(\"th\",null,\"Booking Status\"),/*#__PURE__*/React.createElement(\"th\",null,\"Treatment\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,Date),/*#__PURE__*/React.createElement(\"td\",null,Time),/*#__PURE__*/React.createElement(\"td\",null,Outlet),/*#__PURE__*/React.createElement(\"td\",{className:\"appointment-status\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:bookingList,value:formFields.appt_status,name:\"bookingStatus\",onChange:this.handleBookingStatus,className:\"customer-name status py-1\"}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:secStatusList,value:formFields.sec_status,name:\"sec_status\",onChange:this.handleSecStatus,className:\"customer-name status py-1\"}))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"status\"},/*#__PURE__*/React.createElement(\"p\",{className:\"status-label\"},\"Payment \"),/*#__PURE__*/React.createElement(\"p\",{className:\"status-detail\"},Payment)),/*#__PURE__*/React.createElement(\"p\",{className:\"head-label\"},\"Treatment\"),/*#__PURE__*/React.createElement(\"div\",{className:\"appointment\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{className:\"first-value\"},\"Treatment\"),/*#__PURE__*/React.createElement(\"th\",{className:\"first-value\"},\"Start time\"),/*#__PURE__*/React.createElement(\"th\",null,\"End Time\"),/*#__PURE__*/React.createElement(\"th\",null,\"Room\"),/*#__PURE__*/React.createElement(\"th\",null,\"Therapist(s)\"),/*#__PURE__*/React.createElement(\"th\",null,\"Status\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,Treatment.Treatment),/*#__PURE__*/React.createElement(\"td\",null,Start_Time),/*#__PURE__*/React.createElement(\"td\",null,End_Time),/*#__PURE__*/React.createElement(\"td\",null,Room),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:staffOption,value:formFields.Treatment.emp_no,name:\"emp_no\",onChange:this.handleChangeTerapist,className:\"customer-name p-0\"}))),/*#__PURE__*/React.createElement(\"td\",{className:\"appointment-status\"},Status))))),/*#__PURE__*/React.createElement(\"p\",{className:\"head-label\"},\"Remarks\"),/*#__PURE__*/React.createElement(\"div\",{className:\"my-4\"},/*#__PURE__*/React.createElement(NormalTextarea,{placeholder:\"Enter customer feedbacks...\",value:New_Remark,name:\"New_Remark\",onChange:this.handleRemark})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Submit\",success:true,onClick:this.handleSubmit,className:\"mr-2 col-12\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"detail-card card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"detail-user-profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-avatar\"},/*#__PURE__*/React.createElement(\"img\",{className:\"modal-avatar\",src:cust_pic,alt:\"\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"user-name text-center\"},cust_name),/*#__PURE__*/React.createElement(NormalButton,{label:\"Id : \".concat(cust_code),className:\"mr-2 col-12\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"user-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"detail d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"status-label\"},\"Joined\"),/*#__PURE__*/React.createElement(\"p\",{className:\"spliter\"},\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"status-detail\"},cust_joindate)),/*#__PURE__*/React.createElement(\"div\",{className:\"detail d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"status-label\"},\"D.O.B\"),/*#__PURE__*/React.createElement(\"p\",{className:\"spliter\"},\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"status-detail\"},cust_dob)),/*#__PURE__*/React.createElement(\"div\",{className:\"detail d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"status-label\"},\"Gender\"),/*#__PURE__*/React.createElement(\"p\",{className:\"spliter\"},\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"status-detail\"},cust_sex)),/*#__PURE__*/React.createElement(\"div\",{className:\"detail d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"status-label\"},\"Phone\"),/*#__PURE__*/React.createElement(\"p\",{className:\"spliter\"},\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"status-detail\"},cust_phone2)),/*#__PURE__*/React.createElement(\"div\",{className:\"detail d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"status-label\"},\"Email\"),/*#__PURE__*/React.createElement(\"p\",{className:\"spliter\"},\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"status-detail\"},cust_email)),/*#__PURE__*/React.createElement(\"div\",{className:\"detail d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"status-label\"},\"Address\"),/*#__PURE__*/React.createElement(\"p\",{className:\"spliter\"},\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"status-detail\"},cust_address)),/*#__PURE__*/React.createElement(\"div\",{className:\"detail d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"status-label\"},\"Member type\"),/*#__PURE__*/React.createElement(\"p\",{className:\"spliter\"},\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"status-detail\"},member_type))))))));}}]);return AppointmentDetailClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonPatchApi:commonPatchApi},dispatch);};export var AppointmentDetail=connect(null,mapDispatchToProps)(AppointmentDetailClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Appointment/AppointmentDetail/index.js"],"names":["React","Component","NormalInput","NormalSelect","NormalTextarea","NormalDate","NormalButton","NormalModal","Modal","getCommonApi","commonPatchApi","connect","bindActionCreators","closeIcon","_","dateFormat","history","AppointmentDetailClass","state","formFields","appt_status","sec_status","Treatment","emp_no","appointmentDetail","userDetail","label","value","bookingList","secStatusList","isOpenModal","customerOption","search","staffOption","componentDidMount","props","then","res","status","data","sec_data","setState","Date","key","push","id","emp_name","getAppointmentDetail","match","params","getDataFromStore","Appointment_details","Booking_status","Secondary_Status","emp_id","handleInput","target","name","Object","assign","handleRemark","handleBookingStatus","handleSecStatus","handleChangeTerapist","handleDialog","handleSearch","event","persist","debouncedFn","debounce","searchString","handleSubmit","Booking_details","Remark","customer_detail","Payment","Customer_Request","Outlet","Time","Appointment_channel","Booked_by","Source","New_Remark","Remark_Points","Duration","End_Time","Room","Start_Time","Status","Therapist","cust_address","cust_code","cust_dob","cust_email","cust_joindate","cust_name","cust_phone2","cust_pic","cust_sex","member_type","mapDispatchToProps","dispatch","AppointmentDetail"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { NormalInput, NormalSelect, NormalTextarea, NormalDate, NormalButton, NormalModal } from 'component/common';\r\nimport Modal from \"assets/images/modal-avatar.png\";\r\nimport './style.scss';\r\nimport { getCommonApi, commonPatchApi } from 'redux/actions/common';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport closeIcon from 'assets/images/close.png';\r\nimport _ from 'lodash';\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport { history } from 'helpers';\r\n\r\nexport class AppointmentDetailClass extends Component {\r\n    state = {\r\n        formFields: {\r\n            appt_status: \"\",\r\n            sec_status: \"\",\r\n            Treatment: {\r\n                emp_no: null\r\n            }\r\n        },\r\n        appointmentDetail: {},\r\n        userDetail: [\r\n            { label: 'Joined', value: '02.05.2020' },\r\n            { label: 'D.O.B', value: '02.05.1995' },\r\n            { label: 'Gender', value: 'Female' },\r\n            { label: 'Phone', value: '+65 62970125' },\r\n            { label: 'Email', value: 'jamie@gmail.com' },\r\n            { label: 'Address', value: '1/2, Jurong west, Singapore.' },\r\n            { label: 'Member type', value: 'Premium' },\r\n        ],\r\n        bookingList: [],\r\n        secStatusList: [],\r\n        isOpenModal: false,\r\n        customerOption: [],\r\n        search: \"\",\r\n        staffOption: [],\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        let { formFields, staffOption } = this.state;\r\n        await this.props.getCommonApi('bookingstatus/').then(async(res) => {\r\n            let { status, data, sec_data } = res;\r\n            if (status === 200) {\r\n                await this.setState({ bookingList: data, secStatusList: sec_data })\r\n            }\r\n        })\r\n        await this.props.getCommonApi(`appointment/Staffs/?Outlet=&date=${dateFormat(new Date())}`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    staffOption.push({ value: value.id, label: value.emp_name })\r\n                }\r\n                this.setState({ staffOption })\r\n            }\r\n        })\r\n        this.getAppointmentDetail();\r\n    }\r\n\r\n    getAppointmentDetail = async() => {\r\n        let { appointmentDetail } = this.state;\r\n        await this.props.getCommonApi(`appointment/${this.props.match.params.id}/`).then(async (key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                appointmentDetail = data;\r\n                await this.setState({\r\n                    appointmentDetail\r\n                })\r\n                this.getDataFromStore();\r\n            }\r\n        })\r\n    }\r\n\r\n    getDataFromStore = () => {\r\n        let { appointmentDetail, formFields } = this.state;\r\n        formFields['appt_status'] = appointmentDetail.Appointment_details.Booking_status;\r\n        formFields['sec_status'] = appointmentDetail.Appointment_details.Secondary_Status;\r\n        formFields['Treatment']['emp_no'] = appointmentDetail.Treatment.emp_id;\r\n        this.setState({\r\n            formFields\r\n        })\r\n    }\r\n\r\n    handleInput = ({ target: { name, value } }) => {\r\n\r\n        let formFields = Object.assign({}, this.state.formFields)\r\n        formFields[name] = (value === true ? 1 : value);\r\n        this.setState({\r\n            formFields\r\n        })\r\n    }\r\n\r\n    handleRemark = ({ target: { name, value } }) => {\r\n        let { appointmentDetail } = this.state;\r\n        appointmentDetail['Remark']['New_Remark'] = value;\r\n        this.setState({\r\n            appointmentDetail\r\n        });\r\n    }\r\n\r\n    handleBookingStatus = ({ target: { name, value } }) => {\r\n        let formFields = Object.assign({}, this.state.formFields)\r\n        formFields['appt_status'] = value;\r\n        this.setState({\r\n            formFields\r\n        });\r\n    }\r\n\r\n    handleSecStatus = ({ target: { name, value } }) => {\r\n        let formFields = Object.assign({}, this.state.formFields)\r\n        formFields['sec_status'] = value;\r\n        this.setState({\r\n            formFields\r\n        });\r\n    }\r\n\r\n    handleChangeTerapist = ({target:{name, value}}) => {\r\n        let formFields = Object.assign({}, this.state.formFields)\r\n        formFields['Treatment']['emp_no'] = value;\r\n        this.setState({\r\n            formFields\r\n        });\r\n    }\r\n\r\n    handleDialog = () => {\r\n        let { isOpenModal } = this.state;\r\n        isOpenModal = !isOpenModal;\r\n        this.setState({\r\n            isOpenModal\r\n        })\r\n    }\r\n\r\n    handleSearch = async(event) => {\r\n        event.persist();\r\n\r\n        if (!this.debouncedFn) {\r\n            this.debouncedFn = _.debounce(async() => {\r\n                let searchString = event.target.value;\r\n                let data = { search: searchString }\r\n                // this.queryHandler(data)\r\n                await this.setState({\r\n                    search: searchString\r\n                })\r\n                this.search(searchString)\r\n            }, 500);\r\n        }\r\n        this.debouncedFn();\r\n    }\r\n\r\n    search = (searchString) => {\r\n        let { search } = this.state;\r\n        this.props.getCommonApi(`custappt/?search=${search}`).then((key) => {\r\n\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                // for (let value of data) {\r\n                //     customerList.push({ value: value.id, label: value.emp_name })\r\n                // }\r\n                this.setState({ customerOption: data })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        let { formFields } = this.state;\r\n        this.props.commonPatchApi(`appointment/${this.props.match.params.id}/UpdateDetail/`, formFields).then((res)=>{\r\n\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        let { appointmentDetail = {}, formFields, bookingList, secStatusList, customerOption, isOpenModal, staffOption } = this.state;\r\n        let { Appointment_details = {}, Booking_details = {}, Remark = {}, Treatment = {}, customer_detail = {}, Payment, Customer_Request } = appointmentDetail;\r\n        let { Booking_status, Date, Outlet, Secondary_Status, Time } = Appointment_details;\r\n        // let { Booking_status,Date,Outlet,Secondary_Status, Time } = Appointment_details;\r\n        let { Appointment_channel, Booked_by, Source } = Booking_details;\r\n        let { New_Remark, Remark_Points } = Remark;\r\n        let { Duration, End_Time, Room, Start_Time, Status, Therapist, id, emp_no } = Treatment;\r\n        let { cust_address, cust_code, cust_dob, cust_email, cust_joindate, cust_name, cust_phone2, cust_pic, cust_sex, member_type } = customer_detail;\r\n        return (\r\n            <>\r\n                <div className=\"appointment-detail\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-9\">\r\n                            <div className=\"re-direct\" onClick={()=>history.push(`/admin/appointment`)}>\r\n                                <i className=\"icon-left-arrow\"></i>\r\n                                <p>Back to appointments</p>\r\n                            </div>\r\n                            <p className=\"head-label\">Appointment details</p>\r\n                            <div className=\"appointment\">\r\n                                <table className=\"table\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className=\"first-value\">Date</th>\r\n                                            <th>Time</th>\r\n                                            <th>Outlet</th>\r\n                                            <th>Booking Status</th>\r\n                                            <th>Treatment</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            <td>{Date}</td>\r\n                                            <td>{Time}</td>\r\n                                            <td>{Outlet}</td>\r\n                                            <td className=\"appointment-status\">\r\n                                                <div className=\"input-group\">\r\n                                                    <NormalSelect\r\n                                                        options={bookingList}\r\n                                                        value={formFields.appt_status}\r\n                                                        name=\"bookingStatus\"\r\n                                                        onChange={this.handleBookingStatus}\r\n                                                        className=\"customer-name status py-1\"\r\n                                                    />\r\n                                                </div>\r\n                                            </td>\r\n                                            <td>\r\n                                                <div className=\"input-group\">\r\n                                                    <NormalSelect\r\n                                                        options={secStatusList}\r\n                                                        value={formFields.sec_status}\r\n                                                        name=\"sec_status\"\r\n                                                        onChange={this.handleSecStatus}\r\n                                                        className=\"customer-name status py-1\"\r\n                                                    />\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                            {/* <div className=\"status\">\r\n                                <p className=\"status-label\">Customer request</p>\r\n                                <p className=\"status-detail\">Customer has requested for special towel</p>\r\n                            </div> */}\r\n                            <div className=\"status\">\r\n                                <p className=\"status-label\">Payment </p>\r\n                                <p className=\"status-detail\">{Payment}</p>\r\n                            </div>\r\n                            <p className=\"head-label\">Treatment</p>\r\n                            <div className=\"appointment\">\r\n                                <table className=\"table\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className=\"first-value\">Treatment</th>\r\n                                            <th className=\"first-value\">Start time</th>\r\n                                            <th>End Time</th>\r\n                                            <th>Room</th>\r\n                                            <th>Therapist(s)</th>\r\n                                            <th>Status</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            <td>{Treatment.Treatment}</td>\r\n                                            <td>{Start_Time}</td>\r\n                                            <td>{End_Time}</td>\r\n                                            <td>{Room}</td>\r\n                                            <td>\r\n                                            <div className=\"input-group\">\r\n                                            <NormalSelect\r\n                                                            // placeholder=\"Enter here\"\r\n                                                            options={staffOption}\r\n                                                            value={formFields.Treatment.emp_no}\r\n                                                            name=\"emp_no\"\r\n                                                            onChange={this.handleChangeTerapist}\r\n                                                            className=\"customer-name p-0\"\r\n                                                        />\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"appointment-status\">{Status}</td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                            <p className=\"head-label\">Remarks</p>\r\n                            {/* <div className=\"d-flex pt-3\">\r\n                                <i className=\"icon-star ml-3\"></i>\r\n                                <i className=\"icon-star pl-1\"></i>\r\n                                <i className=\"icon-star pl-1\"></i>\r\n                                <i className=\"icon-star pl-1\"></i>\r\n                                <i className=\"icon-star pl-1\"></i>\r\n                            </div> */}\r\n                            <div className=\"my-4\">\r\n                                <NormalTextarea\r\n                                    placeholder=\"Enter customer feedbacks...\"\r\n                                    value={New_Remark}\r\n                                    name=\"New_Remark\"\r\n                                    onChange={this.handleRemark}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"d-flex justify-content-center\">\r\n                                <div className=\"col-2\">\r\n                                    <NormalButton label=\"Submit\" success={true} onClick={this.handleSubmit} className=\"mr-2 col-12\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div className=\"col-md-3\">\r\n                            <div className=\"detail-card card\">\r\n                                <div className=\"detail-user-profile\">\r\n                                    <div className=\"profile-avatar\">\r\n                                        <img className=\"modal-avatar\" src={cust_pic} alt=\"\" />\r\n                                    </div>\r\n                                    <p className=\"user-name text-center\">{cust_name}</p>\r\n                                    <NormalButton label={`Id : ${cust_code}`} className=\"mr-2 col-12\" />\r\n                                </div>\r\n                                <div className=\"user-detail\">\r\n\r\n                                    <div className=\"detail d-flex\" >\r\n                                        <p className=\"status-label\">Joined</p>\r\n                                        <p className=\"spliter\">:</p>\r\n                                        <p className=\"status-detail\">{cust_joindate}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"detail d-flex\" >\r\n                                        <p className=\"status-label\">D.O.B</p>\r\n                                        <p className=\"spliter\">:</p>\r\n                                        <p className=\"status-detail\">{cust_dob}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"detail d-flex\" >\r\n                                        <p className=\"status-label\">Gender</p>\r\n                                        <p className=\"spliter\">:</p>\r\n                                        <p className=\"status-detail\">{cust_sex}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"detail d-flex\" >\r\n                                        <p className=\"status-label\">Phone</p>\r\n                                        <p className=\"spliter\">:</p>\r\n                                        <p className=\"status-detail\">{cust_phone2}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"detail d-flex\" >\r\n                                        <p className=\"status-label\">Email</p>\r\n                                        <p className=\"spliter\">:</p>\r\n                                        <p className=\"status-detail\">{cust_email}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"detail d-flex\" >\r\n                                        <p className=\"status-label\">Address</p>\r\n                                        <p className=\"spliter\">:</p>\r\n                                        <p className=\"status-detail\">{cust_address}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"detail d-flex\" >\r\n                                        <p className=\"status-label\">Member type</p>\r\n                                        <p className=\"spliter\">:</p>\r\n                                        <p className=\"status-detail\">{member_type}</p>\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {/* <NormalModal className={\"multiple-appointment select-category\"} style={{ minWidth: \"800px\" }} modal={isOpenModal} handleModal={this.handleDialog}>\r\n                    <img onClick={this.handleDialog} className=\"close\" src={closeIcon} alt=\"\" />\r\n                    <div className=\"row mt-2 mb-5 mx-3\">\r\n                        <div className=\"col-12 pl-0 mb-3 fs-18 py-2\">\r\n                            Select Customer\r\n                        </div>\r\n                        <div className=\"col-2 pl-0\">Search</div>\r\n                        <div className=\"col-5\">\r\n                            <input\r\n                                name=\"search\"\r\n                                onChange={this.handleSearch}\r\n                                className=\"search m-0 p-0 px-3\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-3\">\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2 p-0\"}\r\n                                mainbg={true}\r\n                                className=\" fs-15 confirm\"\r\n                                label=\"Search\"\r\n                                outline={false}\r\n                                onClick={() => this.search(this.state.search)}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"row mt-4 table-header w-100 m-0\">\r\n                            <div className=\"col-2\">Name</div>\r\n                            <div className=\"col-2\">Phone</div>\r\n                            <div className=\"col-3\">Cust Code</div>\r\n                            <div className=\"col-5\">Email</div>\r\n                        </div>\r\n                        <div className=\"response-table w-100\">\r\n                            {\r\n                                customerOption.length > 0 ? customerOption.map((item, index) => {\r\n                                    return (\r\n                                        <div className=\"row m-0 table-body w-100\" onClick={() => this.handleChangeTerapist(item)} key={index}>\r\n                                            <div className=\"col-2\">{item.cust_name}</div>\r\n                                            <div className=\"col-2\">{item.cust_phone1}</div>\r\n                                            <div className=\"col-3\">{item.cust_code}</div>\r\n                                            <div className=\"col-5\">{item.cust_email}</div>\r\n                                        </div>\r\n                                    )\r\n                                }) : <div className=\"text-center w-100\">\r\n                                        No Data are available\r\n                                </div>\r\n                            }\r\n                        </div>\r\n\r\n                    </div>\r\n                </NormalModal> */}\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        getCommonApi,\r\n        commonPatchApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const AppointmentDetail = connect(null, mapDispatchToProps)(AppointmentDetailClass)"]},"metadata":{},"sourceType":"module"}