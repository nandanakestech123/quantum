{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\StaffPlus\\\\StaffSchedule\\\\index.js\";\nimport React from \"react\";\nimport \"./style.scss\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Navigation } from \"react-minimal-side-navigation\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport { getStaffPlus, getStaffSchedule, getAllEmpSchedule, updateStaffPlusSchedule } from \"redux/actions/staffPlus\";\nimport { NormalSelect, NormalInput, Pagination, NormalButton } from \"component/common\";\nimport { ScheduleTable } from \"./SheduleTable\";\nimport { CalenderTable } from \"./CalenderTable\";\nimport { BigCalander } from \"./BigCalander\";\nimport { withTranslation } from \"react-i18next\";\n\nclass StaffScheduleClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentMenu: \"/indi\",\n      startMonth: new Date(),\n      endMonth: new Date(),\n      selectedMonth: new Date(),\n      fullScheduleMonth: new Date(),\n      formFields: {\n        ws: [],\n        ws_id: \"\",\n        altws: [],\n        altws_id: \"\",\n        cal_data: [],\n        status: \"All\",\n        staff_data: []\n      },\n      pageMeta: {},\n      jobOption_selected: \"\",\n      jobOption: [],\n      staffList_selected: \"\",\n      staffList: [],\n      siteOptions: [],\n      filteredSiteOptions: [],\n      selected_site: \"\",\n      fullSchedule_selected_site: \"\",\n      isLoading: true,\n      isMounted: true,\n      scheduleOptions: [],\n      isMounted: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.getDatafromStore = async () => {\n      await this.props.getJobtitle();\n      let scheduleRes = await this.props.getCommonApi(\"WorkScheduleHours/\");\n      let siteRes = await this.props.getCommonApi(\"branchlist/\");\n      let {\n        jobtitleList\n      } = this.props;\n      let {\n        jobOption,\n        jobOption_selected,\n        siteOptions,\n        filteredSiteOptions,\n        scheduleOptions\n      } = this.state;\n\n      for (let key of jobtitleList) {\n        jobOption.push({\n          label: key.level_desc,\n          value: key.id\n        });\n      }\n\n      for (let key of siteRes.data) {\n        siteOptions.push({\n          value: key.id,\n          label: key.itemsite_desc\n        });\n      }\n\n      for (let key of scheduleRes.schedules) {\n        scheduleOptions.push({\n          id: key.id,\n          value: key.itm_code,\n          label: key.itm_desc,\n          color: key.itm_color,\n          shortDesc: key.shortDesc\n        });\n      }\n\n      this.updateState({\n        jobOption,\n        jobOption_selected,\n        siteOptions,\n        filteredSiteOptions,\n        scheduleOptions,\n        isLoading: false\n      });\n    };\n\n    this.updateStaffList = async () => {\n      this.updateState({\n        isLoading: true\n      });\n      let {\n        staffList,\n        staffList_selected,\n        formFields,\n        selected_site\n      } = this.state;\n      formFields.ws = [];\n      formFields.altws = [];\n      formFields.cal_data = [];\n      formFields.staff_data = [];\n      staffList_selected = \"\";\n      selected_site = \"\";\n\n      if (this.state.jobOption_selected == \"\") {\n        staffList = [];\n      } else {\n        await this.props.getStaffPlus(`?limit=100&EMP_TYPEid=${this.state.jobOption_selected}`);\n        let {\n          staffPlusDetail\n        } = this.props;\n        staffPlusDetail.dataList.forEach(key => {\n          staffList.push({\n            label: key.emp_name,\n            value: key.emp_code,\n            sites: key.Site_Codeid\n          });\n        });\n      }\n\n      this.updateState({\n        staffList,\n        formFields,\n        staffList_selected,\n        selected_site,\n        isLoading: false\n      });\n    };\n\n    this.updateSiteList = () => {\n      let {\n        staffList_selected,\n        staffList,\n        filteredSiteOptions,\n        siteOptions,\n        selected_site,\n        formFields\n      } = this.state;\n      selected_site = \"\";\n      formFields.ws = [];\n      formFields.altws = [];\n      formFields.cal_data = [];\n      filteredSiteOptions = [];\n      let selected = staffList.find(e => e.value == staffList_selected);\n      filteredSiteOptions = siteOptions.filter(e => e.value == selected.sites);\n      this.updateState({\n        filteredSiteOptions,\n        formFields,\n        selected_site\n      });\n    };\n\n    this.getScheduleData = async () => {\n      let {\n        startMonth,\n        endMonth,\n        jobOption_selected,\n        selected_site,\n        staffList_selected,\n        formFields\n      } = this.state;\n      if (selected_site == \"\" || staffList_selected == \"\" || jobOption_selected == \"\") return;\n      let startDate = new Date(startMonth);\n      let d = startDate.getDate();\n      let day = d < 10 ? \"0\" + d : d;\n      let a = startDate.getMonth() + 1;\n      let month = a < 10 ? \"0\" + a : a;\n      let year = startDate.getFullYear();\n      startDate = `${year}-${month}-${1}`;\n      let endDate = new Date(endMonth);\n      endDate = new Date(endDate.getFullYear(), endDate.getMonth() + 1, 0);\n      d = endDate.getDate();\n      day = d < 10 ? \"0\" + d : d;\n      a = endDate.getMonth() + 1;\n      month = a < 10 ? \"0\" + a : a;\n      year = endDate.getFullYear();\n      endDate = `${year}-${month}-${day}`;\n      this.updateState({\n        isLoading: true\n      });\n      await this.props.getStaffSchedule(`?emp_code=${staffList_selected}&site_code=${selected_site}&start=${startDate}&end=${endDate}`);\n      let {\n        weekSchedule,\n        altWeekSchedule,\n        monthlySchedule\n      } = this.props.staffSchedule;\n      formFields.ws_id = weekSchedule.id;\n      formFields.ws.monday = weekSchedule.monday;\n      formFields.ws.tuesday = weekSchedule.tuesday;\n      formFields.ws.wednesday = weekSchedule.wednesday;\n      formFields.ws.thursday = weekSchedule.thursday;\n      formFields.ws.friday = weekSchedule.friday;\n      formFields.ws.saturday = weekSchedule.saturday;\n      formFields.ws.sunday = weekSchedule.sunday;\n      formFields.altws_id = altWeekSchedule.id;\n      formFields.altws.monday = altWeekSchedule.monday;\n      formFields.altws.tuesday = altWeekSchedule.tuesday;\n      formFields.altws.wednesday = altWeekSchedule.wednesday;\n      formFields.altws.thursday = altWeekSchedule.thursday;\n      formFields.altws.friday = altWeekSchedule.friday;\n      formFields.altws.saturday = altWeekSchedule.saturday;\n      formFields.altws.sunday = altWeekSchedule.sunday;\n      formFields.cal_data = monthlySchedule;\n      this.updateState({\n        formFields,\n        isLoading: false\n      });\n    };\n\n    this.getFullScheduleData = async (page = 1) => {\n      let {\n        selected_site,\n        fullScheduleMonth,\n        formFields,\n        pageMeta\n      } = this.state;\n      formFields.staff_data = [];\n\n      if (selected_site == \"\") {\n        return this.updateState({\n          formFields\n        });\n      }\n\n      this.updateState({\n        isLoading: true\n      });\n      let date = new Date(fullScheduleMonth);\n      let month = date.getMonth() + 1;\n      let year = date.getFullYear();\n      await this.props.getAllEmpSchedule(`?site_id=${selected_site}&limit=10&year=${year}&month=${month}&page=${page}`);\n      let {\n        staffAllEmpSchedule\n      } = this.props;\n      pageMeta = staffAllEmpSchedule.pagination;\n      formFields.staff_data = staffAllEmpSchedule.fullSchedule;\n      this.updateState({\n        formFields,\n        pageMeta,\n        isLoading: false\n      });\n    };\n\n    this.onJobChanged = e => {\n      this.state.jobOption_selected = e.target.value;\n      this.updateState({});\n      this.updateStaffList();\n    };\n\n    this.onStaffChanged = e => {\n      this.state.staffList_selected = e.target.value;\n      this.updateState({});\n      this.updateSiteList();\n    };\n\n    this.onSiteChange = e => {\n      this.state.selected_site = e.target.value;\n      this.updateState({});\n      this.getScheduleData();\n    };\n\n    this.onSiteOptionChange = e => {\n      this.state.selected_site = e.target.value;\n      this.updateState({});\n      this.getFullScheduleData({});\n    };\n\n    this.onFullScheduleMonthChange = e => {\n      this.state.fullScheduleMonth = e.target.value;\n      this.updateState({});\n      this.getFullScheduleData({});\n    };\n\n    this.onFullScheduleSiteChange = e => {\n      this.state.fullSchedule_selected_site = e.target.value;\n      this.updateState({});\n      this.getFullScheduleData({});\n    };\n\n    this.onApplyToMonthlySchedule = () => {\n      let {\n        ws,\n        cal_data\n      } = this.state.formFields;\n\n      for (let key of cal_data) {\n        var date = new Date(key.itm_date);\n        var day = date.getDay();\n\n        switch (day) {\n          case 0:\n            key.itm_type = ws.sunday;\n            break;\n\n          case 1:\n            key.itm_type = ws.monday;\n            break;\n\n          case 2:\n            key.itm_type = ws.tuesday;\n            break;\n\n          case 3:\n            key.itm_type = ws.wednesday;\n            break;\n\n          case 4:\n            key.itm_type = ws.thursday;\n            break;\n\n          case 5:\n            key.itm_type = ws.friday;\n            break;\n\n          case 6:\n            key.itm_type = ws.saturday;\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      this.updateState({});\n    };\n\n    this.onSubmit = async () => {\n      let {\n        formFields\n      } = this.state;\n      if (formFields.cal_data.length == 0) return;\n      this.updateState({\n        isLoading: true\n      });\n      var data = {\n        monthlySchedule: {},\n        weekSchedule: {},\n        altWeekSchedule: {}\n      };\n      data.monthlySchedule = formFields.cal_data;\n      data.weekSchedule.id = formFields.ws_id;\n      data.weekSchedule.monday = formFields.ws.monday;\n      data.weekSchedule.tuesday = formFields.ws.tuesday;\n      data.weekSchedule.wednesday = formFields.ws.wednesday;\n      data.weekSchedule.thursday = formFields.ws.thursday;\n      data.weekSchedule.friday = formFields.ws.friday;\n      data.weekSchedule.saturday = formFields.ws.saturday;\n      data.weekSchedule.sunday = formFields.ws.sunday;\n      data.altWeekSchedule.id = formFields.altws_id;\n      data.altWeekSchedule.monday = formFields.altws.monday;\n      data.altWeekSchedule.tuesday = formFields.altws.tuesday;\n      data.altWeekSchedule.wednesday = formFields.altws.wednesday;\n      data.altWeekSchedule.thursday = formFields.altws.thursday;\n      data.altWeekSchedule.friday = formFields.altws.friday;\n      data.altWeekSchedule.saturday = formFields.altws.saturday;\n      data.altWeekSchedule.sunday = formFields.altws.sunday;\n\n      try {\n        await this.props.updateStaffPlusSchedule(JSON.stringify(data));\n      } catch (error) {\n        console.log(error);\n        this.updateState({\n          isLoading: false\n        });\n      }\n\n      this.updateState({\n        isLoading: false\n      });\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  componentWillMount() {\n    const queryParams = new URLSearchParams(window.location.search);\n    const menu = queryParams.get(\"menu\");\n    if (menu) if (menu == \"full\" || menu == \"indi\") this.updateState({\n      currentMenu: \"/\" + menu\n    });\n    const date = new Date();\n    const month = (\"0\" + (date.getMonth() + 1)).slice(-2);\n    const year = date.getFullYear();\n    this.updateState({\n      selectedMonth: `${year}-${month}`,\n      startMonth: `${year}-${month}`,\n      endMonth: `${year}-${month}`,\n      fullScheduleMonth: `${year}-${month}`\n    });\n    this.getDatafromStore();\n  }\n\n  render() {\n    let {\n      currentMenu,\n      formFields,\n      startMonth,\n      endMonth,\n      jobOption,\n      jobOption_selected,\n      staffList_selected,\n      staffList,\n      filteredSiteOptions,\n      isLoading,\n      selected_site,\n      siteOptions,\n      selectedMonth,\n      scheduleOptions,\n      fullScheduleMonth,\n      pageMeta\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    let {\n      ws,\n      altws,\n      cal_data,\n      staff_data\n    } = formFields;\n\n    const handleMenuSelection = value => {\n      this.updateState({\n        currentMenu: value\n      });\n    };\n\n    const handleMonthChange = e => {\n      this.state[e.target.name] = e.target.value;\n\n      if (e.target.name == \"startMonth\") {\n        this.state.endMonth = this.state.startMonth;\n        this.state.selectedMonth = this.state.startMonth;\n      } else if (e.target.name == \"endMonth\") this.state.selectedMonth = this.state.startMonth;\n\n      if (e.target.name != \"selectedMonth\") this.getScheduleData();\n      this.updateState({});\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-lg-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Navigation, {\n      activeItemId: currentMenu,\n      onSelect: ({\n        itemId\n      }) => handleMenuSelection(itemId),\n      items: [{\n        title: \"Individual Schedule\",\n        itemId: \"/indi\"\n      }, {\n        title: \"Full Schedule\",\n        itemId: \"/full\"\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 13\n      }\n    })), isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 19\n      }\n    }, t(\"Loading...\"))))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      onClick: () => this.props.history.push(\"/admin/staffplus\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 21\n      }\n    }, t(\"Staff\"), \" >\"), \" \", currentMenu == \"/indi\" ? \"Individual\" : \"Full\", \" \", t(\"Staff Schedule\")))), currentMenu == \"/indi\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 25\n      }\n    }, t(\"Employee Type\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: jobOption,\n      value: jobOption_selected,\n      onChange: this.onJobChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 27\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 25\n      }\n    }, t(\"Staff\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: staffList,\n      value: staffList_selected,\n      onChange: this.onStaffChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 27\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 25\n      }\n    }, t(\"Site List\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: filteredSiteOptions,\n      value: selected_site,\n      onChange: this.onSiteChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 27\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 25\n      }\n    }, t(\"Work Schedule\")), /*#__PURE__*/React.createElement(ScheduleTable, {\n      data: ws,\n      altws_data: altws,\n      optionList: scheduleOptions,\n      onChange: data => {\n        let {\n          formFields\n        } = this.state;\n        formFields[\"ws\"] = data;\n        this.updateState({\n          formFields\n        });\n      },\n      onAltChange: data => {\n        let {\n          formFields\n        } = this.state;\n        formFields[\"altws\"] = data;\n        this.updateState({\n          formFields\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 25\n      }\n    })))), cal_data.length == 0 ? null : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Apply to Monthly Schedule\",\n      applybg: true,\n      onClick: this.onApplyToMonthlySchedule,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 27\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 25\n      }\n    }, t(\"Start Year and Month\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      type: \"month\",\n      value: startMonth,\n      name: \"startMonth\",\n      onChange: handleMonthChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 25\n      }\n    }, t(\"End Year and Month\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      type: \"month\",\n      value: endMonth,\n      min: startMonth,\n      name: \"endMonth\",\n      onChange: handleMonthChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 25\n      }\n    }, t(\"Selected Year and Month\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      type: \"month\",\n      value: selectedMonth,\n      min: startMonth,\n      max: endMonth,\n      name: \"selectedMonth\",\n      onChange: handleMonthChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CalenderTable, {\n      data: cal_data,\n      date: selectedMonth,\n      optionList: scheduleOptions,\n      onChange: data => {\n        let {\n          formFields\n        } = this.state;\n        formFields[\"cal_data\"] = data;\n        this.updateState({\n          formFields\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 27\n      }\n    }))))), cal_data.length == 0 ? null : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-sm-12 p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Save\",\n      success: true,\n      onClick: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 27\n      }\n    }))))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 25\n      }\n    }, t(\"Site\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalSelect, {\n      options: siteOptions,\n      value: selected_site,\n      name: \"selected_site\",\n      onChange: this.onSiteOptionChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 27\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 25\n      }\n    }, t(\"Year and Month\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      type: \"month\",\n      value: fullScheduleMonth,\n      onChange: this.onFullScheduleMonthChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(BigCalander, {\n      date: startMonth,\n      data: staff_data,\n      options: scheduleOptions,\n      disabled: true,\n      onChange: this.onFullScheduleSiteChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 27\n      }\n    })), pageMeta && /*#__PURE__*/React.createElement(Pagination, {\n      handlePagination: this.getFullScheduleData,\n      pageMeta: pageMeta,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 27\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row m-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 15\n      }\n    }, scheduleOptions.map(e => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-6 col-lg-4 col-sm-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row w-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"20px\",\n          height: \"20px\",\n          marginRight: \"5px\",\n          backgroundColor: `${e.color}`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 25\n        }\n      }), e.shortDesc, \" - \", e.label));\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  jobtitleList: state.common.jobtitleList,\n  staffPlusDetail: state.staffPlus.staffPlusDetail,\n  staffSchedule: state.staffPlus.staffPlusSchedule,\n  staffAllEmpSchedule: state.staffPlus.staffPlusAllEmpSchedule\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getJobtitle,\n    getStaffPlus,\n    getCommonApi,\n    getStaffSchedule,\n    getAllEmpSchedule,\n    updateStaffPlusSchedule\n  }, dispatch);\n};\n\nexport const StaffSchedule = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(StaffScheduleClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/StaffPlus/StaffSchedule/index.js"],"names":["React","connect","bindActionCreators","Navigation","getJobtitle","getCommonApi","getStaffPlus","getStaffSchedule","getAllEmpSchedule","updateStaffPlusSchedule","NormalSelect","NormalInput","Pagination","NormalButton","ScheduleTable","CalenderTable","BigCalander","withTranslation","StaffScheduleClass","Component","state","currentMenu","startMonth","Date","endMonth","selectedMonth","fullScheduleMonth","formFields","ws","ws_id","altws","altws_id","cal_data","status","staff_data","pageMeta","jobOption_selected","jobOption","staffList_selected","staffList","siteOptions","filteredSiteOptions","selected_site","fullSchedule_selected_site","isLoading","isMounted","scheduleOptions","updateState","data","setState","getDatafromStore","props","scheduleRes","siteRes","jobtitleList","key","push","label","level_desc","value","id","itemsite_desc","schedules","itm_code","itm_desc","color","itm_color","shortDesc","updateStaffList","staffPlusDetail","dataList","forEach","emp_name","emp_code","sites","Site_Codeid","updateSiteList","selected","find","e","filter","getScheduleData","startDate","d","getDate","day","a","getMonth","month","year","getFullYear","endDate","weekSchedule","altWeekSchedule","monthlySchedule","staffSchedule","monday","tuesday","wednesday","thursday","friday","saturday","sunday","getFullScheduleData","page","date","staffAllEmpSchedule","pagination","fullSchedule","onJobChanged","target","onStaffChanged","onSiteChange","onSiteOptionChange","onFullScheduleMonthChange","onFullScheduleSiteChange","onApplyToMonthlySchedule","itm_date","getDay","itm_type","onSubmit","length","JSON","stringify","error","console","log","componentWillUnmount","componentWillMount","queryParams","URLSearchParams","window","location","search","menu","get","slice","render","t","handleMenuSelection","handleMonthChange","name","itemId","title","history","map","width","height","marginRight","backgroundColor","mapStateToProps","common","staffPlus","staffPlusSchedule","staffPlusAllEmpSchedule","mapDispatchToProps","dispatch","StaffSchedule"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./style.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { Navigation } from \"react-minimal-side-navigation\";\r\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\r\nimport {\r\n  getStaffPlus,\r\n  getStaffSchedule,\r\n  getAllEmpSchedule,\r\n  updateStaffPlusSchedule,\r\n} from \"redux/actions/staffPlus\";\r\nimport {\r\n  NormalSelect,\r\n  NormalInput,\r\n  Pagination,\r\n  NormalButton,\r\n} from \"component/common\";\r\nimport { ScheduleTable } from \"./SheduleTable\";\r\nimport { CalenderTable } from \"./CalenderTable\";\r\nimport { BigCalander } from \"./BigCalander\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass StaffScheduleClass extends React.Component {\r\n  state = {\r\n    currentMenu: \"/indi\",\r\n    startMonth: new Date(),\r\n    endMonth: new Date(),\r\n    selectedMonth: new Date(),\r\n    fullScheduleMonth: new Date(),\r\n    formFields: {\r\n      ws: [],\r\n      ws_id: \"\",\r\n      altws: [],\r\n      altws_id: \"\",\r\n      cal_data: [],\r\n      status: \"All\",\r\n      staff_data: [],\r\n    },\r\n    pageMeta: {},\r\n    jobOption_selected: \"\",\r\n    jobOption: [],\r\n    staffList_selected: \"\",\r\n    staffList: [],\r\n    siteOptions: [],\r\n    filteredSiteOptions: [],\r\n    selected_site: \"\",\r\n    fullSchedule_selected_site: \"\",\r\n    isLoading: true,\r\n    isMounted: true,\r\n    scheduleOptions: [],\r\n    isMounted: true,\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentWillMount() {\r\n    const queryParams = new URLSearchParams(window.location.search);\r\n    const menu = queryParams.get(\"menu\");\r\n    if (menu)\r\n      if (menu == \"full\" || menu == \"indi\")\r\n        this.updateState({ currentMenu: \"/\" + menu });\r\n    const date = new Date();\r\n    const month = (\"0\" + (date.getMonth() + 1)).slice(-2);\r\n    const year = date.getFullYear();\r\n\r\n    this.updateState({\r\n      selectedMonth: `${year}-${month}`,\r\n      startMonth: `${year}-${month}`,\r\n      endMonth: `${year}-${month}`,\r\n      fullScheduleMonth: `${year}-${month}`,\r\n    });\r\n    this.getDatafromStore();\r\n  }\r\n\r\n  getDatafromStore = async () => {\r\n    await this.props.getJobtitle();\r\n    let scheduleRes = await this.props.getCommonApi(\"WorkScheduleHours/\");\r\n    let siteRes = await this.props.getCommonApi(\"branchlist/\");\r\n    let { jobtitleList } = this.props;\r\n    let {\r\n      jobOption,\r\n      jobOption_selected,\r\n      siteOptions,\r\n      filteredSiteOptions,\r\n      scheduleOptions,\r\n    } = this.state;\r\n    for (let key of jobtitleList) {\r\n      jobOption.push({ label: key.level_desc, value: key.id });\r\n    }\r\n    for (let key of siteRes.data) {\r\n      siteOptions.push({ value: key.id, label: key.itemsite_desc });\r\n    }\r\n    for (let key of scheduleRes.schedules) {\r\n      scheduleOptions.push({\r\n        id: key.id,\r\n        value: key.itm_code,\r\n        label: key.itm_desc,\r\n        color: key.itm_color,\r\n        shortDesc: key.shortDesc,\r\n      });\r\n    }\r\n\r\n    this.updateState({\r\n      jobOption,\r\n      jobOption_selected,\r\n      siteOptions,\r\n      filteredSiteOptions,\r\n      scheduleOptions,\r\n      isLoading: false,\r\n    });\r\n  };\r\n\r\n  updateStaffList = async () => {\r\n    this.updateState({ isLoading: true });\r\n    let { staffList, staffList_selected, formFields, selected_site } =\r\n      this.state;\r\n    formFields.ws = [];\r\n    formFields.altws = [];\r\n    formFields.cal_data = [];\r\n    formFields.staff_data = [];\r\n    staffList_selected = \"\";\r\n    selected_site = \"\";\r\n    if (this.state.jobOption_selected == \"\") {\r\n      staffList = [];\r\n    } else {\r\n      await this.props.getStaffPlus(\r\n        `?limit=100&EMP_TYPEid=${this.state.jobOption_selected}`\r\n      );\r\n\r\n      let { staffPlusDetail } = this.props;\r\n\r\n      staffPlusDetail.dataList.forEach(key => {\r\n        staffList.push({\r\n          label: key.emp_name,\r\n          value: key.emp_code,\r\n          sites: key.Site_Codeid,\r\n        });\r\n      });\r\n    }\r\n    this.updateState({\r\n      staffList,\r\n      formFields,\r\n      staffList_selected,\r\n      selected_site,\r\n      isLoading: false,\r\n    });\r\n  };\r\n\r\n  updateSiteList = () => {\r\n    let {\r\n      staffList_selected,\r\n      staffList,\r\n      filteredSiteOptions,\r\n      siteOptions,\r\n      selected_site,\r\n      formFields,\r\n    } = this.state;\r\n    selected_site = \"\";\r\n    formFields.ws = [];\r\n    formFields.altws = [];\r\n    formFields.cal_data = [];\r\n    filteredSiteOptions = [];\r\n    let selected = staffList.find(e => e.value == staffList_selected);\r\n    filteredSiteOptions = siteOptions.filter(e => e.value == selected.sites);\r\n    this.updateState({ filteredSiteOptions, formFields, selected_site });\r\n  };\r\n\r\n  getScheduleData = async () => {\r\n    let {\r\n      startMonth,\r\n      endMonth,\r\n      jobOption_selected,\r\n      selected_site,\r\n      staffList_selected,\r\n      formFields,\r\n    } = this.state;\r\n    if (\r\n      selected_site == \"\" ||\r\n      staffList_selected == \"\" ||\r\n      jobOption_selected == \"\"\r\n    )\r\n      return;\r\n    let startDate = new Date(startMonth);\r\n    let d = startDate.getDate();\r\n    let day = d < 10 ? \"0\" + d : d;\r\n    let a = startDate.getMonth() + 1;\r\n    let month = a < 10 ? \"0\" + a : a;\r\n    let year = startDate.getFullYear();\r\n    startDate = `${year}-${month}-${1}`;\r\n\r\n    let endDate = new Date(endMonth);\r\n    endDate = new Date(endDate.getFullYear(), endDate.getMonth() + 1, 0);\r\n    d = endDate.getDate();\r\n    day = d < 10 ? \"0\" + d : d;\r\n    a = endDate.getMonth() + 1;\r\n    month = a < 10 ? \"0\" + a : a;\r\n    year = endDate.getFullYear();\r\n    endDate = `${year}-${month}-${day}`;\r\n    this.updateState({ isLoading: true });\r\n    await this.props.getStaffSchedule(\r\n      `?emp_code=${staffList_selected}&site_code=${selected_site}&start=${startDate}&end=${endDate}`\r\n    );\r\n    let { weekSchedule, altWeekSchedule, monthlySchedule } =\r\n      this.props.staffSchedule;\r\n    formFields.ws_id = weekSchedule.id;\r\n    formFields.ws.monday = weekSchedule.monday;\r\n    formFields.ws.tuesday = weekSchedule.tuesday;\r\n    formFields.ws.wednesday = weekSchedule.wednesday;\r\n    formFields.ws.thursday = weekSchedule.thursday;\r\n    formFields.ws.friday = weekSchedule.friday;\r\n    formFields.ws.saturday = weekSchedule.saturday;\r\n    formFields.ws.sunday = weekSchedule.sunday;\r\n    formFields.altws_id = altWeekSchedule.id;\r\n    formFields.altws.monday = altWeekSchedule.monday;\r\n    formFields.altws.tuesday = altWeekSchedule.tuesday;\r\n    formFields.altws.wednesday = altWeekSchedule.wednesday;\r\n    formFields.altws.thursday = altWeekSchedule.thursday;\r\n    formFields.altws.friday = altWeekSchedule.friday;\r\n    formFields.altws.saturday = altWeekSchedule.saturday;\r\n    formFields.altws.sunday = altWeekSchedule.sunday;\r\n    formFields.cal_data = monthlySchedule;\r\n    this.updateState({ formFields, isLoading: false });\r\n  };\r\n\r\n  getFullScheduleData = async (page = 1) => {\r\n    let { selected_site, fullScheduleMonth, formFields, pageMeta } = this.state;\r\n    formFields.staff_data = [];\r\n    if (selected_site == \"\") {\r\n      return this.updateState({ formFields });\r\n    }\r\n    this.updateState({ isLoading: true });\r\n    let date = new Date(fullScheduleMonth);\r\n    let month = date.getMonth() + 1;\r\n    let year = date.getFullYear();\r\n    await this.props.getAllEmpSchedule(\r\n      `?site_id=${selected_site}&limit=10&year=${year}&month=${month}&page=${page}`\r\n    );\r\n    let { staffAllEmpSchedule } = this.props;\r\n    pageMeta = staffAllEmpSchedule.pagination;\r\n    formFields.staff_data = staffAllEmpSchedule.fullSchedule;\r\n    this.updateState({ formFields, pageMeta, isLoading: false });\r\n  };\r\n\r\n  onJobChanged = e => {\r\n    this.state.jobOption_selected = e.target.value;\r\n    this.updateState({});\r\n    this.updateStaffList();\r\n  };\r\n\r\n  onStaffChanged = e => {\r\n    this.state.staffList_selected = e.target.value;\r\n    this.updateState({});\r\n    this.updateSiteList();\r\n  };\r\n\r\n  onSiteChange = e => {\r\n    this.state.selected_site = e.target.value;\r\n    this.updateState({});\r\n    this.getScheduleData();\r\n  };\r\n\r\n  onSiteOptionChange = e => {\r\n    this.state.selected_site = e.target.value;\r\n    this.updateState({});\r\n    this.getFullScheduleData({});\r\n  };\r\n\r\n  onFullScheduleMonthChange = e => {\r\n    this.state.fullScheduleMonth = e.target.value;\r\n    this.updateState({});\r\n    this.getFullScheduleData({});\r\n  };\r\n\r\n  onFullScheduleSiteChange = e => {\r\n    this.state.fullSchedule_selected_site = e.target.value;\r\n    this.updateState({});\r\n    this.getFullScheduleData({});\r\n  };\r\n\r\n  onApplyToMonthlySchedule = () => {\r\n    let { ws, cal_data } = this.state.formFields;\r\n    for (let key of cal_data) {\r\n      var date = new Date(key.itm_date);\r\n      var day = date.getDay();\r\n      switch (day) {\r\n        case 0:\r\n          key.itm_type = ws.sunday;\r\n          break;\r\n        case 1:\r\n          key.itm_type = ws.monday;\r\n          break;\r\n        case 2:\r\n          key.itm_type = ws.tuesday;\r\n          break;\r\n        case 3:\r\n          key.itm_type = ws.wednesday;\r\n          break;\r\n        case 4:\r\n          key.itm_type = ws.thursday;\r\n          break;\r\n        case 5:\r\n          key.itm_type = ws.friday;\r\n          break;\r\n        case 6:\r\n          key.itm_type = ws.saturday;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    this.updateState({});\r\n  };\r\n\r\n  onSubmit = async () => {\r\n    let { formFields } = this.state;\r\n    if (formFields.cal_data.length == 0) return;\r\n    this.updateState({ isLoading: true });\r\n    var data = { monthlySchedule: {}, weekSchedule: {}, altWeekSchedule: {} };\r\n    data.monthlySchedule = formFields.cal_data;\r\n    data.weekSchedule.id = formFields.ws_id;\r\n    data.weekSchedule.monday = formFields.ws.monday;\r\n    data.weekSchedule.tuesday = formFields.ws.tuesday;\r\n    data.weekSchedule.wednesday = formFields.ws.wednesday;\r\n    data.weekSchedule.thursday = formFields.ws.thursday;\r\n    data.weekSchedule.friday = formFields.ws.friday;\r\n    data.weekSchedule.saturday = formFields.ws.saturday;\r\n    data.weekSchedule.sunday = formFields.ws.sunday;\r\n    data.altWeekSchedule.id = formFields.altws_id;\r\n    data.altWeekSchedule.monday = formFields.altws.monday;\r\n    data.altWeekSchedule.tuesday = formFields.altws.tuesday;\r\n    data.altWeekSchedule.wednesday = formFields.altws.wednesday;\r\n    data.altWeekSchedule.thursday = formFields.altws.thursday;\r\n    data.altWeekSchedule.friday = formFields.altws.friday;\r\n    data.altWeekSchedule.saturday = formFields.altws.saturday;\r\n    data.altWeekSchedule.sunday = formFields.altws.sunday;\r\n    try {\r\n      await this.props.updateStaffPlusSchedule(JSON.stringify(data));\r\n    } catch (error) {\r\n      console.log(error);\r\n      this.updateState({ isLoading: false });\r\n    }\r\n    this.updateState({ isLoading: false });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      currentMenu,\r\n      formFields,\r\n      startMonth,\r\n      endMonth,\r\n      jobOption,\r\n      jobOption_selected,\r\n      staffList_selected,\r\n      staffList,\r\n      filteredSiteOptions,\r\n      isLoading,\r\n      selected_site,\r\n      siteOptions,\r\n      selectedMonth,\r\n      scheduleOptions,\r\n      fullScheduleMonth,\r\n      pageMeta,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    let { ws, altws, cal_data, staff_data } = formFields;\r\n\r\n    const handleMenuSelection = value => {\r\n      this.updateState({ currentMenu: value });\r\n    };\r\n\r\n    const handleMonthChange = e => {\r\n      this.state[e.target.name] = e.target.value;\r\n      if (e.target.name == \"startMonth\") {\r\n        this.state.endMonth = this.state.startMonth;\r\n        this.state.selectedMonth = this.state.startMonth;\r\n      } else if (e.target.name == \"endMonth\")\r\n        this.state.selectedMonth = this.state.startMonth;\r\n      if (e.target.name != \"selectedMonth\") this.getScheduleData();\r\n      this.updateState({});\r\n    };\r\n\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12 col-lg-2 mb-4\">\r\n            <Navigation\r\n              activeItemId={currentMenu}\r\n              onSelect={({ itemId }) => handleMenuSelection(itemId)}\r\n              items={[\r\n                {\r\n                  title: \"Individual Schedule\",\r\n                  itemId: \"/indi\",\r\n                },\r\n                {\r\n                  title: \"Full Schedule\",\r\n                  itemId: \"/full\",\r\n                },\r\n              ]}\r\n            />\r\n          </div>\r\n          {isLoading ? (\r\n            <div className=\"col\">\r\n              <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                <div class=\"spinner-border\" role=\"status\">\r\n                  <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"col-lg-10 col-md-12\">\r\n              <div className=\"row align-items-center\">\r\n                <div className=\"col-md-8 mb-4\">\r\n                  <h3>\r\n                    <span\r\n                      onClick={() =>\r\n                        this.props.history.push(\"/admin/staffplus\")\r\n                      }\r\n                    >\r\n                      {t(\"Staff\")} &gt;\r\n                    </span>{\" \"}\r\n                    {currentMenu == \"/indi\" ? \"Individual\" : \"Full\"}{\" \"}\r\n                    {t(\"Staff Schedule\")}\r\n                  </h3>\r\n                </div>\r\n              </div>\r\n              {currentMenu == \"/indi\" ? (\r\n                <>\r\n                  <div className=\"form-group mb-4 pb-2\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-12\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"Employee Type\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalSelect\r\n                            options={jobOption}\r\n                            value={jobOption_selected}\r\n                            onChange={this.onJobChanged}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group mb-4 pb-2\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-12\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"Staff\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalSelect\r\n                            options={staffList}\r\n                            value={staffList_selected}\r\n                            onChange={this.onStaffChanged}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group mb-4 pb-2\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-12\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"Site List\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalSelect\r\n                            options={filteredSiteOptions}\r\n                            value={selected_site}\r\n                            onChange={this.onSiteChange}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group mb-4 pb-2\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-12\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"Work Schedule\")}\r\n                        </label>\r\n                        <ScheduleTable\r\n                          data={ws}\r\n                          altws_data={altws}\r\n                          optionList={scheduleOptions}\r\n                          onChange={data => {\r\n                            let { formFields } = this.state;\r\n                            formFields[\"ws\"] = data;\r\n                            this.updateState({\r\n                              formFields,\r\n                            });\r\n                          }}\r\n                          onAltChange={data => {\r\n                            let { formFields } = this.state;\r\n                            formFields[\"altws\"] = data;\r\n                            this.updateState({\r\n                              formFields,\r\n                            });\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {cal_data.length == 0 ? null : (\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                      <div className=\"row\">\r\n                        <div className=\"col-md-6 col-sm-12\">\r\n                          <NormalButton\r\n                            label=\"Apply to Monthly Schedule\"\r\n                            applybg={true}\r\n                            onClick={this.onApplyToMonthlySchedule}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"form-group mb-4 pb-2\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-4 mb-4\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"Start Year and Month\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalInput\r\n                            type=\"month\"\r\n                            value={startMonth}\r\n                            name=\"startMonth\"\r\n                            onChange={handleMonthChange}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-4 mb-4\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"End Year and Month\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalInput\r\n                            type=\"month\"\r\n                            value={endMonth}\r\n                            min={startMonth}\r\n                            name=\"endMonth\"\r\n                            onChange={handleMonthChange}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-md-6 mb-4\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"Selected Year and Month\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalInput\r\n                            type=\"month\"\r\n                            value={selectedMonth}\r\n                            min={startMonth}\r\n                            max={endMonth}\r\n                            name=\"selectedMonth\"\r\n                            onChange={handleMonthChange}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-12\">\r\n                        <div className=\"input-group\">\r\n                          <CalenderTable\r\n                            data={cal_data}\r\n                            date={selectedMonth}\r\n                            optionList={scheduleOptions}\r\n                            onChange={data => {\r\n                              let { formFields } = this.state;\r\n                              formFields[\"cal_data\"] = data;\r\n                              this.updateState({\r\n                                formFields,\r\n                              });\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  {cal_data.length == 0 ? null : (\r\n                    <div className=\"form-group mb-4 pb-2\">\r\n                      <div className=\"d-flex justify-content-center\">\r\n                        <div className=\"col-md-6 col-sm-12 p-0\">\r\n                          <NormalButton\r\n                            label=\"Save\"\r\n                            success={true}\r\n                            onClick={this.onSubmit}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <div className=\"form-group mb-4 pb-2\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-12 mb-4\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"Site\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalSelect\r\n                            options={siteOptions}\r\n                            value={selected_site}\r\n                            name=\"selected_site\"\r\n                            onChange={this.onSiteOptionChange}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"form-group mb-4 pb-2\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-4 mb-4\">\r\n                        <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                          {t(\"Year and Month\")}\r\n                        </label>\r\n                        <div className=\"input-group\">\r\n                          <NormalInput\r\n                            type=\"month\"\r\n                            value={fullScheduleMonth}\r\n                            onChange={this.onFullScheduleMonthChange}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-12\">\r\n                        <div className=\"input-group\">\r\n                          <BigCalander\r\n                            date={startMonth}\r\n                            data={staff_data}\r\n                            options={scheduleOptions}\r\n                            disabled={true}\r\n                            onChange={this.onFullScheduleSiteChange}\r\n                          />\r\n                        </div>\r\n                        {pageMeta && (\r\n                          <Pagination\r\n                            handlePagination={this.getFullScheduleData}\r\n                            pageMeta={pageMeta}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n              <div className=\"row m-2\">\r\n                {scheduleOptions.map(e => {\r\n                  return (\r\n                    <div className=\"col-md-6 col-lg-4 col-sm-12\">\r\n                      <div className=\"row w-100\">\r\n                        <div\r\n                          style={{\r\n                            width: \"20px\",\r\n                            height: \"20px\",\r\n                            marginRight: \"5px\",\r\n                            backgroundColor: `${e.color}`,\r\n                          }}\r\n                        />\r\n                        {e.shortDesc} - {e.label}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  jobtitleList: state.common.jobtitleList,\r\n  staffPlusDetail: state.staffPlus.staffPlusDetail,\r\n  staffSchedule: state.staffPlus.staffPlusSchedule,\r\n  staffAllEmpSchedule: state.staffPlus.staffPlusAllEmpSchedule,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getJobtitle,\r\n      getStaffPlus,\r\n      getCommonApi,\r\n      getStaffSchedule,\r\n      getAllEmpSchedule,\r\n      updateStaffPlusSchedule,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const StaffSchedule = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(StaffScheduleClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}