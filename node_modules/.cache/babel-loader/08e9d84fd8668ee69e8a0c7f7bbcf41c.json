{"ast":null,"code":"import _defineProperty from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component,PureComponent}from\"react\";import\"./devExpressScheduler/Styles.scss\";import Scheduler,{Resource,View}from\"devextreme-react/scheduler\";import\"devextreme/dist/css/dx.common.css\";import\"devextreme/dist/css/dx.light.css\";import ResourceCell from\"./devExpressScheduler/ResourceCell\";import fullscreenIcon from\"assets/images/fullScreen.png\";import{InputSearch}from\"../InputSearch\";import _ from\"lodash\";import{NormalButton,NormalSelect,NormalInput,NormalModal}from\"component/common\";import{StaffSorting}from\"../../Admin/NewAppointment/NewListAppointment/modal/StaffSorting\";import{BlockPopup}from\"../../Admin/NewAppointment/NewListAppointment/modal/BlockPopup\";import{PrintModal}from\"../../Admin/NewAppointment/NewListAppointment/modal/PrintModal\";import{Toast}from\"service/toast\";import html2canvas from\"html2canvas\";import{dateFormat}from\"service/helperFunctions\";import{getCommonApi,commonPatchApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{TreatmentHistory}from\"component/Admin/NewAppointment/NewListAppointment/modal/TreatmentHistory\";import{UpcomingAppointment}from\"component/Admin/NewAppointment/NewListAppointment/modal/UpcomingAppointment\";import setting from\"assets/images/settings.png\";import{AppointmentSettings}from\"./devExpressScheduler/AppointmentSettings\";import closeIcon from\"assets/images/close.png\";import{history}from\"helpers\";import{withTranslation}from\"react-i18next\";import moment from\"moment\";import{BrowserView,MobileView,isBrowser,isMobile}from\"react-device-detect\";import calander from\"assets/images/app-icons/00.png\";import outstanding from\"assets/images/app-icons/0.png\";import req_therapist from\"assets/images/app-icons/1.png\";import treatmentbal from\"assets/images/app-icons/2.png\";import birthday from\"assets/images/app-icons/3.png\";import new_remark from\"assets/images/app-icons/4.png\";import storecard from\"assets/images/app-icons/5.png\";import walkin from\"assets/images/app-icons/6.png\";import reschedule from\"assets/images/app-icons/8.png\";import Button from\"devextreme/ui/button\";var groups=[\"id\"];var draggingGroupName=\"appointmentsGroup\";var sleep=function sleep(milliseconds){return new Promise(function(resolve){return setTimeout(resolve,milliseconds);});};var scrolling={mode:\"virtual\"};var mobileviews=[{type:\"day\",name:\"day\",groupOrientation:\"Horizontally\",intervalCount:1}];var views=[{type:\"day\",name:\"day\",groupOrientation:\"Horizontally\",intervalCount:1},{type:\"week\",name:\"week\",groupOrientation:\"vertical\",intervalCount:1,maxAppointmentsPerCell:\"unlimited\"},{type:\"month\",name:\"month\",intervalCount:1,groupOrientation:\"vertical\",maxAppointmentsPerCell:\"unlimited\"}];var Dayview=[{type:\"day\",name:\"day\",groupOrientation:\"Horizontally\",intervalCount:1}];var getTime=function getTime(date){var now=new Date(date);var hour=now.getHours();var minute=now.getMinutes();var second=now.getSeconds();var ap=\"AM\";if(hour>11){ap=\"PM\";}if(hour>12){hour=hour-12;}if(hour==0){hour=12;}if(hour<10){hour=\"0\"+hour;}if(minute<10){minute=\"0\"+minute;}if(second<10){second=\"0\"+second;}var timeString=hour+\":\"+minute+\" \"+ap;return timeString;};export var NewSchedulerModalClass=/*#__PURE__*/function(_PureComponent){_inherits(NewSchedulerModalClass,_PureComponent);var _super=_createSuper(NewSchedulerModalClass);function NewSchedulerModalClass(){var _this;_classCallCheck(this,NewSchedulerModalClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={selectedDate:new Date(),selectedView:\"\",DefaultDate:new Date(),DefaultView:\"\",searchtext:\"\",SelectedList:[],isOpenModal:false,isOpenBlockModal:false,appointmentId:0,SchedulerHeight:\"100%\",isOpenPrintModal:false,formFields:[],groupByList:[{label:\"Group by Staff\",value:\"staff\"},{label:\"Group by Department\",value:\"department\"},{label:\"Group by Room\",value:\"room\"}],groupBy:\"staff\",customerNumber:0,customerId:0,clickCount:0,visible:false,customerOption:[],isSettingsClick:false,dayName:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],day:new Date().getDay(),passwordVisible:false,dragusername:\"\",dragpassword:\"\",isDragConfirmation:false};_this.onEmptyClick=function(e){e.cancel=true;var date=new Date(e.cellData.startDate);if(e.cellData.groups){_this.props.onEmptyClick(date,e.cellData);}};_this.onAppointmentDblClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var date;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.cancel=true;_context.next=3;return _this.setState({appointmentId:0});case 3:date=new Date(e.appointmentData.startDate);if(!(e.appointmentData.status===\"Block\")){_context.next=10;break;}_context.next=7;return _this.setState({appointmentId:e.appointmentData.appt_id});case 7:_this.handleBlockDialog();_context.next=13;break;case 10:_this.props.onEmptyClick(date,e.appointmentData);_context.next=13;return _this.setState({customerId:e.appointmentData.cust_id,custName:e.appointmentData.cust_name,custPhone:e.appointmentData.cust_phone});case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onAppointmentSingleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.cancel=true;if(!(e.appointmentData.status!==\"Block\")){_context2.next=4;break;}_context2.next=4;return _this.setState({customerId:e.appointmentData.cust_id,custName:e.appointmentData.cust_name,custPhone:e.appointmentData.cust_phone});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleViewChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({selectedView:e});case 2:_this.handleChange();//}\ncase 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.handleDateChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var day;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:day=_this.state.day;if(!(_this.state.selectedDate!==e)){_context4.next=5;break;}_context4.next=4;return _this.setState({selectedDate:e});case 4:_this.handleChange();case 5:day=moment(_this.state.selectedDate).day();_this.setState({day:day});console.log(day);case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();_this.handleChange=function(){var _this$state=_this.state,selectedDate=_this$state.selectedDate,selectedView=_this$state.selectedView,DefaultDate=_this$state.DefaultDate,DefaultView=_this$state.DefaultView,searchtext=_this$state.searchtext;var newDate=new Date();var newMode=\"\";var prevMode=DefaultView;var prevDate=DefaultDate;if(selectedView){newMode=selectedView;}else{newMode=DefaultView;}if(selectedDate){newDate=selectedDate;}else{newDate=selectedDate;}_this.props.handleChangeFilter(prevMode,prevDate,newMode,newDate,searchtext);};_this.handleSearch=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(event){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:event.persist();_context5.next=3;return _this.setState({searchtext:event.target.value});case 3:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){_this.handleChange();},500);}_this.debouncedFn();case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}();_this.handleDragConfirmationDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var isDragConfirmation;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:isDragConfirmation=_this.state.isDragConfirmation;isDragConfirmation=!isDragConfirmation;_context6.next=4;return _this.setState({isDragConfirmation:isDragConfirmation});case 4:_context6.next=6;return _this.props.getAppointmentWithStaff();case 6:case\"end\":return _context6.stop();}}},_callee6);}));_this.handleDialog=function(){var isOpenModal=_this.state.isOpenModal;isOpenModal=!isOpenModal;_this.setState({isOpenModal:isOpenModal});};_this.handleSettingDialog=function(){var isSettingsClick=_this.state.isSettingsClick;isSettingsClick=!isSettingsClick;_this.setState({isSettingsClick:isSettingsClick});};_this.handleBlockDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.setState(function(prevState){return{isOpenBlockModal:!prevState.isOpenBlockModal};});case 2:_context7.next=4;return _this.setState({appointmentId:0});case 4:case\"end\":return _context7.stop();}}},_callee7);}));_this.handlePrintDialog=function(){var isOpenPrintModal=_this.state.isOpenPrintModal;isOpenPrintModal=!isOpenPrintModal;_this.setState({isOpenPrintModal:isOpenPrintModal});};_this.handleBack=function(){_this.props.handleBack();};_this.handleNext=function(){_this.props.handleNext();};_this.Snap=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var img,base64URL;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return sleep(2000);case 2://\nwindow.scrollTo(0,0);img=\"\";base64URL=\"\";html2canvas(document.querySelector(\".dx-scheduler-work-space-grouped\"),{allowTaint:true,useCORS:true,logging:false,scale:1,removeContainer:false}).then(function(canvas){img=canvas.toDataURL(\"image/png\",1);base64URL=img.replace(\"image/png\",\"image/octet-stream\");var byteCharacters=atob(img.replace(/^data:image\\/(png|jpeg|jpg);base64,/,\"\"));var byteNumbers=new Array(byteCharacters.length);for(var i=0;i<byteCharacters.length;i++){byteNumbers[i]=byteCharacters.charCodeAt(i);}var byteArray=new Uint8Array(byteNumbers);var file=new Blob([byteArray],{type:\"image/png\"+\";base64\"});var fileURL=URL.createObjectURL(file);var a=document.createElement(\"a\");a.setAttribute(\"download\",\"myImage.png\");a.setAttribute(\"href\",base64URL);a.click();window.open(fileURL);});window.scrollTo(0,document.documentElement.scrollHeight);_context8.next=9;return _this.setState({SchedulerHeight:\"100%\"});case 9:case\"end\":return _context8.stop();}}},_callee8);}));_this.getHoursFromDate=function(date){var hour=new Date(date).getHours();var minute=new Date(date).getMinutes();var hours=hour>9?hour:\"0\"+hour;var minutes=minute>9?minute:\"0\"+minute;return hours+\":\"+minutes;};_this.onDragStart=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:console.log(e,\"drag start data\");//if (\n//  String(e.itemData.status).toUpperCase() === \"BLOCK\" ||\n//  String(e.itemData.status).toUpperCase() === \"CANCELLED\" ||\n//  String(e.itemData.status).toUpperCase() === \"WAITING\"\n//) {\nif(String(e.itemData.status).toUpperCase()===\"BLOCK\"){e.cancel=true;}else if(e.itemData.link_flag){e.cancel=true;Toast({type:\"error\",message:\"Appointment not allowed for dragging\"});}case 2:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x6){return _ref9.apply(this,arguments);};}();_this.onDragEnd=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(e){var _this$state2,formFields,isDragConfirmation,startTime,endTime,targetStaff;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return sleep(500);case 2:if(e.itemData.appt_id){_this$state2=_this.state,formFields=_this$state2.formFields,isDragConfirmation=_this$state2.isDragConfirmation;startTime=_this.getHoursFromDate(e.itemData.startDate);endTime=_this.getHoursFromDate(e.itemData.endDate);targetStaff=e.itemData.id;_this.props.getCommonApi(\"appointmentresources/\".concat(e.itemData.appt_id,\"/\")).then(/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(key){var status,data,appt_Date,date,finaldate;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:status=key.status,data=key.data;console.log(key,\"drag end data response\");appt_Date=data.appt_date;date=appt_Date.split(\"/\");finaldate=date[2]+\"-\"+date[1]+\"-\"+date[0];if(!(status===200)){_context10.next=45;break;}formFields[\"appt_id\"]=e.itemData.appt_id;formFields[\"custName\"]=data.cust_name;formFields[\"appointmentDate\"]=finaldate;formFields[\"bookingStatus\"]=data.booking_status;formFields[\"new_remark\"]=data.ori_remark;formFields[\"customerName\"]=data.cust_id;formFields[\"Source_Codeid\"]=data.source_id;formFields[\"Room_Codeid\"]=data.room_id;formFields[\"sec_status\"]=data.secondary_status;formFields[\"Appt_typeid\"]=data.channel_id;formFields[\"start_time\"]=data?data.start_time:\"\";formFields[\"end_time\"]=data?data.end_time:\"\";formFields[\"Item_Codeid\"]=data.Item_Codeid;formFields[\"Item_CodeName\"]=data.item_name;formFields[\"emp_no\"]=data.emp_id;formFields[\"add_duration\"]=data.add_duration;formFields[\"edit_remark\"]=\"\";formFields[\"requesttherapist\"]=data.requesttherapist;formFields[\"recur_days\"]=data.recur_days;formFields[\"recur_qty\"]=data.recur_qty;formFields[\"item_text\"]=data.item_name;if(!(formFields[\"start_time\"]!==startTime||formFields[\"emp_no\"]!==targetStaff)){_context10.next=45;break;}formFields[\"appointmentDate\"]=e.itemData.endDate;formFields[\"start_time\"]=startTime;formFields[\"end_time\"]=endTime;formFields[\"emp_no\"]=targetStaff;formFields[\"item_text\"]=e.itemData.item_name;formFields[\"recur_days\"]=null;formFields[\"recur_qty\"]=null;if(!data.is_dragappt){_context10.next=41;break;}isDragConfirmation=true;_context10.next=39;return _this.setState({formFields:formFields,isDragConfirmation:isDragConfirmation});case 39:_context10.next=45;break;case 41:isDragConfirmation=false;_context10.next=44;return _this.setState({formFields:formFields,isDragConfirmation:isDragConfirmation});case 44:_this.handleDragandDropLogin();case 45:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x8){return _ref11.apply(this,arguments);};}());}case 3:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x7){return _ref10.apply(this,arguments);};}();_this.handleTreatmentHistory=function(){var customerId=_this.state.customerId;if(customerId>0){_this.setState(function(prevState){return{isTreatmentHistoryModal:!prevState.isTreatmentHistoryModal,customerNumber:_this.state.customerId};});}else{Toast({type:\"error\",message:\"Please select customer\"});}};_this.handleUpcomingAppointment=function(){var customerId=_this.state.customerId;if(customerId>0){_this.setState(function(prevState){return{isUpcomingAppointmentModal:!prevState.isUpcomingAppointmentModal,customerNumber:_this.state.customerId};});}else{Toast({type:\"error\",message:\"Please select customer\"});}};_this.handleSearchCustomer=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(event){var _this$state3,custName,visible;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0://    event.persist();\n_this$state3=_this.state,custName=_this$state3.custName,visible=_this$state3.visible;custName=event.target.value;visible=true;_context13.next=5;return _this.setState({custName:custName,visible:visible});case 5:console.log(_this.state.custName);if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var customerList,basicApptDetail;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:customerList=_this.state.customerList;basicApptDetail=_this.props.basicApptDetail;_this.search(basicApptDetail);case 3:case\"end\":return _context12.stop();}}},_callee12);})),500);}_this.debouncedFn();case 8:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x9){return _ref12.apply(this,arguments);};}();_this.search=function(basicApptDetail){var custName=_this.state.custName;_this.props.getCommonApi(\"custappt/?Outlet=\".concat(basicApptDetail.branchId?basicApptDetail.branchId:\"\",\"&search=\").concat(custName)).then(function(key){// this.props.getCommonApi(`custappt/?search=${custName}`).then(key => {\nvar status=key.status,data=key.data;if(status===200){_this.setState({customerOption:data});}});};_this.handleClick=function(key){if(!_this.state.visible){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}if(_this.state.visible){var basicApptDetail=_this.props.basicApptDetail;_this.search(basicApptDetail);}_this.setState(function(prevState){return{visible:!prevState.visible};});};_this.handleSettingClick=function(key){_this.setState(function(prevState){return{isSettingsClick:!prevState.isSettingsClick};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(data){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:console.log(data,\"selectCustomer\");_context14.next=3;return _this.setState({customerId:data.id,custName:data.cust_name,custPhone:data.cust_phone1});case 3:_this.handleClick();case 4:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x10){return _ref14.apply(this,arguments);};}();_this.handleGroupbyChange=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(_ref15){var _ref15$target,value,name;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_ref15$target=_ref15.target,value=_ref15$target.value,name=_ref15$target.name;if(value==\"\"){value=\"staff\";}if(value!==_this.state.groupBy){_this.setState({groupBy:value});_this.props.groupByAppointment(value);}case 3:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x11){return _ref16.apply(this,arguments);};}();_this.handleFullScreenClose=function(){history.push(\"/admin/newappointment\");_this.setState({SchedulerHeight:\"65%\"});};_this.handleFullScreenOpen=function(){history.push(\"/admin/newappointmentfullscreen\");_this.setState({SchedulerHeight:\"100%\"});};_this.handleInputChange=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(event){return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return _this.setState(_defineProperty({},event.target.name,event.target.value));case 2:case\"end\":return _context16.stop();}}},_callee16);}));return function(_x12){return _ref17.apply(this,arguments);};}();_this.toggle=function(key){_this.setState(function(prevState){return _defineProperty({},key,!prevState[key]);});};_this.handleDragandDropLogin=function(){var _this$state4=_this.state,formFields=_this$state4.formFields,dragusername=_this$state4.dragusername,dragpassword=_this$state4.dragpassword;var payload={appt_date:dateFormat(new Date(formFields.appointmentDate),\"yyyy-mm-dd\"),Room_Codeid:formFields.Room_Codeid,appt_status:formFields.bookingStatus,sec_status:formFields.sec_status,edit_remark:\"\",start_time:formFields.start_time,end_time:formFields.end_time,item_id:formFields.Item_Codeid,add_duration:formFields.add_duration,emp_id:formFields.emp_no,requesttherapist:formFields.requesttherapist,item_text:formFields.item_text,recur_qty:null,recur_days:null,username:dragusername,password:dragpassword};_this.props.commonPatchApi(\"appointmentresources/\".concat(formFields.appt_id,\"/\"),payload).then(/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(res){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return _this.setState({isDragConfirmation:false});case 2:_context17.next=4;return _this.props.getAppointmentWithStaff();case 4:case\"end\":return _context17.stop();}}},_callee17);}));return function(_x13){return _ref19.apply(this,arguments);};}());};return _this;}_createClass(NewSchedulerModalClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({DefaultDate:this.props.filterDate,DefaultView:this.props.filterType});}},{key:\"onContentReady\",value:function onContentReady(e){console.log(e,\"oncontentreadylog\");var currentHour=new Date().getHours()-1;e.component.scrollToTime(currentHour,30,new Date());}},{key:\"onContentReadyDouble\",value:function onContentReadyDouble(e){console.log(e,\"oncontentreadylog\");var currentHour=new Date().getHours()-1;e.component.scrollToTime(currentHour,30,new Date());var SMSreplyButton=document.getElementById(\"schedulerSMSreplyButton\");if(!SMSreplyButton){var element=document.querySelectorAll(\".dx-scheduler-navigator\");var container=document.createElement(\"div\");container.id=\"schedulerSMSreplyButton\";element[0].appendChild(container);new Button(container,{text:\"SMS Reply\",mainbgrev:true,onClick:function onClick(){return history.push(\"/admin/newappointment/SMSReply\");},className:\"ml-5 mr-3\"});}var schedulerConfirmButton=document.getElementById(\"schedulerConfirmButton\");if(!schedulerConfirmButton){var _element=document.querySelectorAll(\".dx-scheduler-navigator\");var containerTwo=document.createElement(\"div\");containerTwo.id=\"schedulerConfirmButton\";_element[0].appendChild(containerTwo);new Button(containerTwo,{text:\"Confirm Booking\",onClick:function onClick(){return history.push(\"/admin/newappointment/confirmbooking\");},mainbgrev:true,className:\"ml-5 mr-5\"});}}},{key:\"onContentReadysms\",value:function onContentReadysms(e){console.log(e,\"oncontentreadylog\");var currentHour=new Date().getHours()-1;e.component.scrollToTime(currentHour,30,new Date());var SMSreplyButton=document.getElementById(\"schedulerSMSreplyButton\");if(!SMSreplyButton){var element=document.querySelectorAll(\".dx-scheduler-navigator\");var container=document.createElement(\"div\");container.id=\"schedulerSMSreplyButton\";element[0].appendChild(container);new Button(container,{text:\"SMS Reply\",mainbgrev:true,onClick:function onClick(){return history.push(\"/admin/newappointment/SMSReply\");},className:\"ml-5 mr-3\"});}}},{key:\"onContentReadyconfirmbook\",value:function onContentReadyconfirmbook(e){console.log(e,\"oncontentreadylog\");var currentHour=new Date().getHours()-1;e.component.scrollToTime(currentHour,30,new Date());var schedulerConfirmButton=document.getElementById(\"schedulerConfirmButton\");if(!schedulerConfirmButton){var element=document.querySelectorAll(\".dx-scheduler-navigator\");var containerTwo=document.createElement(\"div\");containerTwo.id=\"schedulerConfirmButton\";element[0].appendChild(containerTwo);new Button(containerTwo,{text:\"Confirm Booking\",onClick:function onClick(){return history.push(\"/admin/newappointment/confirmbooking\");},mainbgrev:true,className:\"ml-5 mr-5\"});}}},{key:\"render\",value:function render(){var _this2=this;var _this$state5=this.state,isOpenModal=_this$state5.isOpenModal,isOpenBlockModal=_this$state5.isOpenBlockModal,appointmentId=_this$state5.appointmentId,SchedulerHeight=_this$state5.SchedulerHeight,isOpenPrintModal=_this$state5.isOpenPrintModal,groupBy=_this$state5.groupBy,isTreatmentHistoryModal=_this$state5.isTreatmentHistoryModal,isUpcomingAppointmentModal=_this$state5.isUpcomingAppointmentModal,customerNumber=_this$state5.customerNumber,visible=_this$state5.visible,customerOption=_this$state5.customerOption,selectedDate=_this$state5.selectedDate,isSettingsClick=_this$state5.isSettingsClick,dayName=_this$state5.dayName,passwordVisible=_this$state5.passwordVisible,dragusername=_this$state5.dragusername,dragpassword=_this$state5.dragpassword,isDragConfirmation=_this$state5.isDragConfirmation;var _this$props=this.props,filterDate=_this$props.filterDate,tokenDetail=_this$props.tokenDetail,t=_this$props.t;var AppointmentcellContent=function AppointmentcellContent(model){var appointmentData=model.data.appointmentData;var fromTime=getTime(appointmentData.startDate);var toTime=getTime(appointmentData.endDate);var borderStyle=\"1px solid\"+appointmentData.border_color;return/*#__PURE__*/React.createElement(\"div\",{className:\"display-box\".concat(_this2.props.staffList.length,\" p-0\"),style:{background:appointmentData.color,border:borderStyle}},appointmentData.status&&appointmentData.status===\"Block\"?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-sm-12 col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-detail\"},/*#__PURE__*/React.createElement(\"p\",null,appointmentData.reason),/*#__PURE__*/React.createElement(\"p\",{className:\"text-uppercase\"},appointmentData.text,\" (\",fromTime,\" - \",toTime,\")\")))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col p-0 ml-1\"},appointmentData.link_flag?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"svg\",{width:\"15\",height:\"15\",viewBox:\"0 0 15 15\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"circle\",{cx:\"7\",cy:\"8\",r:\"7\",fill:\"rgba(60, 64, 135, 0.31)\",stroke:\"#3C4087\"}),/*#__PURE__*/React.createElement(\"text\",{x:\"5\",y:\"12\",fill:\"#3C4087\"},\"L\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"tooltiptext-img text-left\"},/*#__PURE__*/React.createElement(\"p\",null,\"Linked Appointment\")))):\"\",appointmentData.inital?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:calander}),/*#__PURE__*/React.createElement(\"div\",{className:\"tooltiptext-img text-left\"},/*#__PURE__*/React.createElement(\"p\",null,\"[\",fromTime,\" - \",toTime,\"]\"),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.cust_name),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.cust_phone),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.status)))):\"\",appointmentData.sec_status_flag?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:reschedule,width:\"100%\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext-img\"},/*#__PURE__*/React.createElement(\"p\",null,\"Reschedule\")))):\"\",appointmentData.outstanding?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:outstanding}),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext-img\"},/*#__PURE__*/React.createElement(\"p\",null,\"Outstanding $\".concat(appointmentData.outstanding_amt))))):\"\",appointmentData.req_therapist?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:req_therapist}),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext-img\"},/*#__PURE__*/React.createElement(\"p\",null,\"Request Therapist\")))):\"\",appointmentData.balance?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:treatmentbal}),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext-img\"},/*#__PURE__*/React.createElement(\"p\",null,\"Have balance for Treatment or Product\")))):\"\",appointmentData.birthday?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:birthday}),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext-img\"},/*#__PURE__*/React.createElement(\"p\",null,\"Birthday Month\")))):\"\",appointmentData.remark?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:new_remark}),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext-img\"},/*#__PURE__*/React.createElement(\"p\",null,appointmentData.remark_val)))):\"\",appointmentData.permanent_remark!=\"\"?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:new_remark}),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext-img\"},/*#__PURE__*/React.createElement(\"p\",null,appointmentData.permanent_remark)))):\"\",appointmentData.walkin?/*#__PURE__*/React.createElement(\"div\",{className:\"pt-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tooltip-img\"},/*#__PURE__*/React.createElement(\"img\",{src:walkin}),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext-img\"},/*#__PURE__*/React.createElement(\"p\",null,\"Walkin\")))):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"app-detail col-11 col-sm-11 col-md-11 p-0 ml-2\"},/*#__PURE__*/React.createElement(\"p\",null,fromTime,\" - \",toTime),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.cust_name),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.cust_refer),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.cust_code,\"\\u2002\",appointmentData.gender,\" \",appointmentData.gender?\"/\":\"\",appointmentData.age),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.appt_remark),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.permanent_remark),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.remark_val),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.sec_status),/*#__PURE__*/React.createElement(\"p\",null,appointmentData.room))));};return/*#__PURE__*/ (// <div style={{ width: \"100%\", height: \"100%\" }}>\nReact.createElement(React.Fragment,null,isOpenModal?/*#__PURE__*/React.createElement(StaffSorting,{isOpenModal:isOpenModal,handleDialog:this.handleDialog,handleChange:this.handleChange,filterDate:filterDate}):\"\",isOpenBlockModal?/*#__PURE__*/React.createElement(BlockPopup,{isOpenBlockModal:isOpenBlockModal,handleBlockDialog:this.handleBlockDialog,handleChange:this.handleChange,filterDate:filterDate,appointmentId:appointmentId}):\"\",isOpenPrintModal?/*#__PURE__*/React.createElement(PrintModal,{isOpenPrintModal:isOpenPrintModal,handlePrintDialog:this.handlePrintDialog}):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-center m-1 p-1\"},this.props.meta?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1 col-12 align-items-center\"},this.props.meta.pagination&&this.props.meta.pagination.total_pages>1?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.props.meta.pagination.total_pages<this.props.meta.pagination.current_page||this.props.meta.pagination.current_page>1||this.props.meta.pagination.total_pages==this.props.meta.pagination.current_page?/*#__PURE__*/React.createElement(\"button\",{className:\"cursor-pointer dx-button-content disabled mr-3\",onClick:this.handleBack},/*#__PURE__*/React.createElement(\"svg\",{width:\"9\",height:\"15\",viewBox:\"0 0 6 10\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M5 0.5L1 5L5 9.5\",stroke:\"#888888\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}))):\"\",this.props.meta.pagination.total_pages>this.props.meta.pagination.current_page&&this.props.meta.pagination.total_pages!==this.props.meta.pagination.current_page&&this.props.meta.pagination.current_page>0?/*#__PURE__*/React.createElement(\"button\",{className:\"cursor-pointer dx-button-content\",onClick:this.handleNext},/*#__PURE__*/React.createElement(\"svg\",{width:\"9\",height:\"15\",viewBox:\"0 0 6 10\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M0.5 9.5L4.5 5L0.5 0.5\",stroke:\"#888888\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}))):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-1 pt-0 \".concat(isMobile?\"col-3\":\"d-none\")},/*#__PURE__*/React.createElement(\"img\",{style:{width:30},onClick:window.location.pathname==\"/admin/newappointmentfullscreen\"?this.handleFullScreenClose:this.handleFullScreenOpen,className:\"close cursor-pointer tooltip-img ml-1\",src:fullscreenIcon,alt:\"\",\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",title:window.location.pathname==\"/admin/newappointmentfullscreen\"?\"Exit Fullscreen Mode\":\"Fullscreen Mode\"}))):\"\"):\"\",!isMobile?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1 py-2 py-lg-0\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0 mr-1\",mainbg:true,className:\"fs-15 submit-btn\",label:\"Today\",outline:false,onClick:function onClick(){_this2.handleDateChange(new Date());}})):\"\",!isMobile?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-nowrap py-2 py-lg-0\"},/*#__PURE__*/React.createElement(NormalInput,{className:\"col-md-5 col-4 mr-1\",placeholder:\"customer..\",value:this.state.custName,name:\"custName\",onChange:this.handleSearchCustomer,onClick:this.handleClick}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mr-1 col-4\",mainbg:true,className:\"col-12 fs-15 m-0 p-0\",label:\"Upcoming\",onClick:this.handleUpcomingAppointment}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mr-1 col-4\",mainbg:true,className:\"col-12 fs-15\",label:\"History\",onClick:this.handleTreatmentHistory}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-sm-2 col-12 w-100 py-2 py-lg-0\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"selecteddate\",value:dayName[this.state.day]+\" \"+moment(selectedDate).format(\"DD/MM/YYYY\"),disabled:true}))):\"\",isMobile?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-sm-2 col-12 w-100 py-2 py-lg-0\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"selecteddate\",value:dayName[this.state.day]+\" \"+moment(selectedDate).format(\"DD/MM/YYYY\"),disabled:true})):\"\",!isMobile?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-12 py-2 py-lg-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap py-2 py-lg-0\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0 mr-1\",mainbg:true,className:\"confirm mr-1\",label:t(\"Snap\"),outline:false,onClick:this.Snap}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0 mr-1\",mainbg:true,className:\" confirm mr-1\",label:\"Print\",outline:false,onClick:function onClick(){_this2.setState({isOpenPrintModal:true});}}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0 mr-1\",mainbg:true,className:\"confirm mr-1\",label:\"Sort\",outline:false,onClick:function onClick(){_this2.setState({isOpenModal:true});}}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"p-0 mr-1\",mainbg:true,className:\"fs-15 confirm\",label:\"Block\",outline:false,onClick:function onClick(){_this2.setState({isOpenBlockModal:true});}}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12 py-2 py-lg-0\"},/*#__PURE__*/React.createElement(InputSearch,{placeholder:\"Search here..\",value:this.state.searchtext,onChange:this.handleSearch,name:\"searchtext\"})),String(tokenDetail.role_code).toUpperCase()===\"1\"?/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleSettingClick,className:\"close cursor-pointer\",src:setting,alt:\"\",width:\"35\",height:\"35\"}):null,/*#__PURE__*/React.createElement(\"div\",{className:\"ml-1 pt-0\"},/*#__PURE__*/React.createElement(\"img\",{style:{width:30},onClick:window.location.pathname==\"/admin/newappointmentfullscreen\"?this.handleFullScreenClose:this.handleFullScreenOpen,className:\"close cursor-pointer tooltip-img ml-1\",src:fullscreenIcon,alt:\"\",\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",title:window.location.pathname==\"/admin/newappointmentfullscreen\"?\"Exit Fullscreen Mode\":\"Fullscreen Mode\"})))):\"\",/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-modal top-up-modal\",style:{minWidth:\"55%\"},modal:isSettingsClick,handleModal:this.handleSettingDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleSettingDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(AppointmentSettings,{handleModal:this.handleSettingDialog,handleSettingChange:this.props.handleAppointmentSetting}))),isTreatmentHistoryModal?/*#__PURE__*/React.createElement(TreatmentHistory,{isTreatmentHistoryModal:isTreatmentHistoryModal,handleTreatmentHistory:this.handleTreatmentHistory,customerNumber:this.state.customerNumber,custName:this.state.custName,custPhone:this.state.custPhone}):\"\",isUpcomingAppointmentModal?/*#__PURE__*/React.createElement(UpcomingAppointment,{isUpcomingAppointmentModal:isUpcomingAppointmentModal,handleUpcomingAppointment:this.handleUpcomingAppointment,customerNumber:this.state.customerNumber,custName:this.state.custName,custPhone:this.state.custPhone}):\"\",visible?/*#__PURE__*/React.createElement(\"div\",{className:\"AppointmentnewStaffList\"},/*#__PURE__*/React.createElement(\"div\",{className:\"customerSearch-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mt-4 table table-header w-100 m-0 top-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Phone\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Customer Code\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},t(\"Reference\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},t(\"Email\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},t(\"NRIC\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100\"},customerOption.length>0?customerOption.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 table-body w-100 border\",onClick:function onClick(){return _this2.handleSelectCustomer(item);},key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_phone1),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_code),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_refer),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},item.cust_email),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},item.cust_nric));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"},t(\"No Data are available\"))))):null,/*#__PURE__*/React.createElement(NormalModal,{className:\"d-flex justify-content-center\",style:{minWidth:\"20%\"},modal:isDragConfirmation,handleModal:this.handleDragConfirmationDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDragConfirmationDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"p\",null,t(\"Please enter your login credential\"),\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 form-group mb-3 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Username\",value:dragusername,name:\"dragusername\",autocomplete:\"off\",onChange:this.handleInputChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 form-group mb-3 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{type:passwordVisible?\"text\":\"password\",placeholder:\"Password\",value:dragpassword,name:\"dragpassword\",autocomplete:\"off\",onChange:function onChange(e){return _this2.handleInputChange(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-addon right fs-14\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this2.toggle(\"passwordVisible\");},className:\"icon-\".concat(passwordVisible?\"eye\":\"eye-blocked\",\" cursor-pointer fs-24\")})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-0 p-0 d-flex justify-content-center col-12\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:this.handleDragandDropLogin,label:\"PROCEED\",className:\"col-12 submit-btn\"}))))),/*#__PURE__*/React.createElement(\"div\",{class:\"dx-viewport demo-container\"},/*#__PURE__*/React.createElement(Scheduler,{id:\"Scheduler\",className:\"col-12 m-0 p-0 Scheduler\",height:SchedulerHeight,dataSource:this.props.staffList.length>0?this.props.event:[]// views={this.props.staffList.length > 0 ? views : Dayview}\n,views:isMobile?mobileviews:views,onContentReady:this.props.settingData.smsreply&&!this.props.settingData.confirmbook?this.onContentReadysms:this.props.settingData.confirmbook&&!this.props.settingData.smsreply?this.onContentReadyconfirmbook:this.props.settingData.confirmbook&&this.props.settingData.smsreply?this.onContentReadyDouble:this.onContentReady,defaultCurrentView:\"day\",currentDate:selectedDate,defaultCurrentDate:new Date(),groups:this.props.staffList.length>0?groups:[]// startDayHour={8}\n// endDayHour={21}\n// cellDuration={15}\n,startDayHour:this.props.SchedulerSetting.startday_hour?this.props.SchedulerSetting.startday_hour:8,endDayHour:this.props.SchedulerSetting.endday_hour?this.props.SchedulerSetting.endday_hour:21,cellDuration:this.props.SchedulerSetting.cell_duration?this.props.SchedulerSetting.cell_duration:15,firstDayOfWeek:0,showAllDayPanel:false,crossScrollingEnabled:true,resourceCellComponent:ResourceCell,editing:{allowDeleting:false,allowResizing:true,allowUpdating:true,allowDragging:true,allowTaint:true},onAppointmentClick:function onAppointmentClick(e){e.cancel=true;},onAppointmentDblClick:function onAppointmentDblClick(e){return _this2.onAppointmentDblClick(e);},onCellClick:function onCellClick(e){return _this2.onEmptyClick(e);}//dateSerializationFormat=\"yyyy-MM-ddTHH:mm:ssZ\"\n,appointmentComponent:AppointmentcellContent,onCurrentViewChange:this.handleViewChange,onCurrentDateChange:this.handleDateChange,appointmentDragging:{autoScroll:true,scrollSpeed:25,group:{draggingGroupName:draggingGroupName},onDragStart:function onDragStart(e){return _this2.onDragStart(e);},onDragEnd:function onDragEnd(e){return _this2.onDragEnd(e);}},scrolling:scrolling},/*#__PURE__*/React.createElement(View,{type:\"day\",label:t(\"day\")}),/*#__PURE__*/React.createElement(View,{type:\"week\",label:\"week\"}),/*#__PURE__*/React.createElement(View,{type:\"month\",label:\"month\"}),/*#__PURE__*/React.createElement(Resource,{dataSource:this.props.staffList,fieldExpr:\"id\",useColorAsDefault:true,allowMultiple:false})))));}}]);return NewSchedulerModalClass;}(PureComponent);var mapStateToProps=function mapStateToProps(state){return{basicApptDetail:state.appointment.basicApptDetail,SchedulerSetting:state.appointment.SchedulerSetting,tokenDetail:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonPatchApi:commonPatchApi},dispatch);};export var NewSchedulerModal=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(NewSchedulerModalClass));","map":{"version":3,"sources":["F:/webfe/src/component/common/Plugins/NewScheduler.js"],"names":["React","Component","PureComponent","Scheduler","Resource","View","ResourceCell","fullscreenIcon","InputSearch","_","NormalButton","NormalSelect","NormalInput","NormalModal","StaffSorting","BlockPopup","PrintModal","Toast","html2canvas","dateFormat","getCommonApi","commonPatchApi","connect","bindActionCreators","TreatmentHistory","UpcomingAppointment","setting","AppointmentSettings","closeIcon","history","withTranslation","moment","BrowserView","MobileView","isBrowser","isMobile","calander","outstanding","req_therapist","treatmentbal","birthday","new_remark","storecard","walkin","reschedule","Button","groups","draggingGroupName","sleep","milliseconds","Promise","resolve","setTimeout","scrolling","mode","mobileviews","type","name","groupOrientation","intervalCount","views","maxAppointmentsPerCell","Dayview","getTime","date","now","Date","hour","getHours","minute","getMinutes","second","getSeconds","ap","timeString","NewSchedulerModalClass","state","selectedDate","selectedView","DefaultDate","DefaultView","searchtext","SelectedList","isOpenModal","isOpenBlockModal","appointmentId","SchedulerHeight","isOpenPrintModal","formFields","groupByList","label","value","groupBy","customerNumber","customerId","clickCount","visible","customerOption","isSettingsClick","dayName","day","getDay","passwordVisible","dragusername","dragpassword","isDragConfirmation","onEmptyClick","e","cancel","cellData","startDate","props","onAppointmentDblClick","setState","appointmentData","status","appt_id","handleBlockDialog","cust_id","custName","cust_name","custPhone","cust_phone","onAppointmentSingleClick","handleViewChange","handleChange","handleDateChange","console","log","newDate","newMode","prevMode","prevDate","handleChangeFilter","handleSearch","event","persist","target","debouncedFn","debounce","handleDragConfirmationDialog","getAppointmentWithStaff","handleDialog","handleSettingDialog","prevState","handlePrintDialog","handleBack","handleNext","Snap","window","scrollTo","img","base64URL","document","querySelector","allowTaint","useCORS","logging","scale","removeContainer","then","canvas","toDataURL","replace","byteCharacters","atob","byteNumbers","Array","length","i","charCodeAt","byteArray","Uint8Array","file","Blob","fileURL","URL","createObjectURL","a","createElement","setAttribute","click","open","documentElement","scrollHeight","getHoursFromDate","hours","minutes","onDragStart","String","itemData","toUpperCase","link_flag","message","onDragEnd","startTime","endTime","endDate","targetStaff","id","key","data","appt_Date","appt_date","split","finaldate","booking_status","ori_remark","source_id","room_id","secondary_status","channel_id","start_time","end_time","Item_Codeid","item_name","emp_id","add_duration","requesttherapist","recur_days","recur_qty","is_dragappt","handleDragandDropLogin","handleTreatmentHistory","isTreatmentHistoryModal","handleUpcomingAppointment","isUpcomingAppointmentModal","handleSearchCustomer","customerList","basicApptDetail","search","branchId","handleClick","addEventListener","handleOutsideClick","removeEventListener","handleSettingClick","node","contains","handleSelectCustomer","cust_phone1","handleGroupbyChange","groupByAppointment","handleFullScreenClose","push","handleFullScreenOpen","handleInputChange","toggle","payload","appointmentDate","Room_Codeid","appt_status","bookingStatus","sec_status","edit_remark","item_id","emp_no","item_text","username","password","res","filterDate","filterType","currentHour","component","scrollToTime","SMSreplyButton","getElementById","element","querySelectorAll","container","appendChild","text","mainbgrev","onClick","className","schedulerConfirmButton","containerTwo","tokenDetail","t","AppointmentcellContent","model","fromTime","toTime","borderStyle","border_color","staffList","background","color","border","reason","inital","sec_status_flag","outstanding_amt","balance","remark","remark_val","permanent_remark","cust_refer","cust_code","gender","age","appt_remark","room","meta","pagination","total_pages","current_page","width","location","pathname","format","role_code","minWidth","handleAppointmentSetting","map","item","index","cust_email","cust_nric","settingData","smsreply","confirmbook","onContentReadysms","onContentReadyconfirmbook","onContentReadyDouble","onContentReady","SchedulerSetting","startday_hour","endday_hour","cell_duration","allowDeleting","allowResizing","allowUpdating","allowDragging","autoScroll","scrollSpeed","group","mapStateToProps","appointment","authStore","tokenDetails","mapDispatchToProps","dispatch","NewSchedulerModal"],"mappings":"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","sourcesContent":["import React, { Component, PureComponent } from \"react\";\r\nimport \"./devExpressScheduler/Styles.scss\";\r\nimport Scheduler, { Resource, View } from \"devextreme-react/scheduler\";\r\nimport \"devextreme/dist/css/dx.common.css\";\r\nimport \"devextreme/dist/css/dx.light.css\";\r\nimport ResourceCell from \"./devExpressScheduler/ResourceCell\";\r\nimport fullscreenIcon from \"assets/images/fullScreen.png\";\r\nimport { InputSearch } from \"../InputSearch\";\r\nimport _ from \"lodash\";\r\nimport {\r\n  NormalButton,\r\n  NormalSelect,\r\n  NormalInput,\r\n  NormalModal,\r\n} from \"component/common\";\r\nimport { StaffSorting } from \"../../Admin/NewAppointment/NewListAppointment/modal/StaffSorting\";\r\nimport { BlockPopup } from \"../../Admin/NewAppointment/NewListAppointment/modal/BlockPopup\";\r\nimport { PrintModal } from \"../../Admin/NewAppointment/NewListAppointment/modal/PrintModal\";\r\nimport { Toast } from \"service/toast\";\r\nimport html2canvas from \"html2canvas\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { getCommonApi, commonPatchApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { TreatmentHistory } from \"component/Admin/NewAppointment/NewListAppointment/modal/TreatmentHistory\";\r\nimport { UpcomingAppointment } from \"component/Admin/NewAppointment/NewListAppointment/modal/UpcomingAppointment\";\r\nimport setting from \"assets/images/settings.png\";\r\nimport { AppointmentSettings } from \"./devExpressScheduler/AppointmentSettings\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { history } from \"helpers\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport moment from \"moment\";\r\nimport {\r\n  BrowserView,\r\n  MobileView,\r\n  isBrowser,\r\n  isMobile,\r\n} from \"react-device-detect\";\r\nimport calander from \"assets/images/app-icons/00.png\";\r\nimport outstanding from \"assets/images/app-icons/0.png\";\r\nimport req_therapist from \"assets/images/app-icons/1.png\";\r\nimport treatmentbal from \"assets/images/app-icons/2.png\";\r\nimport birthday from \"assets/images/app-icons/3.png\";\r\nimport new_remark from \"assets/images/app-icons/4.png\";\r\nimport storecard from \"assets/images/app-icons/5.png\";\r\nimport walkin from \"assets/images/app-icons/6.png\";\r\nimport reschedule from \"assets/images/app-icons/8.png\";\r\nimport Button from \"devextreme/ui/button\";\r\n\r\nconst groups = [\"id\"];\r\nconst draggingGroupName = \"appointmentsGroup\";\r\nconst sleep = milliseconds => {\r\n  return new Promise(resolve => setTimeout(resolve, milliseconds));\r\n};\r\nconst scrolling = { mode: \"virtual\" };\r\nconst mobileviews = [\r\n  {\r\n    type: \"day\",\r\n    name: \"day\",\r\n    groupOrientation: \"Horizontally\",\r\n    intervalCount: 1,\r\n  },\r\n];\r\nconst views = [\r\n  {\r\n    type: \"day\",\r\n    name: \"day\",\r\n    groupOrientation: \"Horizontally\",\r\n    intervalCount: 1,\r\n  },\r\n  {\r\n    type: \"week\",\r\n    name: \"week\",\r\n    groupOrientation: \"vertical\",\r\n    intervalCount: 1,\r\n    maxAppointmentsPerCell: \"unlimited\",\r\n  },\r\n  {\r\n    type: \"month\",\r\n    name: \"month\",\r\n    intervalCount: 1,\r\n    groupOrientation: \"vertical\",\r\n    maxAppointmentsPerCell: \"unlimited\",\r\n  },\r\n];\r\nconst Dayview = [\r\n  {\r\n    type: \"day\",\r\n    name: \"day\",\r\n    groupOrientation: \"Horizontally\",\r\n    intervalCount: 1,\r\n  },\r\n];\r\n\r\nconst getTime = date => {\r\n  var now = new Date(date);\r\n  var hour = now.getHours();\r\n  var minute = now.getMinutes();\r\n  var second = now.getSeconds();\r\n  var ap = \"AM\";\r\n  if (hour > 11) {\r\n    ap = \"PM\";\r\n  }\r\n  if (hour > 12) {\r\n    hour = hour - 12;\r\n  }\r\n  if (hour == 0) {\r\n    hour = 12;\r\n  }\r\n  if (hour < 10) {\r\n    hour = \"0\" + hour;\r\n  }\r\n  if (minute < 10) {\r\n    minute = \"0\" + minute;\r\n  }\r\n  if (second < 10) {\r\n    second = \"0\" + second;\r\n  }\r\n  var timeString = hour + \":\" + minute + \" \" + ap;\r\n  return timeString;\r\n};\r\n\r\nexport class NewSchedulerModalClass extends PureComponent {\r\n  state = {\r\n    selectedDate: new Date(),\r\n    selectedView: \"\",\r\n    DefaultDate: new Date(),\r\n    DefaultView: \"\",\r\n    searchtext: \"\",\r\n    SelectedList: [],\r\n    isOpenModal: false,\r\n    isOpenBlockModal: false,\r\n    appointmentId: 0,\r\n    SchedulerHeight: \"100%\",\r\n    isOpenPrintModal: false,\r\n    formFields: [],\r\n    groupByList: [\r\n      { label: \"Group by Staff\", value: \"staff\" },\r\n      { label: \"Group by Department\", value: \"department\" },\r\n      { label: \"Group by Room\", value: \"room\" },\r\n    ],\r\n    groupBy: \"staff\",\r\n    customerNumber: 0,\r\n    customerId: 0,\r\n    clickCount: 0,\r\n    visible: false,\r\n    customerOption: [],\r\n    isSettingsClick: false,\r\n    dayName: [\r\n      \"Sunday\",\r\n      \"Monday\",\r\n      \"Tuesday\",\r\n      \"Wednesday\",\r\n      \"Thursday\",\r\n      \"Friday\",\r\n      \"Saturday\",\r\n    ],\r\n    day: new Date().getDay(),\r\n    passwordVisible: false,\r\n    dragusername: \"\",\r\n    dragpassword: \"\",\r\n    isDragConfirmation: false,\r\n  };\r\n\r\n  onEmptyClick = e => {\r\n    e.cancel = true;\r\n    let date = new Date(e.cellData.startDate);\r\n    if (e.cellData.groups) {\r\n      this.props.onEmptyClick(date, e.cellData);\r\n    }\r\n  };\r\n\r\n  onAppointmentDblClick = async e => {\r\n    e.cancel = true;\r\n    await this.setState({\r\n      appointmentId: 0,\r\n    });\r\n    let date = new Date(e.appointmentData.startDate);\r\n    if (e.appointmentData.status === \"Block\") {\r\n      await this.setState({ appointmentId: e.appointmentData.appt_id });\r\n      this.handleBlockDialog();\r\n    } else {\r\n      this.props.onEmptyClick(date, e.appointmentData);\r\n      await this.setState({\r\n        customerId: e.appointmentData.cust_id,\r\n        custName: e.appointmentData.cust_name,\r\n        custPhone: e.appointmentData.cust_phone,\r\n      });\r\n    }\r\n  };\r\n\r\n  onAppointmentSingleClick = async e => {\r\n    e.cancel = true;\r\n    if (e.appointmentData.status !== \"Block\") {\r\n      await this.setState({\r\n        customerId: e.appointmentData.cust_id,\r\n        custName: e.appointmentData.cust_name,\r\n        custPhone: e.appointmentData.cust_phone,\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      DefaultDate: this.props.filterDate,\r\n      DefaultView: this.props.filterType,\r\n    });\r\n  }\r\n\r\n  handleViewChange = async e => {\r\n    //if (this.props.staffList.length > 0) {\r\n    await this.setState({\r\n      selectedView: e,\r\n    });\r\n    this.handleChange();\r\n    //}\r\n  };\r\n\r\n  handleDateChange = async e => {\r\n    let { day } = this.state;\r\n    if (this.state.selectedDate !== e) {\r\n      await this.setState({\r\n        selectedDate: e,\r\n      });\r\n      this.handleChange();\r\n    }\r\n    day = moment(this.state.selectedDate).day();\r\n    this.setState({ day });\r\n    console.log(day);\r\n  };\r\n\r\n  handleChange = () => {\r\n    let { selectedDate, selectedView, DefaultDate, DefaultView, searchtext } =\r\n      this.state;\r\n    let newDate = new Date();\r\n    let newMode = \"\";\r\n    let prevMode = DefaultView;\r\n    let prevDate = DefaultDate;\r\n    if (selectedView) {\r\n      newMode = selectedView;\r\n    } else {\r\n      newMode = DefaultView;\r\n    }\r\n    if (selectedDate) {\r\n      newDate = selectedDate;\r\n    } else {\r\n      newDate = selectedDate;\r\n    }\r\n    this.props.handleChangeFilter(\r\n      prevMode,\r\n      prevDate,\r\n      newMode,\r\n      newDate,\r\n      searchtext\r\n    );\r\n  };\r\n  onContentReady(e) {\r\n    console.log(e, \"oncontentreadylog\");\r\n    const currentHour = new Date().getHours() - 1;\r\n    e.component.scrollToTime(currentHour, 30, new Date());\r\n  }\r\n  onContentReadyDouble(e) {\r\n    console.log(e, \"oncontentreadylog\");\r\n    const currentHour = new Date().getHours() - 1;\r\n    e.component.scrollToTime(currentHour, 30, new Date());\r\n\r\n    const SMSreplyButton = document.getElementById(\"schedulerSMSreplyButton\");\r\n    if (!SMSreplyButton) {\r\n      let element = document.querySelectorAll(\".dx-scheduler-navigator\");\r\n      const container = document.createElement(\"div\");\r\n      container.id = \"schedulerSMSreplyButton\";\r\n      element[0].appendChild(container);\r\n\r\n      new Button(container, {\r\n        text: \"SMS Reply\",\r\n        mainbgrev: true,\r\n        onClick: () => history.push(\"/admin/newappointment/SMSReply\"),\r\n        className: \"ml-5 mr-3\",\r\n      });\r\n    }\r\n\r\n    const schedulerConfirmButton = document.getElementById(\r\n      \"schedulerConfirmButton\"\r\n    );\r\n    if (!schedulerConfirmButton) {\r\n      let element = document.querySelectorAll(\".dx-scheduler-navigator\");\r\n      const containerTwo = document.createElement(\"div\");\r\n      containerTwo.id = \"schedulerConfirmButton\";\r\n      element[0].appendChild(containerTwo);\r\n      new Button(containerTwo, {\r\n        text: \"Confirm Booking\",\r\n        onClick: () => history.push(\"/admin/newappointment/confirmbooking\"),\r\n        mainbgrev: true,\r\n        className: \"ml-5 mr-5\",\r\n      });\r\n    }\r\n  }\r\n\r\n  onContentReadysms(e) {\r\n    console.log(e, \"oncontentreadylog\");\r\n    const currentHour = new Date().getHours() - 1;\r\n    e.component.scrollToTime(currentHour, 30, new Date());\r\n\r\n    const SMSreplyButton = document.getElementById(\"schedulerSMSreplyButton\");\r\n    if (!SMSreplyButton) {\r\n      let element = document.querySelectorAll(\".dx-scheduler-navigator\");\r\n      const container = document.createElement(\"div\");\r\n      container.id = \"schedulerSMSreplyButton\";\r\n      element[0].appendChild(container);\r\n\r\n      new Button(container, {\r\n        text: \"SMS Reply\",\r\n        mainbgrev: true,\r\n        onClick: () => history.push(\"/admin/newappointment/SMSReply\"),\r\n        className: \"ml-5 mr-3\",\r\n      });\r\n    }\r\n  }\r\n  onContentReadyconfirmbook(e) {\r\n    console.log(e, \"oncontentreadylog\");\r\n    const currentHour = new Date().getHours() - 1;\r\n    e.component.scrollToTime(currentHour, 30, new Date());\r\n\r\n    const schedulerConfirmButton = document.getElementById(\r\n      \"schedulerConfirmButton\"\r\n    );\r\n    if (!schedulerConfirmButton) {\r\n      let element = document.querySelectorAll(\".dx-scheduler-navigator\");\r\n      const containerTwo = document.createElement(\"div\");\r\n      containerTwo.id = \"schedulerConfirmButton\";\r\n      element[0].appendChild(containerTwo);\r\n      new Button(containerTwo, {\r\n        text: \"Confirm Booking\",\r\n        onClick: () => history.push(\"/admin/newappointment/confirmbooking\"),\r\n        mainbgrev: true,\r\n        className: \"ml-5 mr-5\",\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSearch = async event => {\r\n    event.persist();\r\n    await this.setState({ searchtext: event.target.value });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        this.handleChange();\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n  handleDragConfirmationDialog = async () => {\r\n    let { isDragConfirmation } = this.state;\r\n    isDragConfirmation = !isDragConfirmation;\r\n    await this.setState({\r\n      isDragConfirmation,\r\n    });\r\n    await this.props.getAppointmentWithStaff();\r\n  };\r\n  handleDialog = () => {\r\n    let { isOpenModal } = this.state;\r\n    isOpenModal = !isOpenModal;\r\n    this.setState({\r\n      isOpenModal,\r\n    });\r\n  };\r\n  handleSettingDialog = () => {\r\n    let { isSettingsClick } = this.state;\r\n    isSettingsClick = !isSettingsClick;\r\n    this.setState({\r\n      isSettingsClick,\r\n    });\r\n  };\r\n  handleBlockDialog = async () => {\r\n    await this.setState(prevState => ({\r\n      isOpenBlockModal: !prevState.isOpenBlockModal,\r\n    }));\r\n    await this.setState({ appointmentId: 0 });\r\n  };\r\n  handlePrintDialog = () => {\r\n    let { isOpenPrintModal } = this.state;\r\n    isOpenPrintModal = !isOpenPrintModal;\r\n    this.setState({\r\n      isOpenPrintModal,\r\n    });\r\n  };\r\n\r\n  handleBack = () => {\r\n    this.props.handleBack();\r\n  };\r\n  handleNext = () => {\r\n    this.props.handleNext();\r\n  };\r\n  Snap = async () => {\r\n    // await this.setState({\r\n    //   SchedulerHeight: \"350%\",\r\n    // });\r\n    await sleep(2000); //\r\n    window.scrollTo(0, 0);\r\n    let img = \"\";\r\n    let base64URL = \"\";\r\n\r\n    html2canvas(document.querySelector(\".dx-scheduler-work-space-grouped\"), {\r\n      allowTaint: true,\r\n      useCORS: true,\r\n      logging: false,\r\n      scale: 1,\r\n      removeContainer: false,\r\n    }).then(function (canvas) {\r\n      img = canvas.toDataURL(\"image/png\", 1);\r\n      base64URL = img.replace(\"image/png\", \"image/octet-stream\");\r\n      var byteCharacters = atob(\r\n        img.replace(/^data:image\\/(png|jpeg|jpg);base64,/, \"\")\r\n      );\r\n      var byteNumbers = new Array(byteCharacters.length);\r\n      for (var i = 0; i < byteCharacters.length; i++) {\r\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n      }\r\n      var byteArray = new Uint8Array(byteNumbers);\r\n      var file = new Blob([byteArray], { type: \"image/png\" + \";base64\" });\r\n      var fileURL = URL.createObjectURL(file);\r\n      var a = document.createElement(\"a\");\r\n      a.setAttribute(\"download\", \"myImage.png\");\r\n      a.setAttribute(\"href\", base64URL);\r\n      a.click();\r\n      window.open(fileURL);\r\n    });\r\n    window.scrollTo(0, document.documentElement.scrollHeight);\r\n    await this.setState({\r\n      SchedulerHeight: \"100%\",\r\n    });\r\n  };\r\n\r\n  getHoursFromDate = date => {\r\n    let hour = new Date(date).getHours();\r\n    let minute = new Date(date).getMinutes();\r\n    let hours = hour > 9 ? hour : \"0\" + hour;\r\n    let minutes = minute > 9 ? minute : \"0\" + minute;\r\n    return hours + \":\" + minutes;\r\n  };\r\n  // onDragStart = async e => {\r\n  //   if (e.itemData.status === \"Block\") {\r\n  //     e.cancel = true;\r\n  //   } else {\r\n  //     await sleep(300);\r\n  //     this.getDraggedData(e.itemData.appt_id);\r\n  //   }\r\n  // };\r\n  onDragStart = async e => {\r\n    console.log(e, \"drag start data\");\r\n    //if (\r\n    //  String(e.itemData.status).toUpperCase() === \"BLOCK\" ||\r\n    //  String(e.itemData.status).toUpperCase() === \"CANCELLED\" ||\r\n    //  String(e.itemData.status).toUpperCase() === \"WAITING\"\r\n    //) {\r\n    if (\r\n      String(e.itemData.status).toUpperCase() === \"BLOCK\"\r\n    ) {\r\n      e.cancel = true;\r\n    } else if (e.itemData.link_flag) {\r\n      e.cancel = true;\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Appointment not allowed for dragging\",\r\n      });\r\n    }\r\n  };\r\n\r\n  onDragEnd = async e => {\r\n    await sleep(500);\r\n    if (e.itemData.appt_id) {\r\n      let { formFields, isDragConfirmation } = this.state;\r\n      let startTime = this.getHoursFromDate(e.itemData.startDate);\r\n      let endTime = this.getHoursFromDate(e.itemData.endDate);\r\n      let targetStaff = e.itemData.id;\r\n      this.props\r\n        .getCommonApi(`appointmentresources/${e.itemData.appt_id}/`)\r\n        .then(async key => {\r\n          let { status, data } = key;\r\n          console.log(key, \"drag end data response\");\r\n          let appt_Date = data.appt_date;\r\n          let date = appt_Date.split(\"/\");\r\n          let finaldate = date[2] + \"-\" + date[1] + \"-\" + date[0];\r\n          if (status === 200) {\r\n            formFields[\"appt_id\"] = e.itemData.appt_id;\r\n            formFields[\"custName\"] = data.cust_name;\r\n            formFields[\"appointmentDate\"] = finaldate;\r\n            formFields[\"bookingStatus\"] = data.booking_status;\r\n            formFields[\"new_remark\"] = data.ori_remark;\r\n            formFields[\"customerName\"] = data.cust_id;\r\n            formFields[\"Source_Codeid\"] = data.source_id;\r\n            formFields[\"Room_Codeid\"] = data.room_id;\r\n            formFields[\"sec_status\"] = data.secondary_status;\r\n            formFields[\"Appt_typeid\"] = data.channel_id;\r\n\r\n            formFields[\"start_time\"] = data ? data.start_time : \"\";\r\n            formFields[\"end_time\"] = data ? data.end_time : \"\";\r\n            formFields[\"Item_Codeid\"] = data.Item_Codeid;\r\n            formFields[\"Item_CodeName\"] = data.item_name;\r\n            formFields[\"emp_no\"] = data.emp_id;\r\n            formFields[\"add_duration\"] = data.add_duration;\r\n            formFields[\"edit_remark\"] = \"\";\r\n            formFields[\"requesttherapist\"] = data.requesttherapist;\r\n            formFields[\"recur_days\"] = data.recur_days;\r\n            formFields[\"recur_qty\"] = data.recur_qty;\r\n            formFields[\"item_text\"] = data.item_name;\r\n\r\n            if (\r\n              formFields[\"start_time\"] !== startTime ||\r\n              formFields[\"emp_no\"] !== targetStaff\r\n            ) {\r\n              formFields[\"appointmentDate\"] = e.itemData.endDate;\r\n              formFields[\"start_time\"] = startTime;\r\n              formFields[\"end_time\"] = endTime;\r\n              formFields[\"emp_no\"] = targetStaff;\r\n              formFields[\"item_text\"] = e.itemData.item_name;\r\n              formFields[\"recur_days\"] = null;\r\n              formFields[\"recur_qty\"] = null;\r\n\r\n              if (data.is_dragappt) {\r\n                isDragConfirmation = true;\r\n                await this.setState({ formFields, isDragConfirmation });\r\n              } else {\r\n                isDragConfirmation = false;\r\n                await this.setState({ formFields, isDragConfirmation });\r\n                this.handleDragandDropLogin();\r\n              }\r\n            }\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  handleTreatmentHistory = () => {\r\n    let { customerId } = this.state;\r\n    if (customerId > 0) {\r\n      this.setState(prevState => ({\r\n        isTreatmentHistoryModal: !prevState.isTreatmentHistoryModal,\r\n        customerNumber: this.state.customerId,\r\n      }));\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select customer\" });\r\n    }\r\n  };\r\n  handleUpcomingAppointment = () => {\r\n    let { customerId } = this.state;\r\n    if (customerId > 0) {\r\n      this.setState(prevState => ({\r\n        isUpcomingAppointmentModal: !prevState.isUpcomingAppointmentModal,\r\n        customerNumber: this.state.customerId,\r\n      }));\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select customer\" });\r\n    }\r\n  };\r\n  handleSearchCustomer = async event => {\r\n    //    event.persist();\r\n    let { custName, visible } = this.state;\r\n    custName = event.target.value;\r\n    visible = true;\r\n    await this.setState({ custName, visible });\r\n    console.log(this.state.custName);\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        let { customerList } = this.state;\r\n        let { basicApptDetail } = this.props;\r\n        this.search(basicApptDetail);\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  search = basicApptDetail => {\r\n    let { custName } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `custappt/?Outlet=${\r\n          basicApptDetail.branchId ? basicApptDetail.branchId : \"\"\r\n        }&search=${custName}`\r\n      )\r\n      .then(key => {\r\n        // this.props.getCommonApi(`custappt/?search=${custName}`).then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          this.setState({ customerOption: data });\r\n        }\r\n      });\r\n  };\r\n  handleClick = key => {\r\n    if (!this.state.visible) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    if (this.state.visible) {\r\n      let { basicApptDetail } = this.props;\r\n      this.search(basicApptDetail);\r\n    }\r\n    this.setState(prevState => ({\r\n      visible: !prevState.visible,\r\n    }));\r\n  };\r\n  handleSettingClick = key => {\r\n    this.setState(prevState => ({\r\n      isSettingsClick: !prevState.isSettingsClick,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n  handleSelectCustomer = async data => {\r\n    console.log(data, \"selectCustomer\");\r\n    await this.setState({\r\n      customerId: data.id,\r\n      custName: data.cust_name,\r\n      custPhone: data.cust_phone1,\r\n    });\r\n    this.handleClick();\r\n  };\r\n  handleGroupbyChange = async ({ target: { value, name } }) => {\r\n    if (value == \"\") {\r\n      value = \"staff\";\r\n    }\r\n    if (value !== this.state.groupBy) {\r\n      this.setState({\r\n        groupBy: value,\r\n      });\r\n      this.props.groupByAppointment(value);\r\n    }\r\n  };\r\n  handleFullScreenClose = () => {\r\n    history.push(\"/admin/newappointment\");\r\n    this.setState({ SchedulerHeight: \"65%\" });\r\n  };\r\n  handleFullScreenOpen = () => {\r\n    history.push(\"/admin/newappointmentfullscreen\");\r\n    this.setState({ SchedulerHeight: \"100%\" });\r\n  };\r\n\r\n  handleInputChange = async event => {\r\n    await this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n  toggle = key => {\r\n    this.setState(prevState => ({\r\n      [key]: !prevState[key],\r\n    }));\r\n  };\r\n\r\n  handleDragandDropLogin = () => {\r\n    let { formFields, dragusername, dragpassword } = this.state;\r\n    let payload = {\r\n      appt_date: dateFormat(new Date(formFields.appointmentDate), \"yyyy-mm-dd\"),\r\n      Room_Codeid: formFields.Room_Codeid,\r\n      appt_status: formFields.bookingStatus,\r\n      sec_status: formFields.sec_status,\r\n      edit_remark: \"\",\r\n      start_time: formFields.start_time,\r\n      end_time: formFields.end_time,\r\n      item_id: formFields.Item_Codeid,\r\n      add_duration: formFields.add_duration,\r\n      emp_id: formFields.emp_no,\r\n      requesttherapist: formFields.requesttherapist,\r\n      item_text: formFields.item_text,\r\n      recur_qty: null,\r\n      recur_days: null,\r\n      username: dragusername,\r\n      password: dragpassword,\r\n    };\r\n\r\n    this.props\r\n      .commonPatchApi(`appointmentresources/${formFields.appt_id}/`, payload)\r\n      .then(async res => {\r\n        await this.setState({\r\n          isDragConfirmation: false,\r\n        });\r\n        await this.props.getAppointmentWithStaff();\r\n      });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      isOpenModal,\r\n      isOpenBlockModal,\r\n      appointmentId,\r\n      SchedulerHeight,\r\n      isOpenPrintModal,\r\n      groupBy,\r\n      isTreatmentHistoryModal,\r\n      isUpcomingAppointmentModal,\r\n      customerNumber,\r\n      visible,\r\n      customerOption,\r\n      selectedDate,\r\n      isSettingsClick,\r\n      dayName,\r\n      passwordVisible,\r\n      dragusername,\r\n      dragpassword,\r\n      isDragConfirmation,\r\n    } = this.state;\r\n    let { filterDate, tokenDetail, t } = this.props;\r\n\r\n    let AppointmentcellContent = model => {\r\n      const { appointmentData } = model.data;\r\n      let fromTime = getTime(appointmentData.startDate);\r\n      let toTime = getTime(appointmentData.endDate);\r\n      let borderStyle = \"1px solid\" + appointmentData.border_color;\r\n      return (\r\n        <div\r\n          className={`display-box${this.props.staffList.length} p-0`}\r\n          style={{\r\n            background: appointmentData.color,\r\n            border: borderStyle,\r\n          }}\r\n        >\r\n          {appointmentData.status && appointmentData.status === \"Block\" ? (\r\n            <div className=\"d-flex\">\r\n              <div className=\"col-12 col-sm-12 col-md-12\">\r\n                <div className=\"app-detail\">\r\n                  <p>{appointmentData.reason}</p>\r\n                  <p className=\"text-uppercase\">\r\n                    {appointmentData.text} ({fromTime}\r\n                    {\" - \"}\r\n                    {toTime})\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"d-flex\">\r\n              <div className=\"col p-0 ml-1\">\r\n                {appointmentData.link_flag ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <span>\r\n                        <span>\r\n                          <svg\r\n                            width=\"15\"\r\n                            height=\"15\"\r\n                            viewBox=\"0 0 15 15\"\r\n                            fill=\"none\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                          >\r\n                            <circle\r\n                              cx=\"7\"\r\n                              cy=\"8\"\r\n                              r=\"7\"\r\n                              fill=\"rgba(60, 64, 135, 0.31)\"\r\n                              stroke=\"#3C4087\"\r\n                            ></circle>\r\n                            <text x=\"5\" y=\"12\" fill=\"#3C4087\">\r\n                              L\r\n                            </text>\r\n                          </svg>\r\n                        </span>\r\n                      </span>\r\n                      <div className=\"tooltiptext-img text-left\">\r\n                        <p>{`Linked Appointment`}</p>\r\n                      </div>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {appointmentData.inital ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={calander} />\r\n                      <div className=\"tooltiptext-img text-left\">\r\n                        <p>\r\n                          [{fromTime}\r\n                          {\" - \"}\r\n                          {toTime}]\r\n                        </p>\r\n                        <p>{appointmentData.cust_name}</p>\r\n                        <p>{appointmentData.cust_phone}</p>\r\n                        <p>{appointmentData.status}</p>\r\n                      </div>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {appointmentData.sec_status_flag ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={reschedule} width=\"100%\" />\r\n                      <span className=\"tooltiptext-img\">\r\n                        <p>{`Reschedule`}</p>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {appointmentData.outstanding ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={outstanding} />\r\n                      <span className=\"tooltiptext-img\">\r\n                        <p>{`Outstanding $${appointmentData.outstanding_amt}`}</p>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {appointmentData.req_therapist ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={req_therapist} />\r\n                      <span className=\"tooltiptext-img\">\r\n                        <p>{`Request Therapist`}</p>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {appointmentData.balance ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={treatmentbal} />\r\n                      <span className=\"tooltiptext-img\">\r\n                        <p>{`Have balance for Treatment or Product`}</p>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {appointmentData.birthday ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={birthday} />\r\n                      <span className=\"tooltiptext-img\">\r\n                        <p>{`Birthday Month`}</p>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {appointmentData.remark ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={new_remark} />\r\n                      <span className=\"tooltiptext-img\">\r\n                        <p>{appointmentData.remark_val}</p>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {appointmentData.permanent_remark != \"\" ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={new_remark} />\r\n                      <span className=\"tooltiptext-img\">\r\n                        <p>{appointmentData.permanent_remark}</p>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {/* <div className=\"pt-1\">\r\n              <span className=\"tooltip-img\">\r\n                <img src={storecard}  />\r\n                <span className=\"tooltiptext-img\">\r\n                  <p >{appointmentData.text}</p>\r\n                </span>\r\n              </span>\r\n            </div>\r\n            */}\r\n                {appointmentData.walkin ? (\r\n                  <div className=\"pt-1\">\r\n                    <span className=\"tooltip-img\">\r\n                      <img src={walkin} />\r\n                      <span className=\"tooltiptext-img\">\r\n                        <p>{`Walkin`}</p>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"app-detail col-11 col-sm-11 col-md-11 p-0 ml-2\">\r\n                <p>\r\n                  {fromTime}\r\n                  {\" - \"}\r\n                  {toTime}\r\n                </p>\r\n                <p>{appointmentData.cust_name}</p>\r\n                <p>{appointmentData.cust_refer}</p>\r\n                <p>\r\n                  {appointmentData.cust_code}&ensp;{appointmentData.gender}{\" \"}\r\n                  {appointmentData.gender ? \"/\" : \"\"}\r\n                  {appointmentData.age}\r\n                </p>\r\n                {/*<p>\r\n                  {appointmentData.cust_phone}&nbsp;\r\n                  {appointmentData.cust_phone1 ? \"/\" : \"\"}\r\n                  &nbsp;{appointmentData.cust_phone1}\r\n                </p>*/}\r\n                <p>{appointmentData.appt_remark}</p>\r\n                <p>{appointmentData.permanent_remark}</p>\r\n                <p>{appointmentData.remark_val}</p>\r\n                <p>{appointmentData.sec_status}</p>\r\n                <p>{appointmentData.room}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    };\r\n    return (\r\n      // <div style={{ width: \"100%\", height: \"100%\" }}>\r\n      <React.Fragment>\r\n        {isOpenModal ? (\r\n          <StaffSorting\r\n            isOpenModal={isOpenModal}\r\n            handleDialog={this.handleDialog}\r\n            handleChange={this.handleChange}\r\n            filterDate={filterDate}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {isOpenBlockModal ? (\r\n          <BlockPopup\r\n            isOpenBlockModal={isOpenBlockModal}\r\n            handleBlockDialog={this.handleBlockDialog}\r\n            handleChange={this.handleChange}\r\n            filterDate={filterDate}\r\n            appointmentId={appointmentId}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {isOpenPrintModal ? (\r\n          <PrintModal\r\n            isOpenPrintModal={isOpenPrintModal}\r\n            handlePrintDialog={this.handlePrintDialog}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        <div className=\"d-flex flex-wrap justify-content-center m-1 p-1\">\r\n          {this.props.meta ? (\r\n            <div className={`col-md-1 col-12 align-items-center`}>\r\n              {this.props.meta.pagination &&\r\n              this.props.meta.pagination.total_pages > 1 ? (\r\n                <div className=\"d-flex\">\r\n                  <div className=\"row\">\r\n                    {this.props.meta.pagination.total_pages <\r\n                      this.props.meta.pagination.current_page ||\r\n                    this.props.meta.pagination.current_page > 1 ||\r\n                    this.props.meta.pagination.total_pages ==\r\n                      this.props.meta.pagination.current_page ? (\r\n                      <button\r\n                        className=\"cursor-pointer dx-button-content disabled mr-3\"\r\n                        onClick={this.handleBack}\r\n                      >\r\n                        <svg\r\n                          width=\"9\"\r\n                          height=\"15\"\r\n                          viewBox=\"0 0 6 10\"\r\n                          fill=\"none\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                        >\r\n                          <path\r\n                            d=\"M5 0.5L1 5L5 9.5\"\r\n                            stroke=\"#888888\"\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                          />\r\n                        </svg>\r\n                      </button>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    {/* <span className=\"dx-button-staff-content\"> Staff </span> */}\r\n                    {this.props.meta.pagination.total_pages >\r\n                      this.props.meta.pagination.current_page &&\r\n                    this.props.meta.pagination.total_pages !==\r\n                      this.props.meta.pagination.current_page &&\r\n                    this.props.meta.pagination.current_page > 0 ? (\r\n                      <button\r\n                        className=\"cursor-pointer dx-button-content\"\r\n                        onClick={this.handleNext}\r\n                      >\r\n                        <svg\r\n                          width=\"9\"\r\n                          height=\"15\"\r\n                          viewBox=\"0 0 6 10\"\r\n                          fill=\"none\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                        >\r\n                          <path\r\n                            d=\"M0.5 9.5L4.5 5L0.5 0.5\"\r\n                            stroke=\"#888888\"\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                          />\r\n                        </svg>\r\n                      </button>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </div>\r\n                  <div className={`ml-1 pt-0 ${isMobile ? \"col-3\" : \"d-none\"}`}>\r\n                    <img\r\n                      style={{ width: 30 }}\r\n                      onClick={\r\n                        window.location.pathname ==\r\n                        \"/admin/newappointmentfullscreen\"\r\n                          ? this.handleFullScreenClose\r\n                          : this.handleFullScreenOpen\r\n                      }\r\n                      className=\"close cursor-pointer tooltip-img ml-1\"\r\n                      src={fullscreenIcon}\r\n                      alt=\"\"\r\n                      data-toggle=\"tooltip\"\r\n                      data-placement=\"bottom\"\r\n                      title={\r\n                        window.location.pathname ==\r\n                        \"/admin/newappointmentfullscreen\"\r\n                          ? \"Exit Fullscreen Mode\"\r\n                          : \"Fullscreen Mode\"\r\n                      }\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          {!isMobile ? (\r\n            <div className=\"col-md-1 py-2 py-lg-0\">\r\n              <NormalButton\r\n                buttonClass={\"p-0 mr-1\"}\r\n                mainbg={true}\r\n                className=\"fs-15 submit-btn\"\r\n                label={`Today`}\r\n                outline={false}\r\n                onClick={() => {\r\n                  this.handleDateChange(new Date());\r\n                }}\r\n              />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {!isMobile ? (\r\n            <>\r\n              <div className=\"col-md-3 col-12\">\r\n                <div className=\"d-flex flex-nowrap py-2 py-lg-0\">\r\n                  <NormalInput\r\n                    className=\"col-md-5 col-4 mr-1\"\r\n                    placeholder=\"customer..\"\r\n                    value={this.state.custName}\r\n                    name=\"custName\"\r\n                    onChange={this.handleSearchCustomer}\r\n                    onClick={this.handleClick}\r\n                  />\r\n\r\n                  <NormalButton\r\n                    buttonClass={\"mr-1 col-4\"}\r\n                    mainbg={true}\r\n                    className=\"col-12 fs-15 m-0 p-0\"\r\n                    label=\"Upcoming\"\r\n                    onClick={this.handleUpcomingAppointment}\r\n                  />\r\n                  <NormalButton\r\n                    buttonClass={\"mr-1 col-4\"}\r\n                    mainbg={true}\r\n                    className=\"col-12 fs-15\"\r\n                    label=\"History\"\r\n                    onClick={this.handleTreatmentHistory}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2 col-sm-2 col-12 w-100 py-2 py-lg-0\">\r\n                <NormalInput\r\n                  name=\"selecteddate\"\r\n                  value={\r\n                    dayName[this.state.day] +\r\n                    \" \" +\r\n                    moment(selectedDate).format(\"DD/MM/YYYY\")\r\n                  }\r\n                  disabled={true}\r\n                />\r\n              </div>\r\n            </>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {isMobile ? (\r\n            <div className=\"col-md-2 col-sm-2 col-12 w-100 py-2 py-lg-0\">\r\n              <NormalInput\r\n                name=\"selecteddate\"\r\n                value={\r\n                  dayName[this.state.day] +\r\n                  \" \" +\r\n                  moment(selectedDate).format(\"DD/MM/YYYY\")\r\n                }\r\n                disabled={true}\r\n              />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          {!isMobile ? (\r\n            <div className=\"col-md-5 col-12 py-2 py-lg-0\">\r\n              <div className=\"d-flex flex-wrap py-2 py-lg-0\">\r\n                <NormalButton\r\n                  buttonClass={\"p-0 mr-1\"}\r\n                  mainbg={true}\r\n                  className=\"confirm mr-1\"\r\n                  label={t(\"Snap\")}\r\n                  outline={false}\r\n                  onClick={this.Snap}\r\n                />\r\n                <NormalButton\r\n                  buttonClass={\"p-0 mr-1\"}\r\n                  mainbg={true}\r\n                  className=\" confirm mr-1\"\r\n                  label={`Print`}\r\n                  outline={false}\r\n                  onClick={() => {\r\n                    this.setState({ isOpenPrintModal: true });\r\n                  }}\r\n                />\r\n                <NormalButton\r\n                  buttonClass={\"p-0 mr-1\"}\r\n                  mainbg={true}\r\n                  className=\"confirm mr-1\"\r\n                  label={`Sort`}\r\n                  outline={false}\r\n                  onClick={() => {\r\n                    this.setState({ isOpenModal: true });\r\n                  }}\r\n                />\r\n                <NormalButton\r\n                  buttonClass={\"p-0 mr-1\"}\r\n                  mainbg={true}\r\n                  className=\"fs-15 confirm\"\r\n                  label={`Block`}\r\n                  outline={false}\r\n                  onClick={() => {\r\n                    this.setState({ isOpenBlockModal: true });\r\n                  }}\r\n                />\r\n\r\n                <div className=\"col-md-4 col-12 py-2 py-lg-0\">\r\n                  <InputSearch\r\n                    placeholder=\"Search here..\"\r\n                    value={this.state.searchtext}\r\n                    onChange={this.handleSearch}\r\n                    name=\"searchtext\"\r\n                  />\r\n                </div>\r\n\r\n                {String(tokenDetail.role_code).toUpperCase() === \"1\" ? (\r\n                  <img\r\n                    onClick={this.handleSettingClick}\r\n                    className=\"close cursor-pointer\"\r\n                    src={setting}\r\n                    alt=\"\"\r\n                    width=\"35\"\r\n                    height=\"35\"\r\n                  />\r\n                ) : null}\r\n                <div className=\"ml-1 pt-0\">\r\n                  <img\r\n                    style={{ width: 30 }}\r\n                    onClick={\r\n                      window.location.pathname ==\r\n                      \"/admin/newappointmentfullscreen\"\r\n                        ? this.handleFullScreenClose\r\n                        : this.handleFullScreenOpen\r\n                    }\r\n                    className=\"close cursor-pointer tooltip-img ml-1\"\r\n                    src={fullscreenIcon}\r\n                    alt=\"\"\r\n                    data-toggle=\"tooltip\"\r\n                    data-placement=\"bottom\"\r\n                    title={\r\n                      window.location.pathname ==\r\n                      \"/admin/newappointmentfullscreen\"\r\n                        ? \"Exit Fullscreen Mode\"\r\n                        : \"Fullscreen Mode\"\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          <NormalModal\r\n            className={\"transaction-done-modal top-up-modal\"}\r\n            style={{ minWidth: \"55%\" }}\r\n            modal={isSettingsClick}\r\n            handleModal={this.handleSettingDialog}\r\n          >\r\n            <img\r\n              onClick={this.handleSettingDialog}\r\n              className=\"close cursor-pointer\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <AppointmentSettings\r\n              handleModal={this.handleSettingDialog}\r\n              handleSettingChange={this.props.handleAppointmentSetting}\r\n            />\r\n          </NormalModal>\r\n        </div>\r\n\r\n        {isTreatmentHistoryModal ? (\r\n          <TreatmentHistory\r\n            isTreatmentHistoryModal={isTreatmentHistoryModal}\r\n            handleTreatmentHistory={this.handleTreatmentHistory}\r\n            customerNumber={this.state.customerNumber}\r\n            custName={this.state.custName}\r\n            custPhone={this.state.custPhone}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {isUpcomingAppointmentModal ? (\r\n          <UpcomingAppointment\r\n            isUpcomingAppointmentModal={isUpcomingAppointmentModal}\r\n            handleUpcomingAppointment={this.handleUpcomingAppointment}\r\n            customerNumber={this.state.customerNumber}\r\n            custName={this.state.custName}\r\n            custPhone={this.state.custPhone}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        {visible ? (\r\n          <div className=\"AppointmentnewStaffList\">\r\n            <div className=\"customerSearch-block\">\r\n              <div className=\"d-flex mt-4 table table-header w-100 m-0 top-1\">\r\n                <div className=\"col-2\">{t(\"Name\")}</div>\r\n                <div className=\"col-2\">{t(\"Phone\")}</div>\r\n                <div className=\"col-2\">{t(\"Customer Code\")}</div>\r\n                <div className=\"col-2\">{t(\"Reference\")}</div>\r\n                <div className=\"col-3\">{t(\"Email\")}</div>\r\n                <div className=\"col-1\">{t(\"NRIC\")}</div>\r\n              </div>\r\n              <div className=\"response-table w-100\">\r\n                {customerOption.length > 0 ? (\r\n                  customerOption.map((item, index) => {\r\n                    return (\r\n                      <div\r\n                        className=\"row m-0 table-body w-100 border\"\r\n                        onClick={() => this.handleSelectCustomer(item)}\r\n                        key={index}\r\n                      >\r\n                        <div className=\"col-2\">{item.cust_name}</div>\r\n                        <div className=\"col-2\">{item.cust_phone1}</div>\r\n                        <div className=\"col-2\">{item.cust_code}</div>\r\n                        <div className=\"col-2\">{item.cust_refer}</div>\r\n                        <div className=\"col-3\">{item.cust_email}</div>\r\n                        <div className=\"col-1\">{item.cust_nric}</div>\r\n                      </div>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <div className=\"text-center w-100\">\r\n                    {t(\"No Data are available\")}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n\r\n        <NormalModal\r\n          className={\"d-flex justify-content-center\"}\r\n          style={{ minWidth: \"20%\" }}\r\n          modal={isDragConfirmation}\r\n          handleModal={this.handleDragConfirmationDialog}\r\n        >\r\n          <img\r\n            onClick={this.handleDragConfirmationDialog}\r\n            className=\"close cursor-pointer\"\r\n            src={closeIcon}\r\n            alt=\"\"\r\n          />\r\n          <div className=\"row\">\r\n            <div className=\"d-flex flex-wrap\">\r\n              <div className=\"col-12 mb-4\">\r\n                <p>{t(\"Please enter your login credential\")} </p>\r\n              </div>\r\n              <div className=\"col-12 form-group mb-3 pb-2\">\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Username\"\r\n                    value={dragusername}\r\n                    name=\"dragusername\"\r\n                    autocomplete=\"off\"\r\n                    onChange={this.handleInputChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-12 form-group mb-3 pb-2\">\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    type={passwordVisible ? \"text\" : \"password\"}\r\n                    placeholder=\"Password\"\r\n                    value={dragpassword}\r\n                    name=\"dragpassword\"\r\n                    autocomplete=\"off\"\r\n                    onChange={e => this.handleInputChange(e)}\r\n                  />\r\n                  <div className=\"input-group-addon right fs-14\">\r\n                    <span\r\n                      onClick={() => this.toggle(\"passwordVisible\")}\r\n                      className={`icon-${\r\n                        passwordVisible ? \"eye\" : \"eye-blocked\"\r\n                      } cursor-pointer fs-24`}\r\n                    ></span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group mb-0 p-0 d-flex justify-content-center col-12\">\r\n                <NormalButton\r\n                  onClick={this.handleDragandDropLogin}\r\n                  label=\"PROCEED\"\r\n                  className=\"col-12 submit-btn\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </NormalModal>\r\n        <div class=\"dx-viewport demo-container\">\r\n          <Scheduler\r\n            id=\"Scheduler\"\r\n            className=\"col-12 m-0 p-0 Scheduler\"\r\n            height={SchedulerHeight}\r\n            dataSource={this.props.staffList.length > 0 ? this.props.event : []}\r\n            // views={this.props.staffList.length > 0 ? views : Dayview}\r\n            views={isMobile ? mobileviews : views}\r\n            onContentReady={\r\n              this.props.settingData.smsreply &&\r\n              !this.props.settingData.confirmbook\r\n                ? this.onContentReadysms\r\n                : this.props.settingData.confirmbook &&\r\n                  !this.props.settingData.smsreply\r\n                ? this.onContentReadyconfirmbook\r\n                : this.props.settingData.confirmbook &&\r\n                  this.props.settingData.smsreply\r\n                ? this.onContentReadyDouble\r\n                : this.onContentReady\r\n            }\r\n            defaultCurrentView=\"day\"\r\n            currentDate={selectedDate}\r\n            defaultCurrentDate={new Date()}\r\n            groups={this.props.staffList.length > 0 ? groups : []}\r\n            // startDayHour={8}\r\n            // endDayHour={21}\r\n            // cellDuration={15}\r\n            startDayHour={\r\n              this.props.SchedulerSetting.startday_hour\r\n                ? this.props.SchedulerSetting.startday_hour\r\n                : 8\r\n            }\r\n            endDayHour={\r\n              this.props.SchedulerSetting.endday_hour\r\n                ? this.props.SchedulerSetting.endday_hour\r\n                : 21\r\n            }\r\n            cellDuration={\r\n              this.props.SchedulerSetting.cell_duration\r\n                ? this.props.SchedulerSetting.cell_duration\r\n                : 15\r\n            }\r\n            firstDayOfWeek={0}\r\n            showAllDayPanel={false}\r\n            crossScrollingEnabled={true}\r\n            resourceCellComponent={ResourceCell}\r\n            editing={{\r\n              allowDeleting: false,\r\n              allowResizing: true,\r\n              allowUpdating: true,\r\n              allowDragging: true,\r\n              allowTaint: true,\r\n            }}\r\n            onAppointmentClick={e => {\r\n              e.cancel = true;\r\n            }}\r\n            onAppointmentDblClick={e => this.onAppointmentDblClick(e)}\r\n            onCellClick={e => this.onEmptyClick(e)}\r\n            //dateSerializationFormat=\"yyyy-MM-ddTHH:mm:ssZ\"\r\n            appointmentComponent={AppointmentcellContent}\r\n            onCurrentViewChange={this.handleViewChange}\r\n            onCurrentDateChange={this.handleDateChange}\r\n            appointmentDragging={{\r\n              autoScroll: true,\r\n              scrollSpeed: 25,\r\n              group: { draggingGroupName },\r\n              onDragStart: e => this.onDragStart(e),\r\n              onDragEnd: e => this.onDragEnd(e),\r\n            }}\r\n            scrolling={scrolling}\r\n          >\r\n            <View type=\"day\" label={t(\"day\")} />\r\n            <View type=\"week\" label=\"week\" />\r\n            <View type=\"month\" label=\"month\" />\r\n            <Resource\r\n              dataSource={this.props.staffList}\r\n              fieldExpr=\"id\"\r\n              useColorAsDefault={true}\r\n              allowMultiple={false}\r\n            />\r\n          </Scheduler>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n  SchedulerSetting: state.appointment.SchedulerSetting,\r\n  tokenDetail: state.authStore.tokenDetails,\r\n});\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const NewSchedulerModal = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(NewSchedulerModalClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}