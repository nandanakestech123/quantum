{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"./style.scss\";// import { Appointments, TreatmentHistory, PurchaseHistory, PersonalDetails, Favourites } from './Details'\nimport classnames from'classnames';import{Nav,NavItem,NavLink,TabContent,TabPane}from'reactstrap';import{NormalInput,NormalButton,TableWrapper}from'component/common';import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import{connect}from'react-redux';import{bindActionCreators}from\"redux\";export var ProductAccountClass=/*#__PURE__*/function(_Component){_inherits(ProductAccountClass,_Component);var _super=_createSuper(ProductAccountClass);function ProductAccountClass(){var _this;_classCallCheck(this,ProductAccountClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeTab:'',isOpenTreatmentDone:false,isActiveTab:\"detail\",headerDetails:[{label:'Date',sortKey:false,width:\"80px\"},{label:'Transaction #',width:\"180px\"},// { label: 'Package', sortKey: false, width: \"75px\" },\n{label:'Item',sortKey:false,width:\"150px\"},{label:'Credit ',sortKey:false,width:\"100px\"},{label:'Outstanding',sortKey:false,width:\"100px\"},{label:'status',sortKey:false,width:\"100px\"},{label:'',sortKey:false,width:\"100px\"}],detailHeader:[{label:'Date',sortKey:false,width:\"80px\"},{label:'Transaction #',sortKey:false,width:\"180px\"},{label:'Treatment #',width:\"152px\"},{label:'Payment',sortKey:false,width:\"100px\"},{label:'Credit',sortKey:false,width:\"100px\"},{label:'Outstanding',sortKey:false,width:\"100px\"}],accountList:[],accountHeader:{},DetailList:[]};_this.toggle=function(tab){if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.getAccountData=function(){var accountHeader=_this.state.accountHeader;_this.props.getCommonApi(\"productacclist/?cust_id=\".concat(_this.props.id)).then(function(key){var data=key.data,header_data=key.header_data;var accountList=_this.state.accountList;accountList=data;accountHeader=header_data;_this.setState({accountList:accountList,accountHeader:accountHeader});});};_this.handleOpenDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var activeTab;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:activeTab=_this.state.activeTab;activeTab='detail';_context.next=4;return _this.setState({activeTab:activeTab});case 4:_this.getDetailList(data.id);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.getDetailList=function(id){_this.props.getCommonApi(\"productacclist/\".concat(id)).then(function(key){var data=key.data,header_data=key.header_data;var _this$state=_this.state,DetailList=_this$state.DetailList,accountHeader=_this$state.accountHeader;DetailList=data;accountHeader=header_data;_this.setState({DetailList:DetailList,accountHeader:accountHeader});});};_this.handleBack=function(){var activeTab=_this.state.activeTab;activeTab='';_this.setState({activeTab:activeTab,DetailList:[]});_this.getAccountData();};return _this;}_createClass(ProductAccountClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getAccountData();}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,treatmentList=_this$state2.treatmentList,headerDetails=_this$state2.headerDetails,_this$state2$accountL=_this$state2.accountList,accountList=_this$state2$accountL===void 0?[]:_this$state2$accountL,_this$state2$accountH=_this$state2.accountHeader,accountHeader=_this$state2$accountH===void 0?{}:_this$state2$accountH,activeTab=_this$state2.activeTab,detailHeader=_this$state2.detailHeader,DetailList=_this$state2.DetailList;var balance=accountHeader.balance,outstanding=accountHeader.outstanding,totalproduct_count=accountHeader.totalproduct_count,credit_balance=accountHeader.credit_balance,outstanding_balance=accountHeader.outstanding_balance;return/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-account row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},\"Credit Balance\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},localStorage.getItem(\"Currency\"),activeTab!=='detail'?balance:credit_balance))),activeTab!=='detail'?/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"Total Product Count \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},totalproduct_count))):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Outstanding Balance\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},localStorage.getItem(\"Currency\"),activeTab!=='detail'?outstanding:outstanding_balance))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},activeTab!=='detail'?/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination// pageMeta={pageMeta}\n// isEmpty={accountList.length === 0 ? true:false}\n},accountList&&accountList.length>0?accountList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.transaction)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.item_description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.outstanding)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.item_status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"view mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"view\",onClick:function onClick(){return _this2.handleOpenDetail(item);}}))));}):\"\"):/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:detailHeader,queryHandler:this.handlePagination},DetailList&&DetailList.length>0?DetailList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.type)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.payment)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.outstanding)));}):\"\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 d-flex justify-center\"},activeTab==='detail'?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"back mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"Back\",onClick:function onClick(){return _this2.handleBack();}}):\"\",/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"print\"// mainbg={true}\n,className:\"col-12 fs-15 \",label:\"Print\"// outline={false}\n,onClick:function onClick(){return _this2.setState({isOpenEditDisc:false});}})));}}]);return ProductAccountClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var ProductAccount=connect(null,mapDispatchToProps)(ProductAccountClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Customer/CustomerDetails/Accounts/productAccount.js"],"names":["React","Component","classnames","Nav","NavItem","NavLink","TabContent","TabPane","NormalInput","NormalButton","TableWrapper","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","connect","bindActionCreators","ProductAccountClass","state","activeTab","isOpenTreatmentDone","isActiveTab","headerDetails","label","sortKey","width","detailHeader","accountList","accountHeader","DetailList","toggle","tab","setState","getAccountData","props","id","then","key","data","header_data","handleOpenDetail","getDetailList","handleBack","treatmentList","balance","outstanding","totalproduct_count","credit_balance","outstanding_balance","localStorage","getItem","handlePagination","length","map","item","index","sa_date","transaction","item_description","item_status","description","type","payment","isOpenEditDisc","mapDispatchToProps","dispatch","ProductAccount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport \"./style.scss\";\r\n// import { Appointments, TreatmentHistory, PurchaseHistory, PersonalDetails, Favourites } from './Details'\r\nimport classnames from 'classnames';\r\nimport {\r\n  Nav,\r\n  NavItem,\r\n  NavLink,\r\n  TabContent,\r\n  TabPane,\r\n} from 'reactstrap';\r\nimport { NormalInput, NormalButton, TableWrapper } from 'component/common';\r\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nexport class ProductAccountClass extends Component {\r\n  state = {\r\n    activeTab: '',\r\n    isOpenTreatmentDone: false,\r\n    isActiveTab: \"detail\",\r\n    headerDetails: [\r\n      { label: 'Date', sortKey: false, width: \"80px\" },\r\n      { label: 'Transaction #', width: \"180px\" },\r\n      // { label: 'Package', sortKey: false, width: \"75px\" },\r\n      { label: 'Item', sortKey: false, width: \"150px\" },\r\n      { label: 'Credit ', sortKey: false, width: \"100px\" },\r\n      { label: 'Outstanding', sortKey: false, width: \"100px\" },\r\n      { label: 'status', sortKey: false, width: \"100px\" },\r\n      { label: '', sortKey: false, width: \"100px\" },\r\n    ],\r\n    detailHeader: [\r\n      { label: 'Date', sortKey: false, width: \"80px\" },\r\n      { label: 'Transaction #', sortKey: false, width: \"180px\" },\r\n      { label: 'Treatment #', width: \"152px\" },\r\n      { label: 'Payment', sortKey: false, width: \"100px\" },\r\n      { label: 'Credit', sortKey: false, width: \"100px\" },\r\n      { label: 'Outstanding', sortKey: false, width: \"100px\" },\r\n    ],\r\n    accountList: [],\r\n    accountHeader: {},\r\n    DetailList: [],\r\n  }\r\n\r\n  toggle = (tab) => {\r\n    if (this.state.activeTab !== tab) {\r\n      this.setState({\r\n        activeTab: tab\r\n      });\r\n    }\r\n  }\r\n\r\n  \r\ncomponentDidMount() {\r\n  this.getAccountData();\r\n}\r\n\r\ngetAccountData = () => {\r\n  let { accountHeader } = this.state;\r\n  this.props.getCommonApi(`productacclist/?cust_id=${this.props.id}`).then((key) => {\r\n    let { data, header_data } = key;\r\n    let { accountList } = this.state;\r\n    accountList = data;\r\n    accountHeader = header_data;\r\n    this.setState({ accountList, accountHeader })\r\n})\r\n}\r\n\r\nhandleOpenDetail = async(data) => {\r\n  let { activeTab } = this.state\r\n  activeTab = 'detail';\r\n  \r\n  await this.setState({\r\n    activeTab\r\n  })\r\n  this.getDetailList(data.id);\r\n}\r\n\r\ngetDetailList = (id) => {\r\n  this.props.getCommonApi(`productacclist/${id}`).then((key) => {\r\n    let { data, header_data } = key;\r\n    let { DetailList, accountHeader } = this.state;\r\n    DetailList = data;\r\n    accountHeader = header_data;\r\n    this.setState({ DetailList, accountHeader })\r\n  })\r\n}\r\n\r\nhandleBack = () => {\r\n  let { activeTab } = this.state;\r\n  activeTab = '';\r\n  this.setState({\r\n    activeTab,\r\n    DetailList:[]\r\n  })\r\n  this.getAccountData();\r\n}\r\n\r\n\r\n  render() {\r\n    let { treatmentList, headerDetails, accountList=[], accountHeader={}, activeTab, detailHeader, DetailList } = this.state;\r\n    let { balance, outstanding, totalproduct_count, credit_balance, outstanding_balance } = accountHeader;\r\n    return (\r\n\r\n      <div className=\"treatment-account row\">\r\n        <div className=\"col-6 mt-3\">\r\n          <div className=\"row\">\r\n            <div className=\"col-5 mb-2\"></div>\r\n            <div className=\"col-5 mb-2\"></div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-6 mt-3\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6 mb-2\">Credit Balance</div>\r\n            <div className=\"col-6 mb-2\">{localStorage.getItem(\"Currency\")}{activeTab !== 'detail' ? balance:credit_balance}</div>\r\n          </div>\r\n        </div>\r\n        {activeTab !== 'detail' ?\r\n        <div className=\"col-6 mt-3 mb-4\">\r\n          <div className=\"row\">\r\n            <div className=\"col-5\">Total Product Count </div>\r\n            <div className=\"col-5\">{totalproduct_count}</div>\r\n          </div>\r\n        </div>:\"\"}\r\n        <div className=\"col-6 mt-3 mb-4\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6\">Outstanding Balance</div>\r\n            <div className=\"col-6\">{localStorage.getItem(\"Currency\")}{activeTab !== 'detail' ? outstanding:outstanding_balance}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12\">\r\n\r\n          <div className=\"table\">\r\n          {\r\n              activeTab !== 'detail' ?\r\n            <TableWrapper\r\n              headerDetails={headerDetails}\r\n              queryHandler={this.handlePagination}\r\n            // pageMeta={pageMeta}\r\n            // isEmpty={accountList.length === 0 ? true:false}\r\n            >\r\n              {accountList && accountList.length > 0 ? accountList.map((item, index) => {\r\n\r\n                return (\r\n                  <tr key={index}>\r\n\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.sa_date}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.transaction}</div></td>\r\n                    {/* <td><div className=\"d-flex align-items-center justify-content-center\">{item.package_code}</div></td> */}\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.item_description}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.balance}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.outstanding}</div></td>\r\n                    <td><div className=\"d-flex align-items-center justify-content-center\">{item.item_status}</div></td>\r\n                    <td>\r\n                          <div className=\"d-flex align-items-center justify-content-center\">\r\n                            <NormalButton\r\n                              buttonClass={\"view mr-3\"}\r\n                              mainbg={true}\r\n                              className=\"col-12 fs-15 \"\r\n                              label=\"view\"\r\n                              onClick={() => this.handleOpenDetail(item)}\r\n                            />\r\n                          </div>\r\n                        </td>\r\n                  </tr>\r\n                )\r\n              }) : \"\"\r\n              }\r\n\r\n            </TableWrapper>: <TableWrapper headerDetails={detailHeader} queryHandler={this.handlePagination}>\r\n                  {DetailList && DetailList.length > 0 ? DetailList.map((item, index) => {\r\n                    return (\r\n                      <tr key={index}>\r\n\r\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.sa_date}</div></td>\r\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.description}</div></td>\r\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.type}</div></td>\r\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.payment}</div></td>\r\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.balance}</div></td>\r\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.outstanding}</div></td>\r\n                      </tr>\r\n                    )\r\n                  }) : \"\"\r\n                  }\r\n                </TableWrapper>\r\n            }\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12 d-flex justify-center\">\r\n        {\r\n              activeTab === 'detail' ? <NormalButton\r\n            buttonClass={\"back mr-3\"}\r\n            mainbg={true}\r\n            className=\"col-12 fs-15 \"\r\n            label=\"Back\"\r\n            onClick={() => this.handleBack()}\r\n          />:\"\"\r\n        }\r\n          <NormalButton\r\n            buttonClass={\"print\"}\r\n            // mainbg={true}\r\n            className=\"col-12 fs-15 \"\r\n            label=\"Print\"\r\n            // outline={false}\r\n            onClick={() => this.setState({ isOpenEditDisc: false })}\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators({\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi\r\n  }, dispatch)\r\n}\r\n\r\nexport const ProductAccount = connect(null, mapDispatchToProps)(ProductAccountClass)"]},"metadata":{},"sourceType":"module"}