{"ast":null,"code":"/**\r\n * DevExtreme (viz/vector_map/vector_map.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _utils = require(\"../core/utils\");\n\nvar _projection = require(\"./projection.main\");\n\nvar _control_bar = require(\"./control_bar\");\n\nvar _gesture_handler = require(\"./gesture_handler\");\n\nvar _tracker = require(\"./tracker\");\n\nvar _data_exchanger = require(\"./data_exchanger\");\n\nvar _legend = require(\"./legend\");\n\nvar _layout = require(\"./layout\");\n\nvar _map_layer = require(\"./map_layer\");\n\nvar _tooltip_viewer = require(\"./tooltip_viewer\");\n\nvar _vector_map = require(\"./vector_map.utils\");\n\nrequire(\"./projection\");\n\nvar _base_widget = _interopRequireDefault(require(\"../core/base_widget\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _export = require(\"../core/export\");\n\nvar _title = require(\"../core/title\");\n\nvar _tooltip = require(\"../core/tooltip\");\n\nvar _loading_indicator = require(\"../core/loading_indicator\");\n\nvar _annotations = require(\"../core/annotations\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_WIDTH = 800;\nvar DEFAULT_HEIGHT = 400;\nvar RE_STARTS_LAYERS = /^layers/;\nvar RE_ENDS_DATA_SOURCE = /\\.dataSource$/;\n\nfunction mergeBounds(sumBounds, dataBounds) {\n  return dataBounds ? [Math.min(dataBounds[0], dataBounds[2], sumBounds[0]), Math.min(dataBounds[1], dataBounds[3], sumBounds[3]), Math.max(dataBounds[0], dataBounds[2], sumBounds[2]), Math.max(dataBounds[1], dataBounds[3], sumBounds[1])] : sumBounds;\n}\n\nvar dxVectorMap = _base_widget.default.inherit({\n  _eventsMap: {\n    onClick: {\n      name: \"click\"\n    },\n    onCenterChanged: {\n      name: \"centerChanged\"\n    },\n    onZoomFactorChanged: {\n      name: \"zoomFactorChanged\"\n    },\n    onHoverChanged: {\n      name: \"hoverChanged\"\n    },\n    onSelectionChanged: {\n      name: \"selectionChanged\"\n    }\n  },\n  _rootClassPrefix: \"dxm\",\n  _rootClass: \"dxm-vector-map\",\n  _themeSection: \"map\",\n  _fontFields: [\"layer:area.label.font\", \"layer:marker:dot.label.font\", \"layer:marker:bubble.label.font\", \"layer:marker:pie.label.font\", \"layer:marker:image.label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\n  _initLayerCollection: function (dataKey) {\n    var that = this;\n    that._layerCollection = new _map_layer.MapLayerCollection({\n      renderer: that._renderer,\n      projection: that._projection,\n      themeManager: that._themeManager,\n      tracker: that._tracker,\n      dataKey: dataKey,\n      eventTrigger: that._eventTrigger,\n      dataExchanger: that._dataExchanger,\n      tooltip: that._tooltip,\n      notifyDirty: that._notifyDirty,\n      notifyReady: that._notifyReady,\n      dataReady: function () {\n        var bounds;\n\n        if (that.option(\"getBoundsFromData\") && !that.option(\"bounds\")) {\n          that._preventProjectionEvents();\n\n          bounds = that._getBoundsFromData();\n\n          that._projection.setBounds(bounds);\n\n          that._allowProjectionEvents();\n        }\n\n        if (!that.option(\"projection\")) {\n          bounds = bounds || that._getBoundsFromData();\n\n          if (Math.ceil(bounds[0]) < -180 || Math.ceil(bounds[3]) < -90 || Math.floor(bounds[2]) > 180 || Math.floor(bounds[1]) > 90) {\n            var longitudeLength = bounds[2] - bounds[0];\n            var latitudeLength = bounds[1] - bounds[3];\n\n            that._projection.setEngine({\n              to: function (coordinates) {\n                return [2 * (coordinates[0] - bounds[0]) / longitudeLength - 1, 2 * (coordinates[1] - bounds[3]) / latitudeLength - 1];\n              },\n              from: function (coordinates) {\n                return [(coordinates[0] + 1) * longitudeLength / 2 + bounds[0], (coordinates[1] + 1) * latitudeLength / 2 + bounds[3]];\n              }\n            });\n          }\n        }\n      }\n    });\n  },\n  _getBoundsFromData: function () {\n    var bounds = this._getBoundingBoxFromDataSource();\n\n    if (!bounds) {\n      var boundsByData = (0, _map_layer.getMaxBound)(this.getLayers().map(function (l) {\n        return l.getBounds();\n      }));\n\n      if (boundsByData) {\n        bounds = boundsByData;\n      }\n    }\n\n    bounds = bounds || [];\n    bounds = [bounds[0], bounds[3], bounds[2], bounds[1]];\n    return bounds;\n  },\n  _initLegendsControl: function () {\n    var that = this;\n    that._legendsControl = new _legend.LegendsControl({\n      renderer: that._renderer,\n      container: that._root,\n      widget: that,\n      layoutControl: that._layoutControl,\n      themeManager: that._themeManager,\n      dataExchanger: that._dataExchanger,\n      notifyDirty: that._notifyDirty,\n      notifyReady: that._notifyReady\n    });\n  },\n  _initControlBar: function (dataKey) {\n    var that = this;\n    that._controlBar = new _control_bar.ControlBar({\n      renderer: that._renderer,\n      container: that._root,\n      layoutControl: that._layoutControl,\n      projection: that._projection,\n      tracker: that._tracker,\n      dataKey: dataKey\n    });\n  },\n  _initElements: function () {\n    var that = this;\n    var dataKey = (0, _vector_map.generateDataKey)();\n    var notifyCounter = 0;\n    var preventProjectionEvents;\n\n    that._preventProjectionEvents = function () {\n      preventProjectionEvents = true;\n    };\n\n    that._allowProjectionEvents = function () {\n      preventProjectionEvents = false;\n    };\n\n    that._notifyDirty = function () {\n      that._resetIsReady();\n\n      ++notifyCounter;\n    };\n\n    that._notifyReady = function () {\n      that._allowProjectionEvents();\n\n      if (0 === --notifyCounter) {\n        that._drawn();\n      }\n    };\n\n    that._preventProjectionEvents();\n\n    that._dataExchanger = new _data_exchanger.DataExchanger();\n    that._projection = new _projection.Projection({\n      centerChanged: function (value) {\n        if (!preventProjectionEvents) {\n          that._eventTrigger(\"centerChanged\", {\n            center: value\n          });\n        }\n      },\n      zoomChanged: function (value) {\n        if (!preventProjectionEvents) {\n          that._eventTrigger(\"zoomFactorChanged\", {\n            zoomFactor: value\n          });\n        }\n      }\n    });\n    that._tracker = new _tracker.Tracker({\n      root: that._root,\n      projection: that._projection,\n      dataKey: dataKey\n    });\n    that._gestureHandler = new _gesture_handler.GestureHandler({\n      projection: that._projection,\n      renderer: that._renderer,\n      tracker: that._tracker\n    });\n    that._layoutControl = new _layout.LayoutControl(that);\n\n    that._layoutControl.suspend();\n\n    that._initLayerCollection(dataKey);\n\n    that._createHtmlStructure();\n\n    that._initControlBar(dataKey);\n\n    that._initLegendsControl();\n\n    that._prepareExtraElements();\n\n    that._tooltipViewer = new _tooltip_viewer.TooltipViewer({\n      tracker: that._tracker,\n      tooltip: that._tooltip,\n      layerCollection: that._layerCollection\n    });\n  },\n  _change_RESUME_LAYOUT: function () {\n    this._layoutControl.resume();\n  },\n  _initialChanges: [\"PROJECTION\", \"RESUME_LAYOUT\", \"LAYOUT_INIT\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\"],\n  _layoutChangesOrder: [\"RESUME_LAYOUT\", \"LAYERS\"],\n  _customChangesOrder: [\"EXTRA_ELEMENTS\"],\n  _initCore: function () {\n    this._root = this._renderer.root.attr({\n      align: \"center\",\n      cursor: \"default\"\n    });\n\n    this._initElements();\n  },\n  _disposeCore: function () {\n    var that = this;\n\n    that._controlBar.dispose();\n\n    that._gestureHandler.dispose();\n\n    that._tracker.dispose();\n\n    that._legendsControl.dispose();\n\n    that._layerCollection.dispose();\n\n    that._layoutControl.dispose();\n\n    that._tooltipViewer.dispose();\n\n    that._dataExchanger.dispose();\n\n    that._projection.dispose();\n\n    that._dataExchanger = that._gestureHandler = that._projection = that._tracker = that._layoutControl = that._root = that._layerCollection = that._controlBar = that._legendsControl = null;\n  },\n  _setupInteraction: function () {\n    var options = {\n      centeringEnabled: !!(0, _utils.parseScalar)(this._getOption(\"panningEnabled\", true), true),\n      zoomingEnabled: !!(0, _utils.parseScalar)(this._getOption(\"zoomingEnabled\", true), true)\n    };\n\n    this._gestureHandler.setInteraction(options);\n\n    this._controlBar.setInteraction(options);\n  },\n  _getDefaultSize: function () {\n    return {\n      width: DEFAULT_WIDTH,\n      height: DEFAULT_HEIGHT\n    };\n  },\n  _applySize: function (rect) {\n    var layout = {\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1],\n      right: 0,\n      bottom: 0\n    };\n\n    this._projection.setSize(layout);\n\n    this._layoutControl.setSize(layout);\n\n    this._layerCollection.setRect([layout.left, layout.top, layout.width, layout.height]);\n\n    this._requestChange([\"EXTRA_ELEMENTS\"]);\n  },\n  _optionChanging: function (name, currentValue, nextValue) {\n    if (currentValue && nextValue) {\n      if (RE_STARTS_LAYERS.test(name)) {\n        if (currentValue.dataSource && nextValue.dataSource && currentValue !== nextValue) {\n          currentValue.dataSource = null;\n        } else {\n          if (RE_ENDS_DATA_SOURCE.test(name)) {\n            this.option(name, null);\n          }\n        }\n      }\n    }\n  },\n  _applyChanges: function () {\n    this._notifyDirty();\n\n    this.callBase.apply(this, arguments);\n\n    this._notifyReady();\n  },\n  _optionChangesMap: {\n    background: \"BACKGROUND\",\n    layers: \"LAYERS\",\n    extraElements: \"EXTRA_ELEMENTS\",\n    controlBar: \"CONTROL_BAR\",\n    legends: \"LEGENDS\",\n    touchEnabled: \"TRACKER\",\n    wheelEnabled: \"TRACKER\",\n    panningEnabled: \"INTERACTION\",\n    zoomingEnabled: \"INTERACTION\",\n    projection: \"PROJECTION\",\n    bounds: \"BOUNDS\",\n    maxZoomFactor: \"MAX_ZOOM_FACTOR\",\n    zoomFactor: \"ZOOM_FACTOR\",\n    center: \"CENTER\"\n  },\n  _optionChangesOrder: [\"PROJECTION\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\", \"BACKGROUND\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\n  _change_PROJECTION: function () {\n    this._setProjection();\n  },\n  _change_BOUNDS: function () {\n    this._setBounds();\n  },\n  _change_MAX_ZOOM_FACTOR: function () {\n    this._setMaxZoom();\n  },\n  _change_ZOOM_FACTOR: function () {\n    this._setZoom();\n  },\n  _change_CENTER: function () {\n    this._setCenter();\n  },\n  _change_BACKGROUND: function () {\n    this._setBackgroundOptions();\n  },\n  _change_LAYERS: function () {\n    this._setLayerCollectionOptions();\n  },\n  _change_CONTROL_BAR: function () {\n    this._setControlBarOptions();\n  },\n  _change_EXTRA_ELEMENTS: function () {\n    this._renderExtraElements();\n  },\n  _change_LEGENDS: function () {\n    this._setLegendsOptions();\n  },\n  _change_TRACKER: function () {\n    this._setTrackerOptions();\n  },\n  _change_INTERACTION: function () {\n    this._setupInteraction();\n  },\n  _themeDependentChanges: [\"BACKGROUND\", \"LAYERS\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\n  _setProjection: function () {\n    this._projection.setEngine(this.option(\"projection\"));\n  },\n  _setBounds: function () {\n    this._projection.setBounds(this.option(\"bounds\"));\n  },\n  _setMaxZoom: function () {\n    this._projection.setMaxZoom(this.option(\"maxZoomFactor\"));\n  },\n  _setZoom: function () {\n    this._projection.setZoom(this.option(\"zoomFactor\"));\n  },\n  _setCenter: function () {\n    this._projection.setCenter(this.option(\"center\"));\n  },\n  _setBackgroundOptions: function () {\n    this._layerCollection.setBackgroundOptions(this._getOption(\"background\"));\n  },\n  _setLayerCollectionOptions: function () {\n    this._layerCollection.setOptions(this.option(\"layers\"));\n  },\n  _getBoundingBoxFromDataSource: function () {\n    var that = this;\n\n    var layers = that._layerCollection.items();\n\n    var infinityBounds = [1 / 0, -(1 / 0), -(1 / 0), 1 / 0];\n    var resultBBox = layers && layers.length ? layers.reduce(function (sumBBox, l) {\n      var layerData = l.getData();\n      var itemCount = layerData.count();\n\n      if (itemCount > 0) {\n        var rootBBox = layerData.getBBox();\n\n        if (rootBBox) {\n          sumBBox = mergeBounds(sumBBox, rootBBox);\n        } else {\n          for (var i = 0; i < itemCount; i++) {\n            sumBBox = mergeBounds(sumBBox, layerData.getBBox(i));\n          }\n        }\n      }\n\n      return sumBBox;\n    }, infinityBounds) : void 0;\n    return resultBBox === infinityBounds ? void 0 : resultBBox;\n  },\n  _setControlBarOptions: function () {\n    this._controlBar.setOptions(this._getOption(\"controlBar\"));\n  },\n  _setLegendsOptions: function () {\n    this._legendsControl.setOptions(this.option(\"legends\"));\n  },\n  _setTrackerOptions: function () {\n    this._tracker.setOptions({\n      touchEnabled: this._getOption(\"touchEnabled\", true),\n      wheelEnabled: this._getOption(\"wheelEnabled\", true)\n    });\n  },\n  getLayers: function () {\n    return this._layerCollection.items().map(function (l) {\n      return l.proxy;\n    });\n  },\n  getLayerByIndex: function (index) {\n    var layer = this._layerCollection.byIndex(index);\n\n    return layer ? layer.proxy : null;\n  },\n  getLayerByName: function (name) {\n    var layer = this._layerCollection.byName(name);\n\n    return layer ? layer.proxy : null;\n  },\n  clearSelection: function (_noEvent) {\n    var layers = this._layerCollection.items();\n\n    var i;\n    var ii = layers.length;\n\n    for (i = 0; i < ii; ++i) {\n      layers[i].clearSelection(_noEvent);\n    }\n\n    return this;\n  },\n  center: function (value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getCenter();\n    } else {\n      that._projection.setCenter(value);\n\n      return that;\n    }\n  },\n  zoomFactor: function (value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getZoom();\n    } else {\n      that._projection.setZoom(value);\n\n      return that;\n    }\n  },\n  viewport: function (value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getViewport();\n    } else {\n      that._projection.setViewport(value);\n\n      return that;\n    }\n  },\n  convertCoordinates: function (coordinates) {\n    coordinates = coordinates && coordinates.length ? coordinates : [arguments[0], arguments[1]];\n    return this.convertToGeo(coordinates[0], coordinates[1]);\n  },\n  convertToGeo: function (x, y) {\n    return this._projection.fromScreenPoint([x, y]);\n  },\n  convertToXY: function (longitude, latitude) {\n    return this._projection.toScreenPoint([longitude, latitude]);\n  }\n});\n\n(0, _component_registrator.default)(\"dxVectorMap\", dxVectorMap);\nvar _default = dxVectorMap;\nexports.default = _default;\ndxVectorMap.addPlugin(_export.plugin);\ndxVectorMap.addPlugin(_title.plugin);\ndxVectorMap.addPlugin(_tooltip.plugin);\ndxVectorMap.addPlugin(_loading_indicator.plugin);\ndxVectorMap.addPlugin(_annotations.plugins.core);\ndxVectorMap.addPlugin(_annotations.plugins.vectorMap);\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/vector_map/vector_map.js"],"names":["exports","default","_utils","require","_projection","_control_bar","_gesture_handler","_tracker","_data_exchanger","_legend","_layout","_map_layer","_tooltip_viewer","_vector_map","_base_widget","_interopRequireDefault","_component_registrator","_export","_title","_tooltip","_loading_indicator","_annotations","obj","__esModule","DEFAULT_WIDTH","DEFAULT_HEIGHT","RE_STARTS_LAYERS","RE_ENDS_DATA_SOURCE","mergeBounds","sumBounds","dataBounds","Math","min","max","dxVectorMap","inherit","_eventsMap","onClick","name","onCenterChanged","onZoomFactorChanged","onHoverChanged","onSelectionChanged","_rootClassPrefix","_rootClass","_themeSection","_fontFields","_initLayerCollection","dataKey","that","_layerCollection","MapLayerCollection","renderer","_renderer","projection","themeManager","_themeManager","tracker","eventTrigger","_eventTrigger","dataExchanger","_dataExchanger","tooltip","notifyDirty","_notifyDirty","notifyReady","_notifyReady","dataReady","bounds","option","_preventProjectionEvents","_getBoundsFromData","setBounds","_allowProjectionEvents","ceil","floor","longitudeLength","latitudeLength","setEngine","to","coordinates","from","_getBoundingBoxFromDataSource","boundsByData","getMaxBound","getLayers","map","l","getBounds","_initLegendsControl","_legendsControl","LegendsControl","container","_root","widget","layoutControl","_layoutControl","_initControlBar","_controlBar","ControlBar","_initElements","generateDataKey","notifyCounter","preventProjectionEvents","_resetIsReady","_drawn","DataExchanger","Projection","centerChanged","value","center","zoomChanged","zoomFactor","Tracker","root","_gestureHandler","GestureHandler","LayoutControl","suspend","_createHtmlStructure","_prepareExtraElements","_tooltipViewer","TooltipViewer","layerCollection","_change_RESUME_LAYOUT","resume","_initialChanges","_layoutChangesOrder","_customChangesOrder","_initCore","attr","align","cursor","_disposeCore","dispose","_setupInteraction","options","centeringEnabled","parseScalar","_getOption","zoomingEnabled","setInteraction","_getDefaultSize","width","height","_applySize","rect","layout","left","top","right","bottom","setSize","setRect","_requestChange","_optionChanging","currentValue","nextValue","test","dataSource","_applyChanges","callBase","apply","arguments","_optionChangesMap","background","layers","extraElements","controlBar","legends","touchEnabled","wheelEnabled","panningEnabled","maxZoomFactor","_optionChangesOrder","_change_PROJECTION","_setProjection","_change_BOUNDS","_setBounds","_change_MAX_ZOOM_FACTOR","_setMaxZoom","_change_ZOOM_FACTOR","_setZoom","_change_CENTER","_setCenter","_change_BACKGROUND","_setBackgroundOptions","_change_LAYERS","_setLayerCollectionOptions","_change_CONTROL_BAR","_setControlBarOptions","_change_EXTRA_ELEMENTS","_renderExtraElements","_change_LEGENDS","_setLegendsOptions","_change_TRACKER","_setTrackerOptions","_change_INTERACTION","_themeDependentChanges","setMaxZoom","setZoom","setCenter","setBackgroundOptions","setOptions","items","infinityBounds","resultBBox","length","reduce","sumBBox","layerData","getData","itemCount","count","rootBBox","getBBox","i","proxy","getLayerByIndex","index","layer","byIndex","getLayerByName","byName","clearSelection","_noEvent","ii","getCenter","getZoom","viewport","getViewport","setViewport","convertCoordinates","convertToGeo","x","y","fromScreenPoint","convertToXY","longitude","latitude","toScreenPoint","_default","addPlugin","plugin","plugins","core","vectorMap","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/vector_map/vector_map.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _utils = require(\"../core/utils\");\r\nvar _projection = require(\"./projection.main\");\r\nvar _control_bar = require(\"./control_bar\");\r\nvar _gesture_handler = require(\"./gesture_handler\");\r\nvar _tracker = require(\"./tracker\");\r\nvar _data_exchanger = require(\"./data_exchanger\");\r\nvar _legend = require(\"./legend\");\r\nvar _layout = require(\"./layout\");\r\nvar _map_layer = require(\"./map_layer\");\r\nvar _tooltip_viewer = require(\"./tooltip_viewer\");\r\nvar _vector_map = require(\"./vector_map.utils\");\r\nrequire(\"./projection\");\r\nvar _base_widget = _interopRequireDefault(require(\"../core/base_widget\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _export = require(\"../core/export\");\r\nvar _title = require(\"../core/title\");\r\nvar _tooltip = require(\"../core/tooltip\");\r\nvar _loading_indicator = require(\"../core/loading_indicator\");\r\nvar _annotations = require(\"../core/annotations\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_WIDTH = 800;\r\nvar DEFAULT_HEIGHT = 400;\r\nvar RE_STARTS_LAYERS = /^layers/;\r\nvar RE_ENDS_DATA_SOURCE = /\\.dataSource$/;\r\n\r\nfunction mergeBounds(sumBounds, dataBounds) {\r\n    return dataBounds ? [Math.min(dataBounds[0], dataBounds[2], sumBounds[0]), Math.min(dataBounds[1], dataBounds[3], sumBounds[3]), Math.max(dataBounds[0], dataBounds[2], sumBounds[2]), Math.max(dataBounds[1], dataBounds[3], sumBounds[1])] : sumBounds\r\n}\r\nvar dxVectorMap = _base_widget.default.inherit({\r\n    _eventsMap: {\r\n        onClick: {\r\n            name: \"click\"\r\n        },\r\n        onCenterChanged: {\r\n            name: \"centerChanged\"\r\n        },\r\n        onZoomFactorChanged: {\r\n            name: \"zoomFactorChanged\"\r\n        },\r\n        onHoverChanged: {\r\n            name: \"hoverChanged\"\r\n        },\r\n        onSelectionChanged: {\r\n            name: \"selectionChanged\"\r\n        }\r\n    },\r\n    _rootClassPrefix: \"dxm\",\r\n    _rootClass: \"dxm-vector-map\",\r\n    _themeSection: \"map\",\r\n    _fontFields: [\"layer:area.label.font\", \"layer:marker:dot.label.font\", \"layer:marker:bubble.label.font\", \"layer:marker:pie.label.font\", \"layer:marker:image.label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\r\n    _initLayerCollection: function(dataKey) {\r\n        var that = this;\r\n        that._layerCollection = new _map_layer.MapLayerCollection({\r\n            renderer: that._renderer,\r\n            projection: that._projection,\r\n            themeManager: that._themeManager,\r\n            tracker: that._tracker,\r\n            dataKey: dataKey,\r\n            eventTrigger: that._eventTrigger,\r\n            dataExchanger: that._dataExchanger,\r\n            tooltip: that._tooltip,\r\n            notifyDirty: that._notifyDirty,\r\n            notifyReady: that._notifyReady,\r\n            dataReady: function() {\r\n                var bounds;\r\n                if (that.option(\"getBoundsFromData\") && !that.option(\"bounds\")) {\r\n                    that._preventProjectionEvents();\r\n                    bounds = that._getBoundsFromData();\r\n                    that._projection.setBounds(bounds);\r\n                    that._allowProjectionEvents()\r\n                }\r\n                if (!that.option(\"projection\")) {\r\n                    bounds = bounds || that._getBoundsFromData();\r\n                    if (Math.ceil(bounds[0]) < -180 || Math.ceil(bounds[3]) < -90 || Math.floor(bounds[2]) > 180 || Math.floor(bounds[1]) > 90) {\r\n                        var longitudeLength = bounds[2] - bounds[0];\r\n                        var latitudeLength = bounds[1] - bounds[3];\r\n                        that._projection.setEngine({\r\n                            to: function(coordinates) {\r\n                                return [2 * (coordinates[0] - bounds[0]) / longitudeLength - 1, 2 * (coordinates[1] - bounds[3]) / latitudeLength - 1]\r\n                            },\r\n                            from: function(coordinates) {\r\n                                return [(coordinates[0] + 1) * longitudeLength / 2 + bounds[0], (coordinates[1] + 1) * latitudeLength / 2 + bounds[3]]\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getBoundsFromData: function() {\r\n        var bounds = this._getBoundingBoxFromDataSource();\r\n        if (!bounds) {\r\n            var boundsByData = (0, _map_layer.getMaxBound)(this.getLayers().map(function(l) {\r\n                return l.getBounds()\r\n            }));\r\n            if (boundsByData) {\r\n                bounds = boundsByData\r\n            }\r\n        }\r\n        bounds = bounds || [];\r\n        bounds = [bounds[0], bounds[3], bounds[2], bounds[1]];\r\n        return bounds\r\n    },\r\n    _initLegendsControl: function() {\r\n        var that = this;\r\n        that._legendsControl = new _legend.LegendsControl({\r\n            renderer: that._renderer,\r\n            container: that._root,\r\n            widget: that,\r\n            layoutControl: that._layoutControl,\r\n            themeManager: that._themeManager,\r\n            dataExchanger: that._dataExchanger,\r\n            notifyDirty: that._notifyDirty,\r\n            notifyReady: that._notifyReady\r\n        })\r\n    },\r\n    _initControlBar: function(dataKey) {\r\n        var that = this;\r\n        that._controlBar = new _control_bar.ControlBar({\r\n            renderer: that._renderer,\r\n            container: that._root,\r\n            layoutControl: that._layoutControl,\r\n            projection: that._projection,\r\n            tracker: that._tracker,\r\n            dataKey: dataKey\r\n        })\r\n    },\r\n    _initElements: function() {\r\n        var that = this;\r\n        var dataKey = (0, _vector_map.generateDataKey)();\r\n        var notifyCounter = 0;\r\n        var preventProjectionEvents;\r\n        that._preventProjectionEvents = function() {\r\n            preventProjectionEvents = true\r\n        };\r\n        that._allowProjectionEvents = function() {\r\n            preventProjectionEvents = false\r\n        };\r\n        that._notifyDirty = function() {\r\n            that._resetIsReady();\r\n            ++notifyCounter\r\n        };\r\n        that._notifyReady = function() {\r\n            that._allowProjectionEvents();\r\n            if (0 === --notifyCounter) {\r\n                that._drawn()\r\n            }\r\n        };\r\n        that._preventProjectionEvents();\r\n        that._dataExchanger = new _data_exchanger.DataExchanger;\r\n        that._projection = new _projection.Projection({\r\n            centerChanged: function(value) {\r\n                if (!preventProjectionEvents) {\r\n                    that._eventTrigger(\"centerChanged\", {\r\n                        center: value\r\n                    })\r\n                }\r\n            },\r\n            zoomChanged: function(value) {\r\n                if (!preventProjectionEvents) {\r\n                    that._eventTrigger(\"zoomFactorChanged\", {\r\n                        zoomFactor: value\r\n                    })\r\n                }\r\n            }\r\n        });\r\n        that._tracker = new _tracker.Tracker({\r\n            root: that._root,\r\n            projection: that._projection,\r\n            dataKey: dataKey\r\n        });\r\n        that._gestureHandler = new _gesture_handler.GestureHandler({\r\n            projection: that._projection,\r\n            renderer: that._renderer,\r\n            tracker: that._tracker\r\n        });\r\n        that._layoutControl = new _layout.LayoutControl(that);\r\n        that._layoutControl.suspend();\r\n        that._initLayerCollection(dataKey);\r\n        that._createHtmlStructure();\r\n        that._initControlBar(dataKey);\r\n        that._initLegendsControl();\r\n        that._prepareExtraElements();\r\n        that._tooltipViewer = new _tooltip_viewer.TooltipViewer({\r\n            tracker: that._tracker,\r\n            tooltip: that._tooltip,\r\n            layerCollection: that._layerCollection\r\n        })\r\n    },\r\n    _change_RESUME_LAYOUT: function() {\r\n        this._layoutControl.resume()\r\n    },\r\n    _initialChanges: [\"PROJECTION\", \"RESUME_LAYOUT\", \"LAYOUT_INIT\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\"],\r\n    _layoutChangesOrder: [\"RESUME_LAYOUT\", \"LAYERS\"],\r\n    _customChangesOrder: [\"EXTRA_ELEMENTS\"],\r\n    _initCore: function() {\r\n        this._root = this._renderer.root.attr({\r\n            align: \"center\",\r\n            cursor: \"default\"\r\n        });\r\n        this._initElements()\r\n    },\r\n    _disposeCore: function() {\r\n        var that = this;\r\n        that._controlBar.dispose();\r\n        that._gestureHandler.dispose();\r\n        that._tracker.dispose();\r\n        that._legendsControl.dispose();\r\n        that._layerCollection.dispose();\r\n        that._layoutControl.dispose();\r\n        that._tooltipViewer.dispose();\r\n        that._dataExchanger.dispose();\r\n        that._projection.dispose();\r\n        that._dataExchanger = that._gestureHandler = that._projection = that._tracker = that._layoutControl = that._root = that._layerCollection = that._controlBar = that._legendsControl = null\r\n    },\r\n    _setupInteraction: function() {\r\n        var options = {\r\n            centeringEnabled: !!(0, _utils.parseScalar)(this._getOption(\"panningEnabled\", true), true),\r\n            zoomingEnabled: !!(0, _utils.parseScalar)(this._getOption(\"zoomingEnabled\", true), true)\r\n        };\r\n        this._gestureHandler.setInteraction(options);\r\n        this._controlBar.setInteraction(options)\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: DEFAULT_WIDTH,\r\n            height: DEFAULT_HEIGHT\r\n        }\r\n    },\r\n    _applySize: function(rect) {\r\n        var layout = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1],\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        this._projection.setSize(layout);\r\n        this._layoutControl.setSize(layout);\r\n        this._layerCollection.setRect([layout.left, layout.top, layout.width, layout.height]);\r\n        this._requestChange([\"EXTRA_ELEMENTS\"])\r\n    },\r\n    _optionChanging: function(name, currentValue, nextValue) {\r\n        if (currentValue && nextValue) {\r\n            if (RE_STARTS_LAYERS.test(name)) {\r\n                if (currentValue.dataSource && nextValue.dataSource && currentValue !== nextValue) {\r\n                    currentValue.dataSource = null\r\n                } else {\r\n                    if (RE_ENDS_DATA_SOURCE.test(name)) {\r\n                        this.option(name, null)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _applyChanges: function() {\r\n        this._notifyDirty();\r\n        this.callBase.apply(this, arguments);\r\n        this._notifyReady()\r\n    },\r\n    _optionChangesMap: {\r\n        background: \"BACKGROUND\",\r\n        layers: \"LAYERS\",\r\n        extraElements: \"EXTRA_ELEMENTS\",\r\n        controlBar: \"CONTROL_BAR\",\r\n        legends: \"LEGENDS\",\r\n        touchEnabled: \"TRACKER\",\r\n        wheelEnabled: \"TRACKER\",\r\n        panningEnabled: \"INTERACTION\",\r\n        zoomingEnabled: \"INTERACTION\",\r\n        projection: \"PROJECTION\",\r\n        bounds: \"BOUNDS\",\r\n        maxZoomFactor: \"MAX_ZOOM_FACTOR\",\r\n        zoomFactor: \"ZOOM_FACTOR\",\r\n        center: \"CENTER\"\r\n    },\r\n    _optionChangesOrder: [\"PROJECTION\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\", \"BACKGROUND\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\r\n    _change_PROJECTION: function() {\r\n        this._setProjection()\r\n    },\r\n    _change_BOUNDS: function() {\r\n        this._setBounds()\r\n    },\r\n    _change_MAX_ZOOM_FACTOR: function() {\r\n        this._setMaxZoom()\r\n    },\r\n    _change_ZOOM_FACTOR: function() {\r\n        this._setZoom()\r\n    },\r\n    _change_CENTER: function() {\r\n        this._setCenter()\r\n    },\r\n    _change_BACKGROUND: function() {\r\n        this._setBackgroundOptions()\r\n    },\r\n    _change_LAYERS: function() {\r\n        this._setLayerCollectionOptions()\r\n    },\r\n    _change_CONTROL_BAR: function() {\r\n        this._setControlBarOptions()\r\n    },\r\n    _change_EXTRA_ELEMENTS: function() {\r\n        this._renderExtraElements()\r\n    },\r\n    _change_LEGENDS: function() {\r\n        this._setLegendsOptions()\r\n    },\r\n    _change_TRACKER: function() {\r\n        this._setTrackerOptions()\r\n    },\r\n    _change_INTERACTION: function() {\r\n        this._setupInteraction()\r\n    },\r\n    _themeDependentChanges: [\"BACKGROUND\", \"LAYERS\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\r\n    _setProjection: function() {\r\n        this._projection.setEngine(this.option(\"projection\"))\r\n    },\r\n    _setBounds: function() {\r\n        this._projection.setBounds(this.option(\"bounds\"))\r\n    },\r\n    _setMaxZoom: function() {\r\n        this._projection.setMaxZoom(this.option(\"maxZoomFactor\"))\r\n    },\r\n    _setZoom: function() {\r\n        this._projection.setZoom(this.option(\"zoomFactor\"))\r\n    },\r\n    _setCenter: function() {\r\n        this._projection.setCenter(this.option(\"center\"))\r\n    },\r\n    _setBackgroundOptions: function() {\r\n        this._layerCollection.setBackgroundOptions(this._getOption(\"background\"))\r\n    },\r\n    _setLayerCollectionOptions: function() {\r\n        this._layerCollection.setOptions(this.option(\"layers\"))\r\n    },\r\n    _getBoundingBoxFromDataSource: function() {\r\n        var that = this;\r\n        var layers = that._layerCollection.items();\r\n        var infinityBounds = [1 / 0, -(1 / 0), -(1 / 0), 1 / 0];\r\n        var resultBBox = layers && layers.length ? layers.reduce(function(sumBBox, l) {\r\n            var layerData = l.getData();\r\n            var itemCount = layerData.count();\r\n            if (itemCount > 0) {\r\n                var rootBBox = layerData.getBBox();\r\n                if (rootBBox) {\r\n                    sumBBox = mergeBounds(sumBBox, rootBBox)\r\n                } else {\r\n                    for (var i = 0; i < itemCount; i++) {\r\n                        sumBBox = mergeBounds(sumBBox, layerData.getBBox(i))\r\n                    }\r\n                }\r\n            }\r\n            return sumBBox\r\n        }, infinityBounds) : void 0;\r\n        return resultBBox === infinityBounds ? void 0 : resultBBox\r\n    },\r\n    _setControlBarOptions: function() {\r\n        this._controlBar.setOptions(this._getOption(\"controlBar\"))\r\n    },\r\n    _setLegendsOptions: function() {\r\n        this._legendsControl.setOptions(this.option(\"legends\"))\r\n    },\r\n    _setTrackerOptions: function() {\r\n        this._tracker.setOptions({\r\n            touchEnabled: this._getOption(\"touchEnabled\", true),\r\n            wheelEnabled: this._getOption(\"wheelEnabled\", true)\r\n        })\r\n    },\r\n    getLayers: function() {\r\n        return this._layerCollection.items().map(function(l) {\r\n            return l.proxy\r\n        })\r\n    },\r\n    getLayerByIndex: function(index) {\r\n        var layer = this._layerCollection.byIndex(index);\r\n        return layer ? layer.proxy : null\r\n    },\r\n    getLayerByName: function(name) {\r\n        var layer = this._layerCollection.byName(name);\r\n        return layer ? layer.proxy : null\r\n    },\r\n    clearSelection: function(_noEvent) {\r\n        var layers = this._layerCollection.items();\r\n        var i;\r\n        var ii = layers.length;\r\n        for (i = 0; i < ii; ++i) {\r\n            layers[i].clearSelection(_noEvent)\r\n        }\r\n        return this\r\n    },\r\n    center: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getCenter()\r\n        } else {\r\n            that._projection.setCenter(value);\r\n            return that\r\n        }\r\n    },\r\n    zoomFactor: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getZoom()\r\n        } else {\r\n            that._projection.setZoom(value);\r\n            return that\r\n        }\r\n    },\r\n    viewport: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getViewport()\r\n        } else {\r\n            that._projection.setViewport(value);\r\n            return that\r\n        }\r\n    },\r\n    convertCoordinates: function(coordinates) {\r\n        coordinates = coordinates && coordinates.length ? coordinates : [arguments[0], arguments[1]];\r\n        return this.convertToGeo(coordinates[0], coordinates[1])\r\n    },\r\n    convertToGeo: function(x, y) {\r\n        return this._projection.fromScreenPoint([x, y])\r\n    },\r\n    convertToXY: function(longitude, latitude) {\r\n        return this._projection.toScreenPoint([longitude, latitude])\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxVectorMap\", dxVectorMap);\r\nvar _default = dxVectorMap;\r\nexports.default = _default;\r\ndxVectorMap.addPlugin(_export.plugin);\r\ndxVectorMap.addPlugin(_title.plugin);\r\ndxVectorMap.addPlugin(_tooltip.plugin);\r\ndxVectorMap.addPlugin(_loading_indicator.plugin);\r\ndxVectorMap.addPlugin(_annotations.plugins.core);\r\ndxVectorMap.addPlugin(_annotations.plugins.vectorMap);\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}