{"ast":null,"code":"import _objectSpread from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalButton,NormalModal}from\"component/common\";import closeIcon from\"assets/images/close.png\";import{Toast}from\"service/toast\";import{commonCreateApi,getCommonApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{dateFormat}from\"service/helperFunctions\";import{withTranslation}from\"react-i18next\";export var StaffSortingClass=/*#__PURE__*/function(_Component){_inherits(StaffSortingClass,_Component);var _super=_createSuper(StaffSortingClass);function StaffSortingClass(){var _this;_classCallCheck(this,StaffSortingClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={selectedList:[],currentSelection:{},isSelected:{selectedItem:false,selectedId:0},index:0,SortedEmployee:[],filterDate:new Date(),staffSortlist:[]};_this.getStaffForSorting=function(){_this.setState({staffSortlist:[]});var _this$state=_this.state,filterDate=_this$state.filterDate,staffSortlist=_this$state.staffSortlist;_this.props.getCommonApi(\"appointmentsort/?date=\".concat(dateFormat(filterDate,\"yyyy-mm-dd\"))).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;staffSortlist.push({value:value.id,label:value.display_name});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({staffSortlist:staffSortlist});}});};_this.currentselection=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item){var _this$state2,currentSelection,isSelected;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state2=_this.state,currentSelection=_this$state2.currentSelection,isSelected=_this$state2.isSelected;currentSelection[\"value\"]=item.value;currentSelection[\"label\"]=item.label;_context.next=5;return _this.setState({currentSelection:currentSelection});case 5:isSelected[\"selectedId\"]=item.value;isSelected[\"selectedItem\"]=true;_context.next=9;return _this.setState({isSelected:isSelected});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.removefromsort=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item,index){var array,filterList;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:array=_toConsumableArray(_this.state.selectedList);// make a separate copy of the array\nfilterList=array.find(function(account){return account.value===item.value;});if(!filterList){_context2.next=6;break;}array.splice(index,1);_context2.next=6;return _this.setState({selectedList:array});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this.addSingleSelect=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this$state3,selectedList,currentSelection,filterList,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$state3=_this.state,selectedList=_this$state3.selectedList,currentSelection=_this$state3.currentSelection;if(!(currentSelection&&currentSelection.value)){_context3.next=6;break;}filterList=selectedList.find(function(account){return account.value===currentSelection.value;});if(filterList){filterList[\"value\"]=currentSelection.value;filterList[\"label\"]=currentSelection.label;_this.setState(_objectSpread(_objectSpread({},_this.state.selectedList),{},{filterList:filterList}));_this.setState({currentSelection:{}});}else{data={};data[\"value\"]=currentSelection.value;data[\"label\"]=currentSelection.label;selectedList.push(data);_this.setState(_objectSpread(_objectSpread({},selectedList),{},{selectedList:selectedList}));_this.setState({currentSelection:{}});}_context3.next=8;break;case 6:Toast({type:\"error\",message:\"Please select Staff\"});return _context3.abrupt(\"return\",false);case 8:case\"end\":return _context3.stop();}}},_callee3);}));_this.addAllSelect=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var staffSortlist;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.setState({currentSelection:{},isSelected:{}});case 2:staffSortlist=_this.state.staffSortlist;_context4.next=5;return _this.setState({selectedList:staffSortlist});case 5:case\"end\":return _context4.stop();}}},_callee4);}));_this.handleDialog=function(){_this.setState({selectedList:[],currentSelection:{},isSelected:{},SortedEmployee:[]});_this.props.handleDialog();};_this.sendEmployeeSortList=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _this$state4,selectedList,SortedEmployee,_iterator2,_step2,item,value,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$state4=_this.state,selectedList=_this$state4.selectedList,SortedEmployee=_this$state4.SortedEmployee;_iterator2=_createForOfIteratorHelper(selectedList);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){item=_step2.value;value=item.value;SortedEmployee.push(value);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_context6.next=5;return _this.setState({SortedEmployee:SortedEmployee});case 5:if(SortedEmployee.length>0){data={emp_ids:SortedEmployee};_this.props.commonCreateApi(\"appointmentsort/\",data).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(res){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(res.status===201){_this.props.handleChange();_this.handleDialog();}case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref6.apply(this,arguments);};}());}else{Toast({type:\"error\",message:\"Please select employee order list\"});}case 6:case\"end\":return _context6.stop();}}},_callee6);}));return _this;}_createClass(StaffSortingClass,[{key:\"componentWillMount\",value:function componentWillMount(){this.setState({filterDate:this.props.filterDate});this.getStaffForSorting();}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,isOpenModal=_this$props.isOpenModal,t=_this$props.t;var _this$state5=this.state,selectedList=_this$state5.selectedList,isSelected=_this$state5.isSelected,staffSortlist=_this$state5.staffSortlist;return/*#__PURE__*/React.createElement(NormalModal,{className:\"multiple-appointment select-category\",style:{minWidth:\"55%\"},modal:isOpenModal,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-2\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"text-left\"},t(\"Staff Sorting\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-11 mt-2 mb-5 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 table-header w-100 m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 text-center\"},t(\"Employee List\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100\"},staffSortlist&&staffSortlist.length>0?staffSortlist.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start m-0 table-body w-100 p-1 border border-secondary staff-sort-list \".concat(isSelected.selectedItem&&isSelected.selectedId==item.value?\"active\":\"\",\" \"),onClick:function onClick(){return _this2.currentselection(item);},key:item.value},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},item.label));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-3 mt-3 mb-3 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 w-100 m-0\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 w-100 p-0\",mainbg:true,className:\"confirm\",label:\">\",outline:false,onClick:function onClick(){return _this2.addSingleSelect();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 w-100 m-0\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 w-100  p-0\",mainbg:true,className:\"confirm\",label:\">>\",outline:false,onClick:function onClick(){return _this2.addAllSelect();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 w-100 m-0\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 w-100  p-0\",mainbg:true,className:\"confirm\",label:\"Clear\",outline:false,onClick:function onClick(){_this2.setState({selectedList:[],currentSelection:{},isSelected:{}});}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-11 mt-2 mb-5 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mt-4 table-header w-100 m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-9 text-center\"},t(\"Employee Order\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"response-table w-100\"},selectedList.length>0?selectedList.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start m-0 table-body w-100 p-1 border border-secondary\",key:item.value},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},item.label),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 remove-icon\",onClick:function onClick(){return _this2.removefromsort(item,index);}},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-close\"})));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"},t(\"No Data\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"w-100  p-0\",mainbg:true,className:\"confirm\",label:\"Save\",outline:false,onClick:function onClick(){return _this2.sendEmployeeSortList();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"w-100 p-0\",mainbg:true,className:\"confirm\",label:\"Cancel\",outline:false,onClick:this.handleDialog}))));}}]);return StaffSortingClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({commonCreateApi:commonCreateApi,getCommonApi:getCommonApi},dispatch);};export var StaffSorting=withTranslation()(connect(null,mapDispatchToProps)(StaffSortingClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/NewAppointment/NewListAppointment/modal/StaffSorting.js"],"names":["React","Component","NormalButton","NormalModal","closeIcon","Toast","commonCreateApi","getCommonApi","connect","bindActionCreators","dateFormat","withTranslation","StaffSortingClass","state","selectedList","currentSelection","isSelected","selectedItem","selectedId","index","SortedEmployee","filterDate","Date","staffSortlist","getStaffForSorting","setState","props","then","key","status","data","value","push","id","label","display_name","currentselection","item","removefromsort","array","filterList","find","account","splice","addSingleSelect","type","message","addAllSelect","handleDialog","sendEmployeeSortList","length","emp_ids","res","handleChange","isOpenModal","t","minWidth","map","mapDispatchToProps","dispatch","StaffSorting"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NormalButton, NormalModal } from \"component/common\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { Toast } from \"service/toast\";\r\nimport { commonCreateApi, getCommonApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { withTranslation } from \"react-i18next\";\r\nexport class StaffSortingClass extends Component {\r\n  state = {\r\n    selectedList: [],\r\n    currentSelection: {},\r\n    isSelected: {\r\n      selectedItem: false,\r\n      selectedId: 0,\r\n    },\r\n    index: 0,\r\n    SortedEmployee: [],\r\n    filterDate: new Date(),\r\n    staffSortlist: [],\r\n  };\r\n  componentWillMount() {\r\n    this.setState({ filterDate: this.props.filterDate });\r\n    this.getStaffForSorting();\r\n  }\r\n  getStaffForSorting = () => {\r\n    this.setState({ staffSortlist: [] });\r\n    let { filterDate, staffSortlist } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `appointmentsort/?date=${dateFormat(filterDate, \"yyyy-mm-dd\")}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            staffSortlist.push({ value: value.id, label: value.display_name });\r\n          }\r\n          this.setState({ staffSortlist });\r\n        }\r\n      });\r\n  };\r\n  currentselection = async item => {\r\n    let { currentSelection, isSelected } = this.state;\r\n    currentSelection[\"value\"] = item.value;\r\n    currentSelection[\"label\"] = item.label;\r\n    await this.setState({\r\n      currentSelection,\r\n    });\r\n    isSelected[\"selectedId\"] = item.value;\r\n    isSelected[\"selectedItem\"] = true;\r\n    await this.setState({ isSelected });\r\n  };\r\n  removefromsort = async (item, index) => {\r\n    var array = [...this.state.selectedList]; // make a separate copy of the array\r\n    let filterList = array.find(account => account.value === item.value);\r\n    if (filterList) {\r\n      array.splice(index, 1);\r\n      await this.setState({ selectedList: array });\r\n    }\r\n  };\r\n  addSingleSelect = async () => {\r\n    let { selectedList, currentSelection } = this.state;\r\n\r\n    if (currentSelection && currentSelection.value) {\r\n      let filterList = selectedList.find(\r\n        account => account.value === currentSelection.value\r\n      );\r\n      if (filterList) {\r\n        filterList[\"value\"] = currentSelection.value;\r\n        filterList[\"label\"] = currentSelection.label;\r\n        this.setState({ ...this.state.selectedList, filterList });\r\n        this.setState({ currentSelection: {} });\r\n      } else {\r\n        let data = {};\r\n        data[\"value\"] = currentSelection.value;\r\n        data[\"label\"] = currentSelection.label;\r\n        selectedList.push(data);\r\n        this.setState({ ...selectedList, selectedList });\r\n        this.setState({ currentSelection: {} });\r\n      }\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select Staff\" });\r\n      return false;\r\n    }\r\n  };\r\n  addAllSelect = async () => {\r\n    await this.setState({ currentSelection: {}, isSelected: {} });\r\n    let { staffSortlist } = this.state;\r\n    await this.setState({ selectedList: staffSortlist });\r\n  };\r\n  handleDialog = () => {\r\n    this.setState({\r\n      selectedList: [],\r\n      currentSelection: {},\r\n      isSelected: {},\r\n      SortedEmployee: [],\r\n    });\r\n    this.props.handleDialog();\r\n  };\r\n\r\n  sendEmployeeSortList = async () => {\r\n    let { selectedList, SortedEmployee } = this.state;\r\n    for (let item of selectedList) {\r\n      let value = item.value;\r\n      SortedEmployee.push(value);\r\n    }\r\n    await this.setState({ SortedEmployee });\r\n    if (SortedEmployee.length > 0) {\r\n      let data = { emp_ids: SortedEmployee };\r\n      this.props.commonCreateApi(`appointmentsort/`, data).then(async res => {\r\n        if (res.status === 201) {\r\n          this.props.handleChange();\r\n          this.handleDialog();\r\n        }\r\n      });\r\n    } else {\r\n      Toast({ type: \"error\", message: \"Please select employee order list\" });\r\n    }\r\n  };\r\n  render() {\r\n    let { isOpenModal, t } = this.props;\r\n    let { selectedList, isSelected, staffSortlist } = this.state;\r\n\r\n    return (\r\n      <NormalModal\r\n        className={\"multiple-appointment select-category\"}\r\n        style={{ minWidth: \"55%\" }}\r\n        modal={isOpenModal}\r\n        handleModal={this.handleDialog}\r\n      >\r\n        <img\r\n          onClick={this.handleDialog}\r\n          className=\"close\"\r\n          src={closeIcon}\r\n          alt=\"\"\r\n        />\r\n        <div className=\"row pl-2\">\r\n          <h4 className=\"text-left\">{t(\"Staff Sorting\")}</h4>\r\n        </div>\r\n        <div className=\"d-flex justify-content-center p-3\">\r\n          <div className=\"col-md-5 col-11 mt-2 mb-5 mx-3\">\r\n            <div className=\"row mt-4 table-header w-100 m-0\">\r\n              <div className=\"col-12 text-center\">{t(\"Employee List\")}</div>\r\n            </div>\r\n            <div className=\"response-table w-100\">\r\n              {staffSortlist && staffSortlist.length > 0 ? (\r\n                staffSortlist.map((item, index) => {\r\n                  return (\r\n                    <div\r\n                      className={`d-flex justify-content-start m-0 table-body w-100 p-1 border border-secondary staff-sort-list ${\r\n                        isSelected.selectedItem &&\r\n                        isSelected.selectedId == item.value\r\n                          ? \"active\"\r\n                          : \"\"\r\n                      } `}\r\n                      onClick={() => this.currentselection(item)}\r\n                      key={item.value}\r\n                    >\r\n                      <div className=\"col-12\">{item.label}</div>\r\n                    </div>\r\n                  );\r\n                })\r\n              ) : (\r\n                <div className=\"text-center w-100\"></div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-2 col-3 mt-3 mb-3 mx-3\">\r\n            <div className=\"row mt-4 w-100 m-0\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2 w-100 p-0\"}\r\n                mainbg={true}\r\n                className=\"confirm\"\r\n                label={`>`}\r\n                outline={false}\r\n                onClick={() => this.addSingleSelect()}\r\n              />\r\n            </div>\r\n            <div className=\"row mt-4 w-100 m-0\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2 w-100  p-0\"}\r\n                mainbg={true}\r\n                className=\"confirm\"\r\n                label={`>>`}\r\n                outline={false}\r\n                onClick={() => this.addAllSelect()}\r\n              />\r\n            </div>\r\n            <div className=\"row mt-4 w-100 m-0\">\r\n              <NormalButton\r\n                buttonClass={\"mx-2 w-100  p-0\"}\r\n                mainbg={true}\r\n                className=\"confirm\"\r\n                label={`Clear`}\r\n                outline={false}\r\n                onClick={() => {\r\n                  this.setState({\r\n                    selectedList: [],\r\n                    currentSelection: {},\r\n                    isSelected: {},\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-5 col-11 mt-2 mb-5 mx-3\">\r\n            <div className=\"col-12 mt-4 table-header w-100 m-0\">\r\n              <div className=\"col-9 text-center\">{t(\"Employee Order\")}</div>\r\n              <div className=\"col-3\"></div>\r\n            </div>\r\n            <div className=\"response-table w-100\">\r\n              {selectedList.length > 0 ? (\r\n                selectedList.map((item, index) => {\r\n                  return (\r\n                    <div\r\n                      className=\"d-flex justify-content-start m-0 table-body w-100 p-1 border border-secondary\"\r\n                      key={item.value}\r\n                    >\r\n                      <div className=\"col-10\">{item.label}</div>\r\n                      <div\r\n                        className=\"col-2 remove-icon\"\r\n                        onClick={() => this.removefromsort(item, index)}\r\n                      >\r\n                        <i className=\"icon-close\"></i>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })\r\n              ) : (\r\n                <div className=\"text-center w-100\">{t(\"No Data\")}</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex justify-content-end\">\r\n          <div className=\"col-md-2 col-6\">\r\n            <NormalButton\r\n              buttonClass={\"w-100  p-0\"}\r\n              mainbg={true}\r\n              className=\"confirm\"\r\n              label={`Save`}\r\n              outline={false}\r\n              onClick={() => this.sendEmployeeSortList()}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-2 col-6\">\r\n            <NormalButton\r\n              buttonClass={\"w-100 p-0\"}\r\n              mainbg={true}\r\n              className=\"confirm\"\r\n              label={`Cancel`}\r\n              outline={false}\r\n              onClick={this.handleDialog}\r\n            />\r\n          </div>\r\n        </div>\r\n      </NormalModal>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      commonCreateApi,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const StaffSorting = withTranslation()(\r\n  connect(null, mapDispatchToProps)(StaffSortingClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}