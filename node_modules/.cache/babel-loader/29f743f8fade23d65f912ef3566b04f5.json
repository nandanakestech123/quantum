{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalButton,TableWrapper,NormalSelect}from\"component/common\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{PDFViewer,PDFDownloadLink,BlobProvider}from\"@react-pdf/renderer\";import Invoice from\"component/Admin/Report/Account/Invoice\";import{withTranslation}from\"react-i18next\";import{dateFormat}from\"service/helperFunctions\";export var TreatmentAccountClass=/*#__PURE__*/function(_Component){_inherits(TreatmentAccountClass,_Component);var _super=_createSuper(TreatmentAccountClass);function TreatmentAccountClass(){var _this;_classCallCheck(this,TreatmentAccountClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeTab:\"\",isOpenTreatmentDone:false,isActiveTab:\"detail\",headerDetails:[{label:\"Date\",sortKey:false,width:\"50px\",//singleClickFunc: () => this.handleSort(\"sa_date\"),\ndivClass:\"justify-content-end text-right\"},{label:\"Transaction #\",width:\"52px\"},{label:\"Treatment #\",sortKey:false,width:\"75px\"},{label:\"Description\",sortKey:false,width:\"155px\"},{label:\"Payment\",sortKey:false,width:\"70px\",divClass:\"justify-content-end text-right\"},{label:\"Credit Balance\",sortKey:false,width:\"72px\",divClass:\"justify-content-end text-right\"},{label:\"Outstanding\",sortKey:false,width:\"72px\",divClass:\"justify-content-end text-right\"},{label:\"Qty\",sortKey:false,width:\"72px\",divClass:\"justify-content-end text-right\"},{label:\"Balance Qty\",sortKey:false,width:\"72px\",divClass:\"justify-content-end text-right\"},{label:\"\",sortKey:false,width:\"72px\"}],detailHeader:[{label:\"Date\",sortKey:false,width:\"80px\",//singleClickFunc: () => this.handleDetailSort(\"sa_date\"),\ndivClass:\"justify-content-end text-right\"},{label:\"Description\",sortKey:false,width:\"155px\"},{label:\"Type\",width:\"52px\"},{label:\"Amount\",sortKey:false,width:\"70px\",divClass:\"justify-content-end text-right\"},{label:\"Credit Balance\",sortKey:false,width:\"72px\",divClass:\"justify-content-end text-right\"},{label:\"Outstanding\",sortKey:false,width:\"72px\",divClass:\"justify-content-end text-right\"}],accountList:[],DetailList:[],yearList:[],year:new Date().getFullYear(),accountHeader:{},isPrintPdfClick:false,orderBy:\"desc\",orderByDetail:\"desc\"};_this.handleSort=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(sortkey,order){var _this$state,accountList,orderBy;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,accountList=_this$state.accountList,orderBy=_this$state.orderBy;_this.setState({orderBy:_this.state.orderBy==\"asc\"?\"desc\":\"asc\"});if(orderBy===\"asc\"){accountList.sort(function(a,b){return a[sortkey]>b[sortkey]?1:b[sortkey]>a[sortkey]?-1:0;});}else{accountList.sort(function(a,b){return a[sortkey]<b[sortkey]?1:b[sortkey]<a[sortkey]?-1:0;});}_context.next=5;return _this.setState({accountList:accountList});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleDetailSort=function(sortkey){var _this$state2=_this.state,DetailList=_this$state2.DetailList,orderByDetail=_this$state2.orderByDetail;_this.setState({orderByDetail:_this.state.orderByDetail==\"asc\"?\"desc\":\"asc\"});if(orderByDetail===\"asc\"){DetailList.sort(function(a,b){return a[sortkey]>b[sortkey]?1:b[sortkey]>a[sortkey]?-1:0;});}else{DetailList.sort(function(a,b){return a[sortkey]<b[sortkey]?1:b[sortkey]<a[sortkey]?-1:0;});}_this.setState({DetailList:DetailList});};_this.getFilter=function(){_this.props.getCommonApi(\"treatmentdone/Year/\").then(function(key){var status=key.status,data=key.data;var yearList=_this.state.yearList;var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;yearList.push({value:value,label:value});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({yearList:yearList});});};_this.getAccountData=function(){var _this$state3=_this.state,year=_this$state3.year,accountHeader=_this$state3.accountHeader;_this.props.getCommonApi(\"treatmentacclist/?cust_id=\".concat(_this.props.id,\"&year=\").concat(year)).then(function(key){console.log(key.data,\"treatment account table list\");var data=key.data,header_data=key.header_data;var accountList=_this.state.accountList;accountList=data;accountHeader=header_data;_this.setState({accountList:accountList,accountHeader:accountHeader});});};_this.toggle=function(tab){if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.handleChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2){var _ref2$target,value,name,year;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref2$target=_ref2.target,value=_ref2$target.value,name=_ref2$target.name;year=_this.state.year;year=value;_context2.next=5;return _this.setState({year:year});case 5:_this.getAccountData();case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.handleOpenDetail=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var activeTab;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:activeTab=_this.state.activeTab;activeTab=\"detail\";_context3.next=4;return _this.setState({activeTab:activeTab});case 4:_this.getDetailList(data.id);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref4.apply(this,arguments);};}();_this.getDetailList=function(id){_this.props.getCommonApi(\"treatmentacclist/\".concat(id)).then(function(key){var data=key.data,header_data=key.header_data;var _this$state4=_this.state,DetailList=_this$state4.DetailList,accountHeader=_this$state4.accountHeader;DetailList=data;accountHeader=header_data;_this.setState({DetailList:DetailList,accountHeader:accountHeader});});};_this.handleBack=function(){var activeTab=_this.state.activeTab;activeTab=\"\";_this.setState({activeTab:activeTab,DetailList:[]});_this.getAccountData();};_this.handlePrintPdfFormat=function(url){_this.setState({isPrintPdfClick:false});var a=document.createElement(\"a\");a.setAttribute(\"download\",\"\".concat(new Date(),\".pdf\"));a.setAttribute(\"href\",url);a.click();window.open(url);};return _this;}_createClass(TreatmentAccountClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getFilter();this.getAccountData();}},{key:\"render\",value:function render(){var _this2=this;var _this$state5=this.state,_this$state5$accountH=_this$state5.accountHeader,accountHeader=_this$state5$accountH===void 0?{}:_this$state5$accountH,headerDetails=_this$state5.headerDetails,accountList=_this$state5.accountList,yearList=_this$state5.yearList,year=_this$state5.year,activeTab=_this$state5.activeTab,detailHeader=_this$state5.detailHeader,DetailList=_this$state5.DetailList,isPrintPdfClick=_this$state5.isPrintPdfClick,invoice=_this$state5.invoice;var balance=accountHeader.balance,treatment_count=accountHeader.treatment_count,outstanding=accountHeader.outstanding,credit_balance=accountHeader.credit_balance,outstanding_balance=accountHeader.outstanding_balance,treatparent_code=accountHeader.treatparent_code,sa_transacno_ref=accountHeader.sa_transacno_ref;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-account row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},activeTab!==\"detail\"?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"},t(\"Treatment List\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"},/*#__PURE__*/React.createElement(NormalSelect,{options:yearList,value:year,name:\"year\",onChange:this.handleChange,className:\"customer-name py-1\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},t(\"Total Treatment Count\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},treatment_count)):/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},t(\"Transaction #\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},sa_transacno_ref),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},t(\"Treatment #\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},treatparent_code))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},t(\"Credit Balance\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},\"$ \",activeTab!==\"detail\"?balance:credit_balance),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},t(\"Outstanding Balance\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"$ \",activeTab!==\"detail\"?outstanding:outstanding_balance))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},activeTab!==\"detail\"?/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination},accountList&&accountList.length>0?accountList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.transaction)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.treatment_parentcode)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},\"$\"+item.payment)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},\"$\"+item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},\"$\"+item.outstanding)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.qty)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.balance_qty)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"view mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"view\",onClick:function onClick(){return _this2.handleOpenDetail(item);}}))));}):null):/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:detailHeader,queryHandler:this.handlePagination},DetailList&&DetailList.length>0?DetailList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.type)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},\"$\"+item.amount)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},\"$\"+item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},\"$\"+item.outstanding)));}):null))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 justify-center d-flex\"},activeTab===\"detail\"?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"back mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"Back\",onClick:function onClick(){return _this2.handleBack();}}):\"\",/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"print\",className:\"col-12 fs-15 \",label:\"Print\",onClick:function onClick(){_this2.setState({isPrintPdfClick:true});}})),isPrintPdfClick?/*#__PURE__*/React.createElement(PDFDownloadLink,{document:/*#__PURE__*/React.createElement(Invoice,{TableList:activeTab!==\"detail\"?accountList:DetailList,accountHeader:accountHeader,Flag:activeTab!==\"detail\"?1:2,landscape:activeTab!==\"detail\"?true:false})},function(_ref5){var blob=_ref5.blob,url=_ref5.url,loading=_ref5.loading,error=_ref5.error;return!loading&&url?_this2.handlePrintPdfFormat(url):null;}):null);}}]);return TreatmentAccountClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var TreatmentAccount=withTranslation()(connect(null,mapDispatchToProps)(TreatmentAccountClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/Accounts/treatmentAccount.js"],"names":["React","Component","NormalButton","TableWrapper","NormalSelect","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","connect","bindActionCreators","PDFViewer","PDFDownloadLink","BlobProvider","Invoice","withTranslation","dateFormat","TreatmentAccountClass","state","activeTab","isOpenTreatmentDone","isActiveTab","headerDetails","label","sortKey","width","divClass","detailHeader","accountList","DetailList","yearList","year","Date","getFullYear","accountHeader","isPrintPdfClick","orderBy","orderByDetail","handleSort","sortkey","order","setState","sort","a","b","handleDetailSort","getFilter","props","then","key","status","data","value","push","getAccountData","id","console","log","header_data","toggle","tab","handleChange","target","name","handleOpenDetail","getDetailList","handleBack","handlePrintPdfFormat","url","document","createElement","setAttribute","click","window","open","invoice","balance","treatment_count","outstanding","credit_balance","outstanding_balance","treatparent_code","sa_transacno_ref","t","handlePagination","length","map","item","index","sa_date","transaction","treatment_parentcode","description","payment","qty","balance_qty","type","amount","blob","loading","error","mapDispatchToProps","dispatch","TreatmentAccount"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { NormalButton, TableWrapper, NormalSelect } from \"component/common\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { PDFViewer, PDFDownloadLink, BlobProvider } from \"@react-pdf/renderer\";\r\nimport Invoice from \"component/Admin/Report/Account/Invoice\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\n\r\nexport class TreatmentAccountClass extends Component {\r\n  state = {\r\n    activeTab: \"\",\r\n    isOpenTreatmentDone: false,\r\n    isActiveTab: \"detail\",\r\n    headerDetails: [\r\n      {\r\n        label: \"Date\",\r\n        sortKey: false,\r\n        width: \"50px\",\r\n        //singleClickFunc: () => this.handleSort(\"sa_date\"),\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Transaction #\", width: \"52px\" },\r\n      { label: \"Treatment #\", sortKey: false, width: \"75px\" },\r\n      { label: \"Description\", sortKey: false, width: \"155px\" },\r\n      {\r\n        label: \"Payment\",\r\n        sortKey: false,\r\n        width: \"70px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Credit Balance\",\r\n        sortKey: false,\r\n        width: \"72px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Outstanding\",\r\n        sortKey: false,\r\n        width: \"72px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Qty\",\r\n        sortKey: false,\r\n        width: \"72px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Balance Qty\",\r\n        sortKey: false,\r\n        width: \"72px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"\", sortKey: false, width: \"72px\" },\r\n    ],\r\n    detailHeader: [\r\n      {\r\n        label: \"Date\",\r\n        sortKey: false,\r\n        width: \"80px\",\r\n        //singleClickFunc: () => this.handleDetailSort(\"sa_date\"),\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Description\", sortKey: false, width: \"155px\" },\r\n      { label: \"Type\", width: \"52px\" },\r\n      {\r\n        label: \"Amount\",\r\n        sortKey: false,\r\n        width: \"70px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Credit Balance\",\r\n        sortKey: false,\r\n        width: \"72px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Outstanding\",\r\n        sortKey: false,\r\n        width: \"72px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n    ],\r\n    accountList: [],\r\n    DetailList: [],\r\n    yearList: [],\r\n    year: new Date().getFullYear(),\r\n    accountHeader: {},\r\n    isPrintPdfClick: false,\r\n    orderBy: \"desc\",\r\n    orderByDetail: \"desc\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getFilter();\r\n    this.getAccountData();\r\n  }\r\n\r\n  handleSort = async (sortkey, order) => {\r\n    let { accountList, orderBy } = this.state;\r\n    this.setState({\r\n      orderBy: this.state.orderBy == \"asc\" ? \"desc\" : \"asc\",\r\n    });\r\n\r\n    if (orderBy === \"asc\") {\r\n      accountList.sort((a, b) =>\r\n        a[sortkey] > b[sortkey] ? 1 : b[sortkey] > a[sortkey] ? -1 : 0\r\n      );\r\n    } else {\r\n      accountList.sort((a, b) =>\r\n        a[sortkey] < b[sortkey] ? 1 : b[sortkey] < a[sortkey] ? -1 : 0\r\n      );\r\n    }\r\n    await this.setState({\r\n      accountList,\r\n    });\r\n  };\r\n\r\n  handleDetailSort = sortkey => {\r\n    let { DetailList, orderByDetail } = this.state;\r\n    this.setState({\r\n      orderByDetail: this.state.orderByDetail == \"asc\" ? \"desc\" : \"asc\",\r\n    });\r\n\r\n    if (orderByDetail === \"asc\") {\r\n      DetailList.sort((a, b) =>\r\n        a[sortkey] > b[sortkey] ? 1 : b[sortkey] > a[sortkey] ? -1 : 0\r\n      );\r\n    } else {\r\n      DetailList.sort((a, b) =>\r\n        a[sortkey] < b[sortkey] ? 1 : b[sortkey] < a[sortkey] ? -1 : 0\r\n      );\r\n    }\r\n    this.setState({\r\n      DetailList,\r\n    });\r\n  };\r\n\r\n  getFilter = () => {\r\n    this.props.getCommonApi(\"treatmentdone/Year/\").then(key => {\r\n      let { status, data } = key;\r\n      let { yearList } = this.state;\r\n      for (let value of data) {\r\n        yearList.push({ value: value, label: value });\r\n      }\r\n      this.setState({ yearList });\r\n    });\r\n  };\r\n\r\n  getAccountData = () => {\r\n    let { year, accountHeader } = this.state;\r\n    this.props\r\n      .getCommonApi(`treatmentacclist/?cust_id=${this.props.id}&year=${year}`)\r\n      .then(key => {\r\n        console.log(key.data, \"treatment account table list\");\r\n        let { data, header_data } = key;\r\n        let { accountList } = this.state;\r\n        accountList = data;\r\n        accountHeader = header_data;\r\n        this.setState({ accountList, accountHeader });\r\n      });\r\n  };\r\n\r\n  toggle = tab => {\r\n    if (this.state.activeTab !== tab) {\r\n      this.setState({\r\n        activeTab: tab,\r\n      });\r\n    }\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { year } = this.state;\r\n    year = value;\r\n    await this.setState({\r\n      year,\r\n    });\r\n    this.getAccountData();\r\n  };\r\n\r\n  handleOpenDetail = async data => {\r\n    let { activeTab } = this.state;\r\n    activeTab = \"detail\";\r\n\r\n    await this.setState({\r\n      activeTab,\r\n    });\r\n    this.getDetailList(data.id);\r\n  };\r\n\r\n  getDetailList = id => {\r\n    this.props.getCommonApi(`treatmentacclist/${id}`).then(key => {\r\n      let { data, header_data } = key;\r\n      let { DetailList, accountHeader } = this.state;\r\n      DetailList = data;\r\n      accountHeader = header_data;\r\n      this.setState({ DetailList, accountHeader });\r\n    });\r\n  };\r\n\r\n  handleBack = () => {\r\n    let { activeTab } = this.state;\r\n    activeTab = \"\";\r\n    this.setState({\r\n      activeTab,\r\n      DetailList: [],\r\n    });\r\n    this.getAccountData();\r\n  };\r\n  handlePrintPdfFormat = url => {\r\n    this.setState({\r\n      isPrintPdfClick: false,\r\n    });\r\n    var a = document.createElement(\"a\");\r\n    a.setAttribute(\"download\", `${new Date()}.pdf`);\r\n    a.setAttribute(\"href\", url);\r\n    a.click();\r\n    window.open(url);\r\n  };\r\n  render() {\r\n    let {\r\n      accountHeader = {},\r\n      headerDetails,\r\n      accountList,\r\n      yearList,\r\n      year,\r\n      activeTab,\r\n      detailHeader,\r\n      DetailList,\r\n      isPrintPdfClick,\r\n      invoice,\r\n    } = this.state;\r\n    let {\r\n      balance,\r\n      treatment_count,\r\n      outstanding,\r\n      credit_balance,\r\n      outstanding_balance,\r\n      treatparent_code,\r\n      sa_transacno_ref,\r\n    } = accountHeader;\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"treatment-account row\">\r\n        <div className=\"col-6 mt-3 mb-4\">\r\n          {activeTab !== \"detail\" ? (\r\n            <div className=\"row\">\r\n              <div className=\"col-5 mb-2\">{t(\"Treatment List\")}</div>\r\n              <div className=\"col-5 mb-2\">\r\n                <NormalSelect\r\n                  options={yearList}\r\n                  value={year}\r\n                  name=\"year\"\r\n                  onChange={this.handleChange}\r\n                  className=\"customer-name py-1\"\r\n                />\r\n              </div>\r\n              <div className=\"col-5\">{t(\"Total Treatment Count\")}</div>\r\n              <div className=\"col-5\">{treatment_count}</div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"row\">\r\n              <div className=\"col-6 mb-2\">{t(\"Transaction #\")}</div>\r\n              <div className=\"col-6 mb-2\">{sa_transacno_ref}</div>\r\n\r\n              <div className=\"col-6\">{t(\"Treatment #\")}</div>\r\n              <div className=\"col-6\">{treatparent_code}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"col-6 mt-3 mb-4\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6 mb-2\">{t(\"Credit Balance\")}</div>\r\n            <div className=\"col-6 mb-2\">\r\n              $ {activeTab !== \"detail\" ? balance : credit_balance}\r\n            </div>\r\n\r\n            <div className=\"col-6\">{t(\"Outstanding Balance\")}</div>\r\n            <div className=\"col-6\">\r\n              $ {activeTab !== \"detail\" ? outstanding : outstanding_balance}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12\">\r\n          <div className=\"table\">\r\n            {activeTab !== \"detail\" ? (\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n              >\r\n                {accountList && accountList.length > 0\r\n                  ? accountList.map((item, index) => {\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"text-right\">{item.sa_date}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-left\">{item.transaction}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-left\">\r\n                              {item.treatment_parentcode}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-left\">{item.description}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">\r\n                              {\"$\" + item.payment}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">\r\n                              {\"$\" + item.balance}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">\r\n                              {\"$\" + item.outstanding}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">{item.qty}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">{item.balance_qty}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <NormalButton\r\n                                buttonClass={\"view mr-3\"}\r\n                                mainbg={true}\r\n                                className=\"col-12 fs-15 \"\r\n                                label=\"view\"\r\n                                onClick={() => this.handleOpenDetail(item)}\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n            ) : (\r\n              <TableWrapper\r\n                headerDetails={detailHeader}\r\n                queryHandler={this.handlePagination}\r\n              >\r\n                {DetailList && DetailList.length > 0\r\n                  ? DetailList.map((item, index) => {\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"text-right\">{item.sa_date}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-left\">{item.description}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-left\">{item.type}</div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">\r\n                              {\"$\" + item.amount}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">\r\n                              {\"$\" + item.balance}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"text-right\">\r\n                              {\"$\" + item.outstanding}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n              </TableWrapper>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12 justify-center d-flex\">\r\n          {activeTab === \"detail\" ? (\r\n            <NormalButton\r\n              buttonClass={\"back mr-3\"}\r\n              mainbg={true}\r\n              className=\"col-12 fs-15 \"\r\n              label=\"Back\"\r\n              onClick={() => this.handleBack()}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <NormalButton\r\n            buttonClass={\"print\"}\r\n            className=\"col-12 fs-15 \"\r\n            label=\"Print\"\r\n            onClick={() => {\r\n              this.setState({ isPrintPdfClick: true });\r\n            }}\r\n          />\r\n        </div>\r\n        {isPrintPdfClick ? (\r\n          <PDFDownloadLink\r\n            document={\r\n              <Invoice\r\n                TableList={activeTab !== \"detail\" ? accountList : DetailList}\r\n                accountHeader={accountHeader}\r\n                Flag={activeTab !== \"detail\" ? 1 : 2}\r\n                landscape={activeTab !== \"detail\" ? true : false}\r\n              />\r\n            }\r\n          >\r\n            {({ blob, url, loading, error }) =>\r\n              !loading && url ? this.handlePrintPdfFormat(url) : null\r\n            }\r\n          </PDFDownloadLink>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentAccount = withTranslation()(\r\n  connect(null, mapDispatchToProps)(TreatmentAccountClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}