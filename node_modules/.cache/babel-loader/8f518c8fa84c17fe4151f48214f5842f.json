{"ast":null,"code":"/**\r\n * DevExtreme (viz/gauges/base_gauge.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.compareArrays = compareArrays;\nexports.getSampleText = exports.formatValue = exports.dxBaseGauge = void 0;\n\nvar _utils = require(\"../core/utils\");\n\nvar _extend2 = require(\"../../core/utils/extend\");\n\nvar _translator1d = require(\"../translators/translator1d\");\n\nvar _base_widget = _interopRequireDefault(require(\"../core/base_widget\"));\n\nvar _theme_manager = _interopRequireDefault(require(\"./theme_manager\"));\n\nvar _tracker = _interopRequireDefault(require(\"./tracker\"));\n\nvar _format_helper = _interopRequireDefault(require(\"../../format_helper\"));\n\nvar _export = require(\"../core/export\");\n\nvar _title = require(\"../core/title\");\n\nvar _tooltip = require(\"../core/tooltip\");\n\nvar _loading_indicator = require(\"../core/loading_indicator\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _Number = Number;\nvar _extend = _extend2.extend;\nvar _format = _format_helper.default.format;\n\nvar dxBaseGauge = _base_widget.default.inherit({\n  _rootClassPrefix: \"dxg\",\n  _themeSection: \"gauge\",\n  _createThemeManager: function () {\n    return new _theme_manager.default.ThemeManager(this._getThemeManagerOptions());\n  },\n  _initCore: function () {\n    var that = this;\n    var root = that._renderer.root;\n    that._valueChangingLocker = 0;\n    that._translator = that._factory.createTranslator();\n    that._tracker = that._factory.createTracker({\n      renderer: that._renderer,\n      container: root\n    });\n\n    that._setTrackerCallbacks();\n  },\n  _beginValueChanging: function () {\n    this._resetIsReady();\n\n    this._onBeginUpdate();\n\n    ++this._valueChangingLocker;\n  },\n  _endValueChanging: function () {\n    if (0 === --this._valueChangingLocker) {\n      this._drawn();\n    }\n  },\n  _setTrackerCallbacks: function () {\n    var that = this;\n    var renderer = that._renderer;\n    var tooltip = that._tooltip;\n\n    that._tracker.setCallbacks({\n      \"tooltip-show\": function (target, info, callback) {\n        var tooltipParameters = target.getTooltipParameters();\n        var offset = renderer.getRootOffset();\n\n        var formatObject = _extend({\n          value: tooltipParameters.value,\n          valueText: tooltip.formatValue(tooltipParameters.value),\n          color: tooltipParameters.color\n        }, info);\n\n        return tooltip.show(formatObject, {\n          x: tooltipParameters.x + offset.left,\n          y: tooltipParameters.y + offset.top,\n          offset: tooltipParameters.offset\n        }, {\n          target: info\n        }, void 0, callback);\n      },\n      \"tooltip-hide\": function () {\n        return tooltip.hide();\n      }\n    });\n  },\n  _dispose: function () {\n    this._cleanCore();\n\n    this.callBase.apply(this, arguments);\n  },\n  _disposeCore: function () {\n    var that = this;\n\n    that._themeManager.dispose();\n\n    that._tracker.dispose();\n\n    that._translator = that._tracker = null;\n  },\n  _cleanCore: function () {\n    var that = this;\n\n    that._tracker.deactivate();\n\n    that._cleanContent();\n  },\n  _renderCore: function () {\n    var that = this;\n\n    if (!that._isValidDomain) {\n      return;\n    }\n\n    that._renderContent();\n\n    that._tracker.setTooltipState(that._tooltip.isEnabled());\n\n    that._tracker.activate();\n\n    that._noAnimation = false;\n  },\n  _applyChanges: function () {\n    this.callBase.apply(this, arguments);\n    this._resizing = this._noAnimation = false;\n  },\n  _setContentSize: function () {\n    var that = this;\n    that._resizing = that._noAnimation = 2 === that._changes.count();\n    that.callBase.apply(that, arguments);\n  },\n  _applySize: function (rect) {\n    var that = this;\n    that._innerRect = {\n      left: rect[0],\n      top: rect[1],\n      right: rect[2],\n      bottom: rect[3]\n    };\n    var layoutCache = that._layout._cache;\n\n    that._cleanCore();\n\n    that._renderCore();\n\n    that._layout._cache = that._layout._cache || layoutCache;\n    return [rect[0], that._innerRect.top, rect[2], that._innerRect.bottom];\n  },\n  _initialChanges: [\"DOMAIN\"],\n  _themeDependentChanges: [\"DOMAIN\"],\n  _optionChangesMap: {\n    subtitle: \"MOSTLY_TOTAL\",\n    indicator: \"MOSTLY_TOTAL\",\n    geometry: \"MOSTLY_TOTAL\",\n    animation: \"MOSTLY_TOTAL\",\n    startValue: \"DOMAIN\",\n    endValue: \"DOMAIN\"\n  },\n  _optionChangesOrder: [\"DOMAIN\", \"MOSTLY_TOTAL\"],\n  _change_DOMAIN: function () {\n    this._setupDomain();\n  },\n  _change_MOSTLY_TOTAL: function () {\n    this._applyMostlyTotalChange();\n  },\n  _setupDomain: function () {\n    var that = this;\n\n    that._setupDomainCore();\n\n    that._isValidDomain = isFinite(1 / (that._translator.getDomain()[1] - that._translator.getDomain()[0]));\n\n    if (!that._isValidDomain) {\n      that._incidentOccurred(\"W2301\");\n    }\n\n    that._change([\"MOSTLY_TOTAL\"]);\n  },\n  _applyMostlyTotalChange: function () {\n    var that = this;\n\n    that._setupCodomain();\n\n    that._setupAnimationSettings();\n\n    that._setupDefaultFormat();\n\n    that._change([\"LAYOUT\"]);\n  },\n  _setupAnimationSettings: function () {\n    var that = this;\n    var option = that.option(\"animation\");\n    that._animationSettings = null;\n\n    if (void 0 === option || option) {\n      option = _extend({\n        enabled: true,\n        duration: 1e3,\n        easing: \"easeOutCubic\"\n      }, option);\n\n      if (option.enabled && option.duration > 0) {\n        that._animationSettings = {\n          duration: _Number(option.duration),\n          easing: option.easing\n        };\n      }\n    }\n\n    that._containerBackgroundColor = that.option(\"containerBackgroundColor\") || that._themeManager.theme().containerBackgroundColor;\n  },\n  _setupDefaultFormat: function () {\n    var domain = this._translator.getDomain();\n\n    this._defaultFormatOptions = (0, _utils.getAppropriateFormat)(domain[0], domain[1], this._getApproximateScreenRange());\n  },\n  _setupDomainCore: null,\n  _calculateSize: null,\n  _cleanContent: null,\n  _renderContent: null,\n  _setupCodomain: null,\n  _getApproximateScreenRange: null,\n  _factory: {\n    createTranslator: function () {\n      return new _translator1d.Translator1D();\n    },\n    createTracker: function (parameters) {\n      return new _tracker.default(parameters);\n    }\n  }\n});\n\nexports.dxBaseGauge = dxBaseGauge;\n\nvar formatValue = function (value, options, extra) {\n  options = options || {};\n\n  var text = _format(value, options.format);\n\n  var formatObject;\n\n  if (\"function\" === typeof options.customizeText) {\n    formatObject = _extend({\n      value: value,\n      valueText: text\n    }, extra);\n    return String(options.customizeText.call(formatObject, formatObject));\n  }\n\n  return text;\n};\n\nexports.formatValue = formatValue;\n\nvar getSampleText = function (translator, options) {\n  var text1 = formatValue(translator.getDomainStart(), options);\n  var text2 = formatValue(translator.getDomainEnd(), options);\n  return text1.length >= text2.length ? text1 : text2;\n};\n\nexports.getSampleText = getSampleText;\n\nfunction compareArrays(array1, array2) {\n  return array1 && array2 && array1.length === array2.length && compareArraysElements(array1, array2);\n}\n\nfunction compareArraysElements(array1, array2) {\n  var i;\n  var ii = array1.length;\n  var array1ValueIsNaN;\n  var array2ValueIsNaN;\n\n  for (i = 0; i < ii; ++i) {\n    array1ValueIsNaN = array1[i] !== array1[i];\n    array2ValueIsNaN = array2[i] !== array2[i];\n\n    if (array1ValueIsNaN && array2ValueIsNaN) {\n      continue;\n    }\n\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ndxBaseGauge.addPlugin(_export.plugin);\ndxBaseGauge.addPlugin(_title.plugin);\ndxBaseGauge.addPlugin(_tooltip.plugin);\ndxBaseGauge.addPlugin(_loading_indicator.plugin);\nvar _setTooltipOptions = dxBaseGauge.prototype._setTooltipOptions;\n\ndxBaseGauge.prototype._setTooltipOptions = function () {\n  _setTooltipOptions.apply(this, arguments);\n\n  this._tracker && this._tracker.setTooltipState(this._tooltip.isEnabled());\n};","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/viz/gauges/base_gauge.js"],"names":["exports","compareArrays","getSampleText","formatValue","dxBaseGauge","_utils","require","_extend2","_translator1d","_base_widget","_interopRequireDefault","_theme_manager","_tracker","_format_helper","_export","_title","_tooltip","_loading_indicator","obj","__esModule","_Number","Number","_extend","extend","_format","default","format","inherit","_rootClassPrefix","_themeSection","_createThemeManager","ThemeManager","_getThemeManagerOptions","_initCore","that","root","_renderer","_valueChangingLocker","_translator","_factory","createTranslator","createTracker","renderer","container","_setTrackerCallbacks","_beginValueChanging","_resetIsReady","_onBeginUpdate","_endValueChanging","_drawn","tooltip","setCallbacks","target","info","callback","tooltipParameters","getTooltipParameters","offset","getRootOffset","formatObject","value","valueText","color","show","x","left","y","top","hide","_dispose","_cleanCore","callBase","apply","arguments","_disposeCore","_themeManager","dispose","deactivate","_cleanContent","_renderCore","_isValidDomain","_renderContent","setTooltipState","isEnabled","activate","_noAnimation","_applyChanges","_resizing","_setContentSize","_changes","count","_applySize","rect","_innerRect","right","bottom","layoutCache","_layout","_cache","_initialChanges","_themeDependentChanges","_optionChangesMap","subtitle","indicator","geometry","animation","startValue","endValue","_optionChangesOrder","_change_DOMAIN","_setupDomain","_change_MOSTLY_TOTAL","_applyMostlyTotalChange","_setupDomainCore","isFinite","getDomain","_incidentOccurred","_change","_setupCodomain","_setupAnimationSettings","_setupDefaultFormat","option","_animationSettings","enabled","duration","easing","_containerBackgroundColor","theme","containerBackgroundColor","domain","_defaultFormatOptions","getAppropriateFormat","_getApproximateScreenRange","_calculateSize","Translator1D","parameters","options","extra","text","customizeText","String","call","translator","text1","getDomainStart","text2","getDomainEnd","length","array1","array2","compareArraysElements","i","ii","array1ValueIsNaN","array2ValueIsNaN","addPlugin","plugin","_setTooltipOptions","prototype"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/gauges/base_gauge.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.compareArrays = compareArrays;\r\nexports.getSampleText = exports.formatValue = exports.dxBaseGauge = void 0;\r\nvar _utils = require(\"../core/utils\");\r\nvar _extend2 = require(\"../../core/utils/extend\");\r\nvar _translator1d = require(\"../translators/translator1d\");\r\nvar _base_widget = _interopRequireDefault(require(\"../core/base_widget\"));\r\nvar _theme_manager = _interopRequireDefault(require(\"./theme_manager\"));\r\nvar _tracker = _interopRequireDefault(require(\"./tracker\"));\r\nvar _format_helper = _interopRequireDefault(require(\"../../format_helper\"));\r\nvar _export = require(\"../core/export\");\r\nvar _title = require(\"../core/title\");\r\nvar _tooltip = require(\"../core/tooltip\");\r\nvar _loading_indicator = require(\"../core/loading_indicator\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar _Number = Number;\r\nvar _extend = _extend2.extend;\r\nvar _format = _format_helper.default.format;\r\nvar dxBaseGauge = _base_widget.default.inherit({\r\n    _rootClassPrefix: \"dxg\",\r\n    _themeSection: \"gauge\",\r\n    _createThemeManager: function() {\r\n        return new _theme_manager.default.ThemeManager(this._getThemeManagerOptions())\r\n    },\r\n    _initCore: function() {\r\n        var that = this;\r\n        var root = that._renderer.root;\r\n        that._valueChangingLocker = 0;\r\n        that._translator = that._factory.createTranslator();\r\n        that._tracker = that._factory.createTracker({\r\n            renderer: that._renderer,\r\n            container: root\r\n        });\r\n        that._setTrackerCallbacks()\r\n    },\r\n    _beginValueChanging: function() {\r\n        this._resetIsReady();\r\n        this._onBeginUpdate();\r\n        ++this._valueChangingLocker\r\n    },\r\n    _endValueChanging: function() {\r\n        if (0 === --this._valueChangingLocker) {\r\n            this._drawn()\r\n        }\r\n    },\r\n    _setTrackerCallbacks: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var tooltip = that._tooltip;\r\n        that._tracker.setCallbacks({\r\n            \"tooltip-show\": function(target, info, callback) {\r\n                var tooltipParameters = target.getTooltipParameters();\r\n                var offset = renderer.getRootOffset();\r\n                var formatObject = _extend({\r\n                    value: tooltipParameters.value,\r\n                    valueText: tooltip.formatValue(tooltipParameters.value),\r\n                    color: tooltipParameters.color\r\n                }, info);\r\n                return tooltip.show(formatObject, {\r\n                    x: tooltipParameters.x + offset.left,\r\n                    y: tooltipParameters.y + offset.top,\r\n                    offset: tooltipParameters.offset\r\n                }, {\r\n                    target: info\r\n                }, void 0, callback)\r\n            },\r\n            \"tooltip-hide\": function() {\r\n                return tooltip.hide()\r\n            }\r\n        })\r\n    },\r\n    _dispose: function() {\r\n        this._cleanCore();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _disposeCore: function() {\r\n        var that = this;\r\n        that._themeManager.dispose();\r\n        that._tracker.dispose();\r\n        that._translator = that._tracker = null\r\n    },\r\n    _cleanCore: function() {\r\n        var that = this;\r\n        that._tracker.deactivate();\r\n        that._cleanContent()\r\n    },\r\n    _renderCore: function() {\r\n        var that = this;\r\n        if (!that._isValidDomain) {\r\n            return\r\n        }\r\n        that._renderContent();\r\n        that._tracker.setTooltipState(that._tooltip.isEnabled());\r\n        that._tracker.activate();\r\n        that._noAnimation = false\r\n    },\r\n    _applyChanges: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._resizing = this._noAnimation = false\r\n    },\r\n    _setContentSize: function() {\r\n        var that = this;\r\n        that._resizing = that._noAnimation = 2 === that._changes.count();\r\n        that.callBase.apply(that, arguments)\r\n    },\r\n    _applySize: function(rect) {\r\n        var that = this;\r\n        that._innerRect = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            right: rect[2],\r\n            bottom: rect[3]\r\n        };\r\n        var layoutCache = that._layout._cache;\r\n        that._cleanCore();\r\n        that._renderCore();\r\n        that._layout._cache = that._layout._cache || layoutCache;\r\n        return [rect[0], that._innerRect.top, rect[2], that._innerRect.bottom]\r\n    },\r\n    _initialChanges: [\"DOMAIN\"],\r\n    _themeDependentChanges: [\"DOMAIN\"],\r\n    _optionChangesMap: {\r\n        subtitle: \"MOSTLY_TOTAL\",\r\n        indicator: \"MOSTLY_TOTAL\",\r\n        geometry: \"MOSTLY_TOTAL\",\r\n        animation: \"MOSTLY_TOTAL\",\r\n        startValue: \"DOMAIN\",\r\n        endValue: \"DOMAIN\"\r\n    },\r\n    _optionChangesOrder: [\"DOMAIN\", \"MOSTLY_TOTAL\"],\r\n    _change_DOMAIN: function() {\r\n        this._setupDomain()\r\n    },\r\n    _change_MOSTLY_TOTAL: function() {\r\n        this._applyMostlyTotalChange()\r\n    },\r\n    _setupDomain: function() {\r\n        var that = this;\r\n        that._setupDomainCore();\r\n        that._isValidDomain = isFinite(1 / (that._translator.getDomain()[1] - that._translator.getDomain()[0]));\r\n        if (!that._isValidDomain) {\r\n            that._incidentOccurred(\"W2301\")\r\n        }\r\n        that._change([\"MOSTLY_TOTAL\"])\r\n    },\r\n    _applyMostlyTotalChange: function() {\r\n        var that = this;\r\n        that._setupCodomain();\r\n        that._setupAnimationSettings();\r\n        that._setupDefaultFormat();\r\n        that._change([\"LAYOUT\"])\r\n    },\r\n    _setupAnimationSettings: function() {\r\n        var that = this;\r\n        var option = that.option(\"animation\");\r\n        that._animationSettings = null;\r\n        if (void 0 === option || option) {\r\n            option = _extend({\r\n                enabled: true,\r\n                duration: 1e3,\r\n                easing: \"easeOutCubic\"\r\n            }, option);\r\n            if (option.enabled && option.duration > 0) {\r\n                that._animationSettings = {\r\n                    duration: _Number(option.duration),\r\n                    easing: option.easing\r\n                }\r\n            }\r\n        }\r\n        that._containerBackgroundColor = that.option(\"containerBackgroundColor\") || that._themeManager.theme().containerBackgroundColor\r\n    },\r\n    _setupDefaultFormat: function() {\r\n        var domain = this._translator.getDomain();\r\n        this._defaultFormatOptions = (0, _utils.getAppropriateFormat)(domain[0], domain[1], this._getApproximateScreenRange())\r\n    },\r\n    _setupDomainCore: null,\r\n    _calculateSize: null,\r\n    _cleanContent: null,\r\n    _renderContent: null,\r\n    _setupCodomain: null,\r\n    _getApproximateScreenRange: null,\r\n    _factory: {\r\n        createTranslator: function() {\r\n            return new _translator1d.Translator1D\r\n        },\r\n        createTracker: function(parameters) {\r\n            return new _tracker.default(parameters)\r\n        }\r\n    }\r\n});\r\nexports.dxBaseGauge = dxBaseGauge;\r\nvar formatValue = function(value, options, extra) {\r\n    options = options || {};\r\n    var text = _format(value, options.format);\r\n    var formatObject;\r\n    if (\"function\" === typeof options.customizeText) {\r\n        formatObject = _extend({\r\n            value: value,\r\n            valueText: text\r\n        }, extra);\r\n        return String(options.customizeText.call(formatObject, formatObject))\r\n    }\r\n    return text\r\n};\r\nexports.formatValue = formatValue;\r\nvar getSampleText = function(translator, options) {\r\n    var text1 = formatValue(translator.getDomainStart(), options);\r\n    var text2 = formatValue(translator.getDomainEnd(), options);\r\n    return text1.length >= text2.length ? text1 : text2\r\n};\r\nexports.getSampleText = getSampleText;\r\n\r\nfunction compareArrays(array1, array2) {\r\n    return array1 && array2 && array1.length === array2.length && compareArraysElements(array1, array2)\r\n}\r\n\r\nfunction compareArraysElements(array1, array2) {\r\n    var i;\r\n    var ii = array1.length;\r\n    var array1ValueIsNaN;\r\n    var array2ValueIsNaN;\r\n    for (i = 0; i < ii; ++i) {\r\n        array1ValueIsNaN = array1[i] !== array1[i];\r\n        array2ValueIsNaN = array2[i] !== array2[i];\r\n        if (array1ValueIsNaN && array2ValueIsNaN) {\r\n            continue\r\n        }\r\n        if (array1[i] !== array2[i]) {\r\n            return false\r\n        }\r\n    }\r\n    return true\r\n}\r\ndxBaseGauge.addPlugin(_export.plugin);\r\ndxBaseGauge.addPlugin(_title.plugin);\r\ndxBaseGauge.addPlugin(_tooltip.plugin);\r\ndxBaseGauge.addPlugin(_loading_indicator.plugin);\r\nvar _setTooltipOptions = dxBaseGauge.prototype._setTooltipOptions;\r\ndxBaseGauge.prototype._setTooltipOptions = function() {\r\n    _setTooltipOptions.apply(this, arguments);\r\n    this._tracker && this._tracker.setTooltipState(this._tooltip.isEnabled())\r\n};\r\n"]},"metadata":{},"sourceType":"script"}