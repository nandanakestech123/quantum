{"ast":null,"code":"import _objectSpread from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import\"./style.scss\";import{getJobtitle,getCommonApi}from\"redux/actions/common\";import{getStaffPlus,deleteStaffPlus}from\"redux/actions/staffPlus\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import _ from\"lodash\";import{Link}from\"react-router-dom\";import{Navigation}from\"react-minimal-side-navigation\";import{withTranslation}from\"react-i18next\";export var ListStaffPlusClass=/*#__PURE__*/function(_React$Component){_inherits(ListStaffPlusClass,_React$Component);var _super=_createSuper(ListStaffPlusClass);function ListStaffPlusClass(){var _this;_classCallCheck(this,ListStaffPlusClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Status\"},{label:\"Staff Name\"},{label:\"Phone\"},{label:\"Staff ID\"},{label:\"Specialist\"},{label:\"Home site\"},{label:\"Current site\"}// { label: \"\" },\n],originalStaffList:[],staffList:[],filter:\"all\",locationOption:[],levelList:[],jobOption:[],pageMeta:{},selectedMenu:\"/active\",active:false,currentIndex:-1,isLoading:false,isMounted:true,search:\"\"};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.updateState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleFilterChange=function(){var filterOption=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";_this.state.selectedMenu=filterOption;var splitted=filterOption.split(\"/\");var filter=_this.state.filter;console.log(filterOption);if(splitted.length==2){switch(splitted[1]){case\"all\":filter=\"all\";break;case\"withSecurityAccount\":filter=\"is_login=True\";break;case\"withoutSecurityAccount\":filter=\"is_login=False\";break;case\"active\":filter=\"emp_isactive=True\";break;case\"inactive\":filter=\"emp_isactive=False\";break;default:filter=\"\";}}else if(splitted.length==3){switch(splitted[1]){case\"emp_lvl\":filter=\"LEVEL_ItmIDid=\".concat(splitted[2]);break;case\"sitelist\":filter=\"Site_Codeid=\".concat(splitted[2]);break;case\"operation\":filter=\"EMP_TYPEid=\".concat(splitted[2]);break;default:filter=\"\";}}if(_this.state.filter!=filter&&filter!==\"\"){_this.state.filter=filter;_this.queryHandler({});}};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.queryHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _staffDetails$meta;var search,_data$page,page,_data$limit,limit,staffDetails,_this$state,staffList,pageMeta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateState({isLoading:true});search=_this.state.search;_data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit;_context.next=5;return _this.props.getStaffPlus(\"?page=\".concat(page,\"&limit=\").concat(limit).concat(_this.state.filter===\"all\"?\"\":\"&\".concat(_this.state.filter),\"&search=\").concat(search));case 5:staffDetails=_this.props.staffDetails;_this$state=_this.state,staffList=_this$state.staffList,pageMeta=_this$state.pageMeta;staffList=staffDetails.dataList;pageMeta=(_staffDetails$meta=staffDetails.meta)===null||_staffDetails$meta===void 0?void 0:_staffDetails$meta.pagination;_this.updateState({staffList:staffList,originalStaffList:staffList,pageMeta:pageMeta,isLoading:false});case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(page){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.queryHandler(page);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleSearch=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event){var searchString;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// event.persist();\nsearchString=event.target.value;_context4.next=3;return _this.setState({search:searchString,visible:true,page:1});case 3:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.queryHandler({});case 1:case\"end\":return _context3.stop();}}},_callee3);})),500);}_this.debouncedFn();case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.getDatafromStore=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(type){var jobtitleList,jobOption,_iterator,_step,key;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:jobtitleList=_this.props.jobtitleList;jobOption=_this.state.jobOption;if(type===\"jobtitle\"){_iterator=_createForOfIteratorHelper(jobtitleList);try{for(_iterator.s();!(_step=_iterator.n()).done;){key=_step.value;jobOption.push({title:key.level_desc,itemId:\"/operation/\"+key.id});}}catch(err){_iterator.e(err);}finally{_iterator.f();}}_context5.next=5;return _this.updateState({jobOption:jobOption});case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref5.apply(this,arguments);};}();_this.handleDeleteStaff=function(id){_this.props.deleteStaffPlus(\"\".concat(id,\"/\")).then(function(res){return _this.queryHandler({});});};return _this;}_createClass(ListStaffPlusClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){var queryParams=new URLSearchParams(window.location.search);var filter=queryParams.get(\"filter\");if(filter){this.state.selectedMenu=\"/\"+filter;this.handleFilterChange(this.state.selectedMenu);this.updateState({});}else this.queryHandler({});}},{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.props.getCommonApi(\"branchlist/\").then(function(res){var locationOption=_this2.state.locationOption;var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;locationOption.push({title:key.itemsite_desc,itemId:\"/sitelist/\"+key.id});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this2.updateState({locationOption:locationOption});});// level option api\nthis.props.getCommonApi(\"securities/\").then(function(res){var levelList=_this2.state.levelList;var _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;levelList.push({itemId:\"/emp_lvl/\"+key.id,title:key.level_name});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this2.updateState({levelList:levelList});});// jobtitle option api\nthis.props.getJobtitle().then(function(){_this2.getDatafromStore(\"jobtitle\");});}// popup open/close\n},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,headerDetails=_this$state2.headerDetails,pageMeta=_this$state2.pageMeta,currentIndex=_this$state2.currentIndex,locationOption=_this$state2.locationOption,levelList=_this$state2.levelList,jobOption=_this$state2.jobOption,staffList=_this$state2.staffList,originalStaffList=_this$state2.originalStaffList,isLoading=_this$state2.isLoading,selectedMenu=_this$state2.selectedMenu;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/schedule\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Schedule\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/authorization\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Authorization\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/skills\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Skill Listing\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 col-lg-3 mb-4\",style:this.state.isLoading?{pointerEvents:\"none\",opacity:0.2}:{}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 p-0\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"Filters\"))),/*#__PURE__*/React.createElement(Navigation,{activeItemId:selectedMenu,onSelect:function onSelect(_ref6){var itemId=_ref6.itemId;return _this3.handleFilterChange(itemId);},items:[{title:t(\"Show Active\"),itemId:\"/active\"},{title:t(\"Show Inactive\"),itemId:\"/inactive\"},{title:t(\"By Emp Level\"),itemId:\"/emplvl\",subNav:levelList.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})},{title:t(\"With Security Account\"),itemId:\"/withSecurityAccount\"},{title:t(\"Without Security Account\"),itemId:\"/withoutSecurityAccount\"},{title:t(\"By Site List\"),itemId:\"/sitelist\",subNav:locationOption.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})},{title:t(\"By Operation\"),itemId:\"/operation\",subNav:jobOption.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})},{title:t(\"Show All\"),itemId:\"/all\"}]})),/*#__PURE__*/React.createElement(\"div\",{className:\"staffList-container col-xl\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"h3\",null,t(\"List of Staffs\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-8\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Staff\",onChange:this.handleSearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-4 ml-1 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Staff\",onClick:function onClick(){return _this3.props.history.push(\"/admin/staffplus/add\");}}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta,sortData:originalStaffList,onSort:function onSort(staffList){return _this3.updateState({staffList:staffList});}},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))))):staffList.length>0?staffList.map(function(_ref7,index){var id=_ref7.id,emp_name=_ref7.emp_name,emp_phone1=_ref7.emp_phone1,emp_code=_ref7.emp_code,services=_ref7.services,site_code=_ref7.site_code,defaultsitecode=_ref7.defaultsitecode,status=_ref7.status;return/*#__PURE__*/React.createElement(\"tr\",{key:index,onClick:function onClick(){return _this3.props.history.push(\"/admin/staffPlus/\".concat(id,\"/staffDetails\"));}},/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(status===\"available\"?\"available\":\"not-available\")})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_phone1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},emp_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},services?services[0]:\"\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},defaultsitecode)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},site_code)));}):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"palette\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail\"},t(\"Available today\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"color-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color not-available\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail\"},t(\"Unavailable today\"))))))))));}}]);return ListStaffPlusClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{jobtitleList:state.common.jobtitleList,staffDetails:state.staffPlus.staffPlusDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getStaffPlus:getStaffPlus,deleteStaffPlus:deleteStaffPlus,getJobtitle:getJobtitle,getCommonApi:getCommonApi},dispatch);};export var ListStaffPlus=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ListStaffPlusClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/StaffPlus/ListStaffPlus/index.js"],"names":["React","NormalButton","InputSearch","TableWrapper","getJobtitle","getCommonApi","getStaffPlus","deleteStaffPlus","connect","bindActionCreators","_","Link","Navigation","withTranslation","ListStaffPlusClass","state","headerDetails","label","originalStaffList","staffList","filter","locationOption","levelList","jobOption","pageMeta","selectedMenu","active","currentIndex","isLoading","isMounted","search","updateState","data","setState","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","handleFilterChange","filterOption","splitted","split","console","log","length","queryHandler","e","node","contains","target","page","limit","props","staffDetails","dataList","meta","pagination","handlePagination","handleSearch","event","searchString","value","visible","debouncedFn","debounce","getDatafromStore","type","jobtitleList","push","title","level_desc","itemId","id","handleDeleteStaff","then","res","queryParams","URLSearchParams","window","location","get","itemsite_desc","level_name","t","pointerEvents","opacity","subNav","map","history","index","emp_name","emp_phone1","emp_code","services","site_code","defaultsitecode","status","Component","mapStateToProps","common","staffPlus","staffPlusDetail","mapDispatchToProps","dispatch","ListStaffPlus"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport \"./style.scss\";\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\nimport { getStaffPlus, deleteStaffPlus } from \"redux/actions/staffPlus\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nimport { Link } from \"react-router-dom\";\nimport { Navigation } from \"react-minimal-side-navigation\";\nimport { withTranslation } from \"react-i18next\";\n\nexport class ListStaffPlusClass extends React.Component {\n  state = {\n    headerDetails: [\n      { label: \"Status\" },\n      { label: \"Staff Name\" },\n      { label: \"Phone\" },\n      { label: \"Staff ID\" },\n      { label: \"Specialist\" },\n      { label: \"Home site\" },\n      { label: \"Current site\" },\n      // { label: \"\" },\n    ],\n    originalStaffList: [],\n    staffList: [],\n    filter: \"all\",\n    locationOption: [],\n    levelList: [],\n    jobOption: [],\n    pageMeta: {},\n    selectedMenu: \"/active\",\n    active: false,\n    currentIndex: -1,\n    isLoading: false,\n    isMounted: true,\n    search: \"\",\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = data => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount() {\n    const queryParams = new URLSearchParams(window.location.search);\n    const filter = queryParams.get(\"filter\");\n    if (filter) {\n      this.state.selectedMenu = \"/\" + filter;\n      this.handleFilterChange(this.state.selectedMenu);\n      this.updateState({});\n    } else this.queryHandler({});\n  }\n\n  componentWillMount() {\n    this.props.getCommonApi(\"branchlist/\").then(res => {\n      let { locationOption } = this.state;\n      for (let key of res.data) {\n        locationOption.push({\n          title: key.itemsite_desc,\n          itemId: \"/sitelist/\" + key.id,\n        });\n      }\n      this.updateState({ locationOption });\n    });\n\n    // level option api\n    this.props.getCommonApi(\"securities/\").then(res => {\n      let { levelList } = this.state;\n      for (let key of res.data) {\n        levelList.push({ itemId: \"/emp_lvl/\" + key.id, title: key.level_name });\n      }\n      this.updateState({ levelList });\n    });\n\n    // jobtitle option api\n    this.props.getJobtitle().then(() => {\n      this.getDatafromStore(\"jobtitle\");\n    });\n  }\n\n  // popup open/close\n  handleClick = key => {\n    if (!this.state.active) {\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\n    }\n\n    this.updateState(prevState => ({\n      active: !prevState.active,\n      currentIndex: key,\n    }));\n  };\n\n  handleFilterChange = (filterOption = \"\") => {\n    this.state.selectedMenu = filterOption;\n    var splitted = filterOption.split(\"/\");\n    var filter = this.state.filter;\n    console.log(filterOption);\n    if (splitted.length == 2) {\n      switch (splitted[1]) {\n        case \"all\":\n          filter = \"all\";\n          break;\n        case \"withSecurityAccount\":\n          filter = \"is_login=True\";\n          break;\n        case \"withoutSecurityAccount\":\n          filter = \"is_login=False\";\n          break;\n        case \"active\":\n          filter = \"emp_isactive=True\";\n          break;\n        case \"inactive\":\n          filter = \"emp_isactive=False\";\n          break;\n        default:\n          filter = \"\";\n      }\n    } else if (splitted.length == 3) {\n      switch (splitted[1]) {\n        case \"emp_lvl\":\n          filter = `LEVEL_ItmIDid=${splitted[2]}`;\n          break;\n        case \"sitelist\":\n          filter = `Site_Codeid=${splitted[2]}`;\n          break;\n        case \"operation\":\n          filter = `EMP_TYPEid=${splitted[2]}`;\n          break;\n        default:\n          filter = \"\";\n      }\n    }\n    if (this.state.filter != filter && filter !== \"\") {\n      this.state.filter = filter;\n      this.queryHandler({});\n    }\n  };\n\n  // while clicking popup close at outside click\n  handleOutsideClick = e => {\n    if (this.node != null) {\n      if (this.node.contains(e.target)) {\n        return;\n      }\n    }\n    this.handleClick();\n  };\n\n  // api call for staff\n  queryHandler = async data => {\n    this.updateState({ isLoading: true });\n    let { search } = this.state;\n    let { page = 1, limit = 10 } = data;\n    await this.props.getStaffPlus(\n      `?page=${page}&limit=${limit}${\n        this.state.filter === \"all\" ? \"\" : `&${this.state.filter}`\n      }&search=${search}`\n    );\n    let { staffDetails } = this.props;\n    let { staffList, pageMeta } = this.state;\n    staffList = staffDetails.dataList;\n    pageMeta = staffDetails.meta?.pagination;\n    this.updateState({\n      staffList,\n      originalStaffList: staffList,\n      pageMeta,\n      isLoading: false,\n    });\n  };\n\n  // pagination\n  handlePagination = async page => {\n    this.queryHandler(page);\n  };\n\n  // seach change with api call\n  handleSearch = async event => {\n    // event.persist();\n    let searchString = event.target.value;\n    await this.setState({ search: searchString, visible: true, page: 1 });\n    if (!this.debouncedFn) {\n      this.debouncedFn = _.debounce(async () => {\n        this.queryHandler({});\n      }, 500);\n    }\n    this.debouncedFn();\n  };\n\n  getDatafromStore = async type => {\n    let { jobtitleList } = this.props;\n    let { jobOption } = this.state;\n    if (type === \"jobtitle\") {\n      for (let key of jobtitleList) {\n        jobOption.push({\n          title: key.level_desc,\n          itemId: \"/operation/\" + key.id,\n        });\n      }\n    }\n    await this.updateState({\n      jobOption,\n    });\n  };\n\n  // delete api call for staff\n  handleDeleteStaff = id => {\n    this.props.deleteStaffPlus(`${id}/`).then(res => this.queryHandler({}));\n  };\n\n  render() {\n    let {\n      headerDetails,\n      pageMeta,\n      currentIndex,\n      locationOption,\n      levelList,\n      jobOption,\n      staffList,\n      originalStaffList,\n      isLoading,\n      selectedMenu,\n    } = this.state;\n    let { t } = this.props;\n\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"row mb-4\">\n          <div className=\"col-md-4 col-lg-2 mb-2\">\n            <Link to=\"/admin/staffplus/schedule\">\n              <NormalButton\n                normal={true}\n                className=\"col-12 fs-15 float-right\"\n                label=\"Schedule\"\n              />\n            </Link>\n          </div>\n          <div className=\"col-md-4 col-lg-2 mb-2\">\n            <Link to=\"/admin/staffplus/authorization\">\n              <NormalButton\n                normal={true}\n                className=\"col-12 fs-15 float-right\"\n                label=\"Authorization\"\n              />\n            </Link>\n          </div>\n          <div className=\"col-md-4 col-lg-2 mb-2\">\n            <Link to=\"/admin/staffplus/skills\">\n              <NormalButton\n                normal={true}\n                className=\"col-12 fs-15 float-right\"\n                label=\"Skill Listing\"\n              />\n            </Link>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div\n            className=\"col-sm-12 col-lg-3 mb-4\"\n            style={\n              this.state.isLoading\n                ? { pointerEvents: \"none\", opacity: 0.2 }\n                : {}\n            }\n          >\n            <div className=\"col-md-4 p-0\">\n              <h4>{t(\"Filters\")}</h4>\n            </div>\n            <Navigation\n              activeItemId={selectedMenu}\n              onSelect={({ itemId }) => this.handleFilterChange(itemId)}\n              items={[\n                {\n                  title: t(\"Show Active\"),\n                  itemId: \"/active\",\n                },\n                {\n                  title: t(\"Show Inactive\"),\n                  itemId: \"/inactive\",\n                },\n                {\n                  title: t(\"By Emp Level\"),\n                  itemId: \"/emplvl\",\n                  subNav: levelList.map(e => {\n                    return { ...e, title: t(e.title) };\n                  }),\n                },\n                {\n                  title: t(\"With Security Account\"),\n                  itemId: \"/withSecurityAccount\",\n                },\n                {\n                  title: t(\"Without Security Account\"),\n                  itemId: \"/withoutSecurityAccount\",\n                },\n                {\n                  title: t(\"By Site List\"),\n                  itemId: \"/sitelist\",\n                  subNav: locationOption.map(e => {\n                    return { ...e, title: t(e.title) };\n                  }),\n                },\n                {\n                  title: t(\"By Operation\"),\n                  itemId: \"/operation\",\n                  subNav: jobOption.map(e => {\n                    return { ...e, title: t(e.title) };\n                  }),\n                },\n                {\n                  title: t(\"Show All\"),\n                  itemId: \"/all\",\n                },\n              ]}\n            />\n          </div>\n          <div className=\"staffList-container col-xl\">\n            <div className=\"row align-items-center\">\n              <div className=\"col-md-4\">\n                <h3>{t(\"List of Staffs\")}</h3>\n              </div>\n              <div className=\"col-md-8\">\n                <div className=\"d-flex justify-content-between\">\n                  <div className=\"w-100 col-8\">\n                    <InputSearch\n                      className=\"\"\n                      placeholder=\"Search Staff\"\n                      onChange={this.handleSearch}\n                    />\n                  </div>\n                  <div className=\"w-100 col-4 ml-1 p-0\">\n                    <NormalButton\n                      mainbg={true}\n                      className=\"col-12 fs-15 float-right\"\n                      label=\"Add Staff\"\n                      onClick={() =>\n                        this.props.history.push(\"/admin/staffplus/add\")\n                      }\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                <div className=\"table-container\">\n                  <TableWrapper\n                    headerDetails={headerDetails}\n                    queryHandler={this.handlePagination}\n                    pageMeta={pageMeta}\n                    sortData={originalStaffList}\n                    onSort={staffList => this.updateState({ staffList })}\n                  >\n                    {isLoading ? (\n                      <tr>\n                        <td colSpan=\"7\">\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                            <div class=\"spinner-border\" role=\"status\">\n                              <span class=\"sr-only\">Loading...</span>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                    ) : staffList.length > 0 ? (\n                      staffList.map(\n                        (\n                          {\n                            id,\n                            emp_name,\n                            emp_phone1,\n                            emp_code,\n                            services,\n                            site_code,\n                            defaultsitecode,\n                            status,\n                          },\n                          index\n                        ) => {\n                          return (\n                            <tr\n                              key={index}\n                              onClick={() =>\n                                this.props.history.push(\n                                  `/admin/staffPlus/${id}/staffDetails`\n                                )\n                              }\n                            >\n                              <td className=\"position-relative status-type\">\n                                <span\n                                  className={`${\n                                    status === \"available\"\n                                      ? \"available\"\n                                      : \"not-available\"\n                                  }`}\n                                ></span>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {emp_name}\n                                </div>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {emp_phone1}\n                                </div>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {emp_code}\n                                </div>\n                              </td>\n                              {/* <td><div className=\"d-flex align-items-center justify-content-center\"></div></td> */}\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {services ? services[0] : \"\"}\n                                </div>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {defaultsitecode}\n                                </div>\n                              </td>\n                              <td>\n                                <div className=\"d-flex align-items-center justify-content-center\">\n                                  {site_code}\n                                </div>\n                              </td>\n                              {/* <td\n                                className=\"position-relative\"\n                                ref={node => {\n                                  this.node = node;\n                                }}\n                                onClick={() => this.handleClick(index)}\n                              >\n                                {currentIndex === index ? (\n                                  <>\n                                    <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\n                                      <i className=\"icon-more\"></i>\n                                    </div>\n                                    <div className=\"option card\">\n                                      <div\n                                        className=\"d-flex align-items-center fs-14 pt-3\"\n                                        onClick={() =>\n                                          this.props.history.push(\n                                            `/admin/staffPlus/${id}/staffDetails`\n                                          )\n                                        }\n                                      >\n                                        <span className=\"icon-eye-grey px-3\"></span>\n                                        {t(\"View\")}\n                                      </div>\n                                      <div\n                                        className=\"d-flex align-items-center fs-14\"\n                                        onClick={() =>\n                                          this.props.history.push(\n                                            `/admin/staffPlus/${id}/editStaff`\n                                          )\n                                        }\n                                      >\n                                        <span className=\"icon-edit px-3\"></span>\n                                        {t(\"Edit\")}\n                                      </div>\n                                      <div\n                                        className=\"d-flex align-items-center fs-14 pb-3\"\n                                        onClick={() =>\n                                          this.handleDeleteStaff(id)\n                                        }\n                                      >\n                                        <span className=\"icon-delete px-3\"></span>\n                                        {t(\"Delete\")}\n                                      </div>\n                                    </div>\n                                  </>\n                                ) : (\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\n                                    <i className=\"icon-more text-grey\"></i>\n                                  </div>\n                                )}\n                              </td> */}\n                            </tr>\n                          );\n                        }\n                      )\n                    ) : (\n                      \"\"\n                    )}\n                  </TableWrapper>\n                  <div className=\"palette\">\n                    <div className=\"color-detail\">\n                      <div className=\"color\"></div>\n                      <div className=\"detail\">{t(\"Available today\")}</div>\n                    </div>\n                    <div className=\"color-detail\">\n                      <div className=\"color not-available\"></div>\n                      <div className=\"detail\">{t(\"Unavailable today\")}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  jobtitleList: state.common.jobtitleList,\n  staffDetails: state.staffPlus.staffPlusDetail,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      getStaffPlus,\n      deleteStaffPlus,\n      getJobtitle,\n      getCommonApi,\n    },\n    dispatch\n  );\n};\n\nexport const ListStaffPlus = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(ListStaffPlusClass)\n);\n"]},"metadata":{},"sourceType":"module"}