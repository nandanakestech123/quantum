{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import{Link}from\"react-router-dom\";import\"./style.scss\";import{getCustomerPlus}from\"redux/actions/customerPlus\";import{updateForm,getCommonApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import _ from\"lodash\";import{Navigation}from\"react-minimal-side-navigation\";import{withTranslation}from\"react-i18next\";import birthdayIcon from\"assets/images/app-icons/3.png\";import{dateFormat}from\"service/helperFunctions\";export var ListCustomerPlusClass=/*#__PURE__*/function(_React$Component){_inherits(ListCustomerPlusClass,_React$Component);var _super=_createSuper(ListCustomerPlusClass);function ListCustomerPlusClass(){var _this;_classCallCheck(this,ListCustomerPlusClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"\",maxWidth:\"10px\"},{label:\"Customer Code\",sortKey:\"customerCode\"},{label:\"Referance Code\",sortKey:\"referenceCode\",enabled:true},{label:\"Salutation\",sortKey:\"salutation\",enabled:true},{label:\"Customer Name\",sortKey:\"customerName\",enabled:true},{label:\"Mobile Phone\",sortKey:\"mobilePhone\",enabled:true},{label:\"Birthday\",sortKey:\"birthday\",enabled:true},{label:\"Customer Class\",sortKey:\"customerClass\",enabled:true},{label:\"\"}],customerList:[],search:\"\",meta:{},active:false,currentIndex:-1,isLoading:true,isExportLoading:false,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.componentDidMount=function(){_this.getCustomerPlus({});};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.updateState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.getCustomerPlus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var search,_data$page,page,_data$limit,limit;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateState({isLoading:true});search=_this.state.search;_data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit;_context.next=5;return _this.props.getCustomerPlus(\"?page=\".concat(page,\"&limit=\").concat(limit,\"&search=\").concat(search)).then(function(res){var _data$meta;var data=res.data;console.log(data);//  let { customerDetails } = this.props;\n//  let { customerDetails } = this.props;\n_this.updateState({customerList:data.dataList,meta:(_data$meta=data.meta)===null||_data$meta===void 0?void 0:_data$meta.pagination,isLoading:false});});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlePagination=function(page){console.log(page,\"dsfsdfsdfsdf\");_this.getCustomerPlus(page);};_this.handlesearch=function(event){// event.persist();\nconsole.log(event.target.value);var search=_this.state.search;search=event.target.value;_this.setState({search:search});if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.getCustomerPlus({});case 1:case\"end\":return _context2.stop();}}},_callee2);})),500);}_this.debouncedFn();};_this.bookAppointment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formFields={};formFields[\"custId\"]=data.id;formFields[\"custName\"]=data.cust_name;_context3.next=5;return _this.props.updateForm(\"basicApptDetail\",formFields);case 5:_this.props.history.push(\"/admin/newappointment\");case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleExportClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var search,_2,page,_3,limit,exceldata;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this.updateState({isExportLoading:true});search=_this.state.search;_2=1,page=_2.page;_3=10,limit=_3.limit;exceldata=1;_this.props.getCustomerPlus(\"?page=\".concat(page,\"&limit=\").concat(limit,\"&search=\").concat(search,\"&excel=\").concat(exceldata)).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){var data,a;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=res.data;console.log(res,\"exportclickresponse\");_context4.next=4;return _this.updateState({isExportLoading:false});case 4:if(data){// window.open(data);\na=document.createElement(\"a\");a.setAttribute(\"href\",data);a.click();}case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref5.apply(this,arguments);};}());case 6:case\"end\":return _context5.stop();}}},_callee5);}));return _this;}_createClass(ListCustomerPlusClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,headerDetails=_this$state.headerDetails,customerList=_this$state.customerList,meta=_this$state.meta,currentIndex=_this$state.currentIndex,isLoading=_this$state.isLoading,isExportLoading=_this$state.isExportLoading;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/customerplus/settings\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Settings\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-3 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/customerplus/lpmanagement\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"LP Management\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 h5\"},t(\"Customer List\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 col-sm-12 mb-2\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Customer\",onChange:this.handlesearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12 col-sm-12\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Customer\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/add\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 col-sm-12\"},isExportLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\")))):/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Export\",onClick:this.handleExportClick})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:meta,showFilterColumn:true,parentHeaderChange:function parentHeaderChange(value){return _this2.updateState(function(){return headerDetails=value;});}},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\")))))):customerList?customerList.map(function(item,index){var _headerDetails$0$enab,_headerDetails$1$enab,_headerDetails$2$enab,_headerDetails$3$enab,_headerDetails$4$enab,_headerDetails$5$enab,_headerDetails$6$enab;var id=item.id,cust_code=item.cust_code,cust_refer=item.cust_refer,cust_name=item.cust_name,cust_phone2=item.cust_phone2,cust_dob=item.cust_dob,class_name=item.class_name,birthday=item.birthday;var date=new Date(cust_dob);//cust_dob = date.toLocaleDateString();\ncust_dob=dateFormat(date,\"dd-mm-yyyy\");return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"text-align-center\"},birthday?/*#__PURE__*/React.createElement(\"img\",{src:birthdayIcon}):null),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$0$enab=headerDetails[0].enabled)!==null&&_headerDetails$0$enab!==void 0?_headerDetails$0$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_code)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$1$enab=headerDetails[1].enabled)!==null&&_headerDetails$1$enab!==void 0?_headerDetails$1$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_refer)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$2$enab=headerDetails[2].enabled)!==null&&_headerDetails$2$enab!==void 0?_headerDetails$2$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"\")),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$3$enab=headerDetails[3].enabled)!==null&&_headerDetails$3$enab!==void 0?_headerDetails$3$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_name)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$4$enab=headerDetails[4].enabled)!==null&&_headerDetails$4$enab!==void 0?_headerDetails$4$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_phone2)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$5$enab=headerDetails[5].enabled)!==null&&_headerDetails$5$enab!==void 0?_headerDetails$5$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_dob)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$6$enab=headerDetails[6].enabled)!==null&&_headerDetails$6$enab!==void 0?_headerDetails$6$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},class_name)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\",ref:function ref(node){_this2.node=node;},onClick:function onClick(){return _this2.handleClick(index);}},currentIndex===index?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more-active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"option card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pt-3\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/\".concat(id,\"/details\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey px-3\"}),\" \",t(\"View\"),\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/\".concat(id,\"/lpmanagement\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"px-2\"},/*#__PURE__*/React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"31\",height:\"30\",fill:\"currentColor\",viewBox:\"0 0 15 30\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"}))),t(\"Loyalty Points Management\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-schedule px-3\"}),\" \",t(\"Reschedule Appointment\"),\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\",onClick:function onClick(){return _this2.bookAppointment(item);}},/*#__PURE__*/React.createElement(\"span\",{className:\"px-2\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"31\",height:\"30\",viewBox:\"0 0 31 30\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"rect\",{width:\"31\",height:\"30\",fill:\"#F9F9F9\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M15 8V22\",stroke:\"#848484\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M8 15H22\",stroke:\"#848484\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}))),t(\"Book Appointment\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-cancel-schedule px-3\"}),\" \",t(\"Cancel Appointment\"),\" \"))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"}))));}):null)))))));}}]);return ListCustomerPlusClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{customerDetails:state.customerPlus.customerPlusDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomerPlus:getCustomerPlus,updateForm:updateForm,getCommonApi:getCommonApi},dispatch);};export var ListCustomerPlus=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ListCustomerPlusClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/ListCustomerPlus/index.js"],"names":["React","NormalButton","InputSearch","TableWrapper","Link","getCustomerPlus","updateForm","getCommonApi","connect","bindActionCreators","_","Navigation","withTranslation","birthdayIcon","dateFormat","ListCustomerPlusClass","state","headerDetails","label","maxWidth","sortKey","enabled","customerList","search","meta","active","currentIndex","isLoading","isExportLoading","isMounted","updateState","data","setState","componentDidMount","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","page","limit","props","then","res","console","log","dataList","pagination","handlePagination","handlesearch","event","value","debouncedFn","debounce","bookAppointment","formFields","id","cust_name","history","push","handleExportClick","exceldata","a","createElement","setAttribute","click","t","map","item","index","cust_code","cust_refer","cust_phone2","cust_dob","class_name","birthday","date","Date","Component","mapStateToProps","customerDetails","customerPlus","customerPlusDetail","mapDispatchToProps","dispatch","ListCustomerPlus"],"mappings":"y1BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,OAASC,WAAT,CAAsBC,YAAtB,KAA0C,kBAA1C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAO,cAAP,CACA,OAASC,eAAT,KAAgC,4BAAhC,CACA,OAASC,UAAT,CAAqBC,YAArB,KAAyC,sBAAzC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAASC,UAAT,KAA2B,+BAA3B,CACA,OAASC,eAAT,KAAgC,eAAhC,CACA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,CACA,OAASC,UAAT,KAA2B,yBAA3B,CAEA,UAAaC,CAAAA,qBAAb,mYACEC,KADF,CACU,CACNC,aAAa,CAAE,CACb,CAAEC,KAAK,CAAE,EAAT,CAAaC,QAAQ,CAAE,MAAvB,CADa,CAEb,CAAED,KAAK,CAAE,eAAT,CAA0BE,OAAO,CAAE,cAAnC,CAFa,CAGb,CAAEF,KAAK,CAAE,gBAAT,CAA2BE,OAAO,CAAE,eAApC,CAAqDC,OAAO,CAAE,IAA9D,CAHa,CAIb,CAAEH,KAAK,CAAE,YAAT,CAAuBE,OAAO,CAAE,YAAhC,CAA8CC,OAAO,CAAE,IAAvD,CAJa,CAKb,CAAEH,KAAK,CAAE,eAAT,CAA0BE,OAAO,CAAE,cAAnC,CAAmDC,OAAO,CAAE,IAA5D,CALa,CAMb,CAAEH,KAAK,CAAE,cAAT,CAAyBE,OAAO,CAAE,aAAlC,CAAiDC,OAAO,CAAE,IAA1D,CANa,CAOb,CAAEH,KAAK,CAAE,UAAT,CAAqBE,OAAO,CAAE,UAA9B,CAA0CC,OAAO,CAAE,IAAnD,CAPa,CAQb,CAAEH,KAAK,CAAE,gBAAT,CAA2BE,OAAO,CAAE,eAApC,CAAqDC,OAAO,CAAE,IAA9D,CARa,CASb,CAAEH,KAAK,CAAE,EAAT,CATa,CADT,CAYNI,YAAY,CAAE,EAZR,CAaNC,MAAM,CAAE,EAbF,CAcNC,IAAI,CAAE,EAdA,CAeNC,MAAM,CAAE,KAfF,CAgBNC,YAAY,CAAE,CAAC,CAhBT,CAiBNC,SAAS,CAAE,IAjBL,CAkBNC,eAAe,CAAE,KAlBX,CAmBNC,SAAS,CAAE,IAnBL,CADV,OA0BEC,WA1BF,CA0BgB,SAAAC,IAAI,CAAI,CACpB,GAAI,MAAKf,KAAL,CAAWa,SAAf,CAA0B,MAAKG,QAAL,CAAcD,IAAd,EAC3B,CA5BH,OA8BEE,iBA9BF,CA8BsB,UAAM,CACxB,MAAK5B,eAAL,CAAqB,EAArB,EACD,CAhCH,OAkCE6B,WAlCF,CAkCgB,SAAAC,GAAG,CAAI,CACnB,GAAI,CAAC,MAAKnB,KAAL,CAAWS,MAAhB,CAAwB,CACtBW,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAmC,MAAKC,kBAAxC,CAA4D,KAA5D,EACD,CAFD,IAEO,CACLF,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,CAAsC,MAAKD,kBAA3C,CAA+D,KAA/D,EACD,CAED,MAAKR,WAAL,CAAiB,SAAAU,SAAS,QAAK,CAC7Bf,MAAM,CAAE,CAACe,SAAS,CAACf,MADU,CAE7BC,YAAY,CAAES,GAFe,CAAL,EAA1B,EAID,CA7CH,OA+CEG,kBA/CF,CA+CuB,SAAAG,CAAC,CAAI,CACxB,GAAI,MAAKC,IAAL,EAAa,IAAjB,CAAuB,CACrB,GAAI,MAAKA,IAAL,CAAUC,QAAV,CAAmBF,CAAC,CAACG,MAArB,CAAJ,CAAkC,CAChC,OACD,CACF,CACD,MAAKV,WAAL,GACD,CAtDH,OAwDE7B,eAxDF,0FAwDoB,iBAAM0B,IAAN,+JAChB,MAAKD,WAAL,CAAiB,CAAEH,SAAS,CAAE,IAAb,CAAjB,EACMJ,MAFU,CAEC,MAAKP,KAFN,CAEVO,MAFU,YAGeQ,IAHf,CAGVc,IAHU,CAGVA,IAHU,qBAGH,CAHG,wBAGed,IAHf,CAGAe,KAHA,CAGAA,KAHA,sBAGQ,EAHR,mCAIV,OAAKC,KAAL,CACH1C,eADG,iBACsBwC,IADtB,mBACoCC,KADpC,oBACoDvB,MADpD,GAEHyB,IAFG,CAEE,SAAAC,GAAG,CAAI,gBACX,GAAMlB,CAAAA,IAAN,CAAekB,GAAf,CAAMlB,IAAN,CACAmB,OAAO,CAACC,GAAR,CAAYpB,IAAZ,EACA;AAAA;AACA,MAAKD,WAAL,CAAiB,CACfR,YAAY,CAAES,IAAI,CAACqB,QADJ,CAEf5B,IAAI,aAAEO,IAAI,CAACP,IAAP,qCAAE,WAAW6B,UAFF,CAGf1B,SAAS,CAAE,KAHI,CAAjB,EAKD,CAXG,CAJU,uDAxDpB,qEA0EE2B,gBA1EF,CA0EqB,SAAAT,IAAI,CAAI,CACzBK,OAAO,CAACC,GAAR,CAAYN,IAAZ,CAAkB,cAAlB,EACA,MAAKxC,eAAL,CAAqBwC,IAArB,EACD,CA7EH,OA+EEU,YA/EF,CA+EiB,SAAAC,KAAK,CAAI,CACtB;AACAN,OAAO,CAACC,GAAR,CAAYK,KAAK,CAACZ,MAAN,CAAaa,KAAzB,EACA,GAAMlC,CAAAA,MAAN,CAAiB,MAAKP,KAAtB,CAAMO,MAAN,CACAA,MAAM,CAAGiC,KAAK,CAACZ,MAAN,CAAaa,KAAtB,CACA,MAAKzB,QAAL,CAAc,CAAET,MAAM,CAANA,MAAF,CAAd,EACA,GAAI,CAAC,MAAKmC,WAAV,CAAuB,CACrB,MAAKA,WAAL,CAAmBhD,CAAC,CAACiD,QAAF,sEAAW,wIAC5B,MAAKtD,eAAL,CAAqB,EAArB,EAD4B,wDAAX,GAEhB,GAFgB,CAAnB,CAGD,CACD,MAAKqD,WAAL,GACD,CA3FH,OA6FEE,eA7FF,2FA6FoB,kBAAM7B,IAAN,qIACZ8B,UADY,CACC,EADD,CAEhBA,UAAU,CAAC,QAAD,CAAV,CAAuB9B,IAAI,CAAC+B,EAA5B,CACAD,UAAU,CAAC,UAAD,CAAV,CAAyB9B,IAAI,CAACgC,SAA9B,CAHgB,uBAIV,OAAKhB,KAAL,CAAWzC,UAAX,CAAsB,iBAAtB,CAAyCuD,UAAzC,CAJU,QAKhB,MAAKd,KAAL,CAAWiB,OAAX,CAAmBC,IAAnB,0BALgB,wDA7FpB,uEAoGEC,iBApGF,sEAoGsB,8KAClB,MAAKpC,WAAL,CAAiB,CAAEF,eAAe,CAAE,IAAnB,CAAjB,EACML,MAFY,CAED,MAAKP,KAFJ,CAEZO,MAFY,IAGH,CAHG,CAGZsB,IAHY,IAGZA,IAHY,IAIF,EAJE,CAIZC,KAJY,IAIZA,KAJY,CAKdqB,SALc,CAKF,CALE,CAMlB,MAAKpB,KAAL,CACG1C,eADH,iBAEawC,IAFb,mBAE2BC,KAF3B,oBAE2CvB,MAF3C,mBAE2D4C,SAF3D,GAIGnB,IAJH,2FAIQ,kBAAMC,GAAN,iIACElB,IADF,CACWkB,GADX,CACElB,IADF,CAEJmB,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAiB,qBAAjB,EAFI,uBAGE,OAAKnB,WAAL,CAAiB,CACrBF,eAAe,CAAE,KADI,CAAjB,CAHF,QAMJ,GAAIG,IAAJ,CAAU,CACR;AACIqC,CAFI,CAEAhC,QAAQ,CAACiC,aAAT,CAAuB,GAAvB,CAFA,CAGRD,CAAC,CAACE,YAAF,CAAe,MAAf,CAAuBvC,IAAvB,EACAqC,CAAC,CAACG,KAAF,GACD,CAXG,wDAJR,kEANkB,wDApGtB,uFAsBE,+BAAuB,CACrB,KAAKvD,KAAL,CAAWa,SAAX,CAAuB,KAAvB,CACD,CAxBH,sBA4HE,iBAAS,iBACP,gBAOI,KAAKb,KAPT,CACEC,aADF,aACEA,aADF,CAEEK,YAFF,aAEEA,YAFF,CAGEE,IAHF,aAGEA,IAHF,CAIEE,YAJF,aAIEA,YAJF,CAKEC,SALF,aAKEA,SALF,CAMEC,eANF,aAMEA,eANF,CAQA,GAAM4C,CAAAA,CAAN,CAAY,KAAKzB,KAAjB,CAAMyB,CAAN,CACA,mBACE,2BAAK,SAAS,CAAC,+BAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,8BAAT,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,0BAFZ,CAGE,KAAK,CAAC,UAHR,EADF,CADF,CADF,cAUE,2BAAK,SAAS,CAAC,wBAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,kCAAT,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,0BAFZ,CAGE,KAAK,CAAC,eAHR,EADF,CADF,CAVF,CADF,cAqBE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,oBAAf,EAAqCA,CAAC,CAAC,eAAD,CAAtC,CADF,cAEE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,sCAAf,eACE,2BAAK,SAAS,CAAC,gCAAf,eACE,oBAAC,WAAD,EACE,SAAS,CAAC,EADZ,CAEE,WAAW,CAAC,iBAFd,CAGE,QAAQ,CAAE,KAAKjB,YAHjB,EADF,CADF,cAQE,2BAAK,SAAS,CAAC,2BAAf,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,0BAFZ,CAGE,KAAK,CAAC,cAHR,CAIE,OAAO,CAAE,yBACP,CAAA,MAAI,CAACR,KAAL,CAAWiB,OAAX,CAAmBC,IAAnB,CAAwB,yBAAxB,CADO,EAJX,EADF,CARF,cAkBE,2BAAK,SAAS,CAAC,2BAAf,EACGrC,eAAe,cACd,2BAAK,KAAK,CAAC,kDAAX,eACE,2BAAK,KAAK,CAAC,gBAAX,CAA4B,IAAI,CAAC,QAAjC,eACE,4BAAM,KAAK,CAAC,SAAZ,EAAuB4C,CAAC,CAAC,YAAD,CAAxB,CADF,CADF,CADc,cAOd,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,0BAFZ,CAGE,KAAK,CAAC,QAHR,CAIE,OAAO,CAAE,KAAKN,iBAJhB,EARJ,CAlBF,CADF,CAFF,CADF,CADF,cA2CE,2BAAK,SAAS,CAAC,WAAf,EA3CF,CADF,cA8CE,2BAAK,SAAS,CAAC,mBAAf,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,oBAAC,YAAD,EACE,aAAa,CAAEjD,aADjB,CAEE,YAAY,CAAE,KAAKqC,gBAFrB,CAGE,QAAQ,CAAE9B,IAHZ,CAIE,gBAAgB,CAAE,IAJpB,CAKE,kBAAkB,CAAE,4BAAAiC,KAAK,QACvB,CAAA,MAAI,CAAC3B,WAAL,CAAiB,iBAAOb,CAAAA,aAAa,CAAGwC,KAAvB,EAAjB,CADuB,EAL3B,EASG9B,SAAS,cACR,2CACE,0BAAI,OAAO,CAAC,GAAZ,eACE,2BAAK,KAAK,CAAC,uDAAX,eACE,2BAAK,KAAK,CAAC,gBAAX,CAA4B,IAAI,CAAC,QAAjC,eACE,4BAAM,KAAK,CAAC,SAAZ,EAAuB6C,CAAC,CAAC,YAAD,CAAxB,CADF,CADF,CADF,CADF,CADQ,CAUNlD,YAAY,CACdA,YAAY,CAACmD,GAAb,CAAiB,SAACC,IAAD,CAAOC,KAAP,CAAiB,+JAChC,GACEb,CAAAA,EADF,CASIY,IATJ,CACEZ,EADF,CAEEc,SAFF,CASIF,IATJ,CAEEE,SAFF,CAGEC,UAHF,CASIH,IATJ,CAGEG,UAHF,CAIEd,SAJF,CASIW,IATJ,CAIEX,SAJF,CAKEe,WALF,CASIJ,IATJ,CAKEI,WALF,CAMEC,QANF,CASIL,IATJ,CAMEK,QANF,CAOEC,UAPF,CASIN,IATJ,CAOEM,UAPF,CAQEC,QARF,CASIP,IATJ,CAQEO,QARF,CAUA,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,CAASJ,QAAT,CAAX,CACA;AACAA,QAAQ,CAAGjE,UAAU,CAACoE,IAAD,CAAO,YAAP,CAArB,CACA,mBACE,0BAAI,GAAG,CAAEP,KAAT,eACE,0BAAI,SAAS,CAAC,mBAAd,EACGM,QAAQ,cAAG,2BAAK,GAAG,CAAEpE,YAAV,EAAH,CAAgC,IAD3C,CADF,cAIE,0BACE,SAAS,CACP,wBAAAI,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,+DAA4B,IAA5B,EAAmC,EAAnC,CAAwC,QAF5C,eAKE,2BAAK,SAAS,CAAC,kDAAf,EACGuD,SADH,CALF,CAJF,cAaE,0BACE,SAAS,CACP,wBAAA3D,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,+DAA4B,IAA5B,EAAmC,EAAnC,CAAwC,QAF5C,eAKE,2BAAK,SAAS,CAAC,kDAAf,EACGwD,UADH,CALF,CAbF,cAsBE,0BACE,SAAS,CACP,wBAAA5D,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,+DAA4B,IAA5B,EAAmC,EAAnC,CAAwC,QAF5C,eAKE,2BAAK,SAAS,CAAC,kDAAf,EACG,EADH,CALF,CAtBF,cA+BE,0BACE,SAAS,CACP,wBAAAJ,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,+DAA4B,IAA5B,EAAmC,EAAnC,CAAwC,QAF5C,eAKE,2BAAK,SAAS,CAAC,kDAAf,EACG0C,SADH,CALF,CA/BF,cAwCE,0BACE,SAAS,CACP,wBAAA9C,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,+DAA4B,IAA5B,EAAmC,EAAnC,CAAwC,QAF5C,eAKE,2BAAK,SAAS,CAAC,kDAAf,EACGyD,WADH,CALF,CAxCF,cAiDE,0BACE,SAAS,CACP,wBAAA7D,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,+DAA4B,IAA5B,EAAmC,EAAnC,CAAwC,QAF5C,eAKE,2BAAK,SAAS,CAAC,kDAAf,EACG0D,QADH,CALF,CAjDF,cA0DE,0BACE,SAAS,CACP,wBAAA9D,aAAa,CAAC,CAAD,CAAb,CAAiBI,OAAjB,+DAA4B,IAA5B,EAAmC,EAAnC,CAAwC,QAF5C,eAKE,2BAAK,SAAS,CAAC,kDAAf,EACG2D,UADH,CALF,CA1DF,cAmEE,0BACE,SAAS,CAAC,mBADZ,CAEE,GAAG,CAAE,aAAAtC,IAAI,CAAI,CACX,MAAI,CAACA,IAAL,CAAYA,IAAZ,CACD,CAJH,CAKE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACR,WAAL,CAAiByC,KAAjB,CAAN,EALX,EAOGjD,YAAY,GAAKiD,KAAjB,cACC,qDACE,2BAAK,SAAS,CAAC,yEAAf,eACE,yBAAG,SAAS,CAAC,WAAb,EADF,CADF,cAIE,2BAAK,SAAS,CAAC,aAAf,eACE,2BACE,SAAS,CAAC,sCADZ,CAEE,OAAO,CAAE,yBACP,CAAA,MAAI,CAAC5B,KAAL,CAAWiB,OAAX,CAAmBC,IAAnB,+BACyBH,EADzB,aADO,EAFX,eAQE,4BAAM,SAAS,CAAC,oBAAhB,EARF,CAQ+C,GAR/C,CASGU,CAAC,CAAC,MAAD,CATJ,CASc,GATd,CADF,cAYE,2BACE,SAAS,CAAC,iCADZ,CAEE,OAAO,CAAE,yBACP,CAAA,MAAI,CAACzB,KAAL,CAAWiB,OAAX,CAAmBC,IAAnB,+BACyBH,EADzB,kBADO,EAFX,eAQE,4BAAM,SAAS,CAAC,MAAhB,eACE,2BACE,KAAK,CAAC,4BADR,CAEE,KAAK,CAAC,IAFR,CAGE,MAAM,CAAC,IAHT,CAIE,IAAI,CAAC,cAJP,CAKE,OAAO,CAAC,WALV,eAOE,4BAAM,CAAC,CAAC,6eAAR,EAPF,CADF,CARF,CAmBGU,CAAC,CAAC,2BAAD,CAnBJ,CAZF,cAiCE,2BAAK,SAAS,CAAC,iCAAf,eACE,4BAAM,SAAS,CAAC,oBAAhB,EADF,CAC+C,GAD/C,CAEGA,CAAC,CAAC,wBAAD,CAFJ,CAEgC,GAFhC,CAjCF,cAqCE,2BACE,SAAS,CAAC,iCADZ,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACZ,eAAL,CAAqBc,IAArB,CAAN,EAFX,eAIE,4BAAM,SAAS,CAAC,MAAhB,eACE,2BACE,KAAK,CAAC,IADR,CAEE,MAAM,CAAC,IAFT,CAGE,OAAO,CAAC,WAHV,CAIE,IAAI,CAAC,MAJP,CAKE,KAAK,CAAC,4BALR,eAOE,4BACE,KAAK,CAAC,IADR,CAEE,MAAM,CAAC,IAFT,CAGE,IAAI,CAAC,SAHP,EAPF,cAYE,4BACE,CAAC,CAAC,UADJ,CAEE,MAAM,CAAC,SAFT,CAGE,aAAa,CAAC,OAHhB,CAIE,cAAc,CAAC,OAJjB,EAZF,cAkBE,4BACE,CAAC,CAAC,UADJ,CAEE,MAAM,CAAC,SAFT,CAGE,aAAa,CAAC,OAHhB,CAIE,cAAc,CAAC,OAJjB,EAlBF,CADF,CAJF,CA+BGF,CAAC,CAAC,kBAAD,CA/BJ,CArCF,cAsEE,2BAAK,SAAS,CAAC,sCAAf,eACE,4BAAM,SAAS,CAAC,2BAAhB,EADF,CACsD,GADtD,CAEGA,CAAC,CAAC,oBAAD,CAFJ,CAE4B,GAF5B,CAtEF,CAJF,CADD,cAkFC,2BAAK,SAAS,CAAC,kEAAf,eACE,yBAAG,SAAS,CAAC,WAAb,EADF,CAzFJ,CAnEF,CADF,CAoKD,CAlLD,CADc,CAoLZ,IAvMN,CADF,CADF,CADF,CA9CF,CADF,CArBF,CADF,CAwRD,CA9ZH,mCAA2CxE,KAAK,CAACoF,SAAjD,EAiaA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAArE,KAAK,QAAK,CAChCsE,eAAe,CAAEtE,KAAK,CAACuE,YAAN,CAAmBC,kBADJ,CAAL,EAA7B,CAIA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAOjF,CAAAA,kBAAkB,CACvB,CACEJ,eAAe,CAAfA,eADF,CAEEC,UAAU,CAAVA,UAFF,CAGEC,YAAY,CAAZA,YAHF,CADuB,CAMvBmF,QANuB,CAAzB,CAQD,CATD,CAWA,MAAO,IAAMC,CAAAA,gBAAgB,CAAG/E,eAAe,GAC7CJ,OAAO,CAAC6E,eAAD,CAAkBI,kBAAlB,CAAP,CAA6C1E,qBAA7C,CAD6C,CAAxC","sourcesContent":["import React from \"react\";\r\nimport { NormalButton } from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./style.scss\";\r\nimport { getCustomerPlus } from \"redux/actions/customerPlus\";\r\nimport { updateForm, getCommonApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport _ from \"lodash\";\r\nimport { Navigation } from \"react-minimal-side-navigation\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport birthdayIcon from \"assets/images/app-icons/3.png\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\n\r\nexport class ListCustomerPlusClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"\", maxWidth: \"10px\" },\r\n      { label: \"Customer Code\", sortKey: \"customerCode\" },\r\n      { label: \"Referance Code\", sortKey: \"referenceCode\", enabled: true },\r\n      { label: \"Salutation\", sortKey: \"salutation\", enabled: true },\r\n      { label: \"Customer Name\", sortKey: \"customerName\", enabled: true },\r\n      { label: \"Mobile Phone\", sortKey: \"mobilePhone\", enabled: true },\r\n      { label: \"Birthday\", sortKey: \"birthday\", enabled: true },\r\n      { label: \"Customer Class\", sortKey: \"customerClass\", enabled: true },\r\n      { label: \"\" },\r\n    ],\r\n    customerList: [],\r\n    search: \"\",\r\n    meta: {},\r\n    active: false,\r\n    currentIndex: -1,\r\n    isLoading: true,\r\n    isExportLoading: false,\r\n    isMounted: true,\r\n  };\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.getCustomerPlus({});\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.updateState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  getCustomerPlus = async data => {\r\n    this.updateState({ isLoading: true });\r\n    let { search } = this.state;\r\n    let { page = 1, limit = 10 } = data;\r\n    await this.props\r\n      .getCustomerPlus(`?page=${page}&limit=${limit}&search=${search}`)\r\n      .then(res => {\r\n        let { data } = res;\r\n        console.log(data);\r\n        //  let { customerDetails } = this.props;\r\n        this.updateState({\r\n          customerList: data.dataList,\r\n          meta: data.meta?.pagination,\r\n          isLoading: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  handlePagination = page => {\r\n    console.log(page, \"dsfsdfsdfsdf\");\r\n    this.getCustomerPlus(page);\r\n  };\r\n\r\n  handlesearch = event => {\r\n    // event.persist();\r\n    console.log(event.target.value);\r\n    let { search } = this.state;\r\n    search = event.target.value;\r\n    this.setState({ search });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        this.getCustomerPlus({});\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  bookAppointment = async data => {\r\n    let formFields = {};\r\n    formFields[\"custId\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    await this.props.updateForm(\"basicApptDetail\", formFields);\r\n    this.props.history.push(`/admin/newappointment`);\r\n  };\r\n  handleExportClick = async () => {\r\n    this.updateState({ isExportLoading: true });\r\n    let { search } = this.state;\r\n    let { page } = 1;\r\n    let { limit } = 10;\r\n    let exceldata = 1;\r\n    this.props\r\n      .getCustomerPlus(\r\n        `?page=${page}&limit=${limit}&search=${search}&excel=${exceldata}`\r\n      )\r\n      .then(async res => {\r\n        let { data } = res;\r\n        console.log(res, \"exportclickresponse\");\r\n        await this.updateState({\r\n          isExportLoading: false,\r\n        });\r\n        if (data) {\r\n          // window.open(data);\r\n          var a = document.createElement(\"a\");\r\n          a.setAttribute(\"href\", data);\r\n          a.click();\r\n        }\r\n      });\r\n  };\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      customerList,\r\n      meta,\r\n      currentIndex,\r\n      isLoading,\r\n      isExportLoading,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"customer-list container-fluid\">\r\n        <div className=\"row mb-4\">\r\n          <div className=\"col-md-4 col-lg-2 mb-2\">\r\n            <Link to=\"/admin/customerplus/settings\">\r\n              <NormalButton\r\n                normal={true}\r\n                className=\"col-12 fs-15 float-right\"\r\n                label=\"Settings\"\r\n              />\r\n            </Link>\r\n          </div>\r\n          <div className=\"col-md-4 col-lg-3 mb-2\">\r\n            <Link to=\"/admin/customerplus/lpmanagement\">\r\n              <NormalButton\r\n                normal={true}\r\n                className=\"col-12 fs-15 float-right\"\r\n                label=\"LP Management\"\r\n              />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12 mb-1\">\r\n                <div className=\"d-flex flex-wrap\">\r\n                  <div className=\"col-md-6 col-12 h5\">{t(\"Customer List\")}</div>\r\n                  <div className=\"col-md-6\">\r\n                    <div className=\"d-flex justify-content-end flex-wrap\">\r\n                      <div className=\"col-md-6 col-12 col-sm-12 mb-2\">\r\n                        <InputSearch\r\n                          className=\"\"\r\n                          placeholder=\"Search Customer\"\r\n                          onChange={this.handlesearch}\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-4 col-12 col-sm-12\">\r\n                        <NormalButton\r\n                          mainbg={true}\r\n                          className=\"col-12 fs-15 float-right\"\r\n                          label=\"Add Customer\"\r\n                          onClick={() =>\r\n                            this.props.history.push(\"/admin/customerplus/add\")\r\n                          }\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-2 col-12 col-sm-12\">\r\n                        {isExportLoading ? (\r\n                          <div class=\"d-flex align-items-center justify-content-center\">\r\n                            <div class=\"spinner-border\" role=\"status\">\r\n                              <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <NormalButton\r\n                            mainbg={true}\r\n                            className=\"col-12 fs-15 float-right\"\r\n                            label=\"Export\"\r\n                            onClick={this.handleExportClick}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-12\"></div>\r\n            </div>\r\n            <div className=\"tab-table-content\">\r\n              <div className=\"py-4\">\r\n                <div className=\"table-container\">\r\n                  <TableWrapper\r\n                    headerDetails={headerDetails}\r\n                    queryHandler={this.handlePagination}\r\n                    pageMeta={meta}\r\n                    showFilterColumn={true}\r\n                    parentHeaderChange={value =>\r\n                      this.updateState(() => (headerDetails = value))\r\n                    }\r\n                  >\r\n                    {isLoading ? (\r\n                      <tr>\r\n                        <td colSpan=\"7\">\r\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                            <div class=\"spinner-border\" role=\"status\">\r\n                              <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ) : customerList ? (\r\n                      customerList.map((item, index) => {\r\n                        let {\r\n                          id,\r\n                          cust_code,\r\n                          cust_refer,\r\n                          cust_name,\r\n                          cust_phone2,\r\n                          cust_dob,\r\n                          class_name,\r\n                          birthday,\r\n                        } = item;\r\n                        let date = new Date(cust_dob);\r\n                        //cust_dob = date.toLocaleDateString();\r\n                        cust_dob = dateFormat(date, \"dd-mm-yyyy\");\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td className=\"text-align-center\">\r\n                              {birthday ? <img src={birthdayIcon} /> : null}\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[0].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {cust_code}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[1].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {cust_refer}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[2].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {\"\"}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[3].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {cust_name}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[4].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {cust_phone2}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[5].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {cust_dob}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className={\r\n                                headerDetails[6].enabled ?? true ? \"\" : \"d-none\"\r\n                              }\r\n                            >\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                {class_name}\r\n                              </div>\r\n                            </td>\r\n                            <td\r\n                              className=\"position-relative\"\r\n                              ref={node => {\r\n                                this.node = node;\r\n                              }}\r\n                              onClick={() => this.handleClick(index)}\r\n                            >\r\n                              {currentIndex === index ? (\r\n                                <>\r\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\r\n                                    <i className=\"icon-more\"></i>\r\n                                  </div>\r\n                                  <div className=\"option card\">\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-16 pt-3\"\r\n                                      onClick={() =>\r\n                                        this.props.history.push(\r\n                                          `/admin/customerplus/${id}/details`\r\n                                        )\r\n                                      }\r\n                                    >\r\n                                      <span className=\"icon-eye-grey px-3\"></span>{\" \"}\r\n                                      {t(\"View\")}{\" \"}\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-16\"\r\n                                      onClick={() =>\r\n                                        this.props.history.push(\r\n                                          `/admin/customerplus/${id}/lpmanagement`\r\n                                        )\r\n                                      }\r\n                                    >\r\n                                      <span className=\"px-2\">\r\n                                        <svg\r\n                                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                                          width=\"31\"\r\n                                          height=\"30\"\r\n                                          fill=\"currentColor\"\r\n                                          viewBox=\"0 0 15 30\"\r\n                                        >\r\n                                          <path d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\" />\r\n                                        </svg>\r\n                                      </span>\r\n                                      {t(\"Loyalty Points Management\")}\r\n                                    </div>\r\n                                    <div className=\"d-flex align-items-center fs-16\">\r\n                                      <span className=\"icon-schedule px-3\"></span>{\" \"}\r\n                                      {t(\"Reschedule Appointment\")}{\" \"}\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"d-flex align-items-center fs-16\"\r\n                                      onClick={() => this.bookAppointment(item)}\r\n                                    >\r\n                                      <span className=\"px-2\">\r\n                                        <svg\r\n                                          width=\"31\"\r\n                                          height=\"30\"\r\n                                          viewBox=\"0 0 31 30\"\r\n                                          fill=\"none\"\r\n                                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        >\r\n                                          <rect\r\n                                            width=\"31\"\r\n                                            height=\"30\"\r\n                                            fill=\"#F9F9F9\"\r\n                                          />\r\n                                          <path\r\n                                            d=\"M15 8V22\"\r\n                                            stroke=\"#848484\"\r\n                                            strokeLinecap=\"round\"\r\n                                            strokeLinejoin=\"round\"\r\n                                          />\r\n                                          <path\r\n                                            d=\"M8 15H22\"\r\n                                            stroke=\"#848484\"\r\n                                            strokeLinecap=\"round\"\r\n                                            strokeLinejoin=\"round\"\r\n                                          />\r\n                                        </svg>\r\n                                      </span>\r\n                                      {t(\"Book Appointment\")}\r\n                                    </div>\r\n                                    <div className=\"d-flex align-items-center fs-16 pb-3\">\r\n                                      <span className=\"icon-cancel-schedule px-3\"></span>{\" \"}\r\n                                      {t(\"Cancel Appointment\")}{\" \"}\r\n                                    </div>\r\n                                  </div>\r\n                                </>\r\n                              ) : (\r\n                                <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\r\n                                  <i className=\"icon-more\"></i>\r\n                                </div>\r\n                              )}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    ) : null}\r\n                  </TableWrapper>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  customerDetails: state.customerPlus.customerPlusDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCustomerPlus,\r\n      updateForm,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ListCustomerPlus = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ListCustomerPlusClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}