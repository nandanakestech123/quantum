{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\CustomerPlus\\\\LoyaltyPointsSettings\\\\AddRedeemPolicy\\\\index.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { NormalInput, NormalSelect, NormalButton, NormalMultiSelect } from \"component/common\";\nimport { bindActionCreators } from \"redux\";\nimport { addRedeemPlolicySettings, updateRedeemPlolicySettings, getRedeemPlolicySettings } from \"redux/actions/customerPlus\";\nimport { getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport SimpleReactValidator from \"simple-react-validator\";\n\nclass AddRedeemPolicyClass extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.componentDidMount = async () => {\n      let {\n        Item_Divid,\n        dept_id,\n        brand_id\n      } = this.state;\n      this.props.getCommonApi(\"CustomerClassList/\").then(e => {\n        this.updateState({\n          customerClassOptions: e.CustomerClasses.map(e => {\n            return {\n              label: e.class_desc,\n              value: e.class_code\n            };\n          })\n        });\n      });\n\n      if (this.props.match.params.id) {\n        await this.props.getRedeemPlolicySettings(`/${this.props.match.params.id}`).then(async e => {\n          console.log(e, \"redeemPolicy\");\n          let {\n            data\n          } = e;\n          await this.updateState({ ...data\n          });\n\n          if (data.Item_Divid) {\n            for (let key of data.Item_Divid) {\n              Item_Divid.push({\n                label: key.label,\n                value: String(key.value)\n              });\n            }\n\n            await this.setState({\n              Item_Divid\n            });\n          }\n\n          if (data.dept_id) {\n            for (let key of data.dept_id) {\n              dept_id.push({\n                label: key.label,\n                value: String(key.value)\n              });\n            }\n\n            await this.setState({\n              dept_id\n            });\n          }\n\n          if (data.brand_id) {\n            for (let key of data.brand_id) {\n              brand_id.push({\n                label: key.label,\n                value: String(key.value)\n              });\n            }\n\n            await this.setState({\n              brand_id\n            });\n          }\n        }); //await this.getdefaultStaffList();\n      }\n\n      this.Selected_data();\n    };\n\n    this.Selected_data = async () => {\n      let {\n        Item_Divid,\n        dept_id,\n        brand_id\n      } = this.state;\n      this.props.getCommonApi(`catalogitemdiv/?salon=0`).then(async res => {\n        console.log(res, \"itemDivOptions\");\n        let itemDivOptions = [];\n        Item_Divid = [];\n        let {\n          data,\n          status\n        } = res;\n\n        if (status == 200) {\n          if (data) {\n            for (let key of data) {\n              itemDivOptions.push({\n                label: key.desc,\n                value: String(key.id)\n              });\n            } //Item_Divid = multidata;\n\n\n            await this.setState({\n              itemDivOptions\n            });\n          }\n        }\n      });\n      this.props.getCommonApi(`department/`).then(async res => {\n        console.log(res, \"departmentOptions\");\n        let departmentOptions = [];\n        dept_id = [];\n        let {\n          data,\n          status\n        } = res;\n\n        if (status == 200) {\n          if (data) {\n            for (let key of data) {\n              departmentOptions.push({\n                label: key.itm_desc,\n                value: String(key.pk)\n              });\n            } //Item_Divid = multidata;\n\n\n            await this.setState({\n              departmentOptions\n            });\n          }\n        }\n      });\n      this.props.getCommonApi(`brand/`).then(async res => {\n        console.log(res, \"brandOptions\");\n        let brandOptions = [];\n        brand_id = [];\n        let {\n          data,\n          status\n        } = res;\n\n        if (status == 200) {\n          if (data) {\n            for (let key of data) {\n              brandOptions.push({\n                label: key.itm_desc,\n                value: String(key.pk)\n              });\n            } //Item_Divid = multidata;\n\n\n            await this.setState({\n              brandOptions\n            });\n          }\n        }\n      });\n    };\n\n    this.onChange = e => {\n      this.updateState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onSubmit = async () => {\n      if (this.validator.allValid()) {\n        let {\n          cur_value,\n          cust_type,\n          isactive,\n          point_value,\n          Item_Divid,\n          brand_id,\n          dept_id\n        } = this.state;\n        let data = {\n          cur_value,\n          cust_type,\n          isactive,\n          item_divids: Item_Divid.map(e => e.value).reduce((a, e) => a === \"\" ? e : a + \",\" + e, \"\"),\n          dept_ids: dept_id.map(e => e.value).reduce((a, e) => a === \"\" ? e : a + \",\" + e, \"\"),\n          brand_ids: brand_id.map(e => e.value).reduce((a, e) => a === \"\" ? e : a + \",\" + e, \"\"),\n          point_value\n        };\n\n        if (this.props.match.params.id) {\n          await this.props.updateRedeemPlolicySettings(this.props.match.params.id + \"/\", data);\n        } else {\n          await this.props.addRedeemPlolicySettings(data);\n        }\n\n        this.props.history.goBack();\n      } else {\n        this.validator.showMessages(); // rerender to show messages for the first time\n        // you can use the autoForceUpdate option to do this automatically`\n\n        this.forceUpdate();\n      }\n    };\n\n    this.handleMultiSelectDefaultDiv = async (data = []) => {\n      let {\n        Item_Divid\n      } = this.state;\n      console.log(Item_Divid);\n      Item_Divid = data;\n      await this.setState({\n        Item_Divid\n      });\n    };\n\n    this.handleMultiSelectDefaultDept = async (data = []) => {\n      let {\n        dept_id\n      } = this.state;\n      console.log(dept_id);\n      dept_id = data;\n      await this.setState({\n        dept_id\n      });\n    };\n\n    this.handleMultiSelectDefaultBrand = async (data = []) => {\n      let {\n        brand_id\n      } = this.state;\n      console.log(brand_id);\n      brand_id = data;\n      await this.setState({\n        brand_id\n      });\n    };\n\n    this.validator = new SimpleReactValidator();\n    this.state = {\n      customerClassOptions: [],\n      cust_type: \"\",\n      cur_value: 0,\n      point_value: 0,\n      isactive: true,\n      isMounted: true,\n      itemDivOptions: [],\n      item_divids: \"\",\n      Item_Divid: [],\n      dept_ids: \"\",\n      dept_id: [],\n      brand_ids: \"\",\n      brand_id: [],\n      departmentOptions: [],\n      brandOptions: []\n    };\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  render() {\n    let {\n      t\n    } = this.props;\n    let {\n      cur_value,\n      cust_type,\n      isactive,\n      point_value,\n      customerClassOptions\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fuild\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head-label-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"category\",\n      onClick: () => this.props.history.push(\"/admin/customerplus\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }\n    }, t(\"CustomerPlus\")), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-right mx-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sub-category\",\n      onClick: () => this.props.history.goBack(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }\n    }, t(\"Loyalty Points Management\")), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-right mx-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sub-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }\n    }, t((this.props.match.params.id ? \"Edit\" : \"New\") + \" Redeem Policy\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-lg mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }, t((this.props.match.params.id ? \"Edit\" : \"New\") + \" Redeem Policy\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group pb-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    }, t(\"Currency Value\")), /*#__PURE__*/React.createElement(NormalInput, {\n      name: \"cur_value\",\n      value: cur_value,\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }\n    }, t(\"Point Value\")), /*#__PURE__*/React.createElement(NormalInput, {\n      name: \"point_value\",\n      value: point_value,\n      type: \"number\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }\n    }, t(\"Customer Class\")), /*#__PURE__*/React.createElement(NormalSelect, {\n      name: \"cust_type\",\n      options: customerClassOptions,\n      value: cust_type,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }\n    }), this.validator.message(\"customer class\", this.state.cust_type, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }, t(\"Item Div\")), /*#__PURE__*/React.createElement(NormalMultiSelect, {\n      name: \"Item_Divid\",\n      options: this.state.itemDivOptions,\n      value: this.state.Item_Divid ? this.state.Item_Divid : [],\n      handleMultiSelect: this.handleMultiSelectDefaultDiv,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }\n    }), this.validator.message(\"item division\", this.state.Item_Divid, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }\n    }, t(\"Brand\")), /*#__PURE__*/React.createElement(NormalMultiSelect, {\n      name: \"brand_id\",\n      options: this.state.brandOptions,\n      value: this.state.brand_id ? this.state.brand_id : [],\n      handleMultiSelect: this.handleMultiSelectDefaultBrand,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 17\n      }\n    }, t(\"Department\")), /*#__PURE__*/React.createElement(NormalMultiSelect, {\n      name: \"dept_id\",\n      options: this.state.departmentOptions,\n      value: this.state.dept_id ? this.state.dept_id : [],\n      handleMultiSelect: this.handleMultiSelectDefaultDept,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 pt-md-5 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"isactive\",\n      checked: isactive,\n      onClick: () => this.updateState({\n        isactive: !isactive\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"name\",\n      className: \"text-left text-black common-label-text fs-17 pb-3 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 17\n      }\n    }, t(\"Is Currently Active\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row pt-5 d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/admin/customerplus/lpmanagement\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Cancel\",\n      resetbg: true,\n      className: \"mr-2 bg-danger text-light col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      label: \"Save\",\n      success: true,\n      className: \"mr-2 col-12\",\n      onClick: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  redeemPolicyList: state.customerPlus.redeemPolicyList\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    addRedeemPlolicySettings,\n    updateRedeemPlolicySettings,\n    getCommonApi,\n    getRedeemPlolicySettings\n  }, dispatch);\n};\n\nexport const AddRedeemPolicy = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(AddRedeemPolicyClass));","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/CustomerPlus/LoyaltyPointsSettings/AddRedeemPolicy/index.js"],"names":["React","Link","NormalInput","NormalSelect","NormalButton","NormalMultiSelect","bindActionCreators","addRedeemPlolicySettings","updateRedeemPlolicySettings","getRedeemPlolicySettings","getCommonApi","connect","withTranslation","SimpleReactValidator","AddRedeemPolicyClass","Component","constructor","props","updateState","data","state","isMounted","setState","componentDidMount","Item_Divid","dept_id","brand_id","then","e","customerClassOptions","CustomerClasses","map","label","class_desc","value","class_code","match","params","id","console","log","key","push","String","Selected_data","res","itemDivOptions","status","desc","departmentOptions","itm_desc","pk","brandOptions","onChange","target","name","onSubmit","validator","allValid","cur_value","cust_type","isactive","point_value","item_divids","reduce","a","dept_ids","brand_ids","history","goBack","showMessages","forceUpdate","handleMultiSelectDefaultDiv","handleMultiSelectDefaultDept","handleMultiSelectDefaultBrand","componentWillUnmount","render","t","message","mapStateToProps","redeemPolicyList","customerPlus","mapDispatchToProps","dispatch","AddRedeemPolicy"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  NormalInput,\r\n  NormalSelect,\r\n  NormalButton,\r\n  NormalMultiSelect,\r\n} from \"component/common\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  addRedeemPlolicySettings,\r\n  updateRedeemPlolicySettings,\r\n  getRedeemPlolicySettings,\r\n} from \"redux/actions/customerPlus\";\r\nimport { getCommonApi } from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\n\r\nclass AddRedeemPolicyClass extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.validator = new SimpleReactValidator();\r\n    this.state = {\r\n      customerClassOptions: [],\r\n      cust_type: \"\",\r\n      cur_value: 0,\r\n      point_value: 0,\r\n      isactive: true,\r\n      isMounted: true,\r\n      itemDivOptions: [],\r\n      item_divids: \"\",\r\n      Item_Divid: [],\r\n      dept_ids: \"\",\r\n      dept_id: [],\r\n      brand_ids: \"\",\r\n      brand_id: [],\r\n      departmentOptions: [],\r\n      brandOptions: [],\r\n    };\r\n  }\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    let { Item_Divid, dept_id, brand_id } = this.state;\r\n    this.props.getCommonApi(\"CustomerClassList/\").then(e => {\r\n      this.updateState({\r\n        customerClassOptions: e.CustomerClasses.map(e => {\r\n          return { label: e.class_desc, value: e.class_code };\r\n        }),\r\n      });\r\n    });\r\n\r\n    if (this.props.match.params.id) {\r\n      await this.props\r\n        .getRedeemPlolicySettings(`/${this.props.match.params.id}`)\r\n        .then(async e => {\r\n          console.log(e, \"redeemPolicy\");\r\n          let { data } = e;\r\n          await this.updateState({ ...data });\r\n          if (data.Item_Divid) {\r\n            for (let key of data.Item_Divid) {\r\n              Item_Divid.push({\r\n                label: key.label,\r\n                value: String(key.value),\r\n              });\r\n            }\r\n            await this.setState({\r\n              Item_Divid,\r\n            });\r\n          }\r\n          if (data.dept_id) {\r\n            for (let key of data.dept_id) {\r\n              dept_id.push({\r\n                label: key.label,\r\n                value: String(key.value),\r\n              });\r\n            }\r\n            await this.setState({\r\n              dept_id,\r\n            });\r\n          }\r\n\r\n          if (data.brand_id) {\r\n            for (let key of data.brand_id) {\r\n              brand_id.push({\r\n                label: key.label,\r\n                value: String(key.value),\r\n              });\r\n            }\r\n            await this.setState({\r\n              brand_id,\r\n            });\r\n          }\r\n        });\r\n      //await this.getdefaultStaffList();\r\n    }\r\n    this.Selected_data();\r\n  };\r\n\r\n  Selected_data = async () => {\r\n    let { Item_Divid, dept_id, brand_id } = this.state;\r\n    this.props.getCommonApi(`catalogitemdiv/?salon=0`).then(async res => {\r\n      console.log(res, \"itemDivOptions\");\r\n      let itemDivOptions = [];\r\n      Item_Divid = [];\r\n      let { data, status } = res;\r\n      if (status == 200) {\r\n        if (data) {\r\n          for (let key of data) {\r\n            itemDivOptions.push({ label: key.desc, value: String(key.id) });\r\n          }\r\n          //Item_Divid = multidata;\r\n          await this.setState({ itemDivOptions });\r\n        }\r\n      }\r\n    });\r\n    this.props.getCommonApi(`department/`).then(async res => {\r\n      console.log(res, \"departmentOptions\");\r\n      let departmentOptions = [];\r\n      dept_id = [];\r\n      let { data, status } = res;\r\n      if (status == 200) {\r\n        if (data) {\r\n          for (let key of data) {\r\n            departmentOptions.push({\r\n              label: key.itm_desc,\r\n              value: String(key.pk),\r\n            });\r\n          }\r\n          //Item_Divid = multidata;\r\n          await this.setState({ departmentOptions });\r\n        }\r\n      }\r\n    });\r\n    this.props.getCommonApi(`brand/`).then(async res => {\r\n      console.log(res, \"brandOptions\");\r\n      let brandOptions = [];\r\n      brand_id = [];\r\n      let { data, status } = res;\r\n      if (status == 200) {\r\n        if (data) {\r\n          for (let key of data) {\r\n            brandOptions.push({ label: key.itm_desc, value: String(key.pk) });\r\n          }\r\n          //Item_Divid = multidata;\r\n          await this.setState({ brandOptions });\r\n        }\r\n      }\r\n    });\r\n  };\r\n  onChange = e => {\r\n    this.updateState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  onSubmit = async () => {\r\n    if (this.validator.allValid()) {\r\n      let {\r\n        cur_value,\r\n        cust_type,\r\n        isactive,\r\n        point_value,\r\n        Item_Divid,\r\n        brand_id,\r\n        dept_id,\r\n      } = this.state;\r\n\r\n      let data = {\r\n        cur_value,\r\n        cust_type,\r\n        isactive,\r\n        item_divids: Item_Divid.map(e => e.value).reduce(\r\n          (a, e) => (a === \"\" ? e : a + \",\" + e),\r\n          \"\"\r\n        ),\r\n        dept_ids: dept_id\r\n          .map(e => e.value)\r\n          .reduce((a, e) => (a === \"\" ? e : a + \",\" + e), \"\"),\r\n        brand_ids: brand_id\r\n          .map(e => e.value)\r\n          .reduce((a, e) => (a === \"\" ? e : a + \",\" + e), \"\"),\r\n        point_value,\r\n      };\r\n      if (this.props.match.params.id) {\r\n        await this.props.updateRedeemPlolicySettings(\r\n          this.props.match.params.id + \"/\",\r\n          data\r\n        );\r\n      } else {\r\n        await this.props.addRedeemPlolicySettings(data);\r\n      }\r\n      this.props.history.goBack();\r\n    } else {\r\n      this.validator.showMessages();\r\n      // rerender to show messages for the first time\r\n      // you can use the autoForceUpdate option to do this automatically`\r\n      this.forceUpdate();\r\n    }\r\n  };\r\n\r\n  handleMultiSelectDefaultDiv = async (data = []) => {\r\n    let { Item_Divid } = this.state;\r\n    console.log(Item_Divid);\r\n    Item_Divid = data;\r\n    await this.setState({ Item_Divid });\r\n  };\r\n  handleMultiSelectDefaultDept = async (data = []) => {\r\n    let { dept_id } = this.state;\r\n    console.log(dept_id);\r\n    dept_id = data;\r\n    await this.setState({ dept_id });\r\n  };\r\n  handleMultiSelectDefaultBrand = async (data = []) => {\r\n    let { brand_id } = this.state;\r\n    console.log(brand_id);\r\n    brand_id = data;\r\n    await this.setState({ brand_id });\r\n  };\r\n  render() {\r\n    let { t } = this.props;\r\n    let { cur_value, cust_type, isactive, point_value, customerClassOptions } =\r\n      this.state;\r\n    return (\r\n      <div className=\"container-fuild\">\r\n        <div className=\"head-label-nav\">\r\n          <p\r\n            className=\"category\"\r\n            onClick={() => this.props.history.push(\"/admin/customerplus\")}\r\n          >\r\n            {t(\"CustomerPlus\")}\r\n          </p>\r\n          <i className=\"icon-right mx-md-3\"></i>\r\n          <p\r\n            className=\"sub-category\"\r\n            onClick={() => this.props.history.goBack()}\r\n          >\r\n            {t(\"Loyalty Points Management\")}\r\n          </p>\r\n\r\n          <i className=\"icon-right mx-md-3\"></i>\r\n          <p className=\"sub-category\">\r\n            {t(\r\n              (this.props.match.params.id ? \"Edit\" : \"New\") + \" Redeem Policy\"\r\n            )}\r\n          </p>\r\n        </div>\r\n        <div className=\"container-lg mt-5\">\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col-md-12 mb-4\">\r\n              <h3>\r\n                {t(\r\n                  (this.props.match.params.id ? \"Edit\" : \"New\") +\r\n                    \" Redeem Policy\"\r\n                )}\r\n              </h3>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group pb-2 mb-4\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-2 mb-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Currency Value\")}\r\n                </label>\r\n                <NormalInput\r\n                  name=\"cur_value\"\r\n                  value={cur_value}\r\n                  type=\"number\"\r\n                  onChange={this.onChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2 mb-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Point Value\")}\r\n                </label>\r\n                <NormalInput\r\n                  name=\"point_value\"\r\n                  value={point_value}\r\n                  type=\"number\"\r\n                  onChange={this.onChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-4 mb-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Customer Class\")}\r\n                </label>\r\n                <NormalSelect\r\n                  name=\"cust_type\"\r\n                  options={customerClassOptions}\r\n                  value={cust_type}\r\n                  onChange={this.onChange}\r\n                />\r\n                {this.validator.message(\r\n                  \"customer class\",\r\n                  this.state.cust_type,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"col-md-4 mb-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Item Div\")}\r\n                </label>\r\n                <NormalMultiSelect\r\n                  name=\"Item_Divid\"\r\n                  options={this.state.itemDivOptions}\r\n                  value={this.state.Item_Divid ? this.state.Item_Divid : []}\r\n                  handleMultiSelect={this.handleMultiSelectDefaultDiv}\r\n                />\r\n                {this.validator.message(\r\n                  \"item division\",\r\n                  this.state.Item_Divid,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n              <div className=\"col-md-4 mb-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Brand\")}\r\n                </label>\r\n                <NormalMultiSelect\r\n                  name=\"brand_id\"\r\n                  options={this.state.brandOptions}\r\n                  value={this.state.brand_id ? this.state.brand_id : []}\r\n                  handleMultiSelect={this.handleMultiSelectDefaultBrand}\r\n                />\r\n                {/* {this.validator.message(\r\n                  \"brand\",\r\n                  this.state.brand_id,\r\n                  \"required\"\r\n                )} */}\r\n              </div>\r\n              <div className=\"col-md-4 mb-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-3\">\r\n                  {t(\"Department\")}\r\n                </label>\r\n                <NormalMultiSelect\r\n                  name=\"dept_id\"\r\n                  options={this.state.departmentOptions}\r\n                  value={this.state.dept_id ? this.state.dept_id : []}\r\n                  handleMultiSelect={this.handleMultiSelectDefaultDept}\r\n                />\r\n                {/* {this.validator.message(\r\n                  \"Department\",\r\n                  this.state.brand_id,\r\n                  \"required\"\r\n                )} */}\r\n              </div>\r\n\r\n              <div className=\"col-md-4 pt-md-5 mb-4\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  name=\"isactive\"\r\n                  checked={isactive}\r\n                  onClick={() => this.updateState({ isactive: !isactive })}\r\n                />\r\n                <label\r\n                  for=\"name\"\r\n                  className=\"text-left text-black common-label-text fs-17 pb-3 ml-2\"\r\n                >\r\n                  {t(\"Is Currently Active\")}\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div className=\"row pt-5 d-flex justify-content-center\">\r\n              <div className=\"col-md-3 mb-4\">\r\n                <Link to=\"/admin/customerplus/lpmanagement\">\r\n                  <NormalButton\r\n                    label=\"Cancel\"\r\n                    resetbg={true}\r\n                    className=\"mr-2 bg-danger text-light col-12\"\r\n                  />\r\n                </Link>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <NormalButton\r\n                  label=\"Save\"\r\n                  success={true}\r\n                  className=\"mr-2 col-12\"\r\n                  onClick={this.onSubmit}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  redeemPolicyList: state.customerPlus.redeemPolicyList,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      addRedeemPlolicySettings,\r\n      updateRedeemPlolicySettings,\r\n      getCommonApi,\r\n      getRedeemPlolicySettings,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const AddRedeemPolicy = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(AddRedeemPolicyClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}