{"ast":null,"code":"import _defineProperty from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalCheckbox,NormalButton,NormalSelect}from\"component/common\";import Cookies from\"universal-cookie\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import SimpleReactValidator from\"simple-react-validator\";import{login,getLoginSaloon}from\"redux/actions/auth\";import{history}from\"helpers/index\";import\"assets/scss/pages/login.scss\";import{Link}from\"react-router-dom\";import{withTranslation}from\"react-i18next\";import i18n from\"i18next\";var cookies=new Cookies();export var LoginClass=/*#__PURE__*/function(_Component){_inherits(LoginClass,_Component);var _super=_createSuper(LoginClass);function LoginClass(){var _this;_classCallCheck(this,LoginClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{salon:0,username:\"\",password:\"\"},rememberme:\"\",passwordVisible:false,salonList:[],langOptions:[{label:\"EN-US\",value:\"en\"},{label:\"ZH-SG\",value:\"zh_sg\"}],selectedLang:\"\",isMounthed:true};_this.updateState=function(data){if(_this.state.isMounthed)_this.setState(data);};_this.handleChange=function(_ref){var _ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields});};_this.handleChangeAndSubmit=function(_ref2){var _ref2$target=_ref2.target,value=_ref2$target.value,name=_ref2$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields},function(){_this.handleSubmit();});};_this.handleFirstLogin=function(event){event.preventDefault();if(_this.validator.allValid()){var _this$state=_this.state,formFields=_this$state.formFields,rememberme=_this$state.rememberme,salonList=_this$state.salonList;_this.props.login(formFields).then(function(res){var status=res.status,data=res.data;if(status===200){if(res.data.sites.length>1){var _iterator=_createForOfIteratorHelper(res.data.sites),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;salonList.push({value:key.id,label:key.itemsite_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({salonList:salonList});}else{formFields.salon=res.data.sites[0].id;_this.handleSubmit();}}});}else{_this.validator.showMessages();}};_this.toggle=function(key){_this.setState(function(prevState){return _defineProperty({},key,!prevState[key]);});};return _this;}_createClass(LoginClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounthed=false;}},{key:\"componentWillMount\",value:function componentWillMount(){var _localStorage$getItem;this.updateState({selectedLang:(_localStorage$getItem=localStorage.getItem(\"lang\"))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:\"en\"});this.validator=new SimpleReactValidator({// validators: {\n//   password: {\n//     message: 'The :attribute must be a valid format.',\n//     rule: (val, params, validator) => {\n//       return validator.helpers.testRegex(val, /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&]).{8,20}$/) && params.indexOf(val) === -1\n//     },\n//     messageReplace: (message, params) => message.replace('', this.helpers.toSentence(params)),\n//     required: true\n//   }\n// },\nelement:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message font-md\"},message);},autoForceUpdate:this});/*let { salonList } = this.state;\r\n    this.props.getLoginSaloon().then((res) => {\r\n      for (let key of res.data) {\r\n        salonList.push({ value: key.id, label: key.itemsite_desc })\r\n      }\r\n      this.setState({ salonList })\r\n    })*/}},{key:\"handleSubmit\",value:function handleSubmit(){// event.preventDefault();\nif(this.validator.allValid()){var _this$state2=this.state,formFields=_this$state2.formFields,rememberme=_this$state2.rememberme;this.props.login(formFields).then(function(res){var status=res.status,data=res.data;if(status===200){history.push(\"/admin/dashboard\");if(rememberme){var date=new Date();date.setTime(date.getTime()+48*60*60*1000);var dateString=date.toGMTString();cookies.set(\"emailId\",formFields.emailId,[{path:\"/\"},{expires:dateString}]);cookies.set(\"password\",formFields.password,[{path:\"/\"},{expires:dateString}]);}}});}else{this.validator.showMessages();}}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,formFields=_this$state3.formFields,passwordVisible=_this$state3.passwordVisible,rememberme=_this$state3.rememberme,salonList=_this$state3.salonList,langOptions=_this$state3.langOptions,selectedLang=_this$state3.selectedLang;var username=formFields.username,password=formFields.password,salon=formFields.salon;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{style:{position:\"absolute\",top:10,right:0}},/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item d-flex align-items-center position-relative\"},/*#__PURE__*/React.createElement(\"select\",{style:{background:\"white\",padding:\"3px\"},onChange:function onChange(e){i18n.changeLanguage(e.target.value);localStorage.setItem(\"lang\",e.target.value);_this2.updateState({selectedLang:e.target.value});}},langOptions.map(function(e){return/*#__PURE__*/React.createElement(\"option\",{value:e.value,selected:selectedLang==e.value},e.label);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"login-container h-100 py-5\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-left login-heading mb-5\"},t(\"Sign in to access BeauteSoft\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Username\",value:username,name:\"username\",onChange:this.handleChange}),t(\" \")),this.validator.message(\"Username\",username,\"required|string\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{type:passwordVisible?\"text\":\"password\",placeholder:\"Password\",value:password,name:\"password\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-addon right fs-14\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this2.toggle(\"passwordVisible\");},className:\"icon-\".concat(passwordVisible?\"eye\":\"eye-blocked\",\" cursor-pointer fs-24\")}),t(\" \")),t(\" \")),this.validator.message(\"Password\",password,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-center mb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"checkbox\"},/*#__PURE__*/React.createElement(NormalCheckbox,{value:\"\",label:\"Keep me signed in\",name:\"rememberme\",checked:rememberme,onChange:function onChange(){return _this2.toggle(\"rememberme\");}}),t(\" \")),/*#__PURE__*/React.createElement(Link,{className:\"d-flex align-items-center ml-2\",to:\"/auth/forgotPassword\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fs-13 text-right tc-primary link-text\"},t(\"Forgot Password\")),t(\" \")),t(\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-0 p-0 d-flex justify-content-center col-12\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"w-100\",onClick:this.handleFirstLogin,id:\"loginBtn\",label:\"LOGIN\",mainbg:true,className:\"mr-2 fs-14 col-12\"}),t(\" \")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),salonList.length>1&&/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4 pb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{placeholder:\"Please Select Site\",options:salonList,value:salon,name:\"salon\",onChange:this.handleChangeAndSubmit}),t(\" \")),this.validator.message(\"salon\",salon,\"required|string\")),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Copyrights (c) acy7lab.com.\"),/*#__PURE__*/React.createElement(\"p\",null,\" Licensed to Sequoia - Version 6.6.1\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Dated: 7.22\"),t(\" \")),t(\" \")),t(\" \"));}}]);return LoginClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({login:login,getLoginSaloon:getLoginSaloon},dispatch);};var component=LoginClass;export var Login=withTranslation()(connect(null,mapDispatchToProps)(component));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/pages/Auth/Login.js"],"names":["React","Component","NormalInput","NormalCheckbox","NormalButton","NormalSelect","Cookies","connect","bindActionCreators","SimpleReactValidator","login","getLoginSaloon","history","Link","withTranslation","i18n","cookies","LoginClass","state","formFields","salon","username","password","rememberme","passwordVisible","salonList","langOptions","label","value","selectedLang","isMounthed","updateState","data","setState","handleChange","target","name","Object","assign","handleChangeAndSubmit","handleSubmit","handleFirstLogin","event","preventDefault","validator","allValid","props","then","res","status","sites","length","key","push","id","itemsite_desc","showMessages","toggle","prevState","localStorage","getItem","element","message","autoForceUpdate","date","Date","setTime","getTime","dateString","toGMTString","set","emailId","path","expires","t","position","top","right","background","padding","e","changeLanguage","setItem","map","mapDispatchToProps","dispatch","component","Login"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalInput,\r\n  NormalCheckbox,\r\n  NormalButton,\r\n  NormalSelect,\r\n} from \"component/common\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { login, getLoginSaloon } from \"redux/actions/auth\";\r\nimport { history } from \"helpers/index\";\r\nimport \"assets/scss/pages/login.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport i18n from \"i18next\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nexport class LoginClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      salon: 0,\r\n      username: \"\",\r\n      password: \"\",\r\n    },\r\n    rememberme: \"\",\r\n    passwordVisible: false,\r\n    salonList: [],\r\n    langOptions: [\r\n      { label: \"EN-US\", value: \"en\" },\r\n      { label: \"ZH-SG\", value: \"zh_sg\" },\r\n    ],\r\n    selectedLang: \"\",\r\n    isMounthed: true,\r\n  };\r\n  updateState = (data) => {\r\n    if (this.state.isMounthed) this.setState(data);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounthed = false;\r\n  }\r\n  componentWillMount() {\r\n    this.updateState({ selectedLang: localStorage.getItem(\"lang\") ?? \"en\" });\r\n    this.validator = new SimpleReactValidator({\r\n      // validators: {\r\n      //   password: {\r\n      //     message: 'The :attribute must be a valid format.',\r\n      //     rule: (val, params, validator) => {\r\n      //       return validator.helpers.testRegex(val, /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&]).{8,20}$/) && params.indexOf(val) === -1\r\n      //     },\r\n      //     messageReplace: (message, params) => message.replace('', this.helpers.toSentence(params)),\r\n      //     required: true\r\n      //   }\r\n      // },\r\n      element: (message) => (\r\n        <span className=\"error-message font-md\">{message}</span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    /*let { salonList } = this.state;\r\n    this.props.getLoginSaloon().then((res) => {\r\n      for (let key of res.data) {\r\n        salonList.push({ value: key.id, label: key.itemsite_desc })\r\n      }\r\n      this.setState({ salonList })\r\n    })*/\r\n  }\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n  handleChangeAndSubmit = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.setState(\r\n      {\r\n        formFields,\r\n      },\r\n      () => {\r\n        this.handleSubmit();\r\n      }\r\n    );\r\n  };\r\n\r\n  handleFirstLogin = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (this.validator.allValid()) {\r\n      let { formFields, rememberme, salonList } = this.state;\r\n\r\n      this.props.login(formFields).then((res) => {\r\n        let { status, data } = res;\r\n        if (status === 200) {\r\n          if (res.data.sites.length > 1) {\r\n            for (let key of res.data.sites) {\r\n              salonList.push({ value: key.id, label: key.itemsite_desc });\r\n            }\r\n            this.setState({ salonList });\r\n          } else {\r\n            formFields.salon = res.data.sites[0].id;\r\n            this.handleSubmit();\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  };\r\n\r\n  handleSubmit() {\r\n    // event.preventDefault();\r\n\r\n    if (this.validator.allValid()) {\r\n      let { formFields, rememberme } = this.state;\r\n\r\n      this.props.login(formFields).then((res) => {\r\n        let { status, data } = res;\r\n        if (status === 200) {\r\n          history.push(\"/admin/dashboard\");\r\n          if (rememberme) {\r\n            let date = new Date();\r\n            date.setTime(date.getTime() + 48 * 60 * 60 * 1000);\r\n            let dateString = date.toGMTString();\r\n            cookies.set(\"emailId\", formFields.emailId, [\r\n              { path: \"/\" },\r\n              { expires: dateString },\r\n            ]);\r\n            cookies.set(\"password\", formFields.password, [\r\n              { path: \"/\" },\r\n              { expires: dateString },\r\n            ]);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  }\r\n\r\n  toggle = (key) => {\r\n    this.setState((prevState) => ({\r\n      [key]: !prevState[key],\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      formFields,\r\n      passwordVisible,\r\n      rememberme,\r\n      salonList,\r\n      langOptions,\r\n      selectedLang,\r\n    } = this.state;\r\n\r\n    let { username, password, salon } = formFields;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div style={{ position: \"absolute\", top: 10, right: 0 }}>\r\n          <li className=\"nav-item d-flex align-items-center position-relative\">\r\n            <select\r\n              style={{ background: \"white\", padding: \"3px\" }}\r\n              onChange={(e) => {\r\n                i18n.changeLanguage(e.target.value);\r\n                localStorage.setItem(\"lang\", e.target.value);\r\n                this.updateState({ selectedLang: e.target.value });\r\n              }}\r\n            >\r\n              {langOptions.map((e) => (\r\n                <option value={e.value} selected={selectedLang == e.value}>\r\n                  {e.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </li>\r\n        </div>\r\n        <div className=\"login-container h-100 py-5\">\r\n          <h1 className=\"text-left login-heading mb-5\">\r\n            {t(\"Sign in to access BeauteSoft\")}\r\n          </h1>\r\n\r\n          <div className=\"form-group mb-4 pb-3\">\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                placeholder=\"Username\"\r\n                value={username}\r\n                name=\"username\"\r\n                onChange={this.handleChange}\r\n              />\r\n              {t(\" \")}\r\n            </div>\r\n            {this.validator.message(\"Username\", username, \"required|string\")}\r\n          </div>\r\n          <div className=\"form-group mb-4 pb-3\">\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                type={passwordVisible ? \"text\" : \"password\"}\r\n                placeholder=\"Password\"\r\n                value={password}\r\n                name=\"password\"\r\n                onChange={this.handleChange}\r\n              />\r\n              <div className=\"input-group-addon right fs-14\">\r\n                <span\r\n                  onClick={() => this.toggle(\"passwordVisible\")}\r\n                  className={`icon-${\r\n                    passwordVisible ? \"eye\" : \"eye-blocked\"\r\n                  } cursor-pointer fs-24`}\r\n                ></span>\r\n                {t(\" \")}\r\n              </div>\r\n              {t(\" \")}\r\n            </div>\r\n            {/* {this.validator.message('Password', password, 'required|password')} */}\r\n            {this.validator.message(\"Password\", password, \"required\")}\r\n          </div>\r\n          <div className=\"d-flex justify-content-between align-items-center mb-5\">\r\n            <div className=\"checkbox\">\r\n              <NormalCheckbox\r\n                value=\"\"\r\n                label=\"Keep me signed in\"\r\n                name=\"rememberme\"\r\n                checked={rememberme}\r\n                onChange={() => this.toggle(\"rememberme\")}\r\n              />\r\n              {t(\" \")}\r\n            </div>\r\n            <Link\r\n              className=\"d-flex align-items-center ml-2\"\r\n              to=\"/auth/forgotPassword\"\r\n            >\r\n              <span className=\"fs-13 text-right tc-primary link-text\">\r\n                {t(\"Forgot Password\")}\r\n              </span>\r\n              {t(\" \")}\r\n            </Link>\r\n            {t(\" \")}\r\n          </div>\r\n\r\n          <div className=\"form-group mb-0 p-0 d-flex justify-content-center col-12\">\r\n            <NormalButton\r\n              buttonClass={\"w-100\"}\r\n              onClick={this.handleFirstLogin}\r\n              id=\"loginBtn\"\r\n              label=\"LOGIN\"\r\n              mainbg={true}\r\n              className=\"mr-2 fs-14 col-12\"\r\n            />\r\n            {t(\" \")}\r\n          </div>\r\n          <br />\r\n          <br />\r\n          {salonList.length > 1 && (\r\n            <div className=\"form-group mb-4 pb-3\">\r\n              <div className=\"input-group\">\r\n                <NormalSelect\r\n                  placeholder=\"Please Select Site\"\r\n                  options={salonList}\r\n                  value={salon}\r\n                  name=\"salon\"\r\n                  onChange={this.handleChangeAndSubmit}\r\n                />\r\n                {t(\" \")}\r\n              </div>\r\n              {this.validator.message(\"salon\", salon, \"required|string\")}\r\n            </div>\r\n          )}\r\n          <center>\r\n            <p>Copyrights (c) acy7lab.com.</p>\r\n            <p> Licensed to Sequoia - Version 6.6.1</p>\r\n            <br />\r\n            <p>Dated: 7.22</p>\r\n            {t(\" \")}\r\n          </center>\r\n          {t(\" \")}\r\n        </div>\r\n        {t(\" \")}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return bindActionCreators(\r\n    {\r\n      login,\r\n      getLoginSaloon,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nlet component = LoginClass;\r\n\r\nexport const Login = withTranslation()(\r\n  connect(null, mapDispatchToProps)(component)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}