{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalButton,NormalSelect,NormalModal}from\"component/common\";import{TableWrapper}from\"component/common\";import{NormalInput,NormalDate}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import{history}from\"helpers\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,commonPatchApi,commonUpdateApi}from\"redux/actions/common\";import{withTranslation}from\"react-i18next\";export var ConfirmBookingClass=/*#__PURE__*/function(_Component){_inherits(ConfirmBookingClass,_Component);var _super=_createSuper(ConfirmBookingClass);function ConfirmBookingClass(){var _this;_classCallCheck(this,ConfirmBookingClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Customer Name\"},{label:\"Appointment Date\",divClass:\"justify-content-end text-right\"},{label:\"Appointment Time\",divClass:\"justify-content-end text-right\"},{label:\"Status\"},{label:\"Customer Phone\"},{label:\"Staff Name\"},{label:\"Created Date & Time\",divClass:\"justify-content-end text-right\"},{label:\"Book\",divClass:\"justify-content-center text-center\"},{label:\"Delete\",divClass:\"justify-content-center text-center\"}],confirmBookingList:[],pageMeta:{},isConfirmOpen:false,SelectedId:\"\",formField:{bookingDate:new Date()},page:1,limit:10,SelectedItem:\"\"};_this.confirmBookingList=function(){var _this$state=_this.state,confirmBookingList=_this$state.confirmBookingList,pageMeta=_this$state.pageMeta,formField=_this$state.formField,page=_this$state.page,limit=_this$state.limit;var bookingDate=formField.bookingDate;_this.props.getCommonApi(\"confirmbooking/?date=\".concat(dateFormat(bookingDate,\"yyyy-mm-dd\"),\"&page=\").concat(page,\"&limit=\").concat(limit)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(res,\"transactionlistdsfdfaafg\");_context.next=3;return _this.setState({confirmBookingList:[]});case 3:confirmBookingList=res.data.dataList;pageMeta=res.data.meta.pagination;_this.setState({confirmBookingList:confirmBookingList,pageMeta:pageMeta});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pageNo){var page;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_this.state.page;page=pageNo.page;_context2.next=4;return _this.setState({page:page});case 4:_this.confirmBookingList();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleSelectedRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data,clickItem){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({SelectedItem:clickItem,selectedId:data.id});case 2:_this.handlecloseDialog();case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();_this.handlecloseDialog=function(){_this.setState(function(prevState){return{isConfirmOpen:!prevState.isConfirmOpen};});};_this.handleDatePick=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref4){var _ref4$target,value,name,formField;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref4$target=_ref4.target,value=_ref4$target.value,name=_ref4$target.name;formField=_this.state.formField;formField[name]=value;_context4.next=5;return _this.setState({formField:formField});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref5.apply(this,arguments);};}();_this.handleSearch=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this.setState({page:1});case 2:_this.confirmBookingList();case 3:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleSendBackConfirm=function(){try{var SelectedItem=_this.state.SelectedItem;var is_del=false;var is_book=false;if(SelectedItem===\"book\"){is_book=true;}else{is_del=true;}var body={is_del:is_del,is_book:is_book};_this.props.commonUpdateApi(\"confirmbooking/\".concat(_this.state.selectedId,\"/\"),body).then(function(res){_this.handlecloseDialog();_this.handleSearch();});}catch(e){console.log(e);}};return _this;}_createClass(ConfirmBookingClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.confirmBookingList();}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,headerDetails=_this$state2.headerDetails,pageMeta=_this$state2.pageMeta,confirmBookingList=_this$state2.confirmBookingList,isConfirmOpen=_this$state2.isConfirmOpen,formField=_this$state2.formField;var bookingDate=formField.bookingDate;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"confirm-booking container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row pb-md-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-4\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fw-500 h5 cursor-pointer\",onClick:function onClick(){return history.push(\"/admin/newappointment/\");}},t(\"Booking\"),\"\\xA0>\\xA0\",t(\"Confirm Booking\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(NormalDate,{value:bookingDate,name:\"bookingDate\",type:\"date\",onChange:this.handleDatePick,showDisabledMonthNavigation:true,showYearDropdown:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"confirm\",label:\"Search\",outline:false,onClick:this.handleSearch})))),/*#__PURE__*/React.createElement(\"div\",{className:\"py-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta},confirmBookingList&&confirmBookingList.length>0?confirmBookingList.map(function(dataitem,index){var appt_date=dataitem.appt_date,appt_fr_time=dataitem.appt_fr_time,appt_phone=dataitem.appt_phone,appt_status=dataitem.appt_status,cust_name=dataitem.cust_name,date_time=dataitem.date_time,emp_name=dataitem.emp_name,id=dataitem.id,is_book=dataitem.is_book,is_del=dataitem.is_del,itemsite_code=dataitem.itemsite_code;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},cust_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},appt_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},appt_fr_time)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},appt_status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},appt_phone)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},emp_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},date_time)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-0 ml-1\",mainbgrev:true,className:\"confirm fs-11\",label:t(\"Book\"),outline:false,onClick:function onClick(){return _this2.handleSelectedRow(dataitem,\"book\");}}))),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-0 ml-1\",resetbg:true,className:\"confirm fs-11\",label:t(\"Delete\"),outline:false,onClick:function onClick(){return _this2.handleSelectedRow(dataitem,\"delete\");}}))));}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},\"No data\")))),/*#__PURE__*/React.createElement(NormalModal,{className:\"multiple-appointment\",modal:isConfirmOpen//style={{ minWidth: \"30%\" }}\n,handleModal:function handleModal(){}},/*#__PURE__*/React.createElement(\"div\",{className:\"row m-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 h4 p-0\"},t(\"Confirm\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 h6\"},t(\"Are you sure want to update\"),\"?\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start mt-4 w-100\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",resetbg:true,className:\"col-12 multiple-customer\",label:\"Cancel\",onClick:this.handlecloseDialog}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbgrev:true,className:\"col-12 fs-15 multiple-customer\",label:\"Confirm\",onClick:this.handleSendBackConfirm})))))));}}]);return ConfirmBookingClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{tokenDetails:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonUpdateApi:commonUpdateApi,commonPatchApi:commonPatchApi},dispatch);};export var ConfirmBooking=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ConfirmBookingClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/NewAppointment/ConfirmBooking/index.js"],"names":["React","Component","NormalButton","NormalSelect","NormalModal","TableWrapper","NormalInput","NormalDate","dateFormat","history","connect","bindActionCreators","getCommonApi","commonPatchApi","commonUpdateApi","withTranslation","ConfirmBookingClass","state","headerDetails","label","divClass","confirmBookingList","pageMeta","isConfirmOpen","SelectedId","formField","bookingDate","Date","page","limit","SelectedItem","props","then","res","console","log","setState","data","dataList","meta","pagination","handlePagination","pageNo","handleSelectedRow","clickItem","selectedId","id","handlecloseDialog","prevState","handleDatePick","target","value","name","handleSearch","handleSendBackConfirm","is_del","is_book","body","e","t","push","length","map","dataitem","index","appt_date","appt_fr_time","appt_phone","appt_status","cust_name","date_time","emp_name","itemsite_code","mapStateToProps","tokenDetails","authStore","mapDispatchToProps","dispatch","ConfirmBooking"],"mappings":"2wBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,YAAT,CAAuBC,YAAvB,CAAqCC,WAArC,KAAwD,kBAAxD,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,kBAAxC,CACA,OAASC,UAAT,KAA2B,yBAA3B,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OACEC,YADF,CAEEC,cAFF,CAGEC,eAHF,KAIO,sBAJP,CAKA,OAASC,eAAT,KAAgC,eAAhC,CAEA,UAAaC,CAAAA,mBAAb,+WACEC,KADF,CACU,CACNC,aAAa,CAAE,CACb,CAAEC,KAAK,CAAE,eAAT,CADa,CAEb,CACEA,KAAK,CAAE,kBADT,CAEEC,QAAQ,CAAE,gCAFZ,CAFa,CAMb,CAAED,KAAK,CAAE,kBAAT,CAA6BC,QAAQ,CAAE,gCAAvC,CANa,CAOb,CAAED,KAAK,CAAE,QAAT,CAPa,CAQb,CAAEA,KAAK,CAAE,gBAAT,CARa,CASb,CAAEA,KAAK,CAAE,YAAT,CATa,CAUb,CACEA,KAAK,CAAE,qBADT,CAEEC,QAAQ,CAAE,gCAFZ,CAVa,CAcb,CAAED,KAAK,CAAE,MAAT,CAAiBC,QAAQ,CAAE,oCAA3B,CAda,CAeb,CAAED,KAAK,CAAE,QAAT,CAAmBC,QAAQ,CAAE,oCAA7B,CAfa,CADT,CAkBNC,kBAAkB,CAAE,EAlBd,CAmBNC,QAAQ,CAAE,EAnBJ,CAoBNC,aAAa,CAAE,KApBT,CAqBNC,UAAU,CAAE,EArBN,CAsBNC,SAAS,CAAE,CACTC,WAAW,CAAE,GAAIC,CAAAA,IAAJ,EADJ,CAtBL,CAyBNC,IAAI,CAAE,CAzBA,CA0BNC,KAAK,CAAE,EA1BD,CA2BNC,YAAY,CAAE,EA3BR,CADV,OAmCET,kBAnCF,CAmCuB,UAAM,CACzB,gBAA+D,MAAKJ,KAApE,CAAMI,kBAAN,aAAMA,kBAAN,CAA0BC,QAA1B,aAA0BA,QAA1B,CAAoCG,SAApC,aAAoCA,SAApC,CAA+CG,IAA/C,aAA+CA,IAA/C,CAAqDC,KAArD,aAAqDA,KAArD,CACA,GAAMH,CAAAA,WAAN,CAAsBD,SAAtB,CAAMC,WAAN,CAEA,MAAKK,KAAL,CACGnB,YADH,gCAE4BJ,UAAU,CAChCkB,WADgC,CAEhC,YAFgC,CAFtC,kBAKcE,IALd,mBAK4BC,KAL5B,GAOGG,IAPH,0FAOQ,iBAAMC,GAAN,kHACJC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAiB,0BAAjB,EADI,sBAEE,OAAKG,QAAL,CAAc,CAAEf,kBAAkB,CAAE,EAAtB,CAAd,CAFF,QAGJA,kBAAkB,CAAGY,GAAG,CAACI,IAAJ,CAASC,QAA9B,CACAhB,QAAQ,CAAGW,GAAG,CAACI,IAAJ,CAASE,IAAT,CAAcC,UAAzB,CACA,MAAKJ,QAAL,CAAc,CAAEf,kBAAkB,CAAlBA,kBAAF,CAAsBC,QAAQ,CAARA,QAAtB,CAAd,EALI,sDAPR,gEAcD,CArDH,OAuDEmB,gBAvDF,2FAuDqB,kBAAMC,MAAN,+HACXd,IADW,CACF,MAAKX,KADH,CACXW,IADW,CAEjBA,IAAI,CAAGc,MAAM,CAACd,IAAd,CAFiB,uBAGX,OAAKQ,QAAL,CAAc,CAClBR,IAAI,CAAJA,IADkB,CAAd,CAHW,QAMjB,MAAKP,kBAAL,GANiB,wDAvDrB,uEAgEEsB,iBAhEF,2FAgEsB,kBAAON,IAAP,CAAaO,SAAb,6IACZ,OAAKR,QAAL,CAAc,CAClBN,YAAY,CAAEc,SADI,CAElBC,UAAU,CAAER,IAAI,CAACS,EAFC,CAAd,CADY,QAKlB,MAAKC,iBAAL,GALkB,wDAhEtB,2EAuEEA,iBAvEF,CAuEsB,UAAM,CACxB,MAAKX,QAAL,CAAc,SAAAY,SAAS,QAAK,CAC1BzB,aAAa,CAAE,CAACyB,SAAS,CAACzB,aADA,CAAL,EAAvB,EAGD,CA3EH,OA6EE0B,cA7EF,2FA6EmB,sMAASC,MAAT,CAAmBC,KAAnB,cAAmBA,KAAnB,CAA0BC,IAA1B,cAA0BA,IAA1B,CACT3B,SADS,CACK,MAAKR,KADV,CACTQ,SADS,CAEfA,SAAS,CAAC2B,IAAD,CAAT,CAAkBD,KAAlB,CAFe,uBAGT,OAAKf,QAAL,CAAc,CAClBX,SAAS,CAATA,SADkB,CAAd,CAHS,yDA7EnB,uEAqFE4B,YArFF,sEAqFiB,+JACP,OAAKjB,QAAL,CAAc,CAClBR,IAAI,CAAE,CADY,CAAd,CADO,QAIb,MAAKP,kBAAL,GAJa,wDArFjB,SA2FEiC,qBA3FF,CA2F0B,UAAM,CAC5B,GAAI,CACF,GAAMxB,CAAAA,YAAN,CAAuB,MAAKb,KAA5B,CAAMa,YAAN,CACA,GAAIyB,CAAAA,MAAM,CAAG,KAAb,CACA,GAAIC,CAAAA,OAAO,CAAG,KAAd,CACA,GAAI1B,YAAY,GAAK,MAArB,CAA6B,CAC3B0B,OAAO,CAAG,IAAV,CACD,CAFD,IAEO,CACLD,MAAM,CAAG,IAAT,CACD,CAED,GAAIE,CAAAA,IAAI,CAAG,CAAEF,MAAM,CAAEA,MAAV,CAAkBC,OAAO,CAAEA,OAA3B,CAAX,CAEA,MAAKzB,KAAL,CACGjB,eADH,0BACqC,MAAKG,KAAL,CAAW4B,UADhD,MAC+DY,IAD/D,EAEGzB,IAFH,CAEQ,SAAAC,GAAG,CAAI,CACX,MAAKc,iBAAL,GACA,MAAKM,YAAL,GACD,CALH,EAMD,CAAC,MAAOK,CAAP,CAAU,CACVxB,OAAO,CAACC,GAAR,CAAYuB,CAAZ,EACD,CACF,CAjHH,gFA+BE,4BAAoB,CAClB,KAAKrC,kBAAL,GACD,CAjCH,sBAkHE,iBAAS,iBACP,iBAMI,KAAKJ,KANT,CACEC,aADF,cACEA,aADF,CAEEI,QAFF,cAEEA,QAFF,CAGED,kBAHF,cAGEA,kBAHF,CAIEE,aAJF,cAIEA,aAJF,CAKEE,SALF,cAKEA,SALF,CAOA,GAAMC,CAAAA,WAAN,CAAsBD,SAAtB,CAAMC,WAAN,CACA,GAAMiC,CAAAA,CAAN,CAAY,KAAK5B,KAAjB,CAAM4B,CAAN,CACA,mBACE,2BAAK,SAAS,CAAC,iCAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,2BAAK,SAAS,CAAC,eAAf,eACE,yBACE,SAAS,CAAC,0BADZ,CAEE,OAAO,CAAE,yBAAMlD,CAAAA,OAAO,CAACmD,IAAR,CAAa,wBAAb,CAAN,EAFX,EAIGD,CAAC,CAAC,SAAD,CAJJ,aAIiCA,CAAC,mBAJlC,CADF,CADF,CADF,cAWE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,4BAAf,eACE,2BAAK,SAAS,CAAC,eAAf,eACE,2BAAK,SAAS,CAAC,EAAf,eACE,oBAAC,UAAD,EACE,KAAK,CAAEjC,WADT,CAEE,IAAI,CAAC,aAFP,CAGE,IAAI,CAAC,MAHP,CAIE,QAAQ,CAAE,KAAKuB,cAJjB,CAKE,2BAA2B,KAL7B,CAME,gBAAgB,CAAE,IANpB,EADF,CADF,CADF,cAaE,2BAAK,SAAS,CAAC,iBAAf,eACE,oBAAC,YAAD,EACE,MAAM,CAAE,IADV,CAEE,SAAS,CAAC,SAFZ,CAGE,KAAK,CAAC,QAHR,CAIE,OAAO,CAAE,KAJX,CAKE,OAAO,CAAE,KAAKI,YALhB,EADF,CAbF,CADF,CAXF,cAoCE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,oBAAC,YAAD,EACE,aAAa,CAAEnC,aADjB,CAEE,YAAY,CAAE,KAAKuB,gBAFrB,CAGE,QAAQ,CAAEnB,QAHZ,EAKGD,kBAAkB,EAAIA,kBAAkB,CAACwC,MAAnB,CAA4B,CAAlD,CACCxC,kBAAkB,CAACyC,GAAnB,CAAuB,SAACC,QAAD,CAAWC,KAAX,CAAqB,CAC1C,GACEC,CAAAA,SADF,CAYIF,QAZJ,CACEE,SADF,CAEEC,YAFF,CAYIH,QAZJ,CAEEG,YAFF,CAGEC,UAHF,CAYIJ,QAZJ,CAGEI,UAHF,CAIEC,WAJF,CAYIL,QAZJ,CAIEK,WAJF,CAKEC,SALF,CAYIN,QAZJ,CAKEM,SALF,CAMEC,SANF,CAYIP,QAZJ,CAMEO,SANF,CAOEC,QAPF,CAYIR,QAZJ,CAOEQ,QAPF,CAQEzB,EARF,CAYIiB,QAZJ,CAQEjB,EARF,CASEU,OATF,CAYIO,QAZJ,CASEP,OATF,CAUED,MAVF,CAYIQ,QAZJ,CAUER,MAVF,CAWEiB,aAXF,CAYIT,QAZJ,CAWES,aAXF,CAaA,mBACE,0BAAI,GAAG,CAAER,KAAT,eACE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BK,SAA5B,CADF,CADF,cAIE,2CACE,2BAAK,SAAS,CAAC,YAAf,EAA6BJ,SAA7B,CADF,CAJF,cAOE,2CACE,2BAAK,SAAS,CAAC,YAAf,EAA6BC,YAA7B,CADF,CAPF,cAUE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BE,WAA5B,CADF,CAVF,cAaE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BD,UAA5B,CADF,CAbF,cAgBE,2CACE,2BAAK,SAAS,CAAC,WAAf,EAA4BI,QAA5B,CADF,CAhBF,cAmBE,2CACE,2BAAK,SAAS,CAAC,YAAf,EAA6BD,SAA7B,CADF,CAnBF,cAsBE,0BAAI,SAAS,CAAC,mBAAd,eACE,2BAAK,SAAS,CAAC,+BAAf,eACE,oBAAC,YAAD,EACE,WAAW,CAAE,WADf,CAEE,SAAS,CAAE,IAFb,CAGE,SAAS,CAAC,eAHZ,CAIE,KAAK,CAAEX,CAAC,CAAC,MAAD,CAJV,CAKE,OAAO,CAAE,KALX,CAME,OAAO,CAAE,yBACP,CAAA,MAAI,CAAChB,iBAAL,CAAuBoB,QAAvB,CAAiC,MAAjC,CADO,EANX,EADF,CADF,CAtBF,cAoCE,0BAAI,SAAS,CAAC,mBAAd,eACE,2BAAK,SAAS,CAAC,+BAAf,eACE,oBAAC,YAAD,EACE,WAAW,CAAE,WADf,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAC,eAHZ,CAIE,KAAK,CAAEJ,CAAC,CAAC,QAAD,CAJV,CAKE,OAAO,CAAE,KALX,CAME,OAAO,CAAE,yBACP,CAAA,MAAI,CAAChB,iBAAL,CAAuBoB,QAAvB,CAAiC,QAAjC,CADO,EANX,EADF,CADF,CApCF,CADF,CAqDD,CAnED,CADD,cAsEC,2CACE,0BAAI,OAAO,CAAC,IAAZ,eACE,2BAAK,SAAS,CAAC,aAAf,YADF,CADF,CA3EJ,CADF,cAoFE,oBAAC,WAAD,EACE,SAAS,CAAE,sBADb,CAEE,KAAK,CAAExC,aACP;AAHF,CAIE,WAAW,CAAE,sBAAM,CAAE,CAJvB,eAME,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,eAAf,EAAgCoC,CAAC,CAAC,SAAD,CAAjC,CADF,cAGE,2BAAK,SAAS,CAAC,WAAf,EACGA,CAAC,CAAC,6BAAD,CADJ,KAHF,cAOE,2BAAK,SAAS,CAAC,yCAAf,eACE,oBAAC,YAAD,EACE,WAAW,CAAE,MADf,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAC,0BAHZ,CAIE,KAAK,CAAE,QAJT,CAKE,OAAO,CAAE,KAAKZ,iBALhB,EADF,cAQE,oBAAC,YAAD,EACE,WAAW,CAAE,MADf,CAEE,SAAS,CAAE,IAFb,CAGE,SAAS,CAAC,gCAHZ,CAIE,KAAK,CAAE,SAJT,CAKE,OAAO,CAAE,KAAKO,qBALhB,EARF,CAPF,CANF,CApFF,CADF,CApCF,CADF,CA6JD,CAzRH,iCAAyCrD,SAAzC,EA4RA,GAAMwE,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAxD,KAAK,QAAK,CAChCyD,YAAY,CAAEzD,KAAK,CAAC0D,SAAN,CAAgBD,YADE,CAAL,EAA7B,CAIA,GAAME,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAOlE,CAAAA,kBAAkB,CACvB,CACEC,YAAY,CAAZA,YADF,CAEEE,eAAe,CAAfA,eAFF,CAGED,cAAc,CAAdA,cAHF,CADuB,CAMvBgE,QANuB,CAAzB,CAQD,CATD,CAWA,MAAO,IAAMC,CAAAA,cAAc,CAAG/D,eAAe,GAC3CL,OAAO,CAAC+D,eAAD,CAAkBG,kBAAlB,CAAP,CAA6C5D,mBAA7C,CAD2C,CAAtC","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NormalButton, NormalSelect, NormalModal } from \"component/common\";\r\nimport { TableWrapper } from \"component/common\";\r\nimport { NormalInput, NormalDate } from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  commonPatchApi,\r\n  commonUpdateApi,\r\n} from \"redux/actions/common\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class ConfirmBookingClass extends Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Customer Name\" },\r\n      {\r\n        label: \"Appointment Date\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Appointment Time\", divClass: \"justify-content-end text-right\" },\r\n      { label: \"Status\" },\r\n      { label: \"Customer Phone\" },\r\n      { label: \"Staff Name\" },\r\n      {\r\n        label: \"Created Date & Time\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Book\", divClass: \"justify-content-center text-center\" },\r\n      { label: \"Delete\", divClass: \"justify-content-center text-center\" },\r\n    ],\r\n    confirmBookingList: [],\r\n    pageMeta: {},\r\n    isConfirmOpen: false,\r\n    SelectedId: \"\",\r\n    formField: {\r\n      bookingDate: new Date(),\r\n    },\r\n    page: 1,\r\n    limit: 10,\r\n    SelectedItem: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.confirmBookingList();\r\n  }\r\n\r\n  confirmBookingList = () => {\r\n    let { confirmBookingList, pageMeta, formField, page, limit } = this.state;\r\n    let { bookingDate } = formField;\r\n\r\n    this.props\r\n      .getCommonApi(\r\n        `confirmbooking/?date=${dateFormat(\r\n          bookingDate,\r\n          \"yyyy-mm-dd\"\r\n        )}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(async res => {\r\n        console.log(res, \"transactionlistdsfdfaafg\");\r\n        await this.setState({ confirmBookingList: [] });\r\n        confirmBookingList = res.data.dataList;\r\n        pageMeta = res.data.meta.pagination;\r\n        this.setState({ confirmBookingList, pageMeta });\r\n      });\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.confirmBookingList();\r\n  };\r\n\r\n  handleSelectedRow = async (data, clickItem) => {\r\n    await this.setState({\r\n      SelectedItem: clickItem,\r\n      selectedId: data.id,\r\n    });\r\n    this.handlecloseDialog();\r\n  };\r\n  handlecloseDialog = () => {\r\n    this.setState(prevState => ({\r\n      isConfirmOpen: !prevState.isConfirmOpen,\r\n    }));\r\n  };\r\n\r\n  handleDatePick = async ({ target: { value, name } }) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    await this.setState({\r\n      formField,\r\n    });\r\n  };\r\n\r\n  handleSearch = async () => {\r\n    await this.setState({\r\n      page: 1,\r\n    });\r\n    this.confirmBookingList();\r\n  };\r\n  handleSendBackConfirm = () => {\r\n    try {\r\n      let { SelectedItem } = this.state;\r\n      let is_del = false;\r\n      let is_book = false;\r\n      if (SelectedItem === \"book\") {\r\n        is_book = true;\r\n      } else {\r\n        is_del = true;\r\n      }\r\n\r\n      let body = { is_del: is_del, is_book: is_book };\r\n\r\n      this.props\r\n        .commonUpdateApi(`confirmbooking/${this.state.selectedId}/`, body)\r\n        .then(res => {\r\n          this.handlecloseDialog();\r\n          this.handleSearch();\r\n        });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      pageMeta,\r\n      confirmBookingList,\r\n      isConfirmOpen,\r\n      formField,\r\n    } = this.state;\r\n    let { bookingDate } = formField;\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"confirm-booking container-fluid\">\r\n        <div className=\"row pb-md-2\">\r\n          <div className=\"col-md-3 mb-4\">\r\n            <p\r\n              className=\"fw-500 h5 cursor-pointer\"\r\n              onClick={() => history.push(\"/admin/newappointment/\")}\r\n            >\r\n              {t(\"Booking\")}&nbsp;&gt;&nbsp;{t(`Confirm Booking`)}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-12\">\r\n          <div className=\"d-flex justify-content-end\">\r\n            <div className=\"col-md-2 mb-3\">\r\n              <div className=\"\">\r\n                <NormalDate\r\n                  value={bookingDate}\r\n                  name=\"bookingDate\"\r\n                  type=\"date\"\r\n                  onChange={this.handleDatePick}\r\n                  showDisabledMonthNavigation\r\n                  showYearDropdown={true}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-2 col-12\">\r\n              <NormalButton\r\n                mainbg={true}\r\n                className=\"confirm\"\r\n                label=\"Search\"\r\n                outline={false}\r\n                onClick={this.handleSearch}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"py-2\">\r\n          <div className=\"table-container\">\r\n            <TableWrapper\r\n              headerDetails={headerDetails}\r\n              queryHandler={this.handlePagination}\r\n              pageMeta={pageMeta}\r\n            >\r\n              {confirmBookingList && confirmBookingList.length > 0 ? (\r\n                confirmBookingList.map((dataitem, index) => {\r\n                  let {\r\n                    appt_date,\r\n                    appt_fr_time,\r\n                    appt_phone,\r\n                    appt_status,\r\n                    cust_name,\r\n                    date_time,\r\n                    emp_name,\r\n                    id,\r\n                    is_book,\r\n                    is_del,\r\n                    itemsite_code,\r\n                  } = dataitem;\r\n                  return (\r\n                    <tr key={index}>\r\n                      <td>\r\n                        <div className=\"text-left\">{cust_name}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-right\">{appt_date}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-right\">{appt_fr_time}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-left\">{appt_status}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-left\">{appt_phone}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-left\">{emp_name}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-right\">{date_time}</div>\r\n                      </td>\r\n                      <td className=\"position-relative\">\r\n                        <div className=\"d-flex justify-content-center\">\r\n                          <NormalButton\r\n                            buttonClass={\"mx-0 ml-1\"}\r\n                            mainbgrev={true}\r\n                            className=\"confirm fs-11\"\r\n                            label={t(\"Book\")}\r\n                            outline={false}\r\n                            onClick={() =>\r\n                              this.handleSelectedRow(dataitem, \"book\")\r\n                            }\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"position-relative\">\r\n                        <div className=\"d-flex justify-content-center\">\r\n                          <NormalButton\r\n                            buttonClass={\"mx-0 ml-1\"}\r\n                            resetbg={true}\r\n                            className=\"confirm fs-11\"\r\n                            label={t(\"Delete\")}\r\n                            outline={false}\r\n                            onClick={() =>\r\n                              this.handleSelectedRow(dataitem, \"delete\")\r\n                            }\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"12\">\r\n                    <div className=\"text-center\">No data</div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </TableWrapper>\r\n\r\n            <NormalModal\r\n              className={\"multiple-appointment\"}\r\n              modal={isConfirmOpen}\r\n              //style={{ minWidth: \"30%\" }}\r\n              handleModal={() => {}}\r\n            >\r\n              <div className=\"row m-2\">\r\n                <div className=\"col-12 h4 p-0\">{t(\"Confirm\")}</div>\r\n\r\n                <div className=\"col-12 h6\">\r\n                  {t(\"Are you sure want to update\")}?\r\n                </div>\r\n\r\n                <div className=\"d-flex justify-content-start mt-4 w-100\">\r\n                  <NormalButton\r\n                    buttonClass={\"mx-2\"}\r\n                    resetbg={true}\r\n                    className=\"col-12 multiple-customer\"\r\n                    label={\"Cancel\"}\r\n                    onClick={this.handlecloseDialog}\r\n                  />\r\n                  <NormalButton\r\n                    buttonClass={\"mx-2\"}\r\n                    mainbgrev={true}\r\n                    className=\"col-12 fs-15 multiple-customer\"\r\n                    label={\"Confirm\"}\r\n                    onClick={this.handleSendBackConfirm}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </NormalModal>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetails: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonUpdateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ConfirmBooking = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ConfirmBookingClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}