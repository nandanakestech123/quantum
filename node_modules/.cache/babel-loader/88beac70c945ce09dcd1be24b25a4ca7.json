{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalButton,TableWrapper,NormalSelect,NormalTextarea,NormalCheckbox}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,commonUpdateApi,commonPatchApi}from\"redux/actions/common\";import SimpleReactValidator from\"simple-react-validator\";import{Toast}from\"service/toast\";import\"./style.scss\";import{withTranslation}from\"react-i18next\";export var ItemDiscountPopupClass=/*#__PURE__*/function(_Component){_inherits(ItemDiscountPopupClass,_Component);var _super=_createSuper(ItemDiscountPopupClass);function ItemDiscountPopupClass(){var _this;_classCallCheck(this,ItemDiscountPopupClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={item_data:{item_name:\"\"},quantity:0,discount_reason_options:[],discount_reason:null,discount_reasons:[],unit_price:0,unit_price_after_discount:0,total_after_discount:0,deposit:0,discount:0,is_percentage:\"1\",discountFields:{discount:0,discount_amt:0,disc_reason:\"182\",discreason_txt:\"\"},discount_price_txt:\"\",discType:[{value:1,label:\"%\"},{value:2,label:\"$\"}]};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});};_this.componentDidMount=function(){_this.getDiscountInfo();_this.getDiscountReasons();};_this.handleClear=function(){_this.setState({item_data:{item_name:\"\"},quantity:0,discount_reason_options:[],discount_reason:null,unit_price:0,unit_price_after_discount:0,total_after_discount:0,deposit:0,discount:0,discountFields:{discount:0,discount_amt:0,disc_reason:\"182\",discreason_txt:null},discount_price_txt:\"\",is_percentage:\"1\"});};_this.getDiscountReasons=function(){var discount_reason_options=_this.state.discount_reason_options;_this.props.getCommonApi(\"paymentremarks/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;discount_reason_options.push({value:value.id,label:value.r_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({discount_reason_options:discount_reason_options});}});};_this.getDiscountInfo=function(){var _this$state=_this.state,item_data=_this$state.item_data,quantity=_this$state.quantity,unit_price=_this$state.unit_price,unit_price_after_discount=_this$state.unit_price_after_discount,deposit=_this$state.deposit,total_after_discount=_this$state.total_after_discount,discount_reasons=_this$state.discount_reasons;_this.props.getCommonApi(\"cartpopup/\".concat(_this.props.cartId,\"/\")).then(function(key){var status=key.status,data=key.data;console.log(data,\"cartdiscountdatapopup\");if(status==\"200\"){item_data[\"item_name\"]=data.itemdesc;quantity=data.quantity;unit_price=data.price;unit_price_after_discount=data.discount_price;deposit=data.deposit;total_after_discount=data.trans_amt;discount_reasons=data.disc_lst;_this.setState({item_data:item_data,quantity:quantity,unit_price:unit_price,unit_price_after_discount:unit_price_after_discount,deposit:deposit,total_after_discount:total_after_discount,discount_reasons:discount_reasons});}});};_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,_this$state2,discountFields,deposit,discount_price_txt,is_percentage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;_this$state2=_this.state,discountFields=_this$state2.discountFields,deposit=_this$state2.deposit,discount_price_txt=_this$state2.discount_price_txt,is_percentage=_this$state2.is_percentage;discountFields[name]=value;if(name===\"discount_price_txt\"){discount_price_txt=value;_this.setState({discount_price_txt:discount_price_txt});}if(name==\"is_percentage\"){is_percentage=value;_this.setState({is_percentage:is_percentage});}if(name===\"disc_reason\"){discountFields[\"discreason_txt\"]=\"\";_this.setState({discountFields:discountFields});}_context.next=8;return _this.setState({discountFields:discountFields});case 8:if(name===\"deposit\"){deposit=value;_this.setState({deposit:deposit});}case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleApply=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$state3,discountFields,unit_price_after_discount,discount_price_txt,is_percentage,discreason_text,body;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:debugger;_this$state3=_this.state,discountFields=_this$state3.discountFields,unit_price_after_discount=_this$state3.unit_price_after_discount,discount_price_txt=_this$state3.discount_price_txt,is_percentage=_this$state3.is_percentage;if(!(Number(discount_price_txt)>0)){_context2.next=35;break;}if(!(Number(is_percentage)==1)){_context2.next=15;break;}if(!(discountFields.disc_reason&&discountFields.disc_reason!=\"\")){_context2.next=11;break;}// if (\n//   Number(discountFields.disc_reason) != 182 ||\n//   (Number(discountFields.disc_reason) == 182 &&\n//     discountFields.discreason_txt != \"\")\n// ) {\ndiscountFields[\"discount_amt\"]=Number(Number(unit_price_after_discount)/100*Number(discount_price_txt));discountFields[\"discount\"]=Number(Number(discountFields[\"discount_amt\"])/Number(unit_price_after_discount)*100);_context2.next=9;return _this.setState({discountFields:discountFields});case 9:_context2.next=13;break;case 11:Toast({type:\"error\",message:\"Please select Discount Reason\"});return _context2.abrupt(\"return\",false);case 13:_context2.next=29;break;case 15:if(!(Number(is_percentage)==2)){_context2.next=27;break;}if(!(discountFields.disc_reason&&discountFields.disc_reason!=\"\")){_context2.next=23;break;}// if (\n//   Number(discountFields.disc_reason) != 182 ||\n//   (Number(discountFields.disc_reason) == 182 &&\n//     discountFields.discreason_txt != \"\")\n// ) {\ndiscountFields[\"discount_amt\"]=Number(discount_price_txt);discountFields[\"discount\"]=null;_context2.next=21;return _this.setState({discountFields:discountFields});case 21:_context2.next=25;break;case 23:Toast({type:\"error\",message:\"Please select Discount Reason\"});return _context2.abrupt(\"return\",false);case 25:_context2.next=29;break;case 27:Toast({type:\"error\",message:\"Please select Discount Type\"});return _context2.abrupt(\"return\",false);case 29:discreason_text=\"\";if(Number(discountFields.disc_reason)==182){discreason_text=\"others\";}else{discreason_text=\"\";}body={discount:Number(discountFields.discount),discount_amt:Number(discountFields.discount_amt),disc_reason:Number(discountFields.disc_reason),discreason_txt:discreason_text};_this.props.commonUpdateApi(\"itemcart/\".concat(_this.props.cartId,\"/?disc_add=1&disc_reset=0\"),body).then(function(key){_this.handleClear();_this.getDiscountInfo();_this.getDiscountReasons();});_context2.next=37;break;case 35:Toast({type:\"error\",message:\"Discount should be greater than zero\"});return _context2.abrupt(\"return\",false);case 37:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleReset=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var discountFields,body;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:discountFields=_this.state.discountFields;body={discount:Number(discountFields.discount),discount_amt:Number(discountFields.discount_amt),disc_reason:Number(discountFields.disc_reason),discreason_txt:discountFields.discreason_txt};_this.props.commonUpdateApi(\"itemcart/\".concat(_this.props.cartId,\"/?disc_add=0&disc_reset=1\"),body).then(function(key){_this.handleClear();_this.getDiscountInfo();_this.getDiscountReasons();});case 3:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleSubmit=function(){var _this$state4=_this.state,deposit=_this$state4.deposit,total_after_discount=_this$state4.total_after_discount;var body={};if(Number(deposit)>Number(total_after_discount)){Toast({type:\"error\",message:\"Deposit amount should be less than or equal to transaction amount\"});}else{body={deposit:Number(deposit).toFixed(2)};_this.props.commonPatchApi(\"cartpopup/\".concat(_this.props.cartId,\"/\"),body).then(function(key){var status=key.status;console.log(key,\"response for submit\");if(status==\"200\"){_this.props.handleModal();}});}};return _this;}_createClass(ItemDiscountPopupClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state5=this.state,item_data=_this$state5.item_data,quantity=_this$state5.quantity,unit_price=_this$state5.unit_price,is_percentage=_this$state5.is_percentage,deposit=_this$state5.deposit,discount_reason_options=_this$state5.discount_reason_options,discount_reasons=_this$state5.discount_reasons,total_after_discount=_this$state5.total_after_discount,unit_price_after_discount=_this$state5.unit_price_after_discount,discountFields=_this$state5.discountFields,discount_price_txt=_this$state5.discount_price_txt,discType=_this$state5.discType;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-9 col-12\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"text-secondary fs-18\"},t(\"Item Discount\")),/*#__PURE__*/React.createElement(\"h4\",null,item_data.item_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:false,className:\"col-12 fs-15 submit-btn\",label:\"Submit\",onClick:function onClick(){return _this2.handleSubmit();}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-5 pr-5 mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Quantity\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:quantity,type:\"number\",name:\"quantity\",onChange:function onChange(){},disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Unit Price\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",value:unit_price,type:\"number\",name:\"unit_price\",onChange:function onChange(){},disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Discount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"\",value:discount_price_txt,type:\"number\",name:\"discount_price_txt\",onChange:this.handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text pb-2\"},t(\"Type\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{className:\"col\",options:discType,value:is_percentage,name:\"is_percentage\",onChange:this.handleChange}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Discount Reason\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:discount_reason_options,value:discountFields.disc_reason,name:\"disc_reason\",onChange:this.handleChange})),this.validator.message(\"discount reason\",discountFields.disc_reason,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-4 pt-3\"},/*#__PURE__*/React.createElement(NormalButton,{applybg:true,className:\"col\",label:\"Apply\",onClick:this.handleApply})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mt-4 pt-3\"},/*#__PURE__*/React.createElement(NormalButton,{resetbg:true,className:\"col\",label:\"Reset\",onClick:this.handleReset}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Discount List\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-12 w-100 bg-light p-3 border\"},discount_reasons&&discount_reasons.length>0&&discount_reasons.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},item.remark?item.remark:\"OTHERS\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},item.disc_per,\" %\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},\"$ \",item.disc_amt)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalCheckbox,{name:\"transac\",label:\"Trans.\",checked:item.transac,value:item.transac,onChange:function onChange(){}})));}),!discount_reasons||discount_reasons.length<=0?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},t(\"No record found\")):null))),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Unit Price After Discount\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12 \"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},unit_price_after_discount))),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Total After Discount\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},quantity,\" * \",unit_price_after_discount)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},total_after_discount))),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-12\"},/*#__PURE__*/React.createElement(\"h6\",null,t(\"Deposit\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},/*#__PURE__*/React.createElement(NormalInput,{value:deposit,name:\"deposit\",onChange:this.handleChange})))))));}}]);return ItemDiscountPopupClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonUpdateApi:commonUpdateApi,commonPatchApi:commonPatchApi},dispatch);};export var ItemDiscountPopup=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ItemDiscountPopupClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/cart/ItemDiscountPopup.js"],"names":["React","Component","NormalInput","NormalButton","TableWrapper","NormalSelect","NormalTextarea","NormalCheckbox","connect","bindActionCreators","getCommonApi","commonUpdateApi","commonPatchApi","SimpleReactValidator","Toast","withTranslation","ItemDiscountPopupClass","state","item_data","item_name","quantity","discount_reason_options","discount_reason","discount_reasons","unit_price","unit_price_after_discount","total_after_discount","deposit","discount","is_percentage","discountFields","discount_amt","disc_reason","discreason_txt","discount_price_txt","discType","value","label","componentWillMount","validator","element","message","autoForceUpdate","componentDidMount","getDiscountInfo","getDiscountReasons","handleClear","setState","props","then","key","status","data","push","id","r_desc","cartId","console","log","itemdesc","price","discount_price","trans_amt","disc_lst","handleChange","target","name","handleApply","Number","type","discreason_text","body","handleReset","handleSubmit","toFixed","handleModal","t","length","map","item","index","remark","disc_per","disc_amt","transac","mapStateToProps","basicApptDetail","appointment","mapDispatchToProps","dispatch","ItemDiscountPopup"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalInput,\r\n  NormalButton,\r\n  TableWrapper,\r\n  NormalSelect,\r\n  NormalTextarea,\r\n  NormalCheckbox,\r\n} from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  commonUpdateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class ItemDiscountPopupClass extends Component {\r\n  state = {\r\n    item_data: {\r\n      item_name: \"\",\r\n    },\r\n    quantity: 0,\r\n    discount_reason_options: [],\r\n    discount_reason: null,\r\n    discount_reasons: [],\r\n    unit_price: 0,\r\n    unit_price_after_discount: 0,\r\n    total_after_discount: 0,\r\n    deposit: 0,\r\n    discount: 0,\r\n    is_percentage: \"1\",\r\n    discountFields: {\r\n      discount: 0,\r\n      discount_amt: 0,\r\n      disc_reason: \"182\",\r\n      discreason_txt: \"\",\r\n    },\r\n    discount_price_txt: \"\",\r\n    discType: [\r\n      { value: 1, label: \"%\" },\r\n      { value: 2, label: \"$\" },\r\n    ],\r\n  };\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n  componentDidMount = () => {\r\n    this.getDiscountInfo();\r\n    this.getDiscountReasons();\r\n  };\r\n  handleClear = () => {\r\n    this.setState({\r\n      item_data: {\r\n        item_name: \"\",\r\n      },\r\n      quantity: 0,\r\n      discount_reason_options: [],\r\n      discount_reason: null,\r\n      unit_price: 0,\r\n      unit_price_after_discount: 0,\r\n      total_after_discount: 0,\r\n      deposit: 0,\r\n      discount: 0,\r\n      discountFields: {\r\n        discount: 0,\r\n        discount_amt: 0,\r\n        disc_reason: \"182\",\r\n        discreason_txt: null,\r\n      },\r\n      discount_price_txt: \"\",\r\n      is_percentage: \"1\",\r\n    });\r\n  };\r\n  getDiscountReasons = () => {\r\n    let { discount_reason_options } = this.state;\r\n\r\n    this.props.getCommonApi(`paymentremarks/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          discount_reason_options.push({\r\n            value: value.id,\r\n            label: value.r_desc,\r\n          });\r\n        }\r\n        this.setState({ discount_reason_options });\r\n      }\r\n    });\r\n  };\r\n  getDiscountInfo = () => {\r\n    let {\r\n      item_data,\r\n      quantity,\r\n      unit_price,\r\n      unit_price_after_discount,\r\n      deposit,\r\n      total_after_discount,\r\n      discount_reasons,\r\n    } = this.state;\r\n    this.props.getCommonApi(`cartpopup/${this.props.cartId}/`).then(key => {\r\n      let { status, data } = key;\r\n      console.log(data, \"cartdiscountdatapopup\");\r\n      if (status == \"200\") {\r\n        item_data[\"item_name\"] = data.itemdesc;\r\n        quantity = data.quantity;\r\n        unit_price = data.price;\r\n        unit_price_after_discount = data.discount_price;\r\n        deposit = data.deposit;\r\n        total_after_discount = data.trans_amt;\r\n        discount_reasons = data.disc_lst;\r\n        this.setState({\r\n          item_data,\r\n          quantity,\r\n          unit_price,\r\n          unit_price_after_discount,\r\n          deposit,\r\n          total_after_discount,\r\n          discount_reasons,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { discountFields, deposit, discount_price_txt, is_percentage } =\r\n      this.state;\r\n    discountFields[name] = value;\r\n\r\n    if (name === \"discount_price_txt\") {\r\n      discount_price_txt = value;\r\n      this.setState({\r\n        discount_price_txt,\r\n      });\r\n    }\r\n    if (name == \"is_percentage\") {\r\n      is_percentage = value;\r\n      this.setState({\r\n        is_percentage,\r\n      });\r\n    }\r\n    if (name === \"disc_reason\") {\r\n      discountFields[\"discreason_txt\"] = \"\";\r\n      this.setState({\r\n        discountFields,\r\n      });\r\n    }\r\n    await this.setState({\r\n      discountFields,\r\n    });\r\n\r\n    if (name === \"deposit\") {\r\n      deposit = value;\r\n\r\n      this.setState({\r\n        deposit,\r\n      });\r\n    }\r\n  };\r\n  handleApply = async () => {\r\n    debugger;\r\n    let {\r\n      discountFields,\r\n      unit_price_after_discount,\r\n      discount_price_txt,\r\n      is_percentage,\r\n    } = this.state;\r\n\r\n    if (Number(discount_price_txt) > 0) {\r\n      if (Number(is_percentage) == 1) {\r\n        if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\r\n          // if (\r\n          //   Number(discountFields.disc_reason) != 182 ||\r\n          //   (Number(discountFields.disc_reason) == 182 &&\r\n          //     discountFields.discreason_txt != \"\")\r\n          // ) {\r\n          discountFields[\"discount_amt\"] = Number(\r\n            (Number(unit_price_after_discount) / 100) *\r\n              Number(discount_price_txt)\r\n          );\r\n\r\n          discountFields[\"discount\"] = Number(\r\n            (Number(discountFields[\"discount_amt\"]) /\r\n              Number(unit_price_after_discount)) *\r\n              100\r\n          );\r\n          await this.setState({ discountFields });\r\n          // } else {\r\n          //   Toast({\r\n          //     type: \"error\",\r\n          //     message: \"Please Enter Discount Reason Text\",\r\n          //   });\r\n          //   return false;\r\n          // }\r\n        } else {\r\n          Toast({\r\n            type: \"error\",\r\n            message: \"Please select Discount Reason\",\r\n          });\r\n          return false;\r\n        }\r\n      } else if (Number(is_percentage) == 2) {\r\n        if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\r\n          // if (\r\n          //   Number(discountFields.disc_reason) != 182 ||\r\n          //   (Number(discountFields.disc_reason) == 182 &&\r\n          //     discountFields.discreason_txt != \"\")\r\n          // ) {\r\n          discountFields[\"discount_amt\"] = Number(discount_price_txt);\r\n          discountFields[\"discount\"] = null;\r\n          await this.setState({ discountFields });\r\n          // } else {\r\n          //   Toast({\r\n          //     type: \"error\",\r\n          //     message: \"Please Enter Discount Reason Text\",\r\n          //   });\r\n          //   return false;\r\n          // }\r\n        } else {\r\n          Toast({\r\n            type: \"error\",\r\n            message: \"Please select Discount Reason\",\r\n          });\r\n          return false;\r\n        }\r\n      } else {\r\n        Toast({\r\n          type: \"error\",\r\n          message: \"Please select Discount Type\",\r\n        });\r\n        return false;\r\n      }\r\n      let discreason_text = \"\";\r\n      if (Number(discountFields.disc_reason) == 182) {\r\n        discreason_text = \"others\";\r\n      } else {\r\n        discreason_text = \"\";\r\n      }\r\n\r\n      let body = {\r\n        discount: Number(discountFields.discount),\r\n        discount_amt: Number(discountFields.discount_amt),\r\n        disc_reason: Number(discountFields.disc_reason),\r\n        discreason_txt: discreason_text,\r\n      };\r\n      this.props\r\n        .commonUpdateApi(\r\n          `itemcart/${this.props.cartId}/?disc_add=1&disc_reset=0`,\r\n          body\r\n        )\r\n        .then(key => {\r\n          this.handleClear();\r\n          this.getDiscountInfo();\r\n          this.getDiscountReasons();\r\n        });\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Discount should be greater than zero\",\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n  // handleApply = async () => {\r\n  //   debugger;\r\n  //   let {\r\n  //     discountFields,\r\n  //     unit_price_after_discount,\r\n  //     discount_price_txt,\r\n  //     is_percentage,\r\n  //   } = this.state;\r\n\r\n  //   if (this.validator.allValid()) {\r\n  //     if (Number(discount_price_txt) > 0) {\r\n  //       if (is_percentage) {\r\n  //         discountFields[\"discount_amt\"] = Number(\r\n  //           (unit_price_after_discount / 100) * Number(discount_price_txt)\r\n  //         ).toFixed(2);\r\n\r\n  //         discountFields[\"discount\"] = Number(\r\n  //           (discountFields[\"discount_amt\"] / unit_price_after_discount) * 100\r\n  //         ).toFixed(2);\r\n  //         await this.setState({ discountFields });\r\n  //       }\r\n  //       if (!is_percentage) {\r\n  //         discountFields[\"discount_amt\"] =\r\n  //           Number(discount_price_txt).toFixed(2);\r\n  //         discountFields[\"discount\"] = null;\r\n  //         await this.setState({ discountFields });\r\n  //       }\r\n  //     } else {\r\n  //       Toast({\r\n  //         type: \"error\",\r\n  //         message: \"Discount should be greater than zero\",\r\n  //       });\r\n  //       return false;\r\n  //     }\r\n  //     this.props\r\n  //       .commonUpdateApi(\r\n  //         `itemcart/${this.props.cartId}/?disc_add=1&disc_reset=0`,\r\n  //         discountFields\r\n  //       )\r\n  //       .then(key => {\r\n  //         this.handleClear();\r\n  //         this.getDiscountInfo();\r\n  //         this.getDiscountReasons();\r\n  //       });\r\n  //   } else {\r\n  //     this.validator.showMessages();\r\n  //   }\r\n  // };\r\n  handleReset = async () => {\r\n    let { discountFields } = this.state;\r\n    let body = {\r\n      discount: Number(discountFields.discount),\r\n      discount_amt: Number(discountFields.discount_amt),\r\n      disc_reason: Number(discountFields.disc_reason),\r\n      discreason_txt: discountFields.discreason_txt,\r\n    };\r\n    this.props\r\n      .commonUpdateApi(\r\n        `itemcart/${this.props.cartId}/?disc_add=0&disc_reset=1`,\r\n        body\r\n      )\r\n      .then(key => {\r\n        this.handleClear();\r\n        this.getDiscountInfo();\r\n        this.getDiscountReasons();\r\n      });\r\n  };\r\n  handleSubmit = () => {\r\n    let { deposit, total_after_discount } = this.state;\r\n    let body = {};\r\n    if (Number(deposit) > Number(total_after_discount)) {\r\n      Toast({\r\n        type: \"error\",\r\n        message:\r\n          \"Deposit amount should be less than or equal to transaction amount\",\r\n      });\r\n    } else {\r\n      body = {\r\n        deposit: Number(deposit).toFixed(2),\r\n      };\r\n      this.props\r\n        .commonPatchApi(\r\n          `cartpopup/${this.props.cartId}/`,\r\n\r\n          body\r\n        )\r\n        .then(key => {\r\n          let { status } = key;\r\n          console.log(key, \"response for submit\");\r\n          if (status == \"200\") {\r\n            this.props.handleModal();\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      item_data,\r\n      quantity,\r\n      unit_price,\r\n      is_percentage,\r\n      deposit,\r\n      discount_reason_options,\r\n      discount_reasons,\r\n      total_after_discount,\r\n      unit_price_after_discount,\r\n      discountFields,\r\n      discount_price_txt,\r\n      discType,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"container-fluid mb-4\">\r\n          <div className=\"row pl-3\">\r\n            <div className=\"col-md-9 col-12\">\r\n              <h6 className=\"text-secondary fs-18\">{t(\"Item Discount\")}</h6>\r\n\r\n              <h4>{item_data.item_name}</h4>\r\n            </div>\r\n            <div className=\"col-md-2 col-12\">\r\n              <NormalButton\r\n                mainbg={false}\r\n                className=\"col-12 fs-15 submit-btn\"\r\n                label=\"Submit\"\r\n                onClick={() => this.handleSubmit()}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row pl-5 pr-5 mt-4\">\r\n            <div className=\"row mb-3\">\r\n              <div className=\"col-md-4\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Quantity\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={quantity}\r\n                    type=\"number\"\r\n                    name=\"quantity\"\r\n                    onChange={() => {}}\r\n                    disabled\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Unit Price\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={unit_price}\r\n                    type=\"number\"\r\n                    name=\"unit_price\"\r\n                    onChange={() => {}}\r\n                    disabled\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-md-2 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Discount\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"\"\r\n                    value={discount_price_txt}\r\n                    type=\"number\"\r\n                    name=\"discount_price_txt\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n\r\n                  {/* <NormalButton\r\n                    mainbg={!is_percentage}\r\n                    className=\"col h-100\"\r\n                    label=\"$\"\r\n                    onClick={() =>\r\n                      this.setState({ is_percentage: !is_percentage })\r\n                    }\r\n                  />\r\n                  <NormalButton\r\n                    mainbg={is_percentage}\r\n                    className=\"col h-100\"\r\n                    label=\"%\"\r\n                    onClick={async () =>\r\n                      await this.setState({ is_percentage: !is_percentage })\r\n                    }\r\n                  />  */}\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2 col-12\">\r\n                <div className=\"row\">\r\n                  <label className=\"text-left text-black common-label-text pb-2\">\r\n                    {t(\"Type\")}\r\n                  </label>\r\n                  <div className=\"input-group\">\r\n                    <NormalSelect\r\n                      className={`col`}\r\n                      options={discType}\r\n                      value={is_percentage}\r\n                      name=\"is_percentage\"\r\n                      onChange={this.handleChange}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row w-100 mb-3\">\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Discount Reason\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    options={discount_reason_options}\r\n                    value={discountFields.disc_reason}\r\n                    name=\"disc_reason\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                {this.validator.message(\r\n                  \"discount reason\",\r\n                  discountFields.disc_reason,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n              {/* {discountFields.disc_reason == \"182\" ? (\r\n                <div className=\"col-md-4 col-12\">\r\n                  <label className=\"text-left text-black common-label-text \">\r\n                    Discount reason\r\n                  </label>\r\n                  <div className=\"input-group mb-2\">\r\n                    <NormalTextarea\r\n                      value={discountFields.discreason_txt}\r\n                      name=\"discreason_txt\"\r\n                      onChange={this.handleChange}\r\n                      className=\"w-100\"\r\n                    />\r\n                    {this.validator.message(\r\n                      \"discount reason\",\r\n                      discountFields.discreason_txt,\r\n                      \"required\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                \"\"\r\n              )} */}\r\n              <div className=\"col-md-2 col-12 mt-4 pt-3\">\r\n                <NormalButton\r\n                  applybg={true}\r\n                  className=\"col\"\r\n                  label=\"Apply\"\r\n                  onClick={this.handleApply}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2 col-12 mt-4 pt-3\">\r\n                <NormalButton\r\n                  resetbg={true}\r\n                  className=\"col\"\r\n                  label=\"Reset\"\r\n                  onClick={this.handleReset}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row w-100 mt-4\">\r\n              <div className=\"col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Discount List\")}\r\n                </label>\r\n                <div className=\"col-md-12 col-12 w-100 bg-light p-3 border\">\r\n                  {discount_reasons &&\r\n                    discount_reasons.length > 0 &&\r\n                    discount_reasons.map((item, index) => {\r\n                      return (\r\n                        <div className=\"row\" key={index}>\r\n                          <div className=\"col-6\">\r\n                            <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                              {item.remark ? item.remark : \"OTHERS\"}\r\n                            </label>\r\n                          </div>\r\n                          <div className=\"col-2\">\r\n                            <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                              {item.disc_per} %\r\n                            </label>\r\n                          </div>\r\n                          <div className=\"col-2\">\r\n                            <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                              $ {item.disc_amt}\r\n                            </label>\r\n                          </div>\r\n                          <div className=\"col-2\">\r\n                            <NormalCheckbox\r\n                              name=\"transac\"\r\n                              label=\"Trans.\"\r\n                              checked={item.transac}\r\n                              value={item.transac}\r\n                              onChange={() => {}}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  {!discount_reasons || discount_reasons.length <= 0 ? (\r\n                    <div className=\"row\">{t(\"No record found\")}</div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row w-100 mt-5\">\r\n              <div className=\"col-md-8 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Unit Price After Discount\")}\r\n                </label>\r\n              </div>\r\n              <div className=\"col-md-4 col-12 \">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {unit_price_after_discount}\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div className=\"row w-100 mt-2\">\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Total After Discount\")}\r\n                </label>\r\n              </div>\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {quantity} * {unit_price_after_discount}\r\n                </label>\r\n              </div>\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {total_after_discount}\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div className=\"row w-100 mt-4\">\r\n              <div className=\"col-md-8 col-12\">\r\n                <h6>{t(\"Deposit\")}</h6>\r\n              </div>\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  <NormalInput\r\n                    value={deposit}\r\n                    name=\"deposit\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonUpdateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\nexport const ItemDiscountPopup = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ItemDiscountPopupClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}