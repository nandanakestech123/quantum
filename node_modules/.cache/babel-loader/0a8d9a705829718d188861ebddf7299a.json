{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\Admin\\\\Catalog\\\\services\\\\itemsDetail.js\";\nimport React, { Component } from \"react\";\nimport { NormalButton, NormalSelect, NormalModal, NormalInput } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport Brush from \"assets/images/make-up-brush.png\";\nimport filter from \"assets/images/filter.png\";\nimport CartImg from \"assets/images/shopping-cart.png\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, commonCreateApi, updateForm } from \"redux/actions/common\";\nimport closeIcon from \"assets/images/close.png\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport _ from \"lodash\";\nimport { history } from \"helpers\";\nimport { withTranslation } from \"react-i18next\";\nexport class ItemDetailClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      servicesDetail: {},\n      isOpenModal: false,\n      branchList: [],\n      customerDetail: {\n        branchId: \"\",\n        cust_noid: \"\"\n      },\n      customerList: []\n    };\n\n    this.componentDidMount = () => {\n      console.log(this.props, \"jhksdfkjsdhfks\");\n      this.getDetail();\n      let {\n        productCard,\n        branchList\n      } = this.state;\n      this.props.getCommonApi(`treatment/Outlet/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          for (let value of data) {\n            branchList.push({\n              value: value.id,\n              label: value.itemsite_desc\n            });\n          }\n\n          this.setState({\n            branchList\n          }); // console.log(brachList, \"jhksdfkjsdhfks\")\n        }\n      });\n    };\n\n    this.getDetail = () => {\n      let {\n        productCard,\n        branchList\n      } = this.state;\n      let {\n        menuId,\n        id,\n        api\n      } = this.props;\n      this.props.getCommonApi(`${api}/${id}/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          this.setState({\n            servicesDetail: data\n          });\n        }\n      });\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        customerDetail,\n        customerList\n      } = this.state;\n      console.log(\"uihwkjrwkej\", name, value);\n      customerDetail[name] = value;\n      await this.setState({\n        customerDetail\n      });\n\n      if (name === \"branchId\") {\n        this.props.getCommonApi(`custappt/?Outlet=${value}`).then(key => {\n          let {\n            status,\n            data\n          } = key;\n\n          if (status === 200) {\n            for (let value of data) {\n              customerList.push({\n                value: value.id,\n                label: value.cust_name + \" | \" + value.cust_phone1 + \" | \" + value.cust_code\n              });\n            }\n\n            this.setState({\n              customerList\n            });\n          }\n        });\n      } // this.props.updateForm('selected_customer', customerDetail)\n\n    };\n\n    this.handleCreateCart = () => {\n      let {\n        productCard,\n        customerDetail,\n        servicesDetail\n      } = this.state;\n      let {\n        selected_cstomer\n      } = this.props;\n      console.log(servicesDetail, customerDetail, selected_cstomer, \"sfdgsdfhshgf\");\n      let payload = {\n        cust_noid: selected_cstomer.cust_noid,\n        cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\n        // lineno : 1,\n        itemcodeid: selected_cstomer.branchId,\n        quantity: customerDetail.quantity,\n        price: servicesDetail.item_price\n      };\n      this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}&cust_noid=${selected_cstomer.cust_noid}`).then(key => {\n        let {\n          status,\n          data,\n          error\n        } = key; // if (status === 200) {\n\n        console.log(\"asdfasdfasaff\", data, payload);\n\n        if (data.length > 0) {\n          console.log(\"asdfasdfasaff == if\", data, payload);\n          this.props.commonCreateApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_id=${data[0].cart_id}`, payload).then(key => {\n            let {\n              status,\n              data\n            } = key;\n\n            if (status === 201) {\n              this.setState({\n                isOpenModal: false\n              });\n            }\n          });\n        } else {\n          console.log(\"asdfasdfasaff == else\", data, payload);\n          this.props.commonCreateApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}`, payload).then(key => {\n            let {\n              status,\n              data\n            } = key;\n\n            if (status === 201) {\n              this.setState({\n                isOpenModal: false\n              });\n              history.push(\"/admin/catalog\");\n            }\n          });\n        } // }\n\n      });\n    };\n\n    this.handleSearch = event => {\n      event.persist();\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(() => {\n          let searchString = event.target.value;\n          let data = {\n            search: searchString\n          }; // this.queryHandler(data)\n\n          let {\n            customerList,\n            customerDetail\n          } = this.state;\n          this.props.getCommonApi(`custappt/?Outlet=${customerDetail.branchId}&search=${searchString}`).then(key => {\n            let {\n              status,\n              data\n            } = key;\n\n            if (status === 200) {\n              // for (let value of data) {\n              //     customerList.push({ value: value.id, label: value.emp_name })\n              // }\n              this.setState({\n                customerList: data\n              });\n            }\n          });\n        }, 500);\n      }\n\n      this.debouncedFn();\n    };\n\n    this.handleCloseDialog = () => {\n      this.setState({\n        isOpenModal: false\n      });\n    };\n\n    this.handleSelectCustomer = data => {\n      let {\n        customerList,\n        customerDetail,\n        servicesDetail\n      } = this.state;\n      customerDetail[\"cust_noid\"] = data.id;\n      customerDetail[\"cust_name\"] = data.cust_name;\n      this.setState({\n        customerDetail\n      }); // this.props.updateForm('selected_customer', customerDetail)\n    };\n\n    this.handleAddCart = async (data, price) => {\n      await this.props.updateForm(\"selectedCart\", data); // setTimeout(() => {\n      // history.push(\"/admin/cart\");\n\n      this.props.handleAddCart(data, price); // }, 5000);\n    };\n  }\n\n  render() {\n    let {\n      servicesDetail,\n      isOpenModal,\n      branchList,\n      customerList,\n      customerDetail\n    } = this.state;\n    let {\n      selected_cstomer,\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-detail p-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }, servicesDetail ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-view text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      width: \"230\",\n      src: servicesDetail.Stock_PIC,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"product-name fs-18\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    }, servicesDetail.item_desc), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"fs-14 my-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 19\n      }\n    }, servicesDetail.item_name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"list-price fs-14\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 21\n      }\n    }, t(\"Price\"), \":\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"fs-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 23\n      }\n    }, \" \", \"$ \", servicesDetail.item_price))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: true,\n      className: \"col-12 fs-15 mt-5\",\n      label: \"Add to Cart\",\n      onClick: () => this.handleAddCart(servicesDetail, servicesDetail.item_price),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 19\n      }\n    })))) : \"\"));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  // customerDetail: state.appointment.customerDetail,\n  selected_cstomer: state.common.selected_cstomer\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    // getCustomer,\n    getCommonApi,\n    commonCreateApi,\n    updateForm\n  }, dispatch);\n};\n\nexport const ItemDetail = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(ItemDetailClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Catalog/services/itemsDetail.js"],"names":["React","Component","NormalButton","NormalSelect","NormalModal","NormalInput","InputSearch","TableWrapper","Brush","filter","CartImg","connect","bindActionCreators","getCommonApi","commonCreateApi","updateForm","closeIcon","dateFormat","_","history","withTranslation","ItemDetailClass","state","servicesDetail","isOpenModal","branchList","customerDetail","branchId","cust_noid","customerList","componentDidMount","console","log","props","getDetail","productCard","then","key","status","data","value","push","id","label","itemsite_desc","setState","menuId","api","handleChange","target","name","cust_name","cust_phone1","cust_code","handleCreateCart","selected_cstomer","payload","cart_date","Date","itemcodeid","quantity","price","item_price","error","length","cart_id","handleSearch","event","persist","debouncedFn","debounce","searchString","search","handleCloseDialog","handleSelectCustomer","handleAddCart","render","t","Stock_PIC","item_desc","item_name","mapStateToProps","common","mapDispatchToProps","dispatch","ItemDetail"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalButton,\r\n  NormalSelect,\r\n  NormalModal,\r\n  NormalInput,\r\n} from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport Brush from \"assets/images/make-up-brush.png\";\r\nimport filter from \"assets/images/filter.png\";\r\nimport CartImg from \"assets/images/shopping-cart.png\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  updateForm,\r\n} from \"redux/actions/common\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class ItemDetailClass extends Component {\r\n  state = {\r\n    servicesDetail: {},\r\n    isOpenModal: false,\r\n    branchList: [],\r\n    customerDetail: {\r\n      branchId: \"\",\r\n      cust_noid: \"\",\r\n    },\r\n    customerList: [],\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    console.log(this.props, \"jhksdfkjsdhfks\");\r\n    this.getDetail();\r\n    let { productCard, branchList } = this.state;\r\n\r\n    this.props.getCommonApi(`treatment/Outlet/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          branchList.push({ value: value.id, label: value.itemsite_desc });\r\n        }\r\n        this.setState({ branchList });\r\n        // console.log(brachList, \"jhksdfkjsdhfks\")\r\n      }\r\n    });\r\n  };\r\n\r\n  getDetail = () => {\r\n    let { productCard, branchList } = this.state;\r\n    let { menuId, id, api } = this.props;\r\n    this.props.getCommonApi(`${api}/${id}/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        this.setState({ servicesDetail: data });\r\n      }\r\n    });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { customerDetail, customerList } = this.state;\r\n    console.log(\"uihwkjrwkej\", name, value);\r\n    customerDetail[name] = value;\r\n    await this.setState({\r\n      customerDetail,\r\n    });\r\n    if (name === \"branchId\") {\r\n      this.props.getCommonApi(`custappt/?Outlet=${value}`).then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            customerList.push({\r\n              value: value.id,\r\n              label:\r\n                value.cust_name +\r\n                \" | \" +\r\n                value.cust_phone1 +\r\n                \" | \" +\r\n                value.cust_code,\r\n            });\r\n          }\r\n          this.setState({ customerList });\r\n        }\r\n      });\r\n    }\r\n    // this.props.updateForm('selected_customer', customerDetail)\r\n  };\r\n\r\n  handleCreateCart = () => {\r\n    let { productCard, customerDetail, servicesDetail } = this.state;\r\n    let { selected_cstomer } = this.props;\r\n    console.log(\r\n      servicesDetail,\r\n      customerDetail,\r\n      selected_cstomer,\r\n      \"sfdgsdfhshgf\"\r\n    );\r\n    let payload = {\r\n      cust_noid: selected_cstomer.cust_noid,\r\n      cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n      // lineno : 1,\r\n      itemcodeid: selected_cstomer.branchId,\r\n      quantity: customerDetail.quantity,\r\n      price: servicesDetail.item_price,\r\n    };\r\n    this.props\r\n      .getCommonApi(\r\n        `itemcart/Check/?sitecodeid=${\r\n          selected_cstomer.branchId\r\n        }&cart_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}&cust_noid=${\r\n          selected_cstomer.cust_noid\r\n        }`\r\n      )\r\n      .then(key => {\r\n        let { status, data, error } = key;\r\n        // if (status === 200) {\r\n        console.log(\"asdfasdfasaff\", data, payload);\r\n        if (data.length > 0) {\r\n          console.log(\"asdfasdfasaff == if\", data, payload);\r\n          this.props\r\n            .commonCreateApi(\r\n              `itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_id=${data[0].cart_id}`,\r\n              payload\r\n            )\r\n            .then(key => {\r\n              let { status, data } = key;\r\n              if (status === 201) {\r\n                this.setState({ isOpenModal: false });\r\n              }\r\n            });\r\n        } else {\r\n          console.log(\"asdfasdfasaff == else\", data, payload);\r\n          this.props\r\n            .commonCreateApi(\r\n              `itemcart/?sitecodeid=${selected_cstomer.branchId}`,\r\n              payload\r\n            )\r\n            .then(key => {\r\n              let { status, data } = key;\r\n              if (status === 201) {\r\n                this.setState({ isOpenModal: false });\r\n                history.push(\"/admin/catalog\");\r\n              }\r\n            });\r\n        }\r\n\r\n        // }\r\n      });\r\n  };\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        let data = { search: searchString };\r\n        // this.queryHandler(data)\r\n        let { customerList, customerDetail } = this.state;\r\n        this.props\r\n          .getCommonApi(\r\n            `custappt/?Outlet=${customerDetail.branchId}&search=${searchString}`\r\n          )\r\n          .then(key => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n              // for (let value of data) {\r\n              //     customerList.push({ value: value.id, label: value.emp_name })\r\n              // }\r\n              this.setState({ customerList: data });\r\n            }\r\n          });\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleCloseDialog = () => {\r\n    this.setState({\r\n      isOpenModal: false,\r\n    });\r\n  };\r\n\r\n  handleSelectCustomer = data => {\r\n    let { customerList, customerDetail, servicesDetail } = this.state;\r\n    customerDetail[\"cust_noid\"] = data.id;\r\n    customerDetail[\"cust_name\"] = data.cust_name;\r\n    this.setState({ customerDetail });\r\n    // this.props.updateForm('selected_customer', customerDetail)\r\n  };\r\n\r\n  handleAddCart = async (data, price) => {\r\n    await this.props.updateForm(\"selectedCart\", data);\r\n    // setTimeout(() => {\r\n    // history.push(\"/admin/cart\");\r\n    this.props.handleAddCart(data, price);\r\n    // }, 5000);\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      servicesDetail,\r\n      isOpenModal,\r\n      branchList,\r\n      customerList,\r\n      customerDetail,\r\n    } = this.state;\r\n    let { selected_cstomer,t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"product-detail p-5\">\r\n          {servicesDetail ? (\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">\r\n                <div className=\"detail-view text-center\">\r\n                  <img width=\"230\" src={servicesDetail.Stock_PIC} alt=\"\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-5\">\r\n                <div className=\"product-left\">\r\n                  <p className=\"product-name fs-18\">\r\n                    {servicesDetail.item_desc}\r\n                  </p>\r\n                  <p className=\"fs-14 my-2\">{servicesDetail.item_name}</p>\r\n\r\n                  <div>\r\n                    <p className=\"list-price fs-14\">\r\n                      {t(\"Price\")}:\r\n                      <span className=\"fs-16\">\r\n                        {\" \"}\r\n                        $ {servicesDetail.item_price}\r\n                      </span>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-12\">\r\n                <div>\r\n                  <NormalButton\r\n                    mainbg={true}\r\n                    className=\"col-12 fs-15 mt-5\"\r\n                    label=\"Add to Cart\"\r\n                    onClick={() =>\r\n                      this.handleAddCart(\r\n                        servicesDetail,\r\n                        servicesDetail.item_price\r\n                      )\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // customerDetail: state.appointment.customerDetail,\r\n  selected_cstomer: state.common.selected_cstomer,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      updateForm,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ItemDetail =  withTranslation()(connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ItemDetailClass));\r\n"]},"metadata":{},"sourceType":"module"}