{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.items_list.thumbnails.list_box.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _hold = _interopRequireDefault(require(\"../../events/hold\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nvar _scroll_view = _interopRequireDefault(require(\"../scroll_view\"));\n\nvar _uiCollection_widget = _interopRequireDefault(require(\"../collection/ui.collection_widget.edit\"));\n\nvar _selection = _interopRequireDefault(require(\"../selection/selection\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS = \"dx-filemanager-thumbnails-view-port\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS = \"dx-filemanager-thumbnails-container\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS = \"dx-filemanager-thumbnails-item-name\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS = \"dx-filemanager-thumbnails-item-spacer\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_DATA_KEY = \"dxFileManagerItemData\";\nvar FILE_MANAGER_THUMBNAILS_LIST_BOX_NAMESPACE = \"dxFileManagerThumbnailsListBox\";\nvar FILE_MANAGER_THUMBNAILS_LIST_BOX_HOLD_EVENT_NAME = (0, _index.addNamespace)(_hold.default.name, FILE_MANAGER_THUMBNAILS_LIST_BOX_NAMESPACE);\n\nvar FileManagerThumbnailListBox = function (_CollectionWidget) {\n  _inherits(FileManagerThumbnailListBox, _CollectionWidget);\n\n  var _super = _createSuper(FileManagerThumbnailListBox);\n\n  function FileManagerThumbnailListBox() {\n    _classCallCheck(this, FileManagerThumbnailListBox);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FileManagerThumbnailListBox, [{\n    key: \"_initMarkup\",\n    value: function () {\n      this._initActions();\n\n      this._lockFocusedItemProcessing = false;\n      this.$element().addClass(FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS);\n\n      this._renderScrollView();\n\n      this._renderItemsContainer();\n\n      this._createScrollViewControl();\n\n      _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_initMarkup\", this).call(this);\n\n      this.onFocusedItemChanged = this._onFocusedItemChanged.bind(this);\n      this._layoutUtils = new ListBoxLayoutUtils(this._scrollView, this.$element(), this._$itemContainer, this.itemElements().first());\n\n      this._syncFocusedItemKey();\n    }\n  }, {\n    key: \"_initActions\",\n    value: function () {\n      this._actions = {\n        onItemEnterKeyPressed: this._createActionByOption(\"onItemEnterKeyPressed\"),\n        onFocusedItemChanged: this._createActionByOption(\"onFocusedItemChanged\")\n      };\n    }\n  }, {\n    key: \"_initTemplates\",\n    value: function () {\n      _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_initTemplates\", this).call(this);\n\n      this._itemThumbnailTemplate = this.option(\"itemThumbnailTemplate\");\n      this._getTooltipText = this.option(\"getTooltipText\");\n\n      this._templateManager.addDefaultTemplates({\n        item: new _bindable_template.BindableTemplate(function ($container, data, itemModel) {\n          var $itemElement = this._getDefaultItemTemplate(itemModel, $container);\n\n          $container.append($itemElement);\n        }.bind(this), [\"fileItem\"], this.option(\"integrationOptions.watchMethod\"))\n      });\n    }\n  }, {\n    key: \"_createScrollViewControl\",\n    value: function () {\n      if (!this._scrollView) {\n        this._scrollView = this._createComponent(this._$scrollView, _scroll_view.default, {\n          scrollByContent: true,\n          scrollByThumb: true,\n          useKeyboard: false,\n          showScrollbar: \"onHover\"\n        });\n      }\n    }\n  }, {\n    key: \"_renderScrollView\",\n    value: function () {\n      if (!this._$scrollView) {\n        this._$scrollView = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\n      }\n    }\n  }, {\n    key: \"_renderItemsContainer\",\n    value: function () {\n      if (!this._$itemContainer) {\n        this._$itemContainer = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS).appendTo(this._$scrollView);\n      }\n    }\n  }, {\n    key: \"_render\",\n    value: function () {\n      _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_render\", this).call(this);\n\n      this._detachEventHandlers();\n\n      this._attachEventHandlers();\n    }\n  }, {\n    key: \"_clean\",\n    value: function () {\n      this._detachEventHandlers();\n\n      _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_supportedKeys\",\n    value: function () {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_supportedKeys\", this).call(this), {\n        upArrow: function (e) {\n          this._beforeKeyProcessing(e);\n\n          this._processArrowKeys(-1, false, e);\n        },\n        downArrow: function (e) {\n          this._beforeKeyProcessing(e);\n\n          this._processArrowKeys(1, false, e);\n        },\n        home: function (e) {\n          this._beforeKeyProcessing(e);\n\n          this._processHomeEndKeys(0, true, e);\n        },\n        end: function (e) {\n          this._beforeKeyProcessing(e);\n\n          this._processHomeEndKeys(this._getItemsLength() - 1, true, e);\n        },\n        pageUp: function (e) {\n          this._beforeKeyProcessing(e);\n\n          this._processPageChange(true, e);\n        },\n        pageDown: function (e) {\n          this._beforeKeyProcessing(e);\n\n          this._processPageChange(false, e);\n        },\n        enter: function (e) {\n          this._beforeKeyProcessing(e);\n\n          this._actions.onItemEnterKeyPressed(this._getFocusedItem());\n        },\n        A: function (e) {\n          this._beforeKeyProcessing(e);\n\n          if ((0, _index.isCommandKeyPressed)(e)) {\n            this.selectAll();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_beforeKeyProcessing\",\n    value: function (e) {\n      e.preventDefault();\n\n      this._layoutUtils.reset();\n    }\n  }, {\n    key: \"_processArrowKeys\",\n    value: function (offset, horizontal, eventArgs) {\n      var item = this._getFocusedItem();\n\n      if (item) {\n        if (!horizontal) {\n          var layout = this._layoutUtils.getLayoutModel();\n\n          if (!layout) {\n            return;\n          }\n\n          offset *= layout.itemPerRowCount;\n        }\n\n        var newItemIndex = this._getIndexByItem(item) + offset;\n\n        this._focusItemByIndex(newItemIndex, true, eventArgs);\n      }\n    }\n  }, {\n    key: \"_processHomeEndKeys\",\n    value: function (index, scrollToItem, eventArgs) {\n      this._focusItemByIndex(index, scrollToItem, eventArgs);\n    }\n  }, {\n    key: \"_processPageChange\",\n    value: function (pageUp, eventArgs) {\n      var item = this._getFocusedItem();\n\n      if (!item) {\n        return;\n      }\n\n      var layout = this._layoutUtils.getLayoutModel();\n\n      if (!layout) {\n        return;\n      }\n\n      var itemLayout = this._layoutUtils.createItemLayoutModel(this._getIndexByItem(item));\n\n      var rowOffset = pageUp ? layout.rowPerPageRate : -layout.rowPerPageRate;\n      var newRowRate = itemLayout.itemRowIndex - rowOffset;\n      var roundFunc = pageUp ? Math.ceil : Math.floor;\n      var newRowIndex = roundFunc(newRowRate);\n      var newItemIndex = newRowIndex * layout.itemPerRowCount + itemLayout.itemColumnIndex;\n\n      if (newItemIndex < 0) {\n        newItemIndex = 0;\n      } else {\n        if (newItemIndex >= this._getItemsLength()) {\n          newItemIndex = this._getItemsLength() - 1;\n        }\n      }\n\n      this._focusItemByIndex(newItemIndex, true, eventArgs);\n    }\n  }, {\n    key: \"_processLongTap\",\n    value: function (e) {\n      var $targetItem = this._closestItemElement((0, _renderer.default)(e.target));\n\n      var itemIndex = this._getIndexByItemElement($targetItem);\n\n      this._selection.changeItemSelection(itemIndex, {\n        control: true\n      });\n    }\n  }, {\n    key: \"_attachEventHandlers\",\n    value: function () {\n      var _this = this;\n\n      if (\"multiple\" === this.option(\"selectionMode\")) {\n        _events_engine.default.on(this._itemContainer(), FILE_MANAGER_THUMBNAILS_LIST_BOX_HOLD_EVENT_NAME, \".\".concat(this._itemContentClass()), function (e) {\n          _this._processLongTap(e);\n\n          e.stopPropagation();\n        });\n      }\n\n      _events_engine.default.on(this._itemContainer(), \"mousedown selectstart\", function (e) {\n        if (e.shiftKey) {\n          e.preventDefault();\n        }\n      });\n    }\n  }, {\n    key: \"_detachEventHandlers\",\n    value: function () {\n      _events_engine.default.off(this._itemContainer(), FILE_MANAGER_THUMBNAILS_LIST_BOX_HOLD_EVENT_NAME);\n\n      _events_engine.default.off(this._itemContainer(), \"mousedown selectstart\");\n    }\n  }, {\n    key: \"_itemContainer\",\n    value: function () {\n      return this._$itemContainer;\n    }\n  }, {\n    key: \"_itemClass\",\n    value: function () {\n      return FILE_MANAGER_THUMBNAILS_ITEM_CLASS;\n    }\n  }, {\n    key: \"_itemDataKey\",\n    value: function () {\n      return FILE_MANAGER_THUMBNAILS_ITEM_DATA_KEY;\n    }\n  }, {\n    key: \"_getDefaultItemTemplate\",\n    value: function (fileItemInfo, $itemElement) {\n      $itemElement.attr(\"title\", this._getTooltipText(fileItemInfo));\n\n      var $itemThumbnail = this._itemThumbnailTemplate(fileItemInfo);\n\n      var $itemSpacer = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS);\n      var $itemName = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS).text(fileItemInfo.fileItem.name);\n      $itemElement.append($itemThumbnail, $itemSpacer, $itemName);\n    }\n  }, {\n    key: \"_itemSelectHandler\",\n    value: function (e) {\n      var options = {};\n\n      if (\"multiple\" === this.option(\"selectionMode\")) {\n        if (!this._isPreserveSelectionMode) {\n          this._isPreserveSelectionMode = (0, _index.isCommandKeyPressed)(e) || e.shiftKey;\n        }\n\n        options = {\n          control: this._isPreserveSelectionMode,\n          shift: e.shiftKey\n        };\n      }\n\n      var index = this._getIndexByItemElement(e.currentTarget);\n\n      this._selection.changeItemSelection(index, options);\n    }\n  }, {\n    key: \"_initSelectionModule\",\n    value: function () {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_initSelectionModule\", this).call(this);\n\n      var options = (0, _extend.extend)(this._selection.options, {\n        selectedKeys: this.option(\"selectedItemKeys\"),\n        onSelectionChanged: function (args) {\n          _this2.option(\"selectedItems\", _this2._getItemsByKeys(args.selectedItemKeys, args.selectedItems));\n\n          _this2._updateSelectedItems(args);\n        }\n      });\n      this._selection = new _selection.default(options);\n    }\n  }, {\n    key: \"_updateSelectedItems\",\n    value: function (args) {\n      var _this3 = this;\n\n      var addedItemKeys = args.addedItemKeys;\n      var removedItemKeys = args.removedItemKeys;\n\n      if (this._rendered && (addedItemKeys.length || removedItemKeys.length)) {\n        var selectionChangePromise = this._selectionChangePromise;\n\n        if (!this._rendering) {\n          var addedSelection = [];\n          var normalizedIndex;\n          var removedSelection = [];\n\n          this._editStrategy.beginCache();\n\n          for (var i = 0; i < removedItemKeys.length; i++) {\n            normalizedIndex = this._getIndexByKey(removedItemKeys[i]);\n            removedSelection.push(normalizedIndex);\n\n            this._removeSelection(normalizedIndex);\n          }\n\n          for (var _i = 0; _i < addedItemKeys.length; _i++) {\n            normalizedIndex = this._getIndexByKey(addedItemKeys[_i]);\n            addedSelection.push(normalizedIndex);\n\n            this._addSelection(normalizedIndex);\n          }\n\n          this._editStrategy.endCache();\n\n          this._updateSelection(addedSelection, removedSelection);\n        }\n\n        (0, _deferred.when)(selectionChangePromise).done(function () {\n          return _this3._fireSelectionChangeEvent(args);\n        });\n      }\n    }\n  }, {\n    key: \"_fireSelectionChangeEvent\",\n    value: function (args) {\n      this._createActionByOption(\"onSelectionChanged\", {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      })(args);\n    }\n  }, {\n    key: \"_updateSelection\",\n    value: function (addedSelection, removedSelection) {\n      var selectedItemsCount = this.getSelectedItems().length;\n\n      if (0 === selectedItemsCount) {\n        this._isPreserveSelectionMode = false;\n      }\n    }\n  }, {\n    key: \"_normalizeSelectedItems\",\n    value: function () {\n      var newKeys = this._getKeysByItems(this.option(\"selectedItems\"));\n\n      var oldKeys = this._selection.getSelectedItemKeys();\n\n      if (!this._compareKeys(oldKeys, newKeys)) {\n        this._selection.setSelection(newKeys);\n      }\n\n      return new _deferred.Deferred().resolve().promise();\n    }\n  }, {\n    key: \"_focusOutHandler\",\n    value: function () {}\n  }, {\n    key: \"_getItems\",\n    value: function () {\n      return this.option(\"items\") || [];\n    }\n  }, {\n    key: \"_getItemsLength\",\n    value: function () {\n      return this._getItems().length;\n    }\n  }, {\n    key: \"_getIndexByItemElement\",\n    value: function (itemElement) {\n      return this._editStrategy.getNormalizedIndex(itemElement);\n    }\n  }, {\n    key: \"_getItemByIndex\",\n    value: function (index) {\n      return this._getItems()[index];\n    }\n  }, {\n    key: \"_getFocusedItem\",\n    value: function () {\n      return this.getItemByItemElement(this.option(\"focusedElement\"));\n    }\n  }, {\n    key: \"_focusItem\",\n    value: function (item, scrollToItem) {\n      this.option(\"focusedElement\", this.getItemElementByItem(item));\n\n      if (scrollToItem) {\n        this._layoutUtils.scrollToItem(this._getIndexByItem(item));\n      }\n    }\n  }, {\n    key: \"_focusItemByIndex\",\n    value: function (index, scrollToItem, eventArgs) {\n      if (index >= 0 && index < this._getItemsLength()) {\n        var item = this._getItemByIndex(index);\n\n        this._focusItem(item, scrollToItem, eventArgs);\n      }\n    }\n  }, {\n    key: \"_syncFocusedItemKey\",\n    value: function () {\n      var _this4 = this;\n\n      if (!this._syncFocusedItemKeyDeferred) {\n        this._syncFocusedItemKeyDeferred = new _deferred.Deferred();\n      }\n\n      var deferred = this._syncFocusedItemKeyDeferred;\n\n      if (this._dataSource && this._dataSource.isLoading()) {\n        return deferred.promise();\n      }\n\n      var focusedItemKey = this.option(\"focusedItemKey\");\n\n      if ((0, _type.isDefined)(focusedItemKey)) {\n        var items = this.option(\"items\");\n        var focusedItem = (0, _array.find)(items, function (item) {\n          return _this4.keyOf(item) === focusedItemKey;\n        });\n\n        if (focusedItem) {\n          this._focusItem(focusedItem, true);\n\n          deferred.resolve();\n        } else {\n          this.option(\"focusedItemKey\", void 0);\n          deferred.reject();\n        }\n      } else {\n        deferred.resolve();\n      }\n\n      this._syncFocusedItemKeyDeferred = null;\n      return deferred.promise();\n    }\n  }, {\n    key: \"_onFocusedItemChanged\",\n    value: function () {\n      var focusedItem = this._getFocusedItem();\n\n      var newFocusedItemKey = this.keyOf(focusedItem);\n      var oldFocusedItemKey = this.option(\"focusedItemKey\");\n\n      if (newFocusedItemKey !== oldFocusedItemKey) {\n        this._lockFocusedItemProcessing = true;\n        this.option(\"focusedItemKey\", newFocusedItemKey);\n        this._lockFocusedItemProcessing = false;\n\n        this._raiseFocusedItemChanged(focusedItem);\n      }\n    }\n  }, {\n    key: \"_raiseFocusedItemChanged\",\n    value: function (focusedItem) {\n      var args = {\n        item: focusedItem,\n        itemElement: this.option(\"focusedElement\")\n      };\n\n      this._actions.onFocusedItemChanged(args);\n    }\n  }, {\n    key: \"_changeItemSelection\",\n    value: function (item, select) {\n      if (this.isItemSelected(item) === select) {\n        return;\n      }\n\n      var itemElement = this.getItemElementByItem(item);\n\n      var index = this._getIndexByItemElement(itemElement);\n\n      this._selection.changeItemSelection(index, {\n        control: this._isPreserveSelectionMode\n      });\n    }\n  }, {\n    key: \"_chooseSelectOption\",\n    value: function () {\n      return \"selectedItemKeys\";\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function () {\n      return this._selection.getSelectedItems();\n    }\n  }, {\n    key: \"getItemElementByItem\",\n    value: function (item) {\n      return this._editStrategy.getItemElement(item);\n    }\n  }, {\n    key: \"getItemByItemElement\",\n    value: function (itemElement) {\n      return this._getItemByIndex(this._getIndexByItemElement(itemElement));\n    }\n  }, {\n    key: \"selectAll\",\n    value: function () {\n      if (\"multiple\" !== this.option(\"selectionMode\")) {\n        return;\n      }\n\n      this._selection.selectAll();\n\n      this._isPreserveSelectionMode = true;\n    }\n  }, {\n    key: \"selectItem\",\n    value: function (item) {\n      this._changeItemSelection(item, true);\n    }\n  }, {\n    key: \"deselectItem\",\n    value: function (item) {\n      this._changeItemSelection(item, false);\n    }\n  }, {\n    key: \"clearSelection\",\n    value: function () {\n      this._selection.deselectAll();\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      var _this5 = this;\n\n      switch (args.name) {\n        case \"items\":\n          if (this._layoutUtils) {\n            this._layoutUtils.updateItems(this.itemElements().first());\n          }\n\n          _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"focusedItemKey\":\n          if (this._lockFocusedItemProcessing) {\n            break;\n          }\n\n          if ((0, _type.isDefined)(args.value)) {\n            this._syncFocusedItemKey().done(function () {\n              var focusedItem = _this5._getFocusedItem();\n\n              _this5._raiseFocusedItemChanged(focusedItem);\n            });\n          } else {\n            this.option(\"focusedElement\", null);\n\n            this._raiseFocusedItemChanged(null);\n          }\n\n          break;\n\n        case \"onItemEnterKeyPressed\":\n        case \"onFocusedItemChanged\":\n          this._actions[args.name] = this._createActionByOption(args.name);\n          break;\n\n        default:\n          _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }]);\n\n  return FileManagerThumbnailListBox;\n}(_uiCollection_widget.default);\n\nvar ListBoxLayoutUtils = function () {\n  function ListBoxLayoutUtils(scrollView, $viewPort, $itemContainer, $item) {\n    _classCallCheck(this, ListBoxLayoutUtils);\n\n    this._layoutModel = null;\n    this._scrollView = scrollView;\n    this._$viewPort = $viewPort;\n    this._$itemContainer = $itemContainer;\n    this._$item = $item;\n  }\n\n  _createClass(ListBoxLayoutUtils, [{\n    key: \"updateItems\",\n    value: function ($item) {\n      this._$item = $item;\n    }\n  }, {\n    key: \"reset\",\n    value: function () {\n      this._layoutModel = null;\n    }\n  }, {\n    key: \"getLayoutModel\",\n    value: function () {\n      if (!this._layoutModel) {\n        this._layoutModel = this._createLayoutModel();\n      }\n\n      return this._layoutModel;\n    }\n  }, {\n    key: \"_createLayoutModel\",\n    value: function () {\n      if (!this._$item) {\n        return null;\n      }\n\n      var itemWidth = this._$item.outerWidth(true);\n\n      if (0 === itemWidth) {\n        return null;\n      }\n\n      var itemHeight = this._$item.outerHeight(true);\n\n      var viewPortWidth = this._$itemContainer.innerWidth();\n\n      var viewPortHeight = this._$viewPort.innerHeight();\n\n      var viewPortScrollTop = this._scrollView.scrollTop();\n\n      var viewPortScrollBottom = viewPortScrollTop + viewPortHeight;\n      var itemPerRowCount = Math.floor(viewPortWidth / itemWidth);\n      var rowPerPageRate = viewPortHeight / itemHeight;\n      return {\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        viewPortWidth: viewPortWidth,\n        viewPortHeight: viewPortHeight,\n        viewPortScrollTop: viewPortScrollTop,\n        viewPortScrollBottom: viewPortScrollBottom,\n        itemPerRowCount: itemPerRowCount,\n        rowPerPageRate: rowPerPageRate\n      };\n    }\n  }, {\n    key: \"createItemLayoutModel\",\n    value: function (index) {\n      var layout = this.getLayoutModel();\n\n      if (!layout) {\n        return null;\n      }\n\n      var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\n      var itemColumnIndex = index % layout.itemPerRowCount;\n      var itemTop = itemRowIndex * layout.itemHeight;\n      var itemBottom = itemTop + layout.itemHeight;\n      return {\n        itemRowIndex: itemRowIndex,\n        itemColumnIndex: itemColumnIndex,\n        itemTop: itemTop,\n        itemBottom: itemBottom\n      };\n    }\n  }, {\n    key: \"scrollToItem\",\n    value: function (index) {\n      var layout = this.getLayoutModel();\n\n      if (!layout) {\n        return;\n      }\n\n      var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\n      var itemTop = itemRowIndex * layout.itemHeight;\n      var itemBottom = itemTop + layout.itemHeight;\n      var newScrollTop = layout.viewPortScrollTop;\n\n      if (itemTop < layout.viewPortScrollTop) {\n        newScrollTop = itemTop;\n      } else {\n        if (itemBottom > layout.viewPortScrollBottom) {\n          newScrollTop = itemBottom - layout.viewPortHeight;\n        }\n      }\n\n      this._scrollView.scrollTo(newScrollTop);\n    }\n  }]);\n\n  return ListBoxLayoutUtils;\n}();\n\nvar _default = FileManagerThumbnailListBox;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/file_manager/ui.file_manager.items_list.thumbnails.list_box.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_renderer","_interopRequireDefault","require","_extend","_array","_type","_deferred","_hold","_index","_events_engine","_bindable_template","_scroll_view","_uiCollection_widget","_selection","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","value","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_DATA_KEY","FILE_MANAGER_THUMBNAILS_LIST_BOX_NAMESPACE","FILE_MANAGER_THUMBNAILS_LIST_BOX_HOLD_EVENT_NAME","addNamespace","name","FileManagerThumbnailListBox","_CollectionWidget","_super","_initActions","_lockFocusedItemProcessing","$element","addClass","_renderScrollView","_renderItemsContainer","_createScrollViewControl","onFocusedItemChanged","_onFocusedItemChanged","bind","_layoutUtils","ListBoxLayoutUtils","_scrollView","_$itemContainer","itemElements","first","_syncFocusedItemKey","_actions","onItemEnterKeyPressed","_createActionByOption","_itemThumbnailTemplate","option","_getTooltipText","_templateManager","addDefaultTemplates","item","BindableTemplate","$container","data","itemModel","$itemElement","_getDefaultItemTemplate","append","_createComponent","_$scrollView","scrollByContent","scrollByThumb","useKeyboard","showScrollbar","appendTo","_detachEventHandlers","_attachEventHandlers","extend","upArrow","_beforeKeyProcessing","_processArrowKeys","downArrow","home","_processHomeEndKeys","end","_getItemsLength","pageUp","_processPageChange","pageDown","enter","_getFocusedItem","A","isCommandKeyPressed","selectAll","preventDefault","reset","offset","horizontal","eventArgs","layout","getLayoutModel","itemPerRowCount","newItemIndex","_getIndexByItem","_focusItemByIndex","index","scrollToItem","itemLayout","createItemLayoutModel","rowOffset","rowPerPageRate","newRowRate","itemRowIndex","roundFunc","Math","ceil","floor","newRowIndex","itemColumnIndex","$targetItem","_closestItemElement","itemIndex","_getIndexByItemElement","changeItemSelection","control","_this","on","_itemContainer","concat","_itemContentClass","_processLongTap","stopPropagation","shiftKey","off","fileItemInfo","attr","$itemThumbnail","$itemSpacer","$itemName","text","fileItem","options","_isPreserveSelectionMode","shift","currentTarget","_this2","selectedKeys","onSelectionChanged","args","_getItemsByKeys","selectedItemKeys","selectedItems","_updateSelectedItems","_this3","addedItemKeys","removedItemKeys","_rendered","selectionChangePromise","_selectionChangePromise","_rendering","addedSelection","normalizedIndex","removedSelection","_editStrategy","beginCache","_getIndexByKey","push","_removeSelection","_i","_addSelection","endCache","_updateSelection","when","done","_fireSelectionChangeEvent","excludeValidators","selectedItemsCount","getSelectedItems","newKeys","_getKeysByItems","oldKeys","getSelectedItemKeys","_compareKeys","setSelection","Deferred","resolve","promise","_getItems","itemElement","getNormalizedIndex","getItemByItemElement","getItemElementByItem","_getItemByIndex","_focusItem","_this4","_syncFocusedItemKeyDeferred","deferred","_dataSource","isLoading","focusedItemKey","isDefined","items","focusedItem","find","keyOf","reject","newFocusedItemKey","oldFocusedItemKey","_raiseFocusedItemChanged","select","isItemSelected","getItemElement","_changeItemSelection","deselectAll","_this5","updateItems","scrollView","$viewPort","$itemContainer","$item","_layoutModel","_$viewPort","_$item","_createLayoutModel","itemWidth","outerWidth","itemHeight","outerHeight","viewPortWidth","innerWidth","viewPortHeight","innerHeight","viewPortScrollTop","scrollTop","viewPortScrollBottom","itemTop","itemBottom","newScrollTop","scrollTo","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.items_list.thumbnails.list_box.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _hold = _interopRequireDefault(require(\"../../events/hold\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\nvar _scroll_view = _interopRequireDefault(require(\"../scroll_view\"));\r\nvar _uiCollection_widget = _interopRequireDefault(require(\"../collection/ui.collection_widget.edit\"));\r\nvar _selection = _interopRequireDefault(require(\"../selection/selection\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS = \"dx-filemanager-thumbnails-view-port\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS = \"dx-filemanager-thumbnails-container\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS = \"dx-filemanager-thumbnails-item-name\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS = \"dx-filemanager-thumbnails-item-spacer\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_DATA_KEY = \"dxFileManagerItemData\";\r\nvar FILE_MANAGER_THUMBNAILS_LIST_BOX_NAMESPACE = \"dxFileManagerThumbnailsListBox\";\r\nvar FILE_MANAGER_THUMBNAILS_LIST_BOX_HOLD_EVENT_NAME = (0, _index.addNamespace)(_hold.default.name, FILE_MANAGER_THUMBNAILS_LIST_BOX_NAMESPACE);\r\nvar FileManagerThumbnailListBox = function(_CollectionWidget) {\r\n    _inherits(FileManagerThumbnailListBox, _CollectionWidget);\r\n    var _super = _createSuper(FileManagerThumbnailListBox);\r\n\r\n    function FileManagerThumbnailListBox() {\r\n        _classCallCheck(this, FileManagerThumbnailListBox);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(FileManagerThumbnailListBox, [{\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            this._initActions();\r\n            this._lockFocusedItemProcessing = false;\r\n            this.$element().addClass(FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS);\r\n            this._renderScrollView();\r\n            this._renderItemsContainer();\r\n            this._createScrollViewControl();\r\n            _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_initMarkup\", this).call(this);\r\n            this.onFocusedItemChanged = this._onFocusedItemChanged.bind(this);\r\n            this._layoutUtils = new ListBoxLayoutUtils(this._scrollView, this.$element(), this._$itemContainer, this.itemElements().first());\r\n            this._syncFocusedItemKey()\r\n        }\r\n    }, {\r\n        key: \"_initActions\",\r\n        value: function() {\r\n            this._actions = {\r\n                onItemEnterKeyPressed: this._createActionByOption(\"onItemEnterKeyPressed\"),\r\n                onFocusedItemChanged: this._createActionByOption(\"onFocusedItemChanged\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_initTemplates\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_initTemplates\", this).call(this);\r\n            this._itemThumbnailTemplate = this.option(\"itemThumbnailTemplate\");\r\n            this._getTooltipText = this.option(\"getTooltipText\");\r\n            this._templateManager.addDefaultTemplates({\r\n                item: new _bindable_template.BindableTemplate(function($container, data, itemModel) {\r\n                    var $itemElement = this._getDefaultItemTemplate(itemModel, $container);\r\n                    $container.append($itemElement)\r\n                }.bind(this), [\"fileItem\"], this.option(\"integrationOptions.watchMethod\"))\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createScrollViewControl\",\r\n        value: function() {\r\n            if (!this._scrollView) {\r\n                this._scrollView = this._createComponent(this._$scrollView, _scroll_view.default, {\r\n                    scrollByContent: true,\r\n                    scrollByThumb: true,\r\n                    useKeyboard: false,\r\n                    showScrollbar: \"onHover\"\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderScrollView\",\r\n        value: function() {\r\n            if (!this._$scrollView) {\r\n                this._$scrollView = (0, _renderer.default)(\"<div>\").appendTo(this.$element())\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderItemsContainer\",\r\n        value: function() {\r\n            if (!this._$itemContainer) {\r\n                this._$itemContainer = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS).appendTo(this._$scrollView)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_render\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_render\", this).call(this);\r\n            this._detachEventHandlers();\r\n            this._attachEventHandlers()\r\n        }\r\n    }, {\r\n        key: \"_clean\",\r\n        value: function() {\r\n            this._detachEventHandlers();\r\n            _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_clean\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_supportedKeys\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_supportedKeys\", this).call(this), {\r\n                upArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processArrowKeys(-1, false, e)\r\n                },\r\n                downArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processArrowKeys(1, false, e)\r\n                },\r\n                home: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processHomeEndKeys(0, true, e)\r\n                },\r\n                end: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processHomeEndKeys(this._getItemsLength() - 1, true, e)\r\n                },\r\n                pageUp: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processPageChange(true, e)\r\n                },\r\n                pageDown: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processPageChange(false, e)\r\n                },\r\n                enter: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._actions.onItemEnterKeyPressed(this._getFocusedItem())\r\n                },\r\n                A: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    if ((0, _index.isCommandKeyPressed)(e)) {\r\n                        this.selectAll()\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_beforeKeyProcessing\",\r\n        value: function(e) {\r\n            e.preventDefault();\r\n            this._layoutUtils.reset()\r\n        }\r\n    }, {\r\n        key: \"_processArrowKeys\",\r\n        value: function(offset, horizontal, eventArgs) {\r\n            var item = this._getFocusedItem();\r\n            if (item) {\r\n                if (!horizontal) {\r\n                    var layout = this._layoutUtils.getLayoutModel();\r\n                    if (!layout) {\r\n                        return\r\n                    }\r\n                    offset *= layout.itemPerRowCount\r\n                }\r\n                var newItemIndex = this._getIndexByItem(item) + offset;\r\n                this._focusItemByIndex(newItemIndex, true, eventArgs)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_processHomeEndKeys\",\r\n        value: function(index, scrollToItem, eventArgs) {\r\n            this._focusItemByIndex(index, scrollToItem, eventArgs)\r\n        }\r\n    }, {\r\n        key: \"_processPageChange\",\r\n        value: function(pageUp, eventArgs) {\r\n            var item = this._getFocusedItem();\r\n            if (!item) {\r\n                return\r\n            }\r\n            var layout = this._layoutUtils.getLayoutModel();\r\n            if (!layout) {\r\n                return\r\n            }\r\n            var itemLayout = this._layoutUtils.createItemLayoutModel(this._getIndexByItem(item));\r\n            var rowOffset = pageUp ? layout.rowPerPageRate : -layout.rowPerPageRate;\r\n            var newRowRate = itemLayout.itemRowIndex - rowOffset;\r\n            var roundFunc = pageUp ? Math.ceil : Math.floor;\r\n            var newRowIndex = roundFunc(newRowRate);\r\n            var newItemIndex = newRowIndex * layout.itemPerRowCount + itemLayout.itemColumnIndex;\r\n            if (newItemIndex < 0) {\r\n                newItemIndex = 0\r\n            } else {\r\n                if (newItemIndex >= this._getItemsLength()) {\r\n                    newItemIndex = this._getItemsLength() - 1\r\n                }\r\n            }\r\n            this._focusItemByIndex(newItemIndex, true, eventArgs)\r\n        }\r\n    }, {\r\n        key: \"_processLongTap\",\r\n        value: function(e) {\r\n            var $targetItem = this._closestItemElement((0, _renderer.default)(e.target));\r\n            var itemIndex = this._getIndexByItemElement($targetItem);\r\n            this._selection.changeItemSelection(itemIndex, {\r\n                control: true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_attachEventHandlers\",\r\n        value: function() {\r\n            var _this = this;\r\n            if (\"multiple\" === this.option(\"selectionMode\")) {\r\n                _events_engine.default.on(this._itemContainer(), FILE_MANAGER_THUMBNAILS_LIST_BOX_HOLD_EVENT_NAME, \".\".concat(this._itemContentClass()), function(e) {\r\n                    _this._processLongTap(e);\r\n                    e.stopPropagation()\r\n                })\r\n            }\r\n            _events_engine.default.on(this._itemContainer(), \"mousedown selectstart\", function(e) {\r\n                if (e.shiftKey) {\r\n                    e.preventDefault()\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_detachEventHandlers\",\r\n        value: function() {\r\n            _events_engine.default.off(this._itemContainer(), FILE_MANAGER_THUMBNAILS_LIST_BOX_HOLD_EVENT_NAME);\r\n            _events_engine.default.off(this._itemContainer(), \"mousedown selectstart\")\r\n        }\r\n    }, {\r\n        key: \"_itemContainer\",\r\n        value: function() {\r\n            return this._$itemContainer\r\n        }\r\n    }, {\r\n        key: \"_itemClass\",\r\n        value: function() {\r\n            return FILE_MANAGER_THUMBNAILS_ITEM_CLASS\r\n        }\r\n    }, {\r\n        key: \"_itemDataKey\",\r\n        value: function() {\r\n            return FILE_MANAGER_THUMBNAILS_ITEM_DATA_KEY\r\n        }\r\n    }, {\r\n        key: \"_getDefaultItemTemplate\",\r\n        value: function(fileItemInfo, $itemElement) {\r\n            $itemElement.attr(\"title\", this._getTooltipText(fileItemInfo));\r\n            var $itemThumbnail = this._itemThumbnailTemplate(fileItemInfo);\r\n            var $itemSpacer = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS);\r\n            var $itemName = (0, _renderer.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS).text(fileItemInfo.fileItem.name);\r\n            $itemElement.append($itemThumbnail, $itemSpacer, $itemName)\r\n        }\r\n    }, {\r\n        key: \"_itemSelectHandler\",\r\n        value: function(e) {\r\n            var options = {};\r\n            if (\"multiple\" === this.option(\"selectionMode\")) {\r\n                if (!this._isPreserveSelectionMode) {\r\n                    this._isPreserveSelectionMode = (0, _index.isCommandKeyPressed)(e) || e.shiftKey\r\n                }\r\n                options = {\r\n                    control: this._isPreserveSelectionMode,\r\n                    shift: e.shiftKey\r\n                }\r\n            }\r\n            var index = this._getIndexByItemElement(e.currentTarget);\r\n            this._selection.changeItemSelection(index, options)\r\n        }\r\n    }, {\r\n        key: \"_initSelectionModule\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_initSelectionModule\", this).call(this);\r\n            var options = (0, _extend.extend)(this._selection.options, {\r\n                selectedKeys: this.option(\"selectedItemKeys\"),\r\n                onSelectionChanged: function(args) {\r\n                    _this2.option(\"selectedItems\", _this2._getItemsByKeys(args.selectedItemKeys, args.selectedItems));\r\n                    _this2._updateSelectedItems(args)\r\n                }\r\n            });\r\n            this._selection = new _selection.default(options)\r\n        }\r\n    }, {\r\n        key: \"_updateSelectedItems\",\r\n        value: function(args) {\r\n            var _this3 = this;\r\n            var addedItemKeys = args.addedItemKeys;\r\n            var removedItemKeys = args.removedItemKeys;\r\n            if (this._rendered && (addedItemKeys.length || removedItemKeys.length)) {\r\n                var selectionChangePromise = this._selectionChangePromise;\r\n                if (!this._rendering) {\r\n                    var addedSelection = [];\r\n                    var normalizedIndex;\r\n                    var removedSelection = [];\r\n                    this._editStrategy.beginCache();\r\n                    for (var i = 0; i < removedItemKeys.length; i++) {\r\n                        normalizedIndex = this._getIndexByKey(removedItemKeys[i]);\r\n                        removedSelection.push(normalizedIndex);\r\n                        this._removeSelection(normalizedIndex)\r\n                    }\r\n                    for (var _i = 0; _i < addedItemKeys.length; _i++) {\r\n                        normalizedIndex = this._getIndexByKey(addedItemKeys[_i]);\r\n                        addedSelection.push(normalizedIndex);\r\n                        this._addSelection(normalizedIndex)\r\n                    }\r\n                    this._editStrategy.endCache();\r\n                    this._updateSelection(addedSelection, removedSelection)\r\n                }(0, _deferred.when)(selectionChangePromise).done(function() {\r\n                    return _this3._fireSelectionChangeEvent(args)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_fireSelectionChangeEvent\",\r\n        value: function(args) {\r\n            this._createActionByOption(\"onSelectionChanged\", {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            })(args)\r\n        }\r\n    }, {\r\n        key: \"_updateSelection\",\r\n        value: function(addedSelection, removedSelection) {\r\n            var selectedItemsCount = this.getSelectedItems().length;\r\n            if (0 === selectedItemsCount) {\r\n                this._isPreserveSelectionMode = false\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_normalizeSelectedItems\",\r\n        value: function() {\r\n            var newKeys = this._getKeysByItems(this.option(\"selectedItems\"));\r\n            var oldKeys = this._selection.getSelectedItemKeys();\r\n            if (!this._compareKeys(oldKeys, newKeys)) {\r\n                this._selection.setSelection(newKeys)\r\n            }\r\n            return (new _deferred.Deferred).resolve().promise()\r\n        }\r\n    }, {\r\n        key: \"_focusOutHandler\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_getItems\",\r\n        value: function() {\r\n            return this.option(\"items\") || []\r\n        }\r\n    }, {\r\n        key: \"_getItemsLength\",\r\n        value: function() {\r\n            return this._getItems().length\r\n        }\r\n    }, {\r\n        key: \"_getIndexByItemElement\",\r\n        value: function(itemElement) {\r\n            return this._editStrategy.getNormalizedIndex(itemElement)\r\n        }\r\n    }, {\r\n        key: \"_getItemByIndex\",\r\n        value: function(index) {\r\n            return this._getItems()[index]\r\n        }\r\n    }, {\r\n        key: \"_getFocusedItem\",\r\n        value: function() {\r\n            return this.getItemByItemElement(this.option(\"focusedElement\"))\r\n        }\r\n    }, {\r\n        key: \"_focusItem\",\r\n        value: function(item, scrollToItem) {\r\n            this.option(\"focusedElement\", this.getItemElementByItem(item));\r\n            if (scrollToItem) {\r\n                this._layoutUtils.scrollToItem(this._getIndexByItem(item))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_focusItemByIndex\",\r\n        value: function(index, scrollToItem, eventArgs) {\r\n            if (index >= 0 && index < this._getItemsLength()) {\r\n                var item = this._getItemByIndex(index);\r\n                this._focusItem(item, scrollToItem, eventArgs)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_syncFocusedItemKey\",\r\n        value: function() {\r\n            var _this4 = this;\r\n            if (!this._syncFocusedItemKeyDeferred) {\r\n                this._syncFocusedItemKeyDeferred = new _deferred.Deferred\r\n            }\r\n            var deferred = this._syncFocusedItemKeyDeferred;\r\n            if (this._dataSource && this._dataSource.isLoading()) {\r\n                return deferred.promise()\r\n            }\r\n            var focusedItemKey = this.option(\"focusedItemKey\");\r\n            if ((0, _type.isDefined)(focusedItemKey)) {\r\n                var items = this.option(\"items\");\r\n                var focusedItem = (0, _array.find)(items, function(item) {\r\n                    return _this4.keyOf(item) === focusedItemKey\r\n                });\r\n                if (focusedItem) {\r\n                    this._focusItem(focusedItem, true);\r\n                    deferred.resolve()\r\n                } else {\r\n                    this.option(\"focusedItemKey\", void 0);\r\n                    deferred.reject()\r\n                }\r\n            } else {\r\n                deferred.resolve()\r\n            }\r\n            this._syncFocusedItemKeyDeferred = null;\r\n            return deferred.promise()\r\n        }\r\n    }, {\r\n        key: \"_onFocusedItemChanged\",\r\n        value: function() {\r\n            var focusedItem = this._getFocusedItem();\r\n            var newFocusedItemKey = this.keyOf(focusedItem);\r\n            var oldFocusedItemKey = this.option(\"focusedItemKey\");\r\n            if (newFocusedItemKey !== oldFocusedItemKey) {\r\n                this._lockFocusedItemProcessing = true;\r\n                this.option(\"focusedItemKey\", newFocusedItemKey);\r\n                this._lockFocusedItemProcessing = false;\r\n                this._raiseFocusedItemChanged(focusedItem)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseFocusedItemChanged\",\r\n        value: function(focusedItem) {\r\n            var args = {\r\n                item: focusedItem,\r\n                itemElement: this.option(\"focusedElement\")\r\n            };\r\n            this._actions.onFocusedItemChanged(args)\r\n        }\r\n    }, {\r\n        key: \"_changeItemSelection\",\r\n        value: function(item, select) {\r\n            if (this.isItemSelected(item) === select) {\r\n                return\r\n            }\r\n            var itemElement = this.getItemElementByItem(item);\r\n            var index = this._getIndexByItemElement(itemElement);\r\n            this._selection.changeItemSelection(index, {\r\n                control: this._isPreserveSelectionMode\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_chooseSelectOption\",\r\n        value: function() {\r\n            return \"selectedItemKeys\"\r\n        }\r\n    }, {\r\n        key: \"getSelectedItems\",\r\n        value: function() {\r\n            return this._selection.getSelectedItems()\r\n        }\r\n    }, {\r\n        key: \"getItemElementByItem\",\r\n        value: function(item) {\r\n            return this._editStrategy.getItemElement(item)\r\n        }\r\n    }, {\r\n        key: \"getItemByItemElement\",\r\n        value: function(itemElement) {\r\n            return this._getItemByIndex(this._getIndexByItemElement(itemElement))\r\n        }\r\n    }, {\r\n        key: \"selectAll\",\r\n        value: function() {\r\n            if (\"multiple\" !== this.option(\"selectionMode\")) {\r\n                return\r\n            }\r\n            this._selection.selectAll();\r\n            this._isPreserveSelectionMode = true\r\n        }\r\n    }, {\r\n        key: \"selectItem\",\r\n        value: function(item) {\r\n            this._changeItemSelection(item, true)\r\n        }\r\n    }, {\r\n        key: \"deselectItem\",\r\n        value: function(item) {\r\n            this._changeItemSelection(item, false)\r\n        }\r\n    }, {\r\n        key: \"clearSelection\",\r\n        value: function() {\r\n            this._selection.deselectAll()\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            var _this5 = this;\r\n            switch (args.name) {\r\n                case \"items\":\r\n                    if (this._layoutUtils) {\r\n                        this._layoutUtils.updateItems(this.itemElements().first())\r\n                    }\r\n                    _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"focusedItemKey\":\r\n                    if (this._lockFocusedItemProcessing) {\r\n                        break\r\n                    }\r\n                    if ((0, _type.isDefined)(args.value)) {\r\n                        this._syncFocusedItemKey().done(function() {\r\n                            var focusedItem = _this5._getFocusedItem();\r\n                            _this5._raiseFocusedItemChanged(focusedItem)\r\n                        })\r\n                    } else {\r\n                        this.option(\"focusedElement\", null);\r\n                        this._raiseFocusedItemChanged(null)\r\n                    }\r\n                    break;\r\n                case \"onItemEnterKeyPressed\":\r\n                case \"onFocusedItemChanged\":\r\n                    this._actions[args.name] = this._createActionByOption(args.name);\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(FileManagerThumbnailListBox.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }]);\r\n    return FileManagerThumbnailListBox\r\n}(_uiCollection_widget.default);\r\nvar ListBoxLayoutUtils = function() {\r\n    function ListBoxLayoutUtils(scrollView, $viewPort, $itemContainer, $item) {\r\n        _classCallCheck(this, ListBoxLayoutUtils);\r\n        this._layoutModel = null;\r\n        this._scrollView = scrollView;\r\n        this._$viewPort = $viewPort;\r\n        this._$itemContainer = $itemContainer;\r\n        this._$item = $item\r\n    }\r\n    _createClass(ListBoxLayoutUtils, [{\r\n        key: \"updateItems\",\r\n        value: function($item) {\r\n            this._$item = $item\r\n        }\r\n    }, {\r\n        key: \"reset\",\r\n        value: function() {\r\n            this._layoutModel = null\r\n        }\r\n    }, {\r\n        key: \"getLayoutModel\",\r\n        value: function() {\r\n            if (!this._layoutModel) {\r\n                this._layoutModel = this._createLayoutModel()\r\n            }\r\n            return this._layoutModel\r\n        }\r\n    }, {\r\n        key: \"_createLayoutModel\",\r\n        value: function() {\r\n            if (!this._$item) {\r\n                return null\r\n            }\r\n            var itemWidth = this._$item.outerWidth(true);\r\n            if (0 === itemWidth) {\r\n                return null\r\n            }\r\n            var itemHeight = this._$item.outerHeight(true);\r\n            var viewPortWidth = this._$itemContainer.innerWidth();\r\n            var viewPortHeight = this._$viewPort.innerHeight();\r\n            var viewPortScrollTop = this._scrollView.scrollTop();\r\n            var viewPortScrollBottom = viewPortScrollTop + viewPortHeight;\r\n            var itemPerRowCount = Math.floor(viewPortWidth / itemWidth);\r\n            var rowPerPageRate = viewPortHeight / itemHeight;\r\n            return {\r\n                itemWidth: itemWidth,\r\n                itemHeight: itemHeight,\r\n                viewPortWidth: viewPortWidth,\r\n                viewPortHeight: viewPortHeight,\r\n                viewPortScrollTop: viewPortScrollTop,\r\n                viewPortScrollBottom: viewPortScrollBottom,\r\n                itemPerRowCount: itemPerRowCount,\r\n                rowPerPageRate: rowPerPageRate\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createItemLayoutModel\",\r\n        value: function(index) {\r\n            var layout = this.getLayoutModel();\r\n            if (!layout) {\r\n                return null\r\n            }\r\n            var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\r\n            var itemColumnIndex = index % layout.itemPerRowCount;\r\n            var itemTop = itemRowIndex * layout.itemHeight;\r\n            var itemBottom = itemTop + layout.itemHeight;\r\n            return {\r\n                itemRowIndex: itemRowIndex,\r\n                itemColumnIndex: itemColumnIndex,\r\n                itemTop: itemTop,\r\n                itemBottom: itemBottom\r\n            }\r\n        }\r\n    }, {\r\n        key: \"scrollToItem\",\r\n        value: function(index) {\r\n            var layout = this.getLayoutModel();\r\n            if (!layout) {\r\n                return\r\n            }\r\n            var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\r\n            var itemTop = itemRowIndex * layout.itemHeight;\r\n            var itemBottom = itemTop + layout.itemHeight;\r\n            var newScrollTop = layout.viewPortScrollTop;\r\n            if (itemTop < layout.viewPortScrollTop) {\r\n                newScrollTop = itemTop\r\n            } else {\r\n                if (itemBottom > layout.viewPortScrollBottom) {\r\n                    newScrollTop = itemBottom - layout.viewPortHeight\r\n                }\r\n            }\r\n            this._scrollView.scrollTo(newScrollTop)\r\n        }\r\n    }]);\r\n    return ListBoxLayoutUtils\r\n}();\r\nvar _default = FileManagerThumbnailListBox;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}