{"ast":null,"code":"import _toConsumableArray from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalTextarea,NormalButton,NormalSelect,NormalDate,NormalModal}from\"component/common\";import{Button,Form,FormGroup,Label,Input,FormText}from\"reactstrap\";import{getPayment,createPayment}from\"redux/actions/payment\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{history}from\"helpers\";import{getCommonApi}from\"redux/actions/common\";import{dateFormat}from\"service/helperFunctions\";import\"./style.scss\";import SimpleReactValidator from\"simple-react-validator\";import closeIcon from\"assets/images/close.png\";import helpers from\"../../../../service/Helper\";var moment=require(\"moment\");export var MakePaymentClass=/*#__PURE__*/function(_Component){_inherits(MakePaymentClass,_Component);var _super=_createSuper(MakePaymentClass);function MakePaymentClass(){var _this;_classCallCheck(this,MakePaymentClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{name:\"\",contact:\"\",address:\"\",searchStaff:\"\",payTableDropDownValue:\"\"},responseData:{},premisesOption:[],selectedCards:[],selectedCardsPayAmount:0,cardOption:[],ewalletoptions:[],ewalletField:{pay_typeid:null,pay_amt:\"\",credit_debit:true},cardField:{pay_typeid:null,pay_amt:\"\",credit_debit:true,pay_rem1:\"\",pay_rem2:\"\",pay_rem3:\"\",pay_rem4:\"\",App_code:\"\"},balance:0,errorMessage:\"123\",prepaidCustomerData:[],voucherCustomerData:[],creditNoteCustomerData:[],accountHeader:[],isMakePaymentButtonClicked:\"false\",isTreatmentDoneButton:true,itemProductAmount:0,itemServiceAmount:0,itemProductServiceVoucherAmount:0,displayTablePrepaid:[],displayTableCreditNote:[],displayTableVoucher:[],paytableData:[],paytableFullData:[],payGroupData:[],selectPaymentGroup:\"\",selectPaymentGroupId:\"\",isSelectedPaymentType:\"\",displayModelPaymentType:\"\",txtUserPayAmount:0,isOpenSubPayment:false,pay_rem4:\"\"};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});};_this.getPayment=function(){var _this$props=_this.props,id=_this$props.id,cartId=_this$props.cartId,cartData=_this$props.cartData;//id = 82318;\n//cartId = \"ICMD100226\";\n//cartData={\"status\":200,\"message\":\"Listed Succesfully\",\"error\":false,\"data\":[{\"id\":57500,\"cust_noid\":82318,\"customer\":\"test17011\",\"customercode\":\"021427HQ\",\"cart_id\":\"ICHQ100234\",\"cart_date\":\"2021-03-14\",\"cart_status\":\"Inprogress\",\"lineno\":1,\"check\":\"New\",\"itemcodeid\":10067,\"itemdesc\":\"Short - Chin Length(Before Shoulder) 128\",\"quantity\":1,\"price\":\"128.00\",\"total_price\":\"128.00\",\"sitecodeid\":31,\"sitecode_name\":\"HQ OFFICE (DEMO)\",\"sitecode\":\"HQ\",\"discount\":\"0.00\",\"discount_amt\":0,\"discount_price\":\"128.00\",\"additional_discount\":0,\"additional_discountamt\":0,\"deposit\":\"128.00\",\"trans_amt\":\"128.00\",\"tax\":0,\"itemstatus\":null,\"ratio\":\"100.000000000000000\",\"helper_name\":null,\"done_sessions\":null,\"type\":\"Deposit\",\"treatment_account\":null,\"treatment\":null,\"deposit_account\":null,\"prepaid_account\":null,\"item_uom\":null,\"recorddetail\":\"Service\",\"itemtype\":\"SINGLE\",\"item_class\":\"HERBAL TREATMENT\",\"sales_staff\":\"SEQ ADMIN\",\"service_staff\":\"\",\"total_disc\":\"0.00\",\"treatment_name\":\"Short - Chin Length(Before Shoulder) 128  (1)\",\"item_name\":\"Short - Chin Length(Before Shoulder) 128\"}],\"subtotal\":\"128.00\",\"discount\":\"0.00\",\"trans_amt\":\"128.00\",\"deposit_amt\":\"128.00\",\"billable_amount\":\"128.00\"}\nif(id){_this.props.getPayment(\"?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(id,\"&cart_id=\").concat(cartId)).then(function(res){_this.setState({responseData:res.data,balance:Number(res.data.billable_amount),txtUserPayAmount:Number(res.data.billable_amount)});});}else{// history.push(\"/admin/cart\");\n}//let {cartData} = this.props;\nvar stringifiedCartData=cartData.data;console.log(stringifiedCartData);var _this$state=_this.state,itemProductAmount=_this$state.itemProductAmount,itemServiceAmount=_this$state.itemServiceAmount,itemProductServiceVoucherAmount=_this$state.itemProductServiceVoucherAmount;if(stringifiedCartData){stringifiedCartData.map(function(item){//alert(JSON.stringify(item));\nif(item.recorddetail===\"Product\"){itemProductAmount+=parseFloat(item.total_price);}if(item.recorddetail===\"Service\"){itemServiceAmount+=parseFloat(item.total_price);console.log(itemServiceAmount);console.log(item.total_price);}if(item.recorddetail===\"Product\"||item.recorddetail===\"Service\"||item.recorddetail===\"Voucher\"){itemProductServiceVoucherAmount+=parseFloat(item.total_price);}});}_this.setState({itemProductAmount:itemProductAmount,itemServiceAmount:itemServiceAmount,itemProductServiceVoucherAmount:itemProductServiceVoucherAmount});};_this.getDataFromResponses=function(data){var _this$state2=_this.state,cardOption=_this$state2.cardOption,premisesOption=_this$state2.premisesOption;var _iterator=_createForOfIteratorHelper(data.CARD),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;cardOption.push({label:key.pay_description,value:key.id});}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(data.CASH),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _key2=_step2.value;premisesOption.push({label:_key2.pay_description,value:_key2.id});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({cardOption:cardOption,premisesOption:premisesOption});};_this.handleMultiple=function(_ref){var _ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;console.log(\"handleMultiple\",value,name);var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields});};_this.getVoucherData=function(api){_this.props.getCommonApi(\"voucher/?cust_id=\".concat(_this.props.id).concat(api)).then(function(key){var data=key.data;var voucherCustomerData=_this.state.voucherCustomerData;voucherCustomerData=data;console.log(\"voucherCustomerData\",data);// accountHeader = header_data;\n_this.setState({voucherCustomerData:voucherCustomerData},function(){console.log(\"test\");_this.HideVoucherTableData();});});};_this.getPrepaidData=function(){_this.getPrepaidAccountData(\"\");};_this.getPrepaidAccountData=function(api){console.log(\"dd\");_this.props.getCommonApi(\"prepaidacclist/?cust_id=\".concat(_this.props.id).concat(api)).then(function(key){var data=key.data;var prepaidCustomerData=_this.state.prepaidCustomerData;prepaidCustomerData=data;console.log(\"prepaidCustomerData\",data);// accountHeader = header_data;\n_this.setState({prepaidCustomerData:prepaidCustomerData},function(){_this.HidePrepaidTableData();});});};_this.getCreditNoteAccountData=function(api){_this.props.getCommonApi(\"creditnotelist/?cust_id=\".concat(_this.props.id).concat(api)).then(function(key){var data=key.data;var creditNoteCustomerData=_this.state.creditNoteCustomerData;creditNoteCustomerData=data;// accountHeader = header_data;\n_this.setState({creditNoteCustomerData:creditNoteCustomerData},function(){_this.HideCreditNoteTableData();});});};_this.getPayGroup=function(){_this.props.getCommonApi(\"paygroup/\").then(function(res){var payGroupData=_this.state.payGroupData;var _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;payGroupData.push({label:key.pay_group_code,value:key.id,picturelocation:key.picturelocation});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState({payGroupData:payGroupData});});};_this.getFullPayTable=function(){_this.props.getCommonApi(\"paytablenew/\").then(function(res){var paytableFullData=_this.state.paytableFullData;paytableFullData=res.data;_this.setState({paytableFullData:paytableFullData});});};_this.getPayTableNameBasedOnId=function(payTableId){var paytableFullData=_this.state.paytableFullData;var test=paytableFullData.filter(function(res){return res.id==payTableId;});return test[0].pay_description;};_this.handleChange=function(_ref2){var _ref2$target=_ref2.target,value=_ref2$target.value,name=_ref2$target.name;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.setState({formFields:formFields});var _this$state3=_this.state,balance=_this$state3.balance,selectedCards=_this$state3.selectedCards,txtUserPayAmount=_this$state3.txtUserPayAmount,isOpenSubPayment=_this$state3.isOpenSubPayment;isOpenSubPayment=false;selectedCards.push({pay_typeid:value,pay_amt:parseFloat(txtUserPayAmount),credit_debit:false,pay_premise:true,prepaid:false,pay_rem4:_this.state.pay_rem4});balance=parseFloat(balance-txtUserPayAmount).toFixed(2);txtUserPayAmount=balance;_this.setState({txtUserPayAmount:txtUserPayAmount,balance:balance,isOpenSubPayment:isOpenSubPayment});};_this.handleCreditChange=function(_ref3){var _ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;var cardField=Object.assign({},_this.state.cardField);cardField[name]=value;_this.setState({cardField:cardField});};_this.handleTreatmentDone=function(){var selectedCards=_this.state.selectedCards;selectedCards.push({pay_typeid:2,pay_amt:0,credit_debit:false,pay_premise:true,prepaid:false,pay_rem4:_this.state.pay_rem4});var data=selectedCards;var _this$props2=_this.props,id=_this$props2.id,cartId=_this$props2.cartId;_this.props.createPayment(\"?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(id,\"&cart_id=\").concat(cartId),data).then(function(res){history.push(\"/admin/billing/print/bill/\".concat(res.data.sa_transacno));});};_this.handleSubmit=function(){var selectedCards=_this.state.selectedCards;_this.setState({isMakePaymentButtonClicked:\"true\"});var data=selectedCards;console.log(\"SubmitData\",data);var _this$props3=_this.props,id=_this$props3.id,cartId=_this$props3.cartId;_this.props.createPayment(\"?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(id,\"&cart_id=\").concat(cartId),data).then(function(res){history.push(\"/admin/billing/print/bill/\".concat(res.data.sa_transacno));});};_this.addCreditCard=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state4,cardField,selectedCards,balance,responseData,txtUserPayAmount,userPayAmount;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.validator.fieldValid(\"cardFieldType\")){_context.next=3;break;}_this.validator.showMessageFor(\"cardFieldType\");return _context.abrupt(\"return\");case 3:_this$state4=_this.state,cardField=_this$state4.cardField,selectedCards=_this$state4.selectedCards,balance=_this$state4.balance,responseData=_this$state4.responseData,txtUserPayAmount=_this$state4.txtUserPayAmount;userPayAmount=parseFloat(txtUserPayAmount);if(!(parseFloat(_this.state.responseData.billable_amount)>0)){_context.next=8;break;}if(!(userPayAmount==0)){_context.next=8;break;}return _context.abrupt(\"return\");case 8:if(!_this.checkPayTypeIdAlreadyExists(cardField.pay_typeid)){_context.next=13;break;}alert(_this.getPayTableNameBasedOnId(cardField.pay_typeid)+\" already exists\");return _context.abrupt(\"return\");case 13:selectedCards.push({pay_typeid:cardField.pay_typeid,pay_amt:userPayAmount,credit_debit:true,pay_premise:false,pay_rem1:cardField.pay_rem1,pay_rem2:cardField.pay_rem2,pay_rem3:cardField.pay_rem3,pay_rem4:_this.state.pay_rem4,prepaid:false});case 14:balance=parseFloat(balance-userPayAmount).toFixed(2);_this.setState({isOpenSubPayment:false});_this.setBalanceToAllTextBoxes(balance);case 17:case\"end\":return _context.stop();}}},_callee);}));_this.addPrepaid=function(selectedPrepaid){var prepaidExpDate=moment(selectedPrepaid.exp_date).format(\"YYYY-MM-DD\");var todaysDate=moment(new Date()).format(\"YYYY-MM-DD\");var isValid=moment(todaysDate).isSameOrAfter(prepaidExpDate);var userPayAmount=0;var _this$state5=_this.state,itemServiceAmount=_this$state5.itemServiceAmount,itemProductAmount=_this$state5.itemProductAmount,itemProductServiceVoucherAmount=_this$state5.itemProductServiceVoucherAmount,txtUserPayAmount=_this$state5.txtUserPayAmount;console.log(txtUserPayAmount);userPayAmount=parseFloat(txtUserPayAmount);if(isValid){alert(\"Check Expiry Date\");return;}if(userPayAmount<=0){// alert(\"hi\");\nreturn;}var selectedRemainingPrepaidAmount=parseFloat(selectedPrepaid.remain);if(selectedRemainingPrepaidAmount<userPayAmount){//return\n}/*\r\n    if (!this.validator.fieldValid(\"PrepaidBalanceAmount\")) {\r\n      this.validator.showMessageFor(\"PrepaidBalanceAmount\");\r\n      return;\r\n    }\r\n    if (!this.validator.fieldValid(\"PrepaidBalanceAmount\")) {\r\n      this.validator.showMessageFor(\"PrepaidBalanceAmount\");\r\n      return;\r\n    }\r\n*/if(selectedPrepaid.conditiontype1===\"Service Only\"){//For Service\nif(parseFloat(itemServiceAmount)==0){return;}if(parseFloat(itemServiceAmount)<=selectedRemainingPrepaidAmount){userPayAmount=parseFloat(txtUserPayAmount)<parseFloat(itemServiceAmount)?parseFloat(txtUserPayAmount):parseFloat(itemServiceAmount);console.log(itemServiceAmount);console.log(userPayAmount);}else{userPayAmount=selectedRemainingPrepaidAmount;console.log(userPayAmount);}itemServiceAmount=itemServiceAmount-userPayAmount;_this.setState({itemServiceAmount:itemServiceAmount});}else if(selectedPrepaid.conditiontype1===\"Product Only\"){//For Product\nif(parseFloat(itemProductAmount)==0){return;}if(parseFloat(itemProductAmount)<=selectedRemainingPrepaidAmount){userPayAmount=parseFloat(txtUserPayAmount)<parseFloat(itemProductAmount)?parseFloat(txtUserPayAmount):parseFloat(itemProductAmount);console.log(userPayAmount);}else{userPayAmount=selectedRemainingPrepaidAmount;console.log(userPayAmount);}itemProductAmount=itemProductAmount-userPayAmount;_this.setState({itemProductAmount:itemProductAmount});}else{if(parseFloat(itemProductServiceVoucherAmount)==0){return;}if(parseFloat(itemProductServiceVoucherAmount)<=selectedRemainingPrepaidAmount){userPayAmount=parseFloat(txtUserPayAmount)<parseFloat(itemProductServiceVoucherAmount)?parseFloat(txtUserPayAmount):parseFloat(itemProductServiceVoucherAmount);console.log(userPayAmount);}else{userPayAmount=selectedRemainingPrepaidAmount;console.log(userPayAmount);}itemProductServiceVoucherAmount=itemProductServiceVoucherAmount-userPayAmount;_this.setState({itemProductServiceVoucherAmount:itemProductServiceVoucherAmount});}if(userPayAmount==0){return;}var payTypeId=23;var _this$state6=_this.state,cardField=_this$state6.cardField,ewalletField=_this$state6.ewalletField,balance=_this$state6.balance,selectedCards=_this$state6.selectedCards,isOpenSubPayment=_this$state6.isOpenSubPayment;selectedCards.push({pay_typeid:payTypeId,prepaid:true,pay_amt:userPayAmount,credit_debit:false,pay_premise:false,pay_rem1:selectedPrepaid.pp_no+\" - \"+selectedPrepaid.line_no+\" - \"+selectedPrepaid.pp_desc,pay_rem2:selectedPrepaid.id,pay_rem4:_this.state.pay_rem4,prepaid_ct:selectedPrepaid.conditiontype1});console.log(\"BeforeAdd-displayTablePrepaid\",_this.state.displayTablePrepaid);var setdisplayTablePrepaid=_this.state.displayTablePrepaid;setdisplayTablePrepaid.push(selectedPrepaid.id);_this.setState({displayTablePrepaid:setdisplayTablePrepaid});console.log(\"AfterAdd-displayTablePrepaid\",_this.state.displayTablePrepaid);_this.HidePrepaidTableData();balance=parseFloat(balance-userPayAmount).toFixed(2);_this.setBalanceToAllTextBoxes(balance);console.log(balance);_this.setState({isOpenSubPayment:false});};_this.addVoucher=function(selectedVoucher){var _this$state7=_this.state,cardField=_this$state7.cardField,ewalletField=_this$state7.ewalletField,balance=_this$state7.balance,txtUserPayAmount=_this$state7.txtUserPayAmount,isOpenSubPayment=_this$state7.isOpenSubPayment,selectedCards=_this$state7.selectedCards;if(txtUserPayAmount==0){return;}var selectedVoucherAmount=parseFloat(selectedVoucher.value);var pay_amt_setup=0;if(selectedVoucherAmount<=parseFloat(txtUserPayAmount)){pay_amt_setup=selectedVoucherAmount;}else{alert(\"Partial Amount is not applicable in voucher\");return;}var payTypeId=9;selectedCards.push({pay_typeid:payTypeId,prepaid:false,pay_amt:parseFloat(pay_amt_setup),credit_debit:false,pay_premise:false,pay_rem1:selectedVoucher.voucher_no,pay_rem2:selectedVoucher.voucher_no,pay_rem4:_this.state.pay_rem4});console.log(\"BeforeAdd-displayTableVoucher\",_this.state.displayTableVoucher);var setdisplayTableVoucher=_this.state.displayTableVoucher;setdisplayTableVoucher.push(selectedVoucher.voucher_no);_this.setState({displayTableVoucher:setdisplayTableVoucher});console.log(\"AfterAdd-displayTableCreditNote\",_this.state.displayTableVoucher);_this.HideVoucherTableData();balance=parseFloat(balance-pay_amt_setup).toFixed(2);_this.setState({isOpenSubPayment:false});_this.setBalanceToAllTextBoxes(balance);};_this.addCreditNote=function(selectedCreditNote){console.log(selectedCreditNote);var _this$state8=_this.state,cardField=_this$state8.cardField,ewalletField=_this$state8.ewalletField,balance=_this$state8.balance,txtUserPayAmount=_this$state8.txtUserPayAmount,selectedCards=_this$state8.selectedCards;if(txtUserPayAmount==0){return;}var selectedCreditNoteAmount=parseFloat(selectedCreditNote.balance);console.log(selectedCreditNoteAmount);var pay_amt_setup=0;if(selectedCreditNoteAmount<=parseFloat(txtUserPayAmount)){pay_amt_setup=selectedCreditNoteAmount;}else{pay_amt_setup=txtUserPayAmount;}var payTypeId=17;selectedCards.push({pay_typeid:payTypeId,prepaid:false,pay_amt:parseFloat(pay_amt_setup),credit_debit:false,pay_premise:false,pay_rem1:selectedCreditNote.credit_code,pay_rem2:selectedCreditNote.transaction,pay_rem4:_this.state.pay_rem4});console.log(\"BeforeAdd-displayTableCreditNote\",_this.state.displayTableCreditNote);var setdisplayTableCreditNote=_this.state.displayTableCreditNote;setdisplayTableCreditNote.push(selectedCreditNote.credit_code);_this.setState({displayTableCreditNote:setdisplayTableCreditNote});console.log(\"AfterAdd-displayTableCreditNote\",_this.state.displayTableCreditNote);_this.HideCreditNoteTableData();balance=parseFloat(balance-pay_amt_setup).toFixed(2);_this.setState({isOpenSubPayment:false});_this.setBalanceToAllTextBoxes(balance);};_this.removeCards=function(idx){return function(){var _this$state9=_this.state,selectedCards=_this$state9.selectedCards,balance=_this$state9.balance,cardField=_this$state9.cardField,ewalletField=_this$state9.ewalletField,itemProductServiceVoucherAmount=_this$state9.itemProductServiceVoucherAmount,itemProductAmount=_this$state9.itemProductAmount,itemServiceAmount=_this$state9.itemServiceAmount;_this.setState({isMakePaymentButtonClicked:\"false\"});balance=parseFloat(balance)+parseFloat(idx.pay_amt);var array=_toConsumableArray(selectedCards);// make a separate copy of the array\nvar index=array.indexOf(idx);if(idx.pay_typeid==23){if(idx.prepaid_ct==\"Product Only\"){itemProductAmount=itemProductAmount+idx.pay_amt;}else if(idx.prepaid_ct==\"Service Only\"){itemServiceAmount=itemServiceAmount+idx.pay_amt;}else{itemProductServiceVoucherAmount=itemProductServiceVoucherAmount+idx.pay_amt;}_this.setState({itemProductServiceVoucherAmount:itemProductServiceVoucherAmount,itemProductAmount:itemProductAmount,itemServiceAmount:itemServiceAmount});}if(index!==-1){array.splice(index,1);_this.setState({selectedCards:array,balance:balance});}//console.log(\"idx\", idx);\nvar removedTerm=idx.pay_typeid;//console.log(\"removedTerm\", removedTerm);\n//console.log(\"idx.pay_rem2\", idx.pay_rem2);\nif(removedTerm==\"23\"){var items=_this.state.displayTablePrepaid;console.log(\"BeforeRemove-displayTablePrepaid\",items);var valueToRemove=idx.pay_rem2;//For Prepaid Ony we have added unique id here\nconsole.log(\"BeforeRemove-valueToRemove\",valueToRemove);var filteredItems=items.filter(function(item){return item!==valueToRemove;});_this.setState({displayTablePrepaid:filteredItems},function(){console.log(\"AfterRemove-displayTablePrepaid\",_this.state.displayTablePrepaid);});_this.getPrepaidAccountData(\"\");// this.HidePrepaidTableData();\n}if(removedTerm==\"17\"){var _items=_this.state.displayTableCreditNote;console.log(\"BeforeRemove-displayTableCreditNote\",_items);var _valueToRemove=idx.pay_rem1;//For Credit Note Ony we have added unique id here\nconsole.log(\"BeforeRemove-valueToRemove\",_valueToRemove);var _filteredItems=_items.filter(function(item){return item!==_valueToRemove;});_this.setState({displayTableCreditNote:_filteredItems},function(){console.log(\"AfterRemove-displayTableCreditNote\",_this.state.displayTableCreditNote);});_this.getCreditNoteAccountData(\"\");// this.HidePrepaidTableData();\n}if(removedTerm==\"9\"){var _items2=_this.state.displayTableVoucher;console.log(\"BeforeRemove-displayTableVoucher\",_items2);var _valueToRemove2=idx.pay_rem1;//For Credit Note Ony we have added unique id here\nconsole.log(\"BeforeRemove-valueToRemove\",_valueToRemove2);var _filteredItems2=_items2.filter(function(item){return item!==_valueToRemove2;});_this.setState({displayTableVoucher:_filteredItems2},function(){console.log(\"AfterRemove-displayTableVoucher\",_this.state.displayTableVoucher);});_this.getVoucherData(\"\");}cardField[\"pay_amt\"]=balance;ewalletField[\"pay_amt\"]=balance;_this.setBalanceToAllTextBoxes(balance);};};_this.addNewPaymentData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(selPayTypeId,selPayTypeName){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.validator.fieldValid(\"Amount\")){_context2.next=3;break;}_this.validator.showMessageFor(\"Amount\");return _context2.abrupt(\"return\");case 3:if(_this.validator.fieldValid(\"Amount\")){_context2.next=6;break;}_this.validator.showMessageFor(\"Amount\");return _context2.abrupt(\"return\");case 6:_this.props.getCommonApi(\"paytablenew/?paygroupid=\".concat(selPayTypeId)).then(function(res){_this.setState({paytableData:[]});var _this$state10=_this.state,paytableData=_this$state10.paytableData,isSelectedPaymentType=_this$state10.isSelectedPaymentType,displayModelPaymentType=_this$state10.displayModelPaymentType;isSelectedPaymentType=selPayTypeName.trim();displayModelPaymentType=selPayTypeName.trim();var _iterator4=_createForOfIteratorHelper(res.data),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var key=_step4.value;paytableData.push({label:key.pay_description,value:key.id});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this.setState({paytableData:paytableData},function(){var isOpenSubPayment=_this.state.isOpenSubPayment;if(paytableData.length==0){alert(\"Pay Table Not Exists\");return;}else if(selPayTypeName.trim()===\"VOUCHER\"){isOpenSubPayment=true;}else if(selPayTypeName.trim()===\"PREPAID\"){isOpenSubPayment=true;}else if(selPayTypeName.trim()===\"Credit\"){isOpenSubPayment=true;}else if(selPayTypeName.trim()===\"CARD\"){isOpenSubPayment=true;}else if(paytableData.length==1){isOpenSubPayment=false;var payTypeId=paytableData[0].value;var _this$state11=_this.state,balance=_this$state11.balance,selectedCards=_this$state11.selectedCards,txtUserPayAmount=_this$state11.txtUserPayAmount;if(parseFloat(_this.state.responseData.billable_amount)>0){if(parseFloat(txtUserPayAmount)==0){return;}}if(_this.checkPayTypeIdAlreadyExists(payTypeId)){alert(_this.getPayTableNameBasedOnId(payTypeId)+\" already exists\");//alert(\"Already Exists\");\nreturn;}else{selectedCards.push({pay_typeid:payTypeId,pay_amt:parseFloat(txtUserPayAmount),credit_debit:false,pay_premise:true,prepaid:false,pay_rem4:_this.state.pay_rem4});balance=parseFloat(balance-txtUserPayAmount).toFixed(2);txtUserPayAmount=balance;_this.setState({txtUserPayAmount:txtUserPayAmount,balance:balance});return;}}else if(paytableData.length>=1){isOpenSubPayment=true;isSelectedPaymentType=\"Multiple\";}_this.setState({isOpenSubPayment:isOpenSubPayment,isSelectedPaymentType:isSelectedPaymentType,displayModelPaymentType:displayModelPaymentType});});});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref5.apply(this,arguments);};}();_this.handleDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var isOpenSubPayment;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:isOpenSubPayment=_this.state.isOpenSubPayment;isOpenSubPayment=false;_context3.next=4;return _this.setState({isOpenSubPayment:isOpenSubPayment});case 4:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleChangeCard=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref7){var _ref7$target,value,name,cardField;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref7$target=_ref7.target,value=_ref7$target.value,name=_ref7$target.name;cardField=Object.assign({},_this.state.cardField);cardField[name]=value;_context4.next=5;return _this.setState({cardField:cardField});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref8.apply(this,arguments);};}();return _this;}_createClass(MakePaymentClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getPayment();this.getPayGroup();this.getFullPayTable();this.getPrepaidData();this.getCreditNoteAccountData(\"\");this.getVoucherData(\"\");}},{key:\"handleChangeTextBox\",value:function handleChangeTextBox(event){this.setState({txtUserPayAmount:event.target.value});}},{key:\"handleChangeRemarkBox\",value:function handleChangeRemarkBox(event){this.setState({pay_rem4:event.target.value});}},{key:\"checkPayTypeIdAlreadyExists\",value:function checkPayTypeIdAlreadyExists(val){return this.state.selectedCards.some(function(item){return val===item.pay_typeid;});}},{key:\"HidePrepaidTableData\",value:function HidePrepaidTableData(){var _this2=this;var _this$state12=this.state,prepaidCustomerData=_this$state12.prepaidCustomerData,displayTablePrepaid=_this$state12.displayTablePrepaid;displayTablePrepaid.map(function(item){var selectedPrepaid=prepaidCustomerData.filter(function(prepaid){return prepaid.id!=item;});_this2.setState({prepaidCustomerData:selectedPrepaid});});}},{key:\"HideCreditNoteTableData\",value:function HideCreditNoteTableData(){var _this3=this;var _this$state13=this.state,creditNoteCustomerData=_this$state13.creditNoteCustomerData,displayTableCreditNote=_this$state13.displayTableCreditNote;displayTableCreditNote.map(function(item){var selectedCreditNote=creditNoteCustomerData.filter(function(creditNote){return creditNote.credit_code!=item;});_this3.setState({creditNoteCustomerData:selectedCreditNote});});}},{key:\"HideVoucherTableData\",value:function HideVoucherTableData(){var _this4=this;var _this$state14=this.state,voucherCustomerData=_this$state14.voucherCustomerData,displayTableVoucher=_this$state14.displayTableVoucher;displayTableVoucher.map(function(item){var selectedVoucher=voucherCustomerData.filter(function(voucher){return voucher.voucher_no!=item;});_this4.setState({voucherCustomerData:selectedVoucher});});}},{key:\"setBalanceToAllTextBoxes\",value:function setBalanceToAllTextBoxes(balance){this.setState({balance:balance,txtUserPayAmount:balance});}},{key:\"checkTypeOfCartItemContainsDeposit\",value:function checkTypeOfCartItemContainsDeposit(cartData){var _this5=this;var stringifiedCartData=cartData.data;if(stringifiedCartData){stringifiedCartData.map(function(item){if(item.type===\"Deposit\"||item.type===\"Top Up\"){_this5.state.isTreatmentDoneButton=false;}});}}},{key:\"render\",value:function render(){var _this6=this;var _this$state15=this.state,responseData=_this$state15.responseData,balance=_this$state15.balance,isTreatmentDoneButton=_this$state15.isTreatmentDoneButton,payGroupData=_this$state15.payGroupData,paytableData=_this$state15.paytableData,isOpenSubPayment=_this$state15.isOpenSubPayment,isSelectedPaymentType=_this$state15.isSelectedPaymentType,displayModelPaymentType=_this$state15.displayModelPaymentType,cardField=_this$state15.cardField,pay_rem4=_this$state15.pay_rem4;var payTableDropDownValue=this.state.formFields.payTableDropDownValue;console.log(payTableDropDownValue);var insideRadioButtonData;console.log(isSelectedPaymentType,\"selectedpaymenttype\");if(isSelectedPaymentType==\"VOUCHER\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Vocucher No\"),/*#__PURE__*/React.createElement(\"td\",null,\"Value\"),/*#__PURE__*/React.createElement(\"td\",null,\"Exp.Date\")),this.state.voucherCustomerData.map(function(selectedVoucher,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,style:{cursor:\"pointer\"},onClick:_this6.addVoucher.bind(_this6,selectedVoucher)},/*#__PURE__*/React.createElement(\"td\",null,selectedVoucher.voucher_no),/*#__PURE__*/React.createElement(\"td\",null,selectedVoucher.value),/*#__PURE__*/React.createElement(\"td\",null,selectedVoucher.issued_expiry_date));})));}else if(isSelectedPaymentType==\"PREPAID\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Category\"),/*#__PURE__*/React.createElement(\"td\",null,\"Amount\"),/*#__PURE__*/React.createElement(\"td\",null,\"Remaining\"),/*#__PURE__*/React.createElement(\"td\",null,\"InvoiceNo\"),/*#__PURE__*/React.createElement(\"td\",null,\"ExpDate\"),/*#__PURE__*/React.createElement(\"td\",null,\"ConditionType\")),this.state.prepaidCustomerData.map(function(selectedPrepaid,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,style:{cursor:\"pointer\"},onClick:_this6.addPrepaid.bind(_this6,selectedPrepaid)},/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.pp_desc),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.pp_total),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.remain),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.prepaid),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.exp_date),/*#__PURE__*/React.createElement(\"td\",null,selectedPrepaid.conditiontype1));})));}else if(isSelectedPaymentType==\"Credit\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Credit #\"),/*#__PURE__*/React.createElement(\"td\",null,\"Date\"),/*#__PURE__*/React.createElement(\"td\",null,\"Amount\"),/*#__PURE__*/React.createElement(\"td\",null,\"Balance\"),/*#__PURE__*/React.createElement(\"td\",null,\"Status\")),this.state.creditNoteCustomerData.map(function(creditNote,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,style:{cursor:\"pointer\"},onClick:_this6.addCreditNote.bind(_this6,creditNote)},/*#__PURE__*/React.createElement(\"td\",null,creditNote.credit_code),/*#__PURE__*/React.createElement(\"td\",null,creditNote.sa_date),/*#__PURE__*/React.createElement(\"td\",null,creditNote.amount),/*#__PURE__*/React.createElement(\"td\",null,creditNote.balance),/*#__PURE__*/React.createElement(\"td\",null,creditNote.status));})));}else if(isSelectedPaymentType==\"CARD\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-start\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Select Card\",/*#__PURE__*/React.createElement(NormalSelect,{placeholder:\"Search type...\",options:paytableData,value:cardField.pay_typeid,name:\"pay_typeid\",onChange:this.handleCreditChange})),this.validator.message(\"cardFieldType\",cardField.pay_typeid,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Card No\",/*#__PURE__*/React.createElement(NormalInput,{value:cardField.pay_rem1,name:\"pay_rem1\",onChange:this.handleChangeCard}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Name\",/*#__PURE__*/React.createElement(NormalInput,{value:cardField.pay_rem2,name:\"pay_rem2\",onChange:this.handleChangeCard}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Exp Month / Year\",/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"mm/YYYY\",value:cardField.pay_rem3,name:\"pay_rem3\",onChange:this.handleChangeCard}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},\"Approval Code\",/*#__PURE__*/React.createElement(NormalInput,{value:cardField.App_code,name:\"App_code\",onChange:this.handleChangeCard})))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:false,className:\"col-12 mt-4 ml-2 btn-outline-success\",label:\"CONFIRM\",onClick:function onClick(){return _this6.addCreditCard();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"}))));}else if(isSelectedPaymentType==\"Multiple\"){insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(Label,{className:\"col-12 fs-15\"},\"Choose Option\"),/*#__PURE__*/React.createElement(NormalSelect,{placeholder:\"Search type...\",options:paytableData,value:payTableDropDownValue,name:\"payTableDropDownValue\",onChange:this.handleChange})))));}else{insideRadioButtonData=/*#__PURE__*/React.createElement(\"div\",null);}var payGroupDataContent=[];console.log(payGroupData);payGroupData.forEach(function(item,i){payGroupDataContent.push(/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\",style:{width:\"100px\",margin:\"50px\"}},/*#__PURE__*/React.createElement(\"img\",{src:helpers.getUrl()+\"media/\"+item.picturelocation,label:item.label,onClick:function onClick(){return _this6.addNewPaymentData(item.value,item.label);},style:{cursor:\"pointer\"}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"p\",{style:{width:\"100px\",textAlign:\"center\"}},item.label))));});var _this$props4=this.props,cartId=_this$props4.cartId,cartData=_this$props4.cartData,tokenDetails=_this$props4.tokenDetails;console.log(cartId,tokenDetails,this.props.cartData);this.checkTypeOfCartItemContainsDeposit(cartData);var userAddedPayTableData=/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered\"},this.state.selectedCards.map(function(selectedCards,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"fs-18\"},_this6.getPayTableNameBasedOnId(selectedCards.pay_typeid)),/*#__PURE__*/React.createElement(\"td\",{className:\"fs-18\",style:{textAlign:\"right\"}},selectedCards.pay_amt.toFixed(2)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 p-0 fs-20 cursor-pointer\",onClick:_this6.removeCards(selectedCards)},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-delete\"}))));}));return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(NormalModal,{className:\"payment-modal\",style:{minWidth:\"800px\"},modal:isOpenSubPayment,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 f-600\"},displayModelPaymentType)),/*#__PURE__*/React.createElement(\"br\",null),insideRadioButtonData),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Label,{className:\"col-3 fs-18\"},\"Enter Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalInput,{value:this.state.txtUserPayAmount,onChange:this.handleChangeTextBox.bind(this)}),this.validator.message(\"Amount\",this.state.txtUserPayAmount,\"required|numeric|min:0,num\"),this.validator.message(\"Amount\",this.state.txtUserPayAmount,\"required|numeric|max:\"+this.state.balance+\",num\")),/*#__PURE__*/React.createElement(Label,{className:\"col-2 fs-18\"},\"Remark\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(NormalInput,{value:pay_rem4,name:\"pay_rem4\",onChange:this.handleChangeRemarkBox.bind(this)}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 \"},/*#__PURE__*/React.createElement(\"h4\",null,\"Select Payment Method\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row col-12 paymentGroup\"},payGroupDataContent)),/*#__PURE__*/React.createElement(\"div\",{className:\"make-payment-section mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row \"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-8 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 ml-1 payment fs-12\"},userAddedPayTableData)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 ml-1 payment\"},/*#__PURE__*/React.createElement(\"p\",null,\"List of selection's\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row fs-14\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},\"Subtotal\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"$ \",responseData.subtotal),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},\"Discount ($)\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"$ \",responseData.discount),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},\"Transac amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"$ \",responseData.trans_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},\"Deposit\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"$ \",responseData.deposit_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},responseData.tax_lable),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"$ \",responseData.tax_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 fs-22 text-center mt-5\"},\"Billing Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 fs-22 f-700 text-center text-orenge\"},\"$ \",responseData.billable_amount),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 f-600 text-center mt-5\"},\"Balance Amount: \",Number(balance).toFixed(2))))))),isTreatmentDoneButton?/*#__PURE__*/React.createElement(\"div\",{className:\"make-payment mt-3 text-center\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 \",label:\"TREATMENT DONE\",onClick:function onClick(){return _this6.handleTreatmentDone();}})):null,/*#__PURE__*/React.createElement(\"div\",{className:\"make-payment mt-3 text-center\"},this.state.isMakePaymentButtonClicked==\"true\"?/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 \",label:\"Make payment\",disabled:true}):/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 \",label:\"Make payment \",onClick:function onClick(){return _this6.handleSubmit();},disabled:this.state.selectedCards.length<=0||balance>0}))));}}]);return MakePaymentClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{appointmentDetail:state.appointment.appointmentDetail,selected_cstomer:state.common.selected_cstomer,tokenDetails:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getPayment:getPayment,getCommonApi:getCommonApi,createPayment:createPayment},dispatch);};export var Payment=connect(mapStateToProps,mapDispatchToProps)(MakePaymentClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/cart/payment.js"],"names":["React","Component","NormalInput","NormalTextarea","NormalButton","NormalSelect","NormalDate","NormalModal","Button","Form","FormGroup","Label","Input","FormText","getPayment","createPayment","connect","bindActionCreators","history","getCommonApi","dateFormat","SimpleReactValidator","closeIcon","helpers","moment","require","MakePaymentClass","state","formFields","name","contact","address","searchStaff","payTableDropDownValue","responseData","premisesOption","selectedCards","selectedCardsPayAmount","cardOption","ewalletoptions","ewalletField","pay_typeid","pay_amt","credit_debit","cardField","pay_rem1","pay_rem2","pay_rem3","pay_rem4","App_code","balance","errorMessage","prepaidCustomerData","voucherCustomerData","creditNoteCustomerData","accountHeader","isMakePaymentButtonClicked","isTreatmentDoneButton","itemProductAmount","itemServiceAmount","itemProductServiceVoucherAmount","displayTablePrepaid","displayTableCreditNote","displayTableVoucher","paytableData","paytableFullData","payGroupData","selectPaymentGroup","selectPaymentGroupId","isSelectedPaymentType","displayModelPaymentType","txtUserPayAmount","isOpenSubPayment","componentWillMount","validator","element","message","autoForceUpdate","props","id","cartId","cartData","Date","then","res","setState","data","Number","billable_amount","stringifiedCartData","console","log","map","item","recorddetail","parseFloat","total_price","getDataFromResponses","CARD","key","push","label","pay_description","value","CASH","handleMultiple","target","Object","assign","getVoucherData","api","HideVoucherTableData","getPrepaidData","getPrepaidAccountData","HidePrepaidTableData","getCreditNoteAccountData","HideCreditNoteTableData","getPayGroup","pay_group_code","picturelocation","getFullPayTable","getPayTableNameBasedOnId","payTableId","test","filter","handleChange","pay_premise","prepaid","toFixed","handleCreditChange","handleTreatmentDone","sa_transacno","handleSubmit","addCreditCard","fieldValid","showMessageFor","userPayAmount","checkPayTypeIdAlreadyExists","alert","setBalanceToAllTextBoxes","addPrepaid","selectedPrepaid","prepaidExpDate","exp_date","format","todaysDate","isValid","isSameOrAfter","selectedRemainingPrepaidAmount","remain","conditiontype1","payTypeId","pp_no","line_no","pp_desc","prepaid_ct","setdisplayTablePrepaid","addVoucher","selectedVoucher","selectedVoucherAmount","pay_amt_setup","voucher_no","setdisplayTableVoucher","addCreditNote","selectedCreditNote","selectedCreditNoteAmount","credit_code","transaction","setdisplayTableCreditNote","removeCards","idx","array","index","indexOf","splice","removedTerm","items","valueToRemove","filteredItems","addNewPaymentData","selPayTypeId","selPayTypeName","trim","length","handleDialog","handleChangeCard","event","val","some","creditNote","voucher","type","insideRadioButtonData","cursor","bind","issued_expiry_date","pp_total","sa_date","amount","status","payGroupDataContent","forEach","i","width","margin","getUrl","textAlign","tokenDetails","checkTypeOfCartItemContainsDeposit","userAddedPayTableData","minWidth","handleChangeTextBox","handleChangeRemarkBox","subtotal","discount","trans_amt","deposit_amt","tax_lable","tax_amt","mapStateToProps","appointmentDetail","appointment","selected_cstomer","common","authStore","mapDispatchToProps","dispatch","Payment"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalInput,\r\n  NormalTextarea,\r\n  NormalButton,\r\n  NormalSelect,\r\n  NormalDate,\r\n  NormalModal,\r\n} from \"component/common\";\r\nimport { Button, Form, FormGroup, Label, Input, FormText } from \"reactstrap\";\r\nimport { getPayment, createPayment } from \"redux/actions/payment\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { history } from \"helpers\";\r\nimport { getCommonApi } from \"redux/actions/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport \"./style.scss\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport helpers from \"../../../../service/Helper\";\r\nconst moment = require(\"moment\");\r\nexport class MakePaymentClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      name: \"\",\r\n      contact: \"\",\r\n      address: \"\",\r\n      searchStaff: \"\",\r\n      payTableDropDownValue: \"\",\r\n    },\r\n    responseData: {},\r\n\r\n    premisesOption: [],\r\n    selectedCards: [],\r\n    selectedCardsPayAmount: 0,\r\n    cardOption: [],\r\n    ewalletoptions: [],\r\n\r\n    ewalletField: {\r\n      pay_typeid: null,\r\n      pay_amt: \"\",\r\n      credit_debit: true,\r\n    },\r\n    cardField: {\r\n      pay_typeid: null,\r\n      pay_amt: \"\",\r\n      credit_debit: true,\r\n      pay_rem1: \"\",\r\n      pay_rem2: \"\",\r\n      pay_rem3: \"\",\r\n      pay_rem4: \"\",\r\n      App_code: \"\",\r\n    },\r\n    balance: 0,\r\n    errorMessage: \"123\",\r\n    prepaidCustomerData: [],\r\n    voucherCustomerData: [],\r\n    creditNoteCustomerData: [],\r\n    accountHeader: [],\r\n    isMakePaymentButtonClicked: \"false\",\r\n    isTreatmentDoneButton: true,\r\n    itemProductAmount: 0,\r\n    itemServiceAmount: 0,\r\n    itemProductServiceVoucherAmount: 0,\r\n    displayTablePrepaid: [],\r\n    displayTableCreditNote: [],\r\n    displayTableVoucher: [],\r\n    paytableData: [],\r\n    paytableFullData: [],\r\n    payGroupData: [],\r\n    selectPaymentGroup: \"\",\r\n    selectPaymentGroupId: \"\",\r\n    isSelectedPaymentType: \"\",\r\n    displayModelPaymentType: \"\",\r\n    txtUserPayAmount: 0,\r\n    isOpenSubPayment: false,\r\n    pay_rem4: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getPayment();\r\n    this.getPayGroup();\r\n    this.getFullPayTable();\r\n    this.getPrepaidData();\r\n    this.getCreditNoteAccountData(\"\");\r\n    this.getVoucherData(\"\");\r\n  }\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n  // get method for payment detail against appointment\r\n  getPayment = () => {\r\n    let { id, cartId, cartData } = this.props;\r\n    //id = 82318;\r\n    //cartId = \"ICMD100226\";\r\n    //cartData={\"status\":200,\"message\":\"Listed Succesfully\",\"error\":false,\"data\":[{\"id\":57500,\"cust_noid\":82318,\"customer\":\"test17011\",\"customercode\":\"021427HQ\",\"cart_id\":\"ICHQ100234\",\"cart_date\":\"2021-03-14\",\"cart_status\":\"Inprogress\",\"lineno\":1,\"check\":\"New\",\"itemcodeid\":10067,\"itemdesc\":\"Short - Chin Length(Before Shoulder) 128\",\"quantity\":1,\"price\":\"128.00\",\"total_price\":\"128.00\",\"sitecodeid\":31,\"sitecode_name\":\"HQ OFFICE (DEMO)\",\"sitecode\":\"HQ\",\"discount\":\"0.00\",\"discount_amt\":0,\"discount_price\":\"128.00\",\"additional_discount\":0,\"additional_discountamt\":0,\"deposit\":\"128.00\",\"trans_amt\":\"128.00\",\"tax\":0,\"itemstatus\":null,\"ratio\":\"100.000000000000000\",\"helper_name\":null,\"done_sessions\":null,\"type\":\"Deposit\",\"treatment_account\":null,\"treatment\":null,\"deposit_account\":null,\"prepaid_account\":null,\"item_uom\":null,\"recorddetail\":\"Service\",\"itemtype\":\"SINGLE\",\"item_class\":\"HERBAL TREATMENT\",\"sales_staff\":\"SEQ ADMIN\",\"service_staff\":\"\",\"total_disc\":\"0.00\",\"treatment_name\":\"Short - Chin Length(Before Shoulder) 128  (1)\",\"item_name\":\"Short - Chin Length(Before Shoulder) 128\"}],\"subtotal\":\"128.00\",\"discount\":\"0.00\",\"trans_amt\":\"128.00\",\"deposit_amt\":\"128.00\",\"billable_amount\":\"128.00\"}\r\n    if (id) {\r\n      this.props\r\n        .getPayment(\r\n          `?cart_date=${dateFormat(\r\n            new Date(),\r\n            \"yyyy-mm-dd\"\r\n          )}&cust_noid=${id}&cart_id=${cartId}`\r\n        )\r\n        .then(res => {\r\n          this.setState({\r\n            responseData: res.data,\r\n            balance: Number(res.data.billable_amount),\r\n            txtUserPayAmount: Number(res.data.billable_amount),\r\n          });\r\n        });\r\n    } else {\r\n      // history.push(\"/admin/cart\");\r\n    }\r\n\r\n    //let {cartData} = this.props;\r\n    let stringifiedCartData = cartData.data;\r\n    console.log(stringifiedCartData);\r\n    let {\r\n      itemProductAmount,\r\n      itemServiceAmount,\r\n      itemProductServiceVoucherAmount,\r\n    } = this.state;\r\n    if (stringifiedCartData) {\r\n      stringifiedCartData.map(item => {\r\n        //alert(JSON.stringify(item));\r\n        if (item.recorddetail === \"Product\") {\r\n          itemProductAmount += parseFloat(item.total_price);\r\n        }\r\n        if (item.recorddetail === \"Service\") {\r\n          itemServiceAmount += parseFloat(item.total_price);\r\n          console.log(itemServiceAmount);\r\n          console.log(item.total_price);\r\n        }\r\n        if (\r\n          item.recorddetail === \"Product\" ||\r\n          item.recorddetail === \"Service\" ||\r\n          item.recorddetail === \"Voucher\"\r\n        ) {\r\n          itemProductServiceVoucherAmount += parseFloat(item.total_price);\r\n        }\r\n      });\r\n    }\r\n    this.setState({\r\n      itemProductAmount,\r\n      itemServiceAmount,\r\n      itemProductServiceVoucherAmount,\r\n    });\r\n  };\r\n  // set data to dropdown fields\r\n  getDataFromResponses = data => {\r\n    let { cardOption, premisesOption } = this.state;\r\n    for (let key of data.CARD) {\r\n      cardOption.push({ label: key.pay_description, value: key.id });\r\n    }\r\n    for (let key of data.CASH) {\r\n      premisesOption.push({ label: key.pay_description, value: key.id });\r\n    }\r\n    this.setState({\r\n      cardOption,\r\n      premisesOption,\r\n    });\r\n  };\r\n\r\n  handleMultiple = ({ target: { value, name } }) => {\r\n    console.log(\"handleMultiple\", value, name);\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n  getVoucherData = api => {\r\n    this.props\r\n      .getCommonApi(`voucher/?cust_id=${this.props.id}${api}`)\r\n      .then(key => {\r\n        let { data } = key;\r\n        let { voucherCustomerData } = this.state;\r\n        voucherCustomerData = data;\r\n        console.log(\"voucherCustomerData\", data);\r\n        // accountHeader = header_data;\r\n        this.setState({ voucherCustomerData }, () => {\r\n          console.log(\"test\");\r\n          this.HideVoucherTableData();\r\n        });\r\n      });\r\n  };\r\n\r\n  getPrepaidData = () => {\r\n    this.getPrepaidAccountData(\"\");\r\n  };\r\n  getPrepaidAccountData = api => {\r\n    console.log(\"dd\");\r\n    this.props\r\n      .getCommonApi(`prepaidacclist/?cust_id=${this.props.id}${api}`)\r\n      .then(key => {\r\n        let { data } = key;\r\n        let { prepaidCustomerData } = this.state;\r\n        prepaidCustomerData = data;\r\n        console.log(\"prepaidCustomerData\", data);\r\n        // accountHeader = header_data;\r\n        this.setState({ prepaidCustomerData }, () => {\r\n          this.HidePrepaidTableData();\r\n        });\r\n      });\r\n  };\r\n  getCreditNoteAccountData = api => {\r\n    this.props\r\n      .getCommonApi(`creditnotelist/?cust_id=${this.props.id}${api}`)\r\n      .then(key => {\r\n        let { data } = key;\r\n        let { creditNoteCustomerData } = this.state;\r\n        creditNoteCustomerData = data;\r\n        // accountHeader = header_data;\r\n        this.setState({ creditNoteCustomerData }, () => {\r\n          this.HideCreditNoteTableData();\r\n        });\r\n      });\r\n  };\r\n  getPayGroup = () => {\r\n    this.props.getCommonApi(`paygroup/`).then(res => {\r\n      let { payGroupData } = this.state;\r\n      for (let key of res.data) {\r\n        payGroupData.push({\r\n          label: key.pay_group_code,\r\n          value: key.id,\r\n          picturelocation: key.picturelocation,\r\n        });\r\n      }\r\n      this.setState({\r\n        payGroupData,\r\n      });\r\n    });\r\n  };\r\n  getFullPayTable = () => {\r\n    this.props.getCommonApi(`paytablenew/`).then(res => {\r\n      let { paytableFullData } = this.state;\r\n      paytableFullData = res.data;\r\n      this.setState({\r\n        paytableFullData,\r\n      });\r\n    });\r\n  };\r\n\r\n  getPayTableNameBasedOnId = payTableId => {\r\n    let { paytableFullData } = this.state;\r\n    const test = paytableFullData.filter(res => res.id == payTableId);\r\n    return test[0].pay_description;\r\n  };\r\n\r\n  handleChangeTextBox(event) {\r\n    this.setState({\r\n      txtUserPayAmount: event.target.value,\r\n    });\r\n  }\r\n  handleChangeRemarkBox(event) {\r\n    this.setState({\r\n      pay_rem4: event.target.value,\r\n    });\r\n  }\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n    this.setState({\r\n      formFields,\r\n    });\r\n    let { balance, selectedCards, txtUserPayAmount, isOpenSubPayment } =\r\n      this.state;\r\n    isOpenSubPayment = false;\r\n    selectedCards.push({\r\n      pay_typeid: value,\r\n      pay_amt: parseFloat(txtUserPayAmount),\r\n      credit_debit: false,\r\n      pay_premise: true,\r\n      prepaid: false,\r\n      pay_rem4: this.state.pay_rem4,\r\n    });\r\n    balance = parseFloat(balance - txtUserPayAmount).toFixed(2);\r\n    txtUserPayAmount = balance;\r\n    this.setState({ txtUserPayAmount, balance, isOpenSubPayment });\r\n  };\r\n  handleCreditChange = ({ target: { value, name } }) => {\r\n    let cardField = Object.assign({}, this.state.cardField);\r\n\r\n    cardField[name] = value;\r\n    this.setState({\r\n      cardField,\r\n    });\r\n  };\r\n  handleTreatmentDone = () => {\r\n    let { selectedCards } = this.state;\r\n    selectedCards.push({\r\n      pay_typeid: 2,\r\n      pay_amt: 0,\r\n      credit_debit: false,\r\n      pay_premise: true,\r\n      prepaid: false,\r\n      pay_rem4: this.state.pay_rem4,\r\n    });\r\n    let data = selectedCards;\r\n    let { id, cartId } = this.props;\r\n    this.props\r\n      .createPayment(\r\n        `?cart_date=${dateFormat(\r\n          new Date(),\r\n          \"yyyy-mm-dd\"\r\n        )}&cust_noid=${id}&cart_id=${cartId}`,\r\n        data\r\n      )\r\n      .then(res => {\r\n        history.push(`/admin/billing/print/bill/${res.data.sa_transacno}`);\r\n      });\r\n  };\r\n  // create payment detail\r\n  handleSubmit = () => {\r\n    let { selectedCards } = this.state;\r\n\r\n    this.setState({ isMakePaymentButtonClicked: \"true\" });\r\n    let data = selectedCards;\r\n    console.log(\"SubmitData\", data);\r\n    let { id, cartId } = this.props;\r\n    this.props\r\n      .createPayment(\r\n        `?cart_date=${dateFormat(\r\n          new Date(),\r\n          \"yyyy-mm-dd\"\r\n        )}&cust_noid=${id}&cart_id=${cartId}`,\r\n        data\r\n      )\r\n      .then(res => {\r\n        history.push(`/admin/billing/print/bill/${res.data.sa_transacno}`);\r\n      });\r\n  };\r\n  checkPayTypeIdAlreadyExists(val) {\r\n    return this.state.selectedCards.some(item => val === item.pay_typeid);\r\n  }\r\n  addCreditCard = async () => {\r\n    if (!this.validator.fieldValid(\"cardFieldType\")) {\r\n      this.validator.showMessageFor(\"cardFieldType\");\r\n      return;\r\n    }\r\n\r\n    let { cardField, selectedCards, balance, responseData, txtUserPayAmount } =\r\n      this.state;\r\n    let userPayAmount = parseFloat(txtUserPayAmount);\r\n    if (parseFloat(this.state.responseData.billable_amount) > 0) {\r\n      if (userPayAmount == 0) {\r\n        return;\r\n      }\r\n    }\r\n    if (this.checkPayTypeIdAlreadyExists(cardField.pay_typeid)) {\r\n      alert(\r\n        this.getPayTableNameBasedOnId(cardField.pay_typeid) + \" already exists\"\r\n      );\r\n      return;\r\n    } else {\r\n      selectedCards.push({\r\n        pay_typeid: cardField.pay_typeid,\r\n        pay_amt: userPayAmount,\r\n        credit_debit: true,\r\n        pay_premise: false,\r\n        pay_rem1: cardField.pay_rem1,\r\n        pay_rem2: cardField.pay_rem2,\r\n        pay_rem3: cardField.pay_rem3,\r\n        pay_rem4: this.state.pay_rem4,\r\n        prepaid: false,\r\n      });\r\n    }\r\n\r\n    balance = parseFloat(balance - userPayAmount).toFixed(2);\r\n    this.setState({ isOpenSubPayment: false });\r\n    this.setBalanceToAllTextBoxes(balance);\r\n  };\r\n  addPrepaid = selectedPrepaid => {\r\n    const prepaidExpDate = moment(selectedPrepaid.exp_date).format(\r\n      \"YYYY-MM-DD\"\r\n    );\r\n    const todaysDate = moment(new Date()).format(\"YYYY-MM-DD\");\r\n    const isValid = moment(todaysDate).isSameOrAfter(prepaidExpDate);\r\n    let userPayAmount = 0;\r\n    let {\r\n      itemServiceAmount,\r\n      itemProductAmount,\r\n      itemProductServiceVoucherAmount,\r\n      txtUserPayAmount,\r\n    } = this.state;\r\n    console.log(txtUserPayAmount);\r\n    userPayAmount = parseFloat(txtUserPayAmount);\r\n    if (isValid) {\r\n      alert(\"Check Expiry Date\");\r\n      return;\r\n    }\r\n    if (userPayAmount <= 0) {\r\n      // alert(\"hi\");\r\n      return;\r\n    }\r\n\r\n    const selectedRemainingPrepaidAmount = parseFloat(selectedPrepaid.remain);\r\n    if (selectedRemainingPrepaidAmount < userPayAmount) {\r\n      //return\r\n    }\r\n    /*\r\n    if (!this.validator.fieldValid(\"PrepaidBalanceAmount\")) {\r\n      this.validator.showMessageFor(\"PrepaidBalanceAmount\");\r\n      return;\r\n    }\r\n    if (!this.validator.fieldValid(\"PrepaidBalanceAmount\")) {\r\n      this.validator.showMessageFor(\"PrepaidBalanceAmount\");\r\n      return;\r\n    }\r\n*/\r\n    if (selectedPrepaid.conditiontype1 === \"Service Only\") {\r\n      //For Service\r\n      if (parseFloat(itemServiceAmount) == 0) {\r\n        return;\r\n      }\r\n      if (parseFloat(itemServiceAmount) <= selectedRemainingPrepaidAmount) {\r\n        userPayAmount =\r\n          parseFloat(txtUserPayAmount) < parseFloat(itemServiceAmount)\r\n            ? parseFloat(txtUserPayAmount)\r\n            : parseFloat(itemServiceAmount);\r\n        console.log(itemServiceAmount);\r\n        console.log(userPayAmount);\r\n      } else {\r\n        userPayAmount = selectedRemainingPrepaidAmount;\r\n        console.log(userPayAmount);\r\n      }\r\n      itemServiceAmount = itemServiceAmount - userPayAmount;\r\n      this.setState({ itemServiceAmount });\r\n    } else if (selectedPrepaid.conditiontype1 === \"Product Only\") {\r\n      //For Product\r\n      if (parseFloat(itemProductAmount) == 0) {\r\n        return;\r\n      }\r\n      if (parseFloat(itemProductAmount) <= selectedRemainingPrepaidAmount) {\r\n        userPayAmount =\r\n          parseFloat(txtUserPayAmount) < parseFloat(itemProductAmount)\r\n            ? parseFloat(txtUserPayAmount)\r\n            : parseFloat(itemProductAmount);\r\n        console.log(userPayAmount);\r\n      } else {\r\n        userPayAmount = selectedRemainingPrepaidAmount;\r\n        console.log(userPayAmount);\r\n      }\r\n      itemProductAmount = itemProductAmount - userPayAmount;\r\n      this.setState({ itemProductAmount });\r\n    } else {\r\n      if (parseFloat(itemProductServiceVoucherAmount) == 0) {\r\n        return;\r\n      }\r\n      if (\r\n        parseFloat(itemProductServiceVoucherAmount) <=\r\n        selectedRemainingPrepaidAmount\r\n      ) {\r\n        userPayAmount =\r\n          parseFloat(txtUserPayAmount) <\r\n          parseFloat(itemProductServiceVoucherAmount)\r\n            ? parseFloat(txtUserPayAmount)\r\n            : parseFloat(itemProductServiceVoucherAmount);\r\n        console.log(userPayAmount);\r\n      } else {\r\n        userPayAmount = selectedRemainingPrepaidAmount;\r\n        console.log(userPayAmount);\r\n      }\r\n      itemProductServiceVoucherAmount =\r\n        itemProductServiceVoucherAmount - userPayAmount;\r\n      this.setState({ itemProductServiceVoucherAmount });\r\n    }\r\n    if (userPayAmount == 0) {\r\n      return;\r\n    }\r\n    const payTypeId = 23;\r\n    let { cardField, ewalletField, balance, selectedCards, isOpenSubPayment } =\r\n      this.state;\r\n\r\n    selectedCards.push({\r\n      pay_typeid: payTypeId,\r\n      prepaid: true,\r\n      pay_amt: userPayAmount,\r\n      credit_debit: false,\r\n      pay_premise: false,\r\n      pay_rem1:\r\n        selectedPrepaid.pp_no +\r\n        \" - \" +\r\n        selectedPrepaid.line_no +\r\n        \" - \" +\r\n        selectedPrepaid.pp_desc,\r\n      pay_rem2: selectedPrepaid.id,\r\n      pay_rem4: this.state.pay_rem4,\r\n      prepaid_ct: selectedPrepaid.conditiontype1,\r\n    });\r\n    console.log(\r\n      \"BeforeAdd-displayTablePrepaid\",\r\n      this.state.displayTablePrepaid\r\n    );\r\n    let setdisplayTablePrepaid = this.state.displayTablePrepaid;\r\n    setdisplayTablePrepaid.push(selectedPrepaid.id);\r\n    this.setState({ displayTablePrepaid: setdisplayTablePrepaid });\r\n    console.log(\"AfterAdd-displayTablePrepaid\", this.state.displayTablePrepaid);\r\n    this.HidePrepaidTableData();\r\n\r\n    balance = parseFloat(balance - userPayAmount).toFixed(2);\r\n    this.setBalanceToAllTextBoxes(balance);\r\n    console.log(balance);\r\n    this.setState({ isOpenSubPayment: false });\r\n  };\r\n  HidePrepaidTableData() {\r\n    let { prepaidCustomerData, displayTablePrepaid } = this.state;\r\n    displayTablePrepaid.map(item => {\r\n      var selectedPrepaid = prepaidCustomerData.filter(\r\n        prepaid => prepaid.id != item\r\n      );\r\n      this.setState({ prepaidCustomerData: selectedPrepaid });\r\n    });\r\n  }\r\n  HideCreditNoteTableData() {\r\n    let { creditNoteCustomerData, displayTableCreditNote } = this.state;\r\n    displayTableCreditNote.map(item => {\r\n      var selectedCreditNote = creditNoteCustomerData.filter(\r\n        creditNote => creditNote.credit_code != item\r\n      );\r\n      this.setState({ creditNoteCustomerData: selectedCreditNote });\r\n    });\r\n  }\r\n  HideVoucherTableData() {\r\n    let { voucherCustomerData, displayTableVoucher } = this.state;\r\n    displayTableVoucher.map(item => {\r\n      var selectedVoucher = voucherCustomerData.filter(\r\n        voucher => voucher.voucher_no != item\r\n      );\r\n      this.setState({ voucherCustomerData: selectedVoucher });\r\n    });\r\n  }\r\n  addVoucher = selectedVoucher => {\r\n    let {\r\n      cardField,\r\n      ewalletField,\r\n      balance,\r\n      txtUserPayAmount,\r\n      isOpenSubPayment,\r\n      selectedCards,\r\n    } = this.state;\r\n    if (txtUserPayAmount == 0) {\r\n      return;\r\n    }\r\n    const selectedVoucherAmount = parseFloat(selectedVoucher.value);\r\n    let pay_amt_setup = 0;\r\n    if (selectedVoucherAmount <= parseFloat(txtUserPayAmount)) {\r\n      pay_amt_setup = selectedVoucherAmount;\r\n    } else {\r\n      alert(\"Partial Amount is not applicable in voucher\");\r\n      return;\r\n    }\r\n    const payTypeId = 9;\r\n\r\n    selectedCards.push({\r\n      pay_typeid: payTypeId,\r\n      prepaid: false,\r\n      pay_amt: parseFloat(pay_amt_setup),\r\n      credit_debit: false,\r\n      pay_premise: false,\r\n      pay_rem1: selectedVoucher.voucher_no,\r\n      pay_rem2: selectedVoucher.voucher_no,\r\n      pay_rem4: this.state.pay_rem4,\r\n    });\r\n    console.log(\r\n      \"BeforeAdd-displayTableVoucher\",\r\n      this.state.displayTableVoucher\r\n    );\r\n    let setdisplayTableVoucher = this.state.displayTableVoucher;\r\n    setdisplayTableVoucher.push(selectedVoucher.voucher_no);\r\n    this.setState({ displayTableVoucher: setdisplayTableVoucher });\r\n    console.log(\r\n      \"AfterAdd-displayTableCreditNote\",\r\n      this.state.displayTableVoucher\r\n    );\r\n    this.HideVoucherTableData();\r\n\r\n    balance = parseFloat(balance - pay_amt_setup).toFixed(2);\r\n    this.setState({ isOpenSubPayment: false });\r\n    this.setBalanceToAllTextBoxes(balance);\r\n  };\r\n  addCreditNote = selectedCreditNote => {\r\n    console.log(selectedCreditNote);\r\n    let { cardField, ewalletField, balance, txtUserPayAmount, selectedCards } =\r\n      this.state;\r\n    if (txtUserPayAmount == 0) {\r\n      return;\r\n    }\r\n    const selectedCreditNoteAmount = parseFloat(selectedCreditNote.balance);\r\n    console.log(selectedCreditNoteAmount);\r\n    let pay_amt_setup = 0;\r\n    if (selectedCreditNoteAmount <= parseFloat(txtUserPayAmount)) {\r\n      pay_amt_setup = selectedCreditNoteAmount;\r\n    } else {\r\n      pay_amt_setup = txtUserPayAmount;\r\n    }\r\n    const payTypeId = 17;\r\n\r\n    selectedCards.push({\r\n      pay_typeid: payTypeId,\r\n      prepaid: false,\r\n      pay_amt: parseFloat(pay_amt_setup),\r\n      credit_debit: false,\r\n      pay_premise: false,\r\n      pay_rem1: selectedCreditNote.credit_code,\r\n      pay_rem2: selectedCreditNote.transaction,\r\n      pay_rem4: this.state.pay_rem4,\r\n    });\r\n    console.log(\r\n      \"BeforeAdd-displayTableCreditNote\",\r\n      this.state.displayTableCreditNote\r\n    );\r\n    let setdisplayTableCreditNote = this.state.displayTableCreditNote;\r\n    setdisplayTableCreditNote.push(selectedCreditNote.credit_code);\r\n    this.setState({ displayTableCreditNote: setdisplayTableCreditNote });\r\n    console.log(\r\n      \"AfterAdd-displayTableCreditNote\",\r\n      this.state.displayTableCreditNote\r\n    );\r\n    this.HideCreditNoteTableData();\r\n\r\n    balance = parseFloat(balance - pay_amt_setup).toFixed(2);\r\n    this.setState({ isOpenSubPayment: false });\r\n    this.setBalanceToAllTextBoxes(balance);\r\n  };\r\n\r\n  setBalanceToAllTextBoxes(balance) {\r\n    this.setState({\r\n      balance: balance,\r\n      txtUserPayAmount: balance,\r\n    });\r\n  }\r\n  removeCards = idx => () => {\r\n    let {\r\n      selectedCards,\r\n      balance,\r\n      cardField,\r\n      ewalletField,\r\n      itemProductServiceVoucherAmount,\r\n      itemProductAmount,\r\n      itemServiceAmount,\r\n    } = this.state;\r\n    this.setState({ isMakePaymentButtonClicked: \"false\" });\r\n    balance = parseFloat(balance) + parseFloat(idx.pay_amt);\r\n    var array = [...selectedCards]; // make a separate copy of the array\r\n    var index = array.indexOf(idx);\r\n    if (idx.pay_typeid == 23) {\r\n      if (idx.prepaid_ct == \"Product Only\") {\r\n        itemProductAmount = itemProductAmount + idx.pay_amt;\r\n      } else if (idx.prepaid_ct == \"Service Only\") {\r\n        itemServiceAmount = itemServiceAmount + idx.pay_amt;\r\n      } else {\r\n        itemProductServiceVoucherAmount =\r\n          itemProductServiceVoucherAmount + idx.pay_amt;\r\n      }\r\n      this.setState({\r\n        itemProductServiceVoucherAmount,\r\n        itemProductAmount,\r\n        itemServiceAmount,\r\n      });\r\n    }\r\n    if (index !== -1) {\r\n      array.splice(index, 1);\r\n      this.setState({ selectedCards: array, balance });\r\n    }\r\n    //console.log(\"idx\", idx);\r\n    var removedTerm = idx.pay_typeid;\r\n    //console.log(\"removedTerm\", removedTerm);\r\n    //console.log(\"idx.pay_rem2\", idx.pay_rem2);\r\n    if (removedTerm == \"23\") {\r\n      const items = this.state.displayTablePrepaid;\r\n      console.log(\"BeforeRemove-displayTablePrepaid\", items);\r\n      const valueToRemove = idx.pay_rem2; //For Prepaid Ony we have added unique id here\r\n      console.log(\"BeforeRemove-valueToRemove\", valueToRemove);\r\n      const filteredItems = items.filter(item => item !== valueToRemove);\r\n      this.setState({ displayTablePrepaid: filteredItems }, () => {\r\n        console.log(\r\n          \"AfterRemove-displayTablePrepaid\",\r\n          this.state.displayTablePrepaid\r\n        );\r\n      });\r\n      this.getPrepaidAccountData(\"\");\r\n      // this.HidePrepaidTableData();\r\n    }\r\n    if (removedTerm == \"17\") {\r\n      const items = this.state.displayTableCreditNote;\r\n      console.log(\"BeforeRemove-displayTableCreditNote\", items);\r\n      const valueToRemove = idx.pay_rem1; //For Credit Note Ony we have added unique id here\r\n      console.log(\"BeforeRemove-valueToRemove\", valueToRemove);\r\n      const filteredItems = items.filter(item => item !== valueToRemove);\r\n      this.setState({ displayTableCreditNote: filteredItems }, () => {\r\n        console.log(\r\n          \"AfterRemove-displayTableCreditNote\",\r\n          this.state.displayTableCreditNote\r\n        );\r\n      });\r\n      this.getCreditNoteAccountData(\"\");\r\n      // this.HidePrepaidTableData();\r\n    }\r\n\r\n    if (removedTerm == \"9\") {\r\n      const items = this.state.displayTableVoucher;\r\n      console.log(\"BeforeRemove-displayTableVoucher\", items);\r\n      const valueToRemove = idx.pay_rem1; //For Credit Note Ony we have added unique id here\r\n      console.log(\"BeforeRemove-valueToRemove\", valueToRemove);\r\n      const filteredItems = items.filter(item => item !== valueToRemove);\r\n      this.setState({ displayTableVoucher: filteredItems }, () => {\r\n        console.log(\r\n          \"AfterRemove-displayTableVoucher\",\r\n          this.state.displayTableVoucher\r\n        );\r\n      });\r\n      this.getVoucherData(\"\");\r\n    }\r\n    cardField[\"pay_amt\"] = balance;\r\n    ewalletField[\"pay_amt\"] = balance;\r\n    this.setBalanceToAllTextBoxes(balance);\r\n  };\r\n  checkTypeOfCartItemContainsDeposit(cartData) {\r\n    let stringifiedCartData = cartData.data;\r\n    if (stringifiedCartData) {\r\n      stringifiedCartData.map(item => {\r\n        if (item.type === \"Deposit\" || item.type === \"Top Up\") {\r\n          this.state.isTreatmentDoneButton = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  addNewPaymentData = async (selPayTypeId, selPayTypeName) => {\r\n    if (!this.validator.fieldValid(\"Amount\")) {\r\n      this.validator.showMessageFor(\"Amount\");\r\n      return;\r\n    }\r\n    if (!this.validator.fieldValid(\"Amount\")) {\r\n      this.validator.showMessageFor(\"Amount\");\r\n      return;\r\n    }\r\n\r\n    this.props\r\n      .getCommonApi(`paytablenew/?paygroupid=${selPayTypeId}`)\r\n      .then(res => {\r\n        this.setState({\r\n          paytableData: [],\r\n        });\r\n        let { paytableData, isSelectedPaymentType, displayModelPaymentType } =\r\n          this.state;\r\n        isSelectedPaymentType = selPayTypeName.trim();\r\n        displayModelPaymentType = selPayTypeName.trim();\r\n        for (let key of res.data) {\r\n          paytableData.push({ label: key.pay_description, value: key.id });\r\n        }\r\n        this.setState(\r\n          {\r\n            paytableData,\r\n          },\r\n          () => {\r\n            let { isOpenSubPayment } = this.state;\r\n            if (paytableData.length == 0) {\r\n              alert(\"Pay Table Not Exists\");\r\n              return;\r\n            } else if (selPayTypeName.trim() === \"VOUCHER\") {\r\n              isOpenSubPayment = true;\r\n            } else if (selPayTypeName.trim() === \"PREPAID\") {\r\n              isOpenSubPayment = true;\r\n            } else if (selPayTypeName.trim() === \"Credit\") {\r\n              isOpenSubPayment = true;\r\n            } else if (selPayTypeName.trim() === \"CARD\") {\r\n              isOpenSubPayment = true;\r\n            } else if (paytableData.length == 1) {\r\n              isOpenSubPayment = false;\r\n              let payTypeId = paytableData[0].value;\r\n              let { balance, selectedCards, txtUserPayAmount } = this.state;\r\n              if (parseFloat(this.state.responseData.billable_amount) > 0) {\r\n                if (parseFloat(txtUserPayAmount) == 0) {\r\n                  return;\r\n                }\r\n              }\r\n              if (this.checkPayTypeIdAlreadyExists(payTypeId)) {\r\n                alert(\r\n                  this.getPayTableNameBasedOnId(payTypeId) + \" already exists\"\r\n                );\r\n                //alert(\"Already Exists\");\r\n                return;\r\n              } else {\r\n                selectedCards.push({\r\n                  pay_typeid: payTypeId,\r\n                  pay_amt: parseFloat(txtUserPayAmount),\r\n                  credit_debit: false,\r\n                  pay_premise: true,\r\n                  prepaid: false,\r\n                  pay_rem4: this.state.pay_rem4,\r\n                });\r\n                balance = parseFloat(balance - txtUserPayAmount).toFixed(2);\r\n                txtUserPayAmount = balance;\r\n                this.setState({ txtUserPayAmount, balance });\r\n                return;\r\n              }\r\n            } else if (paytableData.length >= 1) {\r\n              isOpenSubPayment = true;\r\n              isSelectedPaymentType = \"Multiple\";\r\n            }\r\n            this.setState({\r\n              isOpenSubPayment,\r\n              isSelectedPaymentType,\r\n              displayModelPaymentType,\r\n            });\r\n          }\r\n        );\r\n      });\r\n  };\r\n\r\n  handleDialog = async () => {\r\n    let { isOpenSubPayment } = this.state;\r\n    isOpenSubPayment = false;\r\n    await this.setState({\r\n      isOpenSubPayment,\r\n    });\r\n  };\r\n\r\n  handleChangeCard = async ({ target: { value, name } }) => {\r\n    let cardField = Object.assign({}, this.state.cardField);\r\n\r\n    cardField[name] = value;\r\n\r\n    await this.setState({\r\n      cardField,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      responseData,\r\n      balance,\r\n      isTreatmentDoneButton,\r\n      payGroupData,\r\n      paytableData,\r\n      isOpenSubPayment,\r\n      isSelectedPaymentType,\r\n      displayModelPaymentType,\r\n      cardField,\r\n      pay_rem4,\r\n    } = this.state;\r\n    let { payTableDropDownValue } = this.state.formFields;\r\n    console.log(payTableDropDownValue);\r\n    let insideRadioButtonData;\r\n    console.log(isSelectedPaymentType, \"selectedpaymenttype\");\r\n    if (isSelectedPaymentType == \"VOUCHER\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          <table className=\"table table-bordered\">\r\n            <tr>\r\n              <td>Vocucher No</td>\r\n              <td>Value</td>\r\n              <td>Exp.Date</td>\r\n            </tr>\r\n            {this.state.voucherCustomerData.map((selectedVoucher, index) => (\r\n              <tr\r\n                key={index}\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={this.addVoucher.bind(this, selectedVoucher)}\r\n              >\r\n                <td>{selectedVoucher.voucher_no}</td>\r\n                <td>{selectedVoucher.value}</td>\r\n                <td>{selectedVoucher.issued_expiry_date}</td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        </div>\r\n      );\r\n    } else if (isSelectedPaymentType == \"PREPAID\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          <table className=\"table table-striped\">\r\n            <tr>\r\n              <td>Category</td>\r\n              <td>Amount</td>\r\n              <td>Remaining</td>\r\n              <td>InvoiceNo</td>\r\n              <td>ExpDate</td>\r\n              <td>ConditionType</td>\r\n            </tr>\r\n            {this.state.prepaidCustomerData.map((selectedPrepaid, index) => (\r\n              <tr\r\n                key={index}\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={this.addPrepaid.bind(this, selectedPrepaid)}\r\n              >\r\n                <td>{selectedPrepaid.pp_desc}</td>\r\n                <td>{selectedPrepaid.pp_total}</td>\r\n                <td>{selectedPrepaid.remain}</td>\r\n                <td>{selectedPrepaid.prepaid}</td>\r\n                <td>{selectedPrepaid.exp_date}</td>\r\n                <td>{selectedPrepaid.conditiontype1}</td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        </div>\r\n      );\r\n    } else if (isSelectedPaymentType == \"Credit\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          {\" \"}\r\n          <table className=\"table table-striped\">\r\n            <tr>\r\n              <td>Credit #</td>\r\n              <td>Date</td>\r\n              <td>Amount</td>\r\n              <td>Balance</td>\r\n              <td>Status</td>\r\n            </tr>\r\n            {this.state.creditNoteCustomerData.map((creditNote, index) => (\r\n              <tr\r\n                key={index}\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={this.addCreditNote.bind(this, creditNote)}\r\n              >\r\n                <td>{creditNote.credit_code}</td>\r\n                <td>{creditNote.sa_date}</td>\r\n                <td>{creditNote.amount}</td>\r\n                <td>{creditNote.balance}</td>\r\n                <td>{creditNote.status}</td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        </div>\r\n      );\r\n    } else if (isSelectedPaymentType == \"CARD\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          <div className=\"d-flex flex-wrap justify-content-start\">\r\n            <div className=\"col-1\"></div>\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Select Card\r\n                <NormalSelect\r\n                  placeholder=\"Search type...\"\r\n                  options={paytableData}\r\n                  value={cardField.pay_typeid}\r\n                  name=\"pay_typeid\"\r\n                  onChange={this.handleCreditChange}\r\n                />\r\n              </div>\r\n              {this.validator.message(\r\n                \"cardFieldType\",\r\n                cardField.pay_typeid,\r\n                \"required\"\r\n              )}\r\n            </div>\r\n            <div className=\"col-1\"></div>\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Card No\r\n                <NormalInput\r\n                  value={cardField.pay_rem1}\r\n                  name=\"pay_rem1\"\r\n                  onChange={this.handleChangeCard}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-1\"></div>\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Name\r\n                <NormalInput\r\n                  value={cardField.pay_rem2}\r\n                  name=\"pay_rem2\"\r\n                  onChange={this.handleChangeCard}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-1\"></div>\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Exp Month / Year\r\n                <NormalInput\r\n                  placeholder=\"mm/YYYY\"\r\n                  value={cardField.pay_rem3}\r\n                  name=\"pay_rem3\"\r\n                  onChange={this.handleChangeCard}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-1\"></div>\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                Approval Code\r\n                <NormalInput\r\n                  value={cardField.App_code}\r\n                  name=\"App_code\"\r\n                  onChange={this.handleChangeCard}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"d-flex justify-content-end\">\r\n            <div className=\"col-2\">\r\n              <div className=\"input-group\">\r\n                <NormalButton\r\n                  mainbg={false}\r\n                  className=\"col-12 mt-4 ml-2 btn-outline-success\"\r\n                  label=\"CONFIRM\"\r\n                  onClick={() => this.addCreditCard()}\r\n                />\r\n              </div>\r\n              <div className=\"col-1\"></div>\r\n            </div>\r\n            {/* <div className=\"col-2\">\r\n              <div className=\"input-group\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  className=\"col-12 mt-4 ml-2\"\r\n                  label=\"CANCEL\"\r\n                  onClick={() => this.setState({ isOpenSubPayment: false })}\r\n                />\r\n              </div>\r\n            </div> */}\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (isSelectedPaymentType == \"Multiple\") {\r\n      insideRadioButtonData = (\r\n        <div>\r\n          <div className=\"row\">\r\n            <div className=\"col-5\">\r\n              <div className=\"input-group\">\r\n                <Label className=\"col-12 fs-15\">Choose Option</Label>\r\n                <NormalSelect\r\n                  placeholder=\"Search type...\"\r\n                  options={paytableData}\r\n                  value={payTableDropDownValue}\r\n                  name=\"payTableDropDownValue\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      insideRadioButtonData = <div></div>;\r\n    }\r\n    let payGroupDataContent = [];\r\n    console.log(payGroupData);\r\n    payGroupData.forEach((item, i) => {\r\n      payGroupDataContent.push(\r\n        <div className=\"col-md-1\" style={{ width: \"100px\", margin: \"50px\" }}>\r\n          <img\r\n            src={helpers.getUrl() + \"media/\" + item.picturelocation}\r\n            label={item.label}\r\n            onClick={() => this.addNewPaymentData(item.value, item.label)}\r\n            style={{ cursor: \"pointer\" }}\r\n          />\r\n          <br />\r\n          <center>\r\n            <p style={{ width: \"100px\", textAlign: \"center\" }}>{item.label}</p>\r\n          </center>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    let { cartId, cartData, tokenDetails } = this.props;\r\n    console.log(cartId, tokenDetails, this.props.cartData);\r\n    this.checkTypeOfCartItemContainsDeposit(cartData);\r\n\r\n    let userAddedPayTableData = (\r\n      <table className=\"table table-bordered\">\r\n        {this.state.selectedCards.map((selectedCards, index) => (\r\n          <tr key={index}>\r\n            <td className=\"fs-18\">\r\n              {this.getPayTableNameBasedOnId(selectedCards.pay_typeid)}\r\n            </td>\r\n            <td className=\"fs-18\" style={{ textAlign: \"right\" }}>\r\n              {selectedCards.pay_amt.toFixed(2)}\r\n            </td>\r\n            <td>\r\n              <div\r\n                className=\"col-4 p-0 fs-20 cursor-pointer\"\r\n                onClick={this.removeCards(selectedCards)}\r\n              >\r\n                <span className=\"icon-delete\"></span>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </table>\r\n    );\r\n    return (\r\n      <>\r\n        <div className=\"row\">\r\n          <NormalModal\r\n            className={\"payment-modal\"}\r\n            style={{ minWidth: \"800px\" }}\r\n            modal={isOpenSubPayment}\r\n            handleModal={this.handleDialog}\r\n          >\r\n            <img\r\n              onClick={this.handleDialog}\r\n              className=\"close cursor-pointer\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <center>\r\n              <p className=\"fs-18 f-600\">{displayModelPaymentType}</p>\r\n            </center>\r\n            <br />\r\n            {insideRadioButtonData}\r\n          </NormalModal>\r\n          <div className=\"d-flex\">\r\n            <Label className=\"col-3 fs-18\">Enter Amount</Label>\r\n            <div className=\"col-2\">\r\n              <NormalInput\r\n                value={this.state.txtUserPayAmount}\r\n                onChange={this.handleChangeTextBox.bind(this)}\r\n              />\r\n\r\n              {this.validator.message(\r\n                \"Amount\",\r\n                this.state.txtUserPayAmount,\r\n                \"required|numeric|min:0,num\"\r\n              )}\r\n              {this.validator.message(\r\n                \"Amount\",\r\n                this.state.txtUserPayAmount,\r\n                \"required|numeric|max:\" + this.state.balance + \",num\"\r\n              )}\r\n            </div>\r\n            <Label className=\"col-2 fs-18\">Remark</Label>\r\n            <div className=\"col-5\">\r\n              <NormalInput\r\n                value={pay_rem4}\r\n                name=\"pay_rem4\"\r\n                onChange={this.handleChangeRemarkBox.bind(this)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-12 \">\r\n            <h4>Select Payment Method</h4>\r\n          </div>\r\n          <div className=\"row col-12 paymentGroup\">{payGroupDataContent}</div>\r\n        </div>\r\n        <div className=\"make-payment-section mb-4\">\r\n          <div className=\"row pl-3\">\r\n            {/* <div className=\"text-right f-600\">Balance: {Number(balance).toFixed(2)}</div> */}\r\n            <div className=\"row \">\r\n              <div className=\"col-8 \">\r\n                <div className=\"p-2 ml-1 payment fs-12\">\r\n                  {userAddedPayTableData}\r\n                </div>\r\n              </div>\r\n              <div className=\"col-4 \">\r\n                <div className=\"p-2 ml-1 payment\">\r\n                  <p>List of selection's</p>\r\n\r\n                  <div className=\"row fs-14\">\r\n                    <div className=\"col-7\">Subtotal</div>\r\n                    <div className=\"col-5\">$ {responseData.subtotal}</div>\r\n                    <div className=\"col-7\">Discount ($)</div>\r\n                    <div className=\"col-5\">$ {responseData.discount}</div>\r\n                    <div className=\"col-7\">Transac amount</div>\r\n                    <div className=\"col-5\">$ {responseData.trans_amt}</div>\r\n                    <div className=\"col-7\">Deposit</div>\r\n                    <div className=\"col-5\">$ {responseData.deposit_amt}</div>\r\n                    <div className=\"col-7\">{responseData.tax_lable}</div>\r\n                    <div className=\"col-5\">$ {responseData.tax_amt}</div>\r\n                    <div className=\"col-12 fs-22 text-center mt-5\">\r\n                      Billing Amount\r\n                    </div>\r\n                    <div className=\"col-12 fs-22 f-700 text-center text-orenge\">\r\n                      $ {responseData.billable_amount}\r\n                    </div>\r\n                    <div className=\"col-12 f-600 text-center mt-5\">\r\n                      Balance Amount: {Number(balance).toFixed(2)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {isTreatmentDoneButton ? (\r\n            <div className=\"make-payment mt-3 text-center\">\r\n              <NormalButton\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"TREATMENT DONE\"\r\n                onClick={() => this.handleTreatmentDone()}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          <div className=\"make-payment mt-3 text-center\">\r\n            {this.state.isMakePaymentButtonClicked == \"true\" ? (\r\n              <NormalButton\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Make payment\"\r\n                disabled={true}\r\n              />\r\n            ) : (\r\n              <NormalButton\r\n                mainbg={true}\r\n                className=\"col-12 fs-15 \"\r\n                label=\"Make payment \"\r\n                onClick={() => this.handleSubmit()}\r\n                disabled={this.state.selectedCards.length <= 0 || balance > 0}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  appointmentDetail: state.appointment.appointmentDetail,\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  tokenDetails: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getPayment,\r\n      getCommonApi,\r\n      createPayment,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const Payment = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(MakePaymentClass);\r\n"]},"metadata":{},"sourceType":"module"}