{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\common\\\\LayoutEditor\\\\index.js\";\nimport React from \"react\";\nimport { WidthProvider, Responsive } from \"react-grid-layout\";\nconst ReactGridLayout = WidthProvider(Responsive);\nexport class LayoutEditor extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.breakpoints = {\n      lg: 992,\n      md: 768,\n      sm: 576\n    };\n\n    this.onLayoutChange = (layout, layouts) => {\n      console.log(layout, layouts);\n      this.setState({\n        layout: layouts\n      });\n      this.props.onChange(layouts);\n    };\n\n    const _layout = this.generateLayout();\n\n    this.state = {\n      layout: _layout\n    };\n  }\n\n  generateLayout() {\n    const fields = this.props.fields;\n    return {\n      lg: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.lg;\n          if (layout.w != 0) return {\n            x: layout.x,\n            y: layout.y,\n            w: layout.w,\n            h: layout.h,\n            i: `${e.id}`\n          };\n        }\n\n        return {\n          i: `${e.id}`,\n          x: index % 4 * 3,\n          y: Math.ceil(index / 4) * 3,\n          w: 3,\n          h: 3\n        };\n      }),\n      md: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.md;\n          if (layout.w != 0) return {\n            x: layout.x,\n            y: layout.y,\n            w: layout.w,\n            h: layout.h,\n            i: `${e.id}`\n          };\n        }\n\n        return {\n          i: `${e.id}`,\n          x: index % 3 * 4,\n          y: Math.ceil(index / 3) * 3,\n          w: 4,\n          h: 3\n        };\n      }),\n      sm: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.sm;\n          if (layout.w != 0) return {\n            x: layout.x,\n            y: layout.y,\n            w: layout.w,\n            h: layout.h,\n            i: `${e.id}`\n          };\n        }\n\n        return {\n          i: `${e.id}`,\n          x: index,\n          y: 0,\n          w: 12,\n          h: 3\n        };\n      })\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }\n    }, this.props.editable ? /*#__PURE__*/React.createElement(ReactGridLayout, Object.assign({\n      className: \"layout\",\n      cols: {\n        lg: 12,\n        md: 12,\n        sm: 12,\n        xs: 1,\n        xxs: 1\n      },\n      rowHeight: 30,\n      layouts: this.state.layout,\n      onLayoutChange: this.onLayoutChange,\n      breakpoints: this.breakpoints,\n      margin: [10, 2]\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }), this.props.children) : /*#__PURE__*/React.createElement(ReactGridLayout, Object.assign({\n      className: \"layout\",\n      cols: {\n        lg: 12,\n        md: 12,\n        sm: 12,\n        xs: 1,\n        xxs: 1\n      },\n      rowHeight: 30,\n      layouts: this.state.layout,\n      isDraggable: false,\n      isResizable: false,\n      breakpoints: this.breakpoints\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }), this.props.children));\n  }\n\n}","map":{"version":3,"sources":["F:/webfe/src/component/common/LayoutEditor/index.js"],"names":["React","WidthProvider","Responsive","ReactGridLayout","LayoutEditor","PureComponent","constructor","props","breakpoints","lg","md","sm","onLayoutChange","layout","layouts","console","log","setState","onChange","generateLayout","state","fields","map","e","index","w","x","y","h","i","id","Math","ceil","render","editable","xs","xxs","children"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { WidthProvider, Responsive } from \"react-grid-layout\";\n\nconst ReactGridLayout = WidthProvider(Responsive);\n\nexport class LayoutEditor extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    const layout = this.generateLayout();\n    this.state = { layout };\n  }\n\n  breakpoints = { lg: 992, md: 768, sm: 576 };\n\n  generateLayout() {\n    const fields = this.props.fields;\n    return {\n      lg: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.lg;\n          if (layout.w != 0)\n            return {\n              x: layout.x,\n              y: layout.y,\n              w: layout.w,\n              h: layout.h,\n              i: `${e.id}`,\n            };\n        }\n\n        return {\n          i: `${e.id}`,\n          x: (index % 4) * 3,\n          y: Math.ceil(index / 4) * 3,\n          w: 3,\n          h: 3,\n        };\n      }),\n      md: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.md;\n          if (layout.w != 0)\n            return {\n              x: layout.x,\n              y: layout.y,\n              w: layout.w,\n              h: layout.h,\n              i: `${e.id}`,\n            };\n        }\n        return {\n          i: `${e.id}`,\n          x: (index % 3) * 4,\n          y: Math.ceil(index / 3) * 3,\n          w: 4,\n          h: 3,\n        };\n      }),\n      sm: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.sm;\n          if (layout.w != 0)\n            return {\n              x: layout.x,\n              y: layout.y,\n              w: layout.w,\n              h: layout.h,\n              i: `${e.id}`,\n            };\n        }\n        return {\n          i: `${e.id}`,\n          x: index,\n          y: 0,\n          w: 12,\n          h: 3,\n        };\n      }),\n    };\n  }\n\n  onLayoutChange = (layout, layouts) => {\n    console.log(layout, layouts);\n    this.setState({ layout: layouts });\n    this.props.onChange(layouts);\n  };\n\n  render() {\n    return (\n      <div className=\"container-fluid\">\n        {this.props.editable ? (\n          <ReactGridLayout\n            className=\"layout\"\n            cols={{ lg: 12, md: 12, sm: 12, xs: 1, xxs: 1 }}\n            rowHeight={30}\n            layouts={this.state.layout}\n            onLayoutChange={this.onLayoutChange}\n            breakpoints={this.breakpoints}\n            margin={[10, 2]}\n            {...this.props}\n          >\n            {this.props.children}\n          </ReactGridLayout>\n        ) : (\n          <ReactGridLayout\n            className=\"layout\"\n            cols={{ lg: 12, md: 12, sm: 12, xs: 1, xxs: 1 }}\n            rowHeight={30}\n            layouts={this.state.layout}\n            isDraggable={false}\n            isResizable={false}\n            breakpoints={this.breakpoints}\n            {...this.props}\n          >\n            {this.props.children}\n          </ReactGridLayout>\n        )}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}