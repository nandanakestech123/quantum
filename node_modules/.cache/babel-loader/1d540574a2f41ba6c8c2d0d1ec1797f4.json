{"ast":null,"code":"import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Pagination}from\"../index\";import{scrollTop,appendQuery}from\"service/helperFunctions\";import\"assets/scss/components/table.scss\";export var TableWrapper=/*#__PURE__*/function(_Component){_inherits(TableWrapper,_Component);var _super=_createSuper(TableWrapper);function TableWrapper(){var _this;_classCallCheck(this,TableWrapper);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={currentSortKeyDetails:null};_this.getPlaceHolder=function(){var _this$props$placeHold=_this.props.placeHolder,placeHolder=_this$props$placeHold===void 0?\"No data found\":_this$props$placeHold;if(typeof placeHolder===\"function\"){return placeHolder();}return/*#__PURE__*/React.createElement(\"p\",{className:\"text-center\"},placeHolder);};_this.handlePagination=function(page){var _this$props=_this.props,queryHandler=_this$props.queryHandler,_this$props$scrollPro=_this$props.scrollProps,scrollProps=_this$props$scrollPro===void 0?\"\":_this$props$scrollPro;console.log(page,\"dsfsdfsdfsdf\");queryHandler({page:page});// .then(() => {\n//   scrollTop(...scrollProps);\n// })\n// .catch(err => {\n//   console.log('Error:::' + err);\n// });\n};_this.handleFilter=function(sortKey){console.log(\"queryHandler ===\",sortKey);var _this$props$queryAppe=_this.props.queryAppend,queryAppend=_this$props$queryAppe===void 0?true:_this$props$queryAppe;if(!sortKey){return\"\";}var currentSortKeyDetails=Object.assign({},_this.state.currentSortKeyDetails);if(!currentSortKeyDetails||currentSortKeyDetails.sortKey!==sortKey){currentSortKeyDetails={sortKey:sortKey,orderBy:\"asc\"};}else{if(currentSortKeyDetails.orderBy!==\"desc\"){currentSortKeyDetails.orderBy=\"desc\";}else{currentSortKeyDetails=null;}}var _ref=currentSortKeyDetails||{},_ref$sortKey=_ref.sortKey,key=_ref$sortKey===void 0?\"\":_ref$sortKey,_ref$orderBy=_ref.orderBy,orderBy=_ref$orderBy===void 0?\"\":_ref$orderBy;if(queryAppend){appendQuery([{label:\"field\",value:key},{label:\"orderBy\",value:orderBy}]);}console.log(\"queryHandler ===\",currentSortKeyDetails,sortKey);_this.setState({currentSortKeyDetails:currentSortKeyDetails},function(){return!queryAppend&&_this.handleFilterAPI();});};_this.handleFilterAPI=function(){var _ref2=_this.state.currentSortKeyDetails||{},_ref2$sortKey=_ref2.sortKey,sortKey=_ref2$sortKey===void 0?null:_ref2$sortKey,_ref2$orderBy=_ref2.orderBy,orderBy=_ref2$orderBy===void 0?null:_ref2$orderBy;var queryHandler=_this.props.queryHandler;if(queryHandler){var sort={field:sortKey,orderBy:orderBy};console.log(\"queryHandler ===\",sort);queryHandler({sort:sort});}};return _this;}_createClass(TableWrapper,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props2=this.props,_this$props2$field=_this$props2.field,field=_this$props2$field===void 0?\"\":_this$props2$field,_this$props2$orderBy=_this$props2.orderBy,orderBy=_this$props2$orderBy===void 0?\"\":_this$props2$orderBy;if(field&&orderBy){this.setState({currentSortKeyDetails:{sortKey:field,orderBy:orderBy}});}}},{key:\"render\",value:function render(){var _this2=this;var _this$props3=this.props,headerDetails=_this$props3.headerDetails,children=_this$props3.children,pageMeta=_this$props3.pageMeta,_this$props3$isEmpty=_this$props3.isEmpty,isEmpty=_this$props3$isEmpty===void 0?false:_this$props3$isEmpty,_this$props3$classNam=_this$props3.className,className=_this$props3$classNam===void 0?\"\":_this$props3$classNam,_this$props3$overFlow=_this$props3.overFlow,overFlow=_this$props3$overFlow===void 0?true:_this$props3$overFlow,clickFunc=_this$props3.clickFunc;var _ref3=this.state.currentSortKeyDetails||{},currentSortKey=_ref3.sortKey,_ref3$orderBy=_ref3.orderBy,orderBy=_ref3$orderBy===void 0?\"\":_ref3$orderBy;return/*#__PURE__*/React.createElement(\"div\",{className:\"maintable table-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"maintable-content \".concat(overFlow?\"table-responsive\":\"\",\" \").concat(className)},/*#__PURE__*/React.createElement(\"table\",{className:\"table rounded\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,headerDetails.map(function(_ref4,index){var label=_ref4.label,className=_ref4.className,_ref4$divClass=_ref4.divClass,divClass=_ref4$divClass===void 0?\"\":_ref4$divClass,_ref4$sortKey=_ref4.sortKey,sortKey=_ref4$sortKey===void 0?\"\":_ref4$sortKey,element=_ref4.element,_ref4$width=_ref4.width,width=_ref4$width===void 0?\"\":_ref4$width,dblclickFunc=_ref4.dblclickFunc;return/*#__PURE__*/React.createElement(\"th\",{className:className,key:index,style:{minWidth:width?width:label.length*10+50+\"px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center text-center \".concat(sortKey&&\"cursor-pointer\",\" \").concat(divClass),onClick:function onClick(e){return _this2.handleFilter(sortKey);},onDoubleClick:dblclickFunc},label,element&&element(),sortKey?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex table-filter ml-2 mb-1 \".concat(currentSortKey===sortKey&&\"active-filter\")},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-sort-up fs-14 \".concat(currentSortKey===sortKey&&orderBy===\"asc\"&&\"active\")}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon-sort-down fs-14 \".concat(currentSortKey===sortKey&&orderBy===\"desc\"&&\"active\")})):null));}))),/*#__PURE__*/React.createElement(\"tbody\",null,children))),pageMeta&&/*#__PURE__*/React.createElement(Pagination,{handlePagination:this.handlePagination,pageMeta:pageMeta}));}}]);return TableWrapper;}(Component);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/common/Table/TableWrapper.js"],"names":["React","Component","Pagination","scrollTop","appendQuery","TableWrapper","state","currentSortKeyDetails","getPlaceHolder","props","placeHolder","handlePagination","page","queryHandler","scrollProps","console","log","handleFilter","sortKey","queryAppend","Object","assign","orderBy","key","label","value","setState","handleFilterAPI","sort","field","headerDetails","children","pageMeta","isEmpty","className","overFlow","clickFunc","currentSortKey","map","index","divClass","element","width","dblclickFunc","minWidth","length","e"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Pagination } from \"../index\";\r\nimport PropTypes from \"prop-types\";\r\nimport { scrollTop, appendQuery } from \"service/helperFunctions\";\r\nimport \"assets/scss/components/table.scss\";\r\n\r\nexport class TableWrapper extends Component {\r\n  state = {\r\n    currentSortKeyDetails: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    let { field = \"\", orderBy = \"\" } = this.props;\r\n    if (field && orderBy) {\r\n      this.setState({\r\n        currentSortKeyDetails: { sortKey: field, orderBy },\r\n      });\r\n    }\r\n  }\r\n\r\n  getPlaceHolder = () => {\r\n    let { placeHolder = \"No data found\" } = this.props;\r\n    if (typeof placeHolder === \"function\") {\r\n      return placeHolder();\r\n    }\r\n\r\n    return <p className=\"text-center\">{placeHolder}</p>;\r\n  };\r\n\r\n  handlePagination = page => {\r\n    let { queryHandler, scrollProps = \"\" } = this.props;\r\n    console.log(page, \"dsfsdfsdfsdf\");\r\n    queryHandler({ page: page });\r\n    // .then(() => {\r\n    //   scrollTop(...scrollProps);\r\n    // })\r\n    // .catch(err => {\r\n    //   console.log('Error:::' + err);\r\n    // });\r\n  };\r\n\r\n  handleFilter = sortKey => {\r\n    console.log(\"queryHandler ===\", sortKey);\r\n    let { queryAppend = true } = this.props;\r\n    if (!sortKey) {\r\n      return \"\";\r\n    }\r\n    let currentSortKeyDetails = Object.assign(\r\n      {},\r\n      this.state.currentSortKeyDetails\r\n    );\r\n    if (!currentSortKeyDetails || currentSortKeyDetails.sortKey !== sortKey) {\r\n      currentSortKeyDetails = {\r\n        sortKey,\r\n        orderBy: \"asc\",\r\n      };\r\n    } else {\r\n      if (currentSortKeyDetails.orderBy !== \"desc\") {\r\n        currentSortKeyDetails.orderBy = \"desc\";\r\n      } else {\r\n        currentSortKeyDetails = null;\r\n      }\r\n    }\r\n\r\n    let { sortKey: key = \"\", orderBy = \"\" } = currentSortKeyDetails || {};\r\n    if (queryAppend) {\r\n      appendQuery([\r\n        { label: \"field\", value: key },\r\n        { label: \"orderBy\", value: orderBy },\r\n      ]);\r\n    }\r\n    console.log(\"queryHandler ===\", currentSortKeyDetails, sortKey);\r\n    this.setState(\r\n      {\r\n        currentSortKeyDetails,\r\n      },\r\n      () => !queryAppend && this.handleFilterAPI()\r\n    );\r\n  };\r\n\r\n  handleFilterAPI = () => {\r\n    let { sortKey = null, orderBy = null } =\r\n      this.state.currentSortKeyDetails || {};\r\n    let { queryHandler } = this.props;\r\n    if (queryHandler) {\r\n      let sort = {\r\n        field: sortKey,\r\n        orderBy,\r\n      };\r\n      console.log(\"queryHandler ===\", sort);\r\n      queryHandler({ sort });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      children,\r\n      pageMeta,\r\n      isEmpty = false,\r\n      className = \"\",\r\n      overFlow = true,\r\n      clickFunc,\r\n    } = this.props;\r\n    let { sortKey: currentSortKey, orderBy = \"\" } =\r\n      this.state.currentSortKeyDetails || {};\r\n\r\n    return (\r\n      <div className=\"maintable table-container\">\r\n        <div\r\n          className={`maintable-content ${\r\n            overFlow ? \"table-responsive\" : \"\"\r\n          } ${className}`}\r\n        >\r\n          <table className=\"table rounded\">\r\n            <thead>\r\n              <tr>\r\n                {headerDetails.map(\r\n                  (\r\n                    {\r\n                      label,\r\n                      className,\r\n                      divClass = \"\",\r\n                      sortKey = \"\",\r\n                      element,\r\n                      width = \"\",\r\n                      dblclickFunc,\r\n                    },\r\n                    index\r\n                  ) => {\r\n                    return (\r\n                      <th\r\n                        className={className}\r\n                        key={index}\r\n                        style={{\r\n                          minWidth: width\r\n                            ? width\r\n                            : label.length * 10 + 50 + \"px\",\r\n                        }}\r\n                      >\r\n                        <div\r\n                          className={`d-flex align-items-center justify-content-center text-center ${\r\n                            sortKey && \"cursor-pointer\"\r\n                          } ${divClass}`}\r\n                          onClick={e => this.handleFilter(sortKey)}\r\n                          onDoubleClick={dblclickFunc}\r\n                        >\r\n                          {label}\r\n                          {element && element()}\r\n                          {sortKey ? (\r\n                            <div\r\n                              className={`d-flex table-filter ml-2 mb-1 ${\r\n                                currentSortKey === sortKey && \"active-filter\"\r\n                              }`}\r\n                            >\r\n                              <span\r\n                                className={`icon-sort-up fs-14 ${\r\n                                  currentSortKey === sortKey &&\r\n                                  orderBy === \"asc\" &&\r\n                                  \"active\"\r\n                                }`}\r\n                              />\r\n                              <span\r\n                                className={`icon-sort-down fs-14 ${\r\n                                  currentSortKey === sortKey &&\r\n                                  orderBy === \"desc\" &&\r\n                                  \"active\"\r\n                                }`}\r\n                              />\r\n                            </div>\r\n                          ) : null}\r\n                        </div>\r\n                      </th>\r\n                    );\r\n                  }\r\n                )}\r\n              </tr>\r\n            </thead>\r\n            <tbody>{children}</tbody>\r\n          </table>\r\n          {/* {!isEmpty ? <div className=\"no-data\">{this.getPlaceHolder()}</div> : ''} */}\r\n        </div>\r\n        {pageMeta && (\r\n          <Pagination\r\n            handlePagination={this.handlePagination}\r\n            pageMeta={pageMeta}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTableWrapper.propTypes = {\r\n  placeHolder: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n  isEmpty: PropTypes.bool,\r\n  headerDetails: PropTypes.array.isRequired,\r\n  pageMeta: PropTypes.object,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}