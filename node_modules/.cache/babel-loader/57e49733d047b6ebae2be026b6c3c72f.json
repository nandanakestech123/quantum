{"ast":null,"code":"import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./style.scss\";import{NormalButton,NormalInput,NormalSelect,InputSearch,NormalModal,TableWrapper,NormalCheckbox,Pagination}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import _ from\"lodash\";import{history}from\"helpers\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import SimpleReactValidator from\"simple-react-validator\";import{SelectStaff}from\"./treatmentDone\";import{Reversal}from\"./reversal\";import service from\"assets/images/make-up-brush.png\";// import Discount from './cart/discount';\nimport closeIcon from\"assets/images/close.png\";import{FormGroup,Label,Input}from\"reactstrap\";import{TreatmentHistoryCart}from\"./TreatmentHistoryCart\";import{Nav,NavItem,NavLink,TabContent,TabPane}from\"reactstrap\";import classnames from\"classnames\";import{Toast}from\"service/toast\";import{withTranslation}from\"react-i18next\";import{max}from\"moment\";import{CredentialConfirmation}from\"../credentialConfirmation\";export var TreatmentDoneClass=/*#__PURE__*/function(_Component){_inherits(TreatmentDoneClass,_Component);var _super=_createSuper(TreatmentDoneClass);function TreatmentDoneClass(){var _this;_classCallCheck(this,TreatmentDoneClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={tstaffList:[],headerDetails:[{label:\"Branch\"},{label:\"Date\",sortKey:false,width:\"110px\",divClass:\"justify-content-end text-right\"},{label:\"Treatment\",width:\"120px\"},{label:\"Trans Ref\",sortKey:false,width:\"50px\"},//{ label: 'Type', sortKey: false, width: \"55px\" },\n// { label: 'Exp-Date', sortKey: false, width: \"80px\" },\n{label:\"Amount\",sortKey:false,width:\"50px\",divClass:\"justify-content-end text-right\"},{label:\"Treat-Code\",sortKey:false,width:\"105px\"},{label:\"TD\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"},{label:\"Rev\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"},{label:\"Open\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"},{label:\"AR\",sortKey:false,width:\"35px\",divClass:\"justify-content-end text-right\"},{label:\"Session\",sortKey:false,width:\"55px\",divClass:\"justify-content-center\"},{label:\"Redeem\",sortKey:false,width:\"55px\",divClass:\"justify-content-center\"},{label:\"Reversal\",sortKey:false,width:\"55px\",divClass:\"justify-content-center\"},{label:\"Exchange\",sortKey:false,width:\"55px\",divClass:\"justify-content-end text-right\"}],// cartData: {},\nyearList:[{label:\"All\",value:\"All\"},{label:\"Default\",value:\"Default\"}//{ //Yoonus\n//  label: \"Expiry\",\n//  value: \"Expiry\",\n//},\n],selectedYear:\"Default\",//All //Yoonus\nisOpenTreatmentDone:false,tsStaff:{},workPoint:0,isOpenReversal:false,checkBoxConfirmReversal:[],selectedSession:\"\",selectedItemTreatmentIds:[],activeMenu:\"treatmentdone\",productCard:[],list:[],isOpenExchangeService:false,page:1,rangeId:\"\",menuId:\"\",rangeName:\"\",rangeOption:[],ExchangeItem:{},SelectedExchangeItem:{},cust_data:{},mainMeta:{},isLoginConfirmation:false,selectedItem:{},selectedType:\"\"};_this.componentDidMount=function(){_this.getCart({});_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});// this.props.getCommonApi(\"treatmentdone/Year/\").then(key => {\n//   let { status, data } = key;\n//   let { yearList } = this.state;\n//   for (let value of data) {\n//     yearList.push({ value: value, label: value });\n//   }\n//   this.setState({ yearList });\n// });\n};_this.handleCheckboxChangeWithNormalCheckBox=function(item){var newArray=[].concat(_toConsumableArray(_this.state.checkBoxConfirmReversal),[item.target.name]);if(_this.state.checkBoxConfirmReversal.includes(item.target.name)){newArray=newArray.filter(function(day){return day!==item.target.name;});}_this.setState({checkBoxConfirmReversal:newArray});};_this.getCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var _this$state,roomList,sourceList,staffList,cartData,duration,tstaffList,selectedYear,cust_data,mainMeta,custId,_data$page,page,_data$limit,limit,_data$search,search;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(_this.props,\"sfgdfsgdfghgf\");_this$state=_this.state,roomList=_this$state.roomList,sourceList=_this$state.sourceList,staffList=_this$state.staffList,cartData=_this$state.cartData,duration=_this$state.duration,tstaffList=_this$state.tstaffList,selectedYear=_this$state.selectedYear,cust_data=_this$state.cust_data,mainMeta=_this$state.mainMeta;custId=\"\";if(_this.props.match.params.id){custId=_this.props.match.params.id;}else{custId=_this.props.basicApptDetail.custId;}_data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?12:_data$limit,_data$search=data.search,search=_data$search===void 0?\"\":_data$search;_this.props.getCommonApi(\"treatmentdone/?year=\".concat(selectedYear,\"&cust_id=\").concat(custId,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var data,cust_data,formFields;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.setState({tstaffList:[],mainMeta:{}});case 2:cartData=key;data=key.data,cust_data=key.cust_data;console.log(key,\"Service Redeem List data\");tstaffList=data.dataList;cust_data=cust_data;mainMeta=data.meta.pagination;_context.next=10;return _this.setState({tstaffList:tstaffList,mainMeta:mainMeta,cust_data:cust_data});case 10:if(!cust_data){_context.next=17;break;}formFields={};formFields[\"custId\"]=_this.props.match.params.id;formFields[\"custName\"]=cust_data.cust_name;formFields[\"cust_refer\"]=cust_data.cust_refer;_context.next=17;return _this.props.updateForm(\"basicApptDetail\",formFields);case 17:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleYearChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _ref3$target,value,name,_this$state2,selectedYear,records;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,value=_ref3$target.value,name=_ref3$target.name;_this$state2=_this.state,selectedYear=_this$state2.selectedYear,records=_this$state2.records;selectedYear=value;records=[];_context3.next=6;return _this.setState({selectedYear:selectedYear,records:records});case 6:_this.getCart({});case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.getDataFromRes=function(data){var _this$state3=_this.state,formFields=_this$state3.formFields,cartData=_this$state3.cartData,updateFields=_this$state3.updateFields,postFields=_this$state3.postFields;formFields[\"Item\"]=data.value.Item;formFields[\"Price\"]=data.value.Price;formFields[\"Room\"]=data.value.Room;updateFields[\"Room\"]=data.value.Room;formFields[\"Source\"]=data.value.Source;updateFields[\"Source\"]=data.value.Source;formFields[\"add_duration\"]=data.value.add_duration;formFields[\"new_remark\"]=data.value.new_remark;updateFields[\"new_remark\"]=data.value.new_remark;postFields[\"times\"]=data.value.times;postFields[\"work_point\"]=data.value.work_point;_this.setState({formFields:formFields,updateFields:updateFields,postFields:postFields});};_this.handleSubmit=function(id){};_this.handleDialog=function(){_this.setState({isOpenTreatmentDone:false,isOpenReversal:false,checkBoxConfirmReversal:[],isOpenExchangeService:false,isHandleExchangeConfirmation:false,records:[]});_this.getCart({});};_this.handleSearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;_this.props.getCommonApi(\"custappt/?search=\".concat(searchString)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerOption:data});}});},500);}_this.debouncedFn();};_this.handleCartCreated=function(data,price,id){var basicApptDetail=_this.props.basicApptDetail;var tstaffList=_this.state.tstaffList;var payload=[];var _iterator=_createForOfIteratorHelper(tstaffList),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;var reverseTreatmentIds=[];//reverseTreatmentIds = key.treatmentids.reverse();\nvar ItemTreatmentIds=key.treatmentids;reverseTreatmentIds=ItemTreatmentIds.sort(function(a,b){return b-a;});if(key.sel===true){var obj={cust_noid:_this.props.match.params.id,cart_date:dateFormat(new Date(),\"yyyy-mm-dd\"),itemcodeid:key.stockid,price:key.unit_amount,item_uom:null,treatment_account:key.TreatmentAccountid,treatment:reverseTreatmentIds.slice(0,key.session),ori_stockid:null};payload.push(obj);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(payload.length>0){var test=payload;console.log(\"payload-data\",test);_this.props.getCommonApi(\"itemcart/Check/?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(_this.props.match.params.id)).then(function(res){if(res.data.length===0){_this.props.commonCreateApi(\"itemcart/TrmtDoneCartCreate/\",payload).then(function(res){// this.props.handleCartCreated()\n_this.setState({activeTab:\"treatment\",isOpenPriceModal:false});history.push(\"/admin/cart\");});}else{_this.props.commonCreateApi(\"itemcart/TrmtDoneCartCreate/?cart_id=\".concat(res.cart_id),payload).then(function(res){// this.props.handleCartCreated()\n_this.setState({activeTab:\"treatment\",isOpenPriceModal:false});history.push(\"/admin/cart\");});}});}};_this.handleCheckout=function(){var isOpenPayment=_this.state.isOpenPayment;isOpenPayment=true;_this.setState({isOpenPayment:isOpenPayment});};_this.handleChange=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref5){var _ref5$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;formFields=_this.state.formFields;formFields[name]=value;_context4.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref6.apply(this,arguments);};}();_this.handlePostChange=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref7){var _ref7$target,value,name,postFields;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_ref7$target=_ref7.target,value=_ref7$target.value,name=_ref7$target.name;postFields=_this.state.postFields;postFields[name]=value;_context5.next=5;return _this.setState({postFields:postFields});case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref8.apply(this,arguments);};}();_this.handleUpdateChange=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref9){var _ref9$target,value,name,updateFields,event;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref9$target=_ref9.target,value=_ref9$target.value,name=_ref9$target.name;updateFields=_this.state.updateFields;updateFields[name]=value;_context6.next=5;return _this.setState({updateFields:updateFields});case 5:event={target:{value:value,name:name}};// this.handleUpdatestaff(event);\ncase 6:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref10.apply(this,arguments);};}();_this.handleAddstaff=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(item){var _this$state4,tstaffList,selectedSession,selectedItemTreatmentIds,ItemTreatmentIds,reverseTreatmentIds,unit_rate,qualifiedAmount;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!item.is_allow){_context7.next=15;break;}_this$state4=_this.state,tstaffList=_this$state4.tstaffList,selectedSession=_this$state4.selectedSession,selectedItemTreatmentIds=_this$state4.selectedItemTreatmentIds;selectedSession=item.session;// let reverseTreatmentIds = [];\n// reverseTreatmentIds = item.treatmentids.reverse();\nItemTreatmentIds=item.treatmentids;reverseTreatmentIds=ItemTreatmentIds.sort(function(a,b){return b-a;});if(selectedSession==0){selectedSession=1;}selectedItemTreatmentIds=reverseTreatmentIds.slice(0,selectedSession);unit_rate=item.unit_amount;qualifiedAmount=selectedSession*unit_rate;_this.setState({selectedSession:selectedSession,selectedItemTreatmentIds:selectedItemTreatmentIds});/* let test=0;\r\n        const currentParentCodeBalance = tstaffList.filter(\r\n            (res) => res.treatment_parentcode ===  item.treatment_parentcode\r\n          ).reduce((sum, currentValue) => {\r\n            return  currentValue.balance;\r\n          }, 0);\r\n        const currentParentCodeSelectedStaffValue = tstaffList.filter(\r\n            (res) => res.treatment_parentcode ===  item.treatment_parentcode && res.staff!=null\r\n            ).reduce((sum, currentValue) => {\r\n                return parseFloat((eval(sum))) + parseFloat((eval(currentValue.unit_amount)));\r\n              }, 0);\r\n        \r\n        if(item.staff==null)\r\n        {\r\n            test=parseFloat((eval(currentParentCodeSelectedStaffValue))) + parseFloat((eval(item.unit_amount))) ;\r\n        }\r\n        else{\r\n            test=parseFloat((eval(currentParentCodeSelectedStaffValue))) - parseFloat((eval(item.unit_amount))) ;\r\n        }\r\n        */ //if (currentParentCodeBalance >= test) {\n// if (item.balance >= qualifiedAmount) {\n//   let { tstaffList, formFields, cartData, postFields } = this.state;\n//   await this.setState({ tsStaff: item });\n//   this.setState({\n//     isOpenTreatmentDone: true,\n//   });\n// } else {\n//   this.handleDialog();\n//   Toast({\n//     type: \"error\",\n//     message: \"Insufficient balance to redeem\",\n//   });\n// }\n_context7.next=12;return _this.setState({tsStaff:item});case 12:_this.setState({isOpenTreatmentDone:true});_context7.next=16;break;case 15:Toast({type:\"error\",message:\"Treatment done is not allowed in other outlets\"});case 16:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref11.apply(this,arguments);};}();_this.handleUpdatestaff=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(event,item,index){var _this$state5,tstaffList,formFields,cartData,updateFields,data;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this$state5=_this.state,tstaffList=_this$state5.tstaffList,formFields=_this$state5.formFields,cartData=_this$state5.cartData,updateFields=_this$state5.updateFields;tstaffList[index][event.target.name]=event.target.value;_this.setState({tstaffList:tstaffList});data={};if(event.target.name===\"appt_fr_time\"){data={appt_fr_time:event.target.value,add_duration:formFields[\"add_duration\"]};}if(event.target.name===\"add_duration\"){data={appt_fr_time:item.appt_fr_time,add_duration:event.target.value};}// if (updateFields.Source && updateFields.Room) {\n_this.props.commonPatchApi(\"tmpitemhelper/\".concat(item.id,\"/?Room_Codeid=\").concat(updateFields.Room,\"&Source_Codeid=\").concat(updateFields.Source,\"&new_remark=\").concat(updateFields.new_remark),data).then(function(){_this.getCart({});});// } else {\n//     this.setState({ showUpdateError: true })\n// }\ncase 7:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x8,_x9,_x10){return _ref12.apply(this,arguments);};}();_this.handleClearLine=function(){_this.props.commonDeleteApi(\"tmpitemhelper/delete/?clear_all=0&cartid=\".concat(_this.props.cartId)).then(function(){_this.getCart({});});};_this.handleClearAll=function(){_this.props.commonDeleteApi(\"tmpitemhelper/delete/?clear_all=1&cartid=\".concat(_this.props.cartId)).then(function(){var _this$state6=_this.state,formFields=_this$state6.formFields,postFields=_this$state6.postFields;formFields[\"work_point\"]=\"\";postFields[\"times\"]=\"\";_this.setState({formFields:formFields,postFields:postFields});_this.getCart({});});};_this.handleReversalTreatmentAll=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var treatmentIds;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:treatmentIds=_this.state.checkBoxConfirmReversal;_context9.next=3;return _this.setState({treatmentIds:treatmentIds});case 3:_this.setState({isOpenReversal:true});case 4:case\"end\":return _context9.stop();}}},_callee9);}));_this.handleReversalTreatment=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var selectedItem,item,reverseTreatmentIds,selectedSession,ItemTreatmentIds,TreatmentIds;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0://debugger;\nselectedItem=_this.state.selectedItem;item=selectedItem;if(!item.is_allow){_context10.next=15;break;}reverseTreatmentIds=[];selectedSession=_this.state.selectedSession;selectedSession=item.session;ItemTreatmentIds=item.treatmentids;TreatmentIds=ItemTreatmentIds.sort(function(a,b){return b-a;});if(selectedSession==0){selectedSession=1;}reverseTreatmentIds=TreatmentIds.slice(0,selectedSession);_context10.next=12;return _this.setState({treatmentIds:reverseTreatmentIds,selectedSession:selectedSession});case 12:_this.setState({isOpenReversal:true});_context10.next=16;break;case 15:Toast({type:\"error\",message:\"You are not allowed to do this transaction\"});case 16:case\"end\":return _context10.stop();}}},_callee10);}));_this.handleReverse=function(item,index){var tstaffList=_this.state.tstaffList;tstaffList[index][\"rev\"]=true;_this.setState({tstaffList:tstaffList});// onClick={this.handleReversalTreatment}\n};_this.changeIndexSession=function(index,value,item){if(item.is_allow){if(Number(value)<=Number(item.open)){var tstaffList=_this.state.tstaffList;tstaffList[index][\"session\"]=value;_this.setState({tstaffList:tstaffList});}else{Toast({type:\"error\",message:\"Please enter valid session\"});}}else{Toast({type:\"error\",message:\"You are not allowed to do this transaction\"});}};_this.toggle=function(tab){if(_this.state.activeMenu!==tab){_this.setState({activeMenu:tab});}};_this.getServices=function(query){var _query$page=query.page,page=_query$page===void 0?_this.state.page:_query$page,_query$menuId=query.menuId,menuId=_query$menuId===void 0?_this.state.menuId:_query$menuId,_query$rangeId=query.rangeId,rangeId=_query$rangeId===void 0?_this.state.rangeId:_query$rangeId;_this.props.getCommonApi(\"servicestock/?Item_Deptid=\".concat(menuId,\"&page=\").concat(page,\"&Item_Rangeid=\").concat(rangeId)).then(function(key){var status=key.status,data=key.data;if(status===200){_this.setState({productCard:data,list:data.dataList});}});};_this.getMenus=function(){var menuOption=_this.state.menuOption;menuOption=[];console.log(\"sdfsdhfghjghj\",_this.props);_this.props.getCommonApi(\"catalogitemdept/?Item_Dept=\".concat(\"SERVICE\")).then(function(res){// activeMenu = []\nconsole.log(\"sdfsdhfghjghj ress\",res);var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;menuOption.push({value:key.id,label:key.itm_desc,code:key.itm_code,seq:key.itm_seq});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({menuOption:menuOption});});};_this.getRange=function(){var _this$state7=_this.state,rangeOption=_this$state7.rangeOption,menuId=_this$state7.menuId;rangeOption=[];_this.props.getCommonApi(\"catalogitemrange?Item_Deptid=\".concat(menuId)).then(function(res){// activeMenu = []\nvar _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;rangeOption.push({value:key.id,label:key.itm_desc});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this.setState({rangeOption:rangeOption});});};_this.handleauthentication=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(user,pass){var Body,selectedType;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:Body={username:user,password:pass};selectedType=_this.state.selectedType;_this.props.commonCreateApi(\"userauthorizationpopup/\",Body).then(/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(key){var status,data;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:status=key.status,data=key.data;if(!(status==200)){_context11.next=5;break;}_context11.next=4;return _this.setState(function(prevState){return{isLoginConfirmation:!prevState.isLoginConfirmation};});case 4:if(selectedType==\"reversal\"){_this.handleReversalTreatment();}else{_this.handleExchangeClick();}case 5:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x13){return _ref16.apply(this,arguments);};}());case 3:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x11,_x12){return _ref15.apply(this,arguments);};}();_this.handleExchangeClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var selectedItem,item;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:selectedItem=_this.state.selectedItem;item=selectedItem;if(!item.is_allow){_context13.next=17;break;}if(!item.sel){_context13.next=14;break;}_context13.next=6;return _this.setState({ExchangeItem:[]});case 6:_this.getMenus();_this.getRange();_this.getServices({});_context13.next=11;return _this.setState({isOpenExchangeService:true,ExchangeItem:item});case 11:console.log(_this.state.ExchangeItem,\"selected row of treatment done data - exchange item\");_context13.next=15;break;case 14:Toast({type:\"error\",message:\"Select Staff should not be empty\"});case 15:_context13.next=18;break;case 17:Toast({type:\"error\",message:\"You are not allowed to do this transaction\"});case 18:case\"end\":return _context13.stop();}}},_callee13);}));_this.handlePagination=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(page){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return _this.setState({page:page});case 2:_this.getServices({page:page});case 3:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x14){return _ref18.apply(this,arguments);};}();_this.handlemainPagination=function(page){_this.getCart(page);};_this.handleMenuChange=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(_ref19){var _ref19$target,value,name,menuId;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_ref19$target=_ref19.target,value=_ref19$target.value,name=_ref19$target.name;menuId=Object.assign({},_this.state.menuId);menuId=value;_context15.next=5;return _this.setState({menuId:menuId});case 5:_this.getRange();_this.getServices({});case 7:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x15){return _ref20.apply(this,arguments);};}();_this.handleRangeChange=/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(_ref21){var _ref21$target,value,name,rangeId,rangeName,rangeOption,_iterator4,_step4,key;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_ref21$target=_ref21.target,value=_ref21$target.value,name=_ref21$target.name;rangeId=Object.assign({},_this.state.rangeId);rangeName=Object.assign({},_this.state.rangeName);rangeOption=_this.state.rangeOption;rangeId=value;_iterator4=_createForOfIteratorHelper(rangeOption);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){key=_step4.value;if(key.value==value){rangeName=key.label;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_context16.next=9;return _this.setState({rangeId:rangeId,rangeName:rangeName});case 9:_this.getServices({});case 10:case\"end\":return _context16.stop();}}},_callee16);}));return function(_x16){return _ref22.apply(this,arguments);};}();_this.handleSelectedService=/*#__PURE__*/function(){var _ref23=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(data){var ExchangeItem;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:ExchangeItem=_this.state.ExchangeItem;_context17.next=3;return _this.setState({SelectedExchangeItem:data});case 3:if(Number(data.item_price)>Number(ExchangeItem.unit_amount)){_this.setState({isHandleExchangeConfirmation:true});}else{_this.handleExchangePostAction();}case 4:case\"end\":return _context17.stop();}}},_callee17);}));return function(_x17){return _ref23.apply(this,arguments);};}();_this.handleExchangePostAction=function(){var basicApptDetail=_this.props.basicApptDetail;var _this$state8=_this.state,ExchangeItem=_this$state8.ExchangeItem,SelectedExchangeItem=_this$state8.SelectedExchangeItem;var payload=[];var obj={cust_noid:_this.props.match.params.id,cart_date:dateFormat(new Date(),\"yyyy-mm-dd\"),itemcodeid:SelectedExchangeItem.id,price:ExchangeItem.unit_amount,item_uom:null,treatment_account:ExchangeItem.TreatmentAccountid,treatment:ExchangeItem.id,ori_stockid:ExchangeItem.stockid};payload.push(obj);console.log(payload,\"exchange input\");_this.props.getCommonApi(\"itemcart/Check/?cart_date=\".concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(_this.props.match.params.id)).then(function(res){if(res.data.length===0){_this.props.commonCreateApi(\"itemcart/TrmtDoneCartCreate/\",payload).then(function(res){console.log(res,\"result of exchnage final click\");_this.setState({activeTab:\"treatment\",isOpenExchangeService:false});history.push(\"/admin/cart\");});}else{_this.props.commonCreateApi(\"itemcart/TrmtDoneCartCreate/?cart_id=\".concat(res.cart_id),payload).then(function(res){// this.props.handleCartCreated()\n_this.setState({activeTab:\"treatment\",isOpenExchangeService:false});history.push(\"/admin/cart\");});}});};_this.handleDialogExchangeConfirm=function(){_this.setState({isHandleExchangeConfirmation:false,SelectedExchangeItem:{}});};_this.handleLoginConfirmationDialog=/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(item,type){var tokenDetails,selectedItem,selectedType;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:debugger;tokenDetails=_this.props.tokenDetails;selectedItem={};selectedType=\"\";selectedItem=item;selectedType=type;_context18.next=8;return _this.setState({selectedItem:selectedItem,selectedType:selectedType});case 8:if(!(selectedType==\"reversal\")){_context18.next=17;break;}if(!tokenDetails.reversalusernamepopup){_context18.next=14;break;}_context18.next=12;return _this.setState(function(prevState){return{isLoginConfirmation:!prevState.isLoginConfirmation};});case 12:_context18.next=15;break;case 14:_this.handleReversalTreatment();case 15:_context18.next=23;break;case 17:if(!tokenDetails.exchangetdusernamepopup){_context18.next=22;break;}_context18.next=20;return _this.setState(function(prevState){return{isLoginConfirmation:!prevState.isLoginConfirmation};});case 20:_context18.next=23;break;case 22:_this.handleExchangeClick();case 23:case\"end\":return _context18.stop();}}},_callee18);}));return function(_x18,_x19){return _ref24.apply(this,arguments);};}();return _this;}_createClass(TreatmentDoneClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state9=this.state,_this$state9$productC=_this$state9.productCard,productCard=_this$state9$productC===void 0?{}:_this$state9$productC,list=_this$state9.list,_this$state9$tstaffLi=_this$state9.tstaffList,tstaffList=_this$state9$tstaffLi===void 0?[]:_this$state9$tstaffLi,selectedYear=_this$state9.selectedYear,yearList=_this$state9.yearList,isOpenTreatmentDone=_this$state9.isOpenTreatmentDone,headerDetails=_this$state9.headerDetails,tsStaff=_this$state9.tsStaff,isOpenReversal=_this$state9.isOpenReversal,treatmentIds=_this$state9.treatmentIds,activeMenu=_this$state9.activeMenu,isOpenExchangeService=_this$state9.isOpenExchangeService,menuOption=_this$state9.menuOption,menuId=_this$state9.menuId,rangeOption=_this$state9.rangeOption,rangeId=_this$state9.rangeId,isHandleExchangeConfirmation=_this$state9.isHandleExchangeConfirmation,ExchangeItem=_this$state9.ExchangeItem,SelectedExchangeItem=_this$state9.SelectedExchangeItem,cust_data=_this$state9.cust_data,mainMeta=_this$state9.mainMeta,isLoginConfirmation=_this$state9.isLoginConfirmation;var localtStaffList=_toConsumableArray(tstaffList);var _this$props=this.props,basicApptDetail=_this$props.basicApptDetail,t=_this$props.t,tokenDetails=_this$props.tokenDetails;var _productCard$dataList=productCard.dataList,dataList=_productCard$dataList===void 0?[]:_productCard$dataList,_productCard$meta=productCard.meta,meta=_productCard$meta===void 0?{}:_productCard$meta;var pagination=meta.pagination;return/*#__PURE__*/React.createElement(\"div\",{className:\"treatmentDone-menu\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"beautesoft-navlink customer-detail mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"filled-tabs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tabs-block\"},/*#__PURE__*/React.createElement(Nav,{tabs:true},/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:this.state.activeMenu===\"treatmentdone\"}),onClick:function onClick(){_this2.toggle(\"treatmentdone\");}},t(\"Treatment Done\"))),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:this.state.activeMenu===\"treatmenthistory\"}),onClick:function onClick(){_this2.toggle(\"treatmenthistory\");}},t(\"Treatment History\")))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"fs-15 clear-line\",label:\"Back\",outline:false,onClick:function onClick(){return history.push(\"/admin/cart\");}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-section ml-1 p-2 pr-0\"},/*#__PURE__*/React.createElement(TabContent,{activeTab:this.state.activeMenu},/*#__PURE__*/React.createElement(TabPane,{tabId:\"treatmentdone\"},activeMenu===\"treatmentdone\"?/*#__PURE__*/React.createElement(\"div\",{className:\"row treatment-done-new p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10 header\"},/*#__PURE__*/React.createElement(\"p\",{className:\"fs-18 font-700 mb-3 title\"},t(\"Available Treatments\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex select-year\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pl-0 mb-2 name fs-16 py-2\"},t(\"Select Year\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:yearList,value:selectedYear,name:\"selectedYear\",onChange:this.handleYearChange,className:\"selected-year mb-2 py-0 col-12\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start align-self-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,t(\"Customer Name\"),\" : \",cust_data.cust_name),/*#__PURE__*/React.createElement(\"p\",null,t(\"Reference\"),\" : \",cust_data.cust_refer)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 cart-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"item-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlemainPagination,pageMeta:mainMeta// isEmpty={tstaffList.length === 0 ? true:false}\n},tstaffList.length>0?tstaffList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left \".concat(!item.iscurrentloggedinsalon?\"text-danger\":\"\")},item.site_code)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.treatment_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.course)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.transacno_ref)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.unit_amount)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},item.treatment_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.td)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.rev)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.open)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},item.ar)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"number\",style:{width:\"50px\"// textAlign: \"right\",\n},value:item.session,onChange:function onChange(e){return _this2.changeIndexSession(index,e.target.value,item);},className:\"text-right\",min:\"0\",max:item.open,disabled:item.session_flag&&item.session!==Number(0)?true:false})),/*#__PURE__*/React.createElement(\"td\",{style:{width:\"50px\"}},/*#__PURE__*/React.createElement(\"button\",{className:\"btnRedeem\",onClick:function onClick(){return _this2.handleAddstaff(item);}},t(\"Select\"))),/*#__PURE__*/React.createElement(\"td\",{style:{width:\"50px\"}},item.iscurrentloggedinsalon||item.is_reversal&&item.is_allow?/*#__PURE__*/React.createElement(\"button\",{className:\"btnReversal\"// onClick={() =>\n//   this.handleReversalTreatment(item)\n// }\n,onClick:function onClick(){return _this2.handleLoginConfirmationDialog(item,\"reversal\");}},t(\"Select\")):null),/*#__PURE__*/React.createElement(\"td\",{style:{width:\"50px\"}},item.exchange_flag&&/*#__PURE__*/React.createElement(\"button\",{className:\"btnExchange\",label:\"Exchange\",onClick:function onClick(){return _this2.handleLoginConfirmationDialog(item,\"exchange\");}},t(\"Select\"))));}):null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pt-4 action-bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-7 d-flex\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\" fs-15 confirm\",label:\"Confirm Treatment Done\",outline:false,onClick:function onClick(){return _this2.handleCartCreated();}})))))),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-exchange\",style:{minWidth:\"70%\"},modal:isOpenExchangeService,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 input-group pl-2 range-filter\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:menuOption,value:menuId,name:\"menuId\",onChange:this.handleMenuChange,className:\"py-0\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 input-group range-filter\"},/*#__PURE__*/React.createElement(NormalSelect// placeholder=\"Enter here\"\n,{options:rangeOption,value:rangeId,name:\"rangeId\",onChange:this.handleRangeChange,className:\"py-0\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},console.log(list,\"card list\"),/*#__PURE__*/React.createElement(\"div\",{className:\"services m-0 row\"},list.length>0?list.map(function(data,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 fs-12 p-2 cursor-pointer\",key:data.id,onClick:function onClick(){return _this2.handleSelectedService(data);}},/*#__PURE__*/React.createElement(\"div\",{className:\"service-tab p-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"service-ttl px-2 font-700 fs-11\"},data.item_desc),/*#__PURE__*/React.createElement(\"div\",{className:\"price px-2 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"non-retail\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-orenge font-700\"},\"$\"),/*#__PURE__*/React.createElement(\"span\",{className:\"text-orenge font-700\"},data.item_price?Number(data.item_price).toFixed(2):\"\"),/*#__PURE__*/React.createElement(\"span\",{className:\"foc-icon\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"32\",height:\"32\",className:\"cursor-pointer\",viewBox:\"0 0 32 32\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"circle\",{cx:\"16\",cy:\"16\",r:\"15.5\",fill:\"rgba(60, 64, 135, 0.31)\",stroke:\"#3C4087\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M3.996 11.456H9.42V12.476H5.22V15.152H9.18V16.172H5.22V20H3.996V11.456ZM14.3243 20.096C13.5163 20.096 12.8123 19.92 12.2123 19.568C11.6203 19.208 11.1603 18.7 10.8323 18.044C10.5123 17.388 10.3523 16.616 10.3523 15.728C10.3523 14.832 10.5123 14.056 10.8323 13.4C11.1523 12.744 11.6123 12.24 12.2123 11.888C12.8123 11.536 13.5163 11.36 14.3243 11.36C15.1403 11.36 15.8443 11.536 16.4362 11.888C17.0363 12.24 17.4963 12.744 17.8163 13.4C18.1363 14.056 18.2963 14.828 18.2963 15.716C18.2963 16.612 18.1363 17.388 17.8163 18.044C17.4963 18.7 17.0363 19.208 16.4362 19.568C15.8363 19.92 15.1323 20.096 14.3243 20.096ZM14.3243 19.088C15.1803 19.088 15.8443 18.796 16.3163 18.212C16.7963 17.628 17.0363 16.796 17.0363 15.716C17.0363 14.644 16.7963 13.82 16.3163 13.244C15.8443 12.66 15.1803 12.368 14.3243 12.368C13.4683 12.368 12.8043 12.66 12.3323 13.244C11.8603 13.82 11.6243 14.644 11.6243 15.716C11.6243 16.796 11.8603 17.628 12.3323 18.212C12.8123 18.796 13.4763 19.088 14.3243 19.088ZM23.7598 20.096C22.9358 20.096 22.2158 19.92 21.5998 19.568C20.9918 19.208 20.5238 18.7 20.1958 18.044C19.8678 17.388 19.7038 16.612 19.7038 15.716C19.7038 14.828 19.8678 14.056 20.1958 13.4C20.5238 12.744 20.9918 12.24 21.5998 11.888C22.2158 11.536 22.9358 11.36 23.7598 11.36C24.3438 11.36 24.8838 11.452 25.3798 11.636C25.8838 11.812 26.3078 12.072 26.6518 12.416L26.2198 13.328C25.8198 13 25.4238 12.764 25.0318 12.62C24.6478 12.468 24.2278 12.392 23.7718 12.392C22.8838 12.392 22.1958 12.68 21.7078 13.256C21.2278 13.832 20.9878 14.652 20.9878 15.716C20.9878 16.788 21.2278 17.616 21.7078 18.2C22.1958 18.776 22.8838 19.064 23.7718 19.064C24.2278 19.064 24.6478 18.992 25.0318 18.848C25.4238 18.696 25.8198 18.456 26.2198 18.128L26.6518 19.04C26.3078 19.384 25.8838 19.648 25.3798 19.832C24.8838 20.008 24.3438 20.096 23.7598 20.096Z\",fill:\"#3C4087\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"images\"},/*#__PURE__*/React.createElement(\"img\",{src:data.Stock_PIC,alt:\"\"}))));}):\"\",pagination&&/*#__PURE__*/React.createElement(Pagination,{handlePagination:this.handlePagination,pageMeta:pagination})))),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-reversal\",style:{minWidth:\"75%\"},modal:isOpenReversal,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(Reversal,{id:this.props.match.params.id,treatmentId:tsStaff.id,reversalId:treatmentIds,cartId:this.props.id,handleModal:this.handleDialog})),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-modal\",style:{minWidth:\"60%\"},modal:isOpenTreatmentDone,handleModal:this.handleDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(SelectStaff,{id:this.state.selectedItemTreatmentIds//id={tsStaff.id}\n,session:this.state.selectedSession,cartId:basicApptDetail.cartId,handleModal:this.handleDialog})),/*#__PURE__*/React.createElement(NormalModal,{className:\"transaction-done-reversal\",style:{minWidth:\"432px\"},modal:isHandleExchangeConfirmation,handleModal:this.handleDialogExchangeConfirm},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleDialogExchangeConfirm,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"Confirmation\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2\"},/*#__PURE__*/React.createElement(\"p\",null,t(\"Service Price\"),\" : $\",SelectedExchangeItem.item_price,\"\\xA0\",t(\"larger than\")),/*#__PURE__*/React.createElement(\"p\",null,t(\"Previous Service Price\"),\" : $\",ExchangeItem.unit_amount)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2\"},/*#__PURE__*/React.createElement(\"p\",null,t(\"Are you sure want to continue\"),\" ?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Confirm\",mainbg:true,name:\"Exconfirm\",className:\"w-100 col-12\",onClick:this.handleExchangePostAction})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(NormalButton,{label:\"Cancel\",resetbg:true,name:\"ExCancel\",className:\"w-100 col-12\",onClick:this.handleDialogExchangeConfirm}))))))):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},t(\"No Data Available\"))))),/*#__PURE__*/React.createElement(TabPane,{tabId:\"treatmenthistory\"},activeMenu===\"treatmenthistory\"?/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-done-new p-3\"},/*#__PURE__*/React.createElement(TreatmentHistoryCart,{customerNumber:this.props.match.params.id})):null)),/*#__PURE__*/React.createElement(NormalModal,{className:\"d-flex justify-content-center\",style:{minWidth:\"20%\"},modal:isLoginConfirmation,handleModal:function handleModal(){}},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleLoginConfirmationDialog,className:\"close cursor-pointer\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(CredentialConfirmation,{handleLoginSubmit:function handleLoginSubmit(user,pass){return _this2.handleauthentication(user,pass);}}))));}}]);return TreatmentDoneClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{selected_cstomer:state.common.selected_cstomer,basicApptDetail:state.appointment.basicApptDetail,tokenDetails:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var TreatmentDone=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(TreatmentDoneClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Cart/treatmentDone/treatment.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","NormalCheckbox","Pagination","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","SelectStaff","Reversal","service","closeIcon","FormGroup","Label","Input","TreatmentHistoryCart","Nav","NavItem","NavLink","TabContent","TabPane","classnames","Toast","withTranslation","max","CredentialConfirmation","TreatmentDoneClass","state","tstaffList","headerDetails","label","sortKey","width","divClass","yearList","value","selectedYear","isOpenTreatmentDone","tsStaff","workPoint","isOpenReversal","checkBoxConfirmReversal","selectedSession","selectedItemTreatmentIds","activeMenu","productCard","list","isOpenExchangeService","page","rangeId","menuId","rangeName","rangeOption","ExchangeItem","SelectedExchangeItem","cust_data","mainMeta","isLoginConfirmation","selectedItem","selectedType","componentDidMount","getCart","validator","element","message","autoForceUpdate","handleCheckboxChangeWithNormalCheckBox","item","newArray","target","name","includes","filter","day","setState","data","console","log","props","roomList","sourceList","staffList","cartData","duration","custId","match","params","id","basicApptDetail","limit","search","then","key","dataList","meta","pagination","formFields","cust_name","cust_refer","handleYearChange","records","getDataFromRes","updateFields","postFields","Item","Price","Room","Source","add_duration","new_remark","times","work_point","handleSubmit","handleDialog","isHandleExchangeConfirmation","handleSearch","event","persist","debouncedFn","debounce","searchString","status","customerOption","handleCartCreated","price","payload","reverseTreatmentIds","ItemTreatmentIds","treatmentids","sort","a","b","sel","obj","cust_noid","cart_date","Date","itemcodeid","stockid","unit_amount","item_uom","treatment_account","TreatmentAccountid","treatment","slice","session","ori_stockid","push","length","test","res","activeTab","isOpenPriceModal","cart_id","handleCheckout","isOpenPayment","handleChange","handlePostChange","handleUpdateChange","handleAddstaff","is_allow","unit_rate","qualifiedAmount","type","handleUpdatestaff","index","appt_fr_time","handleClearLine","cartId","handleClearAll","handleReversalTreatmentAll","treatmentIds","handleReversalTreatment","TreatmentIds","handleReverse","changeIndexSession","Number","open","toggle","tab","getServices","query","getMenus","menuOption","itm_desc","code","itm_code","seq","itm_seq","getRange","handleauthentication","user","pass","Body","username","password","prevState","handleExchangeClick","handlePagination","handlemainPagination","handleMenuChange","Object","assign","handleRangeChange","handleSelectedService","item_price","handleExchangePostAction","handleDialogExchangeConfirm","handleLoginConfirmationDialog","tokenDetails","reversalusernamepopup","exchangetdusernamepopup","localtStaffList","t","active","map","iscurrentloggedinsalon","site_code","treatment_date","course","transacno_ref","treatment_code","td","rev","ar","e","session_flag","is_reversal","exchange_flag","minWidth","item_desc","toFixed","Stock_PIC","mapStateToProps","selected_cstomer","common","appointment","authStore","mapDispatchToProps","dispatch","TreatmentDone"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalButton,\r\n  NormalInput,\r\n  NormalSelect,\r\n  InputSearch,\r\n  NormalModal,\r\n  TableWrapper,\r\n  NormalCheckbox,\r\n  Pagination,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { SelectStaff } from \"./treatmentDone\";\r\nimport { Reversal } from \"./reversal\";\r\nimport service from \"assets/images/make-up-brush.png\";\r\n// import Discount from './cart/discount';\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { FormGroup, Label, Input } from \"reactstrap\";\r\nimport { TreatmentHistoryCart } from \"./TreatmentHistoryCart\";\r\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from \"reactstrap\";\r\nimport classnames from \"classnames\";\r\nimport { Toast } from \"service/toast\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { max } from \"moment\";\r\nimport { CredentialConfirmation } from \"../credentialConfirmation\";\r\n\r\nexport class TreatmentDoneClass extends Component {\r\n  state = {\r\n    tstaffList: [],\r\n    headerDetails: [\r\n      { label: \"Branch\" },\r\n      {\r\n        label: \"Date\",\r\n        sortKey: false,\r\n        width: \"110px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      { label: \"Treatment\", width: \"120px\" },\r\n      { label: \"Trans Ref\", sortKey: false, width: \"50px\" },\r\n\r\n      //{ label: 'Type', sortKey: false, width: \"55px\" },\r\n      // { label: 'Exp-Date', sortKey: false, width: \"80px\" },\r\n      {\r\n        label: \"Amount\",\r\n        sortKey: false,\r\n        width: \"50px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n\r\n      {\r\n        label: \"Treat-Code\",\r\n        sortKey: false,\r\n        width: \"105px\",\r\n      },\r\n      {\r\n        label: \"TD\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Rev\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Open\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"AR\",\r\n        sortKey: false,\r\n        width: \"35px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n      {\r\n        label: \"Session\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Redeem\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Reversal\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-center\",\r\n      },\r\n      {\r\n        label: \"Exchange\",\r\n        sortKey: false,\r\n        width: \"55px\",\r\n        divClass: \"justify-content-end text-right\",\r\n      },\r\n    ],\r\n    // cartData: {},\r\n    yearList: [\r\n      {\r\n        label: \"All\",\r\n        value: \"All\",\r\n      },\r\n      {\r\n        label: \"Default\",\r\n        value: \"Default\",\r\n      },\r\n      //{ //Yoonus\r\n      //  label: \"Expiry\",\r\n      //  value: \"Expiry\",\r\n      //},\r\n    ],\r\n    selectedYear: \"Default\", //All //Yoonus\r\n    isOpenTreatmentDone: false,\r\n    tsStaff: {},\r\n    workPoint: 0,\r\n    isOpenReversal: false,\r\n    checkBoxConfirmReversal: [],\r\n    selectedSession: \"\",\r\n    selectedItemTreatmentIds: [],\r\n    activeMenu: \"treatmentdone\",\r\n    productCard: [],\r\n    list: [],\r\n    isOpenExchangeService: false,\r\n    page: 1,\r\n    rangeId: \"\",\r\n    menuId: \"\",\r\n    rangeName: \"\",\r\n    rangeOption: [],\r\n    ExchangeItem: {},\r\n    SelectedExchangeItem: {},\r\n    cust_data: {},\r\n    mainMeta: {},\r\n    isLoginConfirmation: false,\r\n    selectedItem: {},\r\n    selectedType: \"\",\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.getCart({});\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    // this.props.getCommonApi(\"treatmentdone/Year/\").then(key => {\r\n    //   let { status, data } = key;\r\n    //   let { yearList } = this.state;\r\n    //   for (let value of data) {\r\n    //     yearList.push({ value: value, label: value });\r\n    //   }\r\n    //   this.setState({ yearList });\r\n    // });\r\n  };\r\n  handleCheckboxChangeWithNormalCheckBox = item => {\r\n    let newArray = [...this.state.checkBoxConfirmReversal, item.target.name];\r\n    if (this.state.checkBoxConfirmReversal.includes(item.target.name)) {\r\n      newArray = newArray.filter(day => day !== item.target.name);\r\n    }\r\n    this.setState({\r\n      checkBoxConfirmReversal: newArray,\r\n    });\r\n  };\r\n  getCart = async data => {\r\n    console.log(this.props, \"sfgdfsgdfghgf\");\r\n    let {\r\n      roomList,\r\n      sourceList,\r\n      staffList,\r\n      cartData,\r\n      duration,\r\n      tstaffList,\r\n      selectedYear,\r\n      cust_data,\r\n      mainMeta,\r\n    } = this.state;\r\n    let custId = \"\";\r\n\r\n    if (this.props.match.params.id) {\r\n      custId = this.props.match.params.id;\r\n    } else {\r\n      custId = this.props.basicApptDetail.custId;\r\n    }\r\n    let { page = 1, limit = 12, search = \"\" } = data;\r\n\r\n    this.props\r\n      .getCommonApi(\r\n        `treatmentdone/?year=${selectedYear}&cust_id=${custId}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(async key => {\r\n        await this.setState({\r\n          tstaffList: [],\r\n          mainMeta: {},\r\n        });\r\n        cartData = key;\r\n        let { data, cust_data } = key;\r\n        console.log(key, \"Service Redeem List data\");\r\n\r\n        tstaffList = data.dataList;\r\n        cust_data = cust_data;\r\n        mainMeta = data.meta.pagination;\r\n        await this.setState({\r\n          tstaffList,\r\n          mainMeta,\r\n          cust_data,\r\n        });\r\n        if (cust_data) {\r\n          let formFields = {};\r\n          formFields[\"custId\"] = this.props.match.params.id;\r\n          formFields[\"custName\"] = cust_data.cust_name;\r\n          formFields[\"cust_refer\"] = cust_data.cust_refer;\r\n          await this.props.updateForm(\"basicApptDetail\", formFields);\r\n        }\r\n      });\r\n  };\r\n\r\n  handleYearChange = async ({ target: { value, name } }) => {\r\n    let { selectedYear, records } = this.state;\r\n    selectedYear = value;\r\n    records = [];\r\n    await this.setState({\r\n      selectedYear,\r\n      records,\r\n    });\r\n    this.getCart({});\r\n  };\r\n\r\n  getDataFromRes = data => {\r\n    let { formFields, cartData, updateFields, postFields } = this.state;\r\n    formFields[\"Item\"] = data.value.Item;\r\n    formFields[\"Price\"] = data.value.Price;\r\n    formFields[\"Room\"] = data.value.Room;\r\n    updateFields[\"Room\"] = data.value.Room;\r\n    formFields[\"Source\"] = data.value.Source;\r\n    updateFields[\"Source\"] = data.value.Source;\r\n    formFields[\"add_duration\"] = data.value.add_duration;\r\n    formFields[\"new_remark\"] = data.value.new_remark;\r\n    updateFields[\"new_remark\"] = data.value.new_remark;\r\n    postFields[\"times\"] = data.value.times;\r\n    postFields[\"work_point\"] = data.value.work_point;\r\n    this.setState({\r\n      formFields,\r\n      updateFields,\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  // getYearList = (data) => {\r\n  //     let date = new Date().getFullYear();\r\n\r\n  //     let { yearList } = this.state;\r\n  //     for (let i = date; i > 1970; i--) {\r\n  //         yearList.push({ label: i, value: i });\r\n  //     }\r\n  //     this.setState({\r\n  //         yearList\r\n  //     })\r\n  // }\r\n\r\n  handleSubmit = id => {};\r\n\r\n  handleDialog = () => {\r\n    this.setState({\r\n      isOpenTreatmentDone: false,\r\n      isOpenReversal: false,\r\n      checkBoxConfirmReversal: [],\r\n      isOpenExchangeService: false,\r\n      isHandleExchangeConfirmation: false,\r\n      records: [],\r\n    });\r\n    this.getCart({});\r\n  };\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        this.props\r\n          .getCommonApi(`custappt/?search=${searchString}`)\r\n          .then(key => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n              // for (let value of data) {\r\n              //     customerList.push({ value: value.id, label: value.emp_name })\r\n              // }\r\n              this.setState({ customerOption: data });\r\n            }\r\n          });\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  // handleSelectCustomer = async data => {\r\n  //   let { formFields } = this.state;\r\n  //   formFields[\"custId\"] = data.id;\r\n  //   formFields[\"custName\"] = data.cust_name;\r\n  //   this.setState({ formFields, isOpenCustomer: false, customerOption: [] });\r\n  //   await this.props.updateForm(\"basicApptDetail\", formFields);\r\n  //   console.log(this.props.basicApptDetail, \"sdfsadfasdf\");\r\n  // };\r\n\r\n  handleCartCreated = (data, price, id) => {\r\n    let { basicApptDetail } = this.props;\r\n    let { tstaffList } = this.state;\r\n    let payload = [];\r\n\r\n    for (let key of tstaffList) {\r\n      let reverseTreatmentIds = [];\r\n      //reverseTreatmentIds = key.treatmentids.reverse();\r\n      let ItemTreatmentIds = key.treatmentids;\r\n      reverseTreatmentIds = ItemTreatmentIds.sort((a, b) => b - a);\r\n      if (key.sel === true) {\r\n        let obj = {\r\n          cust_noid: this.props.match.params.id,\r\n          cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n          itemcodeid: key.stockid,\r\n          price: key.unit_amount,\r\n          item_uom: null,\r\n          treatment_account: key.TreatmentAccountid,\r\n          treatment: reverseTreatmentIds.slice(0, key.session),\r\n          ori_stockid: null,\r\n        };\r\n        payload.push(obj);\r\n      }\r\n    }\r\n    if (payload.length > 0) {\r\n      let test = payload;\r\n      console.log(\"payload-data\", test);\r\n      this.props\r\n        .getCommonApi(\r\n          `itemcart/Check/?cart_date=${dateFormat(\r\n            new Date(),\r\n            \"yyyy-mm-dd\"\r\n          )}&cust_noid=${this.props.match.params.id}`\r\n        )\r\n        .then(res => {\r\n          if (res.data.length === 0) {\r\n            this.props\r\n              .commonCreateApi(\"itemcart/TrmtDoneCartCreate/\", payload)\r\n              .then(res => {\r\n                // this.props.handleCartCreated()\r\n                this.setState({\r\n                  activeTab: \"treatment\",\r\n                  isOpenPriceModal: false,\r\n                });\r\n                history.push(\"/admin/cart\");\r\n              });\r\n          } else {\r\n            this.props\r\n              .commonCreateApi(\r\n                `itemcart/TrmtDoneCartCreate/?cart_id=${res.cart_id}`,\r\n                payload\r\n              )\r\n              .then(res => {\r\n                // this.props.handleCartCreated()\r\n                this.setState({\r\n                  activeTab: \"treatment\",\r\n                  isOpenPriceModal: false,\r\n                });\r\n                history.push(\"/admin/cart\");\r\n              });\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  handleCheckout = () => {\r\n    let { isOpenPayment } = this.state;\r\n    isOpenPayment = true;\r\n    this.setState({ isOpenPayment });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    // this.props.updateForm('customerDetail', formFields)\r\n    // await this.props.updateForm('appointmentCustomerDetail', formFields)\r\n  };\r\n\r\n  handlePostChange = async ({ target: { value, name } }) => {\r\n    let { postFields } = this.state;\r\n    postFields[name] = value;\r\n    await this.setState({\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  handleUpdateChange = async ({ target: { value, name } }) => {\r\n    let { updateFields } = this.state;\r\n    updateFields[name] = value;\r\n    await this.setState({\r\n      updateFields,\r\n    });\r\n    let event = { target: { value: value, name: name } };\r\n    // this.handleUpdatestaff(event);\r\n  };\r\n\r\n  handleAddstaff = async item => {\r\n    if (item.is_allow) {\r\n      let { tstaffList, selectedSession, selectedItemTreatmentIds } =\r\n        this.state;\r\n      selectedSession = item.session;\r\n      // let reverseTreatmentIds = [];\r\n      // reverseTreatmentIds = item.treatmentids.reverse();\r\n      let ItemTreatmentIds = item.treatmentids;\r\n      let reverseTreatmentIds = ItemTreatmentIds.sort((a, b) => b - a);\r\n      if (selectedSession == 0) {\r\n        selectedSession = 1;\r\n      }\r\n      selectedItemTreatmentIds = reverseTreatmentIds.slice(0, selectedSession);\r\n      var unit_rate = item.unit_amount;\r\n      var qualifiedAmount = selectedSession * unit_rate;\r\n      this.setState({ selectedSession, selectedItemTreatmentIds });\r\n\r\n      /* let test=0;\r\n        const currentParentCodeBalance = tstaffList.filter(\r\n            (res) => res.treatment_parentcode ===  item.treatment_parentcode\r\n          ).reduce((sum, currentValue) => {\r\n            return  currentValue.balance;\r\n          }, 0);\r\n        const currentParentCodeSelectedStaffValue = tstaffList.filter(\r\n            (res) => res.treatment_parentcode ===  item.treatment_parentcode && res.staff!=null\r\n            ).reduce((sum, currentValue) => {\r\n                return parseFloat((eval(sum))) + parseFloat((eval(currentValue.unit_amount)));\r\n              }, 0);\r\n        \r\n        if(item.staff==null)\r\n        {\r\n            test=parseFloat((eval(currentParentCodeSelectedStaffValue))) + parseFloat((eval(item.unit_amount))) ;\r\n        }\r\n        else{\r\n            test=parseFloat((eval(currentParentCodeSelectedStaffValue))) - parseFloat((eval(item.unit_amount))) ;\r\n        }\r\n        */\r\n\r\n      //if (currentParentCodeBalance >= test) {\r\n      // if (item.balance >= qualifiedAmount) {\r\n      //   let { tstaffList, formFields, cartData, postFields } = this.state;\r\n      //   await this.setState({ tsStaff: item });\r\n      //   this.setState({\r\n      //     isOpenTreatmentDone: true,\r\n      //   });\r\n      // } else {\r\n      //   this.handleDialog();\r\n      //   Toast({\r\n      //     type: \"error\",\r\n      //     message: \"Insufficient balance to redeem\",\r\n      //   });\r\n      // }\r\n      await this.setState({ tsStaff: item });\r\n      this.setState({\r\n        isOpenTreatmentDone: true,\r\n      });\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Treatment done is not allowed in other outlets\",\r\n      });\r\n    }\r\n  };\r\n\r\n  handleUpdatestaff = async (event, item, index) => {\r\n    let { tstaffList, formFields, cartData, updateFields } = this.state;\r\n    tstaffList[index][event.target.name] = event.target.value;\r\n    this.setState({\r\n      tstaffList,\r\n    });\r\n    let data = {};\r\n    if (event.target.name === \"appt_fr_time\") {\r\n      data = {\r\n        appt_fr_time: event.target.value,\r\n        add_duration: formFields[\"add_duration\"],\r\n      };\r\n    }\r\n    if (event.target.name === \"add_duration\") {\r\n      data = {\r\n        appt_fr_time: item.appt_fr_time,\r\n        add_duration: event.target.value,\r\n      };\r\n    }\r\n\r\n    // if (updateFields.Source && updateFields.Room) {\r\n    this.props\r\n      .commonPatchApi(\r\n        `tmpitemhelper/${item.id}/?Room_Codeid=${updateFields.Room}&Source_Codeid=${updateFields.Source}&new_remark=${updateFields.new_remark}`,\r\n        data\r\n      )\r\n      .then(() => {\r\n        this.getCart({});\r\n      });\r\n    // } else {\r\n    //     this.setState({ showUpdateError: true })\r\n    // }\r\n  };\r\n\r\n  handleClearLine = () => {\r\n    this.props\r\n      .commonDeleteApi(\r\n        `tmpitemhelper/delete/?clear_all=0&cartid=${this.props.cartId}`\r\n      )\r\n      .then(() => {\r\n        this.getCart({});\r\n      });\r\n  };\r\n\r\n  handleClearAll = () => {\r\n    this.props\r\n      .commonDeleteApi(\r\n        `tmpitemhelper/delete/?clear_all=1&cartid=${this.props.cartId}`\r\n      )\r\n      .then(() => {\r\n        let { formFields, postFields } = this.state;\r\n        formFields[\"work_point\"] = \"\";\r\n        postFields[\"times\"] = \"\";\r\n        this.setState({\r\n          formFields,\r\n          postFields,\r\n        });\r\n        this.getCart({});\r\n      });\r\n  };\r\n  handleReversalTreatmentAll = async () => {\r\n    let treatmentIds = this.state.checkBoxConfirmReversal;\r\n\r\n    await this.setState({\r\n      treatmentIds,\r\n    });\r\n\r\n    this.setState({\r\n      isOpenReversal: true,\r\n    });\r\n  };\r\n  handleReversalTreatment = async () => {\r\n    //debugger;\r\n    let { selectedItem } = this.state;\r\n    let item = selectedItem;\r\n    if (item.is_allow) {\r\n      let reverseTreatmentIds = [];\r\n      let { selectedSession } = this.state;\r\n      selectedSession = item.session;\r\n      let ItemTreatmentIds = item.treatmentids;\r\n      let TreatmentIds = ItemTreatmentIds.sort((a, b) => b - a);\r\n      if (selectedSession == 0) {\r\n        selectedSession = 1;\r\n      }\r\n      reverseTreatmentIds = TreatmentIds.slice(0, selectedSession);\r\n      await this.setState({\r\n        treatmentIds: reverseTreatmentIds,\r\n        selectedSession,\r\n      });\r\n\r\n      this.setState({\r\n        isOpenReversal: true,\r\n      });\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"You are not allowed to do this transaction\",\r\n      });\r\n    }\r\n  };\r\n\r\n  handleReverse = (item, index) => {\r\n    let { tstaffList } = this.state;\r\n    tstaffList[index][\"rev\"] = true;\r\n    this.setState({\r\n      tstaffList,\r\n    });\r\n    // onClick={this.handleReversalTreatment}\r\n  };\r\n  changeIndexSession = (index, value, item) => {\r\n    if (item.is_allow) {\r\n      if (Number(value) <= Number(item.open)) {\r\n        let { tstaffList } = this.state;\r\n        tstaffList[index][\"session\"] = value;\r\n        this.setState({\r\n          tstaffList,\r\n        });\r\n      } else {\r\n        Toast({\r\n          type: \"error\",\r\n          message: \"Please enter valid session\",\r\n        });\r\n      }\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"You are not allowed to do this transaction\",\r\n      });\r\n    }\r\n  };\r\n\r\n  toggle = tab => {\r\n    if (this.state.activeMenu !== tab) {\r\n      this.setState({\r\n        activeMenu: tab,\r\n      });\r\n    }\r\n  };\r\n  getServices = query => {\r\n    let {\r\n      page = this.state.page,\r\n      menuId = this.state.menuId,\r\n      rangeId = this.state.rangeId,\r\n    } = query;\r\n    this.props\r\n      .getCommonApi(\r\n        `servicestock/?Item_Deptid=${menuId}&page=${page}&Item_Rangeid=${rangeId}`\r\n      )\r\n      .then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          this.setState({ productCard: data, list: data.dataList });\r\n        }\r\n      });\r\n  };\r\n  getMenus = () => {\r\n    let { menuOption } = this.state;\r\n    menuOption = [];\r\n    console.log(\"sdfsdhfghjghj\", this.props);\r\n    this.props\r\n      .getCommonApi(`catalogitemdept/?Item_Dept=${`SERVICE`}`)\r\n      .then(res => {\r\n        // activeMenu = []\r\n        console.log(\"sdfsdhfghjghj ress\", res);\r\n        for (let key of res.data) {\r\n          menuOption.push({\r\n            value: key.id,\r\n            label: key.itm_desc,\r\n            code: key.itm_code,\r\n            seq: key.itm_seq,\r\n          });\r\n        }\r\n        this.setState({ menuOption });\r\n      });\r\n  };\r\n\r\n  getRange = () => {\r\n    let { rangeOption, menuId } = this.state;\r\n    rangeOption = [];\r\n\r\n    this.props\r\n      .getCommonApi(`catalogitemrange?Item_Deptid=${menuId}`)\r\n      .then(res => {\r\n        // activeMenu = []\r\n        for (let key of res.data) {\r\n          rangeOption.push({ value: key.id, label: key.itm_desc });\r\n        }\r\n        this.setState({ rangeOption });\r\n      });\r\n  };\r\n\r\n  handleauthentication = async (user, pass) => {\r\n    let Body = {\r\n      username: user,\r\n      password: pass,\r\n    };\r\n    let { selectedType } = this.state;\r\n    this.props\r\n      .commonCreateApi(`userauthorizationpopup/`, Body)\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        if (status == 200) {\r\n          await this.setState(prevState => ({\r\n            isLoginConfirmation: !prevState.isLoginConfirmation,\r\n          }));\r\n          if (selectedType == \"reversal\") {\r\n            this.handleReversalTreatment();\r\n          } else {\r\n            this.handleExchangeClick();\r\n          }\r\n        }\r\n      });\r\n  };\r\n\r\n  handleExchangeClick = async () => {\r\n    let { selectedItem } = this.state;\r\n    let item = selectedItem;\r\n    if (item.is_allow) {\r\n      if (item.sel) {\r\n        await this.setState({\r\n          ExchangeItem: [],\r\n        });\r\n        this.getMenus();\r\n        this.getRange();\r\n        this.getServices({});\r\n\r\n        await this.setState({\r\n          isOpenExchangeService: true,\r\n          ExchangeItem: item,\r\n        });\r\n        console.log(\r\n          this.state.ExchangeItem,\r\n          \"selected row of treatment done data - exchange item\"\r\n        );\r\n      } else {\r\n        Toast({\r\n          type: \"error\",\r\n          message: \"Select Staff should not be empty\",\r\n        });\r\n      }\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"You are not allowed to do this transaction\",\r\n      });\r\n    }\r\n  };\r\n\r\n  handlePagination = async page => {\r\n    await this.setState({ page: page });\r\n    this.getServices({ page: page });\r\n  };\r\n  handlemainPagination = page => {\r\n    this.getCart(page);\r\n  };\r\n  handleMenuChange = async ({ target: { value, name } }) => {\r\n    let menuId = Object.assign({}, this.state.menuId);\r\n    menuId = value;\r\n    await this.setState({ menuId });\r\n\r\n    this.getRange();\r\n\r\n    this.getServices({});\r\n  };\r\n\r\n  handleRangeChange = async ({ target: { value, name } }) => {\r\n    let rangeId = Object.assign({}, this.state.rangeId);\r\n    let rangeName = Object.assign({}, this.state.rangeName);\r\n    let { rangeOption } = this.state;\r\n    rangeId = value;\r\n\r\n    for (let key of rangeOption) {\r\n      if (key.value == value) {\r\n        rangeName = key.label;\r\n      }\r\n    }\r\n\r\n    await this.setState({\r\n      rangeId,\r\n      rangeName,\r\n    });\r\n    this.getServices({});\r\n  };\r\n\r\n  handleSelectedService = async data => {\r\n    let { ExchangeItem } = this.state;\r\n    await this.setState({\r\n      SelectedExchangeItem: data,\r\n    });\r\n    if (Number(data.item_price) > Number(ExchangeItem.unit_amount)) {\r\n      this.setState({ isHandleExchangeConfirmation: true });\r\n    } else {\r\n      this.handleExchangePostAction();\r\n    }\r\n  };\r\n\r\n  handleExchangePostAction = () => {\r\n    let { basicApptDetail } = this.props;\r\n    let { ExchangeItem, SelectedExchangeItem } = this.state;\r\n    let payload = [];\r\n    let obj = {\r\n      cust_noid: this.props.match.params.id,\r\n      cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n      itemcodeid: SelectedExchangeItem.id,\r\n      price: ExchangeItem.unit_amount,\r\n      item_uom: null,\r\n      treatment_account: ExchangeItem.TreatmentAccountid,\r\n      treatment: ExchangeItem.id,\r\n      ori_stockid: ExchangeItem.stockid,\r\n    };\r\n    payload.push(obj);\r\n    console.log(payload, \"exchange input\");\r\n    this.props\r\n      .getCommonApi(\r\n        `itemcart/Check/?cart_date=${dateFormat(\r\n          new Date(),\r\n          \"yyyy-mm-dd\"\r\n        )}&cust_noid=${this.props.match.params.id}`\r\n      )\r\n      .then(res => {\r\n        if (res.data.length === 0) {\r\n          this.props\r\n            .commonCreateApi(\"itemcart/TrmtDoneCartCreate/\", payload)\r\n            .then(res => {\r\n              console.log(res, \"result of exchnage final click\");\r\n              this.setState({\r\n                activeTab: \"treatment\",\r\n                isOpenExchangeService: false,\r\n              });\r\n              history.push(\"/admin/cart\");\r\n            });\r\n        } else {\r\n          this.props\r\n            .commonCreateApi(\r\n              `itemcart/TrmtDoneCartCreate/?cart_id=${res.cart_id}`,\r\n              payload\r\n            )\r\n            .then(res => {\r\n              // this.props.handleCartCreated()\r\n              this.setState({\r\n                activeTab: \"treatment\",\r\n                isOpenExchangeService: false,\r\n              });\r\n              history.push(\"/admin/cart\");\r\n            });\r\n        }\r\n      });\r\n  };\r\n  handleDialogExchangeConfirm = () => {\r\n    this.setState({\r\n      isHandleExchangeConfirmation: false,\r\n      SelectedExchangeItem: {},\r\n    });\r\n  };\r\n\r\n  handleLoginConfirmationDialog = async (item, type) => {\r\n    debugger;\r\n    let { tokenDetails } = this.props;\r\n\r\n    let selectedItem = {};\r\n    let selectedType = \"\";\r\n    selectedItem = item;\r\n    selectedType = type;\r\n    await this.setState({ selectedItem, selectedType });\r\n    if (selectedType == \"reversal\") {\r\n      if (tokenDetails.reversalusernamepopup) {\r\n        //reversal flag update based on backend api response\r\n        await this.setState(prevState => ({\r\n          isLoginConfirmation: !prevState.isLoginConfirmation,\r\n        }));\r\n      } else {\r\n        this.handleReversalTreatment();\r\n      }\r\n    } else {\r\n      if (tokenDetails.exchangetdusernamepopup) {\r\n        //exchange flag update based on backend api response\r\n        await this.setState(prevState => ({\r\n          isLoginConfirmation: !prevState.isLoginConfirmation,\r\n        }));\r\n      } else {\r\n        this.handleExchangeClick();\r\n      }\r\n    }\r\n  };\r\n  render() {\r\n    let {\r\n      productCard = {},\r\n      list,\r\n      tstaffList = [],\r\n      selectedYear,\r\n      yearList,\r\n      isOpenTreatmentDone,\r\n      headerDetails,\r\n      tsStaff,\r\n      isOpenReversal,\r\n      treatmentIds,\r\n      activeMenu,\r\n      isOpenExchangeService,\r\n      menuOption,\r\n      menuId,\r\n      rangeOption,\r\n      rangeId,\r\n      isHandleExchangeConfirmation,\r\n      ExchangeItem,\r\n      SelectedExchangeItem,\r\n      cust_data,\r\n      mainMeta,\r\n      isLoginConfirmation,\r\n    } = this.state;\r\n    let localtStaffList = [...tstaffList];\r\n    let { basicApptDetail, t, tokenDetails } = this.props;\r\n    let { dataList = [], meta = {} } = productCard;\r\n    let { pagination } = meta;\r\n    return (\r\n      <div className=\"treatmentDone-menu\">\r\n        <div className=\"row\">\r\n          <div className=\"col-10\">\r\n            <div className=\"beautesoft-navlink customer-detail mt-3\">\r\n              <div className=\"filled-tabs\">\r\n                <div className=\"tabs-block\">\r\n                  <Nav tabs>\r\n                    <NavItem>\r\n                      <NavLink\r\n                        className={classnames({\r\n                          active: this.state.activeMenu === \"treatmentdone\",\r\n                        })}\r\n                        onClick={() => {\r\n                          this.toggle(\"treatmentdone\");\r\n                        }}\r\n                      >\r\n                        {t(\"Treatment Done\")}\r\n                      </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                      <NavLink\r\n                        className={classnames({\r\n                          active: this.state.activeMenu === \"treatmenthistory\",\r\n                        })}\r\n                        onClick={() => {\r\n                          this.toggle(\"treatmenthistory\");\r\n                        }}\r\n                      >\r\n                        {t(\"Treatment History\")}\r\n                      </NavLink>\r\n                    </NavItem>\r\n                  </Nav>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-2\">\r\n            <NormalButton\r\n              buttonClass={\"mx-2\"}\r\n              mainbg={true}\r\n              className=\"fs-15 clear-line\"\r\n              label=\"Back\"\r\n              outline={false}\r\n              onClick={() => history.push(`/admin/cart`)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"treatment-section ml-1 p-2 pr-0\">\r\n          <TabContent activeTab={this.state.activeMenu}>\r\n            <TabPane tabId=\"treatmentdone\">\r\n              {activeMenu === \"treatmentdone\" ? (\r\n                <div className=\"row treatment-done-new p-3\">\r\n                  <div className=\"col-10 header\">\r\n                    <p className=\"fs-18 font-700 mb-3 title\">\r\n                      {t(\"Available Treatments\")}\r\n                    </p>\r\n                    <div className=\"d-flex select-year\">\r\n                      <div className=\"pl-0 mb-2 name fs-16 py-2\">\r\n                        {t(\"Select Year\")}\r\n                      </div>\r\n                      <div className=\"input-group\">\r\n                        <NormalSelect\r\n                          // placeholder=\"Enter here\"\r\n                          options={yearList}\r\n                          value={selectedYear}\r\n                          name=\"selectedYear\"\r\n                          onChange={this.handleYearChange}\r\n                          className=\"selected-year mb-2 py-0 col-12\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"\">\r\n                        <div className=\"d-flex justify-content-start align-self-center\">\r\n                          <div className=\"col-md-12\">\r\n                            <p>\r\n                              {t(\"Customer Name\")} : {cust_data.cust_name}\r\n                            </p>\r\n                            <p>\r\n                              {t(\"Reference\")} : {cust_data.cust_refer}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className={`col-12 cart-item`}>\r\n                    <div className={`item-list`}>\r\n                      <div className=\"table\">\r\n                        <TableWrapper\r\n                          headerDetails={headerDetails}\r\n                          queryHandler={this.handlemainPagination}\r\n                          pageMeta={mainMeta}\r\n                          // isEmpty={tstaffList.length === 0 ? true:false}\r\n                        >\r\n                          {tstaffList.length > 0\r\n                            ? tstaffList.map((item, index) => {\r\n                                return (\r\n                                  <tr key={index}>\r\n                                    <td>\r\n                                      <div\r\n                                        className={`text-left ${\r\n                                          !item.iscurrentloggedinsalon\r\n                                            ? \"text-danger\"\r\n                                            : \"\"\r\n                                        }`}\r\n                                      >\r\n                                        {item.site_code}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td className=\"position-relative status-type\">\r\n                                      <div className={`text-right`}>\r\n                                        {item.treatment_date}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-left`}>\r\n                                        {item.course}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-left`}>\r\n                                        {item.transacno_ref}\r\n                                      </div>\r\n                                    </td>\r\n\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.unit_amount}\r\n                                      </div>\r\n                                    </td>\r\n\r\n                                    <td>\r\n                                      <div className={`text-left`}>\r\n                                        {item.treatment_code}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.td}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.rev}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.open}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <div className={`text-right`}>\r\n                                        {item.ar}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td>\r\n                                      <input\r\n                                        type=\"number\"\r\n                                        style={{\r\n                                          width: \"50px\",\r\n                                          // textAlign: \"right\",\r\n                                        }}\r\n                                        value={item.session}\r\n                                        onChange={e =>\r\n                                          this.changeIndexSession(\r\n                                            index,\r\n                                            e.target.value,\r\n                                            item\r\n                                          )\r\n                                        }\r\n                                        className={`text-right`}\r\n                                        min={`0`}\r\n                                        max={item.open}\r\n                                        disabled={\r\n                                          item.session_flag &&\r\n                                          item.session !== Number(0)\r\n                                            ? true\r\n                                            : false\r\n                                        }\r\n                                      />\r\n                                    </td>\r\n                                    <td style={{ width: \"50px\" }}>\r\n                                      <button\r\n                                        className=\"btnRedeem\"\r\n                                        onClick={() =>\r\n                                          this.handleAddstaff(item)\r\n                                        }\r\n                                      >\r\n                                        {t(\"Select\")}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td style={{ width: \"50px\" }}>\r\n                                      {item.iscurrentloggedinsalon ||\r\n                                      (item.is_reversal && item.is_allow) ? (\r\n                                        <button\r\n                                          className=\"btnReversal\"\r\n                                          // onClick={() =>\r\n                                          //   this.handleReversalTreatment(item)\r\n                                          // }\r\n                                          onClick={() =>\r\n                                            this.handleLoginConfirmationDialog(\r\n                                              item,\r\n                                              \"reversal\"\r\n                                            )\r\n                                          }\r\n                                        >\r\n                                          {t(\"Select\")}\r\n                                        </button>\r\n                                      ) : null}\r\n                                    </td>\r\n                                    <td style={{ width: \"50px\" }}>\r\n                                      {item.exchange_flag && (\r\n                                        <button\r\n                                          className=\"btnExchange\"\r\n                                          label=\"Exchange\"\r\n                                          onClick={() =>\r\n                                            this.handleLoginConfirmationDialog(\r\n                                              item,\r\n                                              \"exchange\"\r\n                                            )\r\n                                          }\r\n                                        >\r\n                                          {t(\"Select\")}\r\n                                        </button>\r\n                                      )}\r\n                                    </td>\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            : null}\r\n                        </TableWrapper>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-12 pt-4 action-bar\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-7 d-flex\">\r\n                        {/* <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-line\"\r\n                                label=\"Clear Line\"\r\n                                outline={false}\r\n                                onClick={this.handleClearLine}\r\n                            />\r\n                            <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                mainbg={true}\r\n                                className=\"fs-15 clear-all\"\r\n                                label=\"Clear All\"\r\n                                outline={false}\r\n                                onClick={this.handleClearAll}\r\n                            /> */}\r\n                      </div>\r\n                      <div className=\"col-5\">\r\n                        <div className=\"row\">\r\n                          <div className=\"col-6 text-right\"></div>\r\n                          <div className=\"col-6 text-right\">\r\n                            <NormalButton\r\n                              buttonClass={\"mx-2\"}\r\n                              mainbg={true}\r\n                              className=\" fs-15 confirm\"\r\n                              label=\"Confirm Treatment Done\"\r\n                              outline={false}\r\n                              onClick={() => this.handleCartCreated()}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <NormalModal\r\n                    className={\"transaction-done-exchange\"}\r\n                    style={{ minWidth: \"70%\" }}\r\n                    modal={isOpenExchangeService}\r\n                    handleModal={this.handleDialog}\r\n                  >\r\n                    <img\r\n                      onClick={this.handleDialog}\r\n                      className=\"close cursor-pointer\"\r\n                      src={closeIcon}\r\n                      alt=\"\"\r\n                    />\r\n                    <div className=\"d-flex mb-2\">\r\n                      <div className=\"col-md-3 input-group pl-2 range-filter\">\r\n                        <NormalSelect\r\n                          // placeholder=\"Enter here\"\r\n                          options={menuOption}\r\n                          value={menuId}\r\n                          name={\"menuId\"}\r\n                          onChange={this.handleMenuChange}\r\n                          className=\"py-0\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"col-md-4 input-group range-filter\">\r\n                        <NormalSelect\r\n                          // placeholder=\"Enter here\"\r\n                          options={rangeOption}\r\n                          value={rangeId}\r\n                          name={\"rangeId\"}\r\n                          onChange={this.handleRangeChange}\r\n                          className=\"py-0\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"\">\r\n                      {console.log(list, \"card list\")}\r\n                      <div className=\"services m-0 row\">\r\n                        {list.length > 0\r\n                          ? list.map((data, index) => {\r\n                              return (\r\n                                <div\r\n                                  className=\"col-md-2 col-12 fs-12 p-2 cursor-pointer\"\r\n                                  key={data.id}\r\n                                  onClick={() =>\r\n                                    this.handleSelectedService(data)\r\n                                  }\r\n                                >\r\n                                  <div className=\"service-tab p-0\">\r\n                                    <div className=\"service-ttl px-2 font-700 fs-11\">\r\n                                      {data.item_desc}\r\n                                    </div>\r\n                                    <div className=\"price px-2 py-1\">\r\n                                      <div className=\"non-retail\">\r\n                                        <span className=\"text-orenge font-700\">\r\n                                          $\r\n                                        </span>\r\n                                        <span className=\"text-orenge font-700\">\r\n                                          {data.item_price\r\n                                            ? Number(data.item_price).toFixed(2)\r\n                                            : \"\"}\r\n                                        </span>\r\n\r\n                                        <span className=\"foc-icon\">\r\n                                          <svg\r\n                                            width=\"32\"\r\n                                            height=\"32\"\r\n                                            className=\"cursor-pointer\"\r\n                                            viewBox=\"0 0 32 32\"\r\n                                            fill=\"none\"\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                          >\r\n                                            <circle\r\n                                              cx=\"16\"\r\n                                              cy=\"16\"\r\n                                              r=\"15.5\"\r\n                                              fill=\"rgba(60, 64, 135, 0.31)\"\r\n                                              stroke=\"#3C4087\"\r\n                                            />\r\n                                            <path\r\n                                              d=\"M3.996 11.456H9.42V12.476H5.22V15.152H9.18V16.172H5.22V20H3.996V11.456ZM14.3243 20.096C13.5163 20.096 12.8123 19.92 12.2123 19.568C11.6203 19.208 11.1603 18.7 10.8323 18.044C10.5123 17.388 10.3523 16.616 10.3523 15.728C10.3523 14.832 10.5123 14.056 10.8323 13.4C11.1523 12.744 11.6123 12.24 12.2123 11.888C12.8123 11.536 13.5163 11.36 14.3243 11.36C15.1403 11.36 15.8443 11.536 16.4362 11.888C17.0363 12.24 17.4963 12.744 17.8163 13.4C18.1363 14.056 18.2963 14.828 18.2963 15.716C18.2963 16.612 18.1363 17.388 17.8163 18.044C17.4963 18.7 17.0363 19.208 16.4362 19.568C15.8363 19.92 15.1323 20.096 14.3243 20.096ZM14.3243 19.088C15.1803 19.088 15.8443 18.796 16.3163 18.212C16.7963 17.628 17.0363 16.796 17.0363 15.716C17.0363 14.644 16.7963 13.82 16.3163 13.244C15.8443 12.66 15.1803 12.368 14.3243 12.368C13.4683 12.368 12.8043 12.66 12.3323 13.244C11.8603 13.82 11.6243 14.644 11.6243 15.716C11.6243 16.796 11.8603 17.628 12.3323 18.212C12.8123 18.796 13.4763 19.088 14.3243 19.088ZM23.7598 20.096C22.9358 20.096 22.2158 19.92 21.5998 19.568C20.9918 19.208 20.5238 18.7 20.1958 18.044C19.8678 17.388 19.7038 16.612 19.7038 15.716C19.7038 14.828 19.8678 14.056 20.1958 13.4C20.5238 12.744 20.9918 12.24 21.5998 11.888C22.2158 11.536 22.9358 11.36 23.7598 11.36C24.3438 11.36 24.8838 11.452 25.3798 11.636C25.8838 11.812 26.3078 12.072 26.6518 12.416L26.2198 13.328C25.8198 13 25.4238 12.764 25.0318 12.62C24.6478 12.468 24.2278 12.392 23.7718 12.392C22.8838 12.392 22.1958 12.68 21.7078 13.256C21.2278 13.832 20.9878 14.652 20.9878 15.716C20.9878 16.788 21.2278 17.616 21.7078 18.2C22.1958 18.776 22.8838 19.064 23.7718 19.064C24.2278 19.064 24.6478 18.992 25.0318 18.848C25.4238 18.696 25.8198 18.456 26.2198 18.128L26.6518 19.04C26.3078 19.384 25.8838 19.648 25.3798 19.832C24.8838 20.008 24.3438 20.096 23.7598 20.096Z\"\r\n                                              fill=\"#3C4087\"\r\n                                            />\r\n                                          </svg>\r\n                                        </span>\r\n                                      </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"images\">\r\n                                      <img src={data.Stock_PIC} alt=\"\" />\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              );\r\n                            })\r\n                          : \"\"}\r\n                        {pagination && (\r\n                          <Pagination\r\n                            handlePagination={this.handlePagination}\r\n                            pageMeta={pagination}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </NormalModal>\r\n                  <NormalModal\r\n                    className={\"transaction-done-reversal\"}\r\n                    style={{ minWidth: \"75%\" }}\r\n                    modal={isOpenReversal}\r\n                    handleModal={this.handleDialog}\r\n                  >\r\n                    <img\r\n                      onClick={this.handleDialog}\r\n                      className=\"close cursor-pointer\"\r\n                      src={closeIcon}\r\n                      alt=\"\"\r\n                    />\r\n                    <Reversal\r\n                      id={this.props.match.params.id}\r\n                      treatmentId={tsStaff.id}\r\n                      reversalId={treatmentIds}\r\n                      cartId={this.props.id}\r\n                      handleModal={this.handleDialog}\r\n                    ></Reversal>\r\n                  </NormalModal>\r\n                  <NormalModal\r\n                    className={\"transaction-done-modal\"}\r\n                    style={{ minWidth: \"60%\" }}\r\n                    modal={isOpenTreatmentDone}\r\n                    handleModal={this.handleDialog}\r\n                  >\r\n                    <img\r\n                      onClick={this.handleDialog}\r\n                      className=\"close cursor-pointer\"\r\n                      src={closeIcon}\r\n                      alt=\"\"\r\n                    />\r\n                    <SelectStaff\r\n                      id={this.state.selectedItemTreatmentIds}\r\n                      //id={tsStaff.id}\r\n                      session={this.state.selectedSession}\r\n                      cartId={basicApptDetail.cartId}\r\n                      handleModal={this.handleDialog}\r\n                    ></SelectStaff>\r\n                  </NormalModal>\r\n                  <NormalModal\r\n                    className={\"transaction-done-reversal\"}\r\n                    style={{ minWidth: \"432px\" }}\r\n                    modal={isHandleExchangeConfirmation}\r\n                    handleModal={this.handleDialogExchangeConfirm}\r\n                  >\r\n                    <img\r\n                      onClick={this.handleDialogExchangeConfirm}\r\n                      className=\"close cursor-pointer\"\r\n                      src={closeIcon}\r\n                      alt=\"\"\r\n                    />\r\n                    <div className=\"row\">\r\n                      <div className=\"d-flex flex-wrap\">\r\n                        <div className=\"col-12\">\r\n                          <h4>{t(\"Confirmation\")}</h4>\r\n                        </div>\r\n                        <div className=\"col-12 mb-2\">\r\n                          <p>\r\n                            {t(\"Service Price\")} : $\r\n                            {SelectedExchangeItem.item_price}\r\n                            &nbsp;{t(\"larger than\")}\r\n                          </p>\r\n                          <p>\r\n                            {t(\"Previous Service Price\")} : $\r\n                            {ExchangeItem.unit_amount}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"col-12 mb-2\">\r\n                          <p>{t(\"Are you sure want to continue\")} ?</p>\r\n                        </div>\r\n                        <div className=\"row p-3\">\r\n                          <div className=\"col-6\">\r\n                            <NormalButton\r\n                              label=\"Confirm\"\r\n                              mainbg={true}\r\n                              name=\"Exconfirm\"\r\n                              className={`w-100 col-12`}\r\n                              onClick={this.handleExchangePostAction}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-6\">\r\n                            <NormalButton\r\n                              label=\"Cancel\"\r\n                              resetbg={true}\r\n                              name=\"ExCancel\"\r\n                              className={`w-100 col-12`}\r\n                              onClick={this.handleDialogExchangeConfirm}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </NormalModal>\r\n                </div>\r\n              ) : (\r\n                <tr>\r\n                <td colSpan=\"12\">\r\n                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                    {t(\"No Data Available\")}\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n              )}\r\n            </TabPane>\r\n            <TabPane tabId=\"treatmenthistory\">\r\n              {activeMenu === \"treatmenthistory\" ? (\r\n                <div className=\"treatment-done-new p-3\">\r\n                  <TreatmentHistoryCart\r\n                    customerNumber={this.props.match.params.id}\r\n                  />\r\n                </div>\r\n              ) : null}\r\n            </TabPane>\r\n          </TabContent>\r\n          <NormalModal\r\n            className={\"d-flex justify-content-center\"}\r\n            style={{ minWidth: \"20%\" }}\r\n            modal={isLoginConfirmation}\r\n            handleModal={() => {}}\r\n          >\r\n            <img\r\n              onClick={this.handleLoginConfirmationDialog}\r\n              className=\"close cursor-pointer\"\r\n              src={closeIcon}\r\n              alt=\"\"\r\n            />\r\n            <CredentialConfirmation\r\n              handleLoginSubmit={(user, pass) =>\r\n                this.handleauthentication(user, pass)\r\n              }\r\n            />\r\n          </NormalModal>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n  tokenDetails: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const TreatmentDone = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(TreatmentDoneClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}