{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalButton,NormalSelect}from\"component/common\";import CanvasDraw from\"react-canvas-draw\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import Webcam from\"react-webcam\";import{withTranslation}from\"react-i18next\";import{addDiagnosisHistory,updateDiagnosisHistory}from\"redux/actions/customerPlus\";export var ComparePhotoPopupClass=/*#__PURE__*/function(_Component){_inherits(ComparePhotoPopupClass,_Component);var _super=_createSuper(ComparePhotoPopupClass);function ComparePhotoPopupClass(){var _this;_classCallCheck(this,ComparePhotoPopupClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={remarks:\"\",isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.handleSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var remarks,_this$props,id,cust_no,onDone,dataList,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:remarks=_this.state.remarks;_this$props=_this.props,id=_this$props.id,cust_no=_this$props.cust_no,onDone=_this$props.onDone,dataList=_this$props.dataList;data={compare_remark:remarks,compare_datetime:new Date().toISOString(),cust_no:cust_no,diagnosis:dataList.map(function(e){return e.sys_code;})};if(!(id==null)){_context.next=8;break;}_context.next=6;return _this.props.addDiagnosisHistory(data);case 6:_context.next=10;break;case 8:_context.next=10;return _this.props.updateDiagnosisHistory(id,data);case 10:onDone();case 11:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(ComparePhotoPopupClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.remarks)this.setState({remarks:this.props.remarks});}},{key:\"render\",value:function render(){var _this2=this;var remarks=this.state.remarks;var _this$props2=this.props,dataList=_this$props2.dataList,t=_this$props2.t;console.log(\"rendered\");return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mb-4 mt-2 product-details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"Compare Photo\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 \",label:\"Done\",onClick:function onClick(){return _this2.handleSubmit();}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-5 pr-5 mt-4\"},dataList?dataList.map(function(data){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(CanvasDraw,{imgSrc:data.pic_path,ref:function ref(_ref2){return _this2.canvasDraw=_ref2;},saveData:data.pic_data1&&JSON.stringify(data.pic_data1),disabled:true,hideGrid:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Remarks\")),/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter remarks\",value:data.remarks,name:\"remarks\",disabled:true})));}):null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Remarks\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter remarks\",value:remarks,name:\"remarks\",onChange:this.handleChange}))))));}}]);return ComparePhotoPopupClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({addDiagnosisHistory:addDiagnosisHistory,updateDiagnosisHistory:updateDiagnosisHistory},dispatch);};export var ComparePhotoPopup=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ComparePhotoPopupClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/Details/ComparePhotoPopup.js"],"names":["React","Component","NormalInput","NormalButton","NormalSelect","CanvasDraw","connect","bindActionCreators","Webcam","withTranslation","addDiagnosisHistory","updateDiagnosisHistory","ComparePhotoPopupClass","state","remarks","isMounted","updateState","data","setState","handleChange","e","target","name","value","handleSubmit","props","id","cust_no","onDone","dataList","compare_remark","compare_datetime","Date","toISOString","diagnosis","map","sys_code","t","console","log","pic_path","ref","canvasDraw","pic_data1","JSON","stringify","mapStateToProps","mapDispatchToProps","dispatch","ComparePhotoPopup"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NormalInput, NormalButton, NormalSelect } from \"component/common\";\nimport CanvasDraw from \"react-canvas-draw\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Webcam from \"react-webcam\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  addDiagnosisHistory,\n  updateDiagnosisHistory,\n} from \"redux/actions/customerPlus\";\n\nexport class ComparePhotoPopupClass extends Component {\n  state = {\n    remarks: \"\",\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount() {\n    if (this.props.remarks) this.setState({ remarks: this.props.remarks });\n  }\n  handleChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  handleSubmit = async () => {\n    let { remarks } = this.state;\n    let { id, cust_no, onDone, dataList } = this.props;\n    let data = {\n      compare_remark: remarks,\n      compare_datetime: new Date().toISOString(),\n      cust_no,\n      diagnosis: dataList.map((e) => e.sys_code),\n    };\n    if (id == null) {\n      await this.props.addDiagnosisHistory(data);\n    } else {\n      await this.props.updateDiagnosisHistory(id, data);\n    }\n    onDone();\n  };\n\n  render() {\n    let { remarks } = this.state;\n    let { dataList, t } = this.props;\n    console.log(\"rendered\");\n    return (\n      <>\n        <div className=\"container-fluid mb-4 mt-2 product-details\">\n          <div className=\"row\">\n            <div className=\"col-6\">\n              <h4>{t(\"Compare Photo\")}</h4>\n            </div>\n            <div className=\"col-6\">\n              <NormalButton\n                mainbg={true}\n                className=\"col-12 fs-15 \"\n                label=\"Done\"\n                onClick={() => this.handleSubmit()}\n              />\n            </div>\n          </div>\n          <div className=\"row pl-5 pr-5 mt-4\">\n            {dataList\n              ? dataList.map((data) => (\n                  <div className=\"col-md-6 mb-4\">\n                    <div className=\"col-12 mb-4\">\n                      <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                        <CanvasDraw\n                          imgSrc={data.pic_path}\n                          ref={(ref) => (this.canvasDraw = ref)}\n                          saveData={\n                            data.pic_data1 && JSON.stringify(data.pic_data1)\n                          }\n                          disabled\n                          hideGrid\n                        />\n                      </div>\n                    </div>\n                    <div className=\"col-12\">\n                      <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                        {t(\"Remarks\")}\n                      </label>\n                      <NormalInput\n                        placeholder=\"Enter remarks\"\n                        value={data.remarks}\n                        name=\"remarks\"\n                        disabled\n                      />\n                    </div>\n                  </div>\n                ))\n              : null}\n            <div className=\"col-12 mb-4\">\n              <label className=\"text-left text-black common-label-text fs-17 pb-2\">\n                {t(\"Remarks\")}\n              </label>\n              <div className=\"input-group\">\n                <NormalInput\n                  placeholder=\"Enter remarks\"\n                  value={remarks}\n                  name=\"remarks\"\n                  onChange={this.handleChange}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      addDiagnosisHistory,\n      updateDiagnosisHistory,\n    },\n    dispatch\n  );\n};\n\nexport const ComparePhotoPopup = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(ComparePhotoPopupClass)\n);\n"]},"metadata":{},"sourceType":"module"}