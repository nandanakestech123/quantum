{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Toast}from\"service/toast\";import\"./style.scss\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi}from\"redux/actions/common\";import{NormalButton,NormalDate,TableWrapper,InputSearch}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import{withTranslation}from\"react-i18next\";import{NormalInput,NormalDateTime}from\"component/common\";import{Link}from\"react-router-dom\";import _ from\"lodash\";import updateBtn from\"../../../../assets/images/edit1.png\";import deleteBtn from\"../../../../assets/images/delete1.png\";import closeBtn from\"../../../../assets/images/close.png\";import saveBtn from\"../../../../assets/images/save.png\";export var DetailsClass=/*#__PURE__*/function(_React$Component){_inherits(DetailsClass,_React$Component);var _super=_createSuper(DetailsClass);function DetailsClass(){var _this;_classCallCheck(this,DetailsClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Item Code\"},{label:\"Item Description\"},{label:\"Unit Price\"},{label:\"Quantity\"},{label:\"\"}],headerSelectedDetails:[{label:\"Item Code\"},{label:\"Item Description\"},{label:\"Remarks\"},{label:\"Unit Price\"},{label:\"Quantity\"},{label:\"\"},{label:\"\"}],formFields:{po_shipcost:\"\",po_discount:\"\",po_taxes:\"\",po_total:\"\"},detailsList:[],storedItemList:[],pageMeta:{},search:\"\",active:false,currentIndex:-1,page:1,// limit: 10,\nlimit:4,isOpenvoidCheckout:false,isLoading:true,// is_loading: false,\nisMounted:true// salesCollectionHeader: [\n//   { label: \"Sales Collection\" },\n//   { label: \"Before Tax\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// nonSalesCollectionHeader: [\n//   { label: \"Non Sales Collection\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\n// salesTransactionHeader: [\n//   { label: \"Sales Transaction\" },\n//   { label: \"Amount\" },\n//   { label: \"Paid\" },\n//   { label: \"Outstanding\" },\n// ],\n// ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\n// TreatmentDoneHeader: [\n//   { label: \"Customer\" },\n//   { label: \"Customer Reference\" },\n//   { label: \"Treatment Done\" },\n//   { label: \"Description\" },\n//   { label: \"Staff\" },\n//   { label: \"Amount\" },\n// DayDate: new Date(),\n// runDayEnd: false,\n// reportDate: \"\",\n// sales_collec: null,\n// sales_trasac: null,\n// ar_trasac: null,\n// treatment_done: null,\n// dept_sales: null,\n};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.autofillDetailsFromQuo=function(){var formFields=Object.assign({},_this.state.formFields);var storedItemList=_this.state.storedItemList;_this.props.getCommonApi(\"quotationdetail/?searchqdetailid=\".concat(_this.props.quoId)).then(function(res){console.log(\"res in autofillDetailsFromQuo\",res);if(res.status==200){formFields[\"po_shipcost\"]=res.data[0].q_shipcost;formFields[\"po_discount\"]=res.data[0].q_discount;formFields[\"po_taxes\"]=res.data[0].q_taxes;formFields[\"po_total\"]=res.data[0].q_total;// this.state.formFieldsDetailsStored.push(\"q_shipcost\":res.data[0].q_shipcost)\n_this.updateState({formFields:formFields});_this.props.storeItemDetails(storedItemList,formFields);// this.setState(this.state.formFields)\n}console.log(\"formFields in autofillDetailsFromQuo\",_this.state.formFields);});};_this.autofillDetails=function(){var formFields=Object.assign({},_this.state.formFields);// formFields[\"q_shipcost\"] = 12\n// this.updateState({\n//   formFields,\n// });\n_this.props.getCommonApi(\"podetail/?searchpodetailid=\".concat(_this.props.poId)).then(function(res){console.log(\"res in getAutofillItemDetails\",res);if(res.status==200){formFields[\"po_shipcost\"]=res.data[0].po_shipcost;formFields[\"po_discount\"]=res.data[0].po_discount;formFields[\"po_taxes\"]=res.data[0].po_taxes;formFields[\"po_total\"]=res.data[0].po_total;// this.state.formFieldsDetailsStored.push(\"q_shipcost\":res.data[0].q_shipcost)\n_this.updateState({formFields:formFields});console.log(\"this.state.formFields in componentWillMount\",_this.state.formFields);}});};_this.getDetails=function(){_this.updateState({isLoading:true});var _this$state=_this.state,detailsList=_this$state.detailsList,pageMeta=_this$state.pageMeta,page=_this$state.page,limit=_this$state.limit,search=_this$state.search;// let { item_desc } = formField;\n_this.props.getCommonApi(\"qpoitem/?searchitemdesc=\".concat(search,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(res,\"dsfdfaafg\");_context.next=3;return _this.setState({detailsList:[]});case 3:detailsList=res.data.dataList;// pageMeta = res.data.meta.pagination;\npageMeta=res.data.pagination;// pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\n// this.setState({ detailsList, pageMeta });\n// this.setState({ detailsList });\nconsole.log('res.data',res.data);console.log('detailsList',detailsList);console.log('pageMeta',pageMeta);_this.updateState({detailsList:detailsList,pageMeta:pageMeta,isLoading:false});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pageNo){var page;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_this.state.page;page=pageNo.page;_context2.next=4;return _this.setState({page:page});case 4:_this.getDetails();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handlesearch=function(event){// event.persist();\nconsole.log(event.target.value);var search=_this.state.search;search=event.target.value;_this.setState({search:search});if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.getDetails({});case 1:case\"end\":return _context3.stop();}}},_callee3);})),500);}_this.debouncedFn();};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.handleChangeDetails=function(_ref4){var _ref4$target=_ref4.target,value=_ref4$target.value,name=_ref4$target.name;var storedItemList=_this.state.storedItemList;var formFields=Object.assign({},_this.state.formFields);formFields[name]=value;_this.updateState({formFields:formFields});_this.props.storeItemDetails(storedItemList,formFields);};_this.handleChange=function(_ref5){var _ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;var detailsList=_this.state.detailsList;console.log(\"value\",value);console.log(\"name\",name);for(var list in detailsList){if(detailsList[list].item_code==name){detailsList[list].item_quantity=value;}console.log(\"detailsList[list].item_code\",detailsList[list].item_code);}_this.setState({detailsList:detailsList});console.log(\"detailsList in handleChange\",detailsList);// current_item_quantity = value\n// this.setState({ current_item_quantity })\n};_this.handleSelect=function(item_code,item_desc,item_price){var _this$state2=_this.state,storedItemList=_this$state2.storedItemList,detailsList=_this$state2.detailsList,formFields=_this$state2.formFields;// current_item_code = item_code\n// this.setState({ current_item_code })\n// console.log(\"current_item_code\",current_item_code)\nconsole.log(\"item_code\",item_code);console.log(\"item_desc\",item_desc);console.log(\"item_price\",item_price);for(var list in detailsList){if(detailsList[list].item_code==item_code){var item_quantiy=detailsList[list].item_quantity;storedItemList.push({\"item_code\":item_code,\"item_desc\":item_desc,\"item_remarks\":\"\",\"item_price\":item_price,\"item_quantity\":item_quantiy,\"editing\":false});// storedItemList = [\n//   {\"item_desc\":item_desc, \"item_desc\":item_desc, \"item_remarks\":\"\", \"item_price\":item_price, \"item_quantity\":item_quantiy},\n//   {\"item_desc\":item_desc, \"item_desc\":item_desc, \"item_remarks\":\"\", \"item_price\":item_price, \"item_quantity\":\"\"}\n// ]\n}}console.log(\"storedItemList\",storedItemList);_this.setState({storedItemList:storedItemList});_this.props.storeItemDetails(storedItemList,formFields);// console.log(\"current_item_quantity\",current_item_quantity)\n// for (let list in detailsList){\n//   if (detailsList[list].item_code = item_code){\n//     detailsList[list].item_quantity = value\n//   }\n// }\n// await this.setState({\n//   detailsList,\n// });\n// console.log(\"detailsList in handleChange\", detailsList)\n// console.log(\"this.state.formFields.item_quantity\",item_quantity)\n};_this.handleRemoveStoredItem=function(item_code){var _this$state3=_this.state,storedItemList=_this$state3.storedItemList,formFields=_this$state3.formFields;for(var i=0;i<storedItemList.length;i++){if(storedItemList[i].item_code==item_code){storedItemList.splice(i,1);}}console.log(\"storedItemList after remove\",storedItemList);_this.setState({storedItemList:storedItemList});_this.props.storeItemDetails(storedItemList,formFields);};_this.handleEdit=function(item_code){var storedItemList=_this.state.storedItemList;for(var list in storedItemList){if(storedItemList[list].item_code==item_code){storedItemList[list].editing=true;}}console.log(\"storedItemList in handleedit\",storedItemList);_this.setState({storedItemList:storedItemList});};_this.handleSave=function(item_code){var _this$state4=_this.state,storedItemList=_this$state4.storedItemList,formFields=_this$state4.formFields;for(var list in storedItemList){if(storedItemList[list].item_code==item_code){storedItemList[list].editing=false;}}console.log(\"storedItemList in handleedit\",storedItemList);_this.setState({storedItemList:storedItemList});_this.props.storeItemDetails(storedItemList,formFields);};_this.handleEditChangeRemarks=function(_ref6){var _ref6$target=_ref6.target,value=_ref6$target.value,name=_ref6$target.name;var storedItemList=_this.state.storedItemList;for(var list in storedItemList){if(storedItemList[list].item_code==name){storedItemList[list].item_remarks=value;}// console.log(\"storedItemList[list].item_code\",storedItemList[list].item_code)\n}_this.setState({storedItemList:storedItemList});console.log(\"storedItemList in handleEditChange\",storedItemList);};_this.handleEditChangePrice=function(_ref7){var _ref7$target=_ref7.target,value=_ref7$target.value,name=_ref7$target.name;var storedItemList=_this.state.storedItemList;for(var list in storedItemList){if(storedItemList[list].item_code==name){storedItemList[list].item_price=value;}// console.log(\"storedItemList[list].item_code\",storedItemList[list].item_code)\n}_this.setState({storedItemList:storedItemList});console.log(\"storedItemList in handleEditChange\",storedItemList);};_this.handleEditChangeQuantity=function(_ref8){var _ref8$target=_ref8.target,value=_ref8$target.value,name=_ref8$target.name;var storedItemList=_this.state.storedItemList;for(var list in storedItemList){if(storedItemList[list].item_code==name){storedItemList[list].item_quantity=value;}// console.log(\"storedItemList[list].item_code\",storedItemList[list].item_code)\n}_this.setState({storedItemList:storedItemList});console.log(\"storedItemList in handleEditChange\",storedItemList);};_this.autofillSaved=function(){var _this$state5=_this.state,storedItemList=_this$state5.storedItemList,formFields=_this$state5.formFields;storedItemList=_this.props.storedItemListStored;formFields.po_shipcost=_this.props.formFieldsDetailsStored.po_shipcost;formFields.po_discount=_this.props.formFieldsDetailsStored.po_discount;formFields.po_taxes=_this.props.formFieldsDetailsStored.po_taxes;formFields.po_total=_this.props.formFieldsDetailsStored.po_total;_this.setState({storedItemList:storedItemList,formFields:formFields});console.log(\"storedItemList in autofillSaved\",storedItemList);console.log(\"formFields in autofillSaved\",formFields);};return _this;}_createClass(DetailsClass,[{key:\"componentWillMount\",value:function componentWillMount(){this.autofillSaved();}},{key:\"componentDidMount\",value:function componentDidMount(){// let From = new Date();\n// let { formField } = this.state;\n// let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\n// formField[\"fromDate\"] = firstdayMonth;\n// this.setState({\n//   formField,\n// });\nthis.getDetails();if(this.props.poId){this.autofillDetails();}if(this.props.quoId){this.autofillDetailsFromQuo();console.log(\"this.props.quoId\",this.props.quoId);}console.log(\"this.props in comdidmount\",this.props);// this.queryHandler({});\nconsole.log(\"this.props.storedItemListStored loaded\",this.props.storedItemListStored);console.log(\"this.props.formFieldsDetailsStored loaded\",this.props.formFieldsDetailsStored);}},{key:\"render\",value:function render(){var _this2=this;var _this$state6=this.state,headerDetails=_this$state6.headerDetails,headerSelectedDetails=_this$state6.headerSelectedDetails,pageMeta=_this$state6.pageMeta,detailsList=_this$state6.detailsList,storedItemList=_this$state6.storedItemList,isLoading=_this$state6.isLoading,formFields=_this$state6.formFields;var po_shipcost=formFields.po_shipcost,po_discount=formFields.po_discount,po_taxes=formFields.po_taxes,po_total=formFields.po_total;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-8\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100\"},/*#__PURE__*/React.createElement(InputSearch,{placeholder:\"Search Item\",onChange:this.handlesearch})))),/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\")))))):detailsList?detailsList.map(function(item,index){var item_code=item.item_code,item_desc=item.item_desc,item_price=item.item_price,item_quantity=item.item_quantity;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_price)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(NormalInput,{value:item_quantity,disabled:_this2.props.disableEdit,name:item_code,onChange:_this2.handleChange})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",disabled:_this2.props.disableEdit,mainbg:true,className:\"warning\",label:\"Select\",onClick:function onClick(){return _this2.handleSelect(item_code,item_desc,item_price);}}))));}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"}),/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerSelectedDetails// queryHandler={this.handlePagination}\n// pageMeta={pageMeta}\n},storedItemList?storedItemList.map(function(item,index){var item_code=item.item_code,item_desc=item.item_desc,item_remarks=item.item_remarks,item_price=item.item_price,item_quantity=item.item_quantity,editing=item.editing;return editing==false?/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_remarks)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_price)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_quantity)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"img\",{src:updateBtn,width:\"35\",height:\"35\",alt:\"\",className:\"action-img bg-transparent\",onClick:_this2.props.disableEdit==false?function(){return _this2.handleEdit(item_code);}:\"\"}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"img\",{src:deleteBtn,width:\"35\",height:\"35\",alt:\"\",className:\"action-img bg-transparent \",onClick:_this2.props.disableEdit==false?function(){return _this2.handleRemoveStoredItem(item_code);}:\"\"})))):/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item_desc)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalInput,{value:item_remarks,disabled:_this2.props.disableEdit,name:item_code,onChange:_this2.handleEditChangeRemarks}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalInput,{value:item_price,disabled:_this2.props.disableEdit,name:item_code,onChange:_this2.handleEditChangePrice}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalInput,{value:item_quantity,disabled:_this2.props.disableEdit,name:item_code,onChange:_this2.handleEditChangeQuantity}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"img\",{src:saveBtn,width:\"35\",height:\"35\",alt:\"\",className:\"action-img bg-transparent \",onClick:_this2.props.disableEdit==false?function(){return _this2.handleSave(item_code);}:\"\"}))));}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\"},t(\"Shipping Cost\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-address w-100\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:this.props.disableEdit,value:po_shipcost,name:\"po_shipcost\",onChange:this.handleChangeDetails}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\"},t(\"Discount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-discount w-100\"},/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n,{disabled:this.props.disableEdit,value:po_discount,name:\"po_discount\",onChange:this.handleChangeDetails}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\"},t(\"Taxes\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-address w-100\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:this.props.disableEdit,value:po_taxes,name:\"po_taxes\",onChange:this.handleChangeDetails}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\"},t(\"Total\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-address w-100\"},/*#__PURE__*/React.createElement(NormalInput,{placeholder:\"Enter here\",disabled:this.props.disableEdit,value:po_total,name:\"po_total\",onChange:this.handleChangeDetails}))),/*#__PURE__*/React.createElement(\"div\",null,this.props.validator.message(t(\"Total\"),po_total,t(\"required\")))))));}}]);return DetailsClass;}(React.Component);// const mapStateToProps = state => ({\n//   projectDetail: state.project.projectDetail,\n// });\nvar mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi// deleteProject,\n// getProject\n},dispatch);};export var Details=withTranslation()(connect(null,mapDispatchToProps)(DetailsClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/PO/AddPO/details.js"],"names":["React","Toast","connect","bindActionCreators","getCommonApi","NormalButton","NormalDate","TableWrapper","InputSearch","dateFormat","withTranslation","NormalInput","NormalDateTime","Link","_","updateBtn","deleteBtn","closeBtn","saveBtn","DetailsClass","state","headerDetails","label","headerSelectedDetails","formFields","po_shipcost","po_discount","po_taxes","po_total","detailsList","storedItemList","pageMeta","search","active","currentIndex","page","limit","isOpenvoidCheckout","isLoading","isMounted","updateState","data","setState","autofillDetailsFromQuo","Object","assign","props","quoId","then","res","console","log","status","q_shipcost","q_discount","q_taxes","q_total","storeItemDetails","autofillDetails","poId","getDetails","dataList","pagination","handlePagination","pageNo","handlesearch","event","target","value","debouncedFn","debounce","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","handleChangeDetails","name","handleChange","list","item_code","item_quantity","handleSelect","item_desc","item_price","item_quantiy","push","handleRemoveStoredItem","i","length","splice","handleEdit","editing","handleSave","handleEditChangeRemarks","item_remarks","handleEditChangePrice","handleEditChangeQuantity","autofillSaved","storedItemListStored","formFieldsDetailsStored","t","map","item","index","disableEdit","validator","message","Component","mapDispatchToProps","dispatch","Details"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi } from \"redux/actions/common\";\r\nimport { NormalButton, NormalDate, TableWrapper, InputSearch } from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NormalInput, NormalDateTime } from \"component/common\";\r\nimport { Link } from \"react-router-dom\"; \r\nimport _ from \"lodash\";\r\nimport updateBtn from  \"../../../../assets/images/edit1.png\"\r\nimport deleteBtn from  \"../../../../assets/images/delete1.png\"\r\nimport closeBtn from \"../../../../assets/images/close.png\"\r\nimport saveBtn from \"../../../../assets/images/save.png\"\r\n\r\nexport class DetailsClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Item Code\" },\r\n      { label: \"Item Description\" },\r\n      { label: \"Unit Price\" },\r\n      { label: \"Quantity\" },\r\n      { label: \"\" },\r\n\r\n    ],\r\n    headerSelectedDetails: [\r\n      { label: \"Item Code\" },\r\n      { label: \"Item Description\" },\r\n      { label: \"Remarks\" },\r\n      { label: \"Unit Price\" },\r\n      { label: \"Quantity\" },\r\n      { label: \"\" },\r\n      { label: \"\" },\r\n\r\n    ],\r\n    formFields: {\r\n      po_shipcost:\"\",\r\n      po_discount:\"\",\r\n      po_taxes:\"\",\r\n      po_total:\"\",\r\n\r\n    },\r\n    \r\n    detailsList: [],\r\n    storedItemList:[],\r\n    pageMeta: { },\r\n\r\n\r\n    search: \"\",\r\n    active: false,\r\n    currentIndex: -1,\r\n    page: 1,\r\n    // limit: 10,\r\n    limit: 4,\r\n    isOpenvoidCheckout: false,\r\n    isLoading: true,\r\n    // is_loading: false,\r\n    isMounted: true,\r\n\r\n    \r\n\r\n    // salesCollectionHeader: [\r\n    //   { label: \"Sales Collection\" },\r\n    //   { label: \"Before Tax\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // nonSalesCollectionHeader: [\r\n    //   { label: \"Non Sales Collection\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\r\n    // salesTransactionHeader: [\r\n    //   { label: \"Sales Transaction\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Paid\" },\r\n    //   { label: \"Outstanding\" },\r\n    // ],\r\n    // ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\r\n    // TreatmentDoneHeader: [\r\n    //   { label: \"Customer\" },\r\n    //   { label: \"Customer Reference\" },\r\n    //   { label: \"Treatment Done\" },\r\n    //   { label: \"Description\" },\r\n    //   { label: \"Staff\" },\r\n    //   { label: \"Amount\" },\r\n    // DayDate: new Date(),\r\n    // runDayEnd: false,\r\n    // reportDate: \"\",\r\n    // sales_collec: null,\r\n    // sales_trasac: null,\r\n    // ar_trasac: null,\r\n    // treatment_done: null,\r\n    // dept_sales: null,\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.autofillSaved();\r\n  };\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount() {\r\n    // let From = new Date();\r\n    // let { formField } = this.state;\r\n    // let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\r\n    // formField[\"fromDate\"] = firstdayMonth;\r\n    // this.setState({\r\n    //   formField,\r\n    // });\r\n\r\n    this.getDetails();\r\n    if(this.props.poId){\r\n      this.autofillDetails()\r\n    }\r\n    if(this.props.quoId){\r\n      this.autofillDetailsFromQuo()\r\n      console.log(\"this.props.quoId\",this.props.quoId)\r\n    } \r\n    console.log(\"this.props in comdidmount\",this.props)\r\n    // this.queryHandler({});\r\n    console.log(\"this.props.storedItemListStored loaded\",this.props.storedItemListStored)\r\n    console.log(\"this.props.formFieldsDetailsStored loaded\",this.props.formFieldsDetailsStored)\r\n  }\r\n\r\n  autofillDetailsFromQuo = () => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n    let { storedItemList } = this.state\r\n    this.props\r\n      .getCommonApi(\r\n        `quotationdetail/?searchqdetailid=${this.props.quoId}`\r\n      )\r\n      .then(res => {\r\n        console.log(\"res in autofillDetailsFromQuo\", res)\r\n\r\n        if(res.status == 200){       \r\n          formFields[\"po_shipcost\"] = res.data[0].q_shipcost\r\n          formFields[\"po_discount\"] = res.data[0].q_discount\r\n          formFields[\"po_taxes\"] = res.data[0].q_taxes\r\n          formFields[\"po_total\"] = res.data[0].q_total\r\n\r\n          // this.state.formFieldsDetailsStored.push(\"q_shipcost\":res.data[0].q_shipcost)\r\n          this.updateState({\r\n            formFields,\r\n          });\r\n          this.props.storeItemDetails(storedItemList, formFields)\r\n          // this.setState(this.state.formFields)\r\n        }\r\n        console.log(\"formFields in autofillDetailsFromQuo\",this.state.formFields)\r\n      })\r\n  }\r\n\r\n  autofillDetails = () => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n      // formFields[\"q_shipcost\"] = 12\r\n      // this.updateState({\r\n      //   formFields,\r\n      // });\r\n      this.props\r\n      .getCommonApi(\r\n        `podetail/?searchpodetailid=${this.props.poId}`\r\n      )\r\n        .then(res => {\r\n          console.log(\"res in getAutofillItemDetails\", res)\r\n          if(res.status == 200){ \r\n            formFields[\"po_shipcost\"] = res.data[0].po_shipcost\r\n            formFields[\"po_discount\"] = res.data[0].po_discount\r\n            formFields[\"po_taxes\"] = res.data[0].po_taxes\r\n            formFields[\"po_total\"] = res.data[0].po_total\r\n            // this.state.formFieldsDetailsStored.push(\"q_shipcost\":res.data[0].q_shipcost)\r\n            this.updateState({\r\n              formFields,\r\n            });\r\n            console.log(\"this.state.formFields in componentWillMount\",this.state.formFields)\r\n          }\r\n        })\r\n  }\r\n  \r\n\r\n  getDetails = () => {\r\n    this.updateState({ isLoading: true });\r\n    let { detailsList, pageMeta, page, limit, search } = this.state;\r\n    // let { item_desc } = formField;\r\n\r\n    this.props\r\n    .getCommonApi(\r\n      `qpoitem/?searchitemdesc=${search}&page=${page}&limit=${limit}`\r\n    )\r\n      .then(async res => {\r\n        console.log(res, \"dsfdfaafg\");\r\n        await this.setState({ detailsList: [] });\r\n        detailsList = res.data.dataList;\r\n        // pageMeta = res.data.meta.pagination;\r\n        pageMeta = res.data.pagination;\r\n        // pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\r\n        // this.setState({ detailsList, pageMeta });\r\n        // this.setState({ detailsList });\r\n        \r\n        console.log('res.data',res.data)\r\n        console.log('detailsList',detailsList)\r\n        console.log('pageMeta',pageMeta)\r\n        this.updateState({\r\n          detailsList,\r\n          pageMeta,\r\n          isLoading: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.getDetails();\r\n  };\r\n  // pagination\r\n  // handlePagination = page => {\r\n  //   this.queryHandler(page);\r\n  // };\r\n\r\n  handlesearch = event => {\r\n    // event.persist();\r\n    console.log(event.target.value);\r\n    let { search } = this.state;\r\n    search = event.target.value;\r\n    this.setState({ search });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        this.getDetails({});\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  handleChangeDetails = ({ target: { value, name } }) => {\r\n    let {storedItemList} = this.state\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n\r\n    formFields[name] = value;\r\n\r\n    this.updateState({\r\n      formFields,\r\n    });\r\n    this.props.storeItemDetails(storedItemList, formFields)\r\n  };\r\n\r\n  handleChange = ({ target: { value, name }}) => {\r\n    let { detailsList} = this.state;\r\n    console.log(\"value\",value)\r\n    console.log(\"name\",name)\r\n    \r\n    for (let list in detailsList){\r\n        if (detailsList[list].item_code == name){\r\n          detailsList[list].item_quantity = value\r\n        }\r\n        console.log(\"detailsList[list].item_code\",detailsList[list].item_code)\r\n        \r\n      }\r\n      \r\n      this.setState({\r\n        detailsList,\r\n      });\r\n      console.log(\"detailsList in handleChange\", detailsList)\r\n    // current_item_quantity = value\r\n    // this.setState({ current_item_quantity })\r\n  };\r\n\r\n  handleSelect = (item_code, item_desc, item_price) => {\r\n    let { storedItemList, detailsList, formFields } = this.state;\r\n    // current_item_code = item_code\r\n    // this.setState({ current_item_code })\r\n    // console.log(\"current_item_code\",current_item_code)\r\n    console.log(\"item_code\", item_code)\r\n    console.log(\"item_desc\", item_desc)\r\n    console.log(\"item_price\", item_price)\r\n\r\n    for (let list in detailsList){\r\n      if (detailsList[list].item_code == item_code){\r\n        let item_quantiy = detailsList[list].item_quantity\r\n        storedItemList.push({\"item_code\":item_code, \"item_desc\":item_desc, \"item_remarks\":\"\", \"item_price\":item_price, \"item_quantity\":item_quantiy, \"editing\":false})\r\n        // storedItemList = [\r\n        //   {\"item_desc\":item_desc, \"item_desc\":item_desc, \"item_remarks\":\"\", \"item_price\":item_price, \"item_quantity\":item_quantiy},\r\n        //   {\"item_desc\":item_desc, \"item_desc\":item_desc, \"item_remarks\":\"\", \"item_price\":item_price, \"item_quantity\":\"\"}\r\n          \r\n        // ]\r\n      }\r\n    }\r\n\r\n    \r\n    console.log(\"storedItemList\",storedItemList)\r\n    this.setState({storedItemList})\r\n    this.props.storeItemDetails(storedItemList, formFields)\r\n\r\n    // console.log(\"current_item_quantity\",current_item_quantity)\r\n\r\n    // for (let list in detailsList){\r\n    //   if (detailsList[list].item_code = item_code){\r\n    //     detailsList[list].item_quantity = value\r\n    //   }\r\n    // }\r\n    \r\n\r\n    // await this.setState({\r\n    //   detailsList,\r\n    // });\r\n    // console.log(\"detailsList in handleChange\", detailsList)\r\n\r\n    // console.log(\"this.state.formFields.item_quantity\",item_quantity)\r\n  }\r\n\r\n  handleRemoveStoredItem = (item_code) => {\r\n    let {storedItemList, formFields} = this.state\r\n    for (var i = 0; i < storedItemList.length; i++){\r\n      if(storedItemList[i].item_code == item_code) {\r\n        storedItemList.splice(i,1)\r\n      }\r\n    }\r\n    console.log(\"storedItemList after remove\", storedItemList)\r\n    this.setState({storedItemList})\r\n    this.props.storeItemDetails(storedItemList, formFields)\r\n  }\r\n\r\n  handleEdit = (item_code) => {\r\n    let {storedItemList} = this.state\r\n    for (let list in storedItemList){\r\n      if (storedItemList[list].item_code == item_code){\r\n        storedItemList[list].editing = true\r\n      }\r\n    }\r\n    console.log(\"storedItemList in handleedit\", storedItemList)\r\n\r\n    this.setState({storedItemList})\r\n  }\r\n\r\n  handleSave = (item_code) => {\r\n    let {storedItemList, formFields} = this.state\r\n    for (let list in storedItemList){\r\n      if (storedItemList[list].item_code == item_code){\r\n        storedItemList[list].editing = false\r\n      }\r\n    }\r\n    console.log(\"storedItemList in handleedit\", storedItemList)\r\n\r\n    this.setState({storedItemList})\r\n    this.props.storeItemDetails(storedItemList, formFields)\r\n  }\r\n\r\n  handleEditChangeRemarks = ({ target: { value, name }}) => {\r\n    let {storedItemList} = this.state\r\n\r\n    for (let list in storedItemList){\r\n      if (storedItemList[list].item_code == name){\r\n        storedItemList[list].item_remarks = value\r\n      }\r\n      // console.log(\"storedItemList[list].item_code\",storedItemList[list].item_code)\r\n      \r\n    }\r\n    \r\n    this.setState({\r\n      storedItemList,\r\n    });\r\n    \r\n    console.log(\"storedItemList in handleEditChange\", storedItemList)\r\n  }\r\n\r\n  handleEditChangePrice = ({ target: { value, name }}) => {\r\n    let {storedItemList} = this.state\r\n\r\n    for (let list in storedItemList){\r\n      if (storedItemList[list].item_code == name){\r\n        storedItemList[list].item_price = value\r\n      }\r\n      // console.log(\"storedItemList[list].item_code\",storedItemList[list].item_code)\r\n      \r\n    }\r\n    \r\n    this.setState({\r\n      storedItemList,\r\n    });\r\n    console.log(\"storedItemList in handleEditChange\", storedItemList)\r\n  }\r\n\r\n  handleEditChangeQuantity = ({ target: { value, name }}) => {\r\n    let {storedItemList} = this.state\r\n\r\n    for (let list in storedItemList){\r\n      if (storedItemList[list].item_code == name){\r\n        storedItemList[list].item_quantity = value\r\n      }\r\n      // console.log(\"storedItemList[list].item_code\",storedItemList[list].item_code)\r\n      \r\n    }\r\n    \r\n    this.setState({\r\n      storedItemList,\r\n    });\r\n    console.log(\"storedItemList in handleEditChange\", storedItemList)\r\n  }\r\n\r\n  autofillSaved = () => {\r\n    let { storedItemList, formFields } = this.state;\r\n\r\n    storedItemList = this.props.storedItemListStored\r\n    \r\n    formFields.po_shipcost = this.props.formFieldsDetailsStored.po_shipcost\r\n    formFields.po_discount = this.props.formFieldsDetailsStored.po_discount\r\n    formFields.po_taxes = this.props.formFieldsDetailsStored.po_taxes\r\n    formFields.po_total = this.props.formFieldsDetailsStored.po_total\r\n    \r\n    this.setState({storedItemList, formFields})\r\n    console.log(\"storedItemList in autofillSaved\", storedItemList)\r\n    console.log(\"formFields in autofillSaved\", formFields)\r\n  }\r\n  \r\n  \r\n\r\n  render() {\r\n    let { headerDetails, headerSelectedDetails, pageMeta, detailsList, storedItemList, isLoading, formFields } = \r\n      this.state;\r\n\r\n    let { po_shipcost, po_discount, po_taxes, po_total } = formFields\r\n    \r\n    let {t} =this.props;\r\n    \r\n    return (\r\n\r\n      <div className=\"py-4\">\r\n            <div className=\"table-container\">\r\n\r\n              <div className=\"row\">\r\n                <div className=\"col-8\"></div>\r\n\r\n                <div className='col-4 mb-3'>\r\n                  <div className=\"w-100\">\r\n                    <InputSearch\r\n                      placeholder=\"Search Item\"\r\n                      onChange={this.handlesearch}\r\n                    />\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n                pageMeta={pageMeta}\r\n              >\r\n                {isLoading ? (\r\n                      <tr>\r\n                        <td colSpan=\"7\">\r\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                            <div class=\"spinner-border\" role=\"status\">\r\n                              <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                \r\n                ) : detailsList\r\n                  ? detailsList.map((item, index) => {\r\n                      let {\r\n                        item_code,\r\n                        item_desc,\r\n                        item_price,\r\n                        item_quantity                    \r\n                        \r\n                      } = item;\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              { item_code }\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              { item_desc }\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              { item_price }\r\n                            </div>\r\n                          </td>\r\n\r\n                          <td>\r\n                            {/* <div className=\"input-group\"> */}\r\n                              <NormalInput\r\n                                value={item_quantity}\r\n                                disabled={this.props.disableEdit}\r\n                                name={item_code}\r\n                                onChange={this.handleChange}\r\n                              />\r\n                            {/* </div> */}\r\n                          </td>\r\n\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <NormalButton\r\n                                buttonClass={\"mx-2\"}\r\n                                disabled={this.props.disableEdit}\r\n                                mainbg={true}\r\n                                className=\"warning\"\r\n                                label=\"Select\"\r\n                                onClick={() => this.handleSelect(item_code, item_desc, item_price)}\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                          \r\n                                   \r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n                \r\n              \r\n              </TableWrapper >\r\n\r\n              <div className=\"row mt-5\"></div>\r\n                <TableWrapper\r\n                headerDetails={headerSelectedDetails}\r\n                // queryHandler={this.handlePagination}\r\n                // pageMeta={pageMeta}\r\n                >\r\n                  {storedItemList\r\n                  ? storedItemList.map((item, index) => {\r\n                      let {\r\n                        item_code,\r\n                        item_desc,\r\n                        item_remarks,\r\n                        item_price,\r\n                        item_quantity,\r\n                        editing\r\n                      } = item;\r\n                        return (\r\n                          editing==false ?\r\n                          <tr key={index}>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                { item_code }\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                { item_desc }\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                { item_remarks }\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                { item_price }\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                { item_quantity }\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <img\r\n                                  src={updateBtn}\r\n                                  width=\"35\"\r\n                                  height=\"35\"\r\n                                  alt=\"\"\r\n                                  className=\"action-img bg-transparent\"\r\n                                  onClick={this.props.disableEdit==false ? () =>this.handleEdit(item_code):\"\"}\r\n                                />\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <img\r\n                                  src={deleteBtn}\r\n                                  width=\"35\"\r\n                                  height=\"35\"\r\n                                  alt=\"\"\r\n                                  className=\"action-img bg-transparent \" \r\n                                  onClick={this.props.disableEdit==false ? () =>this.handleRemoveStoredItem(item_code):\"\"}\r\n                                />\r\n                              </div>\r\n                            </td>                        \r\n                                    \r\n                          </tr> : \r\n\r\n                          <tr key={index}>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                { item_code }\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                { item_desc }\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <NormalInput\r\n                                value={item_remarks}\r\n                                disabled={this.props.disableEdit}\r\n                                name={item_code}\r\n                                onChange={this.handleEditChangeRemarks}\r\n                              />\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <NormalInput\r\n                                value={item_price}\r\n                                disabled={this.props.disableEdit}\r\n                                name={item_code}\r\n                                onChange={this.handleEditChangePrice}\r\n                              />\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                              <NormalInput\r\n                                value={item_quantity}\r\n                                disabled={this.props.disableEdit}\r\n                                name={item_code}\r\n                                onChange={this.handleEditChangeQuantity}\r\n                              />\r\n                              </div>\r\n                            </td>\r\n                            {/* <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <img\r\n                                  src={closeBtn}\r\n                                  width=\"35\"\r\n                                  height=\"35\"\r\n                                  alt=\"\"\r\n                                  className=\"action-img bg-transparent\"\r\n                                  onClick={() =>this.handleClose(item_code)}\r\n                                />\r\n                              </div>\r\n                            </td> */}\r\n                            <td>\r\n                              <div className=\"d-flex align-items-center justify-content-center\">\r\n                                <img\r\n                                  src={saveBtn}\r\n                                  width=\"35\"\r\n                                  height=\"35\"\r\n                                  alt=\"\"\r\n                                  className=\"action-img bg-transparent \" \r\n                                  onClick={this.props.disableEdit==false ? () =>this.handleSave(item_code):\"\"}\r\n                                  \r\n                                />\r\n                              </div>\r\n                            </td>                        \r\n                                  \r\n                          </tr>\r\n                        );\r\n                    })\r\n                  : null}\r\n\r\n                </TableWrapper >\r\n\r\n                <div className=\"row justify-content-end mt-5\">\r\n                  <div className=\"col-4\">\r\n\r\n                    <div className=\"d-flex mb-3\"> \r\n                      <label className=\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\">\r\n                        {t(\"Shipping Cost\")}\r\n                      </label>\r\n                      <div className=\"input-group-address w-100\">\r\n                        <NormalInput\r\n                          placeholder=\"Enter here\"\r\n                          disabled={this.props.disableEdit}\r\n                          value={po_shipcost}\r\n                          name=\"po_shipcost\"\r\n                          onChange={this.handleChangeDetails}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"d-flex mb-3\"> \r\n                      <label className=\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\">\r\n                        {t(\"Discount\")}\r\n                      </label>\r\n                      <div className=\"input-group-discount w-100\">\r\n                        <NormalInput\r\n                          // placeholder=\"Enter here\"\r\n                          disabled={this.props.disableEdit}\r\n                          value={po_discount}\r\n                          name=\"po_discount\"\r\n                          onChange={this.handleChangeDetails}\r\n                        />\r\n                      </div>\r\n                      \r\n                    </div>                   \r\n\r\n                    <div className=\"d-flex mb-3\"> \r\n                      <label className=\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\">\r\n                        {t(\"Taxes\")}\r\n                      </label>\r\n                      <div className=\"input-group-address w-100\">\r\n                        <NormalInput\r\n                          placeholder=\"Enter here\"\r\n                          disabled={this.props.disableEdit}\r\n                          value={po_taxes}\r\n                          name=\"po_taxes\"\r\n                          onChange={this.handleChangeDetails}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"d-flex mb-3\"> \r\n                      <label className=\"text-left w-100 text-black common-label-text fs-15 pl-5 pt-2\">\r\n                        {t(\"Total\")}\r\n                      </label>\r\n                      <div className=\"input-group-address w-100\">\r\n                        <NormalInput\r\n                          placeholder=\"Enter here\"\r\n                          disabled={this.props.disableEdit}\r\n                          value={po_total}\r\n                          name=\"po_total\"\r\n                          onChange={this.handleChangeDetails}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                        {this.props.validator.message(\r\n                          t(\"Total\"),\r\n                          po_total,\r\n                          t(\"required\")\r\n                        )}\r\n                    </div>\r\n\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                \r\n                \r\n              \r\n            </div>\r\n          </div>\r\n    );\r\n    \r\n  }\r\n}\r\n\r\n// const mapStateToProps = state => ({\r\n//   projectDetail: state.project.projectDetail,\r\n// });\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      // deleteProject,\r\n      // getProject\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\n\r\n\r\nexport const Details =withTranslation()( connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(DetailsClass));\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}