{"ast":null,"code":"import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalButton}from\"component/common\";import SimpleReactValidator from\"simple-react-validator\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{forgotPassword,verifyOtp}from\"../../redux/actions/auth\";import\"assets/scss/pages/login.scss\";import{history}from\"helpers\";export var ForgotPasswordClass=/*#__PURE__*/function(_Component){_inherits(ForgotPasswordClass,_Component);var _super=_createSuper(ForgotPasswordClass);function ForgotPasswordClass(){var _this;_classCallCheck(this,ForgotPasswordClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={recoverAccount:{emp_name:\"\"},toggleView:{recoverView:1,verificationView:0},viewOtp:false};_this.handleRecoveryInput=function(_ref){var _ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;var recoverAccount=Object.assign({},_this.state.recoverAccount);recoverAccount[name]=value;_this.setState({recoverAccount:recoverAccount});};_this.handleEmailRecovery=function(event){event.preventDefault();var _this$state$recoverAc=_this.state.recoverAccount,emp_name=_this$state$recoverAc.emp_name,otp=_this$state$recoverAc.otp;if(_this.validator.allValid()){var recoverAccount=Object.assign({},_this.state.recoverAccount);if(_this.state.viewOtp){_this.props.verifyOtp(\"?emp_name=\".concat(emp_name),{otp:otp}).then(function(res){if(res.status===200){history.push(\"/auth/resetPassword/\".concat(emp_name));}});}else{_this.props.forgotPassword(recoverAccount).then(function(res){if(res.status===200){_this.setState({viewOtp:true});}});}}else{_this.validator.showMessages();}};return _this;}_createClass(ForgotPasswordClass,[{key:\"componentWillMount\",value:function componentWillMount(){this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message font-md\"},message);},autoForceUpdate:this});}},{key:\"render\",value:function render(){var _this$state=this.state,recoverAccount=_this$state.recoverAccount,viewOtp=_this$state.viewOtp;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"recoverAccount\",className:\"h-100 px-2\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-left common-heading mb-5 fs-28\"},\"Forgot Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-para-text fs-16 pb-1\"},\"Please enter your Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group pt-2\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"emp_name\",placeholder:\"Name\",value:recoverAccount.emp_name,onChange:this.handleRecoveryInput})),this.validator.message(\"Employee name\",recoverAccount.emp_name,\"required\"),/*#__PURE__*/React.createElement(\"br\",null),viewOtp?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-para-text fs-16 mt-3 pb-1\"},\"Please enter OTP\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group pt-2\"},/*#__PURE__*/React.createElement(NormalInput,{name:\"otp\",placeholder:\"OTP\",value:recoverAccount.otp,onChange:this.handleRecoveryInput})),this.validator.message(\"OTP\",recoverAccount.otp,\"required\")):\"\",/*#__PURE__*/React.createElement(\"p\",{className:\"fs-13 text-left tc-primary link-text py-5 cursor-pointer\",onClick:function onClick(){return history.push('/auth/login');}},\"Back to Login\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group px-0 pt-4 d-flex justify-content-center col-12\"},/*#__PURE__*/React.createElement(NormalButton,{onClick:this.handleEmailRecovery,mainbg:true,className:\"mr-2 col-12\",label:\"submit\"}))));}}]);return ForgotPasswordClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({forgotPassword:forgotPassword,verifyOtp:verifyOtp},dispatch);};var component=ForgotPasswordClass;export var ForgotPassword=connect(null,mapDispatchToProps)(component);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/pages/Auth/ForgotPassword.js"],"names":["React","Component","NormalInput","NormalButton","SimpleReactValidator","connect","bindActionCreators","forgotPassword","verifyOtp","history","ForgotPasswordClass","state","recoverAccount","emp_name","toggleView","recoverView","verificationView","viewOtp","handleRecoveryInput","target","value","name","Object","assign","setState","handleEmailRecovery","event","preventDefault","otp","validator","allValid","props","then","res","status","push","showMessages","element","message","autoForceUpdate","mapDispatchToProps","dispatch","component","ForgotPassword"],"mappings":"wjBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,YAAtB,KAA0C,kBAA1C,CACA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,cAAT,CAAyBC,SAAzB,KAA0C,0BAA1C,CACA,MAAO,8BAAP,CACA,OAASC,OAAT,KAAwB,SAAxB,CAEA,UAAaC,CAAAA,mBAAb,+WACEC,KADF,CACU,CACNC,cAAc,CAAE,CACdC,QAAQ,CAAE,EADI,CADV,CAINC,UAAU,CAAE,CACVC,WAAW,CAAE,CADH,CAEVC,gBAAgB,CAAE,CAFR,CAJN,CAQNC,OAAO,CAAE,KARH,CADV,OAqBEC,mBArBF,CAqBwB,cAAiC,sBAA9BC,MAA8B,CAApBC,KAAoB,aAApBA,KAAoB,CAAbC,IAAa,aAAbA,IAAa,CACrD,GAAIT,CAAAA,cAAc,CAAGU,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkB,MAAKZ,KAAL,CAAWC,cAA7B,CAArB,CACAA,cAAc,CAACS,IAAD,CAAd,CAAuBD,KAAvB,CACA,MAAKI,QAAL,CAAc,CACZZ,cAAc,CAAdA,cADY,CAAd,EAGD,CA3BH,OA6BEa,mBA7BF,CA6BwB,SAAAC,KAAK,CAAI,CAC7BA,KAAK,CAACC,cAAN,GACA,0BAAwB,MAAKhB,KAAL,CAAWC,cAAnC,CAAMC,QAAN,uBAAMA,QAAN,CAAgBe,GAAhB,uBAAgBA,GAAhB,CACA,GAAI,MAAKC,SAAL,CAAeC,QAAf,EAAJ,CAA+B,CAC7B,GAAIlB,CAAAA,cAAc,CAAGU,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkB,MAAKZ,KAAL,CAAWC,cAA7B,CAArB,CACA,GAAG,MAAKD,KAAL,CAAWM,OAAd,CAAsB,CACpB,MAAKc,KAAL,CAAWvB,SAAX,qBAAkCK,QAAlC,EAA8C,CAACe,GAAG,CAAEA,GAAN,CAA9C,EAA0DI,IAA1D,CAA+D,SAACC,GAAD,CAAS,CAEtE,GAAGA,GAAG,CAACC,MAAJ,GAAa,GAAhB,CAAoB,CAClBzB,OAAO,CAAC0B,IAAR,+BAAoCtB,QAApC,GACD,CACF,CALD,EAMD,CAPD,IAOO,CACL,MAAKkB,KAAL,CAAWxB,cAAX,CAA0BK,cAA1B,EAA0CoB,IAA1C,CAA+C,SAACC,GAAD,CAAS,CAEtD,GAAGA,GAAG,CAACC,MAAJ,GAAa,GAAhB,CAAoB,CAClB,MAAKV,QAAL,CAAc,CAACP,OAAO,CAAC,IAAT,CAAd,EACD,CACF,CALD,EAMD,CAEF,CAlBD,IAkBO,CACL,MAAKY,SAAL,CAAeO,YAAf,GACD,CACF,CArDH,iFAYE,6BAAqB,CACnB,KAAKP,SAAL,CAAiB,GAAIzB,CAAAA,oBAAJ,CAAyB,CACxCiC,OAAO,CAAE,iBAAAC,OAAO,qBACd,4BAAM,SAAS,CAAC,uBAAhB,EAAyCA,OAAzC,CADc,EADwB,CAIxCC,eAAe,CAAE,IAJuB,CAAzB,CAAjB,CAMD,CAnBH,sBAuDE,iBAAS,CACP,gBAAkC,KAAK5B,KAAvC,CAAMC,cAAN,aAAMA,cAAN,CAAsBK,OAAtB,aAAsBA,OAAtB,CAEA,mBACE,qDACE,2BAAK,EAAE,CAAC,gBAAR,CAAyB,SAAS,CAAC,YAAnC,eACE,0BAAI,SAAS,CAAC,qCAAd,oBADF,cAEE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,SAAS,CAAC,kDAAjB,2BADF,cAIE,2BAAK,SAAS,CAAC,kBAAf,eACE,oBAAC,WAAD,EACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,MAFd,CAGE,KAAK,CAAEL,cAAc,CAACC,QAHxB,CAIE,QAAQ,CAAE,KAAKK,mBAJjB,EADF,CAJF,CAYG,KAAKW,SAAL,CAAeS,OAAf,CACC,eADD,CAEC1B,cAAc,CAACC,QAFhB,CAGC,UAHD,CAZH,cAiBE,8BAjBF,CAkBGI,OAAO,cAAG,qDACX,6BAAO,SAAS,CAAC,uDAAjB,qBADW,cAIX,2BAAK,SAAS,CAAC,kBAAf,eACE,oBAAC,WAAD,EACE,IAAI,CAAC,KADP,CAEE,WAAW,CAAC,KAFd,CAGE,KAAK,CAAEL,cAAc,CAACgB,GAHxB,CAIE,QAAQ,CAAE,KAAKV,mBAJjB,EADF,CAJW,CAYV,KAAKW,SAAL,CAAeS,OAAf,CACC,KADD,CAEC1B,cAAc,CAACgB,GAFhB,CAGC,UAHD,CAZU,CAAH,CAgBF,EAlCR,cAoCE,yBAAG,SAAS,CAAC,0DAAb,CAAwE,OAAO,CAAE,yBAAMnB,CAAAA,OAAO,CAAC0B,IAAR,CAAa,aAAb,CAAN,EAAjF,kBApCF,CAFF,cAyCE,2BAAK,SAAS,CAAC,2DAAf,eACE,oBAAC,YAAD,EACE,OAAO,CAAE,KAAKV,mBADhB,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,aAHZ,CAIE,KAAK,CAAC,QAJR,EADF,CAzCF,CADF,CADF,CAsDD,CAhHH,iCAAyCxB,SAAzC,EAmHA,GAAMuC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAOnC,CAAAA,kBAAkB,CACvB,CACEC,cAAc,CAAdA,cADF,CAEEC,SAAS,CAATA,SAFF,CADuB,CAKvBiC,QALuB,CAAzB,CAOD,CARD,CAUA,GAAIC,CAAAA,SAAS,CAAGhC,mBAAhB,CAEA,MAAO,IAAMiC,CAAAA,cAAc,CAAGtC,OAAO,CAAC,IAAD,CAAOmC,kBAAP,CAAP,CAAkCE,SAAlC,CAAvB","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NormalInput, NormalButton } from \"component/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { forgotPassword, verifyOtp } from \"../../redux/actions/auth\";\r\nimport \"assets/scss/pages/login.scss\";\r\nimport { history } from \"helpers\";\r\n\r\nexport class ForgotPasswordClass extends Component {\r\n  state = {\r\n    recoverAccount: {\r\n      emp_name: \"\"\r\n    },\r\n    toggleView: {\r\n      recoverView: 1,\r\n      verificationView: 0\r\n    },\r\n    viewOtp: false\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message font-md\">{message}</span>\r\n      ),\r\n      autoForceUpdate: this\r\n    });\r\n  }\r\n\r\n  handleRecoveryInput = ({ target: { value, name } }) => {\r\n    let recoverAccount = Object.assign({}, this.state.recoverAccount);\r\n    recoverAccount[name] = value;\r\n    this.setState({\r\n      recoverAccount\r\n    });\r\n  };\r\n\r\n  handleEmailRecovery = event => {\r\n    event.preventDefault();\r\n    let { emp_name, otp } = this.state.recoverAccount;\r\n    if (this.validator.allValid()) {\r\n      let recoverAccount = Object.assign({}, this.state.recoverAccount);\r\n      if(this.state.viewOtp){\r\n        this.props.verifyOtp(`?emp_name=${emp_name}`, {otp: otp}).then((res) => {\r\n       \r\n          if(res.status===200){\r\n            history.push(`/auth/resetPassword/${emp_name}`)\r\n          }\r\n        });\r\n      } else {\r\n        this.props.forgotPassword(recoverAccount).then((res) => {\r\n       \r\n          if(res.status===200){\r\n            this.setState({viewOtp:true})\r\n          }\r\n        });\r\n      }\r\n      \r\n    } else {\r\n      this.validator.showMessages();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let { recoverAccount, viewOtp } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <div id=\"recoverAccount\" className=\"h-100 px-2\">\r\n          <h1 className=\"text-left common-heading mb-5 fs-28\">Forgot Password</h1>\r\n          <div className=\"form-group\">\r\n            <label className=\"text-left text-black common-para-text fs-16 pb-1\">\r\n              Please enter your Name\r\n            </label>\r\n            <div className=\"input-group pt-2\">\r\n              <NormalInput\r\n                name=\"emp_name\"\r\n                placeholder=\"Name\"\r\n                value={recoverAccount.emp_name}\r\n                onChange={this.handleRecoveryInput}\r\n              />\r\n            </div>\r\n            {this.validator.message(\r\n              \"Employee name\",\r\n              recoverAccount.emp_name,\r\n              \"required\"\r\n            )}\r\n            <br></br>\r\n            {viewOtp ? <>\r\n            <label className=\"text-left text-black common-para-text fs-16 mt-3 pb-1\">\r\n              Please enter OTP\r\n            </label>\r\n            <div className=\"input-group pt-2\">\r\n              <NormalInput\r\n                name=\"otp\"\r\n                placeholder=\"OTP\"\r\n                value={recoverAccount.otp}\r\n                onChange={this.handleRecoveryInput}\r\n              />\r\n            </div>\r\n            {this.validator.message(\r\n              \"OTP\",\r\n              recoverAccount.otp,\r\n              \"required\"\r\n            )}</>:\"\"}\r\n\r\n            <p className=\"fs-13 text-left tc-primary link-text py-5 cursor-pointer\" onClick={() => history.push('/auth/login')}>Back to Login</p>\r\n          </div>\r\n\r\n          <div className=\"form-group px-0 pt-4 d-flex justify-content-center col-12\">\r\n            <NormalButton\r\n              onClick={this.handleEmailRecovery}\r\n              mainbg={true}\r\n              className=\"mr-2 col-12\"\r\n              label=\"submit\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      forgotPassword,\r\n      verifyOtp\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nlet component = ForgotPasswordClass;\r\n\r\nexport const ForgotPassword = connect(null, mapDispatchToProps)(component);\r\n"]},"metadata":{},"sourceType":"module"}