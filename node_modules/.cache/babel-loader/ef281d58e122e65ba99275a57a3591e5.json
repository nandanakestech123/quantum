{"ast":null,"code":"/**\r\n * DevExtreme (ui/form/ui.form.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nvar _visibility_change = require(\"../../events/visibility_change\");\n\nvar _element = require(\"../../core/element\");\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _editor = _interopRequireDefault(require(\"../editor/editor\"));\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _validation_engine = _interopRequireDefault(require(\"../validation_engine\"));\n\nvar _uiForm = _interopRequireDefault(require(\"./ui.form.items_runtime_info\"));\n\nvar _tab_panel = _interopRequireDefault(require(\"../tab_panel\"));\n\nvar _ui2 = _interopRequireDefault(require(\"../scroll_view/ui.scrollable\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _themes = require(\"../themes\");\n\nvar _uiForm2 = _interopRequireDefault(require(\"./ui.form.item_options_actions\"));\n\nrequire(\"./ui.form.layout_manager\");\n\nvar _uiForm4 = require(\"./ui.form.utils\");\n\nrequire(\"../validation_summary\");\n\nrequire(\"../validation_group\");\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    return _arrayLikeToArray(arr);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar WIDGET_CLASS = \"dx-widget\";\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\nvar ITEM_OPTIONS_FOR_VALIDATION_UPDATING = [\"items\", \"isRequired\", \"validationRules\", \"visible\"];\n\nvar Form = _ui.default.inherit({\n  _init: function () {\n    this.callBase();\n    this._cachedColCountOptions = [];\n    this._itemsRunTimeInfo = new _uiForm.default();\n    this._groupsColCount = [];\n\n    this._attachSyncSubscriptions();\n  },\n  _initOptions: function (options) {\n    if (!(\"screenByWidth\" in options)) {\n      options.screenByWidth = _window.defaultScreenFactorFunc;\n    }\n\n    this.callBase(options);\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      formID: \"dx-\" + new _guid.default(),\n      formData: {},\n      colCount: 1,\n      screenByWidth: null,\n      colCountByScreen: void 0,\n      labelLocation: \"left\",\n      readOnly: false,\n      onFieldDataChanged: null,\n      customizeItem: null,\n      onEditorEnterKey: null,\n      minColWidth: 200,\n      alignItemLabels: true,\n      alignItemLabelsInAllGroups: true,\n      alignRootItemLabels: true,\n      showColonAfterLabel: true,\n      showRequiredMark: true,\n      showOptionalMark: false,\n      requiredMark: \"*\",\n      optionalMark: _message.default.format(\"dxForm-optionalMark\"),\n      requiredMessage: _message.default.getFormatter(\"dxForm-requiredMessage\"),\n      showValidationSummary: false,\n      items: void 0,\n      scrollingEnabled: false,\n      validationGroup: void 0,\n      stylingMode: void 0\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return (0, _themes.isMaterial)();\n      },\n      options: {\n        showColonAfterLabel: false,\n        labelLocation: \"top\"\n      }\n    }]);\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    (0, _extend.extend)(this._optionsByReference, {\n      formData: true,\n      validationGroup: true\n    });\n  },\n  _getGroupColCount: function ($element) {\n    return parseInt($element.attr(_constants.GROUP_COL_COUNT_ATTR));\n  },\n  _createHiddenElement: function (rootLayoutManager) {\n    this._$hiddenElement = (0, _renderer.default)(\"<div>\").addClass(WIDGET_CLASS).addClass(_constants.HIDDEN_LABEL_CLASS).appendTo(\"body\");\n\n    var $hiddenLabel = rootLayoutManager._renderLabel({\n      text: \" \",\n      location: this._labelLocation()\n    }).appendTo(this._$hiddenElement);\n\n    this._hiddenLabelText = $hiddenLabel.find(\".\" + _constants.FIELD_ITEM_LABEL_TEXT_CLASS)[0];\n  },\n  _removeHiddenElement: function () {\n    this._$hiddenElement.remove();\n\n    this._hiddenLabelText = null;\n  },\n  _getLabelWidthByText: function (text) {\n    this._hiddenLabelText.innerHTML = text;\n    return this._hiddenLabelText.offsetWidth;\n  },\n  _getLabelsSelectorByCol: function (index, options) {\n    options = options || {};\n    var fieldItemClass = options.inOneColumn ? _constants.FIELD_ITEM_CLASS : _constants.FORM_FIELD_ITEM_COL_CLASS + index;\n    var cssExcludeTabbedSelector = options.excludeTabbed ? \":not(.\" + _constants.FIELD_ITEM_TAB_CLASS + \")\" : \"\";\n    var childLabelContentSelector = \"> .\" + _constants.FIELD_ITEM_LABEL_CLASS + \" > .\" + _constants.FIELD_ITEM_LABEL_CONTENT_CLASS;\n    return \".\" + fieldItemClass + cssExcludeTabbedSelector + childLabelContentSelector;\n  },\n  _getLabelText: function (labelText) {\n    var length = labelText.children.length;\n    var child;\n    var result = \"\";\n    var i;\n\n    for (i = 0; i < length; i++) {\n      child = labelText.children[i];\n      result += !(0, _string.isEmpty)(child.innerText) ? child.innerText : child.innerHTML;\n    }\n\n    return result;\n  },\n  _applyLabelsWidthByCol: function ($container, index, options) {\n    var $labelTexts = $container.find(this._getLabelsSelectorByCol(index, options));\n    var $labelTextsLength = $labelTexts.length;\n    var labelWidth;\n    var i;\n    var maxWidth = 0;\n\n    for (i = 0; i < $labelTextsLength; i++) {\n      labelWidth = this._getLabelWidthByText(this._getLabelText($labelTexts[i]));\n\n      if (labelWidth > maxWidth) {\n        maxWidth = labelWidth;\n      }\n    }\n\n    for (i = 0; i < $labelTextsLength; i++) {\n      $labelTexts[i].style.width = maxWidth + \"px\";\n    }\n  },\n  _applyLabelsWidth: function ($container, excludeTabbed, inOneColumn, colCount) {\n    colCount = inOneColumn ? 1 : colCount || this._getGroupColCount($container);\n    var applyLabelsOptions = {\n      excludeTabbed: excludeTabbed,\n      inOneColumn: inOneColumn\n    };\n    var i;\n\n    for (i = 0; i < colCount; i++) {\n      this._applyLabelsWidthByCol($container, i, applyLabelsOptions);\n    }\n  },\n  _getGroupElementsInColumn: function ($container, columnIndex, colCount) {\n    var cssColCountSelector = (0, _type.isDefined)(colCount) ? \".\" + _constants.GROUP_COL_COUNT_CLASS + colCount : \"\";\n    var groupSelector = \".\" + _constants.FORM_FIELD_ITEM_COL_CLASS + columnIndex + \" > .\" + _constants.FIELD_ITEM_CONTENT_CLASS + \" > .\" + _constants.FORM_GROUP_CLASS + cssColCountSelector;\n    return $container.find(groupSelector);\n  },\n  _applyLabelsWidthWithGroups: function ($container, colCount, excludeTabbed) {\n    if (true === this.option(\"alignRootItemLabels\")) {\n      this._alignRootSimpleItems($container, colCount, excludeTabbed);\n    }\n\n    var alignItemLabelsInAllGroups = this.option(\"alignItemLabelsInAllGroups\");\n\n    if (alignItemLabelsInAllGroups) {\n      this._applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed);\n    } else {\n      var $groups = this.$element().find(\".\" + _constants.FORM_GROUP_CLASS);\n      var i;\n\n      for (i = 0; i < $groups.length; i++) {\n        this._applyLabelsWidth($groups.eq(i), excludeTabbed);\n      }\n    }\n  },\n  _alignRootSimpleItems: function ($container, colCount, excludeTabbed) {\n    var $rootSimpleItems = $container.find(\".\".concat(_constants.ROOT_SIMPLE_ITEM_CLASS));\n\n    for (var colIndex = 0; colIndex < colCount; colIndex++) {\n      this._applyLabelsWidthByCol($rootSimpleItems, colIndex, excludeTabbed);\n    }\n  },\n  _applyLabelsWidthWithNestedGroups: function ($container, colCount, excludeTabbed) {\n    var applyLabelsOptions = {\n      excludeTabbed: excludeTabbed\n    };\n    var colIndex;\n    var groupsColIndex;\n    var groupColIndex;\n    var $groupsByCol;\n\n    for (colIndex = 0; colIndex < colCount; colIndex++) {\n      $groupsByCol = this._getGroupElementsInColumn($container, colIndex);\n\n      this._applyLabelsWidthByCol($groupsByCol, 0, applyLabelsOptions);\n\n      for (groupsColIndex = 0; groupsColIndex < this._groupsColCount.length; groupsColIndex++) {\n        $groupsByCol = this._getGroupElementsInColumn($container, colIndex, this._groupsColCount[groupsColIndex]);\n\n        var groupColCount = this._getGroupColCount($groupsByCol);\n\n        for (groupColIndex = 1; groupColIndex < groupColCount; groupColIndex++) {\n          this._applyLabelsWidthByCol($groupsByCol, groupColIndex, applyLabelsOptions);\n        }\n      }\n    }\n  },\n  _labelLocation: function () {\n    return this.option(\"labelLocation\");\n  },\n  _alignLabelsInColumn: function (_ref) {\n    var layoutManager = _ref.layoutManager,\n        inOneColumn = _ref.inOneColumn,\n        $container = _ref.$container,\n        excludeTabbed = _ref.excludeTabbed,\n        items = _ref.items;\n\n    if (!(0, _window.hasWindow)() || \"top\" === this._labelLocation()) {\n      return;\n    }\n\n    this._createHiddenElement(layoutManager);\n\n    if (inOneColumn) {\n      this._applyLabelsWidth($container, excludeTabbed, true);\n    } else {\n      if (this._checkGrouping(items)) {\n        this._applyLabelsWidthWithGroups($container, layoutManager._getColCount(), excludeTabbed);\n      } else {\n        this._applyLabelsWidth($container, excludeTabbed, false, layoutManager._getColCount());\n      }\n    }\n\n    this._removeHiddenElement();\n  },\n  _prepareFormData: function () {\n    if (!(0, _type.isDefined)(this.option(\"formData\"))) {\n      this.option(\"formData\", {});\n    }\n  },\n  _initMarkup: function () {\n    _validation_engine.default.addGroup(this._getValidationGroup());\n\n    this._clearCachedInstances();\n\n    this._prepareFormData();\n\n    this.$element().addClass(_constants.FORM_CLASS);\n    this.callBase();\n    this.setAria(\"role\", \"form\", this.$element());\n\n    if (this.option(\"scrollingEnabled\")) {\n      this._renderScrollable();\n    }\n\n    this._renderLayout();\n\n    this._renderValidationSummary();\n\n    this._lastMarkupScreenFactor = this._targetScreenFactor || this._getCurrentScreenFactor();\n  },\n  _getCurrentScreenFactor: function () {\n    return (0, _window.hasWindow)() ? (0, _window.getCurrentScreenFactor)(this.option(\"screenByWidth\")) : \"lg\";\n  },\n  _clearCachedInstances: function () {\n    this._itemsRunTimeInfo.clear();\n\n    this._cachedLayoutManagers = [];\n  },\n  _alignLabels: function (layoutManager, inOneColumn) {\n    this._alignLabelsInColumn({\n      $container: this.$element(),\n      layoutManager: layoutManager,\n      excludeTabbed: true,\n      items: this.option(\"items\"),\n      inOneColumn: inOneColumn\n    });\n  },\n  _clean: function () {\n    this.callBase();\n    this._groupsColCount = [];\n    this._cachedColCountOptions = [];\n    this._lastMarkupScreenFactor = void 0;\n  },\n  _renderScrollable: function () {\n    var useNativeScrolling = this.option(\"useNativeScrolling\");\n    this._scrollable = new _ui2.default(this.$element(), {\n      useNative: !!useNativeScrolling,\n      useSimulatedScrollbar: !useNativeScrolling,\n      useKeyboard: false,\n      direction: \"both\",\n      bounceEnabled: false\n    });\n  },\n  _getContent: function () {\n    return this.option(\"scrollingEnabled\") ? this._scrollable.$content() : this.$element();\n  },\n  _renderValidationSummary: function () {\n    var $validationSummary = this.$element().find(\".\" + _constants.FORM_VALIDATION_SUMMARY);\n\n    if ($validationSummary.length > 0) {\n      $validationSummary.remove();\n    }\n\n    if (this.option(\"showValidationSummary\")) {\n      var _$validationSummary = (0, _renderer.default)(\"<div>\").addClass(_constants.FORM_VALIDATION_SUMMARY).appendTo(this._getContent());\n\n      this._validationSummary = _$validationSummary.dxValidationSummary({\n        validationGroup: this._getValidationGroup()\n      }).dxValidationSummary(\"instance\");\n    }\n  },\n  _prepareItems: function (items, parentIsTabbedItem, currentPath, isTabs) {\n    if (items) {\n      var result = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        var path = (0, _uiForm4.concatPaths)(currentPath, (0, _uiForm4.createItemPathByIndex)(i, isTabs));\n\n        var guid = this._itemsRunTimeInfo.add({\n          item: item,\n          itemIndex: i,\n          path: path\n        });\n\n        if ((0, _type.isString)(item)) {\n          item = {\n            dataField: item\n          };\n        }\n\n        if ((0, _type.isObject)(item)) {\n          var itemCopy = (0, _extend.extend)({}, item);\n          itemCopy.guid = guid;\n\n          this._tryPrepareGroupItem(itemCopy);\n\n          this._tryPrepareTabbedItem(itemCopy, path);\n\n          this._tryPrepareItemTemplate(itemCopy);\n\n          if (parentIsTabbedItem) {\n            itemCopy.cssItemClass = _constants.FIELD_ITEM_TAB_CLASS;\n          }\n\n          if (itemCopy.items) {\n            itemCopy.items = this._prepareItems(itemCopy.items, parentIsTabbedItem, path);\n          }\n\n          result.push(itemCopy);\n        } else {\n          result.push(item);\n        }\n      }\n\n      return result;\n    }\n  },\n  _tryPrepareGroupItem: function (item) {\n    if (\"group\" === item.itemType) {\n      item.alignItemLabels = (0, _common.ensureDefined)(item.alignItemLabels, true);\n\n      if (item.template) {\n        item.groupContentTemplate = this._getTemplate(item.template);\n      }\n\n      item.template = this._itemGroupTemplate.bind(this, item);\n    }\n  },\n  _tryPrepareTabbedItem: function (item, path) {\n    if (\"tabbed\" === item.itemType) {\n      item.template = this._itemTabbedTemplate.bind(this, item);\n      item.tabs = this._prepareItems(item.tabs, true, path, true);\n    }\n  },\n  _tryPrepareItemTemplate: function (item) {\n    if (item.template) {\n      item.template = this._getTemplate(item.template);\n    }\n  },\n  _checkGrouping: function (items) {\n    if (items) {\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n\n        if (\"group\" === item.itemType) {\n          return true;\n        }\n      }\n    }\n  },\n  _renderLayout: function () {\n    var that = this;\n    var items = that.option(\"items\");\n\n    var $content = that._getContent();\n\n    items = that._prepareItems(items);\n    that._rootLayoutManager = that._renderLayoutManager(items, $content, {\n      isRoot: true,\n      colCount: that.option(\"colCount\"),\n      alignItemLabels: that.option(\"alignItemLabels\"),\n      screenByWidth: this.option(\"screenByWidth\"),\n      colCountByScreen: this.option(\"colCountByScreen\"),\n      onLayoutChanged: function (inOneColumn) {\n        that._alignLabels.bind(that)(that._rootLayoutManager, inOneColumn);\n      },\n      onContentReady: function (e) {\n        that._alignLabels(e.component, e.component.isSingleColumnMode());\n      }\n    });\n  },\n  _tryGetItemsForTemplate: function (item) {\n    return item.items || [];\n  },\n  _itemTabbedTemplate: function (item, e, $container) {\n    var _this = this;\n\n    var $tabPanel = (0, _renderer.default)(\"<div>\").appendTo($container);\n    var tabPanelOptions = (0, _extend.extend)({}, item.tabPanelOptions, {\n      dataSource: item.tabs,\n      onItemRendered: function (args) {\n        return (0, _visibility_change.triggerShownEvent)(args.itemElement);\n      },\n      itemTemplate: function (itemData, e, container) {\n        var $container = (0, _renderer.default)(container);\n        var alignItemLabels = (0, _common.ensureDefined)(itemData.alignItemLabels, true);\n\n        var layoutManager = _this._renderLayoutManager(_this._tryGetItemsForTemplate(itemData), $container, {\n          colCount: itemData.colCount,\n          alignItemLabels: alignItemLabels,\n          screenByWidth: _this.option(\"screenByWidth\"),\n          colCountByScreen: itemData.colCountByScreen,\n          cssItemClass: itemData.cssItemClass,\n          onLayoutChanged: function (inOneColumn) {\n            _this._alignLabelsInColumn({\n              $container: $container,\n              layoutManager: layoutManager,\n              items: itemData.items,\n              inOneColumn: inOneColumn\n            });\n          }\n        });\n\n        if (_this._itemsRunTimeInfo) {\n          _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(itemData.guid, {\n            layoutManager: layoutManager\n          });\n        }\n\n        if (alignItemLabels) {\n          _this._alignLabelsInColumn({\n            $container: $container,\n            layoutManager: layoutManager,\n            items: itemData.items,\n            inOneColumn: layoutManager.isSingleColumnMode()\n          });\n        }\n      }\n    });\n\n    var tryUpdateTabPanelInstance = function (items, instance) {\n      if (Array.isArray(items)) {\n        items.forEach(function (item) {\n          return _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\n            widgetInstance: instance\n          });\n        });\n      }\n    };\n\n    var tabPanel = this._createComponent($tabPanel, _tab_panel.default, tabPanelOptions);\n\n    (0, _renderer.default)($container).parent().addClass(_constants.FIELD_ITEM_CONTENT_HAS_TABS_CLASS);\n    tabPanel.on(\"optionChanged\", function (e) {\n      if (\"dataSource\" === e.fullName) {\n        tryUpdateTabPanelInstance(e.value, e.component);\n      }\n    });\n    tryUpdateTabPanelInstance([{\n      guid: item.guid\n    }].concat(_toConsumableArray(item.tabs)), tabPanel);\n  },\n  _itemGroupTemplate: function (item, e, $container) {\n    var $group = (0, _renderer.default)(\"<div>\").toggleClass(_constants.FORM_GROUP_WITH_CAPTION_CLASS, (0, _type.isDefined)(item.caption) && item.caption.length).addClass(_constants.FORM_GROUP_CLASS).appendTo($container);\n    (0, _renderer.default)($container).parent().addClass(_constants.FIELD_ITEM_CONTENT_HAS_GROUP_CLASS);\n    var colCount;\n    var layoutManager;\n\n    if (item.caption) {\n      (0, _renderer.default)(\"<span>\").addClass(_constants.FORM_GROUP_CAPTION_CLASS).text(item.caption).appendTo($group);\n    }\n\n    var $groupContent = (0, _renderer.default)(\"<div>\").addClass(_constants.FORM_GROUP_CONTENT_CLASS).appendTo($group);\n\n    if (item.groupContentTemplate) {\n      var data = {\n        formData: this.option(\"formData\"),\n        component: this\n      };\n      item.groupContentTemplate.render({\n        model: data,\n        container: (0, _element.getPublicElement)($groupContent)\n      });\n    } else {\n      layoutManager = this._renderLayoutManager(this._tryGetItemsForTemplate(item), $groupContent, {\n        colCount: item.colCount,\n        colCountByScreen: item.colCountByScreen,\n        alignItemLabels: item.alignItemLabels,\n        cssItemClass: item.cssItemClass\n      });\n      this._itemsRunTimeInfo && this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\n        layoutManager: layoutManager\n      });\n      colCount = layoutManager._getColCount();\n\n      if ((0, _array.inArray)(colCount, this._groupsColCount) === -1) {\n        this._groupsColCount.push(colCount);\n      }\n\n      $group.addClass(_constants.GROUP_COL_COUNT_CLASS + colCount);\n      $group.attr(_constants.GROUP_COL_COUNT_ATTR, colCount);\n    }\n  },\n  _renderLayoutManager: function (items, $rootElement, options) {\n    var $element = (0, _renderer.default)(\"<div>\");\n    var that = this;\n\n    var config = that._getLayoutManagerConfig(items, options);\n\n    var baseColCountByScreen = {\n      lg: options.colCount,\n      md: options.colCount,\n      sm: options.colCount,\n      xs: 1\n    };\n\n    that._cachedColCountOptions.push({\n      colCountByScreen: (0, _extend.extend)(baseColCountByScreen, options.colCountByScreen)\n    });\n\n    $element.appendTo($rootElement);\n\n    var instance = that._createComponent($element, \"dxLayoutManager\", config);\n\n    instance.on(\"autoColCountChanged\", function () {\n      that._refresh();\n    });\n\n    that._cachedLayoutManagers.push(instance);\n\n    return instance;\n  },\n  _getValidationGroup: function () {\n    return this.option(\"validationGroup\") || this;\n  },\n  _getLayoutManagerConfig: function (items, options) {\n    var _this2 = this;\n\n    var baseConfig = {\n      form: this,\n      isRoot: options.isRoot,\n      validationGroup: this._getValidationGroup(),\n      showRequiredMark: this.option(\"showRequiredMark\"),\n      showOptionalMark: this.option(\"showOptionalMark\"),\n      requiredMark: this.option(\"requiredMark\"),\n      optionalMark: this.option(\"optionalMark\"),\n      requiredMessage: this.option(\"requiredMessage\"),\n      screenByWidth: this.option(\"screenByWidth\"),\n      layoutData: this.option(\"formData\"),\n      labelLocation: this.option(\"labelLocation\"),\n      customizeItem: this.option(\"customizeItem\"),\n      minColWidth: this.option(\"minColWidth\"),\n      showColonAfterLabel: this.option(\"showColonAfterLabel\"),\n      onEditorEnterKey: this.option(\"onEditorEnterKey\"),\n      onFieldDataChanged: function (args) {\n        if (!_this2._isDataUpdating) {\n          _this2._triggerOnFieldDataChanged(args);\n        }\n      },\n      validationBoundary: this.option(\"scrollingEnabled\") ? this.$element() : void 0\n    };\n    return (0, _extend.extend)(baseConfig, {\n      items: items,\n      onContentReady: function (args) {\n        _this2._itemsRunTimeInfo.addItemsOrExtendFrom(args.component._itemsRunTimeInfo);\n\n        options.onContentReady && options.onContentReady(args);\n      },\n      onDisposing: function (_ref2) {\n        var component = _ref2.component;\n        var nestedItemsRunTimeInfo = component.getItemsRunTimeInfo();\n\n        _this2._itemsRunTimeInfo.removeItemsByItems(nestedItemsRunTimeInfo);\n      },\n      colCount: options.colCount,\n      alignItemLabels: options.alignItemLabels,\n      cssItemClass: options.cssItemClass,\n      colCountByScreen: options.colCountByScreen,\n      onLayoutChanged: options.onLayoutChanged,\n      width: options.width\n    });\n  },\n  _createComponent: function ($element, type, config) {\n    var that = this;\n    config = config || {};\n\n    that._extendConfig(config, {\n      readOnly: that.option(\"readOnly\")\n    });\n\n    return that.callBase($element, type, config);\n  },\n  _attachSyncSubscriptions: function () {\n    var that = this;\n    that.on(\"optionChanged\", function (args) {\n      var optionFullName = args.fullName;\n\n      if (\"formData\" === optionFullName) {\n        if (!(0, _type.isDefined)(args.value)) {\n          that._options.silent(\"formData\", args.value = {});\n        }\n\n        that._triggerOnFieldDataChangedByDataSet(args.value);\n      }\n\n      if (that._cachedLayoutManagers.length) {\n        (0, _iterator.each)(that._cachedLayoutManagers, function (index, layoutManager) {\n          if (\"formData\" === optionFullName) {\n            that._isDataUpdating = true;\n            layoutManager.option(\"layoutData\", args.value);\n            that._isDataUpdating = false;\n          }\n\n          if (\"readOnly\" === args.name || \"disabled\" === args.name) {\n            layoutManager.option(optionFullName, args.value);\n          }\n        });\n      }\n    });\n  },\n  _optionChanged: function (args) {\n    var rootNameOfComplexOption = this._getRootLevelOfExpectedComplexOption(args.fullName, [\"formData\", \"items\"]);\n\n    if (rootNameOfComplexOption) {\n      this._customHandlerOfComplexOption(args, rootNameOfComplexOption);\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"formData\":\n        if (!this.option(\"items\")) {\n          this._invalidate();\n        } else {\n          if ((0, _type.isEmptyObject)(args.value)) {\n            this._resetValues();\n          }\n        }\n\n        break;\n\n      case \"items\":\n      case \"colCount\":\n      case \"onFieldDataChanged\":\n      case \"onEditorEnterKey\":\n      case \"labelLocation\":\n      case \"alignItemLabels\":\n      case \"showColonAfterLabel\":\n      case \"customizeItem\":\n      case \"alignItemLabelsInAllGroups\":\n      case \"showRequiredMark\":\n      case \"showOptionalMark\":\n      case \"requiredMark\":\n      case \"optionalMark\":\n      case \"requiredMessage\":\n      case \"scrollingEnabled\":\n      case \"formID\":\n      case \"colCountByScreen\":\n      case \"screenByWidth\":\n      case \"stylingMode\":\n        this._invalidate();\n\n        break;\n\n      case \"showValidationSummary\":\n        this._renderValidationSummary();\n\n        break;\n\n      case \"minColWidth\":\n        if (\"auto\" === this.option(\"colCount\")) {\n          this._invalidate();\n        }\n\n        break;\n\n      case \"alignRootItemLabels\":\n      case \"readOnly\":\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._rootLayoutManager.option(args.name, args.value);\n\n        this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());\n\n        break;\n\n      case \"visible\":\n        this.callBase(args);\n\n        if (args.value) {\n          (0, _visibility_change.triggerShownEvent)(this.$element());\n        }\n\n        break;\n\n      case \"validationGroup\":\n        _validation_engine.default.removeGroup(args.previousValue || this);\n\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getRootLevelOfExpectedComplexOption: function (fullOptionName, expectedRootNames) {\n    var splitFullName = fullOptionName.split(\".\");\n    var result;\n\n    if (splitFullName.length > 1) {\n      var i;\n      var rootOptionName = splitFullName[0];\n\n      for (i = 0; i < expectedRootNames.length; i++) {\n        if (rootOptionName.search(expectedRootNames[i]) !== -1) {\n          result = expectedRootNames[i];\n        }\n      }\n    }\n\n    return result;\n  },\n  _tryCreateItemOptionAction: function (optionName, item, value, previousValue, itemPath) {\n    if (\"tabs\" === optionName) {\n      this._itemsRunTimeInfo.removeItemsByPathStartWith(\"\".concat(itemPath, \".tabs\"));\n\n      value = this._prepareItems(value, true, itemPath, true);\n    }\n\n    return (0, _uiForm2.default)(optionName, {\n      item: item,\n      value: value,\n      previousValue: previousValue,\n      itemsRunTimeInfo: this._itemsRunTimeInfo\n    });\n  },\n  _tryExecuteItemOptionAction: function (action) {\n    return action && action.tryExecute();\n  },\n  _updateValidationGroupAndSummaryIfNeeded: function (fullName) {\n    var optionName = (0, _uiForm4.getOptionNameFromFullName)(fullName);\n\n    if (ITEM_OPTIONS_FOR_VALIDATION_UPDATING.indexOf(optionName) > -1) {\n      _validation_engine.default.addGroup(this._getValidationGroup());\n\n      if (this.option(\"showValidationSummary\")) {\n        this._validationSummary && this._validationSummary._initGroupRegistration();\n      }\n    }\n  },\n  _setLayoutManagerItemOption: function (layoutManager, optionName, value, path) {\n    var _this3 = this;\n\n    if (this._updateLockCount > 0) {\n      !layoutManager._updateLockCount && layoutManager.beginUpdate();\n\n      var key = this._itemsRunTimeInfo.getKeyByPath(path);\n\n      this.postponedOperations.add(key, function () {\n        !layoutManager._disposed && layoutManager.endUpdate();\n        return new _deferred.Deferred().resolve();\n      });\n    }\n\n    var contentReadyHandler = function contentReadyHandler(e) {\n      e.component.off(\"contentReady\", contentReadyHandler);\n\n      if ((0, _uiForm4.isFullPathContainsTabs)(path)) {\n        var tabPath = (0, _uiForm4.tryGetTabPath)(path);\n\n        var tabLayoutManager = _this3._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(tabPath);\n\n        _this3._alignLabelsInColumn({\n          items: tabLayoutManager.option(\"items\"),\n          layoutManager: tabLayoutManager,\n          $container: tabLayoutManager.$element(),\n          inOneColumn: tabLayoutManager.isSingleColumnMode()\n        });\n      } else {\n        _this3._alignLabels(_this3._rootLayoutManager, _this3._rootLayoutManager.isSingleColumnMode());\n      }\n    };\n\n    layoutManager.on(\"contentReady\", contentReadyHandler);\n    layoutManager.option(optionName, value);\n\n    this._updateValidationGroupAndSummaryIfNeeded(optionName);\n  },\n  _tryChangeLayoutManagerItemOption: function (fullName, value) {\n    var nameParts = fullName.split(\".\");\n    var optionName = (0, _uiForm4.getOptionNameFromFullName)(fullName);\n\n    if (\"items\" === optionName && nameParts.length > 1) {\n      var itemPath = this._getItemPath(nameParts);\n\n      var layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(itemPath);\n\n      if (layoutManager) {\n        this._itemsRunTimeInfo.removeItemsByItems(layoutManager.getItemsRunTimeInfo());\n\n        var items = this._prepareItems(value, false, itemPath);\n\n        this._setLayoutManagerItemOption(layoutManager, optionName, items, itemPath);\n\n        return true;\n      }\n    } else {\n      if (nameParts.length > 2) {\n        var endPartIndex = nameParts.length - 2;\n\n        var _itemPath = this._getItemPath(nameParts.slice(0, endPartIndex));\n\n        var _layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(_itemPath);\n\n        if (_layoutManager) {\n          var fullOptionName = (0, _uiForm4.getFullOptionName)(nameParts[endPartIndex], optionName);\n\n          if (\"editorType\" === optionName) {\n            if (_layoutManager.option(fullOptionName) !== value) {\n              return false;\n            }\n          }\n\n          if (\"visible\" === optionName) {\n            var formItems = this.option((0, _uiForm4.getFullOptionName)(_itemPath, \"items\"));\n\n            if (formItems && formItems.length) {\n              var layoutManagerItems = _layoutManager.option(\"items\");\n\n              formItems.forEach(function (item, index) {\n                var layoutItem = layoutManagerItems[index];\n                layoutItem.visibleIndex = item.visibleIndex;\n              });\n            }\n          }\n\n          this._setLayoutManagerItemOption(_layoutManager, fullOptionName, value, _itemPath);\n\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n  _tryChangeLayoutManagerItemOptions: function (itemPath, options) {\n    var _this4 = this;\n\n    var result;\n    this.beginUpdate();\n    (0, _iterator.each)(options, function (optionName, optionValue) {\n      result = _this4._tryChangeLayoutManagerItemOption((0, _uiForm4.getFullOptionName)(itemPath, optionName), optionValue);\n\n      if (!result) {\n        return false;\n      }\n    });\n    this.endUpdate();\n    return result;\n  },\n  _customHandlerOfComplexOption: function (args, rootOptionName) {\n    var nameParts = args.fullName.split(\".\");\n    var value = args.value;\n\n    if (\"items\" === rootOptionName) {\n      var itemPath = this._getItemPath(nameParts);\n\n      var item = this.option(itemPath);\n      var optionNameWithoutPath = args.fullName.replace(itemPath + \".\", \"\");\n      var simpleOptionName = optionNameWithoutPath.split(\".\")[0].replace(/\\[\\d+]/, \"\");\n\n      var itemAction = this._tryCreateItemOptionAction(simpleOptionName, item, item[simpleOptionName], args.previousValue, itemPath);\n\n      if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(args.fullName, value)) {\n        if (item) {\n          this._changeItemOption(item, optionNameWithoutPath, value);\n\n          var items = this._generateItemsFromData(this.option(\"items\"));\n\n          this.option(\"items\", items);\n        }\n      }\n    }\n\n    if (\"formData\" === rootOptionName) {\n      var dataField = nameParts.slice(1).join(\".\");\n      var editor = this.getEditor(dataField);\n\n      if (editor) {\n        editor.option(\"value\", value);\n      } else {\n        this._triggerOnFieldDataChanged({\n          dataField: dataField,\n          value: value\n        });\n      }\n    }\n  },\n  _getItemPath: function (nameParts) {\n    var itemPath = nameParts[0];\n    var i;\n\n    for (i = 1; i < nameParts.length; i++) {\n      if (nameParts[i].search(/items\\[\\d+]|tabs\\[\\d+]/) !== -1) {\n        itemPath += \".\" + nameParts[i];\n      } else {\n        break;\n      }\n    }\n\n    return itemPath;\n  },\n  _triggerOnFieldDataChanged: function (args) {\n    this._createActionByOption(\"onFieldDataChanged\")(args);\n  },\n  _triggerOnFieldDataChangedByDataSet: function (data) {\n    var that = this;\n\n    if (data && (0, _type.isObject)(data)) {\n      (0, _iterator.each)(data, function (dataField, value) {\n        that._triggerOnFieldDataChanged({\n          dataField: dataField,\n          value: value\n        });\n      });\n    }\n  },\n  _updateFieldValue: function (dataField, value) {\n    if ((0, _type.isDefined)(this.option(\"formData\"))) {\n      var editor = this.getEditor(dataField);\n      this.option(\"formData.\" + dataField, value);\n\n      if (editor) {\n        var editorValue = editor.option(\"value\");\n\n        if (editorValue !== value) {\n          editor.option(\"value\", value);\n        }\n      }\n    }\n  },\n  _generateItemsFromData: function (items) {\n    var formData = this.option(\"formData\");\n    var result = [];\n\n    if (!items && (0, _type.isDefined)(formData)) {\n      (0, _iterator.each)(formData, function (dataField) {\n        result.push({\n          dataField: dataField\n        });\n      });\n    }\n\n    if (items) {\n      (0, _iterator.each)(items, function (index, item) {\n        if ((0, _type.isObject)(item)) {\n          result.push(item);\n        } else {\n          result.push({\n            dataField: item\n          });\n        }\n      });\n    }\n\n    return result;\n  },\n  _getItemByField: function (field, items) {\n    var that = this;\n    var fieldParts = (0, _type.isObject)(field) ? field : that._getFieldParts(field);\n    var fieldName = fieldParts.fieldName;\n    var fieldPath = fieldParts.fieldPath;\n    var resultItem;\n\n    if (items.length) {\n      (0, _iterator.each)(items, function (index, item) {\n        var itemType = item.itemType;\n\n        if (fieldPath.length) {\n          var path = fieldPath.slice();\n          item = that._getItemByFieldPath(path, fieldName, item);\n        } else {\n          if (\"group\" === itemType && !(item.caption || item.name) || \"tabbed\" === itemType && !item.name) {\n            var subItemsField = that._getSubItemField(itemType);\n\n            item.items = that._generateItemsFromData(item.items);\n            item = that._getItemByField({\n              fieldName: fieldName,\n              fieldPath: fieldPath\n            }, item[subItemsField]);\n          }\n        }\n\n        if ((0, _uiForm4.isExpectedItem)(item, fieldName)) {\n          resultItem = item;\n          return false;\n        }\n      });\n    }\n\n    return resultItem;\n  },\n  _getFieldParts: function (field) {\n    var fieldSeparator = \".\";\n    var fieldName = field;\n    var separatorIndex = fieldName.indexOf(fieldSeparator);\n    var resultPath = [];\n\n    while (separatorIndex !== -1) {\n      resultPath.push(fieldName.substr(0, separatorIndex));\n      fieldName = fieldName.substr(separatorIndex + 1);\n      separatorIndex = fieldName.indexOf(fieldSeparator);\n    }\n\n    return {\n      fieldName: fieldName,\n      fieldPath: resultPath.reverse()\n    };\n  },\n  _getItemByFieldPath: function (path, fieldName, item) {\n    var that = this;\n    var itemType = item.itemType;\n\n    var subItemsField = that._getSubItemField(itemType);\n\n    var isItemWithSubItems = \"group\" === itemType || \"tabbed\" === itemType || item.title;\n    var result;\n\n    do {\n      if (isItemWithSubItems) {\n        var name = item.name || item.caption || item.title;\n        var isGroupWithName = (0, _type.isDefined)(name);\n        var nameWithoutSpaces = (0, _uiForm4.getTextWithoutSpaces)(name);\n        var pathNode = void 0;\n        item[subItemsField] = that._generateItemsFromData(item[subItemsField]);\n\n        if (isGroupWithName) {\n          pathNode = path.pop();\n        }\n\n        if (!path.length) {\n          result = that._getItemByField(fieldName, item[subItemsField]);\n\n          if (result) {\n            break;\n          }\n        }\n\n        if (!isGroupWithName || isGroupWithName && nameWithoutSpaces === pathNode) {\n          if (path.length) {\n            result = that._searchItemInEverySubItem(path, fieldName, item[subItemsField]);\n          }\n        }\n      } else {\n        break;\n      }\n    } while (path.length && !(0, _type.isDefined)(result));\n\n    return result;\n  },\n  _getSubItemField: function (itemType) {\n    return \"tabbed\" === itemType ? \"tabs\" : \"items\";\n  },\n  _searchItemInEverySubItem: function (path, fieldName, items) {\n    var that = this;\n    var result;\n    (0, _iterator.each)(items, function (index, groupItem) {\n      result = that._getItemByFieldPath(path.slice(), fieldName, groupItem);\n\n      if (result) {\n        return false;\n      }\n    });\n\n    if (!result) {\n      result = false;\n    }\n\n    return result;\n  },\n  _changeItemOption: function (item, option, value) {\n    if ((0, _type.isObject)(item)) {\n      item[option] = value;\n    }\n  },\n  _dimensionChanged: function () {\n    var currentScreenFactor = this._getCurrentScreenFactor();\n\n    if (this._lastMarkupScreenFactor !== currentScreenFactor) {\n      if (this._isColCountChanged(this._lastMarkupScreenFactor, currentScreenFactor)) {\n        this._targetScreenFactor = currentScreenFactor;\n\n        this._refresh();\n\n        this._targetScreenFactor = void 0;\n      }\n\n      this._lastMarkupScreenFactor = currentScreenFactor;\n    }\n  },\n  _isColCountChanged: function (oldScreenSize, newScreenSize) {\n    var isChanged = false;\n    (0, _iterator.each)(this._cachedColCountOptions, function (index, item) {\n      if (item.colCountByScreen[oldScreenSize] !== item.colCountByScreen[newScreenSize]) {\n        isChanged = true;\n        return false;\n      }\n    });\n    return isChanged;\n  },\n  _refresh: function () {\n    var editorSelector = \".\" + FOCUSED_STATE_CLASS + \" input, .\" + FOCUSED_STATE_CLASS + \" textarea\";\n\n    _events_engine.default.trigger(this.$element().find(editorSelector), \"change\");\n\n    this.callBase();\n  },\n  _resetValues: function () {\n    this._itemsRunTimeInfo.each(function (_, itemRunTimeInfo) {\n      if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance) && itemRunTimeInfo.widgetInstance instanceof _editor.default) {\n        itemRunTimeInfo.widgetInstance.reset();\n        itemRunTimeInfo.widgetInstance.option(\"isValid\", true);\n      }\n    });\n\n    _validation_engine.default.resetGroup(this._getValidationGroup());\n  },\n  _updateData: function (data, value, isComplexData) {\n    var that = this;\n\n    var _data = isComplexData ? value : data;\n\n    if ((0, _type.isObject)(_data)) {\n      (0, _iterator.each)(_data, function (dataField, fieldValue) {\n        that._updateData(isComplexData ? data + \".\" + dataField : dataField, fieldValue, (0, _type.isObject)(fieldValue));\n      });\n    } else {\n      if ((0, _type.isString)(data)) {\n        that._updateFieldValue(data, value);\n      }\n    }\n  },\n  registerKeyHandler: function (key, handler) {\n    this.callBase(key, handler);\n\n    this._itemsRunTimeInfo.each(function (_, itemRunTimeInfo) {\n      if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance)) {\n        itemRunTimeInfo.widgetInstance.registerKeyHandler(key, handler);\n      }\n    });\n  },\n  _focusTarget: function () {\n    return this.$element().find(\".\" + _constants.FIELD_ITEM_CONTENT_CLASS + \" [tabindex]\").first();\n  },\n  _visibilityChanged: function (visible) {\n    if (visible && _browser.default.msie) {\n      this._refresh();\n    }\n  },\n  _dispose: function () {\n    _validation_engine.default.removeGroup(this._getValidationGroup());\n\n    this.callBase();\n  },\n  resetValues: function () {\n    this._resetValues();\n  },\n  updateData: function (data, value) {\n    this._updateData(data, value);\n  },\n  getEditor: function (dataField) {\n    return this._itemsRunTimeInfo.findWidgetInstanceByDataField(dataField) || this._itemsRunTimeInfo.findWidgetInstanceByName(dataField);\n  },\n  getButton: function (name) {\n    return this._itemsRunTimeInfo.findWidgetInstanceByName(name);\n  },\n  updateDimensions: function () {\n    var that = this;\n    var deferred = new _deferred.Deferred();\n\n    if (that._scrollable) {\n      that._scrollable.update().done(function () {\n        deferred.resolveWith(that);\n      });\n    } else {\n      deferred.resolveWith(that);\n    }\n\n    return deferred.promise();\n  },\n  itemOption: function (id, option, value) {\n    var _this5 = this;\n\n    var items = this._generateItemsFromData(this.option(\"items\"));\n\n    var item = this._getItemByField(id, items);\n\n    var path = (0, _uiForm4.getItemPath)(items, item);\n\n    if (!item) {\n      return;\n    }\n\n    switch (arguments.length) {\n      case 1:\n        return item;\n\n      case 3:\n        var itemAction = this._tryCreateItemOptionAction(option, item, value, item[option], path);\n\n        this._changeItemOption(item, option, value);\n\n        var fullName = (0, _uiForm4.getFullOptionName)(path, option);\n\n        if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(fullName, value)) {\n          this.option(\"items\", items);\n        }\n\n        break;\n\n      default:\n        if ((0, _type.isObject)(option)) {\n          if (!this._tryChangeLayoutManagerItemOptions(path, option)) {\n            var allowUpdateItems;\n            (0, _iterator.each)(option, function (optionName, optionValue) {\n              var itemAction = _this5._tryCreateItemOptionAction(optionName, item, optionValue, item[optionName], path);\n\n              _this5._changeItemOption(item, optionName, optionValue);\n\n              if (!allowUpdateItems && !_this5._tryExecuteItemOptionAction(itemAction)) {\n                allowUpdateItems = true;\n              }\n            });\n            allowUpdateItems && this.option(\"items\", items);\n          }\n        }\n\n    }\n  },\n  validate: function () {\n    return _validation_engine.default.validateGroup(this._getValidationGroup());\n  },\n  getItemID: function (name) {\n    return \"dx_\" + this.option(\"formID\") + \"_\" + (name || new _guid.default());\n  },\n  getTargetScreenFactor: function () {\n    return this._targetScreenFactor;\n  }\n});\n\n(0, _component_registrator.default)(\"dxForm\", Form);\nvar _default = Form;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/form/ui.form.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_component_registrator","_guid","_common","_type","_iterator","_array","_extend","_string","_browser","_visibility_change","_element","_message","_ui","_editor","_window","_validation_engine","_uiForm","_tab_panel","_ui2","_deferred","_themes","_uiForm2","_uiForm4","_constants","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","WIDGET_CLASS","FOCUSED_STATE_CLASS","ITEM_OPTIONS_FOR_VALIDATION_UPDATING","Form","inherit","_init","callBase","_cachedColCountOptions","_itemsRunTimeInfo","_groupsColCount","_attachSyncSubscriptions","_initOptions","options","screenByWidth","defaultScreenFactorFunc","_getDefaultOptions","extend","formID","formData","colCount","colCountByScreen","labelLocation","readOnly","onFieldDataChanged","customizeItem","onEditorEnterKey","minColWidth","alignItemLabels","alignItemLabelsInAllGroups","alignRootItemLabels","showColonAfterLabel","showRequiredMark","showOptionalMark","requiredMark","optionalMark","format","requiredMessage","getFormatter","showValidationSummary","items","scrollingEnabled","validationGroup","stylingMode","_defaultOptionsRules","concat","device","isMaterial","_setOptionsByReference","_optionsByReference","_getGroupColCount","$element","parseInt","attr","GROUP_COL_COUNT_ATTR","_createHiddenElement","rootLayoutManager","_$hiddenElement","addClass","HIDDEN_LABEL_CLASS","appendTo","$hiddenLabel","_renderLabel","text","location","_labelLocation","_hiddenLabelText","find","FIELD_ITEM_LABEL_TEXT_CLASS","_removeHiddenElement","remove","_getLabelWidthByText","innerHTML","offsetWidth","_getLabelsSelectorByCol","index","fieldItemClass","inOneColumn","FIELD_ITEM_CLASS","FORM_FIELD_ITEM_COL_CLASS","cssExcludeTabbedSelector","excludeTabbed","FIELD_ITEM_TAB_CLASS","childLabelContentSelector","FIELD_ITEM_LABEL_CLASS","FIELD_ITEM_LABEL_CONTENT_CLASS","_getLabelText","labelText","children","child","result","isEmpty","innerText","_applyLabelsWidthByCol","$container","$labelTexts","$labelTextsLength","labelWidth","maxWidth","style","width","_applyLabelsWidth","applyLabelsOptions","_getGroupElementsInColumn","columnIndex","cssColCountSelector","isDefined","GROUP_COL_COUNT_CLASS","groupSelector","FIELD_ITEM_CONTENT_CLASS","FORM_GROUP_CLASS","_applyLabelsWidthWithGroups","option","_alignRootSimpleItems","_applyLabelsWidthWithNestedGroups","$groups","eq","$rootSimpleItems","ROOT_SIMPLE_ITEM_CLASS","colIndex","groupsColIndex","groupColIndex","$groupsByCol","groupColCount","_alignLabelsInColumn","_ref","layoutManager","hasWindow","_checkGrouping","_getColCount","_prepareFormData","_initMarkup","addGroup","_getValidationGroup","_clearCachedInstances","FORM_CLASS","setAria","_renderScrollable","_renderLayout","_renderValidationSummary","_lastMarkupScreenFactor","_targetScreenFactor","_getCurrentScreenFactor","getCurrentScreenFactor","clear","_cachedLayoutManagers","_alignLabels","_clean","useNativeScrolling","_scrollable","useNative","useSimulatedScrollbar","useKeyboard","direction","bounceEnabled","_getContent","$content","$validationSummary","FORM_VALIDATION_SUMMARY","_$validationSummary","_validationSummary","dxValidationSummary","_prepareItems","parentIsTabbedItem","currentPath","isTabs","item","path","concatPaths","createItemPathByIndex","guid","add","itemIndex","isString","dataField","isObject","itemCopy","_tryPrepareGroupItem","_tryPrepareTabbedItem","_tryPrepareItemTemplate","cssItemClass","push","itemType","ensureDefined","template","groupContentTemplate","_getTemplate","_itemGroupTemplate","bind","_itemTabbedTemplate","tabs","that","_rootLayoutManager","_renderLayoutManager","isRoot","onLayoutChanged","onContentReady","e","component","isSingleColumnMode","_tryGetItemsForTemplate","_this","$tabPanel","tabPanelOptions","dataSource","onItemRendered","args","triggerShownEvent","itemElement","itemTemplate","itemData","container","extendRunTimeItemInfoByKey","tryUpdateTabPanelInstance","instance","forEach","widgetInstance","tabPanel","_createComponent","parent","FIELD_ITEM_CONTENT_HAS_TABS_CLASS","on","fullName","value","$group","toggleClass","FORM_GROUP_WITH_CAPTION_CLASS","caption","FIELD_ITEM_CONTENT_HAS_GROUP_CLASS","FORM_GROUP_CAPTION_CLASS","$groupContent","FORM_GROUP_CONTENT_CLASS","data","render","model","getPublicElement","inArray","$rootElement","config","_getLayoutManagerConfig","baseColCountByScreen","lg","md","sm","xs","_refresh","_this2","baseConfig","form","layoutData","_isDataUpdating","_triggerOnFieldDataChanged","validationBoundary","addItemsOrExtendFrom","onDisposing","_ref2","nestedItemsRunTimeInfo","getItemsRunTimeInfo","removeItemsByItems","type","_extendConfig","optionFullName","_options","silent","_triggerOnFieldDataChangedByDataSet","each","_optionChanged","rootNameOfComplexOption","_getRootLevelOfExpectedComplexOption","_customHandlerOfComplexOption","_invalidate","isEmptyObject","_resetValues","removeGroup","previousValue","fullOptionName","expectedRootNames","splitFullName","split","rootOptionName","search","_tryCreateItemOptionAction","optionName","itemPath","removeItemsByPathStartWith","itemsRunTimeInfo","_tryExecuteItemOptionAction","action","tryExecute","_updateValidationGroupAndSummaryIfNeeded","getOptionNameFromFullName","indexOf","_initGroupRegistration","_setLayoutManagerItemOption","_this3","_updateLockCount","beginUpdate","key","getKeyByPath","postponedOperations","_disposed","endUpdate","Deferred","resolve","contentReadyHandler","off","isFullPathContainsTabs","tabPath","tryGetTabPath","tabLayoutManager","getGroupOrTabLayoutManagerByPath","_tryChangeLayoutManagerItemOption","nameParts","_getItemPath","endPartIndex","_itemPath","_layoutManager","getFullOptionName","formItems","layoutManagerItems","layoutItem","visibleIndex","_tryChangeLayoutManagerItemOptions","_this4","optionValue","optionNameWithoutPath","replace","simpleOptionName","itemAction","_changeItemOption","_generateItemsFromData","join","editor","getEditor","_createActionByOption","_updateFieldValue","editorValue","_getItemByField","field","fieldParts","_getFieldParts","fieldName","fieldPath","resultItem","_getItemByFieldPath","subItemsField","_getSubItemField","isExpectedItem","fieldSeparator","separatorIndex","resultPath","substr","reverse","isItemWithSubItems","title","isGroupWithName","nameWithoutSpaces","getTextWithoutSpaces","pathNode","pop","_searchItemInEverySubItem","groupItem","_dimensionChanged","currentScreenFactor","_isColCountChanged","oldScreenSize","newScreenSize","isChanged","editorSelector","trigger","_","itemRunTimeInfo","reset","resetGroup","_updateData","isComplexData","_data","fieldValue","registerKeyHandler","handler","_focusTarget","first","_visibilityChanged","visible","msie","_dispose","resetValues","updateData","findWidgetInstanceByDataField","findWidgetInstanceByName","getButton","updateDimensions","deferred","update","done","resolveWith","promise","itemOption","id","_this5","getItemPath","arguments","allowUpdateItems","validate","validateGroup","getItemID","getTargetScreenFactor","_default","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,OAAO,CAACC,OAAR,GAAkB,KAAK,CAAvB;;AACA,IAAIC,SAAS,GAAGC,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAAtC;;AACA,IAAIC,cAAc,GAAGF,sBAAsB,CAACC,OAAO,CAAC,iCAAD,CAAR,CAA3C;;AACA,IAAIE,sBAAsB,GAAGH,sBAAsB,CAACC,OAAO,CAAC,kCAAD,CAAR,CAAnD;;AACA,IAAIG,KAAK,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,iBAAD,CAAR,CAAlC;;AACA,IAAII,OAAO,GAAGJ,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIK,KAAK,GAAGL,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIM,SAAS,GAAGN,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIO,MAAM,GAAGP,OAAO,CAAC,wBAAD,CAApB;;AACA,IAAIQ,OAAO,GAAGR,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIS,OAAO,GAAGT,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIU,QAAQ,GAAGX,sBAAsB,CAACC,OAAO,CAAC,0BAAD,CAAR,CAArC;;AACA,IAAIW,kBAAkB,GAAGX,OAAO,CAAC,gCAAD,CAAhC;;AACA,IAAIY,QAAQ,GAAGZ,OAAO,CAAC,oBAAD,CAAtB;;AACA,IAAIa,QAAQ,GAAGd,sBAAsB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAArC;;AACA,IAAIc,GAAG,GAAGf,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAAhC;;AACA,IAAIe,OAAO,GAAGhB,sBAAsB,CAACC,OAAO,CAAC,kBAAD,CAAR,CAApC;;AACA,IAAIgB,OAAO,GAAGhB,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIiB,kBAAkB,GAAGlB,sBAAsB,CAACC,OAAO,CAAC,sBAAD,CAAR,CAA/C;;AACA,IAAIkB,OAAO,GAAGnB,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAApC;;AACA,IAAImB,UAAU,GAAGpB,sBAAsB,CAACC,OAAO,CAAC,cAAD,CAAR,CAAvC;;AACA,IAAIoB,IAAI,GAAGrB,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAAjC;;AACA,IAAIqB,SAAS,GAAGrB,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIsB,OAAO,GAAGtB,OAAO,CAAC,WAAD,CAArB;;AACA,IAAIuB,QAAQ,GAAGxB,sBAAsB,CAACC,OAAO,CAAC,gCAAD,CAAR,CAArC;;AACAA,OAAO,CAAC,0BAAD,CAAP;;AACA,IAAIwB,QAAQ,GAAGxB,OAAO,CAAC,iBAAD,CAAtB;;AACAA,OAAO,CAAC,uBAAD,CAAP;;AACAA,OAAO,CAAC,qBAAD,CAAP;;AACA,IAAIyB,UAAU,GAAGzB,OAAO,CAAC,aAAD,CAAxB;;AAEA,SAASD,sBAAT,CAAgC2B,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AAED,SAASE,kBAAT,CAA4BC,GAA5B,EAAiC;AAC7B,SAAOC,kBAAkB,CAACD,GAAD,CAAlB,IAA2BE,gBAAgB,CAACF,GAAD,CAA3C,IAAoDG,2BAA2B,CAACH,GAAD,CAA/E,IAAwFI,kBAAkB,EAAjH;AACH;;AAED,SAASA,kBAAT,GAA8B;AAC1B,QAAM,IAAIC,SAAJ,CAAc,sIAAd,CAAN;AACH;;AAED,SAASF,2BAAT,CAAqCG,CAArC,EAAwCC,MAAxC,EAAgD;AAC5C,MAAI,CAACD,CAAL,EAAQ;AACJ;AACH;;AACD,MAAI,aAAa,OAAOA,CAAxB,EAA2B;AACvB,WAAOE,iBAAiB,CAACF,CAAD,EAAIC,MAAJ,CAAxB;AACH;;AACD,MAAIE,CAAC,GAAGC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BP,CAA/B,EAAkCQ,KAAlC,CAAwC,CAAxC,EAA2C,CAAC,CAA5C,CAAR;;AACA,MAAI,aAAaL,CAAb,IAAkBH,CAAC,CAACS,WAAxB,EAAqC;AACjCN,IAAAA,CAAC,GAAGH,CAAC,CAACS,WAAF,CAAcC,IAAlB;AACH;;AACD,MAAI,UAAUP,CAAV,IAAe,UAAUA,CAA7B,EAAgC;AAC5B,WAAOQ,KAAK,CAACC,IAAN,CAAWZ,CAAX,CAAP;AACH;;AACD,MAAI,gBAAgBG,CAAhB,IAAqB,2CAA2CU,IAA3C,CAAgDV,CAAhD,CAAzB,EAA6E;AACzE,WAAOD,iBAAiB,CAACF,CAAD,EAAIC,MAAJ,CAAxB;AACH;AACJ;;AAED,SAASL,gBAAT,CAA0BkB,IAA1B,EAAgC;AAC5B,MAAI,gBAAgB,OAAOC,MAAvB,IAAiCA,MAAM,CAACC,QAAP,IAAmBZ,MAAM,CAACU,IAAD,CAA9D,EAAsE;AAClE,WAAOH,KAAK,CAACC,IAAN,CAAWE,IAAX,CAAP;AACH;AACJ;;AAED,SAASnB,kBAAT,CAA4BD,GAA5B,EAAiC;AAC7B,MAAIiB,KAAK,CAACM,OAAN,CAAcvB,GAAd,CAAJ,EAAwB;AACpB,WAAOQ,iBAAiB,CAACR,GAAD,CAAxB;AACH;AACJ;;AAED,SAASQ,iBAAT,CAA2BR,GAA3B,EAAgCwB,GAAhC,EAAqC;AACjC,MAAI,QAAQA,GAAR,IAAeA,GAAG,GAAGxB,GAAG,CAACyB,MAA7B,EAAqC;AACjCD,IAAAA,GAAG,GAAGxB,GAAG,CAACyB,MAAV;AACH;;AACD,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,IAAI,GAAG,IAAIV,KAAJ,CAAUO,GAAV,CAAvB,EAAuCE,CAAC,GAAGF,GAA3C,EAAgDE,CAAC,EAAjD,EAAqD;AACjDC,IAAAA,IAAI,CAACD,CAAD,CAAJ,GAAU1B,GAAG,CAAC0B,CAAD,CAAb;AACH;;AACD,SAAOC,IAAP;AACH;;AACD,IAAIC,YAAY,GAAG,WAAnB;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,oCAAoC,GAAG,CAAC,OAAD,EAAU,YAAV,EAAwB,iBAAxB,EAA2C,SAA3C,CAA3C;;AACA,IAAIC,IAAI,GAAG9C,GAAG,CAACjB,OAAJ,CAAYgE,OAAZ,CAAoB;AAC3BC,EAAAA,KAAK,EAAE,YAAW;AACd,SAAKC,QAAL;AACA,SAAKC,sBAAL,GAA8B,EAA9B;AACA,SAAKC,iBAAL,GAAyB,IAAI/C,OAAO,CAACrB,OAAZ,EAAzB;AACA,SAAKqE,eAAL,GAAuB,EAAvB;;AACA,SAAKC,wBAAL;AACH,GAP0B;AAQ3BC,EAAAA,YAAY,EAAE,UAASC,OAAT,EAAkB;AAC5B,QAAI,EAAE,mBAAmBA,OAArB,CAAJ,EAAmC;AAC/BA,MAAAA,OAAO,CAACC,aAAR,GAAwBtD,OAAO,CAACuD,uBAAhC;AACH;;AACD,SAAKR,QAAL,CAAcM,OAAd;AACH,GAb0B;AAc3BG,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO,CAAC,GAAGhE,OAAO,CAACiE,MAAZ,EAAoB,KAAKV,QAAL,EAApB,EAAqC;AACxCW,MAAAA,MAAM,EAAE,QAAQ,IAAIvE,KAAK,CAACN,OAAV,EADwB;AAExC8E,MAAAA,QAAQ,EAAE,EAF8B;AAGxCC,MAAAA,QAAQ,EAAE,CAH8B;AAIxCN,MAAAA,aAAa,EAAE,IAJyB;AAKxCO,MAAAA,gBAAgB,EAAE,KAAK,CALiB;AAMxCC,MAAAA,aAAa,EAAE,MANyB;AAOxCC,MAAAA,QAAQ,EAAE,KAP8B;AAQxCC,MAAAA,kBAAkB,EAAE,IARoB;AASxCC,MAAAA,aAAa,EAAE,IATyB;AAUxCC,MAAAA,gBAAgB,EAAE,IAVsB;AAWxCC,MAAAA,WAAW,EAAE,GAX2B;AAYxCC,MAAAA,eAAe,EAAE,IAZuB;AAaxCC,MAAAA,0BAA0B,EAAE,IAbY;AAcxCC,MAAAA,mBAAmB,EAAE,IAdmB;AAexCC,MAAAA,mBAAmB,EAAE,IAfmB;AAgBxCC,MAAAA,gBAAgB,EAAE,IAhBsB;AAiBxCC,MAAAA,gBAAgB,EAAE,KAjBsB;AAkBxCC,MAAAA,YAAY,EAAE,GAlB0B;AAmBxCC,MAAAA,YAAY,EAAE9E,QAAQ,CAAChB,OAAT,CAAiB+F,MAAjB,CAAwB,qBAAxB,CAnB0B;AAoBxCC,MAAAA,eAAe,EAAEhF,QAAQ,CAAChB,OAAT,CAAiBiG,YAAjB,CAA8B,wBAA9B,CApBuB;AAqBxCC,MAAAA,qBAAqB,EAAE,KArBiB;AAsBxCC,MAAAA,KAAK,EAAE,KAAK,CAtB4B;AAuBxCC,MAAAA,gBAAgB,EAAE,KAvBsB;AAwBxCC,MAAAA,eAAe,EAAE,KAAK,CAxBkB;AAyBxCC,MAAAA,WAAW,EAAE,KAAK;AAzBsB,KAArC,CAAP;AA2BH,GA1C0B;AA2C3BC,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,WAAO,KAAKrC,QAAL,GAAgBsC,MAAhB,CAAuB,CAAC;AAC3BC,MAAAA,MAAM,EAAE,YAAW;AACf,eAAO,CAAC,GAAGhF,OAAO,CAACiF,UAAZ,GAAP;AACH,OAH0B;AAI3BlC,MAAAA,OAAO,EAAE;AACLkB,QAAAA,mBAAmB,EAAE,KADhB;AAELT,QAAAA,aAAa,EAAE;AAFV;AAJkB,KAAD,CAAvB,CAAP;AASH,GArD0B;AAsD3B0B,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKzC,QAAL;AACA,KAAC,GAAGvD,OAAO,CAACiE,MAAZ,EAAoB,KAAKgC,mBAAzB,EAA8C;AAC1C9B,MAAAA,QAAQ,EAAE,IADgC;AAE1CuB,MAAAA,eAAe,EAAE;AAFyB,KAA9C;AAIH,GA5D0B;AA6D3BQ,EAAAA,iBAAiB,EAAE,UAASC,QAAT,EAAmB;AAClC,WAAOC,QAAQ,CAACD,QAAQ,CAACE,IAAT,CAAcpF,UAAU,CAACqF,oBAAzB,CAAD,CAAf;AACH,GA/D0B;AAgE3BC,EAAAA,oBAAoB,EAAE,UAASC,iBAAT,EAA4B;AAC9C,SAAKC,eAAL,GAAuB,CAAC,GAAGnH,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCqH,QAAhC,CAAyCzD,YAAzC,EAAuDyD,QAAvD,CAAgEzF,UAAU,CAAC0F,kBAA3E,EAA+FC,QAA/F,CAAwG,MAAxG,CAAvB;;AACA,QAAIC,YAAY,GAAGL,iBAAiB,CAACM,YAAlB,CAA+B;AAC9CC,MAAAA,IAAI,EAAE,GADwC;AAE9CC,MAAAA,QAAQ,EAAE,KAAKC,cAAL;AAFoC,KAA/B,EAGhBL,QAHgB,CAGP,KAAKH,eAHE,CAAnB;;AAIA,SAAKS,gBAAL,GAAwBL,YAAY,CAACM,IAAb,CAAkB,MAAMlG,UAAU,CAACmG,2BAAnC,EAAgE,CAAhE,CAAxB;AACH,GAvE0B;AAwE3BC,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,SAAKZ,eAAL,CAAqBa,MAArB;;AACA,SAAKJ,gBAAL,GAAwB,IAAxB;AACH,GA3E0B;AA4E3BK,EAAAA,oBAAoB,EAAE,UAASR,IAAT,EAAe;AACjC,SAAKG,gBAAL,CAAsBM,SAAtB,GAAkCT,IAAlC;AACA,WAAO,KAAKG,gBAAL,CAAsBO,WAA7B;AACH,GA/E0B;AAgF3BC,EAAAA,uBAAuB,EAAE,UAASC,KAAT,EAAgB9D,OAAhB,EAAyB;AAC9CA,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,QAAI+D,cAAc,GAAG/D,OAAO,CAACgE,WAAR,GAAsB5G,UAAU,CAAC6G,gBAAjC,GAAoD7G,UAAU,CAAC8G,yBAAX,GAAuCJ,KAAhH;AACA,QAAIK,wBAAwB,GAAGnE,OAAO,CAACoE,aAAR,GAAwB,WAAWhH,UAAU,CAACiH,oBAAtB,GAA6C,GAArE,GAA2E,EAA1G;AACA,QAAIC,yBAAyB,GAAG,QAAQlH,UAAU,CAACmH,sBAAnB,GAA4C,MAA5C,GAAqDnH,UAAU,CAACoH,8BAAhG;AACA,WAAO,MAAMT,cAAN,GAAuBI,wBAAvB,GAAkDG,yBAAzD;AACH,GAtF0B;AAuF3BG,EAAAA,aAAa,EAAE,UAASC,SAAT,EAAoB;AAC/B,QAAIzF,MAAM,GAAGyF,SAAS,CAACC,QAAV,CAAmB1F,MAAhC;AACA,QAAI2F,KAAJ;AACA,QAAIC,MAAM,GAAG,EAAb;AACA,QAAI3F,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGD,MAAhB,EAAwBC,CAAC,EAAzB,EAA6B;AACzB0F,MAAAA,KAAK,GAAGF,SAAS,CAACC,QAAV,CAAmBzF,CAAnB,CAAR;AACA2F,MAAAA,MAAM,IAAI,CAAC,CAAC,GAAGzI,OAAO,CAAC0I,OAAZ,EAAqBF,KAAK,CAACG,SAA3B,CAAD,GAAyCH,KAAK,CAACG,SAA/C,GAA2DH,KAAK,CAACjB,SAA3E;AACH;;AACD,WAAOkB,MAAP;AACH,GAjG0B;AAkG3BG,EAAAA,sBAAsB,EAAE,UAASC,UAAT,EAAqBnB,KAArB,EAA4B9D,OAA5B,EAAqC;AACzD,QAAIkF,WAAW,GAAGD,UAAU,CAAC3B,IAAX,CAAgB,KAAKO,uBAAL,CAA6BC,KAA7B,EAAoC9D,OAApC,CAAhB,CAAlB;AACA,QAAImF,iBAAiB,GAAGD,WAAW,CAACjG,MAApC;AACA,QAAImG,UAAJ;AACA,QAAIlG,CAAJ;AACA,QAAImG,QAAQ,GAAG,CAAf;;AACA,SAAKnG,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGiG,iBAAhB,EAAmCjG,CAAC,EAApC,EAAwC;AACpCkG,MAAAA,UAAU,GAAG,KAAK1B,oBAAL,CAA0B,KAAKe,aAAL,CAAmBS,WAAW,CAAChG,CAAD,CAA9B,CAA1B,CAAb;;AACA,UAAIkG,UAAU,GAAGC,QAAjB,EAA2B;AACvBA,QAAAA,QAAQ,GAAGD,UAAX;AACH;AACJ;;AACD,SAAKlG,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGiG,iBAAhB,EAAmCjG,CAAC,EAApC,EAAwC;AACpCgG,MAAAA,WAAW,CAAChG,CAAD,CAAX,CAAeoG,KAAf,CAAqBC,KAArB,GAA6BF,QAAQ,GAAG,IAAxC;AACH;AACJ,GAjH0B;AAkH3BG,EAAAA,iBAAiB,EAAE,UAASP,UAAT,EAAqBb,aAArB,EAAoCJ,WAApC,EAAiDzD,QAAjD,EAA2D;AAC1EA,IAAAA,QAAQ,GAAGyD,WAAW,GAAG,CAAH,GAAOzD,QAAQ,IAAI,KAAK8B,iBAAL,CAAuB4C,UAAvB,CAAzC;AACA,QAAIQ,kBAAkB,GAAG;AACrBrB,MAAAA,aAAa,EAAEA,aADM;AAErBJ,MAAAA,WAAW,EAAEA;AAFQ,KAAzB;AAIA,QAAI9E,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGqB,QAAhB,EAA0BrB,CAAC,EAA3B,EAA+B;AAC3B,WAAK8F,sBAAL,CAA4BC,UAA5B,EAAwC/F,CAAxC,EAA2CuG,kBAA3C;AACH;AACJ,GA5H0B;AA6H3BC,EAAAA,yBAAyB,EAAE,UAAST,UAAT,EAAqBU,WAArB,EAAkCpF,QAAlC,EAA4C;AACnE,QAAIqF,mBAAmB,GAAG,CAAC,GAAG5J,KAAK,CAAC6J,SAAV,EAAqBtF,QAArB,IAAiC,MAAMnD,UAAU,CAAC0I,qBAAjB,GAAyCvF,QAA1E,GAAqF,EAA/G;AACA,QAAIwF,aAAa,GAAG,MAAM3I,UAAU,CAAC8G,yBAAjB,GAA6CyB,WAA7C,GAA2D,MAA3D,GAAoEvI,UAAU,CAAC4I,wBAA/E,GAA0G,MAA1G,GAAmH5I,UAAU,CAAC6I,gBAA9H,GAAiJL,mBAArK;AACA,WAAOX,UAAU,CAAC3B,IAAX,CAAgByC,aAAhB,CAAP;AACH,GAjI0B;AAkI3BG,EAAAA,2BAA2B,EAAE,UAASjB,UAAT,EAAqB1E,QAArB,EAA+B6D,aAA/B,EAA8C;AACvE,QAAI,SAAS,KAAK+B,MAAL,CAAY,qBAAZ,CAAb,EAAiD;AAC7C,WAAKC,qBAAL,CAA2BnB,UAA3B,EAAuC1E,QAAvC,EAAiD6D,aAAjD;AACH;;AACD,QAAIpD,0BAA0B,GAAG,KAAKmF,MAAL,CAAY,4BAAZ,CAAjC;;AACA,QAAInF,0BAAJ,EAAgC;AAC5B,WAAKqF,iCAAL,CAAuCpB,UAAvC,EAAmD1E,QAAnD,EAA6D6D,aAA7D;AACH,KAFD,MAEO;AACH,UAAIkC,OAAO,GAAG,KAAKhE,QAAL,GAAgBgB,IAAhB,CAAqB,MAAMlG,UAAU,CAAC6I,gBAAtC,CAAd;AACA,UAAI/G,CAAJ;;AACA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGoH,OAAO,CAACrH,MAAxB,EAAgCC,CAAC,EAAjC,EAAqC;AACjC,aAAKsG,iBAAL,CAAuBc,OAAO,CAACC,EAAR,CAAWrH,CAAX,CAAvB,EAAsCkF,aAAtC;AACH;AACJ;AACJ,GAhJ0B;AAiJ3BgC,EAAAA,qBAAqB,EAAE,UAASnB,UAAT,EAAqB1E,QAArB,EAA+B6D,aAA/B,EAA8C;AACjE,QAAIoC,gBAAgB,GAAGvB,UAAU,CAAC3B,IAAX,CAAgB,IAAItB,MAAJ,CAAW5E,UAAU,CAACqJ,sBAAtB,CAAhB,CAAvB;;AACA,SAAK,IAAIC,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGnG,QAAlC,EAA4CmG,QAAQ,EAApD,EAAwD;AACpD,WAAK1B,sBAAL,CAA4BwB,gBAA5B,EAA8CE,QAA9C,EAAwDtC,aAAxD;AACH;AACJ,GAtJ0B;AAuJ3BiC,EAAAA,iCAAiC,EAAE,UAASpB,UAAT,EAAqB1E,QAArB,EAA+B6D,aAA/B,EAA8C;AAC7E,QAAIqB,kBAAkB,GAAG;AACrBrB,MAAAA,aAAa,EAAEA;AADM,KAAzB;AAGA,QAAIsC,QAAJ;AACA,QAAIC,cAAJ;AACA,QAAIC,aAAJ;AACA,QAAIC,YAAJ;;AACA,SAAKH,QAAQ,GAAG,CAAhB,EAAmBA,QAAQ,GAAGnG,QAA9B,EAAwCmG,QAAQ,EAAhD,EAAoD;AAChDG,MAAAA,YAAY,GAAG,KAAKnB,yBAAL,CAA+BT,UAA/B,EAA2CyB,QAA3C,CAAf;;AACA,WAAK1B,sBAAL,CAA4B6B,YAA5B,EAA0C,CAA1C,EAA6CpB,kBAA7C;;AACA,WAAKkB,cAAc,GAAG,CAAtB,EAAyBA,cAAc,GAAG,KAAK9G,eAAL,CAAqBZ,MAA/D,EAAuE0H,cAAc,EAArF,EAAyF;AACrFE,QAAAA,YAAY,GAAG,KAAKnB,yBAAL,CAA+BT,UAA/B,EAA2CyB,QAA3C,EAAqD,KAAK7G,eAAL,CAAqB8G,cAArB,CAArD,CAAf;;AACA,YAAIG,aAAa,GAAG,KAAKzE,iBAAL,CAAuBwE,YAAvB,CAApB;;AACA,aAAKD,aAAa,GAAG,CAArB,EAAwBA,aAAa,GAAGE,aAAxC,EAAuDF,aAAa,EAApE,EAAwE;AACpE,eAAK5B,sBAAL,CAA4B6B,YAA5B,EAA0CD,aAA1C,EAAyDnB,kBAAzD;AACH;AACJ;AACJ;AACJ,GA1K0B;AA2K3BrC,EAAAA,cAAc,EAAE,YAAW;AACvB,WAAO,KAAK+C,MAAL,CAAY,eAAZ,CAAP;AACH,GA7K0B;AA8K3BY,EAAAA,oBAAoB,EAAE,UAASC,IAAT,EAAe;AACjC,QAAIC,aAAa,GAAGD,IAAI,CAACC,aAAzB;AAAA,QACIjD,WAAW,GAAGgD,IAAI,CAAChD,WADvB;AAAA,QAEIiB,UAAU,GAAG+B,IAAI,CAAC/B,UAFtB;AAAA,QAGIb,aAAa,GAAG4C,IAAI,CAAC5C,aAHzB;AAAA,QAIIzC,KAAK,GAAGqF,IAAI,CAACrF,KAJjB;;AAKA,QAAI,CAAC,CAAC,GAAGhF,OAAO,CAACuK,SAAZ,GAAD,IAA6B,UAAU,KAAK9D,cAAL,EAA3C,EAAkE;AAC9D;AACH;;AACD,SAAKV,oBAAL,CAA0BuE,aAA1B;;AACA,QAAIjD,WAAJ,EAAiB;AACb,WAAKwB,iBAAL,CAAuBP,UAAvB,EAAmCb,aAAnC,EAAkD,IAAlD;AACH,KAFD,MAEO;AACH,UAAI,KAAK+C,cAAL,CAAoBxF,KAApB,CAAJ,EAAgC;AAC5B,aAAKuE,2BAAL,CAAiCjB,UAAjC,EAA6CgC,aAAa,CAACG,YAAd,EAA7C,EAA2EhD,aAA3E;AACH,OAFD,MAEO;AACH,aAAKoB,iBAAL,CAAuBP,UAAvB,EAAmCb,aAAnC,EAAkD,KAAlD,EAAyD6C,aAAa,CAACG,YAAd,EAAzD;AACH;AACJ;;AACD,SAAK5D,oBAAL;AACH,GAlM0B;AAmM3B6D,EAAAA,gBAAgB,EAAE,YAAW;AACzB,QAAI,CAAC,CAAC,GAAGrL,KAAK,CAAC6J,SAAV,EAAqB,KAAKM,MAAL,CAAY,UAAZ,CAArB,CAAL,EAAoD;AAChD,WAAKA,MAAL,CAAY,UAAZ,EAAwB,EAAxB;AACH;AACJ,GAvM0B;AAwM3BmB,EAAAA,WAAW,EAAE,YAAW;AACpB1K,IAAAA,kBAAkB,CAACpB,OAAnB,CAA2B+L,QAA3B,CAAoC,KAAKC,mBAAL,EAApC;;AACA,SAAKC,qBAAL;;AACA,SAAKJ,gBAAL;;AACA,SAAK/E,QAAL,GAAgBO,QAAhB,CAAyBzF,UAAU,CAACsK,UAApC;AACA,SAAKhI,QAAL;AACA,SAAKiI,OAAL,CAAa,MAAb,EAAqB,MAArB,EAA6B,KAAKrF,QAAL,EAA7B;;AACA,QAAI,KAAK6D,MAAL,CAAY,kBAAZ,CAAJ,EAAqC;AACjC,WAAKyB,iBAAL;AACH;;AACD,SAAKC,aAAL;;AACA,SAAKC,wBAAL;;AACA,SAAKC,uBAAL,GAA+B,KAAKC,mBAAL,IAA4B,KAAKC,uBAAL,EAA3D;AACH,GArN0B;AAsN3BA,EAAAA,uBAAuB,EAAE,YAAW;AAChC,WAAO,CAAC,GAAGtL,OAAO,CAACuK,SAAZ,MAA2B,CAAC,GAAGvK,OAAO,CAACuL,sBAAZ,EAAoC,KAAK/B,MAAL,CAAY,eAAZ,CAApC,CAA3B,GAA+F,IAAtG;AACH,GAxN0B;AAyN3BsB,EAAAA,qBAAqB,EAAE,YAAW;AAC9B,SAAK7H,iBAAL,CAAuBuI,KAAvB;;AACA,SAAKC,qBAAL,GAA6B,EAA7B;AACH,GA5N0B;AA6N3BC,EAAAA,YAAY,EAAE,UAASpB,aAAT,EAAwBjD,WAAxB,EAAqC;AAC/C,SAAK+C,oBAAL,CAA0B;AACtB9B,MAAAA,UAAU,EAAE,KAAK3C,QAAL,EADU;AAEtB2E,MAAAA,aAAa,EAAEA,aAFO;AAGtB7C,MAAAA,aAAa,EAAE,IAHO;AAItBzC,MAAAA,KAAK,EAAE,KAAKwE,MAAL,CAAY,OAAZ,CAJe;AAKtBnC,MAAAA,WAAW,EAAEA;AALS,KAA1B;AAOH,GArO0B;AAsO3BsE,EAAAA,MAAM,EAAE,YAAW;AACf,SAAK5I,QAAL;AACA,SAAKG,eAAL,GAAuB,EAAvB;AACA,SAAKF,sBAAL,GAA8B,EAA9B;AACA,SAAKoI,uBAAL,GAA+B,KAAK,CAApC;AACH,GA3O0B;AA4O3BH,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,QAAIW,kBAAkB,GAAG,KAAKpC,MAAL,CAAY,oBAAZ,CAAzB;AACA,SAAKqC,WAAL,GAAmB,IAAIzL,IAAI,CAACvB,OAAT,CAAiB,KAAK8G,QAAL,EAAjB,EAAkC;AACjDmG,MAAAA,SAAS,EAAE,CAAC,CAACF,kBADoC;AAEjDG,MAAAA,qBAAqB,EAAE,CAACH,kBAFyB;AAGjDI,MAAAA,WAAW,EAAE,KAHoC;AAIjDC,MAAAA,SAAS,EAAE,MAJsC;AAKjDC,MAAAA,aAAa,EAAE;AALkC,KAAlC,CAAnB;AAOH,GArP0B;AAsP3BC,EAAAA,WAAW,EAAE,YAAW;AACpB,WAAO,KAAK3C,MAAL,CAAY,kBAAZ,IAAkC,KAAKqC,WAAL,CAAiBO,QAAjB,EAAlC,GAAgE,KAAKzG,QAAL,EAAvE;AACH,GAxP0B;AAyP3BwF,EAAAA,wBAAwB,EAAE,YAAW;AACjC,QAAIkB,kBAAkB,GAAG,KAAK1G,QAAL,GAAgBgB,IAAhB,CAAqB,MAAMlG,UAAU,CAAC6L,uBAAtC,CAAzB;;AACA,QAAID,kBAAkB,CAAC/J,MAAnB,GAA4B,CAAhC,EAAmC;AAC/B+J,MAAAA,kBAAkB,CAACvF,MAAnB;AACH;;AACD,QAAI,KAAK0C,MAAL,CAAY,uBAAZ,CAAJ,EAA0C;AACtC,UAAI+C,mBAAmB,GAAG,CAAC,GAAGzN,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCqH,QAAhC,CAAyCzF,UAAU,CAAC6L,uBAApD,EAA6ElG,QAA7E,CAAsF,KAAK+F,WAAL,EAAtF,CAA1B;;AACA,WAAKK,kBAAL,GAA0BD,mBAAmB,CAACE,mBAApB,CAAwC;AAC9DvH,QAAAA,eAAe,EAAE,KAAK2F,mBAAL;AAD6C,OAAxC,EAEvB4B,mBAFuB,CAEH,UAFG,CAA1B;AAGH;AACJ,GApQ0B;AAqQ3BC,EAAAA,aAAa,EAAE,UAAS1H,KAAT,EAAgB2H,kBAAhB,EAAoCC,WAApC,EAAiDC,MAAjD,EAAyD;AACpE,QAAI7H,KAAJ,EAAW;AACP,UAAIkD,MAAM,GAAG,EAAb;;AACA,WAAK,IAAI3F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyC,KAAK,CAAC1C,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACnC,YAAIuK,IAAI,GAAG9H,KAAK,CAACzC,CAAD,CAAhB;AACA,YAAIwK,IAAI,GAAG,CAAC,GAAGvM,QAAQ,CAACwM,WAAb,EAA0BJ,WAA1B,EAAuC,CAAC,GAAGpM,QAAQ,CAACyM,qBAAb,EAAoC1K,CAApC,EAAuCsK,MAAvC,CAAvC,CAAX;;AACA,YAAIK,IAAI,GAAG,KAAKjK,iBAAL,CAAuBkK,GAAvB,CAA2B;AAClCL,UAAAA,IAAI,EAAEA,IAD4B;AAElCM,UAAAA,SAAS,EAAE7K,CAFuB;AAGlCwK,UAAAA,IAAI,EAAEA;AAH4B,SAA3B,CAAX;;AAKA,YAAI,CAAC,GAAG1N,KAAK,CAACgO,QAAV,EAAoBP,IAApB,CAAJ,EAA+B;AAC3BA,UAAAA,IAAI,GAAG;AACHQ,YAAAA,SAAS,EAAER;AADR,WAAP;AAGH;;AACD,YAAI,CAAC,GAAGzN,KAAK,CAACkO,QAAV,EAAoBT,IAApB,CAAJ,EAA+B;AAC3B,cAAIU,QAAQ,GAAG,CAAC,GAAGhO,OAAO,CAACiE,MAAZ,EAAoB,EAApB,EAAwBqJ,IAAxB,CAAf;AACAU,UAAAA,QAAQ,CAACN,IAAT,GAAgBA,IAAhB;;AACA,eAAKO,oBAAL,CAA0BD,QAA1B;;AACA,eAAKE,qBAAL,CAA2BF,QAA3B,EAAqCT,IAArC;;AACA,eAAKY,uBAAL,CAA6BH,QAA7B;;AACA,cAAIb,kBAAJ,EAAwB;AACpBa,YAAAA,QAAQ,CAACI,YAAT,GAAwBnN,UAAU,CAACiH,oBAAnC;AACH;;AACD,cAAI8F,QAAQ,CAACxI,KAAb,EAAoB;AAChBwI,YAAAA,QAAQ,CAACxI,KAAT,GAAiB,KAAK0H,aAAL,CAAmBc,QAAQ,CAACxI,KAA5B,EAAmC2H,kBAAnC,EAAuDI,IAAvD,CAAjB;AACH;;AACD7E,UAAAA,MAAM,CAAC2F,IAAP,CAAYL,QAAZ;AACH,SAbD,MAaO;AACHtF,UAAAA,MAAM,CAAC2F,IAAP,CAAYf,IAAZ;AACH;AACJ;;AACD,aAAO5E,MAAP;AACH;AACJ,GAxS0B;AAyS3BuF,EAAAA,oBAAoB,EAAE,UAASX,IAAT,EAAe;AACjC,QAAI,YAAYA,IAAI,CAACgB,QAArB,EAA+B;AAC3BhB,MAAAA,IAAI,CAAC1I,eAAL,GAAuB,CAAC,GAAGhF,OAAO,CAAC2O,aAAZ,EAA2BjB,IAAI,CAAC1I,eAAhC,EAAiD,IAAjD,CAAvB;;AACA,UAAI0I,IAAI,CAACkB,QAAT,EAAmB;AACflB,QAAAA,IAAI,CAACmB,oBAAL,GAA4B,KAAKC,YAAL,CAAkBpB,IAAI,CAACkB,QAAvB,CAA5B;AACH;;AACDlB,MAAAA,IAAI,CAACkB,QAAL,GAAgB,KAAKG,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,EAAmCtB,IAAnC,CAAhB;AACH;AACJ,GAjT0B;AAkT3BY,EAAAA,qBAAqB,EAAE,UAASZ,IAAT,EAAeC,IAAf,EAAqB;AACxC,QAAI,aAAaD,IAAI,CAACgB,QAAtB,EAAgC;AAC5BhB,MAAAA,IAAI,CAACkB,QAAL,GAAgB,KAAKK,mBAAL,CAAyBD,IAAzB,CAA8B,IAA9B,EAAoCtB,IAApC,CAAhB;AACAA,MAAAA,IAAI,CAACwB,IAAL,GAAY,KAAK5B,aAAL,CAAmBI,IAAI,CAACwB,IAAxB,EAA8B,IAA9B,EAAoCvB,IAApC,EAA0C,IAA1C,CAAZ;AACH;AACJ,GAvT0B;AAwT3BY,EAAAA,uBAAuB,EAAE,UAASb,IAAT,EAAe;AACpC,QAAIA,IAAI,CAACkB,QAAT,EAAmB;AACflB,MAAAA,IAAI,CAACkB,QAAL,GAAgB,KAAKE,YAAL,CAAkBpB,IAAI,CAACkB,QAAvB,CAAhB;AACH;AACJ,GA5T0B;AA6T3BxD,EAAAA,cAAc,EAAE,UAASxF,KAAT,EAAgB;AAC5B,QAAIA,KAAJ,EAAW;AACP,WAAK,IAAIzC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyC,KAAK,CAAC1C,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACnC,YAAIuK,IAAI,GAAG9H,KAAK,CAACzC,CAAD,CAAhB;;AACA,YAAI,YAAYuK,IAAI,CAACgB,QAArB,EAA+B;AAC3B,iBAAO,IAAP;AACH;AACJ;AACJ;AACJ,GAtU0B;AAuU3B5C,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAIqD,IAAI,GAAG,IAAX;AACA,QAAIvJ,KAAK,GAAGuJ,IAAI,CAAC/E,MAAL,CAAY,OAAZ,CAAZ;;AACA,QAAI4C,QAAQ,GAAGmC,IAAI,CAACpC,WAAL,EAAf;;AACAnH,IAAAA,KAAK,GAAGuJ,IAAI,CAAC7B,aAAL,CAAmB1H,KAAnB,CAAR;AACAuJ,IAAAA,IAAI,CAACC,kBAAL,GAA0BD,IAAI,CAACE,oBAAL,CAA0BzJ,KAA1B,EAAiCoH,QAAjC,EAA2C;AACjEsC,MAAAA,MAAM,EAAE,IADyD;AAEjE9K,MAAAA,QAAQ,EAAE2K,IAAI,CAAC/E,MAAL,CAAY,UAAZ,CAFuD;AAGjEpF,MAAAA,eAAe,EAAEmK,IAAI,CAAC/E,MAAL,CAAY,iBAAZ,CAHgD;AAIjElG,MAAAA,aAAa,EAAE,KAAKkG,MAAL,CAAY,eAAZ,CAJkD;AAKjE3F,MAAAA,gBAAgB,EAAE,KAAK2F,MAAL,CAAY,kBAAZ,CAL+C;AAMjEmF,MAAAA,eAAe,EAAE,UAAStH,WAAT,EAAsB;AACnCkH,QAAAA,IAAI,CAAC7C,YAAL,CAAkB0C,IAAlB,CAAuBG,IAAvB,EAA6BA,IAAI,CAACC,kBAAlC,EAAsDnH,WAAtD;AACH,OARgE;AASjEuH,MAAAA,cAAc,EAAE,UAASC,CAAT,EAAY;AACxBN,QAAAA,IAAI,CAAC7C,YAAL,CAAkBmD,CAAC,CAACC,SAApB,EAA+BD,CAAC,CAACC,SAAF,CAAYC,kBAAZ,EAA/B;AACH;AAXgE,KAA3C,CAA1B;AAaH,GAzV0B;AA0V3BC,EAAAA,uBAAuB,EAAE,UAASlC,IAAT,EAAe;AACpC,WAAOA,IAAI,CAAC9H,KAAL,IAAc,EAArB;AACH,GA5V0B;AA6V3BqJ,EAAAA,mBAAmB,EAAE,UAASvB,IAAT,EAAe+B,CAAf,EAAkBvG,UAAlB,EAA8B;AAC/C,QAAI2G,KAAK,GAAG,IAAZ;;AACA,QAAIC,SAAS,GAAG,CAAC,GAAGpQ,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCuH,QAAhC,CAAyCkC,UAAzC,CAAhB;AACA,QAAI6G,eAAe,GAAG,CAAC,GAAG3P,OAAO,CAACiE,MAAZ,EAAoB,EAApB,EAAwBqJ,IAAI,CAACqC,eAA7B,EAA8C;AAChEC,MAAAA,UAAU,EAAEtC,IAAI,CAACwB,IAD+C;AAEhEe,MAAAA,cAAc,EAAE,UAASC,IAAT,EAAe;AAC3B,eAAO,CAAC,GAAG3P,kBAAkB,CAAC4P,iBAAvB,EAA0CD,IAAI,CAACE,WAA/C,CAAP;AACH,OAJ+D;AAKhEC,MAAAA,YAAY,EAAE,UAASC,QAAT,EAAmBb,CAAnB,EAAsBc,SAAtB,EAAiC;AAC3C,YAAIrH,UAAU,GAAG,CAAC,GAAGxJ,SAAS,CAACD,OAAd,EAAuB8Q,SAAvB,CAAjB;AACA,YAAIvL,eAAe,GAAG,CAAC,GAAGhF,OAAO,CAAC2O,aAAZ,EAA2B2B,QAAQ,CAACtL,eAApC,EAAqD,IAArD,CAAtB;;AACA,YAAIkG,aAAa,GAAG2E,KAAK,CAACR,oBAAN,CAA2BQ,KAAK,CAACD,uBAAN,CAA8BU,QAA9B,CAA3B,EAAoEpH,UAApE,EAAgF;AAChG1E,UAAAA,QAAQ,EAAE8L,QAAQ,CAAC9L,QAD6E;AAEhGQ,UAAAA,eAAe,EAAEA,eAF+E;AAGhGd,UAAAA,aAAa,EAAE2L,KAAK,CAACzF,MAAN,CAAa,eAAb,CAHiF;AAIhG3F,UAAAA,gBAAgB,EAAE6L,QAAQ,CAAC7L,gBAJqE;AAKhG+J,UAAAA,YAAY,EAAE8B,QAAQ,CAAC9B,YALyE;AAMhGe,UAAAA,eAAe,EAAE,UAAStH,WAAT,EAAsB;AACnC4H,YAAAA,KAAK,CAAC7E,oBAAN,CAA2B;AACvB9B,cAAAA,UAAU,EAAEA,UADW;AAEvBgC,cAAAA,aAAa,EAAEA,aAFQ;AAGvBtF,cAAAA,KAAK,EAAE0K,QAAQ,CAAC1K,KAHO;AAIvBqC,cAAAA,WAAW,EAAEA;AAJU,aAA3B;AAMH;AAb+F,SAAhF,CAApB;;AAeA,YAAI4H,KAAK,CAAChM,iBAAV,EAA6B;AACzBgM,UAAAA,KAAK,CAAChM,iBAAN,CAAwB2M,0BAAxB,CAAmDF,QAAQ,CAACxC,IAA5D,EAAkE;AAC9D5C,YAAAA,aAAa,EAAEA;AAD+C,WAAlE;AAGH;;AACD,YAAIlG,eAAJ,EAAqB;AACjB6K,UAAAA,KAAK,CAAC7E,oBAAN,CAA2B;AACvB9B,YAAAA,UAAU,EAAEA,UADW;AAEvBgC,YAAAA,aAAa,EAAEA,aAFQ;AAGvBtF,YAAAA,KAAK,EAAE0K,QAAQ,CAAC1K,KAHO;AAIvBqC,YAAAA,WAAW,EAAEiD,aAAa,CAACyE,kBAAd;AAJU,WAA3B;AAMH;AACJ;AApC+D,KAA9C,CAAtB;;AAsCA,QAAIc,yBAAyB,GAAG,UAAS7K,KAAT,EAAgB8K,QAAhB,EAA0B;AACtD,UAAIhO,KAAK,CAACM,OAAN,CAAc4C,KAAd,CAAJ,EAA0B;AACtBA,QAAAA,KAAK,CAAC+K,OAAN,CAAc,UAASjD,IAAT,EAAe;AACzB,iBAAOmC,KAAK,CAAChM,iBAAN,CAAwB2M,0BAAxB,CAAmD9C,IAAI,CAACI,IAAxD,EAA8D;AACjE8C,YAAAA,cAAc,EAAEF;AADiD,WAA9D,CAAP;AAGH,SAJD;AAKH;AACJ,KARD;;AASA,QAAIG,QAAQ,GAAG,KAAKC,gBAAL,CAAsBhB,SAAtB,EAAiC/O,UAAU,CAACtB,OAA5C,EAAqDsQ,eAArD,CAAf;;AACA,KAAC,GAAGrQ,SAAS,CAACD,OAAd,EAAuByJ,UAAvB,EAAmC6H,MAAnC,GAA4CjK,QAA5C,CAAqDzF,UAAU,CAAC2P,iCAAhE;AACAH,IAAAA,QAAQ,CAACI,EAAT,CAAY,eAAZ,EAA6B,UAASxB,CAAT,EAAY;AACrC,UAAI,iBAAiBA,CAAC,CAACyB,QAAvB,EAAiC;AAC7BT,QAAAA,yBAAyB,CAAChB,CAAC,CAAC0B,KAAH,EAAU1B,CAAC,CAACC,SAAZ,CAAzB;AACH;AACJ,KAJD;AAKAe,IAAAA,yBAAyB,CAAC,CAAC;AACvB3C,MAAAA,IAAI,EAAEJ,IAAI,CAACI;AADY,KAAD,EAEvB7H,MAFuB,CAEhBzE,kBAAkB,CAACkM,IAAI,CAACwB,IAAN,CAFF,CAAD,EAEiB2B,QAFjB,CAAzB;AAGH,GAzZ0B;AA0Z3B9B,EAAAA,kBAAkB,EAAE,UAASrB,IAAT,EAAe+B,CAAf,EAAkBvG,UAAlB,EAA8B;AAC9C,QAAIkI,MAAM,GAAG,CAAC,GAAG1R,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC4R,WAAhC,CAA4ChQ,UAAU,CAACiQ,6BAAvD,EAAsF,CAAC,GAAGrR,KAAK,CAAC6J,SAAV,EAAqB4D,IAAI,CAAC6D,OAA1B,KAAsC7D,IAAI,CAAC6D,OAAL,CAAarO,MAAzI,EAAiJ4D,QAAjJ,CAA0JzF,UAAU,CAAC6I,gBAArK,EAAuLlD,QAAvL,CAAgMkC,UAAhM,CAAb;AACA,KAAC,GAAGxJ,SAAS,CAACD,OAAd,EAAuByJ,UAAvB,EAAmC6H,MAAnC,GAA4CjK,QAA5C,CAAqDzF,UAAU,CAACmQ,kCAAhE;AACA,QAAIhN,QAAJ;AACA,QAAI0G,aAAJ;;AACA,QAAIwC,IAAI,CAAC6D,OAAT,EAAkB;AACd,OAAC,GAAG7R,SAAS,CAACD,OAAd,EAAuB,QAAvB,EAAiCqH,QAAjC,CAA0CzF,UAAU,CAACoQ,wBAArD,EAA+EtK,IAA/E,CAAoFuG,IAAI,CAAC6D,OAAzF,EAAkGvK,QAAlG,CAA2GoK,MAA3G;AACH;;AACD,QAAIM,aAAa,GAAG,CAAC,GAAGhS,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCqH,QAAhC,CAAyCzF,UAAU,CAACsQ,wBAApD,EAA8E3K,QAA9E,CAAuFoK,MAAvF,CAApB;;AACA,QAAI1D,IAAI,CAACmB,oBAAT,EAA+B;AAC3B,UAAI+C,IAAI,GAAG;AACPrN,QAAAA,QAAQ,EAAE,KAAK6F,MAAL,CAAY,UAAZ,CADH;AAEPsF,QAAAA,SAAS,EAAE;AAFJ,OAAX;AAIAhC,MAAAA,IAAI,CAACmB,oBAAL,CAA0BgD,MAA1B,CAAiC;AAC7BC,QAAAA,KAAK,EAAEF,IADsB;AAE7BrB,QAAAA,SAAS,EAAE,CAAC,GAAG/P,QAAQ,CAACuR,gBAAb,EAA+BL,aAA/B;AAFkB,OAAjC;AAIH,KATD,MASO;AACHxG,MAAAA,aAAa,GAAG,KAAKmE,oBAAL,CAA0B,KAAKO,uBAAL,CAA6BlC,IAA7B,CAA1B,EAA8DgE,aAA9D,EAA6E;AACzFlN,QAAAA,QAAQ,EAAEkJ,IAAI,CAAClJ,QAD0E;AAEzFC,QAAAA,gBAAgB,EAAEiJ,IAAI,CAACjJ,gBAFkE;AAGzFO,QAAAA,eAAe,EAAE0I,IAAI,CAAC1I,eAHmE;AAIzFwJ,QAAAA,YAAY,EAAEd,IAAI,CAACc;AAJsE,OAA7E,CAAhB;AAMA,WAAK3K,iBAAL,IAA0B,KAAKA,iBAAL,CAAuB2M,0BAAvB,CAAkD9C,IAAI,CAACI,IAAvD,EAA6D;AACnF5C,QAAAA,aAAa,EAAEA;AADoE,OAA7D,CAA1B;AAGA1G,MAAAA,QAAQ,GAAG0G,aAAa,CAACG,YAAd,EAAX;;AACA,UAAI,CAAC,GAAGlL,MAAM,CAAC6R,OAAX,EAAoBxN,QAApB,EAA8B,KAAKV,eAAnC,MAAwD,CAAC,CAA7D,EAAgE;AAC5D,aAAKA,eAAL,CAAqB2K,IAArB,CAA0BjK,QAA1B;AACH;;AACD4M,MAAAA,MAAM,CAACtK,QAAP,CAAgBzF,UAAU,CAAC0I,qBAAX,GAAmCvF,QAAnD;AACA4M,MAAAA,MAAM,CAAC3K,IAAP,CAAYpF,UAAU,CAACqF,oBAAvB,EAA6ClC,QAA7C;AACH;AACJ,GA7b0B;AA8b3B6K,EAAAA,oBAAoB,EAAE,UAASzJ,KAAT,EAAgBqM,YAAhB,EAA8BhO,OAA9B,EAAuC;AACzD,QAAIsC,QAAQ,GAAG,CAAC,GAAG7G,SAAS,CAACD,OAAd,EAAuB,OAAvB,CAAf;AACA,QAAI0P,IAAI,GAAG,IAAX;;AACA,QAAI+C,MAAM,GAAG/C,IAAI,CAACgD,uBAAL,CAA6BvM,KAA7B,EAAoC3B,OAApC,CAAb;;AACA,QAAImO,oBAAoB,GAAG;AACvBC,MAAAA,EAAE,EAAEpO,OAAO,CAACO,QADW;AAEvB8N,MAAAA,EAAE,EAAErO,OAAO,CAACO,QAFW;AAGvB+N,MAAAA,EAAE,EAAEtO,OAAO,CAACO,QAHW;AAIvBgO,MAAAA,EAAE,EAAE;AAJmB,KAA3B;;AAMArD,IAAAA,IAAI,CAACvL,sBAAL,CAA4B6K,IAA5B,CAAiC;AAC7BhK,MAAAA,gBAAgB,EAAE,CAAC,GAAGrE,OAAO,CAACiE,MAAZ,EAAoB+N,oBAApB,EAA0CnO,OAAO,CAACQ,gBAAlD;AADW,KAAjC;;AAGA8B,IAAAA,QAAQ,CAACS,QAAT,CAAkBiL,YAAlB;;AACA,QAAIvB,QAAQ,GAAGvB,IAAI,CAAC2B,gBAAL,CAAsBvK,QAAtB,EAAgC,iBAAhC,EAAmD2L,MAAnD,CAAf;;AACAxB,IAAAA,QAAQ,CAACO,EAAT,CAAY,qBAAZ,EAAmC,YAAW;AAC1C9B,MAAAA,IAAI,CAACsD,QAAL;AACH,KAFD;;AAGAtD,IAAAA,IAAI,CAAC9C,qBAAL,CAA2BoC,IAA3B,CAAgCiC,QAAhC;;AACA,WAAOA,QAAP;AACH,GAld0B;AAmd3BjF,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,WAAO,KAAKrB,MAAL,CAAY,iBAAZ,KAAkC,IAAzC;AACH,GArd0B;AAsd3B+H,EAAAA,uBAAuB,EAAE,UAASvM,KAAT,EAAgB3B,OAAhB,EAAyB;AAC9C,QAAIyO,MAAM,GAAG,IAAb;;AACA,QAAIC,UAAU,GAAG;AACbC,MAAAA,IAAI,EAAE,IADO;AAEbtD,MAAAA,MAAM,EAAErL,OAAO,CAACqL,MAFH;AAGbxJ,MAAAA,eAAe,EAAE,KAAK2F,mBAAL,EAHJ;AAIbrG,MAAAA,gBAAgB,EAAE,KAAKgF,MAAL,CAAY,kBAAZ,CAJL;AAKb/E,MAAAA,gBAAgB,EAAE,KAAK+E,MAAL,CAAY,kBAAZ,CALL;AAMb9E,MAAAA,YAAY,EAAE,KAAK8E,MAAL,CAAY,cAAZ,CAND;AAOb7E,MAAAA,YAAY,EAAE,KAAK6E,MAAL,CAAY,cAAZ,CAPD;AAQb3E,MAAAA,eAAe,EAAE,KAAK2E,MAAL,CAAY,iBAAZ,CARJ;AASblG,MAAAA,aAAa,EAAE,KAAKkG,MAAL,CAAY,eAAZ,CATF;AAUbyI,MAAAA,UAAU,EAAE,KAAKzI,MAAL,CAAY,UAAZ,CAVC;AAWb1F,MAAAA,aAAa,EAAE,KAAK0F,MAAL,CAAY,eAAZ,CAXF;AAYbvF,MAAAA,aAAa,EAAE,KAAKuF,MAAL,CAAY,eAAZ,CAZF;AAabrF,MAAAA,WAAW,EAAE,KAAKqF,MAAL,CAAY,aAAZ,CAbA;AAcbjF,MAAAA,mBAAmB,EAAE,KAAKiF,MAAL,CAAY,qBAAZ,CAdR;AAebtF,MAAAA,gBAAgB,EAAE,KAAKsF,MAAL,CAAY,kBAAZ,CAfL;AAgBbxF,MAAAA,kBAAkB,EAAE,UAASsL,IAAT,EAAe;AAC/B,YAAI,CAACwC,MAAM,CAACI,eAAZ,EAA6B;AACzBJ,UAAAA,MAAM,CAACK,0BAAP,CAAkC7C,IAAlC;AACH;AACJ,OApBY;AAqBb8C,MAAAA,kBAAkB,EAAE,KAAK5I,MAAL,CAAY,kBAAZ,IAAkC,KAAK7D,QAAL,EAAlC,GAAoD,KAAK;AArBhE,KAAjB;AAuBA,WAAO,CAAC,GAAGnG,OAAO,CAACiE,MAAZ,EAAoBsO,UAApB,EAAgC;AACnC/M,MAAAA,KAAK,EAAEA,KAD4B;AAEnC4J,MAAAA,cAAc,EAAE,UAASU,IAAT,EAAe;AAC3BwC,QAAAA,MAAM,CAAC7O,iBAAP,CAAyBoP,oBAAzB,CAA8C/C,IAAI,CAACR,SAAL,CAAe7L,iBAA7D;;AACAI,QAAAA,OAAO,CAACuL,cAAR,IAA0BvL,OAAO,CAACuL,cAAR,CAAuBU,IAAvB,CAA1B;AACH,OALkC;AAMnCgD,MAAAA,WAAW,EAAE,UAASC,KAAT,EAAgB;AACzB,YAAIzD,SAAS,GAAGyD,KAAK,CAACzD,SAAtB;AACA,YAAI0D,sBAAsB,GAAG1D,SAAS,CAAC2D,mBAAV,EAA7B;;AACAX,QAAAA,MAAM,CAAC7O,iBAAP,CAAyByP,kBAAzB,CAA4CF,sBAA5C;AACH,OAVkC;AAWnC5O,MAAAA,QAAQ,EAAEP,OAAO,CAACO,QAXiB;AAYnCQ,MAAAA,eAAe,EAAEf,OAAO,CAACe,eAZU;AAanCwJ,MAAAA,YAAY,EAAEvK,OAAO,CAACuK,YAba;AAcnC/J,MAAAA,gBAAgB,EAAER,OAAO,CAACQ,gBAdS;AAenC8K,MAAAA,eAAe,EAAEtL,OAAO,CAACsL,eAfU;AAgBnC/F,MAAAA,KAAK,EAAEvF,OAAO,CAACuF;AAhBoB,KAAhC,CAAP;AAkBH,GAjgB0B;AAkgB3BsH,EAAAA,gBAAgB,EAAE,UAASvK,QAAT,EAAmBgN,IAAnB,EAAyBrB,MAAzB,EAAiC;AAC/C,QAAI/C,IAAI,GAAG,IAAX;AACA+C,IAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;;AACA/C,IAAAA,IAAI,CAACqE,aAAL,CAAmBtB,MAAnB,EAA2B;AACvBvN,MAAAA,QAAQ,EAAEwK,IAAI,CAAC/E,MAAL,CAAY,UAAZ;AADa,KAA3B;;AAGA,WAAO+E,IAAI,CAACxL,QAAL,CAAc4C,QAAd,EAAwBgN,IAAxB,EAA8BrB,MAA9B,CAAP;AACH,GAzgB0B;AA0gB3BnO,EAAAA,wBAAwB,EAAE,YAAW;AACjC,QAAIoL,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC8B,EAAL,CAAQ,eAAR,EAAyB,UAASf,IAAT,EAAe;AACpC,UAAIuD,cAAc,GAAGvD,IAAI,CAACgB,QAA1B;;AACA,UAAI,eAAeuC,cAAnB,EAAmC;AAC/B,YAAI,CAAC,CAAC,GAAGxT,KAAK,CAAC6J,SAAV,EAAqBoG,IAAI,CAACiB,KAA1B,CAAL,EAAuC;AACnChC,UAAAA,IAAI,CAACuE,QAAL,CAAcC,MAAd,CAAqB,UAArB,EAAiCzD,IAAI,CAACiB,KAAL,GAAa,EAA9C;AACH;;AACDhC,QAAAA,IAAI,CAACyE,mCAAL,CAAyC1D,IAAI,CAACiB,KAA9C;AACH;;AACD,UAAIhC,IAAI,CAAC9C,qBAAL,CAA2BnJ,MAA/B,EAAuC;AACnC,SAAC,GAAGhD,SAAS,CAAC2T,IAAd,EAAoB1E,IAAI,CAAC9C,qBAAzB,EAAgD,UAAStE,KAAT,EAAgBmD,aAAhB,EAA+B;AAC3E,cAAI,eAAeuI,cAAnB,EAAmC;AAC/BtE,YAAAA,IAAI,CAAC2D,eAAL,GAAuB,IAAvB;AACA5H,YAAAA,aAAa,CAACd,MAAd,CAAqB,YAArB,EAAmC8F,IAAI,CAACiB,KAAxC;AACAhC,YAAAA,IAAI,CAAC2D,eAAL,GAAuB,KAAvB;AACH;;AACD,cAAI,eAAe5C,IAAI,CAACzN,IAApB,IAA4B,eAAeyN,IAAI,CAACzN,IAApD,EAA0D;AACtDyI,YAAAA,aAAa,CAACd,MAAd,CAAqBqJ,cAArB,EAAqCvD,IAAI,CAACiB,KAA1C;AACH;AACJ,SATD;AAUH;AACJ,KApBD;AAqBH,GAjiB0B;AAkiB3B2C,EAAAA,cAAc,EAAE,UAAS5D,IAAT,EAAe;AAC3B,QAAI6D,uBAAuB,GAAG,KAAKC,oCAAL,CAA0C9D,IAAI,CAACgB,QAA/C,EAAyD,CAAC,UAAD,EAAa,OAAb,CAAzD,CAA9B;;AACA,QAAI6C,uBAAJ,EAA6B;AACzB,WAAKE,6BAAL,CAAmC/D,IAAnC,EAAyC6D,uBAAzC;;AACA;AACH;;AACD,YAAQ7D,IAAI,CAACzN,IAAb;AACI,WAAK,UAAL;AACI,YAAI,CAAC,KAAK2H,MAAL,CAAY,OAAZ,CAAL,EAA2B;AACvB,eAAK8J,WAAL;AACH,SAFD,MAEO;AACH,cAAI,CAAC,GAAGjU,KAAK,CAACkU,aAAV,EAAyBjE,IAAI,CAACiB,KAA9B,CAAJ,EAA0C;AACtC,iBAAKiD,YAAL;AACH;AACJ;;AACD;;AACJ,WAAK,OAAL;AACA,WAAK,UAAL;AACA,WAAK,oBAAL;AACA,WAAK,kBAAL;AACA,WAAK,eAAL;AACA,WAAK,iBAAL;AACA,WAAK,qBAAL;AACA,WAAK,eAAL;AACA,WAAK,4BAAL;AACA,WAAK,kBAAL;AACA,WAAK,kBAAL;AACA,WAAK,cAAL;AACA,WAAK,cAAL;AACA,WAAK,iBAAL;AACA,WAAK,kBAAL;AACA,WAAK,QAAL;AACA,WAAK,kBAAL;AACA,WAAK,eAAL;AACA,WAAK,aAAL;AACI,aAAKF,WAAL;;AACA;;AACJ,WAAK,uBAAL;AACI,aAAKnI,wBAAL;;AACA;;AACJ,WAAK,aAAL;AACI,YAAI,WAAW,KAAK3B,MAAL,CAAY,UAAZ,CAAf,EAAwC;AACpC,eAAK8J,WAAL;AACH;;AACD;;AACJ,WAAK,qBAAL;AACA,WAAK,UAAL;AACI;;AACJ,WAAK,OAAL;AACI,aAAKvQ,QAAL,CAAcuM,IAAd;;AACA,aAAKd,kBAAL,CAAwBhF,MAAxB,CAA+B8F,IAAI,CAACzN,IAApC,EAA0CyN,IAAI,CAACiB,KAA/C;;AACA,aAAK7E,YAAL,CAAkB,KAAK8C,kBAAvB,EAA2C,KAAKA,kBAAL,CAAwBO,kBAAxB,EAA3C;;AACA;;AACJ,WAAK,SAAL;AACI,aAAKhM,QAAL,CAAcuM,IAAd;;AACA,YAAIA,IAAI,CAACiB,KAAT,EAAgB;AACZ,WAAC,GAAG5Q,kBAAkB,CAAC4P,iBAAvB,EAA0C,KAAK5J,QAAL,EAA1C;AACH;;AACD;;AACJ,WAAK,iBAAL;AACI1F,QAAAA,kBAAkB,CAACpB,OAAnB,CAA2B4U,WAA3B,CAAuCnE,IAAI,CAACoE,aAAL,IAAsB,IAA7D;;AACA,aAAKJ,WAAL;;AACA;;AACJ;AACI,aAAKvQ,QAAL,CAAcuM,IAAd;AA1DR;AA4DH,GApmB0B;AAqmB3B8D,EAAAA,oCAAoC,EAAE,UAASO,cAAT,EAAyBC,iBAAzB,EAA4C;AAC9E,QAAIC,aAAa,GAAGF,cAAc,CAACG,KAAf,CAAqB,GAArB,CAApB;AACA,QAAI5L,MAAJ;;AACA,QAAI2L,aAAa,CAACvR,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,UAAIC,CAAJ;AACA,UAAIwR,cAAc,GAAGF,aAAa,CAAC,CAAD,CAAlC;;AACA,WAAKtR,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGqR,iBAAiB,CAACtR,MAAlC,EAA0CC,CAAC,EAA3C,EAA+C;AAC3C,YAAIwR,cAAc,CAACC,MAAf,CAAsBJ,iBAAiB,CAACrR,CAAD,CAAvC,MAAgD,CAAC,CAArD,EAAwD;AACpD2F,UAAAA,MAAM,GAAG0L,iBAAiB,CAACrR,CAAD,CAA1B;AACH;AACJ;AACJ;;AACD,WAAO2F,MAAP;AACH,GAlnB0B;AAmnB3B+L,EAAAA,0BAA0B,EAAE,UAASC,UAAT,EAAqBpH,IAArB,EAA2ByD,KAA3B,EAAkCmD,aAAlC,EAAiDS,QAAjD,EAA2D;AACnF,QAAI,WAAWD,UAAf,EAA2B;AACvB,WAAKjR,iBAAL,CAAuBmR,0BAAvB,CAAkD,GAAG/O,MAAH,CAAU8O,QAAV,EAAoB,OAApB,CAAlD;;AACA5D,MAAAA,KAAK,GAAG,KAAK7D,aAAL,CAAmB6D,KAAnB,EAA0B,IAA1B,EAAgC4D,QAAhC,EAA0C,IAA1C,CAAR;AACH;;AACD,WAAO,CAAC,GAAG5T,QAAQ,CAAC1B,OAAb,EAAsBqV,UAAtB,EAAkC;AACrCpH,MAAAA,IAAI,EAAEA,IAD+B;AAErCyD,MAAAA,KAAK,EAAEA,KAF8B;AAGrCmD,MAAAA,aAAa,EAAEA,aAHsB;AAIrCW,MAAAA,gBAAgB,EAAE,KAAKpR;AAJc,KAAlC,CAAP;AAMH,GA9nB0B;AA+nB3BqR,EAAAA,2BAA2B,EAAE,UAASC,MAAT,EAAiB;AAC1C,WAAOA,MAAM,IAAIA,MAAM,CAACC,UAAP,EAAjB;AACH,GAjoB0B;AAkoB3BC,EAAAA,wCAAwC,EAAE,UAASnE,QAAT,EAAmB;AACzD,QAAI4D,UAAU,GAAG,CAAC,GAAG1T,QAAQ,CAACkU,yBAAb,EAAwCpE,QAAxC,CAAjB;;AACA,QAAI3N,oCAAoC,CAACgS,OAArC,CAA6CT,UAA7C,IAA2D,CAAC,CAAhE,EAAmE;AAC/DjU,MAAAA,kBAAkB,CAACpB,OAAnB,CAA2B+L,QAA3B,CAAoC,KAAKC,mBAAL,EAApC;;AACA,UAAI,KAAKrB,MAAL,CAAY,uBAAZ,CAAJ,EAA0C;AACtC,aAAKgD,kBAAL,IAA2B,KAAKA,kBAAL,CAAwBoI,sBAAxB,EAA3B;AACH;AACJ;AACJ,GA1oB0B;AA2oB3BC,EAAAA,2BAA2B,EAAE,UAASvK,aAAT,EAAwB4J,UAAxB,EAAoC3D,KAApC,EAA2CxD,IAA3C,EAAiD;AAC1E,QAAI+H,MAAM,GAAG,IAAb;;AACA,QAAI,KAAKC,gBAAL,GAAwB,CAA5B,EAA+B;AAC3B,OAACzK,aAAa,CAACyK,gBAAf,IAAmCzK,aAAa,CAAC0K,WAAd,EAAnC;;AACA,UAAIC,GAAG,GAAG,KAAKhS,iBAAL,CAAuBiS,YAAvB,CAAoCnI,IAApC,CAAV;;AACA,WAAKoI,mBAAL,CAAyBhI,GAAzB,CAA6B8H,GAA7B,EAAkC,YAAW;AACzC,SAAC3K,aAAa,CAAC8K,SAAf,IAA4B9K,aAAa,CAAC+K,SAAd,EAA5B;AACA,eAAQ,IAAIhV,SAAS,CAACiV,QAAd,EAAD,CAAyBC,OAAzB,EAAP;AACH,OAHD;AAIH;;AACD,QAAIC,mBAAmB,GAAG,SAASA,mBAAT,CAA6B3G,CAA7B,EAAgC;AACtDA,MAAAA,CAAC,CAACC,SAAF,CAAY2G,GAAZ,CAAgB,cAAhB,EAAgCD,mBAAhC;;AACA,UAAI,CAAC,GAAGhV,QAAQ,CAACkV,sBAAb,EAAqC3I,IAArC,CAAJ,EAAgD;AAC5C,YAAI4I,OAAO,GAAG,CAAC,GAAGnV,QAAQ,CAACoV,aAAb,EAA4B7I,IAA5B,CAAd;;AACA,YAAI8I,gBAAgB,GAAGf,MAAM,CAAC7R,iBAAP,CAAyB6S,gCAAzB,CAA0DH,OAA1D,CAAvB;;AACAb,QAAAA,MAAM,CAAC1K,oBAAP,CAA4B;AACxBpF,UAAAA,KAAK,EAAE6Q,gBAAgB,CAACrM,MAAjB,CAAwB,OAAxB,CADiB;AAExBc,UAAAA,aAAa,EAAEuL,gBAFS;AAGxBvN,UAAAA,UAAU,EAAEuN,gBAAgB,CAAClQ,QAAjB,EAHY;AAIxB0B,UAAAA,WAAW,EAAEwO,gBAAgB,CAAC9G,kBAAjB;AAJW,SAA5B;AAMH,OATD,MASO;AACH+F,QAAAA,MAAM,CAACpJ,YAAP,CAAoBoJ,MAAM,CAACtG,kBAA3B,EAA+CsG,MAAM,CAACtG,kBAAP,CAA0BO,kBAA1B,EAA/C;AACH;AACJ,KAdD;;AAeAzE,IAAAA,aAAa,CAAC+F,EAAd,CAAiB,cAAjB,EAAiCmF,mBAAjC;AACAlL,IAAAA,aAAa,CAACd,MAAd,CAAqB0K,UAArB,EAAiC3D,KAAjC;;AACA,SAAKkE,wCAAL,CAA8CP,UAA9C;AACH,GAvqB0B;AAwqB3B6B,EAAAA,iCAAiC,EAAE,UAASzF,QAAT,EAAmBC,KAAnB,EAA0B;AACzD,QAAIyF,SAAS,GAAG1F,QAAQ,CAACwD,KAAT,CAAe,GAAf,CAAhB;AACA,QAAII,UAAU,GAAG,CAAC,GAAG1T,QAAQ,CAACkU,yBAAb,EAAwCpE,QAAxC,CAAjB;;AACA,QAAI,YAAY4D,UAAZ,IAA0B8B,SAAS,CAAC1T,MAAV,GAAmB,CAAjD,EAAoD;AAChD,UAAI6R,QAAQ,GAAG,KAAK8B,YAAL,CAAkBD,SAAlB,CAAf;;AACA,UAAI1L,aAAa,GAAG,KAAKrH,iBAAL,CAAuB6S,gCAAvB,CAAwD3B,QAAxD,CAApB;;AACA,UAAI7J,aAAJ,EAAmB;AACf,aAAKrH,iBAAL,CAAuByP,kBAAvB,CAA0CpI,aAAa,CAACmI,mBAAd,EAA1C;;AACA,YAAIzN,KAAK,GAAG,KAAK0H,aAAL,CAAmB6D,KAAnB,EAA0B,KAA1B,EAAiC4D,QAAjC,CAAZ;;AACA,aAAKU,2BAAL,CAAiCvK,aAAjC,EAAgD4J,UAAhD,EAA4DlP,KAA5D,EAAmEmP,QAAnE;;AACA,eAAO,IAAP;AACH;AACJ,KATD,MASO;AACH,UAAI6B,SAAS,CAAC1T,MAAV,GAAmB,CAAvB,EAA0B;AACtB,YAAI4T,YAAY,GAAGF,SAAS,CAAC1T,MAAV,GAAmB,CAAtC;;AACA,YAAI6T,SAAS,GAAG,KAAKF,YAAL,CAAkBD,SAAS,CAACrU,KAAV,CAAgB,CAAhB,EAAmBuU,YAAnB,CAAlB,CAAhB;;AACA,YAAIE,cAAc,GAAG,KAAKnT,iBAAL,CAAuB6S,gCAAvB,CAAwDK,SAAxD,CAArB;;AACA,YAAIC,cAAJ,EAAoB;AAChB,cAAIzC,cAAc,GAAG,CAAC,GAAGnT,QAAQ,CAAC6V,iBAAb,EAAgCL,SAAS,CAACE,YAAD,CAAzC,EAAyDhC,UAAzD,CAArB;;AACA,cAAI,iBAAiBA,UAArB,EAAiC;AAC7B,gBAAIkC,cAAc,CAAC5M,MAAf,CAAsBmK,cAAtB,MAA0CpD,KAA9C,EAAqD;AACjD,qBAAO,KAAP;AACH;AACJ;;AACD,cAAI,cAAc2D,UAAlB,EAA8B;AAC1B,gBAAIoC,SAAS,GAAG,KAAK9M,MAAL,CAAY,CAAC,GAAGhJ,QAAQ,CAAC6V,iBAAb,EAAgCF,SAAhC,EAA2C,OAA3C,CAAZ,CAAhB;;AACA,gBAAIG,SAAS,IAAIA,SAAS,CAAChU,MAA3B,EAAmC;AAC/B,kBAAIiU,kBAAkB,GAAGH,cAAc,CAAC5M,MAAf,CAAsB,OAAtB,CAAzB;;AACA8M,cAAAA,SAAS,CAACvG,OAAV,CAAkB,UAASjD,IAAT,EAAe3F,KAAf,EAAsB;AACpC,oBAAIqP,UAAU,GAAGD,kBAAkB,CAACpP,KAAD,CAAnC;AACAqP,gBAAAA,UAAU,CAACC,YAAX,GAA0B3J,IAAI,CAAC2J,YAA/B;AACH,eAHD;AAIH;AACJ;;AACD,eAAK5B,2BAAL,CAAiCuB,cAAjC,EAAiDzC,cAAjD,EAAiEpD,KAAjE,EAAwE4F,SAAxE;;AACA,iBAAO,IAAP;AACH;AACJ;AACJ;;AACD,WAAO,KAAP;AACH,GAhtB0B;AAitB3BO,EAAAA,kCAAkC,EAAE,UAASvC,QAAT,EAAmB9Q,OAAnB,EAA4B;AAC5D,QAAIsT,MAAM,GAAG,IAAb;;AACA,QAAIzO,MAAJ;AACA,SAAK8M,WAAL;AACA,KAAC,GAAG1V,SAAS,CAAC2T,IAAd,EAAoB5P,OAApB,EAA6B,UAAS6Q,UAAT,EAAqB0C,WAArB,EAAkC;AAC3D1O,MAAAA,MAAM,GAAGyO,MAAM,CAACZ,iCAAP,CAAyC,CAAC,GAAGvV,QAAQ,CAAC6V,iBAAb,EAAgClC,QAAhC,EAA0CD,UAA1C,CAAzC,EAAgG0C,WAAhG,CAAT;;AACA,UAAI,CAAC1O,MAAL,EAAa;AACT,eAAO,KAAP;AACH;AACJ,KALD;AAMA,SAAKmN,SAAL;AACA,WAAOnN,MAAP;AACH,GA7tB0B;AA8tB3BmL,EAAAA,6BAA6B,EAAE,UAAS/D,IAAT,EAAeyE,cAAf,EAA+B;AAC1D,QAAIiC,SAAS,GAAG1G,IAAI,CAACgB,QAAL,CAAcwD,KAAd,CAAoB,GAApB,CAAhB;AACA,QAAIvD,KAAK,GAAGjB,IAAI,CAACiB,KAAjB;;AACA,QAAI,YAAYwD,cAAhB,EAAgC;AAC5B,UAAII,QAAQ,GAAG,KAAK8B,YAAL,CAAkBD,SAAlB,CAAf;;AACA,UAAIlJ,IAAI,GAAG,KAAKtD,MAAL,CAAY2K,QAAZ,CAAX;AACA,UAAI0C,qBAAqB,GAAGvH,IAAI,CAACgB,QAAL,CAAcwG,OAAd,CAAsB3C,QAAQ,GAAG,GAAjC,EAAsC,EAAtC,CAA5B;AACA,UAAI4C,gBAAgB,GAAGF,qBAAqB,CAAC/C,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,EAAoCgD,OAApC,CAA4C,QAA5C,EAAsD,EAAtD,CAAvB;;AACA,UAAIE,UAAU,GAAG,KAAK/C,0BAAL,CAAgC8C,gBAAhC,EAAkDjK,IAAlD,EAAwDA,IAAI,CAACiK,gBAAD,CAA5D,EAAgFzH,IAAI,CAACoE,aAArF,EAAoGS,QAApG,CAAjB;;AACA,UAAI,CAAC,KAAKG,2BAAL,CAAiC0C,UAAjC,CAAD,IAAiD,CAAC,KAAKjB,iCAAL,CAAuCzG,IAAI,CAACgB,QAA5C,EAAsDC,KAAtD,CAAtD,EAAoH;AAChH,YAAIzD,IAAJ,EAAU;AACN,eAAKmK,iBAAL,CAAuBnK,IAAvB,EAA6B+J,qBAA7B,EAAoDtG,KAApD;;AACA,cAAIvL,KAAK,GAAG,KAAKkS,sBAAL,CAA4B,KAAK1N,MAAL,CAAY,OAAZ,CAA5B,CAAZ;;AACA,eAAKA,MAAL,CAAY,OAAZ,EAAqBxE,KAArB;AACH;AACJ;AACJ;;AACD,QAAI,eAAe+O,cAAnB,EAAmC;AAC/B,UAAIzG,SAAS,GAAG0I,SAAS,CAACrU,KAAV,CAAgB,CAAhB,EAAmBwV,IAAnB,CAAwB,GAAxB,CAAhB;AACA,UAAIC,MAAM,GAAG,KAAKC,SAAL,CAAe/J,SAAf,CAAb;;AACA,UAAI8J,MAAJ,EAAY;AACRA,QAAAA,MAAM,CAAC5N,MAAP,CAAc,OAAd,EAAuB+G,KAAvB;AACH,OAFD,MAEO;AACH,aAAK4B,0BAAL,CAAgC;AAC5B7E,UAAAA,SAAS,EAAEA,SADiB;AAE5BiD,UAAAA,KAAK,EAAEA;AAFqB,SAAhC;AAIH;AACJ;AACJ,GA3vB0B;AA4vB3B0F,EAAAA,YAAY,EAAE,UAASD,SAAT,EAAoB;AAC9B,QAAI7B,QAAQ,GAAG6B,SAAS,CAAC,CAAD,CAAxB;AACA,QAAIzT,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyT,SAAS,CAAC1T,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACnC,UAAIyT,SAAS,CAACzT,CAAD,CAAT,CAAayR,MAAb,CAAoB,wBAApB,MAAkD,CAAC,CAAvD,EAA0D;AACtDG,QAAAA,QAAQ,IAAI,MAAM6B,SAAS,CAACzT,CAAD,CAA3B;AACH,OAFD,MAEO;AACH;AACH;AACJ;;AACD,WAAO4R,QAAP;AACH,GAvwB0B;AAwwB3BhC,EAAAA,0BAA0B,EAAE,UAAS7C,IAAT,EAAe;AACvC,SAAKgI,qBAAL,CAA2B,oBAA3B,EAAiDhI,IAAjD;AACH,GA1wB0B;AA2wB3B0D,EAAAA,mCAAmC,EAAE,UAAShC,IAAT,EAAe;AAChD,QAAIzC,IAAI,GAAG,IAAX;;AACA,QAAIyC,IAAI,IAAI,CAAC,GAAG3R,KAAK,CAACkO,QAAV,EAAoByD,IAApB,CAAZ,EAAuC;AACnC,OAAC,GAAG1R,SAAS,CAAC2T,IAAd,EAAoBjC,IAApB,EAA0B,UAAS1D,SAAT,EAAoBiD,KAApB,EAA2B;AACjDhC,QAAAA,IAAI,CAAC4D,0BAAL,CAAgC;AAC5B7E,UAAAA,SAAS,EAAEA,SADiB;AAE5BiD,UAAAA,KAAK,EAAEA;AAFqB,SAAhC;AAIH,OALD;AAMH;AACJ,GArxB0B;AAsxB3BgH,EAAAA,iBAAiB,EAAE,UAASjK,SAAT,EAAoBiD,KAApB,EAA2B;AAC1C,QAAI,CAAC,GAAGlR,KAAK,CAAC6J,SAAV,EAAqB,KAAKM,MAAL,CAAY,UAAZ,CAArB,CAAJ,EAAmD;AAC/C,UAAI4N,MAAM,GAAG,KAAKC,SAAL,CAAe/J,SAAf,CAAb;AACA,WAAK9D,MAAL,CAAY,cAAc8D,SAA1B,EAAqCiD,KAArC;;AACA,UAAI6G,MAAJ,EAAY;AACR,YAAII,WAAW,GAAGJ,MAAM,CAAC5N,MAAP,CAAc,OAAd,CAAlB;;AACA,YAAIgO,WAAW,KAAKjH,KAApB,EAA2B;AACvB6G,UAAAA,MAAM,CAAC5N,MAAP,CAAc,OAAd,EAAuB+G,KAAvB;AACH;AACJ;AACJ;AACJ,GAjyB0B;AAkyB3B2G,EAAAA,sBAAsB,EAAE,UAASlS,KAAT,EAAgB;AACpC,QAAIrB,QAAQ,GAAG,KAAK6F,MAAL,CAAY,UAAZ,CAAf;AACA,QAAItB,MAAM,GAAG,EAAb;;AACA,QAAI,CAAClD,KAAD,IAAU,CAAC,GAAG3F,KAAK,CAAC6J,SAAV,EAAqBvF,QAArB,CAAd,EAA8C;AAC1C,OAAC,GAAGrE,SAAS,CAAC2T,IAAd,EAAoBtP,QAApB,EAA8B,UAAS2J,SAAT,EAAoB;AAC9CpF,QAAAA,MAAM,CAAC2F,IAAP,CAAY;AACRP,UAAAA,SAAS,EAAEA;AADH,SAAZ;AAGH,OAJD;AAKH;;AACD,QAAItI,KAAJ,EAAW;AACP,OAAC,GAAG1F,SAAS,CAAC2T,IAAd,EAAoBjO,KAApB,EAA2B,UAASmC,KAAT,EAAgB2F,IAAhB,EAAsB;AAC7C,YAAI,CAAC,GAAGzN,KAAK,CAACkO,QAAV,EAAoBT,IAApB,CAAJ,EAA+B;AAC3B5E,UAAAA,MAAM,CAAC2F,IAAP,CAAYf,IAAZ;AACH,SAFD,MAEO;AACH5E,UAAAA,MAAM,CAAC2F,IAAP,CAAY;AACRP,YAAAA,SAAS,EAAER;AADH,WAAZ;AAGH;AACJ,OARD;AASH;;AACD,WAAO5E,MAAP;AACH,GAxzB0B;AAyzB3BuP,EAAAA,eAAe,EAAE,UAASC,KAAT,EAAgB1S,KAAhB,EAAuB;AACpC,QAAIuJ,IAAI,GAAG,IAAX;AACA,QAAIoJ,UAAU,GAAG,CAAC,GAAGtY,KAAK,CAACkO,QAAV,EAAoBmK,KAApB,IAA6BA,KAA7B,GAAqCnJ,IAAI,CAACqJ,cAAL,CAAoBF,KAApB,CAAtD;AACA,QAAIG,SAAS,GAAGF,UAAU,CAACE,SAA3B;AACA,QAAIC,SAAS,GAAGH,UAAU,CAACG,SAA3B;AACA,QAAIC,UAAJ;;AACA,QAAI/S,KAAK,CAAC1C,MAAV,EAAkB;AACd,OAAC,GAAGhD,SAAS,CAAC2T,IAAd,EAAoBjO,KAApB,EAA2B,UAASmC,KAAT,EAAgB2F,IAAhB,EAAsB;AAC7C,YAAIgB,QAAQ,GAAGhB,IAAI,CAACgB,QAApB;;AACA,YAAIgK,SAAS,CAACxV,MAAd,EAAsB;AAClB,cAAIyK,IAAI,GAAG+K,SAAS,CAACnW,KAAV,EAAX;AACAmL,UAAAA,IAAI,GAAGyB,IAAI,CAACyJ,mBAAL,CAAyBjL,IAAzB,EAA+B8K,SAA/B,EAA0C/K,IAA1C,CAAP;AACH,SAHD,MAGO;AACH,cAAI,YAAYgB,QAAZ,IAAwB,EAAEhB,IAAI,CAAC6D,OAAL,IAAgB7D,IAAI,CAACjL,IAAvB,CAAxB,IAAwD,aAAaiM,QAAb,IAAyB,CAAChB,IAAI,CAACjL,IAA3F,EAAiG;AAC7F,gBAAIoW,aAAa,GAAG1J,IAAI,CAAC2J,gBAAL,CAAsBpK,QAAtB,CAApB;;AACAhB,YAAAA,IAAI,CAAC9H,KAAL,GAAauJ,IAAI,CAAC2I,sBAAL,CAA4BpK,IAAI,CAAC9H,KAAjC,CAAb;AACA8H,YAAAA,IAAI,GAAGyB,IAAI,CAACkJ,eAAL,CAAqB;AACxBI,cAAAA,SAAS,EAAEA,SADa;AAExBC,cAAAA,SAAS,EAAEA;AAFa,aAArB,EAGJhL,IAAI,CAACmL,aAAD,CAHA,CAAP;AAIH;AACJ;;AACD,YAAI,CAAC,GAAGzX,QAAQ,CAAC2X,cAAb,EAA6BrL,IAA7B,EAAmC+K,SAAnC,CAAJ,EAAmD;AAC/CE,UAAAA,UAAU,GAAGjL,IAAb;AACA,iBAAO,KAAP;AACH;AACJ,OAnBD;AAoBH;;AACD,WAAOiL,UAAP;AACH,GAt1B0B;AAu1B3BH,EAAAA,cAAc,EAAE,UAASF,KAAT,EAAgB;AAC5B,QAAIU,cAAc,GAAG,GAArB;AACA,QAAIP,SAAS,GAAGH,KAAhB;AACA,QAAIW,cAAc,GAAGR,SAAS,CAAClD,OAAV,CAAkByD,cAAlB,CAArB;AACA,QAAIE,UAAU,GAAG,EAAjB;;AACA,WAAOD,cAAc,KAAK,CAAC,CAA3B,EAA8B;AAC1BC,MAAAA,UAAU,CAACzK,IAAX,CAAgBgK,SAAS,CAACU,MAAV,CAAiB,CAAjB,EAAoBF,cAApB,CAAhB;AACAR,MAAAA,SAAS,GAAGA,SAAS,CAACU,MAAV,CAAiBF,cAAc,GAAG,CAAlC,CAAZ;AACAA,MAAAA,cAAc,GAAGR,SAAS,CAAClD,OAAV,CAAkByD,cAAlB,CAAjB;AACH;;AACD,WAAO;AACHP,MAAAA,SAAS,EAAEA,SADR;AAEHC,MAAAA,SAAS,EAAEQ,UAAU,CAACE,OAAX;AAFR,KAAP;AAIH,GAr2B0B;AAs2B3BR,EAAAA,mBAAmB,EAAE,UAASjL,IAAT,EAAe8K,SAAf,EAA0B/K,IAA1B,EAAgC;AACjD,QAAIyB,IAAI,GAAG,IAAX;AACA,QAAIT,QAAQ,GAAGhB,IAAI,CAACgB,QAApB;;AACA,QAAImK,aAAa,GAAG1J,IAAI,CAAC2J,gBAAL,CAAsBpK,QAAtB,CAApB;;AACA,QAAI2K,kBAAkB,GAAG,YAAY3K,QAAZ,IAAwB,aAAaA,QAArC,IAAiDhB,IAAI,CAAC4L,KAA/E;AACA,QAAIxQ,MAAJ;;AACA,OAAG;AACC,UAAIuQ,kBAAJ,EAAwB;AACpB,YAAI5W,IAAI,GAAGiL,IAAI,CAACjL,IAAL,IAAaiL,IAAI,CAAC6D,OAAlB,IAA6B7D,IAAI,CAAC4L,KAA7C;AACA,YAAIC,eAAe,GAAG,CAAC,GAAGtZ,KAAK,CAAC6J,SAAV,EAAqBrH,IAArB,CAAtB;AACA,YAAI+W,iBAAiB,GAAG,CAAC,GAAGpY,QAAQ,CAACqY,oBAAb,EAAmChX,IAAnC,CAAxB;AACA,YAAIiX,QAAQ,GAAG,KAAK,CAApB;AACAhM,QAAAA,IAAI,CAACmL,aAAD,CAAJ,GAAsB1J,IAAI,CAAC2I,sBAAL,CAA4BpK,IAAI,CAACmL,aAAD,CAAhC,CAAtB;;AACA,YAAIU,eAAJ,EAAqB;AACjBG,UAAAA,QAAQ,GAAG/L,IAAI,CAACgM,GAAL,EAAX;AACH;;AACD,YAAI,CAAChM,IAAI,CAACzK,MAAV,EAAkB;AACd4F,UAAAA,MAAM,GAAGqG,IAAI,CAACkJ,eAAL,CAAqBI,SAArB,EAAgC/K,IAAI,CAACmL,aAAD,CAApC,CAAT;;AACA,cAAI/P,MAAJ,EAAY;AACR;AACH;AACJ;;AACD,YAAI,CAACyQ,eAAD,IAAoBA,eAAe,IAAIC,iBAAiB,KAAKE,QAAjE,EAA2E;AACvE,cAAI/L,IAAI,CAACzK,MAAT,EAAiB;AACb4F,YAAAA,MAAM,GAAGqG,IAAI,CAACyK,yBAAL,CAA+BjM,IAA/B,EAAqC8K,SAArC,EAAgD/K,IAAI,CAACmL,aAAD,CAApD,CAAT;AACH;AACJ;AACJ,OApBD,MAoBO;AACH;AACH;AACJ,KAxBD,QAwBSlL,IAAI,CAACzK,MAAL,IAAe,CAAC,CAAC,GAAGjD,KAAK,CAAC6J,SAAV,EAAqBhB,MAArB,CAxBzB;;AAyBA,WAAOA,MAAP;AACH,GAt4B0B;AAu4B3BgQ,EAAAA,gBAAgB,EAAE,UAASpK,QAAT,EAAmB;AACjC,WAAO,aAAaA,QAAb,GAAwB,MAAxB,GAAiC,OAAxC;AACH,GAz4B0B;AA04B3BkL,EAAAA,yBAAyB,EAAE,UAASjM,IAAT,EAAe8K,SAAf,EAA0B7S,KAA1B,EAAiC;AACxD,QAAIuJ,IAAI,GAAG,IAAX;AACA,QAAIrG,MAAJ;AACA,KAAC,GAAG5I,SAAS,CAAC2T,IAAd,EAAoBjO,KAApB,EAA2B,UAASmC,KAAT,EAAgB8R,SAAhB,EAA2B;AAClD/Q,MAAAA,MAAM,GAAGqG,IAAI,CAACyJ,mBAAL,CAAyBjL,IAAI,CAACpL,KAAL,EAAzB,EAAuCkW,SAAvC,EAAkDoB,SAAlD,CAAT;;AACA,UAAI/Q,MAAJ,EAAY;AACR,eAAO,KAAP;AACH;AACJ,KALD;;AAMA,QAAI,CAACA,MAAL,EAAa;AACTA,MAAAA,MAAM,GAAG,KAAT;AACH;;AACD,WAAOA,MAAP;AACH,GAv5B0B;AAw5B3B+O,EAAAA,iBAAiB,EAAE,UAASnK,IAAT,EAAetD,MAAf,EAAuB+G,KAAvB,EAA8B;AAC7C,QAAI,CAAC,GAAGlR,KAAK,CAACkO,QAAV,EAAoBT,IAApB,CAAJ,EAA+B;AAC3BA,MAAAA,IAAI,CAACtD,MAAD,CAAJ,GAAe+G,KAAf;AACH;AACJ,GA55B0B;AA65B3B2I,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,QAAIC,mBAAmB,GAAG,KAAK7N,uBAAL,EAA1B;;AACA,QAAI,KAAKF,uBAAL,KAAiC+N,mBAArC,EAA0D;AACtD,UAAI,KAAKC,kBAAL,CAAwB,KAAKhO,uBAA7B,EAAsD+N,mBAAtD,CAAJ,EAAgF;AAC5E,aAAK9N,mBAAL,GAA2B8N,mBAA3B;;AACA,aAAKtH,QAAL;;AACA,aAAKxG,mBAAL,GAA2B,KAAK,CAAhC;AACH;;AACD,WAAKD,uBAAL,GAA+B+N,mBAA/B;AACH;AACJ,GAv6B0B;AAw6B3BC,EAAAA,kBAAkB,EAAE,UAASC,aAAT,EAAwBC,aAAxB,EAAuC;AACvD,QAAIC,SAAS,GAAG,KAAhB;AACA,KAAC,GAAGja,SAAS,CAAC2T,IAAd,EAAoB,KAAKjQ,sBAAzB,EAAiD,UAASmE,KAAT,EAAgB2F,IAAhB,EAAsB;AACnE,UAAIA,IAAI,CAACjJ,gBAAL,CAAsBwV,aAAtB,MAAyCvM,IAAI,CAACjJ,gBAAL,CAAsByV,aAAtB,CAA7C,EAAmF;AAC/EC,QAAAA,SAAS,GAAG,IAAZ;AACA,eAAO,KAAP;AACH;AACJ,KALD;AAMA,WAAOA,SAAP;AACH,GAj7B0B;AAk7B3B1H,EAAAA,QAAQ,EAAE,YAAW;AACjB,QAAI2H,cAAc,GAAG,MAAM9W,mBAAN,GAA4B,WAA5B,GAA0CA,mBAA1C,GAAgE,WAArF;;AACAzD,IAAAA,cAAc,CAACJ,OAAf,CAAuB4a,OAAvB,CAA+B,KAAK9T,QAAL,GAAgBgB,IAAhB,CAAqB6S,cAArB,CAA/B,EAAqE,QAArE;;AACA,SAAKzW,QAAL;AACH,GAt7B0B;AAu7B3ByQ,EAAAA,YAAY,EAAE,YAAW;AACrB,SAAKvQ,iBAAL,CAAuBgQ,IAAvB,CAA4B,UAASyG,CAAT,EAAYC,eAAZ,EAA6B;AACrD,UAAI,CAAC,GAAGta,KAAK,CAAC6J,SAAV,EAAqByQ,eAAe,CAAC3J,cAArC,KAAwD2J,eAAe,CAAC3J,cAAhB,YAA0CjQ,OAAO,CAAClB,OAA9G,EAAuH;AACnH8a,QAAAA,eAAe,CAAC3J,cAAhB,CAA+B4J,KAA/B;AACAD,QAAAA,eAAe,CAAC3J,cAAhB,CAA+BxG,MAA/B,CAAsC,SAAtC,EAAiD,IAAjD;AACH;AACJ,KALD;;AAMAvJ,IAAAA,kBAAkB,CAACpB,OAAnB,CAA2Bgb,UAA3B,CAAsC,KAAKhP,mBAAL,EAAtC;AACH,GA/7B0B;AAg8B3BiP,EAAAA,WAAW,EAAE,UAAS9I,IAAT,EAAeT,KAAf,EAAsBwJ,aAAtB,EAAqC;AAC9C,QAAIxL,IAAI,GAAG,IAAX;;AACA,QAAIyL,KAAK,GAAGD,aAAa,GAAGxJ,KAAH,GAAWS,IAApC;;AACA,QAAI,CAAC,GAAG3R,KAAK,CAACkO,QAAV,EAAoByM,KAApB,CAAJ,EAAgC;AAC5B,OAAC,GAAG1a,SAAS,CAAC2T,IAAd,EAAoB+G,KAApB,EAA2B,UAAS1M,SAAT,EAAoB2M,UAApB,EAAgC;AACvD1L,QAAAA,IAAI,CAACuL,WAAL,CAAiBC,aAAa,GAAG/I,IAAI,GAAG,GAAP,GAAa1D,SAAhB,GAA4BA,SAA1D,EAAqE2M,UAArE,EAAiF,CAAC,GAAG5a,KAAK,CAACkO,QAAV,EAAoB0M,UAApB,CAAjF;AACH,OAFD;AAGH,KAJD,MAIO;AACH,UAAI,CAAC,GAAG5a,KAAK,CAACgO,QAAV,EAAoB2D,IAApB,CAAJ,EAA+B;AAC3BzC,QAAAA,IAAI,CAACgJ,iBAAL,CAAuBvG,IAAvB,EAA6BT,KAA7B;AACH;AACJ;AACJ,GA58B0B;AA68B3B2J,EAAAA,kBAAkB,EAAE,UAASjF,GAAT,EAAckF,OAAd,EAAuB;AACvC,SAAKpX,QAAL,CAAckS,GAAd,EAAmBkF,OAAnB;;AACA,SAAKlX,iBAAL,CAAuBgQ,IAAvB,CAA4B,UAASyG,CAAT,EAAYC,eAAZ,EAA6B;AACrD,UAAI,CAAC,GAAGta,KAAK,CAAC6J,SAAV,EAAqByQ,eAAe,CAAC3J,cAArC,CAAJ,EAA0D;AACtD2J,QAAAA,eAAe,CAAC3J,cAAhB,CAA+BkK,kBAA/B,CAAkDjF,GAAlD,EAAuDkF,OAAvD;AACH;AACJ,KAJD;AAKH,GAp9B0B;AAq9B3BC,EAAAA,YAAY,EAAE,YAAW;AACrB,WAAO,KAAKzU,QAAL,GAAgBgB,IAAhB,CAAqB,MAAMlG,UAAU,CAAC4I,wBAAjB,GAA4C,aAAjE,EAAgFgR,KAAhF,EAAP;AACH,GAv9B0B;AAw9B3BC,EAAAA,kBAAkB,EAAE,UAASC,OAAT,EAAkB;AAClC,QAAIA,OAAO,IAAI7a,QAAQ,CAACb,OAAT,CAAiB2b,IAAhC,EAAsC;AAClC,WAAK3I,QAAL;AACH;AACJ,GA59B0B;AA69B3B4I,EAAAA,QAAQ,EAAE,YAAW;AACjBxa,IAAAA,kBAAkB,CAACpB,OAAnB,CAA2B4U,WAA3B,CAAuC,KAAK5I,mBAAL,EAAvC;;AACA,SAAK9H,QAAL;AACH,GAh+B0B;AAi+B3B2X,EAAAA,WAAW,EAAE,YAAW;AACpB,SAAKlH,YAAL;AACH,GAn+B0B;AAo+B3BmH,EAAAA,UAAU,EAAE,UAAS3J,IAAT,EAAeT,KAAf,EAAsB;AAC9B,SAAKuJ,WAAL,CAAiB9I,IAAjB,EAAuBT,KAAvB;AACH,GAt+B0B;AAu+B3B8G,EAAAA,SAAS,EAAE,UAAS/J,SAAT,EAAoB;AAC3B,WAAO,KAAKrK,iBAAL,CAAuB2X,6BAAvB,CAAqDtN,SAArD,KAAmE,KAAKrK,iBAAL,CAAuB4X,wBAAvB,CAAgDvN,SAAhD,CAA1E;AACH,GAz+B0B;AA0+B3BwN,EAAAA,SAAS,EAAE,UAASjZ,IAAT,EAAe;AACtB,WAAO,KAAKoB,iBAAL,CAAuB4X,wBAAvB,CAAgDhZ,IAAhD,CAAP;AACH,GA5+B0B;AA6+B3BkZ,EAAAA,gBAAgB,EAAE,YAAW;AACzB,QAAIxM,IAAI,GAAG,IAAX;AACA,QAAIyM,QAAQ,GAAG,IAAI3a,SAAS,CAACiV,QAAd,EAAf;;AACA,QAAI/G,IAAI,CAAC1C,WAAT,EAAsB;AAClB0C,MAAAA,IAAI,CAAC1C,WAAL,CAAiBoP,MAAjB,GAA0BC,IAA1B,CAA+B,YAAW;AACtCF,QAAAA,QAAQ,CAACG,WAAT,CAAqB5M,IAArB;AACH,OAFD;AAGH,KAJD,MAIO;AACHyM,MAAAA,QAAQ,CAACG,WAAT,CAAqB5M,IAArB;AACH;;AACD,WAAOyM,QAAQ,CAACI,OAAT,EAAP;AACH,GAx/B0B;AAy/B3BC,EAAAA,UAAU,EAAE,UAASC,EAAT,EAAa9R,MAAb,EAAqB+G,KAArB,EAA4B;AACpC,QAAIgL,MAAM,GAAG,IAAb;;AACA,QAAIvW,KAAK,GAAG,KAAKkS,sBAAL,CAA4B,KAAK1N,MAAL,CAAY,OAAZ,CAA5B,CAAZ;;AACA,QAAIsD,IAAI,GAAG,KAAK2K,eAAL,CAAqB6D,EAArB,EAAyBtW,KAAzB,CAAX;;AACA,QAAI+H,IAAI,GAAG,CAAC,GAAGvM,QAAQ,CAACgb,WAAb,EAA0BxW,KAA1B,EAAiC8H,IAAjC,CAAX;;AACA,QAAI,CAACA,IAAL,EAAW;AACP;AACH;;AACD,YAAQ2O,SAAS,CAACnZ,MAAlB;AACI,WAAK,CAAL;AACI,eAAOwK,IAAP;;AACJ,WAAK,CAAL;AACI,YAAIkK,UAAU,GAAG,KAAK/C,0BAAL,CAAgCzK,MAAhC,EAAwCsD,IAAxC,EAA8CyD,KAA9C,EAAqDzD,IAAI,CAACtD,MAAD,CAAzD,EAAmEuD,IAAnE,CAAjB;;AACA,aAAKkK,iBAAL,CAAuBnK,IAAvB,EAA6BtD,MAA7B,EAAqC+G,KAArC;;AACA,YAAID,QAAQ,GAAG,CAAC,GAAG9P,QAAQ,CAAC6V,iBAAb,EAAgCtJ,IAAhC,EAAsCvD,MAAtC,CAAf;;AACA,YAAI,CAAC,KAAK8K,2BAAL,CAAiC0C,UAAjC,CAAD,IAAiD,CAAC,KAAKjB,iCAAL,CAAuCzF,QAAvC,EAAiDC,KAAjD,CAAtD,EAA+G;AAC3G,eAAK/G,MAAL,CAAY,OAAZ,EAAqBxE,KAArB;AACH;;AACD;;AACJ;AACI,YAAI,CAAC,GAAG3F,KAAK,CAACkO,QAAV,EAAoB/D,MAApB,CAAJ,EAAiC;AAC7B,cAAI,CAAC,KAAKkN,kCAAL,CAAwC3J,IAAxC,EAA8CvD,MAA9C,CAAL,EAA4D;AACxD,gBAAIkS,gBAAJ;AACA,aAAC,GAAGpc,SAAS,CAAC2T,IAAd,EAAoBzJ,MAApB,EAA4B,UAAS0K,UAAT,EAAqB0C,WAArB,EAAkC;AAC1D,kBAAII,UAAU,GAAGuE,MAAM,CAACtH,0BAAP,CAAkCC,UAAlC,EAA8CpH,IAA9C,EAAoD8J,WAApD,EAAiE9J,IAAI,CAACoH,UAAD,CAArE,EAAmFnH,IAAnF,CAAjB;;AACAwO,cAAAA,MAAM,CAACtE,iBAAP,CAAyBnK,IAAzB,EAA+BoH,UAA/B,EAA2C0C,WAA3C;;AACA,kBAAI,CAAC8E,gBAAD,IAAqB,CAACH,MAAM,CAACjH,2BAAP,CAAmC0C,UAAnC,CAA1B,EAA0E;AACtE0E,gBAAAA,gBAAgB,GAAG,IAAnB;AACH;AACJ,aAND;AAOAA,YAAAA,gBAAgB,IAAI,KAAKlS,MAAL,CAAY,OAAZ,EAAqBxE,KAArB,CAApB;AACH;AACJ;;AAxBT;AA0BH,GA3hC0B;AA4hC3B2W,EAAAA,QAAQ,EAAE,YAAW;AACjB,WAAO1b,kBAAkB,CAACpB,OAAnB,CAA2B+c,aAA3B,CAAyC,KAAK/Q,mBAAL,EAAzC,CAAP;AACH,GA9hC0B;AA+hC3BgR,EAAAA,SAAS,EAAE,UAASha,IAAT,EAAe;AACtB,WAAO,QAAQ,KAAK2H,MAAL,CAAY,QAAZ,CAAR,GAAgC,GAAhC,IAAuC3H,IAAI,IAAI,IAAI1C,KAAK,CAACN,OAAV,EAA/C,CAAP;AACH,GAjiC0B;AAkiC3Bid,EAAAA,qBAAqB,EAAE,YAAW;AAC9B,WAAO,KAAKzQ,mBAAZ;AACH;AApiC0B,CAApB,CAAX;;AAsiCA,CAAC,GAAGnM,sBAAsB,CAACL,OAA3B,EAAoC,QAApC,EAA8C+D,IAA9C;AACA,IAAImZ,QAAQ,GAAGnZ,IAAf;AACAhE,OAAO,CAACC,OAAR,GAAkBkd,QAAlB;AACAC,MAAM,CAACpd,OAAP,GAAiBA,OAAO,CAACC,OAAzB","sourcesContent":["/**\r\n * DevExtreme (ui/form/ui.form.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\nvar _visibility_change = require(\"../../events/visibility_change\");\r\nvar _element = require(\"../../core/element\");\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _editor = _interopRequireDefault(require(\"../editor/editor\"));\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _validation_engine = _interopRequireDefault(require(\"../validation_engine\"));\r\nvar _uiForm = _interopRequireDefault(require(\"./ui.form.items_runtime_info\"));\r\nvar _tab_panel = _interopRequireDefault(require(\"../tab_panel\"));\r\nvar _ui2 = _interopRequireDefault(require(\"../scroll_view/ui.scrollable\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _themes = require(\"../themes\");\r\nvar _uiForm2 = _interopRequireDefault(require(\"./ui.form.item_options_actions\"));\r\nrequire(\"./ui.form.layout_manager\");\r\nvar _uiForm4 = require(\"./ui.form.utils\");\r\nrequire(\"../validation_summary\");\r\nrequire(\"../validation_group\");\r\nvar _constants = require(\"./constants\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return _arrayLikeToArray(arr)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\nvar WIDGET_CLASS = \"dx-widget\";\r\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\r\nvar ITEM_OPTIONS_FOR_VALIDATION_UPDATING = [\"items\", \"isRequired\", \"validationRules\", \"visible\"];\r\nvar Form = _ui.default.inherit({\r\n    _init: function() {\r\n        this.callBase();\r\n        this._cachedColCountOptions = [];\r\n        this._itemsRunTimeInfo = new _uiForm.default;\r\n        this._groupsColCount = [];\r\n        this._attachSyncSubscriptions()\r\n    },\r\n    _initOptions: function(options) {\r\n        if (!(\"screenByWidth\" in options)) {\r\n            options.screenByWidth = _window.defaultScreenFactorFunc\r\n        }\r\n        this.callBase(options)\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            formID: \"dx-\" + new _guid.default,\r\n            formData: {},\r\n            colCount: 1,\r\n            screenByWidth: null,\r\n            colCountByScreen: void 0,\r\n            labelLocation: \"left\",\r\n            readOnly: false,\r\n            onFieldDataChanged: null,\r\n            customizeItem: null,\r\n            onEditorEnterKey: null,\r\n            minColWidth: 200,\r\n            alignItemLabels: true,\r\n            alignItemLabelsInAllGroups: true,\r\n            alignRootItemLabels: true,\r\n            showColonAfterLabel: true,\r\n            showRequiredMark: true,\r\n            showOptionalMark: false,\r\n            requiredMark: \"*\",\r\n            optionalMark: _message.default.format(\"dxForm-optionalMark\"),\r\n            requiredMessage: _message.default.getFormatter(\"dxForm-requiredMessage\"),\r\n            showValidationSummary: false,\r\n            items: void 0,\r\n            scrollingEnabled: false,\r\n            validationGroup: void 0,\r\n            stylingMode: void 0\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return (0, _themes.isMaterial)()\r\n            },\r\n            options: {\r\n                showColonAfterLabel: false,\r\n                labelLocation: \"top\"\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            formData: true,\r\n            validationGroup: true\r\n        })\r\n    },\r\n    _getGroupColCount: function($element) {\r\n        return parseInt($element.attr(_constants.GROUP_COL_COUNT_ATTR))\r\n    },\r\n    _createHiddenElement: function(rootLayoutManager) {\r\n        this._$hiddenElement = (0, _renderer.default)(\"<div>\").addClass(WIDGET_CLASS).addClass(_constants.HIDDEN_LABEL_CLASS).appendTo(\"body\");\r\n        var $hiddenLabel = rootLayoutManager._renderLabel({\r\n            text: \" \",\r\n            location: this._labelLocation()\r\n        }).appendTo(this._$hiddenElement);\r\n        this._hiddenLabelText = $hiddenLabel.find(\".\" + _constants.FIELD_ITEM_LABEL_TEXT_CLASS)[0]\r\n    },\r\n    _removeHiddenElement: function() {\r\n        this._$hiddenElement.remove();\r\n        this._hiddenLabelText = null\r\n    },\r\n    _getLabelWidthByText: function(text) {\r\n        this._hiddenLabelText.innerHTML = text;\r\n        return this._hiddenLabelText.offsetWidth\r\n    },\r\n    _getLabelsSelectorByCol: function(index, options) {\r\n        options = options || {};\r\n        var fieldItemClass = options.inOneColumn ? _constants.FIELD_ITEM_CLASS : _constants.FORM_FIELD_ITEM_COL_CLASS + index;\r\n        var cssExcludeTabbedSelector = options.excludeTabbed ? \":not(.\" + _constants.FIELD_ITEM_TAB_CLASS + \")\" : \"\";\r\n        var childLabelContentSelector = \"> .\" + _constants.FIELD_ITEM_LABEL_CLASS + \" > .\" + _constants.FIELD_ITEM_LABEL_CONTENT_CLASS;\r\n        return \".\" + fieldItemClass + cssExcludeTabbedSelector + childLabelContentSelector\r\n    },\r\n    _getLabelText: function(labelText) {\r\n        var length = labelText.children.length;\r\n        var child;\r\n        var result = \"\";\r\n        var i;\r\n        for (i = 0; i < length; i++) {\r\n            child = labelText.children[i];\r\n            result += !(0, _string.isEmpty)(child.innerText) ? child.innerText : child.innerHTML\r\n        }\r\n        return result\r\n    },\r\n    _applyLabelsWidthByCol: function($container, index, options) {\r\n        var $labelTexts = $container.find(this._getLabelsSelectorByCol(index, options));\r\n        var $labelTextsLength = $labelTexts.length;\r\n        var labelWidth;\r\n        var i;\r\n        var maxWidth = 0;\r\n        for (i = 0; i < $labelTextsLength; i++) {\r\n            labelWidth = this._getLabelWidthByText(this._getLabelText($labelTexts[i]));\r\n            if (labelWidth > maxWidth) {\r\n                maxWidth = labelWidth\r\n            }\r\n        }\r\n        for (i = 0; i < $labelTextsLength; i++) {\r\n            $labelTexts[i].style.width = maxWidth + \"px\"\r\n        }\r\n    },\r\n    _applyLabelsWidth: function($container, excludeTabbed, inOneColumn, colCount) {\r\n        colCount = inOneColumn ? 1 : colCount || this._getGroupColCount($container);\r\n        var applyLabelsOptions = {\r\n            excludeTabbed: excludeTabbed,\r\n            inOneColumn: inOneColumn\r\n        };\r\n        var i;\r\n        for (i = 0; i < colCount; i++) {\r\n            this._applyLabelsWidthByCol($container, i, applyLabelsOptions)\r\n        }\r\n    },\r\n    _getGroupElementsInColumn: function($container, columnIndex, colCount) {\r\n        var cssColCountSelector = (0, _type.isDefined)(colCount) ? \".\" + _constants.GROUP_COL_COUNT_CLASS + colCount : \"\";\r\n        var groupSelector = \".\" + _constants.FORM_FIELD_ITEM_COL_CLASS + columnIndex + \" > .\" + _constants.FIELD_ITEM_CONTENT_CLASS + \" > .\" + _constants.FORM_GROUP_CLASS + cssColCountSelector;\r\n        return $container.find(groupSelector)\r\n    },\r\n    _applyLabelsWidthWithGroups: function($container, colCount, excludeTabbed) {\r\n        if (true === this.option(\"alignRootItemLabels\")) {\r\n            this._alignRootSimpleItems($container, colCount, excludeTabbed)\r\n        }\r\n        var alignItemLabelsInAllGroups = this.option(\"alignItemLabelsInAllGroups\");\r\n        if (alignItemLabelsInAllGroups) {\r\n            this._applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed)\r\n        } else {\r\n            var $groups = this.$element().find(\".\" + _constants.FORM_GROUP_CLASS);\r\n            var i;\r\n            for (i = 0; i < $groups.length; i++) {\r\n                this._applyLabelsWidth($groups.eq(i), excludeTabbed)\r\n            }\r\n        }\r\n    },\r\n    _alignRootSimpleItems: function($container, colCount, excludeTabbed) {\r\n        var $rootSimpleItems = $container.find(\".\".concat(_constants.ROOT_SIMPLE_ITEM_CLASS));\r\n        for (var colIndex = 0; colIndex < colCount; colIndex++) {\r\n            this._applyLabelsWidthByCol($rootSimpleItems, colIndex, excludeTabbed)\r\n        }\r\n    },\r\n    _applyLabelsWidthWithNestedGroups: function($container, colCount, excludeTabbed) {\r\n        var applyLabelsOptions = {\r\n            excludeTabbed: excludeTabbed\r\n        };\r\n        var colIndex;\r\n        var groupsColIndex;\r\n        var groupColIndex;\r\n        var $groupsByCol;\r\n        for (colIndex = 0; colIndex < colCount; colIndex++) {\r\n            $groupsByCol = this._getGroupElementsInColumn($container, colIndex);\r\n            this._applyLabelsWidthByCol($groupsByCol, 0, applyLabelsOptions);\r\n            for (groupsColIndex = 0; groupsColIndex < this._groupsColCount.length; groupsColIndex++) {\r\n                $groupsByCol = this._getGroupElementsInColumn($container, colIndex, this._groupsColCount[groupsColIndex]);\r\n                var groupColCount = this._getGroupColCount($groupsByCol);\r\n                for (groupColIndex = 1; groupColIndex < groupColCount; groupColIndex++) {\r\n                    this._applyLabelsWidthByCol($groupsByCol, groupColIndex, applyLabelsOptions)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _labelLocation: function() {\r\n        return this.option(\"labelLocation\")\r\n    },\r\n    _alignLabelsInColumn: function(_ref) {\r\n        var layoutManager = _ref.layoutManager,\r\n            inOneColumn = _ref.inOneColumn,\r\n            $container = _ref.$container,\r\n            excludeTabbed = _ref.excludeTabbed,\r\n            items = _ref.items;\r\n        if (!(0, _window.hasWindow)() || \"top\" === this._labelLocation()) {\r\n            return\r\n        }\r\n        this._createHiddenElement(layoutManager);\r\n        if (inOneColumn) {\r\n            this._applyLabelsWidth($container, excludeTabbed, true)\r\n        } else {\r\n            if (this._checkGrouping(items)) {\r\n                this._applyLabelsWidthWithGroups($container, layoutManager._getColCount(), excludeTabbed)\r\n            } else {\r\n                this._applyLabelsWidth($container, excludeTabbed, false, layoutManager._getColCount())\r\n            }\r\n        }\r\n        this._removeHiddenElement()\r\n    },\r\n    _prepareFormData: function() {\r\n        if (!(0, _type.isDefined)(this.option(\"formData\"))) {\r\n            this.option(\"formData\", {})\r\n        }\r\n    },\r\n    _initMarkup: function() {\r\n        _validation_engine.default.addGroup(this._getValidationGroup());\r\n        this._clearCachedInstances();\r\n        this._prepareFormData();\r\n        this.$element().addClass(_constants.FORM_CLASS);\r\n        this.callBase();\r\n        this.setAria(\"role\", \"form\", this.$element());\r\n        if (this.option(\"scrollingEnabled\")) {\r\n            this._renderScrollable()\r\n        }\r\n        this._renderLayout();\r\n        this._renderValidationSummary();\r\n        this._lastMarkupScreenFactor = this._targetScreenFactor || this._getCurrentScreenFactor()\r\n    },\r\n    _getCurrentScreenFactor: function() {\r\n        return (0, _window.hasWindow)() ? (0, _window.getCurrentScreenFactor)(this.option(\"screenByWidth\")) : \"lg\"\r\n    },\r\n    _clearCachedInstances: function() {\r\n        this._itemsRunTimeInfo.clear();\r\n        this._cachedLayoutManagers = []\r\n    },\r\n    _alignLabels: function(layoutManager, inOneColumn) {\r\n        this._alignLabelsInColumn({\r\n            $container: this.$element(),\r\n            layoutManager: layoutManager,\r\n            excludeTabbed: true,\r\n            items: this.option(\"items\"),\r\n            inOneColumn: inOneColumn\r\n        })\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._groupsColCount = [];\r\n        this._cachedColCountOptions = [];\r\n        this._lastMarkupScreenFactor = void 0\r\n    },\r\n    _renderScrollable: function() {\r\n        var useNativeScrolling = this.option(\"useNativeScrolling\");\r\n        this._scrollable = new _ui2.default(this.$element(), {\r\n            useNative: !!useNativeScrolling,\r\n            useSimulatedScrollbar: !useNativeScrolling,\r\n            useKeyboard: false,\r\n            direction: \"both\",\r\n            bounceEnabled: false\r\n        })\r\n    },\r\n    _getContent: function() {\r\n        return this.option(\"scrollingEnabled\") ? this._scrollable.$content() : this.$element()\r\n    },\r\n    _renderValidationSummary: function() {\r\n        var $validationSummary = this.$element().find(\".\" + _constants.FORM_VALIDATION_SUMMARY);\r\n        if ($validationSummary.length > 0) {\r\n            $validationSummary.remove()\r\n        }\r\n        if (this.option(\"showValidationSummary\")) {\r\n            var _$validationSummary = (0, _renderer.default)(\"<div>\").addClass(_constants.FORM_VALIDATION_SUMMARY).appendTo(this._getContent());\r\n            this._validationSummary = _$validationSummary.dxValidationSummary({\r\n                validationGroup: this._getValidationGroup()\r\n            }).dxValidationSummary(\"instance\")\r\n        }\r\n    },\r\n    _prepareItems: function(items, parentIsTabbedItem, currentPath, isTabs) {\r\n        if (items) {\r\n            var result = [];\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n                var path = (0, _uiForm4.concatPaths)(currentPath, (0, _uiForm4.createItemPathByIndex)(i, isTabs));\r\n                var guid = this._itemsRunTimeInfo.add({\r\n                    item: item,\r\n                    itemIndex: i,\r\n                    path: path\r\n                });\r\n                if ((0, _type.isString)(item)) {\r\n                    item = {\r\n                        dataField: item\r\n                    }\r\n                }\r\n                if ((0, _type.isObject)(item)) {\r\n                    var itemCopy = (0, _extend.extend)({}, item);\r\n                    itemCopy.guid = guid;\r\n                    this._tryPrepareGroupItem(itemCopy);\r\n                    this._tryPrepareTabbedItem(itemCopy, path);\r\n                    this._tryPrepareItemTemplate(itemCopy);\r\n                    if (parentIsTabbedItem) {\r\n                        itemCopy.cssItemClass = _constants.FIELD_ITEM_TAB_CLASS\r\n                    }\r\n                    if (itemCopy.items) {\r\n                        itemCopy.items = this._prepareItems(itemCopy.items, parentIsTabbedItem, path)\r\n                    }\r\n                    result.push(itemCopy)\r\n                } else {\r\n                    result.push(item)\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    },\r\n    _tryPrepareGroupItem: function(item) {\r\n        if (\"group\" === item.itemType) {\r\n            item.alignItemLabels = (0, _common.ensureDefined)(item.alignItemLabels, true);\r\n            if (item.template) {\r\n                item.groupContentTemplate = this._getTemplate(item.template)\r\n            }\r\n            item.template = this._itemGroupTemplate.bind(this, item)\r\n        }\r\n    },\r\n    _tryPrepareTabbedItem: function(item, path) {\r\n        if (\"tabbed\" === item.itemType) {\r\n            item.template = this._itemTabbedTemplate.bind(this, item);\r\n            item.tabs = this._prepareItems(item.tabs, true, path, true)\r\n        }\r\n    },\r\n    _tryPrepareItemTemplate: function(item) {\r\n        if (item.template) {\r\n            item.template = this._getTemplate(item.template)\r\n        }\r\n    },\r\n    _checkGrouping: function(items) {\r\n        if (items) {\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n                if (\"group\" === item.itemType) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _renderLayout: function() {\r\n        var that = this;\r\n        var items = that.option(\"items\");\r\n        var $content = that._getContent();\r\n        items = that._prepareItems(items);\r\n        that._rootLayoutManager = that._renderLayoutManager(items, $content, {\r\n            isRoot: true,\r\n            colCount: that.option(\"colCount\"),\r\n            alignItemLabels: that.option(\"alignItemLabels\"),\r\n            screenByWidth: this.option(\"screenByWidth\"),\r\n            colCountByScreen: this.option(\"colCountByScreen\"),\r\n            onLayoutChanged: function(inOneColumn) {\r\n                that._alignLabels.bind(that)(that._rootLayoutManager, inOneColumn)\r\n            },\r\n            onContentReady: function(e) {\r\n                that._alignLabels(e.component, e.component.isSingleColumnMode())\r\n            }\r\n        })\r\n    },\r\n    _tryGetItemsForTemplate: function(item) {\r\n        return item.items || []\r\n    },\r\n    _itemTabbedTemplate: function(item, e, $container) {\r\n        var _this = this;\r\n        var $tabPanel = (0, _renderer.default)(\"<div>\").appendTo($container);\r\n        var tabPanelOptions = (0, _extend.extend)({}, item.tabPanelOptions, {\r\n            dataSource: item.tabs,\r\n            onItemRendered: function(args) {\r\n                return (0, _visibility_change.triggerShownEvent)(args.itemElement)\r\n            },\r\n            itemTemplate: function(itemData, e, container) {\r\n                var $container = (0, _renderer.default)(container);\r\n                var alignItemLabels = (0, _common.ensureDefined)(itemData.alignItemLabels, true);\r\n                var layoutManager = _this._renderLayoutManager(_this._tryGetItemsForTemplate(itemData), $container, {\r\n                    colCount: itemData.colCount,\r\n                    alignItemLabels: alignItemLabels,\r\n                    screenByWidth: _this.option(\"screenByWidth\"),\r\n                    colCountByScreen: itemData.colCountByScreen,\r\n                    cssItemClass: itemData.cssItemClass,\r\n                    onLayoutChanged: function(inOneColumn) {\r\n                        _this._alignLabelsInColumn({\r\n                            $container: $container,\r\n                            layoutManager: layoutManager,\r\n                            items: itemData.items,\r\n                            inOneColumn: inOneColumn\r\n                        })\r\n                    }\r\n                });\r\n                if (_this._itemsRunTimeInfo) {\r\n                    _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(itemData.guid, {\r\n                        layoutManager: layoutManager\r\n                    })\r\n                }\r\n                if (alignItemLabels) {\r\n                    _this._alignLabelsInColumn({\r\n                        $container: $container,\r\n                        layoutManager: layoutManager,\r\n                        items: itemData.items,\r\n                        inOneColumn: layoutManager.isSingleColumnMode()\r\n                    })\r\n                }\r\n            }\r\n        });\r\n        var tryUpdateTabPanelInstance = function(items, instance) {\r\n            if (Array.isArray(items)) {\r\n                items.forEach(function(item) {\r\n                    return _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\r\n                        widgetInstance: instance\r\n                    })\r\n                })\r\n            }\r\n        };\r\n        var tabPanel = this._createComponent($tabPanel, _tab_panel.default, tabPanelOptions);\r\n        (0, _renderer.default)($container).parent().addClass(_constants.FIELD_ITEM_CONTENT_HAS_TABS_CLASS);\r\n        tabPanel.on(\"optionChanged\", function(e) {\r\n            if (\"dataSource\" === e.fullName) {\r\n                tryUpdateTabPanelInstance(e.value, e.component)\r\n            }\r\n        });\r\n        tryUpdateTabPanelInstance([{\r\n            guid: item.guid\r\n        }].concat(_toConsumableArray(item.tabs)), tabPanel)\r\n    },\r\n    _itemGroupTemplate: function(item, e, $container) {\r\n        var $group = (0, _renderer.default)(\"<div>\").toggleClass(_constants.FORM_GROUP_WITH_CAPTION_CLASS, (0, _type.isDefined)(item.caption) && item.caption.length).addClass(_constants.FORM_GROUP_CLASS).appendTo($container);\r\n        (0, _renderer.default)($container).parent().addClass(_constants.FIELD_ITEM_CONTENT_HAS_GROUP_CLASS);\r\n        var colCount;\r\n        var layoutManager;\r\n        if (item.caption) {\r\n            (0, _renderer.default)(\"<span>\").addClass(_constants.FORM_GROUP_CAPTION_CLASS).text(item.caption).appendTo($group)\r\n        }\r\n        var $groupContent = (0, _renderer.default)(\"<div>\").addClass(_constants.FORM_GROUP_CONTENT_CLASS).appendTo($group);\r\n        if (item.groupContentTemplate) {\r\n            var data = {\r\n                formData: this.option(\"formData\"),\r\n                component: this\r\n            };\r\n            item.groupContentTemplate.render({\r\n                model: data,\r\n                container: (0, _element.getPublicElement)($groupContent)\r\n            })\r\n        } else {\r\n            layoutManager = this._renderLayoutManager(this._tryGetItemsForTemplate(item), $groupContent, {\r\n                colCount: item.colCount,\r\n                colCountByScreen: item.colCountByScreen,\r\n                alignItemLabels: item.alignItemLabels,\r\n                cssItemClass: item.cssItemClass\r\n            });\r\n            this._itemsRunTimeInfo && this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\r\n                layoutManager: layoutManager\r\n            });\r\n            colCount = layoutManager._getColCount();\r\n            if ((0, _array.inArray)(colCount, this._groupsColCount) === -1) {\r\n                this._groupsColCount.push(colCount)\r\n            }\r\n            $group.addClass(_constants.GROUP_COL_COUNT_CLASS + colCount);\r\n            $group.attr(_constants.GROUP_COL_COUNT_ATTR, colCount)\r\n        }\r\n    },\r\n    _renderLayoutManager: function(items, $rootElement, options) {\r\n        var $element = (0, _renderer.default)(\"<div>\");\r\n        var that = this;\r\n        var config = that._getLayoutManagerConfig(items, options);\r\n        var baseColCountByScreen = {\r\n            lg: options.colCount,\r\n            md: options.colCount,\r\n            sm: options.colCount,\r\n            xs: 1\r\n        };\r\n        that._cachedColCountOptions.push({\r\n            colCountByScreen: (0, _extend.extend)(baseColCountByScreen, options.colCountByScreen)\r\n        });\r\n        $element.appendTo($rootElement);\r\n        var instance = that._createComponent($element, \"dxLayoutManager\", config);\r\n        instance.on(\"autoColCountChanged\", function() {\r\n            that._refresh()\r\n        });\r\n        that._cachedLayoutManagers.push(instance);\r\n        return instance\r\n    },\r\n    _getValidationGroup: function() {\r\n        return this.option(\"validationGroup\") || this\r\n    },\r\n    _getLayoutManagerConfig: function(items, options) {\r\n        var _this2 = this;\r\n        var baseConfig = {\r\n            form: this,\r\n            isRoot: options.isRoot,\r\n            validationGroup: this._getValidationGroup(),\r\n            showRequiredMark: this.option(\"showRequiredMark\"),\r\n            showOptionalMark: this.option(\"showOptionalMark\"),\r\n            requiredMark: this.option(\"requiredMark\"),\r\n            optionalMark: this.option(\"optionalMark\"),\r\n            requiredMessage: this.option(\"requiredMessage\"),\r\n            screenByWidth: this.option(\"screenByWidth\"),\r\n            layoutData: this.option(\"formData\"),\r\n            labelLocation: this.option(\"labelLocation\"),\r\n            customizeItem: this.option(\"customizeItem\"),\r\n            minColWidth: this.option(\"minColWidth\"),\r\n            showColonAfterLabel: this.option(\"showColonAfterLabel\"),\r\n            onEditorEnterKey: this.option(\"onEditorEnterKey\"),\r\n            onFieldDataChanged: function(args) {\r\n                if (!_this2._isDataUpdating) {\r\n                    _this2._triggerOnFieldDataChanged(args)\r\n                }\r\n            },\r\n            validationBoundary: this.option(\"scrollingEnabled\") ? this.$element() : void 0\r\n        };\r\n        return (0, _extend.extend)(baseConfig, {\r\n            items: items,\r\n            onContentReady: function(args) {\r\n                _this2._itemsRunTimeInfo.addItemsOrExtendFrom(args.component._itemsRunTimeInfo);\r\n                options.onContentReady && options.onContentReady(args)\r\n            },\r\n            onDisposing: function(_ref2) {\r\n                var component = _ref2.component;\r\n                var nestedItemsRunTimeInfo = component.getItemsRunTimeInfo();\r\n                _this2._itemsRunTimeInfo.removeItemsByItems(nestedItemsRunTimeInfo)\r\n            },\r\n            colCount: options.colCount,\r\n            alignItemLabels: options.alignItemLabels,\r\n            cssItemClass: options.cssItemClass,\r\n            colCountByScreen: options.colCountByScreen,\r\n            onLayoutChanged: options.onLayoutChanged,\r\n            width: options.width\r\n        })\r\n    },\r\n    _createComponent: function($element, type, config) {\r\n        var that = this;\r\n        config = config || {};\r\n        that._extendConfig(config, {\r\n            readOnly: that.option(\"readOnly\")\r\n        });\r\n        return that.callBase($element, type, config)\r\n    },\r\n    _attachSyncSubscriptions: function() {\r\n        var that = this;\r\n        that.on(\"optionChanged\", function(args) {\r\n            var optionFullName = args.fullName;\r\n            if (\"formData\" === optionFullName) {\r\n                if (!(0, _type.isDefined)(args.value)) {\r\n                    that._options.silent(\"formData\", args.value = {})\r\n                }\r\n                that._triggerOnFieldDataChangedByDataSet(args.value)\r\n            }\r\n            if (that._cachedLayoutManagers.length) {\r\n                (0, _iterator.each)(that._cachedLayoutManagers, function(index, layoutManager) {\r\n                    if (\"formData\" === optionFullName) {\r\n                        that._isDataUpdating = true;\r\n                        layoutManager.option(\"layoutData\", args.value);\r\n                        that._isDataUpdating = false\r\n                    }\r\n                    if (\"readOnly\" === args.name || \"disabled\" === args.name) {\r\n                        layoutManager.option(optionFullName, args.value)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        var rootNameOfComplexOption = this._getRootLevelOfExpectedComplexOption(args.fullName, [\"formData\", \"items\"]);\r\n        if (rootNameOfComplexOption) {\r\n            this._customHandlerOfComplexOption(args, rootNameOfComplexOption);\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"formData\":\r\n                if (!this.option(\"items\")) {\r\n                    this._invalidate()\r\n                } else {\r\n                    if ((0, _type.isEmptyObject)(args.value)) {\r\n                        this._resetValues()\r\n                    }\r\n                }\r\n                break;\r\n            case \"items\":\r\n            case \"colCount\":\r\n            case \"onFieldDataChanged\":\r\n            case \"onEditorEnterKey\":\r\n            case \"labelLocation\":\r\n            case \"alignItemLabels\":\r\n            case \"showColonAfterLabel\":\r\n            case \"customizeItem\":\r\n            case \"alignItemLabelsInAllGroups\":\r\n            case \"showRequiredMark\":\r\n            case \"showOptionalMark\":\r\n            case \"requiredMark\":\r\n            case \"optionalMark\":\r\n            case \"requiredMessage\":\r\n            case \"scrollingEnabled\":\r\n            case \"formID\":\r\n            case \"colCountByScreen\":\r\n            case \"screenByWidth\":\r\n            case \"stylingMode\":\r\n                this._invalidate();\r\n                break;\r\n            case \"showValidationSummary\":\r\n                this._renderValidationSummary();\r\n                break;\r\n            case \"minColWidth\":\r\n                if (\"auto\" === this.option(\"colCount\")) {\r\n                    this._invalidate()\r\n                }\r\n                break;\r\n            case \"alignRootItemLabels\":\r\n            case \"readOnly\":\r\n                break;\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._rootLayoutManager.option(args.name, args.value);\r\n                this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());\r\n                break;\r\n            case \"visible\":\r\n                this.callBase(args);\r\n                if (args.value) {\r\n                    (0, _visibility_change.triggerShownEvent)(this.$element())\r\n                }\r\n                break;\r\n            case \"validationGroup\":\r\n                _validation_engine.default.removeGroup(args.previousValue || this);\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getRootLevelOfExpectedComplexOption: function(fullOptionName, expectedRootNames) {\r\n        var splitFullName = fullOptionName.split(\".\");\r\n        var result;\r\n        if (splitFullName.length > 1) {\r\n            var i;\r\n            var rootOptionName = splitFullName[0];\r\n            for (i = 0; i < expectedRootNames.length; i++) {\r\n                if (rootOptionName.search(expectedRootNames[i]) !== -1) {\r\n                    result = expectedRootNames[i]\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tryCreateItemOptionAction: function(optionName, item, value, previousValue, itemPath) {\r\n        if (\"tabs\" === optionName) {\r\n            this._itemsRunTimeInfo.removeItemsByPathStartWith(\"\".concat(itemPath, \".tabs\"));\r\n            value = this._prepareItems(value, true, itemPath, true)\r\n        }\r\n        return (0, _uiForm2.default)(optionName, {\r\n            item: item,\r\n            value: value,\r\n            previousValue: previousValue,\r\n            itemsRunTimeInfo: this._itemsRunTimeInfo\r\n        })\r\n    },\r\n    _tryExecuteItemOptionAction: function(action) {\r\n        return action && action.tryExecute()\r\n    },\r\n    _updateValidationGroupAndSummaryIfNeeded: function(fullName) {\r\n        var optionName = (0, _uiForm4.getOptionNameFromFullName)(fullName);\r\n        if (ITEM_OPTIONS_FOR_VALIDATION_UPDATING.indexOf(optionName) > -1) {\r\n            _validation_engine.default.addGroup(this._getValidationGroup());\r\n            if (this.option(\"showValidationSummary\")) {\r\n                this._validationSummary && this._validationSummary._initGroupRegistration()\r\n            }\r\n        }\r\n    },\r\n    _setLayoutManagerItemOption: function(layoutManager, optionName, value, path) {\r\n        var _this3 = this;\r\n        if (this._updateLockCount > 0) {\r\n            !layoutManager._updateLockCount && layoutManager.beginUpdate();\r\n            var key = this._itemsRunTimeInfo.getKeyByPath(path);\r\n            this.postponedOperations.add(key, function() {\r\n                !layoutManager._disposed && layoutManager.endUpdate();\r\n                return (new _deferred.Deferred).resolve()\r\n            })\r\n        }\r\n        var contentReadyHandler = function contentReadyHandler(e) {\r\n            e.component.off(\"contentReady\", contentReadyHandler);\r\n            if ((0, _uiForm4.isFullPathContainsTabs)(path)) {\r\n                var tabPath = (0, _uiForm4.tryGetTabPath)(path);\r\n                var tabLayoutManager = _this3._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(tabPath);\r\n                _this3._alignLabelsInColumn({\r\n                    items: tabLayoutManager.option(\"items\"),\r\n                    layoutManager: tabLayoutManager,\r\n                    $container: tabLayoutManager.$element(),\r\n                    inOneColumn: tabLayoutManager.isSingleColumnMode()\r\n                })\r\n            } else {\r\n                _this3._alignLabels(_this3._rootLayoutManager, _this3._rootLayoutManager.isSingleColumnMode())\r\n            }\r\n        };\r\n        layoutManager.on(\"contentReady\", contentReadyHandler);\r\n        layoutManager.option(optionName, value);\r\n        this._updateValidationGroupAndSummaryIfNeeded(optionName)\r\n    },\r\n    _tryChangeLayoutManagerItemOption: function(fullName, value) {\r\n        var nameParts = fullName.split(\".\");\r\n        var optionName = (0, _uiForm4.getOptionNameFromFullName)(fullName);\r\n        if (\"items\" === optionName && nameParts.length > 1) {\r\n            var itemPath = this._getItemPath(nameParts);\r\n            var layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(itemPath);\r\n            if (layoutManager) {\r\n                this._itemsRunTimeInfo.removeItemsByItems(layoutManager.getItemsRunTimeInfo());\r\n                var items = this._prepareItems(value, false, itemPath);\r\n                this._setLayoutManagerItemOption(layoutManager, optionName, items, itemPath);\r\n                return true\r\n            }\r\n        } else {\r\n            if (nameParts.length > 2) {\r\n                var endPartIndex = nameParts.length - 2;\r\n                var _itemPath = this._getItemPath(nameParts.slice(0, endPartIndex));\r\n                var _layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(_itemPath);\r\n                if (_layoutManager) {\r\n                    var fullOptionName = (0, _uiForm4.getFullOptionName)(nameParts[endPartIndex], optionName);\r\n                    if (\"editorType\" === optionName) {\r\n                        if (_layoutManager.option(fullOptionName) !== value) {\r\n                            return false\r\n                        }\r\n                    }\r\n                    if (\"visible\" === optionName) {\r\n                        var formItems = this.option((0, _uiForm4.getFullOptionName)(_itemPath, \"items\"));\r\n                        if (formItems && formItems.length) {\r\n                            var layoutManagerItems = _layoutManager.option(\"items\");\r\n                            formItems.forEach(function(item, index) {\r\n                                var layoutItem = layoutManagerItems[index];\r\n                                layoutItem.visibleIndex = item.visibleIndex\r\n                            })\r\n                        }\r\n                    }\r\n                    this._setLayoutManagerItemOption(_layoutManager, fullOptionName, value, _itemPath);\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _tryChangeLayoutManagerItemOptions: function(itemPath, options) {\r\n        var _this4 = this;\r\n        var result;\r\n        this.beginUpdate();\r\n        (0, _iterator.each)(options, function(optionName, optionValue) {\r\n            result = _this4._tryChangeLayoutManagerItemOption((0, _uiForm4.getFullOptionName)(itemPath, optionName), optionValue);\r\n            if (!result) {\r\n                return false\r\n            }\r\n        });\r\n        this.endUpdate();\r\n        return result\r\n    },\r\n    _customHandlerOfComplexOption: function(args, rootOptionName) {\r\n        var nameParts = args.fullName.split(\".\");\r\n        var value = args.value;\r\n        if (\"items\" === rootOptionName) {\r\n            var itemPath = this._getItemPath(nameParts);\r\n            var item = this.option(itemPath);\r\n            var optionNameWithoutPath = args.fullName.replace(itemPath + \".\", \"\");\r\n            var simpleOptionName = optionNameWithoutPath.split(\".\")[0].replace(/\\[\\d+]/, \"\");\r\n            var itemAction = this._tryCreateItemOptionAction(simpleOptionName, item, item[simpleOptionName], args.previousValue, itemPath);\r\n            if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(args.fullName, value)) {\r\n                if (item) {\r\n                    this._changeItemOption(item, optionNameWithoutPath, value);\r\n                    var items = this._generateItemsFromData(this.option(\"items\"));\r\n                    this.option(\"items\", items)\r\n                }\r\n            }\r\n        }\r\n        if (\"formData\" === rootOptionName) {\r\n            var dataField = nameParts.slice(1).join(\".\");\r\n            var editor = this.getEditor(dataField);\r\n            if (editor) {\r\n                editor.option(\"value\", value)\r\n            } else {\r\n                this._triggerOnFieldDataChanged({\r\n                    dataField: dataField,\r\n                    value: value\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _getItemPath: function(nameParts) {\r\n        var itemPath = nameParts[0];\r\n        var i;\r\n        for (i = 1; i < nameParts.length; i++) {\r\n            if (nameParts[i].search(/items\\[\\d+]|tabs\\[\\d+]/) !== -1) {\r\n                itemPath += \".\" + nameParts[i]\r\n            } else {\r\n                break\r\n            }\r\n        }\r\n        return itemPath\r\n    },\r\n    _triggerOnFieldDataChanged: function(args) {\r\n        this._createActionByOption(\"onFieldDataChanged\")(args)\r\n    },\r\n    _triggerOnFieldDataChangedByDataSet: function(data) {\r\n        var that = this;\r\n        if (data && (0, _type.isObject)(data)) {\r\n            (0, _iterator.each)(data, function(dataField, value) {\r\n                that._triggerOnFieldDataChanged({\r\n                    dataField: dataField,\r\n                    value: value\r\n                })\r\n            })\r\n        }\r\n    },\r\n    _updateFieldValue: function(dataField, value) {\r\n        if ((0, _type.isDefined)(this.option(\"formData\"))) {\r\n            var editor = this.getEditor(dataField);\r\n            this.option(\"formData.\" + dataField, value);\r\n            if (editor) {\r\n                var editorValue = editor.option(\"value\");\r\n                if (editorValue !== value) {\r\n                    editor.option(\"value\", value)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _generateItemsFromData: function(items) {\r\n        var formData = this.option(\"formData\");\r\n        var result = [];\r\n        if (!items && (0, _type.isDefined)(formData)) {\r\n            (0, _iterator.each)(formData, function(dataField) {\r\n                result.push({\r\n                    dataField: dataField\r\n                })\r\n            })\r\n        }\r\n        if (items) {\r\n            (0, _iterator.each)(items, function(index, item) {\r\n                if ((0, _type.isObject)(item)) {\r\n                    result.push(item)\r\n                } else {\r\n                    result.push({\r\n                        dataField: item\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    _getItemByField: function(field, items) {\r\n        var that = this;\r\n        var fieldParts = (0, _type.isObject)(field) ? field : that._getFieldParts(field);\r\n        var fieldName = fieldParts.fieldName;\r\n        var fieldPath = fieldParts.fieldPath;\r\n        var resultItem;\r\n        if (items.length) {\r\n            (0, _iterator.each)(items, function(index, item) {\r\n                var itemType = item.itemType;\r\n                if (fieldPath.length) {\r\n                    var path = fieldPath.slice();\r\n                    item = that._getItemByFieldPath(path, fieldName, item)\r\n                } else {\r\n                    if (\"group\" === itemType && !(item.caption || item.name) || \"tabbed\" === itemType && !item.name) {\r\n                        var subItemsField = that._getSubItemField(itemType);\r\n                        item.items = that._generateItemsFromData(item.items);\r\n                        item = that._getItemByField({\r\n                            fieldName: fieldName,\r\n                            fieldPath: fieldPath\r\n                        }, item[subItemsField])\r\n                    }\r\n                }\r\n                if ((0, _uiForm4.isExpectedItem)(item, fieldName)) {\r\n                    resultItem = item;\r\n                    return false\r\n                }\r\n            })\r\n        }\r\n        return resultItem\r\n    },\r\n    _getFieldParts: function(field) {\r\n        var fieldSeparator = \".\";\r\n        var fieldName = field;\r\n        var separatorIndex = fieldName.indexOf(fieldSeparator);\r\n        var resultPath = [];\r\n        while (separatorIndex !== -1) {\r\n            resultPath.push(fieldName.substr(0, separatorIndex));\r\n            fieldName = fieldName.substr(separatorIndex + 1);\r\n            separatorIndex = fieldName.indexOf(fieldSeparator)\r\n        }\r\n        return {\r\n            fieldName: fieldName,\r\n            fieldPath: resultPath.reverse()\r\n        }\r\n    },\r\n    _getItemByFieldPath: function(path, fieldName, item) {\r\n        var that = this;\r\n        var itemType = item.itemType;\r\n        var subItemsField = that._getSubItemField(itemType);\r\n        var isItemWithSubItems = \"group\" === itemType || \"tabbed\" === itemType || item.title;\r\n        var result;\r\n        do {\r\n            if (isItemWithSubItems) {\r\n                var name = item.name || item.caption || item.title;\r\n                var isGroupWithName = (0, _type.isDefined)(name);\r\n                var nameWithoutSpaces = (0, _uiForm4.getTextWithoutSpaces)(name);\r\n                var pathNode = void 0;\r\n                item[subItemsField] = that._generateItemsFromData(item[subItemsField]);\r\n                if (isGroupWithName) {\r\n                    pathNode = path.pop()\r\n                }\r\n                if (!path.length) {\r\n                    result = that._getItemByField(fieldName, item[subItemsField]);\r\n                    if (result) {\r\n                        break\r\n                    }\r\n                }\r\n                if (!isGroupWithName || isGroupWithName && nameWithoutSpaces === pathNode) {\r\n                    if (path.length) {\r\n                        result = that._searchItemInEverySubItem(path, fieldName, item[subItemsField])\r\n                    }\r\n                }\r\n            } else {\r\n                break\r\n            }\r\n        } while (path.length && !(0, _type.isDefined)(result));\r\n        return result\r\n    },\r\n    _getSubItemField: function(itemType) {\r\n        return \"tabbed\" === itemType ? \"tabs\" : \"items\"\r\n    },\r\n    _searchItemInEverySubItem: function(path, fieldName, items) {\r\n        var that = this;\r\n        var result;\r\n        (0, _iterator.each)(items, function(index, groupItem) {\r\n            result = that._getItemByFieldPath(path.slice(), fieldName, groupItem);\r\n            if (result) {\r\n                return false\r\n            }\r\n        });\r\n        if (!result) {\r\n            result = false\r\n        }\r\n        return result\r\n    },\r\n    _changeItemOption: function(item, option, value) {\r\n        if ((0, _type.isObject)(item)) {\r\n            item[option] = value\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        var currentScreenFactor = this._getCurrentScreenFactor();\r\n        if (this._lastMarkupScreenFactor !== currentScreenFactor) {\r\n            if (this._isColCountChanged(this._lastMarkupScreenFactor, currentScreenFactor)) {\r\n                this._targetScreenFactor = currentScreenFactor;\r\n                this._refresh();\r\n                this._targetScreenFactor = void 0\r\n            }\r\n            this._lastMarkupScreenFactor = currentScreenFactor\r\n        }\r\n    },\r\n    _isColCountChanged: function(oldScreenSize, newScreenSize) {\r\n        var isChanged = false;\r\n        (0, _iterator.each)(this._cachedColCountOptions, function(index, item) {\r\n            if (item.colCountByScreen[oldScreenSize] !== item.colCountByScreen[newScreenSize]) {\r\n                isChanged = true;\r\n                return false\r\n            }\r\n        });\r\n        return isChanged\r\n    },\r\n    _refresh: function() {\r\n        var editorSelector = \".\" + FOCUSED_STATE_CLASS + \" input, .\" + FOCUSED_STATE_CLASS + \" textarea\";\r\n        _events_engine.default.trigger(this.$element().find(editorSelector), \"change\");\r\n        this.callBase()\r\n    },\r\n    _resetValues: function() {\r\n        this._itemsRunTimeInfo.each(function(_, itemRunTimeInfo) {\r\n            if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance) && itemRunTimeInfo.widgetInstance instanceof _editor.default) {\r\n                itemRunTimeInfo.widgetInstance.reset();\r\n                itemRunTimeInfo.widgetInstance.option(\"isValid\", true)\r\n            }\r\n        });\r\n        _validation_engine.default.resetGroup(this._getValidationGroup())\r\n    },\r\n    _updateData: function(data, value, isComplexData) {\r\n        var that = this;\r\n        var _data = isComplexData ? value : data;\r\n        if ((0, _type.isObject)(_data)) {\r\n            (0, _iterator.each)(_data, function(dataField, fieldValue) {\r\n                that._updateData(isComplexData ? data + \".\" + dataField : dataField, fieldValue, (0, _type.isObject)(fieldValue))\r\n            })\r\n        } else {\r\n            if ((0, _type.isString)(data)) {\r\n                that._updateFieldValue(data, value)\r\n            }\r\n        }\r\n    },\r\n    registerKeyHandler: function(key, handler) {\r\n        this.callBase(key, handler);\r\n        this._itemsRunTimeInfo.each(function(_, itemRunTimeInfo) {\r\n            if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance)) {\r\n                itemRunTimeInfo.widgetInstance.registerKeyHandler(key, handler)\r\n            }\r\n        })\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element().find(\".\" + _constants.FIELD_ITEM_CONTENT_CLASS + \" [tabindex]\").first()\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible && _browser.default.msie) {\r\n            this._refresh()\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        _validation_engine.default.removeGroup(this._getValidationGroup());\r\n        this.callBase()\r\n    },\r\n    resetValues: function() {\r\n        this._resetValues()\r\n    },\r\n    updateData: function(data, value) {\r\n        this._updateData(data, value)\r\n    },\r\n    getEditor: function(dataField) {\r\n        return this._itemsRunTimeInfo.findWidgetInstanceByDataField(dataField) || this._itemsRunTimeInfo.findWidgetInstanceByName(dataField)\r\n    },\r\n    getButton: function(name) {\r\n        return this._itemsRunTimeInfo.findWidgetInstanceByName(name)\r\n    },\r\n    updateDimensions: function() {\r\n        var that = this;\r\n        var deferred = new _deferred.Deferred;\r\n        if (that._scrollable) {\r\n            that._scrollable.update().done(function() {\r\n                deferred.resolveWith(that)\r\n            })\r\n        } else {\r\n            deferred.resolveWith(that)\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    itemOption: function(id, option, value) {\r\n        var _this5 = this;\r\n        var items = this._generateItemsFromData(this.option(\"items\"));\r\n        var item = this._getItemByField(id, items);\r\n        var path = (0, _uiForm4.getItemPath)(items, item);\r\n        if (!item) {\r\n            return\r\n        }\r\n        switch (arguments.length) {\r\n            case 1:\r\n                return item;\r\n            case 3:\r\n                var itemAction = this._tryCreateItemOptionAction(option, item, value, item[option], path);\r\n                this._changeItemOption(item, option, value);\r\n                var fullName = (0, _uiForm4.getFullOptionName)(path, option);\r\n                if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(fullName, value)) {\r\n                    this.option(\"items\", items)\r\n                }\r\n                break;\r\n            default:\r\n                if ((0, _type.isObject)(option)) {\r\n                    if (!this._tryChangeLayoutManagerItemOptions(path, option)) {\r\n                        var allowUpdateItems;\r\n                        (0, _iterator.each)(option, function(optionName, optionValue) {\r\n                            var itemAction = _this5._tryCreateItemOptionAction(optionName, item, optionValue, item[optionName], path);\r\n                            _this5._changeItemOption(item, optionName, optionValue);\r\n                            if (!allowUpdateItems && !_this5._tryExecuteItemOptionAction(itemAction)) {\r\n                                allowUpdateItems = true\r\n                            }\r\n                        });\r\n                        allowUpdateItems && this.option(\"items\", items)\r\n                    }\r\n                }\r\n        }\r\n    },\r\n    validate: function() {\r\n        return _validation_engine.default.validateGroup(this._getValidationGroup())\r\n    },\r\n    getItemID: function(name) {\r\n        return \"dx_\" + this.option(\"formID\") + \"_\" + (name || new _guid.default)\r\n    },\r\n    getTargetScreenFactor: function() {\r\n        return this._targetScreenFactor\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxForm\", Form);\r\nvar _default = Form;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}