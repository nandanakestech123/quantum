{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\Admin\\\\CustomerPlus\\\\CustomerDetailsPlus\\\\DocumentUploadViewTab\\\\DocumentUploadViewTab.js\";\nimport React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { TableWrapper, NormalInput, NormalFileUpload, DragFileUpload } from \"component/common\";\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { withTranslation } from \"react-i18next\";\nimport { history } from \"helpers\";\nimport { Toast } from \"service/toast\";\nimport SimpleReactValidator from 'simple-react-validator';\nexport class DocumentUploadViewTabClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formFields: {\n        customer_id: \"\",\n        filename: \"\",\n        document_name: \"\",\n        files: \"\"\n      },\n      activeTab: \"\",\n      isOpenTreatmentDone: false,\n      isActiveTab: \"detail\",\n      headerDetails: [{\n        label: \"File Name \",\n        width: \"180px\"\n      }, {\n        label: \"Document Name\",\n        sortKey: false,\n        width: \"150px\"\n      }, {\n        label: \"File \",\n        sortKey: false,\n        width: \"400px\"\n      }],\n      documentList: [],\n      documentListHeader: {}\n    };\n\n    this.toggle = tab => {\n      if (this.state.activeTab !== tab) {\n        this.setState({\n          activeTab: tab\n        });\n      }\n    };\n\n    this.getCustomerDocument = () => {\n      let {\n        documentListHeader\n      } = this.state;\n      this.props.getCommonApi(`customerdocument/?customer_id=${this.props.id}`).then(key => {\n        let {\n          data,\n          header_data\n        } = key;\n        let {\n          documentList\n        } = this.state;\n        documentList = data;\n        documentListHeader = header_data;\n        this.setState({\n          documentList,\n          documentListHeader\n        });\n      });\n    };\n\n    this.handleChangeFormName = ({\n      target: {\n        name,\n        value\n      }\n    }) => {\n      let formFields = Object.assign({}, this.state.formFields);\n      formFields['filename'] = value;\n      this.setState({\n        formFields\n      });\n    };\n\n    this.handleChangeDocumentName = ({\n      target: {\n        name,\n        value\n      }\n    }) => {\n      let formFields = Object.assign({}, this.state.formFields);\n      formFields['document_name'] = value;\n      this.setState({\n        formFields\n      });\n    };\n\n    this.handlefile = e => {\n      let {\n        formFields\n      } = this.state;\n      formFields[\"files\"] = e.target.files[0]; //img.append(\"images\", e.target.files[0]);\n      //this.props.handleFileUpload(e.target.files[0]);\n      // console.log(e.target.files[0], \"sdkflodsjfpsjdf ===\", img)\n    };\n\n    this.handleImageUpload = file => {\n      let {\n        formFields\n      } = this.state;\n      formFields[\"files\"] = file;\n      this.setState({\n        formFields\n      });\n    };\n\n    this.handleSubmit = () => {\n      //  if (this.props.match.params.id) {\n      //  this.handleUpdate();\n      //} else {\n      this.handleSave(); //}\n    };\n\n    this.handleSave = () => {\n      let {\n        formFields\n      } = this.state;\n      let payload = {\n        customer_id: this.props.id,\n        filename: formFields.filename,\n        document_name: formFields.document_name,\n        file: formFields.files\n      };\n      let formData = new FormData();\n      formData.append(\"customer_id\", this.props.id);\n      formData.append(\"filename\", formFields.filename);\n      formData.append(\"document_name\", formFields.document_name);\n      formData.append(\"file\", formFields.files); //console.log(pdf, \"filecontentlog\");\n\n      this.props.commonCreateApi(`customerdocument/`, formData).then(async key => {\n        Toast({\n          type: \"success\",\n          message: \"Document Saved Successfully\"\n        });\n        this.getCustomerDocument(); // history.push(`admin/customerplus/${this.props.id}/documents`);\n      });\n    };\n  }\n\n  componentWillUnmount() {\n    this.validator = new SimpleReactValidator({\n      element: message => /*#__PURE__*/React.createElement(\"span\", {\n        className: \"error-message text-danger validNo fs14\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }\n      }, message),\n      autoForceUpdate: this\n    });\n  }\n\n  componentDidMount() {\n    this.getCustomerDocument();\n  }\n\n  /*this.props.commonCreateApi(`customerdocument/`, payload).then(async res => {\r\n    if (res.status === 201) {\r\n      history.push(`admin/customerplus/${this.props.id}/documents`);\r\n    }\r\n  });\r\n  };*/\n  render() {\n    let {\n      formFields,\n      headerDetails,\n      documentList = [],\n      documentListHeader = {}\n    } = this.state;\n    let {\n      filename,\n      document_name,\n      files\n    } = formFields;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"treatment-account\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }, t(\"File Name\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: filename,\n      name: \"filename\",\n      onChange: this.handleChangeFormName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, t(\"Document Name\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: document_name,\n      name: \"document_name\",\n      onChange: this.handleChangeDocumentName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handlefile,\n      accept: \"file/*\",\n      type: \"file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      id: \"get_file\",\n      value: \"Upload\",\n      className: \"btn cursor-pointer mainbg-btn\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination // pageMeta={pageMeta}\n      // isEmpty={documentList.length === 0 ? true:false}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, documentList && documentList.length > 0 ? documentList.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }\n      }, item.filename)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 25\n        }\n      }, item.document_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: item.file,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 52\n        }\n      }, item.file))));\n    }) : null))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    updateForm,\n    commonCreateApi,\n    commonPatchApi,\n    commonDeleteApi\n  }, dispatch);\n};\n\nexport const DocumentUploadViewTab = withTranslation()(connect(null, mapDispatchToProps)(DocumentUploadViewTabClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/DocumentUploadViewTab/DocumentUploadViewTab.js"],"names":["React","Component","TableWrapper","NormalInput","NormalFileUpload","DragFileUpload","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","connect","bindActionCreators","withTranslation","history","Toast","SimpleReactValidator","DocumentUploadViewTabClass","state","formFields","customer_id","filename","document_name","files","activeTab","isOpenTreatmentDone","isActiveTab","headerDetails","label","width","sortKey","documentList","documentListHeader","toggle","tab","setState","getCustomerDocument","props","id","then","key","data","header_data","handleChangeFormName","target","name","value","Object","assign","handleChangeDocumentName","handlefile","e","handleImageUpload","file","handleSubmit","handleSave","payload","formData","FormData","append","type","message","componentWillUnmount","validator","element","autoForceUpdate","componentDidMount","render","t","handlePagination","length","map","item","index","mapDispatchToProps","dispatch","DocumentUploadViewTab"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport { TableWrapper, NormalInput, NormalFileUpload, DragFileUpload } from \"component/common\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { history } from \"helpers\";\r\nimport { Toast } from \"service/toast\";\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nexport class DocumentUploadViewTabClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      customer_id: \"\",\r\n      filename: \"\",\r\n      document_name: \"\",\r\n      files: \"\",\r\n    },\r\n    activeTab: \"\",\r\n    isOpenTreatmentDone: false,\r\n    isActiveTab: \"detail\",\r\n    headerDetails: [\r\n\r\n      { label: \"File Name \", width: \"180px\" },\r\n      { label: \"Document Name\", sortKey: false, width: \"150px\" },\r\n      {\r\n        label: \"File \",\r\n        sortKey: false,\r\n        width: \"400px\",\r\n      },\r\n    ],\r\n\r\n\r\n    documentList: [],\r\n    documentListHeader: {},\r\n  };\r\n\r\n  toggle = tab => {\r\n    if (this.state.activeTab !== tab) {\r\n      this.setState({\r\n        activeTab: tab,\r\n      });\r\n    }\r\n  };\r\n  componentWillUnmount() {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  }\r\n  componentDidMount() {\r\n    this.getCustomerDocument();\r\n\r\n  }\r\n\r\n  getCustomerDocument = () => {\r\n    let { documentListHeader } = this.state;\r\n    this.props\r\n      .getCommonApi(`customerdocument/?customer_id=${this.props.id}`)\r\n      .then(key => {\r\n        let { data, header_data } = key;\r\n        let { documentList } = this.state;\r\n        documentList = data;\r\n        documentListHeader = header_data;\r\n        this.setState({ documentList, documentListHeader });\r\n      });\r\n  };\r\n\r\n\r\n  handleChangeFormName = ({ target: { name, value } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields)\r\n    formFields['filename'] = value;\r\n    this.setState({\r\n      formFields\r\n    });\r\n  }\r\n  handleChangeDocumentName = ({ target: { name, value } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields)\r\n    formFields['document_name'] = value;\r\n    this.setState({\r\n      formFields\r\n    });\r\n  }\r\n\r\n  handlefile = (e) => {\r\n    let { formFields } = this.state;\r\n    formFields[\"files\"] = e.target.files[0];\r\n    //img.append(\"images\", e.target.files[0]);\r\n    //this.props.handleFileUpload(e.target.files[0]);\r\n    // console.log(e.target.files[0], \"sdkflodsjfpsjdf ===\", img)\r\n  };\r\n\r\n  // select image to formfield\r\n  handleImageUpload = file => {\r\n    let { formFields } = this.state;\r\n    formFields[\"files\"] = file;\r\n    this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n  handleSubmit = () => {\r\n    //  if (this.props.match.params.id) {\r\n    //  this.handleUpdate();\r\n    //} else {\r\n    this.handleSave();\r\n    //}\r\n  };\r\n  handleSave = () => {\r\n    let { formFields } = this.state;\r\n\r\n    let payload = {\r\n      customer_id: this.props.id,\r\n      filename: formFields.filename,\r\n      document_name: formFields.document_name,\r\n      file: formFields.files,\r\n    };\r\n\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"customer_id\", this.props.id);\r\n    formData.append(\"filename\", formFields.filename);\r\n    formData.append(\"document_name\", formFields.document_name);\r\n    formData.append(\"file\", formFields.files);\r\n\r\n    //console.log(pdf, \"filecontentlog\");\r\n    this.props.commonCreateApi(`customerdocument/`, formData).then(async key => {\r\n      Toast({\r\n        type: \"success\",\r\n        message: \"Document Saved Successfully\",\r\n      });\r\n      this.getCustomerDocument();\r\n      // history.push(`admin/customerplus/${this.props.id}/documents`);\r\n    });\r\n  }\r\n  /*this.props.commonCreateApi(`customerdocument/`, payload).then(async res => {\r\n    if (res.status === 201) {\r\n      history.push(`admin/customerplus/${this.props.id}/documents`);\r\n    }\r\n  });\r\n};*/\r\n  render() {\r\n    let {\r\n      formFields,\r\n      headerDetails,\r\n      documentList = [],\r\n      documentListHeader = {},\r\n    } = this.state;\r\n    let {\r\n      filename,\r\n      document_name,\r\n      files,\r\n    } = formFields;\r\n    let { t } = this.props;\r\n    return (\r\n      <div className=\"treatment-account\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 col-12 mb-4\">\r\n            <label className=\"text-left text-black common-label-text fs-17 pb-1\">\r\n              {t(\"File Name\")}\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                placeholder=\"Enter here\"\r\n                value={filename}\r\n                name=\"filename\"\r\n                onChange={this.handleChangeFormName}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-6 col-12 mb-4\">\r\n            <label className=\"text-left text-black common-label-text fs-17 pb-1\">\r\n              {t(\"Document Name\")}\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                placeholder=\"Enter here\"\r\n                value={document_name}\r\n                name=\"document_name\"\r\n                onChange={this.handleChangeDocumentName}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-3 col-12 mb-4\">\r\n\r\n            <input\r\n              onChange={this.handlefile}\r\n              accept=\"file/*\"\r\n              type=\"file\" />\r\n          </div>\r\n          <div className=\"col-3\">\r\n            <input\r\n              type=\"button\"\r\n              id=\"get_file\"\r\n              value=\"Upload\"\r\n              className=\"btn cursor-pointer mainbg-btn\"\r\n              onClick={this.handleSubmit}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-12 mt-2\">\r\n          <div className=\"table\">\r\n            <TableWrapper\r\n              headerDetails={headerDetails}\r\n              queryHandler={this.handlePagination}\r\n            // pageMeta={pageMeta}\r\n            // isEmpty={documentList.length === 0 ? true:false}\r\n            >\r\n              {documentList && documentList.length > 0\r\n                ? documentList.map((item, index) => {\r\n                  return (\r\n                    <tr key={index}>\r\n\r\n                      <td>\r\n                        <div className=\"text-left\">{item.filename}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-left\">{item.document_name}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"text-left\"><a href={item.file}>{item.file}</a></div>\r\n                      </td>\r\n\r\n                    </tr>\r\n                  );\r\n                })\r\n                : null}\r\n            </TableWrapper>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const DocumentUploadViewTab = withTranslation()(\r\n  connect(null, mapDispatchToProps)(DocumentUploadViewTabClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}