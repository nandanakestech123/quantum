{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NavLink}from'react-router-dom';import{NormalButton,NormalSelect,NormalModal,NormalInput}from'component/common';import{InputSearch,TableWrapper}from'component/common';import{Cart}from'.';import'./style.scss';// import { SalonProduct } from './salonProduct';\n// import { Services } from './services';\n// import { Courses } from './courses';\n// import { RetailProduct } from './retailProduct'\nimport{connect}from'react-redux';import{bindActionCreators}from\"redux\";import{getCommonApi,updateForm}from'redux/actions/common';import closeIcon from'assets/images/close.png';import{dateFormat}from'service/helperFunctions';import _ from'lodash';export var CartHomeClass=/*#__PURE__*/function(_Component){_inherits(CartHomeClass,_Component);var _super=_createSuper(CartHomeClass);function CartHomeClass(){var _this;_classCallCheck(this,CartHomeClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={active:false,currentValue:0,navLinks:[],customerList:[],branchList:[],isOpenModal:false,customerDetail:{branchId:\"\",cust_noid:\"\"}};_this.componentDidMount=function(){var _this$state=_this.state,productCard=_this$state.productCard,branchList=_this$state.branchList;_this.props.getCommonApi(\"treatment/Outlet/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;branchList.push({value:value.id,label:value.itemsite_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({branchList:branchList});// console.log(brachList, \"jhksdfkjsdhfks\")\n}});};_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,_this$state2,customerDetail,customerList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;_this$state2=_this.state,customerDetail=_this$state2.customerDetail,customerList=_this$state2.customerList;console.log(\"uihwkjrwkej\",name,value);customerDetail[name]=value;_context.next=6;return _this.setState({customerDetail:customerDetail});case 6:if(name===\"branchId\"){_this.props.getCommonApi(\"custappt/?Outlet=\".concat(value)).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _value=_step2.value;customerList.push({value:_value.id,label:_value.cust_name+\" | \"+_value.cust_phone1+\" | \"+_value.cust_code});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({customerList:customerList});}});}_this.props.updateForm('selected_customer',customerDetail);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleClick=function(key){var _this$state3=_this.state,active=_this$state3.active,currentValue=_this$state3.currentValue;_this.setState({active:true,currentValue:key});};_this.handleSearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;var data={search:searchString};// this.queryHandler(data)\nvar _this$state4=_this.state,customerList=_this$state4.customerList,customerDetail=_this$state4.customerDetail;_this.props.getCommonApi(\"custappt/?Outlet=\".concat(customerDetail.branchId,\"&search=\").concat(searchString)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerList:data});}});},500);}_this.debouncedFn();};_this.handleCloseDialog=function(){_this.setState({isOpenModal:false});};_this.handleSelectCustomer=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var _this$state5,customerList,customerDetail,servicesDetail;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state5=_this.state,customerList=_this$state5.customerList,customerDetail=_this$state5.customerDetail,servicesDetail=_this$state5.servicesDetail;customerDetail['cust_noid']=data.id;customerDetail['cust_name']=data.cust_name;_context2.next=5;return _this.setState({customerDetail:customerDetail});case 5:_this.props.updateForm('selected_customer',customerDetail);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();return _this;}_createClass(CartHomeClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state6=this.state,navLinks=_this$state6.navLinks,active=_this$state6.active,currentValue=_this$state6.currentValue,branchList=_this$state6.branchList,customerList=_this$state6.customerList;var _this$state7=this.state,servicesDetail=_this$state7.servicesDetail,isOpenModal=_this$state7.isOpenModal;var selected_cstomer=this.props.selected_cstomer;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"cart-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2 mb-5 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pl-0 mt-3 fs-18 py-2\"},\"Select Branch\"),/*#__PURE__*/React.createElement(NormalSelect,{placeholder:\"select\",options:branchList,value:selected_cstomer.branchId,name:\"branchId\",onChange:this.handleChange,className:\"customer-name p-0\"}),/*#__PURE__*/React.createElement(\"div\",{className:\" pl-0 mt-3 fs-18 py-2\"},\"Customer\"),/*#__PURE__*/React.createElement(NormalInput// placeholder=\"Enter here\"\n// options={siteList}\n,{value:selected_cstomer.cust_name,name:\"cust_name\",onClick:function onClick(){return _this2.setState({isOpenModal:true});}// onChange={this.handleSearch}\n,className:\"search customer-name px-3 p-0\"// disabled\n}),/*#__PURE__*/React.createElement(\"div\",{className:\"confirm\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\" fs-15 mt-5\",label:\"Catalog\",onClick:function onClick(){return _this2.props.history.push('/admin/catalog');}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"pr-0 position-relative cart-bar\"},/*#__PURE__*/React.createElement(Cart,null))),/*#__PURE__*/React.createElement(NormalModal,{className:\"multiple-appointment select-category\",modal:isOpenModal,handleModal:this.handleCloseDialog},/*#__PURE__*/React.createElement(\"img\",{onClick:this.handleCloseDialog,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2 mb-5 mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pl-0 mt-3 fs-18 py-2\"},\"Customer\"),/*#__PURE__*/React.createElement(\"input\",{// placeholder=\"Enter here\"\n// options={siteList}\nvalue:selected_cstomer.cust_name,name:\"cust_name\"// onClick={() => this.setState({ isOpenModal: true })}\n,onChange:this.handleSearch,className:\"search px-3 p-0\",disabled:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pl-0 mt-3 fs-18 py-2\"},\"Search\"),/*#__PURE__*/React.createElement(\"input\",{// placeholder=\"Enter here\"\n// options={siteList}\n// value={treatmentField.treatment}\nname:\"treatment\"// onClick={() => this.setState({ isOpenModal: true })}\n,onChange:this.handleSearch,className:\"search px-3 p-0\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 table-header w-100 m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},\"Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},\"Phone\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},\"Cust Code\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"Email\")),customerList.length>0?customerList.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0 table-body w-100\",onClick:function onClick(){return _this2.handleSelectCustomer(item);},key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_name),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.cust_phone1),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},item.cust_code),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},item.cust_email));}):/*#__PURE__*/React.createElement(\"div\",{className:\"text-center w-100\"},\"No Data are available\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex create m-5 w-100\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\"// mainbg={true}\n,className:\"col-12 fs-15 multiple-customer\",label:\"Continue\",outline:true,onClick:this.handleCloseDialog})))));}}]);return CartHomeClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{// customerDetail: state.appointment.customerDetail,\nselected_cstomer:state.common.selected_cstomer};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,updateForm:updateForm},dispatch);};export var CartHome=connect(mapStateToProps,mapDispatchToProps)(CartHomeClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/carthome.js"],"names":["React","Component","NavLink","NormalButton","NormalSelect","NormalModal","NormalInput","InputSearch","TableWrapper","Cart","connect","bindActionCreators","getCommonApi","updateForm","closeIcon","dateFormat","_","CartHomeClass","state","active","currentValue","navLinks","customerList","branchList","isOpenModal","customerDetail","branchId","cust_noid","componentDidMount","productCard","props","then","key","status","data","value","push","id","label","itemsite_desc","setState","handleChange","target","name","console","log","cust_name","cust_phone1","cust_code","handleClick","handleSearch","event","persist","debouncedFn","debounce","searchString","search","handleCloseDialog","handleSelectCustomer","servicesDetail","selected_cstomer","history","length","map","item","index","cust_email","mapStateToProps","common","mapDispatchToProps","dispatch","CartHome"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { NavLink } from 'react-router-dom';\r\nimport { NormalButton, NormalSelect, NormalModal, NormalInput } from 'component/common';\r\nimport { InputSearch, TableWrapper } from 'component/common';\r\nimport { Cart } from '.'\r\nimport './style.scss'\r\n// import { SalonProduct } from './salonProduct';\r\n// import { Services } from './services';\r\n// import { Courses } from './courses';\r\n// import { RetailProduct } from './retailProduct'\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, updateForm } from 'redux/actions/common';\r\nimport closeIcon from 'assets/images/close.png';\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport _ from 'lodash';\r\n\r\nexport class CartHomeClass extends Component {\r\n  state = {\r\n    active: false,\r\n    currentValue: 0,\r\n    navLinks: [\r\n\r\n    ],\r\n    customerList: [],\r\n    branchList: [],\r\n    isOpenModal: false,\r\n    customerDetail: {\r\n      branchId: \"\",\r\n      cust_noid: \"\"\r\n  },\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    let { productCard, branchList } = this.state;\r\n   \r\n    this.props.getCommonApi(`treatment/Outlet/`).then((key) => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n            for (let value of data) {\r\n                branchList.push({ value: value.id, label: value.itemsite_desc })\r\n            }\r\n            this.setState({ branchList })\r\n            // console.log(brachList, \"jhksdfkjsdhfks\")\r\n        }\r\n    })\r\n}\r\n\r\nhandleChange = async ({ target: { value, name } }) => {\r\n  let { customerDetail, customerList } = this.state;\r\n  console.log(\"uihwkjrwkej\", name, value)\r\n  customerDetail[name] = value;\r\n  await this.setState({\r\n      customerDetail,\r\n  });\r\n  if (name === \"branchId\") {\r\n      this.props.getCommonApi(`custappt/?Outlet=${value}`).then((key) => {\r\n          let { status, data } = key;\r\n          if (status === 200) {\r\n              for (let value of data) {\r\n                  customerList.push({ value: value.id, label: value.cust_name + \" | \" + value.cust_phone1 + \" | \" + value.cust_code })\r\n              }\r\n              this.setState({ customerList })\r\n          }\r\n      }) \r\n  }\r\n  this.props.updateForm('selected_customer', customerDetail)\r\n}\r\n\r\n  handleClick = (key) => {\r\n    let { active, currentValue } = this.state\r\n    this.setState({\r\n      active: true,\r\n      currentValue: key\r\n    })\r\n  }\r\n\r\n  handleSearch = (event) => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n        this.debouncedFn = _.debounce(() => {\r\n            let searchString = event.target.value;\r\n            let data = { search: searchString }\r\n            // this.queryHandler(data)\r\n            let { customerList, customerDetail } = this.state;\r\n            this.props.getCommonApi(`custappt/?Outlet=${customerDetail.branchId}&search=${searchString}`).then((key) => {\r\n                \r\n                let { status, data } = key;\r\n                if (status === 200) {\r\n                    // for (let value of data) {\r\n                    //     customerList.push({ value: value.id, label: value.emp_name })\r\n                    // }\r\n                    this.setState({ customerList: data })\r\n                }\r\n            })\r\n        }, 500);\r\n    }\r\n    this.debouncedFn();\r\n}\r\n\r\nhandleCloseDialog = () => {\r\n    this.setState({\r\n        isOpenModal:false,\r\n    })\r\n}\r\n\r\nhandleSelectCustomer = async(data) => {\r\n  let { customerList, customerDetail, servicesDetail } = this.state;\r\n  customerDetail['cust_noid'] = data.id;\r\n  customerDetail['cust_name'] = data.cust_name;\r\n  await this.setState({customerDetail})\r\n  this.props.updateForm('selected_customer', customerDetail)\r\n}\r\n\r\n  render() {\r\n    let { navLinks, active, currentValue, branchList, customerList } = this.state\r\n    let { servicesDetail, isOpenModal } = this.state;\r\n    let { selected_cstomer } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"cart-section\">\r\n        \r\n        <div className=\"row mt-2 mb-5 mx-3\">\r\n          <div className=\"col-10\">\r\n          {/* {console.log(\"safasdfasdf\", this.props)} */}\r\n              <div className=\"pl-0 mt-3 fs-18 py-2\">\r\n                Select Branch\r\n            </div>\r\n              <NormalSelect\r\n                placeholder=\"select\"\r\n                options={branchList}\r\n                value={selected_cstomer.branchId}\r\n                name=\"branchId\"\r\n                onChange={this.handleChange}\r\n                className=\"customer-name p-0\"\r\n              />\r\n              <div className=\" pl-0 mt-3 fs-18 py-2\">\r\n                Customer\r\n            </div>\r\n              <NormalInput\r\n                // placeholder=\"Enter here\"\r\n                // options={siteList}\r\n                value={selected_cstomer.cust_name}\r\n                name=\"cust_name\"\r\n                onClick={() => this.setState({ isOpenModal: true })}\r\n                // onChange={this.handleSearch}\r\n                className=\"search customer-name px-3 p-0\"\r\n                // disabled\r\n              />\r\n\r\n              <div className=\"confirm\">\r\n                <NormalButton\r\n                  mainbg={true}\r\n                  className=\" fs-15 mt-5\"\r\n                  label=\"Catalog\"\r\n                  onClick={() => this.props.history.push('/admin/catalog')}\r\n                />\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"pr-0 position-relative cart-bar\">\r\n            <Cart />\r\n          </div>\r\n        </div>\r\n       \r\n          <NormalModal className={\"multiple-appointment select-category\"} modal={isOpenModal} handleModal={this.handleCloseDialog}>\r\n            <img onClick={this.handleCloseDialog} className=\"close\" src={closeIcon} alt=\"\" />\r\n            <div className=\"row mt-2 mb-5 mx-3\">\r\n             \r\n              <div className=\"col-12 pl-0 mt-3 fs-18 py-2\">\r\n                Customer\r\n                        </div>\r\n              <input\r\n                // placeholder=\"Enter here\"\r\n                // options={siteList}\r\n                value={selected_cstomer.cust_name}\r\n                name=\"cust_name\"\r\n                // onClick={() => this.setState({ isOpenModal: true })}\r\n                onChange={this.handleSearch}\r\n                className=\"search px-3 p-0\"\r\n                disabled\r\n              />\r\n             \r\n              <div className=\"col-12 pl-0 mt-3 fs-18 py-2\">\r\n                Search\r\n                        </div>\r\n              <input\r\n                // placeholder=\"Enter here\"\r\n                // options={siteList}\r\n                // value={treatmentField.treatment}\r\n                name=\"treatment\"\r\n                // onClick={() => this.setState({ isOpenModal: true })}\r\n                onChange={this.handleSearch}\r\n                className=\"search px-3 p-0\"\r\n              />\r\n\r\n              <div className=\"row mt-4 table-header w-100 m-0\">\r\n                <div className=\"col-2\">Name</div>\r\n                <div className=\"col-2\">Phone</div>\r\n                <div className=\"col-3\">Cust Code</div>\r\n                <div className=\"col-5\">Email</div>\r\n              </div>\r\n              {customerList.length > 0 ? customerList.map((item, index) => {\r\n                return (\r\n                  <div className=\"row m-0 table-body w-100\" onClick={() => this.handleSelectCustomer(item)} key={index}>\r\n                    <div className=\"col-2\">{item.cust_name}</div>\r\n                    <div className=\"col-2\">{item.cust_phone1}</div>\r\n                    <div className=\"col-3\">{item.cust_code}</div>\r\n                    <div className=\"col-5\">{item.cust_email}</div>\r\n                  </div>\r\n                )\r\n              }) : <div className=\"text-center w-100\">\r\n                  No Data are available\r\n                        </div>}\r\n              <div className=\"d-flex create m-5 w-100\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2\"}\r\n                  // mainbg={true}\r\n                  className=\"col-12 fs-15 multiple-customer\"\r\n                  label=\"Continue\"\r\n                  outline={true}\r\n                  onClick={this.handleCloseDialog}\r\n                />\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </NormalModal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  // customerDetail: state.appointment.customerDetail,\r\n  selected_cstomer: state.common.selected_cstomer,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators({\r\n    // getCustomer,\r\n    getCommonApi,\r\n    updateForm\r\n  }, dispatch)\r\n}\r\n\r\nexport const CartHome = connect(mapStateToProps, mapDispatchToProps)(CartHomeClass)"]},"metadata":{},"sourceType":"module"}