{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import{Link}from\"react-router-dom\";import\"./style.scss\";import{getCustomerPlus,getCustomerPlusSettings}from\"redux/actions/customerPlus\";import{updateForm,getCommonApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import _ from\"lodash\";import birthdayIcon from\"assets/images/app-icons/3.png\";import{dateFormat}from\"service/helperFunctions\";import{withTranslation}from\"react-i18next\";export var ListCustomerPlusClass=/*#__PURE__*/function(_React$Component){_inherits(ListCustomerPlusClass,_React$Component);var _super=_createSuper(ListCustomerPlusClass);function ListCustomerPlusClass(){var _this;_classCallCheck(this,ListCustomerPlusClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[],customerList:[],originalCustomerList:[],search:\"\",meta:{},active:false,currentIndex:-1,isLoading:true,isExportLoading:false,isMounted:true,orderBy:\"desc\"};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.componentDidMount=function(){_this.getCustomerPlus({});};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.updateState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.getCustomerPlus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _customerDetails$meta;var _this$state,search,headerDetails,_data$page,page,_data$limit,limit,settings,_iterator,_step,_loop,customerDetails;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateState({isLoading:true});_this$state=_this.state,search=_this$state.search,headerDetails=_this$state.headerDetails;_data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit;if(!(headerDetails.length==0)){_context.next=11;break;}_context.next=6;return _this.props.getCustomerPlusSettings();case 6:settings=_this.props.settings;_iterator=_createForOfIteratorHelper(settings);try{_loop=function _loop(){var _step$value=_step.value,display_field_name=_step$value.display_field_name,field_name=_step$value.field_name,visible_in_listing=_step$value.visible_in_listing;if(visible_in_listing)headerDetails.push({label:display_field_name,field:field_name,sortKey:field_name,singleClickFunc:function singleClickFunc(){return _this.handleSort(field_name);}});};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}headerDetails.push({label:\"\"});_this.updateState({headerDetails:headerDetails});case 11:_context.next=13;return _this.props.getCustomerPlus(\"?page=\".concat(page,\"&limit=\").concat(limit,\"&search=\").concat(search));case 13:customerDetails=_this.props.customerDetails;_this.updateState({customerList:customerDetails.dataList,originalCustomerList:customerDetails.dataList,meta:(_customerDetails$meta=customerDetails.meta)===null||_customerDetails$meta===void 0?void 0:_customerDetails$meta.pagination,isLoading:false});case 15:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlePagination=function(page){_this.getCustomerPlus(page);};_this.handlesearch=function(event){console.log(event.target.value);var search=_this.state.search;search=event.target.value;_this.setState({search:search});if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.getCustomerPlus({});case 1:case\"end\":return _context2.stop();}}},_callee2);})),500);}_this.debouncedFn();};_this.bookAppointment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formFields={};formFields[\"custId\"]=data.id;formFields[\"custName\"]=data.cust_name;_context3.next=5;return _this.props.updateForm(\"basicApptDetail\",formFields);case 5:_this.props.history.push(\"/admin/newappointment\");case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleExportClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var search,_2,page,_3,limit,exceldata;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this.updateState({isExportLoading:true});search=_this.state.search;_2=1,page=_2.page;_3=10,limit=_3.limit;exceldata=1;_this.props.getCustomerPlus(\"?page=\".concat(page,\"&limit=\").concat(limit,\"&search=\").concat(search,\"&excel=\").concat(exceldata)).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){var data,a;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=res.data;console.log(res,\"exportclickresponse\");_context4.next=4;return _this.updateState({isExportLoading:false});case 4:if(data){// window.open(data);\na=document.createElement(\"a\");a.setAttribute(\"href\",data);a.click();}case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref5.apply(this,arguments);};}());case 6:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleSort=function(sortkey,order){var _this$state2=_this.state,customerList=_this$state2.customerList,headerDetails=_this$state2.headerDetails,orderBy=_this$state2.orderBy;_this.setState({orderBy:_this.state.orderBy==\"asc\"?\"desc\":\"asc\"});if(orderBy===\"asc\"){customerList.sort(function(a,b){return a[sortkey]>b[sortkey]?1:b[sortkey]>a[sortkey]?-1:0;});}else{customerList.sort(function(a,b){return a[sortkey]<b[sortkey]?1:b[sortkey]<a[sortkey]?-1:0;});}_this.setState({customerList:customerList});};return _this;}_createClass(ListCustomerPlusClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,headerDetails=_this$state3.headerDetails,originalCustomerList=_this$state3.originalCustomerList,customerList=_this$state3.customerList,meta=_this$state3.meta,currentIndex=_this$state3.currentIndex,isLoading=_this$state3.isLoading,isExportLoading=_this$state3.isExportLoading;var _this$props=this.props,t=_this$props.t,tokenDetail=_this$props.tokenDetail;return/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container-fluid\"},Number(tokenDetail.role_code)===1?/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/customerplus/settings\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Settings\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-3 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/customerplus/lpmanagement\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"LP Management\"})))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 h5\"},t(\"Customer List\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 col-sm-12 mb-2\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Customer\",onChange:this.handlesearch,disabled:isLoading})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-12 col-sm-12\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Customer\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/add\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 col-sm-12\"},isExportLoading?/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},t(\"Loading...\")))):/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Export\",onClick:this.handleExportClick})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:meta,showFilterColumn:true,parentHeaderChange:function parentHeaderChange(value){return _this2.updateState(function(){return headerDetails=value;});}// sortData={originalCustomerList}\n// onSort={list => this.updateState({ customerList: list })}\n},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\"))))):customerList?customerList.map(function(item,index){var id=item.id,cust_code=item.cust_code,cust_refer=item.cust_refer,cust_name=item.cust_name,cust_phone2=item.cust_phone2,cust_dob=item.cust_dob,class_name=item.class_name,birthday=item.birthday;var date=new Date(cust_dob);//cust_dob = date.toLocaleDateString();\ncust_dob=dateFormat(date,\"dd-mm-yyyy\");return/*#__PURE__*/React.createElement(\"tr\",{key:index,onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/\".concat(id,\"/details\"));}},headerDetails.map(function(e){return e.field?/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item[e.field])):null;}),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative d-none\",ref:function ref(node){_this2.node=node;},onClick:function onClick(){return _this2.handleClick(index);}},currentIndex===index?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more-active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"option card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pt-3\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/\".concat(id,\"/details\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey px-3\"}),t(\"View\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/\".concat(id,\"/lpmanagement\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"px-2\"},/*#__PURE__*/React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"31\",height:\"30\",fill:\"currentColor\",viewBox:\"0 0 15 30\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"}))),t(\"Loyalty Points Management\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-schedule px-3\"}),\" \",t(\"Reschedule Appointment\"),\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\",onClick:function onClick(){return _this2.bookAppointment(item);}},/*#__PURE__*/React.createElement(\"span\",{className:\"px-2\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"31\",height:\"30\",viewBox:\"0 0 31 30\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"rect\",{width:\"31\",height:\"30\",fill:\"#F9F9F9\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M15 8V22\",stroke:\"#848484\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M8 15H22\",stroke:\"#848484\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}))),t(\"Book Appointment\")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-cancel-schedule px-3\"}),\" \",t(\"Cancel Appointment\"),\" \"))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"}))));}):null)))))));}}]);return ListCustomerPlusClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{customerDetails:state.customerPlus.customerPlusDetail,settings:state.customerPlus.customerPlusSettings,tokenDetail:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomerPlus:getCustomerPlus,updateForm:updateForm,getCustomerPlusSettings:getCustomerPlusSettings,getCommonApi:getCommonApi},dispatch);};export var ListCustomerPlus=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ListCustomerPlusClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/ListCustomerPlus/index.js"],"names":["React","NormalButton","InputSearch","TableWrapper","Link","getCustomerPlus","getCustomerPlusSettings","updateForm","getCommonApi","connect","bindActionCreators","_","birthdayIcon","dateFormat","withTranslation","ListCustomerPlusClass","state","headerDetails","customerList","originalCustomerList","search","meta","active","currentIndex","isLoading","isExportLoading","isMounted","orderBy","updateState","data","setState","componentDidMount","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","page","limit","length","props","settings","display_field_name","field_name","visible_in_listing","push","label","field","sortKey","singleClickFunc","handleSort","customerDetails","dataList","pagination","handlePagination","handlesearch","event","console","log","value","debouncedFn","debounce","bookAppointment","formFields","id","cust_name","history","handleExportClick","exceldata","then","res","a","createElement","setAttribute","click","sortkey","order","sort","b","t","tokenDetail","Number","role_code","map","item","index","cust_code","cust_refer","cust_phone2","cust_dob","class_name","birthday","date","Date","Component","mapStateToProps","customerPlus","customerPlusDetail","customerPlusSettings","authStore","tokenDetails","mapDispatchToProps","dispatch","ListCustomerPlus"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport { Link } from \"react-router-dom\";\nimport \"./style.scss\";\nimport {\n  getCustomerPlus,\n  getCustomerPlusSettings,\n} from \"redux/actions/customerPlus\";\nimport { updateForm, getCommonApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nimport birthdayIcon from \"assets/images/app-icons/3.png\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { withTranslation } from \"react-i18next\";\n\nexport class ListCustomerPlusClass extends React.Component {\n  state = {\n    headerDetails: [],\n    customerList: [],\n    originalCustomerList: [],\n    search: \"\",\n    meta: {},\n    active: false,\n    currentIndex: -1,\n    isLoading: true,\n    isExportLoading: false,\n    isMounted: true,\n    orderBy: \"desc\",\n  };\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = data => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount = () => {\n    this.getCustomerPlus({});\n  };\n\n  handleClick = key => {\n    if (!this.state.active) {\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\n    }\n\n    this.updateState(prevState => ({\n      active: !prevState.active,\n      currentIndex: key,\n    }));\n  };\n\n  handleOutsideClick = e => {\n    if (this.node != null) {\n      if (this.node.contains(e.target)) {\n        return;\n      }\n    }\n    this.handleClick();\n  };\n\n  getCustomerPlus = async data => {\n    this.updateState({ isLoading: true });\n    let { search, headerDetails } = this.state;\n    let { page = 1, limit = 10 } = data;\n    if (headerDetails.length == 0) {\n      await this.props.getCustomerPlusSettings();\n      let { settings } = this.props;\n      for (let {\n        display_field_name,\n        field_name,\n        visible_in_listing,\n      } of settings) {\n        if (visible_in_listing)\n          headerDetails.push({\n            label: display_field_name,\n            field: field_name,\n            sortKey: field_name,\n            singleClickFunc: () => this.handleSort(field_name),\n          });\n      }\n      headerDetails.push({ label: \"\" });\n      this.updateState({ headerDetails });\n    }\n    await this.props.getCustomerPlus(\n      `?page=${page}&limit=${limit}&search=${search}`\n    );\n    let { customerDetails } = this.props;\n    this.updateState({\n      customerList: customerDetails.dataList,\n      originalCustomerList: customerDetails.dataList,\n      meta: customerDetails.meta?.pagination,\n      isLoading: false,\n    });\n  };\n\n  handlePagination = page => {\n    this.getCustomerPlus(page);\n  };\n\n  handlesearch = event => {\n    console.log(event.target.value);\n    let { search } = this.state;\n    search = event.target.value;\n    this.setState({ search });\n    if (!this.debouncedFn) {\n      this.debouncedFn = _.debounce(async () => {\n        this.getCustomerPlus({});\n      }, 500);\n    }\n    this.debouncedFn();\n  };\n\n  bookAppointment = async data => {\n    let formFields = {};\n    formFields[\"custId\"] = data.id;\n    formFields[\"custName\"] = data.cust_name;\n    await this.props.updateForm(\"basicApptDetail\", formFields);\n    this.props.history.push(`/admin/newappointment`);\n  };\n  handleExportClick = async () => {\n    this.updateState({ isExportLoading: true });\n    let { search } = this.state;\n    let { page } = 1;\n    let { limit } = 10;\n    let exceldata = 1;\n    this.props\n      .getCustomerPlus(\n        `?page=${page}&limit=${limit}&search=${search}&excel=${exceldata}`\n      )\n      .then(async res => {\n        let { data } = res;\n        console.log(res, \"exportclickresponse\");\n        await this.updateState({\n          isExportLoading: false,\n        });\n        if (data) {\n          // window.open(data);\n          var a = document.createElement(\"a\");\n          a.setAttribute(\"href\", data);\n          a.click();\n        }\n      });\n  };\n\n  handleSort = (sortkey, order) => {\n    let { customerList, headerDetails, orderBy } = this.state;\n    this.setState({\n      orderBy: this.state.orderBy == \"asc\" ? \"desc\" : \"asc\",\n    });\n\n    if (orderBy === \"asc\") {\n      customerList.sort((a, b) =>\n        a[sortkey] > b[sortkey] ? 1 : b[sortkey] > a[sortkey] ? -1 : 0\n      );\n    } else {\n      customerList.sort((a, b) =>\n        a[sortkey] < b[sortkey] ? 1 : b[sortkey] < a[sortkey] ? -1 : 0\n      );\n    }\n    this.setState({\n      customerList,\n    });\n  };\n\n  render() {\n    let {\n      headerDetails,\n      originalCustomerList,\n      customerList,\n      meta,\n      currentIndex,\n      isLoading,\n      isExportLoading,\n    } = this.state;\n    let { t, tokenDetail } = this.props;\n    return (\n      <div className=\"customer-list container-fluid\">\n        {Number(tokenDetail.role_code) === 1 ? (\n          <div className=\"row mb-4\">\n            <div className=\"col-md-4 col-lg-2 mb-2\">\n              <Link to=\"/admin/customerplus/settings\">\n                <NormalButton\n                  normal={true}\n                  className=\"col-12 fs-15 float-right\"\n                  label=\"Settings\"\n                />\n              </Link>\n            </div>\n            <div className=\"col-md-4 col-lg-3 mb-2\">\n              <Link to=\"/admin/customerplus/lpmanagement\">\n                <NormalButton\n                  normal={true}\n                  className=\"col-12 fs-15 float-right\"\n                  label=\"LP Management\"\n                />\n              </Link>\n            </div>\n          </div>\n        ) : null}\n        <div className=\"row\">\n          <div className=\"col\">\n            <div className=\"row\">\n              <div className=\"col-md-12 mb-1\">\n                <div className=\"d-flex flex-wrap\">\n                  <div className=\"col-md-6 col-12 h5\">{t(\"Customer List\")}</div>\n                  <div className=\"col-md-6\">\n                    <div className=\"d-flex justify-content-end flex-wrap\">\n                      <div className=\"col-md-6 col-12 col-sm-12 mb-2\">\n                        <InputSearch\n                          className=\"\"\n                          placeholder=\"Search Customer\"\n                          onChange={this.handlesearch}\n                          disabled={isLoading}\n                        />\n                      </div>\n                      <div className=\"col-md-4 col-12 col-sm-12\">\n                        <NormalButton\n                          mainbg={true}\n                          className=\"col-12 fs-15 float-right\"\n                          label=\"Add Customer\"\n                          onClick={() =>\n                            this.props.history.push(\"/admin/customerplus/add\")\n                          }\n                        />\n                      </div>\n                      <div className=\"col-md-2 col-12 col-sm-12\">\n                        {isExportLoading ? (\n                          <div class=\"d-flex align-items-center justify-content-center\">\n                            <div class=\"spinner-border\" role=\"status\">\n                              <span class=\"sr-only\">{t(\"Loading...\")}</span>\n                            </div>\n                          </div>\n                        ) : (\n                          <NormalButton\n                            mainbg={true}\n                            className=\"col-12 fs-15 float-right\"\n                            label=\"Export\"\n                            onClick={this.handleExportClick}\n                          />\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-md-12\"></div>\n            </div>\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                <div className=\"table-container\">\n                  <TableWrapper\n                    headerDetails={headerDetails}\n                    queryHandler={this.handlePagination}\n                    pageMeta={meta}\n                    showFilterColumn={true}\n                    parentHeaderChange={value =>\n                      this.updateState(() => (headerDetails = value))\n                    }\n                    // sortData={originalCustomerList}\n                    // onSort={list => this.updateState({ customerList: list })}\n                  >\n                    {isLoading ? (\n                      <tr>\n                        <td colSpan=\"7\">\n                          <div className=\"d-flex mt-5 align-items-center justify-content-center\">\n                            <div className=\"spinner-border\" role=\"status\">\n                              <span className=\"sr-only\">Loading...</span>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                    ) : customerList ? (\n                      customerList.map((item, index) => {\n                        let {\n                          id,\n                          cust_code,\n                          cust_refer,\n                          cust_name,\n                          cust_phone2,\n                          cust_dob,\n                          class_name,\n                          birthday,\n                        } = item;\n                        let date = new Date(cust_dob);\n                        //cust_dob = date.toLocaleDateString();\n                        cust_dob = dateFormat(date, \"dd-mm-yyyy\");\n                        return (\n                          <tr\n                            key={index}\n                            onClick={() =>\n                              this.props.history.push(\n                                `/admin/customerplus/${id}/details`\n                              )\n                            }\n                          >\n                            {headerDetails.map(e =>\n                              e.field ? (\n                                <td>\n                                  <div className=\"d-flex align-items-center justify-content-center\">\n                                    {item[e.field]}\n                                  </div>\n                                </td>\n                              ) : null\n                            )}\n                            <td\n                              className=\"position-relative d-none\"\n                              ref={node => {\n                                this.node = node;\n                              }}\n                              onClick={() => this.handleClick(index)}\n                            >\n                              {currentIndex === index ? (\n                                <>\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\n                                    <i className=\"icon-more\"></i>\n                                  </div>\n                                  <div className=\"option card\">\n                                    <div\n                                      className=\"d-flex align-items-center fs-16 pt-3\"\n                                      onClick={() =>\n                                        this.props.history.push(\n                                          `/admin/customerplus/${id}/details`\n                                        )\n                                      }\n                                    >\n                                      <span className=\"icon-eye-grey px-3\"></span>\n                                      {t(\"View\")}\n                                    </div>\n                                    <div\n                                      className=\"d-flex align-items-center fs-16\"\n                                      onClick={() =>\n                                        this.props.history.push(\n                                          `/admin/customerplus/${id}/lpmanagement`\n                                        )\n                                      }\n                                    >\n                                      <span className=\"px-2\">\n                                        <svg\n                                          xmlns=\"http://www.w3.org/2000/svg\"\n                                          width=\"31\"\n                                          height=\"30\"\n                                          fill=\"currentColor\"\n                                          viewBox=\"0 0 15 30\"\n                                        >\n                                          <path d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\" />\n                                        </svg>\n                                      </span>\n                                      {t(\"Loyalty Points Management\")}\n                                    </div>\n                                    <div className=\"d-flex align-items-center fs-16\">\n                                      <span className=\"icon-schedule px-3\"></span>{\" \"}\n                                      {t(\"Reschedule Appointment\")}{\" \"}\n                                    </div>\n                                    <div\n                                      className=\"d-flex align-items-center fs-16\"\n                                      onClick={() => this.bookAppointment(item)}\n                                    >\n                                      <span className=\"px-2\">\n                                        <svg\n                                          width=\"31\"\n                                          height=\"30\"\n                                          viewBox=\"0 0 31 30\"\n                                          fill=\"none\"\n                                          xmlns=\"http://www.w3.org/2000/svg\"\n                                        >\n                                          <rect\n                                            width=\"31\"\n                                            height=\"30\"\n                                            fill=\"#F9F9F9\"\n                                          />\n                                          <path\n                                            d=\"M15 8V22\"\n                                            stroke=\"#848484\"\n                                            strokeLinecap=\"round\"\n                                            strokeLinejoin=\"round\"\n                                          />\n                                          <path\n                                            d=\"M8 15H22\"\n                                            stroke=\"#848484\"\n                                            strokeLinecap=\"round\"\n                                            strokeLinejoin=\"round\"\n                                          />\n                                        </svg>\n                                      </span>\n                                      {t(\"Book Appointment\")}\n                                    </div>\n                                    <div className=\"d-flex align-items-center fs-16 pb-3\">\n                                      <span className=\"icon-cancel-schedule px-3\"></span>{\" \"}\n                                      {t(\"Cancel Appointment\")}{\" \"}\n                                    </div>\n                                  </div>\n                                </>\n                              ) : (\n                                <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\n                                  <i className=\"icon-more\"></i>\n                                </div>\n                              )}\n                            </td>\n                          </tr>\n                        );\n                      })\n                    ) : null}\n                  </TableWrapper>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  customerDetails: state.customerPlus.customerPlusDetail,\n  settings: state.customerPlus.customerPlusSettings,\n  tokenDetail: state.authStore.tokenDetails,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      getCustomerPlus,\n      updateForm,\n      getCustomerPlusSettings,\n      getCommonApi,\n    },\n    dispatch\n  );\n};\n\nexport const ListCustomerPlus = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(ListCustomerPlusClass)\n);\n"]},"metadata":{},"sourceType":"module"}