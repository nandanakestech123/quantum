{"ast":null,"code":"/**\r\n * DevExtreme (ui/tile_view.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _inflector = require(\"../core/utils/inflector\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _window = require(\"../core/utils/window\");\n\nvar _element = require(\"../core/element\");\n\nvar _common = require(\"../core/utils/common\");\n\nvar _scroll_view = _interopRequireDefault(require(\"./scroll_view\"));\n\nvar _uiCollection_widget = _interopRequireDefault(require(\"./collection/ui.collection_widget.edit\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar TILEVIEW_CLASS = \"dx-tileview\";\nvar TILEVIEW_CONTAINER_CLASS = \"dx-tileview-wrapper\";\nvar TILEVIEW_ITEM_CLASS = \"dx-tile\";\nvar TILEVIEW_ITEM_SELECTOR = \".\" + TILEVIEW_ITEM_CLASS;\nvar TILEVIEW_ITEM_DATA_KEY = \"dxTileData\";\nvar CONFIGS = {\n  horizontal: {\n    itemMainRatio: \"widthRatio\",\n    itemCrossRatio: \"heightRatio\",\n    baseItemMainDimension: \"baseItemWidth\",\n    baseItemCrossDimension: \"baseItemHeight\",\n    mainDimension: \"width\",\n    crossDimension: \"height\",\n    mainPosition: \"left\",\n    crossPosition: \"top\"\n  },\n  vertical: {\n    itemMainRatio: \"heightRatio\",\n    itemCrossRatio: \"widthRatio\",\n    baseItemMainDimension: \"baseItemHeight\",\n    baseItemCrossDimension: \"baseItemWidth\",\n    mainDimension: \"height\",\n    crossDimension: \"width\",\n    mainPosition: \"top\",\n    crossPosition: \"left\"\n  }\n};\n\nvar TileView = _uiCollection_widget.default.inherit({\n  _activeStateUnit: TILEVIEW_ITEM_SELECTOR,\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      items: null,\n      direction: \"horizontal\",\n      hoverStateEnabled: true,\n      showScrollbar: false,\n      height: 500,\n      baseItemWidth: 100,\n      baseItemHeight: 100,\n      itemMargin: 20,\n      activeStateEnabled: true,\n      indicateLoading: true\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _itemClass: function () {\n    return TILEVIEW_ITEM_CLASS;\n  },\n  _itemDataKey: function () {\n    return TILEVIEW_ITEM_DATA_KEY;\n  },\n  _itemContainer: function () {\n    return this._$container;\n  },\n  _init: function () {\n    this.callBase();\n    this.$element().addClass(TILEVIEW_CLASS);\n\n    this._initScrollView();\n  },\n  _dataSourceLoadingChangedHandler: function (isLoading) {\n    var scrollView = this._scrollView;\n\n    if (!scrollView || !scrollView.startLoading) {\n      return;\n    }\n\n    if (isLoading && this.option(\"indicateLoading\")) {\n      scrollView.startLoading();\n    } else {\n      scrollView.finishLoading();\n    }\n  },\n  _hideLoadingIfLoadIndicationOff: function () {\n    if (!this.option(\"indicateLoading\")) {\n      this._dataSourceLoadingChangedHandler(false);\n    }\n  },\n  _initScrollView: function () {\n    this._scrollView = this._createComponent(this.$element(), _scroll_view.default, {\n      direction: this.option(\"direction\"),\n      scrollByContent: true,\n      useKeyboard: false,\n      showScrollbar: this.option(\"showScrollbar\")\n    });\n    this._$container = (0, _renderer.default)(this._scrollView.content());\n\n    this._$container.addClass(TILEVIEW_CONTAINER_CLASS);\n\n    this._scrollView.option(\"onUpdated\", this._renderGeometry.bind(this));\n  },\n  _initMarkup: function () {\n    this.callBase();\n    (0, _common.deferRender)(function () {\n      this._cellsPerDimension = 1;\n\n      this._renderGeometry();\n\n      this._updateScrollView();\n\n      this._fireContentReadyAction();\n    }.bind(this));\n  },\n  _updateScrollView: function () {\n    this._scrollView.option(\"direction\", this.option(\"direction\"));\n\n    this._scrollView.update();\n\n    this._indicateLoadingIfAlreadyStarted();\n  },\n  _indicateLoadingIfAlreadyStarted: function () {\n    if (this._isDataSourceLoading()) {\n      this._dataSourceLoadingChangedHandler(true);\n    }\n  },\n  _renderGeometry: function () {\n    this._config = CONFIGS[this.option(\"direction\")];\n    var items = this.option(\"items\") || [];\n    var config = this._config;\n    var itemMargin = this.option(\"itemMargin\");\n    var maxItemCrossRatio = Math.max.apply(Math, (0, _iterator.map)(items || [], function (item) {\n      return Math.round(item[config.itemCrossRatio] || 1);\n    }));\n    var crossDimensionValue = (0, _window.hasWindow)() ? this.$element()[config.crossDimension]() : parseInt(this.$element().get(0).style[config.crossDimension]);\n    this._cellsPerDimension = Math.floor(crossDimensionValue / (this.option(config.baseItemCrossDimension) + itemMargin));\n    this._cellsPerDimension = Math.max(this._cellsPerDimension, maxItemCrossRatio);\n    this._cells = [];\n\n    this._cells.push(new Array(this._cellsPerDimension));\n\n    this._arrangeItems(items);\n\n    this._renderContentSize(config, itemMargin);\n  },\n  _renderContentSize: function (_ref, itemMargin) {\n    var mainDimension = _ref.mainDimension,\n        baseItemMainDimension = _ref.baseItemMainDimension;\n\n    if ((0, _window.hasWindow)()) {\n      var actualContentSize = this._cells.length * this.option(baseItemMainDimension) + (this._cells.length + 1) * itemMargin;\n      var elementSize = this.$element()[mainDimension]();\n\n      this._$container[mainDimension](Math.max(actualContentSize, elementSize));\n    }\n  },\n  _arrangeItems: function (items) {\n    var config = this._config;\n    var itemMainRatio = config.itemMainRatio;\n    var itemCrossRatio = config.itemCrossRatio;\n    var mainPosition = config.mainPosition;\n    this._itemsPositions = [];\n    (0, _iterator.each)(items, function (index, item) {\n      var currentItem = {};\n      currentItem[itemMainRatio] = item[itemMainRatio] || 1;\n      currentItem[itemCrossRatio] = item[itemCrossRatio] || 1;\n      currentItem.index = index;\n      currentItem[itemMainRatio] = currentItem[itemMainRatio] <= 0 ? 0 : Math.round(currentItem[config.itemMainRatio]);\n      currentItem[itemCrossRatio] = currentItem[itemCrossRatio] <= 0 ? 0 : Math.round(currentItem[config.itemCrossRatio]);\n\n      var itemPosition = this._getItemPosition(currentItem);\n\n      if (itemPosition[mainPosition] === -1) {\n        itemPosition[mainPosition] = this._cells.push(new Array(this._cellsPerDimension)) - 1;\n      }\n\n      this._occupyCells(currentItem, itemPosition);\n\n      this._arrangeItem(currentItem, itemPosition);\n\n      this._itemsPositions.push(itemPosition);\n    }.bind(this));\n  },\n  _getItemPosition: function (item) {\n    var config = this._config;\n    var mainPosition = config.mainPosition;\n    var crossPosition = config.crossPosition;\n    var position = {};\n    position[mainPosition] = -1;\n    position[crossPosition] = 0;\n\n    for (var main = 0; main < this._cells.length; main++) {\n      for (var cross = 0; cross < this._cellsPerDimension; cross++) {\n        if (this._itemFit(main, cross, item)) {\n          position[mainPosition] = main;\n          position[crossPosition] = cross;\n          break;\n        }\n      }\n\n      if (position[mainPosition] > -1) {\n        break;\n      }\n    }\n\n    return position;\n  },\n  _itemFit: function (mainPosition, crossPosition, item) {\n    var result = true;\n    var config = this._config;\n    var itemRatioMain = item[config.itemMainRatio];\n    var itemRatioCross = item[config.itemCrossRatio];\n\n    if (crossPosition + itemRatioCross > this._cellsPerDimension) {\n      return false;\n    }\n\n    for (var main = mainPosition; main < mainPosition + itemRatioMain; main++) {\n      for (var cross = crossPosition; cross < crossPosition + itemRatioCross; cross++) {\n        if (this._cells.length - 1 < main) {\n          this._cells.push(new Array(this._cellsPerDimension));\n        } else {\n          if (void 0 !== this._cells[main][cross]) {\n            result = false;\n            break;\n          }\n        }\n      }\n    }\n\n    return result;\n  },\n  _occupyCells: function (item, itemPosition) {\n    var config = this._config;\n    var itemPositionMain = itemPosition[config.mainPosition];\n    var itemPositionCross = itemPosition[config.crossPosition];\n    var itemRatioMain = item[config.itemMainRatio];\n    var itemRatioCross = item[config.itemCrossRatio];\n\n    for (var main = itemPositionMain; main < itemPositionMain + itemRatioMain; main++) {\n      for (var cross = itemPositionCross; cross < itemPositionCross + itemRatioCross; cross++) {\n        this._cells[main][cross] = item.index;\n      }\n    }\n  },\n  _arrangeItem: function (item, itemPosition) {\n    var config = this._config;\n    var itemPositionMain = itemPosition[config.mainPosition];\n    var itemPositionCross = itemPosition[config.crossPosition];\n    var itemRatioMain = item[config.itemMainRatio];\n    var itemRatioCross = item[config.itemCrossRatio];\n    var baseItemCross = this.option(config.baseItemCrossDimension);\n    var baseItemMain = this.option(config.baseItemMainDimension);\n    var itemMargin = this.option(\"itemMargin\");\n    var cssProps = {\n      display: itemRatioMain <= 0 || itemRatioCross <= 0 ? \"none\" : \"\"\n    };\n    var mainDimension = itemRatioMain * baseItemMain + (itemRatioMain - 1) * itemMargin;\n    var crossDimension = itemRatioCross * baseItemCross + (itemRatioCross - 1) * itemMargin;\n    cssProps[config.mainDimension] = mainDimension < 0 ? 0 : mainDimension;\n    cssProps[config.crossDimension] = crossDimension < 0 ? 0 : crossDimension;\n    cssProps[config.mainPosition] = itemPositionMain * baseItemMain + (itemPositionMain + 1) * itemMargin;\n    cssProps[config.crossPosition] = itemPositionCross * baseItemCross + (itemPositionCross + 1) * itemMargin;\n\n    if (this.option(\"rtlEnabled\")) {\n      var offsetCorrection = this._$container.width();\n\n      var baseItemWidth = this.option(\"baseItemWidth\");\n      var itemPositionX = itemPosition.left;\n      var offsetPosition = itemPositionX * baseItemWidth;\n      var itemBaseOffset = baseItemWidth + itemMargin;\n      var itemWidth = itemBaseOffset * item.widthRatio;\n      var subItemMargins = itemPositionX * itemMargin;\n      cssProps.left = offsetCorrection - (offsetPosition + itemWidth + subItemMargins);\n    }\n\n    this._itemElements().eq(item.index).css(cssProps);\n  },\n  _moveFocus: function (location) {\n    var FOCUS_UP = \"up\";\n    var FOCUS_DOWN = \"down\";\n    var FOCUS_LEFT = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\n    var FOCUS_RIGHT = this.option(\"rtlEnabled\") ? \"left\" : \"right\";\n    var FOCUS_PAGE_UP = \"pageup\";\n    var FOCUS_PAGE_DOWN = \"pagedown\";\n    var horizontalDirection = \"horizontal\" === this.option(\"direction\");\n    var cells = this._cells;\n    var index = (0, _renderer.default)(this.option(\"focusedElement\")).index();\n    var targetCol = this._itemsPositions[index].left;\n    var targetRow = this._itemsPositions[index].top;\n    var colCount = (horizontalDirection ? cells : cells[0]).length;\n    var rowCount = (horizontalDirection ? cells[0] : cells).length;\n\n    var getCell = function (col, row) {\n      if (horizontalDirection) {\n        return cells[col][row];\n      }\n\n      return cells[row][col];\n    };\n\n    switch (location) {\n      case FOCUS_PAGE_UP:\n      case FOCUS_UP:\n        while (targetRow > 0 && index === getCell(targetCol, targetRow)) {\n          targetRow--;\n        }\n\n        if (targetRow < 0) {\n          targetRow = 0;\n        }\n\n        break;\n\n      case FOCUS_PAGE_DOWN:\n      case FOCUS_DOWN:\n        while (targetRow < rowCount && index === getCell(targetCol, targetRow)) {\n          targetRow++;\n        }\n\n        if (targetRow === rowCount) {\n          targetRow = rowCount - 1;\n        }\n\n        break;\n\n      case FOCUS_RIGHT:\n        while (targetCol < colCount && index === getCell(targetCol, targetRow)) {\n          targetCol++;\n        }\n\n        if (targetCol === colCount) {\n          targetCol = colCount - 1;\n        }\n\n        break;\n\n      case FOCUS_LEFT:\n        while (targetCol >= 0 && index === getCell(targetCol, targetRow)) {\n          targetCol--;\n        }\n\n        if (targetCol < 0) {\n          targetCol = 0;\n        }\n\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n        return;\n    }\n\n    var newTargetIndex = getCell(targetCol, targetRow);\n\n    if (!(0, _type.isDefined)(newTargetIndex)) {\n      return;\n    }\n\n    var $newTarget = this._itemElements().eq(newTargetIndex);\n\n    this.option(\"focusedElement\", (0, _element.getPublicElement)($newTarget));\n\n    this._scrollToItem($newTarget);\n  },\n  _scrollToItem: function ($itemElement) {\n    if (!$itemElement.length) {\n      return;\n    }\n\n    var config = this._config;\n    var outerMainProp = \"outer\" + (0, _inflector.captionize)(config.mainDimension);\n    var itemMargin = this.option(\"itemMargin\");\n    var itemPosition = $itemElement.position()[config.mainPosition];\n    var itemDimension = $itemElement[outerMainProp]();\n    var itemTail = itemPosition + itemDimension;\n    var scrollPosition = this.scrollPosition();\n    var clientWidth = this.$element()[outerMainProp]();\n\n    if (scrollPosition <= itemPosition && itemTail <= scrollPosition + clientWidth) {\n      return;\n    }\n\n    if (scrollPosition > itemPosition) {\n      this._scrollView.scrollTo(itemPosition - itemMargin);\n    } else {\n      this._scrollView.scrollTo(itemPosition + itemDimension - clientWidth + itemMargin);\n    }\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"items\":\n        this.callBase(args);\n\n        this._renderGeometry();\n\n        this._updateScrollView();\n\n        break;\n\n      case \"showScrollbar\":\n        this._initScrollView();\n\n        break;\n\n      case \"disabled\":\n        this._scrollView.option(\"disabled\", args.value);\n\n        this.callBase(args);\n        break;\n\n      case \"baseItemWidth\":\n      case \"baseItemHeight\":\n      case \"itemMargin\":\n        this._renderGeometry();\n\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n\n        this._renderGeometry();\n\n        this._updateScrollView();\n\n        break;\n\n      case \"direction\":\n        this._renderGeometry();\n\n        this._updateScrollView();\n\n        break;\n\n      case \"indicateLoading\":\n        this._hideLoadingIfLoadIndicationOff();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  scrollPosition: function () {\n    return this._scrollView.scrollOffset()[this._config.mainPosition];\n  }\n});\n\n(0, _component_registrator.default)(\"dxTileView\", TileView);\nvar _default = TileView;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/tile_view.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_devices","_component_registrator","_inflector","_iterator","_type","_extend","_window","_element","_common","_scroll_view","_uiCollection_widget","obj","__esModule","TILEVIEW_CLASS","TILEVIEW_CONTAINER_CLASS","TILEVIEW_ITEM_CLASS","TILEVIEW_ITEM_SELECTOR","TILEVIEW_ITEM_DATA_KEY","CONFIGS","horizontal","itemMainRatio","itemCrossRatio","baseItemMainDimension","baseItemCrossDimension","mainDimension","crossDimension","mainPosition","crossPosition","vertical","TileView","inherit","_activeStateUnit","_getDefaultOptions","extend","callBase","items","direction","hoverStateEnabled","showScrollbar","height","baseItemWidth","baseItemHeight","itemMargin","activeStateEnabled","indicateLoading","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_itemClass","_itemDataKey","_itemContainer","_$container","_init","$element","addClass","_initScrollView","_dataSourceLoadingChangedHandler","isLoading","scrollView","_scrollView","startLoading","option","finishLoading","_hideLoadingIfLoadIndicationOff","_createComponent","scrollByContent","useKeyboard","content","_renderGeometry","bind","_initMarkup","deferRender","_cellsPerDimension","_updateScrollView","_fireContentReadyAction","update","_indicateLoadingIfAlreadyStarted","_isDataSourceLoading","_config","config","maxItemCrossRatio","Math","max","apply","map","item","round","crossDimensionValue","hasWindow","parseInt","get","style","floor","_cells","push","Array","_arrangeItems","_renderContentSize","_ref","actualContentSize","length","elementSize","_itemsPositions","each","index","currentItem","itemPosition","_getItemPosition","_occupyCells","_arrangeItem","position","main","cross","_itemFit","result","itemRatioMain","itemRatioCross","itemPositionMain","itemPositionCross","baseItemCross","baseItemMain","cssProps","display","offsetCorrection","width","itemPositionX","left","offsetPosition","itemBaseOffset","itemWidth","widthRatio","subItemMargins","_itemElements","eq","css","_moveFocus","location","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","horizontalDirection","cells","targetCol","targetRow","top","colCount","rowCount","getCell","col","row","arguments","newTargetIndex","isDefined","$newTarget","getPublicElement","_scrollToItem","$itemElement","outerMainProp","captionize","itemDimension","itemTail","scrollPosition","clientWidth","scrollTo","_optionChanged","args","name","value","scrollOffset","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/tile_view.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _inflector = require(\"../core/utils/inflector\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _window = require(\"../core/utils/window\");\r\nvar _element = require(\"../core/element\");\r\nvar _common = require(\"../core/utils/common\");\r\nvar _scroll_view = _interopRequireDefault(require(\"./scroll_view\"));\r\nvar _uiCollection_widget = _interopRequireDefault(require(\"./collection/ui.collection_widget.edit\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar TILEVIEW_CLASS = \"dx-tileview\";\r\nvar TILEVIEW_CONTAINER_CLASS = \"dx-tileview-wrapper\";\r\nvar TILEVIEW_ITEM_CLASS = \"dx-tile\";\r\nvar TILEVIEW_ITEM_SELECTOR = \".\" + TILEVIEW_ITEM_CLASS;\r\nvar TILEVIEW_ITEM_DATA_KEY = \"dxTileData\";\r\nvar CONFIGS = {\r\n    horizontal: {\r\n        itemMainRatio: \"widthRatio\",\r\n        itemCrossRatio: \"heightRatio\",\r\n        baseItemMainDimension: \"baseItemWidth\",\r\n        baseItemCrossDimension: \"baseItemHeight\",\r\n        mainDimension: \"width\",\r\n        crossDimension: \"height\",\r\n        mainPosition: \"left\",\r\n        crossPosition: \"top\"\r\n    },\r\n    vertical: {\r\n        itemMainRatio: \"heightRatio\",\r\n        itemCrossRatio: \"widthRatio\",\r\n        baseItemMainDimension: \"baseItemHeight\",\r\n        baseItemCrossDimension: \"baseItemWidth\",\r\n        mainDimension: \"height\",\r\n        crossDimension: \"width\",\r\n        mainPosition: \"top\",\r\n        crossPosition: \"left\"\r\n    }\r\n};\r\nvar TileView = _uiCollection_widget.default.inherit({\r\n    _activeStateUnit: TILEVIEW_ITEM_SELECTOR,\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            items: null,\r\n            direction: \"horizontal\",\r\n            hoverStateEnabled: true,\r\n            showScrollbar: false,\r\n            height: 500,\r\n            baseItemWidth: 100,\r\n            baseItemHeight: 100,\r\n            itemMargin: 20,\r\n            activeStateEnabled: true,\r\n            indicateLoading: true\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _itemClass: function() {\r\n        return TILEVIEW_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return TILEVIEW_ITEM_DATA_KEY\r\n    },\r\n    _itemContainer: function() {\r\n        return this._$container\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(TILEVIEW_CLASS);\r\n        this._initScrollView()\r\n    },\r\n    _dataSourceLoadingChangedHandler: function(isLoading) {\r\n        var scrollView = this._scrollView;\r\n        if (!scrollView || !scrollView.startLoading) {\r\n            return\r\n        }\r\n        if (isLoading && this.option(\"indicateLoading\")) {\r\n            scrollView.startLoading()\r\n        } else {\r\n            scrollView.finishLoading()\r\n        }\r\n    },\r\n    _hideLoadingIfLoadIndicationOff: function() {\r\n        if (!this.option(\"indicateLoading\")) {\r\n            this._dataSourceLoadingChangedHandler(false)\r\n        }\r\n    },\r\n    _initScrollView: function() {\r\n        this._scrollView = this._createComponent(this.$element(), _scroll_view.default, {\r\n            direction: this.option(\"direction\"),\r\n            scrollByContent: true,\r\n            useKeyboard: false,\r\n            showScrollbar: this.option(\"showScrollbar\")\r\n        });\r\n        this._$container = (0, _renderer.default)(this._scrollView.content());\r\n        this._$container.addClass(TILEVIEW_CONTAINER_CLASS);\r\n        this._scrollView.option(\"onUpdated\", this._renderGeometry.bind(this))\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        (0, _common.deferRender)(function() {\r\n            this._cellsPerDimension = 1;\r\n            this._renderGeometry();\r\n            this._updateScrollView();\r\n            this._fireContentReadyAction()\r\n        }.bind(this))\r\n    },\r\n    _updateScrollView: function() {\r\n        this._scrollView.option(\"direction\", this.option(\"direction\"));\r\n        this._scrollView.update();\r\n        this._indicateLoadingIfAlreadyStarted()\r\n    },\r\n    _indicateLoadingIfAlreadyStarted: function() {\r\n        if (this._isDataSourceLoading()) {\r\n            this._dataSourceLoadingChangedHandler(true)\r\n        }\r\n    },\r\n    _renderGeometry: function() {\r\n        this._config = CONFIGS[this.option(\"direction\")];\r\n        var items = this.option(\"items\") || [];\r\n        var config = this._config;\r\n        var itemMargin = this.option(\"itemMargin\");\r\n        var maxItemCrossRatio = Math.max.apply(Math, (0, _iterator.map)(items || [], function(item) {\r\n            return Math.round(item[config.itemCrossRatio] || 1)\r\n        }));\r\n        var crossDimensionValue = (0, _window.hasWindow)() ? this.$element()[config.crossDimension]() : parseInt(this.$element().get(0).style[config.crossDimension]);\r\n        this._cellsPerDimension = Math.floor(crossDimensionValue / (this.option(config.baseItemCrossDimension) + itemMargin));\r\n        this._cellsPerDimension = Math.max(this._cellsPerDimension, maxItemCrossRatio);\r\n        this._cells = [];\r\n        this._cells.push(new Array(this._cellsPerDimension));\r\n        this._arrangeItems(items);\r\n        this._renderContentSize(config, itemMargin)\r\n    },\r\n    _renderContentSize: function(_ref, itemMargin) {\r\n        var mainDimension = _ref.mainDimension,\r\n            baseItemMainDimension = _ref.baseItemMainDimension;\r\n        if ((0, _window.hasWindow)()) {\r\n            var actualContentSize = this._cells.length * this.option(baseItemMainDimension) + (this._cells.length + 1) * itemMargin;\r\n            var elementSize = this.$element()[mainDimension]();\r\n            this._$container[mainDimension](Math.max(actualContentSize, elementSize))\r\n        }\r\n    },\r\n    _arrangeItems: function(items) {\r\n        var config = this._config;\r\n        var itemMainRatio = config.itemMainRatio;\r\n        var itemCrossRatio = config.itemCrossRatio;\r\n        var mainPosition = config.mainPosition;\r\n        this._itemsPositions = [];\r\n        (0, _iterator.each)(items, function(index, item) {\r\n            var currentItem = {};\r\n            currentItem[itemMainRatio] = item[itemMainRatio] || 1;\r\n            currentItem[itemCrossRatio] = item[itemCrossRatio] || 1;\r\n            currentItem.index = index;\r\n            currentItem[itemMainRatio] = currentItem[itemMainRatio] <= 0 ? 0 : Math.round(currentItem[config.itemMainRatio]);\r\n            currentItem[itemCrossRatio] = currentItem[itemCrossRatio] <= 0 ? 0 : Math.round(currentItem[config.itemCrossRatio]);\r\n            var itemPosition = this._getItemPosition(currentItem);\r\n            if (itemPosition[mainPosition] === -1) {\r\n                itemPosition[mainPosition] = this._cells.push(new Array(this._cellsPerDimension)) - 1\r\n            }\r\n            this._occupyCells(currentItem, itemPosition);\r\n            this._arrangeItem(currentItem, itemPosition);\r\n            this._itemsPositions.push(itemPosition)\r\n        }.bind(this))\r\n    },\r\n    _getItemPosition: function(item) {\r\n        var config = this._config;\r\n        var mainPosition = config.mainPosition;\r\n        var crossPosition = config.crossPosition;\r\n        var position = {};\r\n        position[mainPosition] = -1;\r\n        position[crossPosition] = 0;\r\n        for (var main = 0; main < this._cells.length; main++) {\r\n            for (var cross = 0; cross < this._cellsPerDimension; cross++) {\r\n                if (this._itemFit(main, cross, item)) {\r\n                    position[mainPosition] = main;\r\n                    position[crossPosition] = cross;\r\n                    break\r\n                }\r\n            }\r\n            if (position[mainPosition] > -1) {\r\n                break\r\n            }\r\n        }\r\n        return position\r\n    },\r\n    _itemFit: function(mainPosition, crossPosition, item) {\r\n        var result = true;\r\n        var config = this._config;\r\n        var itemRatioMain = item[config.itemMainRatio];\r\n        var itemRatioCross = item[config.itemCrossRatio];\r\n        if (crossPosition + itemRatioCross > this._cellsPerDimension) {\r\n            return false\r\n        }\r\n        for (var main = mainPosition; main < mainPosition + itemRatioMain; main++) {\r\n            for (var cross = crossPosition; cross < crossPosition + itemRatioCross; cross++) {\r\n                if (this._cells.length - 1 < main) {\r\n                    this._cells.push(new Array(this._cellsPerDimension))\r\n                } else {\r\n                    if (void 0 !== this._cells[main][cross]) {\r\n                        result = false;\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _occupyCells: function(item, itemPosition) {\r\n        var config = this._config;\r\n        var itemPositionMain = itemPosition[config.mainPosition];\r\n        var itemPositionCross = itemPosition[config.crossPosition];\r\n        var itemRatioMain = item[config.itemMainRatio];\r\n        var itemRatioCross = item[config.itemCrossRatio];\r\n        for (var main = itemPositionMain; main < itemPositionMain + itemRatioMain; main++) {\r\n            for (var cross = itemPositionCross; cross < itemPositionCross + itemRatioCross; cross++) {\r\n                this._cells[main][cross] = item.index\r\n            }\r\n        }\r\n    },\r\n    _arrangeItem: function(item, itemPosition) {\r\n        var config = this._config;\r\n        var itemPositionMain = itemPosition[config.mainPosition];\r\n        var itemPositionCross = itemPosition[config.crossPosition];\r\n        var itemRatioMain = item[config.itemMainRatio];\r\n        var itemRatioCross = item[config.itemCrossRatio];\r\n        var baseItemCross = this.option(config.baseItemCrossDimension);\r\n        var baseItemMain = this.option(config.baseItemMainDimension);\r\n        var itemMargin = this.option(\"itemMargin\");\r\n        var cssProps = {\r\n            display: itemRatioMain <= 0 || itemRatioCross <= 0 ? \"none\" : \"\"\r\n        };\r\n        var mainDimension = itemRatioMain * baseItemMain + (itemRatioMain - 1) * itemMargin;\r\n        var crossDimension = itemRatioCross * baseItemCross + (itemRatioCross - 1) * itemMargin;\r\n        cssProps[config.mainDimension] = mainDimension < 0 ? 0 : mainDimension;\r\n        cssProps[config.crossDimension] = crossDimension < 0 ? 0 : crossDimension;\r\n        cssProps[config.mainPosition] = itemPositionMain * baseItemMain + (itemPositionMain + 1) * itemMargin;\r\n        cssProps[config.crossPosition] = itemPositionCross * baseItemCross + (itemPositionCross + 1) * itemMargin;\r\n        if (this.option(\"rtlEnabled\")) {\r\n            var offsetCorrection = this._$container.width();\r\n            var baseItemWidth = this.option(\"baseItemWidth\");\r\n            var itemPositionX = itemPosition.left;\r\n            var offsetPosition = itemPositionX * baseItemWidth;\r\n            var itemBaseOffset = baseItemWidth + itemMargin;\r\n            var itemWidth = itemBaseOffset * item.widthRatio;\r\n            var subItemMargins = itemPositionX * itemMargin;\r\n            cssProps.left = offsetCorrection - (offsetPosition + itemWidth + subItemMargins)\r\n        }\r\n        this._itemElements().eq(item.index).css(cssProps)\r\n    },\r\n    _moveFocus: function(location) {\r\n        var FOCUS_UP = \"up\";\r\n        var FOCUS_DOWN = \"down\";\r\n        var FOCUS_LEFT = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\r\n        var FOCUS_RIGHT = this.option(\"rtlEnabled\") ? \"left\" : \"right\";\r\n        var FOCUS_PAGE_UP = \"pageup\";\r\n        var FOCUS_PAGE_DOWN = \"pagedown\";\r\n        var horizontalDirection = \"horizontal\" === this.option(\"direction\");\r\n        var cells = this._cells;\r\n        var index = (0, _renderer.default)(this.option(\"focusedElement\")).index();\r\n        var targetCol = this._itemsPositions[index].left;\r\n        var targetRow = this._itemsPositions[index].top;\r\n        var colCount = (horizontalDirection ? cells : cells[0]).length;\r\n        var rowCount = (horizontalDirection ? cells[0] : cells).length;\r\n        var getCell = function(col, row) {\r\n            if (horizontalDirection) {\r\n                return cells[col][row]\r\n            }\r\n            return cells[row][col]\r\n        };\r\n        switch (location) {\r\n            case FOCUS_PAGE_UP:\r\n            case FOCUS_UP:\r\n                while (targetRow > 0 && index === getCell(targetCol, targetRow)) {\r\n                    targetRow--\r\n                }\r\n                if (targetRow < 0) {\r\n                    targetRow = 0\r\n                }\r\n                break;\r\n            case FOCUS_PAGE_DOWN:\r\n            case FOCUS_DOWN:\r\n                while (targetRow < rowCount && index === getCell(targetCol, targetRow)) {\r\n                    targetRow++\r\n                }\r\n                if (targetRow === rowCount) {\r\n                    targetRow = rowCount - 1\r\n                }\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                while (targetCol < colCount && index === getCell(targetCol, targetRow)) {\r\n                    targetCol++\r\n                }\r\n                if (targetCol === colCount) {\r\n                    targetCol = colCount - 1\r\n                }\r\n                break;\r\n            case FOCUS_LEFT:\r\n                while (targetCol >= 0 && index === getCell(targetCol, targetRow)) {\r\n                    targetCol--\r\n                }\r\n                if (targetCol < 0) {\r\n                    targetCol = 0\r\n                }\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments);\r\n                return\r\n        }\r\n        var newTargetIndex = getCell(targetCol, targetRow);\r\n        if (!(0, _type.isDefined)(newTargetIndex)) {\r\n            return\r\n        }\r\n        var $newTarget = this._itemElements().eq(newTargetIndex);\r\n        this.option(\"focusedElement\", (0, _element.getPublicElement)($newTarget));\r\n        this._scrollToItem($newTarget)\r\n    },\r\n    _scrollToItem: function($itemElement) {\r\n        if (!$itemElement.length) {\r\n            return\r\n        }\r\n        var config = this._config;\r\n        var outerMainProp = \"outer\" + (0, _inflector.captionize)(config.mainDimension);\r\n        var itemMargin = this.option(\"itemMargin\");\r\n        var itemPosition = $itemElement.position()[config.mainPosition];\r\n        var itemDimension = $itemElement[outerMainProp]();\r\n        var itemTail = itemPosition + itemDimension;\r\n        var scrollPosition = this.scrollPosition();\r\n        var clientWidth = this.$element()[outerMainProp]();\r\n        if (scrollPosition <= itemPosition && itemTail <= scrollPosition + clientWidth) {\r\n            return\r\n        }\r\n        if (scrollPosition > itemPosition) {\r\n            this._scrollView.scrollTo(itemPosition - itemMargin)\r\n        } else {\r\n            this._scrollView.scrollTo(itemPosition + itemDimension - clientWidth + itemMargin)\r\n        }\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"items\":\r\n                this.callBase(args);\r\n                this._renderGeometry();\r\n                this._updateScrollView();\r\n                break;\r\n            case \"showScrollbar\":\r\n                this._initScrollView();\r\n                break;\r\n            case \"disabled\":\r\n                this._scrollView.option(\"disabled\", args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"baseItemWidth\":\r\n            case \"baseItemHeight\":\r\n            case \"itemMargin\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._renderGeometry();\r\n                this._updateScrollView();\r\n                break;\r\n            case \"direction\":\r\n                this._renderGeometry();\r\n                this._updateScrollView();\r\n                break;\r\n            case \"indicateLoading\":\r\n                this._hideLoadingIfLoadIndicationOff();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    scrollPosition: function() {\r\n        return this._scrollView.scrollOffset()[this._config.mainPosition]\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxTileView\", TileView);\r\nvar _default = TileView;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}