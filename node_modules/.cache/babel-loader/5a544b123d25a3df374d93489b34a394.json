{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\Admin\\\\Project\\\\AddProject\\\\activities.js\";\nimport React from \"react\";\nimport { Toast } from \"service/toast\";\nimport \"./style.scss\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, commonCreateApi } from \"redux/actions/common\";\nimport { NormalButton, NormalDate, TableWrapper } from \"component/common\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { withTranslation } from \"react-i18next\";\nimport { NormalInput, NormalDateTime } from \"component/common\";\nimport { Link } from \"react-router-dom\";\nimport { createActivity } from \"redux/actions/project\";\nimport { getTokenDetails } from \"redux/actions/auth\";\nexport class ActivitiesClass extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      headerDetails: [{\n        label: \"Date\"\n      }, {\n        label: \"Activity\"\n      }, {\n        label: \"User\"\n      }],\n      formFields: {\n        dateCreated: new Date(),\n        activity: \"\"\n      },\n      activityList: [],\n      pageMeta: {// chunk: 10,\n        // page: 1,\n        // total: 10,\n        // totalPages: 2,\n        // chunk: 2,\n        // page: 1,\n        // total: 8,\n        // totalPages: 4,\n      },\n      // formFields: {\n      //   date: \"\",\n      //   activity:\"\",\n      //   user:\"\",\n      // },\n      active: false,\n      currentIndex: -1,\n      page: 1,\n      // limit: 10,\n      limit: 3,\n      isOpenvoidCheckout: false,\n      isLoading: true,\n      // is_loading: false,\n      isMounted: true\n    };\n\n    this.updateState = data => {\n      if (this.state.isMounted) this.setState(data);\n    };\n\n    this.componentWillMount = () => {\n      this.validator = new SimpleReactValidator({\n        validators: {},\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message text-danger validNo fs14\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 9\n          }\n        }, message),\n        autoForceUpdate: this\n      });\n    };\n\n    this.getActivities = () => {\n      this.updateState({\n        isLoading: true\n      }); // console.log(\"isLoading\", isLoading)\n\n      let {\n        activityList,\n        pageMeta,\n        page,\n        limit\n      } = this.state;\n      console.log(\"this.prop.fk_id activity page\", this.props.fk_id);\n      this.props.getCommonApi(`activitylist/?searchprojectid=${this.props.fk_id}&page=${page}&limit=${limit}`).then(res => {\n        console.log(\"this.props.tokenDetail.username\", this.props.tokenDetail.username);\n        console.log(res, \"dsfdfaafg\");\n        this.setState({\n          activityList: []\n        });\n        activityList = res.data.dataList; // pageMeta = res.data.meta.pagination;\n\n        pageMeta = res.data.pagination; // pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\n\n        this.setState({\n          activityList,\n          pageMeta\n        }); // this.setState({ activityList });\n\n        console.log('res.data', res.data);\n        console.log('activityList', activityList);\n        console.log('pageMeta', pageMeta);\n        this.updateState({\n          isLoading: false\n        });\n      });\n    };\n\n    this.addActivity = () => {\n      try {\n        if (this.validator.allValid()) {\n          // this.updateState({ is_loading: true });\n          //   let { formFields } = this.state;\n          //   Object.keys(formFields).forEach((e) => {\n          //     if (typeof formFields[e] === \"boolean\")\n          //       formFields[e] = formFields[e] ? \"True\" : \"False\";\n          //   });\n          // this.updateState({isLoading: true});\n          let {\n            formFields\n          } = this.state;\n          const formData = new FormData();\n          formData.append(\"title\", formFields.activity);\n          formData.append(\"fk_project\", this.props.fk_id);\n          console.log(\"formFields.dateCreated dateFormat\", dateFormat(formFields.dateCreated) + \" 00:00:00\"); // console.log(\"dateFormat(new Date())\",dateFormat(new Date()))\n          // let date1 = new Date(dateFormat(new Date()));\n          // var today = new Date();\n          // console.log(\"today\",today)\n          // console.log(\"formFields.dateCreated\",formFields.dateCreated)\n          // var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\n          // var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n          // var dateTime = date+' '+time;\n          // console.log(\"dateTime\",dateTime)\n          // console.log(\"date1.getTime()\",date1.getTime())\n          // console.log(\"123123\",formFields.dateCreated.getHours() + \":\" + formFields.dateCreated.getMinutes() + \":\" + formFields.dateCreated.getSeconds())\n\n          formData.append(\"created_at\", dateFormat(formFields.dateCreated) + \" \" + formFields.dateCreated.getHours() + \":\" + formFields.dateCreated.getMinutes() + \":\" + formFields.dateCreated.getSeconds());\n          formData.append(\"name\", this.props.tokenDetail.username);\n          console.log(\"this.props.tokenDetail.username\", this.props.tokenDetail.username);\n          console.log(\"formData\", formData); // if (this.props.match.params.id) {\n\n          console.log(\"in if loop\"); // var res = \n\n          this.props.createActivity(formData).then(async res => {\n            console.log(\"res\", res);\n            await this.getActivities();\n          }); // this.props\n          //     .commonCreateApi(\n          //       `activitylist/`,\n          //       formData\n          //     )\n          //     .then(async res => {\n          //       console.log(\"res\",res)\n          //       await this.getActivities()\n          //     })\n          // console.log(res);\n          // this.updateState({isLoading: false});\n        } else {\n          this.validator.showMessages();\n        } // this.updateState({ is_loading: false });\n\n      } catch (e) {\n        this.updateState({\n          is_loading: false\n        });\n      }\n    };\n\n    this.handlePagination = async pageNo => {\n      let {\n        page\n      } = this.state;\n      page = pageNo.page;\n      await this.setState({\n        page\n      });\n      this.getActivities();\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n\n      this.setState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.handleOutsideClick = e => {\n      if (this.node != null) {\n        if (this.node.contains(e.target)) {\n          return;\n        }\n      }\n\n      this.handleClick();\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        formFields\n      } = this.state;\n      formFields[name] = value;\n      await this.setState({\n        formFields\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getActivities();\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  //   handleDatePick = async (name, value) => {\n  //     let { formFields } = this.state;\n  //     formFields[name] = value;\n  //     await this.setState({\n  //       formFields,\n  //     });\n  //   };\n  // seach change with api call\n  // handlesearch = event => {\n  //   event.persist();\n  //   if (!this.debouncedFn) {\n  //     this.debouncedFn = _.debounce(() => {\n  //       let searchString = event.target.value;\n  //       let data = { search: searchString };\n  //       this.queryHandler(data);\n  //     }, 500);\n  //   }\n  //   this.debouncedFn();\n  // };\n  // getProject = async data => {\n  //   this.updateState({ isLoading: true });\n  //   let { search } = this.state;\n  //   let { page = 1, limit = 10 } = data;\n  //   await this.props\n  //     .getProject(`?page=${page}&limit=${limit}&search=${search}`)\n  //     .then(res => {\n  //       let { data } = res;\n  //       console.log(data);\n  //       //  let { customerDetails } = this.props;\n  //       this.updateState({\n  //         customerList: data.dataList,\n  //         meta: data.meta?.pagination,\n  //         isLoading: false,\n  //       });\n  //     });\n  // };\n  // api call for staff\n  // queryHandler = async data => {\n  //   this.updateState({ is_loading: true });\n  //   let { page = 1, limit = 10 } = data;\n  //   await this.props.getProject(\n  //     `?page=${page}&limit=${limit}`\n  //   );\n  //   let { projectDetails } = this.props;\n  //   let { activityList, pageMeta } = this.state;\n  //   activityList = projectDetails.data;\n  //   pageMeta = projectDetails.meta?.pagination;\n  //   this.updateState({\n  //     activityList,\n  //     pageMeta,\n  //     is_loading: false,\n  //   });\n  // };\n  // // delete api call for staff\n  // handleDeleteProject = id => {\n  //   this.props.deleteProject(`${id}/`).then(res => this.queryHandler({}));\n  // };\n  render() {\n    let {\n      headerDetails,\n      pageMeta,\n      activityList,\n      formFields,\n      isLoading\n    } = this.state;\n    let {\n      dateCreated,\n      activity\n    } = formFields;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableWrapper, {\n      headerDetails: headerDetails,\n      queryHandler: this.handlePagination,\n      pageMeta: pageMeta,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 15\n      }\n    }, isLoading ? /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-flex mt-5 align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 31\n      }\n    }, t(\"Loading...\")))))) : activityList ? activityList.map((item, index) => {\n      let {\n        created_at,\n        title,\n        name\n      } = item;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 29\n        }\n      }, created_at)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 29\n        }\n      }, title)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 29\n        }\n      }, name)));\n    }) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pt-1 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 17\n      }\n    }, t(\"Date\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalDate // value={new Date()}\n    , {\n      showYearDropdown: true,\n      value: dateCreated,\n      name: \"dateCreated\" // type=\"date\"\n      ,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 17\n      }\n    }, this.validator.message(t(\"Date\"), dateCreated, t(\"required\"))), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pt-1 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 17\n      }\n    }, t(\"Activity\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: activity,\n      name: \"activity\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 17\n      }\n    }, this.validator.message(t(\"Activity\"), activity, t(\"required\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2 mb-3\",\n      mainbg: true,\n      className: \"confirm\",\n      label: \"Add\",\n      outline: false,\n      onClick: this.addActivity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  tokenDetail: state.authStore.tokenDetails\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    createActivity,\n    getTokenDetails,\n    commonCreateApi // getProject\n\n  }, dispatch);\n};\n\nexport const Activities = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(ActivitiesClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Project/AddProject/activities.js"],"names":["React","Toast","SimpleReactValidator","connect","bindActionCreators","getCommonApi","commonCreateApi","NormalButton","NormalDate","TableWrapper","dateFormat","withTranslation","NormalInput","NormalDateTime","Link","createActivity","getTokenDetails","ActivitiesClass","Component","state","headerDetails","label","formFields","dateCreated","Date","activity","activityList","pageMeta","active","currentIndex","page","limit","isOpenvoidCheckout","isLoading","isMounted","updateState","data","setState","componentWillMount","validator","validators","element","message","autoForceUpdate","getActivities","console","log","props","fk_id","then","res","tokenDetail","username","dataList","pagination","addActivity","allValid","formData","FormData","append","getHours","getMinutes","getSeconds","showMessages","e","is_loading","handlePagination","pageNo","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","node","contains","target","handleChange","value","name","componentDidMount","componentWillUnmount","render","t","map","item","index","created_at","title","mapStateToProps","authStore","tokenDetails","mapDispatchToProps","dispatch","Activities"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, commonCreateApi } from \"redux/actions/common\";\r\nimport { NormalButton, NormalDate, TableWrapper } from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NormalInput, NormalDateTime } from \"component/common\";\r\nimport { Link } from \"react-router-dom\"; \r\nimport {\r\n  createActivity,\r\n  \r\n} from \"redux/actions/project\";\r\nimport { getTokenDetails } from \"redux/actions/auth\";\r\n\r\nexport class ActivitiesClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Date\" },\r\n      { label: \"Activity\" },\r\n      { label: \"User\" },\r\n    ],\r\n\r\n    formFields: {\r\n      dateCreated: new Date(),\r\n      activity: \"\"\r\n    },\r\n    \r\n    activityList: [],\r\n    pageMeta: {\r\n      // chunk: 10,\r\n      // page: 1,\r\n      // total: 10,\r\n      // totalPages: 2,\r\n\r\n      // chunk: 2,\r\n      // page: 1,\r\n      // total: 8,\r\n      // totalPages: 4,\r\n    },\r\n\r\n    // formFields: {\r\n    //   date: \"\",\r\n    //   activity:\"\",\r\n    //   user:\"\",\r\n    // },\r\n    \r\n    active: false,\r\n    currentIndex: -1,\r\n    page: 1,\r\n    // limit: 10,\r\n    limit: 3,\r\n    isOpenvoidCheckout: false,\r\n    isLoading: true,\r\n    // is_loading: false,\r\n    isMounted: true,\r\n  };\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      validators: {},\r\n      element: (message) => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    \r\n    this.getActivities();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  getActivities = () => {\r\n    this.updateState({isLoading: true});\r\n    // console.log(\"isLoading\", isLoading)\r\n    \r\n    let { activityList, pageMeta, page, limit } = this.state;\r\n    console.log(\"this.prop.fk_id activity page\", this.props.fk_id)\r\n\r\n    this.props\r\n    .getCommonApi(\r\n      `activitylist/?searchprojectid=${this.props.fk_id}&page=${page}&limit=${limit}`\r\n    )\r\n      .then( res => {\r\n        console.log(\"this.props.tokenDetail.username\",this.props.tokenDetail.username)\r\n        console.log(res, \"dsfdfaafg\");\r\n        this.setState({ activityList: [] });\r\n        activityList = res.data.dataList;\r\n        // pageMeta = res.data.meta.pagination;\r\n        pageMeta = res.data.pagination;\r\n        // pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\r\n        this.setState({ activityList, pageMeta });\r\n        // this.setState({ activityList });\r\n        console.log('res.data',res.data)\r\n        console.log('activityList',activityList)\r\n        console.log('pageMeta',pageMeta)\r\n        this.updateState({isLoading: false});\r\n        \r\n      });\r\n    \r\n  };\r\n\r\n  // getProjects = () => {\r\n  //   this.props\r\n  //     .getCommonApi(\r\n  //       `projectlist/?searchid=${this.props.fk_id}`\r\n  //     )\r\n  //     .then(async res => {\r\n  //       console.log(\"project dataList\", res.data.dataList);\r\n  //       console.log(\"project dataList cust name\", res.data.dataList[0].customer_name);\r\n  //     });\r\n  // };\r\n\r\n  addActivity = () => {\r\n    try {\r\n      if (this.validator.allValid()) {\r\n        // this.updateState({ is_loading: true });\r\n      //   let { formFields } = this.state;\r\n      //   Object.keys(formFields).forEach((e) => {\r\n      //     if (typeof formFields[e] === \"boolean\")\r\n      //       formFields[e] = formFields[e] ? \"True\" : \"False\";\r\n      //   });\r\n      \r\n      // this.updateState({isLoading: true});\r\n        let { formFields } = this.state;\r\n\r\n      \r\n\r\n        const formData = new FormData();\r\n        formData.append(\"title\", formFields.activity);\r\n        formData.append(\"fk_project\", this.props.fk_id);\r\n\r\n        console.log(\"formFields.dateCreated dateFormat\",dateFormat(formFields.dateCreated)+\" 00:00:00\")\r\n        // console.log(\"dateFormat(new Date())\",dateFormat(new Date()))\r\n        // let date1 = new Date(dateFormat(new Date()));\r\n\r\n        // var today = new Date();\r\n        // console.log(\"today\",today)\r\n        // console.log(\"formFields.dateCreated\",formFields.dateCreated)\r\n        // var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\r\n        // var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n        // var dateTime = date+' '+time;\r\n        // console.log(\"dateTime\",dateTime)\r\n        // console.log(\"date1.getTime()\",date1.getTime())\r\n        // console.log(\"123123\",formFields.dateCreated.getHours() + \":\" + formFields.dateCreated.getMinutes() + \":\" + formFields.dateCreated.getSeconds())\r\n        formData.append(\"created_at\", dateFormat(formFields.dateCreated) + \" \"+formFields.dateCreated.getHours() + \":\" + formFields.dateCreated.getMinutes() + \":\" + formFields.dateCreated.getSeconds());\r\n\r\n        formData.append(\"name\", this.props.tokenDetail.username);\r\n        \r\n        console.log(\"this.props.tokenDetail.username\",this.props.tokenDetail.username)\r\n        console.log(\"formData\", formData)\r\n        // if (this.props.match.params.id) {\r\n          console.log(\"in if loop\")\r\n          // var res = \r\n          this.props.createActivity(\r\n            formData\r\n          ).then(async res => {\r\n            console.log(\"res\",res)\r\n            await this.getActivities()\r\n          })\r\n          // this.props\r\n          //     .commonCreateApi(\r\n          //       `activitylist/`,\r\n          //       formData\r\n          //     )\r\n          //     .then(async res => {\r\n          //       console.log(\"res\",res)\r\n          //       await this.getActivities()\r\n          //     })\r\n          // console.log(res);\r\n        // this.updateState({isLoading: false});\r\n        \r\n        \r\n      } else {\r\n        this.validator.showMessages();\r\n      }\r\n      // this.updateState({ is_loading: false });\r\n    } catch (e) {\r\n      this.updateState({ is_loading: false });\r\n    }\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.getActivities();\r\n  };\r\n  // pagination\r\n  // handlePagination = page => {\r\n  //   this.queryHandler(page);\r\n  // };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n\r\n//   handleDatePick = async (name, value) => {\r\n//     let { formFields } = this.state;\r\n//     formFields[name] = value;\r\n//     await this.setState({\r\n//       formFields,\r\n//     });\r\n//   };\r\n\r\n\r\n  // seach change with api call\r\n  // handlesearch = event => {\r\n  //   event.persist();\r\n\r\n  //   if (!this.debouncedFn) {\r\n  //     this.debouncedFn = _.debounce(() => {\r\n  //       let searchString = event.target.value;\r\n  //       let data = { search: searchString };\r\n  //       this.queryHandler(data);\r\n  //     }, 500);\r\n  //   }\r\n  //   this.debouncedFn();\r\n  // };\r\n\r\n  // getProject = async data => {\r\n  //   this.updateState({ isLoading: true });\r\n  //   let { search } = this.state;\r\n  //   let { page = 1, limit = 10 } = data;\r\n  //   await this.props\r\n  //     .getProject(`?page=${page}&limit=${limit}&search=${search}`)\r\n  //     .then(res => {\r\n  //       let { data } = res;\r\n  //       console.log(data);\r\n  //       //  let { customerDetails } = this.props;\r\n  //       this.updateState({\r\n  //         customerList: data.dataList,\r\n  //         meta: data.meta?.pagination,\r\n  //         isLoading: false,\r\n  //       });\r\n  //     });\r\n  // };\r\n\r\n  // api call for staff\r\n  // queryHandler = async data => {\r\n  //   this.updateState({ is_loading: true });\r\n  //   let { page = 1, limit = 10 } = data;\r\n  //   await this.props.getProject(\r\n  //     `?page=${page}&limit=${limit}`\r\n  //   );\r\n  //   let { projectDetails } = this.props;\r\n  //   let { activityList, pageMeta } = this.state;\r\n  //   activityList = projectDetails.data;\r\n  //   pageMeta = projectDetails.meta?.pagination;\r\n  //   this.updateState({\r\n  //     activityList,\r\n  //     pageMeta,\r\n  //     is_loading: false,\r\n  //   });\r\n  // };\r\n\r\n  // // delete api call for staff\r\n  // handleDeleteProject = id => {\r\n  //   this.props.deleteProject(`${id}/`).then(res => this.queryHandler({}));\r\n  // };\r\n  \r\n  \r\n\r\n  render() {\r\n    let { headerDetails, pageMeta, activityList, formFields, isLoading} = \r\n      this.state;\r\n\r\n    let { dateCreated, activity } = formFields\r\n    \r\n    let {t} =this.props;\r\n    \r\n    return (\r\n          <div className=\"py-4\">\r\n            <div className=\"table-container\">\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n                queryHandler={this.handlePagination}\r\n                pageMeta={pageMeta}\r\n              >\r\n                {isLoading ? (\r\n                      <tr>\r\n                        <td colSpan=\"7\">\r\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                            <div class=\"spinner-border\" role=\"status\">\r\n                              <span class=\"sr-only\">{t(\"Loading...\")}</span>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                \r\n                ) : activityList\r\n                  ? activityList.map((item, index) => {\r\n                      let {\r\n                        created_at,\r\n                        title,\r\n                        name\r\n                        \r\n                      } = item;\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              { created_at }\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              { title }\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              { name }\r\n                            </div>\r\n                          </td>\r\n                          \r\n                                   \r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n                \r\n              \r\n              </TableWrapper>\r\n\r\n              <div className=\"row mt-5\">\r\n\r\n                <div className=\"col-1\"></div>\r\n                \r\n                <label className=\"text-left text-black common-label-text fs-17 pt-1 ml-2\">\r\n                  {t(\"Date\")}\r\n                </label>\r\n                <div className=\"col-3\">\r\n                  <NormalDate\r\n                    // value={new Date()}\r\n                    showYearDropdown={true}\r\n                    value={dateCreated}\r\n                    name=\"dateCreated\"\r\n                    // type=\"date\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                    {this.validator.message(\r\n                      t(\"Date\"),\r\n                      dateCreated,\r\n                      t(\"required\")\r\n                    )}\r\n                </div>\r\n\r\n                <label className=\"text-left text-black common-label-text fs-17 pt-1 \">\r\n                    {t(\"Activity\")}\r\n                </label>\r\n                <div className=\"col-4\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={activity}\r\n                    name=\"activity\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                    {this.validator.message(\r\n                      t(\"Activity\"),\r\n                      activity,\r\n                      t(\"required\")\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"col-2\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2 mb-3\"}\r\n                  mainbg={true}\r\n                  className=\"confirm\"\r\n                  label=\"Add\"\r\n                  outline={false}\r\n                  onClick={this.addActivity}               \r\n                />\r\n              </div>\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetail: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      createActivity,\r\n      getTokenDetails,\r\n      commonCreateApi,\r\n      // getProject\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\n\r\n\r\nexport const Activities =withTranslation()( connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ActivitiesClass));\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}