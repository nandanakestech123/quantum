{"ast":null,"code":"import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalInput,NormalButton,NormalSelect}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,commonCreateApi}from\"redux/actions/common\";import\"./style.scss\";import{withTranslation}from\"react-i18next\";export var itemStatusPopupClass=/*#__PURE__*/function(_Component){_inherits(itemStatusPopupClass,_Component);var _super=_createSuper(itemStatusPopupClass);function itemStatusPopupClass(){var _this;_classCallCheck(this,itemStatusPopupClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data_list:[],item_status_options:[],focReasonList:[],sourceList:[]};_this.getStatusList=function(){var data_list=_this.state.data_list;var basicApptDetail=_this.props.basicApptDetail;_this.props.getCommonApi(\"cartpopup/?cust_noid=\".concat(basicApptDetail.custId,\"&cart_id=\").concat(_this.props.id,\"&is_status=1\")).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var status,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=key.status,data=key.data;if(!(status==\"200\")){_context.next=7;break;}console.log(key,\"cartstatuspopuplist\");data_list=data;_context.next=6;return _this.setState({data_list:data_list});case 6:if(_this.state.data_list.length>0){document.getElementById(_this.state.data_list[0].id).classList.toggle(\"d-none\");}case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handleSubmit=function(){var _this$state=_this.state,data_list=_this$state.data_list,sourceList=_this$state.sourceList;var _iterator=_createForOfIteratorHelper(data_list),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;sourceList.push({id:value.id,itemstatus:value.itemstatus,focreason:value.focreason});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.props.commonCreateApi(\"cartpopup/\",sourceList).then(function(key){var status=key.status,data=key.data;if(status==200){_this.props.handleModal();}});};_this.handleChange=function(e,index){var data_list=_this.state.data_list;var data=e.target.value;if([e.target.name]==\"itemstatus\"||[e.target.name]==\"focreason\"){data_list[index][e.target.name]=Number(data);}else{data_list[index][e.target.name]=data;}_this.setState({data_list:data_list});};_this.handleAccordion=function(id){var elements=document.getElementsByClassName(\"accordion\");for(var i=0;i<elements.length;i++){elements[i].classList.add(\"d-none\");}document.getElementById(id).classList.toggle(\"d-none\");console.log(elements);};return _this;}_createClass(itemStatusPopupClass,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$state2=this.state,item_status_options=_this$state2.item_status_options,focReasonList=_this$state2.focReasonList;this.props.getCommonApi(\"focreason/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var value=_step2.value;focReasonList.push({value:Number(value.id),label:value.foc_reason_ldesc});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this2.setState({focReasonList:focReasonList});}});this.props.getCommonApi(\"itemstatus/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator3=_createForOfIteratorHelper(data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var value=_step3.value;item_status_options.push({value:Number(value.id),label:value.status_short_desc});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this2.setState({item_status_options:item_status_options});}});this.getStatusList();}},{key:\"render\",value:function render(){var _this3=this;var _this$state3=this.state,data_list=_this$state3.data_list,item_status_options=_this$state3.item_status_options,focReasonList=_this$state3.focReasonList;var t=this.props.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mb-4 mt-2 product-details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"Item Status\"))),data_list&&data_list.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:false,className:\"col-12 fs-15 submit-btn\",label:\"Done\",onClick:function onClick(){return _this3.handleSubmit();}})):null),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 pl-3 pr-5 mt-2 fw-500 h6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},\"Item\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},t(\"Qty\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},t(\"Unit Price\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},t(\"Disc.\"),\" $\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},t(\"D/Price\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},t(\"Amount\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},t(\"Deposit\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},\"Staff\")),data_list&&data_list.length<=0?/*#__PURE__*/React.createElement(\"div\",{className:\"row pl-5 pr-5 mt-2\"},t(\"No Record Found\")):null,/*#__PURE__*/React.createElement(\"div\",{className:\"row w-00 pl-5 pr-5 mt-2 overflow-auto\"},data_list&&data_list.length>0&&data_list.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 mb-2\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 border rounded p-3 accordion-menu\",onClick:function onClick(){return _this3.handleAccordion(item.id);}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},item.itemdesc),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center\"},item.quantity),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},item.price),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},item.discount_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},item.discount_price),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},item.trans_amt),/*#__PURE__*/React.createElement(\"div\",{className:\"col text-right\"},item.deposit),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},item.sales_staffs)),/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 rounded bg-light p-3 d-none accordion\",id:item.id},/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100 pl-3 mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"Item Status\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:item_status_options,value:item.itemstatus?item.itemstatus:0,name:\"itemstatus\",onChange:function onChange(e){return _this3.handleChange(e,index);}}))),item.is_foc?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 pb-2\"},t(\"FOC Reason\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalSelect,{options:focReasonList,value:item.focreason?item.focreason:0,name:\"focreason\",onChange:function onChange(e){return _this3.handleChange(e,index);}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mt-4 pt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:item.is_foc,name:\"is_foc\",onChange:function onChange(e){return _this3.handleChange(e,index);}})),/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text fs-17 mt-1\"},t(\"FOC\"))))):null)));}))));}}]);return itemStatusPopupClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{basicApptDetail:state.appointment.basicApptDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonCreateApi:commonCreateApi},dispatch);};export var ItemStatusPopup=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(itemStatusPopupClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/cart/itemStatusPopup.js"],"names":["React","Component","NormalInput","NormalButton","NormalSelect","connect","bindActionCreators","getCommonApi","commonCreateApi","withTranslation","itemStatusPopupClass","state","data_list","item_status_options","focReasonList","sourceList","getStatusList","basicApptDetail","props","custId","id","then","key","status","data","console","log","setState","length","document","getElementById","classList","toggle","handleSubmit","value","push","itemstatus","focreason","handleModal","handleChange","e","index","target","name","Number","handleAccordion","elements","getElementsByClassName","i","add","label","foc_reason_ldesc","status_short_desc","t","map","item","itemdesc","quantity","price","discount_amt","discount_price","trans_amt","deposit","sales_staffs","is_foc","mapStateToProps","appointment","mapDispatchToProps","dispatch","ItemStatusPopup"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NormalInput, NormalButton, NormalSelect } from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, commonCreateApi } from \"redux/actions/common\";\r\n\r\nimport \"./style.scss\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class itemStatusPopupClass extends Component {\r\n  state = {\r\n    data_list: [],\r\n    item_status_options: [],\r\n    focReasonList: [],\r\n    sourceList: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    let { item_status_options, focReasonList } = this.state;\r\n\r\n    this.props.getCommonApi(`focreason/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          focReasonList.push({\r\n            value: Number(value.id),\r\n            label: value.foc_reason_ldesc,\r\n          });\r\n        }\r\n        this.setState({ focReasonList });\r\n      }\r\n    });\r\n    this.props.getCommonApi(`itemstatus/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          item_status_options.push({\r\n            value: Number(value.id),\r\n            label: value.status_short_desc,\r\n          });\r\n        }\r\n        this.setState({ item_status_options });\r\n      }\r\n    });\r\n    this.getStatusList();\r\n  }\r\n  getStatusList = () => {\r\n    let { data_list } = this.state;\r\n    let { basicApptDetail } = this.props;\r\n    this.props\r\n      .getCommonApi(\r\n        `cartpopup/?cust_noid=${basicApptDetail.custId}&cart_id=${this.props.id}&is_status=1`\r\n      )\r\n      .then(async key => {\r\n        let { status, data } = key;\r\n        if (status == \"200\") {\r\n          console.log(key, \"cartstatuspopuplist\");\r\n          data_list = data;\r\n          await this.setState({\r\n            data_list,\r\n          });\r\n          if (this.state.data_list.length > 0) {\r\n            document\r\n              .getElementById(this.state.data_list[0].id)\r\n              .classList.toggle(\"d-none\");\r\n          }\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    let { data_list, sourceList } = this.state;\r\n\r\n    for (let value of data_list) {\r\n      sourceList.push({\r\n        id: value.id,\r\n        itemstatus: value.itemstatus,\r\n        focreason: value.focreason,\r\n      });\r\n    }\r\n\r\n    this.props.commonCreateApi(`cartpopup/`, sourceList).then(key => {\r\n      let { status, data } = key;\r\n      if (status == 200) {\r\n        this.props.handleModal();\r\n      }\r\n    });\r\n  };\r\n\r\n  handleChange = (e, index) => {\r\n    let { data_list } = this.state;\r\n    let data = e.target.value;\r\n    if ([e.target.name] == \"itemstatus\" || [e.target.name] == \"focreason\") {\r\n      data_list[index][e.target.name] = Number(data);\r\n    } else {\r\n      data_list[index][e.target.name] = data;\r\n    }\r\n    this.setState({ data_list });\r\n  };\r\n\r\n  handleAccordion = id => {\r\n    let elements = document.getElementsByClassName(\"accordion\");\r\n    for (let i = 0; i < elements.length; i++) {\r\n      elements[i].classList.add(\"d-none\");\r\n    }\r\n    document.getElementById(id).classList.toggle(\"d-none\");\r\n    console.log(elements);\r\n  };\r\n\r\n  render() {\r\n    let { data_list, item_status_options, focReasonList } = this.state;\r\n    let { t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"container-fluid mb-4 mt-2 product-details\">\r\n          <div className=\"row\">\r\n            <div className=\"col-10\">\r\n              <h4>{t(\"Item Status\")}</h4>\r\n            </div>\r\n            {data_list && data_list.length > 0 ? (\r\n              <div className=\"col-2\">\r\n                <NormalButton\r\n                  mainbg={false}\r\n                  className=\"col-12 fs-15 submit-btn\"\r\n                  label=\"Done\"\r\n                  onClick={() => this.handleSubmit()}\r\n                />\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"row w-100 pl-3 pr-5 mt-2 fw-500 h6\">\r\n            <div className=\"col-3\">{`Item`}</div>\r\n            <div className=\"col-1 text-center\">{t(`Qty`)}</div>\r\n            <div className=\"col text-right\">{t(`Unit Price`)}</div>\r\n            <div className=\"col text-right\">{t(`Disc.`)} $</div>\r\n            <div className=\"col text-right\">{t(`D/Price`)}</div>\r\n            <div className=\"col text-right\">{t(`Amount`)}</div>\r\n            <div className=\"col text-right\">{t(`Deposit`)}</div>\r\n            <div className=\"col-2\">{`Staff`}</div>\r\n          </div>\r\n          {data_list && data_list.length <= 0 ? (\r\n            <div className=\"row pl-5 pr-5 mt-2\">{t(\"No Record Found\")}</div>\r\n          ) : null}\r\n          <div className=\"row w-00 pl-5 pr-5 mt-2 overflow-auto\">\r\n            {data_list &&\r\n              data_list.length > 0 &&\r\n              data_list.map((item, index) => {\r\n                return (\r\n                  <div className=\"row w-100 mb-2\" key={index}>\r\n                    <div\r\n                      className=\"row w-100 border rounded p-3 accordion-menu\"\r\n                      onClick={() => this.handleAccordion(item.id)}\r\n                    >\r\n                      <div className=\"col-3\">{item.itemdesc}</div>\r\n                      <div className=\"col-1 text-center\">\r\n                        {/* <NormalInput\r\n                          name=\"quantity\"\r\n                          type=\"number\"\r\n                          value={item.quantity}\r\n                          onChange={e => this.handleChange(e, index)}\r\n                        /> */}\r\n                        {item.quantity}\r\n                      </div>\r\n                      <div className=\"col text-right\">{item.price}</div>\r\n                      <div className=\"col text-right\">{item.discount_amt}</div>\r\n                      <div className=\"col text-right\">\r\n                        {item.discount_price}\r\n                      </div>\r\n                      <div className=\"col text-right\">{item.trans_amt}</div>\r\n                      <div className=\"col text-right\">{item.deposit}</div>\r\n                      <div className=\"col-2\">{item.sales_staffs}</div>\r\n                    </div>\r\n                    <div\r\n                      className=\"row w-100 rounded bg-light p-3 d-none accordion\"\r\n                      id={item.id}\r\n                    >\r\n                      <div className=\"row w-100 pl-3 mb-3\">\r\n                        <div className=\"col-4\">\r\n                          <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                            {t(\"Item Status\")}\r\n                          </label>\r\n                          <div className=\"input-group\">\r\n                            <NormalSelect\r\n                              options={item_status_options}\r\n                              value={item.itemstatus ? item.itemstatus : 0}\r\n                              name=\"itemstatus\"\r\n                              onChange={e => this.handleChange(e, index)}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        {item.is_foc ? (\r\n                          <>\r\n                            <div className=\"col-4\">\r\n                              <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                                {t(\"FOC Reason\")}\r\n                              </label>\r\n                              <div className=\"input-group\">\r\n                                <NormalSelect\r\n                                  options={focReasonList}\r\n                                  value={item.focreason ? item.focreason : 0}\r\n                                  name=\"focreason\"\r\n                                  onChange={e => this.handleChange(e, index)}\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"col-4\">\r\n                              <div className=\"input-group mt-4 pt-3\">\r\n                                <div className=\"p-2\">\r\n                                  <input\r\n                                    type=\"checkbox\"\r\n                                    checked={item.is_foc}\r\n                                    name=\"is_foc\"\r\n                                    onChange={e => this.handleChange(e, index)}\r\n                                  />\r\n                                </div>\r\n                                <label className=\"text-left text-black common-label-text fs-17 mt-1\">\r\n                                  {t(\"FOC\")}\r\n                                </label>\r\n                              </div>\r\n                            </div>\r\n                          </>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonCreateApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ItemStatusPopup = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(itemStatusPopupClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}