{"ast":null,"code":"import _objectSpread from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import helpers from\"./Helper\";import{axiosInstance,logout}from\"./utilities\";export var api=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$method,method,api,header,body,_ref$status,status,_ref$token,token,_ref$baseURL,baseURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$method=_ref.method,method=_ref$method===void 0?\"get\":_ref$method,api=_ref.api,header=_ref.header,body=_ref.body,_ref$status=_ref.status,status=_ref$status===void 0?false:_ref$status,_ref$token=_ref.token,token=_ref$token===void 0?\"\":_ref$token,_ref$baseURL=_ref.baseURL,baseURL=_ref$baseURL===void 0?\"normal\":_ref$baseURL;_context.next=3;return new Promise(function(resolve,reject){// setting token\n// localStorage.getItem('AuthTypeId')\n//   ? (axiosInstance.defaults.headers.common['user-type'] = localStorage.getItem('AuthTypeId'))\n//   : '';\n// if (!!localStorage.getItem(\"AuthTypeId\"))\n//   axiosInstance.defaults.headers.common[\"user-type\"] = localStorage.getItem(\n//     \"AuthTypeId\"\n//   );\nif(!!localStorage.getItem(\"AuthToken\"))axiosInstance.defaults.headers.common[\"Authorization\"]=\"token \"+localStorage.getItem(\"AuthToken\");axiosInstance.defaults.crossDomain=true;if(!!header){axiosInstance.defaults.headers.put[header.type]=header.value;axiosInstance.defaults.headers.post[header.type]=header.value;}// axiosInstance.defaults.headers.common[\n//   'Accept'\n// ] = 'application/json';\n// axiosInstance.defaults.headers.common[\n//   'Content-Type'\n// ] = 'multipart/form-data';\n// axiosInstance.defaults.headers.post['Content-Type'] = 'application/json';\naxiosInstance[method](\"\".concat(getServiceUrl(baseURL)).concat(api),body?body:\"\").then(function(data){resolve(statusHelper(status,data));}).catch(function(error){try{if(error.response){reject(statusHelper(status,error.response));}else{reject(error);}}catch(err){console.log(err);reject(err);}});});case 3:return _context.abrupt(\"return\",_context.sent);case 4:case\"end\":return _context.stop();}}},_callee);}));return function api(_x){return _ref2.apply(this,arguments);};}();var statusHelper=function statusHelper(status,data){if(data.status===401||data.status===403){logout();}if(status){return _objectSpread({status:data.status},data.data);}else{return data.data;}};var getServiceUrl=function getServiceUrl(baseURL){var finalURL=\"\";switch(baseURL){case\"normal\":finalURL=helpers.getUrl()+\"api/\";//live\n// finalURL = \"http://52.60.58.9:8000/api/\";\nbreak;case\"token\":finalURL=helpers.getUrl()+\"api/\";//live\n// finalURL = \"http://52.60.58.9:8000/api/\";\nbreak;default:finalURL=helpers.getUrl()+\"api/\";//live\n// finalURL = \"http://52.60.58.9:8000/api/\";\n}return finalURL;};export function getUrl(){return\"test\";}","map":{"version":3,"sources":["E:/newfrontend/webfe/src/service/api.js"],"names":["helpers","axiosInstance","logout","api","method","header","body","status","token","baseURL","Promise","resolve","reject","localStorage","getItem","defaults","headers","common","crossDomain","put","type","value","post","getServiceUrl","then","data","statusHelper","catch","error","response","err","console","log","finalURL","getUrl"],"mappings":"kbAAA,MAAOA,CAAAA,OAAP,KAAoB,UAApB,CACA,OAASC,aAAT,CAAwBC,MAAxB,KAAsC,aAAtC,CAEA,MAAO,IAAIC,CAAAA,GAAG,2FAAG,wPACfC,MADe,CACfA,MADe,sBACN,KADM,aAEfD,GAFe,MAEfA,GAFe,CAGfE,MAHe,MAGfA,MAHe,CAIfC,IAJe,MAIfA,IAJe,kBAKfC,MALe,CAKfA,MALe,sBAKN,KALM,6BAMfC,KANe,CAMfA,KANe,qBAMP,EANO,8BAOfC,OAPe,CAOfA,OAPe,uBAOL,QAPK,oCASF,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAI,CAAC,CAACC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAN,CACEb,aAAa,CAACc,QAAd,CAAuBC,OAAvB,CAA+BC,MAA/B,CAAsC,eAAtC,EACE,SAAWJ,YAAY,CAACC,OAAb,CAAqB,WAArB,CADb,CAGFb,aAAa,CAACc,QAAd,CAAuBG,WAAvB,CAAqC,IAArC,CACA,GAAI,CAAC,CAACb,MAAN,CAAc,CACZJ,aAAa,CAACc,QAAd,CAAuBC,OAAvB,CAA+BG,GAA/B,CAAmCd,MAAM,CAACe,IAA1C,EAAkDf,MAAM,CAACgB,KAAzD,CACApB,aAAa,CAACc,QAAd,CAAuBC,OAAvB,CAA+BM,IAA/B,CAAoCjB,MAAM,CAACe,IAA3C,EAAmDf,MAAM,CAACgB,KAA1D,CACD,CACD;AACA;AACA;AAEA;AACA;AACA;AACA;AAEApB,aAAa,CAACG,MAAD,CAAb,WAAyBmB,aAAa,CAACd,OAAD,CAAtC,SAAkDN,GAAlD,EAAyDG,IAAI,CAAGA,IAAH,CAAU,EAAvE,EACGkB,IADH,CACQ,SAAAC,IAAI,CAAI,CACZd,OAAO,CAACe,YAAY,CAACnB,MAAD,CAASkB,IAAT,CAAb,CAAP,CACD,CAHH,EAIGE,KAJH,CAIS,SAAAC,KAAK,CAAI,CACd,GAAI,CACF,GAAIA,KAAK,CAACC,QAAV,CAAoB,CAClBjB,MAAM,CAACc,YAAY,CAACnB,MAAD,CAASqB,KAAK,CAACC,QAAf,CAAb,CAAN,CACD,CAFD,IAEO,CACLjB,MAAM,CAACgB,KAAD,CAAN,CACD,CACF,CAAC,MAAOE,GAAP,CAAY,CACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAlB,MAAM,CAACkB,GAAD,CAAN,CACD,CACF,CAfH,EAgBD,CA3CY,CATE,6GAAH,mEAAP,CAuDP,GAAIJ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACnB,MAAD,CAASkB,IAAT,CAAkB,CACnC,GAAIA,IAAI,CAAClB,MAAL,GAAgB,GAAhB,EAAuBkB,IAAI,CAAClB,MAAL,GAAgB,GAA3C,CAAgD,CAC9CL,MAAM,GACP,CACD,GAAIK,MAAJ,CAAY,CACV,sBACEA,MAAM,CAAEkB,IAAI,CAAClB,MADf,EAEKkB,IAAI,CAACA,IAFV,EAID,CALD,IAKO,CACL,MAAOA,CAAAA,IAAI,CAACA,IAAZ,CACD,CACF,CAZD,CAcA,GAAIF,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAd,OAAO,CAAI,CAC7B,GAAIwB,CAAAA,QAAQ,CAAG,EAAf,CAEA,OAAQxB,OAAR,EACE,IAAK,QAAL,CACEwB,QAAQ,CAAGjC,OAAO,CAACkC,MAAR,GAAmB,MAA9B,CAAsC;AACtC;AACA,MACF,IAAK,OAAL,CACED,QAAQ,CAAGjC,OAAO,CAACkC,MAAR,GAAmB,MAA9B,CAAsC;AACtC;AACA,MACF,QACED,QAAQ,CAAGjC,OAAO,CAACkC,MAAR,GAAmB,MAA9B,CAAsC;AACxC;AAXF,CAcA,MAAOD,CAAAA,QAAP,CACD,CAlBD,CAoBA,MAAO,SAASC,CAAAA,MAAT,EAAkB,CACvB,MAAO,MAAP,CACD","sourcesContent":["import helpers from \"./Helper\";\r\nimport { axiosInstance, logout } from \"./utilities\";\r\n\r\nexport var api = async function ({\r\n  method = \"get\",\r\n  api,\r\n  header,\r\n  body,\r\n  status = false,\r\n  token = \"\",\r\n  baseURL = \"normal\",\r\n}) {\r\n  return await new Promise((resolve, reject) => {\r\n    // setting token\r\n    // localStorage.getItem('AuthTypeId')\r\n    //   ? (axiosInstance.defaults.headers.common['user-type'] = localStorage.getItem('AuthTypeId'))\r\n    //   : '';\r\n    // if (!!localStorage.getItem(\"AuthTypeId\"))\r\n    //   axiosInstance.defaults.headers.common[\"user-type\"] = localStorage.getItem(\r\n    //     \"AuthTypeId\"\r\n    //   );\r\n    if (!!localStorage.getItem(\"AuthToken\"))\r\n      axiosInstance.defaults.headers.common[\"Authorization\"] =\r\n        \"token \" + localStorage.getItem(\"AuthToken\");\r\n\r\n    axiosInstance.defaults.crossDomain = true;\r\n    if (!!header) {\r\n      axiosInstance.defaults.headers.put[header.type] = header.value;\r\n      axiosInstance.defaults.headers.post[header.type] = header.value;\r\n    }\r\n    // axiosInstance.defaults.headers.common[\r\n    //   'Accept'\r\n    // ] = 'application/json';\r\n\r\n    // axiosInstance.defaults.headers.common[\r\n    //   'Content-Type'\r\n    // ] = 'multipart/form-data';\r\n    // axiosInstance.defaults.headers.post['Content-Type'] = 'application/json';\r\n\r\n    axiosInstance[method](`${getServiceUrl(baseURL)}${api}`, body ? body : \"\")\r\n      .then(data => {\r\n        resolve(statusHelper(status, data));\r\n      })\r\n      .catch(error => {\r\n        try {\r\n          if (error.response) {\r\n            reject(statusHelper(status, error.response));\r\n          } else {\r\n            reject(error);\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n          reject(err);\r\n        }\r\n      });\r\n  });\r\n};\r\n\r\nvar statusHelper = (status, data) => {\r\n  if (data.status === 401 || data.status === 403) {\r\n    logout();\r\n  }\r\n  if (status) {\r\n    return {\r\n      status: data.status,\r\n      ...data.data,\r\n    };\r\n  } else {\r\n    return data.data;\r\n  }\r\n};\r\n\r\nlet getServiceUrl = baseURL => {\r\n  let finalURL = \"\";\r\n\r\n  switch (baseURL) {\r\n    case \"normal\":\r\n      finalURL = helpers.getUrl() + \"api/\"; //live\r\n      // finalURL = \"http://52.60.58.9:8000/api/\";\r\n      break;\r\n    case \"token\":\r\n      finalURL = helpers.getUrl() + \"api/\"; //live\r\n      // finalURL = \"http://52.60.58.9:8000/api/\";\r\n      break;\r\n    default:\r\n      finalURL = helpers.getUrl() + \"api/\"; //live\r\n    // finalURL = \"http://52.60.58.9:8000/api/\";\r\n  }\r\n\r\n  return finalURL;\r\n};\r\n\r\nexport function getUrl() {\r\n  return \"test\";\r\n}\r\n"]},"metadata":{},"sourceType":"module"}