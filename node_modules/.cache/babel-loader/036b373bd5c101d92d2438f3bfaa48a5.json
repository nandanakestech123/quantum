{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"./style.scss\";import{NormalButton,TableWrapper,NormalSelect}from'component/common';import{getCommonApi,updateForm,commonCreateApi,commonDeleteApi,commonPatchApi}from\"redux/actions/common\";import{connect}from'react-redux';import{bindActionCreators}from\"redux\";export var TreatmentAccountClass=/*#__PURE__*/function(_Component){_inherits(TreatmentAccountClass,_Component);var _super=_createSuper(TreatmentAccountClass);function TreatmentAccountClass(){var _this;_classCallCheck(this,TreatmentAccountClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeTab:'',isOpenTreatmentDone:false,isActiveTab:\"detail\",headerDetails:[{label:'Date',sortKey:false,width:\"80px\"},{label:'Transaction #',width:\"52px\"},{label:'Treatment #',sortKey:false,width:\"75px\"},{label:'Description',sortKey:false,width:\"155px\"},{label:'Payment',sortKey:false,width:\"70px\"},{label:'Credit Balance',sortKey:false,width:\"72px\"},{label:'Outstanding',sortKey:false,width:\"72px\"},{label:'',sortKey:false,width:\"72px\"}],detailHeader:[{label:'Date',sortKey:false,width:\"80px\"},{label:'Description',sortKey:false,width:\"155px\"},{label:'Type',width:\"52px\"},{label:'Amount',sortKey:false,width:\"70px\"},{label:'Credit Balance',sortKey:false,width:\"72px\"},{label:'Outstanding',sortKey:false,width:\"72px\"}],accountList:[],DetailList:[],yearList:[],year:new Date().getFullYear(),accountHeader:{}};_this.getFilter=function(){_this.props.getCommonApi('treatmentdone/Year/').then(function(key){var status=key.status,data=key.data;var yearList=_this.state.yearList;var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;yearList.push({value:value,label:value});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({yearList:yearList});});};_this.getAccountData=function(){var _this$state=_this.state,year=_this$state.year,accountHeader=_this$state.accountHeader;_this.props.getCommonApi(\"treatmentacclist/?cust_id=\".concat(_this.props.id,\"&year=\").concat(year)).then(function(key){var data=key.data,header_data=key.header_data;var accountList=_this.state.accountList;accountList=data;accountHeader=header_data;_this.setState({accountList:accountList,accountHeader:accountHeader});});};_this.toggle=function(tab){if(_this.state.activeTab!==tab){_this.setState({activeTab:tab});}};_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,year;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;year=_this.state.year;year=value;_context.next=5;return _this.setState({year:year});case 5:_this.getAccountData();case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleOpenDetail=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var activeTab;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:activeTab=_this.state.activeTab;activeTab='detail';_context2.next=4;return _this.setState({activeTab:activeTab});case 4:_this.getDetailList(data.id);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.getDetailList=function(id){_this.props.getCommonApi(\"treatmentacclist/\".concat(id)).then(function(key){var data=key.data,header_data=key.header_data;var _this$state2=_this.state,DetailList=_this$state2.DetailList,accountHeader=_this$state2.accountHeader;DetailList=data;accountHeader=header_data;_this.setState({DetailList:DetailList,accountHeader:accountHeader});});};_this.handleBack=function(){var activeTab=_this.state.activeTab;activeTab='';_this.setState({activeTab:activeTab,DetailList:[]});_this.getAccountData();};return _this;}_createClass(TreatmentAccountClass,[{key:\"componentDidMount\",value:function componentDidMount(){this.getFilter();this.getAccountData();}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,_this$state3$accountH=_this$state3.accountHeader,accountHeader=_this$state3$accountH===void 0?{}:_this$state3$accountH,headerDetails=_this$state3.headerDetails,accountList=_this$state3.accountList,yearList=_this$state3.yearList,year=_this$state3.year,activeTab=_this$state3.activeTab,detailHeader=_this$state3.detailHeader,DetailList=_this$state3.DetailList;var balance=accountHeader.balance,treatment_count=accountHeader.treatment_count,outstanding=accountHeader.outstanding,credit_balance=accountHeader.credit_balance,outstanding_balance=accountHeader.outstanding_balance;return/*#__PURE__*/React.createElement(\"div\",{className:\"treatment-account row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},activeTab!=='detail'?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"},\"Treatment List\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 mb-2\"},/*#__PURE__*/React.createElement(NormalSelect,{options:yearList,value:year,name:\"year\",onChange:this.handleChange,className:\"customer-name py-1\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},\"Total Treatment Count \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},treatment_count)):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mt-3 mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},\"Credit Balance\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-2\"},\"$ \",activeTab!=='detail'?balance:credit_balance),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"Outstanding Balance\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"$ \",activeTab!=='detail'?outstanding:outstanding_balance))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},activeTab!=='detail'?/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination},accountList&&accountList.length>0?accountList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.transaction)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.treatment_parentcode)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.payment)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.outstanding)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"view mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"view\",onClick:function onClick(){return _this2.handleOpenDetail(item);}}))));}):\"\"):/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:detailHeader,queryHandler:this.handlePagination},DetailList&&DetailList.length>0?DetailList.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.sa_date)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.description)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},item.type)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.amount)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.balance)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"$\"+item.outstanding)));}):\"\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 justify-center d-flex\"},activeTab==='detail'?/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"back mr-3\",mainbg:true,className:\"col-12 fs-15 \",label:\"Back\",onClick:function onClick(){return _this2.handleBack();}}):\"\",/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"print\",className:\"col-12 fs-15 \",label:\"Print\",onClick:function onClick(){return _this2.setState({isOpenEditDisc:false});}})));}}]);return TreatmentAccountClass;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,updateForm:updateForm,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi,commonDeleteApi:commonDeleteApi},dispatch);};export var TreatmentAccount=connect(null,mapDispatchToProps)(TreatmentAccountClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/CustomerDetailsPlus/Accounts/treatmentAccount.js"],"names":["React","Component","NormalButton","TableWrapper","NormalSelect","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","connect","bindActionCreators","TreatmentAccountClass","state","activeTab","isOpenTreatmentDone","isActiveTab","headerDetails","label","sortKey","width","detailHeader","accountList","DetailList","yearList","year","Date","getFullYear","accountHeader","getFilter","props","then","key","status","data","value","push","setState","getAccountData","id","header_data","toggle","tab","handleChange","target","name","handleOpenDetail","getDetailList","handleBack","balance","treatment_count","outstanding","credit_balance","outstanding_balance","handlePagination","length","map","item","index","sa_date","transaction","treatment_parentcode","description","payment","type","amount","isOpenEditDisc","mapDispatchToProps","dispatch","TreatmentAccount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport \"./style.scss\";\nimport { NormalButton, TableWrapper, NormalSelect } from 'component/common';\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from \"redux\";\n\nexport class TreatmentAccountClass extends Component {\n  state = {\n    activeTab: '',\n    isOpenTreatmentDone: false,\n    isActiveTab: \"detail\",\n    headerDetails: [\n      { label: 'Date', sortKey: false, width: \"80px\" },\n      { label: 'Transaction #', width: \"52px\" },\n      { label: 'Treatment #', sortKey: false, width: \"75px\" },\n      { label: 'Description', sortKey: false, width: \"155px\" },\n      { label: 'Payment', sortKey: false, width: \"70px\" },\n      { label: 'Credit Balance', sortKey: false, width: \"72px\" },\n      { label: 'Outstanding', sortKey: false, width: \"72px\" },\n      { label: '', sortKey: false, width: \"72px\" },\n    ],\n    detailHeader: [\n      { label: 'Date', sortKey: false, width: \"80px\" },\n      { label: 'Description', sortKey: false, width: \"155px\" },\n      { label: 'Type', width: \"52px\" },\n      { label: 'Amount', sortKey: false, width: \"70px\" },\n      { label: 'Credit Balance', sortKey: false, width: \"72px\" },\n      { label: 'Outstanding', sortKey: false, width: \"72px\" },\n    ],\n    accountList: [],\n    DetailList: [],\n    yearList: [],\n    year: new Date().getFullYear(),\n    accountHeader: {}\n  }\n\n  componentDidMount() {\n    this.getFilter();\n    this.getAccountData();\n  }\n\n  getFilter = () => {\n    this.props.getCommonApi('treatmentdone/Year/').then((key) => {\n      let { status, data } = key;\n      let { yearList } = this.state;\n      for (let value of data) {\n        yearList.push({ value: value, label: value })\n      }\n      this.setState({ yearList })\n    })\n  }\n\n  getAccountData = () => {\n    let { year, accountHeader } = this.state;\n    this.props.getCommonApi(`treatmentacclist/?cust_id=${this.props.id}&year=${year}`).then((key) => {\n      let { data, header_data } = key;\n      let { accountList } = this.state;\n      accountList = data;\n      accountHeader = header_data;\n      this.setState({ accountList, accountHeader })\n    })\n  }\n\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({\n        activeTab: tab\n      });\n    }\n  }\n\n  handleChange = async ({ target: { value, name } }) => {    \n    let { year } = this.state;\n    year = value\n    await this.setState({\n      year\n    })\n    this.getAccountData();\n  }\n\n  handleOpenDetail = async (data) => {\n    let { activeTab } = this.state\n    activeTab = 'detail';\n\n    await this.setState({\n      activeTab\n    })\n    this.getDetailList(data.id);\n  }\n\n  getDetailList = (id) => {\n    this.props.getCommonApi(`treatmentacclist/${id}`).then((key) => {\n      let { data, header_data } = key;\n      let { DetailList, accountHeader } = this.state;\n      DetailList = data;\n      accountHeader = header_data;\n      this.setState({ DetailList, accountHeader })\n    })\n  }\n\n  handleBack = () => {\n    let { activeTab } = this.state;\n    activeTab = '';\n    this.setState({\n      activeTab,\n      DetailList: []\n    })\n    this.getAccountData();\n  }\n\n  render() {\n    let { accountHeader = {}, headerDetails, accountList, yearList, year, activeTab, detailHeader, DetailList } = this.state;\n    let { balance, treatment_count, outstanding, credit_balance, outstanding_balance } = accountHeader;\n    return (\n\n      <div className=\"treatment-account row\">\n        <div className=\"col-6 mt-3 mb-4\">\n          {\n            activeTab !== 'detail' ?\n              <div className=\"row\">\n                <div className=\"col-5 mb-2\">Treatment List</div>\n                <div className=\"col-5 mb-2\">\n                  <NormalSelect\n                    options={yearList}\n                    value={year}\n                    name=\"year\"\n                    onChange={this.handleChange}\n                    className=\"customer-name py-1\"\n                  />\n                </div>\n                <div className=\"col-5\">Total Treatment Count </div>\n                <div className=\"col-5\">{treatment_count}</div>\n              </div> : \"\"\n          }\n        </div>\n        <div className=\"col-6 mt-3 mb-4\">\n          <div className=\"row\">\n            <div className=\"col-6 mb-2\">Credit Balance</div>\n            <div className=\"col-6 mb-2\">$ {activeTab !== 'detail' ? balance : credit_balance}</div>\n\n            <div className=\"col-6\">Outstanding Balance</div>\n            <div className=\"col-6\">$ {activeTab !== 'detail' ? outstanding : outstanding_balance}</div>\n          </div>\n        </div>\n        <div className=\"col-12\">\n\n          <div className=\"table\">\n            {\n              activeTab !== 'detail' ?\n                <TableWrapper headerDetails={headerDetails} queryHandler={this.handlePagination}>\n                  {(accountList && accountList.length > 0) ? accountList.map((item, index) => {\n                    return (\n                      <tr key={index} >\n\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.sa_date}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.transaction}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.treatment_parentcode}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.description}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.payment}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.balance}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.outstanding}</div></td>\n                        <td>\n                          <div className=\"d-flex align-items-center justify-content-center\">\n                            <NormalButton\n                              buttonClass={\"view mr-3\"}\n                              mainbg={true}\n                              className=\"col-12 fs-15 \"\n                              label=\"view\"\n                              onClick={() => this.handleOpenDetail(item)}\n                            />\n                          </div>\n                        </td>\n                      </tr>\n                    )\n                  }) : \"\"\n                  }\n                </TableWrapper> : <TableWrapper headerDetails={detailHeader} queryHandler={this.handlePagination}>\n                  {DetailList && DetailList.length > 0 ? DetailList.map((item, index) => {\n                    return (\n                      <tr key={index}>\n\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.sa_date}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.description}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{item.type}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.amount}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.balance}</div></td>\n                        <td><div className=\"d-flex align-items-center justify-content-center\">{\"$\" + item.outstanding}</div></td>\n                      </tr>\n                    )\n                  }) : \"\"\n                  }\n                </TableWrapper>\n            }\n          </div>\n        </div>\n        <div className=\"col-12 justify-center d-flex\">\n          {\n            activeTab === 'detail' ? <NormalButton\n              buttonClass={\"back mr-3\"}\n              mainbg={true}\n              className=\"col-12 fs-15 \"\n              label=\"Back\"\n              onClick={() => this.handleBack()}\n            /> : \"\"\n          }\n          <NormalButton\n            buttonClass={\"print\"}\n            className=\"col-12 fs-15 \"\n            label=\"Print\"\n            onClick={() => this.setState({ isOpenEditDisc: false })}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    updateForm,\n    commonCreateApi,\n    commonPatchApi,\n    commonDeleteApi\n  }, dispatch)\n}\n\nexport const TreatmentAccount = connect(null, mapDispatchToProps)(TreatmentAccountClass)"]},"metadata":{},"sourceType":"module"}