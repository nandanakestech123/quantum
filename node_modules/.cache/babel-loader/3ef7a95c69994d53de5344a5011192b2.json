{"ast":null,"code":"import _objectSpread from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import\"./style.scss\";import{getJobtitle,getCommonApi}from\"redux/actions/common\";import{getStaffPlus,deleteStaffPlus}from\"redux/actions/staffPlus\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import _ from\"lodash\";import{Link}from\"react-router-dom\";import{Navigation}from\"react-minimal-side-navigation\";import{withTranslation}from\"react-i18next\";export var ListStaffPlusClass=/*#__PURE__*/function(_React$Component){_inherits(ListStaffPlusClass,_React$Component);var _super=_createSuper(ListStaffPlusClass);function ListStaffPlusClass(){var _this;_classCallCheck(this,ListStaffPlusClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Status\"},{label:\"Staff Name\"},{label:\"Phone\"},{label:\"Staff ID\"},{label:\"Specialist\"},{label:\"Home site\"},{label:\"Current site\"}// { label: \"\" },\n],originalStaffList:[],staffList:[],filter:\"all\",locationOption:[],levelList:[],jobOption:[],pageMeta:{},selectedMenu:\"/active\",active:false,currentIndex:-1,isLoading:false,isMounted:true,search:\"\"};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.updateState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleFilterChange=function(){var filterOption=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";_this.state.selectedMenu=filterOption;var splitted=filterOption.split(\"/\");var filter=_this.state.filter;console.log(filterOption);if(splitted.length==2){switch(splitted[1]){case\"all\":filter=\"all\";break;case\"withSecurityAccount\":filter=\"is_login=True\";break;case\"withoutSecurityAccount\":filter=\"is_login=False\";break;case\"active\":filter=\"emp_isactive=True\";break;case\"inactive\":filter=\"emp_isactive=False\";break;default:filter=\"\";}}else if(splitted.length==3){switch(splitted[1]){case\"emp_lvl\":filter=\"LEVEL_ItmIDid=\".concat(splitted[2]);break;case\"sitelist\":filter=\"Site_Codeid=\".concat(splitted[2]);break;case\"operation\":filter=\"EMP_TYPEid=\".concat(splitted[2]);break;default:filter=\"\";}}if(_this.state.filter!=filter&&filter!==\"\"){_this.state.filter=filter;_this.queryHandler({});}};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.queryHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _staffDetails$meta;var search,_data$page,page,_data$limit,limit,staffDetails,_this$state,staffList,pageMeta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateState({isLoading:true});search=_this.state.search;_data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit;_context.next=5;return _this.props.getStaffPlus(\"?page=\".concat(page,\"&limit=\").concat(limit).concat(_this.state.filter===\"all\"?\"&emp_isactive=True\":\"&\".concat(_this.state.filter),\"&search=\").concat(search));case 5:staffDetails=_this.props.staffDetails;_this$state=_this.state,staffList=_this$state.staffList,pageMeta=_this$state.pageMeta;staffList=staffDetails.dataList;pageMeta=(_staffDetails$meta=staffDetails.meta)===null||_staffDetails$meta===void 0?void 0:_staffDetails$meta.pagination;_this.updateState({staffList:staffList,originalStaffList:staffList,pageMeta:pageMeta,isLoading:false});case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(page){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.queryHandler(page);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleSearch=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event){var searchString;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// event.persist();\nsearchString=event.target.value;_context4.next=3;return _this.setState({search:searchString,visible:true,page:1});case 3:if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.queryHandler({});case 1:case\"end\":return _context3.stop();}}},_callee3);})),500);}_this.debouncedFn();case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.getDatafromStore=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(type){var jobtitleList,jobOption,_iterator,_step,key;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:jobtitleList=_this.props.jobtitleList;jobOption=_this.state.jobOption;if(type===\"jobtitle\"){_iterator=_createForOfIteratorHelper(jobtitleList);try{for(_iterator.s();!(_step=_iterator.n()).done;){key=_step.value;jobOption.push({title:key.level_desc,itemId:\"/operation/\"+key.id});}}catch(err){_iterator.e(err);}finally{_iterator.f();}}_context5.next=5;return _this.updateState({jobOption:jobOption});case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref5.apply(this,arguments);};}();_this.handleDeleteStaff=function(id){_this.props.deleteStaffPlus(\"\".concat(id,\"/\")).then(function(res){return _this.queryHandler({});});};return _this;}_createClass(ListStaffPlusClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){var queryParams=new URLSearchParams(window.location.search);var filter=queryParams.get(\"filter\");if(filter){this.state.selectedMenu=\"/\"+filter;this.handleFilterChange(this.state.selectedMenu);this.updateState({});}else this.queryHandler({});}},{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.props.getCommonApi(\"branchlist/\").then(function(res){var locationOption=_this2.state.locationOption;var _iterator2=_createForOfIteratorHelper(res.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;locationOption.push({title:key.itemsite_desc,itemId:\"/sitelist/\"+key.id});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this2.updateState({locationOption:locationOption});});// level option api\nthis.props.getCommonApi(\"securities/\").then(function(res){var levelList=_this2.state.levelList;var _iterator3=_createForOfIteratorHelper(res.data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;levelList.push({itemId:\"/emp_lvl/\"+key.id,title:key.level_name});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this2.updateState({levelList:levelList});});// jobtitle option api\nthis.props.getJobtitle().then(function(){_this2.getDatafromStore(\"jobtitle\");});}// popup open/close\n},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,headerDetails=_this$state2.headerDetails,pageMeta=_this$state2.pageMeta,currentIndex=_this$state2.currentIndex,locationOption=_this$state2.locationOption,levelList=_this$state2.levelList,jobOption=_this$state2.jobOption,staffList=_this$state2.staffList,originalStaffList=_this$state2.originalStaffList,isLoading=_this$state2.isLoading,selectedMenu=_this$state2.selectedMenu;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/schedule\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Schedule\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/authorization\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Authorization\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/staffplus/skills\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Skill Listing\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 col-lg-3 mb-4\",style:this.state.isLoading?{pointerEvents:\"none\",opacity:0.2}:{}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 p-0\"},/*#__PURE__*/React.createElement(\"h4\",null,t(\"Filters\"))),/*#__PURE__*/React.createElement(Navigation,{activeItemId:selectedMenu,onSelect:function onSelect(_ref6){var itemId=_ref6.itemId;return _this3.handleFilterChange(itemId);},items:[{title:t(\"Show Active\"),itemId:\"/active\"},{title:t(\"Show Inactive\"),itemId:\"/inactive\"},{title:t(\"By Emp Level\"),itemId:\"/emplvl\",subNav:levelList.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})},{title:t(\"With Security Account\"),itemId:\"/withSecurityAccount\"},{title:t(\"Without Security Account\"),itemId:\"/withoutSecurityAccount\"},{title:t(\"By Site List\"),itemId:\"/sitelist\",subNav:locationOption.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})},{title:t(\"By Operation\"),itemId:\"/operation\",subNav:jobOption.map(function(e){return _objectSpread(_objectSpread({},e),{},{title:t(e.title)});})},{title:t(\"Show All\"),itemId:\"/all\"}]})),/*#__PURE__*/React.createElement(\"div\",{className:\"staffList-container col-xl\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"h3\",null,t(\"List of Staffs\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-8\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Staff\",onChange:this.handleSearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-4 ml-1 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Staff\",onClick:function onClick(){return _this3.props.history.push(\"/admin/staffplus/add\");}}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta,sortData:originalStaffList,onSort:function onSort(staffList){return _this3.updateState({staffList:staffList});}},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))))):staffList.length>0?staffList.map(function(_ref7,index){var id=_ref7.id,emp_name=_ref7.emp_name,emp_phone1=_ref7.emp_phone1,emp_code=_ref7.emp_code,services=_ref7.services,site_code=_ref7.site_code,defaultsitecode=_ref7.defaultsitecode,status=_ref7.status;return/*#__PURE__*/React.createElement(\"tr\",{key:index,onClick:function onClick(){return _this3.props.history.push(\"/admin/staffPlus/\".concat(id,\"/staffDetails\"));}},/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative status-type\"},/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(status===\"available\"?\"available\":\"not-available\")})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-start justify-content-start\"},emp_name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-start justify-content-start\"},emp_phone1)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-start justify-content-start\"},emp_code)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-start justify-content-start\"},services?services[0]:\"\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-start justify-content-start\"},defaultsitecode)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-start justify-content-start\"},site_code)));}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:12,className:\"text-center\"},\"No data Found\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"palette\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail\"},t(\"Available today\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"color-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"color not-available\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail\"},t(\"Unavailable today\"))))))))));}}]);return ListStaffPlusClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{jobtitleList:state.common.jobtitleList,staffDetails:state.staffPlus.staffPlusDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getStaffPlus:getStaffPlus,deleteStaffPlus:deleteStaffPlus,getJobtitle:getJobtitle,getCommonApi:getCommonApi},dispatch);};export var ListStaffPlus=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ListStaffPlusClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/StaffPlus/ListStaffPlus/index.js"],"names":["React","NormalButton","InputSearch","TableWrapper","getJobtitle","getCommonApi","getStaffPlus","deleteStaffPlus","connect","bindActionCreators","_","Link","Navigation","withTranslation","ListStaffPlusClass","state","headerDetails","label","originalStaffList","staffList","filter","locationOption","levelList","jobOption","pageMeta","selectedMenu","active","currentIndex","isLoading","isMounted","search","updateState","data","setState","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","handleFilterChange","filterOption","splitted","split","console","log","length","queryHandler","e","node","contains","target","page","limit","props","staffDetails","dataList","meta","pagination","handlePagination","handleSearch","event","searchString","value","visible","debouncedFn","debounce","getDatafromStore","type","jobtitleList","push","title","level_desc","itemId","id","handleDeleteStaff","then","res","queryParams","URLSearchParams","window","location","get","itemsite_desc","level_name","t","pointerEvents","opacity","subNav","map","history","index","emp_name","emp_phone1","emp_code","services","site_code","defaultsitecode","status","Component","mapStateToProps","common","staffPlus","staffPlusDetail","mapDispatchToProps","dispatch","ListStaffPlus"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { NormalButton } from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport \"./style.scss\";\r\nimport { getJobtitle, getCommonApi } from \"redux/actions/common\";\r\nimport { getStaffPlus, deleteStaffPlus } from \"redux/actions/staffPlus\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport _ from \"lodash\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Navigation } from \"react-minimal-side-navigation\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class ListStaffPlusClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Status\" },\r\n      { label: \"Staff Name\" },\r\n      { label: \"Phone\" },\r\n      { label: \"Staff ID\" },\r\n      { label: \"Specialist\" },\r\n      { label: \"Home site\" },\r\n      { label: \"Current site\" },\r\n      // { label: \"\" },\r\n    ],\r\n    originalStaffList: [],\r\n    staffList: [],\r\n    filter: \"all\",\r\n    locationOption: [],\r\n    levelList: [],\r\n    jobOption: [],\r\n    pageMeta: {},\r\n    selectedMenu: \"/active\",\r\n    active: false,\r\n    currentIndex: -1,\r\n    isLoading: false,\r\n    isMounted: true,\r\n    search: \"\",\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.state.isMounted = false;\r\n  }\r\n\r\n  updateState = (data) => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount() {\r\n    const queryParams = new URLSearchParams(window.location.search);\r\n    const filter = queryParams.get(\"filter\");\r\n    if (filter) {\r\n      this.state.selectedMenu = \"/\" + filter;\r\n      this.handleFilterChange(this.state.selectedMenu);\r\n      this.updateState({});\r\n    } else this.queryHandler({});\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.props.getCommonApi(\"branchlist/\").then((res) => {\r\n      let { locationOption } = this.state;\r\n      for (let key of res.data) {\r\n        locationOption.push({\r\n          title: key.itemsite_desc,\r\n          itemId: \"/sitelist/\" + key.id,\r\n        });\r\n      }\r\n      this.updateState({ locationOption });\r\n    });\r\n\r\n    // level option api\r\n    this.props.getCommonApi(\"securities/\").then((res) => {\r\n      let { levelList } = this.state;\r\n      for (let key of res.data) {\r\n        levelList.push({ itemId: \"/emp_lvl/\" + key.id, title: key.level_name });\r\n      }\r\n      this.updateState({ levelList });\r\n    });\r\n\r\n    // jobtitle option api\r\n    this.props.getJobtitle().then(() => {\r\n      this.getDatafromStore(\"jobtitle\");\r\n    });\r\n  }\r\n\r\n  // popup open/close\r\n  handleClick = (key) => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.updateState((prevState) => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleFilterChange = (filterOption = \"\") => {\r\n    this.state.selectedMenu = filterOption;\r\n    var splitted = filterOption.split(\"/\");\r\n    var filter = this.state.filter;\r\n    console.log(filterOption);\r\n    if (splitted.length == 2) {\r\n      switch (splitted[1]) {\r\n        case \"all\":\r\n          filter = \"all\";\r\n          break;\r\n        case \"withSecurityAccount\":\r\n          filter = \"is_login=True\";\r\n          break;\r\n        case \"withoutSecurityAccount\":\r\n          filter = \"is_login=False\";\r\n          break;\r\n        case \"active\":\r\n          filter = \"emp_isactive=True\";\r\n          break;\r\n        case \"inactive\":\r\n          filter = \"emp_isactive=False\";\r\n          break;\r\n        default:\r\n          filter = \"\";\r\n      }\r\n    } else if (splitted.length == 3) {\r\n      switch (splitted[1]) {\r\n        case \"emp_lvl\":\r\n          filter = `LEVEL_ItmIDid=${splitted[2]}`;\r\n          break;\r\n        case \"sitelist\":\r\n          filter = `Site_Codeid=${splitted[2]}`;\r\n          break;\r\n        case \"operation\":\r\n          filter = `EMP_TYPEid=${splitted[2]}`;\r\n          break;\r\n        default:\r\n          filter = \"\";\r\n      }\r\n    }\r\n    if (this.state.filter != filter && filter !== \"\") {\r\n      this.state.filter = filter;\r\n      this.queryHandler({});\r\n    }\r\n  };\r\n\r\n  // while clicking popup close at outside click\r\n  handleOutsideClick = (e) => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  // api call for staff\r\n  queryHandler = async (data) => {\r\n    this.updateState({ isLoading: true });\r\n    let { search } = this.state;\r\n    let { page = 1, limit = 10 } = data;\r\n    await this.props.getStaffPlus(\r\n      `?page=${page}&limit=${limit}${\r\n        this.state.filter === \"all\"\r\n          ? \"&emp_isactive=True\"\r\n          : `&${this.state.filter}`\r\n      }&search=${search}`\r\n    );\r\n    let { staffDetails } = this.props;\r\n    let { staffList, pageMeta } = this.state;\r\n    staffList = staffDetails.dataList;\r\n    pageMeta = staffDetails.meta?.pagination;\r\n    this.updateState({\r\n      staffList,\r\n      originalStaffList: staffList,\r\n      pageMeta,\r\n      isLoading: false,\r\n    });\r\n  };\r\n\r\n  // pagination\r\n  handlePagination = async (page) => {\r\n    this.queryHandler(page);\r\n  };\r\n\r\n  // seach change with api call\r\n  handleSearch = async (event) => {\r\n    // event.persist();\r\n    let searchString = event.target.value;\r\n    await this.setState({ search: searchString, visible: true, page: 1 });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        this.queryHandler({});\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  getDatafromStore = async (type) => {\r\n    let { jobtitleList } = this.props;\r\n    let { jobOption } = this.state;\r\n    if (type === \"jobtitle\") {\r\n      for (let key of jobtitleList) {\r\n        jobOption.push({\r\n          title: key.level_desc,\r\n          itemId: \"/operation/\" + key.id,\r\n        });\r\n      }\r\n    }\r\n    await this.updateState({\r\n      jobOption,\r\n    });\r\n  };\r\n\r\n  // delete api call for staff\r\n  handleDeleteStaff = (id) => {\r\n    this.props.deleteStaffPlus(`${id}/`).then((res) => this.queryHandler({}));\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      pageMeta,\r\n      currentIndex,\r\n      locationOption,\r\n      levelList,\r\n      jobOption,\r\n      staffList,\r\n      originalStaffList,\r\n      isLoading,\r\n      selectedMenu,\r\n    } = this.state;\r\n    let { t } = this.props;\r\n\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row mb-4\">\r\n          <div className=\"col-md-4 col-lg-2 mb-2\">\r\n            <Link to=\"/admin/staffplus/schedule\">\r\n              <NormalButton\r\n                normal={true}\r\n                className=\"col-12 fs-15 float-right\"\r\n                label=\"Schedule\"\r\n              />\r\n            </Link>\r\n          </div>\r\n          <div className=\"col-md-4 col-lg-2 mb-2\">\r\n            <Link to=\"/admin/staffplus/authorization\">\r\n              <NormalButton\r\n                normal={true}\r\n                className=\"col-12 fs-15 float-right\"\r\n                label=\"Authorization\"\r\n              />\r\n            </Link>\r\n          </div>\r\n          <div className=\"col-md-4 col-lg-2 mb-2\">\r\n            <Link to=\"/admin/staffplus/skills\">\r\n              <NormalButton\r\n                normal={true}\r\n                className=\"col-12 fs-15 float-right\"\r\n                label=\"Skill Listing\"\r\n              />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div\r\n            className=\"col-sm-12 col-lg-3 mb-4\"\r\n            style={\r\n              this.state.isLoading\r\n                ? { pointerEvents: \"none\", opacity: 0.2 }\r\n                : {}\r\n            }\r\n          >\r\n            <div className=\"col-md-4 p-0\">\r\n              <h4>{t(\"Filters\")}</h4>\r\n            </div>\r\n            <Navigation\r\n              activeItemId={selectedMenu}\r\n              onSelect={({ itemId }) => this.handleFilterChange(itemId)}\r\n              items={[\r\n                {\r\n                  title: t(\"Show Active\"),\r\n                  itemId: \"/active\",\r\n                },\r\n                {\r\n                  title: t(\"Show Inactive\"),\r\n                  itemId: \"/inactive\",\r\n                },\r\n                {\r\n                  title: t(\"By Emp Level\"),\r\n                  itemId: \"/emplvl\",\r\n                  subNav: levelList.map((e) => {\r\n                    return { ...e, title: t(e.title) };\r\n                  }),\r\n                },\r\n                {\r\n                  title: t(\"With Security Account\"),\r\n                  itemId: \"/withSecurityAccount\",\r\n                },\r\n                {\r\n                  title: t(\"Without Security Account\"),\r\n                  itemId: \"/withoutSecurityAccount\",\r\n                },\r\n                {\r\n                  title: t(\"By Site List\"),\r\n                  itemId: \"/sitelist\",\r\n                  subNav: locationOption.map((e) => {\r\n                    return { ...e, title: t(e.title) };\r\n                  }),\r\n                },\r\n                {\r\n                  title: t(\"By Operation\"),\r\n                  itemId: \"/operation\",\r\n                  subNav: jobOption.map((e) => {\r\n                    return { ...e, title: t(e.title) };\r\n                  }),\r\n                },\r\n                {\r\n                  title: t(\"Show All\"),\r\n                  itemId: \"/all\",\r\n                },\r\n              ]}\r\n            />\r\n          </div>\r\n          <div className=\"staffList-container col-xl\">\r\n            <div className=\"row align-items-center\">\r\n              <div className=\"col-md-4\">\r\n                <h3>{t(\"List of Staffs\")}</h3>\r\n              </div>\r\n              <div className=\"col-md-8\">\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <div className=\"w-100 col-8\">\r\n                    <InputSearch\r\n                      className=\"\"\r\n                      placeholder=\"Search Staff\"\r\n                      onChange={this.handleSearch}\r\n                    />\r\n                  </div>\r\n                  <div className=\"w-100 col-4 ml-1 p-0\">\r\n                    <NormalButton\r\n                      mainbg={true}\r\n                      className=\"col-12 fs-15 float-right\"\r\n                      label=\"Add Staff\"\r\n                      onClick={() =>\r\n                        this.props.history.push(\"/admin/staffplus/add\")\r\n                      }\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"tab-table-content\">\r\n              <div className=\"py-4\">\r\n                <div className=\"table-container\">\r\n                  <TableWrapper\r\n                    headerDetails={headerDetails}\r\n                    queryHandler={this.handlePagination}\r\n                    pageMeta={pageMeta}\r\n                    sortData={originalStaffList}\r\n                    onSort={(staffList) => this.updateState({ staffList })}\r\n                  >\r\n                    {isLoading ? (\r\n                      <tr>\r\n                        <td colSpan=\"7\">\r\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\r\n                            <div class=\"spinner-border\" role=\"status\">\r\n                              <span class=\"sr-only\">Loading...</span>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ) : staffList.length > 0 ? (\r\n                      staffList.map(\r\n                        (\r\n                          {\r\n                            id,\r\n                            emp_name,\r\n                            emp_phone1,\r\n                            emp_code,\r\n                            services,\r\n                            site_code,\r\n                            defaultsitecode,\r\n                            status,\r\n                          },\r\n                          index\r\n                        ) => {\r\n                          return (\r\n                            <tr\r\n                              key={index}\r\n                              onClick={() =>\r\n                                this.props.history.push(\r\n                                  `/admin/staffPlus/${id}/staffDetails`\r\n                                )\r\n                              }\r\n                            >\r\n                              <td className=\"position-relative status-type\">\r\n                                <span\r\n                                  className={`${\r\n                                    status === \"available\"\r\n                                      ? \"available\"\r\n                                      : \"not-available\"\r\n                                  }`}\r\n                                ></span>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-start justify-content-start\">\r\n                                  {emp_name}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-start justify-content-start\">\r\n                                  {emp_phone1}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-start justify-content-start\">\r\n                                  {emp_code}\r\n                                </div>\r\n                              </td>\r\n                              {/* <td><div className=\"d-flex align-items-center justify-content-center\"></div></td> */}\r\n                              <td>\r\n                                <div className=\"d-flex align-items-start justify-content-start\">\r\n                                  {services ? services[0] : \"\"}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-start justify-content-start\">\r\n                                  {defaultsitecode}\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div className=\"d-flex align-items-start justify-content-start\">\r\n                                  {site_code}\r\n                                </div>\r\n                              </td>\r\n                              {/* <td\r\n                                className=\"position-relative\"\r\n                                ref={node => {\r\n                                  this.node = node;\r\n                                }}\r\n                                onClick={() => this.handleClick(index)}\r\n                              >\r\n                                {currentIndex === index ? (\r\n                                  <>\r\n                                    <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\r\n                                      <i className=\"icon-more\"></i>\r\n                                    </div>\r\n                                    <div className=\"option card\">\r\n                                      <div\r\n                                        className=\"d-flex align-items-center fs-14 pt-3\"\r\n                                        onClick={() =>\r\n                                          this.props.history.push(\r\n                                            `/admin/staffPlus/${id}/staffDetails`\r\n                                          )\r\n                                        }\r\n                                      >\r\n                                        <span className=\"icon-eye-grey px-3\"></span>\r\n                                        {t(\"View\")}\r\n                                      </div>\r\n                                      <div\r\n                                        className=\"d-flex align-items-center fs-14\"\r\n                                        onClick={() =>\r\n                                          this.props.history.push(\r\n                                            `/admin/staffPlus/${id}/editStaff`\r\n                                          )\r\n                                        }\r\n                                      >\r\n                                        <span className=\"icon-edit px-3\"></span>\r\n                                        {t(\"Edit\")}\r\n                                      </div>\r\n                                      <div\r\n                                        className=\"d-flex align-items-center fs-14 pb-3\"\r\n                                        onClick={() =>\r\n                                          this.handleDeleteStaff(id)\r\n                                        }\r\n                                      >\r\n                                        <span className=\"icon-delete px-3\"></span>\r\n                                        {t(\"Delete\")}\r\n                                      </div>\r\n                                    </div>\r\n                                  </>\r\n                                ) : (\r\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\r\n                                    <i className=\"icon-more text-grey\"></i>\r\n                                  </div>\r\n                                )}\r\n                              </td> */}\r\n                            </tr>\r\n                          );\r\n                        }\r\n                      )\r\n                    ) : (\r\n                      <tr>\r\n                        <td colSpan={12} className={`text-center`}>\r\n                          No data Found\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </TableWrapper>\r\n                  <div className=\"palette\">\r\n                    <div className=\"color-detail\">\r\n                      <div className=\"color\"></div>\r\n                      <div className=\"detail\">{t(\"Available today\")}</div>\r\n                    </div>\r\n                    <div className=\"color-detail\">\r\n                      <div className=\"color not-available\"></div>\r\n                      <div className=\"detail\">{t(\"Unavailable today\")}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  jobtitleList: state.common.jobtitleList,\r\n  staffDetails: state.staffPlus.staffPlusDetail,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return bindActionCreators(\r\n    {\r\n      getStaffPlus,\r\n      deleteStaffPlus,\r\n      getJobtitle,\r\n      getCommonApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ListStaffPlus = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ListStaffPlusClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}