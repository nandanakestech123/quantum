{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NormalButton,NormalSelect,NormalModal,NormalInput}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import Brush from\"assets/images/make-up-brush.png\";import filter from\"assets/images/filter.png\";import CartImg from\"assets/images/shopping-cart.png\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,commonCreateApi,updateForm}from\"redux/actions/common\";import closeIcon from\"assets/images/close.png\";import{dateFormat}from\"service/helperFunctions\";import _ from\"lodash\";import{history}from\"helpers\";import{withTranslation}from\"react-i18next\";export var ItemDetailClass=/*#__PURE__*/function(_Component){_inherits(ItemDetailClass,_Component);var _super=_createSuper(ItemDetailClass);function ItemDetailClass(){var _this;_classCallCheck(this,ItemDetailClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={servicesDetail:{},isOpenModal:false,branchList:[],customerDetail:{branchId:\"\",cust_noid:\"\"},customerList:[]};_this.componentDidMount=function(){console.log(_this.props,\"jhksdfkjsdhfks\");_this.getDetail();var _this$state=_this.state,productCard=_this$state.productCard,branchList=_this$state.branchList;_this.props.getCommonApi(\"treatment/Outlet/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;branchList.push({value:value.id,label:value.itemsite_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({branchList:branchList});// console.log(brachList, \"jhksdfkjsdhfks\")\n}});};_this.getDetail=function(){var _this$state2=_this.state,productCard=_this$state2.productCard,branchList=_this$state2.branchList;var _this$props=_this.props,menuId=_this$props.menuId,id=_this$props.id,api=_this$props.api;_this.props.getCommonApi(\"\".concat(api,\"/\").concat(id,\"/\")).then(function(key){var status=key.status,data=key.data;if(status===200){_this.setState({servicesDetail:data});}});};_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,_this$state3,customerDetail,customerList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;_this$state3=_this.state,customerDetail=_this$state3.customerDetail,customerList=_this$state3.customerList;console.log(\"uihwkjrwkej\",name,value);customerDetail[name]=value;_context.next=6;return _this.setState({customerDetail:customerDetail});case 6:if(name===\"branchId\"){_this.props.getCommonApi(\"custappt/?Outlet=\".concat(value)).then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _value=_step2.value;customerList.push({value:_value.id,label:_value.cust_name+\" | \"+_value.cust_phone1+\" | \"+_value.cust_code});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_this.setState({customerList:customerList});}});}// this.props.updateForm('selected_customer', customerDetail)\ncase 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleCreateCart=function(){var _this$state4=_this.state,productCard=_this$state4.productCard,customerDetail=_this$state4.customerDetail,servicesDetail=_this$state4.servicesDetail;var selected_cstomer=_this.props.selected_cstomer;console.log(servicesDetail,customerDetail,selected_cstomer,\"sfdgsdfhshgf\");var payload={cust_noid:selected_cstomer.cust_noid,cart_date:dateFormat(new Date(),\"yyyy-mm-dd\"),// lineno : 1,\nitemcodeid:selected_cstomer.branchId,quantity:customerDetail.quantity,price:servicesDetail.item_price};_this.props.getCommonApi(\"itemcart/Check/?sitecodeid=\".concat(selected_cstomer.branchId,\"&cart_date=\").concat(dateFormat(new Date(),\"yyyy-mm-dd\"),\"&cust_noid=\").concat(selected_cstomer.cust_noid)).then(function(key){var status=key.status,data=key.data,error=key.error;// if (status === 200) {\nconsole.log(\"asdfasdfasaff\",data,payload);if(data.length>0){console.log(\"asdfasdfasaff == if\",data,payload);_this.props.commonCreateApi(\"itemcart/?sitecodeid=\".concat(selected_cstomer.branchId,\"&cart_id=\").concat(data[0].cart_id),payload).then(function(key){var status=key.status,data=key.data;if(status===201){_this.setState({isOpenModal:false});}});}else{console.log(\"asdfasdfasaff == else\",data,payload);_this.props.commonCreateApi(\"itemcart/?sitecodeid=\".concat(selected_cstomer.branchId),payload).then(function(key){var status=key.status,data=key.data;if(status===201){_this.setState({isOpenModal:false});history.push(\"/admin/catalog\");}});}// }\n});};_this.handleSearch=function(event){event.persist();if(!_this.debouncedFn){_this.debouncedFn=_.debounce(function(){var searchString=event.target.value;var data={search:searchString};// this.queryHandler(data)\nvar _this$state5=_this.state,customerList=_this$state5.customerList,customerDetail=_this$state5.customerDetail;_this.props.getCommonApi(\"custappt/?Outlet=\".concat(customerDetail.branchId,\"&search=\").concat(searchString)).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     customerList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({customerList:data});}});},500);}_this.debouncedFn();};_this.handleCloseDialog=function(){_this.setState({isOpenModal:false});};_this.handleSelectCustomer=function(data){var _this$state6=_this.state,customerList=_this$state6.customerList,customerDetail=_this$state6.customerDetail,servicesDetail=_this$state6.servicesDetail;customerDetail[\"cust_noid\"]=data.id;customerDetail[\"cust_name\"]=data.cust_name;_this.setState({customerDetail:customerDetail});// this.props.updateForm('selected_customer', customerDetail)\n};_this.handleAddCart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data,price){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.props.updateForm(\"selectedCart\",data);case 2:// setTimeout(() => {\n// history.push(\"/admin/cart\");\n_this.props.handleAddCart(data,price);// }, 5000);\ncase 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();return _this;}_createClass(ItemDetailClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state7=this.state,servicesDetail=_this$state7.servicesDetail,isOpenModal=_this$state7.isOpenModal,branchList=_this$state7.branchList,customerList=_this$state7.customerList,customerDetail=_this$state7.customerDetail;var _this$props2=this.props,selected_cstomer=_this$props2.selected_cstomer,t=_this$props2.t;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"product-detail p-5\"},servicesDetail?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"detail-view text-center\"},/*#__PURE__*/React.createElement(\"img\",{width:\"230\",src:servicesDetail.Stock_PIC,alt:\"\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product-left\"},/*#__PURE__*/React.createElement(\"p\",{className:\"product-name fs-18\"},servicesDetail.item_desc),/*#__PURE__*/React.createElement(\"p\",{className:\"fs-14 my-2\"},servicesDetail.item_name),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"list-price fs-14\"},t(\"Price\"),\":\",/*#__PURE__*/React.createElement(\"span\",{className:\"fs-16\"},\" \",\"$ \",servicesDetail.item_price))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 mt-5\",label:\"Add to Cart\",onClick:function onClick(){return _this2.handleAddCart(servicesDetail,servicesDetail.item_price);}})))):\"\"));}}]);return ItemDetailClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{// customerDetail: state.appointment.customerDetail,\nselected_cstomer:state.common.selected_cstomer};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({// getCustomer,\ngetCommonApi:getCommonApi,commonCreateApi:commonCreateApi,updateForm:updateForm},dispatch);};export var ItemDetail=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(ItemDetailClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Catalog/services/itemsDetail.js"],"names":["React","Component","NormalButton","NormalSelect","NormalModal","NormalInput","InputSearch","TableWrapper","Brush","filter","CartImg","connect","bindActionCreators","getCommonApi","commonCreateApi","updateForm","closeIcon","dateFormat","_","history","withTranslation","ItemDetailClass","state","servicesDetail","isOpenModal","branchList","customerDetail","branchId","cust_noid","customerList","componentDidMount","console","log","props","getDetail","productCard","then","key","status","data","value","push","id","label","itemsite_desc","setState","menuId","api","handleChange","target","name","cust_name","cust_phone1","cust_code","handleCreateCart","selected_cstomer","payload","cart_date","Date","itemcodeid","quantity","price","item_price","error","length","cart_id","handleSearch","event","persist","debouncedFn","debounce","searchString","search","handleCloseDialog","handleSelectCustomer","handleAddCart","t","Stock_PIC","item_desc","item_name","mapStateToProps","common","mapDispatchToProps","dispatch","ItemDetail"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  NormalButton,\r\n  NormalSelect,\r\n  NormalModal,\r\n  NormalInput,\r\n} from \"component/common\";\r\nimport { InputSearch, TableWrapper } from \"component/common\";\r\nimport Brush from \"assets/images/make-up-brush.png\";\r\nimport filter from \"assets/images/filter.png\";\r\nimport CartImg from \"assets/images/shopping-cart.png\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  updateForm,\r\n} from \"redux/actions/common\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class ItemDetailClass extends Component {\r\n  state = {\r\n    servicesDetail: {},\r\n    isOpenModal: false,\r\n    branchList: [],\r\n    customerDetail: {\r\n      branchId: \"\",\r\n      cust_noid: \"\",\r\n    },\r\n    customerList: [],\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    console.log(this.props, \"jhksdfkjsdhfks\");\r\n    this.getDetail();\r\n    let { productCard, branchList } = this.state;\r\n\r\n    this.props.getCommonApi(`treatment/Outlet/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        for (let value of data) {\r\n          branchList.push({ value: value.id, label: value.itemsite_desc });\r\n        }\r\n        this.setState({ branchList });\r\n        // console.log(brachList, \"jhksdfkjsdhfks\")\r\n      }\r\n    });\r\n  };\r\n\r\n  getDetail = () => {\r\n    let { productCard, branchList } = this.state;\r\n    let { menuId, id, api } = this.props;\r\n    this.props.getCommonApi(`${api}/${id}/`).then(key => {\r\n      let { status, data } = key;\r\n      if (status === 200) {\r\n        this.setState({ servicesDetail: data });\r\n      }\r\n    });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { customerDetail, customerList } = this.state;\r\n    console.log(\"uihwkjrwkej\", name, value);\r\n    customerDetail[name] = value;\r\n    await this.setState({\r\n      customerDetail,\r\n    });\r\n    if (name === \"branchId\") {\r\n      this.props.getCommonApi(`custappt/?Outlet=${value}`).then(key => {\r\n        let { status, data } = key;\r\n        if (status === 200) {\r\n          for (let value of data) {\r\n            customerList.push({\r\n              value: value.id,\r\n              label:\r\n                value.cust_name +\r\n                \" | \" +\r\n                value.cust_phone1 +\r\n                \" | \" +\r\n                value.cust_code,\r\n            });\r\n          }\r\n          this.setState({ customerList });\r\n        }\r\n      });\r\n    }\r\n    // this.props.updateForm('selected_customer', customerDetail)\r\n  };\r\n\r\n  handleCreateCart = () => {\r\n    let { productCard, customerDetail, servicesDetail } = this.state;\r\n    let { selected_cstomer } = this.props;\r\n    console.log(\r\n      servicesDetail,\r\n      customerDetail,\r\n      selected_cstomer,\r\n      \"sfdgsdfhshgf\"\r\n    );\r\n    let payload = {\r\n      cust_noid: selected_cstomer.cust_noid,\r\n      cart_date: dateFormat(new Date(), \"yyyy-mm-dd\"),\r\n      // lineno : 1,\r\n      itemcodeid: selected_cstomer.branchId,\r\n      quantity: customerDetail.quantity,\r\n      price: servicesDetail.item_price,\r\n    };\r\n    this.props\r\n      .getCommonApi(\r\n        `itemcart/Check/?sitecodeid=${\r\n          selected_cstomer.branchId\r\n        }&cart_date=${dateFormat(new Date(), \"yyyy-mm-dd\")}&cust_noid=${\r\n          selected_cstomer.cust_noid\r\n        }`\r\n      )\r\n      .then(key => {\r\n        let { status, data, error } = key;\r\n        // if (status === 200) {\r\n        console.log(\"asdfasdfasaff\", data, payload);\r\n        if (data.length > 0) {\r\n          console.log(\"asdfasdfasaff == if\", data, payload);\r\n          this.props\r\n            .commonCreateApi(\r\n              `itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_id=${data[0].cart_id}`,\r\n              payload\r\n            )\r\n            .then(key => {\r\n              let { status, data } = key;\r\n              if (status === 201) {\r\n                this.setState({ isOpenModal: false });\r\n              }\r\n            });\r\n        } else {\r\n          console.log(\"asdfasdfasaff == else\", data, payload);\r\n          this.props\r\n            .commonCreateApi(\r\n              `itemcart/?sitecodeid=${selected_cstomer.branchId}`,\r\n              payload\r\n            )\r\n            .then(key => {\r\n              let { status, data } = key;\r\n              if (status === 201) {\r\n                this.setState({ isOpenModal: false });\r\n                history.push(\"/admin/catalog\");\r\n              }\r\n            });\r\n        }\r\n\r\n        // }\r\n      });\r\n  };\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        let data = { search: searchString };\r\n        // this.queryHandler(data)\r\n        let { customerList, customerDetail } = this.state;\r\n        this.props\r\n          .getCommonApi(\r\n            `custappt/?Outlet=${customerDetail.branchId}&search=${searchString}`\r\n          )\r\n          .then(key => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n              // for (let value of data) {\r\n              //     customerList.push({ value: value.id, label: value.emp_name })\r\n              // }\r\n              this.setState({ customerList: data });\r\n            }\r\n          });\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleCloseDialog = () => {\r\n    this.setState({\r\n      isOpenModal: false,\r\n    });\r\n  };\r\n\r\n  handleSelectCustomer = data => {\r\n    let { customerList, customerDetail, servicesDetail } = this.state;\r\n    customerDetail[\"cust_noid\"] = data.id;\r\n    customerDetail[\"cust_name\"] = data.cust_name;\r\n    this.setState({ customerDetail });\r\n    // this.props.updateForm('selected_customer', customerDetail)\r\n  };\r\n\r\n  handleAddCart = async (data, price) => {\r\n    await this.props.updateForm(\"selectedCart\", data);\r\n    // setTimeout(() => {\r\n    // history.push(\"/admin/cart\");\r\n    this.props.handleAddCart(data, price);\r\n    // }, 5000);\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      servicesDetail,\r\n      isOpenModal,\r\n      branchList,\r\n      customerList,\r\n      customerDetail,\r\n    } = this.state;\r\n    let { selected_cstomer,t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"product-detail p-5\">\r\n          {servicesDetail ? (\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">\r\n                <div className=\"detail-view text-center\">\r\n                  <img width=\"230\" src={servicesDetail.Stock_PIC} alt=\"\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-5\">\r\n                <div className=\"product-left\">\r\n                  <p className=\"product-name fs-18\">\r\n                    {servicesDetail.item_desc}\r\n                  </p>\r\n                  <p className=\"fs-14 my-2\">{servicesDetail.item_name}</p>\r\n\r\n                  <div>\r\n                    <p className=\"list-price fs-14\">\r\n                      {t(\"Price\")}:\r\n                      <span className=\"fs-16\">\r\n                        {\" \"}\r\n                        $ {servicesDetail.item_price}\r\n                      </span>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-12\">\r\n                <div>\r\n                  <NormalButton\r\n                    mainbg={true}\r\n                    className=\"col-12 fs-15 mt-5\"\r\n                    label=\"Add to Cart\"\r\n                    onClick={() =>\r\n                      this.handleAddCart(\r\n                        servicesDetail,\r\n                        servicesDetail.item_price\r\n                      )\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // customerDetail: state.appointment.customerDetail,\r\n  selected_cstomer: state.common.selected_cstomer,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      updateForm,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const ItemDetail =  withTranslation()(connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ItemDetailClass));\r\n"]},"metadata":{},"sourceType":"module"}