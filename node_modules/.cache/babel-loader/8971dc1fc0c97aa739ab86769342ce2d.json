{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NewSchedulerModal}from\"component/common/Plugins/NewScheduler\";// import BigSchedulerModal from 'component/common/Plugins/BigScheduler';\nimport{getCustomer,getCommonApi,commonDeleteApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";// import timeOption from 'data/timeOption.json'\nimport{dateFormat}from\"service/helperFunctions\";import{history}from\"helpers\";import\"./style.scss\";import SimpleReactValidator from\"simple-react-validator\";import{CreateAppointment,updateForm}from\"redux/actions/appointment\";import{NewCreateAppointment}from\"../../NewCreateAppointment/index\";import{LoadPanel}from\"devextreme-react/load-panel\";import moment from\"moment\";import{BrowserView,MobileView,isBrowser,isMobile}from\"react-device-detect\";export var SchedulerClass=/*#__PURE__*/function(_Component){_inherits(SchedulerClass,_Component);var _super=_createSuper(SchedulerClass);function SchedulerClass(){var _this;_classCallCheck(this,SchedulerClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={appointment:[{time:\"10.00 AM,\",date:\"Wednesday, 1st April, 2020\",name:\"Benjamin\",treatment:\"Head Massage\"},{time:\"12.00 PM,\",date:\"Wednesday, 1st April, 2020\",name:\"Daniel\",treatment:\"Pedicure\"},{time:\"1.00 PM,\",date:\"Wednesday, 1st April, 2020\",name:\"John\",treatment:\"Haircut\"},{time:\"2.00 PM,\",date:\"Wednesday, 1st April, 2020\",name:\"Josua\",treatment:\"Manicure\"},{time:\"4.00 PM, \",date:\"Wednesday, 1st April, 2020\",name:\"Derrik\",treatment:\"Body Massage\"}],events:[],brachList:[],formField:{branchId:\"\",time:\"\",staff_id:\"\"},list:[],filterDate:new Date(),filterType:\"day\",selectedId:\"\",staffList:[],page:1,meta:[],searchtext:\"\",staffSortlist:[],isOpenModal:false,loadPanelVisible:false,showIndicator:true,shading:true,showPane:true,groupByType:\"staff\",SchedulerSetting:{settingId:0,startday_hour:\"\",endday_hour:\"\",cell_duration:\"\",resource_count:\"\"},settingData:{}};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});};_this.componentDidMount=function(){_this.getSettingInfo();_this.handleItemSettings();};_this.handleItemSettings=function(){var settingData=_this.state.settingData;_this.props.getCommonApi(\"userlist/\").then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var status,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=key.status,data=key.data;console.log(key,\"settingsData AppointmentCreate\");if(!(status===200)){_context.next=6;break;}settingData=data;_context.next=6;return _this.setState({settingData:settingData});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.getSettingInfo=function(){var SchedulerSetting=_this.state.SchedulerSetting;_this.props.getCommonApi(\"siteappointsetting/\").then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(key){var status,data,_this$state,filterDate,filterType;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:status=key.status,data=key.data;console.log(key,\"siteappointsetting\");if(!(status==\"200\")){_context2.next=16;break;}if(!data){_context2.next=16;break;}SchedulerSetting[\"settingId\"]=data[0].id;SchedulerSetting[\"startday_hour\"]=data[0].startday_hour?Number(data[0].startday_hour):8;SchedulerSetting[\"endday_hour\"]=data[0].endday_hour?Number(data[0].endday_hour):21;SchedulerSetting[\"cell_duration\"]=data[0].cell_duration?Number(data[0].cell_duration):15;if(isMobile){SchedulerSetting[\"resource_count\"]=1;}else{SchedulerSetting[\"resource_count\"]=data[0].resource_count?Number(data[0].resource_count):5;}console.log(SchedulerSetting,\"siteappointsettingafterrender\");_context2.next=12;return _this.setState({SchedulerSetting:SchedulerSetting});case 12:_context2.next=14;return _this.props.updateForm(\"SchedulerSetting\",SchedulerSetting);case 14:_this$state=_this.state,filterDate=_this$state.filterDate,filterType=_this$state.filterType;// this.props\n//   .getCommonApi(\n//     `customeroutstanding/?date=${dateFormat(\n//       filterDate\n//     )}&check=${filterType}`\n//   )\n//   .then(key => {});\n_this.getAppointmentWithStaff();case 16:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());};_this.getHoursFromDate=function(date){var hour=date.getHours();var minute=date.getMinutes();var hours=hour>9?hour:\"0\"+hour;var minutes;if(minute<15){minutes=\"00\";}else if(minute>=15&&minute<30){minutes=\"15\";}else if(minute>=30&&minute<45){minutes=\"30\";}else if(minute>=45&&minute<59){minutes=\"45\";}return hours+\":\"+minutes;};_this.handleEmptyEvent=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(date,e){var customerDetail,formField,time;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:customerDetail=_this.props.customerDetail;formField=_this.state.formField;time=new Date(date);formField[\"time\"]=_this.getHoursFromDate(time);formField[\"date\"]=date;formField[\"appt_id\"]=0;if(e.groups){formField[\"staff_id\"]=e.groups.id;}if(e.appt_id){formField[\"appt_id\"]=e.appt_id;}_context3.next=10;return _this.setState({formField:formField});case 10:console.log(date,e,\"hgjsydfisuyfsdfm ==== handleEmptyEvent\",time.getHours);_context3.next=13;return _this.props.updateForm(\"basicApptDetail\",formField);case 13:_context3.next=15;return _this.setState({isOpenModal:true});case 15:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();_this.handleCloseDialog=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.props.updateForm(\"treatmentList\",[]);case 2:_context4.next=4;return _this.props.updateForm(\"basicApptDetail\",{});case 4:_context4.next=6;return _this.props.updateForm(\"appointmentCustomerDetail\",{});case 6:_context4.next=8;return _this.setState({isOpenModal:false});case 8:case\"end\":return _context4.stop();}}},_callee4);}));_this.handleChangeFilter=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(prevMode,prevDate,newMode,newDate,search){var _this$state2,filterDate,filterType,searchtext;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this$state2=_this.state,filterDate=_this$state2.filterDate,filterType=_this$state2.filterType,searchtext=_this$state2.searchtext;filterDate=newDate;filterType=newMode;searchtext=search;_context5.next=6;return _this.setState({filterDate:filterDate,filterType:filterType,searchtext:searchtext});case 6://if (newMode === \"day\" || newMode === \"week\") {\n// this.props\n//   .getCommonApi(\n//     `customeroutstanding/?date=${dateFormat(newDate)}&check=${newMode}`\n//   )\n//   .then(key => {});\n//}\nconsole.log(\"dfhgfhjhjghjdfhg\",prevMode,prevDate,newMode,newDate);if(prevMode!==newMode||prevDate!==newDate){_this.getAppointmentWithStaff();}case 8:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5,_x6,_x7,_x8,_x9){return _ref5.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref6){var _ref6$target,value,name,formField;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref6$target=_ref6.target,value=_ref6$target.value,name=_ref6$target.name;formField=_this.state.formField;formField[name]=value;_context6.next=5;return _this.setState({formField:formField});case 5:if(name===\"branchId\"){_this.getAppointmentWithStaff();}_this.props.updateForm(\"basicApptDetail\",formField);case 7:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x10){return _ref7.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id,event){var selectedId;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:selectedId=_this.state.selectedId;console.log(id,\"===afasfasdfdfasd=====\",selectedId);if(!(id!==selectedId)){_context7.next=7;break;}_context7.next=5;return _this.setState({selectedId:id});case 5:_context7.next=7;return _this.props.commonDeleteApi(\"appointment/\".concat(id,\"/\")).then(function(res){});case 7:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x11,_x12){return _ref8.apply(this,arguments);};}();_this.handleOpenStaff=function(one,two,three){console.log(\"namdfsfgsghsfghf\",one,two,three);var filterDate=_this.state.filterDate;_this.props.handleOpen(filterDate);};_this.getAppointmentWithStaff=function(){_this.setState({loadPanelVisible:true},function(){var _this$state3=_this.state,filterDate=_this$state3.filterDate,filterType=_this$state3.filterType,page=_this$state3.page,searchtext=_this$state3.searchtext,staffList=_this$state3.staffList,events=_this$state3.events,meta=_this$state3.meta,groupByType=_this$state3.groupByType;_this.props.getCommonApi(\"empappointmentview/?date=\".concat(dateFormat(filterDate),\"&check=\").concat(filterType,\"&page=\").concat(page,\"&limit=\").concat(Number(_this.props.SchedulerSetting.resource_count),\"&search=\").concat(searchtext,\"&type=\").concat(groupByType)).then(/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(key){var status,data,event;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(\"starttime: \",moment(new Date(),\"DD/MM/YYYY HH:mm:ss\"));status=key.status,data=key.data,event=key.event;setTimeout(_this.hideLoadPanel);if(!(status===200)){_context8.next=14;break;}if(!data){_context8.next=14;break;}staffList=[];if(data.dataList.length>0){staffList=data.dataList;}events=[];meta=[];//this.setState({ events, meta });\nmeta=data.meta;//events = event;\nif(event.length>0){events=event;// event.forEach(cell => {\n//   let filterList = events.find(\n//     Appoint =>\n//       Appoint.linkcode === cell.linkcode &&\n//       Appoint.id === cell.id &&\n//       Appoint.cust_id === cell.cust_id &&\n//       (Appoint.endDate === cell.startDate ||\n//         Appoint.startDate === cell.endDate)\n//   );\n//   if (filterList) {\n//     if (filterList.startDate < cell.startDate) {\n//       filterList[\"startDate\"] = filterList.startDate;\n//     } else {\n//       filterList[\"startDate\"] = cell.startDate;\n//     }\n//     if (filterList.endDate > cell.endDate) {\n//       filterList[\"endDate\"] = filterList.endDate;\n//     } else {\n//       filterList[\"endDate\"] = cell.endDate;\n//     }\n//     filterList[\"appt_remark\"] =\n//       filterList.appt_remark + \" \" + \"/\" + \" \" + cell.appt_remark;\n//     filterList[\"Merged\"] = true;\n//     this.setState({ ...this.state.events, filterList });\n//   } else {\n//     events.push(cell);\n//     this.setState({ ...events, events });\n//   }\n// });\n}_context8.next=13;return _this.setState({events:events,meta:meta,staffList:staffList});case 13:console.log(\"endtime: \",moment(new Date(),\"DD/MM/YYYY HH:mm:ss\"));// await this.setState({ events, staffList, meta });\n//console.log(event, \"appointment cell data\");\ncase 14:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x13){return _ref9.apply(this,arguments);};}());});};_this.handleNext=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var page;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:page=_this.state.page;page=page+1;_context9.next=4;return _this.setState({page:page});case 4:if(page>0){_this.getAppointmentWithStaff();}case 5:case\"end\":return _context9.stop();}}},_callee9);}));_this.handleBack=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var page;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:page=_this.state.page;page=page-1;_context10.next=4;return _this.setState({page:page});case 4:if(page>0){_this.getAppointmentWithStaff();}case 5:case\"end\":return _context10.stop();}}},_callee10);}));_this.hideLoadPanel=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var loadPanelVisible;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:loadPanelVisible=Object.assign({},_this.state.loadPanelVisible);loadPanelVisible=false;_context11.next=4;return _this.setState({loadPanelVisible:loadPanelVisible});case 4:case\"end\":return _context11.stop();}}},_callee11);}));_this.groupByAppointment=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(groupBy){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return _this.setState({groupByType:groupBy});case 2:_this.getAppointmentWithStaff();case 3:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x14){return _ref13.apply(this,arguments);};}();_this.timeToMins=function(time){var b=time.split(\":\");return b[0]*60+ +b[1];};return _this;}_createClass(SchedulerClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state4=this.state,appointment=_this$state4.appointment,brachList=_this$state4.brachList,branchId=_this$state4.branchId,formField=_this$state4.formField,list=_this$state4.list,events=_this$state4.events,filterType=_this$state4.filterType,filterDate=_this$state4.filterDate,staffList=_this$state4.staffList,meta=_this$state4.meta,searchtext=_this$state4.searchtext,staffSortlist=_this$state4.staffSortlist,isLoading=_this$state4.isLoading,isOpenModal=_this$state4.isOpenModal,SchedulerSetting=_this$state4.SchedulerSetting;return/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 m-0\",id:\"appointment\"},/*#__PURE__*/React.createElement(LoadPanel,{shadingColor:\"rgba(0,0,0,0.4)\",position:\"center\",onHiding:this.hideLoadPanel,visible:this.state.loadPanelVisible,showIndicator:this.state.showIndicator,shading:this.state.shading,showPane:this.state.showPane}),/*#__PURE__*/React.createElement(NewSchedulerModal,{staffList:this.state.staffList,meta:this.state.meta,event:this.state.events,onEmptyClick:function onEmptyClick(date,e){return _this2.handleEmptyEvent(date,e);},handleChangeFilter:this.handleChangeFilter,filterType:filterType,filterDate:filterDate,searchtext:searchtext,onDeleteEvent:this.handleDelete,handleBack:this.handleBack,handleNext:this.handleNext,staffSortlist:this.state.staffSortlist,getAppointmentWithStaff:this.getAppointmentWithStaff,groupByAppointment:function groupByAppointment(groupBy){return _this2.groupByAppointment(groupBy);},handleAppointmentSetting:this.getSettingInfo,settingData:this.state.settingData}),/*#__PURE__*/React.createElement(NewCreateAppointment,{isOpenModal:isOpenModal,handleCloseDialog:this.handleCloseDialog,handleSaveorUpdate:this.getAppointmentWithStaff}));}}]);return SchedulerClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,customerList:state.common.customerList,multipleCustomerForm:state.appointment.multipleCustomerForm,SchedulerSetting:state.appointment.SchedulerSetting};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomer:getCustomer,getCommonApi:getCommonApi,updateForm:updateForm,commonDeleteApi:commonDeleteApi},dispatch);};export var Scheduler=connect(mapStateToProps,mapDispatchToProps)(SchedulerClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/NewAppointment/NewListAppointment/Scheduler/index.js"],"names":["React","Component","NewSchedulerModal","getCustomer","getCommonApi","commonDeleteApi","connect","bindActionCreators","dateFormat","history","SimpleReactValidator","CreateAppointment","updateForm","NewCreateAppointment","LoadPanel","moment","BrowserView","MobileView","isBrowser","isMobile","SchedulerClass","state","appointment","time","date","name","treatment","events","brachList","formField","branchId","staff_id","list","filterDate","Date","filterType","selectedId","staffList","page","meta","searchtext","staffSortlist","isOpenModal","loadPanelVisible","showIndicator","shading","showPane","groupByType","SchedulerSetting","settingId","startday_hour","endday_hour","cell_duration","resource_count","settingData","componentWillMount","validator","element","message","autoForceUpdate","componentDidMount","getSettingInfo","handleItemSettings","props","then","key","status","data","console","log","setState","id","Number","getAppointmentWithStaff","getHoursFromDate","hour","getHours","minute","getMinutes","hours","minutes","handleEmptyEvent","e","customerDetail","groups","appt_id","handleCloseDialog","handleChangeFilter","prevMode","prevDate","newMode","newDate","search","handleChange","target","value","handleDelete","event","res","handleOpenStaff","one","two","three","handleOpen","setTimeout","hideLoadPanel","dataList","length","handleNext","handleBack","Object","assign","groupByAppointment","groupBy","timeToMins","b","split","isLoading","mapStateToProps","customerList","common","multipleCustomerForm","mapDispatchToProps","dispatch","Scheduler"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NewSchedulerModal } from \"component/common/Plugins/NewScheduler\";\r\n// import BigSchedulerModal from 'component/common/Plugins/BigScheduler';\r\n\r\nimport {\r\n  getCustomer,\r\n  getCommonApi,\r\n  commonDeleteApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\n// import timeOption from 'data/timeOption.json'\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { history } from \"helpers\";\r\nimport \"./style.scss\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { CreateAppointment, updateForm } from \"redux/actions/appointment\";\r\nimport { NewCreateAppointment } from \"../../NewCreateAppointment/index\";\r\nimport { LoadPanel } from \"devextreme-react/load-panel\";\r\nimport moment from \"moment\";\r\nimport {\r\n  BrowserView,\r\n  MobileView,\r\n  isBrowser,\r\n  isMobile,\r\n} from \"react-device-detect\";\r\n\r\nexport class SchedulerClass extends Component {\r\n  state = {\r\n    appointment: [\r\n      {\r\n        time: \"10.00 AM,\",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"Benjamin\",\r\n        treatment: \"Head Massage\",\r\n      },\r\n      {\r\n        time: \"12.00 PM,\",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"Daniel\",\r\n        treatment: \"Pedicure\",\r\n      },\r\n      {\r\n        time: \"1.00 PM,\",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"John\",\r\n        treatment: \"Haircut\",\r\n      },\r\n      {\r\n        time: \"2.00 PM,\",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"Josua\",\r\n        treatment: \"Manicure\",\r\n      },\r\n      {\r\n        time: \"4.00 PM, \",\r\n        date: \"Wednesday, 1st April, 2020\",\r\n        name: \"Derrik\",\r\n        treatment: \"Body Massage\",\r\n      },\r\n    ],\r\n    events: [],\r\n    brachList: [],\r\n    formField: {\r\n      branchId: \"\",\r\n      time: \"\",\r\n      staff_id: \"\",\r\n    },\r\n    list: [],\r\n    filterDate: new Date(),\r\n    filterType: \"day\",\r\n    selectedId: \"\",\r\n    staffList: [],\r\n    page: 1,\r\n    meta: [],\r\n    searchtext: \"\",\r\n    staffSortlist: [],\r\n    isOpenModal: false,\r\n    loadPanelVisible: false,\r\n    showIndicator: true,\r\n    shading: true,\r\n    showPane: true,\r\n    groupByType: \"staff\",\r\n    SchedulerSetting: {\r\n      settingId: 0,\r\n      startday_hour: \"\",\r\n      endday_hour: \"\",\r\n      cell_duration: \"\",\r\n      resource_count: \"\",\r\n    },\r\n    settingData: {},\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n  componentDidMount = () => {\r\n    this.getSettingInfo();\r\n    this.handleItemSettings();\r\n  };\r\n\r\n  handleItemSettings = () => {\r\n    let { settingData } = this.state;\r\n    this.props.getCommonApi(`userlist/`).then(async key => {\r\n      let { status, data } = key;\r\n      console.log(key, \"settingsData AppointmentCreate\");\r\n      if (status === 200) {\r\n        settingData = data;\r\n        await this.setState({\r\n          settingData,\r\n        });\r\n      }\r\n    });\r\n  };\r\n  getSettingInfo = () => {\r\n    let { SchedulerSetting } = this.state;\r\n    this.props.getCommonApi(`siteappointsetting/`).then(async key => {\r\n      let { status, data } = key;\r\n      console.log(key, \"siteappointsetting\");\r\n      if (status == \"200\") {\r\n        if (data) {\r\n          SchedulerSetting[\"settingId\"] = data[0].id;\r\n          SchedulerSetting[\"startday_hour\"] = data[0].startday_hour\r\n            ? Number(data[0].startday_hour)\r\n            : 8;\r\n          SchedulerSetting[\"endday_hour\"] = data[0].endday_hour\r\n            ? Number(data[0].endday_hour)\r\n            : 21;\r\n          SchedulerSetting[\"cell_duration\"] = data[0].cell_duration\r\n            ? Number(data[0].cell_duration)\r\n            : 15;\r\n          if (isMobile) {\r\n            SchedulerSetting[\"resource_count\"] = 1;\r\n          } else {\r\n            SchedulerSetting[\"resource_count\"] = data[0].resource_count\r\n              ? Number(data[0].resource_count)\r\n              : 5;\r\n          }\r\n\r\n          console.log(SchedulerSetting, \"siteappointsettingafterrender\");\r\n          await this.setState({\r\n            SchedulerSetting,\r\n          });\r\n          await this.props.updateForm(\"SchedulerSetting\", SchedulerSetting);\r\n          let { filterDate, filterType } = this.state;\r\n          // this.props\r\n          //   .getCommonApi(\r\n          //     `customeroutstanding/?date=${dateFormat(\r\n          //       filterDate\r\n          //     )}&check=${filterType}`\r\n          //   )\r\n          //   .then(key => {});\r\n          this.getAppointmentWithStaff();\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  getHoursFromDate = date => {\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let hours = hour > 9 ? hour : \"0\" + hour;\r\n    let minutes;\r\n    if (minute < 15) {\r\n      minutes = \"00\";\r\n    } else if (minute >= 15 && minute < 30) {\r\n      minutes = \"15\";\r\n    } else if (minute >= 30 && minute < 45) {\r\n      minutes = \"30\";\r\n    } else if (minute >= 45 && minute < 59) {\r\n      minutes = \"45\";\r\n    }\r\n    return hours + \":\" + minutes;\r\n  };\r\n\r\n  handleEmptyEvent = async (date, e) => {\r\n    let { customerDetail } = this.props;\r\n    let { formField } = this.state;\r\n\r\n    let time = new Date(date);\r\n\r\n    formField[\"time\"] = this.getHoursFromDate(time);\r\n    formField[\"date\"] = date;\r\n    formField[\"appt_id\"] = 0;\r\n    if (e.groups) {\r\n      formField[\"staff_id\"] = e.groups.id;\r\n    }\r\n    if (e.appt_id) {\r\n      formField[\"appt_id\"] = e.appt_id;\r\n    }\r\n\r\n    await this.setState({ formField });\r\n    console.log(\r\n      date,\r\n      e,\r\n      \"hgjsydfisuyfsdfm ==== handleEmptyEvent\",\r\n      time.getHours\r\n    );\r\n    await this.props.updateForm(\"basicApptDetail\", formField);\r\n    await this.setState({ isOpenModal: true });\r\n  };\r\n  handleCloseDialog = async () => {\r\n    await this.props.updateForm(\"treatmentList\", []);\r\n    await this.props.updateForm(\"basicApptDetail\", {});\r\n    await this.props.updateForm(\"appointmentCustomerDetail\", {});\r\n    await this.setState({\r\n      isOpenModal: false,\r\n    });\r\n  };\r\n\r\n  handleChangeFilter = async (prevMode, prevDate, newMode, newDate, search) => {\r\n    let { filterDate, filterType, searchtext } = this.state;\r\n    filterDate = newDate;\r\n    filterType = newMode;\r\n    searchtext = search;\r\n    await this.setState({\r\n      filterDate,\r\n      filterType,\r\n      searchtext,\r\n    });\r\n    //if (newMode === \"day\" || newMode === \"week\") {\r\n    // this.props\r\n    //   .getCommonApi(\r\n    //     `customeroutstanding/?date=${dateFormat(newDate)}&check=${newMode}`\r\n    //   )\r\n    //   .then(key => {});\r\n    //}\r\n    console.log(\"dfhgfhjhjghjdfhg\", prevMode, prevDate, newMode, newDate);\r\n    if (prevMode !== newMode || prevDate !== newDate) {\r\n      this.getAppointmentWithStaff();\r\n    }\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formField } = this.state;\r\n    formField[name] = value;\r\n    await this.setState({\r\n      formField,\r\n    });\r\n    if (name === \"branchId\") {\r\n      this.getAppointmentWithStaff();\r\n    }\r\n    this.props.updateForm(\"basicApptDetail\", formField);\r\n  };\r\n\r\n  handleDelete = async (id, event) => {\r\n    let { selectedId } = this.state;\r\n    console.log(id, \"===afasfasdfdfasd=====\", selectedId);\r\n    if (id !== selectedId) {\r\n      await this.setState({\r\n        selectedId: id,\r\n      });\r\n      await this.props.commonDeleteApi(`appointment/${id}/`).then(res => {});\r\n    }\r\n  };\r\n\r\n  handleOpenStaff = (one, two, three) => {\r\n    console.log(\"namdfsfgsghsfghf\", one, two, three);\r\n    let { filterDate } = this.state;\r\n    this.props.handleOpen(filterDate);\r\n  };\r\n\r\n  getAppointmentWithStaff = () => {\r\n    this.setState(\r\n      {\r\n        loadPanelVisible: true,\r\n      },\r\n      () => {\r\n        let {\r\n          filterDate,\r\n          filterType,\r\n          page,\r\n          searchtext,\r\n          staffList,\r\n          events,\r\n          meta,\r\n          groupByType,\r\n        } = this.state;\r\n\r\n        this.props\r\n          .getCommonApi(\r\n            `empappointmentview/?date=${dateFormat(\r\n              filterDate\r\n            )}&check=${filterType}&page=${page}&limit=${Number(\r\n              this.props.SchedulerSetting.resource_count\r\n            )}&search=${searchtext}&type=${groupByType}`\r\n          )\r\n          .then(async key => {\r\n            console.log(\r\n              \"starttime: \",\r\n              moment(new Date(), \"DD/MM/YYYY HH:mm:ss\")\r\n            );\r\n            let { status, data, event } = key;\r\n            setTimeout(this.hideLoadPanel);\r\n            if (status === 200) {\r\n              if (data) {\r\n                staffList = [];\r\n                if (data.dataList.length > 0) {\r\n                  staffList = data.dataList;\r\n                }\r\n                events = [];\r\n                meta = [];\r\n                //this.setState({ events, meta });\r\n                meta = data.meta;\r\n                //events = event;\r\n\r\n                if (event.length > 0) {\r\n                  events = event;\r\n                  // event.forEach(cell => {\r\n                  //   let filterList = events.find(\r\n                  //     Appoint =>\r\n                  //       Appoint.linkcode === cell.linkcode &&\r\n                  //       Appoint.id === cell.id &&\r\n                  //       Appoint.cust_id === cell.cust_id &&\r\n                  //       (Appoint.endDate === cell.startDate ||\r\n                  //         Appoint.startDate === cell.endDate)\r\n                  //   );\r\n                  //   if (filterList) {\r\n                  //     if (filterList.startDate < cell.startDate) {\r\n                  //       filterList[\"startDate\"] = filterList.startDate;\r\n                  //     } else {\r\n                  //       filterList[\"startDate\"] = cell.startDate;\r\n                  //     }\r\n                  //     if (filterList.endDate > cell.endDate) {\r\n                  //       filterList[\"endDate\"] = filterList.endDate;\r\n                  //     } else {\r\n                  //       filterList[\"endDate\"] = cell.endDate;\r\n                  //     }\r\n                  //     filterList[\"appt_remark\"] =\r\n                  //       filterList.appt_remark + \" \" + \"/\" + \" \" + cell.appt_remark;\r\n                  //     filterList[\"Merged\"] = true;\r\n                  //     this.setState({ ...this.state.events, filterList });\r\n                  //   } else {\r\n                  //     events.push(cell);\r\n                  //     this.setState({ ...events, events });\r\n                  //   }\r\n                  // });\r\n                }\r\n                await this.setState({ events, meta, staffList });\r\n                console.log(\r\n                  \"endtime: \",\r\n                  moment(new Date(), \"DD/MM/YYYY HH:mm:ss\")\r\n                );\r\n                // await this.setState({ events, staffList, meta });\r\n\r\n                //console.log(event, \"appointment cell data\");\r\n              }\r\n            }\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  handleNext = async () => {\r\n    let { page } = this.state;\r\n    page = page + 1;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    if (page > 0) {\r\n      this.getAppointmentWithStaff();\r\n    }\r\n  };\r\n\r\n  handleBack = async () => {\r\n    let { page } = this.state;\r\n    page = page - 1;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    if (page > 0) {\r\n      this.getAppointmentWithStaff();\r\n    }\r\n  };\r\n  hideLoadPanel = async () => {\r\n    let loadPanelVisible = Object.assign({}, this.state.loadPanelVisible);\r\n    loadPanelVisible = false;\r\n    await this.setState({\r\n      loadPanelVisible,\r\n    });\r\n  };\r\n\r\n  groupByAppointment = async groupBy => {\r\n    await this.setState({\r\n      groupByType: groupBy,\r\n    });\r\n    this.getAppointmentWithStaff();\r\n  };\r\n  timeToMins = time => {\r\n    var b = time.split(\":\");\r\n    return b[0] * 60 + +b[1];\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      appointment,\r\n      brachList,\r\n      branchId,\r\n      formField,\r\n      list,\r\n      events,\r\n      filterType,\r\n      filterDate,\r\n      staffList,\r\n      meta,\r\n      searchtext,\r\n      staffSortlist,\r\n      isLoading,\r\n      isOpenModal,\r\n      SchedulerSetting,\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className=\"col-12 m-0\" id=\"appointment\">\r\n        <LoadPanel\r\n          shadingColor=\"rgba(0,0,0,0.4)\"\r\n          position={`center`}\r\n          onHiding={this.hideLoadPanel}\r\n          visible={this.state.loadPanelVisible}\r\n          showIndicator={this.state.showIndicator}\r\n          shading={this.state.shading}\r\n          showPane={this.state.showPane}\r\n        />\r\n\r\n        <NewSchedulerModal\r\n          staffList={this.state.staffList}\r\n          meta={this.state.meta}\r\n          event={this.state.events}\r\n          onEmptyClick={(date, e) => this.handleEmptyEvent(date, e)}\r\n          handleChangeFilter={this.handleChangeFilter}\r\n          filterType={filterType}\r\n          filterDate={filterDate}\r\n          searchtext={searchtext}\r\n          onDeleteEvent={this.handleDelete}\r\n          handleBack={this.handleBack}\r\n          handleNext={this.handleNext}\r\n          staffSortlist={this.state.staffSortlist}\r\n          getAppointmentWithStaff={this.getAppointmentWithStaff}\r\n          groupByAppointment={groupBy => this.groupByAppointment(groupBy)}\r\n          handleAppointmentSetting={this.getSettingInfo}\r\n          settingData={this.state.settingData}\r\n        />\r\n\r\n        <NewCreateAppointment\r\n          isOpenModal={isOpenModal}\r\n          handleCloseDialog={this.handleCloseDialog}\r\n          handleSaveorUpdate={this.getAppointmentWithStaff}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  customerDetail: state.appointment.customerDetail,\r\n  customerList: state.common.customerList,\r\n  multipleCustomerForm: state.appointment.multipleCustomerForm,\r\n  SchedulerSetting: state.appointment.SchedulerSetting,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const Scheduler = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SchedulerClass);\r\n"]},"metadata":{},"sourceType":"module"}