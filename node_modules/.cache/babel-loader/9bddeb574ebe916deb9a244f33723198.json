{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Toast}from\"service/toast\";import\"./style.scss\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi}from\"redux/actions/common\";import{NormalButton,NormalDate,TableWrapper}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import{withTranslation}from\"react-i18next\";import{NormalInput,NormalDateTime}from\"component/common\";import{Link}from\"react-router-dom\";export var QuotationClass=/*#__PURE__*/function(_React$Component){_inherits(QuotationClass,_React$Component);var _super=_createSuper(QuotationClass);function QuotationClass(){var _this;_classCallCheck(this,QuotationClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Date\"},{label:\"Quotation Number\"},{label:\"Total Amount\"},{label:\"Status\"},{label:\"Prepared By\"}],quotationList:[],pageMeta:{// chunk: 10,\n// page: 1,\n// total: 10,\n// totalPages: 2,\n// chunk: 2,\n// page: 1,\n// total: 8,\n// totalPages: 4,\n},// formField: {\n//   date: \"\",\n//   quotation:\"\",\n//   user:\"\",\n// },\nactive:false,currentIndex:-1,page:1,// limit: 10,\nlimit:2,isOpenvoidCheckout:false// is_loading: false,\n// isMounted: true,\n// salesCollectionHeader: [\n//   { label: \"Sales Collection\" },\n//   { label: \"Before Tax\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// nonSalesCollectionHeader: [\n//   { label: \"Non Sales Collection\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\n// salesTransactionHeader: [\n//   { label: \"Sales Transaction\" },\n//   { label: \"Amount\" },\n//   { label: \"Paid\" },\n//   { label: \"Outstanding\" },\n// ],\n// ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\n// TreatmentDoneHeader: [\n//   { label: \"Customer\" },\n//   { label: \"Customer Reference\" },\n//   { label: \"Treatment Done\" },\n//   { label: \"Description\" },\n//   { label: \"Staff\" },\n//   { label: \"Amount\" },\n// DayDate: new Date(),\n// runDayEnd: false,\n// reportDate: \"\",\n// sales_collec: null,\n// sales_trasac: null,\n// ar_trasac: null,\n// treatment_done: null,\n// dept_sales: null,\n};_this.getQuotation=function(){var _this$state=_this.state,quotationList=_this$state.quotationList,pageMeta=_this$state.pageMeta,page=_this$state.page,limit=_this$state.limit;// let { fromDate, toDate, custName, quoNumber, projectName, status } = formField;\n_this.props.getCommonApi(\"quotationlist/?searchprojectid=\".concat(_this.props.fk_id,\"&page=\").concat(page,\"&limit=\").concat(limit)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(res,\"dsfdfaafg\");_context.next=3;return _this.setState({quotationList:[]});case 3:quotationList=res.data.dataList;// pageMeta = res.data.meta.pagination;\npageMeta=res.data.pagination;// pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\n_this.setState({quotationList:quotationList,pageMeta:pageMeta});// this.setState({ quotationList });\nconsole.log(\"res.data\",res.data);console.log(\"quotationList\",quotationList);console.log(\"pageMeta\",pageMeta);case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.handlePagination=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pageNo){var page;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_this.state.page;page=pageNo.page;_context2.next=4;return _this.setState({page:page});case 4:_this.getQuotation();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};return _this;}_createClass(QuotationClass,[{key:\"componentDidMount\",value:// componentWillUnmount() {\n//   this.state.isMounted = false;\n// }\n// updateState = data => {\n//   if (this.state.isMounted) this.setState(data);\n// };\nfunction componentDidMount(){// let From = new Date();\n// let { formField } = this.state;\n// let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\n// formField[\"fromDate\"] = firstdayMonth;\n// this.setState({\n//   formField,\n// });\nthis.getQuotation();// this.queryHandler({});\n}},{key:\"render\",value://   handleChange = async ({ target: { value, name } }) => {\n//     let { formField } = this.state;\n//     formField[name] = value;\n//     await this.setState({\n//       formField,\n//     });\n//   };\n//   handleDatePick = async (name, value) => {\n//     let { formField } = this.state;\n//     formField[name] = value;\n//     await this.setState({\n//       formField,\n//     });\n//   };\n// seach change with api call\n// handlesearch = event => {\n//   event.persist();\n//   if (!this.debouncedFn) {\n//     this.debouncedFn = _.debounce(() => {\n//       let searchString = event.target.value;\n//       let data = { search: searchString };\n//       this.queryHandler(data);\n//     }, 500);\n//   }\n//   this.debouncedFn();\n// };\n// getProject = async data => {\n//   this.updateState({ isLoading: true });\n//   let { search } = this.state;\n//   let { page = 1, limit = 10 } = data;\n//   await this.props\n//     .getProject(`?page=${page}&limit=${limit}&search=${search}`)\n//     .then(res => {\n//       let { data } = res;\n//       console.log(data);\n//       //  let { customerDetails } = this.props;\n//       this.updateState({\n//         customerList: data.dataList,\n//         meta: data.meta?.pagination,\n//         isLoading: false,\n//       });\n//     });\n// };\n// api call for staff\n// queryHandler = async data => {\n//   this.updateState({ is_loading: true });\n//   let { page = 1, limit = 10 } = data;\n//   await this.props.getProject(\n//     `?page=${page}&limit=${limit}`\n//   );\n//   let { projectDetails } = this.props;\n//   let { quotationList, pageMeta } = this.state;\n//   quotationList = projectDetails.data;\n//   pageMeta = projectDetails.meta?.pagination;\n//   this.updateState({\n//     quotationList,\n//     pageMeta,\n//     is_loading: false,\n//   });\n// };\n// // delete api call for staff\n// handleDeleteProject = id => {\n//   this.props.deleteProject(`${id}/`).then(res => this.queryHandler({}));\n// };\nfunction render(){var _this2=this;var _this$state2=this.state,headerDetails=_this$state2.headerDetails,pageMeta=_this$state2.pageMeta,quotationList=_this$state2.quotationList;// quotationList = [{\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\n// {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"}]\n// console.log(quotationList)\n// let { fromDate, toDate, custName, quoNumber, projectName, status } = formField;\nvar t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:pageMeta},quotationList?quotationList.map(function(item,index){var created_at=item.created_at,quotation_number=item.quotation_number,total_amount=item.total_amount,status=item.status,in_charge=item.in_charge,id=item.id;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},created_at)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/admin/quantum/quotation/\".concat(id,\"/edit\"),state:{projectFk:_this2.props.fk_id}}},quotation_number))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},total_amount)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},in_charge)));}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 mt-5 float-right\"},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/admin/quantum/quotation/add\",state:{projectFk:this.props.fk_id}}},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2 mb-3\",mainbg:true,className:\"confirm\",label:\"Add\",outline:false// onClick={this.props.history.push({\n//   pathname: '/admin/quotation/add',\n//   state: { projectFk: this.props.fk_id }\n// })}\n})))));}}]);return QuotationClass;}(React.Component);// const mapStateToProps = state => ({\n//   projectDetail: state.project.projectDetail,\n// });\nvar mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi// deleteProject,\n// getProject\n},dispatch);};export var Quotation=withTranslation()(connect(null,mapDispatchToProps)(QuotationClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Project/AddProject/quotation.js"],"names":["React","Toast","connect","bindActionCreators","getCommonApi","NormalButton","NormalDate","TableWrapper","dateFormat","withTranslation","NormalInput","NormalDateTime","Link","QuotationClass","state","headerDetails","label","quotationList","pageMeta","active","currentIndex","page","limit","isOpenvoidCheckout","getQuotation","props","fk_id","then","res","console","log","setState","data","dataList","pagination","handlePagination","pageNo","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","t","map","item","index","created_at","quotation_number","total_amount","status","in_charge","id","pathname","projectFk","Component","mapDispatchToProps","dispatch","Quotation"],"mappings":"2wBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,eAAtB,CACA,MAAO,cAAP,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,YAAT,KAA6B,sBAA7B,CACA,OAASC,YAAT,CAAuBC,UAAvB,CAAmCC,YAAnC,KAAuD,kBAAvD,CACA,OAASC,UAAT,KAA2B,yBAA3B,CACA,OAASC,eAAT,KAAgC,eAAhC,CACA,OAASC,WAAT,CAAsBC,cAAtB,KAA4C,kBAA5C,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,UAAaC,CAAAA,cAAb,uWACEC,KADF,CACU,CACNC,aAAa,CAAE,CACb,CAAEC,KAAK,CAAE,MAAT,CADa,CAEb,CAAEA,KAAK,CAAE,kBAAT,CAFa,CAGb,CAAEA,KAAK,CAAE,cAAT,CAHa,CAIb,CAAEA,KAAK,CAAE,QAAT,CAJa,CAKb,CAAEA,KAAK,CAAE,aAAT,CALa,CADT,CASNC,aAAa,CAAE,EATT,CAUNC,QAAQ,CAAE,CACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARQ,CAVJ,CAqBN;AACA;AACA;AACA;AACA;AAEAC,MAAM,CAAE,KA3BF,CA4BNC,YAAY,CAAE,CAAC,CA5BT,CA6BNC,IAAI,CAAE,CA7BA,CA8BN;AACAC,KAAK,CAAE,CA/BD,CAgCNC,kBAAkB,CAAE,KACpB;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArEM,CADV,OA8FEC,YA9FF,CA8FiB,UAAM,CACnB,gBAA+C,MAAKV,KAApD,CAAMG,aAAN,aAAMA,aAAN,CAAqBC,QAArB,aAAqBA,QAArB,CAA+BG,IAA/B,aAA+BA,IAA/B,CAAqCC,KAArC,aAAqCA,KAArC,CACA;AAEA,MAAKG,KAAL,CACGrB,YADH,0CAEsC,MAAKqB,KAAL,CAAWC,KAFjD,kBAE+DL,IAF/D,mBAE6EC,KAF7E,GAIGK,IAJH,0FAIQ,iBAAMC,GAAN,kHACJC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAiB,WAAjB,EADI,sBAEE,OAAKG,QAAL,CAAc,CAAEd,aAAa,CAAE,EAAjB,CAAd,CAFF,QAGJA,aAAa,CAAGW,GAAG,CAACI,IAAJ,CAASC,QAAzB,CACA;AACAf,QAAQ,CAAGU,GAAG,CAACI,IAAJ,CAASE,UAApB,CACA;AACA,MAAKH,QAAL,CAAc,CAAEd,aAAa,CAAbA,aAAF,CAAiBC,QAAQ,CAARA,QAAjB,CAAd,EACA;AACAW,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBF,GAAG,CAACI,IAA5B,EACAH,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6Bb,aAA7B,EACAY,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBZ,QAAxB,EAXI,sDAJR,gEAiBD,CAnHH,OAqHEiB,gBArHF,2FAqHqB,kBAAMC,MAAN,+HACXf,IADW,CACF,MAAKP,KADH,CACXO,IADW,CAEjBA,IAAI,CAAGe,MAAM,CAACf,IAAd,CAFiB,uBAGX,OAAKU,QAAL,CAAc,CAClBV,IAAI,CAAJA,IADkB,CAAd,CAHW,QAMjB,MAAKG,YAAL,GANiB,wDArHrB,uEAkIEa,WAlIF,CAkIgB,SAAAC,GAAG,CAAI,CACnB,GAAI,CAAC,MAAKxB,KAAL,CAAWK,MAAhB,CAAwB,CACtBoB,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAmC,MAAKC,kBAAxC,CAA4D,KAA5D,EACD,CAFD,IAEO,CACLF,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,CAAsC,MAAKD,kBAA3C,CAA+D,KAA/D,EACD,CAED,MAAKV,QAAL,CAAc,SAAAY,SAAS,QAAK,CAC1BxB,MAAM,CAAE,CAACwB,SAAS,CAACxB,MADO,CAE1BC,YAAY,CAAEkB,GAFY,CAAL,EAAvB,EAID,CA7IH,OA+IEG,kBA/IF,CA+IuB,SAAAG,CAAC,CAAI,CACxB,GAAI,MAAKC,IAAL,EAAa,IAAjB,CAAuB,CACrB,GAAI,MAAKA,IAAL,CAAUC,QAAV,CAAmBF,CAAC,CAACG,MAArB,CAAJ,CAAkC,CAChC,OACD,CACF,CACD,MAAKV,WAAL,GACD,CAtJH,2EAyEE;AACA;AACA;AAEA;AACA;AACA;AAEA,4BAAoB,CAClB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,KAAKb,YAAL,GACA;AACD,CA5FH,sBAwJE;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA,iBAAS,iBACP,iBAAiD,KAAKV,KAAtD,CAAMC,aAAN,cAAMA,aAAN,CAAqBG,QAArB,cAAqBA,QAArB,CAA+BD,aAA/B,cAA+BA,aAA/B,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,GAAM+B,CAAAA,CAAN,CAAY,KAAKvB,KAAjB,CAAMuB,CAAN,CAEA,mBACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,oBAAC,YAAD,EACE,aAAa,CAAEjC,aADjB,CAEE,YAAY,CAAE,KAAKoB,gBAFrB,CAGE,QAAQ,CAAEjB,QAHZ,EAKGD,aAAa,CACVA,aAAa,CAACgC,GAAd,CAAkB,SAACC,IAAD,CAAOC,KAAP,CAAiB,CACjC,GACEC,CAAAA,UADF,CAOIF,IAPJ,CACEE,UADF,CAEEC,gBAFF,CAOIH,IAPJ,CAEEG,gBAFF,CAGEC,YAHF,CAOIJ,IAPJ,CAGEI,YAHF,CAIEC,MAJF,CAOIL,IAPJ,CAIEK,MAJF,CAKEC,SALF,CAOIN,IAPJ,CAKEM,SALF,CAMEC,EANF,CAOIP,IAPJ,CAMEO,EANF,CAQA,mBACE,0BAAI,GAAG,CAAEN,KAAT,eACE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGC,UADH,CADF,CADF,cAME,2CACE,2BAAK,SAAS,CAAC,kDAAf,eAEE,oBAAC,IAAD,EACE,EAAE,CAAE,CACFM,QAAQ,oCAA8BD,EAA9B,SADN,CAEF3C,KAAK,CAAE,CAAE6C,SAAS,CAAE,MAAI,CAAClC,KAAL,CAAWC,KAAxB,CAFL,CADN,EAMG2B,gBANH,CAFF,CADF,CANF,cAmBE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGC,YADH,CADF,CAnBF,cAwBE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGC,MADH,CADF,CAxBF,cA6BE,2CACE,2BAAK,SAAS,CAAC,kDAAf,EACGC,SADH,CADF,CA7BF,CADF,CAqCD,CA9CD,CADU,CAgDV,IArDN,CADF,cAyDE,2BAAK,SAAS,CAAC,wBAAf,eACE,oBAAC,IAAD,EACE,EAAE,CAAE,CACFE,QAAQ,CAAE,8BADR,CAEF5C,KAAK,CAAE,CAAE6C,SAAS,CAAE,KAAKlC,KAAL,CAAWC,KAAxB,CAFL,CADN,eAME,oBAAC,YAAD,EACE,WAAW,CAAE,WADf,CAEE,MAAM,CAAE,IAFV,CAGE,SAAS,CAAC,SAHZ,CAIE,KAAK,CAAC,KAJR,CAKE,OAAO,CAAE,KACT;AACA;AACA;AACA;AATF,EANF,CADF,CAzDF,CADF,CADF,CAkFD,CAvUH,4BAAoC1B,KAAK,CAAC4D,SAA1C,EA0UA;AACA;AACA;AAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAO3D,CAAAA,kBAAkB,CACvB,CACEC,YAAY,CAAZA,YACA;AACA;AAHF,CADuB,CAMvB0D,QANuB,CAAzB,CAQD,CATD,CAWA,MAAO,IAAMC,CAAAA,SAAS,CAAGtD,eAAe,GACtCP,OAAO,CAAC,IAAD,CAAO2D,kBAAP,CAAP,CAAkChD,cAAlC,CADsC,CAAjC","sourcesContent":["import React from \"react\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi } from \"redux/actions/common\";\r\nimport { NormalButton, NormalDate, TableWrapper } from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NormalInput, NormalDateTime } from \"component/common\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport class QuotationClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      { label: \"Date\" },\r\n      { label: \"Quotation Number\" },\r\n      { label: \"Total Amount\" },\r\n      { label: \"Status\" },\r\n      { label: \"Prepared By\" },\r\n    ],\r\n\r\n    quotationList: [],\r\n    pageMeta: {\r\n      // chunk: 10,\r\n      // page: 1,\r\n      // total: 10,\r\n      // totalPages: 2,\r\n      // chunk: 2,\r\n      // page: 1,\r\n      // total: 8,\r\n      // totalPages: 4,\r\n    },\r\n\r\n    // formField: {\r\n    //   date: \"\",\r\n    //   quotation:\"\",\r\n    //   user:\"\",\r\n    // },\r\n\r\n    active: false,\r\n    currentIndex: -1,\r\n    page: 1,\r\n    // limit: 10,\r\n    limit: 2,\r\n    isOpenvoidCheckout: false,\r\n    // is_loading: false,\r\n    // isMounted: true,\r\n\r\n    // salesCollectionHeader: [\r\n    //   { label: \"Sales Collection\" },\r\n    //   { label: \"Before Tax\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // nonSalesCollectionHeader: [\r\n    //   { label: \"Non Sales Collection\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\r\n    // salesTransactionHeader: [\r\n    //   { label: \"Sales Transaction\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Paid\" },\r\n    //   { label: \"Outstanding\" },\r\n    // ],\r\n    // ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\r\n    // TreatmentDoneHeader: [\r\n    //   { label: \"Customer\" },\r\n    //   { label: \"Customer Reference\" },\r\n    //   { label: \"Treatment Done\" },\r\n    //   { label: \"Description\" },\r\n    //   { label: \"Staff\" },\r\n    //   { label: \"Amount\" },\r\n    // DayDate: new Date(),\r\n    // runDayEnd: false,\r\n    // reportDate: \"\",\r\n    // sales_collec: null,\r\n    // sales_trasac: null,\r\n    // ar_trasac: null,\r\n    // treatment_done: null,\r\n    // dept_sales: null,\r\n  };\r\n\r\n  // componentWillUnmount() {\r\n  //   this.state.isMounted = false;\r\n  // }\r\n\r\n  // updateState = data => {\r\n  //   if (this.state.isMounted) this.setState(data);\r\n  // };\r\n\r\n  componentDidMount() {\r\n    // let From = new Date();\r\n    // let { formField } = this.state;\r\n    // let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\r\n    // formField[\"fromDate\"] = firstdayMonth;\r\n    // this.setState({\r\n    //   formField,\r\n    // });\r\n\r\n    this.getQuotation();\r\n    // this.queryHandler({});\r\n  }\r\n\r\n  getQuotation = () => {\r\n    let { quotationList, pageMeta, page, limit } = this.state;\r\n    // let { fromDate, toDate, custName, quoNumber, projectName, status } = formField;\r\n\r\n    this.props\r\n      .getCommonApi(\r\n        `quotationlist/?searchprojectid=${this.props.fk_id}&page=${page}&limit=${limit}`\r\n      )\r\n      .then(async res => {\r\n        console.log(res, \"dsfdfaafg\");\r\n        await this.setState({ quotationList: [] });\r\n        quotationList = res.data.dataList;\r\n        // pageMeta = res.data.meta.pagination;\r\n        pageMeta = res.data.pagination;\r\n        // pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\r\n        this.setState({ quotationList, pageMeta });\r\n        // this.setState({ quotationList });\r\n        console.log(\"res.data\", res.data);\r\n        console.log(\"quotationList\", quotationList);\r\n        console.log(\"pageMeta\", pageMeta);\r\n      });\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.getQuotation();\r\n  };\r\n  // pagination\r\n  // handlePagination = page => {\r\n  //   this.queryHandler(page);\r\n  // };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  //   handleChange = async ({ target: { value, name } }) => {\r\n  //     let { formField } = this.state;\r\n  //     formField[name] = value;\r\n  //     await this.setState({\r\n  //       formField,\r\n  //     });\r\n  //   };\r\n\r\n  //   handleDatePick = async (name, value) => {\r\n  //     let { formField } = this.state;\r\n  //     formField[name] = value;\r\n  //     await this.setState({\r\n  //       formField,\r\n  //     });\r\n  //   };\r\n\r\n  // seach change with api call\r\n  // handlesearch = event => {\r\n  //   event.persist();\r\n\r\n  //   if (!this.debouncedFn) {\r\n  //     this.debouncedFn = _.debounce(() => {\r\n  //       let searchString = event.target.value;\r\n  //       let data = { search: searchString };\r\n  //       this.queryHandler(data);\r\n  //     }, 500);\r\n  //   }\r\n  //   this.debouncedFn();\r\n  // };\r\n\r\n  // getProject = async data => {\r\n  //   this.updateState({ isLoading: true });\r\n  //   let { search } = this.state;\r\n  //   let { page = 1, limit = 10 } = data;\r\n  //   await this.props\r\n  //     .getProject(`?page=${page}&limit=${limit}&search=${search}`)\r\n  //     .then(res => {\r\n  //       let { data } = res;\r\n  //       console.log(data);\r\n  //       //  let { customerDetails } = this.props;\r\n  //       this.updateState({\r\n  //         customerList: data.dataList,\r\n  //         meta: data.meta?.pagination,\r\n  //         isLoading: false,\r\n  //       });\r\n  //     });\r\n  // };\r\n\r\n  // api call for staff\r\n  // queryHandler = async data => {\r\n  //   this.updateState({ is_loading: true });\r\n  //   let { page = 1, limit = 10 } = data;\r\n  //   await this.props.getProject(\r\n  //     `?page=${page}&limit=${limit}`\r\n  //   );\r\n  //   let { projectDetails } = this.props;\r\n  //   let { quotationList, pageMeta } = this.state;\r\n  //   quotationList = projectDetails.data;\r\n  //   pageMeta = projectDetails.meta?.pagination;\r\n  //   this.updateState({\r\n  //     quotationList,\r\n  //     pageMeta,\r\n  //     is_loading: false,\r\n  //   });\r\n  // };\r\n\r\n  // // delete api call for staff\r\n  // handleDeleteProject = id => {\r\n  //   this.props.deleteProject(`${id}/`).then(res => this.queryHandler({}));\r\n  // };\r\n\r\n  render() {\r\n    let { headerDetails, pageMeta, quotationList } = this.state;\r\n\r\n    // quotationList = [{\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"},\r\n    // {\"projectTitle\":\"project1\", \"custName\":\"cust1\", \"status\":\"Pending\"}]\r\n    // console.log(quotationList)\r\n\r\n    // let { fromDate, toDate, custName, quoNumber, projectName, status } = formField;\r\n\r\n    let { t } = this.props;\r\n\r\n    return (\r\n      <div className=\"py-4\">\r\n        <div className=\"table-container\">\r\n          <TableWrapper\r\n            headerDetails={headerDetails}\r\n            queryHandler={this.handlePagination}\r\n            pageMeta={pageMeta}\r\n          >\r\n            {quotationList\r\n              ? quotationList.map((item, index) => {\r\n                  let {\r\n                    created_at,\r\n                    quotation_number,\r\n                    total_amount,\r\n                    status,\r\n                    in_charge,\r\n                    id,\r\n                  } = item;\r\n                  return (\r\n                    <tr key={index}>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          {created_at}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          {/* <Link to={`/admin/quotation/${id}/editQuotation`}>  */}\r\n                          <Link\r\n                            to={{\r\n                              pathname: `/admin/quantum/quotation/${id}/edit`,\r\n                              state: { projectFk: this.props.fk_id },\r\n                            }}\r\n                          >\r\n                            {quotation_number}\r\n                          </Link>\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          {total_amount}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          {status}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center justify-content-center\">\r\n                          {in_charge}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              : null}\r\n          </TableWrapper>\r\n\r\n          <div className=\"col-2 mt-5 float-right\">\r\n            <Link\r\n              to={{\r\n                pathname: \"/admin/quantum/quotation/add\",\r\n                state: { projectFk: this.props.fk_id },\r\n              }}\r\n            >\r\n              <NormalButton\r\n                buttonClass={\"mx-2 mb-3\"}\r\n                mainbg={true}\r\n                className=\"confirm\"\r\n                label=\"Add\"\r\n                outline={false}\r\n                // onClick={this.props.history.push({\r\n                //   pathname: '/admin/quotation/add',\r\n                //   state: { projectFk: this.props.fk_id }\r\n                // })}\r\n              />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// const mapStateToProps = state => ({\r\n//   projectDetail: state.project.projectDetail,\r\n// });\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      // deleteProject,\r\n      // getProject\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const Quotation = withTranslation()(\r\n  connect(null, mapDispatchToProps)(QuotationClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}