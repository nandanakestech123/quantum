{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\Admin\\\\Cart\\\\index.js\";\nimport React, { Component } from 'react';\nimport './style.scss';\nimport { NormalButton } from 'component/common';\nimport { dateFormat } from 'service/helperFunctions';\nimport _ from 'lodash';\nimport { history } from 'helpers';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi } from \"redux/actions/common\";\nexport class CartClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isOpen: false,\n      currentIndex: -1,\n      cartList: [],\n      cartData: {}\n    };\n\n    this.componentDidMount = () => {// this.getCart()\n    };\n\n    this.getCart = () => {\n      let {\n        productCard,\n        cartList\n      } = this.state;\n      let {\n        selected_cstomer\n      } = this.props; // this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${\"2020-09-17\"}&cust_noid=${selected_cstomer.cust_noid}`).then((key) => {\n\n      this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date())}&cust_noid=${selected_cstomer.cust_noid}`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n\n        if (status === 200) {\n          this.props.getCommonApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date())}&cust_noid=${selected_cstomer.cust_noid}&cart_id=${data[0].cart_id}`).then(res => {\n            // this.props.getCommonApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_date=${\"2020-09-17\"}&cust_noid=${selected_cstomer.cust_noid}&cart_id=${data[0].cart_id}`).then((res) => {\n            let {\n              status,\n              data\n            } = res;\n\n            if (status === 200) {\n              this.setState({\n                cartList: data,\n                cartData: res\n              });\n            }\n          });\n        }\n      });\n    };\n\n    this.handleOpen = async () => {\n      let {\n        isOpen\n      } = this.state;\n      await this.setState({\n        isOpen: !isOpen\n      });\n\n      if (isOpen === false) {\n        this.getCart();\n      }\n    };\n\n    this.handleClick = key => {\n      if (!this.state.active) {\n        document.addEventListener('click', this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener('click', this.handleOutsideClick, false);\n      }\n\n      this.setState(prevState => ({\n        active: !prevState.active,\n        currentIndex: key\n      }));\n    };\n\n    this.getDateTime = data => {\n      let date = new Date(data);\n      date = String(date).split(\" \");\n      let date1 = date[2] + \"th \" + date[1] + \", \" + date[3];\n      let time = date[4].split(\":\");\n      let time1 = String(Number(time[0]) > 12 ? Number(time[0]) - 12 : time[0]) + \":\" + time[1] + (Number(time[0]) > 12 ? \"PM\" : \"AM\");\n      return time1 + \", \" + date1;\n    };\n\n    this.handleSubmit = id => {\n      history.push(`/admin/payment/${id}`);\n    };\n  }\n\n  render() {\n    let {\n      isOpen,\n      currentIndex,\n      cartList,\n      cartData\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: `cart-holder ${isOpen ? 'open' : ''}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-head\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-left-arrow\",\n      onClick: () => this.handleOpen(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, \"Cart\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: `${!isOpen ? 'item-list' : ''}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, isOpen ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row item-list-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-9 list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row my-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 37\n      }\n    }, \"Treatment\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 37\n      }\n    }, \"Cost\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 37\n      }\n    }, \"Quantity\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 37\n      }\n    }, \"Booking Detail\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 37\n      }\n    })), cartList.map((item, index) => {\n      let {\n        name,\n        staffId,\n        specialist,\n        homeSite,\n        currentSite,\n        contact,\n        status\n      } = item;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row detail m-2\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4 treatment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"title mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 41\n        }\n      }, item.itemdesc), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sub-title mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 41\n        }\n      }, item.item_class), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"time\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 41\n        }\n      }, item.cart_date ? this.getDateTime(item.cart_date) : \"\", \",  \", item.sitecode_name)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2 cost\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 37\n        }\n      }, \"$ \", item.total_price), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2 quantity\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 37\n        }\n      }, item.quantity), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2 booking\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 37\n        }\n      }, \"$ \", item.deposit), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2 action\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"position-relative\",\n        ref: node => {\n          this.node = node;\n        },\n        onClick: () => this.handleClick(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 41\n        }\n      }, currentIndex === index ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more-active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 142\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"option card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pt-3\",\n        onClick: () => this.props.history.push('/admin/staff/staffDetails'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 57\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-eye-grey px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 180\n        }\n      }), \" View \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 57\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-edit px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 106\n        }\n      }), \" Edit \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center fs-16 pb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 57\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-delete px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 111\n        }\n      }), \" Delete \"))) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center horizontal-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-more\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 131\n        }\n      })))));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3 billable-amount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 37\n      }\n    }, \"Subtotal\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 37\n      }\n    }, \"$ \", cartData.subtotal), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 37\n      }\n    }, \"Discount\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 37\n      }\n    }, \"$ \", cartData.discount)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right-total text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 37\n      }\n    }, \"Billable Amount\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"amount text-orenge\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 37\n      }\n    }, \"$ \", cartData.trans_amt)))) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 27\n      }\n    }, \"No Items available\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"total\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 25\n      }\n    }, \"Total\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }\n    }, \"$ \", cartData.trans_amt)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"confirm-booking\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"treatment\",\n      mainbg: true,\n      className: \"col-12 fs-15 \",\n      label: \"Checkout to payment\",\n      onClick: cartList.length > 0 ? () => this.handleSubmit(cartList[0].cart_id) : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  customerDetail: state.appointment.customerDetail,\n  selected_cstomer: state.common.selected_cstomer\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    // getCustomer,\n    getCommonApi\n  }, dispatch);\n};\n\nexport const Cart = connect(mapStateToProps, mapDispatchToProps)(CartClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Cart/index.js"],"names":["React","Component","NormalButton","dateFormat","_","history","connect","bindActionCreators","getCommonApi","CartClass","state","isOpen","currentIndex","cartList","cartData","componentDidMount","getCart","productCard","selected_cstomer","props","branchId","Date","cust_noid","then","key","status","data","cart_id","res","setState","handleOpen","handleClick","active","document","addEventListener","handleOutsideClick","removeEventListener","prevState","getDateTime","date","String","split","date1","time","time1","Number","handleSubmit","id","push","render","map","item","index","name","staffId","specialist","homeSite","currentSite","contact","itemdesc","item_class","cart_date","sitecode_name","total_price","quantity","deposit","node","subtotal","discount","trans_amt","length","mapStateToProps","customerDetail","appointment","common","mapDispatchToProps","dispatch","Cart"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './style.scss';\r\nimport { NormalButton } from 'component/common';\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport _ from 'lodash';\r\nimport { history } from 'helpers';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi } from \"redux/actions/common\"\r\n\r\nexport class CartClass extends Component {\r\n    state = {\r\n        isOpen: false,\r\n        currentIndex: -1,\r\n        cartList: [],\r\n        cartData: {}\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        // this.getCart()\r\n        \r\n    }\r\n\r\n    getCart = () => {\r\n        let { productCard, cartList } = this.state;\r\n        let { selected_cstomer } = this.props;\r\n        // this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${\"2020-09-17\"}&cust_noid=${selected_cstomer.cust_noid}`).then((key) => {\r\n            this.props.getCommonApi(`itemcart/Check/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date())}&cust_noid=${selected_cstomer.cust_noid}`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n\r\n                this.props.getCommonApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_date=${dateFormat(new Date())}&cust_noid=${selected_cstomer.cust_noid}&cart_id=${data[0].cart_id}`).then((res) => {\r\n                    // this.props.getCommonApi(`itemcart/?sitecodeid=${selected_cstomer.branchId}&cart_date=${\"2020-09-17\"}&cust_noid=${selected_cstomer.cust_noid}&cart_id=${data[0].cart_id}`).then((res) => {\r\n                    let { status, data } = res;\r\n                    if (status === 200) {\r\n        \r\n                        this.setState({ cartList: data, cartData: res })\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleOpen = async() => {\r\n        let { isOpen } = this.state\r\n        await this.setState({\r\n            isOpen: !isOpen,\r\n        })\r\n        if(isOpen === false){\r\n\r\n            this.getCart()\r\n        }\r\n    }\r\n\r\n    handleClick = (key) => {\r\n        if (!this.state.active) {\r\n            document.addEventListener('click', this.handleOutsideClick, false);\r\n        } else {\r\n            document.removeEventListener('click', this.handleOutsideClick, false);\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n            active: !prevState.active,\r\n            currentIndex: key\r\n        }));\r\n    }\r\n\r\n    getDateTime = (data) => {\r\n        let date = new Date(data)\r\n        date = String(date).split(\" \")\r\n        let date1 = date[2] + \"th \" + date[1] + \", \" + date[3]\r\n        let time = date[4].split(\":\")\r\n        let time1 = String(Number(time[0]) > 12 ? (Number(time[0]) - 12) : time[0]) + \":\" + time[1] + (Number(time[0]) > 12 ? \"PM\" : \"AM\")\r\n        return time1 + \", \" + date1\r\n    }\r\n\r\n    handleSubmit = (id) => {\r\n        history.push(`/admin/payment/${id}`)\r\n    }\r\n\r\n    render() {\r\n        let { isOpen, currentIndex, cartList, cartData } = this.state\r\n        return (\r\n            <>\r\n                <div className={`cart-holder ${isOpen ? 'open' : ''}`}>\r\n                    <div className=\"cart-head\">\r\n                        <i className=\"icon-left-arrow\" onClick={() => this.handleOpen()}></i>\r\n                        <p>Cart</p>\r\n                    </div>\r\n                    <div className={`${!isOpen ? 'item-list' : ''}`}>\r\n                        {isOpen ? (\r\n                        <div className=\"row item-list-detail\">\r\n                            <div className=\"col-9 list\">\r\n                                <div className=\"row my-2\">\r\n                                    <div className=\"col-4 text-center\">\r\n                                        Treatment\r\n                                    </div>\r\n                                    <div className=\"col-2 text-center\">Cost</div>\r\n                                    <div className=\"col-2 text-center\">Quantity</div>\r\n                                    <div className=\"col-2 text-center\">Booking Detail</div>\r\n                                    <div className=\"col-2 text-center\"></div>\r\n                                </div>\r\n                            {cartList.map((item, index) => {\r\n\r\n                            let {\r\n                                name,\r\n                                staffId,\r\n                                specialist,\r\n                                homeSite,\r\n                                currentSite,\r\n                                contact,\r\n                                status\r\n                            } = item\r\n                            return (\r\n                                <div className=\"row detail m-2\" key={index}>\r\n                                    <div className=\"col-4 treatment\">\r\n                                        <p className=\"title mb-2\">{item.itemdesc}</p>\r\n                                        <p className=\"sub-title mb-2\">{item.item_class}</p>\r\n                                        <p className=\"time\">{item.cart_date ? this.getDateTime(item.cart_date):\"\"},  {item.sitecode_name}</p>\r\n                                    </div>\r\n                                    <div className=\"col-2 cost\">$ {item.total_price}</div>\r\n                                    <div className=\"col-2 quantity\">{item.quantity}</div>\r\n                                    <div className=\"col-2 booking\">$ {item.deposit}</div>\r\n                                    <div className=\"col-2 action\">\r\n                                        <div className=\"position-relative\" ref={node => { this.node = node; }}\r\n                                            onClick={() => this.handleClick(index)}>\r\n                                            {currentIndex === index ?\r\n                                                <>\r\n                                                    <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\"><i className=\"icon-more\"></i></div>\r\n                                                    <div className=\"option card\">\r\n                                                        <div className=\"d-flex align-items-center fs-16 pt-3\" onClick={() => this.props.history.push('/admin/staff/staffDetails')}><span className=\"icon-eye-grey px-3\"></span> View </div>\r\n                                                        <div className=\"d-flex align-items-center fs-16\"><span className=\"icon-edit px-3\"></span> Edit </div>\r\n                                                        <div className=\"d-flex align-items-center fs-16 pb-3\"><span className=\"icon-delete px-3\"></span> Delete </div>\r\n                                                    </div>\r\n                                                </>\r\n                                                :\r\n                                                <div className=\"d-flex align-items-center justify-content-center horizontal-more\"><i className=\"icon-more\"></i></div>\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                )\r\n                                })}\r\n                            </div>\r\n                            <div className=\"col-3 billable-amount\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-6\">Subtotal</div>\r\n                                    <div className=\"col-6\">$ {cartData.subtotal}</div>\r\n                                    {/* <div className=\"col-6\">Tax</div>\r\n                                    <div className=\"col-6\">$ 20</div> */}\r\n                                    <div className=\"col-6\">Discount</div>\r\n                                    <div className=\"col-6\">$ {cartData.discount}</div>\r\n                                    {/* <div className=\"col-6\">Voucher</div>\r\n                                    <div className=\"col-6\"></div> */}\r\n                                </div>\r\n                                <div className=\"right-total text-center\">\r\n                                    <p className=\"label\">Billable Amount</p>\r\n                                    <p className=\"amount text-orenge\">$ {cartData.trans_amt}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        ):<p>No Items available</p>}\r\n                        \r\n                    </div>\r\n                    <div className=\"total\">\r\n                        <p>Total</p>\r\n                        <p>$ {cartData.trans_amt}</p>\r\n                    </div>\r\n                    <div className=\"confirm-booking\">\r\n                    <NormalButton\r\n                        buttonClass={\"treatment\"}\r\n                        mainbg={true}\r\n                        className=\"col-12 fs-15 \"\r\n                        label=\"Checkout to payment\"\r\n                        onClick={cartList.length>0 ? ()=>this.handleSubmit(cartList[0].cart_id):\"\"}\r\n                    />\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    customerDetail: state.appointment.customerDetail,\r\n    selected_cstomer: state.common.selected_cstomer,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        // getCustomer,\r\n        getCommonApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const Cart = connect(mapStateToProps, mapDispatchToProps)(CartClass)"]},"metadata":{},"sourceType":"module"}