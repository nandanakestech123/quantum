{"ast":null,"code":"var _jsxFileName = \"F:\\\\webfe\\\\src\\\\component\\\\Admin\\\\Inventory\\\\InventoryMainPage\\\\Model\\\\CreateNewInventory.js\";\nimport React, { Component } from \"react\";\nimport { getCommonApi, commonCreateApi, commonPatchApi } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { NormalButton, NormalModal, NormalInput, TableWrapper, NormalDate, NormalTextarea } from \"component/common\";\nimport closeIcon from \"assets/images/close.png\";\nimport { Toast } from \"service/toast\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { StockItemUsagePopup } from \"./StockItemUsagePopup\";\nimport { StockMemoStaffList } from \"./StockMemoStaffList\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport { history } from \"helpers\";\nimport { createLogger } from \"redux-logger\";\nexport class CreateNewInventoryClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formFields: {\n        itemName: \"\",\n        emp_id: 0,\n        employeeName: \"\",\n        date: new Date(),\n        stock_id: 0,\n        qty: \"\",\n        uom: \"\",\n        memo_remarks: \"\"\n      },\n      isStockItemUsagePopup: false,\n      isStockItemUsageEmployeePopup: false\n    };\n\n    this.componentWillMount = () => {\n      this.validator = new SimpleReactValidator({\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message font-md\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 9\n          }\n        }, message),\n        autoForceUpdate: this\n      });\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        formFields\n      } = this.state;\n      formFields[name] = value;\n      await this.setState({\n        formFields\n      });\n    };\n\n    this.handleStockItemUsagePopup = () => {\n      this.setState(prevState => ({\n        isStockItemUsagePopup: !prevState.isStockItemUsagePopup\n      }));\n    };\n\n    this.handleStockItemUsageEmployeePopup = () => {\n      this.setState(prevState => ({\n        isStockItemUsageEmployeePopup: !prevState.isStockItemUsageEmployeePopup\n      }));\n    };\n\n    this.includeNewItems = async data => {\n      this.handleStockItemUsagePopup();\n      let {\n        formFields\n      } = this.state;\n      formFields[\"qty\"] = data.qty;\n      formFields[\"uom\"] = data.uom;\n      formFields[\"stock_id\"] = data.stock_id;\n      formFields[\"itemName\"] = data.ItemDesc; // ItemDesc: \"FIRE DRAGON ESS OIL 火龙液 (5ML)\";\n      // item_code: \"23000002\";\n      // link_code: \"\";\n      // qty: \"5\";\n      // stock_id: 5990;\n      // uom: \"BOX\";\n      // uom_id: 5615;\n\n      await this.setState({\n        formFields\n      });\n    };\n\n    this.handleSelectedStaff = async data => {\n      this.handleStockItemUsageEmployeePopup();\n      let {\n        formFields\n      } = this.state;\n      formFields[\"emp_id\"] = data.id;\n      formFields[\"employeeName\"] = data.emp_name; // emp_id: 0,\n      // employeeName: \"\",\n\n      await this.setState({\n        formFields\n      });\n    };\n\n    this.handleSaveClick = () => {\n      let {\n        formFields\n      } = this.state;\n\n      if (this.validator.allValid()) {\n        let data = {\n          date: dateFormat(formFields.date),\n          stock_id: formFields.stock_id,\n          emp_id: formFields.emp_id,\n          qty: Number(formFields.qty),\n          uom: formFields.uom,\n          memo_remarks: formFields.memo_remarks\n        };\n        this.props.commonCreateApi(`stockusagememo/`, data).then(async res => {\n          if (res.status === 201) {\n            this.props.handleCreateNewSave();\n          }\n        });\n      } else {\n        this.validator.showMessages();\n        this.forceUpdate();\n      }\n    };\n  }\n\n  render() {\n    let {\n      formFields,\n      isStockItemUsagePopup,\n      isStockItemUsageEmployeePopup\n    } = this.state;\n    return /*#__PURE__*/React.createElement(NormalModal, {\n      className: \"select-category\",\n      style: {\n        minWidth: \"60%\"\n      },\n      modal: this.props.isCreateNewInventoryPopup,\n      handleModal: this.props.handleCreateNewPopup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: this.props.handleCreateNewPopup,\n      className: \"close\",\n      src: closeIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex h4 justify-content-center p-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    }, \"Stock Usage\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row p-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, \"Item Name\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error-message text-danger validNo fs-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: formFields.itemName,\n      name: \"itemName\",\n      onClick: () => this.handleStockItemUsagePopup(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    })), this.validator.message(\"Item Name\", formFields.itemName, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, \"Qty\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error-message text-danger validNo fs-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 15\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: formFields.qty,\n      name: \"qty\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    })), this.validator.message(\"Quantity\", formFields.qty, \"not_in: 0|integer|required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    }, \"UOM\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error-message text-danger validNo fs-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput //options={channelList}\n    , {\n      value: formFields.uom,\n      name: \"uom\",\n      onChange: this.handleChange,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }\n    })), this.validator.message(\"Unit\", formFields.uom, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    }, \"Staff Name\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error-message text-danger validNo fs-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      value: formFields.employeeName,\n      name: \"employeeName\",\n      onClick: () => this.handleStockItemUsageEmployeePopup(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    })), this.validator.message(\"Staff Name\", formFields.employeeName, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalDate, {\n      value: new Date(formFields.date),\n      name: \"date\",\n      type: \"date\",\n      onChange: this.handleChange,\n      showDisabledMonthNavigation: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }\n    }, \"Remark\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalTextarea, {\n      value: formFields.memo_remarks,\n      name: \"memo_remarks\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"col-3\",\n      mainbg: true,\n      className: \"col-12 ml-4 fs-15 \",\n      label: \"Save\",\n      onClick: this.handleSaveClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"col-3\",\n      resetbg: true,\n      className: \"col-12 ml-4 fs-15 \",\n      label: \"Cancel\",\n      onClick: this.props.handleCreateNewPopup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 13\n      }\n    })), isStockItemUsagePopup ? /*#__PURE__*/React.createElement(StockItemUsagePopup, {\n      isStockItemUsagePopup: isStockItemUsagePopup,\n      handleStockItemUsagePopup: this.handleStockItemUsagePopup,\n      newItem: StockItemUsageList => this.includeNewItems(StockItemUsageList),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }\n    }) : null, isStockItemUsageEmployeePopup ? /*#__PURE__*/React.createElement(StockMemoStaffList, {\n      isStockItemUsageEmployeePopup: isStockItemUsageEmployeePopup,\n      handleStockItemUsageEmployeePopup: this.handleStockItemUsageEmployeePopup,\n      handleSelectedStaff: data => this.handleSelectedStaff(data),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 13\n      }\n    }) : null));\n  }\n\n}\n\nconst mapStateToProps = state => ({// filter: state.dashboard\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    commonCreateApi,\n    commonPatchApi\n  }, dispatch);\n};\n\nexport const CreateNewInventory = connect(mapStateToProps, mapDispatchToProps)(CreateNewInventoryClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Inventory/InventoryMainPage/Model/CreateNewInventory.js"],"names":["React","Component","getCommonApi","commonCreateApi","commonPatchApi","connect","bindActionCreators","NormalButton","NormalModal","NormalInput","TableWrapper","NormalDate","NormalTextarea","closeIcon","Toast","SimpleReactValidator","StockItemUsagePopup","StockMemoStaffList","dateFormat","history","createLogger","CreateNewInventoryClass","state","formFields","itemName","emp_id","employeeName","date","Date","stock_id","qty","uom","memo_remarks","isStockItemUsagePopup","isStockItemUsageEmployeePopup","componentWillMount","validator","element","message","autoForceUpdate","handleChange","target","value","name","setState","handleStockItemUsagePopup","prevState","handleStockItemUsageEmployeePopup","includeNewItems","data","ItemDesc","handleSelectedStaff","id","emp_name","handleSaveClick","allValid","Number","props","then","res","status","handleCreateNewSave","showMessages","forceUpdate","render","minWidth","isCreateNewInventoryPopup","handleCreateNewPopup","StockItemUsageList","mapStateToProps","mapDispatchToProps","dispatch","CreateNewInventory"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACEC,YADF,EAEEC,eAFF,EAGEC,cAHF,QAIO,sBAJP;AAKA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SACEC,YADF,EAEEC,WAFF,EAGEC,WAHF,EAIEC,YAJF,EAKEC,UALF,EAMEC,cANF,QAOO,kBAPP;AAQA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,OAAOC,oBAAP,MAAiC,wBAAjC;AACA,SAASC,mBAAT,QAAoC,uBAApC;AACA,SAASC,kBAAT,QAAmC,sBAAnC;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,SAASC,YAAT,QAA6B,cAA7B;AAEA,OAAO,MAAMC,uBAAN,SAAsCpB,SAAtC,CAAgD;AAAA;AAAA;AAAA,SACrDqB,KADqD,GAC7C;AACNC,MAAAA,UAAU,EAAE;AACVC,QAAAA,QAAQ,EAAE,EADA;AAEVC,QAAAA,MAAM,EAAE,CAFE;AAGVC,QAAAA,YAAY,EAAE,EAHJ;AAIVC,QAAAA,IAAI,EAAE,IAAIC,IAAJ,EAJI;AAKVC,QAAAA,QAAQ,EAAE,CALA;AAMVC,QAAAA,GAAG,EAAE,EANK;AAOVC,QAAAA,GAAG,EAAE,EAPK;AAQVC,QAAAA,YAAY,EAAE;AARJ,OADN;AAWNC,MAAAA,qBAAqB,EAAE,KAXjB;AAYNC,MAAAA,6BAA6B,EAAE;AAZzB,KAD6C;;AAAA,SAgBrDC,kBAhBqD,GAgBhC,MAAM;AACzB,WAAKC,SAAL,GAAiB,IAAIrB,oBAAJ,CAAyB;AACxCsB,QAAAA,OAAO,EAAEC,OAAO,iBACd;AAAM,UAAA,SAAS,EAAC,uBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAyCA,OAAzC,CAFsC;AAIxCC,QAAAA,eAAe,EAAE;AAJuB,OAAzB,CAAjB;AAMD,KAvBoD;;AAAA,SAyBrDC,YAzBqD,GAyBtC,OAAO;AAAEC,MAAAA,MAAM,EAAE;AAAEC,QAAAA,KAAF;AAASC,QAAAA;AAAT;AAAV,KAAP,KAAuC;AACpD,UAAI;AAAEpB,QAAAA;AAAF,UAAiB,KAAKD,KAA1B;AACAC,MAAAA,UAAU,CAACoB,IAAD,CAAV,GAAmBD,KAAnB;AACA,YAAM,KAAKE,QAAL,CAAc;AAClBrB,QAAAA;AADkB,OAAd,CAAN;AAGD,KA/BoD;;AAAA,SAgCrDsB,yBAhCqD,GAgCzB,MAAM;AAChC,WAAKD,QAAL,CAAcE,SAAS,KAAK;AAC1Bb,QAAAA,qBAAqB,EAAE,CAACa,SAAS,CAACb;AADR,OAAL,CAAvB;AAGD,KApCoD;;AAAA,SAqCrDc,iCArCqD,GAqCjB,MAAM;AACxC,WAAKH,QAAL,CAAcE,SAAS,KAAK;AAC1BZ,QAAAA,6BAA6B,EAAE,CAACY,SAAS,CAACZ;AADhB,OAAL,CAAvB;AAGD,KAzCoD;;AAAA,SA0CrDc,eA1CqD,GA0CnC,MAAMC,IAAN,IAAc;AAC9B,WAAKJ,yBAAL;AACA,UAAI;AAAEtB,QAAAA;AAAF,UAAiB,KAAKD,KAA1B;AACAC,MAAAA,UAAU,CAAC,KAAD,CAAV,GAAoB0B,IAAI,CAACnB,GAAzB;AACAP,MAAAA,UAAU,CAAC,KAAD,CAAV,GAAoB0B,IAAI,CAAClB,GAAzB;AACAR,MAAAA,UAAU,CAAC,UAAD,CAAV,GAAyB0B,IAAI,CAACpB,QAA9B;AACAN,MAAAA,UAAU,CAAC,UAAD,CAAV,GAAyB0B,IAAI,CAACC,QAA9B,CAN8B,CAO9B;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,YAAM,KAAKN,QAAL,CAAc;AAAErB,QAAAA;AAAF,OAAd,CAAN;AACD,KAzDoD;;AAAA,SA2DrD4B,mBA3DqD,GA2D/B,MAAMF,IAAN,IAAc;AAClC,WAAKF,iCAAL;AACA,UAAI;AAAExB,QAAAA;AAAF,UAAiB,KAAKD,KAA1B;AACAC,MAAAA,UAAU,CAAC,QAAD,CAAV,GAAuB0B,IAAI,CAACG,EAA5B;AACA7B,MAAAA,UAAU,CAAC,cAAD,CAAV,GAA6B0B,IAAI,CAACI,QAAlC,CAJkC,CAKlC;AACA;;AACA,YAAM,KAAKT,QAAL,CAAc;AAAErB,QAAAA;AAAF,OAAd,CAAN;AACD,KAnEoD;;AAAA,SAqErD+B,eArEqD,GAqEnC,MAAM;AACtB,UAAI;AAAE/B,QAAAA;AAAF,UAAiB,KAAKD,KAA1B;;AAEA,UAAI,KAAKc,SAAL,CAAemB,QAAf,EAAJ,EAA+B;AAC7B,YAAIN,IAAI,GAAG;AACTtB,UAAAA,IAAI,EAAET,UAAU,CAACK,UAAU,CAACI,IAAZ,CADP;AAETE,UAAAA,QAAQ,EAAEN,UAAU,CAACM,QAFZ;AAGTJ,UAAAA,MAAM,EAAEF,UAAU,CAACE,MAHV;AAITK,UAAAA,GAAG,EAAE0B,MAAM,CAACjC,UAAU,CAACO,GAAZ,CAJF;AAKTC,UAAAA,GAAG,EAAER,UAAU,CAACQ,GALP;AAMTC,UAAAA,YAAY,EAAET,UAAU,CAACS;AANhB,SAAX;AAQA,aAAKyB,KAAL,CAAWtD,eAAX,CAA4B,iBAA5B,EAA8C8C,IAA9C,EAAoDS,IAApD,CAAyD,MAAMC,GAAN,IAAa;AACpE,cAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,iBAAKH,KAAL,CAAWI,mBAAX;AACD;AACF,SAJD;AAKD,OAdD,MAcO;AACL,aAAKzB,SAAL,CAAe0B,YAAf;AACA,aAAKC,WAAL;AACD;AACF,KA1FoD;AAAA;;AA4FrDC,EAAAA,MAAM,GAAG;AACP,QAAI;AAAEzC,MAAAA,UAAF;AAAcU,MAAAA,qBAAd;AAAqCC,MAAAA;AAArC,QACF,KAAKZ,KADP;AAEA,wBACE,oBAAC,WAAD;AACE,MAAA,SAAS,EAAE,iBADb;AAEE,MAAA,KAAK,EAAE;AAAE2C,QAAAA,QAAQ,EAAE;AAAZ,OAFT;AAGE,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWS,yBAHpB;AAIE,MAAA,WAAW,EAAE,KAAKT,KAAL,CAAWU,oBAJ1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME;AACE,MAAA,OAAO,EAAE,KAAKV,KAAL,CAAWU,oBADtB;AAEE,MAAA,SAAS,EAAC,OAFZ;AAGE,MAAA,GAAG,EAAEtD,SAHP;AAIE,MAAA,GAAG,EAAC,EAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,eAYE;AAAK,MAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAZF,eAaE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,yCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAEE;AAAM,MAAA,SAAS,EAAC,yCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,CADF,CADF,eASE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AACE,MAAA,KAAK,EAAEU,UAAU,CAACC,QADpB;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,OAAO,EAAE,MAAM,KAAKqB,yBAAL,EAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CATF,EAgBG,KAAKT,SAAL,CAAeE,OAAf,CACC,WADD,EAECf,UAAU,CAACC,QAFZ,EAGC,UAHD,CAhBH,CADF,eAwBE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,yCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAEE;AAAM,MAAA,SAAS,EAAC,yCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,CADF,eAKE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AACE,MAAA,KAAK,EAAED,UAAU,CAACO,GADpB;AAEE,MAAA,IAAI,EAAC,KAFP;AAGE,MAAA,QAAQ,EAAE,KAAKU,YAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CALF,EAYG,KAAKJ,SAAL,CAAeE,OAAf,CACC,UADD,EAECf,UAAU,CAACO,GAFZ,EAGC,4BAHD,CAZH,CAxBF,eA2CE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,yCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAEE;AAAM,MAAA,SAAS,EAAC,yCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,CADF,CADF,eASE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD,CACE;AADF;AAEE,MAAA,KAAK,EAAEP,UAAU,CAACQ,GAFpB;AAGE,MAAA,IAAI,EAAC,KAHP;AAIE,MAAA,QAAQ,EAAE,KAAKS,YAJjB;AAKE,MAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CATF,EAkBG,KAAKJ,SAAL,CAAeE,OAAf,CAAuB,MAAvB,EAA+Bf,UAAU,CAACQ,GAA1C,EAA+C,UAA/C,CAlBH,CA3CF,eA+DE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,yCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAEE;AAAM,MAAA,SAAS,EAAC,yCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,CADF,CADF,eASE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AACE,MAAA,KAAK,EAAER,UAAU,CAACG,YADpB;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,OAAO,EAAE,MAAM,KAAKqB,iCAAL,EAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CATF,EAgBG,KAAKX,SAAL,CAAeE,OAAf,CACC,YADD,EAECf,UAAU,CAACG,YAFZ,EAGC,UAHD,CAhBH,CA/DF,eAqFE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,yCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AACE,MAAA,KAAK,EAAE,IAAIE,IAAJ,CAASL,UAAU,CAACI,IAApB,CADT;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,IAAI,EAAC,MAHP;AAIE,MAAA,QAAQ,EAAE,KAAKa,YAJjB;AAKE,MAAA,2BAA2B,MAL7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAJF,CArFF,eAmGE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,yCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CADF,eAME;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AACE,MAAA,KAAK,EAAEjB,UAAU,CAACS,YADpB;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,QAAQ,EAAE,KAAKQ,YAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CANF,CAnGF,CAbF,eA+HE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,WAAW,EAAE,OADf;AAEE,MAAA,MAAM,EAAE,IAFV;AAGE,MAAA,SAAS,EAAC,oBAHZ;AAIE,MAAA,KAAK,EAAC,MAJR;AAKE,MAAA,OAAO,EAAE,KAAKc,eALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE,oBAAC,YAAD;AACE,MAAA,WAAW,EAAE,OADf;AAEE,MAAA,OAAO,EAAE,IAFX;AAGE,MAAA,SAAS,EAAC,oBAHZ;AAIE,MAAA,KAAK,EAAC,QAJR;AAKE,MAAA,OAAO,EAAE,KAAKG,KAAL,CAAWU,oBALtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,CADF,EAkBGlC,qBAAqB,gBACpB,oBAAC,mBAAD;AACE,MAAA,qBAAqB,EAAEA,qBADzB;AAEE,MAAA,yBAAyB,EAAE,KAAKY,yBAFlC;AAGE,MAAA,OAAO,EAAEuB,kBAAkB,IACzB,KAAKpB,eAAL,CAAqBoB,kBAArB,CAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADoB,GAQlB,IA1BN,EA2BGlC,6BAA6B,gBAC5B,oBAAC,kBAAD;AACE,MAAA,6BAA6B,EAAEA,6BADjC;AAEE,MAAA,iCAAiC,EAC/B,KAAKa,iCAHT;AAKE,MAAA,mBAAmB,EAAEE,IAAI,IAAI,KAAKE,mBAAL,CAAyBF,IAAzB,CAL/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD4B,GAQ1B,IAnCN,CA/HF,CADF;AAuKD;;AAtQoD;;AAyQvD,MAAMoB,eAAe,GAAG/C,KAAK,KAAK,CAChC;AADgC,CAAL,CAA7B;;AAIA,MAAMgD,kBAAkB,GAAGC,QAAQ,IAAI;AACrC,SAAOjE,kBAAkB,CACvB;AACEJ,IAAAA,YADF;AAEEC,IAAAA,eAFF;AAGEC,IAAAA;AAHF,GADuB,EAMvBmE,QANuB,CAAzB;AAQD,CATD;;AAWA,OAAO,MAAMC,kBAAkB,GAAGnE,OAAO,CACvCgE,eADuC,EAEvCC,kBAFuC,CAAP,CAGhCjD,uBAHgC,CAA3B","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  NormalButton,\r\n  NormalModal,\r\n  NormalInput,\r\n  TableWrapper,\r\n  NormalDate,\r\n  NormalTextarea,\r\n} from \"component/common\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { Toast } from \"service/toast\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { StockItemUsagePopup } from \"./StockItemUsagePopup\";\r\nimport { StockMemoStaffList } from \"./StockMemoStaffList\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { history } from \"helpers\";\r\nimport { createLogger } from \"redux-logger\";\r\n\r\nexport class CreateNewInventoryClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      itemName: \"\",\r\n      emp_id: 0,\r\n      employeeName: \"\",\r\n      date: new Date(),\r\n      stock_id: 0,\r\n      qty: \"\",\r\n      uom: \"\",\r\n      memo_remarks: \"\",\r\n    },\r\n    isStockItemUsagePopup: false,\r\n    isStockItemUsageEmployeePopup: false,\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message font-md\">{message}</span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n  handleStockItemUsagePopup = () => {\r\n    this.setState(prevState => ({\r\n      isStockItemUsagePopup: !prevState.isStockItemUsagePopup,\r\n    }));\r\n  };\r\n  handleStockItemUsageEmployeePopup = () => {\r\n    this.setState(prevState => ({\r\n      isStockItemUsageEmployeePopup: !prevState.isStockItemUsageEmployeePopup,\r\n    }));\r\n  };\r\n  includeNewItems = async data => {\r\n    this.handleStockItemUsagePopup();\r\n    let { formFields } = this.state;\r\n    formFields[\"qty\"] = data.qty;\r\n    formFields[\"uom\"] = data.uom;\r\n    formFields[\"stock_id\"] = data.stock_id;\r\n    formFields[\"itemName\"] = data.ItemDesc;\r\n    // ItemDesc: \"FIRE DRAGON ESS OIL 火龙液 (5ML)\";\r\n    // item_code: \"23000002\";\r\n    // link_code: \"\";\r\n    // qty: \"5\";\r\n    // stock_id: 5990;\r\n    // uom: \"BOX\";\r\n    // uom_id: 5615;\r\n    await this.setState({ formFields });\r\n  };\r\n\r\n  handleSelectedStaff = async data => {\r\n    this.handleStockItemUsageEmployeePopup();\r\n    let { formFields } = this.state;\r\n    formFields[\"emp_id\"] = data.id;\r\n    formFields[\"employeeName\"] = data.emp_name;\r\n    // emp_id: 0,\r\n    // employeeName: \"\",\r\n    await this.setState({ formFields });\r\n  };\r\n\r\n  handleSaveClick = () => {\r\n    let { formFields } = this.state;\r\n\r\n    if (this.validator.allValid()) {\r\n      let data = {\r\n        date: dateFormat(formFields.date),\r\n        stock_id: formFields.stock_id,\r\n        emp_id: formFields.emp_id,\r\n        qty: Number(formFields.qty),\r\n        uom: formFields.uom,\r\n        memo_remarks: formFields.memo_remarks,\r\n      };\r\n      this.props.commonCreateApi(`stockusagememo/`, data).then(async res => {\r\n        if (res.status === 201) {\r\n          this.props.handleCreateNewSave();\r\n        }\r\n      });\r\n    } else {\r\n      this.validator.showMessages();\r\n      this.forceUpdate();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let { formFields, isStockItemUsagePopup, isStockItemUsageEmployeePopup } =\r\n      this.state;\r\n    return (\r\n      <NormalModal\r\n        className={\"select-category\"}\r\n        style={{ minWidth: \"60%\" }}\r\n        modal={this.props.isCreateNewInventoryPopup}\r\n        handleModal={this.props.handleCreateNewPopup}\r\n      >\r\n        <img\r\n          onClick={this.props.handleCreateNewPopup}\r\n          className=\"close\"\r\n          src={closeIcon}\r\n          alt=\"\"\r\n        />\r\n        <div className=\"d-flex h4 justify-content-center p-3\">Stock Usage</div>\r\n        <div className=\"row p-3\">\r\n          <div className=\"col-4 mb-3\">\r\n            <div>\r\n              <label className=\"text-left text-black common-label-text \">\r\n                Item Name\r\n                <span className=\"error-message text-danger validNo fs-16\">\r\n                  *\r\n                </span>\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                value={formFields.itemName}\r\n                name=\"itemName\"\r\n                onClick={() => this.handleStockItemUsagePopup()}\r\n              />\r\n            </div>\r\n            {this.validator.message(\r\n              \"Item Name\",\r\n              formFields.itemName,\r\n              \"required\"\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-4 mb-3\">\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Qty\r\n              <span className=\"error-message text-danger validNo fs-16\">*</span>\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                value={formFields.qty}\r\n                name=\"qty\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </div>\r\n            {this.validator.message(\r\n              \"Quantity\",\r\n              formFields.qty,\r\n              \"not_in: 0|integer|required\"\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-4 mb-3\">\r\n            <div>\r\n              <label className=\"text-left text-black common-label-text \">\r\n                UOM\r\n                <span className=\"error-message text-danger validNo fs-16\">\r\n                  *\r\n                </span>\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                //options={channelList}\r\n                value={formFields.uom}\r\n                name=\"uom\"\r\n                onChange={this.handleChange}\r\n                disabled\r\n              />\r\n            </div>\r\n            {this.validator.message(\"Unit\", formFields.uom, \"required\")}\r\n          </div>\r\n          <div className=\"col-4 mb-3\">\r\n            <div>\r\n              <label className=\"text-left text-black common-label-text \">\r\n                Staff Name\r\n                <span className=\"error-message text-danger validNo fs-16\">\r\n                  *\r\n                </span>\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                value={formFields.employeeName}\r\n                name=\"employeeName\"\r\n                onClick={() => this.handleStockItemUsageEmployeePopup()}\r\n              />\r\n            </div>\r\n            {this.validator.message(\r\n              \"Staff Name\",\r\n              formFields.employeeName,\r\n              \"required\"\r\n            )}\r\n          </div>\r\n          <div className=\"col-4 mb-3\">\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Date\r\n            </label>\r\n            <div className=\"\">\r\n              <NormalDate\r\n                value={new Date(formFields.date)}\r\n                name=\"date\"\r\n                type=\"date\"\r\n                onChange={this.handleChange}\r\n                showDisabledMonthNavigation\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-4 mb-3\">\r\n            <div>\r\n              <label className=\"text-left text-black common-label-text \">\r\n                Remark\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <NormalTextarea\r\n                value={formFields.memo_remarks}\r\n                name=\"memo_remarks\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"p-3\">\r\n          <div className=\"d-flex justify-content-end w-100\">\r\n            <NormalButton\r\n              buttonClass={\"col-3\"}\r\n              mainbg={true}\r\n              className=\"col-12 ml-4 fs-15 \"\r\n              label=\"Save\"\r\n              onClick={this.handleSaveClick}\r\n            />\r\n            <NormalButton\r\n              buttonClass={\"col-3\"}\r\n              resetbg={true}\r\n              className=\"col-12 ml-4 fs-15 \"\r\n              label=\"Cancel\"\r\n              onClick={this.props.handleCreateNewPopup}\r\n            />\r\n          </div>\r\n\r\n          {isStockItemUsagePopup ? (\r\n            <StockItemUsagePopup\r\n              isStockItemUsagePopup={isStockItemUsagePopup}\r\n              handleStockItemUsagePopup={this.handleStockItemUsagePopup}\r\n              newItem={StockItemUsageList =>\r\n                this.includeNewItems(StockItemUsageList)\r\n              }\r\n            />\r\n          ) : null}\r\n          {isStockItemUsageEmployeePopup ? (\r\n            <StockMemoStaffList\r\n              isStockItemUsageEmployeePopup={isStockItemUsageEmployeePopup}\r\n              handleStockItemUsageEmployeePopup={\r\n                this.handleStockItemUsageEmployeePopup\r\n              }\r\n              handleSelectedStaff={data => this.handleSelectedStaff(data)}\r\n            />\r\n          ) : null}\r\n        </div>\r\n      </NormalModal>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const CreateNewInventory = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(CreateNewInventoryClass);\r\n"]},"metadata":{},"sourceType":"module"}