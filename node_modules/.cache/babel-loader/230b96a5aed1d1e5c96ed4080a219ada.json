{"ast":null,"code":"import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{WidthProvider,Responsive}from\"react-grid-layout\";var ReactGridLayout=WidthProvider(Responsive);export var LayoutEditor=/*#__PURE__*/function(_React$PureComponent){_inherits(LayoutEditor,_React$PureComponent);var _super=_createSuper(LayoutEditor);function LayoutEditor(props){var _this;_classCallCheck(this,LayoutEditor);_this=_super.call(this,props);_this.breakpoints={lg:992,md:768,sm:576};_this.onLayoutChange=function(layout,layouts){console.log(layout,layouts);_this.setState({layout:layouts});_this.props.onChange(layouts);};var _layout=_this.generateLayout();_this.state={layout:_layout};return _this;}_createClass(LayoutEditor,[{key:\"generateLayout\",value:function generateLayout(){var fields=this.props.fields;return{lg:fields.map(function(e,index){if(e.layout){var layout=e.layout.lg;if(layout.w!=0)return{x:layout.x,y:layout.y,w:layout.w,h:layout.h,i:\"\".concat(e.id)};}return{i:\"\".concat(e.id),x:index%4*3,y:Math.ceil(index/4)*3,w:3,h:3};}),md:fields.map(function(e,index){if(e.layout){var layout=e.layout.md;if(layout.w!=0)return{x:layout.x,y:layout.y,w:layout.w,h:layout.h,i:\"\".concat(e.id)};}return{i:\"\".concat(e.id),x:index%3*4,y:Math.ceil(index/3)*3,w:4,h:3};}),sm:fields.map(function(e,index){if(e.layout){var layout=e.layout.sm;if(layout.w!=0)return{x:layout.x,y:layout.y,w:layout.w,h:layout.h,i:\"\".concat(e.id)};}return{i:\"\".concat(e.id),x:index,y:0,w:12,h:3};})};}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},this.props.editable?/*#__PURE__*/React.createElement(ReactGridLayout,Object.assign({className:\"layout\",cols:{lg:12,md:12,sm:12,xs:1,xxs:1},rowHeight:30,layouts:this.state.layout,onLayoutChange:this.onLayoutChange,breakpoints:this.breakpoints,margin:[10,2]},this.props),this.props.children):/*#__PURE__*/React.createElement(ReactGridLayout,Object.assign({className:\"layout\",cols:{lg:12,md:12,sm:12,xs:1,xxs:1},rowHeight:30,layouts:this.state.layout,isDraggable:false,isResizable:false,breakpoints:this.breakpoints},this.props),this.props.children));}}]);return LayoutEditor;}(React.PureComponent);","map":{"version":3,"sources":["F:/webfe/src/component/common/LayoutEditor/index.js"],"names":["React","WidthProvider","Responsive","ReactGridLayout","LayoutEditor","props","breakpoints","lg","md","sm","onLayoutChange","layout","layouts","console","log","setState","onChange","generateLayout","state","fields","map","e","index","w","x","y","h","i","id","Math","ceil","editable","xs","xxs","children","PureComponent"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { WidthProvider, Responsive } from \"react-grid-layout\";\n\nconst ReactGridLayout = WidthProvider(Responsive);\n\nexport class LayoutEditor extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    const layout = this.generateLayout();\n    this.state = { layout };\n  }\n\n  breakpoints = { lg: 992, md: 768, sm: 576 };\n\n  generateLayout() {\n    const fields = this.props.fields;\n    return {\n      lg: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.lg;\n          if (layout.w != 0)\n            return {\n              x: layout.x,\n              y: layout.y,\n              w: layout.w,\n              h: layout.h,\n              i: `${e.id}`,\n            };\n        }\n\n        return {\n          i: `${e.id}`,\n          x: (index % 4) * 3,\n          y: Math.ceil(index / 4) * 3,\n          w: 3,\n          h: 3,\n        };\n      }),\n      md: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.md;\n          if (layout.w != 0)\n            return {\n              x: layout.x,\n              y: layout.y,\n              w: layout.w,\n              h: layout.h,\n              i: `${e.id}`,\n            };\n        }\n        return {\n          i: `${e.id}`,\n          x: (index % 3) * 4,\n          y: Math.ceil(index / 3) * 3,\n          w: 4,\n          h: 3,\n        };\n      }),\n      sm: fields.map((e, index) => {\n        if (e.layout) {\n          let layout = e.layout.sm;\n          if (layout.w != 0)\n            return {\n              x: layout.x,\n              y: layout.y,\n              w: layout.w,\n              h: layout.h,\n              i: `${e.id}`,\n            };\n        }\n        return {\n          i: `${e.id}`,\n          x: index,\n          y: 0,\n          w: 12,\n          h: 3,\n        };\n      }),\n    };\n  }\n\n  onLayoutChange = (layout, layouts) => {\n    console.log(layout, layouts);\n    this.setState({ layout: layouts });\n    this.props.onChange(layouts);\n  };\n\n  render() {\n    return (\n      <div className=\"container-fluid\">\n        {this.props.editable ? (\n          <ReactGridLayout\n            className=\"layout\"\n            cols={{ lg: 12, md: 12, sm: 12, xs: 1, xxs: 1 }}\n            rowHeight={30}\n            layouts={this.state.layout}\n            onLayoutChange={this.onLayoutChange}\n            breakpoints={this.breakpoints}\n            margin={[10, 2]}\n            {...this.props}\n          >\n            {this.props.children}\n          </ReactGridLayout>\n        ) : (\n          <ReactGridLayout\n            className=\"layout\"\n            cols={{ lg: 12, md: 12, sm: 12, xs: 1, xxs: 1 }}\n            rowHeight={30}\n            layouts={this.state.layout}\n            isDraggable={false}\n            isResizable={false}\n            breakpoints={this.breakpoints}\n            {...this.props}\n          >\n            {this.props.children}\n          </ReactGridLayout>\n        )}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}