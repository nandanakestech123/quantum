{"ast":null,"code":"var _jsxFileName = \"E:\\\\newfrontend\\\\webfe\\\\src\\\\component\\\\Admin\\\\Cart\\\\BillOps\\\\billOps.js\";\nimport React, { Component } from \"react\";\nimport \"./style.scss\";\nimport { NormalButton, NormalInput, NormalSelect, InputSearch, NormalModal, TableWrapper } from \"component/common\";\nimport { dateFormat } from \"service/helperFunctions\";\nimport _ from \"lodash\";\nimport { history } from \"helpers\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, updateForm, commonCreateApi, commonDeleteApi, commonPatchApi } from \"redux/actions/common\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { VoidPaidTrans } from \"./voidPaidTrans.js\";\nimport { withTranslation } from \"react-i18next\";\nexport class BillOpsClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tstaffList: [{}],\n      headerDetails: [{\n        label: \"Date\",\n        sortKey: false,\n        width: \"60px\"\n      }, {\n        label: \"Treatment\",\n        width: \"120px\"\n      }, {\n        label: \"Trans Ref\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Discription\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Type\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Exp Date\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Amount\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Status\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Rev\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Treat No\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Limit\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Sel Staff\",\n        sortKey: false,\n        width: \"55px\"\n      }, {\n        label: \"Staff\",\n        sortKey: false,\n        width: \"55px\"\n      }],\n      // cartData: {},\n      yearList: [],\n      selectedYear: new Date().getFullYear(),\n      isOpenTreatmentDone: false,\n      tsStaff: {},\n      workPoint: 0,\n      isOpenReversal: false,\n      menuItems: [{\n        to: \"/admin/catalog\",\n        label: \"Suspend Bill\",\n        id: \"suspendBill\"\n      }, {\n        to: \"/admin/catalog\",\n        label: \"Recall Sus Bill\",\n        id: \"recallSusBill\"\n      }, {\n        to: \"/admin/catalog\",\n        label: \"Recall Tran\",\n        id: \"reacallBill\"\n      }, {\n        to: \"/admin/catalog\",\n        label: \"Reprint Bill\",\n        id: \"reprint\"\n      }, {\n        to: \"/admin/catalog\",\n        label: \"Void item/bill\",\n        id: \"VoidItemBill\"\n      }, {\n        to: \"/admin/catalog\",\n        label: \"Void Paid Trans\",\n        id: \"voidPaidTrns\"\n      }],\n      activeMenu: \"voidPaidTrns\"\n    };\n\n    this.componentWillMount = () => {\n      this.validator = new SimpleReactValidator({\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message text-danger validNo fs14\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 9\n          }\n        }, message),\n        autoForceUpdate: this\n      }); // this.props.getCommonApi('treatmentdone/Year/').then((key) => {\n      //     let { status, data } = key;\n      //     let { yearList } = this.state;\n      //     for (let value of data) {\n      //         yearList.push({ value: value, label: value })\n      //     }\n      //     this.setState({ yearList })\n      // })\n      // this.getCart();\n    };\n\n    this.getCart = () => {\n      console.log(this.props, \"sfgdfsgdfghgf\");\n      let {\n        roomList,\n        sourceList,\n        staffList,\n        cartData,\n        duration,\n        tstaffList,\n        selectedYear\n      } = this.state;\n      this.props.getCommonApi(`treatmentdone/?year=${selectedYear}&cust_id=${this.props.basicApptDetail.custId}`).then(key => {\n        cartData = key;\n        tstaffList = key.data;\n        this.setState({\n          tstaffList\n        });\n      });\n    };\n\n    this.handleYearChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        selectedYear\n      } = this.state;\n      selectedYear = value;\n      await this.setState({\n        selectedYear\n      });\n      this.getCart();\n    };\n\n    this.getDataFromRes = data => {\n      let {\n        formFields,\n        cartData,\n        updateFields,\n        postFields\n      } = this.state;\n      formFields[\"Item\"] = data.value.Item;\n      formFields[\"Price\"] = data.value.Price;\n      formFields[\"Room\"] = data.value.Room;\n      updateFields[\"Room\"] = data.value.Room;\n      formFields[\"Source\"] = data.value.Source;\n      updateFields[\"Source\"] = data.value.Source;\n      formFields[\"add_duration\"] = data.value.add_duration;\n      formFields[\"new_remark\"] = data.value.new_remark;\n      updateFields[\"new_remark\"] = data.value.new_remark;\n      postFields[\"times\"] = data.value.times;\n      postFields[\"work_point\"] = data.value.work_point;\n      this.setState({\n        formFields,\n        updateFields,\n        postFields\n      });\n    };\n\n    this.handleSubmit = id => {};\n\n    this.handleDialog = () => {\n      this.setState({\n        isOpenTreatmentDone: false,\n        isOpenReversal: false\n      });\n    };\n\n    this.handleSearch = event => {\n      event.persist();\n\n      if (!this.debouncedFn) {\n        this.debouncedFn = _.debounce(() => {\n          let searchString = event.target.value;\n          this.props.getCommonApi(`custappt/?search=${searchString}`).then(key => {\n            let {\n              status,\n              data\n            } = key;\n\n            if (status === 200) {\n              // for (let value of data) {\n              //     customerList.push({ value: value.id, label: value.emp_name })\n              // }\n              this.setState({\n                customerOption: data\n              });\n            }\n          });\n        }, 500);\n      }\n\n      this.debouncedFn();\n    };\n\n    this.handleSelectCustomer = async data => {\n      let {\n        formFields\n      } = this.state;\n      formFields[\"custId\"] = data.id;\n      formFields[\"custName\"] = data.cust_name;\n      this.setState({\n        formFields,\n        isOpenCustomer: false,\n        customerOption: []\n      });\n      await this.props.updateForm(\"basicApptDetail\", formFields);\n      console.log(this.props.basicApptDetail, \"sdfsadfasdf\");\n    };\n\n    this.handleCheckout = () => {\n      let {\n        isOpenPayment\n      } = this.state;\n      isOpenPayment = true;\n      this.setState({\n        isOpenPayment\n      });\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      let {\n        formFields\n      } = this.state;\n      formFields[name] = value;\n      await this.setState({\n        formFields\n      }); // this.props.updateForm('customerDetail', formFields)\n      // await this.props.updateForm('appointmentCustomerDetail', formFields)\n    };\n\n    this.handleMenu = (item, index) => {};\n  }\n\n  render() {\n    let {\n      tstaffList = [],\n      menuItems = [],\n      activeMenu,\n      selectedYear,\n      yearList,\n      isOpenTreatmentDone,\n      headerDetails,\n      tsStaff,\n      isOpenReversal,\n      treatmentIds\n    } = this.state;\n    let {\n      basicApptDetail,\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row treatment-done-new p-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"fs-18 font-700 mb-3 title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, t(\"Transaction Detail\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      buttonClass: \"mx-2\",\n      mainbg: true,\n      className: \"fs-15 clear-line\",\n      label: \"Back\",\n      outline: false,\n      onClick: () => history.push(`/admin/cart`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    }, menuItems.length > 0 ? menuItems.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: `menus fs-14 mr-4 ${activeMenu === data.id ? \"active\" : \"\"}`,\n        onClick: () => this.handleMenu(data.id, data.label),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 23\n        }\n      }, t(data.label));\n    }) : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(VoidPaidTrans, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  selected_cstomer: state.common.selected_cstomer,\n  basicApptDetail: state.appointment.basicApptDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    // getCustomer,\n    getCommonApi,\n    updateForm,\n    commonCreateApi,\n    commonPatchApi,\n    commonDeleteApi\n  }, dispatch);\n};\n\nexport const BillOps = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(BillOpsClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/Cart/BillOps/billOps.js"],"names":["React","Component","NormalButton","NormalInput","NormalSelect","InputSearch","NormalModal","TableWrapper","dateFormat","_","history","connect","bindActionCreators","getCommonApi","updateForm","commonCreateApi","commonDeleteApi","commonPatchApi","SimpleReactValidator","VoidPaidTrans","withTranslation","BillOpsClass","state","tstaffList","headerDetails","label","sortKey","width","yearList","selectedYear","Date","getFullYear","isOpenTreatmentDone","tsStaff","workPoint","isOpenReversal","menuItems","to","id","activeMenu","componentWillMount","validator","element","message","autoForceUpdate","getCart","console","log","props","roomList","sourceList","staffList","cartData","duration","basicApptDetail","custId","then","key","data","setState","handleYearChange","target","value","name","getDataFromRes","formFields","updateFields","postFields","Item","Price","Room","Source","add_duration","new_remark","times","work_point","handleSubmit","handleDialog","handleSearch","event","persist","debouncedFn","debounce","searchString","status","customerOption","handleSelectCustomer","cust_name","isOpenCustomer","handleCheckout","isOpenPayment","handleChange","handleMenu","item","index","render","treatmentIds","t","push","length","map","mapStateToProps","selected_cstomer","common","appointment","mapDispatchToProps","dispatch","BillOps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,cAAP;AACA,SACEC,YADF,EAEEC,WAFF,EAGEC,YAHF,EAIEC,WAJF,EAKEC,WALF,EAMEC,YANF,QAOO,kBAPP;AAQA,SAASC,UAAT,QAA2B,yBAA3B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SACEC,YADF,EAEEC,UAFF,EAGEC,eAHF,EAIEC,eAJF,EAKEC,cALF,QAMO,sBANP;AAOA,OAAOC,oBAAP,MAAiC,wBAAjC;AACA,SAASC,aAAT,QAA8B,oBAA9B;AACA,SAASC,eAAT,QAAgC,eAAhC;AAEA,OAAO,MAAMC,YAAN,SAA2BpB,SAA3B,CAAqC;AAAA;AAAA;AAAA,SAC1CqB,KAD0C,GAClC;AACNC,MAAAA,UAAU,EAAE,CAAC,EAAD,CADN;AAENC,MAAAA,aAAa,EAAE,CACb;AAAEC,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,OAAO,EAAE,KAA1B;AAAiCC,QAAAA,KAAK,EAAE;AAAxC,OADa,EAEb;AAAEF,QAAAA,KAAK,EAAE,WAAT;AAAsBE,QAAAA,KAAK,EAAE;AAA7B,OAFa,EAGb;AAAEF,QAAAA,KAAK,EAAE,WAAT;AAAsBC,QAAAA,OAAO,EAAE,KAA/B;AAAsCC,QAAAA,KAAK,EAAE;AAA7C,OAHa,EAIb;AAAEF,QAAAA,KAAK,EAAE,aAAT;AAAwBC,QAAAA,OAAO,EAAE,KAAjC;AAAwCC,QAAAA,KAAK,EAAE;AAA/C,OAJa,EAKb;AAAEF,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,OAAO,EAAE,KAA1B;AAAiCC,QAAAA,KAAK,EAAE;AAAxC,OALa,EAMb;AAAEF,QAAAA,KAAK,EAAE,UAAT;AAAqBC,QAAAA,OAAO,EAAE,KAA9B;AAAqCC,QAAAA,KAAK,EAAE;AAA5C,OANa,EAOb;AAAEF,QAAAA,KAAK,EAAE,QAAT;AAAmBC,QAAAA,OAAO,EAAE,KAA5B;AAAmCC,QAAAA,KAAK,EAAE;AAA1C,OAPa,EAQb;AAAEF,QAAAA,KAAK,EAAE,QAAT;AAAmBC,QAAAA,OAAO,EAAE,KAA5B;AAAmCC,QAAAA,KAAK,EAAE;AAA1C,OARa,EASb;AAAEF,QAAAA,KAAK,EAAE,KAAT;AAAgBC,QAAAA,OAAO,EAAE,KAAzB;AAAgCC,QAAAA,KAAK,EAAE;AAAvC,OATa,EAUb;AAAEF,QAAAA,KAAK,EAAE,UAAT;AAAqBC,QAAAA,OAAO,EAAE,KAA9B;AAAqCC,QAAAA,KAAK,EAAE;AAA5C,OAVa,EAWb;AAAEF,QAAAA,KAAK,EAAE,OAAT;AAAkBC,QAAAA,OAAO,EAAE,KAA3B;AAAkCC,QAAAA,KAAK,EAAE;AAAzC,OAXa,EAYb;AAAEF,QAAAA,KAAK,EAAE,WAAT;AAAsBC,QAAAA,OAAO,EAAE,KAA/B;AAAsCC,QAAAA,KAAK,EAAE;AAA7C,OAZa,EAab;AAAEF,QAAAA,KAAK,EAAE,OAAT;AAAkBC,QAAAA,OAAO,EAAE,KAA3B;AAAkCC,QAAAA,KAAK,EAAE;AAAzC,OAba,CAFT;AAiBN;AACAC,MAAAA,QAAQ,EAAE,EAlBJ;AAmBNC,MAAAA,YAAY,EAAE,IAAIC,IAAJ,GAAWC,WAAX,EAnBR;AAoBNC,MAAAA,mBAAmB,EAAE,KApBf;AAqBNC,MAAAA,OAAO,EAAE,EArBH;AAsBNC,MAAAA,SAAS,EAAE,CAtBL;AAuBNC,MAAAA,cAAc,EAAE,KAvBV;AAwBNC,MAAAA,SAAS,EAAE,CACT;AAAEC,QAAAA,EAAE,EAAE,gBAAN;AAAwBZ,QAAAA,KAAK,EAAE,cAA/B;AAA+Ca,QAAAA,EAAE,EAAE;AAAnD,OADS,EAET;AAAED,QAAAA,EAAE,EAAE,gBAAN;AAAwBZ,QAAAA,KAAK,EAAE,iBAA/B;AAAkDa,QAAAA,EAAE,EAAE;AAAtD,OAFS,EAGT;AAAED,QAAAA,EAAE,EAAE,gBAAN;AAAwBZ,QAAAA,KAAK,EAAE,aAA/B;AAA8Ca,QAAAA,EAAE,EAAE;AAAlD,OAHS,EAIT;AAAED,QAAAA,EAAE,EAAE,gBAAN;AAAwBZ,QAAAA,KAAK,EAAE,cAA/B;AAA+Ca,QAAAA,EAAE,EAAE;AAAnD,OAJS,EAKT;AAAED,QAAAA,EAAE,EAAE,gBAAN;AAAwBZ,QAAAA,KAAK,EAAE,gBAA/B;AAAiDa,QAAAA,EAAE,EAAE;AAArD,OALS,EAMT;AAAED,QAAAA,EAAE,EAAE,gBAAN;AAAwBZ,QAAAA,KAAK,EAAE,iBAA/B;AAAkDa,QAAAA,EAAE,EAAE;AAAtD,OANS,CAxBL;AAgCNC,MAAAA,UAAU,EAAE;AAhCN,KADkC;;AAAA,SAoC1CC,kBApC0C,GAoCrB,MAAM;AACzB,WAAKC,SAAL,GAAiB,IAAIvB,oBAAJ,CAAyB;AACxCwB,QAAAA,OAAO,EAAEC,OAAO,iBACd;AAAM,UAAA,SAAS,EAAC,wCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGA,OADH,CAFsC;AAMxCC,QAAAA,eAAe,EAAE;AANuB,OAAzB,CAAjB,CADyB,CASzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACD,KAvDyC;;AAAA,SAyD1CC,OAzD0C,GAyDhC,MAAM;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB,EAAwB,eAAxB;AACA,UAAI;AACFC,QAAAA,QADE;AAEFC,QAAAA,UAFE;AAGFC,QAAAA,SAHE;AAIFC,QAAAA,QAJE;AAKFC,QAAAA,QALE;AAMF9B,QAAAA,UANE;AAOFM,QAAAA;AAPE,UAQA,KAAKP,KART;AASA,WAAK0B,KAAL,CACGnC,YADH,CAEK,uBAAsBgB,YAAa,YAAW,KAAKmB,KAAL,CAAWM,eAAX,CAA2BC,MAAO,EAFrF,EAIGC,IAJH,CAIQC,GAAG,IAAI;AACXL,QAAAA,QAAQ,GAAGK,GAAX;AACAlC,QAAAA,UAAU,GAAGkC,GAAG,CAACC,IAAjB;AACA,aAAKC,QAAL,CAAc;AAAEpC,UAAAA;AAAF,SAAd;AACD,OARH;AASD,KA7EyC;;AAAA,SA+E1CqC,gBA/E0C,GA+EvB,OAAO;AAAEC,MAAAA,MAAM,EAAE;AAAEC,QAAAA,KAAF;AAASC,QAAAA;AAAT;AAAV,KAAP,KAAuC;AACxD,UAAI;AAAElC,QAAAA;AAAF,UAAmB,KAAKP,KAA5B;AACAO,MAAAA,YAAY,GAAGiC,KAAf;AACA,YAAM,KAAKH,QAAL,CAAc;AAClB9B,QAAAA;AADkB,OAAd,CAAN;AAGA,WAAKgB,OAAL;AACD,KAtFyC;;AAAA,SAwF1CmB,cAxF0C,GAwFzBN,IAAI,IAAI;AACvB,UAAI;AAAEO,QAAAA,UAAF;AAAcb,QAAAA,QAAd;AAAwBc,QAAAA,YAAxB;AAAsCC,QAAAA;AAAtC,UAAqD,KAAK7C,KAA9D;AACA2C,MAAAA,UAAU,CAAC,MAAD,CAAV,GAAqBP,IAAI,CAACI,KAAL,CAAWM,IAAhC;AACAH,MAAAA,UAAU,CAAC,OAAD,CAAV,GAAsBP,IAAI,CAACI,KAAL,CAAWO,KAAjC;AACAJ,MAAAA,UAAU,CAAC,MAAD,CAAV,GAAqBP,IAAI,CAACI,KAAL,CAAWQ,IAAhC;AACAJ,MAAAA,YAAY,CAAC,MAAD,CAAZ,GAAuBR,IAAI,CAACI,KAAL,CAAWQ,IAAlC;AACAL,MAAAA,UAAU,CAAC,QAAD,CAAV,GAAuBP,IAAI,CAACI,KAAL,CAAWS,MAAlC;AACAL,MAAAA,YAAY,CAAC,QAAD,CAAZ,GAAyBR,IAAI,CAACI,KAAL,CAAWS,MAApC;AACAN,MAAAA,UAAU,CAAC,cAAD,CAAV,GAA6BP,IAAI,CAACI,KAAL,CAAWU,YAAxC;AACAP,MAAAA,UAAU,CAAC,YAAD,CAAV,GAA2BP,IAAI,CAACI,KAAL,CAAWW,UAAtC;AACAP,MAAAA,YAAY,CAAC,YAAD,CAAZ,GAA6BR,IAAI,CAACI,KAAL,CAAWW,UAAxC;AACAN,MAAAA,UAAU,CAAC,OAAD,CAAV,GAAsBT,IAAI,CAACI,KAAL,CAAWY,KAAjC;AACAP,MAAAA,UAAU,CAAC,YAAD,CAAV,GAA2BT,IAAI,CAACI,KAAL,CAAWa,UAAtC;AACA,WAAKhB,QAAL,CAAc;AACZM,QAAAA,UADY;AAEZC,QAAAA,YAFY;AAGZC,QAAAA;AAHY,OAAd;AAKD,KA1GyC;;AAAA,SAwH1CS,YAxH0C,GAwH3BtC,EAAE,IAAI,CAAE,CAxHmB;;AAAA,SA0H1CuC,YA1H0C,GA0H3B,MAAM;AACnB,WAAKlB,QAAL,CAAc;AACZ3B,QAAAA,mBAAmB,EAAE,KADT;AAEZG,QAAAA,cAAc,EAAE;AAFJ,OAAd;AAID,KA/HyC;;AAAA,SAiI1C2C,YAjI0C,GAiI3BC,KAAK,IAAI;AACtBA,MAAAA,KAAK,CAACC,OAAN;;AAEA,UAAI,CAAC,KAAKC,WAAV,EAAuB;AACrB,aAAKA,WAAL,GAAmBxE,CAAC,CAACyE,QAAF,CAAW,MAAM;AAClC,cAAIC,YAAY,GAAGJ,KAAK,CAAClB,MAAN,CAAaC,KAAhC;AACA,eAAKd,KAAL,CACGnC,YADH,CACiB,oBAAmBsE,YAAa,EADjD,EAEG3B,IAFH,CAEQC,GAAG,IAAI;AACX,gBAAI;AAAE2B,cAAAA,MAAF;AAAU1B,cAAAA;AAAV,gBAAmBD,GAAvB;;AACA,gBAAI2B,MAAM,KAAK,GAAf,EAAoB;AAClB;AACA;AACA;AACA,mBAAKzB,QAAL,CAAc;AAAE0B,gBAAAA,cAAc,EAAE3B;AAAlB,eAAd;AACD;AACF,WAVH;AAWD,SAbkB,EAahB,GAbgB,CAAnB;AAcD;;AACD,WAAKuB,WAAL;AACD,KArJyC;;AAAA,SAuJ1CK,oBAvJ0C,GAuJnB,MAAM5B,IAAN,IAAc;AACnC,UAAI;AAAEO,QAAAA;AAAF,UAAiB,KAAK3C,KAA1B;AACA2C,MAAAA,UAAU,CAAC,QAAD,CAAV,GAAuBP,IAAI,CAACpB,EAA5B;AACA2B,MAAAA,UAAU,CAAC,UAAD,CAAV,GAAyBP,IAAI,CAAC6B,SAA9B;AACA,WAAK5B,QAAL,CAAc;AAAEM,QAAAA,UAAF;AAAcuB,QAAAA,cAAc,EAAE,KAA9B;AAAqCH,QAAAA,cAAc,EAAE;AAArD,OAAd;AACA,YAAM,KAAKrC,KAAL,CAAWlC,UAAX,CAAsB,iBAAtB,EAAyCmD,UAAzC,CAAN;AACAnB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWM,eAAvB,EAAwC,aAAxC;AACD,KA9JyC;;AAAA,SAgK1CmC,cAhK0C,GAgKzB,MAAM;AACrB,UAAI;AAAEC,QAAAA;AAAF,UAAoB,KAAKpE,KAA7B;AACAoE,MAAAA,aAAa,GAAG,IAAhB;AACA,WAAK/B,QAAL,CAAc;AAAE+B,QAAAA;AAAF,OAAd;AACD,KApKyC;;AAAA,SAsK1CC,YAtK0C,GAsK3B,OAAO;AAAE9B,MAAAA,MAAM,EAAE;AAAEC,QAAAA,KAAF;AAASC,QAAAA;AAAT;AAAV,KAAP,KAAuC;AACpD,UAAI;AAAEE,QAAAA;AAAF,UAAiB,KAAK3C,KAA1B;AACA2C,MAAAA,UAAU,CAACF,IAAD,CAAV,GAAmBD,KAAnB;AACA,YAAM,KAAKH,QAAL,CAAc;AAClBM,QAAAA;AADkB,OAAd,CAAN,CAHoD,CAMpD;AACA;AACD,KA9KyC;;AAAA,SAgL1C2B,UAhL0C,GAgL7B,CAACC,IAAD,EAAOC,KAAP,KAAiB,CAAE,CAhLU;AAAA;;AAkL1CC,EAAAA,MAAM,GAAG;AACP,QAAI;AACFxE,MAAAA,UAAU,GAAG,EADX;AAEFa,MAAAA,SAAS,GAAG,EAFV;AAGFG,MAAAA,UAHE;AAIFV,MAAAA,YAJE;AAKFD,MAAAA,QALE;AAMFI,MAAAA,mBANE;AAOFR,MAAAA,aAPE;AAQFS,MAAAA,OARE;AASFE,MAAAA,cATE;AAUF6D,MAAAA;AAVE,QAWA,KAAK1E,KAXT;AAYA,QAAI;AAAEgC,MAAAA,eAAF;AAAmB2C,MAAAA;AAAnB,QAAyB,KAAKjD,KAAlC;AACA,wBACE,uDACE;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGiD,CAAC,CAAC,oBAAD,CADJ,CADF,CADF,eAME;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,WAAW,EAAE,MADf;AAEE,MAAA,MAAM,EAAE,IAFV;AAGE,MAAA,SAAS,EAAC,kBAHZ;AAIE,MAAA,KAAK,EAAC,MAJR;AAKE,MAAA,OAAO,EAAE,KALX;AAME,MAAA,OAAO,EAAE,MAAMvF,OAAO,CAACwF,IAAR,CAAc,aAAd,CANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CANF,CADF,eAkBE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG9D,SAAS,CAAC+D,MAAV,GAAmB,CAAnB,GACG/D,SAAS,CAACgE,GAAV,CAAc,CAAC1C,IAAD,EAAOoC,KAAP,KAAiB;AAC7B,0BACE;AACE,QAAA,SAAS,EAAG,oBACVvD,UAAU,KAAKmB,IAAI,CAACpB,EAApB,GAAyB,QAAzB,GAAoC,EACrC,EAHH;AAIE,QAAA,OAAO,EAAE,MAAM,KAAKsD,UAAL,CAAgBlC,IAAI,CAACpB,EAArB,EAAyBoB,IAAI,CAACjC,KAA9B,CAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMGwE,CAAC,CAACvC,IAAI,CAACjC,KAAN,CANJ,CADF;AAUD,KAXD,CADH,GAaG,EAdN,CAlBF,CADF,eAoCE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CApCF,CADF,CADF;AA4CD;;AA5OyC;;AA+O5C,MAAM4E,eAAe,GAAG/E,KAAK,KAAK;AAChCgF,EAAAA,gBAAgB,EAAEhF,KAAK,CAACiF,MAAN,CAAaD,gBADC;AAEhChD,EAAAA,eAAe,EAAEhC,KAAK,CAACkF,WAAN,CAAkBlD;AAFH,CAAL,CAA7B;;AAKA,MAAMmD,kBAAkB,GAAGC,QAAQ,IAAI;AACrC,SAAO9F,kBAAkB,CACvB;AACE;AACAC,IAAAA,YAFF;AAGEC,IAAAA,UAHF;AAIEC,IAAAA,eAJF;AAKEE,IAAAA,cALF;AAMED,IAAAA;AANF,GADuB,EASvB0F,QATuB,CAAzB;AAWD,CAZD;;AAcA,OAAO,MAAMC,OAAO,GAAGvF,eAAe,GACpCT,OAAO,CAAC0F,eAAD,EAAkBI,kBAAlB,CAAP,CAA6CpF,YAA7C,CADoC,CAA/B","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.scss\";\r\nimport {\r\n  NormalButton,\r\n  NormalInput,\r\n  NormalSelect,\r\n  InputSearch,\r\n  NormalModal,\r\n  TableWrapper,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport _ from \"lodash\";\r\nimport { history } from \"helpers\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  updateForm,\r\n  commonCreateApi,\r\n  commonDeleteApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { VoidPaidTrans } from \"./voidPaidTrans.js\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class BillOpsClass extends Component {\r\n  state = {\r\n    tstaffList: [{}],\r\n    headerDetails: [\r\n      { label: \"Date\", sortKey: false, width: \"60px\" },\r\n      { label: \"Treatment\", width: \"120px\" },\r\n      { label: \"Trans Ref\", sortKey: false, width: \"55px\" },\r\n      { label: \"Discription\", sortKey: false, width: \"55px\" },\r\n      { label: \"Type\", sortKey: false, width: \"55px\" },\r\n      { label: \"Exp Date\", sortKey: false, width: \"55px\" },\r\n      { label: \"Amount\", sortKey: false, width: \"55px\" },\r\n      { label: \"Status\", sortKey: false, width: \"55px\" },\r\n      { label: \"Rev\", sortKey: false, width: \"55px\" },\r\n      { label: \"Treat No\", sortKey: false, width: \"55px\" },\r\n      { label: \"Limit\", sortKey: false, width: \"55px\" },\r\n      { label: \"Sel Staff\", sortKey: false, width: \"55px\" },\r\n      { label: \"Staff\", sortKey: false, width: \"55px\" },\r\n    ],\r\n    // cartData: {},\r\n    yearList: [],\r\n    selectedYear: new Date().getFullYear(),\r\n    isOpenTreatmentDone: false,\r\n    tsStaff: {},\r\n    workPoint: 0,\r\n    isOpenReversal: false,\r\n    menuItems: [\r\n      { to: \"/admin/catalog\", label: \"Suspend Bill\", id: \"suspendBill\" },\r\n      { to: \"/admin/catalog\", label: \"Recall Sus Bill\", id: \"recallSusBill\" },\r\n      { to: \"/admin/catalog\", label: \"Recall Tran\", id: \"reacallBill\" },\r\n      { to: \"/admin/catalog\", label: \"Reprint Bill\", id: \"reprint\" },\r\n      { to: \"/admin/catalog\", label: \"Void item/bill\", id: \"VoidItemBill\" },\r\n      { to: \"/admin/catalog\", label: \"Void Paid Trans\", id: \"voidPaidTrns\" },\r\n    ],\r\n    activeMenu: \"voidPaidTrns\",\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n    // this.props.getCommonApi('treatmentdone/Year/').then((key) => {\r\n    //     let { status, data } = key;\r\n    //     let { yearList } = this.state;\r\n    //     for (let value of data) {\r\n    //         yearList.push({ value: value, label: value })\r\n    //     }\r\n    //     this.setState({ yearList })\r\n    // })\r\n\r\n    // this.getCart();\r\n  };\r\n\r\n  getCart = () => {\r\n    console.log(this.props, \"sfgdfsgdfghgf\");\r\n    let {\r\n      roomList,\r\n      sourceList,\r\n      staffList,\r\n      cartData,\r\n      duration,\r\n      tstaffList,\r\n      selectedYear,\r\n    } = this.state;\r\n    this.props\r\n      .getCommonApi(\r\n        `treatmentdone/?year=${selectedYear}&cust_id=${this.props.basicApptDetail.custId}`\r\n      )\r\n      .then(key => {\r\n        cartData = key;\r\n        tstaffList = key.data;\r\n        this.setState({ tstaffList });\r\n      });\r\n  };\r\n\r\n  handleYearChange = async ({ target: { value, name } }) => {\r\n    let { selectedYear } = this.state;\r\n    selectedYear = value;\r\n    await this.setState({\r\n      selectedYear,\r\n    });\r\n    this.getCart();\r\n  };\r\n\r\n  getDataFromRes = data => {\r\n    let { formFields, cartData, updateFields, postFields } = this.state;\r\n    formFields[\"Item\"] = data.value.Item;\r\n    formFields[\"Price\"] = data.value.Price;\r\n    formFields[\"Room\"] = data.value.Room;\r\n    updateFields[\"Room\"] = data.value.Room;\r\n    formFields[\"Source\"] = data.value.Source;\r\n    updateFields[\"Source\"] = data.value.Source;\r\n    formFields[\"add_duration\"] = data.value.add_duration;\r\n    formFields[\"new_remark\"] = data.value.new_remark;\r\n    updateFields[\"new_remark\"] = data.value.new_remark;\r\n    postFields[\"times\"] = data.value.times;\r\n    postFields[\"work_point\"] = data.value.work_point;\r\n    this.setState({\r\n      formFields,\r\n      updateFields,\r\n      postFields,\r\n    });\r\n  };\r\n\r\n  // getYearList = (data) => {\r\n  //     let date = new Date().getFullYear();\r\n\r\n  //     let { yearList } = this.state;\r\n  //     for (let i = date; i > 1970; i--) {\r\n  //         yearList.push({ label: i, value: i });\r\n  //     }\r\n  //     this.setState({\r\n  //         yearList\r\n  //     })\r\n  // }\r\n\r\n  handleSubmit = id => {};\r\n\r\n  handleDialog = () => {\r\n    this.setState({\r\n      isOpenTreatmentDone: false,\r\n      isOpenReversal: false,\r\n    });\r\n  };\r\n\r\n  handleSearch = event => {\r\n    event.persist();\r\n\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(() => {\r\n        let searchString = event.target.value;\r\n        this.props\r\n          .getCommonApi(`custappt/?search=${searchString}`)\r\n          .then(key => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n              // for (let value of data) {\r\n              //     customerList.push({ value: value.id, label: value.emp_name })\r\n              // }\r\n              this.setState({ customerOption: data });\r\n            }\r\n          });\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleSelectCustomer = async data => {\r\n    let { formFields } = this.state;\r\n    formFields[\"custId\"] = data.id;\r\n    formFields[\"custName\"] = data.cust_name;\r\n    this.setState({ formFields, isOpenCustomer: false, customerOption: [] });\r\n    await this.props.updateForm(\"basicApptDetail\", formFields);\r\n    console.log(this.props.basicApptDetail, \"sdfsadfasdf\");\r\n  };\r\n\r\n  handleCheckout = () => {\r\n    let { isOpenPayment } = this.state;\r\n    isOpenPayment = true;\r\n    this.setState({ isOpenPayment });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n    // this.props.updateForm('customerDetail', formFields)\r\n    // await this.props.updateForm('appointmentCustomerDetail', formFields)\r\n  };\r\n\r\n  handleMenu = (item, index) => {};\r\n\r\n  render() {\r\n    let {\r\n      tstaffList = [],\r\n      menuItems = [],\r\n      activeMenu,\r\n      selectedYear,\r\n      yearList,\r\n      isOpenTreatmentDone,\r\n      headerDetails,\r\n      tsStaff,\r\n      isOpenReversal,\r\n      treatmentIds,\r\n    } = this.state;\r\n    let { basicApptDetail, t } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"row treatment-done-new p-3\">\r\n          <div className=\"col-12 header\">\r\n            <div className=\"row\">\r\n              <div className=\"col-10\">\r\n                <p className=\"fs-18 font-700 mb-3 title\">\r\n                  {t(\"Transaction Detail\")}\r\n                </p>\r\n              </div>\r\n              <div className=\"col-2\">\r\n                <NormalButton\r\n                  buttonClass={\"mx-2\"}\r\n                  mainbg={true}\r\n                  className=\"fs-15 clear-line\"\r\n                  label=\"Back\"\r\n                  outline={false}\r\n                  onClick={() => history.push(`/admin/cart`)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"d-flex mb-4\">\r\n              {menuItems.length > 0\r\n                ? menuItems.map((data, index) => {\r\n                    return (\r\n                      <div\r\n                        className={`menus fs-14 mr-4 ${\r\n                          activeMenu === data.id ? \"active\" : \"\"\r\n                        }`}\r\n                        onClick={() => this.handleMenu(data.id, data.label)}\r\n                      >\r\n                        {t(data.label)}\r\n                      </div>\r\n                    );\r\n                  })\r\n                : \"\"}\r\n            </div>\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <VoidPaidTrans></VoidPaidTrans>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  selected_cstomer: state.common.selected_cstomer,\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      // getCustomer,\r\n      getCommonApi,\r\n      updateForm,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n      commonDeleteApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const BillOps = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(BillOpsClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}