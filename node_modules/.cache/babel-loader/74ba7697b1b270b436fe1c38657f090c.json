{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_uploader.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\n\nvar _window = require(\"../core/utils/window\");\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _callbacks = _interopRequireDefault(require(\"../core/utils/callbacks\"));\n\nvar _type = require(\"../core/utils/type\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _array = require(\"../core/utils/array\");\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _ajax = _interopRequireDefault(require(\"../core/utils/ajax\"));\n\nvar _editor = _interopRequireDefault(require(\"./editor/editor\"));\n\nvar _button = _interopRequireDefault(require(\"./button\"));\n\nvar _progress_bar = _interopRequireDefault(require(\"./progress_bar\"));\n\nvar _browser = _interopRequireDefault(require(\"../core/utils/browser\"));\n\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\n\nvar _index = require(\"../events/utils/index\");\n\nvar _click = require(\"../events/click\");\n\nvar _message = _interopRequireDefault(require(\"../localization/message\"));\n\nvar _themes = require(\"./themes\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar window = (0, _window.getWindow)();\nvar FILEUPLOADER_CLASS = \"dx-fileuploader\";\nvar FILEUPLOADER_EMPTY_CLASS = \"dx-fileuploader-empty\";\nvar FILEUPLOADER_SHOW_FILE_LIST_CLASS = \"dx-fileuploader-show-file-list\";\nvar FILEUPLOADER_DRAGOVER_CLASS = \"dx-fileuploader-dragover\";\nvar FILEUPLOADER_WRAPPER_CLASS = \"dx-fileuploader-wrapper\";\nvar FILEUPLOADER_CONTAINER_CLASS = \"dx-fileuploader-container\";\nvar FILEUPLOADER_CONTENT_CLASS = \"dx-fileuploader-content\";\nvar FILEUPLOADER_INPUT_WRAPPER_CLASS = \"dx-fileuploader-input-wrapper\";\nvar FILEUPLOADER_INPUT_CONTAINER_CLASS = \"dx-fileuploader-input-container\";\nvar FILEUPLOADER_INPUT_LABEL_CLASS = \"dx-fileuploader-input-label\";\nvar FILEUPLOADER_INPUT_CLASS = \"dx-fileuploader-input\";\nvar FILEUPLOADER_FILES_CONTAINER_CLASS = \"dx-fileuploader-files-container\";\nvar FILEUPLOADER_FILE_CONTAINER_CLASS = \"dx-fileuploader-file-container\";\nvar FILEUPLOADER_FILE_INFO_CLASS = \"dx-fileuploader-file-info\";\nvar FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS = \"dx-fileuploader-file-status-message\";\nvar FILEUPLOADER_FILE_CLASS = \"dx-fileuploader-file\";\nvar FILEUPLOADER_FILE_NAME_CLASS = \"dx-fileuploader-file-name\";\nvar FILEUPLOADER_FILE_SIZE_CLASS = \"dx-fileuploader-file-size\";\nvar FILEUPLOADER_BUTTON_CLASS = \"dx-fileuploader-button\";\nvar FILEUPLOADER_BUTTON_CONTAINER_CLASS = \"dx-fileuploader-button-container\";\nvar FILEUPLOADER_CANCEL_BUTTON_CLASS = \"dx-fileuploader-cancel-button\";\nvar FILEUPLOADER_UPLOAD_BUTTON_CLASS = \"dx-fileuploader-upload-button\";\nvar FILEUPLOADER_INVALID_CLASS = \"dx-fileuploader-invalid\";\nvar FILEUPLOADER_AFTER_LOAD_DELAY = 400;\nvar FILEUPLOADER_CHUNK_META_DATA_NAME = \"chunkMetadata\";\n\nvar renderFileUploaderInput = function () {\n  return (0, _renderer.default)(\"<input>\").attr(\"type\", \"file\");\n};\n\nvar isFormDataSupported = function () {\n  return !!window.FormData;\n};\n\nvar FileUploader = function (_Editor) {\n  _inherits(FileUploader, _Editor);\n\n  var _super = _createSuper(FileUploader);\n\n  function FileUploader() {\n    _classCallCheck(this, FileUploader);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FileUploader, [{\n    key: \"_supportedKeys\",\n    value: function () {\n      var _this = this;\n\n      var click = function (e) {\n        e.preventDefault();\n\n        var $selectButton = _this._selectButton.$element();\n\n        _events_engine.default.trigger($selectButton, _click.name);\n      };\n\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_supportedKeys\", this).call(this), {\n        space: click,\n        enter: click\n      });\n    }\n  }, {\n    key: \"_setOptionsByReference\",\n    value: function () {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_setOptionsByReference\", this).call(this);\n\n      (0, _extend.extend)(this._optionsByReference, {\n        value: true\n      });\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function () {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_getDefaultOptions\", this).call(this), {\n        chunkSize: 0,\n        value: [],\n        selectButtonText: _message.default.format(\"dxFileUploader-selectFile\"),\n        uploadButtonText: _message.default.format(\"dxFileUploader-upload\"),\n        labelText: _message.default.format(\"dxFileUploader-dropFile\"),\n        name: \"files[]\",\n        multiple: false,\n        accept: \"\",\n        uploadUrl: \"/\",\n        allowCanceling: true,\n        showFileList: true,\n        progress: 0,\n        dialogTrigger: void 0,\n        dropZone: void 0,\n        readyToUploadMessage: _message.default.format(\"dxFileUploader-readyToUpload\"),\n        uploadedMessage: _message.default.format(\"dxFileUploader-uploaded\"),\n        uploadFailedMessage: _message.default.format(\"dxFileUploader-uploadFailedMessage\"),\n        uploadAbortedMessage: _message.default.format(\"dxFileUploader-uploadAbortedMessage\"),\n        uploadMode: \"instantly\",\n        uploadMethod: \"POST\",\n        uploadHeaders: {},\n        uploadCustomData: {},\n        onBeforeSend: null,\n        onUploadStarted: null,\n        onUploaded: null,\n        onFilesUploaded: null,\n        onProgress: null,\n        onUploadError: null,\n        onUploadAborted: null,\n        onDropZoneEnter: null,\n        onDropZoneLeave: null,\n        allowedFileExtensions: [],\n        maxFileSize: 0,\n        minFileSize: 0,\n        inputAttr: {},\n        invalidFileExtensionMessage: _message.default.format(\"dxFileUploader-invalidFileExtension\"),\n        invalidMaxFileSizeMessage: _message.default.format(\"dxFileUploader-invalidMaxFileSize\"),\n        invalidMinFileSizeMessage: _message.default.format(\"dxFileUploader-invalidMinFileSize\"),\n        extendSelection: true,\n        validationMessageMode: \"always\",\n        uploadFile: null,\n        uploadChunk: null,\n        abortUpload: null,\n        validationMessageOffset: {\n          h: 0,\n          v: 0\n        },\n        useNativeInputClick: false,\n        useDragOver: true,\n        nativeDropSupported: true,\n        _uploadButtonType: \"normal\"\n      });\n    }\n  }, {\n    key: \"_defaultOptionsRules\",\n    value: function () {\n      return _get(_getPrototypeOf(FileUploader.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\n        device: function () {\n          return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n        },\n        options: {\n          focusStateEnabled: true\n        }\n      }, {\n        device: [{\n          platform: \"android\"\n        }],\n        options: {\n          validationMessageOffset: {\n            v: 0\n          }\n        }\n      }, {\n        device: function () {\n          return \"desktop\" !== _devices.default.real().deviceType;\n        },\n        options: {\n          useDragOver: false\n        }\n      }, {\n        device: function () {\n          return !isFormDataSupported();\n        },\n        options: {\n          uploadMode: \"useForm\"\n        }\n      }, {\n        device: function () {\n          return _browser.default.msie || \"desktop\" !== _devices.default.real().deviceType;\n        },\n        options: {\n          nativeDropSupported: false\n        }\n      }, {\n        device: function () {\n          return (0, _themes.isMaterial)();\n        },\n        options: {\n          _uploadButtonType: \"default\"\n        }\n      }]);\n    }\n  }, {\n    key: \"_initOptions\",\n    value: function (options) {\n      var isLabelTextDefined = (\"labelText\" in options);\n\n      _get(_getPrototypeOf(FileUploader.prototype), \"_initOptions\", this).call(this, options);\n\n      if (!isLabelTextDefined && !this._shouldDragOverBeRendered()) {\n        this.option(\"labelText\", \"\");\n      }\n    }\n  }, {\n    key: \"_init\",\n    value: function () {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_init\", this).call(this);\n\n      this._initFileInput();\n\n      this._initLabel();\n\n      this._setUploadStrategy();\n\n      this._createFiles();\n\n      this._createBeforeSendAction();\n\n      this._createUploadStartedAction();\n\n      this._createUploadedAction();\n\n      this._createFilesUploadedAction();\n\n      this._createProgressAction();\n\n      this._createUploadErrorAction();\n\n      this._createUploadAbortedAction();\n\n      this._createDropZoneEnterAction();\n\n      this._createDropZoneLeaveAction();\n    }\n  }, {\n    key: \"_setUploadStrategy\",\n    value: function () {\n      var strategy = null;\n\n      if (this.option(\"chunkSize\") > 0) {\n        var uploadChunk = this.option(\"uploadChunk\");\n        strategy = uploadChunk && (0, _type.isFunction)(uploadChunk) ? new CustomChunksFileUploadStrategy(this) : new DefaultChunksFileUploadStrategy(this);\n      } else {\n        var uploadFile = this.option(\"uploadFile\");\n        strategy = uploadFile && (0, _type.isFunction)(uploadFile) ? new CustomWholeFileUploadStrategy(this) : new DefaultWholeFileUploadStrategy(this);\n      }\n\n      this._uploadStrategy = strategy;\n    }\n  }, {\n    key: \"_initFileInput\",\n    value: function () {\n      var _this2 = this;\n\n      this._isCustomClickEvent = false;\n\n      if (!this._$fileInput) {\n        this._$fileInput = renderFileUploaderInput();\n\n        _events_engine.default.on(this._$fileInput, \"change\", this._inputChangeHandler.bind(this));\n\n        _events_engine.default.on(this._$fileInput, \"click\", function (e) {\n          e.stopPropagation();\n          return _this2.option(\"useNativeInputClick\") || _this2._isCustomClickEvent;\n        });\n      }\n\n      this._$fileInput.prop({\n        multiple: this.option(\"multiple\"),\n        accept: this.option(\"accept\"),\n        tabIndex: -1\n      });\n    }\n  }, {\n    key: \"_inputChangeHandler\",\n    value: function () {\n      if (this._doPreventInputChange) {\n        return;\n      }\n\n      var fileName = this._$fileInput.val().replace(/^.*\\\\/, \"\");\n\n      var files = this._$fileInput.prop(\"files\");\n\n      if (files && !files.length && \"useForm\" !== this.option(\"uploadMode\")) {\n        return;\n      }\n\n      var value = files ? this._getFiles(files) : [{\n        name: fileName\n      }];\n\n      this._changeValue(value);\n\n      if (\"instantly\" === this.option(\"uploadMode\")) {\n        this._uploadFiles();\n      }\n    }\n  }, {\n    key: \"_shouldFileListBeExtended\",\n    value: function () {\n      return \"useForm\" !== this.option(\"uploadMode\") && this.option(\"extendSelection\") && this.option(\"multiple\");\n    }\n  }, {\n    key: \"_removeDuplicates\",\n    value: function (files, value) {\n      var result = [];\n\n      for (var i = 0; i < value.length; i++) {\n        if (!this._isFileInArray(files, value[i])) {\n          result.push(value[i]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_isFileInArray\",\n    value: function (files, file) {\n      for (var i = 0; i < files.length; i++) {\n        var item = files[i];\n\n        if (item.size === file.size && item.name === file.name) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_changeValue\",\n    value: function (value) {\n      var files = this._shouldFileListBeExtended() ? this.option(\"value\").slice() : [];\n\n      if (\"instantly\" !== this.option(\"uploadMode\")) {\n        value = this._removeDuplicates(files, value);\n      }\n\n      this.option(\"value\", files.concat(value));\n    }\n  }, {\n    key: \"_getFiles\",\n    value: function (fileList) {\n      var values = [];\n      (0, _iterator.each)(fileList, function (_, value) {\n        return values.push(value);\n      });\n      return values;\n    }\n  }, {\n    key: \"_getFile\",\n    value: function (fileData) {\n      var targetFileValue = (0, _type.isNumeric)(fileData) ? this.option(\"value\")[fileData] : fileData;\n      return this._files.filter(function (file) {\n        return file.value === targetFileValue;\n      })[0];\n    }\n  }, {\n    key: \"_initLabel\",\n    value: function () {\n      if (!this._$inputLabel) {\n        this._$inputLabel = (0, _renderer.default)(\"<div>\");\n      }\n\n      this._updateInputLabelText();\n    }\n  }, {\n    key: \"_updateInputLabelText\",\n    value: function () {\n      var correctedValue = this._isInteractionDisabled() ? \"\" : this.option(\"labelText\");\n\n      this._$inputLabel.text(correctedValue);\n    }\n  }, {\n    key: \"_focusTarget\",\n    value: function () {\n      return this.$element().find(\".\" + FILEUPLOADER_BUTTON_CLASS);\n    }\n  }, {\n    key: \"_getSubmitElement\",\n    value: function () {\n      return this._$fileInput;\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function () {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_initMarkup\", this).call(this);\n\n      this.$element().addClass(FILEUPLOADER_CLASS);\n\n      this._renderWrapper();\n\n      this._renderInputWrapper();\n\n      this._renderSelectButton();\n\n      this._renderInputContainer();\n\n      this._renderUploadButton();\n\n      this._preventRecreatingFiles = true;\n    }\n  }, {\n    key: \"_render\",\n    value: function () {\n      this._preventRecreatingFiles = false;\n\n      this._attachDragEventHandlers(this._$inputWrapper);\n\n      this._attachDragEventHandlers(this.option(\"dropZone\"));\n\n      this._renderFiles();\n\n      _get(_getPrototypeOf(FileUploader.prototype), \"_render\", this).call(this);\n    }\n  }, {\n    key: \"_createFileProgressBar\",\n    value: function (file) {\n      file.progressBar = this._createProgressBar(file.value.size);\n      file.progressBar.$element().appendTo(file.$file);\n\n      this._initStatusMessage(file);\n\n      this._ensureCancelButtonInitialized(file);\n    }\n  }, {\n    key: \"_setStatusMessage\",\n    value: function (file, message) {\n      var _this3 = this;\n\n      setTimeout(function () {\n        if (_this3.option(\"showFileList\")) {\n          if (file.$statusMessage) {\n            file.$statusMessage.text(message);\n            file.$statusMessage.css(\"display\", \"\");\n            file.progressBar.$element().remove();\n          }\n        }\n      }, FILEUPLOADER_AFTER_LOAD_DELAY);\n    }\n  }, {\n    key: \"_getUploadAbortedStatusMessage\",\n    value: function () {\n      return \"instantly\" === this.option(\"uploadMode\") ? this.option(\"uploadAbortedMessage\") : this.option(\"readyToUploadMessage\");\n    }\n  }, {\n    key: \"_createFiles\",\n    value: function () {\n      var _this4 = this;\n\n      var value = this.option(\"value\");\n\n      if (this._files && (0 === value.length || !this._shouldFileListBeExtended())) {\n        this._preventFilesUploading(this._files);\n\n        this._files = null;\n      }\n\n      if (!this._files) {\n        this._files = [];\n      }\n\n      (0, _iterator.each)(value.slice(this._files.length), function (_, value) {\n        var file = _this4._createFile(value);\n\n        _this4._validateFile(file);\n\n        _this4._files.push(file);\n      });\n    }\n  }, {\n    key: \"_preventFilesUploading\",\n    value: function (files) {\n      var _this5 = this;\n\n      files.forEach(function (file) {\n        return _this5._uploadStrategy.abortUpload(file);\n      });\n    }\n  }, {\n    key: \"_validateFile\",\n    value: function (file) {\n      file.isValidFileExtension = this._validateFileExtension(file);\n      file.isValidMinSize = this._validateMinFileSize(file);\n      file.isValidMaxSize = this._validateMaxFileSize(file);\n    }\n  }, {\n    key: \"_validateFileExtension\",\n    value: function (file) {\n      var allowedExtensions = this.option(\"allowedFileExtensions\");\n      var fileExtension = file.value.name.substring(file.value.name.lastIndexOf(\".\")).toLowerCase();\n\n      if (0 === allowedExtensions.length) {\n        return true;\n      }\n\n      for (var i = 0; i < allowedExtensions.length; i++) {\n        if (fileExtension === allowedExtensions[i].toLowerCase()) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_validateMaxFileSize\",\n    value: function (file) {\n      var fileSize = file.value.size;\n      var maxFileSize = this.option(\"maxFileSize\");\n      return maxFileSize > 0 ? fileSize <= maxFileSize : true;\n    }\n  }, {\n    key: \"_validateMinFileSize\",\n    value: function (file) {\n      var fileSize = file.value.size;\n      var minFileSize = this.option(\"minFileSize\");\n      return minFileSize > 0 ? fileSize >= minFileSize : true;\n    }\n  }, {\n    key: \"_createBeforeSendAction\",\n    value: function () {\n      this._beforeSendAction = this._createActionByOption(\"onBeforeSend\", {\n        excludeValidators: [\"readOnly\"]\n      });\n    }\n  }, {\n    key: \"_createUploadStartedAction\",\n    value: function () {\n      this._uploadStartedAction = this._createActionByOption(\"onUploadStarted\", {\n        excludeValidators: [\"readOnly\"]\n      });\n    }\n  }, {\n    key: \"_createUploadedAction\",\n    value: function () {\n      this._uploadedAction = this._createActionByOption(\"onUploaded\", {\n        excludeValidators: [\"readOnly\"]\n      });\n    }\n  }, {\n    key: \"_createFilesUploadedAction\",\n    value: function () {\n      this._filesUploadedAction = this._createActionByOption(\"onFilesUploaded\", {\n        excludeValidators: [\"readOnly\"]\n      });\n    }\n  }, {\n    key: \"_createProgressAction\",\n    value: function () {\n      this._progressAction = this._createActionByOption(\"onProgress\", {\n        excludeValidators: [\"readOnly\"]\n      });\n    }\n  }, {\n    key: \"_createUploadAbortedAction\",\n    value: function () {\n      this._uploadAbortedAction = this._createActionByOption(\"onUploadAborted\", {\n        excludeValidators: [\"readOnly\"]\n      });\n    }\n  }, {\n    key: \"_createUploadErrorAction\",\n    value: function () {\n      this._uploadErrorAction = this._createActionByOption(\"onUploadError\", {\n        excludeValidators: [\"readOnly\"]\n      });\n    }\n  }, {\n    key: \"_createDropZoneEnterAction\",\n    value: function () {\n      this._dropZoneEnterAction = this._createActionByOption(\"onDropZoneEnter\");\n    }\n  }, {\n    key: \"_createDropZoneLeaveAction\",\n    value: function () {\n      this._dropZoneLeaveAction = this._createActionByOption(\"onDropZoneLeave\");\n    }\n  }, {\n    key: \"_createFile\",\n    value: function (value) {\n      return {\n        value: value,\n        loadedSize: 0,\n        onProgress: (0, _callbacks.default)(),\n        onAbort: (0, _callbacks.default)(),\n        onLoad: (0, _callbacks.default)(),\n        onError: (0, _callbacks.default)(),\n        onLoadStart: (0, _callbacks.default)(),\n        isValidFileExtension: true,\n        isValidMaxSize: true,\n        isValidMinSize: true,\n        isValid: function () {\n          return this.isValidFileExtension && this.isValidMaxSize && this.isValidMinSize;\n        },\n        isInitialized: false\n      };\n    }\n  }, {\n    key: \"_resetFileState\",\n    value: function (file) {\n      file.isAborted = false;\n      file.uploadStarted = false;\n      file.isStartLoad = false;\n      file.loadedSize = 0;\n      file.chunksData = void 0;\n      file.request = void 0;\n    }\n  }, {\n    key: \"_renderFiles\",\n    value: function () {\n      var _this$_validationMess,\n          _this6 = this;\n\n      var value = this.option(\"value\");\n\n      if (!this._$filesContainer) {\n        this._$filesContainer = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILES_CONTAINER_CLASS).appendTo(this._$content);\n      } else {\n        if (!this._shouldFileListBeExtended() || 0 === value.length) {\n          this._$filesContainer.empty();\n        }\n      }\n\n      var showFileList = this.option(\"showFileList\");\n\n      if (showFileList) {\n        (0, _iterator.each)(this._files, function (_, file) {\n          if (!file.$file) {\n            _this6._renderFile(file);\n          }\n        });\n      }\n\n      this.$element().toggleClass(FILEUPLOADER_SHOW_FILE_LIST_CLASS, showFileList);\n\n      this._toggleFileUploaderEmptyClassName();\n\n      this._updateFileNameMaxWidth();\n\n      null === (_this$_validationMess = this._validationMessage) || void 0 === _this$_validationMess ? void 0 : _this$_validationMess.repaint();\n    }\n  }, {\n    key: \"_renderFile\",\n    value: function (file) {\n      var value = file.value;\n      var $fileContainer = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CONTAINER_CLASS).appendTo(this._$filesContainer);\n\n      this._renderFileButtons(file, $fileContainer);\n\n      file.$file = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CLASS).appendTo($fileContainer);\n      var $fileInfo = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_INFO_CLASS).appendTo(file.$file);\n      file.$statusMessage = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS).appendTo(file.$file);\n      (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_NAME_CLASS).text(value.name).appendTo($fileInfo);\n\n      if ((0, _type.isDefined)(value.size)) {\n        (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_SIZE_CLASS).text(this._getFileSize(value.size)).appendTo($fileInfo);\n      }\n\n      if (file.isValid()) {\n        file.$statusMessage.text(this.option(\"readyToUploadMessage\"));\n      } else {\n        if (!file.isValidFileExtension) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidFileExtensionMessage\"));\n        }\n\n        if (!file.isValidMaxSize) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidMaxFileSizeMessage\"));\n        }\n\n        if (!file.isValidMinSize) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidMinFileSizeMessage\"));\n        }\n\n        $fileContainer.addClass(FILEUPLOADER_INVALID_CLASS);\n      }\n    }\n  }, {\n    key: \"_createValidationElement\",\n    value: function (key) {\n      return (0, _renderer.default)(\"<span>\").text(this.option(key));\n    }\n  }, {\n    key: \"_updateFileNameMaxWidth\",\n    value: function () {\n      var cancelButtonsCount = this.option(\"allowCanceling\") && \"useForm\" !== this.option(\"uploadMode\") ? 1 : 0;\n      var uploadButtonsCount = \"useButtons\" === this.option(\"uploadMode\") ? 1 : 0;\n\n      var filesContainerWidth = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_CONTAINER_CLASS).first().width() || this._$filesContainer.width();\n\n      var $buttonContainer = this._$filesContainer.find(\".\" + FILEUPLOADER_BUTTON_CONTAINER_CLASS).eq(0);\n\n      var buttonsWidth = $buttonContainer.width() * (cancelButtonsCount + uploadButtonsCount);\n\n      var $fileSize = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_SIZE_CLASS).eq(0);\n\n      var prevFileSize = $fileSize.text();\n      $fileSize.text(\"1000 Mb\");\n      var fileSizeWidth = $fileSize.width();\n      $fileSize.text(prevFileSize);\n\n      this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_NAME_CLASS).css(\"maxWidth\", filesContainerWidth - buttonsWidth - fileSizeWidth);\n    }\n  }, {\n    key: \"_renderFileButtons\",\n    value: function (file, $container) {\n      var $cancelButton = this._getCancelButton(file);\n\n      $cancelButton && $container.append($cancelButton);\n\n      var $uploadButton = this._getUploadButton(file);\n\n      $uploadButton && $container.append($uploadButton);\n    }\n  }, {\n    key: \"_getCancelButton\",\n    value: function (file) {\n      var _this7 = this;\n\n      if (\"useForm\" === this.option(\"uploadMode\")) {\n        return null;\n      }\n\n      file.cancelButton = this._createComponent((0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_CANCEL_BUTTON_CLASS), _button.default, {\n        onClick: function () {\n          return _this7._removeFile(file);\n        },\n        icon: \"close\",\n        visible: this.option(\"allowCanceling\"),\n        disabled: this.option(\"readOnly\"),\n        integrationOptions: {}\n      });\n      return (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.cancelButton.$element());\n    }\n  }, {\n    key: \"_getUploadButton\",\n    value: function (file) {\n      var _this8 = this;\n\n      if (!file.isValid() || \"useButtons\" !== this.option(\"uploadMode\")) {\n        return null;\n      }\n\n      file.uploadButton = this._createComponent((0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_UPLOAD_BUTTON_CLASS), _button.default, {\n        onClick: function () {\n          return _this8._uploadFile(file);\n        },\n        icon: \"upload\"\n      });\n      file.onLoadStart.add(function () {\n        return file.uploadButton.option({\n          visible: false,\n          disabled: true\n        });\n      });\n      file.onAbort.add(function () {\n        return file.uploadButton.option({\n          visible: true,\n          disabled: false\n        });\n      });\n      return (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.uploadButton.$element());\n    }\n  }, {\n    key: \"_removeFile\",\n    value: function (file) {\n      var _file$$file;\n\n      null === (_file$$file = file.$file) || void 0 === _file$$file ? void 0 : _file$$file.parent().remove();\n\n      this._files.splice((0, _array.inArray)(file, this._files), 1);\n\n      var value = this.option(\"value\").slice();\n      value.splice((0, _array.inArray)(file.value, value), 1);\n      this._preventRecreatingFiles = true;\n      this.option(\"value\", value);\n      this._preventRecreatingFiles = false;\n\n      this._toggleFileUploaderEmptyClassName();\n\n      this._doPreventInputChange = true;\n\n      this._$fileInput.val(\"\");\n\n      this._doPreventInputChange = false;\n    }\n  }, {\n    key: \"removeFile\",\n    value: function (fileData) {\n      if (\"useForm\" === this.option(\"uploadMode\") || !(0, _type.isDefined)(fileData)) {\n        return;\n      }\n\n      var file = this._getFile(fileData);\n\n      if (file) {\n        if (file.uploadStarted) {\n          this._preventFilesUploading([file]);\n        }\n\n        this._removeFile(file);\n      }\n    }\n  }, {\n    key: \"_toggleFileUploaderEmptyClassName\",\n    value: function () {\n      this.$element().toggleClass(FILEUPLOADER_EMPTY_CLASS, !this._files.length || this._hasInvalidFile(this._files));\n    }\n  }, {\n    key: \"_hasInvalidFile\",\n    value: function (files) {\n      for (var i = 0; i < files.length; i++) {\n        if (!files[i].isValid()) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_getFileSize\",\n    value: function (size) {\n      var i = 0;\n      var labels = [_message.default.format(\"dxFileUploader-bytes\"), _message.default.format(\"dxFileUploader-kb\"), _message.default.format(\"dxFileUploader-Mb\"), _message.default.format(\"dxFileUploader-Gb\")];\n      var count = labels.length - 1;\n\n      while (i < count && size >= 1024) {\n        size /= 1024;\n        i++;\n      }\n\n      return Math.round(size) + \" \" + labels[i];\n    }\n  }, {\n    key: \"_renderSelectButton\",\n    value: function () {\n      var $button = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).appendTo(this._$inputWrapper);\n      this._selectButton = this._createComponent($button, _button.default, {\n        text: this.option(\"selectButtonText\"),\n        focusStateEnabled: false,\n        integrationOptions: {},\n        disabled: this.option(\"readOnly\")\n      });\n      this._selectFileDialogHandler = this._selectButtonClickHandler.bind(this);\n\n      if (\"desktop\" === _devices.default.real().deviceType) {\n        this._selectButton.option(\"onClick\", this._selectFileDialogHandler);\n      } else {\n        this._attachSelectFileDialogHandler(this._selectButton.$element());\n      }\n\n      this._attachSelectFileDialogHandler(this.option(\"dialogTrigger\"));\n    }\n  }, {\n    key: \"_selectButtonClickHandler\",\n    value: function () {\n      if (this.option(\"useNativeInputClick\")) {\n        return;\n      }\n\n      if (this._isInteractionDisabled()) {\n        return false;\n      }\n\n      this._isCustomClickEvent = true;\n\n      _events_engine.default.trigger(this._$fileInput, \"click\");\n\n      this._isCustomClickEvent = false;\n    }\n  }, {\n    key: \"_attachSelectFileDialogHandler\",\n    value: function (target) {\n      if (!(0, _type.isDefined)(target)) {\n        return;\n      }\n\n      this._detachSelectFileDialogHandler(target);\n\n      _events_engine.default.on((0, _renderer.default)(target), \"click\", this._selectFileDialogHandler);\n    }\n  }, {\n    key: \"_detachSelectFileDialogHandler\",\n    value: function (target) {\n      if (!(0, _type.isDefined)(target)) {\n        return;\n      }\n\n      _events_engine.default.off((0, _renderer.default)(target), \"click\", this._selectFileDialogHandler);\n    }\n  }, {\n    key: \"_renderUploadButton\",\n    value: function () {\n      if (\"useButtons\" !== this.option(\"uploadMode\")) {\n        return;\n      }\n\n      var $uploadButton = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).addClass(FILEUPLOADER_UPLOAD_BUTTON_CLASS).appendTo(this._$content);\n      this._uploadButton = this._createComponent($uploadButton, _button.default, {\n        text: this.option(\"uploadButtonText\"),\n        onClick: this._uploadButtonClickHandler.bind(this),\n        type: this.option(\"_uploadButtonType\"),\n        integrationOptions: {}\n      });\n    }\n  }, {\n    key: \"_uploadButtonClickHandler\",\n    value: function () {\n      this._uploadFiles();\n    }\n  }, {\n    key: \"_shouldDragOverBeRendered\",\n    value: function () {\n      return !this.option(\"readOnly\") && (\"useForm\" !== this.option(\"uploadMode\") || this.option(\"nativeDropSupported\"));\n    }\n  }, {\n    key: \"_isInteractionDisabled\",\n    value: function () {\n      return this.option(\"readOnly\") || this.option(\"disabled\");\n    }\n  }, {\n    key: \"_renderInputContainer\",\n    value: function () {\n      this._$inputContainer = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_CONTAINER_CLASS).appendTo(this._$inputWrapper);\n\n      this._$fileInput.addClass(FILEUPLOADER_INPUT_CLASS);\n\n      this._renderInput();\n\n      var labelId = \"dx-fileuploader-input-label-\".concat(new _guid.default());\n\n      this._$inputLabel.attr(\"id\", labelId).addClass(FILEUPLOADER_INPUT_LABEL_CLASS).appendTo(this._$inputContainer);\n\n      this.setAria(\"labelledby\", labelId, this._$fileInput);\n    }\n  }, {\n    key: \"_renderInput\",\n    value: function () {\n      if (this.option(\"useNativeInputClick\")) {\n        this._selectButton.option(\"template\", this._selectButtonInputTemplate.bind(this));\n      } else {\n        this._$fileInput.appendTo(this._$inputContainer);\n\n        this._selectButton.option(\"template\", \"content\");\n      }\n\n      this._applyInputAttributes(this.option(\"inputAttr\"));\n    }\n  }, {\n    key: \"_selectButtonInputTemplate\",\n    value: function (data, content) {\n      var $content = (0, _renderer.default)(content);\n      var $text = (0, _renderer.default)(\"<span>\").addClass(\"dx-button-text\").text(data.text);\n      $content.append($text).append(this._$fileInput);\n      return $content;\n    }\n  }, {\n    key: \"_renderInputWrapper\",\n    value: function () {\n      this._$inputWrapper = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_WRAPPER_CLASS).appendTo(this._$content);\n    }\n  }, {\n    key: \"_detachDragEventHandlers\",\n    value: function (target) {\n      if (!(0, _type.isDefined)(target)) {\n        return;\n      }\n\n      _events_engine.default.off((0, _renderer.default)(target), (0, _index.addNamespace)(\"\", this.NAME));\n    }\n  }, {\n    key: \"_attachDragEventHandlers\",\n    value: function (target) {\n      var isCustomTarget = target !== this._$inputWrapper;\n\n      if (!(0, _type.isDefined)(target) || !this._shouldDragOverBeRendered()) {\n        return;\n      }\n\n      this._detachDragEventHandlers(target);\n\n      target = (0, _renderer.default)(target);\n      this._dragEventsTargets = [];\n\n      _events_engine.default.on(target, (0, _index.addNamespace)(\"dragenter\", this.NAME), this._dragEnterHandler.bind(this, isCustomTarget));\n\n      _events_engine.default.on(target, (0, _index.addNamespace)(\"dragover\", this.NAME), this._dragOverHandler.bind(this));\n\n      _events_engine.default.on(target, (0, _index.addNamespace)(\"dragleave\", this.NAME), this._dragLeaveHandler.bind(this, isCustomTarget));\n\n      _events_engine.default.on(target, (0, _index.addNamespace)(\"drop\", this.NAME), this._dropHandler.bind(this, isCustomTarget));\n    }\n  }, {\n    key: \"_applyInputAttributes\",\n    value: function (customAttributes) {\n      this._$fileInput.attr(customAttributes);\n    }\n  }, {\n    key: \"_useInputForDrop\",\n    value: function () {\n      return this.option(\"nativeDropSupported\") && \"useForm\" === this.option(\"uploadMode\");\n    }\n  }, {\n    key: \"_dragEnterHandler\",\n    value: function (isCustomTarget, e) {\n      if (this.option(\"disabled\")) {\n        return false;\n      }\n\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n\n      this._tryToggleDropZoneActive(true, isCustomTarget, e);\n\n      this._updateEventTargets(e);\n    }\n  }, {\n    key: \"_dragOverHandler\",\n    value: function (e) {\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n\n      e.originalEvent.dataTransfer.dropEffect = \"copy\";\n    }\n  }, {\n    key: \"_dragLeaveHandler\",\n    value: function (isCustomTarget, e) {\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n\n      this._updateEventTargets(e);\n\n      this._tryToggleDropZoneActive(false, isCustomTarget, e);\n    }\n  }, {\n    key: \"_updateEventTargets\",\n    value: function (e) {\n      var targetIndex = this._dragEventsTargets.indexOf(e.target);\n\n      var isTargetExists = targetIndex !== -1;\n\n      if (\"dragenter\" === e.type) {\n        !isTargetExists && this._dragEventsTargets.push(e.target);\n      } else {\n        isTargetExists && this._dragEventsTargets.splice(targetIndex, 1);\n      }\n    }\n  }, {\n    key: \"_tryToggleDropZoneActive\",\n    value: function (active, isCustom, event) {\n      var classAction = active ? \"addClass\" : \"removeClass\";\n      var mouseAction = active ? \"_dropZoneEnterAction\" : \"_dropZoneLeaveAction\";\n\n      if (!this._dragEventsTargets.length) {\n        this[mouseAction]({\n          event: event,\n          dropZoneElement: event.currentTarget\n        });\n\n        if (!isCustom) {\n          this.$element()[classAction](FILEUPLOADER_DRAGOVER_CLASS);\n        }\n      }\n    }\n  }, {\n    key: \"_dropHandler\",\n    value: function (isCustomTarget, e) {\n      this._dragEventsTargets = [];\n\n      if (!isCustomTarget) {\n        this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS);\n      }\n\n      if (this._useInputForDrop() || isCustomTarget && this._isInteractionDisabled()) {\n        return;\n      }\n\n      e.preventDefault();\n      var fileList = e.originalEvent.dataTransfer.files;\n\n      var files = this._getFiles(fileList);\n\n      if (!this.option(\"multiple\") && files.length > 1) {\n        return;\n      }\n\n      this._changeValue(this._filterFiles(files));\n\n      if (\"instantly\" === this.option(\"uploadMode\")) {\n        this._uploadFiles();\n      }\n    }\n  }, {\n    key: \"_handleAllFilesUploaded\",\n    value: function () {\n      var areAllFilesLoaded = this._files.every(function (file) {\n        return !file.isValid() || file._isError || file._isLoaded || file.isAborted;\n      });\n\n      if (areAllFilesLoaded) {\n        this._filesUploadedAction();\n      }\n    }\n  }, {\n    key: \"_filterFiles\",\n    value: function (files) {\n      if (!files.length) {\n        return files;\n      }\n\n      var accept = this.option(\"accept\");\n\n      if (!accept.length) {\n        return files;\n      }\n\n      var result = [];\n\n      var allowedTypes = this._getAllowedFileTypes(accept);\n\n      for (var i = 0, n = files.length; i < n; i++) {\n        if (this._isFileTypeAllowed(files[i], allowedTypes)) {\n          result.push(files[i]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_getAllowedFileTypes\",\n    value: function (acceptSting) {\n      if (!acceptSting.length) {\n        return [];\n      }\n\n      return acceptSting.split(\",\").map(function (item) {\n        return item.trim();\n      });\n    }\n  }, {\n    key: \"_isFileTypeAllowed\",\n    value: function (file, allowedTypes) {\n      for (var i = 0, n = allowedTypes.length; i < n; i++) {\n        var allowedType = allowedTypes[i];\n\n        if (\".\" === allowedType[0]) {\n          allowedType = allowedType.replace(\".\", \"\\\\.\");\n\n          if (file.name.match(new RegExp(allowedType + \"$\", \"i\"))) {\n            return true;\n          }\n        } else {\n          allowedType = allowedType.replace(\"*\", \"\");\n\n          if (file.type.match(new RegExp(allowedType, \"i\"))) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_renderWrapper\",\n    value: function () {\n      var $wrapper = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_WRAPPER_CLASS).appendTo(this.$element());\n      var $container = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_CONTAINER_CLASS).appendTo($wrapper);\n      this._$content = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_CONTENT_CLASS).appendTo($container);\n    }\n  }, {\n    key: \"_clean\",\n    value: function () {\n      this._$fileInput.detach();\n\n      delete this._$filesContainer;\n\n      if (this._files) {\n        this._files.forEach(function (file) {\n          file.$file = null;\n          file.$statusMessage = null;\n        });\n      }\n\n      _get(_getPrototypeOf(FileUploader.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"abortUpload\",\n    value: function (fileData) {\n      if (\"useForm\" === this.option(\"uploadMode\")) {\n        return;\n      }\n\n      if ((0, _type.isDefined)(fileData)) {\n        var file = this._getFile(fileData);\n\n        if (file) {\n          this._preventFilesUploading([file]);\n        }\n      } else {\n        this._preventFilesUploading(this._files);\n      }\n    }\n  }, {\n    key: \"upload\",\n    value: function (fileData) {\n      if (\"useForm\" === this.option(\"uploadMode\")) {\n        return;\n      }\n\n      if ((0, _type.isDefined)(fileData)) {\n        var file = this._getFile(fileData);\n\n        if (file && isFormDataSupported()) {\n          this._uploadFile(file);\n        }\n      } else {\n        this._uploadFiles();\n      }\n    }\n  }, {\n    key: \"_uploadFiles\",\n    value: function () {\n      var _this9 = this;\n\n      if (isFormDataSupported()) {\n        (0, _iterator.each)(this._files, function (_, file) {\n          return _this9._uploadFile(file);\n        });\n      }\n    }\n  }, {\n    key: \"_uploadFile\",\n    value: function (file) {\n      this._uploadStrategy.upload(file);\n    }\n  }, {\n    key: \"_updateProgressBar\",\n    value: function (file, loadedFileData) {\n      file.progressBar && file.progressBar.option({\n        value: loadedFileData.loaded,\n        showStatus: true\n      });\n\n      this._progressAction({\n        file: file.value,\n        segmentSize: loadedFileData.currentSegmentSize,\n        bytesLoaded: loadedFileData.loaded,\n        bytesTotal: loadedFileData.total,\n        event: loadedFileData.event,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_updateTotalProgress\",\n    value: function (totalFilesSize, totalLoadedFilesSize) {\n      var progress = totalFilesSize ? this._getProgressValue(totalLoadedFilesSize / totalFilesSize) : 0;\n      this.option(\"progress\", progress);\n\n      this._setLoadedSize(totalLoadedFilesSize);\n    }\n  }, {\n    key: \"_getProgressValue\",\n    value: function (ratio) {\n      return Math.floor(100 * ratio);\n    }\n  }, {\n    key: \"_initStatusMessage\",\n    value: function (file) {\n      file.$statusMessage.css(\"display\", \"none\");\n    }\n  }, {\n    key: \"_ensureCancelButtonInitialized\",\n    value: function (file) {\n      var _this10 = this;\n\n      if (file.isInitialized) {\n        return;\n      }\n\n      file.cancelButton.option(\"onClick\", function () {\n        _this10._preventFilesUploading([file]);\n\n        _this10._removeFile(file);\n      });\n\n      var hideCancelButton = function () {\n        setTimeout(function () {\n          file.cancelButton.option({\n            visible: false\n          });\n        }, FILEUPLOADER_AFTER_LOAD_DELAY);\n      };\n\n      file.onLoad.add(hideCancelButton);\n      file.onError.add(hideCancelButton);\n    }\n  }, {\n    key: \"_createProgressBar\",\n    value: function (fileSize) {\n      var _this11 = this;\n\n      return this._createComponent((0, _renderer.default)(\"<div>\"), _progress_bar.default, {\n        value: void 0,\n        min: 0,\n        max: fileSize,\n        statusFormat: function (ratio) {\n          return _this11._getProgressValue(ratio) + \"%\";\n        },\n        showStatus: false,\n        statusPosition: \"right\"\n      });\n    }\n  }, {\n    key: \"_getTotalFilesSize\",\n    value: function () {\n      var _this12 = this;\n\n      if (!this._totalFilesSize) {\n        this._totalFilesSize = 0;\n        (0, _iterator.each)(this._files, function (_, file) {\n          _this12._totalFilesSize += file.value.size;\n        });\n      }\n\n      return this._totalFilesSize;\n    }\n  }, {\n    key: \"_getTotalLoadedFilesSize\",\n    value: function () {\n      var _this13 = this;\n\n      if (!this._totalLoadedFilesSize) {\n        this._totalLoadedFilesSize = 0;\n        (0, _iterator.each)(this._files, function (_, file) {\n          _this13._totalLoadedFilesSize += file.loadedSize;\n        });\n      }\n\n      return this._totalLoadedFilesSize;\n    }\n  }, {\n    key: \"_setLoadedSize\",\n    value: function (value) {\n      this._totalLoadedFilesSize = value;\n    }\n  }, {\n    key: \"_recalculateProgress\",\n    value: function () {\n      this._totalFilesSize = 0;\n      this._totalLoadedFilesSize = 0;\n\n      this._updateTotalProgress(this._getTotalFilesSize(), this._getTotalLoadedFilesSize());\n    }\n  }, {\n    key: \"_updateReadOnlyState\",\n    value: function () {\n      var readOnly = this.option(\"readOnly\");\n\n      this._selectButton.option(\"disabled\", readOnly);\n\n      this._files.forEach(function (file) {\n        var _file$cancelButton;\n\n        return null === (_file$cancelButton = file.cancelButton) || void 0 === _file$cancelButton ? void 0 : _file$cancelButton.option(\"disabled\", readOnly);\n      });\n\n      this._updateInputLabelText();\n\n      this._attachDragEventHandlers(this._$inputWrapper);\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      var name = args.name,\n          value = args.value,\n          previousValue = args.previousValue;\n\n      switch (name) {\n        case \"height\":\n        case \"width\":\n          this._updateFileNameMaxWidth();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"value\":\n          !value.length && this._$fileInput.val(\"\");\n\n          if (!this._preventRecreatingFiles) {\n            this._createFiles();\n\n            this._renderFiles();\n          }\n\n          this._recalculateProgress();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"name\":\n          this._initFileInput();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"accept\":\n          this._initFileInput();\n\n          break;\n\n        case \"multiple\":\n          this._initFileInput();\n\n          if (!args.value) {\n            this.reset();\n          }\n\n          break;\n\n        case \"readOnly\":\n          this._updateReadOnlyState();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"selectButtonText\":\n          this._selectButton.option(\"text\", value);\n\n          break;\n\n        case \"uploadButtonText\":\n          this._uploadButton && this._uploadButton.option(\"text\", value);\n          break;\n\n        case \"_uploadButtonType\":\n          this._uploadButton && this._uploadButton.option(\"type\", value);\n          break;\n\n        case \"dialogTrigger\":\n          this._detachSelectFileDialogHandler(previousValue);\n\n          this._attachSelectFileDialogHandler(value);\n\n          break;\n\n        case \"dropZone\":\n          this._detachDragEventHandlers(previousValue);\n\n          this._attachDragEventHandlers(value);\n\n          break;\n\n        case \"maxFileSize\":\n        case \"minFileSize\":\n        case \"allowedFileExtensions\":\n        case \"invalidFileExtensionMessage\":\n        case \"invalidMaxFileSizeMessage\":\n        case \"invalidMinFileSizeMessage\":\n        case \"readyToUploadMessage\":\n        case \"uploadedMessage\":\n        case \"uploadFailedMessage\":\n        case \"uploadAbortedMessage\":\n          this._invalidate();\n\n          break;\n\n        case \"labelText\":\n          this._updateInputLabelText();\n\n          break;\n\n        case \"showFileList\":\n          if (!this._preventRecreatingFiles) {\n            this._renderFiles();\n          }\n\n          break;\n\n        case \"uploadFile\":\n        case \"uploadChunk\":\n        case \"chunkSize\":\n          this._setUploadStrategy();\n\n          break;\n\n        case \"abortUpload\":\n        case \"uploadUrl\":\n        case \"progress\":\n        case \"uploadMethod\":\n        case \"uploadHeaders\":\n        case \"uploadCustomData\":\n        case \"extendSelection\":\n          break;\n\n        case \"allowCanceling\":\n        case \"uploadMode\":\n          this.reset();\n\n          this._invalidate();\n\n          break;\n\n        case \"onBeforeSend\":\n          this._createBeforeSendAction();\n\n          break;\n\n        case \"onUploadStarted\":\n          this._createUploadStartedAction();\n\n          break;\n\n        case \"onUploaded\":\n          this._createUploadedAction();\n\n          break;\n\n        case \"onFilesUploaded\":\n          this._createFilesUploadedAction();\n\n          break;\n\n        case \"onProgress\":\n          this._createProgressAction();\n\n          break;\n\n        case \"onUploadError\":\n          this._createUploadErrorAction();\n\n          break;\n\n        case \"onUploadAborted\":\n          this._createUploadAbortedAction();\n\n          break;\n\n        case \"onDropZoneEnter\":\n          this._createDropZoneEnterAction();\n\n          break;\n\n        case \"onDropZoneLeave\":\n          this._createDropZoneLeaveAction();\n\n          break;\n\n        case \"useNativeInputClick\":\n          this._renderInput();\n\n          break;\n\n        case \"useDragOver\":\n          this._attachDragEventHandlers(this._$inputWrapper);\n\n          break;\n\n        case \"nativeDropSupported\":\n          this._invalidate();\n\n          break;\n\n        case \"inputAttr\":\n          this._applyInputAttributes(this.option(name));\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function () {\n      this.option(\"value\", []);\n    }\n  }]);\n\n  return FileUploader;\n}(_editor.default);\n\nvar FileBlobReader = function () {\n  function FileBlobReader(file, chunkSize) {\n    _classCallCheck(this, FileBlobReader);\n\n    this.file = file;\n    this.chunkSize = chunkSize;\n    this.index = 0;\n  }\n\n  _createClass(FileBlobReader, [{\n    key: \"read\",\n    value: function () {\n      if (!this.file) {\n        return null;\n      }\n\n      var result = this.createBlobResult(this.file, this.index, this.chunkSize);\n\n      if (result.isCompleted) {\n        this.file = null;\n      }\n\n      this.index++;\n      return result;\n    }\n  }, {\n    key: \"createBlobResult\",\n    value: function (file, index, chunkSize) {\n      var currentPosition = index * chunkSize;\n      return {\n        blob: this.sliceFile(file, currentPosition, chunkSize),\n        index: index,\n        isCompleted: currentPosition + chunkSize >= file.size\n      };\n    }\n  }, {\n    key: \"sliceFile\",\n    value: function (file, startPos, length) {\n      if (file.slice) {\n        return file.slice(startPos, startPos + length);\n      }\n\n      if (file.webkitSlice) {\n        return file.webkitSlice(startPos, startPos + length);\n      }\n\n      return null;\n    }\n  }]);\n\n  return FileBlobReader;\n}();\n\nvar FileUploadStrategyBase = function () {\n  function FileUploadStrategyBase(fileUploader) {\n    _classCallCheck(this, FileUploadStrategyBase);\n\n    this.fileUploader = fileUploader;\n  }\n\n  _createClass(FileUploadStrategyBase, [{\n    key: \"upload\",\n    value: function (file) {\n      if (file.isInitialized && file.isAborted) {\n        this.fileUploader._resetFileState(file);\n      }\n\n      if (file.isValid() && !file.uploadStarted) {\n        this._prepareFileBeforeUpload(file);\n\n        this._uploadCore(file);\n      }\n    }\n  }, {\n    key: \"abortUpload\",\n    value: function abortUpload(file) {\n      var _this14 = this;\n\n      if (file._isError || file._isLoaded || file.isAborted) {\n        return;\n      }\n\n      file.isAborted = true;\n      file.request && file.request.abort();\n\n      if (this._isCustomCallback(\"abortUpload\")) {\n        var abortUpload = this.fileUploader.option(\"abortUpload\");\n\n        var arg = this._createUploadArgument(file);\n\n        var deferred = null;\n\n        try {\n          var result = abortUpload(file.value, arg);\n          deferred = (0, _deferred.fromPromise)(result);\n        } catch (error) {\n          deferred = new _deferred.Deferred().reject(error).promise();\n        }\n\n        deferred.done(function () {\n          return file.onAbort.fire();\n        }).fail(function (error) {\n          return _this14._handleFileError(file, error);\n        });\n      }\n    }\n  }, {\n    key: \"_beforeSend\",\n    value: function (xhr, file) {\n      var arg = this._createUploadArgument(file);\n\n      this.fileUploader._beforeSendAction({\n        request: xhr,\n        file: file.value,\n        uploadInfo: arg\n      });\n\n      file.request = xhr;\n    }\n  }, {\n    key: \"_createUploadArgument\",\n    value: function (file) {}\n  }, {\n    key: \"_uploadCore\",\n    value: function (file) {}\n  }, {\n    key: \"_isCustomCallback\",\n    value: function (name) {\n      var callback = this.fileUploader.option(name);\n      return callback && (0, _type.isFunction)(callback);\n    }\n  }, {\n    key: \"_handleFileError\",\n    value: function (file, error) {\n      file._isError = true;\n      file.onError.fire(error);\n    }\n  }, {\n    key: \"_prepareFileBeforeUpload\",\n    value: function (file) {\n      if (file.$file) {\n        var _file$progressBar;\n\n        null === (_file$progressBar = file.progressBar) || void 0 === _file$progressBar ? void 0 : _file$progressBar.dispose();\n\n        this.fileUploader._createFileProgressBar(file);\n      }\n\n      if (file.isInitialized) {\n        return;\n      }\n\n      file.onLoadStart.add(this._onUploadStarted.bind(this, file));\n      file.onLoad.add(this._onLoadedHandler.bind(this, file));\n      file.onError.add(this._onErrorHandler.bind(this, file));\n      file.onAbort.add(this._onAbortHandler.bind(this, file));\n      file.onProgress.add(this._onProgressHandler.bind(this, file));\n      file.isInitialized = true;\n    }\n  }, {\n    key: \"_isStatusError\",\n    value: function (status) {\n      return 400 <= status && status < 500 || 500 <= status && status < 600;\n    }\n  }, {\n    key: \"_onUploadStarted\",\n    value: function (file, e) {\n      file.uploadStarted = true;\n\n      this.fileUploader._uploadStartedAction({\n        file: file.value,\n        event: e,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_onAbortHandler\",\n    value: function (file, e) {\n      var args = {\n        file: file.value,\n        event: e,\n        request: file.request,\n        message: this.fileUploader._getUploadAbortedStatusMessage()\n      };\n\n      this.fileUploader._uploadAbortedAction(args);\n\n      this.fileUploader._setStatusMessage(file, args.message);\n\n      this.fileUploader._handleAllFilesUploaded();\n    }\n  }, {\n    key: \"_onErrorHandler\",\n    value: function (file, error) {\n      var args = {\n        file: file.value,\n        event: void 0,\n        request: file.request,\n        error: error,\n        message: this.fileUploader.option(\"uploadFailedMessage\")\n      };\n\n      this.fileUploader._uploadErrorAction(args);\n\n      this.fileUploader._setStatusMessage(file, args.message);\n\n      this.fileUploader._handleAllFilesUploaded();\n    }\n  }, {\n    key: \"_onLoadedHandler\",\n    value: function (file, e) {\n      var args = {\n        file: file.value,\n        event: e,\n        request: file.request,\n        message: this.fileUploader.option(\"uploadedMessage\")\n      };\n      file._isLoaded = true;\n\n      this.fileUploader._uploadedAction(args);\n\n      this.fileUploader._setStatusMessage(file, args.message);\n\n      this.fileUploader._handleAllFilesUploaded();\n    }\n  }, {\n    key: \"_onProgressHandler\",\n    value: function (file, e) {\n      if (file) {\n        var totalFilesSize = this.fileUploader._getTotalFilesSize();\n\n        var totalLoadedFilesSize = this.fileUploader._getTotalLoadedFilesSize();\n\n        var loadedSize = Math.min(e.loaded, file.value.size);\n        var segmentSize = loadedSize - file.loadedSize;\n        file.loadedSize = loadedSize;\n\n        this.fileUploader._updateTotalProgress(totalFilesSize, totalLoadedFilesSize + segmentSize);\n\n        this.fileUploader._updateProgressBar(file, this._getLoadedData(loadedSize, e.total, segmentSize, e));\n      }\n    }\n  }, {\n    key: \"_getLoadedData\",\n    value: function (loaded, total, currentSegmentSize, event) {\n      return {\n        loaded: loaded,\n        total: total,\n        currentSegmentSize: currentSegmentSize\n      };\n    }\n  }, {\n    key: \"_extendFormData\",\n    value: function (formData) {\n      var formDataEntries = this.fileUploader.option(\"uploadCustomData\");\n\n      for (var entryName in formDataEntries) {\n        if (Object.prototype.hasOwnProperty.call(formDataEntries, entryName) && (0, _type.isDefined)(formDataEntries[entryName])) {\n          formData.append(entryName, formDataEntries[entryName]);\n        }\n      }\n    }\n  }]);\n\n  return FileUploadStrategyBase;\n}();\n\nvar ChunksFileUploadStrategyBase = function (_FileUploadStrategyBa) {\n  _inherits(ChunksFileUploadStrategyBase, _FileUploadStrategyBa);\n\n  var _super2 = _createSuper(ChunksFileUploadStrategyBase);\n\n  function ChunksFileUploadStrategyBase(fileUploader) {\n    var _this15;\n\n    _classCallCheck(this, ChunksFileUploadStrategyBase);\n\n    _this15 = _super2.call(this, fileUploader);\n    _this15.chunkSize = _this15.fileUploader.option(\"chunkSize\");\n    return _this15;\n  }\n\n  _createClass(ChunksFileUploadStrategyBase, [{\n    key: \"_uploadCore\",\n    value: function (file) {\n      var realFile = file.value;\n      var chunksData = {\n        name: realFile.name,\n        loadedBytes: 0,\n        type: realFile.type,\n        blobReader: new FileBlobReader(realFile, this.chunkSize),\n        guid: new _guid.default(),\n        fileSize: realFile.size,\n        count: Math.ceil(realFile.size / this.chunkSize),\n        customData: {}\n      };\n      file.chunksData = chunksData;\n\n      this._sendChunk(file, chunksData);\n    }\n  }, {\n    key: \"_sendChunk\",\n    value: function (file, chunksData) {\n      var _this16 = this;\n\n      var chunk = chunksData.blobReader.read();\n      chunksData.currentChunk = chunk;\n\n      if (chunk) {\n        this._sendChunkCore(file, chunksData, chunk).done(function () {\n          if (file.isAborted) {\n            return;\n          }\n\n          chunksData.loadedBytes += chunk.blob.size;\n          file.onProgress.fire({\n            loaded: chunksData.loadedBytes,\n            total: file.value.size\n          });\n\n          if (chunk.isCompleted) {\n            file.onLoad.fire();\n          }\n\n          setTimeout(function () {\n            return _this16._sendChunk(file, chunksData);\n          });\n        }).fail(function (error) {\n          if (_this16._shouldHandleError(error)) {\n            _this16._handleFileError(file, error);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_sendChunkCore\",\n    value: function (file, chunksData, chunk) {}\n  }, {\n    key: \"_shouldHandleError\",\n    value: function (error) {}\n  }, {\n    key: \"_tryRaiseStartLoad\",\n    value: function (file) {\n      if (!file.isStartLoad) {\n        file.isStartLoad = true;\n        file.onLoadStart.fire();\n      }\n    }\n  }, {\n    key: \"_getEvent\",\n    value: function (e) {\n      return null;\n    }\n  }, {\n    key: \"_createUploadArgument\",\n    value: function (file) {\n      return this._createChunksInfo(file.chunksData);\n    }\n  }, {\n    key: \"_createChunksInfo\",\n    value: function (chunksData) {\n      return {\n        bytesUploaded: chunksData.loadedBytes,\n        chunkCount: chunksData.count,\n        customData: chunksData.customData,\n        chunkBlob: chunksData.currentChunk.blob,\n        chunkIndex: chunksData.currentChunk.index\n      };\n    }\n  }]);\n\n  return ChunksFileUploadStrategyBase;\n}(FileUploadStrategyBase);\n\nvar DefaultChunksFileUploadStrategy = function (_ChunksFileUploadStra) {\n  _inherits(DefaultChunksFileUploadStrategy, _ChunksFileUploadStra);\n\n  var _super3 = _createSuper(DefaultChunksFileUploadStrategy);\n\n  function DefaultChunksFileUploadStrategy() {\n    _classCallCheck(this, DefaultChunksFileUploadStrategy);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(DefaultChunksFileUploadStrategy, [{\n    key: \"_sendChunkCore\",\n    value: function (file, chunksData, chunk) {\n      var _this17 = this;\n\n      return _ajax.default.sendRequest({\n        url: this.fileUploader.option(\"uploadUrl\"),\n        method: this.fileUploader.option(\"uploadMethod\"),\n        headers: this.fileUploader.option(\"uploadHeaders\"),\n        beforeSend: function (xhr) {\n          return _this17._beforeSend(xhr, file);\n        },\n        upload: {\n          onloadstart: function () {\n            return _this17._tryRaiseStartLoad(file);\n          },\n          onabort: function () {\n            return file.onAbort.fire();\n          }\n        },\n        data: this._createFormData({\n          fileName: chunksData.name,\n          blobName: this.fileUploader.option(\"name\"),\n          blob: chunk.blob,\n          index: chunk.index,\n          count: chunksData.count,\n          type: chunksData.type,\n          guid: chunksData.guid,\n          size: chunksData.fileSize\n        })\n      });\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function (e) {\n      return this._isStatusError(e.status);\n    }\n  }, {\n    key: \"_createFormData\",\n    value: function (options) {\n      var formData = new window.FormData();\n      formData.append(options.blobName, options.blob);\n      formData.append(FILEUPLOADER_CHUNK_META_DATA_NAME, JSON.stringify({\n        FileName: options.fileName,\n        Index: options.index,\n        TotalCount: options.count,\n        FileSize: options.size,\n        FileType: options.type,\n        FileGuid: options.guid\n      }));\n\n      this._extendFormData(formData);\n\n      return formData;\n    }\n  }]);\n\n  return DefaultChunksFileUploadStrategy;\n}(ChunksFileUploadStrategyBase);\n\nvar CustomChunksFileUploadStrategy = function (_ChunksFileUploadStra2) {\n  _inherits(CustomChunksFileUploadStrategy, _ChunksFileUploadStra2);\n\n  var _super4 = _createSuper(CustomChunksFileUploadStrategy);\n\n  function CustomChunksFileUploadStrategy() {\n    _classCallCheck(this, CustomChunksFileUploadStrategy);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(CustomChunksFileUploadStrategy, [{\n    key: \"_sendChunkCore\",\n    value: function (file, chunksData) {\n      this._tryRaiseStartLoad(file);\n\n      var chunksInfo = this._createChunksInfo(chunksData);\n\n      var uploadChunk = this.fileUploader.option(\"uploadChunk\");\n\n      try {\n        var result = uploadChunk(file.value, chunksInfo);\n        return (0, _deferred.fromPromise)(result);\n      } catch (error) {\n        return new _deferred.Deferred().reject(error).promise();\n      }\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function (e) {\n      return true;\n    }\n  }]);\n\n  return CustomChunksFileUploadStrategy;\n}(ChunksFileUploadStrategyBase);\n\nvar WholeFileUploadStrategyBase = function (_FileUploadStrategyBa2) {\n  _inherits(WholeFileUploadStrategyBase, _FileUploadStrategyBa2);\n\n  var _super5 = _createSuper(WholeFileUploadStrategyBase);\n\n  function WholeFileUploadStrategyBase() {\n    _classCallCheck(this, WholeFileUploadStrategyBase);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(WholeFileUploadStrategyBase, [{\n    key: \"_uploadCore\",\n    value: function (file) {\n      var _this18 = this;\n\n      file.loadedSize = 0;\n\n      this._uploadFile(file).done(function () {\n        if (!file.isAborted) {\n          file.onLoad.fire();\n        }\n      }).fail(function (error) {\n        if (_this18._shouldHandleError(file, error)) {\n          _this18._handleFileError(file, error);\n        }\n      });\n    }\n  }, {\n    key: \"_uploadFile\",\n    value: function (file) {}\n  }, {\n    key: \"_shouldHandleError\",\n    value: function (file, e) {}\n  }, {\n    key: \"_handleProgress\",\n    value: function (file, e) {\n      if (file._isError) {\n        return;\n      }\n\n      file._isProgressStarted = true;\n      file.onProgress.fire(e);\n    }\n  }, {\n    key: \"_getLoadedData\",\n    value: function (loaded, total, segmentSize, event) {\n      var result = _get(_getPrototypeOf(WholeFileUploadStrategyBase.prototype), \"_getLoadedData\", this).call(this, loaded, total, segmentSize, event);\n\n      result.event = event;\n      return result;\n    }\n  }]);\n\n  return WholeFileUploadStrategyBase;\n}(FileUploadStrategyBase);\n\nvar DefaultWholeFileUploadStrategy = function (_WholeFileUploadStrat) {\n  _inherits(DefaultWholeFileUploadStrategy, _WholeFileUploadStrat);\n\n  var _super6 = _createSuper(DefaultWholeFileUploadStrategy);\n\n  function DefaultWholeFileUploadStrategy() {\n    _classCallCheck(this, DefaultWholeFileUploadStrategy);\n\n    return _super6.apply(this, arguments);\n  }\n\n  _createClass(DefaultWholeFileUploadStrategy, [{\n    key: \"_uploadFile\",\n    value: function (file) {\n      var _this19 = this;\n\n      return _ajax.default.sendRequest({\n        url: this.fileUploader.option(\"uploadUrl\"),\n        method: this.fileUploader.option(\"uploadMethod\"),\n        headers: this.fileUploader.option(\"uploadHeaders\"),\n        beforeSend: function (xhr) {\n          return _this19._beforeSend(xhr, file);\n        },\n        upload: {\n          onprogress: function (e) {\n            return _this19._handleProgress(file, e);\n          },\n          onloadstart: function () {\n            return file.onLoadStart.fire();\n          },\n          onabort: function () {\n            return file.onAbort.fire();\n          }\n        },\n        data: this._createFormData(this.fileUploader.option(\"name\"), file.value)\n      });\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function (file, e) {\n      return this._isStatusError(e.status) || !file._isProgressStarted;\n    }\n  }, {\n    key: \"_createFormData\",\n    value: function (fieldName, fieldValue) {\n      var formData = new window.FormData();\n      formData.append(fieldName, fieldValue, fieldValue.name);\n\n      this._extendFormData(formData);\n\n      return formData;\n    }\n  }]);\n\n  return DefaultWholeFileUploadStrategy;\n}(WholeFileUploadStrategyBase);\n\nvar CustomWholeFileUploadStrategy = function (_WholeFileUploadStrat2) {\n  _inherits(CustomWholeFileUploadStrategy, _WholeFileUploadStrat2);\n\n  var _super7 = _createSuper(CustomWholeFileUploadStrategy);\n\n  function CustomWholeFileUploadStrategy() {\n    _classCallCheck(this, CustomWholeFileUploadStrategy);\n\n    return _super7.apply(this, arguments);\n  }\n\n  _createClass(CustomWholeFileUploadStrategy, [{\n    key: \"_uploadFile\",\n    value: function (file) {\n      var _this20 = this;\n\n      file.onLoadStart.fire();\n\n      var progressCallback = function (loadedBytes) {\n        var arg = {\n          loaded: loadedBytes,\n          total: file.size\n        };\n\n        _this20._handleProgress(file, arg);\n      };\n\n      var uploadFile = this.fileUploader.option(\"uploadFile\");\n\n      try {\n        var result = uploadFile(file.value, progressCallback);\n        return (0, _deferred.fromPromise)(result);\n      } catch (error) {\n        return new _deferred.Deferred().reject(error).promise();\n      }\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function (file, e) {\n      return true;\n    }\n  }]);\n\n  return CustomWholeFileUploadStrategy;\n}(WholeFileUploadStrategyBase);\n\n(0, _component_registrator.default)(\"dxFileUploader\", FileUploader);\nvar _default = FileUploader;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/file_uploader.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_renderer","_interopRequireDefault","require","_guid","_window","_events_engine","_component_registrator","_callbacks","_type","_iterator","_extend","_array","_deferred","_ajax","_editor","_button","_progress_bar","_browser","_devices","_index","_click","_message","_themes","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","value","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","window","getWindow","FILEUPLOADER_CLASS","FILEUPLOADER_EMPTY_CLASS","FILEUPLOADER_SHOW_FILE_LIST_CLASS","FILEUPLOADER_DRAGOVER_CLASS","FILEUPLOADER_WRAPPER_CLASS","FILEUPLOADER_CONTAINER_CLASS","FILEUPLOADER_CONTENT_CLASS","FILEUPLOADER_INPUT_WRAPPER_CLASS","FILEUPLOADER_INPUT_CONTAINER_CLASS","FILEUPLOADER_INPUT_LABEL_CLASS","FILEUPLOADER_INPUT_CLASS","FILEUPLOADER_FILES_CONTAINER_CLASS","FILEUPLOADER_FILE_CONTAINER_CLASS","FILEUPLOADER_FILE_INFO_CLASS","FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS","FILEUPLOADER_FILE_CLASS","FILEUPLOADER_FILE_NAME_CLASS","FILEUPLOADER_FILE_SIZE_CLASS","FILEUPLOADER_BUTTON_CLASS","FILEUPLOADER_BUTTON_CONTAINER_CLASS","FILEUPLOADER_CANCEL_BUTTON_CLASS","FILEUPLOADER_UPLOAD_BUTTON_CLASS","FILEUPLOADER_INVALID_CLASS","FILEUPLOADER_AFTER_LOAD_DELAY","FILEUPLOADER_CHUNK_META_DATA_NAME","renderFileUploaderInput","attr","isFormDataSupported","FormData","FileUploader","_Editor","_super","_this","click","preventDefault","$selectButton","_selectButton","$element","trigger","name","extend","space","enter","_optionsByReference","chunkSize","selectButtonText","format","uploadButtonText","labelText","multiple","accept","uploadUrl","allowCanceling","showFileList","progress","dialogTrigger","dropZone","readyToUploadMessage","uploadedMessage","uploadFailedMessage","uploadAbortedMessage","uploadMode","uploadMethod","uploadHeaders","uploadCustomData","onBeforeSend","onUploadStarted","onUploaded","onFilesUploaded","onProgress","onUploadError","onUploadAborted","onDropZoneEnter","onDropZoneLeave","allowedFileExtensions","maxFileSize","minFileSize","inputAttr","invalidFileExtensionMessage","invalidMaxFileSizeMessage","invalidMinFileSizeMessage","extendSelection","validationMessageMode","uploadFile","uploadChunk","abortUpload","validationMessageOffset","h","v","useNativeInputClick","useDragOver","nativeDropSupported","_uploadButtonType","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","platform","msie","isMaterial","isLabelTextDefined","_shouldDragOverBeRendered","option","_initFileInput","_initLabel","_setUploadStrategy","_createFiles","_createBeforeSendAction","_createUploadStartedAction","_createUploadedAction","_createFilesUploadedAction","_createProgressAction","_createUploadErrorAction","_createUploadAbortedAction","_createDropZoneEnterAction","_createDropZoneLeaveAction","strategy","isFunction","CustomChunksFileUploadStrategy","DefaultChunksFileUploadStrategy","CustomWholeFileUploadStrategy","DefaultWholeFileUploadStrategy","_uploadStrategy","_this2","_isCustomClickEvent","_$fileInput","on","_inputChangeHandler","bind","stopPropagation","prop","tabIndex","_doPreventInputChange","fileName","val","replace","files","_getFiles","_changeValue","_uploadFiles","_isFileInArray","push","file","item","size","_shouldFileListBeExtended","slice","_removeDuplicates","fileList","values","each","_","fileData","targetFileValue","isNumeric","_files","filter","_$inputLabel","_updateInputLabelText","correctedValue","_isInteractionDisabled","text","find","addClass","_renderWrapper","_renderInputWrapper","_renderSelectButton","_renderInputContainer","_renderUploadButton","_preventRecreatingFiles","_attachDragEventHandlers","_$inputWrapper","_renderFiles","progressBar","_createProgressBar","appendTo","$file","_initStatusMessage","_ensureCancelButtonInitialized","message","_this3","setTimeout","$statusMessage","css","remove","_this4","_preventFilesUploading","_createFile","_validateFile","_this5","forEach","isValidFileExtension","_validateFileExtension","isValidMinSize","_validateMinFileSize","isValidMaxSize","_validateMaxFileSize","allowedExtensions","fileExtension","substring","lastIndexOf","toLowerCase","fileSize","_beforeSendAction","_createActionByOption","excludeValidators","_uploadStartedAction","_uploadedAction","_filesUploadedAction","_progressAction","_uploadAbortedAction","_uploadErrorAction","_dropZoneEnterAction","_dropZoneLeaveAction","loadedSize","onAbort","onLoad","onError","onLoadStart","isValid","isInitialized","isAborted","uploadStarted","isStartLoad","chunksData","request","_this$_validationMess","_this6","_$filesContainer","_$content","empty","_renderFile","toggleClass","_toggleFileUploaderEmptyClassName","_updateFileNameMaxWidth","_validationMessage","repaint","$fileContainer","_renderFileButtons","$fileInfo","isDefined","_getFileSize","append","_createValidationElement","cancelButtonsCount","uploadButtonsCount","filesContainerWidth","first","width","$buttonContainer","eq","buttonsWidth","$fileSize","prevFileSize","fileSizeWidth","$container","$cancelButton","_getCancelButton","$uploadButton","_getUploadButton","_this7","cancelButton","_createComponent","onClick","_removeFile","icon","visible","disabled","integrationOptions","_this8","uploadButton","_uploadFile","add","_file$$file","parent","splice","inArray","_getFile","_hasInvalidFile","labels","count","Math","round","$button","_selectFileDialogHandler","_selectButtonClickHandler","_attachSelectFileDialogHandler","_detachSelectFileDialogHandler","off","_uploadButton","_uploadButtonClickHandler","type","_$inputContainer","_renderInput","labelId","setAria","_selectButtonInputTemplate","_applyInputAttributes","data","content","$content","$text","addNamespace","NAME","isCustomTarget","_detachDragEventHandlers","_dragEventsTargets","_dragEnterHandler","_dragOverHandler","_dragLeaveHandler","_dropHandler","customAttributes","_useInputForDrop","_tryToggleDropZoneActive","_updateEventTargets","originalEvent","dataTransfer","dropEffect","targetIndex","indexOf","isTargetExists","active","isCustom","event","classAction","mouseAction","dropZoneElement","currentTarget","removeClass","_filterFiles","areAllFilesLoaded","every","_isError","_isLoaded","allowedTypes","_getAllowedFileTypes","n","_isFileTypeAllowed","acceptSting","split","map","trim","allowedType","match","RegExp","$wrapper","detach","_this9","upload","loadedFileData","loaded","showStatus","segmentSize","currentSegmentSize","bytesLoaded","bytesTotal","total","totalFilesSize","totalLoadedFilesSize","_getProgressValue","_setLoadedSize","ratio","floor","_this10","hideCancelButton","_this11","min","max","statusFormat","statusPosition","_this12","_totalFilesSize","_this13","_totalLoadedFilesSize","_updateTotalProgress","_getTotalFilesSize","_getTotalLoadedFilesSize","readOnly","_file$cancelButton","args","previousValue","_recalculateProgress","reset","_updateReadOnlyState","_invalidate","FileBlobReader","index","createBlobResult","isCompleted","currentPosition","blob","sliceFile","startPos","webkitSlice","FileUploadStrategyBase","fileUploader","_resetFileState","_prepareFileBeforeUpload","_uploadCore","_this14","abort","_isCustomCallback","arg","_createUploadArgument","deferred","fromPromise","error","Deferred","reject","promise","done","fire","fail","_handleFileError","xhr","uploadInfo","callback","_file$progressBar","dispose","_createFileProgressBar","_onUploadStarted","_onLoadedHandler","_onErrorHandler","_onAbortHandler","_onProgressHandler","status","_getUploadAbortedStatusMessage","_setStatusMessage","_handleAllFilesUploaded","_updateProgressBar","_getLoadedData","formData","formDataEntries","entryName","ChunksFileUploadStrategyBase","_FileUploadStrategyBa","_super2","_this15","realFile","loadedBytes","blobReader","guid","ceil","customData","_sendChunk","_this16","chunk","read","currentChunk","_sendChunkCore","_shouldHandleError","_createChunksInfo","bytesUploaded","chunkCount","chunkBlob","chunkIndex","_ChunksFileUploadStra","_super3","_this17","sendRequest","url","method","headers","beforeSend","_beforeSend","onloadstart","_tryRaiseStartLoad","onabort","_createFormData","blobName","_isStatusError","JSON","stringify","FileName","Index","TotalCount","FileSize","FileType","FileGuid","_extendFormData","_ChunksFileUploadStra2","_super4","chunksInfo","WholeFileUploadStrategyBase","_FileUploadStrategyBa2","_super5","_this18","_isProgressStarted","_WholeFileUploadStrat","_super6","_this19","onprogress","_handleProgress","fieldName","fieldValue","_WholeFileUploadStrat2","_super7","_this20","progressCallback","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_uploader.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\r\nvar _window = require(\"../core/utils/window\");\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _callbacks = _interopRequireDefault(require(\"../core/utils/callbacks\"));\r\nvar _type = require(\"../core/utils/type\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _array = require(\"../core/utils/array\");\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _ajax = _interopRequireDefault(require(\"../core/utils/ajax\"));\r\nvar _editor = _interopRequireDefault(require(\"./editor/editor\"));\r\nvar _button = _interopRequireDefault(require(\"./button\"));\r\nvar _progress_bar = _interopRequireDefault(require(\"./progress_bar\"));\r\nvar _browser = _interopRequireDefault(require(\"../core/utils/browser\"));\r\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\r\nvar _index = require(\"../events/utils/index\");\r\nvar _click = require(\"../events/click\");\r\nvar _message = _interopRequireDefault(require(\"../localization/message\"));\r\nvar _themes = require(\"./themes\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar FILEUPLOADER_CLASS = \"dx-fileuploader\";\r\nvar FILEUPLOADER_EMPTY_CLASS = \"dx-fileuploader-empty\";\r\nvar FILEUPLOADER_SHOW_FILE_LIST_CLASS = \"dx-fileuploader-show-file-list\";\r\nvar FILEUPLOADER_DRAGOVER_CLASS = \"dx-fileuploader-dragover\";\r\nvar FILEUPLOADER_WRAPPER_CLASS = \"dx-fileuploader-wrapper\";\r\nvar FILEUPLOADER_CONTAINER_CLASS = \"dx-fileuploader-container\";\r\nvar FILEUPLOADER_CONTENT_CLASS = \"dx-fileuploader-content\";\r\nvar FILEUPLOADER_INPUT_WRAPPER_CLASS = \"dx-fileuploader-input-wrapper\";\r\nvar FILEUPLOADER_INPUT_CONTAINER_CLASS = \"dx-fileuploader-input-container\";\r\nvar FILEUPLOADER_INPUT_LABEL_CLASS = \"dx-fileuploader-input-label\";\r\nvar FILEUPLOADER_INPUT_CLASS = \"dx-fileuploader-input\";\r\nvar FILEUPLOADER_FILES_CONTAINER_CLASS = \"dx-fileuploader-files-container\";\r\nvar FILEUPLOADER_FILE_CONTAINER_CLASS = \"dx-fileuploader-file-container\";\r\nvar FILEUPLOADER_FILE_INFO_CLASS = \"dx-fileuploader-file-info\";\r\nvar FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS = \"dx-fileuploader-file-status-message\";\r\nvar FILEUPLOADER_FILE_CLASS = \"dx-fileuploader-file\";\r\nvar FILEUPLOADER_FILE_NAME_CLASS = \"dx-fileuploader-file-name\";\r\nvar FILEUPLOADER_FILE_SIZE_CLASS = \"dx-fileuploader-file-size\";\r\nvar FILEUPLOADER_BUTTON_CLASS = \"dx-fileuploader-button\";\r\nvar FILEUPLOADER_BUTTON_CONTAINER_CLASS = \"dx-fileuploader-button-container\";\r\nvar FILEUPLOADER_CANCEL_BUTTON_CLASS = \"dx-fileuploader-cancel-button\";\r\nvar FILEUPLOADER_UPLOAD_BUTTON_CLASS = \"dx-fileuploader-upload-button\";\r\nvar FILEUPLOADER_INVALID_CLASS = \"dx-fileuploader-invalid\";\r\nvar FILEUPLOADER_AFTER_LOAD_DELAY = 400;\r\nvar FILEUPLOADER_CHUNK_META_DATA_NAME = \"chunkMetadata\";\r\nvar renderFileUploaderInput = function() {\r\n    return (0, _renderer.default)(\"<input>\").attr(\"type\", \"file\")\r\n};\r\nvar isFormDataSupported = function() {\r\n    return !!window.FormData\r\n};\r\nvar FileUploader = function(_Editor) {\r\n    _inherits(FileUploader, _Editor);\r\n    var _super = _createSuper(FileUploader);\r\n\r\n    function FileUploader() {\r\n        _classCallCheck(this, FileUploader);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(FileUploader, [{\r\n        key: \"_supportedKeys\",\r\n        value: function() {\r\n            var _this = this;\r\n            var click = function(e) {\r\n                e.preventDefault();\r\n                var $selectButton = _this._selectButton.$element();\r\n                _events_engine.default.trigger($selectButton, _click.name)\r\n            };\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_supportedKeys\", this).call(this), {\r\n                space: click,\r\n                enter: click\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_setOptionsByReference\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_setOptionsByReference\", this).call(this);\r\n            (0, _extend.extend)(this._optionsByReference, {\r\n                value: true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                chunkSize: 0,\r\n                value: [],\r\n                selectButtonText: _message.default.format(\"dxFileUploader-selectFile\"),\r\n                uploadButtonText: _message.default.format(\"dxFileUploader-upload\"),\r\n                labelText: _message.default.format(\"dxFileUploader-dropFile\"),\r\n                name: \"files[]\",\r\n                multiple: false,\r\n                accept: \"\",\r\n                uploadUrl: \"/\",\r\n                allowCanceling: true,\r\n                showFileList: true,\r\n                progress: 0,\r\n                dialogTrigger: void 0,\r\n                dropZone: void 0,\r\n                readyToUploadMessage: _message.default.format(\"dxFileUploader-readyToUpload\"),\r\n                uploadedMessage: _message.default.format(\"dxFileUploader-uploaded\"),\r\n                uploadFailedMessage: _message.default.format(\"dxFileUploader-uploadFailedMessage\"),\r\n                uploadAbortedMessage: _message.default.format(\"dxFileUploader-uploadAbortedMessage\"),\r\n                uploadMode: \"instantly\",\r\n                uploadMethod: \"POST\",\r\n                uploadHeaders: {},\r\n                uploadCustomData: {},\r\n                onBeforeSend: null,\r\n                onUploadStarted: null,\r\n                onUploaded: null,\r\n                onFilesUploaded: null,\r\n                onProgress: null,\r\n                onUploadError: null,\r\n                onUploadAborted: null,\r\n                onDropZoneEnter: null,\r\n                onDropZoneLeave: null,\r\n                allowedFileExtensions: [],\r\n                maxFileSize: 0,\r\n                minFileSize: 0,\r\n                inputAttr: {},\r\n                invalidFileExtensionMessage: _message.default.format(\"dxFileUploader-invalidFileExtension\"),\r\n                invalidMaxFileSizeMessage: _message.default.format(\"dxFileUploader-invalidMaxFileSize\"),\r\n                invalidMinFileSizeMessage: _message.default.format(\"dxFileUploader-invalidMinFileSize\"),\r\n                extendSelection: true,\r\n                validationMessageMode: \"always\",\r\n                uploadFile: null,\r\n                uploadChunk: null,\r\n                abortUpload: null,\r\n                validationMessageOffset: {\r\n                    h: 0,\r\n                    v: 0\r\n                },\r\n                useNativeInputClick: false,\r\n                useDragOver: true,\r\n                nativeDropSupported: true,\r\n                _uploadButtonType: \"normal\"\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_defaultOptionsRules\",\r\n        value: function() {\r\n            return _get(_getPrototypeOf(FileUploader.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\r\n                device: function() {\r\n                    return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n                },\r\n                options: {\r\n                    focusStateEnabled: true\r\n                }\r\n            }, {\r\n                device: [{\r\n                    platform: \"android\"\r\n                }],\r\n                options: {\r\n                    validationMessageOffset: {\r\n                        v: 0\r\n                    }\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return \"desktop\" !== _devices.default.real().deviceType\r\n                },\r\n                options: {\r\n                    useDragOver: false\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return !isFormDataSupported()\r\n                },\r\n                options: {\r\n                    uploadMode: \"useForm\"\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return _browser.default.msie || \"desktop\" !== _devices.default.real().deviceType\r\n                },\r\n                options: {\r\n                    nativeDropSupported: false\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return (0, _themes.isMaterial)()\r\n                },\r\n                options: {\r\n                    _uploadButtonType: \"default\"\r\n                }\r\n            }])\r\n        }\r\n    }, {\r\n        key: \"_initOptions\",\r\n        value: function(options) {\r\n            var isLabelTextDefined = \"labelText\" in options;\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_initOptions\", this).call(this, options);\r\n            if (!isLabelTextDefined && !this._shouldDragOverBeRendered()) {\r\n                this.option(\"labelText\", \"\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_init\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_init\", this).call(this);\r\n            this._initFileInput();\r\n            this._initLabel();\r\n            this._setUploadStrategy();\r\n            this._createFiles();\r\n            this._createBeforeSendAction();\r\n            this._createUploadStartedAction();\r\n            this._createUploadedAction();\r\n            this._createFilesUploadedAction();\r\n            this._createProgressAction();\r\n            this._createUploadErrorAction();\r\n            this._createUploadAbortedAction();\r\n            this._createDropZoneEnterAction();\r\n            this._createDropZoneLeaveAction()\r\n        }\r\n    }, {\r\n        key: \"_setUploadStrategy\",\r\n        value: function() {\r\n            var strategy = null;\r\n            if (this.option(\"chunkSize\") > 0) {\r\n                var uploadChunk = this.option(\"uploadChunk\");\r\n                strategy = uploadChunk && (0, _type.isFunction)(uploadChunk) ? new CustomChunksFileUploadStrategy(this) : new DefaultChunksFileUploadStrategy(this)\r\n            } else {\r\n                var uploadFile = this.option(\"uploadFile\");\r\n                strategy = uploadFile && (0, _type.isFunction)(uploadFile) ? new CustomWholeFileUploadStrategy(this) : new DefaultWholeFileUploadStrategy(this)\r\n            }\r\n            this._uploadStrategy = strategy\r\n        }\r\n    }, {\r\n        key: \"_initFileInput\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            this._isCustomClickEvent = false;\r\n            if (!this._$fileInput) {\r\n                this._$fileInput = renderFileUploaderInput();\r\n                _events_engine.default.on(this._$fileInput, \"change\", this._inputChangeHandler.bind(this));\r\n                _events_engine.default.on(this._$fileInput, \"click\", function(e) {\r\n                    e.stopPropagation();\r\n                    return _this2.option(\"useNativeInputClick\") || _this2._isCustomClickEvent\r\n                })\r\n            }\r\n            this._$fileInput.prop({\r\n                multiple: this.option(\"multiple\"),\r\n                accept: this.option(\"accept\"),\r\n                tabIndex: -1\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_inputChangeHandler\",\r\n        value: function() {\r\n            if (this._doPreventInputChange) {\r\n                return\r\n            }\r\n            var fileName = this._$fileInput.val().replace(/^.*\\\\/, \"\");\r\n            var files = this._$fileInput.prop(\"files\");\r\n            if (files && !files.length && \"useForm\" !== this.option(\"uploadMode\")) {\r\n                return\r\n            }\r\n            var value = files ? this._getFiles(files) : [{\r\n                name: fileName\r\n            }];\r\n            this._changeValue(value);\r\n            if (\"instantly\" === this.option(\"uploadMode\")) {\r\n                this._uploadFiles()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_shouldFileListBeExtended\",\r\n        value: function() {\r\n            return \"useForm\" !== this.option(\"uploadMode\") && this.option(\"extendSelection\") && this.option(\"multiple\")\r\n        }\r\n    }, {\r\n        key: \"_removeDuplicates\",\r\n        value: function(files, value) {\r\n            var result = [];\r\n            for (var i = 0; i < value.length; i++) {\r\n                if (!this._isFileInArray(files, value[i])) {\r\n                    result.push(value[i])\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_isFileInArray\",\r\n        value: function(files, file) {\r\n            for (var i = 0; i < files.length; i++) {\r\n                var item = files[i];\r\n                if (item.size === file.size && item.name === file.name) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_changeValue\",\r\n        value: function(value) {\r\n            var files = this._shouldFileListBeExtended() ? this.option(\"value\").slice() : [];\r\n            if (\"instantly\" !== this.option(\"uploadMode\")) {\r\n                value = this._removeDuplicates(files, value)\r\n            }\r\n            this.option(\"value\", files.concat(value))\r\n        }\r\n    }, {\r\n        key: \"_getFiles\",\r\n        value: function(fileList) {\r\n            var values = [];\r\n            (0, _iterator.each)(fileList, function(_, value) {\r\n                return values.push(value)\r\n            });\r\n            return values\r\n        }\r\n    }, {\r\n        key: \"_getFile\",\r\n        value: function(fileData) {\r\n            var targetFileValue = (0, _type.isNumeric)(fileData) ? this.option(\"value\")[fileData] : fileData;\r\n            return this._files.filter(function(file) {\r\n                return file.value === targetFileValue\r\n            })[0]\r\n        }\r\n    }, {\r\n        key: \"_initLabel\",\r\n        value: function() {\r\n            if (!this._$inputLabel) {\r\n                this._$inputLabel = (0, _renderer.default)(\"<div>\")\r\n            }\r\n            this._updateInputLabelText()\r\n        }\r\n    }, {\r\n        key: \"_updateInputLabelText\",\r\n        value: function() {\r\n            var correctedValue = this._isInteractionDisabled() ? \"\" : this.option(\"labelText\");\r\n            this._$inputLabel.text(correctedValue)\r\n        }\r\n    }, {\r\n        key: \"_focusTarget\",\r\n        value: function() {\r\n            return this.$element().find(\".\" + FILEUPLOADER_BUTTON_CLASS)\r\n        }\r\n    }, {\r\n        key: \"_getSubmitElement\",\r\n        value: function() {\r\n            return this._$fileInput\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_initMarkup\", this).call(this);\r\n            this.$element().addClass(FILEUPLOADER_CLASS);\r\n            this._renderWrapper();\r\n            this._renderInputWrapper();\r\n            this._renderSelectButton();\r\n            this._renderInputContainer();\r\n            this._renderUploadButton();\r\n            this._preventRecreatingFiles = true\r\n        }\r\n    }, {\r\n        key: \"_render\",\r\n        value: function() {\r\n            this._preventRecreatingFiles = false;\r\n            this._attachDragEventHandlers(this._$inputWrapper);\r\n            this._attachDragEventHandlers(this.option(\"dropZone\"));\r\n            this._renderFiles();\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_render\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_createFileProgressBar\",\r\n        value: function(file) {\r\n            file.progressBar = this._createProgressBar(file.value.size);\r\n            file.progressBar.$element().appendTo(file.$file);\r\n            this._initStatusMessage(file);\r\n            this._ensureCancelButtonInitialized(file)\r\n        }\r\n    }, {\r\n        key: \"_setStatusMessage\",\r\n        value: function(file, message) {\r\n            var _this3 = this;\r\n            setTimeout(function() {\r\n                if (_this3.option(\"showFileList\")) {\r\n                    if (file.$statusMessage) {\r\n                        file.$statusMessage.text(message);\r\n                        file.$statusMessage.css(\"display\", \"\");\r\n                        file.progressBar.$element().remove()\r\n                    }\r\n                }\r\n            }, FILEUPLOADER_AFTER_LOAD_DELAY)\r\n        }\r\n    }, {\r\n        key: \"_getUploadAbortedStatusMessage\",\r\n        value: function() {\r\n            return \"instantly\" === this.option(\"uploadMode\") ? this.option(\"uploadAbortedMessage\") : this.option(\"readyToUploadMessage\")\r\n        }\r\n    }, {\r\n        key: \"_createFiles\",\r\n        value: function() {\r\n            var _this4 = this;\r\n            var value = this.option(\"value\");\r\n            if (this._files && (0 === value.length || !this._shouldFileListBeExtended())) {\r\n                this._preventFilesUploading(this._files);\r\n                this._files = null\r\n            }\r\n            if (!this._files) {\r\n                this._files = []\r\n            }(0, _iterator.each)(value.slice(this._files.length), function(_, value) {\r\n                var file = _this4._createFile(value);\r\n                _this4._validateFile(file);\r\n                _this4._files.push(file)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_preventFilesUploading\",\r\n        value: function(files) {\r\n            var _this5 = this;\r\n            files.forEach(function(file) {\r\n                return _this5._uploadStrategy.abortUpload(file)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_validateFile\",\r\n        value: function(file) {\r\n            file.isValidFileExtension = this._validateFileExtension(file);\r\n            file.isValidMinSize = this._validateMinFileSize(file);\r\n            file.isValidMaxSize = this._validateMaxFileSize(file)\r\n        }\r\n    }, {\r\n        key: \"_validateFileExtension\",\r\n        value: function(file) {\r\n            var allowedExtensions = this.option(\"allowedFileExtensions\");\r\n            var fileExtension = file.value.name.substring(file.value.name.lastIndexOf(\".\")).toLowerCase();\r\n            if (0 === allowedExtensions.length) {\r\n                return true\r\n            }\r\n            for (var i = 0; i < allowedExtensions.length; i++) {\r\n                if (fileExtension === allowedExtensions[i].toLowerCase()) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_validateMaxFileSize\",\r\n        value: function(file) {\r\n            var fileSize = file.value.size;\r\n            var maxFileSize = this.option(\"maxFileSize\");\r\n            return maxFileSize > 0 ? fileSize <= maxFileSize : true\r\n        }\r\n    }, {\r\n        key: \"_validateMinFileSize\",\r\n        value: function(file) {\r\n            var fileSize = file.value.size;\r\n            var minFileSize = this.option(\"minFileSize\");\r\n            return minFileSize > 0 ? fileSize >= minFileSize : true\r\n        }\r\n    }, {\r\n        key: \"_createBeforeSendAction\",\r\n        value: function() {\r\n            this._beforeSendAction = this._createActionByOption(\"onBeforeSend\", {\r\n                excludeValidators: [\"readOnly\"]\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createUploadStartedAction\",\r\n        value: function() {\r\n            this._uploadStartedAction = this._createActionByOption(\"onUploadStarted\", {\r\n                excludeValidators: [\"readOnly\"]\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createUploadedAction\",\r\n        value: function() {\r\n            this._uploadedAction = this._createActionByOption(\"onUploaded\", {\r\n                excludeValidators: [\"readOnly\"]\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createFilesUploadedAction\",\r\n        value: function() {\r\n            this._filesUploadedAction = this._createActionByOption(\"onFilesUploaded\", {\r\n                excludeValidators: [\"readOnly\"]\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createProgressAction\",\r\n        value: function() {\r\n            this._progressAction = this._createActionByOption(\"onProgress\", {\r\n                excludeValidators: [\"readOnly\"]\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createUploadAbortedAction\",\r\n        value: function() {\r\n            this._uploadAbortedAction = this._createActionByOption(\"onUploadAborted\", {\r\n                excludeValidators: [\"readOnly\"]\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createUploadErrorAction\",\r\n        value: function() {\r\n            this._uploadErrorAction = this._createActionByOption(\"onUploadError\", {\r\n                excludeValidators: [\"readOnly\"]\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createDropZoneEnterAction\",\r\n        value: function() {\r\n            this._dropZoneEnterAction = this._createActionByOption(\"onDropZoneEnter\")\r\n        }\r\n    }, {\r\n        key: \"_createDropZoneLeaveAction\",\r\n        value: function() {\r\n            this._dropZoneLeaveAction = this._createActionByOption(\"onDropZoneLeave\")\r\n        }\r\n    }, {\r\n        key: \"_createFile\",\r\n        value: function(value) {\r\n            return {\r\n                value: value,\r\n                loadedSize: 0,\r\n                onProgress: (0, _callbacks.default)(),\r\n                onAbort: (0, _callbacks.default)(),\r\n                onLoad: (0, _callbacks.default)(),\r\n                onError: (0, _callbacks.default)(),\r\n                onLoadStart: (0, _callbacks.default)(),\r\n                isValidFileExtension: true,\r\n                isValidMaxSize: true,\r\n                isValidMinSize: true,\r\n                isValid: function() {\r\n                    return this.isValidFileExtension && this.isValidMaxSize && this.isValidMinSize\r\n                },\r\n                isInitialized: false\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_resetFileState\",\r\n        value: function(file) {\r\n            file.isAborted = false;\r\n            file.uploadStarted = false;\r\n            file.isStartLoad = false;\r\n            file.loadedSize = 0;\r\n            file.chunksData = void 0;\r\n            file.request = void 0\r\n        }\r\n    }, {\r\n        key: \"_renderFiles\",\r\n        value: function() {\r\n            var _this$_validationMess, _this6 = this;\r\n            var value = this.option(\"value\");\r\n            if (!this._$filesContainer) {\r\n                this._$filesContainer = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILES_CONTAINER_CLASS).appendTo(this._$content)\r\n            } else {\r\n                if (!this._shouldFileListBeExtended() || 0 === value.length) {\r\n                    this._$filesContainer.empty()\r\n                }\r\n            }\r\n            var showFileList = this.option(\"showFileList\");\r\n            if (showFileList) {\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    if (!file.$file) {\r\n                        _this6._renderFile(file)\r\n                    }\r\n                })\r\n            }\r\n            this.$element().toggleClass(FILEUPLOADER_SHOW_FILE_LIST_CLASS, showFileList);\r\n            this._toggleFileUploaderEmptyClassName();\r\n            this._updateFileNameMaxWidth();\r\n            null === (_this$_validationMess = this._validationMessage) || void 0 === _this$_validationMess ? void 0 : _this$_validationMess.repaint()\r\n        }\r\n    }, {\r\n        key: \"_renderFile\",\r\n        value: function(file) {\r\n            var value = file.value;\r\n            var $fileContainer = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CONTAINER_CLASS).appendTo(this._$filesContainer);\r\n            this._renderFileButtons(file, $fileContainer);\r\n            file.$file = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CLASS).appendTo($fileContainer);\r\n            var $fileInfo = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_INFO_CLASS).appendTo(file.$file);\r\n            file.$statusMessage = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS).appendTo(file.$file);\r\n            (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_NAME_CLASS).text(value.name).appendTo($fileInfo);\r\n            if ((0, _type.isDefined)(value.size)) {\r\n                (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_FILE_SIZE_CLASS).text(this._getFileSize(value.size)).appendTo($fileInfo)\r\n            }\r\n            if (file.isValid()) {\r\n                file.$statusMessage.text(this.option(\"readyToUploadMessage\"))\r\n            } else {\r\n                if (!file.isValidFileExtension) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidFileExtensionMessage\"))\r\n                }\r\n                if (!file.isValidMaxSize) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidMaxFileSizeMessage\"))\r\n                }\r\n                if (!file.isValidMinSize) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidMinFileSizeMessage\"))\r\n                }\r\n                $fileContainer.addClass(FILEUPLOADER_INVALID_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createValidationElement\",\r\n        value: function(key) {\r\n            return (0, _renderer.default)(\"<span>\").text(this.option(key))\r\n        }\r\n    }, {\r\n        key: \"_updateFileNameMaxWidth\",\r\n        value: function() {\r\n            var cancelButtonsCount = this.option(\"allowCanceling\") && \"useForm\" !== this.option(\"uploadMode\") ? 1 : 0;\r\n            var uploadButtonsCount = \"useButtons\" === this.option(\"uploadMode\") ? 1 : 0;\r\n            var filesContainerWidth = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_CONTAINER_CLASS).first().width() || this._$filesContainer.width();\r\n            var $buttonContainer = this._$filesContainer.find(\".\" + FILEUPLOADER_BUTTON_CONTAINER_CLASS).eq(0);\r\n            var buttonsWidth = $buttonContainer.width() * (cancelButtonsCount + uploadButtonsCount);\r\n            var $fileSize = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_SIZE_CLASS).eq(0);\r\n            var prevFileSize = $fileSize.text();\r\n            $fileSize.text(\"1000 Mb\");\r\n            var fileSizeWidth = $fileSize.width();\r\n            $fileSize.text(prevFileSize);\r\n            this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_NAME_CLASS).css(\"maxWidth\", filesContainerWidth - buttonsWidth - fileSizeWidth)\r\n        }\r\n    }, {\r\n        key: \"_renderFileButtons\",\r\n        value: function(file, $container) {\r\n            var $cancelButton = this._getCancelButton(file);\r\n            $cancelButton && $container.append($cancelButton);\r\n            var $uploadButton = this._getUploadButton(file);\r\n            $uploadButton && $container.append($uploadButton)\r\n        }\r\n    }, {\r\n        key: \"_getCancelButton\",\r\n        value: function(file) {\r\n            var _this7 = this;\r\n            if (\"useForm\" === this.option(\"uploadMode\")) {\r\n                return null\r\n            }\r\n            file.cancelButton = this._createComponent((0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_CANCEL_BUTTON_CLASS), _button.default, {\r\n                onClick: function() {\r\n                    return _this7._removeFile(file)\r\n                },\r\n                icon: \"close\",\r\n                visible: this.option(\"allowCanceling\"),\r\n                disabled: this.option(\"readOnly\"),\r\n                integrationOptions: {}\r\n            });\r\n            return (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.cancelButton.$element())\r\n        }\r\n    }, {\r\n        key: \"_getUploadButton\",\r\n        value: function(file) {\r\n            var _this8 = this;\r\n            if (!file.isValid() || \"useButtons\" !== this.option(\"uploadMode\")) {\r\n                return null\r\n            }\r\n            file.uploadButton = this._createComponent((0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_UPLOAD_BUTTON_CLASS), _button.default, {\r\n                onClick: function() {\r\n                    return _this8._uploadFile(file)\r\n                },\r\n                icon: \"upload\"\r\n            });\r\n            file.onLoadStart.add(function() {\r\n                return file.uploadButton.option({\r\n                    visible: false,\r\n                    disabled: true\r\n                })\r\n            });\r\n            file.onAbort.add(function() {\r\n                return file.uploadButton.option({\r\n                    visible: true,\r\n                    disabled: false\r\n                })\r\n            });\r\n            return (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.uploadButton.$element())\r\n        }\r\n    }, {\r\n        key: \"_removeFile\",\r\n        value: function(file) {\r\n            var _file$$file;\r\n            null === (_file$$file = file.$file) || void 0 === _file$$file ? void 0 : _file$$file.parent().remove();\r\n            this._files.splice((0, _array.inArray)(file, this._files), 1);\r\n            var value = this.option(\"value\").slice();\r\n            value.splice((0, _array.inArray)(file.value, value), 1);\r\n            this._preventRecreatingFiles = true;\r\n            this.option(\"value\", value);\r\n            this._preventRecreatingFiles = false;\r\n            this._toggleFileUploaderEmptyClassName();\r\n            this._doPreventInputChange = true;\r\n            this._$fileInput.val(\"\");\r\n            this._doPreventInputChange = false\r\n        }\r\n    }, {\r\n        key: \"removeFile\",\r\n        value: function(fileData) {\r\n            if (\"useForm\" === this.option(\"uploadMode\") || !(0, _type.isDefined)(fileData)) {\r\n                return\r\n            }\r\n            var file = this._getFile(fileData);\r\n            if (file) {\r\n                if (file.uploadStarted) {\r\n                    this._preventFilesUploading([file])\r\n                }\r\n                this._removeFile(file)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_toggleFileUploaderEmptyClassName\",\r\n        value: function() {\r\n            this.$element().toggleClass(FILEUPLOADER_EMPTY_CLASS, !this._files.length || this._hasInvalidFile(this._files))\r\n        }\r\n    }, {\r\n        key: \"_hasInvalidFile\",\r\n        value: function(files) {\r\n            for (var i = 0; i < files.length; i++) {\r\n                if (!files[i].isValid()) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_getFileSize\",\r\n        value: function(size) {\r\n            var i = 0;\r\n            var labels = [_message.default.format(\"dxFileUploader-bytes\"), _message.default.format(\"dxFileUploader-kb\"), _message.default.format(\"dxFileUploader-Mb\"), _message.default.format(\"dxFileUploader-Gb\")];\r\n            var count = labels.length - 1;\r\n            while (i < count && size >= 1024) {\r\n                size /= 1024;\r\n                i++\r\n            }\r\n            return Math.round(size) + \" \" + labels[i]\r\n        }\r\n    }, {\r\n        key: \"_renderSelectButton\",\r\n        value: function() {\r\n            var $button = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).appendTo(this._$inputWrapper);\r\n            this._selectButton = this._createComponent($button, _button.default, {\r\n                text: this.option(\"selectButtonText\"),\r\n                focusStateEnabled: false,\r\n                integrationOptions: {},\r\n                disabled: this.option(\"readOnly\")\r\n            });\r\n            this._selectFileDialogHandler = this._selectButtonClickHandler.bind(this);\r\n            if (\"desktop\" === _devices.default.real().deviceType) {\r\n                this._selectButton.option(\"onClick\", this._selectFileDialogHandler)\r\n            } else {\r\n                this._attachSelectFileDialogHandler(this._selectButton.$element())\r\n            }\r\n            this._attachSelectFileDialogHandler(this.option(\"dialogTrigger\"))\r\n        }\r\n    }, {\r\n        key: \"_selectButtonClickHandler\",\r\n        value: function() {\r\n            if (this.option(\"useNativeInputClick\")) {\r\n                return\r\n            }\r\n            if (this._isInteractionDisabled()) {\r\n                return false\r\n            }\r\n            this._isCustomClickEvent = true;\r\n            _events_engine.default.trigger(this._$fileInput, \"click\");\r\n            this._isCustomClickEvent = false\r\n        }\r\n    }, {\r\n        key: \"_attachSelectFileDialogHandler\",\r\n        value: function(target) {\r\n            if (!(0, _type.isDefined)(target)) {\r\n                return\r\n            }\r\n            this._detachSelectFileDialogHandler(target);\r\n            _events_engine.default.on((0, _renderer.default)(target), \"click\", this._selectFileDialogHandler)\r\n        }\r\n    }, {\r\n        key: \"_detachSelectFileDialogHandler\",\r\n        value: function(target) {\r\n            if (!(0, _type.isDefined)(target)) {\r\n                return\r\n            }\r\n            _events_engine.default.off((0, _renderer.default)(target), \"click\", this._selectFileDialogHandler)\r\n        }\r\n    }, {\r\n        key: \"_renderUploadButton\",\r\n        value: function() {\r\n            if (\"useButtons\" !== this.option(\"uploadMode\")) {\r\n                return\r\n            }\r\n            var $uploadButton = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).addClass(FILEUPLOADER_UPLOAD_BUTTON_CLASS).appendTo(this._$content);\r\n            this._uploadButton = this._createComponent($uploadButton, _button.default, {\r\n                text: this.option(\"uploadButtonText\"),\r\n                onClick: this._uploadButtonClickHandler.bind(this),\r\n                type: this.option(\"_uploadButtonType\"),\r\n                integrationOptions: {}\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_uploadButtonClickHandler\",\r\n        value: function() {\r\n            this._uploadFiles()\r\n        }\r\n    }, {\r\n        key: \"_shouldDragOverBeRendered\",\r\n        value: function() {\r\n            return !this.option(\"readOnly\") && (\"useForm\" !== this.option(\"uploadMode\") || this.option(\"nativeDropSupported\"))\r\n        }\r\n    }, {\r\n        key: \"_isInteractionDisabled\",\r\n        value: function() {\r\n            return this.option(\"readOnly\") || this.option(\"disabled\")\r\n        }\r\n    }, {\r\n        key: \"_renderInputContainer\",\r\n        value: function() {\r\n            this._$inputContainer = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_CONTAINER_CLASS).appendTo(this._$inputWrapper);\r\n            this._$fileInput.addClass(FILEUPLOADER_INPUT_CLASS);\r\n            this._renderInput();\r\n            var labelId = \"dx-fileuploader-input-label-\".concat(new _guid.default);\r\n            this._$inputLabel.attr(\"id\", labelId).addClass(FILEUPLOADER_INPUT_LABEL_CLASS).appendTo(this._$inputContainer);\r\n            this.setAria(\"labelledby\", labelId, this._$fileInput)\r\n        }\r\n    }, {\r\n        key: \"_renderInput\",\r\n        value: function() {\r\n            if (this.option(\"useNativeInputClick\")) {\r\n                this._selectButton.option(\"template\", this._selectButtonInputTemplate.bind(this))\r\n            } else {\r\n                this._$fileInput.appendTo(this._$inputContainer);\r\n                this._selectButton.option(\"template\", \"content\")\r\n            }\r\n            this._applyInputAttributes(this.option(\"inputAttr\"))\r\n        }\r\n    }, {\r\n        key: \"_selectButtonInputTemplate\",\r\n        value: function(data, content) {\r\n            var $content = (0, _renderer.default)(content);\r\n            var $text = (0, _renderer.default)(\"<span>\").addClass(\"dx-button-text\").text(data.text);\r\n            $content.append($text).append(this._$fileInput);\r\n            return $content\r\n        }\r\n    }, {\r\n        key: \"_renderInputWrapper\",\r\n        value: function() {\r\n            this._$inputWrapper = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_WRAPPER_CLASS).appendTo(this._$content)\r\n        }\r\n    }, {\r\n        key: \"_detachDragEventHandlers\",\r\n        value: function(target) {\r\n            if (!(0, _type.isDefined)(target)) {\r\n                return\r\n            }\r\n            _events_engine.default.off((0, _renderer.default)(target), (0, _index.addNamespace)(\"\", this.NAME))\r\n        }\r\n    }, {\r\n        key: \"_attachDragEventHandlers\",\r\n        value: function(target) {\r\n            var isCustomTarget = target !== this._$inputWrapper;\r\n            if (!(0, _type.isDefined)(target) || !this._shouldDragOverBeRendered()) {\r\n                return\r\n            }\r\n            this._detachDragEventHandlers(target);\r\n            target = (0, _renderer.default)(target);\r\n            this._dragEventsTargets = [];\r\n            _events_engine.default.on(target, (0, _index.addNamespace)(\"dragenter\", this.NAME), this._dragEnterHandler.bind(this, isCustomTarget));\r\n            _events_engine.default.on(target, (0, _index.addNamespace)(\"dragover\", this.NAME), this._dragOverHandler.bind(this));\r\n            _events_engine.default.on(target, (0, _index.addNamespace)(\"dragleave\", this.NAME), this._dragLeaveHandler.bind(this, isCustomTarget));\r\n            _events_engine.default.on(target, (0, _index.addNamespace)(\"drop\", this.NAME), this._dropHandler.bind(this, isCustomTarget))\r\n        }\r\n    }, {\r\n        key: \"_applyInputAttributes\",\r\n        value: function(customAttributes) {\r\n            this._$fileInput.attr(customAttributes)\r\n        }\r\n    }, {\r\n        key: \"_useInputForDrop\",\r\n        value: function() {\r\n            return this.option(\"nativeDropSupported\") && \"useForm\" === this.option(\"uploadMode\")\r\n        }\r\n    }, {\r\n        key: \"_dragEnterHandler\",\r\n        value: function(isCustomTarget, e) {\r\n            if (this.option(\"disabled\")) {\r\n                return false\r\n            }\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n            this._tryToggleDropZoneActive(true, isCustomTarget, e);\r\n            this._updateEventTargets(e)\r\n        }\r\n    }, {\r\n        key: \"_dragOverHandler\",\r\n        value: function(e) {\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n            e.originalEvent.dataTransfer.dropEffect = \"copy\"\r\n        }\r\n    }, {\r\n        key: \"_dragLeaveHandler\",\r\n        value: function(isCustomTarget, e) {\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n            this._updateEventTargets(e);\r\n            this._tryToggleDropZoneActive(false, isCustomTarget, e)\r\n        }\r\n    }, {\r\n        key: \"_updateEventTargets\",\r\n        value: function(e) {\r\n            var targetIndex = this._dragEventsTargets.indexOf(e.target);\r\n            var isTargetExists = targetIndex !== -1;\r\n            if (\"dragenter\" === e.type) {\r\n                !isTargetExists && this._dragEventsTargets.push(e.target)\r\n            } else {\r\n                isTargetExists && this._dragEventsTargets.splice(targetIndex, 1)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_tryToggleDropZoneActive\",\r\n        value: function(active, isCustom, event) {\r\n            var classAction = active ? \"addClass\" : \"removeClass\";\r\n            var mouseAction = active ? \"_dropZoneEnterAction\" : \"_dropZoneLeaveAction\";\r\n            if (!this._dragEventsTargets.length) {\r\n                this[mouseAction]({\r\n                    event: event,\r\n                    dropZoneElement: event.currentTarget\r\n                });\r\n                if (!isCustom) {\r\n                    this.$element()[classAction](FILEUPLOADER_DRAGOVER_CLASS)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_dropHandler\",\r\n        value: function(isCustomTarget, e) {\r\n            this._dragEventsTargets = [];\r\n            if (!isCustomTarget) {\r\n                this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS)\r\n            }\r\n            if (this._useInputForDrop() || isCustomTarget && this._isInteractionDisabled()) {\r\n                return\r\n            }\r\n            e.preventDefault();\r\n            var fileList = e.originalEvent.dataTransfer.files;\r\n            var files = this._getFiles(fileList);\r\n            if (!this.option(\"multiple\") && files.length > 1) {\r\n                return\r\n            }\r\n            this._changeValue(this._filterFiles(files));\r\n            if (\"instantly\" === this.option(\"uploadMode\")) {\r\n                this._uploadFiles()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_handleAllFilesUploaded\",\r\n        value: function() {\r\n            var areAllFilesLoaded = this._files.every(function(file) {\r\n                return !file.isValid() || file._isError || file._isLoaded || file.isAborted\r\n            });\r\n            if (areAllFilesLoaded) {\r\n                this._filesUploadedAction()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_filterFiles\",\r\n        value: function(files) {\r\n            if (!files.length) {\r\n                return files\r\n            }\r\n            var accept = this.option(\"accept\");\r\n            if (!accept.length) {\r\n                return files\r\n            }\r\n            var result = [];\r\n            var allowedTypes = this._getAllowedFileTypes(accept);\r\n            for (var i = 0, n = files.length; i < n; i++) {\r\n                if (this._isFileTypeAllowed(files[i], allowedTypes)) {\r\n                    result.push(files[i])\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_getAllowedFileTypes\",\r\n        value: function(acceptSting) {\r\n            if (!acceptSting.length) {\r\n                return []\r\n            }\r\n            return acceptSting.split(\",\").map(function(item) {\r\n                return item.trim()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_isFileTypeAllowed\",\r\n        value: function(file, allowedTypes) {\r\n            for (var i = 0, n = allowedTypes.length; i < n; i++) {\r\n                var allowedType = allowedTypes[i];\r\n                if (\".\" === allowedType[0]) {\r\n                    allowedType = allowedType.replace(\".\", \"\\\\.\");\r\n                    if (file.name.match(new RegExp(allowedType + \"$\", \"i\"))) {\r\n                        return true\r\n                    }\r\n                } else {\r\n                    allowedType = allowedType.replace(\"*\", \"\");\r\n                    if (file.type.match(new RegExp(allowedType, \"i\"))) {\r\n                        return true\r\n                    }\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_renderWrapper\",\r\n        value: function() {\r\n            var $wrapper = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_WRAPPER_CLASS).appendTo(this.$element());\r\n            var $container = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_CONTAINER_CLASS).appendTo($wrapper);\r\n            this._$content = (0, _renderer.default)(\"<div>\").addClass(FILEUPLOADER_CONTENT_CLASS).appendTo($container)\r\n        }\r\n    }, {\r\n        key: \"_clean\",\r\n        value: function() {\r\n            this._$fileInput.detach();\r\n            delete this._$filesContainer;\r\n            if (this._files) {\r\n                this._files.forEach(function(file) {\r\n                    file.$file = null;\r\n                    file.$statusMessage = null\r\n                })\r\n            }\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_clean\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"abortUpload\",\r\n        value: function(fileData) {\r\n            if (\"useForm\" === this.option(\"uploadMode\")) {\r\n                return\r\n            }\r\n            if ((0, _type.isDefined)(fileData)) {\r\n                var file = this._getFile(fileData);\r\n                if (file) {\r\n                    this._preventFilesUploading([file])\r\n                }\r\n            } else {\r\n                this._preventFilesUploading(this._files)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"upload\",\r\n        value: function(fileData) {\r\n            if (\"useForm\" === this.option(\"uploadMode\")) {\r\n                return\r\n            }\r\n            if ((0, _type.isDefined)(fileData)) {\r\n                var file = this._getFile(fileData);\r\n                if (file && isFormDataSupported()) {\r\n                    this._uploadFile(file)\r\n                }\r\n            } else {\r\n                this._uploadFiles()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_uploadFiles\",\r\n        value: function() {\r\n            var _this9 = this;\r\n            if (isFormDataSupported()) {\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    return _this9._uploadFile(file)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            this._uploadStrategy.upload(file)\r\n        }\r\n    }, {\r\n        key: \"_updateProgressBar\",\r\n        value: function(file, loadedFileData) {\r\n            file.progressBar && file.progressBar.option({\r\n                value: loadedFileData.loaded,\r\n                showStatus: true\r\n            });\r\n            this._progressAction({\r\n                file: file.value,\r\n                segmentSize: loadedFileData.currentSegmentSize,\r\n                bytesLoaded: loadedFileData.loaded,\r\n                bytesTotal: loadedFileData.total,\r\n                event: loadedFileData.event,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_updateTotalProgress\",\r\n        value: function(totalFilesSize, totalLoadedFilesSize) {\r\n            var progress = totalFilesSize ? this._getProgressValue(totalLoadedFilesSize / totalFilesSize) : 0;\r\n            this.option(\"progress\", progress);\r\n            this._setLoadedSize(totalLoadedFilesSize)\r\n        }\r\n    }, {\r\n        key: \"_getProgressValue\",\r\n        value: function(ratio) {\r\n            return Math.floor(100 * ratio)\r\n        }\r\n    }, {\r\n        key: \"_initStatusMessage\",\r\n        value: function(file) {\r\n            file.$statusMessage.css(\"display\", \"none\")\r\n        }\r\n    }, {\r\n        key: \"_ensureCancelButtonInitialized\",\r\n        value: function(file) {\r\n            var _this10 = this;\r\n            if (file.isInitialized) {\r\n                return\r\n            }\r\n            file.cancelButton.option(\"onClick\", function() {\r\n                _this10._preventFilesUploading([file]);\r\n                _this10._removeFile(file)\r\n            });\r\n            var hideCancelButton = function() {\r\n                setTimeout(function() {\r\n                    file.cancelButton.option({\r\n                        visible: false\r\n                    })\r\n                }, FILEUPLOADER_AFTER_LOAD_DELAY)\r\n            };\r\n            file.onLoad.add(hideCancelButton);\r\n            file.onError.add(hideCancelButton)\r\n        }\r\n    }, {\r\n        key: \"_createProgressBar\",\r\n        value: function(fileSize) {\r\n            var _this11 = this;\r\n            return this._createComponent((0, _renderer.default)(\"<div>\"), _progress_bar.default, {\r\n                value: void 0,\r\n                min: 0,\r\n                max: fileSize,\r\n                statusFormat: function(ratio) {\r\n                    return _this11._getProgressValue(ratio) + \"%\"\r\n                },\r\n                showStatus: false,\r\n                statusPosition: \"right\"\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getTotalFilesSize\",\r\n        value: function() {\r\n            var _this12 = this;\r\n            if (!this._totalFilesSize) {\r\n                this._totalFilesSize = 0;\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    _this12._totalFilesSize += file.value.size\r\n                })\r\n            }\r\n            return this._totalFilesSize\r\n        }\r\n    }, {\r\n        key: \"_getTotalLoadedFilesSize\",\r\n        value: function() {\r\n            var _this13 = this;\r\n            if (!this._totalLoadedFilesSize) {\r\n                this._totalLoadedFilesSize = 0;\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    _this13._totalLoadedFilesSize += file.loadedSize\r\n                })\r\n            }\r\n            return this._totalLoadedFilesSize\r\n        }\r\n    }, {\r\n        key: \"_setLoadedSize\",\r\n        value: function(value) {\r\n            this._totalLoadedFilesSize = value\r\n        }\r\n    }, {\r\n        key: \"_recalculateProgress\",\r\n        value: function() {\r\n            this._totalFilesSize = 0;\r\n            this._totalLoadedFilesSize = 0;\r\n            this._updateTotalProgress(this._getTotalFilesSize(), this._getTotalLoadedFilesSize())\r\n        }\r\n    }, {\r\n        key: \"_updateReadOnlyState\",\r\n        value: function() {\r\n            var readOnly = this.option(\"readOnly\");\r\n            this._selectButton.option(\"disabled\", readOnly);\r\n            this._files.forEach(function(file) {\r\n                var _file$cancelButton;\r\n                return null === (_file$cancelButton = file.cancelButton) || void 0 === _file$cancelButton ? void 0 : _file$cancelButton.option(\"disabled\", readOnly)\r\n            });\r\n            this._updateInputLabelText();\r\n            this._attachDragEventHandlers(this._$inputWrapper)\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            var name = args.name,\r\n                value = args.value,\r\n                previousValue = args.previousValue;\r\n            switch (name) {\r\n                case \"height\":\r\n                case \"width\":\r\n                    this._updateFileNameMaxWidth();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"value\":\r\n                    !value.length && this._$fileInput.val(\"\");\r\n                    if (!this._preventRecreatingFiles) {\r\n                        this._createFiles();\r\n                        this._renderFiles()\r\n                    }\r\n                    this._recalculateProgress();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"name\":\r\n                    this._initFileInput();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"accept\":\r\n                    this._initFileInput();\r\n                    break;\r\n                case \"multiple\":\r\n                    this._initFileInput();\r\n                    if (!args.value) {\r\n                        this.reset()\r\n                    }\r\n                    break;\r\n                case \"readOnly\":\r\n                    this._updateReadOnlyState();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"selectButtonText\":\r\n                    this._selectButton.option(\"text\", value);\r\n                    break;\r\n                case \"uploadButtonText\":\r\n                    this._uploadButton && this._uploadButton.option(\"text\", value);\r\n                    break;\r\n                case \"_uploadButtonType\":\r\n                    this._uploadButton && this._uploadButton.option(\"type\", value);\r\n                    break;\r\n                case \"dialogTrigger\":\r\n                    this._detachSelectFileDialogHandler(previousValue);\r\n                    this._attachSelectFileDialogHandler(value);\r\n                    break;\r\n                case \"dropZone\":\r\n                    this._detachDragEventHandlers(previousValue);\r\n                    this._attachDragEventHandlers(value);\r\n                    break;\r\n                case \"maxFileSize\":\r\n                case \"minFileSize\":\r\n                case \"allowedFileExtensions\":\r\n                case \"invalidFileExtensionMessage\":\r\n                case \"invalidMaxFileSizeMessage\":\r\n                case \"invalidMinFileSizeMessage\":\r\n                case \"readyToUploadMessage\":\r\n                case \"uploadedMessage\":\r\n                case \"uploadFailedMessage\":\r\n                case \"uploadAbortedMessage\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"labelText\":\r\n                    this._updateInputLabelText();\r\n                    break;\r\n                case \"showFileList\":\r\n                    if (!this._preventRecreatingFiles) {\r\n                        this._renderFiles()\r\n                    }\r\n                    break;\r\n                case \"uploadFile\":\r\n                case \"uploadChunk\":\r\n                case \"chunkSize\":\r\n                    this._setUploadStrategy();\r\n                    break;\r\n                case \"abortUpload\":\r\n                case \"uploadUrl\":\r\n                case \"progress\":\r\n                case \"uploadMethod\":\r\n                case \"uploadHeaders\":\r\n                case \"uploadCustomData\":\r\n                case \"extendSelection\":\r\n                    break;\r\n                case \"allowCanceling\":\r\n                case \"uploadMode\":\r\n                    this.reset();\r\n                    this._invalidate();\r\n                    break;\r\n                case \"onBeforeSend\":\r\n                    this._createBeforeSendAction();\r\n                    break;\r\n                case \"onUploadStarted\":\r\n                    this._createUploadStartedAction();\r\n                    break;\r\n                case \"onUploaded\":\r\n                    this._createUploadedAction();\r\n                    break;\r\n                case \"onFilesUploaded\":\r\n                    this._createFilesUploadedAction();\r\n                    break;\r\n                case \"onProgress\":\r\n                    this._createProgressAction();\r\n                    break;\r\n                case \"onUploadError\":\r\n                    this._createUploadErrorAction();\r\n                    break;\r\n                case \"onUploadAborted\":\r\n                    this._createUploadAbortedAction();\r\n                    break;\r\n                case \"onDropZoneEnter\":\r\n                    this._createDropZoneEnterAction();\r\n                    break;\r\n                case \"onDropZoneLeave\":\r\n                    this._createDropZoneLeaveAction();\r\n                    break;\r\n                case \"useNativeInputClick\":\r\n                    this._renderInput();\r\n                    break;\r\n                case \"useDragOver\":\r\n                    this._attachDragEventHandlers(this._$inputWrapper);\r\n                    break;\r\n                case \"nativeDropSupported\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"inputAttr\":\r\n                    this._applyInputAttributes(this.option(name));\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"reset\",\r\n        value: function() {\r\n            this.option(\"value\", [])\r\n        }\r\n    }]);\r\n    return FileUploader\r\n}(_editor.default);\r\nvar FileBlobReader = function() {\r\n    function FileBlobReader(file, chunkSize) {\r\n        _classCallCheck(this, FileBlobReader);\r\n        this.file = file;\r\n        this.chunkSize = chunkSize;\r\n        this.index = 0\r\n    }\r\n    _createClass(FileBlobReader, [{\r\n        key: \"read\",\r\n        value: function() {\r\n            if (!this.file) {\r\n                return null\r\n            }\r\n            var result = this.createBlobResult(this.file, this.index, this.chunkSize);\r\n            if (result.isCompleted) {\r\n                this.file = null\r\n            }\r\n            this.index++;\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"createBlobResult\",\r\n        value: function(file, index, chunkSize) {\r\n            var currentPosition = index * chunkSize;\r\n            return {\r\n                blob: this.sliceFile(file, currentPosition, chunkSize),\r\n                index: index,\r\n                isCompleted: currentPosition + chunkSize >= file.size\r\n            }\r\n        }\r\n    }, {\r\n        key: \"sliceFile\",\r\n        value: function(file, startPos, length) {\r\n            if (file.slice) {\r\n                return file.slice(startPos, startPos + length)\r\n            }\r\n            if (file.webkitSlice) {\r\n                return file.webkitSlice(startPos, startPos + length)\r\n            }\r\n            return null\r\n        }\r\n    }]);\r\n    return FileBlobReader\r\n}();\r\nvar FileUploadStrategyBase = function() {\r\n    function FileUploadStrategyBase(fileUploader) {\r\n        _classCallCheck(this, FileUploadStrategyBase);\r\n        this.fileUploader = fileUploader\r\n    }\r\n    _createClass(FileUploadStrategyBase, [{\r\n        key: \"upload\",\r\n        value: function(file) {\r\n            if (file.isInitialized && file.isAborted) {\r\n                this.fileUploader._resetFileState(file)\r\n            }\r\n            if (file.isValid() && !file.uploadStarted) {\r\n                this._prepareFileBeforeUpload(file);\r\n                this._uploadCore(file)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"abortUpload\",\r\n        value: function abortUpload(file) {\r\n            var _this14 = this;\r\n            if (file._isError || file._isLoaded || file.isAborted) {\r\n                return\r\n            }\r\n            file.isAborted = true;\r\n            file.request && file.request.abort();\r\n            if (this._isCustomCallback(\"abortUpload\")) {\r\n                var abortUpload = this.fileUploader.option(\"abortUpload\");\r\n                var arg = this._createUploadArgument(file);\r\n                var deferred = null;\r\n                try {\r\n                    var result = abortUpload(file.value, arg);\r\n                    deferred = (0, _deferred.fromPromise)(result)\r\n                } catch (error) {\r\n                    deferred = (new _deferred.Deferred).reject(error).promise()\r\n                }\r\n                deferred.done(function() {\r\n                    return file.onAbort.fire()\r\n                }).fail(function(error) {\r\n                    return _this14._handleFileError(file, error)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_beforeSend\",\r\n        value: function(xhr, file) {\r\n            var arg = this._createUploadArgument(file);\r\n            this.fileUploader._beforeSendAction({\r\n                request: xhr,\r\n                file: file.value,\r\n                uploadInfo: arg\r\n            });\r\n            file.request = xhr\r\n        }\r\n    }, {\r\n        key: \"_createUploadArgument\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_uploadCore\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_isCustomCallback\",\r\n        value: function(name) {\r\n            var callback = this.fileUploader.option(name);\r\n            return callback && (0, _type.isFunction)(callback)\r\n        }\r\n    }, {\r\n        key: \"_handleFileError\",\r\n        value: function(file, error) {\r\n            file._isError = true;\r\n            file.onError.fire(error)\r\n        }\r\n    }, {\r\n        key: \"_prepareFileBeforeUpload\",\r\n        value: function(file) {\r\n            if (file.$file) {\r\n                var _file$progressBar;\r\n                null === (_file$progressBar = file.progressBar) || void 0 === _file$progressBar ? void 0 : _file$progressBar.dispose();\r\n                this.fileUploader._createFileProgressBar(file)\r\n            }\r\n            if (file.isInitialized) {\r\n                return\r\n            }\r\n            file.onLoadStart.add(this._onUploadStarted.bind(this, file));\r\n            file.onLoad.add(this._onLoadedHandler.bind(this, file));\r\n            file.onError.add(this._onErrorHandler.bind(this, file));\r\n            file.onAbort.add(this._onAbortHandler.bind(this, file));\r\n            file.onProgress.add(this._onProgressHandler.bind(this, file));\r\n            file.isInitialized = true\r\n        }\r\n    }, {\r\n        key: \"_isStatusError\",\r\n        value: function(status) {\r\n            return 400 <= status && status < 500 || 500 <= status && status < 600\r\n        }\r\n    }, {\r\n        key: \"_onUploadStarted\",\r\n        value: function(file, e) {\r\n            file.uploadStarted = true;\r\n            this.fileUploader._uploadStartedAction({\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onAbortHandler\",\r\n        value: function(file, e) {\r\n            var args = {\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request,\r\n                message: this.fileUploader._getUploadAbortedStatusMessage()\r\n            };\r\n            this.fileUploader._uploadAbortedAction(args);\r\n            this.fileUploader._setStatusMessage(file, args.message);\r\n            this.fileUploader._handleAllFilesUploaded()\r\n        }\r\n    }, {\r\n        key: \"_onErrorHandler\",\r\n        value: function(file, error) {\r\n            var args = {\r\n                file: file.value,\r\n                event: void 0,\r\n                request: file.request,\r\n                error: error,\r\n                message: this.fileUploader.option(\"uploadFailedMessage\")\r\n            };\r\n            this.fileUploader._uploadErrorAction(args);\r\n            this.fileUploader._setStatusMessage(file, args.message);\r\n            this.fileUploader._handleAllFilesUploaded()\r\n        }\r\n    }, {\r\n        key: \"_onLoadedHandler\",\r\n        value: function(file, e) {\r\n            var args = {\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request,\r\n                message: this.fileUploader.option(\"uploadedMessage\")\r\n            };\r\n            file._isLoaded = true;\r\n            this.fileUploader._uploadedAction(args);\r\n            this.fileUploader._setStatusMessage(file, args.message);\r\n            this.fileUploader._handleAllFilesUploaded()\r\n        }\r\n    }, {\r\n        key: \"_onProgressHandler\",\r\n        value: function(file, e) {\r\n            if (file) {\r\n                var totalFilesSize = this.fileUploader._getTotalFilesSize();\r\n                var totalLoadedFilesSize = this.fileUploader._getTotalLoadedFilesSize();\r\n                var loadedSize = Math.min(e.loaded, file.value.size);\r\n                var segmentSize = loadedSize - file.loadedSize;\r\n                file.loadedSize = loadedSize;\r\n                this.fileUploader._updateTotalProgress(totalFilesSize, totalLoadedFilesSize + segmentSize);\r\n                this.fileUploader._updateProgressBar(file, this._getLoadedData(loadedSize, e.total, segmentSize, e))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getLoadedData\",\r\n        value: function(loaded, total, currentSegmentSize, event) {\r\n            return {\r\n                loaded: loaded,\r\n                total: total,\r\n                currentSegmentSize: currentSegmentSize\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_extendFormData\",\r\n        value: function(formData) {\r\n            var formDataEntries = this.fileUploader.option(\"uploadCustomData\");\r\n            for (var entryName in formDataEntries) {\r\n                if (Object.prototype.hasOwnProperty.call(formDataEntries, entryName) && (0, _type.isDefined)(formDataEntries[entryName])) {\r\n                    formData.append(entryName, formDataEntries[entryName])\r\n                }\r\n            }\r\n        }\r\n    }]);\r\n    return FileUploadStrategyBase\r\n}();\r\nvar ChunksFileUploadStrategyBase = function(_FileUploadStrategyBa) {\r\n    _inherits(ChunksFileUploadStrategyBase, _FileUploadStrategyBa);\r\n    var _super2 = _createSuper(ChunksFileUploadStrategyBase);\r\n\r\n    function ChunksFileUploadStrategyBase(fileUploader) {\r\n        var _this15;\r\n        _classCallCheck(this, ChunksFileUploadStrategyBase);\r\n        _this15 = _super2.call(this, fileUploader);\r\n        _this15.chunkSize = _this15.fileUploader.option(\"chunkSize\");\r\n        return _this15\r\n    }\r\n    _createClass(ChunksFileUploadStrategyBase, [{\r\n        key: \"_uploadCore\",\r\n        value: function(file) {\r\n            var realFile = file.value;\r\n            var chunksData = {\r\n                name: realFile.name,\r\n                loadedBytes: 0,\r\n                type: realFile.type,\r\n                blobReader: new FileBlobReader(realFile, this.chunkSize),\r\n                guid: new _guid.default,\r\n                fileSize: realFile.size,\r\n                count: Math.ceil(realFile.size / this.chunkSize),\r\n                customData: {}\r\n            };\r\n            file.chunksData = chunksData;\r\n            this._sendChunk(file, chunksData)\r\n        }\r\n    }, {\r\n        key: \"_sendChunk\",\r\n        value: function(file, chunksData) {\r\n            var _this16 = this;\r\n            var chunk = chunksData.blobReader.read();\r\n            chunksData.currentChunk = chunk;\r\n            if (chunk) {\r\n                this._sendChunkCore(file, chunksData, chunk).done(function() {\r\n                    if (file.isAborted) {\r\n                        return\r\n                    }\r\n                    chunksData.loadedBytes += chunk.blob.size;\r\n                    file.onProgress.fire({\r\n                        loaded: chunksData.loadedBytes,\r\n                        total: file.value.size\r\n                    });\r\n                    if (chunk.isCompleted) {\r\n                        file.onLoad.fire()\r\n                    }\r\n                    setTimeout(function() {\r\n                        return _this16._sendChunk(file, chunksData)\r\n                    })\r\n                }).fail(function(error) {\r\n                    if (_this16._shouldHandleError(error)) {\r\n                        _this16._handleFileError(file, error)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData, chunk) {}\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(error) {}\r\n    }, {\r\n        key: \"_tryRaiseStartLoad\",\r\n        value: function(file) {\r\n            if (!file.isStartLoad) {\r\n                file.isStartLoad = true;\r\n                file.onLoadStart.fire()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getEvent\",\r\n        value: function(e) {\r\n            return null\r\n        }\r\n    }, {\r\n        key: \"_createUploadArgument\",\r\n        value: function(file) {\r\n            return this._createChunksInfo(file.chunksData)\r\n        }\r\n    }, {\r\n        key: \"_createChunksInfo\",\r\n        value: function(chunksData) {\r\n            return {\r\n                bytesUploaded: chunksData.loadedBytes,\r\n                chunkCount: chunksData.count,\r\n                customData: chunksData.customData,\r\n                chunkBlob: chunksData.currentChunk.blob,\r\n                chunkIndex: chunksData.currentChunk.index\r\n            }\r\n        }\r\n    }]);\r\n    return ChunksFileUploadStrategyBase\r\n}(FileUploadStrategyBase);\r\nvar DefaultChunksFileUploadStrategy = function(_ChunksFileUploadStra) {\r\n    _inherits(DefaultChunksFileUploadStrategy, _ChunksFileUploadStra);\r\n    var _super3 = _createSuper(DefaultChunksFileUploadStrategy);\r\n\r\n    function DefaultChunksFileUploadStrategy() {\r\n        _classCallCheck(this, DefaultChunksFileUploadStrategy);\r\n        return _super3.apply(this, arguments)\r\n    }\r\n    _createClass(DefaultChunksFileUploadStrategy, [{\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData, chunk) {\r\n            var _this17 = this;\r\n            return _ajax.default.sendRequest({\r\n                url: this.fileUploader.option(\"uploadUrl\"),\r\n                method: this.fileUploader.option(\"uploadMethod\"),\r\n                headers: this.fileUploader.option(\"uploadHeaders\"),\r\n                beforeSend: function(xhr) {\r\n                    return _this17._beforeSend(xhr, file)\r\n                },\r\n                upload: {\r\n                    onloadstart: function() {\r\n                        return _this17._tryRaiseStartLoad(file)\r\n                    },\r\n                    onabort: function() {\r\n                        return file.onAbort.fire()\r\n                    }\r\n                },\r\n                data: this._createFormData({\r\n                    fileName: chunksData.name,\r\n                    blobName: this.fileUploader.option(\"name\"),\r\n                    blob: chunk.blob,\r\n                    index: chunk.index,\r\n                    count: chunksData.count,\r\n                    type: chunksData.type,\r\n                    guid: chunksData.guid,\r\n                    size: chunksData.fileSize\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(e) {\r\n            return this._isStatusError(e.status)\r\n        }\r\n    }, {\r\n        key: \"_createFormData\",\r\n        value: function(options) {\r\n            var formData = new window.FormData;\r\n            formData.append(options.blobName, options.blob);\r\n            formData.append(FILEUPLOADER_CHUNK_META_DATA_NAME, JSON.stringify({\r\n                FileName: options.fileName,\r\n                Index: options.index,\r\n                TotalCount: options.count,\r\n                FileSize: options.size,\r\n                FileType: options.type,\r\n                FileGuid: options.guid\r\n            }));\r\n            this._extendFormData(formData);\r\n            return formData\r\n        }\r\n    }]);\r\n    return DefaultChunksFileUploadStrategy\r\n}(ChunksFileUploadStrategyBase);\r\nvar CustomChunksFileUploadStrategy = function(_ChunksFileUploadStra2) {\r\n    _inherits(CustomChunksFileUploadStrategy, _ChunksFileUploadStra2);\r\n    var _super4 = _createSuper(CustomChunksFileUploadStrategy);\r\n\r\n    function CustomChunksFileUploadStrategy() {\r\n        _classCallCheck(this, CustomChunksFileUploadStrategy);\r\n        return _super4.apply(this, arguments)\r\n    }\r\n    _createClass(CustomChunksFileUploadStrategy, [{\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData) {\r\n            this._tryRaiseStartLoad(file);\r\n            var chunksInfo = this._createChunksInfo(chunksData);\r\n            var uploadChunk = this.fileUploader.option(\"uploadChunk\");\r\n            try {\r\n                var result = uploadChunk(file.value, chunksInfo);\r\n                return (0, _deferred.fromPromise)(result)\r\n            } catch (error) {\r\n                return (new _deferred.Deferred).reject(error).promise()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(e) {\r\n            return true\r\n        }\r\n    }]);\r\n    return CustomChunksFileUploadStrategy\r\n}(ChunksFileUploadStrategyBase);\r\nvar WholeFileUploadStrategyBase = function(_FileUploadStrategyBa2) {\r\n    _inherits(WholeFileUploadStrategyBase, _FileUploadStrategyBa2);\r\n    var _super5 = _createSuper(WholeFileUploadStrategyBase);\r\n\r\n    function WholeFileUploadStrategyBase() {\r\n        _classCallCheck(this, WholeFileUploadStrategyBase);\r\n        return _super5.apply(this, arguments)\r\n    }\r\n    _createClass(WholeFileUploadStrategyBase, [{\r\n        key: \"_uploadCore\",\r\n        value: function(file) {\r\n            var _this18 = this;\r\n            file.loadedSize = 0;\r\n            this._uploadFile(file).done(function() {\r\n                if (!file.isAborted) {\r\n                    file.onLoad.fire()\r\n                }\r\n            }).fail(function(error) {\r\n                if (_this18._shouldHandleError(file, error)) {\r\n                    _this18._handleFileError(file, error)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_uploadFile\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {}\r\n    }, {\r\n        key: \"_handleProgress\",\r\n        value: function(file, e) {\r\n            if (file._isError) {\r\n                return\r\n            }\r\n            file._isProgressStarted = true;\r\n            file.onProgress.fire(e)\r\n        }\r\n    }, {\r\n        key: \"_getLoadedData\",\r\n        value: function(loaded, total, segmentSize, event) {\r\n            var result = _get(_getPrototypeOf(WholeFileUploadStrategyBase.prototype), \"_getLoadedData\", this).call(this, loaded, total, segmentSize, event);\r\n            result.event = event;\r\n            return result\r\n        }\r\n    }]);\r\n    return WholeFileUploadStrategyBase\r\n}(FileUploadStrategyBase);\r\nvar DefaultWholeFileUploadStrategy = function(_WholeFileUploadStrat) {\r\n    _inherits(DefaultWholeFileUploadStrategy, _WholeFileUploadStrat);\r\n    var _super6 = _createSuper(DefaultWholeFileUploadStrategy);\r\n\r\n    function DefaultWholeFileUploadStrategy() {\r\n        _classCallCheck(this, DefaultWholeFileUploadStrategy);\r\n        return _super6.apply(this, arguments)\r\n    }\r\n    _createClass(DefaultWholeFileUploadStrategy, [{\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            var _this19 = this;\r\n            return _ajax.default.sendRequest({\r\n                url: this.fileUploader.option(\"uploadUrl\"),\r\n                method: this.fileUploader.option(\"uploadMethod\"),\r\n                headers: this.fileUploader.option(\"uploadHeaders\"),\r\n                beforeSend: function(xhr) {\r\n                    return _this19._beforeSend(xhr, file)\r\n                },\r\n                upload: {\r\n                    onprogress: function(e) {\r\n                        return _this19._handleProgress(file, e)\r\n                    },\r\n                    onloadstart: function() {\r\n                        return file.onLoadStart.fire()\r\n                    },\r\n                    onabort: function() {\r\n                        return file.onAbort.fire()\r\n                    }\r\n                },\r\n                data: this._createFormData(this.fileUploader.option(\"name\"), file.value)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {\r\n            return this._isStatusError(e.status) || !file._isProgressStarted\r\n        }\r\n    }, {\r\n        key: \"_createFormData\",\r\n        value: function(fieldName, fieldValue) {\r\n            var formData = new window.FormData;\r\n            formData.append(fieldName, fieldValue, fieldValue.name);\r\n            this._extendFormData(formData);\r\n            return formData\r\n        }\r\n    }]);\r\n    return DefaultWholeFileUploadStrategy\r\n}(WholeFileUploadStrategyBase);\r\nvar CustomWholeFileUploadStrategy = function(_WholeFileUploadStrat2) {\r\n    _inherits(CustomWholeFileUploadStrategy, _WholeFileUploadStrat2);\r\n    var _super7 = _createSuper(CustomWholeFileUploadStrategy);\r\n\r\n    function CustomWholeFileUploadStrategy() {\r\n        _classCallCheck(this, CustomWholeFileUploadStrategy);\r\n        return _super7.apply(this, arguments)\r\n    }\r\n    _createClass(CustomWholeFileUploadStrategy, [{\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            var _this20 = this;\r\n            file.onLoadStart.fire();\r\n            var progressCallback = function(loadedBytes) {\r\n                var arg = {\r\n                    loaded: loadedBytes,\r\n                    total: file.size\r\n                };\r\n                _this20._handleProgress(file, arg)\r\n            };\r\n            var uploadFile = this.fileUploader.option(\"uploadFile\");\r\n            try {\r\n                var result = uploadFile(file.value, progressCallback);\r\n                return (0, _deferred.fromPromise)(result)\r\n            } catch (error) {\r\n                return (new _deferred.Deferred).reject(error).promise()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {\r\n            return true\r\n        }\r\n    }]);\r\n    return CustomWholeFileUploadStrategy\r\n}(WholeFileUploadStrategyBase);\r\n(0, _component_registrator.default)(\"dxFileUploader\", FileUploader);\r\nvar _default = FileUploader;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}