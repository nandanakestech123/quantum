{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{getCommonApi,commonCreateApi,commonPatchApi}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{NormalButton,NormalModal,NormalInput,TableWrapper,NormalDate,NormalTextarea}from\"component/common\";import closeIcon from\"assets/images/close.png\";import{Toast}from\"service/toast\";import SimpleReactValidator from\"simple-react-validator\";import{StockItemUsagePopup}from\"./StockItemUsagePopup\";import{StockMemoStaffList}from\"./StockMemoStaffList\";import{dateFormat}from\"service/helperFunctions\";import{history}from\"helpers\";import{createLogger}from\"redux-logger\";export var CreateNewInventoryClass=/*#__PURE__*/function(_Component){_inherits(CreateNewInventoryClass,_Component);var _super=_createSuper(CreateNewInventoryClass);function CreateNewInventoryClass(){var _this;_classCallCheck(this,CreateNewInventoryClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formFields:{itemName:\"\",emp_id:0,employeeName:\"\",date:new Date(),stock_id:0,qty:\"\",uom:\"\",memo_remarks:\"\"},isStockItemUsagePopup:false,isStockItemUsageEmployeePopup:false};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message font-md\"},message);},autoForceUpdate:_assertThisInitialized(_this)});};_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$target,value,name,formFields;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;formFields=_this.state.formFields;formFields[name]=value;_context.next=5;return _this.setState({formFields:formFields});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleStockItemUsagePopup=function(){_this.setState(function(prevState){return{isStockItemUsagePopup:!prevState.isStockItemUsagePopup};});};_this.handleStockItemUsageEmployeePopup=function(){_this.setState(function(prevState){return{isStockItemUsageEmployeePopup:!prevState.isStockItemUsageEmployeePopup};});};_this.includeNewItems=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var formFields;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.handleStockItemUsagePopup();formFields=_this.state.formFields;formFields[\"qty\"]=data.qty;formFields[\"uom\"]=data.uom;formFields[\"stock_id\"]=data.stock_id;formFields[\"itemName\"]=data.ItemDesc;// ItemDesc: \"FIRE DRAGON ESS OIL 火龙液 (5ML)\";\n// item_code: \"23000002\";\n// link_code: \"\";\n// qty: \"5\";\n// stock_id: 5990;\n// uom: \"BOX\";\n// uom_id: 5615;\n_context2.next=8;return _this.setState({formFields:formFields});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleSelectedStaff=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.handleStockItemUsageEmployeePopup();formFields=_this.state.formFields;formFields[\"emp_id\"]=data.id;formFields[\"employeeName\"]=data.emp_name;// emp_id: 0,\n// employeeName: \"\",\n_context3.next=6;return _this.setState({formFields:formFields});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.handleSaveClick=function(){var formFields=_this.state.formFields;if(_this.validator.allValid()){var data={date:dateFormat(formFields.date),stock_id:formFields.stock_id,emp_id:formFields.emp_id,qty:Number(formFields.qty),uom:formFields.uom,memo_remarks:formFields.memo_remarks};_this.props.commonCreateApi(\"stockusagememo/\",data).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(res.status===201){_this.props.handleCreateNewSave();}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref5.apply(this,arguments);};}());}else{_this.validator.showMessages();_this.forceUpdate();}};return _this;}_createClass(CreateNewInventoryClass,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,formFields=_this$state.formFields,isStockItemUsagePopup=_this$state.isStockItemUsagePopup,isStockItemUsageEmployeePopup=_this$state.isStockItemUsageEmployeePopup;return/*#__PURE__*/React.createElement(NormalModal,{className:\"select-category\",style:{minWidth:\"60%\"},modal:this.props.isCreateNewInventoryPopup,handleModal:this.props.handleCreateNewPopup},/*#__PURE__*/React.createElement(\"img\",{onClick:this.props.handleCreateNewPopup,className:\"close\",src:closeIcon,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex h4 justify-content-center p-3\"},\"Stock Usage\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Item Name\",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-16\"},\"*\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:formFields.itemName,name:\"itemName\",onClick:function onClick(){return _this2.handleStockItemUsagePopup();}})),this.validator.message(\"Item Name\",formFields.itemName,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Qty\",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-16\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:formFields.qty,name:\"qty\",onChange:this.handleChange})),this.validator.message(\"Quantity\",formFields.qty,\"not_in: 0|integer|required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"UOM\",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-16\"},\"*\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput//options={channelList}\n,{value:formFields.uom,name:\"uom\",onChange:this.handleChange,disabled:true})),this.validator.message(\"Unit\",formFields.uom,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Staff Name\",/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs-16\"},\"*\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalInput,{value:formFields.employeeName,name:\"employeeName\",onClick:function onClick(){return _this2.handleStockItemUsageEmployeePopup();}})),this.validator.message(\"Staff Name\",formFields.employeeName,\"required\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Date\"),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(NormalDate,{value:new Date(formFields.date),name:\"date\",type:\"date\",onChange:this.handleChange,showDisabledMonthNavigation:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mb-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"text-left text-black common-label-text \"},\"Remark\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalTextarea,{value:formFields.memo_remarks,name:\"memo_remarks\",onChange:this.handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end w-100\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-3\",mainbg:true,className:\"col-12 ml-4 fs-15 \",label:\"Save\",onClick:this.handleSaveClick}),/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"col-3\",resetbg:true,className:\"col-12 ml-4 fs-15 \",label:\"Cancel\",onClick:this.props.handleCreateNewPopup})),isStockItemUsagePopup?/*#__PURE__*/React.createElement(StockItemUsagePopup,{isStockItemUsagePopup:isStockItemUsagePopup,handleStockItemUsagePopup:this.handleStockItemUsagePopup,newItem:function newItem(StockItemUsageList){return _this2.includeNewItems(StockItemUsageList);}}):null,isStockItemUsageEmployeePopup?/*#__PURE__*/React.createElement(StockMemoStaffList,{isStockItemUsageEmployeePopup:isStockItemUsageEmployeePopup,handleStockItemUsageEmployeePopup:this.handleStockItemUsageEmployeePopup,handleSelectedStaff:function handleSelectedStaff(data){return _this2.handleSelectedStaff(data);}}):null));}}]);return CreateNewInventoryClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{// filter: state.dashboard\n};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonCreateApi:commonCreateApi,commonPatchApi:commonPatchApi},dispatch);};export var CreateNewInventory=connect(mapStateToProps,mapDispatchToProps)(CreateNewInventoryClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Inventory/InventoryMainPage/Model/CreateNewInventory.js"],"names":["React","Component","getCommonApi","commonCreateApi","commonPatchApi","connect","bindActionCreators","NormalButton","NormalModal","NormalInput","TableWrapper","NormalDate","NormalTextarea","closeIcon","Toast","SimpleReactValidator","StockItemUsagePopup","StockMemoStaffList","dateFormat","history","createLogger","CreateNewInventoryClass","state","formFields","itemName","emp_id","employeeName","date","Date","stock_id","qty","uom","memo_remarks","isStockItemUsagePopup","isStockItemUsageEmployeePopup","componentWillMount","validator","element","message","autoForceUpdate","handleChange","target","value","name","setState","handleStockItemUsagePopup","prevState","handleStockItemUsageEmployeePopup","includeNewItems","data","ItemDesc","handleSelectedStaff","id","emp_name","handleSaveClick","allValid","Number","props","then","res","status","handleCreateNewSave","showMessages","forceUpdate","minWidth","isCreateNewInventoryPopup","handleCreateNewPopup","StockItemUsageList","mapStateToProps","mapDispatchToProps","dispatch","CreateNewInventory"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  getCommonApi,\r\n  commonCreateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  NormalButton,\r\n  NormalModal,\r\n  NormalInput,\r\n  TableWrapper,\r\n  NormalDate,\r\n  NormalTextarea,\r\n} from \"component/common\";\r\nimport closeIcon from \"assets/images/close.png\";\r\nimport { Toast } from \"service/toast\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { StockItemUsagePopup } from \"./StockItemUsagePopup\";\r\nimport { StockMemoStaffList } from \"./StockMemoStaffList\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { history } from \"helpers\";\r\nimport { createLogger } from \"redux-logger\";\r\n\r\nexport class CreateNewInventoryClass extends Component {\r\n  state = {\r\n    formFields: {\r\n      itemName: \"\",\r\n      emp_id: 0,\r\n      employeeName: \"\",\r\n      date: new Date(),\r\n      stock_id: 0,\r\n      qty: \"\",\r\n      uom: \"\",\r\n      memo_remarks: \"\",\r\n    },\r\n    isStockItemUsagePopup: false,\r\n    isStockItemUsageEmployeePopup: false,\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message font-md\">{message}</span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    let { formFields } = this.state;\r\n    formFields[name] = value;\r\n    await this.setState({\r\n      formFields,\r\n    });\r\n  };\r\n  handleStockItemUsagePopup = () => {\r\n    this.setState(prevState => ({\r\n      isStockItemUsagePopup: !prevState.isStockItemUsagePopup,\r\n    }));\r\n  };\r\n  handleStockItemUsageEmployeePopup = () => {\r\n    this.setState(prevState => ({\r\n      isStockItemUsageEmployeePopup: !prevState.isStockItemUsageEmployeePopup,\r\n    }));\r\n  };\r\n  includeNewItems = async data => {\r\n    this.handleStockItemUsagePopup();\r\n    let { formFields } = this.state;\r\n    formFields[\"qty\"] = data.qty;\r\n    formFields[\"uom\"] = data.uom;\r\n    formFields[\"stock_id\"] = data.stock_id;\r\n    formFields[\"itemName\"] = data.ItemDesc;\r\n    // ItemDesc: \"FIRE DRAGON ESS OIL 火龙液 (5ML)\";\r\n    // item_code: \"23000002\";\r\n    // link_code: \"\";\r\n    // qty: \"5\";\r\n    // stock_id: 5990;\r\n    // uom: \"BOX\";\r\n    // uom_id: 5615;\r\n    await this.setState({ formFields });\r\n  };\r\n\r\n  handleSelectedStaff = async data => {\r\n    this.handleStockItemUsageEmployeePopup();\r\n    let { formFields } = this.state;\r\n    formFields[\"emp_id\"] = data.id;\r\n    formFields[\"employeeName\"] = data.emp_name;\r\n    // emp_id: 0,\r\n    // employeeName: \"\",\r\n    await this.setState({ formFields });\r\n  };\r\n\r\n  handleSaveClick = () => {\r\n    let { formFields } = this.state;\r\n\r\n    if (this.validator.allValid()) {\r\n      let data = {\r\n        date: dateFormat(formFields.date),\r\n        stock_id: formFields.stock_id,\r\n        emp_id: formFields.emp_id,\r\n        qty: Number(formFields.qty),\r\n        uom: formFields.uom,\r\n        memo_remarks: formFields.memo_remarks,\r\n      };\r\n      this.props.commonCreateApi(`stockusagememo/`, data).then(async res => {\r\n        if (res.status === 201) {\r\n          this.props.handleCreateNewSave();\r\n        }\r\n      });\r\n    } else {\r\n      this.validator.showMessages();\r\n      this.forceUpdate();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let { formFields, isStockItemUsagePopup, isStockItemUsageEmployeePopup } =\r\n      this.state;\r\n    return (\r\n      <NormalModal\r\n        className={\"select-category\"}\r\n        style={{ minWidth: \"60%\" }}\r\n        modal={this.props.isCreateNewInventoryPopup}\r\n        handleModal={this.props.handleCreateNewPopup}\r\n      >\r\n        <img\r\n          onClick={this.props.handleCreateNewPopup}\r\n          className=\"close\"\r\n          src={closeIcon}\r\n          alt=\"\"\r\n        />\r\n        <div className=\"d-flex h4 justify-content-center p-3\">Stock Usage</div>\r\n        <div className=\"row p-3\">\r\n          <div className=\"col-4 mb-3\">\r\n            <div>\r\n              <label className=\"text-left text-black common-label-text \">\r\n                Item Name\r\n                <span className=\"error-message text-danger validNo fs-16\">\r\n                  *\r\n                </span>\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                value={formFields.itemName}\r\n                name=\"itemName\"\r\n                onClick={() => this.handleStockItemUsagePopup()}\r\n              />\r\n            </div>\r\n            {this.validator.message(\r\n              \"Item Name\",\r\n              formFields.itemName,\r\n              \"required\"\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-4 mb-3\">\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Qty\r\n              <span className=\"error-message text-danger validNo fs-16\">*</span>\r\n            </label>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                value={formFields.qty}\r\n                name=\"qty\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </div>\r\n            {this.validator.message(\r\n              \"Quantity\",\r\n              formFields.qty,\r\n              \"not_in: 0|integer|required\"\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-4 mb-3\">\r\n            <div>\r\n              <label className=\"text-left text-black common-label-text \">\r\n                UOM\r\n                <span className=\"error-message text-danger validNo fs-16\">\r\n                  *\r\n                </span>\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                //options={channelList}\r\n                value={formFields.uom}\r\n                name=\"uom\"\r\n                onChange={this.handleChange}\r\n                disabled\r\n              />\r\n            </div>\r\n            {this.validator.message(\"Unit\", formFields.uom, \"required\")}\r\n          </div>\r\n          <div className=\"col-4 mb-3\">\r\n            <div>\r\n              <label className=\"text-left text-black common-label-text \">\r\n                Staff Name\r\n                <span className=\"error-message text-danger validNo fs-16\">\r\n                  *\r\n                </span>\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <NormalInput\r\n                value={formFields.employeeName}\r\n                name=\"employeeName\"\r\n                onClick={() => this.handleStockItemUsageEmployeePopup()}\r\n              />\r\n            </div>\r\n            {this.validator.message(\r\n              \"Staff Name\",\r\n              formFields.employeeName,\r\n              \"required\"\r\n            )}\r\n          </div>\r\n          <div className=\"col-4 mb-3\">\r\n            <label className=\"text-left text-black common-label-text \">\r\n              Date\r\n            </label>\r\n            <div className=\"\">\r\n              <NormalDate\r\n                value={new Date(formFields.date)}\r\n                name=\"date\"\r\n                type=\"date\"\r\n                onChange={this.handleChange}\r\n                showDisabledMonthNavigation\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-4 mb-3\">\r\n            <div>\r\n              <label className=\"text-left text-black common-label-text \">\r\n                Remark\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <NormalTextarea\r\n                value={formFields.memo_remarks}\r\n                name=\"memo_remarks\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"p-3\">\r\n          <div className=\"d-flex justify-content-end w-100\">\r\n            <NormalButton\r\n              buttonClass={\"col-3\"}\r\n              mainbg={true}\r\n              className=\"col-12 ml-4 fs-15 \"\r\n              label=\"Save\"\r\n              onClick={this.handleSaveClick}\r\n            />\r\n            <NormalButton\r\n              buttonClass={\"col-3\"}\r\n              resetbg={true}\r\n              className=\"col-12 ml-4 fs-15 \"\r\n              label=\"Cancel\"\r\n              onClick={this.props.handleCreateNewPopup}\r\n            />\r\n          </div>\r\n\r\n          {isStockItemUsagePopup ? (\r\n            <StockItemUsagePopup\r\n              isStockItemUsagePopup={isStockItemUsagePopup}\r\n              handleStockItemUsagePopup={this.handleStockItemUsagePopup}\r\n              newItem={StockItemUsageList =>\r\n                this.includeNewItems(StockItemUsageList)\r\n              }\r\n            />\r\n          ) : null}\r\n          {isStockItemUsageEmployeePopup ? (\r\n            <StockMemoStaffList\r\n              isStockItemUsageEmployeePopup={isStockItemUsageEmployeePopup}\r\n              handleStockItemUsageEmployeePopup={\r\n                this.handleStockItemUsageEmployeePopup\r\n              }\r\n              handleSelectedStaff={data => this.handleSelectedStaff(data)}\r\n            />\r\n          ) : null}\r\n        </div>\r\n      </NormalModal>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  // filter: state.dashboard\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonCreateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const CreateNewInventory = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(CreateNewInventoryClass);\r\n"]},"metadata":{},"sourceType":"module"}