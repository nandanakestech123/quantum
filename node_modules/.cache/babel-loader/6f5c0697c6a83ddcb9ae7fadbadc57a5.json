{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton,NormalInput,NormalSelect}from\"component/common\";import{getCustomerPlusSettings,updateCustomerPlusSettings}from\"redux/actions/customerPlus\";import{InputSearch,TableWrapper}from\"component/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{withTranslation}from\"react-i18next\";import{Link}from\"react-router-dom\";export var SettingsClass=/*#__PURE__*/function(_React$Component){_inherits(SettingsClass,_React$Component);var _super=_createSuper(SettingsClass);function SettingsClass(){var _this;_classCallCheck(this,SettingsClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={dataList:[],originalData:[],tableHeader:[{label:\"Field Name\",sortKey:\"display_field_name\",width:220},{label:\"Mandatory\",sortKey:\"mandatory\"},{label:\"Show in Register\",sortKey:\"visible_in_registration\"},{label:\"Show in Profile\",sortKey:\"visible_in_profile\"},{label:\"Show in Listing\",sortKey:\"visible_in_listing\"},{label:\"Show Label\",sortKey:\"showLabel\"}],isLoading:true,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.handleSearch=function(event){var _this$state=_this.state,originalData=_this$state.originalData,dataList=_this$state.dataList;dataList=originalData.filter(function(e){return e.display_field_name.toLocaleLowerCase().includes(event.target.value.toLocaleLowerCase())||e.field_name.toLocaleLowerCase().includes(event.target.value.toLocaleLowerCase());});_this.updateState({dataList:dataList});};_this.loadData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var dataList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateState({isLoading:true});_context.next=3;return _this.props.getCustomerPlusSettings();case 3:dataList=_this.props.dataList;_this.updateState({dataList:dataList,originalData:dataList,isLoading:false});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.handleSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var dataList,reqData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.updateState({isLoading:true});dataList=_this.state.dataList;if(!(dataList.length==0)){_context2.next=4;break;}return _context2.abrupt(\"return\");case 4:reqData={customerControlList:dataList};_context2.next=7;return _this.props.updateCustomerPlusSettings(JSON.stringify(reqData));case 7:_this.loadData();case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(SettingsClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadData();}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,dataList=_this$state2.dataList,tableHeader=_this$state2.tableHeader,isLoading=_this$state2.isLoading;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-4 p-0\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"head-label\"},t(\"Customer Plus Settings\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 mr-5\"},/*#__PURE__*/React.createElement(InputSearch,{className:\"\",placeholder:\"Search Field\",onChange:this.handleSearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-3 p-0 mr-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/customerplus/settings/layout\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Edit Layout\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 col-3 p-0\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Save\",onClick:this.handleSubmit}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:tableHeader,queryHandler:this.handlePagination,parentHeaderChange:function parentHeaderChange(value){return _this2.updateState(function(){return tableHeader=value;});},sortData:this.state.originalData,onSort:function onSort(list){return _this2.updateState({dataList:list});}},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))))):dataList?dataList.map(function(item,index){var _tableHeader$0$enable,_tableHeader$3$enable,_tableHeader$3$enable2,_tableHeader$3$enable3,_tableHeader$3$enable4,_tableHeader$3$enable5;var display_field_name=item.display_field_name,visible_in_profile=item.visible_in_profile,visible_in_listing=item.visible_in_listing,mandatory=item.mandatory,visible_in_registration=item.visible_in_registration,showLabel=item.showLabel;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:((_tableHeader$0$enable=tableHeader[0].enabled)!==null&&_tableHeader$0$enable!==void 0?_tableHeader$0$enable:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-slef-start\"},display_field_name)),/*#__PURE__*/React.createElement(\"td\",{className:((_tableHeader$3$enable=tableHeader[3].enabled)!==null&&_tableHeader$3$enable!==void 0?_tableHeader$3$enable:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:mandatory,onClick:function onClick(){dataList[index].mandatory=!mandatory;_this2.updateState({dataList:dataList});}}))),/*#__PURE__*/React.createElement(\"td\",{className:((_tableHeader$3$enable2=tableHeader[3].enabled)!==null&&_tableHeader$3$enable2!==void 0?_tableHeader$3$enable2:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:visible_in_registration,onClick:function onClick(){dataList[index].visible_in_registration=!visible_in_registration;_this2.updateState({dataList:dataList});}}))),/*#__PURE__*/React.createElement(\"td\",{className:((_tableHeader$3$enable3=tableHeader[3].enabled)!==null&&_tableHeader$3$enable3!==void 0?_tableHeader$3$enable3:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:visible_in_profile,onClick:function onClick(){dataList[index].visible_in_profile=!visible_in_profile;_this2.updateState({dataList:dataList});}}))),/*#__PURE__*/React.createElement(\"td\",{className:((_tableHeader$3$enable4=tableHeader[3].enabled)!==null&&_tableHeader$3$enable4!==void 0?_tableHeader$3$enable4:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:visible_in_listing,onClick:function onClick(){dataList[index].visible_in_listing=!visible_in_listing;_this2.updateState({dataList:dataList});}}))),/*#__PURE__*/React.createElement(\"td\",{className:((_tableHeader$3$enable5=tableHeader[3].enabled)!==null&&_tableHeader$3$enable5!==void 0?_tableHeader$3$enable5:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:showLabel,onClick:function onClick(){dataList[index].showLabel=!showLabel;_this2.updateState({dataList:dataList});}}))));}):\"\"))));}}]);return SettingsClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{dataList:state.customerPlus.customerPlusSettings};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomerPlusSettings:getCustomerPlusSettings,updateCustomerPlusSettings:updateCustomerPlusSettings},dispatch);};export var Settings=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(SettingsClass));","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/CustomerPlusSettings/index.js"],"names":["React","NormalButton","NormalInput","NormalSelect","getCustomerPlusSettings","updateCustomerPlusSettings","InputSearch","TableWrapper","connect","bindActionCreators","withTranslation","Link","SettingsClass","state","dataList","originalData","tableHeader","label","sortKey","width","isLoading","isMounted","updateState","data","setState","handleSearch","event","filter","e","display_field_name","toLocaleLowerCase","includes","target","value","field_name","loadData","props","handleSubmit","length","reqData","customerControlList","JSON","stringify","t","handlePagination","list","map","item","index","visible_in_profile","visible_in_listing","mandatory","visible_in_registration","showLabel","enabled","Component","mapStateToProps","customerPlus","customerPlusSettings","mapDispatchToProps","dispatch","Settings"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NormalButton, NormalInput, NormalSelect } from \"component/common\";\nimport {\n  getCustomerPlusSettings,\n  updateCustomerPlusSettings,\n} from \"redux/actions/customerPlus\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { withTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\n\nexport class SettingsClass extends React.Component {\n  state = {\n    dataList: [],\n    originalData: [],\n    tableHeader: [\n      { label: \"Field Name\", sortKey: \"display_field_name\", width: 220 },\n      { label: \"Mandatory\", sortKey: \"mandatory\" },\n      { label: \"Show in Register\", sortKey: \"visible_in_registration\" },\n      { label: \"Show in Profile\", sortKey: \"visible_in_profile\" },\n      { label: \"Show in Listing\", sortKey: \"visible_in_listing\" },\n      { label: \"Show Label\", sortKey: \"showLabel\" },\n    ],\n    isLoading: true,\n    isMounted: true,\n  };\n\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = (data) => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  handleSearch = (event) => {\n    let { originalData, dataList } = this.state;\n    dataList = originalData.filter(\n      (e) =>\n        e.display_field_name\n          .toLocaleLowerCase()\n          .includes(event.target.value.toLocaleLowerCase()) ||\n        e.field_name\n          .toLocaleLowerCase()\n          .includes(event.target.value.toLocaleLowerCase())\n    );\n    this.updateState({ dataList });\n  };\n\n  loadData = async () => {\n    this.updateState({ isLoading: true });\n    await this.props.getCustomerPlusSettings();\n    let { dataList } = this.props;\n    this.updateState({ dataList, originalData: dataList, isLoading: false });\n  };\n\n  handleSubmit = async () => {\n    this.updateState({ isLoading: true });\n    let { dataList } = this.state;\n    if (dataList.length == 0) return;\n    let reqData = { customerControlList: dataList };\n    await this.props.updateCustomerPlusSettings(JSON.stringify(reqData));\n    this.loadData();\n  };\n\n  render() {\n    let { dataList, tableHeader, isLoading } = this.state;\n    let { t } = this.props;\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"col-md-12 mb-4 p-0\">\n          <h3 className=\"head-label\">{t(\"Customer Plus Settings\")}</h3>\n        </div>\n        <div className=\"row align-items-center mb-4\">\n          <div className=\"col\">\n            <div className=\"d-flex\">\n              <div className=\"w-100 mr-5\">\n                <InputSearch\n                  className=\"\"\n                  placeholder=\"Search Field\"\n                  onChange={this.handleSearch}\n                />\n              </div>\n              <div className=\"w-100 col-3 p-0 mr-2\">\n                <Link to=\"/admin/customerplus/settings/layout\">\n                  <NormalButton\n                    mainbg={true}\n                    className=\"col-12 fs-15 float-right\"\n                    label=\"Edit Layout\"\n                  />\n                </Link>\n              </div>\n              <div className=\"w-100 col-3 p-0\">\n                <NormalButton\n                  mainbg={true}\n                  className=\"col-12 fs-15 float-right\"\n                  label=\"Save\"\n                  onClick={this.handleSubmit}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"table-responsive\">\n          <div className=\"table-container\">\n            <TableWrapper\n              headerDetails={tableHeader}\n              queryHandler={this.handlePagination}\n              parentHeaderChange={(value) =>\n                this.updateState(() => (tableHeader = value))\n              }\n              sortData={this.state.originalData}\n              onSort={(list) => this.updateState({ dataList: list })}\n            >\n              {isLoading ? (\n                <tr>\n                  <td colSpan=\"7\">\n                    <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                      <div class=\"spinner-border\" role=\"status\">\n                        <span class=\"sr-only\">Loading...</span>\n                      </div>\n                    </div>\n                  </td>\n                </tr>\n              ) : dataList ? (\n                dataList.map((item, index) => {\n                  let {\n                    display_field_name,\n                    visible_in_profile,\n                    visible_in_listing,\n                    mandatory,\n                    visible_in_registration,\n                    showLabel,\n                  } = item;\n                  return (\n                    <tr key={index}>\n                      <td\n                        className={\n                          tableHeader[0].enabled ?? true ? \"\" : \"d-none\"\n                        }\n                      >\n                        <div className=\"d-flex align-slef-start\">\n                          {display_field_name}\n                        </div>\n                      </td>\n                      <td\n                        className={\n                          tableHeader[3].enabled ?? true ? \"\" : \"d-none\"\n                        }\n                      >\n                        <div className=\"d-flex align-items-center justify-content-center\">\n                          <input\n                            type=\"checkbox\"\n                            checked={mandatory}\n                            onClick={() => {\n                              dataList[index].mandatory = !mandatory;\n                              this.updateState({ dataList });\n                            }}\n                          />\n                        </div>\n                      </td>\n                      <td\n                        className={\n                          tableHeader[3].enabled ?? true ? \"\" : \"d-none\"\n                        }\n                      >\n                        <div className=\"d-flex align-items-center justify-content-center\">\n                          <input\n                            type=\"checkbox\"\n                            checked={visible_in_registration}\n                            onClick={() => {\n                              dataList[index].visible_in_registration =\n                                !visible_in_registration;\n                              this.updateState({ dataList });\n                            }}\n                          />\n                        </div>\n                      </td>\n                      <td\n                        className={\n                          tableHeader[3].enabled ?? true ? \"\" : \"d-none\"\n                        }\n                      >\n                        <div className=\"d-flex align-items-center justify-content-center\">\n                          <input\n                            type=\"checkbox\"\n                            checked={visible_in_profile}\n                            onClick={() => {\n                              dataList[index].visible_in_profile =\n                                !visible_in_profile;\n                              this.updateState({ dataList });\n                            }}\n                          />\n                        </div>\n                      </td>\n                      <td\n                        className={\n                          tableHeader[3].enabled ?? true ? \"\" : \"d-none\"\n                        }\n                      >\n                        <div className=\"d-flex align-items-center justify-content-center\">\n                          <input\n                            type=\"checkbox\"\n                            checked={visible_in_listing}\n                            onClick={() => {\n                              dataList[index].visible_in_listing =\n                                !visible_in_listing;\n                              this.updateState({ dataList });\n                            }}\n                          />\n                        </div>\n                      </td>\n                      <td\n                        className={\n                          tableHeader[3].enabled ?? true ? \"\" : \"d-none\"\n                        }\n                      >\n                        <div className=\"d-flex align-items-center justify-content-center\">\n                          <input\n                            type=\"checkbox\"\n                            checked={showLabel}\n                            onClick={() => {\n                              dataList[index].showLabel = !showLabel;\n                              this.updateState({ dataList });\n                            }}\n                          />\n                        </div>\n                      </td>\n                    </tr>\n                  );\n                })\n              ) : (\n                \"\"\n              )}\n            </TableWrapper>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  dataList: state.customerPlus.customerPlusSettings,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      getCustomerPlusSettings,\n      updateCustomerPlusSettings,\n    },\n    dispatch\n  );\n};\n\nexport const Settings = withTranslation()(\n  connect(mapStateToProps, mapDispatchToProps)(SettingsClass)\n);\n"]},"metadata":{},"sourceType":"module"}