{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\newfrontend\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{NormalButton}from\"component/common\";import{InputSearch,TableWrapper}from\"component/common\";import{Link}from\"react-router-dom\";import\"./style.scss\";import{getCustomerPlus}from\"redux/actions/customerPlus\";import{updateForm}from\"redux/actions/common\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import _ from\"lodash\";import{Navigation}from\"react-minimal-side-navigation\";export var ListCustomerPlusClass=/*#__PURE__*/function(_React$Component){_inherits(ListCustomerPlusClass,_React$Component);var _super=_createSuper(ListCustomerPlusClass);function ListCustomerPlusClass(){var _this;_classCallCheck(this,ListCustomerPlusClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[{label:\"Customer Code\",sortKey:\"customerCode\"},{label:\"Referance Code\",sortKey:\"referenceCode\",enabled:true},{label:\"Salutation\",sortKey:\"salutation\",enabled:true},{label:\"Customer Name\",sortKey:\"customerName\",enabled:true},{label:\"Mobile Phone\",sortKey:\"mobilePhone\",enabled:true},{label:\"Birthday\",sortKey:\"birthday\",enabled:true},{label:\"Customer Class\",sortKey:\"customerClass\",enabled:true},{label:\"\"}],customerList:[],search:\"\",meta:{},active:false,currentIndex:-1,isLoading:true,isMounted:true};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.componentDidMount=function(){_this.getCustomerPlus({});};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.updateState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.getCustomerPlus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _customerDetails$meta;var search,_data$page,page,_data$limit,limit,customerDetails;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.updateState({isLoading:true});search=_this.state.search;_data$page=data.page,page=_data$page===void 0?1:_data$page,_data$limit=data.limit,limit=_data$limit===void 0?10:_data$limit;_context.next=5;return _this.props.getCustomerPlus(\"?page=\".concat(page,\"&limit=\").concat(limit,\"&search=\").concat(search));case 5:customerDetails=_this.props.customerDetails;_this.updateState({customerList:customerDetails.dataList,meta:(_customerDetails$meta=customerDetails.meta)===null||_customerDetails$meta===void 0?void 0:_customerDetails$meta.pagination,isLoading:false});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlePagination=function(page){console.log(page,\"dsfsdfsdfsdf\");_this.getCustomerPlus(page);};_this.handlesearch=function(event){event.persist();var search=_this.state.search;if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:search=event.target.value;_context2.next=3;return _this.setState({search:search});case 3:_this.getCustomerPlus({});case 4:case\"end\":return _context2.stop();}}},_callee2);})),500);}_this.debouncedFn();};_this.bookAppointment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var formFields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formFields={};formFields[\"custId\"]=data.id;formFields[\"custName\"]=data.cust_name;_context3.next=5;return _this.props.updateForm(\"basicApptDetail\",formFields);case 5:_this.props.history.push(\"/admin/newappointment\");case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();return _this;}_createClass(ListCustomerPlusClass,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.state.isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,headerDetails=_this$state.headerDetails,customerList=_this$state.customerList,meta=_this$state.meta,currentIndex=_this$state.currentIndex,isLoading=_this$state.isLoading;return/*#__PURE__*/React.createElement(\"div\",{className:\"customer-list container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-2 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/customerplus/settings\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"Settings\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-3 mb-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/customerplus/lpmanagement\"},/*#__PURE__*/React.createElement(NormalButton,{normal:true,className:\"col-12 fs-15 float-right\",label:\"LP Management\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-2\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"head-label\"},\"Customer Plus List\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-sm-12 mb-2\"},/*#__PURE__*/React.createElement(InputSearch,{placeholder:\"Search Customer\",onChange:this.handlesearch})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-sm-12\"},/*#__PURE__*/React.createElement(NormalButton,{mainbg:true,className:\"col-12 fs-15 float-right\",label:\"Add Customer\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/add\");}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"tab-table-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-container\"},/*#__PURE__*/React.createElement(TableWrapper,{headerDetails:headerDetails,queryHandler:this.handlePagination,pageMeta:meta,showFilterColumn:true,parentHeaderChange:function parentHeaderChange(value){return _this2.updateState(function(){return headerDetails=value;});}},isLoading?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"7\"},/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex mt-5 align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\"))))):customerList?customerList.map(function(item,index){var _headerDetails$0$enab,_headerDetails$1$enab,_headerDetails$2$enab,_headerDetails$3$enab,_headerDetails$4$enab,_headerDetails$5$enab,_headerDetails$6$enab;var id=item.id,cust_code=item.cust_code,cust_refer=item.cust_refer,cust_name=item.cust_name,cust_phone2=item.cust_phone2,cust_dob=item.cust_dob,class_name=item.class_name;var date=new Date(cust_dob);cust_dob=date.toLocaleDateString();return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$0$enab=headerDetails[0].enabled)!==null&&_headerDetails$0$enab!==void 0?_headerDetails$0$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_code)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$1$enab=headerDetails[1].enabled)!==null&&_headerDetails$1$enab!==void 0?_headerDetails$1$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_refer)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$2$enab=headerDetails[2].enabled)!==null&&_headerDetails$2$enab!==void 0?_headerDetails$2$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},\"\")),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$3$enab=headerDetails[3].enabled)!==null&&_headerDetails$3$enab!==void 0?_headerDetails$3$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_name)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$4$enab=headerDetails[4].enabled)!==null&&_headerDetails$4$enab!==void 0?_headerDetails$4$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_phone2)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$5$enab=headerDetails[5].enabled)!==null&&_headerDetails$5$enab!==void 0?_headerDetails$5$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},cust_dob)),/*#__PURE__*/React.createElement(\"td\",{className:((_headerDetails$6$enab=headerDetails[6].enabled)!==null&&_headerDetails$6$enab!==void 0?_headerDetails$6$enab:true)?\"\":\"d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center\"},class_name)),/*#__PURE__*/React.createElement(\"td\",{className:\"position-relative\",ref:function ref(node){_this2.node=node;},onClick:function onClick(){return _this2.handleClick(index);}},currentIndex===index?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more-active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"option card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pt-3\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/\".concat(id,\"/details\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-eye-grey px-3\"}),\" \",\"View\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\",onClick:function onClick(){return _this2.props.history.push(\"/admin/customerplus/\".concat(id,\"/lpmanagement\"));}},/*#__PURE__*/React.createElement(\"span\",{className:\"px-2\"},/*#__PURE__*/React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"31\",height:\"30\",fill:\"currentColor\",viewBox:\"0 0 15 30\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"}))),\"Loyalty Points Management\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-schedule px-3\"}),\" \",\"Reschedule Appointment\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16\",onClick:function onClick(){return _this2.bookAppointment(item);}},/*#__PURE__*/React.createElement(\"span\",{className:\"px-2\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"31\",height:\"30\",viewBox:\"0 0 31 30\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"rect\",{width:\"31\",height:\"30\",fill:\"#F9F9F9\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M15 8V22\",stroke:\"#848484\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}),/*#__PURE__*/React.createElement(\"path\",{d:\"M8 15H22\",stroke:\"#848484\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}))),\"Book Appointment\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center fs-16 pb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon-cancel-schedule px-3\"}),\" \",\"Cancel Appointment\",\" \"))):/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center horizontal-more\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-more\"}))));}):\"\")))))));}}]);return ListCustomerPlusClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{customerDetails:state.customerPlus.customerPlusDetail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomerPlus:getCustomerPlus,updateForm:updateForm},dispatch);};export var ListCustomerPlus=connect(mapStateToProps,mapDispatchToProps)(ListCustomerPlusClass);","map":{"version":3,"sources":["E:/newfrontend/webfe/src/component/Admin/CustomerPlus/ListCustomerPlus/index.js"],"names":["React","NormalButton","InputSearch","TableWrapper","Link","getCustomerPlus","updateForm","connect","bindActionCreators","_","Navigation","ListCustomerPlusClass","state","headerDetails","label","sortKey","enabled","customerList","search","meta","active","currentIndex","isLoading","isMounted","updateState","data","setState","componentDidMount","handleClick","key","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","target","page","limit","props","customerDetails","dataList","pagination","handlePagination","console","log","handlesearch","event","persist","debouncedFn","debounce","value","bookAppointment","formFields","id","cust_name","history","push","map","item","index","cust_code","cust_refer","cust_phone2","cust_dob","class_name","date","Date","toLocaleDateString","Component","mapStateToProps","customerPlus","customerPlusDetail","mapDispatchToProps","dispatch","ListCustomerPlus"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NormalButton } from \"component/common\";\nimport { InputSearch, TableWrapper } from \"component/common\";\nimport { Link } from \"react-router-dom\";\nimport \"./style.scss\";\nimport { getCustomerPlus } from \"redux/actions/customerPlus\";\nimport { updateForm } from \"redux/actions/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport _ from \"lodash\";\nimport { Navigation } from \"react-minimal-side-navigation\";\n\nexport class ListCustomerPlusClass extends React.Component {\n  state = {\n    headerDetails: [\n      { label: \"Customer Code\", sortKey: \"customerCode\" },\n      { label: \"Referance Code\", sortKey: \"referenceCode\", enabled: true },\n      { label: \"Salutation\", sortKey: \"salutation\", enabled: true },\n      { label: \"Customer Name\", sortKey: \"customerName\", enabled: true },\n      { label: \"Mobile Phone\", sortKey: \"mobilePhone\", enabled: true },\n      { label: \"Birthday\", sortKey: \"birthday\", enabled: true },\n      { label: \"Customer Class\", sortKey: \"customerClass\", enabled: true },\n      { label: \"\" },\n    ],\n    customerList: [],\n    search: \"\",\n    meta: {},\n    active: false,\n    currentIndex: -1,\n    isLoading: true,\n    isMounted: true,\n  };\n  componentWillUnmount() {\n    this.state.isMounted = false;\n  }\n\n  updateState = data => {\n    if (this.state.isMounted) this.setState(data);\n  };\n\n  componentDidMount = () => {\n    this.getCustomerPlus({});\n  };\n\n  handleClick = key => {\n    if (!this.state.active) {\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\n    }\n\n    this.updateState(prevState => ({\n      active: !prevState.active,\n      currentIndex: key,\n    }));\n  };\n\n  handleOutsideClick = e => {\n    if (this.node != null) {\n      if (this.node.contains(e.target)) {\n        return;\n      }\n    }\n    this.handleClick();\n  };\n\n  getCustomerPlus = async data => {\n    this.updateState({ isLoading: true });\n    let { search } = this.state;\n    let { page = 1, limit = 10 } = data;\n    await this.props.getCustomerPlus(\n      `?page=${page}&limit=${limit}&search=${search}`\n    );\n    let { customerDetails } = this.props;\n    this.updateState({\n      customerList: customerDetails.dataList,\n      meta: customerDetails.meta?.pagination,\n      isLoading: false,\n    });\n  };\n\n  handlePagination = page => {\n    console.log(page, \"dsfsdfsdfsdf\");\n    this.getCustomerPlus(page);\n  };\n\n  handlesearch = event => {\n    event.persist();\n    let { search } = this.state;\n    if (!this.debouncedFn) {\n      this.debouncedFn = _.debounce(async () => {\n        search = event.target.value;\n        await this.setState({ search });\n        this.getCustomerPlus({});\n      }, 500);\n    }\n    this.debouncedFn();\n  };\n\n  bookAppointment = async data => {\n    let formFields = {};\n    formFields[\"custId\"] = data.id;\n    formFields[\"custName\"] = data.cust_name;\n    await this.props.updateForm(\"basicApptDetail\", formFields);\n    this.props.history.push(`/admin/newappointment`);\n  };\n\n  render() {\n    let { headerDetails, customerList, meta, currentIndex, isLoading } =\n      this.state;\n    return (\n      <div className=\"customer-list container-fluid\">\n        <div className=\"row mb-4\">\n          <div className=\"col-md-4 col-lg-2 mb-2\">\n            <Link to=\"/admin/customerplus/settings\">\n              <NormalButton\n                normal={true}\n                className=\"col-12 fs-15 float-right\"\n                label=\"Settings\"\n              />\n            </Link>\n          </div>\n          <div className=\"col-md-4 col-lg-3 mb-2\">\n            <Link to=\"/admin/customerplus/lpmanagement\">\n              <NormalButton\n                normal={true}\n                className=\"col-12 fs-15 float-right\"\n                label=\"LP Management\"\n              />\n            </Link>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">\n            <div className=\"row\">\n              <div className=\"col-12 mb-2\">\n                <h3 className=\"head-label\">Customer Plus List</h3>\n              </div>\n              <div className=\"col-md-8 col-sm-12 mb-2\">\n                <InputSearch\n                  placeholder=\"Search Customer\"\n                  onChange={this.handlesearch}\n                />\n              </div>\n              <div className=\"col-md-4 col-sm-12\">\n                <NormalButton\n                  mainbg={true}\n                  className=\"col-12 fs-15 float-right\"\n                  label=\"Add Customer\"\n                  onClick={() =>\n                    this.props.history.push(\"/admin/customerplus/add\")\n                  }\n                />\n              </div>\n            </div>\n            <div className=\"tab-table-content\">\n              <div className=\"py-4\">\n                <div className=\"table-container\">\n                  <TableWrapper\n                    headerDetails={headerDetails}\n                    queryHandler={this.handlePagination}\n                    pageMeta={meta}\n                    showFilterColumn={true}\n                    parentHeaderChange={value =>\n                      this.updateState(() => (headerDetails = value))\n                    }\n                  >\n                    {isLoading ? (\n                      <tr>\n                        <td colSpan=\"7\">\n                          <div class=\"d-flex mt-5 align-items-center justify-content-center\">\n                            <div class=\"spinner-border\" role=\"status\">\n                              <span class=\"sr-only\">Loading...</span>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                    ) : customerList ? (\n                      customerList.map((item, index) => {\n                        let {\n                          id,\n                          cust_code,\n                          cust_refer,\n                          cust_name,\n                          cust_phone2,\n                          cust_dob,\n                          class_name,\n                        } = item;\n                        let date = new Date(cust_dob);\n                        cust_dob = date.toLocaleDateString();\n                        return (\n                          <tr key={index}>\n                            <td\n                              className={\n                                headerDetails[0].enabled ?? true ? \"\" : \"d-none\"\n                              }\n                            >\n                              <div className=\"d-flex align-items-center justify-content-center\">\n                                {cust_code}\n                              </div>\n                            </td>\n                            <td\n                              className={\n                                headerDetails[1].enabled ?? true ? \"\" : \"d-none\"\n                              }\n                            >\n                              <div className=\"d-flex align-items-center justify-content-center\">\n                                {cust_refer}\n                              </div>\n                            </td>\n                            <td\n                              className={\n                                headerDetails[2].enabled ?? true ? \"\" : \"d-none\"\n                              }\n                            >\n                              <div className=\"d-flex align-items-center justify-content-center\">\n                                {\"\"}\n                              </div>\n                            </td>\n                            <td\n                              className={\n                                headerDetails[3].enabled ?? true ? \"\" : \"d-none\"\n                              }\n                            >\n                              <div className=\"d-flex align-items-center justify-content-center\">\n                                {cust_name}\n                              </div>\n                            </td>\n                            <td\n                              className={\n                                headerDetails[4].enabled ?? true ? \"\" : \"d-none\"\n                              }\n                            >\n                              <div className=\"d-flex align-items-center justify-content-center\">\n                                {cust_phone2}\n                              </div>\n                            </td>\n                            <td\n                              className={\n                                headerDetails[5].enabled ?? true ? \"\" : \"d-none\"\n                              }\n                            >\n                              <div className=\"d-flex align-items-center justify-content-center\">\n                                {cust_dob}\n                              </div>\n                            </td>\n                            <td\n                              className={\n                                headerDetails[6].enabled ?? true ? \"\" : \"d-none\"\n                              }\n                            >\n                              <div className=\"d-flex align-items-center justify-content-center\">\n                                {class_name}\n                              </div>\n                            </td>\n                            <td\n                              className=\"position-relative\"\n                              ref={node => {\n                                this.node = node;\n                              }}\n                              onClick={() => this.handleClick(index)}\n                            >\n                              {currentIndex === index ? (\n                                <>\n                                  <div className=\"d-flex align-items-center justify-content-center horizontal-more-active\">\n                                    <i className=\"icon-more\"></i>\n                                  </div>\n                                  <div className=\"option card\">\n                                    <div\n                                      className=\"d-flex align-items-center fs-16 pt-3\"\n                                      onClick={() =>\n                                        this.props.history.push(\n                                          `/admin/customerplus/${id}/details`\n                                        )\n                                      }\n                                    >\n                                      <span className=\"icon-eye-grey px-3\"></span>{\" \"}\n                                      View{\" \"}\n                                    </div>\n                                    <div\n                                      className=\"d-flex align-items-center fs-16\"\n                                      onClick={() =>\n                                        this.props.history.push(\n                                          `/admin/customerplus/${id}/lpmanagement`\n                                        )\n                                      }\n                                    >\n                                      <span className=\"px-2\">\n                                        <svg\n                                          xmlns=\"http://www.w3.org/2000/svg\"\n                                          width=\"31\"\n                                          height=\"30\"\n                                          fill=\"currentColor\"\n                                          viewBox=\"0 0 15 30\"\n                                        >\n                                          <path d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\" />\n                                        </svg>\n                                      </span>\n                                      Loyalty Points Management\n                                    </div>\n                                    <div className=\"d-flex align-items-center fs-16\">\n                                      <span className=\"icon-schedule px-3\"></span>{\" \"}\n                                      Reschedule Appointment{\" \"}\n                                    </div>\n                                    <div\n                                      className=\"d-flex align-items-center fs-16\"\n                                      onClick={() => this.bookAppointment(item)}\n                                    >\n                                      <span className=\"px-2\">\n                                        <svg\n                                          width=\"31\"\n                                          height=\"30\"\n                                          viewBox=\"0 0 31 30\"\n                                          fill=\"none\"\n                                          xmlns=\"http://www.w3.org/2000/svg\"\n                                        >\n                                          <rect\n                                            width=\"31\"\n                                            height=\"30\"\n                                            fill=\"#F9F9F9\"\n                                          />\n                                          <path\n                                            d=\"M15 8V22\"\n                                            stroke=\"#848484\"\n                                            stroke-linecap=\"round\"\n                                            stroke-linejoin=\"round\"\n                                          />\n                                          <path\n                                            d=\"M8 15H22\"\n                                            stroke=\"#848484\"\n                                            stroke-linecap=\"round\"\n                                            stroke-linejoin=\"round\"\n                                          />\n                                        </svg>\n                                      </span>\n                                      Book Appointment\n                                    </div>\n                                    <div className=\"d-flex align-items-center fs-16 pb-3\">\n                                      <span className=\"icon-cancel-schedule px-3\"></span>{\" \"}\n                                      Cancel Appointment{\" \"}\n                                    </div>\n                                  </div>\n                                </>\n                              ) : (\n                                <div className=\"d-flex align-items-center justify-content-center horizontal-more\">\n                                  <i className=\"icon-more\"></i>\n                                </div>\n                              )}\n                            </td>\n                          </tr>\n                        );\n                      })\n                    ) : (\n                      \"\"\n                    )}\n                  </TableWrapper>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  customerDetails: state.customerPlus.customerPlusDetail,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      getCustomerPlus,\n      updateForm,\n    },\n    dispatch\n  );\n};\n\nexport const ListCustomerPlus = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ListCustomerPlusClass);\n"]},"metadata":{},"sourceType":"module"}