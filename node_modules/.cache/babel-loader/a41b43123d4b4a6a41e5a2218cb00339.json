{"ast":null,"code":"/**\r\n * DevExtreme (file_management/object_provider.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _array = require(\"../core/utils/array\");\n\nvar _common = require(\"../core/utils/common\");\n\nvar _data = require(\"../core/utils/data\");\n\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\n\nvar _type = require(\"../core/utils/type\");\n\nvar _errors = _interopRequireDefault(require(\"../data/errors\"));\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _window = require(\"../core/utils/window\");\n\nvar _file_saver = require(\"../exporter/file_saver\");\n\nvar _ui = _interopRequireDefault(require(\"../ui/widget/ui.errors\"));\n\nvar _jszip = _interopRequireDefault(require(\"jszip\"));\n\nvar _provider_base = _interopRequireDefault(require(\"./provider_base\"));\n\nvar _errors2 = _interopRequireDefault(require(\"./errors\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar window = (0, _window.getWindow)();\n\nvar ObjectFileSystemProvider = function (_FileSystemProviderBa) {\n  _inherits(ObjectFileSystemProvider, _FileSystemProviderBa);\n\n  var _super = _createSuper(ObjectFileSystemProvider);\n\n  function ObjectFileSystemProvider(options) {\n    var _this;\n\n    _classCallCheck(this, ObjectFileSystemProvider);\n\n    options = (0, _common.ensureDefined)(options, {});\n    _this = _super.call(this, options);\n    var initialArray = options.data;\n\n    if (initialArray && !Array.isArray(initialArray)) {\n      throw _errors.default.errors.Error(\"E4006\");\n    }\n\n    var itemsExpr = options.itemsExpr || \"items\";\n    _this._subFileItemsGetter = (0, _data.compileGetter)(itemsExpr);\n    _this._subFileItemsSetter = _this._getSetter(itemsExpr);\n    var contentExpr = options.contentExpr || \"content\";\n    _this._contentGetter = (0, _data.compileGetter)(contentExpr);\n    _this._contentSetter = _this._getSetter(contentExpr);\n\n    var nameExpr = _this._getNameExpr(options);\n\n    _this._nameSetter = _this._getSetter(nameExpr);\n\n    var isDirExpr = _this._getIsDirExpr(options);\n\n    _this._getIsDirSetter = _this._getSetter(isDirExpr);\n\n    var keyExpr = _this._getKeyExpr(options);\n\n    _this._keySetter = _this._getSetter(keyExpr);\n\n    var sizeExpr = _this._getSizeExpr(options);\n\n    _this._sizeSetter = _this._getSetter(sizeExpr);\n\n    var dateModifiedExpr = _this._getDateModifiedExpr(options);\n\n    _this._dateModifiedSetter = _this._getSetter(dateModifiedExpr);\n    _this._data = initialArray || [];\n    return _this;\n  }\n\n  _createClass(ObjectFileSystemProvider, [{\n    key: \"getItems\",\n    value: function (parentDir) {\n      var _this2 = this;\n\n      return this._executeActionAsDeferred(function () {\n        return _this2._getItems(parentDir);\n      }, true);\n    }\n  }, {\n    key: \"renameItem\",\n    value: function (item, name) {\n      var _this3 = this;\n\n      return this._executeActionAsDeferred(function () {\n        return _this3._renameItemCore(item, name);\n      });\n    }\n  }, {\n    key: \"_renameItemCore\",\n    value: function (item, name) {\n      if (!item) {\n        return;\n      }\n\n      var dataItem = this._findDataObject(item);\n\n      this._nameSetter(dataItem, name);\n\n      item.name = name;\n      item.key = this._ensureDataObjectKey(dataItem);\n    }\n  }, {\n    key: \"createDirectory\",\n    value: function (parentDir, name) {\n      var _this4 = this;\n\n      return this._executeActionAsDeferred(function () {\n        _this4._validateDirectoryExists(parentDir);\n\n        _this4._createDataObject(parentDir, name, true);\n      });\n    }\n  }, {\n    key: \"deleteItems\",\n    value: function (items) {\n      var _this5 = this;\n\n      return items.map(function (item) {\n        return _this5._executeActionAsDeferred(function () {\n          return _this5._deleteItem(item);\n        });\n      });\n    }\n  }, {\n    key: \"moveItems\",\n    value: function (items, destinationDir) {\n      var _this6 = this;\n\n      var destinationDataItem = this._findDataObject(destinationDir);\n\n      var array = this._getDirectoryDataItems(destinationDataItem);\n\n      var deferreds = items.map(function (item) {\n        return _this6._executeActionAsDeferred(function () {\n          _this6._checkAbilityToMoveOrCopyItem(item, destinationDir);\n\n          var dataItem = _this6._findDataObject(item);\n\n          _this6._deleteItem(item);\n\n          array.push(dataItem);\n        });\n      });\n\n      this._updateHasSubDirs(destinationDir);\n\n      return deferreds;\n    }\n  }, {\n    key: \"copyItems\",\n    value: function (items, destinationDir) {\n      var _this7 = this;\n\n      var destinationDataItem = this._findDataObject(destinationDir);\n\n      var array = this._getDirectoryDataItems(destinationDataItem);\n\n      var deferreds = items.map(function (item) {\n        return _this7._executeActionAsDeferred(function () {\n          _this7._checkAbilityToMoveOrCopyItem(item, destinationDir);\n\n          var dataItem = _this7._findDataObject(item);\n\n          var copiedItem = _this7._createCopy(dataItem);\n\n          array.push(copiedItem);\n        });\n      });\n\n      this._updateHasSubDirs(destinationDir);\n\n      return deferreds;\n    }\n  }, {\n    key: \"uploadFileChunk\",\n    value: function (fileData, chunksInfo, destinationDirectory) {\n      var _this8 = this;\n\n      if (chunksInfo.chunkIndex > 0) {\n        return chunksInfo.customData.deferred;\n      }\n\n      this._validateDirectoryExists(destinationDirectory);\n\n      var deferred = chunksInfo.customData.deferred = new _deferred.Deferred();\n\n      var reader = this._createFileReader();\n\n      reader.readAsDataURL(fileData);\n\n      reader.onload = function () {\n        var content = reader.result.split(\",\")[1];\n\n        var dataObj = _this8._createDataObject(destinationDirectory, fileData.name, false);\n\n        _this8._sizeSetter(dataObj, fileData.size);\n\n        _this8._dateModifiedSetter(dataObj, fileData.lastModifiedDate);\n\n        _this8._contentSetter(dataObj, content);\n\n        deferred.resolve();\n      };\n\n      reader.onerror = function (error) {\n        return deferred.reject(error);\n      };\n\n      return deferred;\n    }\n  }, {\n    key: \"downloadItems\",\n    value: function (items) {\n      if (1 === items.length) {\n        this._downloadSingleFile(items[0]);\n      } else {\n        this._downloadMultipleFiles(items);\n      }\n    }\n  }, {\n    key: \"_downloadSingleFile\",\n    value: function (file) {\n      var content = this._getFileContent(file);\n\n      var byteString = window.atob(content);\n      var arrayBuffer = new ArrayBuffer(byteString.length);\n      var array = new Uint8Array(arrayBuffer);\n\n      for (var i = 0; i < byteString.length; i++) {\n        array[i] = byteString.charCodeAt(i);\n      }\n\n      var blob = new window.Blob([arrayBuffer], {\n        type: \"application/octet-stream\"\n      });\n\n      _file_saver.fileSaver.saveAs(file.name, null, blob);\n    }\n  }, {\n    key: \"_downloadMultipleFiles\",\n    value: function (files) {\n      var _this9 = this;\n\n      var jsZip = getJSZip();\n      var zip = new jsZip();\n      files.forEach(function (file) {\n        return zip.file(file.name, _this9._getFileContent(file), {\n          base64: true\n        });\n      });\n      var options = {\n        type: \"blob\",\n        compression: \"DEFLATE\",\n        mimeType: \"application/zip\"\n      };\n      var deferred = new _deferred.Deferred();\n\n      if (zip.generateAsync) {\n        zip.generateAsync(options).then(deferred.resolve);\n      } else {\n        deferred.resolve(zip.generate(options));\n      }\n\n      deferred.done(function (blob) {\n        return _file_saver.fileSaver.saveAs(\"files.zip\", null, blob);\n      });\n    }\n  }, {\n    key: \"_getFileContent\",\n    value: function (file) {\n      var dataItem = this._findDataObject(file);\n\n      return this._contentGetter(dataItem) || \"\";\n    }\n  }, {\n    key: \"_validateDirectoryExists\",\n    value: function (directoryInfo) {\n      if (!this._isFileItemExists(directoryInfo) || this._isDirGetter(directoryInfo.fileItem)) {\n        throw {\n          errorId: _errors2.default.DirectoryNotFound,\n          fileItem: directoryInfo\n        };\n      }\n    }\n  }, {\n    key: \"_checkAbilityToMoveOrCopyItem\",\n    value: function (item, destinationDir) {\n      var _this10 = this;\n\n      var dataItem = this._findDataObject(item);\n\n      var itemKey = this._getKeyFromDataObject(dataItem, item.parentPath);\n\n      var pathInfo = destinationDir.getFullPathInfo();\n      var currentPath = \"\";\n      pathInfo.forEach(function (info) {\n        currentPath = (0, _utils.pathCombine)(currentPath, info.name);\n\n        var pathKey = _this10._getDataObjectKey(info.key, currentPath);\n\n        if (pathKey === itemKey) {\n          throw {\n            errorId: _errors2.default.Other,\n            fileItem: item\n          };\n        }\n      });\n    }\n  }, {\n    key: \"_createDataObject\",\n    value: function (parentDir, name, isDirectory) {\n      var dataObj = {};\n\n      this._nameSetter(dataObj, name);\n\n      this._getIsDirSetter(dataObj, isDirectory);\n\n      this._keySetter(dataObj, String(new _guid.default()));\n\n      var parentDataItem = this._findDataObject(parentDir);\n\n      var array = this._getDirectoryDataItems(parentDataItem);\n\n      array.push(dataObj);\n\n      if (isDirectory) {\n        this._updateHasSubDirs(parentDir);\n      }\n\n      return dataObj;\n    }\n  }, {\n    key: \"_createCopy\",\n    value: function (dataObj) {\n      var _this11 = this;\n\n      var copyObj = {};\n\n      this._nameSetter(copyObj, this._nameGetter(dataObj));\n\n      this._getIsDirSetter(copyObj, this._isDirGetter(dataObj));\n\n      var items = this._subFileItemsGetter(dataObj);\n\n      if (Array.isArray(items)) {\n        var itemsCopy = [];\n        items.forEach(function (childItem) {\n          var childCopy = _this11._createCopy(childItem);\n\n          itemsCopy.push(childCopy);\n        });\n\n        this._subFileItemsSetter(copyObj, itemsCopy);\n      }\n\n      return copyObj;\n    }\n  }, {\n    key: \"_deleteItem\",\n    value: function (fileItem) {\n      var dataItem = this._findDataObject(fileItem);\n\n      var parentDirDataObj = this._findFileItemObj(fileItem.pathInfo);\n\n      var array = this._getDirectoryDataItems(parentDirDataObj);\n\n      var index = array.indexOf(dataItem);\n      array.splice(index, 1);\n    }\n  }, {\n    key: \"_getDirectoryDataItems\",\n    value: function (directoryDataObj) {\n      if (!directoryDataObj) {\n        return this._data;\n      }\n\n      var dataItems = this._subFileItemsGetter(directoryDataObj);\n\n      if (!Array.isArray(dataItems)) {\n        dataItems = [];\n\n        this._subFileItemsSetter(directoryDataObj, dataItems);\n      }\n\n      return dataItems;\n    }\n  }, {\n    key: \"_getItems\",\n    value: function (parentDir) {\n      this._validateDirectoryExists(parentDir);\n\n      var pathInfo = parentDir.getFullPathInfo();\n      var parentDirKey = pathInfo && pathInfo.length > 0 ? pathInfo[pathInfo.length - 1].key : null;\n      var dirFileObjects = this._data;\n\n      if (parentDirKey) {\n        var directoryEntry = this._findFileItemObj(pathInfo);\n\n        dirFileObjects = directoryEntry && this._subFileItemsGetter(directoryEntry) || [];\n      }\n\n      this._ensureKeysForDuplicateNameItems(dirFileObjects);\n\n      return this._convertDataObjectsToFileItems(dirFileObjects, pathInfo);\n    }\n  }, {\n    key: \"_ensureKeysForDuplicateNameItems\",\n    value: function (dataObjects) {\n      var _this12 = this;\n\n      var names = {};\n      dataObjects.forEach(function (obj) {\n        var name = _this12._nameGetter(obj);\n\n        if (names[name]) {\n          _this12._ensureDataObjectKey(obj);\n        } else {\n          names[name] = true;\n        }\n      });\n    }\n  }, {\n    key: \"_findDataObject\",\n    value: function (item) {\n      if (item.isRoot()) {\n        return null;\n      }\n\n      var result = this._findFileItemObj(item.getFullPathInfo());\n\n      if (!result) {\n        throw {\n          errorId: item.isDirectory ? _errors2.default.DirectoryNotFound : _errors2.default.FileNotFound,\n          fileItem: item\n        };\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_findFileItemObj\",\n    value: function (pathInfo) {\n      var _this13 = this;\n\n      if (!Array.isArray(pathInfo)) {\n        pathInfo = [];\n      }\n\n      var currentPath = \"\";\n      var fileItemObj = null;\n      var fileItemObjects = this._data;\n\n      var _loop = function (i) {\n        fileItemObj = (0, _array.find)(fileItemObjects, function (item) {\n          var hasCorrectFileItemType = _this13._isDirGetter(item) || i === pathInfo.length - 1;\n          return _this13._getKeyFromDataObject(item, currentPath) === pathInfo[i].key && _this13._nameGetter(item) === pathInfo[i].name && hasCorrectFileItemType;\n        });\n\n        if (fileItemObj) {\n          currentPath = (0, _utils.pathCombine)(currentPath, _this13._nameGetter(fileItemObj));\n          fileItemObjects = _this13._subFileItemsGetter(fileItemObj);\n        }\n      };\n\n      for (var i = 0; i < pathInfo.length && (0 === i || fileItemObj); i++) {\n        _loop(i);\n      }\n\n      return fileItemObj;\n    }\n  }, {\n    key: \"_getKeyFromDataObject\",\n    value: function (dataObj, defaultKeyPrefix) {\n      var key = this._keyGetter(dataObj);\n\n      var relativeName = (0, _utils.pathCombine)(defaultKeyPrefix, this._nameGetter(dataObj));\n      return this._getDataObjectKey(key, relativeName);\n    }\n  }, {\n    key: \"_getDataObjectKey\",\n    value: function (key, relativeName) {\n      return key ? key : relativeName;\n    }\n  }, {\n    key: \"_ensureDataObjectKey\",\n    value: function (dataObj) {\n      var key = this._keyGetter(dataObj);\n\n      if (!key) {\n        key = String(new _guid.default());\n\n        this._keySetter(dataObj, key);\n      }\n\n      return key;\n    }\n  }, {\n    key: \"_updateHasSubDirs\",\n    value: function (dir) {\n      if (dir && !dir.isRoot()) {\n        var dataItem = this._findDataObject(dir);\n\n        dir.hasSubDirectories = this._hasSubDirs(dataItem);\n      }\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function (dataObj) {\n      var subItems = (0, _common.ensureDefined)(this._subFileItemsGetter(dataObj), []);\n\n      if (!Array.isArray(subItems)) {\n        return true;\n      }\n\n      for (var i = 0; i < subItems.length; i++) {\n        if (true === this._isDirGetter(subItems[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_getSetter\",\n    value: function (expr) {\n      return (0, _type.isFunction)(expr) ? expr : (0, _data.compileSetter)(expr);\n    }\n  }, {\n    key: \"_isFileItemExists\",\n    value: function (fileItem) {\n      return fileItem.isDirectory && fileItem.isRoot() || !!this._findFileItemObj(fileItem.getFullPathInfo());\n    }\n  }, {\n    key: \"_createFileReader\",\n    value: function () {\n      return new window.FileReader();\n    }\n  }]);\n\n  return ObjectFileSystemProvider;\n}(_provider_base.default);\n\nfunction getJSZip() {\n  if (!_jszip.default) {\n    throw _ui.default.Error(\"E1041\", \"JSZip\");\n  }\n\n  return _jszip.default;\n}\n\nvar _default = ObjectFileSystemProvider;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/file_management/object_provider.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_array","require","_common","_data","_guid","_interopRequireDefault","_type","_errors","_deferred","_window","_file_saver","_ui","_jszip","_provider_base","_errors2","_utils","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","window","getWindow","ObjectFileSystemProvider","_FileSystemProviderBa","_super","options","_this","ensureDefined","initialArray","data","Array","isArray","errors","Error","itemsExpr","_subFileItemsGetter","compileGetter","_subFileItemsSetter","_getSetter","contentExpr","_contentGetter","_contentSetter","nameExpr","_getNameExpr","_nameSetter","isDirExpr","_getIsDirExpr","_getIsDirSetter","keyExpr","_getKeyExpr","_keySetter","sizeExpr","_getSizeExpr","_sizeSetter","dateModifiedExpr","_getDateModifiedExpr","_dateModifiedSetter","parentDir","_this2","_executeActionAsDeferred","_getItems","item","name","_this3","_renameItemCore","dataItem","_findDataObject","_ensureDataObjectKey","_this4","_validateDirectoryExists","_createDataObject","items","_this5","map","_deleteItem","destinationDir","_this6","destinationDataItem","array","_getDirectoryDataItems","deferreds","_checkAbilityToMoveOrCopyItem","push","_updateHasSubDirs","_this7","copiedItem","_createCopy","fileData","chunksInfo","destinationDirectory","_this8","chunkIndex","customData","deferred","Deferred","reader","_createFileReader","readAsDataURL","onload","content","split","dataObj","size","lastModifiedDate","resolve","onerror","error","reject","_downloadSingleFile","_downloadMultipleFiles","file","_getFileContent","byteString","atob","arrayBuffer","ArrayBuffer","Uint8Array","charCodeAt","blob","Blob","type","fileSaver","saveAs","files","_this9","jsZip","getJSZip","zip","forEach","base64","compression","mimeType","generateAsync","then","generate","done","directoryInfo","_isFileItemExists","_isDirGetter","fileItem","errorId","DirectoryNotFound","_this10","itemKey","_getKeyFromDataObject","parentPath","pathInfo","getFullPathInfo","currentPath","info","pathCombine","pathKey","_getDataObjectKey","Other","isDirectory","String","parentDataItem","_this11","copyObj","_nameGetter","itemsCopy","childItem","childCopy","parentDirDataObj","_findFileItemObj","index","indexOf","splice","directoryDataObj","dataItems","parentDirKey","dirFileObjects","directoryEntry","_ensureKeysForDuplicateNameItems","_convertDataObjectsToFileItems","dataObjects","_this12","names","isRoot","FileNotFound","_this13","fileItemObj","fileItemObjects","_loop","find","hasCorrectFileItemType","defaultKeyPrefix","_keyGetter","relativeName","dir","hasSubDirectories","_hasSubDirs","subItems","expr","isFunction","compileSetter","FileReader","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (file_management/object_provider.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _array = require(\"../core/utils/array\");\r\nvar _common = require(\"../core/utils/common\");\r\nvar _data = require(\"../core/utils/data\");\r\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\r\nvar _type = require(\"../core/utils/type\");\r\nvar _errors = _interopRequireDefault(require(\"../data/errors\"));\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _window = require(\"../core/utils/window\");\r\nvar _file_saver = require(\"../exporter/file_saver\");\r\nvar _ui = _interopRequireDefault(require(\"../ui/widget/ui.errors\"));\r\nvar _jszip = _interopRequireDefault(require(\"jszip\"));\r\nvar _provider_base = _interopRequireDefault(require(\"./provider_base\"));\r\nvar _errors2 = _interopRequireDefault(require(\"./errors\"));\r\nvar _utils = require(\"./utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar ObjectFileSystemProvider = function(_FileSystemProviderBa) {\r\n    _inherits(ObjectFileSystemProvider, _FileSystemProviderBa);\r\n    var _super = _createSuper(ObjectFileSystemProvider);\r\n\r\n    function ObjectFileSystemProvider(options) {\r\n        var _this;\r\n        _classCallCheck(this, ObjectFileSystemProvider);\r\n        options = (0, _common.ensureDefined)(options, {});\r\n        _this = _super.call(this, options);\r\n        var initialArray = options.data;\r\n        if (initialArray && !Array.isArray(initialArray)) {\r\n            throw _errors.default.errors.Error(\"E4006\")\r\n        }\r\n        var itemsExpr = options.itemsExpr || \"items\";\r\n        _this._subFileItemsGetter = (0, _data.compileGetter)(itemsExpr);\r\n        _this._subFileItemsSetter = _this._getSetter(itemsExpr);\r\n        var contentExpr = options.contentExpr || \"content\";\r\n        _this._contentGetter = (0, _data.compileGetter)(contentExpr);\r\n        _this._contentSetter = _this._getSetter(contentExpr);\r\n        var nameExpr = _this._getNameExpr(options);\r\n        _this._nameSetter = _this._getSetter(nameExpr);\r\n        var isDirExpr = _this._getIsDirExpr(options);\r\n        _this._getIsDirSetter = _this._getSetter(isDirExpr);\r\n        var keyExpr = _this._getKeyExpr(options);\r\n        _this._keySetter = _this._getSetter(keyExpr);\r\n        var sizeExpr = _this._getSizeExpr(options);\r\n        _this._sizeSetter = _this._getSetter(sizeExpr);\r\n        var dateModifiedExpr = _this._getDateModifiedExpr(options);\r\n        _this._dateModifiedSetter = _this._getSetter(dateModifiedExpr);\r\n        _this._data = initialArray || [];\r\n        return _this\r\n    }\r\n    _createClass(ObjectFileSystemProvider, [{\r\n        key: \"getItems\",\r\n        value: function(parentDir) {\r\n            var _this2 = this;\r\n            return this._executeActionAsDeferred(function() {\r\n                return _this2._getItems(parentDir)\r\n            }, true)\r\n        }\r\n    }, {\r\n        key: \"renameItem\",\r\n        value: function(item, name) {\r\n            var _this3 = this;\r\n            return this._executeActionAsDeferred(function() {\r\n                return _this3._renameItemCore(item, name)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_renameItemCore\",\r\n        value: function(item, name) {\r\n            if (!item) {\r\n                return\r\n            }\r\n            var dataItem = this._findDataObject(item);\r\n            this._nameSetter(dataItem, name);\r\n            item.name = name;\r\n            item.key = this._ensureDataObjectKey(dataItem)\r\n        }\r\n    }, {\r\n        key: \"createDirectory\",\r\n        value: function(parentDir, name) {\r\n            var _this4 = this;\r\n            return this._executeActionAsDeferred(function() {\r\n                _this4._validateDirectoryExists(parentDir);\r\n                _this4._createDataObject(parentDir, name, true)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"deleteItems\",\r\n        value: function(items) {\r\n            var _this5 = this;\r\n            return items.map(function(item) {\r\n                return _this5._executeActionAsDeferred(function() {\r\n                    return _this5._deleteItem(item)\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"moveItems\",\r\n        value: function(items, destinationDir) {\r\n            var _this6 = this;\r\n            var destinationDataItem = this._findDataObject(destinationDir);\r\n            var array = this._getDirectoryDataItems(destinationDataItem);\r\n            var deferreds = items.map(function(item) {\r\n                return _this6._executeActionAsDeferred(function() {\r\n                    _this6._checkAbilityToMoveOrCopyItem(item, destinationDir);\r\n                    var dataItem = _this6._findDataObject(item);\r\n                    _this6._deleteItem(item);\r\n                    array.push(dataItem)\r\n                })\r\n            });\r\n            this._updateHasSubDirs(destinationDir);\r\n            return deferreds\r\n        }\r\n    }, {\r\n        key: \"copyItems\",\r\n        value: function(items, destinationDir) {\r\n            var _this7 = this;\r\n            var destinationDataItem = this._findDataObject(destinationDir);\r\n            var array = this._getDirectoryDataItems(destinationDataItem);\r\n            var deferreds = items.map(function(item) {\r\n                return _this7._executeActionAsDeferred(function() {\r\n                    _this7._checkAbilityToMoveOrCopyItem(item, destinationDir);\r\n                    var dataItem = _this7._findDataObject(item);\r\n                    var copiedItem = _this7._createCopy(dataItem);\r\n                    array.push(copiedItem)\r\n                })\r\n            });\r\n            this._updateHasSubDirs(destinationDir);\r\n            return deferreds\r\n        }\r\n    }, {\r\n        key: \"uploadFileChunk\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {\r\n            var _this8 = this;\r\n            if (chunksInfo.chunkIndex > 0) {\r\n                return chunksInfo.customData.deferred\r\n            }\r\n            this._validateDirectoryExists(destinationDirectory);\r\n            var deferred = chunksInfo.customData.deferred = new _deferred.Deferred;\r\n            var reader = this._createFileReader();\r\n            reader.readAsDataURL(fileData);\r\n            reader.onload = function() {\r\n                var content = reader.result.split(\",\")[1];\r\n                var dataObj = _this8._createDataObject(destinationDirectory, fileData.name, false);\r\n                _this8._sizeSetter(dataObj, fileData.size);\r\n                _this8._dateModifiedSetter(dataObj, fileData.lastModifiedDate);\r\n                _this8._contentSetter(dataObj, content);\r\n                deferred.resolve()\r\n            };\r\n            reader.onerror = function(error) {\r\n                return deferred.reject(error)\r\n            };\r\n            return deferred\r\n        }\r\n    }, {\r\n        key: \"downloadItems\",\r\n        value: function(items) {\r\n            if (1 === items.length) {\r\n                this._downloadSingleFile(items[0])\r\n            } else {\r\n                this._downloadMultipleFiles(items)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_downloadSingleFile\",\r\n        value: function(file) {\r\n            var content = this._getFileContent(file);\r\n            var byteString = window.atob(content);\r\n            var arrayBuffer = new ArrayBuffer(byteString.length);\r\n            var array = new Uint8Array(arrayBuffer);\r\n            for (var i = 0; i < byteString.length; i++) {\r\n                array[i] = byteString.charCodeAt(i)\r\n            }\r\n            var blob = new window.Blob([arrayBuffer], {\r\n                type: \"application/octet-stream\"\r\n            });\r\n            _file_saver.fileSaver.saveAs(file.name, null, blob)\r\n        }\r\n    }, {\r\n        key: \"_downloadMultipleFiles\",\r\n        value: function(files) {\r\n            var _this9 = this;\r\n            var jsZip = getJSZip();\r\n            var zip = new jsZip;\r\n            files.forEach(function(file) {\r\n                return zip.file(file.name, _this9._getFileContent(file), {\r\n                    base64: true\r\n                })\r\n            });\r\n            var options = {\r\n                type: \"blob\",\r\n                compression: \"DEFLATE\",\r\n                mimeType: \"application/zip\"\r\n            };\r\n            var deferred = new _deferred.Deferred;\r\n            if (zip.generateAsync) {\r\n                zip.generateAsync(options).then(deferred.resolve)\r\n            } else {\r\n                deferred.resolve(zip.generate(options))\r\n            }\r\n            deferred.done(function(blob) {\r\n                return _file_saver.fileSaver.saveAs(\"files.zip\", null, blob)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getFileContent\",\r\n        value: function(file) {\r\n            var dataItem = this._findDataObject(file);\r\n            return this._contentGetter(dataItem) || \"\"\r\n        }\r\n    }, {\r\n        key: \"_validateDirectoryExists\",\r\n        value: function(directoryInfo) {\r\n            if (!this._isFileItemExists(directoryInfo) || this._isDirGetter(directoryInfo.fileItem)) {\r\n                throw {\r\n                    errorId: _errors2.default.DirectoryNotFound,\r\n                    fileItem: directoryInfo\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_checkAbilityToMoveOrCopyItem\",\r\n        value: function(item, destinationDir) {\r\n            var _this10 = this;\r\n            var dataItem = this._findDataObject(item);\r\n            var itemKey = this._getKeyFromDataObject(dataItem, item.parentPath);\r\n            var pathInfo = destinationDir.getFullPathInfo();\r\n            var currentPath = \"\";\r\n            pathInfo.forEach(function(info) {\r\n                currentPath = (0, _utils.pathCombine)(currentPath, info.name);\r\n                var pathKey = _this10._getDataObjectKey(info.key, currentPath);\r\n                if (pathKey === itemKey) {\r\n                    throw {\r\n                        errorId: _errors2.default.Other,\r\n                        fileItem: item\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createDataObject\",\r\n        value: function(parentDir, name, isDirectory) {\r\n            var dataObj = {};\r\n            this._nameSetter(dataObj, name);\r\n            this._getIsDirSetter(dataObj, isDirectory);\r\n            this._keySetter(dataObj, String(new _guid.default));\r\n            var parentDataItem = this._findDataObject(parentDir);\r\n            var array = this._getDirectoryDataItems(parentDataItem);\r\n            array.push(dataObj);\r\n            if (isDirectory) {\r\n                this._updateHasSubDirs(parentDir)\r\n            }\r\n            return dataObj\r\n        }\r\n    }, {\r\n        key: \"_createCopy\",\r\n        value: function(dataObj) {\r\n            var _this11 = this;\r\n            var copyObj = {};\r\n            this._nameSetter(copyObj, this._nameGetter(dataObj));\r\n            this._getIsDirSetter(copyObj, this._isDirGetter(dataObj));\r\n            var items = this._subFileItemsGetter(dataObj);\r\n            if (Array.isArray(items)) {\r\n                var itemsCopy = [];\r\n                items.forEach(function(childItem) {\r\n                    var childCopy = _this11._createCopy(childItem);\r\n                    itemsCopy.push(childCopy)\r\n                });\r\n                this._subFileItemsSetter(copyObj, itemsCopy)\r\n            }\r\n            return copyObj\r\n        }\r\n    }, {\r\n        key: \"_deleteItem\",\r\n        value: function(fileItem) {\r\n            var dataItem = this._findDataObject(fileItem);\r\n            var parentDirDataObj = this._findFileItemObj(fileItem.pathInfo);\r\n            var array = this._getDirectoryDataItems(parentDirDataObj);\r\n            var index = array.indexOf(dataItem);\r\n            array.splice(index, 1)\r\n        }\r\n    }, {\r\n        key: \"_getDirectoryDataItems\",\r\n        value: function(directoryDataObj) {\r\n            if (!directoryDataObj) {\r\n                return this._data\r\n            }\r\n            var dataItems = this._subFileItemsGetter(directoryDataObj);\r\n            if (!Array.isArray(dataItems)) {\r\n                dataItems = [];\r\n                this._subFileItemsSetter(directoryDataObj, dataItems)\r\n            }\r\n            return dataItems\r\n        }\r\n    }, {\r\n        key: \"_getItems\",\r\n        value: function(parentDir) {\r\n            this._validateDirectoryExists(parentDir);\r\n            var pathInfo = parentDir.getFullPathInfo();\r\n            var parentDirKey = pathInfo && pathInfo.length > 0 ? pathInfo[pathInfo.length - 1].key : null;\r\n            var dirFileObjects = this._data;\r\n            if (parentDirKey) {\r\n                var directoryEntry = this._findFileItemObj(pathInfo);\r\n                dirFileObjects = directoryEntry && this._subFileItemsGetter(directoryEntry) || []\r\n            }\r\n            this._ensureKeysForDuplicateNameItems(dirFileObjects);\r\n            return this._convertDataObjectsToFileItems(dirFileObjects, pathInfo)\r\n        }\r\n    }, {\r\n        key: \"_ensureKeysForDuplicateNameItems\",\r\n        value: function(dataObjects) {\r\n            var _this12 = this;\r\n            var names = {};\r\n            dataObjects.forEach(function(obj) {\r\n                var name = _this12._nameGetter(obj);\r\n                if (names[name]) {\r\n                    _this12._ensureDataObjectKey(obj)\r\n                } else {\r\n                    names[name] = true\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_findDataObject\",\r\n        value: function(item) {\r\n            if (item.isRoot()) {\r\n                return null\r\n            }\r\n            var result = this._findFileItemObj(item.getFullPathInfo());\r\n            if (!result) {\r\n                throw {\r\n                    errorId: item.isDirectory ? _errors2.default.DirectoryNotFound : _errors2.default.FileNotFound,\r\n                    fileItem: item\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_findFileItemObj\",\r\n        value: function(pathInfo) {\r\n            var _this13 = this;\r\n            if (!Array.isArray(pathInfo)) {\r\n                pathInfo = []\r\n            }\r\n            var currentPath = \"\";\r\n            var fileItemObj = null;\r\n            var fileItemObjects = this._data;\r\n            var _loop = function(i) {\r\n                fileItemObj = (0, _array.find)(fileItemObjects, function(item) {\r\n                    var hasCorrectFileItemType = _this13._isDirGetter(item) || i === pathInfo.length - 1;\r\n                    return _this13._getKeyFromDataObject(item, currentPath) === pathInfo[i].key && _this13._nameGetter(item) === pathInfo[i].name && hasCorrectFileItemType\r\n                });\r\n                if (fileItemObj) {\r\n                    currentPath = (0, _utils.pathCombine)(currentPath, _this13._nameGetter(fileItemObj));\r\n                    fileItemObjects = _this13._subFileItemsGetter(fileItemObj)\r\n                }\r\n            };\r\n            for (var i = 0; i < pathInfo.length && (0 === i || fileItemObj); i++) {\r\n                _loop(i)\r\n            }\r\n            return fileItemObj\r\n        }\r\n    }, {\r\n        key: \"_getKeyFromDataObject\",\r\n        value: function(dataObj, defaultKeyPrefix) {\r\n            var key = this._keyGetter(dataObj);\r\n            var relativeName = (0, _utils.pathCombine)(defaultKeyPrefix, this._nameGetter(dataObj));\r\n            return this._getDataObjectKey(key, relativeName)\r\n        }\r\n    }, {\r\n        key: \"_getDataObjectKey\",\r\n        value: function(key, relativeName) {\r\n            return key ? key : relativeName\r\n        }\r\n    }, {\r\n        key: \"_ensureDataObjectKey\",\r\n        value: function(dataObj) {\r\n            var key = this._keyGetter(dataObj);\r\n            if (!key) {\r\n                key = String(new _guid.default);\r\n                this._keySetter(dataObj, key)\r\n            }\r\n            return key\r\n        }\r\n    }, {\r\n        key: \"_updateHasSubDirs\",\r\n        value: function(dir) {\r\n            if (dir && !dir.isRoot()) {\r\n                var dataItem = this._findDataObject(dir);\r\n                dir.hasSubDirectories = this._hasSubDirs(dataItem)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hasSubDirs\",\r\n        value: function(dataObj) {\r\n            var subItems = (0, _common.ensureDefined)(this._subFileItemsGetter(dataObj), []);\r\n            if (!Array.isArray(subItems)) {\r\n                return true\r\n            }\r\n            for (var i = 0; i < subItems.length; i++) {\r\n                if (true === this._isDirGetter(subItems[i])) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_getSetter\",\r\n        value: function(expr) {\r\n            return (0, _type.isFunction)(expr) ? expr : (0, _data.compileSetter)(expr)\r\n        }\r\n    }, {\r\n        key: \"_isFileItemExists\",\r\n        value: function(fileItem) {\r\n            return fileItem.isDirectory && fileItem.isRoot() || !!this._findFileItemObj(fileItem.getFullPathInfo())\r\n        }\r\n    }, {\r\n        key: \"_createFileReader\",\r\n        value: function() {\r\n            return new window.FileReader\r\n        }\r\n    }]);\r\n    return ObjectFileSystemProvider\r\n}(_provider_base.default);\r\n\r\nfunction getJSZip() {\r\n    if (!_jszip.default) {\r\n        throw _ui.default.Error(\"E1041\", \"JSZip\")\r\n    }\r\n    return _jszip.default\r\n}\r\nvar _default = ObjectFileSystemProvider;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}