{"ast":null,"code":"/**\r\n * DevExtreme (ui/diagram/ui.diagram.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _load_indicator = _interopRequireDefault(require(\"../load_indicator\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\n\nvar _resize_callbacks = _interopRequireDefault(require(\"../../core/utils/resize_callbacks\"));\n\nvar _diagram = require(\"./diagram.importer\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _element = require(\"../../core/element\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _number = _interopRequireDefault(require(\"../../localization/number\"));\n\nvar zIndexPool = _interopRequireWildcard(require(\"../overlay/z_index\"));\n\nvar _ui2 = _interopRequireDefault(require(\"../overlay/ui.overlay\"));\n\nvar _uiDiagram = _interopRequireDefault(require(\"./ui.diagram.toolbar\"));\n\nvar _uiDiagram2 = _interopRequireDefault(require(\"./ui.diagram.main_toolbar\"));\n\nvar _uiDiagram3 = _interopRequireDefault(require(\"./ui.diagram.history_toolbar\"));\n\nvar _uiDiagram4 = _interopRequireDefault(require(\"./ui.diagram.view_toolbar\"));\n\nvar _uiDiagram5 = _interopRequireDefault(require(\"./ui.diagram.properties_toolbar\"));\n\nvar _uiDiagram6 = _interopRequireDefault(require(\"./ui.diagram.context_menu\"));\n\nvar _uiDiagram7 = _interopRequireDefault(require(\"./ui.diagram.context_toolbox\"));\n\nvar _uiDiagram8 = _interopRequireDefault(require(\"./ui.diagram.dialogs\"));\n\nvar _uiDiagram9 = _interopRequireDefault(require(\"./ui.diagram.scroll_view\"));\n\nvar _diagram2 = _interopRequireDefault(require(\"./diagram.toolbox_manager\"));\n\nvar _uiDiagram10 = _interopRequireDefault(require(\"./ui.diagram.toolbox\"));\n\nvar _uiDiagram11 = _interopRequireDefault(require(\"./ui.diagram.properties_panel\"));\n\nvar _diagram3 = _interopRequireDefault(require(\"./diagram.options_update\"));\n\nvar _uiDiagram12 = _interopRequireDefault(require(\"./ui.diagram.dialog_manager\"));\n\nvar _diagram4 = _interopRequireDefault(require(\"./diagram.commands_manager\"));\n\nvar _diagram5 = _interopRequireDefault(require(\"./diagram.nodes_option\"));\n\nvar _diagram6 = _interopRequireDefault(require(\"./diagram.edges_option\"));\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" !== typeof WeakMap) {\n    return null;\n  }\n\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar DIAGRAM_CLASS = \"dx-diagram\";\nvar DIAGRAM_FULLSCREEN_CLASS = \"dx-diagram-fullscreen\";\nvar DIAGRAM_TOOLBAR_WRAPPER_CLASS = DIAGRAM_CLASS + \"-toolbar-wrapper\";\nvar DIAGRAM_CONTENT_WRAPPER_CLASS = DIAGRAM_CLASS + \"-content-wrapper\";\nvar DIAGRAM_CONTENT_CLASS = DIAGRAM_CLASS + \"-content\";\nvar DIAGRAM_SCROLL_VIEW_CLASS = DIAGRAM_CLASS + \"-scroll-view\";\nvar DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS = DIAGRAM_CLASS + \"-floating-toolbar-container\";\nvar DIAGRAM_PROPERTIES_PANEL_TOOLBAR_CONTAINER_CLASS = DIAGRAM_CLASS + \"-properties-panel-toolbar-container\";\nvar DIAGRAM_LOADING_INDICATOR_CLASS = DIAGRAM_CLASS + \"-loading-indicator\";\nvar DIAGRAM_FLOATING_PANEL_OFFSET = 12;\nvar DIAGRAM_DEFAULT_UNIT = \"in\";\nvar DIAGRAM_DEFAULT_ZOOMLEVEL = 1;\nvar DIAGRAM_DEFAULT_AUTOZOOM_MODE = \"disabled\";\nvar DIAGRAM_DEFAULT_PAGE_ORIENTATION = \"portrait\";\nvar DIAGRAM_DEFAULT_PAGE_COLOR = \"#ffffff\";\nvar DIAGRAM_MAX_MOBILE_WINDOW_WIDTH = 576;\nvar DIAGRAM_TOOLBOX_SHAPE_SPACING = 12;\nvar DIAGRAM_TOOLBOX_SHAPES_PER_ROW = 3;\nvar DIAGRAM_CONTEXT_TOOLBOX_SHAPE_SPACING = 12;\nvar DIAGRAM_CONTEXT_TOOLBOX_SHAPES_PER_ROW = 4;\nvar DIAGRAM_CONTEXT_TOOLBOX_DEFAULT_WIDTH = 152;\nvar DIAGRAM_NAMESPACE = \"dxDiagramEvent\";\nvar FULLSCREEN_CHANGE_EVENT_NAME = (0, _index.addNamespace)(\"fullscreenchange\", DIAGRAM_NAMESPACE);\nvar IE_FULLSCREEN_CHANGE_EVENT_NAME = (0, _index.addNamespace)(\"msfullscreenchange\", DIAGRAM_NAMESPACE);\nvar WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME = (0, _index.addNamespace)(\"webkitfullscreenchange\", DIAGRAM_NAMESPACE);\nvar MOZ_FULLSCREEN_CHANGE_EVENT_NAME = (0, _index.addNamespace)(\"mozfullscreenchange\", DIAGRAM_NAMESPACE);\n\nvar Diagram = function (_Widget) {\n  _inherits(Diagram, _Widget);\n\n  var _super = _createSuper(Diagram);\n\n  function Diagram() {\n    _classCallCheck(this, Diagram);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Diagram, [{\n    key: \"_init\",\n    value: function () {\n      this._updateDiagramLockCount = 0;\n      this.toggleFullscreenLock = 0;\n      this._browserResizeTimer = -1;\n      this._toolbars = [];\n\n      _get(_getPrototypeOf(Diagram.prototype), \"_init\", this).call(this);\n\n      this._initDiagram();\n\n      this._createCustomCommand();\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function () {\n      var _this = this;\n\n      _get(_getPrototypeOf(Diagram.prototype), \"_initMarkup\", this).call(this);\n\n      this._toolbars = [];\n      delete this._isMobileScreenSize;\n      var isServerSide = !(0, _window.hasWindow)();\n      this.$element().addClass(DIAGRAM_CLASS);\n      delete this._mainToolbar;\n\n      if (this.option(\"mainToolbar.visible\")) {\n        this._renderMainToolbar();\n      }\n\n      var $contentWrapper = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_CONTENT_WRAPPER_CLASS).appendTo(this.$element());\n      delete this._historyToolbar;\n      delete this._historyToolbarResizeCallback;\n\n      if (this._isHistoryToolbarVisible()) {\n        this._renderHistoryToolbar($contentWrapper);\n      }\n\n      delete this._propertiesToolbar;\n      delete this._propertiesToolbarResizeCallback;\n\n      if (this._isPropertiesPanelEnabled()) {\n        this._renderPropertiesToolbar($contentWrapper);\n      }\n\n      delete this._viewToolbar;\n      delete this._viewToolbarResizeCallback;\n\n      if (this.option(\"viewToolbar.visible\")) {\n        this._renderViewToolbar($contentWrapper);\n      }\n\n      delete this._toolbox;\n      delete this._toolboxResizeCallback;\n\n      if (this._isToolboxEnabled()) {\n        this._renderToolbox($contentWrapper);\n      }\n\n      delete this._propertiesPanel;\n      delete this._propertiesPanelResizeCallback;\n\n      if (this._isPropertiesPanelEnabled()) {\n        this._renderPropertiesPanel($contentWrapper);\n      }\n\n      this._$content = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_CONTENT_CLASS).appendTo($contentWrapper);\n      delete this._contextMenu;\n\n      if (this.option(\"contextMenu.enabled\")) {\n        this._renderContextMenu($contentWrapper);\n      }\n\n      delete this._contextToolbox;\n\n      if (this.option(\"contextToolbox.enabled\")) {\n        this._renderContextToolbox($contentWrapper);\n      }\n\n      this._renderDialog($contentWrapper);\n\n      if (!isServerSide) {\n        var $scrollViewWrapper = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_SCROLL_VIEW_CLASS).appendTo(this._$content);\n\n        this._createComponent($scrollViewWrapper, _uiDiagram9.default, {\n          onCreateDiagram: function (e) {\n            _this._diagramInstance.createDocument(e.$parent[0], e.scrollView);\n          }\n        });\n      }\n\n      if ((0, _window.hasWindow)()) {\n        _resize_callbacks.default.add(function () {\n          _this._killBrowserResizeTimer();\n\n          _this._browserResizeTimer = setTimeout(function () {\n            return _this._processBrowserResize();\n          }, 100);\n        });\n      }\n\n      this._setCustomCommandChecked(_diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME, this._isPropertiesPanelVisible());\n\n      this._setCustomCommandChecked(_diagram4.default.SHOW_TOOLBOX_COMMAND_NAME, this._isToolboxVisible());\n    }\n  }, {\n    key: \"_processBrowserResize\",\n    value: function () {\n      this._isMobileScreenSize = void 0;\n\n      this._processDiagramResize();\n\n      this._killBrowserResizeTimer();\n    }\n  }, {\n    key: \"_processDiagramResize\",\n    value: function () {\n      if (this._historyToolbarResizeCallback) {\n        this._historyToolbarResizeCallback.call(this);\n      }\n\n      if (this._propertiesToolbarResizeCallback) {\n        this._propertiesToolbarResizeCallback.call(this);\n      }\n\n      if (this._propertiesPanelResizeCallback) {\n        this._propertiesPanelResizeCallback.call(this);\n      }\n\n      if (this._viewToolbarResizeCallback) {\n        this._viewToolbarResizeCallback.call(this);\n      }\n\n      if (this._toolboxResizeCallback) {\n        this._toolboxResizeCallback.call(this);\n      }\n    }\n  }, {\n    key: \"_killBrowserResizeTimer\",\n    value: function () {\n      if (this._browserResizeTimer > -1) {\n        clearTimeout(this._browserResizeTimer);\n      }\n\n      this._browserResizeTimer = -1;\n    }\n  }, {\n    key: \"isMobileScreenSize\",\n    value: function () {\n      if (void 0 === this._isMobileScreenSize) {\n        this._isMobileScreenSize = (0, _window.hasWindow)() && this.$element().outerWidth() < DIAGRAM_MAX_MOBILE_WINDOW_WIDTH;\n      }\n\n      return this._isMobileScreenSize;\n    }\n  }, {\n    key: \"_captureFocus\",\n    value: function () {\n      if (this._diagramInstance) {\n        this._diagramInstance.captureFocus();\n      }\n    }\n  }, {\n    key: \"_captureFocusOnTimeout\",\n    value: function () {\n      var _this2 = this;\n\n      this._captureFocusTimeout = setTimeout(function () {\n        _this2._captureFocus();\n\n        delete _this2._captureFocusTimeout;\n      }, 100);\n    }\n  }, {\n    key: \"_killCaptureFocusTimeout\",\n    value: function () {\n      if (this._captureFocusTimeout) {\n        clearTimeout(this._captureFocusTimeout);\n        delete this._captureFocusTimeout;\n      }\n    }\n  }, {\n    key: \"notifyBarCommandExecuted\",\n    value: function () {\n      this._captureFocusOnTimeout();\n    }\n  }, {\n    key: \"_registerToolbar\",\n    value: function (component) {\n      this._registerBar(component);\n\n      this._toolbars.push(component);\n    }\n  }, {\n    key: \"_registerBar\",\n    value: function (component) {\n      component.bar.onChanged.add(this);\n\n      this._diagramInstance.registerBar(component.bar);\n    }\n  }, {\n    key: \"_getExcludeCommands\",\n    value: function () {\n      var excludeCommands = [];\n\n      if (!this._isToolboxEnabled()) {\n        excludeCommands.push(_diagram4.default.SHOW_TOOLBOX_COMMAND_NAME);\n      }\n\n      if (!this._isPropertiesPanelEnabled()) {\n        excludeCommands.push(_diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME);\n      }\n\n      return excludeCommands;\n    }\n  }, {\n    key: \"_getToolbarBaseOptions\",\n    value: function () {\n      var _this3 = this;\n\n      return {\n        onContentReady: function (_ref) {\n          var component = _ref.component;\n          return _this3._registerToolbar(component);\n        },\n        onSubMenuVisibilityChanging: function (_ref2) {\n          var component = _ref2.component;\n          return _this3._diagramInstance.updateBarItemsState(component.bar);\n        },\n        onPointerUp: this._onPanelPointerUp.bind(this),\n        \"export\": this.option(\"export\"),\n        container: this.$element(),\n        excludeCommands: this._getExcludeCommands(),\n        onInternalCommand: this._onInternalCommand.bind(this),\n        onCustomCommand: this._onCustomCommand.bind(this),\n        isMobileView: this.isMobileScreenSize()\n      };\n    }\n  }, {\n    key: \"_onInternalCommand\",\n    value: function (e) {\n      switch (e.command) {\n        case _diagram4.default.SHOW_TOOLBOX_COMMAND_NAME:\n          if (this._toolbox) {\n            this._toolbox.toggle();\n          }\n\n          break;\n\n        case _diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME:\n          if (this._propertiesPanel) {\n            this._propertiesPanel.toggle();\n          }\n\n      }\n    }\n  }, {\n    key: \"_onCustomCommand\",\n    value: function (e) {\n      this._customCommandAction({\n        name: e.name\n      });\n    }\n  }, {\n    key: \"_renderMainToolbar\",\n    value: function () {\n      var $toolbarWrapper = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_TOOLBAR_WRAPPER_CLASS).appendTo(this.$element());\n      this._mainToolbar = this._createComponent($toolbarWrapper, _uiDiagram2.default, (0, _extend.extend)(this._getToolbarBaseOptions(), {\n        commands: this.option(\"mainToolbar.commands\"),\n        skipAdjustSize: true\n      }));\n    }\n  }, {\n    key: \"_isHistoryToolbarVisible\",\n    value: function () {\n      return this.option(\"historyToolbar.visible\") && !this.isReadOnlyMode();\n    }\n  }, {\n    key: \"_renderHistoryToolbar\",\n    value: function ($parent) {\n      var _this4 = this;\n\n      var isServerSide = !(0, _window.hasWindow)();\n      var $container = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS).appendTo($parent);\n      this._historyToolbar = this._createComponent($container, _uiDiagram3.default, (0, _extend.extend)(this._getToolbarBaseOptions(), {\n        commands: this.option(\"historyToolbar.commands\"),\n        locateInMenu: \"never\"\n      }));\n\n      this._updateHistoryToolbarPosition($container, $parent, isServerSide);\n\n      this._historyToolbarResizeCallback = function () {\n        _this4._historyToolbar.option(\"isMobileView\", _this4.isMobileScreenSize());\n      };\n    }\n  }, {\n    key: \"_updateHistoryToolbarPosition\",\n    value: function ($container, $parent, isServerSide) {\n      if (isServerSide) {\n        return;\n      }\n\n      _position.default.setup($container, {\n        my: \"left top\",\n        at: \"left top\",\n        of: $parent,\n        offset: DIAGRAM_FLOATING_PANEL_OFFSET + \" \" + DIAGRAM_FLOATING_PANEL_OFFSET\n      });\n    }\n  }, {\n    key: \"_isToolboxEnabled\",\n    value: function () {\n      return \"disabled\" !== this.option(\"toolbox.visibility\") && !this.isReadOnlyMode();\n    }\n  }, {\n    key: \"_isToolboxVisible\",\n    value: function () {\n      return \"visible\" === this.option(\"toolbox.visibility\") || \"auto\" === this.option(\"toolbox.visibility\") && !this.isMobileScreenSize();\n    }\n  }, {\n    key: \"_renderToolbox\",\n    value: function ($parent) {\n      var _this5 = this;\n\n      var isServerSide = !(0, _window.hasWindow)();\n      var $toolBox = (0, _renderer.default)(\"<div>\").appendTo($parent);\n\n      var bounds = this._getToolboxBounds($parent, isServerSide);\n\n      this._toolbox = this._createComponent($toolBox, _uiDiagram10.default, {\n        isMobileView: this.isMobileScreenSize(),\n        isVisible: this._isToolboxVisible(),\n        container: this.$element(),\n        height: bounds.height,\n        offsetParent: $parent,\n        offsetX: bounds.offsetX,\n        offsetY: bounds.offsetY,\n        showSearch: this.option(\"toolbox.showSearch\"),\n        toolboxGroups: this._getToolboxGroups(),\n        toolboxWidth: this.option(\"toolbox.width\"),\n        onShapeCategoryRendered: function (e) {\n          if (isServerSide) {\n            return;\n          }\n\n          _this5._diagramInstance.createToolbox(e.$element[0], \"texts\" === e.displayMode, e.shapes || e.category, {\n            shapeIconSpacing: DIAGRAM_TOOLBOX_SHAPE_SPACING,\n            shapeIconCountInRow: _this5.option(\"toolbox.shapeIconsPerRow\"),\n            shapeIconAttributes: {\n              \"data-toggle\": e.dataToggle\n            }\n          });\n        },\n        onFilterChanged: function (e) {\n          if (isServerSide) {\n            return;\n          }\n\n          _this5._diagramInstance.applyToolboxFilter(e.text, e.filteringToolboxes);\n        },\n        onVisibilityChanging: function (e) {\n          if (isServerSide) {\n            return;\n          }\n\n          _this5._setCustomCommandChecked(_diagram4.default.SHOW_TOOLBOX_COMMAND_NAME, e.visible);\n\n          if (_this5._propertiesPanel) {\n            if (e.visible && _this5.isMobileScreenSize()) {\n              _this5._propertiesPanel.hide();\n            }\n          }\n\n          if (_this5._historyToolbar) {\n            if (e.visible && _this5.isMobileScreenSize()) {\n              _this5._historyToolbarZIndex = zIndexPool.create(_ui2.default.baseZIndex());\n\n              _this5._historyToolbar.$element().css(\"zIndex\", _this5._historyToolbarZIndex);\n\n              _this5._historyToolbar.$element().css(\"boxShadow\", \"none\");\n            }\n          }\n\n          if (_this5._viewToolbar) {\n            _this5._viewToolbar.$element().css(\"opacity\", e.visible && _this5.isMobileScreenSize() ? \"0\" : \"1\");\n\n            _this5._viewToolbar.$element().css(\"pointerEvents\", e.visible && _this5.isMobileScreenSize() ? \"none\" : \"\");\n          }\n        },\n        onVisibilityChanged: function (e) {\n          if (!e.visible && !_this5._textInputStarted) {\n            _this5._captureFocus();\n          }\n\n          if (!isServerSide) {\n            if (_this5._historyToolbar) {\n              if (!e.visible && _this5.isMobileScreenSize() && _this5._historyToolbarZIndex) {\n                zIndexPool.remove(_this5._historyToolbarZIndex);\n\n                _this5._historyToolbar.$element().css(\"zIndex\", \"\");\n\n                _this5._historyToolbar.$element().css(\"boxShadow\", \"\");\n\n                _this5._historyToolbarZIndex = void 0;\n              }\n            }\n          }\n        },\n        onPointerUp: this._onPanelPointerUp.bind(this)\n      });\n\n      this._toolboxResizeCallback = function () {\n        var bounds = _this5._getToolboxBounds($parent, isServerSide);\n\n        _this5._toolbox.option(\"height\", bounds.height);\n\n        var prevIsMobileView = _this5._toolbox.option(\"isMobileView\");\n\n        if (prevIsMobileView !== _this5.isMobileScreenSize()) {\n          _this5._toolbox.option({\n            isMobileView: _this5.isMobileScreenSize(),\n            isVisible: _this5._isToolboxVisible()\n          });\n\n          _this5._setCustomCommandChecked(_diagram4.default.SHOW_TOOLBOX_COMMAND_NAME, _this5._isToolboxVisible());\n        }\n\n        _this5._toolbox.updateMaxHeight();\n      };\n    }\n  }, {\n    key: \"_getToolboxBounds\",\n    value: function ($parent, isServerSide) {\n      var result = {\n        offsetX: DIAGRAM_FLOATING_PANEL_OFFSET,\n        offsetY: DIAGRAM_FLOATING_PANEL_OFFSET,\n        height: !isServerSide ? $parent.height() - 2 * DIAGRAM_FLOATING_PANEL_OFFSET : 0\n      };\n\n      if (this._historyToolbar && !isServerSide) {\n        result.offsetY += this._historyToolbar.$element().outerHeight() + DIAGRAM_FLOATING_PANEL_OFFSET;\n        result.height -= this._historyToolbar.$element().outerHeight() + DIAGRAM_FLOATING_PANEL_OFFSET;\n      }\n\n      if (this._viewToolbar && !isServerSide) {\n        result.height -= this._viewToolbar.$element().outerHeight() + this._getViewToolbarYOffset(isServerSide);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_renderViewToolbar\",\n    value: function ($parent) {\n      var _this6 = this;\n\n      var isServerSide = !(0, _window.hasWindow)();\n      var $container = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS).appendTo($parent);\n      this._viewToolbar = this._createComponent($container, _uiDiagram4.default, (0, _extend.extend)(this._getToolbarBaseOptions(), {\n        commands: this.option(\"viewToolbar.commands\"),\n        locateInMenu: \"never\"\n      }));\n\n      this._updateViewToolbarPosition($container, $parent, isServerSide);\n\n      this._viewToolbarResizeCallback = function () {\n        _this6._updateViewToolbarPosition($container, $parent, isServerSide);\n      };\n    }\n  }, {\n    key: \"_getViewToolbarYOffset\",\n    value: function (isServerSide) {\n      if (isServerSide) {\n        return;\n      }\n\n      var result = DIAGRAM_FLOATING_PANEL_OFFSET;\n\n      if (this._viewToolbar && this._propertiesToolbar) {\n        result += (this._propertiesToolbar.$element().outerHeight() - this._viewToolbar.$element().outerHeight()) / 2;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_updateViewToolbarPosition\",\n    value: function ($container, $parent, isServerSide) {\n      if (isServerSide) {\n        return;\n      }\n\n      _position.default.setup($container, {\n        my: \"left bottom\",\n        at: \"left bottom\",\n        of: $parent,\n        offset: DIAGRAM_FLOATING_PANEL_OFFSET + \" -\" + this._getViewToolbarYOffset(isServerSide)\n      });\n    }\n  }, {\n    key: \"_isPropertiesPanelEnabled\",\n    value: function () {\n      return \"disabled\" !== this.option(\"propertiesPanel.visibility\") && !this.isReadOnlyMode();\n    }\n  }, {\n    key: \"_isPropertiesPanelVisible\",\n    value: function () {\n      return \"visible\" === this.option(\"propertiesPanel.visibility\");\n    }\n  }, {\n    key: \"_renderPropertiesToolbar\",\n    value: function ($parent) {\n      var _this7 = this;\n\n      var isServerSide = !(0, _window.hasWindow)();\n      var $container = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS).addClass(DIAGRAM_PROPERTIES_PANEL_TOOLBAR_CONTAINER_CLASS).appendTo($parent);\n      this._propertiesToolbar = this._createComponent($container, _uiDiagram5.default, (0, _extend.extend)(this._getToolbarBaseOptions(), {\n        buttonStylingMode: \"contained\",\n        buttonType: \"default\",\n        locateInMenu: \"never\"\n      }));\n\n      this._updatePropertiesToolbarPosition($container, $parent, isServerSide);\n\n      this._propertiesToolbarResizeCallback = function () {\n        _this7._updatePropertiesToolbarPosition($container, $parent, isServerSide);\n      };\n    }\n  }, {\n    key: \"_updatePropertiesToolbarPosition\",\n    value: function ($container, $parent, isServerSide) {\n      if (isServerSide) {\n        return;\n      }\n\n      _position.default.setup($container, {\n        my: \"right bottom\",\n        at: \"right bottom\",\n        of: $parent,\n        offset: \"-\" + DIAGRAM_FLOATING_PANEL_OFFSET + \" -\" + DIAGRAM_FLOATING_PANEL_OFFSET\n      });\n    }\n  }, {\n    key: \"_renderPropertiesPanel\",\n    value: function ($parent) {\n      var _this8 = this;\n\n      var isServerSide = !(0, _window.hasWindow)();\n      var $propertiesPanel = (0, _renderer.default)(\"<div>\").appendTo($parent);\n      var offsetX = DIAGRAM_FLOATING_PANEL_OFFSET;\n      var offsetY = 2 * DIAGRAM_FLOATING_PANEL_OFFSET + (!isServerSide ? this._propertiesToolbar.$element().outerHeight() : 0);\n      this._propertiesPanel = this._createComponent($propertiesPanel, _uiDiagram11.default, {\n        isMobileView: this.isMobileScreenSize(),\n        isVisible: this._isPropertiesPanelVisible(),\n        container: this.$element(),\n        offsetParent: $parent,\n        offsetX: offsetX,\n        offsetY: offsetY,\n        propertyTabs: this.option(\"propertiesPanel.tabs\"),\n        onCreateToolbar: function (e) {\n          e.toolbar = _this8._createComponent(e.$parent, _uiDiagram.default, (0, _extend.extend)(_this8._getToolbarBaseOptions(), {\n            commands: e.commands,\n            locateInMenu: \"never\",\n            editorStylingMode: \"outlined\"\n          }));\n        },\n        onVisibilityChanging: function (e) {\n          if (isServerSide) {\n            return;\n          }\n\n          _this8._updatePropertiesPanelGroupBars(e.component);\n\n          _this8._setCustomCommandChecked(_diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME, e.visible);\n\n          if (_this8._toolbox) {\n            if (e.visible && _this8.isMobileScreenSize()) {\n              _this8._toolbox.hide();\n            }\n          }\n        },\n        onVisibilityChanged: function (e) {\n          if (!e.visible && !_this8._textInputStarted) {\n            _this8._captureFocus();\n          }\n        },\n        onSelectedGroupChanged: function (_ref3) {\n          var component = _ref3.component;\n          return _this8._updatePropertiesPanelGroupBars(component);\n        },\n        onPointerUp: this._onPanelPointerUp.bind(this)\n      });\n\n      this._propertiesPanelResizeCallback = function () {\n        var prevIsMobileView = _this8._propertiesPanel.option(\"isMobileView\");\n\n        if (prevIsMobileView !== _this8.isMobileScreenSize()) {\n          _this8._propertiesPanel.option({\n            isMobileView: _this8.isMobileScreenSize(),\n            isVisible: _this8._isPropertiesPanelVisible()\n          });\n\n          _this8._setCustomCommandChecked(_diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME, _this8._isPropertiesPanelVisible());\n        }\n      };\n    }\n  }, {\n    key: \"_updatePropertiesPanelGroupBars\",\n    value: function (component) {\n      var _this9 = this;\n\n      component.getActiveToolbars().forEach(function (toolbar) {\n        _this9._diagramInstance.updateBarItemsState(toolbar.bar);\n      });\n    }\n  }, {\n    key: \"_onPanelPointerUp\",\n    value: function () {\n      this._captureFocusOnTimeout();\n    }\n  }, {\n    key: \"_renderContextMenu\",\n    value: function ($parent) {\n      var _this10 = this;\n\n      var $contextMenu = (0, _renderer.default)(\"<div>\").appendTo($parent);\n      this._contextMenu = this._createComponent($contextMenu, _uiDiagram6.default.DiagramContextMenuWrapper, {\n        commands: this.option(\"contextMenu.commands\"),\n        onContentReady: function (_ref4) {\n          var component = _ref4.component;\n          return _this10._registerBar(component);\n        },\n        onVisibilityChanging: function (_ref5) {\n          var component = _ref5.component;\n          return _this10._diagramInstance.updateBarItemsState(component.bar);\n        },\n        onItemClick: function (itemData) {\n          return _this10._onBeforeCommandExecuted(itemData.command);\n        },\n        \"export\": this.option(\"export\"),\n        excludeCommands: this._getExcludeCommands(),\n        onInternalCommand: this._onInternalCommand.bind(this),\n        onCustomCommand: this._onCustomCommand.bind(this)\n      });\n    }\n  }, {\n    key: \"_renderContextToolbox\",\n    value: function ($parent) {\n      var _this11 = this;\n\n      var isServerSide = !(0, _window.hasWindow)();\n      var category = this.option(\"contextToolbox.category\");\n      var displayMode = this.option(\"contextToolbox.displayMode\");\n      var shapes = this.option(\"contextToolbox.shapes\");\n      var $contextToolbox = (0, _renderer.default)(\"<div>\").appendTo($parent);\n      this._contextToolbox = this._createComponent($contextToolbox, _uiDiagram7.default, {\n        toolboxWidth: this.option(\"contextToolbox.width\"),\n        onShown: function (e) {\n          if (isServerSide) {\n            return;\n          }\n\n          var $toolboxContainer = (0, _renderer.default)(e.$element);\n          var isTextGroup = \"texts\" === displayMode;\n\n          if (!shapes && !category && !isTextGroup) {\n            var group = _this11._getToolboxGroups().filter(function (g) {\n              return g.category === e.category;\n            })[0];\n\n            if (group) {\n              isTextGroup = \"texts\" === group.displayMode;\n            }\n          }\n\n          _this11._diagramInstance.createContextToolbox($toolboxContainer[0], isTextGroup, shapes || category || e.category, {\n            shapeIconSpacing: DIAGRAM_CONTEXT_TOOLBOX_SHAPE_SPACING,\n            shapeIconCountInRow: _this11.option(\"contextToolbox.shapeIconsPerRow\")\n          }, function (shapeType) {\n            e.callback(shapeType);\n\n            _this11._captureFocus();\n\n            e.hide();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"_setCustomCommandChecked\",\n    value: function (command, checked) {\n      this._toolbars.forEach(function (tb) {\n        tb.setCommandChecked(command, checked);\n      });\n    }\n  }, {\n    key: \"_onBeforeCommandExecuted\",\n    value: function (command) {\n      var dialogParameters = _uiDiagram12.default.getDialogParameters(command);\n\n      if (dialogParameters) {\n        this._showDialog(dialogParameters);\n      }\n\n      return !!dialogParameters;\n    }\n  }, {\n    key: \"_renderDialog\",\n    value: function ($parent) {\n      var $dialogElement = (0, _renderer.default)(\"<div>\").appendTo($parent);\n      this._dialogInstance = this._createComponent($dialogElement, _uiDiagram8.default, {});\n    }\n  }, {\n    key: \"_showDialog\",\n    value: function (dialogParameters) {\n      if (this._dialogInstance) {\n        this._dialogInstance.option(\"onGetContent\", dialogParameters.onGetContent);\n\n        this._dialogInstance.option(\"onHidden\", function () {\n          this._captureFocus();\n        }.bind(this));\n\n        this._dialogInstance.option(\"command\", this._diagramInstance.getCommand(dialogParameters.command));\n\n        this._dialogInstance.option(\"title\", dialogParameters.title);\n\n        this._dialogInstance._show();\n      }\n    }\n  }, {\n    key: \"_showLoadingIndicator\",\n    value: function () {\n      this._loadingIndicator = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_LOADING_INDICATOR_CLASS);\n\n      this._createComponent(this._loadingIndicator, _load_indicator.default, {});\n\n      var $parent = this._$content || this.$element();\n      $parent.append(this._loadingIndicator);\n    }\n  }, {\n    key: \"_hideLoadingIndicator\",\n    value: function () {\n      if (!this._loadingIndicator) {\n        return;\n      }\n\n      this._loadingIndicator.remove();\n\n      this._loadingIndicator = null;\n    }\n  }, {\n    key: \"_initDiagram\",\n    value: function () {\n      var _getDiagram = (0, _diagram.getDiagram)(),\n          DiagramControl = _getDiagram.DiagramControl;\n\n      this._diagramInstance = new DiagramControl();\n      this._diagramInstance.onChanged = this._raiseDataChangeAction.bind(this);\n      this._diagramInstance.onEdgeInserted = this._raiseEdgeInsertedAction.bind(this);\n      this._diagramInstance.onEdgeUpdated = this._raiseEdgeUpdatedAction.bind(this);\n      this._diagramInstance.onEdgeRemoved = this._raiseEdgeRemovedAction.bind(this);\n      this._diagramInstance.onNodeInserted = this._raiseNodeInsertedAction.bind(this);\n      this._diagramInstance.onNodeUpdated = this._raiseNodeUpdatedAction.bind(this);\n      this._diagramInstance.onNodeRemoved = this._raiseNodeRemovedAction.bind(this);\n      this._diagramInstance.onToolboxDragStart = this._raiseToolboxDragStart.bind(this);\n      this._diagramInstance.onToolboxDragEnd = this._raiseToolboxDragEnd.bind(this);\n      this._diagramInstance.onTextInputStart = this._raiseTextInputStart.bind(this);\n      this._diagramInstance.onTextInputEnd = this._raiseTextInputEnd.bind(this);\n      this._diagramInstance.onToggleFullscreen = this._onToggleFullScreen.bind(this);\n      this._diagramInstance.onShowContextMenu = this._onShowContextMenu.bind(this);\n      this._diagramInstance.onHideContextMenu = this._onHideContextMenu.bind(this);\n      this._diagramInstance.onShowContextToolbox = this._onShowContextToolbox.bind(this);\n      this._diagramInstance.onHideContextToolbox = this._onHideContextToolbox.bind(this);\n\n      this._diagramInstance.onNativeAction.add({\n        notifyItemClick: this._raiseItemClickAction.bind(this),\n        notifyItemDblClick: this._raiseItemDblClickAction.bind(this),\n        notifySelectionChanged: this._raiseSelectionChanged.bind(this)\n      });\n\n      this._diagramInstance.onRequestOperation = this._raiseRequestEditOperation.bind(this);\n\n      this._updateEventSubscriptionMethods();\n\n      this._updateDefaultItemProperties();\n\n      this._updateEditingSettings();\n\n      this._updateShapeTexts();\n\n      this._updateUnitItems();\n\n      this._updateFormatUnitsMethod();\n\n      if (this.option(\"units\") !== DIAGRAM_DEFAULT_UNIT) {\n        this._updateUnitsState();\n      }\n\n      if (this.isReadOnlyMode()) {\n        this._updateReadOnlyState();\n      }\n\n      if (this.option(\"pageSize\")) {\n        if (this.option(\"pageSize.items\")) {\n          this._updatePageSizeItemsState();\n        }\n\n        if (this.option(\"pageSize.width\") && this.option(\"pageSize.height\")) {\n          this._updatePageSizeState();\n        }\n      }\n\n      if (this.option(\"pageOrientation\") !== DIAGRAM_DEFAULT_PAGE_ORIENTATION) {\n        this._updatePageOrientationState();\n      }\n\n      if (this.option(\"pageColor\") !== DIAGRAM_DEFAULT_PAGE_COLOR) {\n        this._updatePageColorState();\n      }\n\n      if (this.option(\"viewUnits\") !== DIAGRAM_DEFAULT_UNIT) {\n        this._updateViewUnitsState();\n      }\n\n      if (!this.option(\"showGrid\")) {\n        this._updateShowGridState();\n      }\n\n      if (!this.option(\"snapToGrid\")) {\n        this._updateSnapToGridState();\n      }\n\n      if (this.option(\"gridSize\")) {\n        if (this.option(\"gridSize.items\")) {\n          this._updateGridSizeItemsState();\n        }\n\n        this._updateGridSizeState();\n      }\n\n      if (this.option(\"zoomLevel.items\")) {\n        this._updateZoomLevelItemsState();\n      }\n\n      if (this.option(\"simpleView\")) {\n        this._updateSimpleViewState();\n      }\n\n      if (this.option(\"zoomLevel\") !== DIAGRAM_DEFAULT_ZOOMLEVEL) {\n        this._updateZoomLevelState();\n      }\n\n      if (this.option(\"autoZoomMode\") !== DIAGRAM_DEFAULT_AUTOZOOM_MODE) {\n        this._updateAutoZoomState();\n      }\n\n      if (this.option(\"fullScreen\")) {\n        var window = (0, _window.getWindow)();\n\n        if (window && window.self !== window.top) {\n          this.option(\"fullScreen\", false);\n        } else {\n          this._updateFullscreenState();\n        }\n      }\n\n      this.optionsUpdateBar = new _diagram3.default(this);\n\n      this._diagramInstance.registerBar(this.optionsUpdateBar);\n\n      if ((0, _window.hasWindow)()) {\n        this._diagramInstance.initMeasurer(this.$element()[0]);\n      }\n\n      this._updateCustomShapes(this._getCustomShapes());\n\n      this._refreshDataSources();\n    }\n  }, {\n    key: \"_clean\",\n    value: function () {\n      if (this._diagramInstance) {\n        this._diagramInstance.cleanMarkup(function (element) {\n          (0, _renderer.default)(element).empty();\n        });\n      }\n\n      _get(_getPrototypeOf(Diagram.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_dispose\",\n    value: function () {\n      this._killCaptureFocusTimeout();\n\n      _get(_getPrototypeOf(Diagram.prototype), \"_dispose\", this).call(this);\n\n      this._diagramInstance = void 0;\n    }\n  }, {\n    key: \"_executeDiagramCommand\",\n    value: function (command, parameter) {\n      this._diagramInstance.getCommand(command).execute(parameter);\n    }\n  }, {\n    key: \"getNodeDataSource\",\n    value: function () {\n      return this._nodesOption && this._nodesOption.getDataSource();\n    }\n  }, {\n    key: \"getEdgeDataSource\",\n    value: function () {\n      return this._edgesOption && this._edgesOption.getDataSource();\n    }\n  }, {\n    key: \"_refreshDataSources\",\n    value: function () {\n      this._beginUpdateDiagram();\n\n      this._refreshNodesDataSource();\n\n      this._refreshEdgesDataSource();\n\n      this._endUpdateDiagram();\n    }\n  }, {\n    key: \"_refreshNodesDataSource\",\n    value: function () {\n      if (this._nodesOption) {\n        this._nodesOption._disposeDataSource();\n\n        delete this._nodesOption;\n      }\n\n      if (this.option(\"nodes.dataSource\")) {\n        this._nodesOption = new _diagram5.default(this);\n\n        this._nodesOption.option(\"dataSource\", this.option(\"nodes.dataSource\"));\n\n        this._nodesOption._refreshDataSource();\n      }\n    }\n  }, {\n    key: \"_refreshEdgesDataSource\",\n    value: function () {\n      if (this._edgesOption) {\n        this._edgesOption._disposeDataSource();\n\n        delete this._edgesOption;\n      }\n\n      if (this.option(\"edges.dataSource\")) {\n        this._edgesOption = new _diagram6.default(this);\n\n        this._edgesOption.option(\"dataSource\", this.option(\"edges.dataSource\"));\n\n        this._edgesOption._refreshDataSource();\n      }\n    }\n  }, {\n    key: \"_getDiagramData\",\n    value: function () {\n      var value;\n\n      var _getDiagram2 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram2.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.Export, function (data) {\n        value = data;\n      });\n\n      return value;\n    }\n  }, {\n    key: \"_setDiagramData\",\n    value: function (data, keepExistingItems) {\n      var _getDiagram3 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram3.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.Import, {\n        data: data,\n        keepExistingItems: keepExistingItems\n      });\n    }\n  }, {\n    key: \"isReadOnlyMode\",\n    value: function () {\n      return this.option(\"readOnly\") || this.option(\"disabled\");\n    }\n  }, {\n    key: \"_onDataSourceChanged\",\n    value: function () {\n      this._bindDiagramData();\n    }\n  }, {\n    key: \"_getChangesKeys\",\n    value: function (changes) {\n      return changes.map(function (change) {\n        return change.internalKey || change.key;\n      }).filter(function (key) {\n        return !!key;\n      });\n    }\n  }, {\n    key: \"_createOptionGetter\",\n    value: function (optionName) {\n      var expr = this.option(optionName);\n      return expr && (0, _data.compileGetter)(expr);\n    }\n  }, {\n    key: \"_onRequestUpdateLayout\",\n    value: function (changes) {\n      if (!this._requestLayoutUpdateAction) {\n        this._createRequestLayoutUpdateAction();\n      }\n\n      var eventArgs = {\n        changes: changes,\n        allowed: false\n      };\n\n      this._requestLayoutUpdateAction(eventArgs);\n\n      return eventArgs.allowed;\n    }\n  }, {\n    key: \"_createOptionSetter\",\n    value: function (optionName) {\n      var expr = this.option(optionName);\n\n      if ((0, _type.isFunction)(expr)) {\n        return expr;\n      }\n\n      return expr && (0, _data.compileSetter)(expr);\n    }\n  }, {\n    key: \"_bindDiagramData\",\n    value: function () {\n      if (this._updateDiagramLockCount || !this._isBindingMode()) {\n        return;\n      }\n\n      var _getDiagram4 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram4.DiagramCommand,\n          ConnectorLineOption = _getDiagram4.ConnectorLineOption,\n          ConnectorLineEnding = _getDiagram4.ConnectorLineEnding;\n\n      var lineOptionGetter;\n      var lineOptionSetter;\n      var startLineEndingGetter;\n      var startLineEndingSetter;\n      var endLineEndingGetter;\n      var endLineEndingSetter;\n      var containerKeyGetter;\n      var containerKeySetter;\n      var data = {\n        nodeDataSource: this._nodesOption && this._nodesOption.getItems(),\n        edgeDataSource: this._edgesOption && this._edgesOption.getItems(),\n        nodeDataImporter: {\n          getKey: this._createOptionGetter(\"nodes.keyExpr\"),\n          setKey: this._createOptionSetter(\"nodes.keyExpr\"),\n          getCustomData: this._createOptionGetter(\"nodes.customDataExpr\"),\n          setCustomData: this._createOptionSetter(\"nodes.customDataExpr\"),\n          getLocked: this._createOptionGetter(\"nodes.lockedExpr\"),\n          setLocked: this._createOptionSetter(\"nodes.lockedExpr\"),\n          getStyle: this._createOptionGetter(\"nodes.styleExpr\"),\n          setStyle: this._createOptionSetter(\"nodes.styleExpr\"),\n          getStyleText: this._createOptionGetter(\"nodes.textStyleExpr\"),\n          setStyleText: this._createOptionSetter(\"nodes.textStyleExpr\"),\n          getZIndex: this._createOptionGetter(\"nodes.zIndexExpr\"),\n          setZIndex: this._createOptionSetter(\"nodes.zIndexExpr\"),\n          getType: this._createOptionGetter(\"nodes.typeExpr\"),\n          setType: this._createOptionSetter(\"nodes.typeExpr\"),\n          getText: this._createOptionGetter(\"nodes.textExpr\"),\n          setText: this._createOptionSetter(\"nodes.textExpr\"),\n          getImage: this._createOptionGetter(\"nodes.imageUrlExpr\"),\n          setImage: this._createOptionSetter(\"nodes.imageUrlExpr\"),\n          getLeft: this._createOptionGetter(\"nodes.leftExpr\"),\n          setLeft: this._createOptionSetter(\"nodes.leftExpr\"),\n          getTop: this._createOptionGetter(\"nodes.topExpr\"),\n          setTop: this._createOptionSetter(\"nodes.topExpr\"),\n          getWidth: this._createOptionGetter(\"nodes.widthExpr\"),\n          setWidth: this._createOptionSetter(\"nodes.widthExpr\"),\n          getHeight: this._createOptionGetter(\"nodes.heightExpr\"),\n          setHeight: this._createOptionSetter(\"nodes.heightExpr\"),\n          getParentKey: this._createOptionGetter(\"nodes.parentKeyExpr\"),\n          setParentKey: this._createOptionSetter(\"nodes.parentKeyExpr\"),\n          getItems: this._createOptionGetter(\"nodes.itemsExpr\"),\n          setItems: this._createOptionSetter(\"nodes.itemsExpr\"),\n          getContainerKey: containerKeyGetter = this._createOptionGetter(\"nodes.containerKeyExpr\"),\n          setContainerKey: containerKeySetter = this._createOptionSetter(\"nodes.containerKeyExpr\"),\n          getChildren: !containerKeyGetter && !containerKeySetter && this._createOptionGetter(\"nodes.containerChildrenExpr\"),\n          setChildren: !containerKeyGetter && !containerKeySetter && this._createOptionSetter(\"nodes.containerChildrenExpr\")\n        },\n        edgeDataImporter: {\n          getKey: this._createOptionGetter(\"edges.keyExpr\"),\n          setKey: this._createOptionSetter(\"edges.keyExpr\"),\n          getCustomData: this._createOptionGetter(\"edges.customDataExpr\"),\n          setCustomData: this._createOptionSetter(\"edges.customDataExpr\"),\n          getLocked: this._createOptionGetter(\"edges.lockedExpr\"),\n          setLocked: this._createOptionSetter(\"edges.lockedExpr\"),\n          getStyle: this._createOptionGetter(\"edges.styleExpr\"),\n          setStyle: this._createOptionSetter(\"edges.styleExpr\"),\n          getStyleText: this._createOptionGetter(\"edges.textStyleExpr\"),\n          setStyleText: this._createOptionSetter(\"edges.textStyleExpr\"),\n          getZIndex: this._createOptionGetter(\"edges.zIndexExpr\"),\n          setZIndex: this._createOptionSetter(\"edges.zIndexExpr\"),\n          getFrom: this._createOptionGetter(\"edges.fromExpr\"),\n          setFrom: this._createOptionSetter(\"edges.fromExpr\"),\n          getFromPointIndex: this._createOptionGetter(\"edges.fromPointIndexExpr\"),\n          setFromPointIndex: this._createOptionSetter(\"edges.fromPointIndexExpr\"),\n          getTo: this._createOptionGetter(\"edges.toExpr\"),\n          setTo: this._createOptionSetter(\"edges.toExpr\"),\n          getToPointIndex: this._createOptionGetter(\"edges.toPointIndexExpr\"),\n          setToPointIndex: this._createOptionSetter(\"edges.toPointIndexExpr\"),\n          getPoints: this._createOptionGetter(\"edges.pointsExpr\"),\n          setPoints: this._createOptionSetter(\"edges.pointsExpr\"),\n          getText: this._createOptionGetter(\"edges.textExpr\"),\n          setText: this._createOptionSetter(\"edges.textExpr\"),\n          getLineOption: (lineOptionGetter = this._createOptionGetter(\"edges.lineTypeExpr\")) && function (obj) {\n            var lineType = lineOptionGetter(obj);\n            return this._getConnectorLineOption(lineType);\n          }.bind(this),\n          setLineOption: (lineOptionSetter = this._createOptionSetter(\"edges.lineTypeExpr\")) && function (obj, value) {\n            switch (value) {\n              case ConnectorLineOption.Straight:\n                value = \"straight\";\n                break;\n\n              case ConnectorLineOption.Orthogonal:\n                value = \"orthogonal\";\n            }\n\n            lineOptionSetter(obj, value);\n          }.bind(this),\n          getStartLineEnding: (startLineEndingGetter = this._createOptionGetter(\"edges.fromLineEndExpr\")) && function (obj) {\n            var lineEnd = startLineEndingGetter(obj);\n            return this._getConnectorLineEnding(lineEnd);\n          }.bind(this),\n          setStartLineEnding: (startLineEndingSetter = this._createOptionSetter(\"edges.fromLineEndExpr\")) && function (obj, value) {\n            switch (value) {\n              case ConnectorLineEnding.Arrow:\n                value = \"arrow\";\n                break;\n\n              case ConnectorLineEnding.OutlinedTriangle:\n                value = \"outlinedTriangle\";\n                break;\n\n              case ConnectorLineEnding.FilledTriangle:\n                value = \"filledTriangle\";\n                break;\n\n              case ConnectorLineEnding.None:\n                value = \"none\";\n            }\n\n            startLineEndingSetter(obj, value);\n          }.bind(this),\n          getEndLineEnding: (endLineEndingGetter = this._createOptionGetter(\"edges.toLineEndExpr\")) && function (obj) {\n            var lineEnd = endLineEndingGetter(obj);\n            return this._getConnectorLineEnding(lineEnd);\n          }.bind(this),\n          setEndLineEnding: (endLineEndingSetter = this._createOptionSetter(\"edges.toLineEndExpr\")) && function (obj, value) {\n            switch (value) {\n              case ConnectorLineEnding.Arrow:\n                value = \"arrow\";\n                break;\n\n              case ConnectorLineEnding.OutlinedTriangle:\n                value = \"outlinedTriangle\";\n                break;\n\n              case ConnectorLineEnding.FilledTriangle:\n                value = \"filledTriangle\";\n                break;\n\n              case ConnectorLineEnding.None:\n                value = \"none\";\n            }\n\n            endLineEndingSetter(obj, value);\n          }.bind(this)\n        },\n        layoutParameters: this._getDataBindingLayoutParameters()\n      };\n\n      this._executeDiagramCommand(DiagramCommand.BindDocument, data);\n    }\n  }, {\n    key: \"_reloadContentByChanges\",\n    value: function (changes, isExternalChanges) {\n      var keys = this._getChangesKeys(changes);\n\n      var applyLayout = this._onRequestUpdateLayout(changes);\n\n      this._reloadContent(keys, applyLayout, isExternalChanges);\n    }\n  }, {\n    key: \"_reloadContent\",\n    value: function (itemKeys, applyLayout, isExternalChanges) {\n      var _this12 = this;\n\n      var getData = function () {\n        var nodeDataSource;\n        var edgeDataSource;\n\n        if (_this12._nodesOption && isExternalChanges) {\n          nodeDataSource = _this12._nodesOption.getItems();\n        }\n\n        if (_this12._edgesOption && isExternalChanges) {\n          edgeDataSource = _this12._edgesOption.getItems();\n        }\n\n        return {\n          nodeDataSource: nodeDataSource,\n          edgeDataSource: edgeDataSource\n        };\n      };\n\n      this._diagramInstance.reloadContent(itemKeys, getData, applyLayout && this._getDataBindingLayoutParameters(), isExternalChanges);\n    }\n  }, {\n    key: \"_getConnectorLineOption\",\n    value: function (lineType) {\n      var _getDiagram5 = (0, _diagram.getDiagram)(),\n          ConnectorLineOption = _getDiagram5.ConnectorLineOption;\n\n      switch (lineType) {\n        case \"straight\":\n          return ConnectorLineOption.Straight;\n\n        default:\n          return ConnectorLineOption.Orthogonal;\n      }\n    }\n  }, {\n    key: \"_getConnectorLineEnding\",\n    value: function (lineEnd) {\n      var _getDiagram6 = (0, _diagram.getDiagram)(),\n          ConnectorLineEnding = _getDiagram6.ConnectorLineEnding;\n\n      switch (lineEnd) {\n        case \"arrow\":\n          return ConnectorLineEnding.Arrow;\n\n        case \"outlinedTriangle\":\n          return ConnectorLineEnding.OutlinedTriangle;\n\n        case \"filledTriangle\":\n          return ConnectorLineEnding.FilledTriangle;\n\n        default:\n          return ConnectorLineEnding.None;\n      }\n    }\n  }, {\n    key: \"_getDataBindingLayoutParameters\",\n    value: function () {\n      var _getDiagram7 = (0, _diagram.getDiagram)(),\n          DataLayoutType = _getDiagram7.DataLayoutType,\n          DataLayoutOrientation = _getDiagram7.DataLayoutOrientation;\n\n      var layoutParametersOption = this.option(\"nodes.autoLayout\") || \"off\";\n      var layoutType = layoutParametersOption.type || layoutParametersOption;\n      var parameters = {};\n\n      if (\"off\" !== layoutType && (\"auto\" !== layoutType || !this._hasNodePositionExprs())) {\n        switch (layoutType) {\n          case \"tree\":\n            parameters.type = DataLayoutType.Tree;\n            break;\n\n          default:\n            parameters.type = DataLayoutType.Sugiyama;\n        }\n\n        switch (layoutParametersOption.orientation) {\n          case \"vertical\":\n            parameters.orientation = DataLayoutOrientation.Vertical;\n            break;\n\n          case \"horizontal\":\n            parameters.orientation = DataLayoutOrientation.Horizontal;\n        }\n\n        if (this.option(\"edges.fromPointIndexExpr\") || this.option(\"edges.toPointIndexExpr\")) {\n          parameters.skipPointIndices = true;\n        }\n      }\n\n      parameters.autoSizeEnabled = !!this.option(\"nodes.autoSizeEnabled\");\n      return parameters;\n    }\n  }, {\n    key: \"_hasNodePositionExprs\",\n    value: function () {\n      return this.option(\"nodes.topExpr\") && this.option(\"nodes.leftExpr\");\n    }\n  }, {\n    key: \"_getAutoZoomValue\",\n    value: function (option) {\n      var _getDiagram8 = (0, _diagram.getDiagram)(),\n          AutoZoomMode = _getDiagram8.AutoZoomMode;\n\n      switch (option) {\n        case \"fitContent\":\n          return AutoZoomMode.FitContent;\n\n        case \"fitWidth\":\n          return AutoZoomMode.FitToWidth;\n\n        default:\n          return AutoZoomMode.Disabled;\n      }\n    }\n  }, {\n    key: \"_isBindingMode\",\n    value: function () {\n      return this._nodesOption && this._nodesOption.hasItems() || this._edgesOption && this._nodesOption.hasItems();\n    }\n  }, {\n    key: \"_beginUpdateDiagram\",\n    value: function () {\n      this._updateDiagramLockCount++;\n    }\n  }, {\n    key: \"_endUpdateDiagram\",\n    value: function () {\n      this._updateDiagramLockCount = Math.max(this._updateDiagramLockCount - 1, 0);\n\n      if (!this._updateDiagramLockCount) {\n        this._bindDiagramData();\n      }\n    }\n  }, {\n    key: \"_getCustomShapes\",\n    value: function () {\n      return this.option(\"customShapes\") || [];\n    }\n  }, {\n    key: \"_getToolboxGroups\",\n    value: function () {\n      return _diagram2.default.getGroups(this.option(\"toolbox.groups\"));\n    }\n  }, {\n    key: \"_updateCustomShapes\",\n    value: function (customShapes, prevCustomShapes) {\n      var _this13 = this;\n\n      if (Array.isArray(prevCustomShapes)) {\n        this._diagramInstance.removeCustomShapes(prevCustomShapes.map(function (s) {\n          return s.type;\n        }));\n      }\n\n      if (Array.isArray(customShapes)) {\n        this._diagramInstance.addCustomShapes(customShapes.map(function (s) {\n          var templateOption = s.template || _this13.option(\"customShapeTemplate\");\n\n          var template = templateOption && _this13._getTemplate(templateOption);\n\n          var toolboxTemplateOption = s.toolboxTemplate || _this13.option(\"customShapeToolboxTemplate\");\n\n          var toolboxTemplate = toolboxTemplateOption && _this13._getTemplate(toolboxTemplateOption);\n\n          return {\n            category: s.category,\n            type: s.type,\n            baseType: s.baseType,\n            title: s.title,\n            svgUrl: s.backgroundImageUrl,\n            svgToolboxUrl: s.backgroundImageToolboxUrl,\n            svgLeft: s.backgroundImageLeft,\n            svgTop: s.backgroundImageTop,\n            svgWidth: s.backgroundImageWidth,\n            svgHeight: s.backgroundImageHeight,\n            defaultWidth: s.defaultWidth,\n            defaultHeight: s.defaultHeight,\n            toolboxWidthToHeightRatio: s.toolboxWidthToHeightRatio,\n            minWidth: s.minWidth,\n            minHeight: s.minHeight,\n            maxWidth: s.maxWidth,\n            maxHeight: s.maxHeight,\n            allowResize: s.allowResize,\n            defaultText: s.defaultText,\n            allowEditText: s.allowEditText,\n            textLeft: s.textLeft,\n            textTop: s.textTop,\n            textWidth: s.textWidth,\n            textHeight: s.textHeight,\n            defaultImageUrl: s.defaultImageUrl,\n            allowEditImage: s.allowEditImage,\n            imageLeft: s.imageLeft,\n            imageTop: s.imageTop,\n            imageWidth: s.imageWidth,\n            imageHeight: s.imageHeight,\n            connectionPoints: s.connectionPoints && s.connectionPoints.map(function (pt) {\n              return {\n                x: pt.x,\n                y: pt.y\n              };\n            }),\n            createTemplate: template && function (container, item) {\n              template.render({\n                model: _this13._nativeItemToDiagramItem(item),\n                container: (0, _element.getPublicElement)((0, _renderer.default)(container))\n              });\n            },\n            createToolboxTemplate: toolboxTemplate && function (container, item) {\n              toolboxTemplate.render({\n                model: _this13._nativeItemToDiagramItem(item),\n                container: (0, _element.getPublicElement)((0, _renderer.default)(container))\n              });\n            },\n            destroyTemplate: template && function (container) {\n              (0, _renderer.default)(container).empty();\n            },\n            templateLeft: s.templateLeft,\n            templateTop: s.templateTop,\n            templateWidth: s.templateWidth,\n            templateHeight: s.templateHeight,\n            keepRatioOnAutoSize: s.keepRatioOnAutoSize\n          };\n        }));\n      }\n    }\n  }, {\n    key: \"_onToggleFullScreen\",\n    value: function (fullScreen) {\n      if (this.toggleFullscreenLock > 0) {\n        return;\n      }\n\n      this._changeNativeFullscreen(fullScreen);\n\n      this.$element().toggleClass(DIAGRAM_FULLSCREEN_CLASS, fullScreen);\n\n      this._diagramInstance.updateLayout(true);\n\n      this._processDiagramResize();\n\n      if (this._toolbox) {\n        this._toolbox.repaint();\n      }\n\n      if (this._propertiesPanel) {\n        this._propertiesPanel.repaint();\n      }\n    }\n  }, {\n    key: \"_changeNativeFullscreen\",\n    value: function (setModeOn) {\n      var window = (0, _window.getWindow)();\n\n      if (window.self === window.top || setModeOn === this._inNativeFullscreen()) {\n        return;\n      }\n\n      if (setModeOn) {\n        this._subscribeFullscreenNativeChanged();\n      } else {\n        this._unsubscribeFullscreenNativeChanged();\n      }\n\n      this._setNativeFullscreen(setModeOn);\n    }\n  }, {\n    key: \"_setNativeFullscreen\",\n    value: function (on) {\n      var window = (0, _window.getWindow)();\n      var document = window.self.document;\n      var body = window.self.document.body;\n\n      if (on) {\n        if (body.requestFullscreen) {\n          body.requestFullscreen();\n        } else {\n          if (body.mozRequestFullscreen) {\n            body.mozRequestFullscreen();\n          } else {\n            if (body.webkitRequestFullscreen) {\n              body.webkitRequestFullscreen();\n            } else {\n              if (body.msRequestFullscreen) {\n                body.msRequestFullscreen();\n              }\n            }\n          }\n        }\n      } else {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else {\n          if (document.mozCancelFullscreen) {\n            document.mozCancelFullscreen();\n          } else {\n            if (document.webkitExitFullscreen) {\n              document.webkitExitFullscreen();\n            } else {\n              if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_inNativeFullscreen\",\n    value: function () {\n      var document = (0, _window.getWindow)().document;\n      var fullscreenElement = document.fullscreenElement || document.msFullscreenElement || document.webkitFullscreenElement;\n      var isInFullscreen = fullscreenElement === document.body || document.webkitIsFullscreen;\n      return !!isInFullscreen;\n    }\n  }, {\n    key: \"_subscribeFullscreenNativeChanged\",\n    value: function () {\n      var document = (0, _window.getWindow)().document;\n\n      var handler = this._onNativeFullscreenChangeHandler.bind(this);\n\n      _events_engine.default.on(document, FULLSCREEN_CHANGE_EVENT_NAME, handler);\n\n      _events_engine.default.on(document, IE_FULLSCREEN_CHANGE_EVENT_NAME, handler);\n\n      _events_engine.default.on(document, WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME, handler);\n\n      _events_engine.default.on(document, MOZ_FULLSCREEN_CHANGE_EVENT_NAME, handler);\n    }\n  }, {\n    key: \"_unsubscribeFullscreenNativeChanged\",\n    value: function () {\n      var document = (0, _window.getWindow)().document;\n\n      _events_engine.default.off(document, FULLSCREEN_CHANGE_EVENT_NAME);\n\n      _events_engine.default.off(document, IE_FULLSCREEN_CHANGE_EVENT_NAME);\n\n      _events_engine.default.off(document, WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME);\n\n      _events_engine.default.off(document, MOZ_FULLSCREEN_CHANGE_EVENT_NAME);\n    }\n  }, {\n    key: \"_onNativeFullscreenChangeHandler\",\n    value: function () {\n      if (!this._inNativeFullscreen()) {\n        this._unsubscribeFullscreenNativeChanged();\n\n        this.option(\"fullScreen\", false);\n      }\n    }\n  }, {\n    key: \"_executeDiagramFullscreenCommand\",\n    value: function (fullscreen) {\n      var _getDiagram9 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram9.DiagramCommand;\n\n      this.toggleFullscreenLock++;\n\n      this._executeDiagramCommand(DiagramCommand.Fullscreen, fullscreen);\n\n      this.toggleFullscreenLock--;\n    }\n  }, {\n    key: \"_onShowContextMenu\",\n    value: function (x, y, selection) {\n      if (this._contextMenu) {\n        this._contextMenu._show(x, y, selection);\n      }\n    }\n  }, {\n    key: \"_onHideContextMenu\",\n    value: function () {\n      if (this._contextMenu) {\n        this._contextMenu._hide();\n      }\n    }\n  }, {\n    key: \"_onShowContextToolbox\",\n    value: function (x, y, side, category, callback) {\n      if (this._contextToolbox) {\n        this._contextToolbox._show(x, y, side, category, callback);\n      }\n    }\n  }, {\n    key: \"_onHideContextToolbox\",\n    value: function () {\n      if (this._contextToolbox) {\n        this._contextToolbox._hide();\n      }\n    }\n  }, {\n    key: \"_getDiagramUnitValue\",\n    value: function (value) {\n      var _getDiagram10 = (0, _diagram.getDiagram)(),\n          DiagramUnit = _getDiagram10.DiagramUnit;\n\n      switch (value) {\n        case \"in\":\n          return DiagramUnit.In;\n\n        case \"cm\":\n          return DiagramUnit.Cm;\n\n        case \"px\":\n          return DiagramUnit.Px;\n\n        default:\n          return DiagramUnit.In;\n      }\n    }\n  }, {\n    key: \"_updateReadOnlyState\",\n    value: function () {\n      var _getDiagram11 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram11.DiagramCommand;\n\n      var readOnly = this.isReadOnlyMode();\n\n      this._executeDiagramCommand(DiagramCommand.ToggleReadOnly, readOnly);\n    }\n  }, {\n    key: \"_updateZoomLevelState\",\n    value: function () {\n      var zoomLevel = this.option(\"zoomLevel.value\");\n\n      if (!zoomLevel) {\n        zoomLevel = this.option(\"zoomLevel\");\n      }\n\n      var _getDiagram12 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram12.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ZoomLevel, zoomLevel);\n    }\n  }, {\n    key: \"_updateZoomLevelItemsState\",\n    value: function () {\n      var zoomLevelItems = this.option(\"zoomLevel.items\");\n\n      if (!Array.isArray(zoomLevelItems)) {\n        return;\n      }\n\n      var _getDiagram13 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram13.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ZoomLevelItems, zoomLevelItems);\n    }\n  }, {\n    key: \"_updateAutoZoomState\",\n    value: function () {\n      var _getDiagram14 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram14.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.SwitchAutoZoom, this._getAutoZoomValue(this.option(\"autoZoomMode\")));\n    }\n  }, {\n    key: \"_updateSimpleViewState\",\n    value: function () {\n      var _getDiagram15 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram15.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ToggleSimpleView, this.option(\"simpleView\"));\n    }\n  }, {\n    key: \"_updateFullscreenState\",\n    value: function () {\n      var fullscreen = this.option(\"fullScreen\");\n\n      this._executeDiagramFullscreenCommand(fullscreen);\n\n      this._onToggleFullScreen(fullscreen);\n    }\n  }, {\n    key: \"_updateShowGridState\",\n    value: function () {\n      var _getDiagram16 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram16.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ShowGrid, this.option(\"showGrid\"));\n    }\n  }, {\n    key: \"_updateSnapToGridState\",\n    value: function () {\n      var _getDiagram17 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram17.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.SnapToGrid, this.option(\"snapToGrid\"));\n    }\n  }, {\n    key: \"_updateGridSizeState\",\n    value: function () {\n      var gridSize = this.option(\"gridSize.value\");\n\n      if (!gridSize) {\n        gridSize = this.option(\"gridSize\");\n      }\n\n      var _getDiagram18 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram18.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.GridSize, gridSize);\n    }\n  }, {\n    key: \"_updateGridSizeItemsState\",\n    value: function () {\n      var gridSizeItems = this.option(\"gridSize.items\");\n\n      if (!Array.isArray(gridSizeItems)) {\n        return;\n      }\n\n      var _getDiagram19 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram19.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.GridSizeItems, gridSizeItems);\n    }\n  }, {\n    key: \"_updateUnitItems\",\n    value: function () {\n      var _getDiagram20 = (0, _diagram.getDiagram)(),\n          DiagramLocalizationService = _getDiagram20.DiagramLocalizationService;\n\n      var items = this._getUnitItems();\n\n      if (this._unitItems !== items) {\n        this._unitItems = items;\n        DiagramLocalizationService.unitItems = items;\n      }\n    }\n  }, {\n    key: \"_getUnitItems\",\n    value: function () {\n      var _getDiagram21 = (0, _diagram.getDiagram)(),\n          DiagramUnit = _getDiagram21.DiagramUnit;\n\n      var items = {};\n      items[DiagramUnit.In] = _message.default.format(\"dxDiagram-unitIn\");\n      items[DiagramUnit.Cm] = _message.default.format(\"dxDiagram-unitCm\");\n      items[DiagramUnit.Px] = _message.default.format(\"dxDiagram-unitPx\");\n      return items;\n    }\n  }, {\n    key: \"_updateFormatUnitsMethod\",\n    value: function () {\n      var _getDiagram22 = (0, _diagram.getDiagram)(),\n          DiagramLocalizationService = _getDiagram22.DiagramLocalizationService;\n\n      DiagramLocalizationService.formatUnit = function (value) {\n        return _number.default.format(value);\n      };\n    }\n  }, {\n    key: \"_updateViewUnitsState\",\n    value: function () {\n      var _getDiagram23 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram23.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ViewUnits, this._getDiagramUnitValue(this.option(\"viewUnits\")));\n    }\n  }, {\n    key: \"_updateUnitsState\",\n    value: function () {\n      var _getDiagram24 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram24.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.Units, this._getDiagramUnitValue(this.option(\"units\")));\n    }\n  }, {\n    key: \"_updatePageSizeState\",\n    value: function () {\n      var pageSize = this.option(\"pageSize\");\n\n      if (!pageSize || !pageSize.width || !pageSize.height) {\n        return;\n      }\n\n      var _getDiagram25 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram25.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.PageSize, pageSize);\n    }\n  }, {\n    key: \"_updatePageSizeItemsState\",\n    value: function () {\n      var pageSizeItems = this.option(\"pageSize.items\");\n\n      if (!Array.isArray(pageSizeItems)) {\n        return;\n      }\n\n      var _getDiagram26 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram26.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.PageSizeItems, pageSizeItems);\n    }\n  }, {\n    key: \"_updatePageOrientationState\",\n    value: function () {\n      var _getDiagram27 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram27.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.PageLandscape, \"landscape\" === this.option(\"pageOrientation\"));\n    }\n  }, {\n    key: \"_updatePageColorState\",\n    value: function () {\n      var _getDiagram28 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram28.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.PageColor, this.option(\"pageColor\"));\n    }\n  }, {\n    key: \"_updateShapeTexts\",\n    value: function () {\n      var _getDiagram29 = (0, _diagram.getDiagram)(),\n          DiagramLocalizationService = _getDiagram29.DiagramLocalizationService;\n\n      var texts = this._getShapeTexts();\n\n      if (this._shapeTexts !== texts) {\n        this._shapeTexts = texts;\n        DiagramLocalizationService.shapeTexts = texts;\n      }\n    }\n  }, {\n    key: \"_getShapeTexts\",\n    value: function () {\n      var _getDiagram30 = (0, _diagram.getDiagram)(),\n          ShapeTypes = _getDiagram30.ShapeTypes;\n\n      var texts = {};\n      texts[ShapeTypes.Text] = _message.default.format(\"dxDiagram-shapeText\");\n      texts[ShapeTypes.Rectangle] = _message.default.format(\"dxDiagram-shapeRectangle\");\n      texts[ShapeTypes.Ellipse] = _message.default.format(\"dxDiagram-shapeEllipse\");\n      texts[ShapeTypes.Cross] = _message.default.format(\"dxDiagram-shapeCross\");\n      texts[ShapeTypes.Triangle] = _message.default.format(\"dxDiagram-shapeTriangle\");\n      texts[ShapeTypes.Diamond] = _message.default.format(\"dxDiagram-shapeDiamond\");\n      texts[ShapeTypes.Heart] = _message.default.format(\"dxDiagram-shapeHeart\");\n      texts[ShapeTypes.Pentagon] = _message.default.format(\"dxDiagram-shapePentagon\");\n      texts[ShapeTypes.Hexagon] = _message.default.format(\"dxDiagram-shapeHexagon\");\n      texts[ShapeTypes.Octagon] = _message.default.format(\"dxDiagram-shapeOctagon\");\n      texts[ShapeTypes.Star] = _message.default.format(\"dxDiagram-shapeStar\");\n      texts[ShapeTypes.ArrowLeft] = _message.default.format(\"dxDiagram-shapeArrowLeft\");\n      texts[ShapeTypes.ArrowUp] = _message.default.format(\"dxDiagram-shapeArrowUp\");\n      texts[ShapeTypes.ArrowRight] = _message.default.format(\"dxDiagram-shapeArrowRight\");\n      texts[ShapeTypes.ArrowDown] = _message.default.format(\"dxDiagram-shapeArrowDown\");\n      texts[ShapeTypes.ArrowUpDown] = _message.default.format(\"dxDiagram-shapeArrowUpDown\");\n      texts[ShapeTypes.ArrowLeftRight] = _message.default.format(\"dxDiagram-shapeArrowLeftRight\");\n      texts[ShapeTypes.Process] = _message.default.format(\"dxDiagram-shapeProcess\");\n      texts[ShapeTypes.Decision] = _message.default.format(\"dxDiagram-shapeDecision\");\n      texts[ShapeTypes.Terminator] = _message.default.format(\"dxDiagram-shapeTerminator\");\n      texts[ShapeTypes.PredefinedProcess] = _message.default.format(\"dxDiagram-shapePredefinedProcess\");\n      texts[ShapeTypes.Document] = _message.default.format(\"dxDiagram-shapeDocument\");\n      texts[ShapeTypes.MultipleDocuments] = _message.default.format(\"dxDiagram-shapeMultipleDocuments\");\n      texts[ShapeTypes.ManualInput] = _message.default.format(\"dxDiagram-shapeManualInput\");\n      texts[ShapeTypes.Preparation] = _message.default.format(\"dxDiagram-shapePreparation\");\n      texts[ShapeTypes.Data] = _message.default.format(\"dxDiagram-shapeData\");\n      texts[ShapeTypes.Database] = _message.default.format(\"dxDiagram-shapeDatabase\");\n      texts[ShapeTypes.HardDisk] = _message.default.format(\"dxDiagram-shapeHardDisk\");\n      texts[ShapeTypes.InternalStorage] = _message.default.format(\"dxDiagram-shapeInternalStorage\");\n      texts[ShapeTypes.PaperTape] = _message.default.format(\"dxDiagram-shapePaperTape\");\n      texts[ShapeTypes.ManualOperation] = _message.default.format(\"dxDiagram-shapeManualOperation\");\n      texts[ShapeTypes.Delay] = _message.default.format(\"dxDiagram-shapeDelay\");\n      texts[ShapeTypes.StoredData] = _message.default.format(\"dxDiagram-shapeStoredData\");\n      texts[ShapeTypes.Display] = _message.default.format(\"dxDiagram-shapeDisplay\");\n      texts[ShapeTypes.Merge] = _message.default.format(\"dxDiagram-shapeMerge\");\n      texts[ShapeTypes.Connector] = _message.default.format(\"dxDiagram-shapeConnector\");\n      texts[ShapeTypes.Or] = _message.default.format(\"dxDiagram-shapeOr\");\n      texts[ShapeTypes.SummingJunction] = _message.default.format(\"dxDiagram-shapeSummingJunction\");\n      texts[ShapeTypes.Container] = _message.default.format(\"dxDiagram-shapeContainerDefaultText\");\n      texts[ShapeTypes.VerticalContainer] = _message.default.format(\"dxDiagram-shapeVerticalContainer\");\n      texts[ShapeTypes.HorizontalContainer] = _message.default.format(\"dxDiagram-shapeHorizontalContainer\");\n      texts[ShapeTypes.Card] = _message.default.format(\"dxDiagram-shapeCardDefaultText\");\n      texts[ShapeTypes.CardWithImageOnLeft] = _message.default.format(\"dxDiagram-shapeCardWithImageOnLeft\");\n      texts[ShapeTypes.CardWithImageOnTop] = _message.default.format(\"dxDiagram-shapeCardWithImageOnTop\");\n      texts[ShapeTypes.CardWithImageOnRight] = _message.default.format(\"dxDiagram-shapeCardWithImageOnRight\");\n      return texts;\n    }\n  }, {\n    key: \"_updateEventSubscriptionMethods\",\n    value: function () {\n      var _getDiagram31 = (0, _diagram.getDiagram)(),\n          RenderHelper = _getDiagram31.RenderHelper;\n\n      RenderHelper.addEventListener = function (element, eventName, handler) {\n        _events_engine.default.on(element, eventName, handler);\n      };\n\n      RenderHelper.removeEventListener = function (element, eventName, handler) {\n        _events_engine.default.off(element, eventName, handler);\n      };\n    }\n  }, {\n    key: \"_updateDefaultItemProperties\",\n    value: function () {\n      if (this.option(\"defaultItemProperties.style\")) {\n        this._diagramInstance.setInitialStyleProperties(this.option(\"defaultItemProperties.style\"));\n      }\n\n      if (this.option(\"defaultItemProperties.textStyle\")) {\n        this._diagramInstance.setInitialTextStyleProperties(this.option(\"defaultItemProperties.textStyle\"));\n      }\n\n      this._diagramInstance.setInitialConnectorProperties({\n        lineOption: this._getConnectorLineOption(this.option(\"defaultItemProperties.connectorLineType\")),\n        startLineEnding: this._getConnectorLineEnding(this.option(\"defaultItemProperties.connectorLineStart\")),\n        endLineEnding: this._getConnectorLineEnding(this.option(\"defaultItemProperties.connectorLineEnd\"))\n      });\n\n      this._diagramInstance.applyShapeSizeSettings({\n        shapeMinWidth: this.option(\"defaultItemProperties.shapeMinWidth\"),\n        shapeMaxWidth: this.option(\"defaultItemProperties.shapeMaxWidth\"),\n        shapeMinHeight: this.option(\"defaultItemProperties.shapeMinHeight\"),\n        shapeMaxHeight: this.option(\"defaultItemProperties.shapeMaxHeight\")\n      });\n    }\n  }, {\n    key: \"_updateEditingSettings\",\n    value: function () {\n      this._diagramInstance.applyOperationSettings({\n        addShape: this.option(\"editing.allowAddShape\"),\n        addShapeFromToolbox: this.option(\"editing.allowAddShape\"),\n        deleteShape: this.option(\"editing.allowDeleteShape\"),\n        deleteConnector: this.option(\"editing.allowDeleteConnector\"),\n        changeConnection: this.option(\"editing.allowChangeConnection\"),\n        changeConnectorPoints: this.option(\"editing.allowChangeConnectorPoints\"),\n        changeShapeText: this.option(\"editing.allowChangeShapeText\"),\n        changeConnectorText: this.option(\"editing.allowChangeConnectorText\"),\n        resizeShape: this.option(\"editing.allowResizeShape\"),\n        moveShape: this.option(\"editing.allowMoveShape\")\n      });\n    }\n  }, {\n    key: \"focus\",\n    value: function () {\n      this._captureFocus();\n    }\n  }, {\n    key: \"export\",\n    value: function () {\n      return this._getDiagramData();\n    }\n  }, {\n    key: \"exportTo\",\n    value: function (format, callback) {\n      var command = this._getDiagramExportToCommand(format);\n\n      this._executeDiagramCommand(command, callback);\n    }\n  }, {\n    key: \"_getDiagramExportToCommand\",\n    value: function (format) {\n      var _getDiagram32 = (0, _diagram.getDiagram)(),\n          DiagramCommand = _getDiagram32.DiagramCommand;\n\n      switch (format) {\n        case \"png\":\n          return DiagramCommand.ExportPng;\n\n        case \"jpg\":\n          return DiagramCommand.ExportJpg;\n\n        default:\n          return DiagramCommand.ExportSvg;\n      }\n    }\n  }, {\n    key: \"import\",\n    value: function (data, updateExistingItemsOnly) {\n      this._setDiagramData(data, updateExistingItemsOnly);\n\n      this._raiseDataChangeAction();\n    }\n  }, {\n    key: \"updateToolbox\",\n    value: function () {\n      this._diagramInstance && this._diagramInstance.refreshToolbox();\n      this._toolbox && this._toolbox.updateMaxHeight();\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function () {\n      return (0, _extend.extend)(_get(_getPrototypeOf(Diagram.prototype), \"_getDefaultOptions\", this).call(this), {\n        readOnly: false,\n        zoomLevel: DIAGRAM_DEFAULT_ZOOMLEVEL,\n        simpleView: false,\n        autoZoomMode: DIAGRAM_DEFAULT_AUTOZOOM_MODE,\n        fullScreen: false,\n        showGrid: true,\n        snapToGrid: true,\n        units: DIAGRAM_DEFAULT_UNIT,\n        viewUnits: DIAGRAM_DEFAULT_UNIT,\n        pageOrientation: DIAGRAM_DEFAULT_PAGE_ORIENTATION,\n        pageColor: DIAGRAM_DEFAULT_PAGE_COLOR,\n        hasChanges: false,\n        nodes: {\n          dataSource: null,\n          keyExpr: \"id\",\n          customDataExpr: void 0,\n          lockedExpr: void 0,\n          styleExpr: void 0,\n          textStyleExpr: void 0,\n          zIndexExpr: void 0,\n          typeExpr: \"type\",\n          textExpr: \"text\",\n          imageUrlExpr: void 0,\n          parentKeyExpr: void 0,\n          itemsExpr: void 0,\n          leftExpr: void 0,\n          topExpr: void 0,\n          widthExpr: void 0,\n          heightExpr: void 0,\n          containerKeyExpr: void 0,\n          containerChildrenExpr: \"children\",\n          autoLayout: \"auto\",\n          autoSizeEnabled: true\n        },\n        edges: {\n          dataSource: null,\n          keyExpr: \"id\",\n          customDataExpr: void 0,\n          lockedExpr: void 0,\n          styleExpr: void 0,\n          textStyleExpr: void 0,\n          zIndexExpr: void 0,\n          fromExpr: \"from\",\n          fromPointIndexExpr: void 0,\n          toExpr: \"to\",\n          toPointIndexExpr: void 0,\n          pointsExpr: void 0,\n          textExpr: void 0,\n          lineTypeExpr: void 0,\n          fromLineEndExpr: void 0,\n          toLineEndExpr: void 0\n        },\n        customShapes: [],\n        toolbox: {\n          visibility: \"auto\",\n          shapeIconsPerRow: DIAGRAM_TOOLBOX_SHAPES_PER_ROW,\n          showSearch: true\n        },\n        mainToolbar: {\n          visible: false\n        },\n        historyToolbar: {\n          visible: true\n        },\n        viewToolbar: {\n          visible: true\n        },\n        contextMenu: {\n          enabled: true\n        },\n        contextToolbox: {\n          enabled: true,\n          shapeIconsPerRow: DIAGRAM_CONTEXT_TOOLBOX_SHAPES_PER_ROW,\n          width: DIAGRAM_CONTEXT_TOOLBOX_DEFAULT_WIDTH\n        },\n        propertiesPanel: {\n          visibility: \"auto\"\n        },\n        defaultItemProperties: {\n          connectorLineType: \"orthogonal\",\n          connectorLineStart: \"none\",\n          connectorLineEnd: \"arrow\"\n        },\n        editing: {\n          allowAddShape: true,\n          allowDeleteShape: true,\n          allowDeleteConnector: true,\n          allowChangeConnection: true,\n          allowChangeConnectorPoints: true,\n          allowChangeShapeText: true,\n          allowChangeConnectorText: true,\n          allowResizeShape: true,\n          allowMoveShape: true\n        },\n        \"export\": {\n          fileName: \"Diagram\",\n          proxyUrl: void 0\n        },\n        onItemClick: null,\n        onItemDblClick: null,\n        onSelectionChanged: null,\n        onRequestEditOperation: null,\n        onRequestLayoutUpdate: null\n      });\n    }\n  }, {\n    key: \"_raiseDataChangeAction\",\n    value: function () {\n      if (this._initialized) {\n        this.option(\"hasChanges\", true);\n      }\n    }\n  }, {\n    key: \"_raiseEdgeInsertedAction\",\n    value: function (data, callback, errorCallback) {\n      if (this._edgesOption) {\n        this._edgesOption.insert(data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseEdgeUpdatedAction\",\n    value: function (key, data, callback, errorCallback) {\n      if (this._edgesOption) {\n        this._edgesOption.update(key, data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseEdgeRemovedAction\",\n    value: function (key, data, callback, errorCallback) {\n      if (this._edgesOption) {\n        this._edgesOption.remove(key, data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseNodeInsertedAction\",\n    value: function (data, callback, errorCallback) {\n      if (this._nodesOption) {\n        this._nodesOption.insert(data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseNodeUpdatedAction\",\n    value: function (key, data, callback, errorCallback) {\n      if (this._nodesOption) {\n        this._nodesOption.update(key, data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseNodeRemovedAction\",\n    value: function (key, data, callback, errorCallback) {\n      if (this._nodesOption) {\n        this._nodesOption.remove(key, data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseToolboxDragStart\",\n    value: function () {\n      if (this._toolbox) {\n        this._toolbox._raiseToolboxDragStart();\n\n        if (this.isMobileScreenSize()) {\n          this._toolbox.hide();\n\n          this._toolboxDragHidden = true;\n        }\n      }\n    }\n  }, {\n    key: \"_raiseToolboxDragEnd\",\n    value: function () {\n      if (this._toolbox) {\n        this._toolbox._raiseToolboxDragEnd();\n\n        if (this._toolboxDragHidden) {\n          this._toolbox.show();\n\n          delete this._toolboxDragHidden;\n        }\n      }\n    }\n  }, {\n    key: \"_raiseTextInputStart\",\n    value: function () {\n      this._textInputStarted = true;\n\n      if (this._propertiesPanel) {\n        if (this.isMobileScreenSize() && this._propertiesPanel.isVisible()) {\n          this._propertiesPanel.hide();\n\n          this._propertiesPanelTextInputHidden = true;\n        }\n      }\n\n      if (this._toolbox) {\n        if (this.isMobileScreenSize() && this._toolbox.isVisible()) {\n          this._toolbox.hide();\n\n          this._toolboxTextInputHidden = true;\n        }\n      }\n    }\n  }, {\n    key: \"_raiseTextInputEnd\",\n    value: function () {\n      if (this._propertiesPanel) {\n        if (this._propertiesPanelTextInputHidden) {\n          this._propertiesPanel.show();\n\n          delete this._propertiesPanelTextInputHidden;\n        }\n      }\n\n      if (this._toolbox) {\n        if (this._toolboxTextInputHidden) {\n          this._toolbox.show();\n\n          delete this._toolboxTextInputHidden;\n        }\n      }\n\n      this._textInputStarted = false;\n    }\n  }, {\n    key: \"_createItemClickAction\",\n    value: function () {\n      this._itemClickAction = this._createActionByOption(\"onItemClick\");\n    }\n  }, {\n    key: \"_createItemDblClickAction\",\n    value: function () {\n      this._itemDblClickAction = this._createActionByOption(\"onItemDblClick\");\n    }\n  }, {\n    key: \"_createSelectionChangedAction\",\n    value: function () {\n      this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\");\n    }\n  }, {\n    key: \"_createRequestEditOperationAction\",\n    value: function () {\n      this._requestEditOperationAction = this._createActionByOption(\"onRequestEditOperation\");\n    }\n  }, {\n    key: \"_createRequestLayoutUpdateAction\",\n    value: function () {\n      this._requestLayoutUpdateAction = this._createActionByOption(\"onRequestLayoutUpdate\");\n    }\n  }, {\n    key: \"_createCustomCommand\",\n    value: function () {\n      this._customCommandAction = this._createActionByOption(\"onCustomCommand\");\n    }\n  }, {\n    key: \"_raiseItemClickAction\",\n    value: function (nativeItem) {\n      if (!this._itemClickAction) {\n        this._createItemClickAction();\n      }\n\n      this._itemClickAction({\n        item: this._nativeItemToDiagramItem(nativeItem)\n      });\n    }\n  }, {\n    key: \"_raiseItemDblClickAction\",\n    value: function (nativeItem) {\n      if (!this._itemDblClickAction) {\n        this._createItemDblClickAction();\n      }\n\n      this._itemDblClickAction({\n        item: this._nativeItemToDiagramItem(nativeItem)\n      });\n    }\n  }, {\n    key: \"_raiseSelectionChanged\",\n    value: function (nativeItems) {\n      if (!this._selectionChangedAction) {\n        this._createSelectionChangedAction();\n      }\n\n      this._selectionChangedAction({\n        items: nativeItems.map(this._nativeItemToDiagramItem.bind(this))\n      });\n    }\n  }, {\n    key: \"_raiseRequestEditOperation\",\n    value: function (operation, args) {\n      if (!this._requestEditOperationAction) {\n        this._createRequestEditOperationAction();\n      }\n\n      var eventArgs = this._getRequestEditOperationEventArgs(operation, args);\n\n      this._requestEditOperationAction(eventArgs);\n\n      args.allowed = eventArgs.allowed;\n    }\n  }, {\n    key: \"_getModelOperation\",\n    value: function (operation) {\n      var _getDiagram33 = (0, _diagram.getDiagram)(),\n          DiagramModelOperation = _getDiagram33.DiagramModelOperation;\n\n      switch (operation) {\n        case DiagramModelOperation.AddShape:\n          return \"addShape\";\n\n        case DiagramModelOperation.AddShapeFromToolbox:\n          return \"addShapeFromToolbox\";\n\n        case DiagramModelOperation.DeleteShape:\n          return \"deleteShape\";\n\n        case DiagramModelOperation.DeleteConnector:\n          return \"deleteConnector\";\n\n        case DiagramModelOperation.ChangeConnection:\n          return \"changeConnection\";\n\n        case DiagramModelOperation.ChangeConnectorPoints:\n          return \"changeConnectorPoints\";\n\n        case DiagramModelOperation.BeforeChangeShapeText:\n          return \"beforeChangeShapeText\";\n\n        case DiagramModelOperation.ChangeShapeText:\n          return \"changeShapeText\";\n\n        case DiagramModelOperation.BeforeChangeConnectorText:\n          return \"beforeChangeConnectorText\";\n\n        case DiagramModelOperation.ChangeConnectorText:\n          return \"changeConnectorText\";\n\n        case DiagramModelOperation.ResizeShape:\n          return \"resizeShape\";\n\n        case DiagramModelOperation.MoveShape:\n          return \"moveShape\";\n      }\n    }\n  }, {\n    key: \"_getRequestEditOperationEventArgs\",\n    value: function (operation, args) {\n      var _getDiagram34 = (0, _diagram.getDiagram)(),\n          DiagramModelOperation = _getDiagram34.DiagramModelOperation,\n          ConnectorPosition = _getDiagram34.ConnectorPosition;\n\n      var eventArgs = {\n        operation: this._getModelOperation(operation),\n        allowed: args.allowed,\n        updateUI: args.updateUI,\n        reason: args.updateUI ? \"checkUIElementAvailability\" : \"modelModification\"\n      };\n\n      switch (operation) {\n        case DiagramModelOperation.AddShape:\n          eventArgs.args = {\n            shape: args.shape && this._nativeItemToDiagramItem(args.shape),\n            position: args.position && {\n              x: args.position.x,\n              y: args.position.y\n            }\n          };\n          break;\n\n        case DiagramModelOperation.AddShapeFromToolbox:\n          eventArgs.args = {\n            shapeType: args.shapeType\n          };\n          break;\n\n        case DiagramModelOperation.DeleteShape:\n          eventArgs.args = {\n            shape: args.shape && this._nativeItemToDiagramItem(args.shape)\n          };\n          break;\n\n        case DiagramModelOperation.DeleteConnector:\n          eventArgs.args = {\n            connector: args.connector && this._nativeItemToDiagramItem(args.connector)\n          };\n          break;\n\n        case DiagramModelOperation.ChangeConnection:\n          eventArgs.args = {\n            newShape: args.shape && this._nativeItemToDiagramItem(args.shape),\n            oldShape: args.oldShape && this._nativeItemToDiagramItem(args.oldShape),\n            connector: args.connector && this._nativeItemToDiagramItem(args.connector),\n            connectionPointIndex: args.connectionPointIndex,\n            connectorPosition: args.position === ConnectorPosition.Begin ? \"start\" : \"end\"\n          };\n          break;\n\n        case DiagramModelOperation.ChangeConnectorPoints:\n          eventArgs.args = {\n            connector: args.connector && this._nativeItemToDiagramItem(args.connector),\n            newPoints: args.points && args.points.map(function (pt) {\n              return {\n                x: pt.x,\n                y: pt.y\n              };\n            }),\n            oldPoints: args.oldPoints && args.oldPoints.map(function (pt) {\n              return {\n                x: pt.x,\n                y: pt.y\n              };\n            })\n          };\n          break;\n\n        case DiagramModelOperation.BeforeChangeShapeText:\n          eventArgs.args = {\n            shape: args.shape && this._nativeItemToDiagramItem(args.shape)\n          };\n          break;\n\n        case DiagramModelOperation.ChangeShapeText:\n          eventArgs.args = {\n            shape: args.shape && this._nativeItemToDiagramItem(args.shape),\n            text: args.text\n          };\n          break;\n\n        case DiagramModelOperation.BeforeChangeConnectorText:\n          eventArgs.args = {\n            connector: args.connector && this._nativeItemToDiagramItem(args.connector),\n            index: args.index\n          };\n          break;\n\n        case DiagramModelOperation.ChangeConnectorText:\n          eventArgs.args = {\n            connector: args.connector && this._nativeItemToDiagramItem(args.connector),\n            index: args.index,\n            text: args.text\n          };\n          break;\n\n        case DiagramModelOperation.ResizeShape:\n          eventArgs.args = {\n            shape: args.shape && this._nativeItemToDiagramItem(args.shape),\n            newSize: args.size && {\n              width: args.size.width,\n              height: args.size.height\n            },\n            oldSize: args.oldSize && {\n              width: args.oldSize.width,\n              height: args.oldSize.height\n            }\n          };\n          break;\n\n        case DiagramModelOperation.MoveShape:\n          eventArgs.args = {\n            shape: args.shape && this._nativeItemToDiagramItem(args.shape),\n            newPosition: args.position && {\n              x: args.position.x,\n              y: args.position.y\n            },\n            oldPosition: args.oldPosition && {\n              x: args.oldPosition.x,\n              y: args.oldPosition.y\n            }\n          };\n      }\n\n      return eventArgs;\n    }\n  }, {\n    key: \"_nativeItemToDiagramItem\",\n    value: function (nativeItem) {\n      var _getDiagram35 = (0, _diagram.getDiagram)(),\n          NativeShape = _getDiagram35.NativeShape;\n\n      var createMethod = nativeItem instanceof NativeShape ? this._nativeShapeToDiagramShape.bind(this) : this._nativeConnectorToDiagramConnector.bind(this);\n      return (0, _extend.extend)({\n        id: nativeItem.id,\n        key: nativeItem.key,\n        dataItem: void 0\n      }, createMethod(nativeItem));\n    }\n  }, {\n    key: \"_nativeShapeToDiagramShape\",\n    value: function (nativeShape) {\n      return {\n        dataItem: this._nodesOption && this._nodesOption.findItem(nativeShape.key),\n        itemType: \"shape\",\n        text: nativeShape.text,\n        type: nativeShape.type,\n        position: {\n          x: nativeShape.position.x,\n          y: nativeShape.position.y\n        },\n        size: {\n          width: nativeShape.size.width,\n          height: nativeShape.size.height\n        },\n        attachedConnectorIds: nativeShape.attachedConnectorIds\n      };\n    }\n  }, {\n    key: \"_nativeConnectorToDiagramConnector\",\n    value: function (nativeConnector) {\n      return {\n        dataItem: this._edgesOption && this._edgesOption.findItem(nativeConnector.key),\n        itemType: \"connector\",\n        texts: nativeConnector.texts,\n        fromKey: nativeConnector.fromKey,\n        toKey: nativeConnector.toKey,\n        fromId: nativeConnector.fromId,\n        fromPointIndex: nativeConnector.fromPointIndex,\n        toId: nativeConnector.toId,\n        toPointIndex: nativeConnector.toPointIndex,\n        points: nativeConnector.points.map(function (pt) {\n          return {\n            x: pt.x,\n            y: pt.y\n          };\n        })\n      };\n    }\n  }, {\n    key: \"getItemByKey\",\n    value: function (key) {\n      var nativeItem = this._diagramInstance && this._diagramInstance.getNativeItemByDataKey(key);\n\n      return nativeItem && this._nativeItemToDiagramItem(nativeItem);\n    }\n  }, {\n    key: \"getItemById\",\n    value: function (id) {\n      var nativeItem = this._diagramInstance && this._diagramInstance.getNativeItemByKey(id);\n\n      return nativeItem && this._nativeItemToDiagramItem(nativeItem);\n    }\n  }, {\n    key: \"_invalidateContextMenuCommands\",\n    value: function () {\n      if (this._contextMenu) {\n        this._contextMenu.option({\n          commands: this.option(\"contextMenu.commands\")\n        });\n      }\n    }\n  }, {\n    key: \"_invalidatePropertiesPanelTabs\",\n    value: function () {\n      if (this._propertiesPanel) {\n        this._propertiesPanel.option({\n          propertyTabs: this.option(\"propertiesPanel.tabs\")\n        });\n      }\n    }\n  }, {\n    key: \"_invalidateMainToolbarCommands\",\n    value: function () {\n      if (this._mainToolbar) {\n        this._mainToolbar.option({\n          commands: this.option(\"mainToolbar.commands\")\n        });\n      }\n    }\n  }, {\n    key: \"_invalidateHistoryToolbarCommands\",\n    value: function () {\n      if (this._historyToolbar) {\n        this._historyToolbar.option({\n          commands: this.option(\"historyToolbar.commands\")\n        });\n      }\n    }\n  }, {\n    key: \"_invalidateViewToolbarCommands\",\n    value: function () {\n      if (this._viewToolbar) {\n        this._viewToolbar.option({\n          commands: this.option(\"viewToolbar.commands\")\n        });\n      }\n    }\n  }, {\n    key: \"_invalidateToolboxGroups\",\n    value: function () {\n      if (this._toolbox) {\n        this._toolbox.option({\n          toolboxGroups: this._getToolboxGroups()\n        });\n      }\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      if (this.optionsUpdateBar.isUpdateLocked()) {\n        return;\n      }\n\n      this.optionsUpdateBar.beginUpdate();\n\n      try {\n        this._optionChangedCore(args);\n      } finally {\n        this.optionsUpdateBar.endUpdate();\n      }\n    }\n  }, {\n    key: \"_optionChangedCore\",\n    value: function (args) {\n      var _this14 = this;\n\n      switch (args.name) {\n        case \"readOnly\":\n        case \"disabled\":\n          this._updateReadOnlyState();\n\n          this._invalidate();\n\n          break;\n\n        case \"zoomLevel\":\n          if (\"zoomLevel\" === args.fullName || \"zoomLevel.items\" === args.fullName) {\n            this._updateZoomLevelItemsState();\n          }\n\n          if (\"zoomLevel\" === args.fullName || \"zoomLevel.value\" === args.fullName) {\n            this._updateZoomLevelState();\n          }\n\n          break;\n\n        case \"autoZoomMode\":\n          this._updateAutoZoomState();\n\n          break;\n\n        case \"simpleView\":\n          this._updateSimpleViewState();\n\n          break;\n\n        case \"fullScreen\":\n          this._updateFullscreenState();\n\n          break;\n\n        case \"showGrid\":\n          this._updateShowGridState();\n\n          break;\n\n        case \"snapToGrid\":\n          this._updateSnapToGridState();\n\n          break;\n\n        case \"gridSize\":\n          if (\"gridSize\" === args.fullName || \"gridSize.items\" === args.fullName) {\n            this._updateGridSizeItemsState();\n          }\n\n          if (\"gridSize\" === args.fullName || \"gridSize.value\" === args.fullName) {\n            this._updateGridSizeState();\n          }\n\n          break;\n\n        case \"viewUnits\":\n          this._updateViewUnitsState();\n\n          break;\n\n        case \"units\":\n          this._updateUnitsState();\n\n          break;\n\n        case \"pageSize\":\n          if (\"pageSize\" === args.fullName || \"pageSize.items\" === args.fullName) {\n            this._updatePageSizeItemsState();\n          }\n\n          if (\"pageSize\" === args.fullName || \"pageSize.width\" === args.fullName || \"pageSize.height\" === args.fullName) {\n            this._updatePageSizeState();\n          }\n\n          break;\n\n        case \"pageOrientation\":\n          this._updatePageOrientationState();\n\n          break;\n\n        case \"pageColor\":\n          this._updatePageColorState();\n\n          break;\n\n        case \"nodes\":\n          if (\"nodes.autoLayout\" === args.fullName) {\n            this._refreshDataSources();\n          } else {\n            this._refreshNodesDataSource();\n          }\n\n          break;\n\n        case \"edges\":\n          this._refreshEdgesDataSource();\n\n          break;\n\n        case \"customShapes\":\n          this._updateCustomShapes(args.value, args.previousValue);\n\n          this._invalidate();\n\n          break;\n\n        case \"contextMenu\":\n          if (\"contextMenu.commands\" === args.fullName) {\n            this._invalidateContextMenuCommands();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"contextToolbox\":\n          this._invalidate();\n\n          break;\n\n        case \"propertiesPanel\":\n          if (\"propertiesPanel.tabs\" === args.name) {\n            this._invalidatePropertiesPanelTabs();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"toolbox\":\n          if (\"toolbox.groups\" === args.fullName) {\n            this._invalidateToolboxGroups();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"mainToolbar\":\n          if (\"mainToolbar.commands\" === args.fullName) {\n            this._invalidateMainToolbarCommands();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"historyToolbar\":\n          if (\"historyToolbar.commands\" === args.fullName) {\n            this._invalidateHistoryToolbarCommands();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"viewToolbar\":\n          if (\"viewToolbar.commands\" === args.fullName) {\n            this._invalidateViewToolbarCommands();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"onItemClick\":\n          this._createItemClickAction();\n\n          break;\n\n        case \"onItemDblClick\":\n          this._createItemDblClickAction();\n\n          break;\n\n        case \"onSelectionChanged\":\n          this._createSelectionChangedAction();\n\n          break;\n\n        case \"onRequestEditOperation\":\n          this._createRequestEditOperationAction();\n\n          break;\n\n        case \"onRequestLayoutUpdate\":\n          this._createRequestLayoutUpdateAction();\n\n          break;\n\n        case \"onCustomCommand\":\n          this._createCustomCommand();\n\n          break;\n\n        case \"defaultItemProperties\":\n          this._updateDefaultItemProperties();\n\n          break;\n\n        case \"editing\":\n          this._updateEditingSettings();\n\n          break;\n\n        case \"export\":\n          this._toolbars.forEach(function (toolbar) {\n            toolbar.option(\"export\", _this14.option(\"export\"));\n          });\n\n          if (this._contextMenu) {\n            this._contextMenu.option(\"export\", this.option(\"export\"));\n          }\n\n          break;\n\n        case \"hasChanges\":\n          break;\n\n        default:\n          _get(_getPrototypeOf(Diagram.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }]);\n\n  return Diagram;\n}(_ui.default);\n\n(0, _component_registrator.default)(\"dxDiagram\", Diagram);\nvar _default = Diagram;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/diagram/ui.diagram.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_renderer","_interopRequireDefault","require","_ui","_load_indicator","_component_registrator","_extend","_type","_data","_position","_resize_callbacks","_diagram","_window","_element","_events_engine","_index","_message","_number","zIndexPool","_interopRequireWildcard","_ui2","_uiDiagram","_uiDiagram2","_uiDiagram3","_uiDiagram4","_uiDiagram5","_uiDiagram6","_uiDiagram7","_uiDiagram8","_uiDiagram9","_diagram2","_uiDiagram10","_uiDiagram11","_diagram3","_uiDiagram12","_diagram4","_diagram5","_diagram6","_getRequireWildcardCache","WeakMap","cache","__esModule","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","base","_superPropBase","value","object","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","DIAGRAM_CLASS","DIAGRAM_FULLSCREEN_CLASS","DIAGRAM_TOOLBAR_WRAPPER_CLASS","DIAGRAM_CONTENT_WRAPPER_CLASS","DIAGRAM_CONTENT_CLASS","DIAGRAM_SCROLL_VIEW_CLASS","DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS","DIAGRAM_PROPERTIES_PANEL_TOOLBAR_CONTAINER_CLASS","DIAGRAM_LOADING_INDICATOR_CLASS","DIAGRAM_FLOATING_PANEL_OFFSET","DIAGRAM_DEFAULT_UNIT","DIAGRAM_DEFAULT_ZOOMLEVEL","DIAGRAM_DEFAULT_AUTOZOOM_MODE","DIAGRAM_DEFAULT_PAGE_ORIENTATION","DIAGRAM_DEFAULT_PAGE_COLOR","DIAGRAM_MAX_MOBILE_WINDOW_WIDTH","DIAGRAM_TOOLBOX_SHAPE_SPACING","DIAGRAM_TOOLBOX_SHAPES_PER_ROW","DIAGRAM_CONTEXT_TOOLBOX_SHAPE_SPACING","DIAGRAM_CONTEXT_TOOLBOX_SHAPES_PER_ROW","DIAGRAM_CONTEXT_TOOLBOX_DEFAULT_WIDTH","DIAGRAM_NAMESPACE","FULLSCREEN_CHANGE_EVENT_NAME","addNamespace","IE_FULLSCREEN_CHANGE_EVENT_NAME","WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME","MOZ_FULLSCREEN_CHANGE_EVENT_NAME","Diagram","_Widget","_super","_updateDiagramLockCount","toggleFullscreenLock","_browserResizeTimer","_toolbars","_initDiagram","_createCustomCommand","_this","_isMobileScreenSize","isServerSide","hasWindow","$element","addClass","_mainToolbar","option","_renderMainToolbar","$contentWrapper","appendTo","_historyToolbar","_historyToolbarResizeCallback","_isHistoryToolbarVisible","_renderHistoryToolbar","_propertiesToolbar","_propertiesToolbarResizeCallback","_isPropertiesPanelEnabled","_renderPropertiesToolbar","_viewToolbar","_viewToolbarResizeCallback","_renderViewToolbar","_toolbox","_toolboxResizeCallback","_isToolboxEnabled","_renderToolbox","_propertiesPanel","_propertiesPanelResizeCallback","_renderPropertiesPanel","_$content","_contextMenu","_renderContextMenu","_contextToolbox","_renderContextToolbox","_renderDialog","$scrollViewWrapper","_createComponent","onCreateDiagram","_diagramInstance","createDocument","$parent","scrollView","add","_killBrowserResizeTimer","setTimeout","_processBrowserResize","_setCustomCommandChecked","SHOW_PROPERTIES_PANEL_COMMAND_NAME","_isPropertiesPanelVisible","SHOW_TOOLBOX_COMMAND_NAME","_isToolboxVisible","_processDiagramResize","clearTimeout","outerWidth","captureFocus","_this2","_captureFocusTimeout","_captureFocus","_captureFocusOnTimeout","component","_registerBar","push","bar","onChanged","registerBar","excludeCommands","_this3","onContentReady","_ref","_registerToolbar","onSubMenuVisibilityChanging","_ref2","updateBarItemsState","onPointerUp","_onPanelPointerUp","bind","container","_getExcludeCommands","onInternalCommand","_onInternalCommand","onCustomCommand","_onCustomCommand","isMobileView","isMobileScreenSize","command","toggle","_customCommandAction","name","$toolbarWrapper","extend","_getToolbarBaseOptions","commands","skipAdjustSize","isReadOnlyMode","_this4","$container","locateInMenu","_updateHistoryToolbarPosition","setup","my","at","of","offset","_this5","$toolBox","bounds","_getToolboxBounds","isVisible","height","offsetParent","offsetX","offsetY","showSearch","toolboxGroups","_getToolboxGroups","toolboxWidth","onShapeCategoryRendered","createToolbox","displayMode","shapes","category","shapeIconSpacing","shapeIconCountInRow","shapeIconAttributes","dataToggle","onFilterChanged","applyToolboxFilter","text","filteringToolboxes","onVisibilityChanging","visible","hide","_historyToolbarZIndex","baseZIndex","css","onVisibilityChanged","_textInputStarted","remove","prevIsMobileView","updateMaxHeight","outerHeight","_getViewToolbarYOffset","_this6","_updateViewToolbarPosition","_this7","buttonStylingMode","buttonType","_updatePropertiesToolbarPosition","_this8","$propertiesPanel","propertyTabs","onCreateToolbar","toolbar","editorStylingMode","_updatePropertiesPanelGroupBars","onSelectedGroupChanged","_ref3","_this9","getActiveToolbars","forEach","_this10","$contextMenu","DiagramContextMenuWrapper","_ref4","_ref5","onItemClick","itemData","_onBeforeCommandExecuted","_this11","$contextToolbox","onShown","$toolboxContainer","isTextGroup","group","filter","g","createContextToolbox","shapeType","callback","checked","tb","setCommandChecked","dialogParameters","getDialogParameters","_showDialog","$dialogElement","_dialogInstance","onGetContent","getCommand","title","_show","_loadingIndicator","append","_getDiagram","getDiagram","DiagramControl","_raiseDataChangeAction","onEdgeInserted","_raiseEdgeInsertedAction","onEdgeUpdated","_raiseEdgeUpdatedAction","onEdgeRemoved","_raiseEdgeRemovedAction","onNodeInserted","_raiseNodeInsertedAction","onNodeUpdated","_raiseNodeUpdatedAction","onNodeRemoved","_raiseNodeRemovedAction","onToolboxDragStart","_raiseToolboxDragStart","onToolboxDragEnd","_raiseToolboxDragEnd","onTextInputStart","_raiseTextInputStart","onTextInputEnd","_raiseTextInputEnd","onToggleFullscreen","_onToggleFullScreen","onShowContextMenu","_onShowContextMenu","onHideContextMenu","_onHideContextMenu","onShowContextToolbox","_onShowContextToolbox","onHideContextToolbox","_onHideContextToolbox","onNativeAction","notifyItemClick","_raiseItemClickAction","notifyItemDblClick","_raiseItemDblClickAction","notifySelectionChanged","_raiseSelectionChanged","onRequestOperation","_raiseRequestEditOperation","_updateEventSubscriptionMethods","_updateDefaultItemProperties","_updateEditingSettings","_updateShapeTexts","_updateUnitItems","_updateFormatUnitsMethod","_updateUnitsState","_updateReadOnlyState","_updatePageSizeItemsState","_updatePageSizeState","_updatePageOrientationState","_updatePageColorState","_updateViewUnitsState","_updateShowGridState","_updateSnapToGridState","_updateGridSizeItemsState","_updateGridSizeState","_updateZoomLevelItemsState","_updateSimpleViewState","_updateZoomLevelState","_updateAutoZoomState","window","getWindow","top","_updateFullscreenState","optionsUpdateBar","initMeasurer","_updateCustomShapes","_getCustomShapes","_refreshDataSources","cleanMarkup","element","empty","_killCaptureFocusTimeout","parameter","execute","_nodesOption","getDataSource","_edgesOption","_beginUpdateDiagram","_refreshNodesDataSource","_refreshEdgesDataSource","_endUpdateDiagram","_disposeDataSource","_refreshDataSource","_getDiagram2","DiagramCommand","_executeDiagramCommand","Export","data","keepExistingItems","_getDiagram3","Import","_bindDiagramData","changes","map","change","internalKey","optionName","expr","compileGetter","_requestLayoutUpdateAction","_createRequestLayoutUpdateAction","eventArgs","allowed","isFunction","compileSetter","_isBindingMode","_getDiagram4","ConnectorLineOption","ConnectorLineEnding","lineOptionGetter","lineOptionSetter","startLineEndingGetter","startLineEndingSetter","endLineEndingGetter","endLineEndingSetter","containerKeyGetter","containerKeySetter","nodeDataSource","getItems","edgeDataSource","nodeDataImporter","getKey","_createOptionGetter","setKey","_createOptionSetter","getCustomData","setCustomData","getLocked","setLocked","getStyle","setStyle","getStyleText","setStyleText","getZIndex","setZIndex","getType","setType","getText","setText","getImage","setImage","getLeft","setLeft","getTop","setTop","getWidth","setWidth","getHeight","setHeight","getParentKey","setParentKey","setItems","getContainerKey","setContainerKey","getChildren","setChildren","edgeDataImporter","getFrom","setFrom","getFromPointIndex","setFromPointIndex","getTo","setTo","getToPointIndex","setToPointIndex","getPoints","setPoints","getLineOption","lineType","_getConnectorLineOption","setLineOption","Straight","Orthogonal","getStartLineEnding","lineEnd","_getConnectorLineEnding","setStartLineEnding","Arrow","OutlinedTriangle","FilledTriangle","None","getEndLineEnding","setEndLineEnding","layoutParameters","_getDataBindingLayoutParameters","BindDocument","isExternalChanges","keys","_getChangesKeys","applyLayout","_onRequestUpdateLayout","_reloadContent","itemKeys","_this12","getData","reloadContent","_getDiagram5","_getDiagram6","_getDiagram7","DataLayoutType","DataLayoutOrientation","layoutParametersOption","layoutType","type","parameters","_hasNodePositionExprs","Tree","Sugiyama","orientation","Vertical","Horizontal","skipPointIndices","autoSizeEnabled","_getDiagram8","AutoZoomMode","FitContent","FitToWidth","Disabled","hasItems","Math","max","getGroups","customShapes","prevCustomShapes","_this13","Array","isArray","removeCustomShapes","s","addCustomShapes","templateOption","template","_getTemplate","toolboxTemplateOption","toolboxTemplate","baseType","svgUrl","backgroundImageUrl","svgToolboxUrl","backgroundImageToolboxUrl","svgLeft","backgroundImageLeft","svgTop","backgroundImageTop","svgWidth","backgroundImageWidth","svgHeight","backgroundImageHeight","defaultWidth","defaultHeight","toolboxWidthToHeightRatio","minWidth","minHeight","maxWidth","maxHeight","allowResize","defaultText","allowEditText","textLeft","textTop","textWidth","textHeight","defaultImageUrl","allowEditImage","imageLeft","imageTop","imageWidth","imageHeight","connectionPoints","pt","x","y","createTemplate","item","render","model","_nativeItemToDiagramItem","getPublicElement","createToolboxTemplate","destroyTemplate","templateLeft","templateTop","templateWidth","templateHeight","keepRatioOnAutoSize","fullScreen","_changeNativeFullscreen","toggleClass","updateLayout","repaint","setModeOn","_inNativeFullscreen","_subscribeFullscreenNativeChanged","_unsubscribeFullscreenNativeChanged","_setNativeFullscreen","on","document","body","requestFullscreen","mozRequestFullscreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullscreen","webkitExitFullscreen","msExitFullscreen","fullscreenElement","msFullscreenElement","webkitFullscreenElement","isInFullscreen","webkitIsFullscreen","handler","_onNativeFullscreenChangeHandler","off","fullscreen","_getDiagram9","Fullscreen","selection","_hide","side","_getDiagram10","DiagramUnit","In","Cm","Px","_getDiagram11","readOnly","ToggleReadOnly","zoomLevel","_getDiagram12","ZoomLevel","zoomLevelItems","_getDiagram13","ZoomLevelItems","_getDiagram14","SwitchAutoZoom","_getAutoZoomValue","_getDiagram15","ToggleSimpleView","_executeDiagramFullscreenCommand","_getDiagram16","ShowGrid","_getDiagram17","SnapToGrid","gridSize","_getDiagram18","GridSize","gridSizeItems","_getDiagram19","GridSizeItems","_getDiagram20","DiagramLocalizationService","items","_getUnitItems","_unitItems","unitItems","_getDiagram21","format","_getDiagram22","formatUnit","_getDiagram23","ViewUnits","_getDiagramUnitValue","_getDiagram24","Units","pageSize","width","_getDiagram25","PageSize","pageSizeItems","_getDiagram26","PageSizeItems","_getDiagram27","PageLandscape","_getDiagram28","PageColor","_getDiagram29","texts","_getShapeTexts","_shapeTexts","shapeTexts","_getDiagram30","ShapeTypes","Text","Rectangle","Ellipse","Cross","Triangle","Diamond","Heart","Pentagon","Hexagon","Octagon","Star","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","ArrowUpDown","ArrowLeftRight","Process","Decision","Terminator","PredefinedProcess","Document","MultipleDocuments","ManualInput","Preparation","Data","Database","HardDisk","InternalStorage","PaperTape","ManualOperation","Delay","StoredData","Display","Merge","Connector","Or","SummingJunction","Container","VerticalContainer","HorizontalContainer","Card","CardWithImageOnLeft","CardWithImageOnTop","CardWithImageOnRight","_getDiagram31","RenderHelper","addEventListener","eventName","removeEventListener","setInitialStyleProperties","setInitialTextStyleProperties","setInitialConnectorProperties","lineOption","startLineEnding","endLineEnding","applyShapeSizeSettings","shapeMinWidth","shapeMaxWidth","shapeMinHeight","shapeMaxHeight","applyOperationSettings","addShape","addShapeFromToolbox","deleteShape","deleteConnector","changeConnection","changeConnectorPoints","changeShapeText","changeConnectorText","resizeShape","moveShape","_getDiagramData","_getDiagramExportToCommand","_getDiagram32","ExportPng","ExportJpg","ExportSvg","updateExistingItemsOnly","_setDiagramData","refreshToolbox","simpleView","autoZoomMode","showGrid","snapToGrid","units","viewUnits","pageOrientation","pageColor","hasChanges","nodes","dataSource","keyExpr","customDataExpr","lockedExpr","styleExpr","textStyleExpr","zIndexExpr","typeExpr","textExpr","imageUrlExpr","parentKeyExpr","itemsExpr","leftExpr","topExpr","widthExpr","heightExpr","containerKeyExpr","containerChildrenExpr","autoLayout","edges","fromExpr","fromPointIndexExpr","toExpr","toPointIndexExpr","pointsExpr","lineTypeExpr","fromLineEndExpr","toLineEndExpr","toolbox","visibility","shapeIconsPerRow","mainToolbar","historyToolbar","viewToolbar","contextMenu","enabled","contextToolbox","propertiesPanel","defaultItemProperties","connectorLineType","connectorLineStart","connectorLineEnd","editing","allowAddShape","allowDeleteShape","allowDeleteConnector","allowChangeConnection","allowChangeConnectorPoints","allowChangeShapeText","allowChangeConnectorText","allowResizeShape","allowMoveShape","fileName","proxyUrl","onItemDblClick","onSelectionChanged","onRequestEditOperation","onRequestLayoutUpdate","_initialized","errorCallback","insert","update","_toolboxDragHidden","show","_propertiesPanelTextInputHidden","_toolboxTextInputHidden","_itemClickAction","_createActionByOption","_itemDblClickAction","_selectionChangedAction","_requestEditOperationAction","nativeItem","_createItemClickAction","_createItemDblClickAction","nativeItems","_createSelectionChangedAction","operation","args","_createRequestEditOperationAction","_getRequestEditOperationEventArgs","_getDiagram33","DiagramModelOperation","AddShape","AddShapeFromToolbox","DeleteShape","DeleteConnector","ChangeConnection","ChangeConnectorPoints","BeforeChangeShapeText","ChangeShapeText","BeforeChangeConnectorText","ChangeConnectorText","ResizeShape","MoveShape","_getDiagram34","ConnectorPosition","_getModelOperation","updateUI","reason","shape","position","connector","newShape","oldShape","connectionPointIndex","connectorPosition","Begin","newPoints","points","oldPoints","index","newSize","size","oldSize","newPosition","oldPosition","_getDiagram35","NativeShape","createMethod","_nativeShapeToDiagramShape","_nativeConnectorToDiagramConnector","id","dataItem","nativeShape","findItem","itemType","attachedConnectorIds","nativeConnector","fromKey","toKey","fromId","fromPointIndex","toId","toPointIndex","getNativeItemByDataKey","getNativeItemByKey","isUpdateLocked","beginUpdate","_optionChangedCore","endUpdate","_this14","_invalidate","fullName","previousValue","_invalidateContextMenuCommands","_invalidatePropertiesPanelTabs","_invalidateToolboxGroups","_invalidateMainToolbarCommands","_invalidateHistoryToolbarCommands","_invalidateViewToolbarCommands","_default","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAClB;;AACA,MAAI,eAAe,OAAOC,MAAtB,IAAgC,aAAa,OAAOA,MAAM,CAACC,QAA/D,EAAyE;AACrEH,IAAAA,OAAO,GAAG,UAASC,GAAT,EAAc;AACpB,aAAO,OAAOA,GAAd;AACH,KAFD;AAGH,GAJD,MAIO;AACHD,IAAAA,OAAO,GAAG,UAASC,GAAT,EAAc;AACpB,aAAOA,GAAG,IAAI,eAAe,OAAOC,MAA7B,IAAuCD,GAAG,CAACG,WAAJ,KAAoBF,MAA3D,IAAqED,GAAG,KAAKC,MAAM,CAACG,SAApF,GAAgG,QAAhG,GAA2G,OAAOJ,GAAzH;AACH,KAFD;AAGH;;AACD,SAAOD,OAAO,CAACC,GAAD,CAAd;AACH;;AACDK,OAAO,CAACC,OAAR,GAAkB,KAAK,CAAvB;;AACA,IAAIC,SAAS,GAAGC,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAAtC;;AACA,IAAIC,GAAG,GAAGF,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAAhC;;AACA,IAAIE,eAAe,GAAGH,sBAAsB,CAACC,OAAO,CAAC,mBAAD,CAAR,CAA5C;;AACA,IAAIG,sBAAsB,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,kCAAD,CAAR,CAAnD;;AACA,IAAII,OAAO,GAAGJ,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIK,KAAK,GAAGL,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIM,KAAK,GAAGN,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIO,SAAS,GAAGR,sBAAsB,CAACC,OAAO,CAAC,0BAAD,CAAR,CAAtC;;AACA,IAAIQ,iBAAiB,GAAGT,sBAAsB,CAACC,OAAO,CAAC,mCAAD,CAAR,CAA9C;;AACA,IAAIS,QAAQ,GAAGT,OAAO,CAAC,oBAAD,CAAtB;;AACA,IAAIU,OAAO,GAAGV,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIW,QAAQ,GAAGX,OAAO,CAAC,oBAAD,CAAtB;;AACA,IAAIY,cAAc,GAAGb,sBAAsB,CAACC,OAAO,CAAC,iCAAD,CAAR,CAA3C;;AACA,IAAIa,MAAM,GAAGb,OAAO,CAAC,0BAAD,CAApB;;AACA,IAAIc,QAAQ,GAAGf,sBAAsB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAArC;;AACA,IAAIe,OAAO,GAAGhB,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAApC;;AACA,IAAIgB,UAAU,GAAGC,uBAAuB,CAACjB,OAAO,CAAC,oBAAD,CAAR,CAAxC;;AACA,IAAIkB,IAAI,GAAGnB,sBAAsB,CAACC,OAAO,CAAC,uBAAD,CAAR,CAAjC;;AACA,IAAImB,UAAU,GAAGpB,sBAAsB,CAACC,OAAO,CAAC,sBAAD,CAAR,CAAvC;;AACA,IAAIoB,WAAW,GAAGrB,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAAxC;;AACA,IAAIqB,WAAW,GAAGtB,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAAxC;;AACA,IAAIsB,WAAW,GAAGvB,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAAxC;;AACA,IAAIuB,WAAW,GAAGxB,sBAAsB,CAACC,OAAO,CAAC,iCAAD,CAAR,CAAxC;;AACA,IAAIwB,WAAW,GAAGzB,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAAxC;;AACA,IAAIyB,WAAW,GAAG1B,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAAxC;;AACA,IAAI0B,WAAW,GAAG3B,sBAAsB,CAACC,OAAO,CAAC,sBAAD,CAAR,CAAxC;;AACA,IAAI2B,WAAW,GAAG5B,sBAAsB,CAACC,OAAO,CAAC,0BAAD,CAAR,CAAxC;;AACA,IAAI4B,SAAS,GAAG7B,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAAtC;;AACA,IAAI6B,YAAY,GAAG9B,sBAAsB,CAACC,OAAO,CAAC,sBAAD,CAAR,CAAzC;;AACA,IAAI8B,YAAY,GAAG/B,sBAAsB,CAACC,OAAO,CAAC,+BAAD,CAAR,CAAzC;;AACA,IAAI+B,SAAS,GAAGhC,sBAAsB,CAACC,OAAO,CAAC,0BAAD,CAAR,CAAtC;;AACA,IAAIgC,YAAY,GAAGjC,sBAAsB,CAACC,OAAO,CAAC,6BAAD,CAAR,CAAzC;;AACA,IAAIiC,SAAS,GAAGlC,sBAAsB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAAtC;;AACA,IAAIkC,SAAS,GAAGnC,sBAAsB,CAACC,OAAO,CAAC,wBAAD,CAAR,CAAtC;;AACA,IAAImC,SAAS,GAAGpC,sBAAsB,CAACC,OAAO,CAAC,wBAAD,CAAR,CAAtC;;AAEA,SAASoC,wBAAT,GAAoC;AAChC,MAAI,eAAe,OAAOC,OAA1B,EAAmC;AAC/B,WAAO,IAAP;AACH;;AACD,MAAIC,KAAK,GAAG,IAAID,OAAJ,EAAZ;;AACAD,EAAAA,wBAAwB,GAAG,YAAW;AAClC,WAAOE,KAAP;AACH,GAFD;;AAGA,SAAOA,KAAP;AACH;;AAED,SAASrB,uBAAT,CAAiC1B,GAAjC,EAAsC;AAClC,MAAIA,GAAG,IAAIA,GAAG,CAACgD,UAAf,EAA2B;AACvB,WAAOhD,GAAP;AACH;;AACD,MAAI,SAASA,GAAT,IAAgB,aAAaD,OAAO,CAACC,GAAD,CAApB,IAA6B,eAAe,OAAOA,GAAvE,EAA4E;AACxE,WAAO;AACH,iBAAWA;AADR,KAAP;AAGH;;AACD,MAAI+C,KAAK,GAAGF,wBAAwB,EAApC;;AACA,MAAIE,KAAK,IAAIA,KAAK,CAACE,GAAN,CAAUjD,GAAV,CAAb,EAA6B;AACzB,WAAO+C,KAAK,CAACG,GAAN,CAAUlD,GAAV,CAAP;AACH;;AACD,MAAImD,MAAM,GAAG,EAAb;AACA,MAAIC,qBAAqB,GAAGC,MAAM,CAACC,cAAP,IAAyBD,MAAM,CAACE,wBAA5D;;AACA,OAAK,IAAIC,GAAT,IAAgBxD,GAAhB,EAAqB;AACjB,QAAIqD,MAAM,CAACjD,SAAP,CAAiBqD,cAAjB,CAAgCC,IAAhC,CAAqC1D,GAArC,EAA0CwD,GAA1C,CAAJ,EAAoD;AAChD,UAAIG,IAAI,GAAGP,qBAAqB,GAAGC,MAAM,CAACE,wBAAP,CAAgCvD,GAAhC,EAAqCwD,GAArC,CAAH,GAA+C,IAA/E;;AACA,UAAIG,IAAI,KAAKA,IAAI,CAACT,GAAL,IAAYS,IAAI,CAACC,GAAtB,CAAR,EAAoC;AAChCP,QAAAA,MAAM,CAACC,cAAP,CAAsBH,MAAtB,EAA8BK,GAA9B,EAAmCG,IAAnC;AACH,OAFD,MAEO;AACHR,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcxD,GAAG,CAACwD,GAAD,CAAjB;AACH;AACJ;AACJ;;AACDL,EAAAA,MAAM,CAAC7C,OAAP,GAAiBN,GAAjB;;AACA,MAAI+C,KAAJ,EAAW;AACPA,IAAAA,KAAK,CAACa,GAAN,CAAU5D,GAAV,EAAemD,MAAf;AACH;;AACD,SAAOA,MAAP;AACH;;AAED,SAAS3C,sBAAT,CAAgCR,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACgD,UAAX,GAAwBhD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AAED,SAAS6D,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAC5C,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AACpC,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AACH;AACJ;;AAED,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AACtC,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnC,QAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AACAE,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AACAD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;;AACA,QAAI,WAAWF,UAAf,EAA2B;AACvBA,MAAAA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AACH;;AACDpB,IAAAA,MAAM,CAACC,cAAP,CAAsBY,MAAtB,EAA8BI,UAAU,CAACd,GAAzC,EAA8Cc,UAA9C;AACH;AACJ;;AAED,SAASI,YAAT,CAAsBX,WAAtB,EAAmCY,UAAnC,EAA+CC,WAA/C,EAA4D;AACxD,MAAID,UAAJ,EAAgB;AACZV,IAAAA,iBAAiB,CAACF,WAAW,CAAC3D,SAAb,EAAwBuE,UAAxB,CAAjB;AACH;;AACD,MAAIC,WAAJ,EAAiB;AACbX,IAAAA,iBAAiB,CAACF,WAAD,EAAca,WAAd,CAAjB;AACH;;AACD,SAAOb,WAAP;AACH;;AAED,SAASc,IAAT,CAAcX,MAAd,EAAsBY,QAAtB,EAAgCC,QAAhC,EAA0C;AACtC,MAAI,gBAAgB,OAAOC,OAAvB,IAAkCA,OAAO,CAAC9B,GAA9C,EAAmD;AAC/C2B,IAAAA,IAAI,GAAGG,OAAO,CAAC9B,GAAf;AACH,GAFD,MAEO;AACH2B,IAAAA,IAAI,GAAG,UAASX,MAAT,EAAiBY,QAAjB,EAA2BC,QAA3B,EAAqC;AACxC,UAAIE,IAAI,GAAGC,cAAc,CAAChB,MAAD,EAASY,QAAT,CAAzB;;AACA,UAAI,CAACG,IAAL,EAAW;AACP;AACH;;AACD,UAAItB,IAAI,GAAGN,MAAM,CAACE,wBAAP,CAAgC0B,IAAhC,EAAsCH,QAAtC,CAAX;;AACA,UAAInB,IAAI,CAACT,GAAT,EAAc;AACV,eAAOS,IAAI,CAACT,GAAL,CAASQ,IAAT,CAAcqB,QAAd,CAAP;AACH;;AACD,aAAOpB,IAAI,CAACwB,KAAZ;AACH,KAVD;AAWH;;AACD,SAAON,IAAI,CAACX,MAAD,EAASY,QAAT,EAAmBC,QAAQ,IAAIb,MAA/B,CAAX;AACH;;AAED,SAASgB,cAAT,CAAwBE,MAAxB,EAAgCN,QAAhC,EAA0C;AACtC,SAAO,CAACzB,MAAM,CAACjD,SAAP,CAAiBqD,cAAjB,CAAgCC,IAAhC,CAAqC0B,MAArC,EAA6CN,QAA7C,CAAR,EAAgE;AAC5DM,IAAAA,MAAM,GAAGC,eAAe,CAACD,MAAD,CAAxB;;AACA,QAAI,SAASA,MAAb,EAAqB;AACjB;AACH;AACJ;;AACD,SAAOA,MAAP;AACH;;AAED,SAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AACrC,MAAI,eAAe,OAAOA,UAAtB,IAAoC,SAASA,UAAjD,EAA6D;AACzD,UAAM,IAAIxB,SAAJ,CAAc,oDAAd,CAAN;AACH;;AACDuB,EAAAA,QAAQ,CAACnF,SAAT,GAAqBiD,MAAM,CAACoC,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAACpF,SAAvC,EAAkD;AACnED,IAAAA,WAAW,EAAE;AACTgF,MAAAA,KAAK,EAAEI,QADE;AAETd,MAAAA,QAAQ,EAAE,IAFD;AAGTD,MAAAA,YAAY,EAAE;AAHL;AADsD,GAAlD,CAArB;;AAOA,MAAIgB,UAAJ,EAAgB;AACZE,IAAAA,eAAe,CAACH,QAAD,EAAWC,UAAX,CAAf;AACH;AACJ;;AAED,SAASE,eAAT,CAAyBC,CAAzB,EAA4BC,CAA5B,EAA+B;AAC3BF,EAAAA,eAAe,GAAGrC,MAAM,CAACwC,cAAP,IAAyB,UAASF,CAAT,EAAYC,CAAZ,EAAe;AACtDD,IAAAA,CAAC,CAACG,SAAF,GAAcF,CAAd;AACA,WAAOD,CAAP;AACH,GAHD;;AAIA,SAAOD,eAAe,CAACC,CAAD,EAAIC,CAAJ,CAAtB;AACH;;AAED,SAASG,YAAT,CAAsBC,OAAtB,EAA+B;AAC3B,MAAIC,yBAAyB,GAAGC,yBAAyB,EAAzD;;AACA,SAAO,YAAW;AACd,QAAIC,MAAJ;AAAA,QAAYC,KAAK,GAAGf,eAAe,CAACW,OAAD,CAAnC;;AACA,QAAIC,yBAAJ,EAA+B;AAC3B,UAAII,SAAS,GAAGhB,eAAe,CAAC,IAAD,CAAf,CAAsBlF,WAAtC;;AACAgG,MAAAA,MAAM,GAAGnB,OAAO,CAACsB,SAAR,CAAkBF,KAAlB,EAAyBG,SAAzB,EAAoCF,SAApC,CAAT;AACH,KAHD,MAGO;AACHF,MAAAA,MAAM,GAAGC,KAAK,CAACI,KAAN,CAAY,IAAZ,EAAkBD,SAAlB,CAAT;AACH;;AACD,WAAOE,0BAA0B,CAAC,IAAD,EAAON,MAAP,CAAjC;AACH,GATD;AAUH;;AAED,SAASM,0BAAT,CAAoCC,IAApC,EAA0ChD,IAA1C,EAAgD;AAC5C,MAAIA,IAAI,KAAK,aAAa3D,OAAO,CAAC2D,IAAD,CAApB,IAA8B,eAAe,OAAOA,IAAzD,CAAR,EAAwE;AACpE,WAAOA,IAAP;AACH;;AACD,SAAOiD,sBAAsB,CAACD,IAAD,CAA7B;AACH;;AAED,SAASC,sBAAT,CAAgCD,IAAhC,EAAsC;AAClC,MAAI,KAAK,CAAL,KAAWA,IAAf,EAAqB;AACjB,UAAM,IAAIE,cAAJ,CAAmB,2DAAnB,CAAN;AACH;;AACD,SAAOF,IAAP;AACH;;AAED,SAASR,yBAAT,GAAqC;AACjC,MAAI,gBAAgB,OAAOlB,OAAvB,IAAkC,CAACA,OAAO,CAACsB,SAA/C,EAA0D;AACtD,WAAO,KAAP;AACH;;AACD,MAAItB,OAAO,CAACsB,SAAR,CAAkBO,IAAtB,EAA4B;AACxB,WAAO,KAAP;AACH;;AACD,MAAI,eAAe,OAAOC,KAA1B,EAAiC;AAC7B,WAAO,IAAP;AACH;;AACD,MAAI;AACAC,IAAAA,IAAI,CAAC3G,SAAL,CAAe4G,QAAf,CAAwBtD,IAAxB,CAA6BsB,OAAO,CAACsB,SAAR,CAAkBS,IAAlB,EAAwB,EAAxB,EAA4B,YAAW,CAAE,CAAzC,CAA7B;AACA,WAAO,IAAP;AACH,GAHD,CAGE,OAAOE,CAAP,EAAU;AACR,WAAO,KAAP;AACH;AACJ;;AAED,SAAS5B,eAAT,CAAyBM,CAAzB,EAA4B;AACxBN,EAAAA,eAAe,GAAGhC,MAAM,CAACwC,cAAP,GAAwBxC,MAAM,CAAC6D,cAA/B,GAAgD,UAASvB,CAAT,EAAY;AAC1E,WAAOA,CAAC,CAACG,SAAF,IAAezC,MAAM,CAAC6D,cAAP,CAAsBvB,CAAtB,CAAtB;AACH,GAFD;AAGA,SAAON,eAAe,CAACM,CAAD,CAAtB;AACH;;AACD,IAAIwB,aAAa,GAAG,YAApB;AACA,IAAIC,wBAAwB,GAAG,uBAA/B;AACA,IAAIC,6BAA6B,GAAGF,aAAa,GAAG,kBAApD;AACA,IAAIG,6BAA6B,GAAGH,aAAa,GAAG,kBAApD;AACA,IAAII,qBAAqB,GAAGJ,aAAa,GAAG,UAA5C;AACA,IAAIK,yBAAyB,GAAGL,aAAa,GAAG,cAAhD;AACA,IAAIM,wCAAwC,GAAGN,aAAa,GAAG,6BAA/D;AACA,IAAIO,gDAAgD,GAAGP,aAAa,GAAG,qCAAvE;AACA,IAAIQ,+BAA+B,GAAGR,aAAa,GAAG,oBAAtD;AACA,IAAIS,6BAA6B,GAAG,EAApC;AACA,IAAIC,oBAAoB,GAAG,IAA3B;AACA,IAAIC,yBAAyB,GAAG,CAAhC;AACA,IAAIC,6BAA6B,GAAG,UAApC;AACA,IAAIC,gCAAgC,GAAG,UAAvC;AACA,IAAIC,0BAA0B,GAAG,SAAjC;AACA,IAAIC,+BAA+B,GAAG,GAAtC;AACA,IAAIC,6BAA6B,GAAG,EAApC;AACA,IAAIC,8BAA8B,GAAG,CAArC;AACA,IAAIC,qCAAqC,GAAG,EAA5C;AACA,IAAIC,sCAAsC,GAAG,CAA7C;AACA,IAAIC,qCAAqC,GAAG,GAA5C;AACA,IAAIC,iBAAiB,GAAG,gBAAxB;AACA,IAAIC,4BAA4B,GAAG,CAAC,GAAGnH,MAAM,CAACoH,YAAX,EAAyB,kBAAzB,EAA6CF,iBAA7C,CAAnC;AACA,IAAIG,+BAA+B,GAAG,CAAC,GAAGrH,MAAM,CAACoH,YAAX,EAAyB,oBAAzB,EAA+CF,iBAA/C,CAAtC;AACA,IAAII,mCAAmC,GAAG,CAAC,GAAGtH,MAAM,CAACoH,YAAX,EAAyB,wBAAzB,EAAmDF,iBAAnD,CAA1C;AACA,IAAIK,gCAAgC,GAAG,CAAC,GAAGvH,MAAM,CAACoH,YAAX,EAAyB,qBAAzB,EAAgDF,iBAAhD,CAAvC;;AACA,IAAIM,OAAO,GAAG,UAASC,OAAT,EAAkB;AAC5BzD,EAAAA,SAAS,CAACwD,OAAD,EAAUC,OAAV,CAAT;;AACA,MAAIC,MAAM,GAAGjD,YAAY,CAAC+C,OAAD,CAAzB;;AAEA,WAASA,OAAT,GAAmB;AACfjF,IAAAA,eAAe,CAAC,IAAD,EAAOiF,OAAP,CAAf;;AACA,WAAOE,MAAM,CAACxC,KAAP,CAAa,IAAb,EAAmBD,SAAnB,CAAP;AACH;;AACD7B,EAAAA,YAAY,CAACoE,OAAD,EAAU,CAAC;AACnBtF,IAAAA,GAAG,EAAE,OADc;AAEnB2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK8D,uBAAL,GAA+B,CAA/B;AACA,WAAKC,oBAAL,GAA4B,CAA5B;AACA,WAAKC,mBAAL,GAA2B,CAAC,CAA5B;AACA,WAAKC,SAAL,GAAiB,EAAjB;;AACAvE,MAAAA,IAAI,CAACQ,eAAe,CAACyD,OAAO,CAAC1I,SAAT,CAAhB,EAAqC,OAArC,EAA8C,IAA9C,CAAJ,CAAwDsD,IAAxD,CAA6D,IAA7D;;AACA,WAAK2F,YAAL;;AACA,WAAKC,oBAAL;AACH;AAVkB,GAAD,EAWnB;AACC9F,IAAAA,GAAG,EAAE,aADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIoE,KAAK,GAAG,IAAZ;;AACA1E,MAAAA,IAAI,CAACQ,eAAe,CAACyD,OAAO,CAAC1I,SAAT,CAAhB,EAAqC,aAArC,EAAoD,IAApD,CAAJ,CAA8DsD,IAA9D,CAAmE,IAAnE;;AACA,WAAK0F,SAAL,GAAiB,EAAjB;AACA,aAAO,KAAKI,mBAAZ;AACA,UAAIC,YAAY,GAAG,CAAC,CAAC,GAAGtI,OAAO,CAACuI,SAAZ,GAApB;AACA,WAAKC,QAAL,GAAgBC,QAAhB,CAAyBzC,aAAzB;AACA,aAAO,KAAK0C,YAAZ;;AACA,UAAI,KAAKC,MAAL,CAAY,qBAAZ,CAAJ,EAAwC;AACpC,aAAKC,kBAAL;AACH;;AACD,UAAIC,eAAe,GAAG,CAAC,GAAGzJ,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCsJ,QAAhC,CAAyCtC,6BAAzC,EAAwE2C,QAAxE,CAAiF,KAAKN,QAAL,EAAjF,CAAtB;AACA,aAAO,KAAKO,eAAZ;AACA,aAAO,KAAKC,6BAAZ;;AACA,UAAI,KAAKC,wBAAL,EAAJ,EAAqC;AACjC,aAAKC,qBAAL,CAA2BL,eAA3B;AACH;;AACD,aAAO,KAAKM,kBAAZ;AACA,aAAO,KAAKC,gCAAZ;;AACA,UAAI,KAAKC,yBAAL,EAAJ,EAAsC;AAClC,aAAKC,wBAAL,CAA8BT,eAA9B;AACH;;AACD,aAAO,KAAKU,YAAZ;AACA,aAAO,KAAKC,0BAAZ;;AACA,UAAI,KAAKb,MAAL,CAAY,qBAAZ,CAAJ,EAAwC;AACpC,aAAKc,kBAAL,CAAwBZ,eAAxB;AACH;;AACD,aAAO,KAAKa,QAAZ;AACA,aAAO,KAAKC,sBAAZ;;AACA,UAAI,KAAKC,iBAAL,EAAJ,EAA8B;AAC1B,aAAKC,cAAL,CAAoBhB,eAApB;AACH;;AACD,aAAO,KAAKiB,gBAAZ;AACA,aAAO,KAAKC,8BAAZ;;AACA,UAAI,KAAKV,yBAAL,EAAJ,EAAsC;AAClC,aAAKW,sBAAL,CAA4BnB,eAA5B;AACH;;AACD,WAAKoB,SAAL,GAAiB,CAAC,GAAG7K,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCsJ,QAAhC,CAAyCrC,qBAAzC,EAAgE0C,QAAhE,CAAyED,eAAzE,CAAjB;AACA,aAAO,KAAKqB,YAAZ;;AACA,UAAI,KAAKvB,MAAL,CAAY,qBAAZ,CAAJ,EAAwC;AACpC,aAAKwB,kBAAL,CAAwBtB,eAAxB;AACH;;AACD,aAAO,KAAKuB,eAAZ;;AACA,UAAI,KAAKzB,MAAL,CAAY,wBAAZ,CAAJ,EAA2C;AACvC,aAAK0B,qBAAL,CAA2BxB,eAA3B;AACH;;AACD,WAAKyB,aAAL,CAAmBzB,eAAnB;;AACA,UAAI,CAACP,YAAL,EAAmB;AACf,YAAIiC,kBAAkB,GAAG,CAAC,GAAGnL,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCsJ,QAAhC,CAAyCpC,yBAAzC,EAAoEyC,QAApE,CAA6E,KAAKmB,SAAlF,CAAzB;;AACA,aAAKO,gBAAL,CAAsBD,kBAAtB,EAA0CtJ,WAAW,CAAC9B,OAAtD,EAA+D;AAC3DsL,UAAAA,eAAe,EAAE,UAAS3E,CAAT,EAAY;AACzBsC,YAAAA,KAAK,CAACsC,gBAAN,CAAuBC,cAAvB,CAAsC7E,CAAC,CAAC8E,OAAF,CAAU,CAAV,CAAtC,EAAoD9E,CAAC,CAAC+E,UAAtD;AACH;AAH0D,SAA/D;AAKH;;AACD,UAAI,CAAC,GAAG7K,OAAO,CAACuI,SAAZ,GAAJ,EAA8B;AAC1BzI,QAAAA,iBAAiB,CAACX,OAAlB,CAA0B2L,GAA1B,CAA8B,YAAW;AACrC1C,UAAAA,KAAK,CAAC2C,uBAAN;;AACA3C,UAAAA,KAAK,CAACJ,mBAAN,GAA4BgD,UAAU,CAAC,YAAW;AAC9C,mBAAO5C,KAAK,CAAC6C,qBAAN,EAAP;AACH,WAFqC,EAEnC,GAFmC,CAAtC;AAGH,SALD;AAMH;;AACD,WAAKC,wBAAL,CAA8B3J,SAAS,CAACpC,OAAV,CAAkBgM,kCAAhD,EAAoF,KAAKC,yBAAL,EAApF;;AACA,WAAKF,wBAAL,CAA8B3J,SAAS,CAACpC,OAAV,CAAkBkM,yBAAhD,EAA2E,KAAKC,iBAAL,EAA3E;AACH;AAnEF,GAXmB,EA+EnB;AACCjJ,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAKqE,mBAAL,GAA2B,KAAK,CAAhC;;AACA,WAAKkD,qBAAL;;AACA,WAAKR,uBAAL;AACH;AANF,GA/EmB,EAsFnB;AACC1I,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAKgF,6BAAT,EAAwC;AACpC,aAAKA,6BAAL,CAAmCzG,IAAnC,CAAwC,IAAxC;AACH;;AACD,UAAI,KAAK6G,gCAAT,EAA2C;AACvC,aAAKA,gCAAL,CAAsC7G,IAAtC,CAA2C,IAA3C;AACH;;AACD,UAAI,KAAKwH,8BAAT,EAAyC;AACrC,aAAKA,8BAAL,CAAoCxH,IAApC,CAAyC,IAAzC;AACH;;AACD,UAAI,KAAKiH,0BAAT,EAAqC;AACjC,aAAKA,0BAAL,CAAgCjH,IAAhC,CAAqC,IAArC;AACH;;AACD,UAAI,KAAKoH,sBAAT,EAAiC;AAC7B,aAAKA,sBAAL,CAA4BpH,IAA5B,CAAiC,IAAjC;AACH;AACJ;AAlBF,GAtFmB,EAyGnB;AACCF,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAKgE,mBAAL,GAA2B,CAAC,CAAhC,EAAmC;AAC/BwD,QAAAA,YAAY,CAAC,KAAKxD,mBAAN,CAAZ;AACH;;AACD,WAAKA,mBAAL,GAA2B,CAAC,CAA5B;AACH;AAPF,GAzGmB,EAiHnB;AACC3F,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK,CAAL,KAAW,KAAKqE,mBAApB,EAAyC;AACrC,aAAKA,mBAAL,GAA2B,CAAC,GAAGrI,OAAO,CAACuI,SAAZ,OAA4B,KAAKC,QAAL,GAAgBiD,UAAhB,KAA+B1E,+BAAtF;AACH;;AACD,aAAO,KAAKsB,mBAAZ;AACH;AAPF,GAjHmB,EAyHnB;AACChG,IAAAA,GAAG,EAAE,eADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK0G,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsBgB,YAAtB;AACH;AACJ;AANF,GAzHmB,EAgInB;AACCrJ,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI2H,MAAM,GAAG,IAAb;;AACA,WAAKC,oBAAL,GAA4BZ,UAAU,CAAC,YAAW;AAC9CW,QAAAA,MAAM,CAACE,aAAP;;AACA,eAAOF,MAAM,CAACC,oBAAd;AACH,OAHqC,EAGnC,GAHmC,CAAtC;AAIH;AARF,GAhImB,EAyInB;AACCvJ,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK4H,oBAAT,EAA+B;AAC3BJ,QAAAA,YAAY,CAAC,KAAKI,oBAAN,CAAZ;AACA,eAAO,KAAKA,oBAAZ;AACH;AACJ;AAPF,GAzImB,EAiJnB;AACCvJ,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK8H,sBAAL;AACH;AAJF,GAjJmB,EAsJnB;AACCzJ,IAAAA,GAAG,EAAE,kBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS+H,SAAT,EAAoB;AACvB,WAAKC,YAAL,CAAkBD,SAAlB;;AACA,WAAK9D,SAAL,CAAegE,IAAf,CAAoBF,SAApB;AACH;AALF,GAtJmB,EA4JnB;AACC1J,IAAAA,GAAG,EAAE,cADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS+H,SAAT,EAAoB;AACvBA,MAAAA,SAAS,CAACG,GAAV,CAAcC,SAAd,CAAwBrB,GAAxB,CAA4B,IAA5B;;AACA,WAAKJ,gBAAL,CAAsB0B,WAAtB,CAAkCL,SAAS,CAACG,GAA5C;AACH;AALF,GA5JmB,EAkKnB;AACC7J,IAAAA,GAAG,EAAE,qBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIqI,eAAe,GAAG,EAAtB;;AACA,UAAI,CAAC,KAAKzC,iBAAL,EAAL,EAA+B;AAC3ByC,QAAAA,eAAe,CAACJ,IAAhB,CAAqB1K,SAAS,CAACpC,OAAV,CAAkBkM,yBAAvC;AACH;;AACD,UAAI,CAAC,KAAKhC,yBAAL,EAAL,EAAuC;AACnCgD,QAAAA,eAAe,CAACJ,IAAhB,CAAqB1K,SAAS,CAACpC,OAAV,CAAkBgM,kCAAvC;AACH;;AACD,aAAOkB,eAAP;AACH;AAXF,GAlKmB,EA8KnB;AACChK,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIsI,MAAM,GAAG,IAAb;;AACA,aAAO;AACHC,QAAAA,cAAc,EAAE,UAASC,IAAT,EAAe;AAC3B,cAAIT,SAAS,GAAGS,IAAI,CAACT,SAArB;AACA,iBAAOO,MAAM,CAACG,gBAAP,CAAwBV,SAAxB,CAAP;AACH,SAJE;AAKHW,QAAAA,2BAA2B,EAAE,UAASC,KAAT,EAAgB;AACzC,cAAIZ,SAAS,GAAGY,KAAK,CAACZ,SAAtB;AACA,iBAAOO,MAAM,CAAC5B,gBAAP,CAAwBkC,mBAAxB,CAA4Cb,SAAS,CAACG,GAAtD,CAAP;AACH,SARE;AASHW,QAAAA,WAAW,EAAE,KAAKC,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CATV;AAUH,kBAAU,KAAKpE,MAAL,CAAY,QAAZ,CAVP;AAWHqE,QAAAA,SAAS,EAAE,KAAKxE,QAAL,EAXR;AAYH6D,QAAAA,eAAe,EAAE,KAAKY,mBAAL,EAZd;AAaHC,QAAAA,iBAAiB,EAAE,KAAKC,kBAAL,CAAwBJ,IAAxB,CAA6B,IAA7B,CAbhB;AAcHK,QAAAA,eAAe,EAAE,KAAKC,gBAAL,CAAsBN,IAAtB,CAA2B,IAA3B,CAdd;AAeHO,QAAAA,YAAY,EAAE,KAAKC,kBAAL;AAfX,OAAP;AAiBH;AArBF,GA9KmB,EAoMnB;AACClL,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS8B,CAAT,EAAY;AACf,cAAQA,CAAC,CAAC0H,OAAV;AACI,aAAKjM,SAAS,CAACpC,OAAV,CAAkBkM,yBAAvB;AACI,cAAI,KAAK3B,QAAT,EAAmB;AACf,iBAAKA,QAAL,CAAc+D,MAAd;AACH;;AACD;;AACJ,aAAKlM,SAAS,CAACpC,OAAV,CAAkBgM,kCAAvB;AACI,cAAI,KAAKrB,gBAAT,EAA2B;AACvB,iBAAKA,gBAAL,CAAsB2D,MAAtB;AACH;;AATT;AAWH;AAdF,GApMmB,EAmNnB;AACCpL,IAAAA,GAAG,EAAE,kBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS8B,CAAT,EAAY;AACf,WAAK4H,oBAAL,CAA0B;AACtBC,QAAAA,IAAI,EAAE7H,CAAC,CAAC6H;AADc,OAA1B;AAGH;AANF,GAnNmB,EA0NnB;AACCtL,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI4J,eAAe,GAAG,CAAC,GAAGxO,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCsJ,QAAhC,CAAyCvC,6BAAzC,EAAwE4C,QAAxE,CAAiF,KAAKN,QAAL,EAAjF,CAAtB;AACA,WAAKE,YAAL,GAAoB,KAAK8B,gBAAL,CAAsBoD,eAAtB,EAAuClN,WAAW,CAACvB,OAAnD,EAA4D,CAAC,GAAGO,OAAO,CAACmO,MAAZ,EAAoB,KAAKC,sBAAL,EAApB,EAAmD;AAC/HC,QAAAA,QAAQ,EAAE,KAAKpF,MAAL,CAAY,sBAAZ,CADqH;AAE/HqF,QAAAA,cAAc,EAAE;AAF+G,OAAnD,CAA5D,CAApB;AAIH;AARF,GA1NmB,EAmOnB;AACC3L,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,KAAK2E,MAAL,CAAY,wBAAZ,KAAyC,CAAC,KAAKsF,cAAL,EAAjD;AACH;AAJF,GAnOmB,EAwOnB;AACC5L,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkB;AACrB,UAAIsD,MAAM,GAAG,IAAb;;AACA,UAAI5F,YAAY,GAAG,CAAC,CAAC,GAAGtI,OAAO,CAACuI,SAAZ,GAApB;AACA,UAAI4F,UAAU,GAAG,CAAC,GAAG/O,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCsJ,QAAhC,CAAyCnC,wCAAzC,EAAmFwC,QAAnF,CAA4F8B,OAA5F,CAAjB;AACA,WAAK7B,eAAL,GAAuB,KAAKyB,gBAAL,CAAsB2D,UAAtB,EAAkCxN,WAAW,CAACxB,OAA9C,EAAuD,CAAC,GAAGO,OAAO,CAACmO,MAAZ,EAAoB,KAAKC,sBAAL,EAApB,EAAmD;AAC7HC,QAAAA,QAAQ,EAAE,KAAKpF,MAAL,CAAY,yBAAZ,CADmH;AAE7HyF,QAAAA,YAAY,EAAE;AAF+G,OAAnD,CAAvD,CAAvB;;AAIA,WAAKC,6BAAL,CAAmCF,UAAnC,EAA+CvD,OAA/C,EAAwDtC,YAAxD;;AACA,WAAKU,6BAAL,GAAqC,YAAW;AAC5CkF,QAAAA,MAAM,CAACnF,eAAP,CAAuBJ,MAAvB,CAA8B,cAA9B,EAA8CuF,MAAM,CAACX,kBAAP,EAA9C;AACH,OAFD;AAGH;AAdF,GAxOmB,EAuPnB;AACClL,IAAAA,GAAG,EAAE,+BADN;AAEC2B,IAAAA,KAAK,EAAE,UAASmK,UAAT,EAAqBvD,OAArB,EAA8BtC,YAA9B,EAA4C;AAC/C,UAAIA,YAAJ,EAAkB;AACd;AACH;;AACDzI,MAAAA,SAAS,CAACV,OAAV,CAAkBmP,KAAlB,CAAwBH,UAAxB,EAAoC;AAChCI,QAAAA,EAAE,EAAE,UAD4B;AAEhCC,QAAAA,EAAE,EAAE,UAF4B;AAGhCC,QAAAA,EAAE,EAAE7D,OAH4B;AAIhC8D,QAAAA,MAAM,EAAEjI,6BAA6B,GAAG,GAAhC,GAAsCA;AAJd,OAApC;AAMH;AAZF,GAvPmB,EAoQnB;AACCpE,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,eAAe,KAAK2E,MAAL,CAAY,oBAAZ,CAAf,IAAoD,CAAC,KAAKsF,cAAL,EAA5D;AACH;AAJF,GApQmB,EAyQnB;AACC5L,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,cAAc,KAAK2E,MAAL,CAAY,oBAAZ,CAAd,IAAmD,WAAW,KAAKA,MAAL,CAAY,oBAAZ,CAAX,IAAgD,CAAC,KAAK4E,kBAAL,EAA3G;AACH;AAJF,GAzQmB,EA8QnB;AACClL,IAAAA,GAAG,EAAE,gBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkB;AACrB,UAAI+D,MAAM,GAAG,IAAb;;AACA,UAAIrG,YAAY,GAAG,CAAC,CAAC,GAAGtI,OAAO,CAACuI,SAAZ,GAApB;AACA,UAAIqG,QAAQ,GAAG,CAAC,GAAGxP,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC2J,QAAhC,CAAyC8B,OAAzC,CAAf;;AACA,UAAIiE,MAAM,GAAG,KAAKC,iBAAL,CAAuBlE,OAAvB,EAAgCtC,YAAhC,CAAb;;AACA,WAAKoB,QAAL,GAAgB,KAAKc,gBAAL,CAAsBoE,QAAtB,EAAgCzN,YAAY,CAAChC,OAA7C,EAAsD;AAClEmO,QAAAA,YAAY,EAAE,KAAKC,kBAAL,EADoD;AAElEwB,QAAAA,SAAS,EAAE,KAAKzD,iBAAL,EAFuD;AAGlE0B,QAAAA,SAAS,EAAE,KAAKxE,QAAL,EAHuD;AAIlEwG,QAAAA,MAAM,EAAEH,MAAM,CAACG,MAJmD;AAKlEC,QAAAA,YAAY,EAAErE,OALoD;AAMlEsE,QAAAA,OAAO,EAAEL,MAAM,CAACK,OANkD;AAOlEC,QAAAA,OAAO,EAAEN,MAAM,CAACM,OAPkD;AAQlEC,QAAAA,UAAU,EAAE,KAAKzG,MAAL,CAAY,oBAAZ,CARsD;AASlE0G,QAAAA,aAAa,EAAE,KAAKC,iBAAL,EATmD;AAUlEC,QAAAA,YAAY,EAAE,KAAK5G,MAAL,CAAY,eAAZ,CAVoD;AAWlE6G,QAAAA,uBAAuB,EAAE,UAAS1J,CAAT,EAAY;AACjC,cAAIwC,YAAJ,EAAkB;AACd;AACH;;AACDqG,UAAAA,MAAM,CAACjE,gBAAP,CAAwB+E,aAAxB,CAAsC3J,CAAC,CAAC0C,QAAF,CAAW,CAAX,CAAtC,EAAqD,YAAY1C,CAAC,CAAC4J,WAAnE,EAAgF5J,CAAC,CAAC6J,MAAF,IAAY7J,CAAC,CAAC8J,QAA9F,EAAwG;AACpGC,YAAAA,gBAAgB,EAAE7I,6BADkF;AAEpG8I,YAAAA,mBAAmB,EAAEnB,MAAM,CAAChG,MAAP,CAAc,0BAAd,CAF+E;AAGpGoH,YAAAA,mBAAmB,EAAE;AACjB,6BAAejK,CAAC,CAACkK;AADA;AAH+E,WAAxG;AAOH,SAtBiE;AAuBlEC,QAAAA,eAAe,EAAE,UAASnK,CAAT,EAAY;AACzB,cAAIwC,YAAJ,EAAkB;AACd;AACH;;AACDqG,UAAAA,MAAM,CAACjE,gBAAP,CAAwBwF,kBAAxB,CAA2CpK,CAAC,CAACqK,IAA7C,EAAmDrK,CAAC,CAACsK,kBAArD;AACH,SA5BiE;AA6BlEC,QAAAA,oBAAoB,EAAE,UAASvK,CAAT,EAAY;AAC9B,cAAIwC,YAAJ,EAAkB;AACd;AACH;;AACDqG,UAAAA,MAAM,CAACzD,wBAAP,CAAgC3J,SAAS,CAACpC,OAAV,CAAkBkM,yBAAlD,EAA6EvF,CAAC,CAACwK,OAA/E;;AACA,cAAI3B,MAAM,CAAC7E,gBAAX,EAA6B;AACzB,gBAAIhE,CAAC,CAACwK,OAAF,IAAa3B,MAAM,CAACpB,kBAAP,EAAjB,EAA8C;AAC1CoB,cAAAA,MAAM,CAAC7E,gBAAP,CAAwByG,IAAxB;AACH;AACJ;;AACD,cAAI5B,MAAM,CAAC5F,eAAX,EAA4B;AACxB,gBAAIjD,CAAC,CAACwK,OAAF,IAAa3B,MAAM,CAACpB,kBAAP,EAAjB,EAA8C;AAC1CoB,cAAAA,MAAM,CAAC6B,qBAAP,GAA+BlQ,UAAU,CAACgE,MAAX,CAAkB9D,IAAI,CAACrB,OAAL,CAAasR,UAAb,EAAlB,CAA/B;;AACA9B,cAAAA,MAAM,CAAC5F,eAAP,CAAuBP,QAAvB,GAAkCkI,GAAlC,CAAsC,QAAtC,EAAgD/B,MAAM,CAAC6B,qBAAvD;;AACA7B,cAAAA,MAAM,CAAC5F,eAAP,CAAuBP,QAAvB,GAAkCkI,GAAlC,CAAsC,WAAtC,EAAmD,MAAnD;AACH;AACJ;;AACD,cAAI/B,MAAM,CAACpF,YAAX,EAAyB;AACrBoF,YAAAA,MAAM,CAACpF,YAAP,CAAoBf,QAApB,GAA+BkI,GAA/B,CAAmC,SAAnC,EAA8C5K,CAAC,CAACwK,OAAF,IAAa3B,MAAM,CAACpB,kBAAP,EAAb,GAA2C,GAA3C,GAAiD,GAA/F;;AACAoB,YAAAA,MAAM,CAACpF,YAAP,CAAoBf,QAApB,GAA+BkI,GAA/B,CAAmC,eAAnC,EAAoD5K,CAAC,CAACwK,OAAF,IAAa3B,MAAM,CAACpB,kBAAP,EAAb,GAA2C,MAA3C,GAAoD,EAAxG;AACH;AACJ,SAlDiE;AAmDlEoD,QAAAA,mBAAmB,EAAE,UAAS7K,CAAT,EAAY;AAC7B,cAAI,CAACA,CAAC,CAACwK,OAAH,IAAc,CAAC3B,MAAM,CAACiC,iBAA1B,EAA6C;AACzCjC,YAAAA,MAAM,CAAC9C,aAAP;AACH;;AACD,cAAI,CAACvD,YAAL,EAAmB;AACf,gBAAIqG,MAAM,CAAC5F,eAAX,EAA4B;AACxB,kBAAI,CAACjD,CAAC,CAACwK,OAAH,IAAc3B,MAAM,CAACpB,kBAAP,EAAd,IAA6CoB,MAAM,CAAC6B,qBAAxD,EAA+E;AAC3ElQ,gBAAAA,UAAU,CAACuQ,MAAX,CAAkBlC,MAAM,CAAC6B,qBAAzB;;AACA7B,gBAAAA,MAAM,CAAC5F,eAAP,CAAuBP,QAAvB,GAAkCkI,GAAlC,CAAsC,QAAtC,EAAgD,EAAhD;;AACA/B,gBAAAA,MAAM,CAAC5F,eAAP,CAAuBP,QAAvB,GAAkCkI,GAAlC,CAAsC,WAAtC,EAAmD,EAAnD;;AACA/B,gBAAAA,MAAM,CAAC6B,qBAAP,GAA+B,KAAK,CAApC;AACH;AACJ;AACJ;AACJ,SAjEiE;AAkElE3D,QAAAA,WAAW,EAAE,KAAKC,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B;AAlEqD,OAAtD,CAAhB;;AAoEA,WAAKpD,sBAAL,GAA8B,YAAW;AACrC,YAAIkF,MAAM,GAAGF,MAAM,CAACG,iBAAP,CAAyBlE,OAAzB,EAAkCtC,YAAlC,CAAb;;AACAqG,QAAAA,MAAM,CAACjF,QAAP,CAAgBf,MAAhB,CAAuB,QAAvB,EAAiCkG,MAAM,CAACG,MAAxC;;AACA,YAAI8B,gBAAgB,GAAGnC,MAAM,CAACjF,QAAP,CAAgBf,MAAhB,CAAuB,cAAvB,CAAvB;;AACA,YAAImI,gBAAgB,KAAKnC,MAAM,CAACpB,kBAAP,EAAzB,EAAsD;AAClDoB,UAAAA,MAAM,CAACjF,QAAP,CAAgBf,MAAhB,CAAuB;AACnB2E,YAAAA,YAAY,EAAEqB,MAAM,CAACpB,kBAAP,EADK;AAEnBwB,YAAAA,SAAS,EAAEJ,MAAM,CAACrD,iBAAP;AAFQ,WAAvB;;AAIAqD,UAAAA,MAAM,CAACzD,wBAAP,CAAgC3J,SAAS,CAACpC,OAAV,CAAkBkM,yBAAlD,EAA6EsD,MAAM,CAACrD,iBAAP,EAA7E;AACH;;AACDqD,QAAAA,MAAM,CAACjF,QAAP,CAAgBqH,eAAhB;AACH,OAZD;AAaH;AAxFF,GA9QmB,EAuWnB;AACC1O,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkBtC,YAAlB,EAAgC;AACnC,UAAItD,MAAM,GAAG;AACTkK,QAAAA,OAAO,EAAEzI,6BADA;AAET0I,QAAAA,OAAO,EAAE1I,6BAFA;AAGTuI,QAAAA,MAAM,EAAE,CAAC1G,YAAD,GAAgBsC,OAAO,CAACoE,MAAR,KAAmB,IAAIvI,6BAAvC,GAAuE;AAHtE,OAAb;;AAKA,UAAI,KAAKsC,eAAL,IAAwB,CAACT,YAA7B,EAA2C;AACvCtD,QAAAA,MAAM,CAACmK,OAAP,IAAkB,KAAKpG,eAAL,CAAqBP,QAArB,GAAgCwI,WAAhC,KAAgDvK,6BAAlE;AACAzB,QAAAA,MAAM,CAACgK,MAAP,IAAiB,KAAKjG,eAAL,CAAqBP,QAArB,GAAgCwI,WAAhC,KAAgDvK,6BAAjE;AACH;;AACD,UAAI,KAAK8C,YAAL,IAAqB,CAACjB,YAA1B,EAAwC;AACpCtD,QAAAA,MAAM,CAACgK,MAAP,IAAiB,KAAKzF,YAAL,CAAkBf,QAAlB,GAA6BwI,WAA7B,KAA6C,KAAKC,sBAAL,CAA4B3I,YAA5B,CAA9D;AACH;;AACD,aAAOtD,MAAP;AACH;AAhBF,GAvWmB,EAwXnB;AACC3C,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkB;AACrB,UAAIsG,MAAM,GAAG,IAAb;;AACA,UAAI5I,YAAY,GAAG,CAAC,CAAC,GAAGtI,OAAO,CAACuI,SAAZ,GAApB;AACA,UAAI4F,UAAU,GAAG,CAAC,GAAG/O,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCsJ,QAAhC,CAAyCnC,wCAAzC,EAAmFwC,QAAnF,CAA4F8B,OAA5F,CAAjB;AACA,WAAKrB,YAAL,GAAoB,KAAKiB,gBAAL,CAAsB2D,UAAtB,EAAkCvN,WAAW,CAACzB,OAA9C,EAAuD,CAAC,GAAGO,OAAO,CAACmO,MAAZ,EAAoB,KAAKC,sBAAL,EAApB,EAAmD;AAC1HC,QAAAA,QAAQ,EAAE,KAAKpF,MAAL,CAAY,sBAAZ,CADgH;AAE1HyF,QAAAA,YAAY,EAAE;AAF4G,OAAnD,CAAvD,CAApB;;AAIA,WAAK+C,0BAAL,CAAgChD,UAAhC,EAA4CvD,OAA5C,EAAqDtC,YAArD;;AACA,WAAKkB,0BAAL,GAAkC,YAAW;AACzC0H,QAAAA,MAAM,CAACC,0BAAP,CAAkChD,UAAlC,EAA8CvD,OAA9C,EAAuDtC,YAAvD;AACH,OAFD;AAGH;AAdF,GAxXmB,EAuYnB;AACCjG,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASsE,YAAT,EAAuB;AAC1B,UAAIA,YAAJ,EAAkB;AACd;AACH;;AACD,UAAItD,MAAM,GAAGyB,6BAAb;;AACA,UAAI,KAAK8C,YAAL,IAAqB,KAAKJ,kBAA9B,EAAkD;AAC9CnE,QAAAA,MAAM,IAAI,CAAC,KAAKmE,kBAAL,CAAwBX,QAAxB,GAAmCwI,WAAnC,KAAmD,KAAKzH,YAAL,CAAkBf,QAAlB,GAA6BwI,WAA7B,EAApD,IAAkG,CAA5G;AACH;;AACD,aAAOhM,MAAP;AACH;AAXF,GAvYmB,EAmZnB;AACC3C,IAAAA,GAAG,EAAE,4BADN;AAEC2B,IAAAA,KAAK,EAAE,UAASmK,UAAT,EAAqBvD,OAArB,EAA8BtC,YAA9B,EAA4C;AAC/C,UAAIA,YAAJ,EAAkB;AACd;AACH;;AACDzI,MAAAA,SAAS,CAACV,OAAV,CAAkBmP,KAAlB,CAAwBH,UAAxB,EAAoC;AAChCI,QAAAA,EAAE,EAAE,aAD4B;AAEhCC,QAAAA,EAAE,EAAE,aAF4B;AAGhCC,QAAAA,EAAE,EAAE7D,OAH4B;AAIhC8D,QAAAA,MAAM,EAAEjI,6BAA6B,GAAG,IAAhC,GAAuC,KAAKwK,sBAAL,CAA4B3I,YAA5B;AAJf,OAApC;AAMH;AAZF,GAnZmB,EAganB;AACCjG,IAAAA,GAAG,EAAE,2BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,eAAe,KAAK2E,MAAL,CAAY,4BAAZ,CAAf,IAA4D,CAAC,KAAKsF,cAAL,EAApE;AACH;AAJF,GAhamB,EAqanB;AACC5L,IAAAA,GAAG,EAAE,2BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,cAAc,KAAK2E,MAAL,CAAY,4BAAZ,CAArB;AACH;AAJF,GAramB,EA0anB;AACCtG,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkB;AACrB,UAAIwG,MAAM,GAAG,IAAb;;AACA,UAAI9I,YAAY,GAAG,CAAC,CAAC,GAAGtI,OAAO,CAACuI,SAAZ,GAApB;AACA,UAAI4F,UAAU,GAAG,CAAC,GAAG/O,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCsJ,QAAhC,CAAyCnC,wCAAzC,EAAmFmC,QAAnF,CAA4FlC,gDAA5F,EAA8IuC,QAA9I,CAAuJ8B,OAAvJ,CAAjB;AACA,WAAKzB,kBAAL,GAA0B,KAAKqB,gBAAL,CAAsB2D,UAAtB,EAAkCtN,WAAW,CAAC1B,OAA9C,EAAuD,CAAC,GAAGO,OAAO,CAACmO,MAAZ,EAAoB,KAAKC,sBAAL,EAApB,EAAmD;AAChIuD,QAAAA,iBAAiB,EAAE,WAD6G;AAEhIC,QAAAA,UAAU,EAAE,SAFoH;AAGhIlD,QAAAA,YAAY,EAAE;AAHkH,OAAnD,CAAvD,CAA1B;;AAKA,WAAKmD,gCAAL,CAAsCpD,UAAtC,EAAkDvD,OAAlD,EAA2DtC,YAA3D;;AACA,WAAKc,gCAAL,GAAwC,YAAW;AAC/CgI,QAAAA,MAAM,CAACG,gCAAP,CAAwCpD,UAAxC,EAAoDvD,OAApD,EAA6DtC,YAA7D;AACH,OAFD;AAGH;AAfF,GA1amB,EA0bnB;AACCjG,IAAAA,GAAG,EAAE,kCADN;AAEC2B,IAAAA,KAAK,EAAE,UAASmK,UAAT,EAAqBvD,OAArB,EAA8BtC,YAA9B,EAA4C;AAC/C,UAAIA,YAAJ,EAAkB;AACd;AACH;;AACDzI,MAAAA,SAAS,CAACV,OAAV,CAAkBmP,KAAlB,CAAwBH,UAAxB,EAAoC;AAChCI,QAAAA,EAAE,EAAE,cAD4B;AAEhCC,QAAAA,EAAE,EAAE,cAF4B;AAGhCC,QAAAA,EAAE,EAAE7D,OAH4B;AAIhC8D,QAAAA,MAAM,EAAE,MAAMjI,6BAAN,GAAsC,IAAtC,GAA6CA;AAJrB,OAApC;AAMH;AAZF,GA1bmB,EAucnB;AACCpE,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkB;AACrB,UAAI4G,MAAM,GAAG,IAAb;;AACA,UAAIlJ,YAAY,GAAG,CAAC,CAAC,GAAGtI,OAAO,CAACuI,SAAZ,GAApB;AACA,UAAIkJ,gBAAgB,GAAG,CAAC,GAAGrS,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC2J,QAAhC,CAAyC8B,OAAzC,CAAvB;AACA,UAAIsE,OAAO,GAAGzI,6BAAd;AACA,UAAI0I,OAAO,GAAG,IAAI1I,6BAAJ,IAAqC,CAAC6B,YAAD,GAAgB,KAAKa,kBAAL,CAAwBX,QAAxB,GAAmCwI,WAAnC,EAAhB,GAAmE,CAAxG,CAAd;AACA,WAAKlH,gBAAL,GAAwB,KAAKU,gBAAL,CAAsBiH,gBAAtB,EAAwCrQ,YAAY,CAACjC,OAArD,EAA8D;AAClFmO,QAAAA,YAAY,EAAE,KAAKC,kBAAL,EADoE;AAElFwB,QAAAA,SAAS,EAAE,KAAK3D,yBAAL,EAFuE;AAGlF4B,QAAAA,SAAS,EAAE,KAAKxE,QAAL,EAHuE;AAIlFyG,QAAAA,YAAY,EAAErE,OAJoE;AAKlFsE,QAAAA,OAAO,EAAEA,OALyE;AAMlFC,QAAAA,OAAO,EAAEA,OANyE;AAOlFuC,QAAAA,YAAY,EAAE,KAAK/I,MAAL,CAAY,sBAAZ,CAPoE;AAQlFgJ,QAAAA,eAAe,EAAE,UAAS7L,CAAT,EAAY;AACzBA,UAAAA,CAAC,CAAC8L,OAAF,GAAYJ,MAAM,CAAChH,gBAAP,CAAwB1E,CAAC,CAAC8E,OAA1B,EAAmCnK,UAAU,CAACtB,OAA9C,EAAuD,CAAC,GAAGO,OAAO,CAACmO,MAAZ,EAAoB2D,MAAM,CAAC1D,sBAAP,EAApB,EAAqD;AACpHC,YAAAA,QAAQ,EAAEjI,CAAC,CAACiI,QADwG;AAEpHK,YAAAA,YAAY,EAAE,OAFsG;AAGpHyD,YAAAA,iBAAiB,EAAE;AAHiG,WAArD,CAAvD,CAAZ;AAKH,SAdiF;AAelFxB,QAAAA,oBAAoB,EAAE,UAASvK,CAAT,EAAY;AAC9B,cAAIwC,YAAJ,EAAkB;AACd;AACH;;AACDkJ,UAAAA,MAAM,CAACM,+BAAP,CAAuChM,CAAC,CAACiG,SAAzC;;AACAyF,UAAAA,MAAM,CAACtG,wBAAP,CAAgC3J,SAAS,CAACpC,OAAV,CAAkBgM,kCAAlD,EAAsFrF,CAAC,CAACwK,OAAxF;;AACA,cAAIkB,MAAM,CAAC9H,QAAX,EAAqB;AACjB,gBAAI5D,CAAC,CAACwK,OAAF,IAAakB,MAAM,CAACjE,kBAAP,EAAjB,EAA8C;AAC1CiE,cAAAA,MAAM,CAAC9H,QAAP,CAAgB6G,IAAhB;AACH;AACJ;AACJ,SA1BiF;AA2BlFI,QAAAA,mBAAmB,EAAE,UAAS7K,CAAT,EAAY;AAC7B,cAAI,CAACA,CAAC,CAACwK,OAAH,IAAc,CAACkB,MAAM,CAACZ,iBAA1B,EAA6C;AACzCY,YAAAA,MAAM,CAAC3F,aAAP;AACH;AACJ,SA/BiF;AAgClFkG,QAAAA,sBAAsB,EAAE,UAASC,KAAT,EAAgB;AACpC,cAAIjG,SAAS,GAAGiG,KAAK,CAACjG,SAAtB;AACA,iBAAOyF,MAAM,CAACM,+BAAP,CAAuC/F,SAAvC,CAAP;AACH,SAnCiF;AAoClFc,QAAAA,WAAW,EAAE,KAAKC,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B;AApCqE,OAA9D,CAAxB;;AAsCA,WAAKhD,8BAAL,GAAsC,YAAW;AAC7C,YAAI+G,gBAAgB,GAAGU,MAAM,CAAC1H,gBAAP,CAAwBnB,MAAxB,CAA+B,cAA/B,CAAvB;;AACA,YAAImI,gBAAgB,KAAKU,MAAM,CAACjE,kBAAP,EAAzB,EAAsD;AAClDiE,UAAAA,MAAM,CAAC1H,gBAAP,CAAwBnB,MAAxB,CAA+B;AAC3B2E,YAAAA,YAAY,EAAEkE,MAAM,CAACjE,kBAAP,EADa;AAE3BwB,YAAAA,SAAS,EAAEyC,MAAM,CAACpG,yBAAP;AAFgB,WAA/B;;AAIAoG,UAAAA,MAAM,CAACtG,wBAAP,CAAgC3J,SAAS,CAACpC,OAAV,CAAkBgM,kCAAlD,EAAsFqG,MAAM,CAACpG,yBAAP,EAAtF;AACH;AACJ,OATD;AAUH;AAxDF,GAvcmB,EAggBnB;AACC/I,IAAAA,GAAG,EAAE,iCADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS+H,SAAT,EAAoB;AACvB,UAAIkG,MAAM,GAAG,IAAb;;AACAlG,MAAAA,SAAS,CAACmG,iBAAV,GAA8BC,OAA9B,CAAsC,UAASP,OAAT,EAAkB;AACpDK,QAAAA,MAAM,CAACvH,gBAAP,CAAwBkC,mBAAxB,CAA4CgF,OAAO,CAAC1F,GAApD;AACH,OAFD;AAGH;AAPF,GAhgBmB,EAwgBnB;AACC7J,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK8H,sBAAL;AACH;AAJF,GAxgBmB,EA6gBnB;AACCzJ,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkB;AACrB,UAAIwH,OAAO,GAAG,IAAd;;AACA,UAAIC,YAAY,GAAG,CAAC,GAAGjT,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC2J,QAAhC,CAAyC8B,OAAzC,CAAnB;AACA,WAAKV,YAAL,GAAoB,KAAKM,gBAAL,CAAsB6H,YAAtB,EAAoCvR,WAAW,CAAC3B,OAAZ,CAAoBmT,yBAAxD,EAAmF;AACnGvE,QAAAA,QAAQ,EAAE,KAAKpF,MAAL,CAAY,sBAAZ,CADyF;AAEnG4D,QAAAA,cAAc,EAAE,UAASgG,KAAT,EAAgB;AAC5B,cAAIxG,SAAS,GAAGwG,KAAK,CAACxG,SAAtB;AACA,iBAAOqG,OAAO,CAACpG,YAAR,CAAqBD,SAArB,CAAP;AACH,SALkG;AAMnGsE,QAAAA,oBAAoB,EAAE,UAASmC,KAAT,EAAgB;AAClC,cAAIzG,SAAS,GAAGyG,KAAK,CAACzG,SAAtB;AACA,iBAAOqG,OAAO,CAAC1H,gBAAR,CAAyBkC,mBAAzB,CAA6Cb,SAAS,CAACG,GAAvD,CAAP;AACH,SATkG;AAUnGuG,QAAAA,WAAW,EAAE,UAASC,QAAT,EAAmB;AAC5B,iBAAON,OAAO,CAACO,wBAAR,CAAiCD,QAAQ,CAAClF,OAA1C,CAAP;AACH,SAZkG;AAanG,kBAAU,KAAK7E,MAAL,CAAY,QAAZ,CAbyF;AAcnG0D,QAAAA,eAAe,EAAE,KAAKY,mBAAL,EAdkF;AAenGC,QAAAA,iBAAiB,EAAE,KAAKC,kBAAL,CAAwBJ,IAAxB,CAA6B,IAA7B,CAfgF;AAgBnGK,QAAAA,eAAe,EAAE,KAAKC,gBAAL,CAAsBN,IAAtB,CAA2B,IAA3B;AAhBkF,OAAnF,CAApB;AAkBH;AAvBF,GA7gBmB,EAqiBnB;AACC1K,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkB;AACrB,UAAIgI,OAAO,GAAG,IAAd;;AACA,UAAItK,YAAY,GAAG,CAAC,CAAC,GAAGtI,OAAO,CAACuI,SAAZ,GAApB;AACA,UAAIqH,QAAQ,GAAG,KAAKjH,MAAL,CAAY,yBAAZ,CAAf;AACA,UAAI+G,WAAW,GAAG,KAAK/G,MAAL,CAAY,4BAAZ,CAAlB;AACA,UAAIgH,MAAM,GAAG,KAAKhH,MAAL,CAAY,uBAAZ,CAAb;AACA,UAAIkK,eAAe,GAAG,CAAC,GAAGzT,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC2J,QAAhC,CAAyC8B,OAAzC,CAAtB;AACA,WAAKR,eAAL,GAAuB,KAAKI,gBAAL,CAAsBqI,eAAtB,EAAuC9R,WAAW,CAAC5B,OAAnD,EAA4D;AAC/EoQ,QAAAA,YAAY,EAAE,KAAK5G,MAAL,CAAY,sBAAZ,CADiE;AAE/EmK,QAAAA,OAAO,EAAE,UAAShN,CAAT,EAAY;AACjB,cAAIwC,YAAJ,EAAkB;AACd;AACH;;AACD,cAAIyK,iBAAiB,GAAG,CAAC,GAAG3T,SAAS,CAACD,OAAd,EAAuB2G,CAAC,CAAC0C,QAAzB,CAAxB;AACA,cAAIwK,WAAW,GAAG,YAAYtD,WAA9B;;AACA,cAAI,CAACC,MAAD,IAAW,CAACC,QAAZ,IAAwB,CAACoD,WAA7B,EAA0C;AACtC,gBAAIC,KAAK,GAAGL,OAAO,CAACtD,iBAAR,GAA4B4D,MAA5B,CAAmC,UAASC,CAAT,EAAY;AACvD,qBAAOA,CAAC,CAACvD,QAAF,KAAe9J,CAAC,CAAC8J,QAAxB;AACH,aAFW,EAET,CAFS,CAAZ;;AAGA,gBAAIqD,KAAJ,EAAW;AACPD,cAAAA,WAAW,GAAG,YAAYC,KAAK,CAACvD,WAAhC;AACH;AACJ;;AACDkD,UAAAA,OAAO,CAAClI,gBAAR,CAAyB0I,oBAAzB,CAA8CL,iBAAiB,CAAC,CAAD,CAA/D,EAAoEC,WAApE,EAAiFrD,MAAM,IAAIC,QAAV,IAAsB9J,CAAC,CAAC8J,QAAzG,EAAmH;AAC/GC,YAAAA,gBAAgB,EAAE3I,qCAD6F;AAE/G4I,YAAAA,mBAAmB,EAAE8C,OAAO,CAACjK,MAAR,CAAe,iCAAf;AAF0F,WAAnH,EAGG,UAAS0K,SAAT,EAAoB;AACnBvN,YAAAA,CAAC,CAACwN,QAAF,CAAWD,SAAX;;AACAT,YAAAA,OAAO,CAAC/G,aAAR;;AACA/F,YAAAA,CAAC,CAACyK,IAAF;AACH,WAPD;AAQH;AAxB8E,OAA5D,CAAvB;AA0BH;AAnCF,GAriBmB,EAykBnB;AACClO,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,UAASwJ,OAAT,EAAkB+F,OAAlB,EAA2B;AAC9B,WAAKtL,SAAL,CAAekK,OAAf,CAAuB,UAASqB,EAAT,EAAa;AAChCA,QAAAA,EAAE,CAACC,iBAAH,CAAqBjG,OAArB,EAA8B+F,OAA9B;AACH,OAFD;AAGH;AANF,GAzkBmB,EAglBnB;AACClR,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,UAASwJ,OAAT,EAAkB;AACrB,UAAIkG,gBAAgB,GAAGpS,YAAY,CAACnC,OAAb,CAAqBwU,mBAArB,CAAyCnG,OAAzC,CAAvB;;AACA,UAAIkG,gBAAJ,EAAsB;AAClB,aAAKE,WAAL,CAAiBF,gBAAjB;AACH;;AACD,aAAO,CAAC,CAACA,gBAAT;AACH;AARF,GAhlBmB,EAylBnB;AACCrR,IAAAA,GAAG,EAAE,eADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4G,OAAT,EAAkB;AACrB,UAAIiJ,cAAc,GAAG,CAAC,GAAGzU,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC2J,QAAhC,CAAyC8B,OAAzC,CAArB;AACA,WAAKkJ,eAAL,GAAuB,KAAKtJ,gBAAL,CAAsBqJ,cAAtB,EAAsC7S,WAAW,CAAC7B,OAAlD,EAA2D,EAA3D,CAAvB;AACH;AALF,GAzlBmB,EA+lBnB;AACCkD,IAAAA,GAAG,EAAE,aADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS0P,gBAAT,EAA2B;AAC9B,UAAI,KAAKI,eAAT,EAA0B;AACtB,aAAKA,eAAL,CAAqBnL,MAArB,CAA4B,cAA5B,EAA4C+K,gBAAgB,CAACK,YAA7D;;AACA,aAAKD,eAAL,CAAqBnL,MAArB,CAA4B,UAA5B,EAAwC,YAAW;AAC/C,eAAKkD,aAAL;AACH,SAFuC,CAEtCkB,IAFsC,CAEjC,IAFiC,CAAxC;;AAGA,aAAK+G,eAAL,CAAqBnL,MAArB,CAA4B,SAA5B,EAAuC,KAAK+B,gBAAL,CAAsBsJ,UAAtB,CAAiCN,gBAAgB,CAAClG,OAAlD,CAAvC;;AACA,aAAKsG,eAAL,CAAqBnL,MAArB,CAA4B,OAA5B,EAAqC+K,gBAAgB,CAACO,KAAtD;;AACA,aAAKH,eAAL,CAAqBI,KAArB;AACH;AACJ;AAZF,GA/lBmB,EA4mBnB;AACC7R,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAKmQ,iBAAL,GAAyB,CAAC,GAAG/U,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgCsJ,QAAhC,CAAyCjC,+BAAzC,CAAzB;;AACA,WAAKgE,gBAAL,CAAsB,KAAK2J,iBAA3B,EAA8C3U,eAAe,CAACL,OAA9D,EAAuE,EAAvE;;AACA,UAAIyL,OAAO,GAAG,KAAKX,SAAL,IAAkB,KAAKzB,QAAL,EAAhC;AACAoC,MAAAA,OAAO,CAACwJ,MAAR,CAAe,KAAKD,iBAApB;AACH;AAPF,GA5mBmB,EAonBnB;AACC9R,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,CAAC,KAAKmQ,iBAAV,EAA6B;AACzB;AACH;;AACD,WAAKA,iBAAL,CAAuBtD,MAAvB;;AACA,WAAKsD,iBAAL,GAAyB,IAAzB;AACH;AARF,GApnBmB,EA6nBnB;AACC9R,IAAAA,GAAG,EAAE,cADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIqQ,WAAW,GAAG,CAAC,GAAGtU,QAAQ,CAACuU,UAAb,GAAlB;AAAA,UACIC,cAAc,GAAGF,WAAW,CAACE,cADjC;;AAEA,WAAK7J,gBAAL,GAAwB,IAAI6J,cAAJ,EAAxB;AACA,WAAK7J,gBAAL,CAAsByB,SAAtB,GAAkC,KAAKqI,sBAAL,CAA4BzH,IAA5B,CAAiC,IAAjC,CAAlC;AACA,WAAKrC,gBAAL,CAAsB+J,cAAtB,GAAuC,KAAKC,wBAAL,CAA8B3H,IAA9B,CAAmC,IAAnC,CAAvC;AACA,WAAKrC,gBAAL,CAAsBiK,aAAtB,GAAsC,KAAKC,uBAAL,CAA6B7H,IAA7B,CAAkC,IAAlC,CAAtC;AACA,WAAKrC,gBAAL,CAAsBmK,aAAtB,GAAsC,KAAKC,uBAAL,CAA6B/H,IAA7B,CAAkC,IAAlC,CAAtC;AACA,WAAKrC,gBAAL,CAAsBqK,cAAtB,GAAuC,KAAKC,wBAAL,CAA8BjI,IAA9B,CAAmC,IAAnC,CAAvC;AACA,WAAKrC,gBAAL,CAAsBuK,aAAtB,GAAsC,KAAKC,uBAAL,CAA6BnI,IAA7B,CAAkC,IAAlC,CAAtC;AACA,WAAKrC,gBAAL,CAAsByK,aAAtB,GAAsC,KAAKC,uBAAL,CAA6BrI,IAA7B,CAAkC,IAAlC,CAAtC;AACA,WAAKrC,gBAAL,CAAsB2K,kBAAtB,GAA2C,KAAKC,sBAAL,CAA4BvI,IAA5B,CAAiC,IAAjC,CAA3C;AACA,WAAKrC,gBAAL,CAAsB6K,gBAAtB,GAAyC,KAAKC,oBAAL,CAA0BzI,IAA1B,CAA+B,IAA/B,CAAzC;AACA,WAAKrC,gBAAL,CAAsB+K,gBAAtB,GAAyC,KAAKC,oBAAL,CAA0B3I,IAA1B,CAA+B,IAA/B,CAAzC;AACA,WAAKrC,gBAAL,CAAsBiL,cAAtB,GAAuC,KAAKC,kBAAL,CAAwB7I,IAAxB,CAA6B,IAA7B,CAAvC;AACA,WAAKrC,gBAAL,CAAsBmL,kBAAtB,GAA2C,KAAKC,mBAAL,CAAyB/I,IAAzB,CAA8B,IAA9B,CAA3C;AACA,WAAKrC,gBAAL,CAAsBqL,iBAAtB,GAA0C,KAAKC,kBAAL,CAAwBjJ,IAAxB,CAA6B,IAA7B,CAA1C;AACA,WAAKrC,gBAAL,CAAsBuL,iBAAtB,GAA0C,KAAKC,kBAAL,CAAwBnJ,IAAxB,CAA6B,IAA7B,CAA1C;AACA,WAAKrC,gBAAL,CAAsByL,oBAAtB,GAA6C,KAAKC,qBAAL,CAA2BrJ,IAA3B,CAAgC,IAAhC,CAA7C;AACA,WAAKrC,gBAAL,CAAsB2L,oBAAtB,GAA6C,KAAKC,qBAAL,CAA2BvJ,IAA3B,CAAgC,IAAhC,CAA7C;;AACA,WAAKrC,gBAAL,CAAsB6L,cAAtB,CAAqCzL,GAArC,CAAyC;AACrC0L,QAAAA,eAAe,EAAE,KAAKC,qBAAL,CAA2B1J,IAA3B,CAAgC,IAAhC,CADoB;AAErC2J,QAAAA,kBAAkB,EAAE,KAAKC,wBAAL,CAA8B5J,IAA9B,CAAmC,IAAnC,CAFiB;AAGrC6J,QAAAA,sBAAsB,EAAE,KAAKC,sBAAL,CAA4B9J,IAA5B,CAAiC,IAAjC;AAHa,OAAzC;;AAKA,WAAKrC,gBAAL,CAAsBoM,kBAAtB,GAA2C,KAAKC,0BAAL,CAAgChK,IAAhC,CAAqC,IAArC,CAA3C;;AACA,WAAKiK,+BAAL;;AACA,WAAKC,4BAAL;;AACA,WAAKC,sBAAL;;AACA,WAAKC,iBAAL;;AACA,WAAKC,gBAAL;;AACA,WAAKC,wBAAL;;AACA,UAAI,KAAK1O,MAAL,CAAY,OAAZ,MAAyBjC,oBAA7B,EAAmD;AAC/C,aAAK4Q,iBAAL;AACH;;AACD,UAAI,KAAKrJ,cAAL,EAAJ,EAA2B;AACvB,aAAKsJ,oBAAL;AACH;;AACD,UAAI,KAAK5O,MAAL,CAAY,UAAZ,CAAJ,EAA6B;AACzB,YAAI,KAAKA,MAAL,CAAY,gBAAZ,CAAJ,EAAmC;AAC/B,eAAK6O,yBAAL;AACH;;AACD,YAAI,KAAK7O,MAAL,CAAY,gBAAZ,KAAiC,KAAKA,MAAL,CAAY,iBAAZ,CAArC,EAAqE;AACjE,eAAK8O,oBAAL;AACH;AACJ;;AACD,UAAI,KAAK9O,MAAL,CAAY,iBAAZ,MAAmC9B,gCAAvC,EAAyE;AACrE,aAAK6Q,2BAAL;AACH;;AACD,UAAI,KAAK/O,MAAL,CAAY,WAAZ,MAA6B7B,0BAAjC,EAA6D;AACzD,aAAK6Q,qBAAL;AACH;;AACD,UAAI,KAAKhP,MAAL,CAAY,WAAZ,MAA6BjC,oBAAjC,EAAuD;AACnD,aAAKkR,qBAAL;AACH;;AACD,UAAI,CAAC,KAAKjP,MAAL,CAAY,UAAZ,CAAL,EAA8B;AAC1B,aAAKkP,oBAAL;AACH;;AACD,UAAI,CAAC,KAAKlP,MAAL,CAAY,YAAZ,CAAL,EAAgC;AAC5B,aAAKmP,sBAAL;AACH;;AACD,UAAI,KAAKnP,MAAL,CAAY,UAAZ,CAAJ,EAA6B;AACzB,YAAI,KAAKA,MAAL,CAAY,gBAAZ,CAAJ,EAAmC;AAC/B,eAAKoP,yBAAL;AACH;;AACD,aAAKC,oBAAL;AACH;;AACD,UAAI,KAAKrP,MAAL,CAAY,iBAAZ,CAAJ,EAAoC;AAChC,aAAKsP,0BAAL;AACH;;AACD,UAAI,KAAKtP,MAAL,CAAY,YAAZ,CAAJ,EAA+B;AAC3B,aAAKuP,sBAAL;AACH;;AACD,UAAI,KAAKvP,MAAL,CAAY,WAAZ,MAA6BhC,yBAAjC,EAA4D;AACxD,aAAKwR,qBAAL;AACH;;AACD,UAAI,KAAKxP,MAAL,CAAY,cAAZ,MAAgC/B,6BAApC,EAAmE;AAC/D,aAAKwR,oBAAL;AACH;;AACD,UAAI,KAAKzP,MAAL,CAAY,YAAZ,CAAJ,EAA+B;AAC3B,YAAI0P,MAAM,GAAG,CAAC,GAAGrY,OAAO,CAACsY,SAAZ,GAAb;;AACA,YAAID,MAAM,IAAIA,MAAM,CAAC9S,IAAP,KAAgB8S,MAAM,CAACE,GAArC,EAA0C;AACtC,eAAK5P,MAAL,CAAY,YAAZ,EAA0B,KAA1B;AACH,SAFD,MAEO;AACH,eAAK6P,sBAAL;AACH;AACJ;;AACD,WAAKC,gBAAL,GAAwB,IAAIpX,SAAS,CAAClC,OAAd,CAAsB,IAAtB,CAAxB;;AACA,WAAKuL,gBAAL,CAAsB0B,WAAtB,CAAkC,KAAKqM,gBAAvC;;AACA,UAAI,CAAC,GAAGzY,OAAO,CAACuI,SAAZ,GAAJ,EAA8B;AAC1B,aAAKmC,gBAAL,CAAsBgO,YAAtB,CAAmC,KAAKlQ,QAAL,GAAgB,CAAhB,CAAnC;AACH;;AACD,WAAKmQ,mBAAL,CAAyB,KAAKC,gBAAL,EAAzB;;AACA,WAAKC,mBAAL;AACH;AAhGF,GA7nBmB,EA8tBnB;AACCxW,IAAAA,GAAG,EAAE,QADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK0G,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsBoO,WAAtB,CAAkC,UAASC,OAAT,EAAkB;AAChD,WAAC,GAAG3Z,SAAS,CAACD,OAAd,EAAuB4Z,OAAvB,EAAgCC,KAAhC;AACH,SAFD;AAGH;;AACDtV,MAAAA,IAAI,CAACQ,eAAe,CAACyD,OAAO,CAAC1I,SAAT,CAAhB,EAAqC,QAArC,EAA+C,IAA/C,CAAJ,CAAyDsD,IAAzD,CAA8D,IAA9D;AACH;AATF,GA9tBmB,EAwuBnB;AACCF,IAAAA,GAAG,EAAE,UADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAKiV,wBAAL;;AACAvV,MAAAA,IAAI,CAACQ,eAAe,CAACyD,OAAO,CAAC1I,SAAT,CAAhB,EAAqC,UAArC,EAAiD,IAAjD,CAAJ,CAA2DsD,IAA3D,CAAgE,IAAhE;;AACA,WAAKmI,gBAAL,GAAwB,KAAK,CAA7B;AACH;AANF,GAxuBmB,EA+uBnB;AACCrI,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASwJ,OAAT,EAAkB0L,SAAlB,EAA6B;AAChC,WAAKxO,gBAAL,CAAsBsJ,UAAtB,CAAiCxG,OAAjC,EAA0C2L,OAA1C,CAAkDD,SAAlD;AACH;AAJF,GA/uBmB,EAovBnB;AACC7W,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,KAAKoV,YAAL,IAAqB,KAAKA,YAAL,CAAkBC,aAAlB,EAA5B;AACH;AAJF,GApvBmB,EAyvBnB;AACChX,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,KAAKsV,YAAL,IAAqB,KAAKA,YAAL,CAAkBD,aAAlB,EAA5B;AACH;AAJF,GAzvBmB,EA8vBnB;AACChX,IAAAA,GAAG,EAAE,qBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAKuV,mBAAL;;AACA,WAAKC,uBAAL;;AACA,WAAKC,uBAAL;;AACA,WAAKC,iBAAL;AACH;AAPF,GA9vBmB,EAswBnB;AACCrX,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAKoV,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBO,kBAAlB;;AACA,eAAO,KAAKP,YAAZ;AACH;;AACD,UAAI,KAAKzQ,MAAL,CAAY,kBAAZ,CAAJ,EAAqC;AACjC,aAAKyQ,YAAL,GAAoB,IAAI5X,SAAS,CAACrC,OAAd,CAAsB,IAAtB,CAApB;;AACA,aAAKia,YAAL,CAAkBzQ,MAAlB,CAAyB,YAAzB,EAAuC,KAAKA,MAAL,CAAY,kBAAZ,CAAvC;;AACA,aAAKyQ,YAAL,CAAkBQ,kBAAlB;AACH;AACJ;AAZF,GAtwBmB,EAmxBnB;AACCvX,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAKsV,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBK,kBAAlB;;AACA,eAAO,KAAKL,YAAZ;AACH;;AACD,UAAI,KAAK3Q,MAAL,CAAY,kBAAZ,CAAJ,EAAqC;AACjC,aAAK2Q,YAAL,GAAoB,IAAI7X,SAAS,CAACtC,OAAd,CAAsB,IAAtB,CAApB;;AACA,aAAKma,YAAL,CAAkB3Q,MAAlB,CAAyB,YAAzB,EAAuC,KAAKA,MAAL,CAAY,kBAAZ,CAAvC;;AACA,aAAK2Q,YAAL,CAAkBM,kBAAlB;AACH;AACJ;AAZF,GAnxBmB,EAgyBnB;AACCvX,IAAAA,GAAG,EAAE,iBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIA,KAAJ;;AACA,UAAI6V,YAAY,GAAG,CAAC,GAAG9Z,QAAQ,CAACuU,UAAb,GAAnB;AAAA,UACIwF,cAAc,GAAGD,YAAY,CAACC,cADlC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACE,MAA3C,EAAmD,UAASC,IAAT,EAAe;AAC9DjW,QAAAA,KAAK,GAAGiW,IAAR;AACH,OAFD;;AAGA,aAAOjW,KAAP;AACH;AAVF,GAhyBmB,EA2yBnB;AACC3B,IAAAA,GAAG,EAAE,iBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASiW,IAAT,EAAeC,iBAAf,EAAkC;AACrC,UAAIC,YAAY,GAAG,CAAC,GAAGpa,QAAQ,CAACuU,UAAb,GAAnB;AAAA,UACIwF,cAAc,GAAGK,YAAY,CAACL,cADlC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACM,MAA3C,EAAmD;AAC/CH,QAAAA,IAAI,EAAEA,IADyC;AAE/CC,QAAAA,iBAAiB,EAAEA;AAF4B,OAAnD;AAIH;AATF,GA3yBmB,EAqzBnB;AACC7X,IAAAA,GAAG,EAAE,gBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,KAAK2E,MAAL,CAAY,UAAZ,KAA2B,KAAKA,MAAL,CAAY,UAAZ,CAAlC;AACH;AAJF,GArzBmB,EA0zBnB;AACCtG,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAKqW,gBAAL;AACH;AAJF,GA1zBmB,EA+zBnB;AACChY,IAAAA,GAAG,EAAE,iBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASsW,OAAT,EAAkB;AACrB,aAAOA,OAAO,CAACC,GAAR,CAAY,UAASC,MAAT,EAAiB;AAChC,eAAOA,MAAM,CAACC,WAAP,IAAsBD,MAAM,CAACnY,GAApC;AACH,OAFM,EAEJ6Q,MAFI,CAEG,UAAS7Q,GAAT,EAAc;AACpB,eAAO,CAAC,CAACA,GAAT;AACH,OAJM,CAAP;AAKH;AARF,GA/zBmB,EAw0BnB;AACCA,IAAAA,GAAG,EAAE,qBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS0W,UAAT,EAAqB;AACxB,UAAIC,IAAI,GAAG,KAAKhS,MAAL,CAAY+R,UAAZ,CAAX;AACA,aAAOC,IAAI,IAAI,CAAC,GAAG/a,KAAK,CAACgb,aAAV,EAAyBD,IAAzB,CAAf;AACH;AALF,GAx0BmB,EA80BnB;AACCtY,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASsW,OAAT,EAAkB;AACrB,UAAI,CAAC,KAAKO,0BAAV,EAAsC;AAClC,aAAKC,gCAAL;AACH;;AACD,UAAIC,SAAS,GAAG;AACZT,QAAAA,OAAO,EAAEA,OADG;AAEZU,QAAAA,OAAO,EAAE;AAFG,OAAhB;;AAIA,WAAKH,0BAAL,CAAgCE,SAAhC;;AACA,aAAOA,SAAS,CAACC,OAAjB;AACH;AAZF,GA90BmB,EA21BnB;AACC3Y,IAAAA,GAAG,EAAE,qBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS0W,UAAT,EAAqB;AACxB,UAAIC,IAAI,GAAG,KAAKhS,MAAL,CAAY+R,UAAZ,CAAX;;AACA,UAAI,CAAC,GAAG/a,KAAK,CAACsb,UAAV,EAAsBN,IAAtB,CAAJ,EAAiC;AAC7B,eAAOA,IAAP;AACH;;AACD,aAAOA,IAAI,IAAI,CAAC,GAAG/a,KAAK,CAACsb,aAAV,EAAyBP,IAAzB,CAAf;AACH;AARF,GA31BmB,EAo2BnB;AACCtY,IAAAA,GAAG,EAAE,kBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK8D,uBAAL,IAAgC,CAAC,KAAKqT,cAAL,EAArC,EAA4D;AACxD;AACH;;AACD,UAAIC,YAAY,GAAG,CAAC,GAAGrb,QAAQ,CAACuU,UAAb,GAAnB;AAAA,UACIwF,cAAc,GAAGsB,YAAY,CAACtB,cADlC;AAAA,UAEIuB,mBAAmB,GAAGD,YAAY,CAACC,mBAFvC;AAAA,UAGIC,mBAAmB,GAAGF,YAAY,CAACE,mBAHvC;;AAIA,UAAIC,gBAAJ;AACA,UAAIC,gBAAJ;AACA,UAAIC,qBAAJ;AACA,UAAIC,qBAAJ;AACA,UAAIC,mBAAJ;AACA,UAAIC,mBAAJ;AACA,UAAIC,kBAAJ;AACA,UAAIC,kBAAJ;AACA,UAAI7B,IAAI,GAAG;AACP8B,QAAAA,cAAc,EAAE,KAAK3C,YAAL,IAAqB,KAAKA,YAAL,CAAkB4C,QAAlB,EAD9B;AAEPC,QAAAA,cAAc,EAAE,KAAK3C,YAAL,IAAqB,KAAKA,YAAL,CAAkB0C,QAAlB,EAF9B;AAGPE,QAAAA,gBAAgB,EAAE;AACdC,UAAAA,MAAM,EAAE,KAAKC,mBAAL,CAAyB,eAAzB,CADM;AAEdC,UAAAA,MAAM,EAAE,KAAKC,mBAAL,CAAyB,eAAzB,CAFM;AAGdC,UAAAA,aAAa,EAAE,KAAKH,mBAAL,CAAyB,sBAAzB,CAHD;AAIdI,UAAAA,aAAa,EAAE,KAAKF,mBAAL,CAAyB,sBAAzB,CAJD;AAKdG,UAAAA,SAAS,EAAE,KAAKL,mBAAL,CAAyB,kBAAzB,CALG;AAMdM,UAAAA,SAAS,EAAE,KAAKJ,mBAAL,CAAyB,kBAAzB,CANG;AAOdK,UAAAA,QAAQ,EAAE,KAAKP,mBAAL,CAAyB,iBAAzB,CAPI;AAQdQ,UAAAA,QAAQ,EAAE,KAAKN,mBAAL,CAAyB,iBAAzB,CARI;AASdO,UAAAA,YAAY,EAAE,KAAKT,mBAAL,CAAyB,qBAAzB,CATA;AAUdU,UAAAA,YAAY,EAAE,KAAKR,mBAAL,CAAyB,qBAAzB,CAVA;AAWdS,UAAAA,SAAS,EAAE,KAAKX,mBAAL,CAAyB,kBAAzB,CAXG;AAYdY,UAAAA,SAAS,EAAE,KAAKV,mBAAL,CAAyB,kBAAzB,CAZG;AAadW,UAAAA,OAAO,EAAE,KAAKb,mBAAL,CAAyB,gBAAzB,CAbK;AAcdc,UAAAA,OAAO,EAAE,KAAKZ,mBAAL,CAAyB,gBAAzB,CAdK;AAeda,UAAAA,OAAO,EAAE,KAAKf,mBAAL,CAAyB,gBAAzB,CAfK;AAgBdgB,UAAAA,OAAO,EAAE,KAAKd,mBAAL,CAAyB,gBAAzB,CAhBK;AAiBde,UAAAA,QAAQ,EAAE,KAAKjB,mBAAL,CAAyB,oBAAzB,CAjBI;AAkBdkB,UAAAA,QAAQ,EAAE,KAAKhB,mBAAL,CAAyB,oBAAzB,CAlBI;AAmBdiB,UAAAA,OAAO,EAAE,KAAKnB,mBAAL,CAAyB,gBAAzB,CAnBK;AAoBdoB,UAAAA,OAAO,EAAE,KAAKlB,mBAAL,CAAyB,gBAAzB,CApBK;AAqBdmB,UAAAA,MAAM,EAAE,KAAKrB,mBAAL,CAAyB,eAAzB,CArBM;AAsBdsB,UAAAA,MAAM,EAAE,KAAKpB,mBAAL,CAAyB,eAAzB,CAtBM;AAuBdqB,UAAAA,QAAQ,EAAE,KAAKvB,mBAAL,CAAyB,iBAAzB,CAvBI;AAwBdwB,UAAAA,QAAQ,EAAE,KAAKtB,mBAAL,CAAyB,iBAAzB,CAxBI;AAyBduB,UAAAA,SAAS,EAAE,KAAKzB,mBAAL,CAAyB,kBAAzB,CAzBG;AA0Bd0B,UAAAA,SAAS,EAAE,KAAKxB,mBAAL,CAAyB,kBAAzB,CA1BG;AA2BdyB,UAAAA,YAAY,EAAE,KAAK3B,mBAAL,CAAyB,qBAAzB,CA3BA;AA4Bd4B,UAAAA,YAAY,EAAE,KAAK1B,mBAAL,CAAyB,qBAAzB,CA5BA;AA6BdN,UAAAA,QAAQ,EAAE,KAAKI,mBAAL,CAAyB,iBAAzB,CA7BI;AA8Bd6B,UAAAA,QAAQ,EAAE,KAAK3B,mBAAL,CAAyB,iBAAzB,CA9BI;AA+Bd4B,UAAAA,eAAe,EAAErC,kBAAkB,GAAG,KAAKO,mBAAL,CAAyB,wBAAzB,CA/BxB;AAgCd+B,UAAAA,eAAe,EAAErC,kBAAkB,GAAG,KAAKQ,mBAAL,CAAyB,wBAAzB,CAhCxB;AAiCd8B,UAAAA,WAAW,EAAE,CAACvC,kBAAD,IAAuB,CAACC,kBAAxB,IAA8C,KAAKM,mBAAL,CAAyB,6BAAzB,CAjC7C;AAkCdiC,UAAAA,WAAW,EAAE,CAACxC,kBAAD,IAAuB,CAACC,kBAAxB,IAA8C,KAAKQ,mBAAL,CAAyB,6BAAzB;AAlC7C,SAHX;AAuCPgC,QAAAA,gBAAgB,EAAE;AACdnC,UAAAA,MAAM,EAAE,KAAKC,mBAAL,CAAyB,eAAzB,CADM;AAEdC,UAAAA,MAAM,EAAE,KAAKC,mBAAL,CAAyB,eAAzB,CAFM;AAGdC,UAAAA,aAAa,EAAE,KAAKH,mBAAL,CAAyB,sBAAzB,CAHD;AAIdI,UAAAA,aAAa,EAAE,KAAKF,mBAAL,CAAyB,sBAAzB,CAJD;AAKdG,UAAAA,SAAS,EAAE,KAAKL,mBAAL,CAAyB,kBAAzB,CALG;AAMdM,UAAAA,SAAS,EAAE,KAAKJ,mBAAL,CAAyB,kBAAzB,CANG;AAOdK,UAAAA,QAAQ,EAAE,KAAKP,mBAAL,CAAyB,iBAAzB,CAPI;AAQdQ,UAAAA,QAAQ,EAAE,KAAKN,mBAAL,CAAyB,iBAAzB,CARI;AASdO,UAAAA,YAAY,EAAE,KAAKT,mBAAL,CAAyB,qBAAzB,CATA;AAUdU,UAAAA,YAAY,EAAE,KAAKR,mBAAL,CAAyB,qBAAzB,CAVA;AAWdS,UAAAA,SAAS,EAAE,KAAKX,mBAAL,CAAyB,kBAAzB,CAXG;AAYdY,UAAAA,SAAS,EAAE,KAAKV,mBAAL,CAAyB,kBAAzB,CAZG;AAadiC,UAAAA,OAAO,EAAE,KAAKnC,mBAAL,CAAyB,gBAAzB,CAbK;AAcdoC,UAAAA,OAAO,EAAE,KAAKlC,mBAAL,CAAyB,gBAAzB,CAdK;AAedmC,UAAAA,iBAAiB,EAAE,KAAKrC,mBAAL,CAAyB,0BAAzB,CAfL;AAgBdsC,UAAAA,iBAAiB,EAAE,KAAKpC,mBAAL,CAAyB,0BAAzB,CAhBL;AAiBdqC,UAAAA,KAAK,EAAE,KAAKvC,mBAAL,CAAyB,cAAzB,CAjBO;AAkBdwC,UAAAA,KAAK,EAAE,KAAKtC,mBAAL,CAAyB,cAAzB,CAlBO;AAmBduC,UAAAA,eAAe,EAAE,KAAKzC,mBAAL,CAAyB,wBAAzB,CAnBH;AAoBd0C,UAAAA,eAAe,EAAE,KAAKxC,mBAAL,CAAyB,wBAAzB,CApBH;AAqBdyC,UAAAA,SAAS,EAAE,KAAK3C,mBAAL,CAAyB,kBAAzB,CArBG;AAsBd4C,UAAAA,SAAS,EAAE,KAAK1C,mBAAL,CAAyB,kBAAzB,CAtBG;AAuBda,UAAAA,OAAO,EAAE,KAAKf,mBAAL,CAAyB,gBAAzB,CAvBK;AAwBdgB,UAAAA,OAAO,EAAE,KAAKd,mBAAL,CAAyB,gBAAzB,CAxBK;AAyBd2C,UAAAA,aAAa,EAAE,CAAC1D,gBAAgB,GAAG,KAAKa,mBAAL,CAAyB,oBAAzB,CAApB,KAAuE,UAASvd,GAAT,EAAc;AAChG,gBAAIqgB,QAAQ,GAAG3D,gBAAgB,CAAC1c,GAAD,CAA/B;AACA,mBAAO,KAAKsgB,uBAAL,CAA6BD,QAA7B,CAAP;AACH,WAHqF,CAGpFnS,IAHoF,CAG/E,IAH+E,CAzBxE;AA6BdqS,UAAAA,aAAa,EAAE,CAAC5D,gBAAgB,GAAG,KAAKc,mBAAL,CAAyB,oBAAzB,CAApB,KAAuE,UAASzd,GAAT,EAAcmF,KAAd,EAAqB;AACvG,oBAAQA,KAAR;AACI,mBAAKqX,mBAAmB,CAACgE,QAAzB;AACIrb,gBAAAA,KAAK,GAAG,UAAR;AACA;;AACJ,mBAAKqX,mBAAmB,CAACiE,UAAzB;AACItb,gBAAAA,KAAK,GAAG,YAAR;AALR;;AAOAwX,YAAAA,gBAAgB,CAAC3c,GAAD,EAAMmF,KAAN,CAAhB;AACH,WATqF,CASpF+I,IAToF,CAS/E,IAT+E,CA7BxE;AAuCdwS,UAAAA,kBAAkB,EAAE,CAAC9D,qBAAqB,GAAG,KAAKW,mBAAL,CAAyB,uBAAzB,CAAzB,KAA+E,UAASvd,GAAT,EAAc;AAC7G,gBAAI2gB,OAAO,GAAG/D,qBAAqB,CAAC5c,GAAD,CAAnC;AACA,mBAAO,KAAK4gB,uBAAL,CAA6BD,OAA7B,CAAP;AACH,WAHkG,CAGjGzS,IAHiG,CAG5F,IAH4F,CAvCrF;AA2Cd2S,UAAAA,kBAAkB,EAAE,CAAChE,qBAAqB,GAAG,KAAKY,mBAAL,CAAyB,uBAAzB,CAAzB,KAA+E,UAASzd,GAAT,EAAcmF,KAAd,EAAqB;AACpH,oBAAQA,KAAR;AACI,mBAAKsX,mBAAmB,CAACqE,KAAzB;AACI3b,gBAAAA,KAAK,GAAG,OAAR;AACA;;AACJ,mBAAKsX,mBAAmB,CAACsE,gBAAzB;AACI5b,gBAAAA,KAAK,GAAG,kBAAR;AACA;;AACJ,mBAAKsX,mBAAmB,CAACuE,cAAzB;AACI7b,gBAAAA,KAAK,GAAG,gBAAR;AACA;;AACJ,mBAAKsX,mBAAmB,CAACwE,IAAzB;AACI9b,gBAAAA,KAAK,GAAG,MAAR;AAXR;;AAaA0X,YAAAA,qBAAqB,CAAC7c,GAAD,EAAMmF,KAAN,CAArB;AACH,WAfkG,CAejG+I,IAfiG,CAe5F,IAf4F,CA3CrF;AA2DdgT,UAAAA,gBAAgB,EAAE,CAACpE,mBAAmB,GAAG,KAAKS,mBAAL,CAAyB,qBAAzB,CAAvB,KAA2E,UAASvd,GAAT,EAAc;AACvG,gBAAI2gB,OAAO,GAAG7D,mBAAmB,CAAC9c,GAAD,CAAjC;AACA,mBAAO,KAAK4gB,uBAAL,CAA6BD,OAA7B,CAAP;AACH,WAH4F,CAG3FzS,IAH2F,CAGtF,IAHsF,CA3D/E;AA+DdiT,UAAAA,gBAAgB,EAAE,CAACpE,mBAAmB,GAAG,KAAKU,mBAAL,CAAyB,qBAAzB,CAAvB,KAA2E,UAASzd,GAAT,EAAcmF,KAAd,EAAqB;AAC9G,oBAAQA,KAAR;AACI,mBAAKsX,mBAAmB,CAACqE,KAAzB;AACI3b,gBAAAA,KAAK,GAAG,OAAR;AACA;;AACJ,mBAAKsX,mBAAmB,CAACsE,gBAAzB;AACI5b,gBAAAA,KAAK,GAAG,kBAAR;AACA;;AACJ,mBAAKsX,mBAAmB,CAACuE,cAAzB;AACI7b,gBAAAA,KAAK,GAAG,gBAAR;AACA;;AACJ,mBAAKsX,mBAAmB,CAACwE,IAAzB;AACI9b,gBAAAA,KAAK,GAAG,MAAR;AAXR;;AAaA4X,YAAAA,mBAAmB,CAAC/c,GAAD,EAAMmF,KAAN,CAAnB;AACH,WAf4F,CAe3F+I,IAf2F,CAetF,IAfsF;AA/D/E,SAvCX;AAuHPkT,QAAAA,gBAAgB,EAAE,KAAKC,+BAAL;AAvHX,OAAX;;AAyHA,WAAKnG,sBAAL,CAA4BD,cAAc,CAACqG,YAA3C,EAAyDlG,IAAzD;AACH;AA5IF,GAp2BmB,EAi/BnB;AACC5X,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASsW,OAAT,EAAkB8F,iBAAlB,EAAqC;AACxC,UAAIC,IAAI,GAAG,KAAKC,eAAL,CAAqBhG,OAArB,CAAX;;AACA,UAAIiG,WAAW,GAAG,KAAKC,sBAAL,CAA4BlG,OAA5B,CAAlB;;AACA,WAAKmG,cAAL,CAAoBJ,IAApB,EAA0BE,WAA1B,EAAuCH,iBAAvC;AACH;AANF,GAj/BmB,EAw/BnB;AACC/d,IAAAA,GAAG,EAAE,gBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS0c,QAAT,EAAmBH,WAAnB,EAAgCH,iBAAhC,EAAmD;AACtD,UAAIO,OAAO,GAAG,IAAd;;AACA,UAAIC,OAAO,GAAG,YAAW;AACrB,YAAI7E,cAAJ;AACA,YAAIE,cAAJ;;AACA,YAAI0E,OAAO,CAACvH,YAAR,IAAwBgH,iBAA5B,EAA+C;AAC3CrE,UAAAA,cAAc,GAAG4E,OAAO,CAACvH,YAAR,CAAqB4C,QAArB,EAAjB;AACH;;AACD,YAAI2E,OAAO,CAACrH,YAAR,IAAwB8G,iBAA5B,EAA+C;AAC3CnE,UAAAA,cAAc,GAAG0E,OAAO,CAACrH,YAAR,CAAqB0C,QAArB,EAAjB;AACH;;AACD,eAAO;AACHD,UAAAA,cAAc,EAAEA,cADb;AAEHE,UAAAA,cAAc,EAAEA;AAFb,SAAP;AAIH,OAbD;;AAcA,WAAKvR,gBAAL,CAAsBmW,aAAtB,CAAoCH,QAApC,EAA8CE,OAA9C,EAAuDL,WAAW,IAAI,KAAKL,+BAAL,EAAtE,EAA8GE,iBAA9G;AACH;AAnBF,GAx/BmB,EA4gCnB;AACC/d,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASkb,QAAT,EAAmB;AACtB,UAAI4B,YAAY,GAAG,CAAC,GAAG/gB,QAAQ,CAACuU,UAAb,GAAnB;AAAA,UACI+G,mBAAmB,GAAGyF,YAAY,CAACzF,mBADvC;;AAEA,cAAQ6D,QAAR;AACI,aAAK,UAAL;AACI,iBAAO7D,mBAAmB,CAACgE,QAA3B;;AACJ;AACI,iBAAOhE,mBAAmB,CAACiE,UAA3B;AAJR;AAMH;AAXF,GA5gCmB,EAwhCnB;AACCjd,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASwb,OAAT,EAAkB;AACrB,UAAIuB,YAAY,GAAG,CAAC,GAAGhhB,QAAQ,CAACuU,UAAb,GAAnB;AAAA,UACIgH,mBAAmB,GAAGyF,YAAY,CAACzF,mBADvC;;AAEA,cAAQkE,OAAR;AACI,aAAK,OAAL;AACI,iBAAOlE,mBAAmB,CAACqE,KAA3B;;AACJ,aAAK,kBAAL;AACI,iBAAOrE,mBAAmB,CAACsE,gBAA3B;;AACJ,aAAK,gBAAL;AACI,iBAAOtE,mBAAmB,CAACuE,cAA3B;;AACJ;AACI,iBAAOvE,mBAAmB,CAACwE,IAA3B;AARR;AAUH;AAfF,GAxhCmB,EAwiCnB;AACCzd,IAAAA,GAAG,EAAE,iCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIgd,YAAY,GAAG,CAAC,GAAGjhB,QAAQ,CAACuU,UAAb,GAAnB;AAAA,UACI2M,cAAc,GAAGD,YAAY,CAACC,cADlC;AAAA,UAEIC,qBAAqB,GAAGF,YAAY,CAACE,qBAFzC;;AAGA,UAAIC,sBAAsB,GAAG,KAAKxY,MAAL,CAAY,kBAAZ,KAAmC,KAAhE;AACA,UAAIyY,UAAU,GAAGD,sBAAsB,CAACE,IAAvB,IAA+BF,sBAAhD;AACA,UAAIG,UAAU,GAAG,EAAjB;;AACA,UAAI,UAAUF,UAAV,KAAyB,WAAWA,UAAX,IAAyB,CAAC,KAAKG,qBAAL,EAAnD,CAAJ,EAAsF;AAClF,gBAAQH,UAAR;AACI,eAAK,MAAL;AACIE,YAAAA,UAAU,CAACD,IAAX,GAAkBJ,cAAc,CAACO,IAAjC;AACA;;AACJ;AACIF,YAAAA,UAAU,CAACD,IAAX,GAAkBJ,cAAc,CAACQ,QAAjC;AALR;;AAOA,gBAAQN,sBAAsB,CAACO,WAA/B;AACI,eAAK,UAAL;AACIJ,YAAAA,UAAU,CAACI,WAAX,GAAyBR,qBAAqB,CAACS,QAA/C;AACA;;AACJ,eAAK,YAAL;AACIL,YAAAA,UAAU,CAACI,WAAX,GAAyBR,qBAAqB,CAACU,UAA/C;AALR;;AAOA,YAAI,KAAKjZ,MAAL,CAAY,0BAAZ,KAA2C,KAAKA,MAAL,CAAY,wBAAZ,CAA/C,EAAsF;AAClF2Y,UAAAA,UAAU,CAACO,gBAAX,GAA8B,IAA9B;AACH;AACJ;;AACDP,MAAAA,UAAU,CAACQ,eAAX,GAA6B,CAAC,CAAC,KAAKnZ,MAAL,CAAY,uBAAZ,CAA/B;AACA,aAAO2Y,UAAP;AACH;AA9BF,GAxiCmB,EAukCnB;AACCjf,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,KAAK2E,MAAL,CAAY,eAAZ,KAAgC,KAAKA,MAAL,CAAY,gBAAZ,CAAvC;AACH;AAJF,GAvkCmB,EA4kCnB;AACCtG,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS2E,MAAT,EAAiB;AACpB,UAAIoZ,YAAY,GAAG,CAAC,GAAGhiB,QAAQ,CAACuU,UAAb,GAAnB;AAAA,UACI0N,YAAY,GAAGD,YAAY,CAACC,YADhC;;AAEA,cAAQrZ,MAAR;AACI,aAAK,YAAL;AACI,iBAAOqZ,YAAY,CAACC,UAApB;;AACJ,aAAK,UAAL;AACI,iBAAOD,YAAY,CAACE,UAApB;;AACJ;AACI,iBAAOF,YAAY,CAACG,QAApB;AANR;AAQH;AAbF,GA5kCmB,EA0lCnB;AACC9f,IAAAA,GAAG,EAAE,gBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,KAAKoV,YAAL,IAAqB,KAAKA,YAAL,CAAkBgJ,QAAlB,EAArB,IAAqD,KAAK9I,YAAL,IAAqB,KAAKF,YAAL,CAAkBgJ,QAAlB,EAAjF;AACH;AAJF,GA1lCmB,EA+lCnB;AACC/f,IAAAA,GAAG,EAAE,qBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK8D,uBAAL;AACH;AAJF,GA/lCmB,EAomCnB;AACCzF,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK8D,uBAAL,GAA+Bua,IAAI,CAACC,GAAL,CAAS,KAAKxa,uBAAL,GAA+B,CAAxC,EAA2C,CAA3C,CAA/B;;AACA,UAAI,CAAC,KAAKA,uBAAV,EAAmC;AAC/B,aAAKuS,gBAAL;AACH;AACJ;AAPF,GApmCmB,EA4mCnB;AACChY,IAAAA,GAAG,EAAE,kBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,KAAK2E,MAAL,CAAY,cAAZ,KAA+B,EAAtC;AACH;AAJF,GA5mCmB,EAinCnB;AACCtG,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO9C,SAAS,CAAC/B,OAAV,CAAkBojB,SAAlB,CAA4B,KAAK5Z,MAAL,CAAY,gBAAZ,CAA5B,CAAP;AACH;AAJF,GAjnCmB,EAsnCnB;AACCtG,IAAAA,GAAG,EAAE,qBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASwe,YAAT,EAAuBC,gBAAvB,EAAyC;AAC5C,UAAIC,OAAO,GAAG,IAAd;;AACA,UAAIC,KAAK,CAACC,OAAN,CAAcH,gBAAd,CAAJ,EAAqC;AACjC,aAAK/X,gBAAL,CAAsBmY,kBAAtB,CAAyCJ,gBAAgB,CAAClI,GAAjB,CAAqB,UAASuI,CAAT,EAAY;AACtE,iBAAOA,CAAC,CAACzB,IAAT;AACH,SAFwC,CAAzC;AAGH;;AACD,UAAIsB,KAAK,CAACC,OAAN,CAAcJ,YAAd,CAAJ,EAAiC;AAC7B,aAAK9X,gBAAL,CAAsBqY,eAAtB,CAAsCP,YAAY,CAACjI,GAAb,CAAiB,UAASuI,CAAT,EAAY;AAC/D,cAAIE,cAAc,GAAGF,CAAC,CAACG,QAAF,IAAcP,OAAO,CAAC/Z,MAAR,CAAe,qBAAf,CAAnC;;AACA,cAAIsa,QAAQ,GAAGD,cAAc,IAAIN,OAAO,CAACQ,YAAR,CAAqBF,cAArB,CAAjC;;AACA,cAAIG,qBAAqB,GAAGL,CAAC,CAACM,eAAF,IAAqBV,OAAO,CAAC/Z,MAAR,CAAe,4BAAf,CAAjD;;AACA,cAAIya,eAAe,GAAGD,qBAAqB,IAAIT,OAAO,CAACQ,YAAR,CAAqBC,qBAArB,CAA/C;;AACA,iBAAO;AACHvT,YAAAA,QAAQ,EAAEkT,CAAC,CAAClT,QADT;AAEHyR,YAAAA,IAAI,EAAEyB,CAAC,CAACzB,IAFL;AAGHgC,YAAAA,QAAQ,EAAEP,CAAC,CAACO,QAHT;AAIHpP,YAAAA,KAAK,EAAE6O,CAAC,CAAC7O,KAJN;AAKHqP,YAAAA,MAAM,EAAER,CAAC,CAACS,kBALP;AAMHC,YAAAA,aAAa,EAAEV,CAAC,CAACW,yBANd;AAOHC,YAAAA,OAAO,EAAEZ,CAAC,CAACa,mBAPR;AAQHC,YAAAA,MAAM,EAAEd,CAAC,CAACe,kBARP;AASHC,YAAAA,QAAQ,EAAEhB,CAAC,CAACiB,oBATT;AAUHC,YAAAA,SAAS,EAAElB,CAAC,CAACmB,qBAVV;AAWHC,YAAAA,YAAY,EAAEpB,CAAC,CAACoB,YAXb;AAYHC,YAAAA,aAAa,EAAErB,CAAC,CAACqB,aAZd;AAaHC,YAAAA,yBAAyB,EAAEtB,CAAC,CAACsB,yBAb1B;AAcHC,YAAAA,QAAQ,EAAEvB,CAAC,CAACuB,QAdT;AAeHC,YAAAA,SAAS,EAAExB,CAAC,CAACwB,SAfV;AAgBHC,YAAAA,QAAQ,EAAEzB,CAAC,CAACyB,QAhBT;AAiBHC,YAAAA,SAAS,EAAE1B,CAAC,CAAC0B,SAjBV;AAkBHC,YAAAA,WAAW,EAAE3B,CAAC,CAAC2B,WAlBZ;AAmBHC,YAAAA,WAAW,EAAE5B,CAAC,CAAC4B,WAnBZ;AAoBHC,YAAAA,aAAa,EAAE7B,CAAC,CAAC6B,aApBd;AAqBHC,YAAAA,QAAQ,EAAE9B,CAAC,CAAC8B,QArBT;AAsBHC,YAAAA,OAAO,EAAE/B,CAAC,CAAC+B,OAtBR;AAuBHC,YAAAA,SAAS,EAAEhC,CAAC,CAACgC,SAvBV;AAwBHC,YAAAA,UAAU,EAAEjC,CAAC,CAACiC,UAxBX;AAyBHC,YAAAA,eAAe,EAAElC,CAAC,CAACkC,eAzBhB;AA0BHC,YAAAA,cAAc,EAAEnC,CAAC,CAACmC,cA1Bf;AA2BHC,YAAAA,SAAS,EAAEpC,CAAC,CAACoC,SA3BV;AA4BHC,YAAAA,QAAQ,EAAErC,CAAC,CAACqC,QA5BT;AA6BHC,YAAAA,UAAU,EAAEtC,CAAC,CAACsC,UA7BX;AA8BHC,YAAAA,WAAW,EAAEvC,CAAC,CAACuC,WA9BZ;AA+BHC,YAAAA,gBAAgB,EAAExC,CAAC,CAACwC,gBAAF,IAAsBxC,CAAC,CAACwC,gBAAF,CAAmB/K,GAAnB,CAAuB,UAASgL,EAAT,EAAa;AACxE,qBAAO;AACHC,gBAAAA,CAAC,EAAED,EAAE,CAACC,CADH;AAEHC,gBAAAA,CAAC,EAAEF,EAAE,CAACE;AAFH,eAAP;AAIH,aALuC,CA/BrC;AAqCHC,YAAAA,cAAc,EAAEzC,QAAQ,IAAI,UAASjW,SAAT,EAAoB2Y,IAApB,EAA0B;AAClD1C,cAAAA,QAAQ,CAAC2C,MAAT,CAAgB;AACZC,gBAAAA,KAAK,EAAEnD,OAAO,CAACoD,wBAAR,CAAiCH,IAAjC,CADK;AAEZ3Y,gBAAAA,SAAS,EAAE,CAAC,GAAG/M,QAAQ,CAAC8lB,gBAAb,EAA+B,CAAC,GAAG3mB,SAAS,CAACD,OAAd,EAAuB6N,SAAvB,CAA/B;AAFC,eAAhB;AAIH,aA1CE;AA2CHgZ,YAAAA,qBAAqB,EAAE5C,eAAe,IAAI,UAASpW,SAAT,EAAoB2Y,IAApB,EAA0B;AAChEvC,cAAAA,eAAe,CAACwC,MAAhB,CAAuB;AACnBC,gBAAAA,KAAK,EAAEnD,OAAO,CAACoD,wBAAR,CAAiCH,IAAjC,CADY;AAEnB3Y,gBAAAA,SAAS,EAAE,CAAC,GAAG/M,QAAQ,CAAC8lB,gBAAb,EAA+B,CAAC,GAAG3mB,SAAS,CAACD,OAAd,EAAuB6N,SAAvB,CAA/B;AAFQ,eAAvB;AAIH,aAhDE;AAiDHiZ,YAAAA,eAAe,EAAEhD,QAAQ,IAAI,UAASjW,SAAT,EAAoB;AAC7C,eAAC,GAAG5N,SAAS,CAACD,OAAd,EAAuB6N,SAAvB,EAAkCgM,KAAlC;AACH,aAnDE;AAoDHkN,YAAAA,YAAY,EAAEpD,CAAC,CAACoD,YApDb;AAqDHC,YAAAA,WAAW,EAAErD,CAAC,CAACqD,WArDZ;AAsDHC,YAAAA,aAAa,EAAEtD,CAAC,CAACsD,aAtDd;AAuDHC,YAAAA,cAAc,EAAEvD,CAAC,CAACuD,cAvDf;AAwDHC,YAAAA,mBAAmB,EAAExD,CAAC,CAACwD;AAxDpB,WAAP;AA0DH,SA/DqC,CAAtC;AAgEH;AACJ;AA3EF,GAtnCmB,EAksCnB;AACCjkB,IAAAA,GAAG,EAAE,qBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASuiB,UAAT,EAAqB;AACxB,UAAI,KAAKxe,oBAAL,GAA4B,CAAhC,EAAmC;AAC/B;AACH;;AACD,WAAKye,uBAAL,CAA6BD,UAA7B;;AACA,WAAK/d,QAAL,GAAgBie,WAAhB,CAA4BxgB,wBAA5B,EAAsDsgB,UAAtD;;AACA,WAAK7b,gBAAL,CAAsBgc,YAAtB,CAAmC,IAAnC;;AACA,WAAKnb,qBAAL;;AACA,UAAI,KAAK7B,QAAT,EAAmB;AACf,aAAKA,QAAL,CAAcid,OAAd;AACH;;AACD,UAAI,KAAK7c,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsB6c,OAAtB;AACH;AACJ;AAhBF,GAlsCmB,EAmtCnB;AACCtkB,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS4iB,SAAT,EAAoB;AACvB,UAAIvO,MAAM,GAAG,CAAC,GAAGrY,OAAO,CAACsY,SAAZ,GAAb;;AACA,UAAID,MAAM,CAAC9S,IAAP,KAAgB8S,MAAM,CAACE,GAAvB,IAA8BqO,SAAS,KAAK,KAAKC,mBAAL,EAAhD,EAA4E;AACxE;AACH;;AACD,UAAID,SAAJ,EAAe;AACX,aAAKE,iCAAL;AACH,OAFD,MAEO;AACH,aAAKC,mCAAL;AACH;;AACD,WAAKC,oBAAL,CAA0BJ,SAA1B;AACH;AAbF,GAntCmB,EAiuCnB;AACCvkB,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASijB,EAAT,EAAa;AAChB,UAAI5O,MAAM,GAAG,CAAC,GAAGrY,OAAO,CAACsY,SAAZ,GAAb;AACA,UAAI4O,QAAQ,GAAG7O,MAAM,CAAC9S,IAAP,CAAY2hB,QAA3B;AACA,UAAIC,IAAI,GAAG9O,MAAM,CAAC9S,IAAP,CAAY2hB,QAAZ,CAAqBC,IAAhC;;AACA,UAAIF,EAAJ,EAAQ;AACJ,YAAIE,IAAI,CAACC,iBAAT,EAA4B;AACxBD,UAAAA,IAAI,CAACC,iBAAL;AACH,SAFD,MAEO;AACH,cAAID,IAAI,CAACE,oBAAT,EAA+B;AAC3BF,YAAAA,IAAI,CAACE,oBAAL;AACH,WAFD,MAEO;AACH,gBAAIF,IAAI,CAACG,uBAAT,EAAkC;AAC9BH,cAAAA,IAAI,CAACG,uBAAL;AACH,aAFD,MAEO;AACH,kBAAIH,IAAI,CAACI,mBAAT,EAA8B;AAC1BJ,gBAAAA,IAAI,CAACI,mBAAL;AACH;AACJ;AACJ;AACJ;AACJ,OAhBD,MAgBO;AACH,YAAIL,QAAQ,CAACM,cAAb,EAA6B;AACzBN,UAAAA,QAAQ,CAACM,cAAT;AACH,SAFD,MAEO;AACH,cAAIN,QAAQ,CAACO,mBAAb,EAAkC;AAC9BP,YAAAA,QAAQ,CAACO,mBAAT;AACH,WAFD,MAEO;AACH,gBAAIP,QAAQ,CAACQ,oBAAb,EAAmC;AAC/BR,cAAAA,QAAQ,CAACQ,oBAAT;AACH,aAFD,MAEO;AACH,kBAAIR,QAAQ,CAACS,gBAAb,EAA+B;AAC3BT,gBAAAA,QAAQ,CAACS,gBAAT;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;AAvCF,GAjuCmB,EAywCnB;AACCtlB,IAAAA,GAAG,EAAE,qBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIkjB,QAAQ,GAAG,CAAC,GAAGlnB,OAAO,CAACsY,SAAZ,IAAyB4O,QAAxC;AACA,UAAIU,iBAAiB,GAAGV,QAAQ,CAACU,iBAAT,IAA8BV,QAAQ,CAACW,mBAAvC,IAA8DX,QAAQ,CAACY,uBAA/F;AACA,UAAIC,cAAc,GAAGH,iBAAiB,KAAKV,QAAQ,CAACC,IAA/B,IAAuCD,QAAQ,CAACc,kBAArE;AACA,aAAO,CAAC,CAACD,cAAT;AACH;AAPF,GAzwCmB,EAixCnB;AACC1lB,IAAAA,GAAG,EAAE,mCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIkjB,QAAQ,GAAG,CAAC,GAAGlnB,OAAO,CAACsY,SAAZ,IAAyB4O,QAAxC;;AACA,UAAIe,OAAO,GAAG,KAAKC,gCAAL,CAAsCnb,IAAtC,CAA2C,IAA3C,CAAd;;AACA7M,MAAAA,cAAc,CAACf,OAAf,CAAuB8nB,EAAvB,CAA0BC,QAA1B,EAAoC5f,4BAApC,EAAkE2gB,OAAlE;;AACA/nB,MAAAA,cAAc,CAACf,OAAf,CAAuB8nB,EAAvB,CAA0BC,QAA1B,EAAoC1f,+BAApC,EAAqEygB,OAArE;;AACA/nB,MAAAA,cAAc,CAACf,OAAf,CAAuB8nB,EAAvB,CAA0BC,QAA1B,EAAoCzf,mCAApC,EAAyEwgB,OAAzE;;AACA/nB,MAAAA,cAAc,CAACf,OAAf,CAAuB8nB,EAAvB,CAA0BC,QAA1B,EAAoCxf,gCAApC,EAAsEugB,OAAtE;AACH;AATF,GAjxCmB,EA2xCnB;AACC5lB,IAAAA,GAAG,EAAE,qCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIkjB,QAAQ,GAAG,CAAC,GAAGlnB,OAAO,CAACsY,SAAZ,IAAyB4O,QAAxC;;AACAhnB,MAAAA,cAAc,CAACf,OAAf,CAAuBgpB,GAAvB,CAA2BjB,QAA3B,EAAqC5f,4BAArC;;AACApH,MAAAA,cAAc,CAACf,OAAf,CAAuBgpB,GAAvB,CAA2BjB,QAA3B,EAAqC1f,+BAArC;;AACAtH,MAAAA,cAAc,CAACf,OAAf,CAAuBgpB,GAAvB,CAA2BjB,QAA3B,EAAqCzf,mCAArC;;AACAvH,MAAAA,cAAc,CAACf,OAAf,CAAuBgpB,GAAvB,CAA2BjB,QAA3B,EAAqCxf,gCAArC;AACH;AARF,GA3xCmB,EAoyCnB;AACCrF,IAAAA,GAAG,EAAE,kCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,CAAC,KAAK6iB,mBAAL,EAAL,EAAiC;AAC7B,aAAKE,mCAAL;;AACA,aAAKpe,MAAL,CAAY,YAAZ,EAA0B,KAA1B;AACH;AACJ;AAPF,GApyCmB,EA4yCnB;AACCtG,IAAAA,GAAG,EAAE,kCADN;AAEC2B,IAAAA,KAAK,EAAE,UAASokB,UAAT,EAAqB;AACxB,UAAIC,YAAY,GAAG,CAAC,GAAGtoB,QAAQ,CAACuU,UAAb,GAAnB;AAAA,UACIwF,cAAc,GAAGuO,YAAY,CAACvO,cADlC;;AAEA,WAAK/R,oBAAL;;AACA,WAAKgS,sBAAL,CAA4BD,cAAc,CAACwO,UAA3C,EAAuDF,UAAvD;;AACA,WAAKrgB,oBAAL;AACH;AARF,GA5yCmB,EAqzCnB;AACC1F,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASwhB,CAAT,EAAYC,CAAZ,EAAe8C,SAAf,EAA0B;AAC7B,UAAI,KAAKre,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBgK,KAAlB,CAAwBsR,CAAxB,EAA2BC,CAA3B,EAA8B8C,SAA9B;AACH;AACJ;AANF,GArzCmB,EA4zCnB;AACClmB,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAKkG,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBse,KAAlB;AACH;AACJ;AANF,GA5zCmB,EAm0CnB;AACCnmB,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASwhB,CAAT,EAAYC,CAAZ,EAAegD,IAAf,EAAqB7Y,QAArB,EAA+B0D,QAA/B,EAAyC;AAC5C,UAAI,KAAKlJ,eAAT,EAA0B;AACtB,aAAKA,eAAL,CAAqB8J,KAArB,CAA2BsR,CAA3B,EAA8BC,CAA9B,EAAiCgD,IAAjC,EAAuC7Y,QAAvC,EAAiD0D,QAAjD;AACH;AACJ;AANF,GAn0CmB,EA00CnB;AACCjR,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAKoG,eAAT,EAA0B;AACtB,aAAKA,eAAL,CAAqBoe,KAArB;AACH;AACJ;AANF,GA10CmB,EAi1CnB;AACCnmB,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASA,KAAT,EAAgB;AACnB,UAAI0kB,aAAa,GAAG,CAAC,GAAG3oB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIqU,WAAW,GAAGD,aAAa,CAACC,WADhC;;AAEA,cAAQ3kB,KAAR;AACI,aAAK,IAAL;AACI,iBAAO2kB,WAAW,CAACC,EAAnB;;AACJ,aAAK,IAAL;AACI,iBAAOD,WAAW,CAACE,EAAnB;;AACJ,aAAK,IAAL;AACI,iBAAOF,WAAW,CAACG,EAAnB;;AACJ;AACI,iBAAOH,WAAW,CAACC,EAAnB;AARR;AAUH;AAfF,GAj1CmB,EAi2CnB;AACCvmB,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI+kB,aAAa,GAAG,CAAC,GAAGhpB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGiP,aAAa,CAACjP,cADnC;;AAEA,UAAIkP,QAAQ,GAAG,KAAK/a,cAAL,EAAf;;AACA,WAAK8L,sBAAL,CAA4BD,cAAc,CAACmP,cAA3C,EAA2DD,QAA3D;AACH;AAPF,GAj2CmB,EAy2CnB;AACC3mB,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIklB,SAAS,GAAG,KAAKvgB,MAAL,CAAY,iBAAZ,CAAhB;;AACA,UAAI,CAACugB,SAAL,EAAgB;AACZA,QAAAA,SAAS,GAAG,KAAKvgB,MAAL,CAAY,WAAZ,CAAZ;AACH;;AACD,UAAIwgB,aAAa,GAAG,CAAC,GAAGppB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGqP,aAAa,CAACrP,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACsP,SAA3C,EAAsDF,SAAtD;AACH;AAVF,GAz2CmB,EAo3CnB;AACC7mB,IAAAA,GAAG,EAAE,4BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIqlB,cAAc,GAAG,KAAK1gB,MAAL,CAAY,iBAAZ,CAArB;;AACA,UAAI,CAACga,KAAK,CAACC,OAAN,CAAcyG,cAAd,CAAL,EAAoC;AAChC;AACH;;AACD,UAAIC,aAAa,GAAG,CAAC,GAAGvpB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGwP,aAAa,CAACxP,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACyP,cAA3C,EAA2DF,cAA3D;AACH;AAVF,GAp3CmB,EA+3CnB;AACChnB,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIwlB,aAAa,GAAG,CAAC,GAAGzpB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAG0P,aAAa,CAAC1P,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC2P,cAA3C,EAA2D,KAAKC,iBAAL,CAAuB,KAAK/gB,MAAL,CAAY,cAAZ,CAAvB,CAA3D;AACH;AANF,GA/3CmB,EAs4CnB;AACCtG,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI2lB,aAAa,GAAG,CAAC,GAAG5pB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAG6P,aAAa,CAAC7P,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC8P,gBAA3C,EAA6D,KAAKjhB,MAAL,CAAY,YAAZ,CAA7D;AACH;AANF,GAt4CmB,EA64CnB;AACCtG,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIokB,UAAU,GAAG,KAAKzf,MAAL,CAAY,YAAZ,CAAjB;;AACA,WAAKkhB,gCAAL,CAAsCzB,UAAtC;;AACA,WAAKtS,mBAAL,CAAyBsS,UAAzB;AACH;AANF,GA74CmB,EAo5CnB;AACC/lB,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI8lB,aAAa,GAAG,CAAC,GAAG/pB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGgQ,aAAa,CAAChQ,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACiQ,QAA3C,EAAqD,KAAKphB,MAAL,CAAY,UAAZ,CAArD;AACH;AANF,GAp5CmB,EA25CnB;AACCtG,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIgmB,aAAa,GAAG,CAAC,GAAGjqB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGkQ,aAAa,CAAClQ,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACmQ,UAA3C,EAAuD,KAAKthB,MAAL,CAAY,YAAZ,CAAvD;AACH;AANF,GA35CmB,EAk6CnB;AACCtG,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIkmB,QAAQ,GAAG,KAAKvhB,MAAL,CAAY,gBAAZ,CAAf;;AACA,UAAI,CAACuhB,QAAL,EAAe;AACXA,QAAAA,QAAQ,GAAG,KAAKvhB,MAAL,CAAY,UAAZ,CAAX;AACH;;AACD,UAAIwhB,aAAa,GAAG,CAAC,GAAGpqB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGqQ,aAAa,CAACrQ,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACsQ,QAA3C,EAAqDF,QAArD;AACH;AAVF,GAl6CmB,EA66CnB;AACC7nB,IAAAA,GAAG,EAAE,2BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIqmB,aAAa,GAAG,KAAK1hB,MAAL,CAAY,gBAAZ,CAApB;;AACA,UAAI,CAACga,KAAK,CAACC,OAAN,CAAcyH,aAAd,CAAL,EAAmC;AAC/B;AACH;;AACD,UAAIC,aAAa,GAAG,CAAC,GAAGvqB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGwQ,aAAa,CAACxQ,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACyQ,aAA3C,EAA0DF,aAA1D;AACH;AAVF,GA76CmB,EAw7CnB;AACChoB,IAAAA,GAAG,EAAE,kBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIwmB,aAAa,GAAG,CAAC,GAAGzqB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACImW,0BAA0B,GAAGD,aAAa,CAACC,0BAD/C;;AAEA,UAAIC,KAAK,GAAG,KAAKC,aAAL,EAAZ;;AACA,UAAI,KAAKC,UAAL,KAAoBF,KAAxB,EAA+B;AAC3B,aAAKE,UAAL,GAAkBF,KAAlB;AACAD,QAAAA,0BAA0B,CAACI,SAA3B,GAAuCH,KAAvC;AACH;AACJ;AAVF,GAx7CmB,EAm8CnB;AACCroB,IAAAA,GAAG,EAAE,eADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI8mB,aAAa,GAAG,CAAC,GAAG/qB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIqU,WAAW,GAAGmC,aAAa,CAACnC,WADhC;;AAEA,UAAI+B,KAAK,GAAG,EAAZ;AACAA,MAAAA,KAAK,CAAC/B,WAAW,CAACC,EAAb,CAAL,GAAwBxoB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,kBAAxB,CAAxB;AACAL,MAAAA,KAAK,CAAC/B,WAAW,CAACE,EAAb,CAAL,GAAwBzoB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,kBAAxB,CAAxB;AACAL,MAAAA,KAAK,CAAC/B,WAAW,CAACG,EAAb,CAAL,GAAwB1oB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,kBAAxB,CAAxB;AACA,aAAOL,KAAP;AACH;AAVF,GAn8CmB,EA88CnB;AACCroB,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIgnB,aAAa,GAAG,CAAC,GAAGjrB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACImW,0BAA0B,GAAGO,aAAa,CAACP,0BAD/C;;AAEAA,MAAAA,0BAA0B,CAACQ,UAA3B,GAAwC,UAASjnB,KAAT,EAAgB;AACpD,eAAO3D,OAAO,CAAClB,OAAR,CAAgB4rB,MAAhB,CAAuB/mB,KAAvB,CAAP;AACH,OAFD;AAGH;AARF,GA98CmB,EAu9CnB;AACC3B,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIknB,aAAa,GAAG,CAAC,GAAGnrB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGoR,aAAa,CAACpR,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACqR,SAA3C,EAAsD,KAAKC,oBAAL,CAA0B,KAAKziB,MAAL,CAAY,WAAZ,CAA1B,CAAtD;AACH;AANF,GAv9CmB,EA89CnB;AACCtG,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIqnB,aAAa,GAAG,CAAC,GAAGtrB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGuR,aAAa,CAACvR,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACwR,KAA3C,EAAkD,KAAKF,oBAAL,CAA0B,KAAKziB,MAAL,CAAY,OAAZ,CAA1B,CAAlD;AACH;AANF,GA99CmB,EAq+CnB;AACCtG,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIunB,QAAQ,GAAG,KAAK5iB,MAAL,CAAY,UAAZ,CAAf;;AACA,UAAI,CAAC4iB,QAAD,IAAa,CAACA,QAAQ,CAACC,KAAvB,IAAgC,CAACD,QAAQ,CAACvc,MAA9C,EAAsD;AAClD;AACH;;AACD,UAAIyc,aAAa,GAAG,CAAC,GAAG1rB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAG2R,aAAa,CAAC3R,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC4R,QAA3C,EAAqDH,QAArD;AACH;AAVF,GAr+CmB,EAg/CnB;AACClpB,IAAAA,GAAG,EAAE,2BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI2nB,aAAa,GAAG,KAAKhjB,MAAL,CAAY,gBAAZ,CAApB;;AACA,UAAI,CAACga,KAAK,CAACC,OAAN,CAAc+I,aAAd,CAAL,EAAmC;AAC/B;AACH;;AACD,UAAIC,aAAa,GAAG,CAAC,GAAG7rB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAG8R,aAAa,CAAC9R,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC+R,aAA3C,EAA0DF,aAA1D;AACH;AAVF,GAh/CmB,EA2/CnB;AACCtpB,IAAAA,GAAG,EAAE,6BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI8nB,aAAa,GAAG,CAAC,GAAG/rB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGgS,aAAa,CAAChS,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACiS,aAA3C,EAA0D,gBAAgB,KAAKpjB,MAAL,CAAY,iBAAZ,CAA1E;AACH;AANF,GA3/CmB,EAkgDnB;AACCtG,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIgoB,aAAa,GAAG,CAAC,GAAGjsB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGkS,aAAa,CAAClS,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACmS,SAA3C,EAAsD,KAAKtjB,MAAL,CAAY,WAAZ,CAAtD;AACH;AANF,GAlgDmB,EAygDnB;AACCtG,IAAAA,GAAG,EAAE,mBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIkoB,aAAa,GAAG,CAAC,GAAGnsB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACImW,0BAA0B,GAAGyB,aAAa,CAACzB,0BAD/C;;AAEA,UAAI0B,KAAK,GAAG,KAAKC,cAAL,EAAZ;;AACA,UAAI,KAAKC,WAAL,KAAqBF,KAAzB,EAAgC;AAC5B,aAAKE,WAAL,GAAmBF,KAAnB;AACA1B,QAAAA,0BAA0B,CAAC6B,UAA3B,GAAwCH,KAAxC;AACH;AACJ;AAVF,GAzgDmB,EAohDnB;AACC9pB,IAAAA,GAAG,EAAE,gBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIuoB,aAAa,GAAG,CAAC,GAAGxsB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIkY,UAAU,GAAGD,aAAa,CAACC,UAD/B;;AAEA,UAAIL,KAAK,GAAG,EAAZ;AACAA,MAAAA,KAAK,CAACK,UAAU,CAACC,IAAZ,CAAL,GAAyBrsB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,qBAAxB,CAAzB;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACE,SAAZ,CAAL,GAA8BtsB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,0BAAxB,CAA9B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACG,OAAZ,CAAL,GAA4BvsB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,wBAAxB,CAA5B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACI,KAAZ,CAAL,GAA0BxsB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,sBAAxB,CAA1B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACK,QAAZ,CAAL,GAA6BzsB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,yBAAxB,CAA7B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACM,OAAZ,CAAL,GAA4B1sB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,wBAAxB,CAA5B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACO,KAAZ,CAAL,GAA0B3sB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,sBAAxB,CAA1B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACQ,QAAZ,CAAL,GAA6B5sB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,yBAAxB,CAA7B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACS,OAAZ,CAAL,GAA4B7sB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,wBAAxB,CAA5B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACU,OAAZ,CAAL,GAA4B9sB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,wBAAxB,CAA5B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACW,IAAZ,CAAL,GAAyB/sB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,qBAAxB,CAAzB;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACY,SAAZ,CAAL,GAA8BhtB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,0BAAxB,CAA9B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACa,OAAZ,CAAL,GAA4BjtB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,wBAAxB,CAA5B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACc,UAAZ,CAAL,GAA+BltB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,2BAAxB,CAA/B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACe,SAAZ,CAAL,GAA8BntB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,0BAAxB,CAA9B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACgB,WAAZ,CAAL,GAAgCptB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,4BAAxB,CAAhC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACiB,cAAZ,CAAL,GAAmCrtB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,+BAAxB,CAAnC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACkB,OAAZ,CAAL,GAA4BttB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,wBAAxB,CAA5B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACmB,QAAZ,CAAL,GAA6BvtB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,yBAAxB,CAA7B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACoB,UAAZ,CAAL,GAA+BxtB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,2BAAxB,CAA/B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACqB,iBAAZ,CAAL,GAAsCztB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,kCAAxB,CAAtC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACsB,QAAZ,CAAL,GAA6B1tB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,yBAAxB,CAA7B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACuB,iBAAZ,CAAL,GAAsC3tB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,kCAAxB,CAAtC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACwB,WAAZ,CAAL,GAAgC5tB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,4BAAxB,CAAhC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACyB,WAAZ,CAAL,GAAgC7tB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,4BAAxB,CAAhC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC0B,IAAZ,CAAL,GAAyB9tB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,qBAAxB,CAAzB;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC2B,QAAZ,CAAL,GAA6B/tB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,yBAAxB,CAA7B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC4B,QAAZ,CAAL,GAA6BhuB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,yBAAxB,CAA7B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC6B,eAAZ,CAAL,GAAoCjuB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,gCAAxB,CAApC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC8B,SAAZ,CAAL,GAA8BluB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,0BAAxB,CAA9B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC+B,eAAZ,CAAL,GAAoCnuB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,gCAAxB,CAApC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACgC,KAAZ,CAAL,GAA0BpuB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,sBAAxB,CAA1B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACiC,UAAZ,CAAL,GAA+BruB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,2BAAxB,CAA/B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACkC,OAAZ,CAAL,GAA4BtuB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,wBAAxB,CAA5B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACmC,KAAZ,CAAL,GAA0BvuB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,sBAAxB,CAA1B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACoC,SAAZ,CAAL,GAA8BxuB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,0BAAxB,CAA9B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACqC,EAAZ,CAAL,GAAuBzuB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,mBAAxB,CAAvB;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACsC,eAAZ,CAAL,GAAoC1uB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,gCAAxB,CAApC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACuC,SAAZ,CAAL,GAA8B3uB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,qCAAxB,CAA9B;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACwC,iBAAZ,CAAL,GAAsC5uB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,kCAAxB,CAAtC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAACyC,mBAAZ,CAAL,GAAwC7uB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,oCAAxB,CAAxC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC0C,IAAZ,CAAL,GAAyB9uB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,gCAAxB,CAAzB;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC2C,mBAAZ,CAAL,GAAwC/uB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,oCAAxB,CAAxC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC4C,kBAAZ,CAAL,GAAuChvB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,mCAAxB,CAAvC;AACAoB,MAAAA,KAAK,CAACK,UAAU,CAAC6C,oBAAZ,CAAL,GAAyCjvB,QAAQ,CAACjB,OAAT,CAAiB4rB,MAAjB,CAAwB,qCAAxB,CAAzC;AACA,aAAOoB,KAAP;AACH;AApDF,GAphDmB,EAykDnB;AACC9pB,IAAAA,GAAG,EAAE,iCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAIsrB,aAAa,GAAG,CAAC,GAAGvvB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIib,YAAY,GAAGD,aAAa,CAACC,YADjC;;AAEAA,MAAAA,YAAY,CAACC,gBAAb,GAAgC,UAASzW,OAAT,EAAkB0W,SAAlB,EAA6BxH,OAA7B,EAAsC;AAClE/nB,QAAAA,cAAc,CAACf,OAAf,CAAuB8nB,EAAvB,CAA0BlO,OAA1B,EAAmC0W,SAAnC,EAA8CxH,OAA9C;AACH,OAFD;;AAGAsH,MAAAA,YAAY,CAACG,mBAAb,GAAmC,UAAS3W,OAAT,EAAkB0W,SAAlB,EAA6BxH,OAA7B,EAAsC;AACrE/nB,QAAAA,cAAc,CAACf,OAAf,CAAuBgpB,GAAvB,CAA2BpP,OAA3B,EAAoC0W,SAApC,EAA+CxH,OAA/C;AACH,OAFD;AAGH;AAXF,GAzkDmB,EAqlDnB;AACC5lB,IAAAA,GAAG,EAAE,8BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK2E,MAAL,CAAY,6BAAZ,CAAJ,EAAgD;AAC5C,aAAK+B,gBAAL,CAAsBilB,yBAAtB,CAAgD,KAAKhnB,MAAL,CAAY,6BAAZ,CAAhD;AACH;;AACD,UAAI,KAAKA,MAAL,CAAY,iCAAZ,CAAJ,EAAoD;AAChD,aAAK+B,gBAAL,CAAsBklB,6BAAtB,CAAoD,KAAKjnB,MAAL,CAAY,iCAAZ,CAApD;AACH;;AACD,WAAK+B,gBAAL,CAAsBmlB,6BAAtB,CAAoD;AAChDC,QAAAA,UAAU,EAAE,KAAK3Q,uBAAL,CAA6B,KAAKxW,MAAL,CAAY,yCAAZ,CAA7B,CADoC;AAEhDonB,QAAAA,eAAe,EAAE,KAAKtQ,uBAAL,CAA6B,KAAK9W,MAAL,CAAY,0CAAZ,CAA7B,CAF+B;AAGhDqnB,QAAAA,aAAa,EAAE,KAAKvQ,uBAAL,CAA6B,KAAK9W,MAAL,CAAY,wCAAZ,CAA7B;AAHiC,OAApD;;AAKA,WAAK+B,gBAAL,CAAsBulB,sBAAtB,CAA6C;AACzCC,QAAAA,aAAa,EAAE,KAAKvnB,MAAL,CAAY,qCAAZ,CAD0B;AAEzCwnB,QAAAA,aAAa,EAAE,KAAKxnB,MAAL,CAAY,qCAAZ,CAF0B;AAGzCynB,QAAAA,cAAc,EAAE,KAAKznB,MAAL,CAAY,sCAAZ,CAHyB;AAIzC0nB,QAAAA,cAAc,EAAE,KAAK1nB,MAAL,CAAY,sCAAZ;AAJyB,OAA7C;AAMH;AApBF,GArlDmB,EA0mDnB;AACCtG,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK0G,gBAAL,CAAsB4lB,sBAAtB,CAA6C;AACzCC,QAAAA,QAAQ,EAAE,KAAK5nB,MAAL,CAAY,uBAAZ,CAD+B;AAEzC6nB,QAAAA,mBAAmB,EAAE,KAAK7nB,MAAL,CAAY,uBAAZ,CAFoB;AAGzC8nB,QAAAA,WAAW,EAAE,KAAK9nB,MAAL,CAAY,0BAAZ,CAH4B;AAIzC+nB,QAAAA,eAAe,EAAE,KAAK/nB,MAAL,CAAY,8BAAZ,CAJwB;AAKzCgoB,QAAAA,gBAAgB,EAAE,KAAKhoB,MAAL,CAAY,+BAAZ,CALuB;AAMzCioB,QAAAA,qBAAqB,EAAE,KAAKjoB,MAAL,CAAY,oCAAZ,CANkB;AAOzCkoB,QAAAA,eAAe,EAAE,KAAKloB,MAAL,CAAY,8BAAZ,CAPwB;AAQzCmoB,QAAAA,mBAAmB,EAAE,KAAKnoB,MAAL,CAAY,kCAAZ,CARoB;AASzCooB,QAAAA,WAAW,EAAE,KAAKpoB,MAAL,CAAY,0BAAZ,CAT4B;AAUzCqoB,QAAAA,SAAS,EAAE,KAAKroB,MAAL,CAAY,wBAAZ;AAV8B,OAA7C;AAYH;AAfF,GA1mDmB,EA0nDnB;AACCtG,IAAAA,GAAG,EAAE,OADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK6H,aAAL;AACH;AAJF,GA1nDmB,EA+nDnB;AACCxJ,IAAAA,GAAG,EAAE,QADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,KAAKitB,eAAL,EAAP;AACH;AAJF,GA/nDmB,EAooDnB;AACC5uB,IAAAA,GAAG,EAAE,UADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS+mB,MAAT,EAAiBzX,QAAjB,EAA2B;AAC9B,UAAI9F,OAAO,GAAG,KAAK0jB,0BAAL,CAAgCnG,MAAhC,CAAd;;AACA,WAAKhR,sBAAL,CAA4BvM,OAA5B,EAAqC8F,QAArC;AACH;AALF,GApoDmB,EA0oDnB;AACCjR,IAAAA,GAAG,EAAE,4BADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS+mB,MAAT,EAAiB;AACpB,UAAIoG,aAAa,GAAG,CAAC,GAAGpxB,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACIwF,cAAc,GAAGqX,aAAa,CAACrX,cADnC;;AAEA,cAAQiR,MAAR;AACI,aAAK,KAAL;AACI,iBAAOjR,cAAc,CAACsX,SAAtB;;AACJ,aAAK,KAAL;AACI,iBAAOtX,cAAc,CAACuX,SAAtB;;AACJ;AACI,iBAAOvX,cAAc,CAACwX,SAAtB;AANR;AAQH;AAbF,GA1oDmB,EAwpDnB;AACCjvB,IAAAA,GAAG,EAAE,QADN;AAEC2B,IAAAA,KAAK,EAAE,UAASiW,IAAT,EAAesX,uBAAf,EAAwC;AAC3C,WAAKC,eAAL,CAAqBvX,IAArB,EAA2BsX,uBAA3B;;AACA,WAAK/c,sBAAL;AACH;AALF,GAxpDmB,EA8pDnB;AACCnS,IAAAA,GAAG,EAAE,eADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK0G,gBAAL,IAAyB,KAAKA,gBAAL,CAAsB+mB,cAAtB,EAAzB;AACA,WAAK/nB,QAAL,IAAiB,KAAKA,QAAL,CAAcqH,eAAd,EAAjB;AACH;AALF,GA9pDmB,EAoqDnB;AACC1O,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,aAAO,CAAC,GAAGtE,OAAO,CAACmO,MAAZ,EAAoBnK,IAAI,CAACQ,eAAe,CAACyD,OAAO,CAAC1I,SAAT,CAAhB,EAAqC,oBAArC,EAA2D,IAA3D,CAAJ,CAAqEsD,IAArE,CAA0E,IAA1E,CAApB,EAAqG;AACxGymB,QAAAA,QAAQ,EAAE,KAD8F;AAExGE,QAAAA,SAAS,EAAEviB,yBAF6F;AAGxG+qB,QAAAA,UAAU,EAAE,KAH4F;AAIxGC,QAAAA,YAAY,EAAE/qB,6BAJ0F;AAKxG2f,QAAAA,UAAU,EAAE,KAL4F;AAMxGqL,QAAAA,QAAQ,EAAE,IAN8F;AAOxGC,QAAAA,UAAU,EAAE,IAP4F;AAQxGC,QAAAA,KAAK,EAAEprB,oBARiG;AASxGqrB,QAAAA,SAAS,EAAErrB,oBAT6F;AAUxGsrB,QAAAA,eAAe,EAAEnrB,gCAVuF;AAWxGorB,QAAAA,SAAS,EAAEnrB,0BAX6F;AAYxGorB,QAAAA,UAAU,EAAE,KAZ4F;AAaxGC,QAAAA,KAAK,EAAE;AACHC,UAAAA,UAAU,EAAE,IADT;AAEHC,UAAAA,OAAO,EAAE,IAFN;AAGHC,UAAAA,cAAc,EAAE,KAAK,CAHlB;AAIHC,UAAAA,UAAU,EAAE,KAAK,CAJd;AAKHC,UAAAA,SAAS,EAAE,KAAK,CALb;AAMHC,UAAAA,aAAa,EAAE,KAAK,CANjB;AAOHC,UAAAA,UAAU,EAAE,KAAK,CAPd;AAQHC,UAAAA,QAAQ,EAAE,MARP;AASHC,UAAAA,QAAQ,EAAE,MATP;AAUHC,UAAAA,YAAY,EAAE,KAAK,CAVhB;AAWHC,UAAAA,aAAa,EAAE,KAAK,CAXjB;AAYHC,UAAAA,SAAS,EAAE,KAAK,CAZb;AAaHC,UAAAA,QAAQ,EAAE,KAAK,CAbZ;AAcHC,UAAAA,OAAO,EAAE,KAAK,CAdX;AAeHC,UAAAA,SAAS,EAAE,KAAK,CAfb;AAgBHC,UAAAA,UAAU,EAAE,KAAK,CAhBd;AAiBHC,UAAAA,gBAAgB,EAAE,KAAK,CAjBpB;AAkBHC,UAAAA,qBAAqB,EAAE,UAlBpB;AAmBHC,UAAAA,UAAU,EAAE,MAnBT;AAoBHxR,UAAAA,eAAe,EAAE;AApBd,SAbiG;AAmCxGyR,QAAAA,KAAK,EAAE;AACHnB,UAAAA,UAAU,EAAE,IADT;AAEHC,UAAAA,OAAO,EAAE,IAFN;AAGHC,UAAAA,cAAc,EAAE,KAAK,CAHlB;AAIHC,UAAAA,UAAU,EAAE,KAAK,CAJd;AAKHC,UAAAA,SAAS,EAAE,KAAK,CALb;AAMHC,UAAAA,aAAa,EAAE,KAAK,CANjB;AAOHC,UAAAA,UAAU,EAAE,KAAK,CAPd;AAQHc,UAAAA,QAAQ,EAAE,MARP;AASHC,UAAAA,kBAAkB,EAAE,KAAK,CATtB;AAUHC,UAAAA,MAAM,EAAE,IAVL;AAWHC,UAAAA,gBAAgB,EAAE,KAAK,CAXpB;AAYHC,UAAAA,UAAU,EAAE,KAAK,CAZd;AAaHhB,UAAAA,QAAQ,EAAE,KAAK,CAbZ;AAcHiB,UAAAA,YAAY,EAAE,KAAK,CAdhB;AAeHC,UAAAA,eAAe,EAAE,KAAK,CAfnB;AAgBHC,UAAAA,aAAa,EAAE,KAAK;AAhBjB,SAnCiG;AAqDxGvR,QAAAA,YAAY,EAAE,EArD0F;AAsDxGwR,QAAAA,OAAO,EAAE;AACLC,UAAAA,UAAU,EAAE,MADP;AAELC,UAAAA,gBAAgB,EAAEjtB,8BAFb;AAGLmI,UAAAA,UAAU,EAAE;AAHP,SAtD+F;AA2DxG+kB,QAAAA,WAAW,EAAE;AACT7jB,UAAAA,OAAO,EAAE;AADA,SA3D2F;AA8DxG8jB,QAAAA,cAAc,EAAE;AACZ9jB,UAAAA,OAAO,EAAE;AADG,SA9DwF;AAiExG+jB,QAAAA,WAAW,EAAE;AACT/jB,UAAAA,OAAO,EAAE;AADA,SAjE2F;AAoExGgkB,QAAAA,WAAW,EAAE;AACTC,UAAAA,OAAO,EAAE;AADA,SApE2F;AAuExGC,QAAAA,cAAc,EAAE;AACZD,UAAAA,OAAO,EAAE,IADG;AAEZL,UAAAA,gBAAgB,EAAE/sB,sCAFN;AAGZqkB,UAAAA,KAAK,EAAEpkB;AAHK,SAvEwF;AA4ExGqtB,QAAAA,eAAe,EAAE;AACbR,UAAAA,UAAU,EAAE;AADC,SA5EuF;AA+ExGS,QAAAA,qBAAqB,EAAE;AACnBC,UAAAA,iBAAiB,EAAE,YADA;AAEnBC,UAAAA,kBAAkB,EAAE,MAFD;AAGnBC,UAAAA,gBAAgB,EAAE;AAHC,SA/EiF;AAoFxGC,QAAAA,OAAO,EAAE;AACLC,UAAAA,aAAa,EAAE,IADV;AAELC,UAAAA,gBAAgB,EAAE,IAFb;AAGLC,UAAAA,oBAAoB,EAAE,IAHjB;AAILC,UAAAA,qBAAqB,EAAE,IAJlB;AAKLC,UAAAA,0BAA0B,EAAE,IALvB;AAMLC,UAAAA,oBAAoB,EAAE,IANjB;AAOLC,UAAAA,wBAAwB,EAAE,IAPrB;AAQLC,UAAAA,gBAAgB,EAAE,IARb;AASLC,UAAAA,cAAc,EAAE;AATX,SApF+F;AA+FxG,kBAAU;AACNC,UAAAA,QAAQ,EAAE,SADJ;AAENC,UAAAA,QAAQ,EAAE,KAAK;AAFT,SA/F8F;AAmGxGhjB,QAAAA,WAAW,EAAE,IAnG2F;AAoGxGijB,QAAAA,cAAc,EAAE,IApGwF;AAqGxGC,QAAAA,kBAAkB,EAAE,IArGoF;AAsGxGC,QAAAA,sBAAsB,EAAE,IAtGgF;AAuGxGC,QAAAA,qBAAqB,EAAE;AAvGiF,OAArG,CAAP;AAyGH;AA5GF,GApqDmB,EAixDnB;AACCxzB,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK8xB,YAAT,EAAuB;AACnB,aAAKntB,MAAL,CAAY,YAAZ,EAA0B,IAA1B;AACH;AACJ;AANF,GAjxDmB,EAwxDnB;AACCtG,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,UAASiW,IAAT,EAAe3G,QAAf,EAAyByiB,aAAzB,EAAwC;AAC3C,UAAI,KAAKzc,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkB0c,MAAlB,CAAyB/b,IAAzB,EAA+B3G,QAA/B,EAAyCyiB,aAAzC;AACH;AACJ;AANF,GAxxDmB,EA+xDnB;AACC1zB,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS3B,GAAT,EAAc4X,IAAd,EAAoB3G,QAApB,EAA8ByiB,aAA9B,EAA6C;AAChD,UAAI,KAAKzc,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkB2c,MAAlB,CAAyB5zB,GAAzB,EAA8B4X,IAA9B,EAAoC3G,QAApC,EAA8CyiB,aAA9C;AACH;AACJ;AANF,GA/xDmB,EAsyDnB;AACC1zB,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS3B,GAAT,EAAc4X,IAAd,EAAoB3G,QAApB,EAA8ByiB,aAA9B,EAA6C;AAChD,UAAI,KAAKzc,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBzI,MAAlB,CAAyBxO,GAAzB,EAA8B4X,IAA9B,EAAoC3G,QAApC,EAA8CyiB,aAA9C;AACH;AACJ;AANF,GAtyDmB,EA6yDnB;AACC1zB,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,UAASiW,IAAT,EAAe3G,QAAf,EAAyByiB,aAAzB,EAAwC;AAC3C,UAAI,KAAK3c,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkB4c,MAAlB,CAAyB/b,IAAzB,EAA+B3G,QAA/B,EAAyCyiB,aAAzC;AACH;AACJ;AANF,GA7yDmB,EAozDnB;AACC1zB,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS3B,GAAT,EAAc4X,IAAd,EAAoB3G,QAApB,EAA8ByiB,aAA9B,EAA6C;AAChD,UAAI,KAAK3c,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkB6c,MAAlB,CAAyB5zB,GAAzB,EAA8B4X,IAA9B,EAAoC3G,QAApC,EAA8CyiB,aAA9C;AACH;AACJ;AANF,GApzDmB,EA2zDnB;AACC1zB,IAAAA,GAAG,EAAE,yBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS3B,GAAT,EAAc4X,IAAd,EAAoB3G,QAApB,EAA8ByiB,aAA9B,EAA6C;AAChD,UAAI,KAAK3c,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBvI,MAAlB,CAAyBxO,GAAzB,EAA8B4X,IAA9B,EAAoC3G,QAApC,EAA8CyiB,aAA9C;AACH;AACJ;AANF,GA3zDmB,EAk0DnB;AACC1zB,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK0F,QAAT,EAAmB;AACf,aAAKA,QAAL,CAAc4L,sBAAd;;AACA,YAAI,KAAK/H,kBAAL,EAAJ,EAA+B;AAC3B,eAAK7D,QAAL,CAAc6G,IAAd;;AACA,eAAK2lB,kBAAL,GAA0B,IAA1B;AACH;AACJ;AACJ;AAVF,GAl0DmB,EA60DnB;AACC7zB,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK0F,QAAT,EAAmB;AACf,aAAKA,QAAL,CAAc8L,oBAAd;;AACA,YAAI,KAAK0gB,kBAAT,EAA6B;AACzB,eAAKxsB,QAAL,CAAcysB,IAAd;;AACA,iBAAO,KAAKD,kBAAZ;AACH;AACJ;AACJ;AAVF,GA70DmB,EAw1DnB;AACC7zB,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK4M,iBAAL,GAAyB,IAAzB;;AACA,UAAI,KAAK9G,gBAAT,EAA2B;AACvB,YAAI,KAAKyD,kBAAL,MAA6B,KAAKzD,gBAAL,CAAsBiF,SAAtB,EAAjC,EAAoE;AAChE,eAAKjF,gBAAL,CAAsByG,IAAtB;;AACA,eAAK6lB,+BAAL,GAAuC,IAAvC;AACH;AACJ;;AACD,UAAI,KAAK1sB,QAAT,EAAmB;AACf,YAAI,KAAK6D,kBAAL,MAA6B,KAAK7D,QAAL,CAAcqF,SAAd,EAAjC,EAA4D;AACxD,eAAKrF,QAAL,CAAc6G,IAAd;;AACA,eAAK8lB,uBAAL,GAA+B,IAA/B;AACH;AACJ;AACJ;AAhBF,GAx1DmB,EAy2DnB;AACCh0B,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK8F,gBAAT,EAA2B;AACvB,YAAI,KAAKssB,+BAAT,EAA0C;AACtC,eAAKtsB,gBAAL,CAAsBqsB,IAAtB;;AACA,iBAAO,KAAKC,+BAAZ;AACH;AACJ;;AACD,UAAI,KAAK1sB,QAAT,EAAmB;AACf,YAAI,KAAK2sB,uBAAT,EAAkC;AAC9B,eAAK3sB,QAAL,CAAcysB,IAAd;;AACA,iBAAO,KAAKE,uBAAZ;AACH;AACJ;;AACD,WAAKzlB,iBAAL,GAAyB,KAAzB;AACH;AAhBF,GAz2DmB,EA03DnB;AACCvO,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAKsyB,gBAAL,GAAwB,KAAKC,qBAAL,CAA2B,aAA3B,CAAxB;AACH;AAJF,GA13DmB,EA+3DnB;AACCl0B,IAAAA,GAAG,EAAE,2BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAKwyB,mBAAL,GAA2B,KAAKD,qBAAL,CAA2B,gBAA3B,CAA3B;AACH;AAJF,GA/3DmB,EAo4DnB;AACCl0B,IAAAA,GAAG,EAAE,+BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAKyyB,uBAAL,GAA+B,KAAKF,qBAAL,CAA2B,oBAA3B,CAA/B;AACH;AAJF,GAp4DmB,EAy4DnB;AACCl0B,IAAAA,GAAG,EAAE,mCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK0yB,2BAAL,GAAmC,KAAKH,qBAAL,CAA2B,wBAA3B,CAAnC;AACH;AAJF,GAz4DmB,EA84DnB;AACCl0B,IAAAA,GAAG,EAAE,kCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK6W,0BAAL,GAAkC,KAAK0b,qBAAL,CAA2B,uBAA3B,CAAlC;AACH;AAJF,GA94DmB,EAm5DnB;AACCl0B,IAAAA,GAAG,EAAE,sBADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,WAAK0J,oBAAL,GAA4B,KAAK6oB,qBAAL,CAA2B,iBAA3B,CAA5B;AACH;AAJF,GAn5DmB,EAw5DnB;AACCl0B,IAAAA,GAAG,EAAE,uBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS2yB,UAAT,EAAqB;AACxB,UAAI,CAAC,KAAKL,gBAAV,EAA4B;AACxB,aAAKM,sBAAL;AACH;;AACD,WAAKN,gBAAL,CAAsB;AAClB3Q,QAAAA,IAAI,EAAE,KAAKG,wBAAL,CAA8B6Q,UAA9B;AADY,OAAtB;AAGH;AATF,GAx5DmB,EAk6DnB;AACCt0B,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS2yB,UAAT,EAAqB;AACxB,UAAI,CAAC,KAAKH,mBAAV,EAA+B;AAC3B,aAAKK,yBAAL;AACH;;AACD,WAAKL,mBAAL,CAAyB;AACrB7Q,QAAAA,IAAI,EAAE,KAAKG,wBAAL,CAA8B6Q,UAA9B;AADe,OAAzB;AAGH;AATF,GAl6DmB,EA46DnB;AACCt0B,IAAAA,GAAG,EAAE,wBADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS8yB,WAAT,EAAsB;AACzB,UAAI,CAAC,KAAKL,uBAAV,EAAmC;AAC/B,aAAKM,6BAAL;AACH;;AACD,WAAKN,uBAAL,CAA6B;AACzB/L,QAAAA,KAAK,EAAEoM,WAAW,CAACvc,GAAZ,CAAgB,KAAKuL,wBAAL,CAA8B/Y,IAA9B,CAAmC,IAAnC,CAAhB;AADkB,OAA7B;AAGH;AATF,GA56DmB,EAs7DnB;AACC1K,IAAAA,GAAG,EAAE,4BADN;AAEC2B,IAAAA,KAAK,EAAE,UAASgzB,SAAT,EAAoBC,IAApB,EAA0B;AAC7B,UAAI,CAAC,KAAKP,2BAAV,EAAuC;AACnC,aAAKQ,iCAAL;AACH;;AACD,UAAInc,SAAS,GAAG,KAAKoc,iCAAL,CAAuCH,SAAvC,EAAkDC,IAAlD,CAAhB;;AACA,WAAKP,2BAAL,CAAiC3b,SAAjC;;AACAkc,MAAAA,IAAI,CAACjc,OAAL,GAAeD,SAAS,CAACC,OAAzB;AACH;AATF,GAt7DmB,EAg8DnB;AACC3Y,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASgzB,SAAT,EAAoB;AACvB,UAAII,aAAa,GAAG,CAAC,GAAGr3B,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACI+iB,qBAAqB,GAAGD,aAAa,CAACC,qBAD1C;;AAEA,cAAQL,SAAR;AACI,aAAKK,qBAAqB,CAACC,QAA3B;AACI,iBAAO,UAAP;;AACJ,aAAKD,qBAAqB,CAACE,mBAA3B;AACI,iBAAO,qBAAP;;AACJ,aAAKF,qBAAqB,CAACG,WAA3B;AACI,iBAAO,aAAP;;AACJ,aAAKH,qBAAqB,CAACI,eAA3B;AACI,iBAAO,iBAAP;;AACJ,aAAKJ,qBAAqB,CAACK,gBAA3B;AACI,iBAAO,kBAAP;;AACJ,aAAKL,qBAAqB,CAACM,qBAA3B;AACI,iBAAO,uBAAP;;AACJ,aAAKN,qBAAqB,CAACO,qBAA3B;AACI,iBAAO,uBAAP;;AACJ,aAAKP,qBAAqB,CAACQ,eAA3B;AACI,iBAAO,iBAAP;;AACJ,aAAKR,qBAAqB,CAACS,yBAA3B;AACI,iBAAO,2BAAP;;AACJ,aAAKT,qBAAqB,CAACU,mBAA3B;AACI,iBAAO,qBAAP;;AACJ,aAAKV,qBAAqB,CAACW,WAA3B;AACI,iBAAO,aAAP;;AACJ,aAAKX,qBAAqB,CAACY,SAA3B;AACI,iBAAO,WAAP;AAxBR;AA0BH;AA/BF,GAh8DmB,EAg+DnB;AACC51B,IAAAA,GAAG,EAAE,mCADN;AAEC2B,IAAAA,KAAK,EAAE,UAASgzB,SAAT,EAAoBC,IAApB,EAA0B;AAC7B,UAAIiB,aAAa,GAAG,CAAC,GAAGn4B,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACI+iB,qBAAqB,GAAGa,aAAa,CAACb,qBAD1C;AAAA,UAEIc,iBAAiB,GAAGD,aAAa,CAACC,iBAFtC;;AAGA,UAAIpd,SAAS,GAAG;AACZic,QAAAA,SAAS,EAAE,KAAKoB,kBAAL,CAAwBpB,SAAxB,CADC;AAEZhc,QAAAA,OAAO,EAAEic,IAAI,CAACjc,OAFF;AAGZqd,QAAAA,QAAQ,EAAEpB,IAAI,CAACoB,QAHH;AAIZC,QAAAA,MAAM,EAAErB,IAAI,CAACoB,QAAL,GAAgB,4BAAhB,GAA+C;AAJ3C,OAAhB;;AAMA,cAAQrB,SAAR;AACI,aAAKK,qBAAqB,CAACC,QAA3B;AACIvc,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbsB,YAAAA,KAAK,EAAEtB,IAAI,CAACsB,KAAL,IAAc,KAAKzS,wBAAL,CAA8BmR,IAAI,CAACsB,KAAnC,CADR;AAEbC,YAAAA,QAAQ,EAAEvB,IAAI,CAACuB,QAAL,IAAiB;AACvBhT,cAAAA,CAAC,EAAEyR,IAAI,CAACuB,QAAL,CAAchT,CADM;AAEvBC,cAAAA,CAAC,EAAEwR,IAAI,CAACuB,QAAL,CAAc/S;AAFM;AAFd,WAAjB;AAOA;;AACJ,aAAK4R,qBAAqB,CAACE,mBAA3B;AACIxc,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACb5jB,YAAAA,SAAS,EAAE4jB,IAAI,CAAC5jB;AADH,WAAjB;AAGA;;AACJ,aAAKgkB,qBAAqB,CAACG,WAA3B;AACIzc,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbsB,YAAAA,KAAK,EAAEtB,IAAI,CAACsB,KAAL,IAAc,KAAKzS,wBAAL,CAA8BmR,IAAI,CAACsB,KAAnC;AADR,WAAjB;AAGA;;AACJ,aAAKlB,qBAAqB,CAACI,eAA3B;AACI1c,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbwB,YAAAA,SAAS,EAAExB,IAAI,CAACwB,SAAL,IAAkB,KAAK3S,wBAAL,CAA8BmR,IAAI,CAACwB,SAAnC;AADhB,WAAjB;AAGA;;AACJ,aAAKpB,qBAAqB,CAACK,gBAA3B;AACI3c,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbyB,YAAAA,QAAQ,EAAEzB,IAAI,CAACsB,KAAL,IAAc,KAAKzS,wBAAL,CAA8BmR,IAAI,CAACsB,KAAnC,CADX;AAEbI,YAAAA,QAAQ,EAAE1B,IAAI,CAAC0B,QAAL,IAAiB,KAAK7S,wBAAL,CAA8BmR,IAAI,CAAC0B,QAAnC,CAFd;AAGbF,YAAAA,SAAS,EAAExB,IAAI,CAACwB,SAAL,IAAkB,KAAK3S,wBAAL,CAA8BmR,IAAI,CAACwB,SAAnC,CAHhB;AAIbG,YAAAA,oBAAoB,EAAE3B,IAAI,CAAC2B,oBAJd;AAKbC,YAAAA,iBAAiB,EAAE5B,IAAI,CAACuB,QAAL,KAAkBL,iBAAiB,CAACW,KAApC,GAA4C,OAA5C,GAAsD;AAL5D,WAAjB;AAOA;;AACJ,aAAKzB,qBAAqB,CAACM,qBAA3B;AACI5c,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbwB,YAAAA,SAAS,EAAExB,IAAI,CAACwB,SAAL,IAAkB,KAAK3S,wBAAL,CAA8BmR,IAAI,CAACwB,SAAnC,CADhB;AAEbM,YAAAA,SAAS,EAAE9B,IAAI,CAAC+B,MAAL,IAAe/B,IAAI,CAAC+B,MAAL,CAAYze,GAAZ,CAAgB,UAASgL,EAAT,EAAa;AACnD,qBAAO;AACHC,gBAAAA,CAAC,EAAED,EAAE,CAACC,CADH;AAEHC,gBAAAA,CAAC,EAAEF,EAAE,CAACE;AAFH,eAAP;AAIH,aALyB,CAFb;AAQbwT,YAAAA,SAAS,EAAEhC,IAAI,CAACgC,SAAL,IAAkBhC,IAAI,CAACgC,SAAL,CAAe1e,GAAf,CAAmB,UAASgL,EAAT,EAAa;AACzD,qBAAO;AACHC,gBAAAA,CAAC,EAAED,EAAE,CAACC,CADH;AAEHC,gBAAAA,CAAC,EAAEF,EAAE,CAACE;AAFH,eAAP;AAIH,aAL4B;AARhB,WAAjB;AAeA;;AACJ,aAAK4R,qBAAqB,CAACO,qBAA3B;AACI7c,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbsB,YAAAA,KAAK,EAAEtB,IAAI,CAACsB,KAAL,IAAc,KAAKzS,wBAAL,CAA8BmR,IAAI,CAACsB,KAAnC;AADR,WAAjB;AAGA;;AACJ,aAAKlB,qBAAqB,CAACQ,eAA3B;AACI9c,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbsB,YAAAA,KAAK,EAAEtB,IAAI,CAACsB,KAAL,IAAc,KAAKzS,wBAAL,CAA8BmR,IAAI,CAACsB,KAAnC,CADR;AAEbpoB,YAAAA,IAAI,EAAE8mB,IAAI,CAAC9mB;AAFE,WAAjB;AAIA;;AACJ,aAAKknB,qBAAqB,CAACS,yBAA3B;AACI/c,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbwB,YAAAA,SAAS,EAAExB,IAAI,CAACwB,SAAL,IAAkB,KAAK3S,wBAAL,CAA8BmR,IAAI,CAACwB,SAAnC,CADhB;AAEbS,YAAAA,KAAK,EAAEjC,IAAI,CAACiC;AAFC,WAAjB;AAIA;;AACJ,aAAK7B,qBAAqB,CAACU,mBAA3B;AACIhd,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbwB,YAAAA,SAAS,EAAExB,IAAI,CAACwB,SAAL,IAAkB,KAAK3S,wBAAL,CAA8BmR,IAAI,CAACwB,SAAnC,CADhB;AAEbS,YAAAA,KAAK,EAAEjC,IAAI,CAACiC,KAFC;AAGb/oB,YAAAA,IAAI,EAAE8mB,IAAI,CAAC9mB;AAHE,WAAjB;AAKA;;AACJ,aAAKknB,qBAAqB,CAACW,WAA3B;AACIjd,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbsB,YAAAA,KAAK,EAAEtB,IAAI,CAACsB,KAAL,IAAc,KAAKzS,wBAAL,CAA8BmR,IAAI,CAACsB,KAAnC,CADR;AAEbY,YAAAA,OAAO,EAAElC,IAAI,CAACmC,IAAL,IAAa;AAClB5N,cAAAA,KAAK,EAAEyL,IAAI,CAACmC,IAAL,CAAU5N,KADC;AAElBxc,cAAAA,MAAM,EAAEioB,IAAI,CAACmC,IAAL,CAAUpqB;AAFA,aAFT;AAMbqqB,YAAAA,OAAO,EAAEpC,IAAI,CAACoC,OAAL,IAAgB;AACrB7N,cAAAA,KAAK,EAAEyL,IAAI,CAACoC,OAAL,CAAa7N,KADC;AAErBxc,cAAAA,MAAM,EAAEioB,IAAI,CAACoC,OAAL,CAAarqB;AAFA;AANZ,WAAjB;AAWA;;AACJ,aAAKqoB,qBAAqB,CAACY,SAA3B;AACIld,UAAAA,SAAS,CAACkc,IAAV,GAAiB;AACbsB,YAAAA,KAAK,EAAEtB,IAAI,CAACsB,KAAL,IAAc,KAAKzS,wBAAL,CAA8BmR,IAAI,CAACsB,KAAnC,CADR;AAEbe,YAAAA,WAAW,EAAErC,IAAI,CAACuB,QAAL,IAAiB;AAC1BhT,cAAAA,CAAC,EAAEyR,IAAI,CAACuB,QAAL,CAAchT,CADS;AAE1BC,cAAAA,CAAC,EAAEwR,IAAI,CAACuB,QAAL,CAAc/S;AAFS,aAFjB;AAMb8T,YAAAA,WAAW,EAAEtC,IAAI,CAACsC,WAAL,IAAoB;AAC7B/T,cAAAA,CAAC,EAAEyR,IAAI,CAACsC,WAAL,CAAiB/T,CADS;AAE7BC,cAAAA,CAAC,EAAEwR,IAAI,CAACsC,WAAL,CAAiB9T;AAFS;AANpB,WAAjB;AAzFR;;AAqGA,aAAO1K,SAAP;AACH;AAlHF,GAh+DmB,EAmlEnB;AACC1Y,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS2yB,UAAT,EAAqB;AACxB,UAAI6C,aAAa,GAAG,CAAC,GAAGz5B,QAAQ,CAACuU,UAAb,GAApB;AAAA,UACImlB,WAAW,GAAGD,aAAa,CAACC,WADhC;;AAEA,UAAIC,YAAY,GAAG/C,UAAU,YAAY8C,WAAtB,GAAoC,KAAKE,0BAAL,CAAgC5sB,IAAhC,CAAqC,IAArC,CAApC,GAAiF,KAAK6sB,kCAAL,CAAwC7sB,IAAxC,CAA6C,IAA7C,CAApG;AACA,aAAO,CAAC,GAAGrN,OAAO,CAACmO,MAAZ,EAAoB;AACvBgsB,QAAAA,EAAE,EAAElD,UAAU,CAACkD,EADQ;AAEvBx3B,QAAAA,GAAG,EAAEs0B,UAAU,CAACt0B,GAFO;AAGvBy3B,QAAAA,QAAQ,EAAE,KAAK;AAHQ,OAApB,EAIJJ,YAAY,CAAC/C,UAAD,CAJR,CAAP;AAKH;AAXF,GAnlEmB,EA+lEnB;AACCt0B,IAAAA,GAAG,EAAE,4BADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS+1B,WAAT,EAAsB;AACzB,aAAO;AACHD,QAAAA,QAAQ,EAAE,KAAK1gB,YAAL,IAAqB,KAAKA,YAAL,CAAkB4gB,QAAlB,CAA2BD,WAAW,CAAC13B,GAAvC,CAD5B;AAEH43B,QAAAA,QAAQ,EAAE,OAFP;AAGH9pB,QAAAA,IAAI,EAAE4pB,WAAW,CAAC5pB,IAHf;AAIHkR,QAAAA,IAAI,EAAE0Y,WAAW,CAAC1Y,IAJf;AAKHmX,QAAAA,QAAQ,EAAE;AACNhT,UAAAA,CAAC,EAAEuU,WAAW,CAACvB,QAAZ,CAAqBhT,CADlB;AAENC,UAAAA,CAAC,EAAEsU,WAAW,CAACvB,QAAZ,CAAqB/S;AAFlB,SALP;AASH2T,QAAAA,IAAI,EAAE;AACF5N,UAAAA,KAAK,EAAEuO,WAAW,CAACX,IAAZ,CAAiB5N,KADtB;AAEFxc,UAAAA,MAAM,EAAE+qB,WAAW,CAACX,IAAZ,CAAiBpqB;AAFvB,SATH;AAaHkrB,QAAAA,oBAAoB,EAAEH,WAAW,CAACG;AAb/B,OAAP;AAeH;AAlBF,GA/lEmB,EAknEnB;AACC73B,IAAAA,GAAG,EAAE,oCADN;AAEC2B,IAAAA,KAAK,EAAE,UAASm2B,eAAT,EAA0B;AAC7B,aAAO;AACHL,QAAAA,QAAQ,EAAE,KAAKxgB,YAAL,IAAqB,KAAKA,YAAL,CAAkB0gB,QAAlB,CAA2BG,eAAe,CAAC93B,GAA3C,CAD5B;AAEH43B,QAAAA,QAAQ,EAAE,WAFP;AAGH9N,QAAAA,KAAK,EAAEgO,eAAe,CAAChO,KAHpB;AAIHiO,QAAAA,OAAO,EAAED,eAAe,CAACC,OAJtB;AAKHC,QAAAA,KAAK,EAAEF,eAAe,CAACE,KALpB;AAMHC,QAAAA,MAAM,EAAEH,eAAe,CAACG,MANrB;AAOHC,QAAAA,cAAc,EAAEJ,eAAe,CAACI,cAP7B;AAQHC,QAAAA,IAAI,EAAEL,eAAe,CAACK,IARnB;AASHC,QAAAA,YAAY,EAAEN,eAAe,CAACM,YAT3B;AAUHzB,QAAAA,MAAM,EAAEmB,eAAe,CAACnB,MAAhB,CAAuBze,GAAvB,CAA2B,UAASgL,EAAT,EAAa;AAC5C,iBAAO;AACHC,YAAAA,CAAC,EAAED,EAAE,CAACC,CADH;AAEHC,YAAAA,CAAC,EAAEF,EAAE,CAACE;AAFH,WAAP;AAIH,SALO;AAVL,OAAP;AAiBH;AApBF,GAlnEmB,EAuoEnB;AACCpjB,IAAAA,GAAG,EAAE,cADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS3B,GAAT,EAAc;AACjB,UAAIs0B,UAAU,GAAG,KAAKjsB,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBgwB,sBAAtB,CAA6Cr4B,GAA7C,CAA1C;;AACA,aAAOs0B,UAAU,IAAI,KAAK7Q,wBAAL,CAA8B6Q,UAA9B,CAArB;AACH;AALF,GAvoEmB,EA6oEnB;AACCt0B,IAAAA,GAAG,EAAE,aADN;AAEC2B,IAAAA,KAAK,EAAE,UAAS61B,EAAT,EAAa;AAChB,UAAIlD,UAAU,GAAG,KAAKjsB,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBiwB,kBAAtB,CAAyCd,EAAzC,CAA1C;;AACA,aAAOlD,UAAU,IAAI,KAAK7Q,wBAAL,CAA8B6Q,UAA9B,CAArB;AACH;AALF,GA7oEmB,EAmpEnB;AACCt0B,IAAAA,GAAG,EAAE,gCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAKkG,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBvB,MAAlB,CAAyB;AACrBoF,UAAAA,QAAQ,EAAE,KAAKpF,MAAL,CAAY,sBAAZ;AADW,SAAzB;AAGH;AACJ;AARF,GAnpEmB,EA4pEnB;AACCtG,IAAAA,GAAG,EAAE,gCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK8F,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsBnB,MAAtB,CAA6B;AACzB+I,UAAAA,YAAY,EAAE,KAAK/I,MAAL,CAAY,sBAAZ;AADW,SAA7B;AAGH;AACJ;AARF,GA5pEmB,EAqqEnB;AACCtG,IAAAA,GAAG,EAAE,gCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK0E,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBC,MAAlB,CAAyB;AACrBoF,UAAAA,QAAQ,EAAE,KAAKpF,MAAL,CAAY,sBAAZ;AADW,SAAzB;AAGH;AACJ;AARF,GArqEmB,EA8qEnB;AACCtG,IAAAA,GAAG,EAAE,mCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK+E,eAAT,EAA0B;AACtB,aAAKA,eAAL,CAAqBJ,MAArB,CAA4B;AACxBoF,UAAAA,QAAQ,EAAE,KAAKpF,MAAL,CAAY,yBAAZ;AADc,SAA5B;AAGH;AACJ;AARF,GA9qEmB,EAurEnB;AACCtG,IAAAA,GAAG,EAAE,gCADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAKuF,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBZ,MAAlB,CAAyB;AACrBoF,UAAAA,QAAQ,EAAE,KAAKpF,MAAL,CAAY,sBAAZ;AADW,SAAzB;AAGH;AACJ;AARF,GAvrEmB,EAgsEnB;AACCtG,IAAAA,GAAG,EAAE,0BADN;AAEC2B,IAAAA,KAAK,EAAE,YAAW;AACd,UAAI,KAAK0F,QAAT,EAAmB;AACf,aAAKA,QAAL,CAAcf,MAAd,CAAqB;AACjB0G,UAAAA,aAAa,EAAE,KAAKC,iBAAL;AADE,SAArB;AAGH;AACJ;AARF,GAhsEmB,EAysEnB;AACCjN,IAAAA,GAAG,EAAE,gBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASizB,IAAT,EAAe;AAClB,UAAI,KAAKxe,gBAAL,CAAsBmiB,cAAtB,EAAJ,EAA4C;AACxC;AACH;;AACD,WAAKniB,gBAAL,CAAsBoiB,WAAtB;;AACA,UAAI;AACA,aAAKC,kBAAL,CAAwB7D,IAAxB;AACH,OAFD,SAEU;AACN,aAAKxe,gBAAL,CAAsBsiB,SAAtB;AACH;AACJ;AAZF,GAzsEmB,EAstEnB;AACC14B,IAAAA,GAAG,EAAE,oBADN;AAEC2B,IAAAA,KAAK,EAAE,UAASizB,IAAT,EAAe;AAClB,UAAI+D,OAAO,GAAG,IAAd;;AACA,cAAQ/D,IAAI,CAACtpB,IAAb;AACI,aAAK,UAAL;AACA,aAAK,UAAL;AACI,eAAK4J,oBAAL;;AACA,eAAK0jB,WAAL;;AACA;;AACJ,aAAK,WAAL;AACI,cAAI,gBAAgBhE,IAAI,CAACiE,QAArB,IAAiC,sBAAsBjE,IAAI,CAACiE,QAAhE,EAA0E;AACtE,iBAAKjjB,0BAAL;AACH;;AACD,cAAI,gBAAgBgf,IAAI,CAACiE,QAArB,IAAiC,sBAAsBjE,IAAI,CAACiE,QAAhE,EAA0E;AACtE,iBAAK/iB,qBAAL;AACH;;AACD;;AACJ,aAAK,cAAL;AACI,eAAKC,oBAAL;;AACA;;AACJ,aAAK,YAAL;AACI,eAAKF,sBAAL;;AACA;;AACJ,aAAK,YAAL;AACI,eAAKM,sBAAL;;AACA;;AACJ,aAAK,UAAL;AACI,eAAKX,oBAAL;;AACA;;AACJ,aAAK,YAAL;AACI,eAAKC,sBAAL;;AACA;;AACJ,aAAK,UAAL;AACI,cAAI,eAAemf,IAAI,CAACiE,QAApB,IAAgC,qBAAqBjE,IAAI,CAACiE,QAA9D,EAAwE;AACpE,iBAAKnjB,yBAAL;AACH;;AACD,cAAI,eAAekf,IAAI,CAACiE,QAApB,IAAgC,qBAAqBjE,IAAI,CAACiE,QAA9D,EAAwE;AACpE,iBAAKljB,oBAAL;AACH;;AACD;;AACJ,aAAK,WAAL;AACI,eAAKJ,qBAAL;;AACA;;AACJ,aAAK,OAAL;AACI,eAAKN,iBAAL;;AACA;;AACJ,aAAK,UAAL;AACI,cAAI,eAAe2f,IAAI,CAACiE,QAApB,IAAgC,qBAAqBjE,IAAI,CAACiE,QAA9D,EAAwE;AACpE,iBAAK1jB,yBAAL;AACH;;AACD,cAAI,eAAeyf,IAAI,CAACiE,QAApB,IAAgC,qBAAqBjE,IAAI,CAACiE,QAA1D,IAAsE,sBAAsBjE,IAAI,CAACiE,QAArG,EAA+G;AAC3G,iBAAKzjB,oBAAL;AACH;;AACD;;AACJ,aAAK,iBAAL;AACI,eAAKC,2BAAL;;AACA;;AACJ,aAAK,WAAL;AACI,eAAKC,qBAAL;;AACA;;AACJ,aAAK,OAAL;AACI,cAAI,uBAAuBsf,IAAI,CAACiE,QAAhC,EAA0C;AACtC,iBAAKriB,mBAAL;AACH,WAFD,MAEO;AACH,iBAAKW,uBAAL;AACH;;AACD;;AACJ,aAAK,OAAL;AACI,eAAKC,uBAAL;;AACA;;AACJ,aAAK,cAAL;AACI,eAAKd,mBAAL,CAAyBse,IAAI,CAACjzB,KAA9B,EAAqCizB,IAAI,CAACkE,aAA1C;;AACA,eAAKF,WAAL;;AACA;;AACJ,aAAK,aAAL;AACI,cAAI,2BAA2BhE,IAAI,CAACiE,QAApC,EAA8C;AAC1C,iBAAKE,8BAAL;AACH,WAFD,MAEO;AACH,iBAAKH,WAAL;AACH;;AACD;;AACJ,aAAK,gBAAL;AACI,eAAKA,WAAL;;AACA;;AACJ,aAAK,iBAAL;AACI,cAAI,2BAA2BhE,IAAI,CAACtpB,IAApC,EAA0C;AACtC,iBAAK0tB,8BAAL;AACH,WAFD,MAEO;AACH,iBAAKJ,WAAL;AACH;;AACD;;AACJ,aAAK,SAAL;AACI,cAAI,qBAAqBhE,IAAI,CAACiE,QAA9B,EAAwC;AACpC,iBAAKI,wBAAL;AACH,WAFD,MAEO;AACH,iBAAKL,WAAL;AACH;;AACD;;AACJ,aAAK,aAAL;AACI,cAAI,2BAA2BhE,IAAI,CAACiE,QAApC,EAA8C;AAC1C,iBAAKK,8BAAL;AACH,WAFD,MAEO;AACH,iBAAKN,WAAL;AACH;;AACD;;AACJ,aAAK,gBAAL;AACI,cAAI,8BAA8BhE,IAAI,CAACiE,QAAvC,EAAiD;AAC7C,iBAAKM,iCAAL;AACH,WAFD,MAEO;AACH,iBAAKP,WAAL;AACH;;AACD;;AACJ,aAAK,aAAL;AACI,cAAI,2BAA2BhE,IAAI,CAACiE,QAApC,EAA8C;AAC1C,iBAAKO,8BAAL;AACH,WAFD,MAEO;AACH,iBAAKR,WAAL;AACH;;AACD;;AACJ,aAAK,aAAL;AACI,eAAKrE,sBAAL;;AACA;;AACJ,aAAK,gBAAL;AACI,eAAKC,yBAAL;;AACA;;AACJ,aAAK,oBAAL;AACI,eAAKE,6BAAL;;AACA;;AACJ,aAAK,wBAAL;AACI,eAAKG,iCAAL;;AACA;;AACJ,aAAK,uBAAL;AACI,eAAKpc,gCAAL;;AACA;;AACJ,aAAK,iBAAL;AACI,eAAK3S,oBAAL;;AACA;;AACJ,aAAK,uBAAL;AACI,eAAK8O,4BAAL;;AACA;;AACJ,aAAK,SAAL;AACI,eAAKC,sBAAL;;AACA;;AACJ,aAAK,QAAL;AACI,eAAKjP,SAAL,CAAekK,OAAf,CAAuB,UAASP,OAAT,EAAkB;AACrCA,YAAAA,OAAO,CAACjJ,MAAR,CAAe,QAAf,EAAyBqyB,OAAO,CAACryB,MAAR,CAAe,QAAf,CAAzB;AACH,WAFD;;AAGA,cAAI,KAAKuB,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkBvB,MAAlB,CAAyB,QAAzB,EAAmC,KAAKA,MAAL,CAAY,QAAZ,CAAnC;AACH;;AACD;;AACJ,aAAK,YAAL;AACI;;AACJ;AACIjF,UAAAA,IAAI,CAACQ,eAAe,CAACyD,OAAO,CAAC1I,SAAT,CAAhB,EAAqC,gBAArC,EAAuD,IAAvD,CAAJ,CAAiEsD,IAAjE,CAAsE,IAAtE,EAA4E00B,IAA5E;;AAvJR;AAyJH;AA7JF,GAttEmB,CAAV,CAAZ;;AAq3EA,SAAOtvB,OAAP;AACH,CA93Ea,CA83EZpI,GAAG,CAACJ,OA93EQ,CAAd;;AA+3EA,CAAC,GAAGM,sBAAsB,CAACN,OAA3B,EAAoC,WAApC,EAAiDwI,OAAjD;AACA,IAAI+zB,QAAQ,GAAG/zB,OAAf;AACAzI,OAAO,CAACC,OAAR,GAAkBu8B,QAAlB;AACAC,MAAM,CAACz8B,OAAP,GAAiBA,OAAO,CAACC,OAAzB","sourcesContent":["/**\r\n * DevExtreme (ui/diagram/ui.diagram.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _load_indicator = _interopRequireDefault(require(\"../load_indicator\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\r\nvar _resize_callbacks = _interopRequireDefault(require(\"../../core/utils/resize_callbacks\"));\r\nvar _diagram = require(\"./diagram.importer\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _element = require(\"../../core/element\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _number = _interopRequireDefault(require(\"../../localization/number\"));\r\nvar zIndexPool = _interopRequireWildcard(require(\"../overlay/z_index\"));\r\nvar _ui2 = _interopRequireDefault(require(\"../overlay/ui.overlay\"));\r\nvar _uiDiagram = _interopRequireDefault(require(\"./ui.diagram.toolbar\"));\r\nvar _uiDiagram2 = _interopRequireDefault(require(\"./ui.diagram.main_toolbar\"));\r\nvar _uiDiagram3 = _interopRequireDefault(require(\"./ui.diagram.history_toolbar\"));\r\nvar _uiDiagram4 = _interopRequireDefault(require(\"./ui.diagram.view_toolbar\"));\r\nvar _uiDiagram5 = _interopRequireDefault(require(\"./ui.diagram.properties_toolbar\"));\r\nvar _uiDiagram6 = _interopRequireDefault(require(\"./ui.diagram.context_menu\"));\r\nvar _uiDiagram7 = _interopRequireDefault(require(\"./ui.diagram.context_toolbox\"));\r\nvar _uiDiagram8 = _interopRequireDefault(require(\"./ui.diagram.dialogs\"));\r\nvar _uiDiagram9 = _interopRequireDefault(require(\"./ui.diagram.scroll_view\"));\r\nvar _diagram2 = _interopRequireDefault(require(\"./diagram.toolbox_manager\"));\r\nvar _uiDiagram10 = _interopRequireDefault(require(\"./ui.diagram.toolbox\"));\r\nvar _uiDiagram11 = _interopRequireDefault(require(\"./ui.diagram.properties_panel\"));\r\nvar _diagram3 = _interopRequireDefault(require(\"./diagram.options_update\"));\r\nvar _uiDiagram12 = _interopRequireDefault(require(\"./ui.diagram.dialog_manager\"));\r\nvar _diagram4 = _interopRequireDefault(require(\"./diagram.commands_manager\"));\r\nvar _diagram5 = _interopRequireDefault(require(\"./diagram.nodes_option\"));\r\nvar _diagram6 = _interopRequireDefault(require(\"./diagram.edges_option\"));\r\n\r\nfunction _getRequireWildcardCache() {\r\n    if (\"function\" !== typeof WeakMap) {\r\n        return null\r\n    }\r\n    var cache = new WeakMap;\r\n    _getRequireWildcardCache = function() {\r\n        return cache\r\n    };\r\n    return cache\r\n}\r\n\r\nfunction _interopRequireWildcard(obj) {\r\n    if (obj && obj.__esModule) {\r\n        return obj\r\n    }\r\n    if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\r\n        return {\r\n            \"default\": obj\r\n        }\r\n    }\r\n    var cache = _getRequireWildcardCache();\r\n    if (cache && cache.has(obj)) {\r\n        return cache.get(obj)\r\n    }\r\n    var newObj = {};\r\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\r\n            if (desc && (desc.get || desc.set)) {\r\n                Object.defineProperty(newObj, key, desc)\r\n            } else {\r\n                newObj[key] = obj[key]\r\n            }\r\n        }\r\n    }\r\n    newObj.default = obj;\r\n    if (cache) {\r\n        cache.set(obj, newObj)\r\n    }\r\n    return newObj\r\n}\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar DIAGRAM_CLASS = \"dx-diagram\";\r\nvar DIAGRAM_FULLSCREEN_CLASS = \"dx-diagram-fullscreen\";\r\nvar DIAGRAM_TOOLBAR_WRAPPER_CLASS = DIAGRAM_CLASS + \"-toolbar-wrapper\";\r\nvar DIAGRAM_CONTENT_WRAPPER_CLASS = DIAGRAM_CLASS + \"-content-wrapper\";\r\nvar DIAGRAM_CONTENT_CLASS = DIAGRAM_CLASS + \"-content\";\r\nvar DIAGRAM_SCROLL_VIEW_CLASS = DIAGRAM_CLASS + \"-scroll-view\";\r\nvar DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS = DIAGRAM_CLASS + \"-floating-toolbar-container\";\r\nvar DIAGRAM_PROPERTIES_PANEL_TOOLBAR_CONTAINER_CLASS = DIAGRAM_CLASS + \"-properties-panel-toolbar-container\";\r\nvar DIAGRAM_LOADING_INDICATOR_CLASS = DIAGRAM_CLASS + \"-loading-indicator\";\r\nvar DIAGRAM_FLOATING_PANEL_OFFSET = 12;\r\nvar DIAGRAM_DEFAULT_UNIT = \"in\";\r\nvar DIAGRAM_DEFAULT_ZOOMLEVEL = 1;\r\nvar DIAGRAM_DEFAULT_AUTOZOOM_MODE = \"disabled\";\r\nvar DIAGRAM_DEFAULT_PAGE_ORIENTATION = \"portrait\";\r\nvar DIAGRAM_DEFAULT_PAGE_COLOR = \"#ffffff\";\r\nvar DIAGRAM_MAX_MOBILE_WINDOW_WIDTH = 576;\r\nvar DIAGRAM_TOOLBOX_SHAPE_SPACING = 12;\r\nvar DIAGRAM_TOOLBOX_SHAPES_PER_ROW = 3;\r\nvar DIAGRAM_CONTEXT_TOOLBOX_SHAPE_SPACING = 12;\r\nvar DIAGRAM_CONTEXT_TOOLBOX_SHAPES_PER_ROW = 4;\r\nvar DIAGRAM_CONTEXT_TOOLBOX_DEFAULT_WIDTH = 152;\r\nvar DIAGRAM_NAMESPACE = \"dxDiagramEvent\";\r\nvar FULLSCREEN_CHANGE_EVENT_NAME = (0, _index.addNamespace)(\"fullscreenchange\", DIAGRAM_NAMESPACE);\r\nvar IE_FULLSCREEN_CHANGE_EVENT_NAME = (0, _index.addNamespace)(\"msfullscreenchange\", DIAGRAM_NAMESPACE);\r\nvar WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME = (0, _index.addNamespace)(\"webkitfullscreenchange\", DIAGRAM_NAMESPACE);\r\nvar MOZ_FULLSCREEN_CHANGE_EVENT_NAME = (0, _index.addNamespace)(\"mozfullscreenchange\", DIAGRAM_NAMESPACE);\r\nvar Diagram = function(_Widget) {\r\n    _inherits(Diagram, _Widget);\r\n    var _super = _createSuper(Diagram);\r\n\r\n    function Diagram() {\r\n        _classCallCheck(this, Diagram);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(Diagram, [{\r\n        key: \"_init\",\r\n        value: function() {\r\n            this._updateDiagramLockCount = 0;\r\n            this.toggleFullscreenLock = 0;\r\n            this._browserResizeTimer = -1;\r\n            this._toolbars = [];\r\n            _get(_getPrototypeOf(Diagram.prototype), \"_init\", this).call(this);\r\n            this._initDiagram();\r\n            this._createCustomCommand()\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            var _this = this;\r\n            _get(_getPrototypeOf(Diagram.prototype), \"_initMarkup\", this).call(this);\r\n            this._toolbars = [];\r\n            delete this._isMobileScreenSize;\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            this.$element().addClass(DIAGRAM_CLASS);\r\n            delete this._mainToolbar;\r\n            if (this.option(\"mainToolbar.visible\")) {\r\n                this._renderMainToolbar()\r\n            }\r\n            var $contentWrapper = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_CONTENT_WRAPPER_CLASS).appendTo(this.$element());\r\n            delete this._historyToolbar;\r\n            delete this._historyToolbarResizeCallback;\r\n            if (this._isHistoryToolbarVisible()) {\r\n                this._renderHistoryToolbar($contentWrapper)\r\n            }\r\n            delete this._propertiesToolbar;\r\n            delete this._propertiesToolbarResizeCallback;\r\n            if (this._isPropertiesPanelEnabled()) {\r\n                this._renderPropertiesToolbar($contentWrapper)\r\n            }\r\n            delete this._viewToolbar;\r\n            delete this._viewToolbarResizeCallback;\r\n            if (this.option(\"viewToolbar.visible\")) {\r\n                this._renderViewToolbar($contentWrapper)\r\n            }\r\n            delete this._toolbox;\r\n            delete this._toolboxResizeCallback;\r\n            if (this._isToolboxEnabled()) {\r\n                this._renderToolbox($contentWrapper)\r\n            }\r\n            delete this._propertiesPanel;\r\n            delete this._propertiesPanelResizeCallback;\r\n            if (this._isPropertiesPanelEnabled()) {\r\n                this._renderPropertiesPanel($contentWrapper)\r\n            }\r\n            this._$content = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_CONTENT_CLASS).appendTo($contentWrapper);\r\n            delete this._contextMenu;\r\n            if (this.option(\"contextMenu.enabled\")) {\r\n                this._renderContextMenu($contentWrapper)\r\n            }\r\n            delete this._contextToolbox;\r\n            if (this.option(\"contextToolbox.enabled\")) {\r\n                this._renderContextToolbox($contentWrapper)\r\n            }\r\n            this._renderDialog($contentWrapper);\r\n            if (!isServerSide) {\r\n                var $scrollViewWrapper = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_SCROLL_VIEW_CLASS).appendTo(this._$content);\r\n                this._createComponent($scrollViewWrapper, _uiDiagram9.default, {\r\n                    onCreateDiagram: function(e) {\r\n                        _this._diagramInstance.createDocument(e.$parent[0], e.scrollView)\r\n                    }\r\n                })\r\n            }\r\n            if ((0, _window.hasWindow)()) {\r\n                _resize_callbacks.default.add(function() {\r\n                    _this._killBrowserResizeTimer();\r\n                    _this._browserResizeTimer = setTimeout(function() {\r\n                        return _this._processBrowserResize()\r\n                    }, 100)\r\n                })\r\n            }\r\n            this._setCustomCommandChecked(_diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME, this._isPropertiesPanelVisible());\r\n            this._setCustomCommandChecked(_diagram4.default.SHOW_TOOLBOX_COMMAND_NAME, this._isToolboxVisible())\r\n        }\r\n    }, {\r\n        key: \"_processBrowserResize\",\r\n        value: function() {\r\n            this._isMobileScreenSize = void 0;\r\n            this._processDiagramResize();\r\n            this._killBrowserResizeTimer()\r\n        }\r\n    }, {\r\n        key: \"_processDiagramResize\",\r\n        value: function() {\r\n            if (this._historyToolbarResizeCallback) {\r\n                this._historyToolbarResizeCallback.call(this)\r\n            }\r\n            if (this._propertiesToolbarResizeCallback) {\r\n                this._propertiesToolbarResizeCallback.call(this)\r\n            }\r\n            if (this._propertiesPanelResizeCallback) {\r\n                this._propertiesPanelResizeCallback.call(this)\r\n            }\r\n            if (this._viewToolbarResizeCallback) {\r\n                this._viewToolbarResizeCallback.call(this)\r\n            }\r\n            if (this._toolboxResizeCallback) {\r\n                this._toolboxResizeCallback.call(this)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_killBrowserResizeTimer\",\r\n        value: function() {\r\n            if (this._browserResizeTimer > -1) {\r\n                clearTimeout(this._browserResizeTimer)\r\n            }\r\n            this._browserResizeTimer = -1\r\n        }\r\n    }, {\r\n        key: \"isMobileScreenSize\",\r\n        value: function() {\r\n            if (void 0 === this._isMobileScreenSize) {\r\n                this._isMobileScreenSize = (0, _window.hasWindow)() && this.$element().outerWidth() < DIAGRAM_MAX_MOBILE_WINDOW_WIDTH\r\n            }\r\n            return this._isMobileScreenSize\r\n        }\r\n    }, {\r\n        key: \"_captureFocus\",\r\n        value: function() {\r\n            if (this._diagramInstance) {\r\n                this._diagramInstance.captureFocus()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_captureFocusOnTimeout\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            this._captureFocusTimeout = setTimeout(function() {\r\n                _this2._captureFocus();\r\n                delete _this2._captureFocusTimeout\r\n            }, 100)\r\n        }\r\n    }, {\r\n        key: \"_killCaptureFocusTimeout\",\r\n        value: function() {\r\n            if (this._captureFocusTimeout) {\r\n                clearTimeout(this._captureFocusTimeout);\r\n                delete this._captureFocusTimeout\r\n            }\r\n        }\r\n    }, {\r\n        key: \"notifyBarCommandExecuted\",\r\n        value: function() {\r\n            this._captureFocusOnTimeout()\r\n        }\r\n    }, {\r\n        key: \"_registerToolbar\",\r\n        value: function(component) {\r\n            this._registerBar(component);\r\n            this._toolbars.push(component)\r\n        }\r\n    }, {\r\n        key: \"_registerBar\",\r\n        value: function(component) {\r\n            component.bar.onChanged.add(this);\r\n            this._diagramInstance.registerBar(component.bar)\r\n        }\r\n    }, {\r\n        key: \"_getExcludeCommands\",\r\n        value: function() {\r\n            var excludeCommands = [];\r\n            if (!this._isToolboxEnabled()) {\r\n                excludeCommands.push(_diagram4.default.SHOW_TOOLBOX_COMMAND_NAME)\r\n            }\r\n            if (!this._isPropertiesPanelEnabled()) {\r\n                excludeCommands.push(_diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME)\r\n            }\r\n            return excludeCommands\r\n        }\r\n    }, {\r\n        key: \"_getToolbarBaseOptions\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            return {\r\n                onContentReady: function(_ref) {\r\n                    var component = _ref.component;\r\n                    return _this3._registerToolbar(component)\r\n                },\r\n                onSubMenuVisibilityChanging: function(_ref2) {\r\n                    var component = _ref2.component;\r\n                    return _this3._diagramInstance.updateBarItemsState(component.bar)\r\n                },\r\n                onPointerUp: this._onPanelPointerUp.bind(this),\r\n                \"export\": this.option(\"export\"),\r\n                container: this.$element(),\r\n                excludeCommands: this._getExcludeCommands(),\r\n                onInternalCommand: this._onInternalCommand.bind(this),\r\n                onCustomCommand: this._onCustomCommand.bind(this),\r\n                isMobileView: this.isMobileScreenSize()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onInternalCommand\",\r\n        value: function(e) {\r\n            switch (e.command) {\r\n                case _diagram4.default.SHOW_TOOLBOX_COMMAND_NAME:\r\n                    if (this._toolbox) {\r\n                        this._toolbox.toggle()\r\n                    }\r\n                    break;\r\n                case _diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME:\r\n                    if (this._propertiesPanel) {\r\n                        this._propertiesPanel.toggle()\r\n                    }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onCustomCommand\",\r\n        value: function(e) {\r\n            this._customCommandAction({\r\n                name: e.name\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_renderMainToolbar\",\r\n        value: function() {\r\n            var $toolbarWrapper = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_TOOLBAR_WRAPPER_CLASS).appendTo(this.$element());\r\n            this._mainToolbar = this._createComponent($toolbarWrapper, _uiDiagram2.default, (0, _extend.extend)(this._getToolbarBaseOptions(), {\r\n                commands: this.option(\"mainToolbar.commands\"),\r\n                skipAdjustSize: true\r\n            }))\r\n        }\r\n    }, {\r\n        key: \"_isHistoryToolbarVisible\",\r\n        value: function() {\r\n            return this.option(\"historyToolbar.visible\") && !this.isReadOnlyMode()\r\n        }\r\n    }, {\r\n        key: \"_renderHistoryToolbar\",\r\n        value: function($parent) {\r\n            var _this4 = this;\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            var $container = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS).appendTo($parent);\r\n            this._historyToolbar = this._createComponent($container, _uiDiagram3.default, (0, _extend.extend)(this._getToolbarBaseOptions(), {\r\n                commands: this.option(\"historyToolbar.commands\"),\r\n                locateInMenu: \"never\"\r\n            }));\r\n            this._updateHistoryToolbarPosition($container, $parent, isServerSide);\r\n            this._historyToolbarResizeCallback = function() {\r\n                _this4._historyToolbar.option(\"isMobileView\", _this4.isMobileScreenSize())\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateHistoryToolbarPosition\",\r\n        value: function($container, $parent, isServerSide) {\r\n            if (isServerSide) {\r\n                return\r\n            }\r\n            _position.default.setup($container, {\r\n                my: \"left top\",\r\n                at: \"left top\",\r\n                of: $parent,\r\n                offset: DIAGRAM_FLOATING_PANEL_OFFSET + \" \" + DIAGRAM_FLOATING_PANEL_OFFSET\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_isToolboxEnabled\",\r\n        value: function() {\r\n            return \"disabled\" !== this.option(\"toolbox.visibility\") && !this.isReadOnlyMode()\r\n        }\r\n    }, {\r\n        key: \"_isToolboxVisible\",\r\n        value: function() {\r\n            return \"visible\" === this.option(\"toolbox.visibility\") || \"auto\" === this.option(\"toolbox.visibility\") && !this.isMobileScreenSize()\r\n        }\r\n    }, {\r\n        key: \"_renderToolbox\",\r\n        value: function($parent) {\r\n            var _this5 = this;\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            var $toolBox = (0, _renderer.default)(\"<div>\").appendTo($parent);\r\n            var bounds = this._getToolboxBounds($parent, isServerSide);\r\n            this._toolbox = this._createComponent($toolBox, _uiDiagram10.default, {\r\n                isMobileView: this.isMobileScreenSize(),\r\n                isVisible: this._isToolboxVisible(),\r\n                container: this.$element(),\r\n                height: bounds.height,\r\n                offsetParent: $parent,\r\n                offsetX: bounds.offsetX,\r\n                offsetY: bounds.offsetY,\r\n                showSearch: this.option(\"toolbox.showSearch\"),\r\n                toolboxGroups: this._getToolboxGroups(),\r\n                toolboxWidth: this.option(\"toolbox.width\"),\r\n                onShapeCategoryRendered: function(e) {\r\n                    if (isServerSide) {\r\n                        return\r\n                    }\r\n                    _this5._diagramInstance.createToolbox(e.$element[0], \"texts\" === e.displayMode, e.shapes || e.category, {\r\n                        shapeIconSpacing: DIAGRAM_TOOLBOX_SHAPE_SPACING,\r\n                        shapeIconCountInRow: _this5.option(\"toolbox.shapeIconsPerRow\"),\r\n                        shapeIconAttributes: {\r\n                            \"data-toggle\": e.dataToggle\r\n                        }\r\n                    })\r\n                },\r\n                onFilterChanged: function(e) {\r\n                    if (isServerSide) {\r\n                        return\r\n                    }\r\n                    _this5._diagramInstance.applyToolboxFilter(e.text, e.filteringToolboxes)\r\n                },\r\n                onVisibilityChanging: function(e) {\r\n                    if (isServerSide) {\r\n                        return\r\n                    }\r\n                    _this5._setCustomCommandChecked(_diagram4.default.SHOW_TOOLBOX_COMMAND_NAME, e.visible);\r\n                    if (_this5._propertiesPanel) {\r\n                        if (e.visible && _this5.isMobileScreenSize()) {\r\n                            _this5._propertiesPanel.hide()\r\n                        }\r\n                    }\r\n                    if (_this5._historyToolbar) {\r\n                        if (e.visible && _this5.isMobileScreenSize()) {\r\n                            _this5._historyToolbarZIndex = zIndexPool.create(_ui2.default.baseZIndex());\r\n                            _this5._historyToolbar.$element().css(\"zIndex\", _this5._historyToolbarZIndex);\r\n                            _this5._historyToolbar.$element().css(\"boxShadow\", \"none\")\r\n                        }\r\n                    }\r\n                    if (_this5._viewToolbar) {\r\n                        _this5._viewToolbar.$element().css(\"opacity\", e.visible && _this5.isMobileScreenSize() ? \"0\" : \"1\");\r\n                        _this5._viewToolbar.$element().css(\"pointerEvents\", e.visible && _this5.isMobileScreenSize() ? \"none\" : \"\")\r\n                    }\r\n                },\r\n                onVisibilityChanged: function(e) {\r\n                    if (!e.visible && !_this5._textInputStarted) {\r\n                        _this5._captureFocus()\r\n                    }\r\n                    if (!isServerSide) {\r\n                        if (_this5._historyToolbar) {\r\n                            if (!e.visible && _this5.isMobileScreenSize() && _this5._historyToolbarZIndex) {\r\n                                zIndexPool.remove(_this5._historyToolbarZIndex);\r\n                                _this5._historyToolbar.$element().css(\"zIndex\", \"\");\r\n                                _this5._historyToolbar.$element().css(\"boxShadow\", \"\");\r\n                                _this5._historyToolbarZIndex = void 0\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                onPointerUp: this._onPanelPointerUp.bind(this)\r\n            });\r\n            this._toolboxResizeCallback = function() {\r\n                var bounds = _this5._getToolboxBounds($parent, isServerSide);\r\n                _this5._toolbox.option(\"height\", bounds.height);\r\n                var prevIsMobileView = _this5._toolbox.option(\"isMobileView\");\r\n                if (prevIsMobileView !== _this5.isMobileScreenSize()) {\r\n                    _this5._toolbox.option({\r\n                        isMobileView: _this5.isMobileScreenSize(),\r\n                        isVisible: _this5._isToolboxVisible()\r\n                    });\r\n                    _this5._setCustomCommandChecked(_diagram4.default.SHOW_TOOLBOX_COMMAND_NAME, _this5._isToolboxVisible())\r\n                }\r\n                _this5._toolbox.updateMaxHeight()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getToolboxBounds\",\r\n        value: function($parent, isServerSide) {\r\n            var result = {\r\n                offsetX: DIAGRAM_FLOATING_PANEL_OFFSET,\r\n                offsetY: DIAGRAM_FLOATING_PANEL_OFFSET,\r\n                height: !isServerSide ? $parent.height() - 2 * DIAGRAM_FLOATING_PANEL_OFFSET : 0\r\n            };\r\n            if (this._historyToolbar && !isServerSide) {\r\n                result.offsetY += this._historyToolbar.$element().outerHeight() + DIAGRAM_FLOATING_PANEL_OFFSET;\r\n                result.height -= this._historyToolbar.$element().outerHeight() + DIAGRAM_FLOATING_PANEL_OFFSET\r\n            }\r\n            if (this._viewToolbar && !isServerSide) {\r\n                result.height -= this._viewToolbar.$element().outerHeight() + this._getViewToolbarYOffset(isServerSide)\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_renderViewToolbar\",\r\n        value: function($parent) {\r\n            var _this6 = this;\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            var $container = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS).appendTo($parent);\r\n            this._viewToolbar = this._createComponent($container, _uiDiagram4.default, (0, _extend.extend)(this._getToolbarBaseOptions(), {\r\n                commands: this.option(\"viewToolbar.commands\"),\r\n                locateInMenu: \"never\"\r\n            }));\r\n            this._updateViewToolbarPosition($container, $parent, isServerSide);\r\n            this._viewToolbarResizeCallback = function() {\r\n                _this6._updateViewToolbarPosition($container, $parent, isServerSide)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getViewToolbarYOffset\",\r\n        value: function(isServerSide) {\r\n            if (isServerSide) {\r\n                return\r\n            }\r\n            var result = DIAGRAM_FLOATING_PANEL_OFFSET;\r\n            if (this._viewToolbar && this._propertiesToolbar) {\r\n                result += (this._propertiesToolbar.$element().outerHeight() - this._viewToolbar.$element().outerHeight()) / 2\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_updateViewToolbarPosition\",\r\n        value: function($container, $parent, isServerSide) {\r\n            if (isServerSide) {\r\n                return\r\n            }\r\n            _position.default.setup($container, {\r\n                my: \"left bottom\",\r\n                at: \"left bottom\",\r\n                of: $parent,\r\n                offset: DIAGRAM_FLOATING_PANEL_OFFSET + \" -\" + this._getViewToolbarYOffset(isServerSide)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_isPropertiesPanelEnabled\",\r\n        value: function() {\r\n            return \"disabled\" !== this.option(\"propertiesPanel.visibility\") && !this.isReadOnlyMode()\r\n        }\r\n    }, {\r\n        key: \"_isPropertiesPanelVisible\",\r\n        value: function() {\r\n            return \"visible\" === this.option(\"propertiesPanel.visibility\")\r\n        }\r\n    }, {\r\n        key: \"_renderPropertiesToolbar\",\r\n        value: function($parent) {\r\n            var _this7 = this;\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            var $container = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_FLOATING_TOOLBAR_CONTAINER_CLASS).addClass(DIAGRAM_PROPERTIES_PANEL_TOOLBAR_CONTAINER_CLASS).appendTo($parent);\r\n            this._propertiesToolbar = this._createComponent($container, _uiDiagram5.default, (0, _extend.extend)(this._getToolbarBaseOptions(), {\r\n                buttonStylingMode: \"contained\",\r\n                buttonType: \"default\",\r\n                locateInMenu: \"never\"\r\n            }));\r\n            this._updatePropertiesToolbarPosition($container, $parent, isServerSide);\r\n            this._propertiesToolbarResizeCallback = function() {\r\n                _this7._updatePropertiesToolbarPosition($container, $parent, isServerSide)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updatePropertiesToolbarPosition\",\r\n        value: function($container, $parent, isServerSide) {\r\n            if (isServerSide) {\r\n                return\r\n            }\r\n            _position.default.setup($container, {\r\n                my: \"right bottom\",\r\n                at: \"right bottom\",\r\n                of: $parent,\r\n                offset: \"-\" + DIAGRAM_FLOATING_PANEL_OFFSET + \" -\" + DIAGRAM_FLOATING_PANEL_OFFSET\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_renderPropertiesPanel\",\r\n        value: function($parent) {\r\n            var _this8 = this;\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            var $propertiesPanel = (0, _renderer.default)(\"<div>\").appendTo($parent);\r\n            var offsetX = DIAGRAM_FLOATING_PANEL_OFFSET;\r\n            var offsetY = 2 * DIAGRAM_FLOATING_PANEL_OFFSET + (!isServerSide ? this._propertiesToolbar.$element().outerHeight() : 0);\r\n            this._propertiesPanel = this._createComponent($propertiesPanel, _uiDiagram11.default, {\r\n                isMobileView: this.isMobileScreenSize(),\r\n                isVisible: this._isPropertiesPanelVisible(),\r\n                container: this.$element(),\r\n                offsetParent: $parent,\r\n                offsetX: offsetX,\r\n                offsetY: offsetY,\r\n                propertyTabs: this.option(\"propertiesPanel.tabs\"),\r\n                onCreateToolbar: function(e) {\r\n                    e.toolbar = _this8._createComponent(e.$parent, _uiDiagram.default, (0, _extend.extend)(_this8._getToolbarBaseOptions(), {\r\n                        commands: e.commands,\r\n                        locateInMenu: \"never\",\r\n                        editorStylingMode: \"outlined\"\r\n                    }))\r\n                },\r\n                onVisibilityChanging: function(e) {\r\n                    if (isServerSide) {\r\n                        return\r\n                    }\r\n                    _this8._updatePropertiesPanelGroupBars(e.component);\r\n                    _this8._setCustomCommandChecked(_diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME, e.visible);\r\n                    if (_this8._toolbox) {\r\n                        if (e.visible && _this8.isMobileScreenSize()) {\r\n                            _this8._toolbox.hide()\r\n                        }\r\n                    }\r\n                },\r\n                onVisibilityChanged: function(e) {\r\n                    if (!e.visible && !_this8._textInputStarted) {\r\n                        _this8._captureFocus()\r\n                    }\r\n                },\r\n                onSelectedGroupChanged: function(_ref3) {\r\n                    var component = _ref3.component;\r\n                    return _this8._updatePropertiesPanelGroupBars(component)\r\n                },\r\n                onPointerUp: this._onPanelPointerUp.bind(this)\r\n            });\r\n            this._propertiesPanelResizeCallback = function() {\r\n                var prevIsMobileView = _this8._propertiesPanel.option(\"isMobileView\");\r\n                if (prevIsMobileView !== _this8.isMobileScreenSize()) {\r\n                    _this8._propertiesPanel.option({\r\n                        isMobileView: _this8.isMobileScreenSize(),\r\n                        isVisible: _this8._isPropertiesPanelVisible()\r\n                    });\r\n                    _this8._setCustomCommandChecked(_diagram4.default.SHOW_PROPERTIES_PANEL_COMMAND_NAME, _this8._isPropertiesPanelVisible())\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updatePropertiesPanelGroupBars\",\r\n        value: function(component) {\r\n            var _this9 = this;\r\n            component.getActiveToolbars().forEach(function(toolbar) {\r\n                _this9._diagramInstance.updateBarItemsState(toolbar.bar)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onPanelPointerUp\",\r\n        value: function() {\r\n            this._captureFocusOnTimeout()\r\n        }\r\n    }, {\r\n        key: \"_renderContextMenu\",\r\n        value: function($parent) {\r\n            var _this10 = this;\r\n            var $contextMenu = (0, _renderer.default)(\"<div>\").appendTo($parent);\r\n            this._contextMenu = this._createComponent($contextMenu, _uiDiagram6.default.DiagramContextMenuWrapper, {\r\n                commands: this.option(\"contextMenu.commands\"),\r\n                onContentReady: function(_ref4) {\r\n                    var component = _ref4.component;\r\n                    return _this10._registerBar(component)\r\n                },\r\n                onVisibilityChanging: function(_ref5) {\r\n                    var component = _ref5.component;\r\n                    return _this10._diagramInstance.updateBarItemsState(component.bar)\r\n                },\r\n                onItemClick: function(itemData) {\r\n                    return _this10._onBeforeCommandExecuted(itemData.command)\r\n                },\r\n                \"export\": this.option(\"export\"),\r\n                excludeCommands: this._getExcludeCommands(),\r\n                onInternalCommand: this._onInternalCommand.bind(this),\r\n                onCustomCommand: this._onCustomCommand.bind(this)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_renderContextToolbox\",\r\n        value: function($parent) {\r\n            var _this11 = this;\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            var category = this.option(\"contextToolbox.category\");\r\n            var displayMode = this.option(\"contextToolbox.displayMode\");\r\n            var shapes = this.option(\"contextToolbox.shapes\");\r\n            var $contextToolbox = (0, _renderer.default)(\"<div>\").appendTo($parent);\r\n            this._contextToolbox = this._createComponent($contextToolbox, _uiDiagram7.default, {\r\n                toolboxWidth: this.option(\"contextToolbox.width\"),\r\n                onShown: function(e) {\r\n                    if (isServerSide) {\r\n                        return\r\n                    }\r\n                    var $toolboxContainer = (0, _renderer.default)(e.$element);\r\n                    var isTextGroup = \"texts\" === displayMode;\r\n                    if (!shapes && !category && !isTextGroup) {\r\n                        var group = _this11._getToolboxGroups().filter(function(g) {\r\n                            return g.category === e.category\r\n                        })[0];\r\n                        if (group) {\r\n                            isTextGroup = \"texts\" === group.displayMode\r\n                        }\r\n                    }\r\n                    _this11._diagramInstance.createContextToolbox($toolboxContainer[0], isTextGroup, shapes || category || e.category, {\r\n                        shapeIconSpacing: DIAGRAM_CONTEXT_TOOLBOX_SHAPE_SPACING,\r\n                        shapeIconCountInRow: _this11.option(\"contextToolbox.shapeIconsPerRow\")\r\n                    }, function(shapeType) {\r\n                        e.callback(shapeType);\r\n                        _this11._captureFocus();\r\n                        e.hide()\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_setCustomCommandChecked\",\r\n        value: function(command, checked) {\r\n            this._toolbars.forEach(function(tb) {\r\n                tb.setCommandChecked(command, checked)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onBeforeCommandExecuted\",\r\n        value: function(command) {\r\n            var dialogParameters = _uiDiagram12.default.getDialogParameters(command);\r\n            if (dialogParameters) {\r\n                this._showDialog(dialogParameters)\r\n            }\r\n            return !!dialogParameters\r\n        }\r\n    }, {\r\n        key: \"_renderDialog\",\r\n        value: function($parent) {\r\n            var $dialogElement = (0, _renderer.default)(\"<div>\").appendTo($parent);\r\n            this._dialogInstance = this._createComponent($dialogElement, _uiDiagram8.default, {})\r\n        }\r\n    }, {\r\n        key: \"_showDialog\",\r\n        value: function(dialogParameters) {\r\n            if (this._dialogInstance) {\r\n                this._dialogInstance.option(\"onGetContent\", dialogParameters.onGetContent);\r\n                this._dialogInstance.option(\"onHidden\", function() {\r\n                    this._captureFocus()\r\n                }.bind(this));\r\n                this._dialogInstance.option(\"command\", this._diagramInstance.getCommand(dialogParameters.command));\r\n                this._dialogInstance.option(\"title\", dialogParameters.title);\r\n                this._dialogInstance._show()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_showLoadingIndicator\",\r\n        value: function() {\r\n            this._loadingIndicator = (0, _renderer.default)(\"<div>\").addClass(DIAGRAM_LOADING_INDICATOR_CLASS);\r\n            this._createComponent(this._loadingIndicator, _load_indicator.default, {});\r\n            var $parent = this._$content || this.$element();\r\n            $parent.append(this._loadingIndicator)\r\n        }\r\n    }, {\r\n        key: \"_hideLoadingIndicator\",\r\n        value: function() {\r\n            if (!this._loadingIndicator) {\r\n                return\r\n            }\r\n            this._loadingIndicator.remove();\r\n            this._loadingIndicator = null\r\n        }\r\n    }, {\r\n        key: \"_initDiagram\",\r\n        value: function() {\r\n            var _getDiagram = (0, _diagram.getDiagram)(),\r\n                DiagramControl = _getDiagram.DiagramControl;\r\n            this._diagramInstance = new DiagramControl;\r\n            this._diagramInstance.onChanged = this._raiseDataChangeAction.bind(this);\r\n            this._diagramInstance.onEdgeInserted = this._raiseEdgeInsertedAction.bind(this);\r\n            this._diagramInstance.onEdgeUpdated = this._raiseEdgeUpdatedAction.bind(this);\r\n            this._diagramInstance.onEdgeRemoved = this._raiseEdgeRemovedAction.bind(this);\r\n            this._diagramInstance.onNodeInserted = this._raiseNodeInsertedAction.bind(this);\r\n            this._diagramInstance.onNodeUpdated = this._raiseNodeUpdatedAction.bind(this);\r\n            this._diagramInstance.onNodeRemoved = this._raiseNodeRemovedAction.bind(this);\r\n            this._diagramInstance.onToolboxDragStart = this._raiseToolboxDragStart.bind(this);\r\n            this._diagramInstance.onToolboxDragEnd = this._raiseToolboxDragEnd.bind(this);\r\n            this._diagramInstance.onTextInputStart = this._raiseTextInputStart.bind(this);\r\n            this._diagramInstance.onTextInputEnd = this._raiseTextInputEnd.bind(this);\r\n            this._diagramInstance.onToggleFullscreen = this._onToggleFullScreen.bind(this);\r\n            this._diagramInstance.onShowContextMenu = this._onShowContextMenu.bind(this);\r\n            this._diagramInstance.onHideContextMenu = this._onHideContextMenu.bind(this);\r\n            this._diagramInstance.onShowContextToolbox = this._onShowContextToolbox.bind(this);\r\n            this._diagramInstance.onHideContextToolbox = this._onHideContextToolbox.bind(this);\r\n            this._diagramInstance.onNativeAction.add({\r\n                notifyItemClick: this._raiseItemClickAction.bind(this),\r\n                notifyItemDblClick: this._raiseItemDblClickAction.bind(this),\r\n                notifySelectionChanged: this._raiseSelectionChanged.bind(this)\r\n            });\r\n            this._diagramInstance.onRequestOperation = this._raiseRequestEditOperation.bind(this);\r\n            this._updateEventSubscriptionMethods();\r\n            this._updateDefaultItemProperties();\r\n            this._updateEditingSettings();\r\n            this._updateShapeTexts();\r\n            this._updateUnitItems();\r\n            this._updateFormatUnitsMethod();\r\n            if (this.option(\"units\") !== DIAGRAM_DEFAULT_UNIT) {\r\n                this._updateUnitsState()\r\n            }\r\n            if (this.isReadOnlyMode()) {\r\n                this._updateReadOnlyState()\r\n            }\r\n            if (this.option(\"pageSize\")) {\r\n                if (this.option(\"pageSize.items\")) {\r\n                    this._updatePageSizeItemsState()\r\n                }\r\n                if (this.option(\"pageSize.width\") && this.option(\"pageSize.height\")) {\r\n                    this._updatePageSizeState()\r\n                }\r\n            }\r\n            if (this.option(\"pageOrientation\") !== DIAGRAM_DEFAULT_PAGE_ORIENTATION) {\r\n                this._updatePageOrientationState()\r\n            }\r\n            if (this.option(\"pageColor\") !== DIAGRAM_DEFAULT_PAGE_COLOR) {\r\n                this._updatePageColorState()\r\n            }\r\n            if (this.option(\"viewUnits\") !== DIAGRAM_DEFAULT_UNIT) {\r\n                this._updateViewUnitsState()\r\n            }\r\n            if (!this.option(\"showGrid\")) {\r\n                this._updateShowGridState()\r\n            }\r\n            if (!this.option(\"snapToGrid\")) {\r\n                this._updateSnapToGridState()\r\n            }\r\n            if (this.option(\"gridSize\")) {\r\n                if (this.option(\"gridSize.items\")) {\r\n                    this._updateGridSizeItemsState()\r\n                }\r\n                this._updateGridSizeState()\r\n            }\r\n            if (this.option(\"zoomLevel.items\")) {\r\n                this._updateZoomLevelItemsState()\r\n            }\r\n            if (this.option(\"simpleView\")) {\r\n                this._updateSimpleViewState()\r\n            }\r\n            if (this.option(\"zoomLevel\") !== DIAGRAM_DEFAULT_ZOOMLEVEL) {\r\n                this._updateZoomLevelState()\r\n            }\r\n            if (this.option(\"autoZoomMode\") !== DIAGRAM_DEFAULT_AUTOZOOM_MODE) {\r\n                this._updateAutoZoomState()\r\n            }\r\n            if (this.option(\"fullScreen\")) {\r\n                var window = (0, _window.getWindow)();\r\n                if (window && window.self !== window.top) {\r\n                    this.option(\"fullScreen\", false)\r\n                } else {\r\n                    this._updateFullscreenState()\r\n                }\r\n            }\r\n            this.optionsUpdateBar = new _diagram3.default(this);\r\n            this._diagramInstance.registerBar(this.optionsUpdateBar);\r\n            if ((0, _window.hasWindow)()) {\r\n                this._diagramInstance.initMeasurer(this.$element()[0])\r\n            }\r\n            this._updateCustomShapes(this._getCustomShapes());\r\n            this._refreshDataSources()\r\n        }\r\n    }, {\r\n        key: \"_clean\",\r\n        value: function() {\r\n            if (this._diagramInstance) {\r\n                this._diagramInstance.cleanMarkup(function(element) {\r\n                    (0, _renderer.default)(element).empty()\r\n                })\r\n            }\r\n            _get(_getPrototypeOf(Diagram.prototype), \"_clean\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_dispose\",\r\n        value: function() {\r\n            this._killCaptureFocusTimeout();\r\n            _get(_getPrototypeOf(Diagram.prototype), \"_dispose\", this).call(this);\r\n            this._diagramInstance = void 0\r\n        }\r\n    }, {\r\n        key: \"_executeDiagramCommand\",\r\n        value: function(command, parameter) {\r\n            this._diagramInstance.getCommand(command).execute(parameter)\r\n        }\r\n    }, {\r\n        key: \"getNodeDataSource\",\r\n        value: function() {\r\n            return this._nodesOption && this._nodesOption.getDataSource()\r\n        }\r\n    }, {\r\n        key: \"getEdgeDataSource\",\r\n        value: function() {\r\n            return this._edgesOption && this._edgesOption.getDataSource()\r\n        }\r\n    }, {\r\n        key: \"_refreshDataSources\",\r\n        value: function() {\r\n            this._beginUpdateDiagram();\r\n            this._refreshNodesDataSource();\r\n            this._refreshEdgesDataSource();\r\n            this._endUpdateDiagram()\r\n        }\r\n    }, {\r\n        key: \"_refreshNodesDataSource\",\r\n        value: function() {\r\n            if (this._nodesOption) {\r\n                this._nodesOption._disposeDataSource();\r\n                delete this._nodesOption\r\n            }\r\n            if (this.option(\"nodes.dataSource\")) {\r\n                this._nodesOption = new _diagram5.default(this);\r\n                this._nodesOption.option(\"dataSource\", this.option(\"nodes.dataSource\"));\r\n                this._nodesOption._refreshDataSource()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_refreshEdgesDataSource\",\r\n        value: function() {\r\n            if (this._edgesOption) {\r\n                this._edgesOption._disposeDataSource();\r\n                delete this._edgesOption\r\n            }\r\n            if (this.option(\"edges.dataSource\")) {\r\n                this._edgesOption = new _diagram6.default(this);\r\n                this._edgesOption.option(\"dataSource\", this.option(\"edges.dataSource\"));\r\n                this._edgesOption._refreshDataSource()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDiagramData\",\r\n        value: function() {\r\n            var value;\r\n            var _getDiagram2 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram2.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.Export, function(data) {\r\n                value = data\r\n            });\r\n            return value\r\n        }\r\n    }, {\r\n        key: \"_setDiagramData\",\r\n        value: function(data, keepExistingItems) {\r\n            var _getDiagram3 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram3.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.Import, {\r\n                data: data,\r\n                keepExistingItems: keepExistingItems\r\n            })\r\n        }\r\n    }, {\r\n        key: \"isReadOnlyMode\",\r\n        value: function() {\r\n            return this.option(\"readOnly\") || this.option(\"disabled\");\r\n        }\r\n    }, {\r\n        key: \"_onDataSourceChanged\",\r\n        value: function() {\r\n            this._bindDiagramData()\r\n        }\r\n    }, {\r\n        key: \"_getChangesKeys\",\r\n        value: function(changes) {\r\n            return changes.map(function(change) {\r\n                return change.internalKey || change.key\r\n            }).filter(function(key) {\r\n                return !!key\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createOptionGetter\",\r\n        value: function(optionName) {\r\n            var expr = this.option(optionName);\r\n            return expr && (0, _data.compileGetter)(expr)\r\n        }\r\n    }, {\r\n        key: \"_onRequestUpdateLayout\",\r\n        value: function(changes) {\r\n            if (!this._requestLayoutUpdateAction) {\r\n                this._createRequestLayoutUpdateAction()\r\n            }\r\n            var eventArgs = {\r\n                changes: changes,\r\n                allowed: false\r\n            };\r\n            this._requestLayoutUpdateAction(eventArgs);\r\n            return eventArgs.allowed\r\n        }\r\n    }, {\r\n        key: \"_createOptionSetter\",\r\n        value: function(optionName) {\r\n            var expr = this.option(optionName);\r\n            if ((0, _type.isFunction)(expr)) {\r\n                return expr\r\n            }\r\n            return expr && (0, _data.compileSetter)(expr)\r\n        }\r\n    }, {\r\n        key: \"_bindDiagramData\",\r\n        value: function() {\r\n            if (this._updateDiagramLockCount || !this._isBindingMode()) {\r\n                return\r\n            }\r\n            var _getDiagram4 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram4.DiagramCommand,\r\n                ConnectorLineOption = _getDiagram4.ConnectorLineOption,\r\n                ConnectorLineEnding = _getDiagram4.ConnectorLineEnding;\r\n            var lineOptionGetter;\r\n            var lineOptionSetter;\r\n            var startLineEndingGetter;\r\n            var startLineEndingSetter;\r\n            var endLineEndingGetter;\r\n            var endLineEndingSetter;\r\n            var containerKeyGetter;\r\n            var containerKeySetter;\r\n            var data = {\r\n                nodeDataSource: this._nodesOption && this._nodesOption.getItems(),\r\n                edgeDataSource: this._edgesOption && this._edgesOption.getItems(),\r\n                nodeDataImporter: {\r\n                    getKey: this._createOptionGetter(\"nodes.keyExpr\"),\r\n                    setKey: this._createOptionSetter(\"nodes.keyExpr\"),\r\n                    getCustomData: this._createOptionGetter(\"nodes.customDataExpr\"),\r\n                    setCustomData: this._createOptionSetter(\"nodes.customDataExpr\"),\r\n                    getLocked: this._createOptionGetter(\"nodes.lockedExpr\"),\r\n                    setLocked: this._createOptionSetter(\"nodes.lockedExpr\"),\r\n                    getStyle: this._createOptionGetter(\"nodes.styleExpr\"),\r\n                    setStyle: this._createOptionSetter(\"nodes.styleExpr\"),\r\n                    getStyleText: this._createOptionGetter(\"nodes.textStyleExpr\"),\r\n                    setStyleText: this._createOptionSetter(\"nodes.textStyleExpr\"),\r\n                    getZIndex: this._createOptionGetter(\"nodes.zIndexExpr\"),\r\n                    setZIndex: this._createOptionSetter(\"nodes.zIndexExpr\"),\r\n                    getType: this._createOptionGetter(\"nodes.typeExpr\"),\r\n                    setType: this._createOptionSetter(\"nodes.typeExpr\"),\r\n                    getText: this._createOptionGetter(\"nodes.textExpr\"),\r\n                    setText: this._createOptionSetter(\"nodes.textExpr\"),\r\n                    getImage: this._createOptionGetter(\"nodes.imageUrlExpr\"),\r\n                    setImage: this._createOptionSetter(\"nodes.imageUrlExpr\"),\r\n                    getLeft: this._createOptionGetter(\"nodes.leftExpr\"),\r\n                    setLeft: this._createOptionSetter(\"nodes.leftExpr\"),\r\n                    getTop: this._createOptionGetter(\"nodes.topExpr\"),\r\n                    setTop: this._createOptionSetter(\"nodes.topExpr\"),\r\n                    getWidth: this._createOptionGetter(\"nodes.widthExpr\"),\r\n                    setWidth: this._createOptionSetter(\"nodes.widthExpr\"),\r\n                    getHeight: this._createOptionGetter(\"nodes.heightExpr\"),\r\n                    setHeight: this._createOptionSetter(\"nodes.heightExpr\"),\r\n                    getParentKey: this._createOptionGetter(\"nodes.parentKeyExpr\"),\r\n                    setParentKey: this._createOptionSetter(\"nodes.parentKeyExpr\"),\r\n                    getItems: this._createOptionGetter(\"nodes.itemsExpr\"),\r\n                    setItems: this._createOptionSetter(\"nodes.itemsExpr\"),\r\n                    getContainerKey: containerKeyGetter = this._createOptionGetter(\"nodes.containerKeyExpr\"),\r\n                    setContainerKey: containerKeySetter = this._createOptionSetter(\"nodes.containerKeyExpr\"),\r\n                    getChildren: !containerKeyGetter && !containerKeySetter && this._createOptionGetter(\"nodes.containerChildrenExpr\"),\r\n                    setChildren: !containerKeyGetter && !containerKeySetter && this._createOptionSetter(\"nodes.containerChildrenExpr\")\r\n                },\r\n                edgeDataImporter: {\r\n                    getKey: this._createOptionGetter(\"edges.keyExpr\"),\r\n                    setKey: this._createOptionSetter(\"edges.keyExpr\"),\r\n                    getCustomData: this._createOptionGetter(\"edges.customDataExpr\"),\r\n                    setCustomData: this._createOptionSetter(\"edges.customDataExpr\"),\r\n                    getLocked: this._createOptionGetter(\"edges.lockedExpr\"),\r\n                    setLocked: this._createOptionSetter(\"edges.lockedExpr\"),\r\n                    getStyle: this._createOptionGetter(\"edges.styleExpr\"),\r\n                    setStyle: this._createOptionSetter(\"edges.styleExpr\"),\r\n                    getStyleText: this._createOptionGetter(\"edges.textStyleExpr\"),\r\n                    setStyleText: this._createOptionSetter(\"edges.textStyleExpr\"),\r\n                    getZIndex: this._createOptionGetter(\"edges.zIndexExpr\"),\r\n                    setZIndex: this._createOptionSetter(\"edges.zIndexExpr\"),\r\n                    getFrom: this._createOptionGetter(\"edges.fromExpr\"),\r\n                    setFrom: this._createOptionSetter(\"edges.fromExpr\"),\r\n                    getFromPointIndex: this._createOptionGetter(\"edges.fromPointIndexExpr\"),\r\n                    setFromPointIndex: this._createOptionSetter(\"edges.fromPointIndexExpr\"),\r\n                    getTo: this._createOptionGetter(\"edges.toExpr\"),\r\n                    setTo: this._createOptionSetter(\"edges.toExpr\"),\r\n                    getToPointIndex: this._createOptionGetter(\"edges.toPointIndexExpr\"),\r\n                    setToPointIndex: this._createOptionSetter(\"edges.toPointIndexExpr\"),\r\n                    getPoints: this._createOptionGetter(\"edges.pointsExpr\"),\r\n                    setPoints: this._createOptionSetter(\"edges.pointsExpr\"),\r\n                    getText: this._createOptionGetter(\"edges.textExpr\"),\r\n                    setText: this._createOptionSetter(\"edges.textExpr\"),\r\n                    getLineOption: (lineOptionGetter = this._createOptionGetter(\"edges.lineTypeExpr\")) && function(obj) {\r\n                        var lineType = lineOptionGetter(obj);\r\n                        return this._getConnectorLineOption(lineType)\r\n                    }.bind(this),\r\n                    setLineOption: (lineOptionSetter = this._createOptionSetter(\"edges.lineTypeExpr\")) && function(obj, value) {\r\n                        switch (value) {\r\n                            case ConnectorLineOption.Straight:\r\n                                value = \"straight\";\r\n                                break;\r\n                            case ConnectorLineOption.Orthogonal:\r\n                                value = \"orthogonal\"\r\n                        }\r\n                        lineOptionSetter(obj, value)\r\n                    }.bind(this),\r\n                    getStartLineEnding: (startLineEndingGetter = this._createOptionGetter(\"edges.fromLineEndExpr\")) && function(obj) {\r\n                        var lineEnd = startLineEndingGetter(obj);\r\n                        return this._getConnectorLineEnding(lineEnd)\r\n                    }.bind(this),\r\n                    setStartLineEnding: (startLineEndingSetter = this._createOptionSetter(\"edges.fromLineEndExpr\")) && function(obj, value) {\r\n                        switch (value) {\r\n                            case ConnectorLineEnding.Arrow:\r\n                                value = \"arrow\";\r\n                                break;\r\n                            case ConnectorLineEnding.OutlinedTriangle:\r\n                                value = \"outlinedTriangle\";\r\n                                break;\r\n                            case ConnectorLineEnding.FilledTriangle:\r\n                                value = \"filledTriangle\";\r\n                                break;\r\n                            case ConnectorLineEnding.None:\r\n                                value = \"none\"\r\n                        }\r\n                        startLineEndingSetter(obj, value)\r\n                    }.bind(this),\r\n                    getEndLineEnding: (endLineEndingGetter = this._createOptionGetter(\"edges.toLineEndExpr\")) && function(obj) {\r\n                        var lineEnd = endLineEndingGetter(obj);\r\n                        return this._getConnectorLineEnding(lineEnd)\r\n                    }.bind(this),\r\n                    setEndLineEnding: (endLineEndingSetter = this._createOptionSetter(\"edges.toLineEndExpr\")) && function(obj, value) {\r\n                        switch (value) {\r\n                            case ConnectorLineEnding.Arrow:\r\n                                value = \"arrow\";\r\n                                break;\r\n                            case ConnectorLineEnding.OutlinedTriangle:\r\n                                value = \"outlinedTriangle\";\r\n                                break;\r\n                            case ConnectorLineEnding.FilledTriangle:\r\n                                value = \"filledTriangle\";\r\n                                break;\r\n                            case ConnectorLineEnding.None:\r\n                                value = \"none\"\r\n                        }\r\n                        endLineEndingSetter(obj, value)\r\n                    }.bind(this)\r\n                },\r\n                layoutParameters: this._getDataBindingLayoutParameters()\r\n            };\r\n            this._executeDiagramCommand(DiagramCommand.BindDocument, data)\r\n        }\r\n    }, {\r\n        key: \"_reloadContentByChanges\",\r\n        value: function(changes, isExternalChanges) {\r\n            var keys = this._getChangesKeys(changes);\r\n            var applyLayout = this._onRequestUpdateLayout(changes);\r\n            this._reloadContent(keys, applyLayout, isExternalChanges)\r\n        }\r\n    }, {\r\n        key: \"_reloadContent\",\r\n        value: function(itemKeys, applyLayout, isExternalChanges) {\r\n            var _this12 = this;\r\n            var getData = function() {\r\n                var nodeDataSource;\r\n                var edgeDataSource;\r\n                if (_this12._nodesOption && isExternalChanges) {\r\n                    nodeDataSource = _this12._nodesOption.getItems()\r\n                }\r\n                if (_this12._edgesOption && isExternalChanges) {\r\n                    edgeDataSource = _this12._edgesOption.getItems()\r\n                }\r\n                return {\r\n                    nodeDataSource: nodeDataSource,\r\n                    edgeDataSource: edgeDataSource\r\n                }\r\n            };\r\n            this._diagramInstance.reloadContent(itemKeys, getData, applyLayout && this._getDataBindingLayoutParameters(), isExternalChanges)\r\n        }\r\n    }, {\r\n        key: \"_getConnectorLineOption\",\r\n        value: function(lineType) {\r\n            var _getDiagram5 = (0, _diagram.getDiagram)(),\r\n                ConnectorLineOption = _getDiagram5.ConnectorLineOption;\r\n            switch (lineType) {\r\n                case \"straight\":\r\n                    return ConnectorLineOption.Straight;\r\n                default:\r\n                    return ConnectorLineOption.Orthogonal\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getConnectorLineEnding\",\r\n        value: function(lineEnd) {\r\n            var _getDiagram6 = (0, _diagram.getDiagram)(),\r\n                ConnectorLineEnding = _getDiagram6.ConnectorLineEnding;\r\n            switch (lineEnd) {\r\n                case \"arrow\":\r\n                    return ConnectorLineEnding.Arrow;\r\n                case \"outlinedTriangle\":\r\n                    return ConnectorLineEnding.OutlinedTriangle;\r\n                case \"filledTriangle\":\r\n                    return ConnectorLineEnding.FilledTriangle;\r\n                default:\r\n                    return ConnectorLineEnding.None\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDataBindingLayoutParameters\",\r\n        value: function() {\r\n            var _getDiagram7 = (0, _diagram.getDiagram)(),\r\n                DataLayoutType = _getDiagram7.DataLayoutType,\r\n                DataLayoutOrientation = _getDiagram7.DataLayoutOrientation;\r\n            var layoutParametersOption = this.option(\"nodes.autoLayout\") || \"off\";\r\n            var layoutType = layoutParametersOption.type || layoutParametersOption;\r\n            var parameters = {};\r\n            if (\"off\" !== layoutType && (\"auto\" !== layoutType || !this._hasNodePositionExprs())) {\r\n                switch (layoutType) {\r\n                    case \"tree\":\r\n                        parameters.type = DataLayoutType.Tree;\r\n                        break;\r\n                    default:\r\n                        parameters.type = DataLayoutType.Sugiyama\r\n                }\r\n                switch (layoutParametersOption.orientation) {\r\n                    case \"vertical\":\r\n                        parameters.orientation = DataLayoutOrientation.Vertical;\r\n                        break;\r\n                    case \"horizontal\":\r\n                        parameters.orientation = DataLayoutOrientation.Horizontal\r\n                }\r\n                if (this.option(\"edges.fromPointIndexExpr\") || this.option(\"edges.toPointIndexExpr\")) {\r\n                    parameters.skipPointIndices = true\r\n                }\r\n            }\r\n            parameters.autoSizeEnabled = !!this.option(\"nodes.autoSizeEnabled\");\r\n            return parameters\r\n        }\r\n    }, {\r\n        key: \"_hasNodePositionExprs\",\r\n        value: function() {\r\n            return this.option(\"nodes.topExpr\") && this.option(\"nodes.leftExpr\")\r\n        }\r\n    }, {\r\n        key: \"_getAutoZoomValue\",\r\n        value: function(option) {\r\n            var _getDiagram8 = (0, _diagram.getDiagram)(),\r\n                AutoZoomMode = _getDiagram8.AutoZoomMode;\r\n            switch (option) {\r\n                case \"fitContent\":\r\n                    return AutoZoomMode.FitContent;\r\n                case \"fitWidth\":\r\n                    return AutoZoomMode.FitToWidth;\r\n                default:\r\n                    return AutoZoomMode.Disabled\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isBindingMode\",\r\n        value: function() {\r\n            return this._nodesOption && this._nodesOption.hasItems() || this._edgesOption && this._nodesOption.hasItems()\r\n        }\r\n    }, {\r\n        key: \"_beginUpdateDiagram\",\r\n        value: function() {\r\n            this._updateDiagramLockCount++\r\n        }\r\n    }, {\r\n        key: \"_endUpdateDiagram\",\r\n        value: function() {\r\n            this._updateDiagramLockCount = Math.max(this._updateDiagramLockCount - 1, 0);\r\n            if (!this._updateDiagramLockCount) {\r\n                this._bindDiagramData()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getCustomShapes\",\r\n        value: function() {\r\n            return this.option(\"customShapes\") || []\r\n        }\r\n    }, {\r\n        key: \"_getToolboxGroups\",\r\n        value: function() {\r\n            return _diagram2.default.getGroups(this.option(\"toolbox.groups\"))\r\n        }\r\n    }, {\r\n        key: \"_updateCustomShapes\",\r\n        value: function(customShapes, prevCustomShapes) {\r\n            var _this13 = this;\r\n            if (Array.isArray(prevCustomShapes)) {\r\n                this._diagramInstance.removeCustomShapes(prevCustomShapes.map(function(s) {\r\n                    return s.type\r\n                }))\r\n            }\r\n            if (Array.isArray(customShapes)) {\r\n                this._diagramInstance.addCustomShapes(customShapes.map(function(s) {\r\n                    var templateOption = s.template || _this13.option(\"customShapeTemplate\");\r\n                    var template = templateOption && _this13._getTemplate(templateOption);\r\n                    var toolboxTemplateOption = s.toolboxTemplate || _this13.option(\"customShapeToolboxTemplate\");\r\n                    var toolboxTemplate = toolboxTemplateOption && _this13._getTemplate(toolboxTemplateOption);\r\n                    return {\r\n                        category: s.category,\r\n                        type: s.type,\r\n                        baseType: s.baseType,\r\n                        title: s.title,\r\n                        svgUrl: s.backgroundImageUrl,\r\n                        svgToolboxUrl: s.backgroundImageToolboxUrl,\r\n                        svgLeft: s.backgroundImageLeft,\r\n                        svgTop: s.backgroundImageTop,\r\n                        svgWidth: s.backgroundImageWidth,\r\n                        svgHeight: s.backgroundImageHeight,\r\n                        defaultWidth: s.defaultWidth,\r\n                        defaultHeight: s.defaultHeight,\r\n                        toolboxWidthToHeightRatio: s.toolboxWidthToHeightRatio,\r\n                        minWidth: s.minWidth,\r\n                        minHeight: s.minHeight,\r\n                        maxWidth: s.maxWidth,\r\n                        maxHeight: s.maxHeight,\r\n                        allowResize: s.allowResize,\r\n                        defaultText: s.defaultText,\r\n                        allowEditText: s.allowEditText,\r\n                        textLeft: s.textLeft,\r\n                        textTop: s.textTop,\r\n                        textWidth: s.textWidth,\r\n                        textHeight: s.textHeight,\r\n                        defaultImageUrl: s.defaultImageUrl,\r\n                        allowEditImage: s.allowEditImage,\r\n                        imageLeft: s.imageLeft,\r\n                        imageTop: s.imageTop,\r\n                        imageWidth: s.imageWidth,\r\n                        imageHeight: s.imageHeight,\r\n                        connectionPoints: s.connectionPoints && s.connectionPoints.map(function(pt) {\r\n                            return {\r\n                                x: pt.x,\r\n                                y: pt.y\r\n                            }\r\n                        }),\r\n                        createTemplate: template && function(container, item) {\r\n                            template.render({\r\n                                model: _this13._nativeItemToDiagramItem(item),\r\n                                container: (0, _element.getPublicElement)((0, _renderer.default)(container))\r\n                            })\r\n                        },\r\n                        createToolboxTemplate: toolboxTemplate && function(container, item) {\r\n                            toolboxTemplate.render({\r\n                                model: _this13._nativeItemToDiagramItem(item),\r\n                                container: (0, _element.getPublicElement)((0, _renderer.default)(container))\r\n                            })\r\n                        },\r\n                        destroyTemplate: template && function(container) {\r\n                            (0, _renderer.default)(container).empty()\r\n                        },\r\n                        templateLeft: s.templateLeft,\r\n                        templateTop: s.templateTop,\r\n                        templateWidth: s.templateWidth,\r\n                        templateHeight: s.templateHeight,\r\n                        keepRatioOnAutoSize: s.keepRatioOnAutoSize\r\n                    }\r\n                }))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onToggleFullScreen\",\r\n        value: function(fullScreen) {\r\n            if (this.toggleFullscreenLock > 0) {\r\n                return\r\n            }\r\n            this._changeNativeFullscreen(fullScreen);\r\n            this.$element().toggleClass(DIAGRAM_FULLSCREEN_CLASS, fullScreen);\r\n            this._diagramInstance.updateLayout(true);\r\n            this._processDiagramResize();\r\n            if (this._toolbox) {\r\n                this._toolbox.repaint()\r\n            }\r\n            if (this._propertiesPanel) {\r\n                this._propertiesPanel.repaint()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_changeNativeFullscreen\",\r\n        value: function(setModeOn) {\r\n            var window = (0, _window.getWindow)();\r\n            if (window.self === window.top || setModeOn === this._inNativeFullscreen()) {\r\n                return\r\n            }\r\n            if (setModeOn) {\r\n                this._subscribeFullscreenNativeChanged()\r\n            } else {\r\n                this._unsubscribeFullscreenNativeChanged()\r\n            }\r\n            this._setNativeFullscreen(setModeOn)\r\n        }\r\n    }, {\r\n        key: \"_setNativeFullscreen\",\r\n        value: function(on) {\r\n            var window = (0, _window.getWindow)();\r\n            var document = window.self.document;\r\n            var body = window.self.document.body;\r\n            if (on) {\r\n                if (body.requestFullscreen) {\r\n                    body.requestFullscreen()\r\n                } else {\r\n                    if (body.mozRequestFullscreen) {\r\n                        body.mozRequestFullscreen()\r\n                    } else {\r\n                        if (body.webkitRequestFullscreen) {\r\n                            body.webkitRequestFullscreen()\r\n                        } else {\r\n                            if (body.msRequestFullscreen) {\r\n                                body.msRequestFullscreen()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (document.exitFullscreen) {\r\n                    document.exitFullscreen()\r\n                } else {\r\n                    if (document.mozCancelFullscreen) {\r\n                        document.mozCancelFullscreen()\r\n                    } else {\r\n                        if (document.webkitExitFullscreen) {\r\n                            document.webkitExitFullscreen()\r\n                        } else {\r\n                            if (document.msExitFullscreen) {\r\n                                document.msExitFullscreen()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_inNativeFullscreen\",\r\n        value: function() {\r\n            var document = (0, _window.getWindow)().document;\r\n            var fullscreenElement = document.fullscreenElement || document.msFullscreenElement || document.webkitFullscreenElement;\r\n            var isInFullscreen = fullscreenElement === document.body || document.webkitIsFullscreen;\r\n            return !!isInFullscreen\r\n        }\r\n    }, {\r\n        key: \"_subscribeFullscreenNativeChanged\",\r\n        value: function() {\r\n            var document = (0, _window.getWindow)().document;\r\n            var handler = this._onNativeFullscreenChangeHandler.bind(this);\r\n            _events_engine.default.on(document, FULLSCREEN_CHANGE_EVENT_NAME, handler);\r\n            _events_engine.default.on(document, IE_FULLSCREEN_CHANGE_EVENT_NAME, handler);\r\n            _events_engine.default.on(document, WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME, handler);\r\n            _events_engine.default.on(document, MOZ_FULLSCREEN_CHANGE_EVENT_NAME, handler)\r\n        }\r\n    }, {\r\n        key: \"_unsubscribeFullscreenNativeChanged\",\r\n        value: function() {\r\n            var document = (0, _window.getWindow)().document;\r\n            _events_engine.default.off(document, FULLSCREEN_CHANGE_EVENT_NAME);\r\n            _events_engine.default.off(document, IE_FULLSCREEN_CHANGE_EVENT_NAME);\r\n            _events_engine.default.off(document, WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME);\r\n            _events_engine.default.off(document, MOZ_FULLSCREEN_CHANGE_EVENT_NAME)\r\n        }\r\n    }, {\r\n        key: \"_onNativeFullscreenChangeHandler\",\r\n        value: function() {\r\n            if (!this._inNativeFullscreen()) {\r\n                this._unsubscribeFullscreenNativeChanged();\r\n                this.option(\"fullScreen\", false)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_executeDiagramFullscreenCommand\",\r\n        value: function(fullscreen) {\r\n            var _getDiagram9 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram9.DiagramCommand;\r\n            this.toggleFullscreenLock++;\r\n            this._executeDiagramCommand(DiagramCommand.Fullscreen, fullscreen);\r\n            this.toggleFullscreenLock--\r\n        }\r\n    }, {\r\n        key: \"_onShowContextMenu\",\r\n        value: function(x, y, selection) {\r\n            if (this._contextMenu) {\r\n                this._contextMenu._show(x, y, selection)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onHideContextMenu\",\r\n        value: function() {\r\n            if (this._contextMenu) {\r\n                this._contextMenu._hide()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onShowContextToolbox\",\r\n        value: function(x, y, side, category, callback) {\r\n            if (this._contextToolbox) {\r\n                this._contextToolbox._show(x, y, side, category, callback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onHideContextToolbox\",\r\n        value: function() {\r\n            if (this._contextToolbox) {\r\n                this._contextToolbox._hide()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDiagramUnitValue\",\r\n        value: function(value) {\r\n            var _getDiagram10 = (0, _diagram.getDiagram)(),\r\n                DiagramUnit = _getDiagram10.DiagramUnit;\r\n            switch (value) {\r\n                case \"in\":\r\n                    return DiagramUnit.In;\r\n                case \"cm\":\r\n                    return DiagramUnit.Cm;\r\n                case \"px\":\r\n                    return DiagramUnit.Px;\r\n                default:\r\n                    return DiagramUnit.In\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateReadOnlyState\",\r\n        value: function() {\r\n            var _getDiagram11 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram11.DiagramCommand;\r\n            var readOnly = this.isReadOnlyMode();\r\n            this._executeDiagramCommand(DiagramCommand.ToggleReadOnly, readOnly)\r\n        }\r\n    }, {\r\n        key: \"_updateZoomLevelState\",\r\n        value: function() {\r\n            var zoomLevel = this.option(\"zoomLevel.value\");\r\n            if (!zoomLevel) {\r\n                zoomLevel = this.option(\"zoomLevel\")\r\n            }\r\n            var _getDiagram12 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram12.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ZoomLevel, zoomLevel)\r\n        }\r\n    }, {\r\n        key: \"_updateZoomLevelItemsState\",\r\n        value: function() {\r\n            var zoomLevelItems = this.option(\"zoomLevel.items\");\r\n            if (!Array.isArray(zoomLevelItems)) {\r\n                return\r\n            }\r\n            var _getDiagram13 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram13.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ZoomLevelItems, zoomLevelItems)\r\n        }\r\n    }, {\r\n        key: \"_updateAutoZoomState\",\r\n        value: function() {\r\n            var _getDiagram14 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram14.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.SwitchAutoZoom, this._getAutoZoomValue(this.option(\"autoZoomMode\")))\r\n        }\r\n    }, {\r\n        key: \"_updateSimpleViewState\",\r\n        value: function() {\r\n            var _getDiagram15 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram15.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ToggleSimpleView, this.option(\"simpleView\"))\r\n        }\r\n    }, {\r\n        key: \"_updateFullscreenState\",\r\n        value: function() {\r\n            var fullscreen = this.option(\"fullScreen\");\r\n            this._executeDiagramFullscreenCommand(fullscreen);\r\n            this._onToggleFullScreen(fullscreen)\r\n        }\r\n    }, {\r\n        key: \"_updateShowGridState\",\r\n        value: function() {\r\n            var _getDiagram16 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram16.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ShowGrid, this.option(\"showGrid\"))\r\n        }\r\n    }, {\r\n        key: \"_updateSnapToGridState\",\r\n        value: function() {\r\n            var _getDiagram17 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram17.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.SnapToGrid, this.option(\"snapToGrid\"))\r\n        }\r\n    }, {\r\n        key: \"_updateGridSizeState\",\r\n        value: function() {\r\n            var gridSize = this.option(\"gridSize.value\");\r\n            if (!gridSize) {\r\n                gridSize = this.option(\"gridSize\")\r\n            }\r\n            var _getDiagram18 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram18.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.GridSize, gridSize)\r\n        }\r\n    }, {\r\n        key: \"_updateGridSizeItemsState\",\r\n        value: function() {\r\n            var gridSizeItems = this.option(\"gridSize.items\");\r\n            if (!Array.isArray(gridSizeItems)) {\r\n                return\r\n            }\r\n            var _getDiagram19 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram19.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.GridSizeItems, gridSizeItems)\r\n        }\r\n    }, {\r\n        key: \"_updateUnitItems\",\r\n        value: function() {\r\n            var _getDiagram20 = (0, _diagram.getDiagram)(),\r\n                DiagramLocalizationService = _getDiagram20.DiagramLocalizationService;\r\n            var items = this._getUnitItems();\r\n            if (this._unitItems !== items) {\r\n                this._unitItems = items;\r\n                DiagramLocalizationService.unitItems = items\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getUnitItems\",\r\n        value: function() {\r\n            var _getDiagram21 = (0, _diagram.getDiagram)(),\r\n                DiagramUnit = _getDiagram21.DiagramUnit;\r\n            var items = {};\r\n            items[DiagramUnit.In] = _message.default.format(\"dxDiagram-unitIn\");\r\n            items[DiagramUnit.Cm] = _message.default.format(\"dxDiagram-unitCm\");\r\n            items[DiagramUnit.Px] = _message.default.format(\"dxDiagram-unitPx\");\r\n            return items\r\n        }\r\n    }, {\r\n        key: \"_updateFormatUnitsMethod\",\r\n        value: function() {\r\n            var _getDiagram22 = (0, _diagram.getDiagram)(),\r\n                DiagramLocalizationService = _getDiagram22.DiagramLocalizationService;\r\n            DiagramLocalizationService.formatUnit = function(value) {\r\n                return _number.default.format(value)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateViewUnitsState\",\r\n        value: function() {\r\n            var _getDiagram23 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram23.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ViewUnits, this._getDiagramUnitValue(this.option(\"viewUnits\")))\r\n        }\r\n    }, {\r\n        key: \"_updateUnitsState\",\r\n        value: function() {\r\n            var _getDiagram24 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram24.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.Units, this._getDiagramUnitValue(this.option(\"units\")))\r\n        }\r\n    }, {\r\n        key: \"_updatePageSizeState\",\r\n        value: function() {\r\n            var pageSize = this.option(\"pageSize\");\r\n            if (!pageSize || !pageSize.width || !pageSize.height) {\r\n                return\r\n            }\r\n            var _getDiagram25 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram25.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.PageSize, pageSize)\r\n        }\r\n    }, {\r\n        key: \"_updatePageSizeItemsState\",\r\n        value: function() {\r\n            var pageSizeItems = this.option(\"pageSize.items\");\r\n            if (!Array.isArray(pageSizeItems)) {\r\n                return\r\n            }\r\n            var _getDiagram26 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram26.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.PageSizeItems, pageSizeItems)\r\n        }\r\n    }, {\r\n        key: \"_updatePageOrientationState\",\r\n        value: function() {\r\n            var _getDiagram27 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram27.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.PageLandscape, \"landscape\" === this.option(\"pageOrientation\"))\r\n        }\r\n    }, {\r\n        key: \"_updatePageColorState\",\r\n        value: function() {\r\n            var _getDiagram28 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram28.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.PageColor, this.option(\"pageColor\"))\r\n        }\r\n    }, {\r\n        key: \"_updateShapeTexts\",\r\n        value: function() {\r\n            var _getDiagram29 = (0, _diagram.getDiagram)(),\r\n                DiagramLocalizationService = _getDiagram29.DiagramLocalizationService;\r\n            var texts = this._getShapeTexts();\r\n            if (this._shapeTexts !== texts) {\r\n                this._shapeTexts = texts;\r\n                DiagramLocalizationService.shapeTexts = texts\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getShapeTexts\",\r\n        value: function() {\r\n            var _getDiagram30 = (0, _diagram.getDiagram)(),\r\n                ShapeTypes = _getDiagram30.ShapeTypes;\r\n            var texts = {};\r\n            texts[ShapeTypes.Text] = _message.default.format(\"dxDiagram-shapeText\");\r\n            texts[ShapeTypes.Rectangle] = _message.default.format(\"dxDiagram-shapeRectangle\");\r\n            texts[ShapeTypes.Ellipse] = _message.default.format(\"dxDiagram-shapeEllipse\");\r\n            texts[ShapeTypes.Cross] = _message.default.format(\"dxDiagram-shapeCross\");\r\n            texts[ShapeTypes.Triangle] = _message.default.format(\"dxDiagram-shapeTriangle\");\r\n            texts[ShapeTypes.Diamond] = _message.default.format(\"dxDiagram-shapeDiamond\");\r\n            texts[ShapeTypes.Heart] = _message.default.format(\"dxDiagram-shapeHeart\");\r\n            texts[ShapeTypes.Pentagon] = _message.default.format(\"dxDiagram-shapePentagon\");\r\n            texts[ShapeTypes.Hexagon] = _message.default.format(\"dxDiagram-shapeHexagon\");\r\n            texts[ShapeTypes.Octagon] = _message.default.format(\"dxDiagram-shapeOctagon\");\r\n            texts[ShapeTypes.Star] = _message.default.format(\"dxDiagram-shapeStar\");\r\n            texts[ShapeTypes.ArrowLeft] = _message.default.format(\"dxDiagram-shapeArrowLeft\");\r\n            texts[ShapeTypes.ArrowUp] = _message.default.format(\"dxDiagram-shapeArrowUp\");\r\n            texts[ShapeTypes.ArrowRight] = _message.default.format(\"dxDiagram-shapeArrowRight\");\r\n            texts[ShapeTypes.ArrowDown] = _message.default.format(\"dxDiagram-shapeArrowDown\");\r\n            texts[ShapeTypes.ArrowUpDown] = _message.default.format(\"dxDiagram-shapeArrowUpDown\");\r\n            texts[ShapeTypes.ArrowLeftRight] = _message.default.format(\"dxDiagram-shapeArrowLeftRight\");\r\n            texts[ShapeTypes.Process] = _message.default.format(\"dxDiagram-shapeProcess\");\r\n            texts[ShapeTypes.Decision] = _message.default.format(\"dxDiagram-shapeDecision\");\r\n            texts[ShapeTypes.Terminator] = _message.default.format(\"dxDiagram-shapeTerminator\");\r\n            texts[ShapeTypes.PredefinedProcess] = _message.default.format(\"dxDiagram-shapePredefinedProcess\");\r\n            texts[ShapeTypes.Document] = _message.default.format(\"dxDiagram-shapeDocument\");\r\n            texts[ShapeTypes.MultipleDocuments] = _message.default.format(\"dxDiagram-shapeMultipleDocuments\");\r\n            texts[ShapeTypes.ManualInput] = _message.default.format(\"dxDiagram-shapeManualInput\");\r\n            texts[ShapeTypes.Preparation] = _message.default.format(\"dxDiagram-shapePreparation\");\r\n            texts[ShapeTypes.Data] = _message.default.format(\"dxDiagram-shapeData\");\r\n            texts[ShapeTypes.Database] = _message.default.format(\"dxDiagram-shapeDatabase\");\r\n            texts[ShapeTypes.HardDisk] = _message.default.format(\"dxDiagram-shapeHardDisk\");\r\n            texts[ShapeTypes.InternalStorage] = _message.default.format(\"dxDiagram-shapeInternalStorage\");\r\n            texts[ShapeTypes.PaperTape] = _message.default.format(\"dxDiagram-shapePaperTape\");\r\n            texts[ShapeTypes.ManualOperation] = _message.default.format(\"dxDiagram-shapeManualOperation\");\r\n            texts[ShapeTypes.Delay] = _message.default.format(\"dxDiagram-shapeDelay\");\r\n            texts[ShapeTypes.StoredData] = _message.default.format(\"dxDiagram-shapeStoredData\");\r\n            texts[ShapeTypes.Display] = _message.default.format(\"dxDiagram-shapeDisplay\");\r\n            texts[ShapeTypes.Merge] = _message.default.format(\"dxDiagram-shapeMerge\");\r\n            texts[ShapeTypes.Connector] = _message.default.format(\"dxDiagram-shapeConnector\");\r\n            texts[ShapeTypes.Or] = _message.default.format(\"dxDiagram-shapeOr\");\r\n            texts[ShapeTypes.SummingJunction] = _message.default.format(\"dxDiagram-shapeSummingJunction\");\r\n            texts[ShapeTypes.Container] = _message.default.format(\"dxDiagram-shapeContainerDefaultText\");\r\n            texts[ShapeTypes.VerticalContainer] = _message.default.format(\"dxDiagram-shapeVerticalContainer\");\r\n            texts[ShapeTypes.HorizontalContainer] = _message.default.format(\"dxDiagram-shapeHorizontalContainer\");\r\n            texts[ShapeTypes.Card] = _message.default.format(\"dxDiagram-shapeCardDefaultText\");\r\n            texts[ShapeTypes.CardWithImageOnLeft] = _message.default.format(\"dxDiagram-shapeCardWithImageOnLeft\");\r\n            texts[ShapeTypes.CardWithImageOnTop] = _message.default.format(\"dxDiagram-shapeCardWithImageOnTop\");\r\n            texts[ShapeTypes.CardWithImageOnRight] = _message.default.format(\"dxDiagram-shapeCardWithImageOnRight\");\r\n            return texts\r\n        }\r\n    }, {\r\n        key: \"_updateEventSubscriptionMethods\",\r\n        value: function() {\r\n            var _getDiagram31 = (0, _diagram.getDiagram)(),\r\n                RenderHelper = _getDiagram31.RenderHelper;\r\n            RenderHelper.addEventListener = function(element, eventName, handler) {\r\n                _events_engine.default.on(element, eventName, handler)\r\n            };\r\n            RenderHelper.removeEventListener = function(element, eventName, handler) {\r\n                _events_engine.default.off(element, eventName, handler)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateDefaultItemProperties\",\r\n        value: function() {\r\n            if (this.option(\"defaultItemProperties.style\")) {\r\n                this._diagramInstance.setInitialStyleProperties(this.option(\"defaultItemProperties.style\"))\r\n            }\r\n            if (this.option(\"defaultItemProperties.textStyle\")) {\r\n                this._diagramInstance.setInitialTextStyleProperties(this.option(\"defaultItemProperties.textStyle\"))\r\n            }\r\n            this._diagramInstance.setInitialConnectorProperties({\r\n                lineOption: this._getConnectorLineOption(this.option(\"defaultItemProperties.connectorLineType\")),\r\n                startLineEnding: this._getConnectorLineEnding(this.option(\"defaultItemProperties.connectorLineStart\")),\r\n                endLineEnding: this._getConnectorLineEnding(this.option(\"defaultItemProperties.connectorLineEnd\"))\r\n            });\r\n            this._diagramInstance.applyShapeSizeSettings({\r\n                shapeMinWidth: this.option(\"defaultItemProperties.shapeMinWidth\"),\r\n                shapeMaxWidth: this.option(\"defaultItemProperties.shapeMaxWidth\"),\r\n                shapeMinHeight: this.option(\"defaultItemProperties.shapeMinHeight\"),\r\n                shapeMaxHeight: this.option(\"defaultItemProperties.shapeMaxHeight\")\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_updateEditingSettings\",\r\n        value: function() {\r\n            this._diagramInstance.applyOperationSettings({\r\n                addShape: this.option(\"editing.allowAddShape\"),\r\n                addShapeFromToolbox: this.option(\"editing.allowAddShape\"),\r\n                deleteShape: this.option(\"editing.allowDeleteShape\"),\r\n                deleteConnector: this.option(\"editing.allowDeleteConnector\"),\r\n                changeConnection: this.option(\"editing.allowChangeConnection\"),\r\n                changeConnectorPoints: this.option(\"editing.allowChangeConnectorPoints\"),\r\n                changeShapeText: this.option(\"editing.allowChangeShapeText\"),\r\n                changeConnectorText: this.option(\"editing.allowChangeConnectorText\"),\r\n                resizeShape: this.option(\"editing.allowResizeShape\"),\r\n                moveShape: this.option(\"editing.allowMoveShape\")\r\n            })\r\n        }\r\n    }, {\r\n        key: \"focus\",\r\n        value: function() {\r\n            this._captureFocus()\r\n        }\r\n    }, {\r\n        key: \"export\",\r\n        value: function() {\r\n            return this._getDiagramData()\r\n        }\r\n    }, {\r\n        key: \"exportTo\",\r\n        value: function(format, callback) {\r\n            var command = this._getDiagramExportToCommand(format);\r\n            this._executeDiagramCommand(command, callback)\r\n        }\r\n    }, {\r\n        key: \"_getDiagramExportToCommand\",\r\n        value: function(format) {\r\n            var _getDiagram32 = (0, _diagram.getDiagram)(),\r\n                DiagramCommand = _getDiagram32.DiagramCommand;\r\n            switch (format) {\r\n                case \"png\":\r\n                    return DiagramCommand.ExportPng;\r\n                case \"jpg\":\r\n                    return DiagramCommand.ExportJpg;\r\n                default:\r\n                    return DiagramCommand.ExportSvg\r\n            }\r\n        }\r\n    }, {\r\n        key: \"import\",\r\n        value: function(data, updateExistingItemsOnly) {\r\n            this._setDiagramData(data, updateExistingItemsOnly);\r\n            this._raiseDataChangeAction()\r\n        }\r\n    }, {\r\n        key: \"updateToolbox\",\r\n        value: function() {\r\n            this._diagramInstance && this._diagramInstance.refreshToolbox();\r\n            this._toolbox && this._toolbox.updateMaxHeight()\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(Diagram.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                readOnly: false,\r\n                zoomLevel: DIAGRAM_DEFAULT_ZOOMLEVEL,\r\n                simpleView: false,\r\n                autoZoomMode: DIAGRAM_DEFAULT_AUTOZOOM_MODE,\r\n                fullScreen: false,\r\n                showGrid: true,\r\n                snapToGrid: true,\r\n                units: DIAGRAM_DEFAULT_UNIT,\r\n                viewUnits: DIAGRAM_DEFAULT_UNIT,\r\n                pageOrientation: DIAGRAM_DEFAULT_PAGE_ORIENTATION,\r\n                pageColor: DIAGRAM_DEFAULT_PAGE_COLOR,\r\n                hasChanges: false,\r\n                nodes: {\r\n                    dataSource: null,\r\n                    keyExpr: \"id\",\r\n                    customDataExpr: void 0,\r\n                    lockedExpr: void 0,\r\n                    styleExpr: void 0,\r\n                    textStyleExpr: void 0,\r\n                    zIndexExpr: void 0,\r\n                    typeExpr: \"type\",\r\n                    textExpr: \"text\",\r\n                    imageUrlExpr: void 0,\r\n                    parentKeyExpr: void 0,\r\n                    itemsExpr: void 0,\r\n                    leftExpr: void 0,\r\n                    topExpr: void 0,\r\n                    widthExpr: void 0,\r\n                    heightExpr: void 0,\r\n                    containerKeyExpr: void 0,\r\n                    containerChildrenExpr: \"children\",\r\n                    autoLayout: \"auto\",\r\n                    autoSizeEnabled: true\r\n                },\r\n                edges: {\r\n                    dataSource: null,\r\n                    keyExpr: \"id\",\r\n                    customDataExpr: void 0,\r\n                    lockedExpr: void 0,\r\n                    styleExpr: void 0,\r\n                    textStyleExpr: void 0,\r\n                    zIndexExpr: void 0,\r\n                    fromExpr: \"from\",\r\n                    fromPointIndexExpr: void 0,\r\n                    toExpr: \"to\",\r\n                    toPointIndexExpr: void 0,\r\n                    pointsExpr: void 0,\r\n                    textExpr: void 0,\r\n                    lineTypeExpr: void 0,\r\n                    fromLineEndExpr: void 0,\r\n                    toLineEndExpr: void 0\r\n                },\r\n                customShapes: [],\r\n                toolbox: {\r\n                    visibility: \"auto\",\r\n                    shapeIconsPerRow: DIAGRAM_TOOLBOX_SHAPES_PER_ROW,\r\n                    showSearch: true\r\n                },\r\n                mainToolbar: {\r\n                    visible: false\r\n                },\r\n                historyToolbar: {\r\n                    visible: true\r\n                },\r\n                viewToolbar: {\r\n                    visible: true\r\n                },\r\n                contextMenu: {\r\n                    enabled: true\r\n                },\r\n                contextToolbox: {\r\n                    enabled: true,\r\n                    shapeIconsPerRow: DIAGRAM_CONTEXT_TOOLBOX_SHAPES_PER_ROW,\r\n                    width: DIAGRAM_CONTEXT_TOOLBOX_DEFAULT_WIDTH\r\n                },\r\n                propertiesPanel: {\r\n                    visibility: \"auto\"\r\n                },\r\n                defaultItemProperties: {\r\n                    connectorLineType: \"orthogonal\",\r\n                    connectorLineStart: \"none\",\r\n                    connectorLineEnd: \"arrow\"\r\n                },\r\n                editing: {\r\n                    allowAddShape: true,\r\n                    allowDeleteShape: true,\r\n                    allowDeleteConnector: true,\r\n                    allowChangeConnection: true,\r\n                    allowChangeConnectorPoints: true,\r\n                    allowChangeShapeText: true,\r\n                    allowChangeConnectorText: true,\r\n                    allowResizeShape: true,\r\n                    allowMoveShape: true\r\n                },\r\n                \"export\": {\r\n                    fileName: \"Diagram\",\r\n                    proxyUrl: void 0\r\n                },\r\n                onItemClick: null,\r\n                onItemDblClick: null,\r\n                onSelectionChanged: null,\r\n                onRequestEditOperation: null,\r\n                onRequestLayoutUpdate: null\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_raiseDataChangeAction\",\r\n        value: function() {\r\n            if (this._initialized) {\r\n                this.option(\"hasChanges\", true)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEdgeInsertedAction\",\r\n        value: function(data, callback, errorCallback) {\r\n            if (this._edgesOption) {\r\n                this._edgesOption.insert(data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEdgeUpdatedAction\",\r\n        value: function(key, data, callback, errorCallback) {\r\n            if (this._edgesOption) {\r\n                this._edgesOption.update(key, data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEdgeRemovedAction\",\r\n        value: function(key, data, callback, errorCallback) {\r\n            if (this._edgesOption) {\r\n                this._edgesOption.remove(key, data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseNodeInsertedAction\",\r\n        value: function(data, callback, errorCallback) {\r\n            if (this._nodesOption) {\r\n                this._nodesOption.insert(data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseNodeUpdatedAction\",\r\n        value: function(key, data, callback, errorCallback) {\r\n            if (this._nodesOption) {\r\n                this._nodesOption.update(key, data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseNodeRemovedAction\",\r\n        value: function(key, data, callback, errorCallback) {\r\n            if (this._nodesOption) {\r\n                this._nodesOption.remove(key, data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseToolboxDragStart\",\r\n        value: function() {\r\n            if (this._toolbox) {\r\n                this._toolbox._raiseToolboxDragStart();\r\n                if (this.isMobileScreenSize()) {\r\n                    this._toolbox.hide();\r\n                    this._toolboxDragHidden = true\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseToolboxDragEnd\",\r\n        value: function() {\r\n            if (this._toolbox) {\r\n                this._toolbox._raiseToolboxDragEnd();\r\n                if (this._toolboxDragHidden) {\r\n                    this._toolbox.show();\r\n                    delete this._toolboxDragHidden\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseTextInputStart\",\r\n        value: function() {\r\n            this._textInputStarted = true;\r\n            if (this._propertiesPanel) {\r\n                if (this.isMobileScreenSize() && this._propertiesPanel.isVisible()) {\r\n                    this._propertiesPanel.hide();\r\n                    this._propertiesPanelTextInputHidden = true\r\n                }\r\n            }\r\n            if (this._toolbox) {\r\n                if (this.isMobileScreenSize() && this._toolbox.isVisible()) {\r\n                    this._toolbox.hide();\r\n                    this._toolboxTextInputHidden = true\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseTextInputEnd\",\r\n        value: function() {\r\n            if (this._propertiesPanel) {\r\n                if (this._propertiesPanelTextInputHidden) {\r\n                    this._propertiesPanel.show();\r\n                    delete this._propertiesPanelTextInputHidden\r\n                }\r\n            }\r\n            if (this._toolbox) {\r\n                if (this._toolboxTextInputHidden) {\r\n                    this._toolbox.show();\r\n                    delete this._toolboxTextInputHidden\r\n                }\r\n            }\r\n            this._textInputStarted = false\r\n        }\r\n    }, {\r\n        key: \"_createItemClickAction\",\r\n        value: function() {\r\n            this._itemClickAction = this._createActionByOption(\"onItemClick\");\r\n        }\r\n    }, {\r\n        key: \"_createItemDblClickAction\",\r\n        value: function() {\r\n            this._itemDblClickAction = this._createActionByOption(\"onItemDblClick\")\r\n        }\r\n    }, {\r\n        key: \"_createSelectionChangedAction\",\r\n        value: function() {\r\n            this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\")\r\n        }\r\n    }, {\r\n        key: \"_createRequestEditOperationAction\",\r\n        value: function() {\r\n            this._requestEditOperationAction = this._createActionByOption(\"onRequestEditOperation\")\r\n        }\r\n    }, {\r\n        key: \"_createRequestLayoutUpdateAction\",\r\n        value: function() {\r\n            this._requestLayoutUpdateAction = this._createActionByOption(\"onRequestLayoutUpdate\")\r\n        }\r\n    }, {\r\n        key: \"_createCustomCommand\",\r\n        value: function() {\r\n            this._customCommandAction = this._createActionByOption(\"onCustomCommand\")\r\n        }\r\n    }, {\r\n        key: \"_raiseItemClickAction\",\r\n        value: function(nativeItem) {\r\n            if (!this._itemClickAction) {\r\n                this._createItemClickAction()\r\n            }\r\n            this._itemClickAction({\r\n                item: this._nativeItemToDiagramItem(nativeItem)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_raiseItemDblClickAction\",\r\n        value: function(nativeItem) {\r\n            if (!this._itemDblClickAction) {\r\n                this._createItemDblClickAction()\r\n            }\r\n            this._itemDblClickAction({\r\n                item: this._nativeItemToDiagramItem(nativeItem)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_raiseSelectionChanged\",\r\n        value: function(nativeItems) {\r\n            if (!this._selectionChangedAction) {\r\n                this._createSelectionChangedAction()\r\n            }\r\n            this._selectionChangedAction({\r\n                items: nativeItems.map(this._nativeItemToDiagramItem.bind(this))\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_raiseRequestEditOperation\",\r\n        value: function(operation, args) {\r\n            if (!this._requestEditOperationAction) {\r\n                this._createRequestEditOperationAction()\r\n            }\r\n            var eventArgs = this._getRequestEditOperationEventArgs(operation, args);\r\n            this._requestEditOperationAction(eventArgs);\r\n            args.allowed = eventArgs.allowed\r\n        }\r\n    }, {\r\n        key: \"_getModelOperation\",\r\n        value: function(operation) {\r\n            var _getDiagram33 = (0, _diagram.getDiagram)(),\r\n                DiagramModelOperation = _getDiagram33.DiagramModelOperation;\r\n            switch (operation) {\r\n                case DiagramModelOperation.AddShape:\r\n                    return \"addShape\";\r\n                case DiagramModelOperation.AddShapeFromToolbox:\r\n                    return \"addShapeFromToolbox\";\r\n                case DiagramModelOperation.DeleteShape:\r\n                    return \"deleteShape\";\r\n                case DiagramModelOperation.DeleteConnector:\r\n                    return \"deleteConnector\";\r\n                case DiagramModelOperation.ChangeConnection:\r\n                    return \"changeConnection\";\r\n                case DiagramModelOperation.ChangeConnectorPoints:\r\n                    return \"changeConnectorPoints\";\r\n                case DiagramModelOperation.BeforeChangeShapeText:\r\n                    return \"beforeChangeShapeText\";\r\n                case DiagramModelOperation.ChangeShapeText:\r\n                    return \"changeShapeText\";\r\n                case DiagramModelOperation.BeforeChangeConnectorText:\r\n                    return \"beforeChangeConnectorText\";\r\n                case DiagramModelOperation.ChangeConnectorText:\r\n                    return \"changeConnectorText\";\r\n                case DiagramModelOperation.ResizeShape:\r\n                    return \"resizeShape\";\r\n                case DiagramModelOperation.MoveShape:\r\n                    return \"moveShape\"\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getRequestEditOperationEventArgs\",\r\n        value: function(operation, args) {\r\n            var _getDiagram34 = (0, _diagram.getDiagram)(),\r\n                DiagramModelOperation = _getDiagram34.DiagramModelOperation,\r\n                ConnectorPosition = _getDiagram34.ConnectorPosition;\r\n            var eventArgs = {\r\n                operation: this._getModelOperation(operation),\r\n                allowed: args.allowed,\r\n                updateUI: args.updateUI,\r\n                reason: args.updateUI ? \"checkUIElementAvailability\" : \"modelModification\"\r\n            };\r\n            switch (operation) {\r\n                case DiagramModelOperation.AddShape:\r\n                    eventArgs.args = {\r\n                        shape: args.shape && this._nativeItemToDiagramItem(args.shape),\r\n                        position: args.position && {\r\n                            x: args.position.x,\r\n                            y: args.position.y\r\n                        }\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.AddShapeFromToolbox:\r\n                    eventArgs.args = {\r\n                        shapeType: args.shapeType\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.DeleteShape:\r\n                    eventArgs.args = {\r\n                        shape: args.shape && this._nativeItemToDiagramItem(args.shape)\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.DeleteConnector:\r\n                    eventArgs.args = {\r\n                        connector: args.connector && this._nativeItemToDiagramItem(args.connector)\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.ChangeConnection:\r\n                    eventArgs.args = {\r\n                        newShape: args.shape && this._nativeItemToDiagramItem(args.shape),\r\n                        oldShape: args.oldShape && this._nativeItemToDiagramItem(args.oldShape),\r\n                        connector: args.connector && this._nativeItemToDiagramItem(args.connector),\r\n                        connectionPointIndex: args.connectionPointIndex,\r\n                        connectorPosition: args.position === ConnectorPosition.Begin ? \"start\" : \"end\"\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.ChangeConnectorPoints:\r\n                    eventArgs.args = {\r\n                        connector: args.connector && this._nativeItemToDiagramItem(args.connector),\r\n                        newPoints: args.points && args.points.map(function(pt) {\r\n                            return {\r\n                                x: pt.x,\r\n                                y: pt.y\r\n                            }\r\n                        }),\r\n                        oldPoints: args.oldPoints && args.oldPoints.map(function(pt) {\r\n                            return {\r\n                                x: pt.x,\r\n                                y: pt.y\r\n                            }\r\n                        })\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.BeforeChangeShapeText:\r\n                    eventArgs.args = {\r\n                        shape: args.shape && this._nativeItemToDiagramItem(args.shape)\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.ChangeShapeText:\r\n                    eventArgs.args = {\r\n                        shape: args.shape && this._nativeItemToDiagramItem(args.shape),\r\n                        text: args.text\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.BeforeChangeConnectorText:\r\n                    eventArgs.args = {\r\n                        connector: args.connector && this._nativeItemToDiagramItem(args.connector),\r\n                        index: args.index\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.ChangeConnectorText:\r\n                    eventArgs.args = {\r\n                        connector: args.connector && this._nativeItemToDiagramItem(args.connector),\r\n                        index: args.index,\r\n                        text: args.text\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.ResizeShape:\r\n                    eventArgs.args = {\r\n                        shape: args.shape && this._nativeItemToDiagramItem(args.shape),\r\n                        newSize: args.size && {\r\n                            width: args.size.width,\r\n                            height: args.size.height\r\n                        },\r\n                        oldSize: args.oldSize && {\r\n                            width: args.oldSize.width,\r\n                            height: args.oldSize.height\r\n                        }\r\n                    };\r\n                    break;\r\n                case DiagramModelOperation.MoveShape:\r\n                    eventArgs.args = {\r\n                        shape: args.shape && this._nativeItemToDiagramItem(args.shape),\r\n                        newPosition: args.position && {\r\n                            x: args.position.x,\r\n                            y: args.position.y\r\n                        },\r\n                        oldPosition: args.oldPosition && {\r\n                            x: args.oldPosition.x,\r\n                            y: args.oldPosition.y\r\n                        }\r\n                    }\r\n            }\r\n            return eventArgs\r\n        }\r\n    }, {\r\n        key: \"_nativeItemToDiagramItem\",\r\n        value: function(nativeItem) {\r\n            var _getDiagram35 = (0, _diagram.getDiagram)(),\r\n                NativeShape = _getDiagram35.NativeShape;\r\n            var createMethod = nativeItem instanceof NativeShape ? this._nativeShapeToDiagramShape.bind(this) : this._nativeConnectorToDiagramConnector.bind(this);\r\n            return (0, _extend.extend)({\r\n                id: nativeItem.id,\r\n                key: nativeItem.key,\r\n                dataItem: void 0\r\n            }, createMethod(nativeItem))\r\n        }\r\n    }, {\r\n        key: \"_nativeShapeToDiagramShape\",\r\n        value: function(nativeShape) {\r\n            return {\r\n                dataItem: this._nodesOption && this._nodesOption.findItem(nativeShape.key),\r\n                itemType: \"shape\",\r\n                text: nativeShape.text,\r\n                type: nativeShape.type,\r\n                position: {\r\n                    x: nativeShape.position.x,\r\n                    y: nativeShape.position.y\r\n                },\r\n                size: {\r\n                    width: nativeShape.size.width,\r\n                    height: nativeShape.size.height\r\n                },\r\n                attachedConnectorIds: nativeShape.attachedConnectorIds\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_nativeConnectorToDiagramConnector\",\r\n        value: function(nativeConnector) {\r\n            return {\r\n                dataItem: this._edgesOption && this._edgesOption.findItem(nativeConnector.key),\r\n                itemType: \"connector\",\r\n                texts: nativeConnector.texts,\r\n                fromKey: nativeConnector.fromKey,\r\n                toKey: nativeConnector.toKey,\r\n                fromId: nativeConnector.fromId,\r\n                fromPointIndex: nativeConnector.fromPointIndex,\r\n                toId: nativeConnector.toId,\r\n                toPointIndex: nativeConnector.toPointIndex,\r\n                points: nativeConnector.points.map(function(pt) {\r\n                    return {\r\n                        x: pt.x,\r\n                        y: pt.y\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getItemByKey\",\r\n        value: function(key) {\r\n            var nativeItem = this._diagramInstance && this._diagramInstance.getNativeItemByDataKey(key);\r\n            return nativeItem && this._nativeItemToDiagramItem(nativeItem)\r\n        }\r\n    }, {\r\n        key: \"getItemById\",\r\n        value: function(id) {\r\n            var nativeItem = this._diagramInstance && this._diagramInstance.getNativeItemByKey(id);\r\n            return nativeItem && this._nativeItemToDiagramItem(nativeItem)\r\n        }\r\n    }, {\r\n        key: \"_invalidateContextMenuCommands\",\r\n        value: function() {\r\n            if (this._contextMenu) {\r\n                this._contextMenu.option({\r\n                    commands: this.option(\"contextMenu.commands\")\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_invalidatePropertiesPanelTabs\",\r\n        value: function() {\r\n            if (this._propertiesPanel) {\r\n                this._propertiesPanel.option({\r\n                    propertyTabs: this.option(\"propertiesPanel.tabs\")\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_invalidateMainToolbarCommands\",\r\n        value: function() {\r\n            if (this._mainToolbar) {\r\n                this._mainToolbar.option({\r\n                    commands: this.option(\"mainToolbar.commands\")\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_invalidateHistoryToolbarCommands\",\r\n        value: function() {\r\n            if (this._historyToolbar) {\r\n                this._historyToolbar.option({\r\n                    commands: this.option(\"historyToolbar.commands\")\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_invalidateViewToolbarCommands\",\r\n        value: function() {\r\n            if (this._viewToolbar) {\r\n                this._viewToolbar.option({\r\n                    commands: this.option(\"viewToolbar.commands\")\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_invalidateToolboxGroups\",\r\n        value: function() {\r\n            if (this._toolbox) {\r\n                this._toolbox.option({\r\n                    toolboxGroups: this._getToolboxGroups()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            if (this.optionsUpdateBar.isUpdateLocked()) {\r\n                return\r\n            }\r\n            this.optionsUpdateBar.beginUpdate();\r\n            try {\r\n                this._optionChangedCore(args)\r\n            } finally {\r\n                this.optionsUpdateBar.endUpdate()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_optionChangedCore\",\r\n        value: function(args) {\r\n            var _this14 = this;\r\n            switch (args.name) {\r\n                case \"readOnly\":\r\n                case \"disabled\":\r\n                    this._updateReadOnlyState();\r\n                    this._invalidate();\r\n                    break;\r\n                case \"zoomLevel\":\r\n                    if (\"zoomLevel\" === args.fullName || \"zoomLevel.items\" === args.fullName) {\r\n                        this._updateZoomLevelItemsState()\r\n                    }\r\n                    if (\"zoomLevel\" === args.fullName || \"zoomLevel.value\" === args.fullName) {\r\n                        this._updateZoomLevelState()\r\n                    }\r\n                    break;\r\n                case \"autoZoomMode\":\r\n                    this._updateAutoZoomState();\r\n                    break;\r\n                case \"simpleView\":\r\n                    this._updateSimpleViewState();\r\n                    break;\r\n                case \"fullScreen\":\r\n                    this._updateFullscreenState();\r\n                    break;\r\n                case \"showGrid\":\r\n                    this._updateShowGridState();\r\n                    break;\r\n                case \"snapToGrid\":\r\n                    this._updateSnapToGridState();\r\n                    break;\r\n                case \"gridSize\":\r\n                    if (\"gridSize\" === args.fullName || \"gridSize.items\" === args.fullName) {\r\n                        this._updateGridSizeItemsState()\r\n                    }\r\n                    if (\"gridSize\" === args.fullName || \"gridSize.value\" === args.fullName) {\r\n                        this._updateGridSizeState()\r\n                    }\r\n                    break;\r\n                case \"viewUnits\":\r\n                    this._updateViewUnitsState();\r\n                    break;\r\n                case \"units\":\r\n                    this._updateUnitsState();\r\n                    break;\r\n                case \"pageSize\":\r\n                    if (\"pageSize\" === args.fullName || \"pageSize.items\" === args.fullName) {\r\n                        this._updatePageSizeItemsState()\r\n                    }\r\n                    if (\"pageSize\" === args.fullName || \"pageSize.width\" === args.fullName || \"pageSize.height\" === args.fullName) {\r\n                        this._updatePageSizeState()\r\n                    }\r\n                    break;\r\n                case \"pageOrientation\":\r\n                    this._updatePageOrientationState();\r\n                    break;\r\n                case \"pageColor\":\r\n                    this._updatePageColorState();\r\n                    break;\r\n                case \"nodes\":\r\n                    if (\"nodes.autoLayout\" === args.fullName) {\r\n                        this._refreshDataSources()\r\n                    } else {\r\n                        this._refreshNodesDataSource()\r\n                    }\r\n                    break;\r\n                case \"edges\":\r\n                    this._refreshEdgesDataSource();\r\n                    break;\r\n                case \"customShapes\":\r\n                    this._updateCustomShapes(args.value, args.previousValue);\r\n                    this._invalidate();\r\n                    break;\r\n                case \"contextMenu\":\r\n                    if (\"contextMenu.commands\" === args.fullName) {\r\n                        this._invalidateContextMenuCommands()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"contextToolbox\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"propertiesPanel\":\r\n                    if (\"propertiesPanel.tabs\" === args.name) {\r\n                        this._invalidatePropertiesPanelTabs()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"toolbox\":\r\n                    if (\"toolbox.groups\" === args.fullName) {\r\n                        this._invalidateToolboxGroups()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"mainToolbar\":\r\n                    if (\"mainToolbar.commands\" === args.fullName) {\r\n                        this._invalidateMainToolbarCommands()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"historyToolbar\":\r\n                    if (\"historyToolbar.commands\" === args.fullName) {\r\n                        this._invalidateHistoryToolbarCommands()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"viewToolbar\":\r\n                    if (\"viewToolbar.commands\" === args.fullName) {\r\n                        this._invalidateViewToolbarCommands()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"onItemClick\":\r\n                    this._createItemClickAction();\r\n                    break;\r\n                case \"onItemDblClick\":\r\n                    this._createItemDblClickAction();\r\n                    break;\r\n                case \"onSelectionChanged\":\r\n                    this._createSelectionChangedAction();\r\n                    break;\r\n                case \"onRequestEditOperation\":\r\n                    this._createRequestEditOperationAction();\r\n                    break;\r\n                case \"onRequestLayoutUpdate\":\r\n                    this._createRequestLayoutUpdateAction();\r\n                    break;\r\n                case \"onCustomCommand\":\r\n                    this._createCustomCommand();\r\n                    break;\r\n                case \"defaultItemProperties\":\r\n                    this._updateDefaultItemProperties();\r\n                    break;\r\n                case \"editing\":\r\n                    this._updateEditingSettings();\r\n                    break;\r\n                case \"export\":\r\n                    this._toolbars.forEach(function(toolbar) {\r\n                        toolbar.option(\"export\", _this14.option(\"export\"))\r\n                    });\r\n                    if (this._contextMenu) {\r\n                        this._contextMenu.option(\"export\", this.option(\"export\"))\r\n                    }\r\n                    break;\r\n                case \"hasChanges\":\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(Diagram.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }]);\r\n    return Diagram\r\n}(_ui.default);\r\n(0, _component_registrator.default)(\"dxDiagram\", Diagram);\r\nvar _default = Diagram;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}