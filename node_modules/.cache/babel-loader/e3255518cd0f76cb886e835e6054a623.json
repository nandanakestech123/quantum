{"ast":null,"code":"/**\r\n * DevExtreme (file_management/remote_provider.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _ajax = _interopRequireDefault(require(\"../core/utils/ajax\"));\n\nvar _common = require(\"../core/utils/common\");\n\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\n\nvar _window = require(\"../core/utils/window\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _provider_base = _interopRequireDefault(require(\"./provider_base\"));\n\nvar _data = require(\"../core/utils/data\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar window = (0, _window.getWindow)();\nvar FILE_CHUNK_BLOB_NAME = \"chunk\";\n\nvar RemoteFileSystemProvider = function (_FileSystemProviderBa) {\n  _inherits(RemoteFileSystemProvider, _FileSystemProviderBa);\n\n  var _super = _createSuper(RemoteFileSystemProvider);\n\n  function RemoteFileSystemProvider(options) {\n    var _this;\n\n    _classCallCheck(this, RemoteFileSystemProvider);\n\n    options = (0, _common.ensureDefined)(options, {});\n    _this = _super.call(this, options);\n    _this._endpointUrl = options.endpointUrl;\n    _this._hasSubDirsGetter = (0, _data.compileGetter)(options.hasSubDirectoriesExpr || \"hasSubDirectories\");\n    return _this;\n  }\n\n  _createClass(RemoteFileSystemProvider, [{\n    key: \"getItems\",\n    value: function (parentDir) {\n      var _this2 = this;\n\n      var pathInfo = parentDir.getFullPathInfo();\n      return this._getEntriesByPath(pathInfo).then(function (result) {\n        return _this2._convertDataObjectsToFileItems(result.result, pathInfo);\n      });\n    }\n  }, {\n    key: \"renameItem\",\n    value: function (item, name) {\n      return this._executeRequest(\"Rename\", {\n        pathInfo: item.getFullPathInfo(),\n        isDirectory: item.isDirectory,\n        name: name\n      });\n    }\n  }, {\n    key: \"createDirectory\",\n    value: function (parentDir, name) {\n      return this._executeRequest(\"CreateDir\", {\n        pathInfo: parentDir.getFullPathInfo(),\n        name: name\n      }).done(function () {\n        if (parentDir && !parentDir.isRoot()) {\n          parentDir.hasSubDirectories = true;\n        }\n      });\n    }\n  }, {\n    key: \"deleteItems\",\n    value: function (items) {\n      var _this3 = this;\n\n      return items.map(function (item) {\n        return _this3._executeRequest(\"Remove\", {\n          pathInfo: item.getFullPathInfo(),\n          isDirectory: item.isDirectory\n        });\n      });\n    }\n  }, {\n    key: \"moveItems\",\n    value: function (items, destinationDirectory) {\n      var _this4 = this;\n\n      return items.map(function (item) {\n        return _this4._executeRequest(\"Move\", {\n          sourcePathInfo: item.getFullPathInfo(),\n          sourceIsDirectory: item.isDirectory,\n          destinationPathInfo: destinationDirectory.getFullPathInfo()\n        });\n      });\n    }\n  }, {\n    key: \"copyItems\",\n    value: function (items, destinationFolder) {\n      var _this5 = this;\n\n      return items.map(function (item) {\n        return _this5._executeRequest(\"Copy\", {\n          sourcePathInfo: item.getFullPathInfo(),\n          sourceIsDirectory: item.isDirectory,\n          destinationPathInfo: destinationFolder.getFullPathInfo()\n        });\n      });\n    }\n  }, {\n    key: \"uploadFileChunk\",\n    value: function (fileData, chunksInfo, destinationDirectory) {\n      if (0 === chunksInfo.chunkIndex) {\n        chunksInfo.customData.uploadId = new _guid.default();\n      }\n\n      var args = {\n        destinationPathInfo: destinationDirectory.getFullPathInfo(),\n        chunkMetadata: JSON.stringify({\n          UploadId: chunksInfo.customData.uploadId,\n          FileName: fileData.name,\n          Index: chunksInfo.chunkIndex,\n          TotalCount: chunksInfo.chunkCount,\n          FileSize: fileData.size\n        })\n      };\n      var formData = new window.FormData();\n      formData.append(FILE_CHUNK_BLOB_NAME, chunksInfo.chunkBlob);\n      formData.append(\"arguments\", JSON.stringify(args));\n      formData.append(\"command\", \"UploadChunk\");\n      var deferred = new _deferred.Deferred();\n\n      _ajax.default.sendRequest({\n        url: this._endpointUrl,\n        method: \"POST\",\n        dataType: \"json\",\n        data: formData,\n        upload: {\n          onprogress: _common.noop,\n          onloadstart: _common.noop,\n          onabort: _common.noop\n        },\n        cache: false\n      }).done(function (result) {\n        !result.success && deferred.reject(result) || deferred.resolve();\n      }).fail(deferred.reject);\n\n      return deferred.promise();\n    }\n  }, {\n    key: \"abortFileUpload\",\n    value: function (fileData, chunksInfo, destinationDirectory) {\n      return this._executeRequest(\"AbortUpload\", {\n        uploadId: chunksInfo.customData.uploadId\n      });\n    }\n  }, {\n    key: \"downloadItems\",\n    value: function (items) {\n      var args = this._getDownloadArgs(items);\n\n      var $form = (0, _renderer.default)(\"<form>\").css({\n        display: \"none\"\n      }).attr({\n        method: \"post\",\n        action: args.url\n      });\n      [\"command\", \"arguments\"].forEach(function (name) {\n        (0, _renderer.default)(\"<input>\").attr({\n          type: \"hidden\",\n          name: name,\n          value: args[name]\n        }).appendTo($form);\n      });\n      $form.appendTo(\"body\");\n\n      _events_engine.default.trigger($form, \"submit\");\n\n      setTimeout(function () {\n        return $form.remove();\n      });\n    }\n  }, {\n    key: \"getItemsContent\",\n    value: function (items) {\n      var args = this._getDownloadArgs(items);\n\n      var formData = new window.FormData();\n      formData.append(\"command\", args.command);\n      formData.append(\"arguments\", args.arguments);\n      return _ajax.default.sendRequest({\n        url: args.url,\n        method: \"POST\",\n        responseType: \"arraybuffer\",\n        data: formData,\n        upload: {\n          onprogress: _common.noop,\n          onloadstart: _common.noop,\n          onabort: _common.noop\n        },\n        cache: false\n      });\n    }\n  }, {\n    key: \"_getDownloadArgs\",\n    value: function (items) {\n      var pathInfoList = items.map(function (item) {\n        return item.getFullPathInfo();\n      });\n      var args = {\n        pathInfoList: pathInfoList\n      };\n      var argsStr = JSON.stringify(args);\n      return {\n        url: this._endpointUrl,\n        arguments: argsStr,\n        command: \"Download\"\n      };\n    }\n  }, {\n    key: \"_getItemsIds\",\n    value: function (items) {\n      return items.map(function (it) {\n        return it.relativeName;\n      });\n    }\n  }, {\n    key: \"_getEntriesByPath\",\n    value: function (pathInfo) {\n      return this._executeRequest(\"GetDirContents\", {\n        pathInfo: pathInfo\n      });\n    }\n  }, {\n    key: \"_executeRequest\",\n    value: function (command, args) {\n      var method = \"GetDirContents\" === command ? \"GET\" : \"POST\";\n      var deferred = new _deferred.Deferred();\n\n      _ajax.default.sendRequest({\n        url: this._getEndpointUrl(command, args),\n        method: method,\n        dataType: \"json\",\n        cache: false\n      }).then(function (result) {\n        !result.success && deferred.reject(result) || deferred.resolve(result);\n      }, function (e) {\n        return deferred.reject(e);\n      });\n\n      return deferred.promise();\n    }\n  }, {\n    key: \"_getEndpointUrl\",\n    value: function (command, args) {\n      var queryString = this._getQueryString({\n        command: command,\n        arguments: JSON.stringify(args)\n      });\n\n      var separator = this._endpointUrl && this._endpointUrl.indexOf(\"?\") > 0 ? \"&\" : \"?\";\n      return this._endpointUrl + separator + queryString;\n    }\n  }, {\n    key: \"_getQueryString\",\n    value: function (params) {\n      var pairs = [];\n      var keys = Object.keys(params);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        var value = params[key];\n\n        if (void 0 === value) {\n          continue;\n        }\n\n        if (null === value) {\n          value = \"\";\n        }\n\n        if (Array.isArray(value)) {\n          this._processQueryStringArrayParam(key, value, pairs);\n        } else {\n          var pair = this._getQueryStringPair(key, value);\n\n          pairs.push(pair);\n        }\n      }\n\n      return pairs.join(\"&\");\n    }\n  }, {\n    key: \"_processQueryStringArrayParam\",\n    value: function (key, array, pairs) {\n      var _this6 = this;\n\n      (0, _iterator.each)(array, function (_, item) {\n        var pair = _this6._getQueryStringPair(key, item);\n\n        pairs.push(pair);\n      });\n    }\n  }, {\n    key: \"_getQueryStringPair\",\n    value: function (key, value) {\n      return encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function (dataObj) {\n      var hasSubDirs = this._hasSubDirsGetter(dataObj);\n\n      return \"boolean\" === typeof hasSubDirs ? hasSubDirs : true;\n    }\n  }, {\n    key: \"_getKeyExpr\",\n    value: function (options) {\n      return options.keyExpr || \"key\";\n    }\n  }]);\n\n  return RemoteFileSystemProvider;\n}(_provider_base.default);\n\nvar _default = RemoteFileSystemProvider;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/file_management/remote_provider.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_renderer","_interopRequireDefault","require","_ajax","_common","_guid","_window","_iterator","_deferred","_events_engine","_provider_base","_data","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","window","getWindow","FILE_CHUNK_BLOB_NAME","RemoteFileSystemProvider","_FileSystemProviderBa","_super","options","_this","ensureDefined","_endpointUrl","endpointUrl","_hasSubDirsGetter","compileGetter","hasSubDirectoriesExpr","parentDir","_this2","pathInfo","getFullPathInfo","_getEntriesByPath","then","_convertDataObjectsToFileItems","item","name","_executeRequest","isDirectory","done","isRoot","hasSubDirectories","items","_this3","map","destinationDirectory","_this4","sourcePathInfo","sourceIsDirectory","destinationPathInfo","destinationFolder","_this5","fileData","chunksInfo","chunkIndex","customData","uploadId","args","chunkMetadata","JSON","stringify","UploadId","FileName","Index","TotalCount","chunkCount","FileSize","size","formData","FormData","append","chunkBlob","deferred","Deferred","sendRequest","url","method","dataType","data","upload","onprogress","noop","onloadstart","onabort","cache","success","reject","resolve","fail","promise","_getDownloadArgs","$form","css","display","attr","action","forEach","type","appendTo","trigger","setTimeout","remove","command","responseType","pathInfoList","argsStr","it","relativeName","_getEndpointUrl","queryString","_getQueryString","separator","indexOf","params","pairs","keys","Array","isArray","_processQueryStringArrayParam","pair","_getQueryStringPair","push","join","array","_this6","each","_","encodeURIComponent","dataObj","hasSubDirs","keyExpr","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (file_management/remote_provider.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _ajax = _interopRequireDefault(require(\"../core/utils/ajax\"));\r\nvar _common = require(\"../core/utils/common\");\r\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\r\nvar _window = require(\"../core/utils/window\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _provider_base = _interopRequireDefault(require(\"./provider_base\"));\r\nvar _data = require(\"../core/utils/data\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar FILE_CHUNK_BLOB_NAME = \"chunk\";\r\nvar RemoteFileSystemProvider = function(_FileSystemProviderBa) {\r\n    _inherits(RemoteFileSystemProvider, _FileSystemProviderBa);\r\n    var _super = _createSuper(RemoteFileSystemProvider);\r\n\r\n    function RemoteFileSystemProvider(options) {\r\n        var _this;\r\n        _classCallCheck(this, RemoteFileSystemProvider);\r\n        options = (0, _common.ensureDefined)(options, {});\r\n        _this = _super.call(this, options);\r\n        _this._endpointUrl = options.endpointUrl;\r\n        _this._hasSubDirsGetter = (0, _data.compileGetter)(options.hasSubDirectoriesExpr || \"hasSubDirectories\");\r\n        return _this\r\n    }\r\n    _createClass(RemoteFileSystemProvider, [{\r\n        key: \"getItems\",\r\n        value: function(parentDir) {\r\n            var _this2 = this;\r\n            var pathInfo = parentDir.getFullPathInfo();\r\n            return this._getEntriesByPath(pathInfo).then(function(result) {\r\n                return _this2._convertDataObjectsToFileItems(result.result, pathInfo)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"renameItem\",\r\n        value: function(item, name) {\r\n            return this._executeRequest(\"Rename\", {\r\n                pathInfo: item.getFullPathInfo(),\r\n                isDirectory: item.isDirectory,\r\n                name: name\r\n            })\r\n        }\r\n    }, {\r\n        key: \"createDirectory\",\r\n        value: function(parentDir, name) {\r\n            return this._executeRequest(\"CreateDir\", {\r\n                pathInfo: parentDir.getFullPathInfo(),\r\n                name: name\r\n            }).done(function() {\r\n                if (parentDir && !parentDir.isRoot()) {\r\n                    parentDir.hasSubDirectories = true\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"deleteItems\",\r\n        value: function(items) {\r\n            var _this3 = this;\r\n            return items.map(function(item) {\r\n                return _this3._executeRequest(\"Remove\", {\r\n                    pathInfo: item.getFullPathInfo(),\r\n                    isDirectory: item.isDirectory\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"moveItems\",\r\n        value: function(items, destinationDirectory) {\r\n            var _this4 = this;\r\n            return items.map(function(item) {\r\n                return _this4._executeRequest(\"Move\", {\r\n                    sourcePathInfo: item.getFullPathInfo(),\r\n                    sourceIsDirectory: item.isDirectory,\r\n                    destinationPathInfo: destinationDirectory.getFullPathInfo()\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"copyItems\",\r\n        value: function(items, destinationFolder) {\r\n            var _this5 = this;\r\n            return items.map(function(item) {\r\n                return _this5._executeRequest(\"Copy\", {\r\n                    sourcePathInfo: item.getFullPathInfo(),\r\n                    sourceIsDirectory: item.isDirectory,\r\n                    destinationPathInfo: destinationFolder.getFullPathInfo()\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"uploadFileChunk\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {\r\n            if (0 === chunksInfo.chunkIndex) {\r\n                chunksInfo.customData.uploadId = new _guid.default\r\n            }\r\n            var args = {\r\n                destinationPathInfo: destinationDirectory.getFullPathInfo(),\r\n                chunkMetadata: JSON.stringify({\r\n                    UploadId: chunksInfo.customData.uploadId,\r\n                    FileName: fileData.name,\r\n                    Index: chunksInfo.chunkIndex,\r\n                    TotalCount: chunksInfo.chunkCount,\r\n                    FileSize: fileData.size\r\n                })\r\n            };\r\n            var formData = new window.FormData;\r\n            formData.append(FILE_CHUNK_BLOB_NAME, chunksInfo.chunkBlob);\r\n            formData.append(\"arguments\", JSON.stringify(args));\r\n            formData.append(\"command\", \"UploadChunk\");\r\n            var deferred = new _deferred.Deferred;\r\n            _ajax.default.sendRequest({\r\n                url: this._endpointUrl,\r\n                method: \"POST\",\r\n                dataType: \"json\",\r\n                data: formData,\r\n                upload: {\r\n                    onprogress: _common.noop,\r\n                    onloadstart: _common.noop,\r\n                    onabort: _common.noop\r\n                },\r\n                cache: false\r\n            }).done(function(result) {\r\n                !result.success && deferred.reject(result) || deferred.resolve()\r\n            }).fail(deferred.reject);\r\n            return deferred.promise()\r\n        }\r\n    }, {\r\n        key: \"abortFileUpload\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {\r\n            return this._executeRequest(\"AbortUpload\", {\r\n                uploadId: chunksInfo.customData.uploadId\r\n            })\r\n        }\r\n    }, {\r\n        key: \"downloadItems\",\r\n        value: function(items) {\r\n            var args = this._getDownloadArgs(items);\r\n            var $form = (0, _renderer.default)(\"<form>\").css({\r\n                display: \"none\"\r\n            }).attr({\r\n                method: \"post\",\r\n                action: args.url\r\n            });\r\n            [\"command\", \"arguments\"].forEach(function(name) {\r\n                (0, _renderer.default)(\"<input>\").attr({\r\n                    type: \"hidden\",\r\n                    name: name,\r\n                    value: args[name]\r\n                }).appendTo($form)\r\n            });\r\n            $form.appendTo(\"body\");\r\n            _events_engine.default.trigger($form, \"submit\");\r\n            setTimeout(function() {\r\n                return $form.remove()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"getItemsContent\",\r\n        value: function(items) {\r\n            var args = this._getDownloadArgs(items);\r\n            var formData = new window.FormData;\r\n            formData.append(\"command\", args.command);\r\n            formData.append(\"arguments\", args.arguments);\r\n            return _ajax.default.sendRequest({\r\n                url: args.url,\r\n                method: \"POST\",\r\n                responseType: \"arraybuffer\",\r\n                data: formData,\r\n                upload: {\r\n                    onprogress: _common.noop,\r\n                    onloadstart: _common.noop,\r\n                    onabort: _common.noop\r\n                },\r\n                cache: false\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getDownloadArgs\",\r\n        value: function(items) {\r\n            var pathInfoList = items.map(function(item) {\r\n                return item.getFullPathInfo()\r\n            });\r\n            var args = {\r\n                pathInfoList: pathInfoList\r\n            };\r\n            var argsStr = JSON.stringify(args);\r\n            return {\r\n                url: this._endpointUrl,\r\n                arguments: argsStr,\r\n                command: \"Download\"\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getItemsIds\",\r\n        value: function(items) {\r\n            return items.map(function(it) {\r\n                return it.relativeName\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getEntriesByPath\",\r\n        value: function(pathInfo) {\r\n            return this._executeRequest(\"GetDirContents\", {\r\n                pathInfo: pathInfo\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_executeRequest\",\r\n        value: function(command, args) {\r\n            var method = \"GetDirContents\" === command ? \"GET\" : \"POST\";\r\n            var deferred = new _deferred.Deferred;\r\n            _ajax.default.sendRequest({\r\n                url: this._getEndpointUrl(command, args),\r\n                method: method,\r\n                dataType: \"json\",\r\n                cache: false\r\n            }).then(function(result) {\r\n                !result.success && deferred.reject(result) || deferred.resolve(result)\r\n            }, function(e) {\r\n                return deferred.reject(e)\r\n            });\r\n            return deferred.promise()\r\n        }\r\n    }, {\r\n        key: \"_getEndpointUrl\",\r\n        value: function(command, args) {\r\n            var queryString = this._getQueryString({\r\n                command: command,\r\n                arguments: JSON.stringify(args)\r\n            });\r\n            var separator = this._endpointUrl && this._endpointUrl.indexOf(\"?\") > 0 ? \"&\" : \"?\";\r\n            return this._endpointUrl + separator + queryString\r\n        }\r\n    }, {\r\n        key: \"_getQueryString\",\r\n        value: function(params) {\r\n            var pairs = [];\r\n            var keys = Object.keys(params);\r\n            for (var i = 0; i < keys.length; i++) {\r\n                var key = keys[i];\r\n                var value = params[key];\r\n                if (void 0 === value) {\r\n                    continue\r\n                }\r\n                if (null === value) {\r\n                    value = \"\"\r\n                }\r\n                if (Array.isArray(value)) {\r\n                    this._processQueryStringArrayParam(key, value, pairs)\r\n                } else {\r\n                    var pair = this._getQueryStringPair(key, value);\r\n                    pairs.push(pair)\r\n                }\r\n            }\r\n            return pairs.join(\"&\")\r\n        }\r\n    }, {\r\n        key: \"_processQueryStringArrayParam\",\r\n        value: function(key, array, pairs) {\r\n            var _this6 = this;\r\n            (0, _iterator.each)(array, function(_, item) {\r\n                var pair = _this6._getQueryStringPair(key, item);\r\n                pairs.push(pair)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getQueryStringPair\",\r\n        value: function(key, value) {\r\n            return encodeURIComponent(key) + \"=\" + encodeURIComponent(value)\r\n        }\r\n    }, {\r\n        key: \"_hasSubDirs\",\r\n        value: function(dataObj) {\r\n            var hasSubDirs = this._hasSubDirsGetter(dataObj);\r\n            return \"boolean\" === typeof hasSubDirs ? hasSubDirs : true\r\n        }\r\n    }, {\r\n        key: \"_getKeyExpr\",\r\n        value: function(options) {\r\n            return options.keyExpr || \"key\"\r\n        }\r\n    }]);\r\n    return RemoteFileSystemProvider\r\n}(_provider_base.default);\r\nvar _default = RemoteFileSystemProvider;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}