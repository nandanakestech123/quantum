{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\quantumCode20082022\\\\src\\\\component\\\\Admin\\\\Cart\\\\cart\\\\PrepaidPopup.js\";\nimport React, { Component } from \"react\";\nimport { NormalInput, NormalButton } from \"component/common\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { getCommonApi, commonUpdateApi, commonPatchApi } from \"redux/actions/common\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { Toast } from \"service/toast\";\nimport \"./style.scss\";\nimport { withTranslation } from \"react-i18next\";\nexport class PrepaidPopupClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      id: null,\n      itemdesc: \"\",\n      quantity: 1,\n      price: \"\",\n      trans_amt: \"\",\n      deposit: \"\",\n      prepaid_value: \"\",\n      isopen_prepaid: false,\n      bonus: \"\"\n    };\n\n    this.componentWillMount = () => {\n      this.validator = new SimpleReactValidator({\n        element: message => /*#__PURE__*/React.createElement(\"span\", {\n          className: \"error-message text-danger validNo fs14\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 9\n          }\n        }, message),\n        autoForceUpdate: this\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.getPrepaidInfo();\n    };\n\n    this.handleClear = () => {\n      this.setState({\n        id: null,\n        itemdesc: \"\",\n        quantity: 1,\n        price: \"\",\n        trans_amt: \"\",\n        deposit: \"\",\n        prepaid_value: \"\",\n        isopen_prepaid: false,\n        bonus: \"\"\n      });\n    };\n\n    this.getPrepaidInfo = () => {\n      let {\n        id,\n        itemdesc,\n        quantity,\n        price,\n        trans_amt,\n        deposit,\n        prepaid_value,\n        isopen_prepaid,\n        bonus\n      } = this.state;\n      this.props.getCommonApi(`cartprepaid/${this.props.cartId}/`).then(key => {\n        let {\n          status,\n          data\n        } = key;\n        console.log(data, \"cartprepaidgetdata\");\n\n        if (status == \"200\") {\n          if (data) {\n            id = data.id;\n            itemdesc = data.itemdesc;\n            quantity = data.quantity;\n            price = data.price;\n            trans_amt = Number(data.price - data.deposit);\n            deposit = data.deposit;\n            prepaid_value = data.prepaid_value;\n            isopen_prepaid = data.isopen_prepaid;\n            bonus = Number(data.prepaid_value - data.price);\n            this.setState({\n              id,\n              itemdesc,\n              quantity,\n              price,\n              trans_amt,\n              deposit,\n              prepaid_value,\n              isopen_prepaid,\n              bonus\n            });\n          }\n        }\n      });\n    };\n\n    this.handleChange = async ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleApply = async () => {\n      let {\n        discountFields,\n        unit_price_after_discount,\n        discount_price_txt,\n        is_percentage\n      } = this.state;\n\n      if (Number(discount_price_txt) > 0) {\n        if (Number(is_percentage) == 1) {\n          if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\n            if (Number(discountFields.disc_reason) != 182 || Number(discountFields.disc_reason) == 182 && discountFields.discreason_txt != \"\") {\n              discountFields[\"discount_amt\"] = Number(Number(unit_price_after_discount).toFixed(2) / 100 * Number(discount_price_txt)).toFixed(2);\n              discountFields[\"discount\"] = Number(Number(discountFields[\"discount_amt\"]).toFixed(2) / Number(unit_price_after_discount).toFixed(2) * 100).toFixed(2);\n              await this.setState({\n                discountFields\n              });\n            } else {\n              Toast({\n                type: \"error\",\n                message: \"Please Enter Discount Reason Text\"\n              });\n              return false;\n            }\n          } else {\n            Toast({\n              type: \"error\",\n              message: \"Please select Discount Reason\"\n            });\n            return false;\n          }\n        } else if (Number(is_percentage) == 2) {\n          if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\n            if (Number(discountFields.disc_reason) != 182 || Number(discountFields.disc_reason) == 182 && discountFields.discreason_txt != \"\") {\n              discountFields[\"discount_amt\"] = Number(discount_price_txt).toFixed(2);\n              discountFields[\"discount\"] = null;\n              await this.setState({\n                discountFields\n              });\n            } else {\n              Toast({\n                type: \"error\",\n                message: \"Please Enter Discount Reason Text\"\n              });\n              return false;\n            }\n          } else {\n            Toast({\n              type: \"error\",\n              message: \"Please select Discount Reason\"\n            });\n            return false;\n          }\n        } else {\n          Toast({\n            type: \"error\",\n            message: \"Please select Discount Type\"\n          });\n          return false;\n        }\n\n        let body = {\n          discount: Number(discountFields.discount),\n          discount_amt: Number(discountFields.discount_amt),\n          disc_reason: Number(discountFields.disc_reason),\n          discreason_txt: discountFields.discreason_txt\n        };\n        this.props.commonUpdateApi(`itemcart/${this.props.cartId}/?disc_add=1&disc_reset=0`, body).then(key => {\n          this.handleClear();\n          this.getDiscountInfo();\n          this.getDiscountReasons();\n        });\n      } else {\n        Toast({\n          type: \"error\",\n          message: \"Discount should be greater than zero\"\n        });\n        return false;\n      }\n    };\n\n    this.handleSubmit = () => {\n      let {\n        id,\n        price,\n        prepaid_value,\n        deposit\n      } = this.state;\n\n      if (Number(deposit) > Number(price)) {\n        Toast({\n          type: \"error\",\n          message: \"Deposit amount should be less than or equal to price\"\n        });\n        return;\n      } else {\n        let body = {};\n\n        if (this.validator.allValid()) {\n          body = {\n            id: id,\n            price: price,\n            prepaid_value: prepaid_value,\n            deposit: deposit\n          };\n          this.props.commonPatchApi(`cartprepaid/${this.props.cartId}/`, body).then(key => {\n            let {\n              status\n            } = key;\n            console.log(key, \"response for submit\");\n\n            if (status == \"200\") {\n              this.props.handleModal();\n            }\n          });\n        } else {\n          this.validator.showMessages();\n        }\n      }\n    };\n\n    this.handleDepositAmountChange = () => {\n      let {\n        price,\n        deposit,\n        trans_amt\n      } = this.state;\n      trans_amt = Number(price) - Number(deposit);\n      this.setState({\n        trans_amt\n      });\n    };\n\n    this.handleAmountChange = () => {\n      let {\n        price,\n        bonus,\n        prepaid_value,\n        deposit,\n        trans_amt\n      } = this.state;\n      prepaid_value = Number(price) + Number(bonus);\n      deposit = price;\n      trans_amt = Number(price) - Number(deposit);\n      this.setState({\n        prepaid_value,\n        deposit,\n        trans_amt\n      });\n    };\n\n    this.handlePrepaidValueChange = () => {\n      let {\n        price,\n        bonus,\n        prepaid_value,\n        deposit,\n        trans_amt\n      } = this.state;\n      price = Number(prepaid_value) - Number(bonus);\n      deposit = price;\n      trans_amt = Number(price) - Number(deposit);\n      this.setState({\n        price,\n        deposit,\n        trans_amt\n      });\n    };\n  }\n\n  render() {\n    let {\n      id,\n      itemdesc,\n      quantity,\n      price,\n      trans_amt,\n      deposit,\n      prepaid_value,\n      isopen_prepaid,\n      bonus\n    } = this.state;\n    let {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-9 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"text-secondary fs-19 fw-500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 15\n      }\n    }, t(\"Open\"), \" \", t(\"Prepaid\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NormalButton, {\n      mainbg: false,\n      className: \"col-12 fs-15 submit-btn\",\n      label: \"Submit\",\n      onClick: () => this.handleSubmit(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row pl-5 pr-5 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }\n    }, t(\"Name\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: itemdesc,\n      name: \"itemdesc\",\n      onChange: this.handleChange,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }\n    }, \"Qty\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: quantity,\n      name: \"quantity\",\n      onChange: () => {},\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }\n    }, t(\"Amount\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: price,\n      type: \"number\",\n      name: \"price\",\n      onChange: this.handleChange,\n      onBlur: this.handleAmountChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 19\n      }\n    })), this.validator.message(\"price\", price, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }\n    }, \"Bonus\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: bonus,\n      type: \"number\",\n      name: \"bonus\",\n      onChange: this.handleChange,\n      onBlur: this.handleAmountChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }\n    }, t(\"Value\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: prepaid_value,\n      type: \"number\",\n      name: \"prepaid_value\",\n      onChange: this.handleChange,\n      onBlur: this.handlePrepaidValueChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 19\n      }\n    })), this.validator.message(\"prepaid value\", prepaid_value, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12 mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 17\n      }\n    }, t(\"Deposit\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: deposit,\n      type: \"number\",\n      name: \"deposit\",\n      onChange: this.handleChange,\n      onBlur: this.handleDepositAmountChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 19\n      }\n    })), this.validator.message(\"deposit\", deposit, \"required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 col-12 mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-left text-black common-label-text fs-17 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 17\n      }\n    }, t(\"Outstanding\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NormalInput, {\n      placeholder: \"Enter here\",\n      value: trans_amt,\n      type: \"number\",\n      name: \"trans_amt\",\n      onChange: () => {},\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  basicApptDetail: state.appointment.basicApptDetail\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getCommonApi,\n    commonUpdateApi,\n    commonPatchApi\n  }, dispatch);\n};\n\nexport const PrepaidPopup = withTranslation()(connect(mapStateToProps, mapDispatchToProps)(PrepaidPopupClass));","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/src/component/Admin/Cart/cart/PrepaidPopup.js"],"names":["React","Component","NormalInput","NormalButton","connect","bindActionCreators","getCommonApi","commonUpdateApi","commonPatchApi","SimpleReactValidator","Toast","withTranslation","PrepaidPopupClass","state","id","itemdesc","quantity","price","trans_amt","deposit","prepaid_value","isopen_prepaid","bonus","componentWillMount","validator","element","message","autoForceUpdate","componentDidMount","getPrepaidInfo","handleClear","setState","props","cartId","then","key","status","data","console","log","Number","handleChange","target","value","name","handleApply","discountFields","unit_price_after_discount","discount_price_txt","is_percentage","disc_reason","discreason_txt","toFixed","type","body","discount","discount_amt","getDiscountInfo","getDiscountReasons","handleSubmit","allValid","handleModal","showMessages","handleDepositAmountChange","handleAmountChange","handlePrepaidValueChange","render","t","mapStateToProps","basicApptDetail","appointment","mapDispatchToProps","dispatch","PrepaidPopup"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NormalInput, NormalButton } from \"component/common\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport {\r\n  getCommonApi,\r\n  commonUpdateApi,\r\n  commonPatchApi,\r\n} from \"redux/actions/common\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nexport class PrepaidPopupClass extends Component {\r\n  state = {\r\n    id: null,\r\n    itemdesc: \"\",\r\n    quantity: 1,\r\n    price: \"\",\r\n    trans_amt: \"\",\r\n    deposit: \"\",\r\n    prepaid_value: \"\",\r\n    isopen_prepaid: false,\r\n    bonus: \"\",\r\n  };\r\n  componentWillMount = () => {\r\n    this.validator = new SimpleReactValidator({\r\n      element: message => (\r\n        <span className=\"error-message text-danger validNo fs14\">\r\n          {message}\r\n        </span>\r\n      ),\r\n      autoForceUpdate: this,\r\n    });\r\n  };\r\n  componentDidMount = () => {\r\n    this.getPrepaidInfo();\r\n  };\r\n  handleClear = () => {\r\n    this.setState({\r\n      id: null,\r\n      itemdesc: \"\",\r\n      quantity: 1,\r\n      price: \"\",\r\n      trans_amt: \"\",\r\n      deposit: \"\",\r\n      prepaid_value: \"\",\r\n      isopen_prepaid: false,\r\n      bonus: \"\",\r\n    });\r\n  };\r\n\r\n  getPrepaidInfo = () => {\r\n    let {\r\n      id,\r\n      itemdesc,\r\n      quantity,\r\n      price,\r\n      trans_amt,\r\n      deposit,\r\n      prepaid_value,\r\n      isopen_prepaid,\r\n      bonus,\r\n    } = this.state;\r\n    this.props.getCommonApi(`cartprepaid/${this.props.cartId}/`).then(key => {\r\n      let { status, data } = key;\r\n      console.log(data, \"cartprepaidgetdata\");\r\n      if (status == \"200\") {\r\n        if (data) {\r\n          id = data.id;\r\n          itemdesc = data.itemdesc;\r\n          quantity = data.quantity;\r\n          price = data.price;\r\n          trans_amt = Number(data.price - data.deposit);\r\n          deposit = data.deposit;\r\n          prepaid_value = data.prepaid_value;\r\n          isopen_prepaid = data.isopen_prepaid;\r\n          bonus = Number(data.prepaid_value - data.price);\r\n          this.setState({\r\n            id,\r\n            itemdesc,\r\n            quantity,\r\n            price,\r\n            trans_amt,\r\n            deposit,\r\n            prepaid_value,\r\n            isopen_prepaid,\r\n            bonus,\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  handleChange = async ({ target: { value, name } }) => {\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleApply = async () => {\r\n    let {\r\n      discountFields,\r\n      unit_price_after_discount,\r\n      discount_price_txt,\r\n      is_percentage,\r\n    } = this.state;\r\n    if (Number(discount_price_txt) > 0) {\r\n      if (Number(is_percentage) == 1) {\r\n        if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\r\n          if (\r\n            Number(discountFields.disc_reason) != 182 ||\r\n            (Number(discountFields.disc_reason) == 182 &&\r\n              discountFields.discreason_txt != \"\")\r\n          ) {\r\n            discountFields[\"discount_amt\"] = Number(\r\n              (Number(unit_price_after_discount).toFixed(2) / 100) *\r\n                Number(discount_price_txt)\r\n            ).toFixed(2);\r\n\r\n            discountFields[\"discount\"] = Number(\r\n              (Number(discountFields[\"discount_amt\"]).toFixed(2) /\r\n                Number(unit_price_after_discount).toFixed(2)) *\r\n                100\r\n            ).toFixed(2);\r\n            await this.setState({ discountFields });\r\n          } else {\r\n            Toast({\r\n              type: \"error\",\r\n              message: \"Please Enter Discount Reason Text\",\r\n            });\r\n            return false;\r\n          }\r\n        } else {\r\n          Toast({\r\n            type: \"error\",\r\n            message: \"Please select Discount Reason\",\r\n          });\r\n          return false;\r\n        }\r\n      } else if (Number(is_percentage) == 2) {\r\n        if (discountFields.disc_reason && discountFields.disc_reason != \"\") {\r\n          if (\r\n            Number(discountFields.disc_reason) != 182 ||\r\n            (Number(discountFields.disc_reason) == 182 &&\r\n              discountFields.discreason_txt != \"\")\r\n          ) {\r\n            discountFields[\"discount_amt\"] =\r\n              Number(discount_price_txt).toFixed(2);\r\n            discountFields[\"discount\"] = null;\r\n            await this.setState({ discountFields });\r\n          } else {\r\n            Toast({\r\n              type: \"error\",\r\n              message: \"Please Enter Discount Reason Text\",\r\n            });\r\n            return false;\r\n          }\r\n        } else {\r\n          Toast({\r\n            type: \"error\",\r\n            message: \"Please select Discount Reason\",\r\n          });\r\n          return false;\r\n        }\r\n      } else {\r\n        Toast({\r\n          type: \"error\",\r\n          message: \"Please select Discount Type\",\r\n        });\r\n        return false;\r\n      }\r\n      let body = {\r\n        discount: Number(discountFields.discount),\r\n        discount_amt: Number(discountFields.discount_amt),\r\n        disc_reason: Number(discountFields.disc_reason),\r\n        discreason_txt: discountFields.discreason_txt,\r\n      };\r\n      this.props\r\n        .commonUpdateApi(\r\n          `itemcart/${this.props.cartId}/?disc_add=1&disc_reset=0`,\r\n          body\r\n        )\r\n        .then(key => {\r\n          this.handleClear();\r\n          this.getDiscountInfo();\r\n          this.getDiscountReasons();\r\n        });\r\n    } else {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Discount should be greater than zero\",\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    let { id, price, prepaid_value, deposit } = this.state;\r\n    if (Number(deposit) > Number(price)) {\r\n      Toast({\r\n        type: \"error\",\r\n        message: \"Deposit amount should be less than or equal to price\",\r\n      });\r\n      return;\r\n    } else {\r\n      let body = {};\r\n      if (this.validator.allValid()) {\r\n        body = {\r\n          id: id,\r\n          price: price,\r\n          prepaid_value: prepaid_value,\r\n          deposit: deposit,\r\n        };\r\n        this.props\r\n          .commonPatchApi(\r\n            `cartprepaid/${this.props.cartId}/`,\r\n\r\n            body\r\n          )\r\n          .then(key => {\r\n            let { status } = key;\r\n            console.log(key, \"response for submit\");\r\n            if (status == \"200\") {\r\n              this.props.handleModal();\r\n            }\r\n          });\r\n      } else {\r\n        this.validator.showMessages();\r\n      }\r\n    }\r\n  };\r\n\r\n  handleDepositAmountChange = () => {\r\n    let { price, deposit, trans_amt } = this.state;\r\n    trans_amt = Number(price) - Number(deposit);\r\n    this.setState({\r\n      trans_amt,\r\n    });\r\n  };\r\n\r\n  handleAmountChange = () => {\r\n    let { price, bonus, prepaid_value, deposit, trans_amt } = this.state;\r\n    prepaid_value = Number(price) + Number(bonus);\r\n    deposit = price;\r\n    trans_amt = Number(price) - Number(deposit);\r\n    this.setState({\r\n      prepaid_value,\r\n      deposit,\r\n      trans_amt,\r\n    });\r\n  };\r\n  handlePrepaidValueChange = () => {\r\n    let { price, bonus, prepaid_value, deposit, trans_amt } = this.state;\r\n    price = Number(prepaid_value) - Number(bonus);\r\n    deposit = price;\r\n    trans_amt = Number(price) - Number(deposit);\r\n    this.setState({\r\n      price,\r\n      deposit,\r\n      trans_amt,\r\n    });\r\n  };\r\n  render() {\r\n    let {\r\n      id,\r\n      itemdesc,\r\n      quantity,\r\n      price,\r\n      trans_amt,\r\n      deposit,\r\n      prepaid_value,\r\n      isopen_prepaid,\r\n      bonus,\r\n    } = this.state;\r\n    let {t} = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"container-fluid mb-4\">\r\n          <div className=\"row pl-3\">\r\n            <div className=\"col-md-9 col-12\">\r\n              <h6 className=\"text-secondary fs-19 fw-500\">{t(\"Open\")} {t(\"Prepaid\")}</h6>\r\n            </div>\r\n            <div className=\"col-md-2 col-12\">\r\n              <NormalButton\r\n                mainbg={false}  \r\n                className=\"col-12 fs-15 submit-btn\"\r\n                label=\"Submit\"\r\n                onClick={() => this.handleSubmit()}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row pl-5 pr-5 mt-4\">\r\n            <div className=\"row mb-3\">\r\n              <div className=\"col-md-4 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Name\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={itemdesc}\r\n                    name=\"itemdesc\"\r\n                    onChange={this.handleChange}\r\n                    disabled\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-1 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  Qty\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={quantity}\r\n                    name=\"quantity\"\r\n                    onChange={() => {}}\r\n                    disabled\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Amount\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={price}\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    onChange={this.handleChange}\r\n                    onBlur={this.handleAmountChange}\r\n                  />\r\n                </div>\r\n                {this.validator.message(\"price\", price, \"required\")}\r\n              </div>\r\n              <div className=\"col-md-2 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  Bonus\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={bonus}\r\n                    type=\"number\"\r\n                    name=\"bonus\"\r\n                    onChange={this.handleChange}\r\n                    onBlur={this.handleAmountChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-2 col-12\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                 { t(\"Value\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={prepaid_value}\r\n                    type=\"number\"\r\n                    name=\"prepaid_value\"\r\n                    onChange={this.handleChange}\r\n                    onBlur={this.handlePrepaidValueChange}\r\n                  />\r\n                </div>\r\n                {this.validator.message(\r\n                  \"prepaid value\",\r\n                  prepaid_value,\r\n                  \"required\"\r\n                )}\r\n              </div>\r\n              <div className=\"col-md-2 col-12 mt-2\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                  {t(\"Deposit\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={deposit}\r\n                    type=\"number\"\r\n                    name=\"deposit\"\r\n                    onChange={this.handleChange}\r\n                    onBlur={this.handleDepositAmountChange}\r\n                  />\r\n                </div>\r\n                {this.validator.message(\"deposit\", deposit, \"required\")}\r\n              </div>\r\n              <div className=\"col-md-2 col-12 mt-2\">\r\n                <label className=\"text-left text-black common-label-text fs-17 pb-2\">\r\n                 { t(\"Outstanding\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalInput\r\n                    placeholder=\"Enter here\"\r\n                    value={trans_amt}\r\n                    type=\"number\"\r\n                    name=\"trans_amt\"\r\n                    onChange={() => {}}\r\n                    disabled\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  basicApptDetail: state.appointment.basicApptDetail,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonUpdateApi,\r\n      commonPatchApi,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\nexport const PrepaidPopup = withTranslation() (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PrepaidPopupClass));\r\n"]},"metadata":{},"sourceType":"module"}