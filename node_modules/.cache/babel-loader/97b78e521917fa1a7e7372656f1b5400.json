{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Toast}from\"service/toast\";import\"./style.scss\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getCommonApi,commonUpdateApi}from\"redux/actions/common\";import{NormalButton,NormalDate,TableWrapper,InputSearch,NormalMultiSelect,NormalCheckbox,NormalSelect}from\"component/common\";import{dateFormat}from\"service/helperFunctions\";import{withTranslation}from\"react-i18next\";import{NormalInput,NormalDateTime}from\"component/common\";import{Link}from\"react-router-dom\";import _ from\"lodash\";import updateBtn from\"assets/images/edit1.png\";import deleteBtn from\"assets/images/delete1.png\";import closeBtn from\"assets/images/close.png\";import saveBtn from\"assets/images/save.png\";import{history}from\"helpers\";import{getTokenDetails}from\"redux/actions/auth\";export var StockSettingsClass=/*#__PURE__*/function(_React$Component){_inherits(StockSettingsClass,_React$Component);var _super=_createSuper(StockSettingsClass);function StockSettingsClass(){var _this;_classCallCheck(this,StockSettingsClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={headerDetails:[// { label: \"Code\" },\n{label:\"Name\"},{label:\"Authorization\"}],formFields:{user:\"\"},authList:[],authUserList:[],userOption:[],storedItemList:[],pageMeta:{},siteList:[],hqonly:false,search:\"\",active:false,currentIndex:-1,page:1,// limit: 10,\nlimit:4,isOpenvoidCheckout:false,// isLoading: false,\n// is_loading: false,\nisMounted:true// salesCollectionHeader: [\n//   { label: \"Sales Collection\" },\n//   { label: \"Before Tax\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// nonSalesCollectionHeader: [\n//   { label: \"Non Sales Collection\" },\n//   { label: \"Amount\" },\n//   { label: \"Qty\" },\n// ],\n// deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\n// salesTransactionHeader: [\n//   { label: \"Sales Transaction\" },\n//   { label: \"Amount\" },\n//   { label: \"Paid\" },\n//   { label: \"Outstanding\" },\n// ],\n// ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\n// TreatmentDoneHeader: [\n//   { label: \"Customer\" },\n//   { label: \"Customer Reference\" },\n//   { label: \"Treatment Done\" },\n//   { label: \"Description\" },\n//   { label: \"Staff\" },\n//   { label: \"Amount\" },\n// DayDate: new Date(),\n// runDayEnd: false,\n// reportDate: \"\",\n// sales_collec: null,\n// sales_trasac: null,\n// ar_trasac: null,\n// treatment_done: null,\n// dept_sales: null,\n};_this.updateState=function(data){if(_this.state.isMounted)_this.setState(data);};_this.getSite=function(){// this.updateState({ isLoading: true });\nvar _this$state=_this.state,siteList=_this$state.siteList,hqonly=_this$state.hqonly,page=_this$state.page,limit=_this$state.limit,search=_this$state.search;// let { item_desc } = formField;\n_this.props.getCommonApi(\"sitecode\").then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var _iterator,_step,item;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(res,\"dsfdfaafg\");_iterator=_createForOfIteratorHelper(res.data);try{for(_iterator.s();!(_step=_iterator.n()).done;){item=_step.value;if(item.ItemSite_Code==_this.props.tokenDetail.site_code){siteList=item;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({siteList:siteList});console.log(\"siteList\",siteList);if(siteList.hq_only==1){hqonly=true;}_this.setState({hqonly:hqonly});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.getDetails=function(){// this.updateState({ isLoading: true });\nvar _this$state2=_this.state,authList=_this$state2.authList,userOption=_this$state2.userOption,page=_this$state2.page,limit=_this$state2.limit,search=_this$state2.search;// let { item_desc } = formField;\n_this.props.getCommonApi(\"authorise\").then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){var _iterator2,_step2,key;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(res,\"dsfdfaafg\");_context2.next=3;return _this.setState({authList:[]});case 3:_iterator2=_createForOfIteratorHelper(res.data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){key=_step2.value;userOption.push({value:key.PW_ID,label:key.PW_UserLogin,code:key.AllDropdown_Desc,active:key.Active});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}console.log(\"userOption\",userOption);_this.setState({userOption:userOption});authList=res.data;// pageMeta = res.data.meta.pagination;\n// pageMeta = res.data.pagination;\n// pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\n// this.setState({ authList, pageMeta });\n// this.setState({ authList });\nconsole.log(\"res.data\",res.data);console.log(\"authList\",authList);// console.log('pageMeta',pageMeta)\n_this.updateState({authList:authList// pageMeta,\n// isLoading: false,\n});case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());};_this.handlePagination=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pageNo){var page;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:page=_this.state.page;page=pageNo.page;_context3.next=4;return _this.setState({page:page});case 4:_this.getDetails();case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.handlesearch=function(event){// event.persist();\nconsole.log(event.target.value);var search=_this.state.search;search=event.target.value;_this.setState({search:search});if(!_this.debouncedFn){_this.debouncedFn=_.debounce(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.getDetails({});case 1:case\"end\":return _context4.stop();}}},_callee4);})),500);}_this.debouncedFn();};_this.handleClick=function(key){if(!_this.state.active){document.addEventListener(\"click\",_this.handleOutsideClick,false);}else{document.removeEventListener(\"click\",_this.handleOutsideClick,false);}_this.setState(function(prevState){return{active:!prevState.active,currentIndex:key};});};_this.handleOutsideClick=function(e){if(_this.node!=null){if(_this.node.contains(e.target)){return;}}_this.handleClick();};_this.handleChange=function(_ref5){var _ref5$target=_ref5.target,value=_ref5$target.value,name=_ref5$target.name;var formFields=Object.assign({},_this.state.formFields);var _this$state3=_this.state,authUserList=_this$state3.authUserList,authList=_this$state3.authList;formFields[name]=value;console.log(\"value\",value);console.log(\"name\",name);var _iterator3=_createForOfIteratorHelper(authList),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var userList=_step3.value;if(userList.PW_ID==value){authUserList=userList;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}authUserList=[{id:authUserList.PW_ID,name:\"Purchase Order(PO)\",auth:authUserList.POaccess==1?true:false},{id:authUserList.PW_ID,name:\"Approved PO\",auth:authUserList.POapprovalaccess==1?true:false},{id:authUserList.PW_ID,name:\"Delivery Order(DO)\",auth:authUserList.DOaccess==1?true:false},{id:authUserList.PW_ID,name:\"Goods Receive Note\",auth:authUserList.GRNaccess==1?true:false},{id:authUserList.PW_ID,name:\"Goods Return Note\",auth:authUserList.VGRNaccess==1?true:false},{id:authUserList.PW_ID,name:\"Stocks Adjustment\",auth:authUserList.ADJaccess==1?true:false},{id:authUserList.PW_ID,name:\"Transfer In\",auth:authUserList.TFRFaccess==1?true:false},{id:authUserList.PW_ID,name:\"Transfer Out\",auth:authUserList.TFRTaccess==1?true:false},{id:authUserList.PW_ID,name:\"StockTake\",auth:authUserList.PHYaccess==1?true:false},{id:authUserList.PW_ID,name:\"Stock Usage Memo\",auth:authUserList.SUMaccess==1?true:false},{id:authUserList.PW_ID,name:\"Stock Report\",auth:authUserList.Sheetaccess==1?true:false},{id:authUserList.PW_ID,name:\"PO HQ\",auth:authUserList.POhqaccess==1?true:false}];_this.updateState({formFields:formFields,authUserList:authUserList});_this.getDetails();// this.props.storeItemDetails(storedItemList, formFields)\n};_this.handleSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var authUserList,formData,formList,i,resAuth;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:authUserList=_this.state.authUserList;formData=new FormData();formList=[\"POaccess\",\"POapprovalaccess\",\"DOaccess\",\"GRNaccess\",\"VGRNaccess\",\"ADJaccess\",\"TFRFaccess\",\"TFRTaccess\",\"PHYaccess\",\"SUMaccess\",\"Sheetaccess\",\"POhqaccess\"];for(i=0;i<authUserList.length;i++){formData.append(formList[i],authUserList[i].auth==true?1:0);console.log(\"formList[i]\",formList[i]);console.log(\"authUserList[i].auth\",authUserList[i].auth);}console.log(\"formData\",formData);_context5.next=7;return _this.props.commonUpdateApi(\"authorise/\".concat(authUserList[0].id,\"/\"),formData);case 7:resAuth=_context5.sent;console.log(resAuth);// // this.handleAddressSubmit(resADJ);\n// this.handleItemDetailsSubmit(resADJ);\n// // if(statusValue == \"Void\"){\n// //   console.log(\"in void loop\")\n// //   await this.props.deletePO(`${this.props.match.params.id}/`)\n// // }\nhistory.push(\"/admin/inventory\");case 10:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleChangeCheckbox=function(name){var authUserList=_this.state.authUserList;var _iterator4=_createForOfIteratorHelper(authUserList),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var list=_step4.value;if(list.name==name){list.auth=!list.auth;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this.setState(authUserList);console.log(\"authUserList in handlechangecheckbox\",authUserList);};_this.handleSubmitSite=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _this$state4,hqonly,siteList,formData,resSite;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$state4=_this.state,hqonly=_this$state4.hqonly,siteList=_this$state4.siteList;formData=new FormData();formData.append(\"hq_only\",hqonly==true?1:0);console.log(\"formData\",formData);_context6.next=6;return _this.props.commonUpdateApi(\"sitecode/\".concat(siteList.ItemSite_ID,\"/\"),formData);case 6:resSite=_context6.sent;console.log(resSite);history.push(\"/admin/inventory\");case 9:case\"end\":return _context6.stop();}}},_callee6);}));_this.handleChangeCheckboxSite=function(){var hqonly=_this.state.hqonly;hqonly=!hqonly;_this.setState({hqonly:hqonly});console.log(\"hqonly handlechangecheckbox\",hqonly);};return _this;}_createClass(StockSettingsClass,[{key:\"componentWillMount\",value:function componentWillMount(){// this.autofillSaved();\n}},{key:\"componentDidMount\",value:function componentDidMount(){// let From = new Date();\n// let { formField } = this.state;\n// let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\n// formField[\"fromDate\"] = firstdayMonth;\n// this.setState({\n//   formField,\n// });\nthis.getDetails();this.getSite();}},{key:\"render\",value:function render(){var _this2=this;var _this$state5=this.state,headerDetails=_this$state5.headerDetails,hqonly=_this$state5.hqonly,pageMeta=_this$state5.pageMeta,authUserList=_this$state5.authUserList,userOption=_this$state5.userOption,formFields=_this$state5.formFields;var user=formFields.user;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",{className:\" stockSettings col-md-10 align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-5\"},/*#__PURE__*/React.createElement(\"p\",{className:\"label-head mt-4\"},t(\"Site Mode\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 \"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-12 pt-2 mb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mb-2\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-left w-100 text-black common-label-text mr-2\"},t(\"Simplified HQ Only Mode\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(NormalCheckbox,{type:\"checkbox\",checked:hqonly,name:\"site\",onChange:function onChange(){return _this2.handleChangeCheckboxSite();}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-12 mb-5\"},/*#__PURE__*/React.createElement(NormalButton,{buttonClass:\"mx-2\",mainbg:true,className:\"confirm\",label:\"save\",onClick:function onClick(){return _this2.handleSubmitSite();}}))));}}]);return StockSettingsClass;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{tokenDetail:state.authStore.tokenDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCommonApi:getCommonApi,commonUpdateApi:commonUpdateApi,getTokenDetails:getTokenDetails// getProject\n},dispatch);};export var StockSettings=withTranslation()(connect(mapStateToProps,mapDispatchToProps)(StockSettingsClass));","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Inventory/StockSettings/index.js"],"names":["React","Toast","connect","bindActionCreators","getCommonApi","commonUpdateApi","NormalButton","NormalDate","TableWrapper","InputSearch","NormalMultiSelect","NormalCheckbox","NormalSelect","dateFormat","withTranslation","NormalInput","NormalDateTime","Link","_","updateBtn","deleteBtn","closeBtn","saveBtn","history","getTokenDetails","StockSettingsClass","state","headerDetails","label","formFields","user","authList","authUserList","userOption","storedItemList","pageMeta","siteList","hqonly","search","active","currentIndex","page","limit","isOpenvoidCheckout","isMounted","updateState","data","setState","getSite","props","then","res","console","log","item","ItemSite_Code","tokenDetail","site_code","hq_only","getDetails","key","push","value","PW_ID","PW_UserLogin","code","AllDropdown_Desc","Active","handlePagination","pageNo","handlesearch","event","target","debouncedFn","debounce","handleClick","document","addEventListener","handleOutsideClick","removeEventListener","prevState","e","node","contains","handleChange","name","Object","assign","userList","id","auth","POaccess","POapprovalaccess","DOaccess","GRNaccess","VGRNaccess","ADJaccess","TFRFaccess","TFRTaccess","PHYaccess","SUMaccess","Sheetaccess","POhqaccess","handleSubmit","formData","FormData","formList","i","length","append","resAuth","handleChangeCheckbox","list","handleSubmitSite","ItemSite_ID","resSite","handleChangeCheckboxSite","t","Component","mapStateToProps","authStore","tokenDetails","mapDispatchToProps","dispatch","StockSettings"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Toast } from \"service/toast\";\r\nimport \"./style.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getCommonApi, commonUpdateApi } from \"redux/actions/common\";\r\nimport {\r\n  NormalButton,\r\n  NormalDate,\r\n  TableWrapper,\r\n  InputSearch,\r\n  NormalMultiSelect,\r\n  NormalCheckbox,\r\n  NormalSelect,\r\n} from \"component/common\";\r\nimport { dateFormat } from \"service/helperFunctions\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { NormalInput, NormalDateTime } from \"component/common\";\r\nimport { Link } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nimport updateBtn from \"assets/images/edit1.png\";\r\nimport deleteBtn from \"assets/images/delete1.png\";\r\nimport closeBtn from \"assets/images/close.png\";\r\nimport saveBtn from \"assets/images/save.png\";\r\nimport { history } from \"helpers\";\r\n\r\nimport { getTokenDetails } from \"redux/actions/auth\";\r\n\r\nexport class StockSettingsClass extends React.Component {\r\n  state = {\r\n    headerDetails: [\r\n      // { label: \"Code\" },\r\n      { label: \"Name\" },\r\n      { label: \"Authorization\" },\r\n    ],\r\n    formFields: {\r\n      user: \"\",\r\n    },\r\n\r\n    authList: [],\r\n    authUserList: [],\r\n    userOption: [],\r\n    storedItemList: [],\r\n    pageMeta: {},\r\n\r\n    siteList: [],\r\n    hqonly: false,\r\n\r\n    search: \"\",\r\n    active: false,\r\n    currentIndex: -1,\r\n    page: 1,\r\n    // limit: 10,\r\n    limit: 4,\r\n    isOpenvoidCheckout: false,\r\n    // isLoading: false,\r\n    // is_loading: false,\r\n    isMounted: true,\r\n\r\n    // salesCollectionHeader: [\r\n    //   { label: \"Sales Collection\" },\r\n    //   { label: \"Before Tax\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // nonSalesCollectionHeader: [\r\n    //   { label: \"Non Sales Collection\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Qty\" },\r\n    // ],\r\n    // deptSalesHeader: [{ label: \"Dept Sales\" }, { label: \"Amount\" }],\r\n    // salesTransactionHeader: [\r\n    //   { label: \"Sales Transaction\" },\r\n    //   { label: \"Amount\" },\r\n    //   { label: \"Paid\" },\r\n    //   { label: \"Outstanding\" },\r\n    // ],\r\n    // ARTransactionHeader: [{ label: \"AR Transaction\" }, { label: \"Amount\" }],\r\n    // TreatmentDoneHeader: [\r\n    //   { label: \"Customer\" },\r\n    //   { label: \"Customer Reference\" },\r\n    //   { label: \"Treatment Done\" },\r\n    //   { label: \"Description\" },\r\n    //   { label: \"Staff\" },\r\n    //   { label: \"Amount\" },\r\n    // DayDate: new Date(),\r\n    // runDayEnd: false,\r\n    // reportDate: \"\",\r\n    // sales_collec: null,\r\n    // sales_trasac: null,\r\n    // ar_trasac: null,\r\n    // treatment_done: null,\r\n    // dept_sales: null,\r\n  };\r\n\r\n  componentWillMount() {\r\n    // this.autofillSaved();\r\n  }\r\n\r\n  updateState = data => {\r\n    if (this.state.isMounted) this.setState(data);\r\n  };\r\n\r\n  componentDidMount() {\r\n    // let From = new Date();\r\n    // let { formField } = this.state;\r\n    // let firstdayMonth = new Date(From.getFullYear(), From.getMonth(), 1);\r\n    // formField[\"fromDate\"] = firstdayMonth;\r\n    // this.setState({\r\n    //   formField,\r\n    // });\r\n\r\n    this.getDetails();\r\n    this.getSite();\r\n  }\r\n\r\n  getSite = () => {\r\n    // this.updateState({ isLoading: true });\r\n    let { siteList, hqonly, page, limit, search } = this.state;\r\n    // let { item_desc } = formField;\r\n\r\n    this.props.getCommonApi(`sitecode`).then(async res => {\r\n      console.log(res, \"dsfdfaafg\");\r\n      for (let item of res.data) {\r\n        if (item.ItemSite_Code == this.props.tokenDetail.site_code) {\r\n          siteList = item;\r\n        }\r\n      }\r\n\r\n      this.setState({ siteList });\r\n      console.log(\"siteList\", siteList);\r\n\r\n      if (siteList.hq_only == 1) {\r\n        hqonly = true;\r\n      }\r\n\r\n      this.setState({ hqonly });\r\n    });\r\n  };\r\n\r\n  getDetails = () => {\r\n    // this.updateState({ isLoading: true });\r\n    let { authList, userOption, page, limit, search } = this.state;\r\n    // let { item_desc } = formField;\r\n\r\n    this.props.getCommonApi(`authorise`).then(async res => {\r\n      console.log(res, \"dsfdfaafg\");\r\n      await this.setState({ authList: [] });\r\n      for (let key of res.data) {\r\n        userOption.push({\r\n          value: key.PW_ID,\r\n          label: key.PW_UserLogin,\r\n          code: key.AllDropdown_Desc,\r\n          active: key.Active,\r\n        });\r\n      }\r\n      console.log(\"userOption\", userOption);\r\n      this.setState({ userOption });\r\n      authList = res.data;\r\n      // pageMeta = res.data.meta.pagination;\r\n      // pageMeta = res.data.pagination;\r\n      // pageMeta = {per_page:5, current_page:1, total:2, total_pages:4}\r\n      // this.setState({ authList, pageMeta });\r\n      // this.setState({ authList });\r\n\r\n      console.log(\"res.data\", res.data);\r\n      console.log(\"authList\", authList);\r\n      // console.log('pageMeta',pageMeta)\r\n      this.updateState({\r\n        authList,\r\n        // pageMeta,\r\n        // isLoading: false,\r\n      });\r\n    });\r\n  };\r\n\r\n  handlePagination = async pageNo => {\r\n    let { page } = this.state;\r\n    page = pageNo.page;\r\n    await this.setState({\r\n      page,\r\n    });\r\n    this.getDetails();\r\n  };\r\n  // pagination\r\n  // handlePagination = page => {\r\n  //   this.queryHandler(page);\r\n  // };\r\n\r\n  handlesearch = event => {\r\n    // event.persist();\r\n    console.log(event.target.value);\r\n    let { search } = this.state;\r\n    search = event.target.value;\r\n    this.setState({ search });\r\n    if (!this.debouncedFn) {\r\n      this.debouncedFn = _.debounce(async () => {\r\n        this.getDetails({});\r\n      }, 500);\r\n    }\r\n    this.debouncedFn();\r\n  };\r\n\r\n  handleClick = key => {\r\n    if (!this.state.active) {\r\n      document.addEventListener(\"click\", this.handleOutsideClick, false);\r\n    } else {\r\n      document.removeEventListener(\"click\", this.handleOutsideClick, false);\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      active: !prevState.active,\r\n      currentIndex: key,\r\n    }));\r\n  };\r\n\r\n  handleOutsideClick = e => {\r\n    if (this.node != null) {\r\n      if (this.node.contains(e.target)) {\r\n        return;\r\n      }\r\n    }\r\n    this.handleClick();\r\n  };\r\n\r\n  handleChange = ({ target: { value, name } }) => {\r\n    let formFields = Object.assign({}, this.state.formFields);\r\n    let { authUserList, authList } = this.state;\r\n\r\n    formFields[name] = value;\r\n    console.log(\"value\", value);\r\n    console.log(\"name\", name);\r\n\r\n    for (let userList of authList) {\r\n      if (userList.PW_ID == value) {\r\n        authUserList = userList;\r\n      }\r\n    }\r\n\r\n    authUserList = [\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Purchase Order(PO)\",\r\n        auth: authUserList.POaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Approved PO\",\r\n        auth: authUserList.POapprovalaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Delivery Order(DO)\",\r\n        auth: authUserList.DOaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Goods Receive Note\",\r\n        auth: authUserList.GRNaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Goods Return Note\",\r\n        auth: authUserList.VGRNaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Stocks Adjustment\",\r\n        auth: authUserList.ADJaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Transfer In\",\r\n        auth: authUserList.TFRFaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Transfer Out\",\r\n        auth: authUserList.TFRTaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"StockTake\",\r\n        auth: authUserList.PHYaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Stock Usage Memo\",\r\n        auth: authUserList.SUMaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"Stock Report\",\r\n        auth: authUserList.Sheetaccess == 1 ? true : false,\r\n      },\r\n      {\r\n        id: authUserList.PW_ID,\r\n        name: \"PO HQ\",\r\n        auth: authUserList.POhqaccess == 1 ? true : false,\r\n      },\r\n    ];\r\n\r\n    this.updateState({\r\n      formFields,\r\n      authUserList,\r\n    });\r\n    this.getDetails();\r\n    // this.props.storeItemDetails(storedItemList, formFields)\r\n  };\r\n\r\n  handleSubmit = async () => {\r\n    let { authUserList } = this.state;\r\n\r\n    const formData = new FormData();\r\n\r\n    let formList = [\r\n      \"POaccess\",\r\n      \"POapprovalaccess\",\r\n      \"DOaccess\",\r\n      \"GRNaccess\",\r\n      \"VGRNaccess\",\r\n      \"ADJaccess\",\r\n      \"TFRFaccess\",\r\n      \"TFRTaccess\",\r\n      \"PHYaccess\",\r\n      \"SUMaccess\",\r\n      \"Sheetaccess\",\r\n      \"POhqaccess\",\r\n    ];\r\n\r\n    for (let i = 0; i < authUserList.length; i++) {\r\n      formData.append(formList[i], authUserList[i].auth == true ? 1 : 0);\r\n      console.log(\"formList[i]\", formList[i]);\r\n      console.log(\"authUserList[i].auth\", authUserList[i].auth);\r\n    }\r\n\r\n    console.log(\"formData\", formData);\r\n    var resAuth = await this.props.commonUpdateApi(\r\n      `authorise/${authUserList[0].id}/`,\r\n      formData\r\n    );\r\n\r\n    console.log(resAuth);\r\n    // // this.handleAddressSubmit(resADJ);\r\n    // this.handleItemDetailsSubmit(resADJ);\r\n    // // if(statusValue == \"Void\"){\r\n    // //   console.log(\"in void loop\")\r\n    // //   await this.props.deletePO(`${this.props.match.params.id}/`)\r\n    // // }\r\n\r\n    history.push(`/admin/inventory`);\r\n  };\r\n\r\n  handleChangeCheckbox = name => {\r\n    let { authUserList } = this.state;\r\n    for (let list of authUserList) {\r\n      if (list.name == name) {\r\n        list.auth = !list.auth;\r\n      }\r\n    }\r\n\r\n    this.setState(authUserList);\r\n    console.log(\"authUserList in handlechangecheckbox\", authUserList);\r\n  };\r\n\r\n  handleSubmitSite = async () => {\r\n    let { hqonly, siteList } = this.state;\r\n\r\n    const formData = new FormData();\r\n\r\n    formData.append(\"hq_only\", hqonly == true ? 1 : 0);\r\n\r\n    console.log(\"formData\", formData);\r\n    var resSite = await this.props.commonUpdateApi(\r\n      `sitecode/${siteList.ItemSite_ID}/`,\r\n      formData\r\n    );\r\n\r\n    console.log(resSite);\r\n    history.push(`/admin/inventory`);\r\n  };\r\n\r\n  handleChangeCheckboxSite = () => {\r\n    let { hqonly } = this.state;\r\n\r\n    hqonly = !hqonly;\r\n\r\n    this.setState({ hqonly });\r\n    console.log(\"hqonly handlechangecheckbox\", hqonly);\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      headerDetails,\r\n      hqonly,\r\n      pageMeta,\r\n      authUserList,\r\n      userOption,\r\n      formFields,\r\n    } = this.state;\r\n\r\n    let { user } = formFields;\r\n\r\n    let { t } = this.props;\r\n\r\n    return (\r\n      <div className=\" stockSettings col-md-10 align-items-center\">\r\n        <div className=\"col-md-12 mb-5\">\r\n          <p className=\"label-head mt-4\">{t(\"Site Mode\")}</p>\r\n        </div>\r\n\r\n        <div className=\"row mb-5\">\r\n          <div className=\"col-md-2 col-12 \"></div>\r\n\r\n          <div className=\"col-md-6 col-12 pt-2 mb-5\">\r\n            <div className=\"d-flex mb-2\">\r\n              <label className=\"text-left w-100 text-black common-label-text mr-2\">\r\n                {t(\"Simplified HQ Only Mode\")}\r\n              </label>\r\n              <div className=\"input-group\">\r\n                <NormalCheckbox\r\n                  type=\"checkbox\"\r\n                  checked={hqonly}\r\n                  name=\"site\"\r\n                  onChange={() => this.handleChangeCheckboxSite()}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-2 col-12 mb-5\">\r\n            <NormalButton\r\n              buttonClass={\"mx-2\"}\r\n              mainbg={true}\r\n              className=\"confirm\"\r\n              label=\"save\"\r\n              onClick={() => this.handleSubmitSite()}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* <div className=\"col-md-12 d-flex mb-5\">\r\n              <p className=\"label-head mt-4\">{t(\"User Authorization \")}</p>\r\n        </div>\r\n\r\n        <div className=\"row mb-2\">\r\n            <div className=\"col-md-2 col-12\"></div>\r\n\r\n            <div className=\"col-md-8 col-12\">\r\n              <div className=\"d-flex mb-2\">\r\n                <label className=\"text-left w-30 text-black common-label-text mr-2  pt-2\">\r\n                  {t(\"User\")}\r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <NormalSelect\r\n                    options={userOption}\r\n                    value={user}\r\n                    name=\"user\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>       \r\n\r\n          </div>\r\n\r\n\r\n\r\n        <div className=\"py-4\">\r\n            <div className=\"table-container\">\r\n\r\n              <TableWrapper\r\n                headerDetails={headerDetails}\r\n              >\r\n                {\r\n\r\n\r\n                authUserList\r\n                  ? authUserList.map((item, index) => {\r\n                      let {\r\n                        name,\r\n                        auth\r\n                        \r\n                      } = item;\r\n                      return (\r\n                        <tr key={index}>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                              { name }\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"d-flex align-items-center justify-content-center\">\r\n                            <NormalCheckbox\r\n                                type=\"checkbox\"\r\n                                checked={auth}\r\n                                name=\"auth\"\r\n                                onChange={()=>this.handleChangeCheckbox(name)}\r\n                            />\r\n                            </div>\r\n                          </td>\r\n                          \r\n                                   \r\n                        </tr>\r\n                      );\r\n                    })\r\n                  : null}\r\n                \r\n              \r\n              </TableWrapper >\r\n\r\n        \r\n\r\n                \r\n\r\n                \r\n                \r\n              \r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row justify-content-end\">\r\n\r\n          <div className=\"col-md-4 col-12 my-3 \">\r\n                  <NormalButton\r\n                    buttonClass={\"mx-2\"}\r\n                    mainbg={true}\r\n                    className=\"confirm\"\r\n                    label=\"save\"\r\n                    onClick={() => this.handleSubmit()}\r\n                  />\r\n            </div> */}\r\n\r\n        {/* </div> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  tokenDetail: state.authStore.tokenDetails,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      getCommonApi,\r\n      commonUpdateApi,\r\n      getTokenDetails,\r\n      // getProject\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const StockSettings = withTranslation()(\r\n  connect(mapStateToProps, mapDispatchToProps)(StockSettingsClass)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}