{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\webfe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{SchedulerModal}from'component/common/Plugins';// import BigSchedulerModal from 'component/common/Plugins/BigScheduler';\nimport{NormalInput,NormalSelect,NormalButton,NormalDate,NormalModal}from'component/common';import{getCustomer,getCommonApi,commonDeleteApi}from'redux/actions/common';import{connect}from'react-redux';import{bindActionCreators}from\"redux\";// import timeOption from 'data/timeOption.json'\nimport{dateFormat}from'service/helperFunctions';import{history}from'helpers';import'./style.scss';import SimpleReactValidator from'simple-react-validator';import{CreateAppointment,updateForm}from'redux/actions/appointment';import{Calander}from'./Calander';var data=[{start_date:'2020-06-09 4:00',end_date:'2020-06-09 6:00',text:'Event 1',id:1},{start_date:'2020-06-11 8:00',end_date:'2020-06-11 10:00',text:'Event 2',id:2},{start_date:'2020-06-12 12:00',end_date:'2018-06-12 14:00',text:'dblclick me!',id:3}];export var SchedulerClass=/*#__PURE__*/function(_Component){_inherits(SchedulerClass,_Component);var _super=_createSuper(SchedulerClass);function SchedulerClass(){var _this;_classCallCheck(this,SchedulerClass);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={appointment:[{time:'10.00 AM,',date:'Wednesday, 1st April, 2020',name:'Benjamin',treatment:'Head Massage'},{time:'12.00 PM,',date:'Wednesday, 1st April, 2020',name:'Daniel',treatment:'Pedicure'},{time:'1.00 PM,',date:'Wednesday, 1st April, 2020',name:'John',treatment:'Haircut'},{time:'2.00 PM,',date:'Wednesday, 1st April, 2020',name:'Josua',treatment:'Manicure'},{time:'4.00 PM, ',date:'Wednesday, 1st April, 2020',name:'Derrik',treatment:'Body Massage'}],events:[// {\n//     \"start_date\": \"2021-01-06 3:30\",\n//     \"end_date\": \"2021-01-06 5:00\",\n//     \"text\": \"Korean Anti Aging\",\n//     \"id\": 199787,\n//     \"user_id\": 171,\n//     \"status\": \"Booking\",\n//     \"color\": \"#f0b5ec\",\n//     \"title\": \"divya test\",\n//     \"staff_name\": \"HAN HAI YAN\"\n// }\n],brachList:[],formField:{branchId:\"\",time:\"\"},list:[],filterDate:new Date(),filterType:'day',selectedId:\"\"};_this.componentWillMount=function(){_this.validator=new SimpleReactValidator({element:function element(message){return/*#__PURE__*/React.createElement(\"span\",{className:\"error-message text-danger validNo fs14\"},message);},autoForceUpdate:_assertThisInitialized(_this)});var _this$state=_this.state,brachList=_this$state.brachList,appointment=_this$state.appointment,formField=_this$state.formField,filterDate=_this$state.filterDate;_this.props.getCommonApi(\"treatment/Outlet/\").then(function(key){var status=key.status,data=key.data;if(status===200){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;brachList.push({value:value.id,label:value.itemsite_desc});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({brachList:brachList});// console.log(brachList, \"jhksdfkjsdhfks\")\n}});_this.getAvailability();_this.getAppointment();};_this.getAvailability=function(date){var filterDate=_this.state.filterDate;_this.setState({list:[]});_this.props.getCommonApi(\"staffsavailable/?Appt_date=\".concat(dateFormat(date?date:filterDate,\"yyyy-mm-dd\"))).then(function(key){var status=key.status,data=key.data;if(status===200){// for (let value of data) {\n//     staffList.push({ value: value.id, label: value.emp_name })\n// }\n_this.setState({list:data});}});};_this.handleAppointmentOpen=function(id,e){console.log(e,id,\"hgjsydfisuyfsdfm ==== handleAppointmentOpen\");};_this.handleEmptyEvent=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(date,e){var customerDetail,formField,time;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:customerDetail=_this.props.customerDetail;formField=_this.state.formField;// if (this.validator.allValid()) {\ntime=new Date(date);formField['time']=time.getHours()>9?time.getHours()+\":00\":\"0\"+time.getHours()+\":00\";_context.next=6;return _this.setState({formField:formField});case 6:console.log(date,e,\"hgjsydfisuyfsdfm ==== handleEmptyEvent\",time.getHours);_context.next=9;return _this.props.updateForm('basicApptDetail',formField);case 9:history.push(\"/admin/appointment/create\");// console.log(date, e, \"hgjsydfisuyfsdfm ====\");\n// } else {\n//     this.validator.showMessages();\n// }\ncase 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.getAppointment=function(){var _this$state2=_this.state,brachList=_this$state2.brachList,events=_this$state2.events,formField=_this$state2.formField,filterType=_this$state2.filterType,filterDate=_this$state2.filterDate;_this.props.getCommonApi(\"appointmentcalender/?date=\".concat(dateFormat(filterDate),\"&check=\").concat(filterType)).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(key){var status,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:status=key.status,data=key.data;if(!(status===200)){_context2.next=8;break;}events=[];_context2.next=5;return _this.setState({events:null});case 5:events=data;_context2.next=8;return _this.setState({events:events});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref2.apply(this,arguments);};}());};_this.handleChangeFilter=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(prevMode,prevDate,newMode,newDate){var _this$state3,filterDate,filterType;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$state3=_this.state,filterDate=_this$state3.filterDate,filterType=_this$state3.filterType;filterDate=newDate;filterType=newMode;_context3.next=5;return _this.setState({filterDate:filterDate,filterType:filterType});case 5:_this.getAvailability();_this.getAppointment();case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4,_x5,_x6,_x7){return _ref3.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref4){var _ref4$target,value,name,formField;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref4$target=_ref4.target,value=_ref4$target.value,name=_ref4$target.name;formField=_this.state.formField;formField[name]=value;_context4.next=5;return _this.setState({formField:formField});case 5:if(name===\"branchId\"){_this.getAvailability();_this.getAppointment();}// console.log(formField, \"afasfasdfdfasd\")\n_this.props.updateForm('basicApptDetail',formField);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x8){return _ref5.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id,event){var selectedId;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:selectedId=_this.state.selectedId;console.log(id,\"===afasfasdfdfasd=====\",selectedId);if(!(id!==selectedId)){_context5.next=7;break;}_context5.next=5;return _this.setState({selectedId:id});case 5:_context5.next=7;return _this.props.commonDeleteApi(\"appointment/\".concat(id,\"/\")).then(function(res){});case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x9,_x10){return _ref6.apply(this,arguments);};}();_this.openDetail=function(id){history.push(\"/admin/appointment/\".concat(id,\"/detail\"));};return _this;}_createClass(SchedulerClass,[{key:\"render\",value:function render(){var _this$state4=this.state,appointment=_this$state4.appointment,brachList=_this$state4.brachList,branchId=_this$state4.branchId,formField=_this$state4.formField,list=_this$state4.list,events=_this$state4.events,filterType=_this$state4.filterType,filterDate=_this$state4.filterDate;return/*#__PURE__*/React.createElement(\"div\",{className:\"row m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 pl-0 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative scheduler\"},/*#__PURE__*/React.createElement(\"div\",{className:\"schedule-label\"},\"Today's Appointments\")),/*#__PURE__*/React.createElement(\"div\",{className:\"appointment appointment-available-staff\"},list&&list.map(function(data,index){return/*#__PURE__*/React.createElement(\"div\",{key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 text-left detail\"},data.appointment.map(function(app,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"head-message mb-0 fs-10 fw-400 col-5\"},app.time),/*#__PURE__*/React.createElement(\"div\",{className:\"head-message mb-0 fs-12 col-7\"},app.cust_name));})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 text-left detail mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head-message mb-0 col-5 text-uppercase\"},data.emp_name),/*#__PURE__*/React.createElement(\"div\",{className:\"head-message mb-0 col-7\"},data.services))),/*#__PURE__*/React.createElement(\"div\",{className:\"border-bottom-line mx-3 mt-3\"}));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"scheduler-container col-9 pr-0\"},/*#__PURE__*/React.createElement(Calander,{selectedDate:this.props.selectedDate,handleBack:this.props.handleBack,handleFilterChange:this.getAvailability})));}}]);return SchedulerClass;}(Component);var mapStateToProps=function mapStateToProps(state){return{customerDetail:state.appointment.customerDetail,customerList:state.common.customerList,multipleCustomerForm:state.appointment.multipleCustomerForm};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getCustomer:getCustomer,getCommonApi:getCommonApi,updateForm:updateForm,commonDeleteApi:commonDeleteApi},dispatch);};export var DayScheduler=connect(mapStateToProps,mapDispatchToProps)(SchedulerClass);","map":{"version":3,"sources":["F:/webfe/src/component/Admin/Appointment/ListAppointment/CommonScheduler/index.js"],"names":["React","Component","SchedulerModal","NormalInput","NormalSelect","NormalButton","NormalDate","NormalModal","getCustomer","getCommonApi","commonDeleteApi","connect","bindActionCreators","dateFormat","history","SimpleReactValidator","CreateAppointment","updateForm","Calander","data","start_date","end_date","text","id","SchedulerClass","state","appointment","time","date","name","treatment","events","brachList","formField","branchId","list","filterDate","Date","filterType","selectedId","componentWillMount","validator","element","message","autoForceUpdate","props","then","key","status","value","push","label","itemsite_desc","setState","getAvailability","getAppointment","handleAppointmentOpen","e","console","log","handleEmptyEvent","customerDetail","getHours","handleChangeFilter","prevMode","prevDate","newMode","newDate","handleChange","target","handleDelete","event","res","openDetail","map","index","app","cust_name","emp_name","services","selectedDate","handleBack","mapStateToProps","customerList","common","multipleCustomerForm","mapDispatchToProps","dispatch","DayScheduler"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { SchedulerModal } from 'component/common/Plugins';\r\n// import BigSchedulerModal from 'component/common/Plugins/BigScheduler';\r\nimport { NormalInput, NormalSelect, NormalButton, NormalDate, NormalModal } from 'component/common';\r\nimport { getCustomer, getCommonApi, commonDeleteApi } from 'redux/actions/common';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\n// import timeOption from 'data/timeOption.json'\r\nimport { dateFormat } from 'service/helperFunctions';\r\nimport { history } from 'helpers';\r\nimport './style.scss';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport { CreateAppointment, updateForm } from 'redux/actions/appointment';\r\nimport { Calander } from './Calander';\r\n\r\nconst data = [\r\n    { start_date: '2020-06-09 4:00', end_date: '2020-06-09 6:00', text: 'Event 1', id: 1 },\r\n    { start_date: '2020-06-11 8:00', end_date: '2020-06-11 10:00', text: 'Event 2', id: 2 },\r\n    { start_date: '2020-06-12 12:00', end_date: '2018-06-12 14:00', text: 'dblclick me!', id: 3 }\r\n];\r\n\r\nexport class SchedulerClass extends Component {\r\n    state = {\r\n        appointment: [\r\n            {\r\n                time: '10.00 AM,',\r\n                date: 'Wednesday, 1st April, 2020',\r\n                name: 'Benjamin',\r\n                treatment: 'Head Massage'\r\n            },\r\n            {\r\n                time: '12.00 PM,',\r\n                date: 'Wednesday, 1st April, 2020',\r\n                name: 'Daniel',\r\n                treatment: 'Pedicure'\r\n            },\r\n            {\r\n                time: '1.00 PM,',\r\n                date: 'Wednesday, 1st April, 2020',\r\n                name: 'John',\r\n                treatment: 'Haircut'\r\n            },\r\n            {\r\n                time: '2.00 PM,',\r\n                date: 'Wednesday, 1st April, 2020',\r\n                name: 'Josua',\r\n                treatment: 'Manicure'\r\n            },\r\n            {\r\n                time: '4.00 PM, ',\r\n                date: 'Wednesday, 1st April, 2020',\r\n                name: 'Derrik',\r\n                treatment: 'Body Massage'\r\n            },\r\n\r\n        ],\r\n        events: [\r\n            // {\r\n            //     \"start_date\": \"2021-01-06 3:30\",\r\n            //     \"end_date\": \"2021-01-06 5:00\",\r\n            //     \"text\": \"Korean Anti Aging\",\r\n            //     \"id\": 199787,\r\n            //     \"user_id\": 171,\r\n            //     \"status\": \"Booking\",\r\n            //     \"color\": \"#f0b5ec\",\r\n            //     \"title\": \"divya test\",\r\n            //     \"staff_name\": \"HAN HAI YAN\"\r\n            // }\r\n        ],\r\n        brachList: [],\r\n        formField: {\r\n            branchId: \"\",\r\n            time: \"\"\r\n        },\r\n        list: [],\r\n        filterDate: new Date(),\r\n        filterType: 'day',\r\n        selectedId: \"\"\r\n    }\r\n\r\n    componentWillMount = () => {\r\n        this.validator = new SimpleReactValidator({\r\n            element: message => <span className=\"error-message text-danger validNo fs14\">{message}</span>,\r\n            autoForceUpdate: this,\r\n        });\r\n        let { brachList, appointment, formField, filterDate } = this.state;\r\n        this.props.getCommonApi(`treatment/Outlet/`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                for (let value of data) {\r\n                    brachList.push({ value: value.id, label: value.itemsite_desc })\r\n                }\r\n                this.setState({ brachList })\r\n                // console.log(brachList, \"jhksdfkjsdhfks\")\r\n            }\r\n        })\r\n       this.getAvailability();\r\n        this.getAppointment();\r\n    }\r\n\r\n    getAvailability = (date) => {\r\n        let { filterDate } = this.state;\r\n        this.setState({ list: [] })\r\n        \r\n        this.props.getCommonApi(`staffsavailable/?Appt_date=${dateFormat(date ? date:filterDate, \"yyyy-mm-dd\")}`).then((key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                // for (let value of data) {\r\n                //     staffList.push({ value: value.id, label: value.emp_name })\r\n                // }\r\n                this.setState({ list: data })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleAppointmentOpen = (id, e) => {\r\n        console.log(e, id, \"hgjsydfisuyfsdfm ==== handleAppointmentOpen\");\r\n    }\r\n\r\n    handleEmptyEvent = async (date, e) => {\r\n        let { customerDetail } = this.props;\r\n        let { formField } = this.state;\r\n        // if (this.validator.allValid()) {\r\n        let time = new Date(date)\r\n        formField['time'] = time.getHours() > 9 ? (time.getHours() + \":00\") : (\"0\" + time.getHours()) + \":00\";\r\n        await this.setState({ formField });\r\n        console.log(date, e, \"hgjsydfisuyfsdfm ==== handleEmptyEvent\", time.getHours);\r\n        await this.props.updateForm('basicApptDetail', formField);\r\n        history.push(`/admin/appointment/create`)\r\n        // console.log(date, e, \"hgjsydfisuyfsdfm ====\");\r\n        // } else {\r\n        //     this.validator.showMessages();\r\n        // }\r\n\r\n    }\r\n\r\n    getAppointment = () => {\r\n        let { brachList, events, formField, filterType, filterDate } = this.state;\r\n        this.props.getCommonApi(`appointmentcalender/?date=${dateFormat(filterDate)}&check=${filterType}`).then(async (key) => {\r\n            let { status, data } = key;\r\n            if (status === 200) {\r\n                events = [];\r\n                await this.setState({ events: null })\r\n                events = data;\r\n                await this.setState({ events })\r\n                // console.log(events, \"jhksdfkjsdhfks\", key)\r\n            }\r\n        })\r\n    }\r\n    handleChangeFilter = async (prevMode, prevDate, newMode, newDate) => {\r\n\r\n        let { filterDate, filterType } = this.state;\r\n        filterDate = newDate;\r\n        filterType = newMode;\r\n        await this.setState({\r\n            filterDate,\r\n            filterType\r\n        })\r\n        this.getAvailability();\r\n        this.getAppointment()\r\n    }\r\n\r\n    handleChange = async ({ target: { value, name } }) => {\r\n        let { formField } = this.state;\r\n        formField[name] = value;\r\n        await this.setState({\r\n            formField,\r\n        });\r\n        if (name === \"branchId\") {\r\n            this.getAvailability();\r\n            this.getAppointment();\r\n        }\r\n        // console.log(formField, \"afasfasdfdfasd\")\r\n        this.props.updateForm('basicApptDetail', formField);\r\n    };\r\n\r\n    handleDelete = async (id, event) => {\r\n        let { selectedId } = this.state;\r\n        console.log(id, \"===afasfasdfdfasd=====\", selectedId)\r\n        if (id !== selectedId) {\r\n            await this.setState({\r\n                selectedId: id\r\n            })\r\n            await this.props.commonDeleteApi(`appointment/${id}/`).then((res) => {\r\n\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n    openDetail = (id) => {\r\n        history.push(`/admin/appointment/${id}/detail`)\r\n    }\r\n\r\n    render() {\r\n        let { appointment, brachList, branchId, formField, list, events, filterType, filterDate } = this.state;\r\n        return (\r\n            <div className=\"row m-0\">\r\n\r\n                <div className=\"col-3 pl-0 \">\r\n                    <div className=\"position-relative scheduler\">\r\n                        <div className=\"schedule-label\">\r\n                            Today's Appointments\r\n                        </div>\r\n                        {/* <span className=\"icon-down-blue clip-icon\"></span> */}\r\n                    </div>\r\n                    <div className=\"appointment appointment-available-staff\">\r\n                        {list && list.map((data, index) => (\r\n                            <div key={index}>\r\n                            <div className='col-12 text-left detail'>\r\n                               {data.appointment.map((app, index)=>(\r\n                                   <div className='d-flex flex-wrap' key={index}>\r\n                                       <div className=\"head-message mb-0 fs-10 fw-400 col-5\">{app.time}</div>\r\n                                       <div className=\"head-message mb-0 fs-12 col-7\">{app.cust_name}</div>\r\n                                   </div>))}   \r\n                               </div>\r\n                           <div className=\"col-12 text-left detail mt-2\">                                   \r\n                               <div className=\"d-flex flex-wrap\">\r\n                                   <div className=\"head-message mb-0 col-5 text-uppercase\">{data.emp_name}</div>\r\n                                   <div className=\"head-message mb-0 col-7\">{data.services}</div>\r\n                               </div>\r\n                           </div>\r\n                           <div className=\"border-bottom-line mx-3 mt-3\"></div>\r\n                       </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                <div className='scheduler-container col-9 pr-0'>\r\n\r\n                    <Calander selectedDate={this.props.selectedDate} handleBack={this.props.handleBack} handleFilterChange={this.getAvailability}></Calander>\r\n                    {/* {console.log(\"render ===\", this.state, this.props)} */}\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    customerDetail: state.appointment.customerDetail,\r\n    customerList: state.common.customerList,\r\n    multipleCustomerForm: state.appointment.multipleCustomerForm\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return bindActionCreators({\r\n        getCustomer,\r\n        getCommonApi,\r\n        updateForm,\r\n        commonDeleteApi\r\n    }, dispatch)\r\n}\r\n\r\nexport const DayScheduler = connect(mapStateToProps, mapDispatchToProps)(SchedulerClass)"]},"metadata":{},"sourceType":"module"}