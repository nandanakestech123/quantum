{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.default = void 0;\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _config = _interopRequireDefault(require(\"../../core/config\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nvar _empty_template = require(\"../../core/templates/empty_template\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _position = require(\"../../core/utils/position\");\n\nvar _date = _interopRequireDefault(require(\"../../core/utils/date\"));\n\nvar _date_serialization = _interopRequireDefault(require(\"../../core/utils/date_serialization\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _support = require(\"../../core/utils/support\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _data_helper = _interopRequireDefault(require(\"../../data_helper\"));\n\nvar _visibility_change = require(\"../../events/visibility_change\");\n\nvar _date2 = _interopRequireDefault(require(\"../../localization/date\"));\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _dialog = require(\"../dialog\");\n\nvar _themes = require(\"../themes\");\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.errors\"));\n\nvar _ui2 = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _appointmentPopup = _interopRequireDefault(require(\"./appointmentPopup\"));\n\nvar _compactAppointmentsHelper = require(\"./compactAppointmentsHelper\");\n\nvar _desktopTooltipStrategy = require(\"./tooltip_strategies/desktopTooltipStrategy\");\n\nvar _mobileTooltipStrategy = require(\"./tooltip_strategies/mobileTooltipStrategy\");\n\nvar _ui3 = require(\"./ui.loading\");\n\nvar _uiScheduler = _interopRequireDefault(require(\"./ui.scheduler.appointments\"));\n\nvar _uiSchedulerAppointments = _interopRequireDefault(require(\"./ui.scheduler.appointments.layout_manager\"));\n\nvar _uiScheduler2 = _interopRequireDefault(require(\"./ui.scheduler.appointment_model\"));\n\nvar _uiScheduler3 = _interopRequireDefault(require(\"./ui.scheduler.header\"));\n\nvar _uiScheduler4 = _interopRequireDefault(require(\"./ui.scheduler.resource_manager\"));\n\nvar _uiScheduler5 = _interopRequireDefault(require(\"./ui.scheduler.subscribes\"));\n\nvar _recurrence = require(\"./recurrence\");\n\nvar _utils = _interopRequireDefault(require(\"./utils.timeZone\"));\n\nvar _uiScheduler6 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.agenda\"));\n\nvar _uiScheduler7 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_day\"));\n\nvar _uiScheduler8 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_month\"));\n\nvar _uiScheduler9 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_week\"));\n\nvar _uiScheduler10 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_work_week\"));\n\nvar _uiScheduler11 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_day\"));\n\nvar _uiScheduler12 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_month\"));\n\nvar _uiScheduler13 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_week\"));\n\nvar _uiScheduler14 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_work_week\"));\n\nvar _appointmentAdapter = _interopRequireDefault(require(\"./appointmentAdapter\"));\n\nvar _timeZoneCalculator = require(\"./timeZoneCalculator\");\n\nvar _dataStructures = require(\"./dataStructures\");\n\nvar _appointmentSettingsGenerator = require(\"./appointmentSettingsGenerator\");\n\nvar _utils2 = _interopRequireDefault(require(\"./utils\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else {\n      if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar MINUTES_IN_HOUR = 60;\nvar WIDGET_CLASS = \"dx-scheduler\";\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\nvar WIDGET_WIN_NO_TOUCH_CLASS = \"\".concat(WIDGET_CLASS, \"-win-no-touch\");\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\nvar WIDGET_SMALL_WIDTH = 400;\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\nvar VIEWS_CONFIG = {\n  day: {\n    workSpace: _uiScheduler11.default,\n    renderingStrategy: \"vertical\"\n  },\n  week: {\n    workSpace: _uiScheduler13.default,\n    renderingStrategy: \"vertical\"\n  },\n  workWeek: {\n    workSpace: _uiScheduler14.default,\n    renderingStrategy: \"vertical\"\n  },\n  month: {\n    workSpace: _uiScheduler12.default,\n    renderingStrategy: \"horizontalMonth\"\n  },\n  timelineDay: {\n    workSpace: _uiScheduler7.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWeek: {\n    workSpace: _uiScheduler9.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWorkWeek: {\n    workSpace: _uiScheduler10.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineMonth: {\n    workSpace: _uiScheduler8.default,\n    renderingStrategy: \"horizontalMonthLine\"\n  },\n  agenda: {\n    workSpace: _uiScheduler6.default,\n    renderingStrategy: \"agenda\"\n  }\n};\nvar StoreEventNames = {\n  ADDING: \"onAppointmentAdding\",\n  ADDED: \"onAppointmentAdded\",\n  DELETING: \"onAppointmentDeleting\",\n  DELETED: \"onAppointmentDeleted\",\n  UPDATING: \"onAppointmentUpdating\",\n  UPDATED: \"onAppointmentUpdated\"\n};\n\nvar Scheduler = function (_Widget) {\n  _inherits(Scheduler, _Widget);\n\n  var _super = _createSuper(Scheduler);\n\n  function Scheduler() {\n    _classCallCheck(this, Scheduler);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Scheduler, [{\n    key: \"_getDefaultOptions\",\n    value: function () {\n      var defaultOptions = (0, _extend.extend)(_get(_getPrototypeOf(Scheduler.prototype), \"_getDefaultOptions\", this).call(this), {\n        views: [\"day\", \"week\"],\n        currentView: \"day\",\n        currentDate: _date.default.trimTime(new Date()),\n        min: void 0,\n        max: void 0,\n        dateSerializationFormat: void 0,\n        firstDayOfWeek: void 0,\n        groups: [],\n        resources: [],\n        dataSource: null,\n        customizeDateNavigatorText: void 0,\n        appointmentTemplate: \"item\",\n        dropDownAppointmentTemplate: \"dropDownAppointment\",\n        appointmentCollectorTemplate: \"appointmentCollector\",\n        dataCellTemplate: null,\n        timeCellTemplate: null,\n        resourceCellTemplate: null,\n        dateCellTemplate: null,\n        startDayHour: 0,\n        endDayHour: 24,\n        editing: {\n          allowAdding: true,\n          allowDeleting: true,\n          allowDragging: true,\n          allowResizing: true,\n          allowUpdating: true,\n          allowTimeZoneEditing: false,\n          allowEditingTimeZones: false\n        },\n        showAllDayPanel: true,\n        showCurrentTimeIndicator: true,\n        shadeUntilCurrentTime: false,\n        indicatorUpdateInterval: 3e5,\n        indicatorTime: void 0,\n        recurrenceEditMode: \"dialog\",\n        cellDuration: 30,\n        maxAppointmentsPerCell: \"auto\",\n        selectedCellData: [],\n        groupByDate: false,\n        onAppointmentRendered: null,\n        onAppointmentClick: null,\n        onAppointmentDblClick: null,\n        onAppointmentContextMenu: null,\n        onCellClick: null,\n        onCellContextMenu: null,\n        onAppointmentAdding: null,\n        onAppointmentAdded: null,\n        onAppointmentUpdating: null,\n        onAppointmentUpdated: null,\n        onAppointmentDeleting: null,\n        onAppointmentDeleted: null,\n        onAppointmentFormOpening: null,\n        appointmentTooltipTemplate: \"appointmentTooltip\",\n        appointmentPopupTemplate: \"appointmentPopup\",\n        crossScrollingEnabled: false,\n        useDropDownViewSwitcher: false,\n        startDateExpr: \"startDate\",\n        endDateExpr: \"endDate\",\n        textExpr: \"text\",\n        descriptionExpr: \"description\",\n        allDayExpr: \"allDay\",\n        recurrenceRuleExpr: \"recurrenceRule\",\n        recurrenceExceptionExpr: \"recurrenceException\",\n        disabledExpr: \"disabled\",\n        remoteFiltering: false,\n        timeZone: \"\",\n        startDateTimeZoneExpr: \"startDateTimeZone\",\n        endDateTimeZoneExpr: \"endDateTimeZone\",\n        noDataText: _message.default.format(\"dxCollectionWidget-noDataText\"),\n        adaptivityEnabled: false,\n        allowMultipleCellSelection: true,\n        scrolling: {\n          mode: \"standard\"\n        },\n        renovateRender: false,\n        _appointmentTooltipOffset: {\n          x: 0,\n          y: 0\n        },\n        _appointmentTooltipButtonsPosition: \"bottom\",\n        _appointmentTooltipOpenButtonText: _message.default.format(\"dxScheduler-openAppointment\"),\n        _dropDownButtonIcon: \"overflow\",\n        _appointmentCountPerCell: 2,\n        _collectorOffset: 0,\n        _appointmentOffset: 26\n      });\n      return (0, _extend.extend)(true, defaultOptions, {\n        integrationOptions: {\n          useDeferUpdateForTemplates: false\n        }\n      });\n    }\n  }, {\n    key: \"_defaultOptionsRules\",\n    value: function () {\n      return _get(_getPrototypeOf(Scheduler.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\n        device: function () {\n          return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n        },\n        options: {\n          focusStateEnabled: true\n        }\n      }, {\n        device: function () {\n          return !_devices.default.current().generic;\n        },\n        options: {\n          useDropDownViewSwitcher: true,\n          editing: {\n            allowDragging: false,\n            allowResizing: false\n          }\n        }\n      }, {\n        device: function () {\n          return (0, _themes.isMaterial)();\n        },\n        options: {\n          useDropDownViewSwitcher: true,\n          dateCellTemplate: function (data, index, element) {\n            var text = data.text;\n            text.split(\" \").forEach(function (text, index) {\n              var span = (0, _renderer.default)(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\n              (0, _renderer.default)(element).append(span);\n\n              if (!index) {\n                (0, _renderer.default)(element).append(\" \");\n              }\n            });\n          },\n          _appointmentTooltipOffset: {\n            x: 0,\n            y: 11\n          },\n          _appointmentTooltipButtonsPosition: \"top\",\n          _appointmentTooltipOpenButtonText: null,\n          _dropDownButtonIcon: \"chevrondown\",\n          _appointmentCountPerCell: 1,\n          _collectorOffset: 20,\n          _appointmentOffset: 30\n        }\n      }]);\n    }\n  }, {\n    key: \"_setDeprecatedOptions\",\n    value: function () {\n      _get(_getPrototypeOf(Scheduler.prototype), \"_setDeprecatedOptions\", this).call(this);\n\n      (0, _extend.extend)(this._deprecatedOptions, {\n        dropDownAppointmentTemplate: {\n          since: \"19.2\",\n          message: \"appointmentTooltipTemplate\"\n        },\n        allowEditingTimeZones: {\n          since: \"20.1\",\n          alias: \"allowTimeZoneEditing\"\n        }\n      });\n    }\n  }, {\n    key: \"_getAppointmentSettingsGenerator\",\n    value: function () {\n      return new _appointmentSettingsGenerator.AppointmentSettingsGenerator(this);\n    }\n  }, {\n    key: \"_postponeDataSourceLoading\",\n    value: function (promise) {\n      this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise);\n    }\n  }, {\n    key: \"_postponeResourceLoading\",\n    value: function () {\n      var _this = this;\n\n      var whenLoaded = this.postponedOperations.add(\"_loadResources\", function () {\n        return _this._loadResources();\n      });\n      var resolveCallbacks = new _deferred.Deferred();\n      whenLoaded.done(function (resources) {\n        resolveCallbacks.resolve(resources);\n      });\n\n      this._postponeDataSourceLoading(whenLoaded);\n\n      return resolveCallbacks.promise();\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      var _this2 = this;\n\n      var value = args.value;\n      var name = args.name;\n\n      switch (args.name) {\n        case \"customizeDateNavigatorText\":\n          this._updateOption(\"header\", name, value);\n\n          break;\n\n        case \"firstDayOfWeek\":\n          this._updateOption(\"workSpace\", name, value);\n\n          this._updateOption(\"header\", name, value);\n\n          break;\n\n        case \"currentDate\":\n          value = this._dateOption(name);\n          value = _date.default.trimTime(new Date(value));\n          this.option(\"selectedCellData\", []);\n\n          this._workSpace.option(name, new Date(value));\n\n          this._header.option(name, new Date(value));\n\n          this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\n\n          this._appointments.option(\"items\", []);\n\n          this._filterAppointmentsByDate();\n\n          this._postponeDataSourceLoading();\n\n          break;\n\n        case \"dataSource\":\n          this._initDataSource();\n\n          this._appointmentModel.setDataSource(this._dataSource);\n\n          this._postponeResourceLoading().done(function (resources) {\n            _this2._filterAppointmentsByDate();\n\n            _this2._updateOption(\"workSpace\", \"showAllDayPanel\", _this2.option(\"showAllDayPanel\"));\n          });\n\n          break;\n\n        case \"min\":\n        case \"max\":\n          value = this._dateOption(name);\n\n          this._updateOption(\"header\", name, new Date(value));\n\n          this._updateOption(\"workSpace\", name, new Date(value));\n\n          break;\n\n        case \"views\":\n          this._processCurrentView();\n\n          if (this._getCurrentViewOptions()) {\n            this.repaint();\n          } else {\n            this._header.option(name, value);\n          }\n\n          break;\n\n        case \"useDropDownViewSwitcher\":\n          this._header.option(name, value);\n\n          break;\n\n        case \"currentView\":\n          this._processCurrentView();\n\n          this.fire(\"validateDayHours\");\n          this.getLayoutManager().initRenderingStrategy(this._getAppointmentsRenderingStrategy());\n\n          this._validateCellDuration();\n\n          this._appointments.option({\n            items: [],\n            allowDrag: this._allowDragging(),\n            allowResize: this._allowResizing(),\n            itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\n          });\n\n          this._postponeResourceLoading().done(function (resources) {\n            _this2._refreshWorkSpace(resources);\n\n            _this2._updateHeader();\n\n            _this2._filterAppointmentsByDate();\n\n            _this2._appointments.option(\"allowAllDayResize\", \"day\" !== value);\n          });\n\n          break;\n\n        case \"appointmentTemplate\":\n          this._appointments.option(\"itemTemplate\", value);\n\n          break;\n\n        case \"dateCellTemplate\":\n        case \"resourceCellTemplate\":\n        case \"dataCellTemplate\":\n        case \"timeCellTemplate\":\n          this._updateOption(\"workSpace\", name, value);\n\n          this.repaint();\n          break;\n\n        case \"groups\":\n          this._postponeResourceLoading().done(function (resources) {\n            _this2._refreshWorkSpace(resources);\n\n            _this2._filterAppointmentsByDate();\n          });\n\n          break;\n\n        case \"resources\":\n          this._resourcesManager.setResources(this.option(\"resources\"));\n\n          this._appointmentModel.setDataAccessors(this._combineDataAccessors());\n\n          this._postponeResourceLoading().done(function (resources) {\n            _this2._appointments.option(\"items\", []);\n\n            _this2._refreshWorkSpace(resources);\n\n            _this2._filterAppointmentsByDate();\n          });\n\n          break;\n\n        case \"startDayHour\":\n        case \"endDayHour\":\n          this.fire(\"validateDayHours\");\n\n          this._appointments.option(\"items\", []);\n\n          this._updateOption(\"workSpace\", name, value);\n\n          this._appointments.repaint();\n\n          this._filterAppointmentsByDate();\n\n          this._postponeDataSourceLoading();\n\n          break;\n\n        case StoreEventNames.ADDING:\n        case StoreEventNames.ADDED:\n        case StoreEventNames.UPDATING:\n        case StoreEventNames.UPDATED:\n        case StoreEventNames.DELETING:\n        case StoreEventNames.DELETED:\n        case \"onAppointmentFormOpening\":\n          this._actions[name] = this._createActionByOption(name);\n          break;\n\n        case \"onAppointmentRendered\":\n          this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\n\n          break;\n\n        case \"onAppointmentClick\":\n          this._appointments.option(\"onItemClick\", this._createActionByOption(name));\n\n          break;\n\n        case \"onAppointmentDblClick\":\n          this._appointments.option(name, this._createActionByOption(name));\n\n          break;\n\n        case \"onAppointmentContextMenu\":\n          this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\n\n          break;\n\n        case \"noDataText\":\n        case \"allowMultipleCellSelection\":\n        case \"selectedCellData\":\n        case \"accessKey\":\n        case \"onCellClick\":\n          this._workSpace.option(name, value);\n\n          break;\n\n        case \"onCellContextMenu\":\n          this._workSpace.option(name, value);\n\n          break;\n\n        case \"crossScrollingEnabled\":\n          this._postponeResourceLoading().done(function (resources) {\n            _this2._appointments.option(\"items\", []);\n\n            _this2._refreshWorkSpace(resources);\n\n            if (_this2._readyToRenderAppointments) {\n              _this2._appointments.option(\"items\", _this2._getAppointmentsToRepaint());\n            }\n          });\n\n          break;\n\n        case \"cellDuration\":\n          this._validateCellDuration();\n\n          this._appointments.option(\"items\", []);\n\n          if (this._readyToRenderAppointments) {\n            this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\n\n            this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n          }\n\n          break;\n\n        case \"tabIndex\":\n        case \"focusStateEnabled\":\n          this._updateOption(\"header\", name, value);\n\n          this._updateOption(\"workSpace\", name, value);\n\n          this._appointments.option(name, value);\n\n          _get(_getPrototypeOf(Scheduler.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"width\":\n          this._updateOption(\"header\", name, value);\n\n          if (this.option(\"crossScrollingEnabled\")) {\n            this._updateOption(\"workSpace\", \"width\", value);\n          }\n\n          _get(_getPrototypeOf(Scheduler.prototype), \"_optionChanged\", this).call(this, args);\n\n          this._dimensionChanged();\n\n          break;\n\n        case \"height\":\n          _get(_getPrototypeOf(Scheduler.prototype), \"_optionChanged\", this).call(this, args);\n\n          this._dimensionChanged();\n\n          break;\n\n        case \"editing\":\n          this._initEditing();\n\n          var editing = this._editing;\n\n          this._bringEditingModeToAppointments(editing);\n\n          this.hideAppointmentTooltip();\n\n          this._cleanPopup();\n\n          break;\n\n        case \"showAllDayPanel\":\n          this._postponeResourceLoading().done(function (resources) {\n            _this2._filterAppointmentsByDate();\n\n            _this2._updateOption(\"workSpace\", \"allDayExpanded\", value);\n\n            _this2._updateOption(\"workSpace\", name, value);\n          });\n\n          break;\n\n        case \"showCurrentTimeIndicator\":\n        case \"indicatorTime\":\n        case \"indicatorUpdateInterval\":\n        case \"shadeUntilCurrentTime\":\n        case \"groupByDate\":\n          this._updateOption(\"workSpace\", name, value);\n\n          this.repaint();\n          break;\n\n        case \"appointmentDragging\":\n        case \"appointmentTooltipTemplate\":\n        case \"appointmentPopupTemplate\":\n        case \"recurrenceEditMode\":\n        case \"remoteFiltering\":\n        case \"timeZone\":\n        case \"dropDownAppointmentTemplate\":\n        case \"appointmentCollectorTemplate\":\n        case \"_appointmentTooltipOffset\":\n        case \"_appointmentTooltipButtonsPosition\":\n        case \"_appointmentTooltipOpenButtonText\":\n        case \"_dropDownButtonIcon\":\n        case \"_appointmentCountPerCell\":\n        case \"_collectorOffset\":\n        case \"_appointmentOffset\":\n          this.repaint();\n          break;\n\n        case \"dateSerializationFormat\":\n          break;\n\n        case \"maxAppointmentsPerCell\":\n          break;\n\n        case \"startDateExpr\":\n        case \"endDateExpr\":\n        case \"startDateTimeZoneExpr\":\n        case \"endDateTimeZoneExpr\":\n        case \"textExpr\":\n        case \"descriptionExpr\":\n        case \"allDayExpr\":\n        case \"recurrenceRuleExpr\":\n        case \"recurrenceExceptionExpr\":\n        case \"disabledExpr\":\n          this._updateExpression(name, value);\n\n          this._appointmentModel.setDataAccessors(this._combineDataAccessors());\n\n          this._initAppointmentTemplate();\n\n          this.repaint();\n          break;\n\n        case \"adaptivityEnabled\":\n          this._toggleAdaptiveClass();\n\n          this.repaint();\n          break;\n\n        case \"scrolling\":\n          this._updateOption(\"workSpace\", args.fullName, value);\n\n          break;\n\n        case \"renovateRender\":\n          this._updateOption(\"workSpace\", name, value);\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(Scheduler.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_updateHeader\",\n    value: function () {\n      var viewCountConfig = this._getViewCountConfig();\n\n      this._header.option(\"intervalCount\", viewCountConfig.intervalCount);\n\n      this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\n\n      this._header.option(\"min\", this._dateOption(\"min\"));\n\n      this._header.option(\"max\", this._dateOption(\"max\"));\n\n      this._header.option(\"currentDate\", this._dateOption(\"currentDate\"));\n\n      this._header.option(\"firstDayOfWeek\", this._getCurrentViewOption(\"firstDayOfWeek\"));\n\n      this._header.option(\"currentView\", this._currentView);\n    }\n  }, {\n    key: \"_dateOption\",\n    value: function (optionName) {\n      var optionValue = this._getCurrentViewOption(optionName);\n\n      return _date_serialization.default.deserializeDate(optionValue);\n    }\n  }, {\n    key: \"_getSerializationFormat\",\n    value: function (optionName) {\n      var value = this._getCurrentViewOption(optionName);\n\n      if (\"number\" === typeof value) {\n        return \"number\";\n      }\n\n      if (!(0, _type.isString)(value)) {\n        return;\n      }\n\n      return _date_serialization.default.getDateSerializationFormat(value);\n    }\n  }, {\n    key: \"_bringEditingModeToAppointments\",\n    value: function (editing) {\n      var editingConfig = {\n        allowDelete: editing.allowUpdating && editing.allowDeleting\n      };\n\n      if (!this._isAgenda()) {\n        editingConfig.allowDrag = editing.allowDragging;\n        editingConfig.allowResize = editing.allowResizing;\n        editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing();\n      }\n\n      this._appointments.option(editingConfig);\n\n      this.repaint();\n    }\n  }, {\n    key: \"_isAgenda\",\n    value: function () {\n      return \"agenda\" === this._getAppointmentsRenderingStrategy();\n    }\n  }, {\n    key: \"_allowDragging\",\n    value: function () {\n      return this._editing.allowDragging && !this._isAgenda();\n    }\n  }, {\n    key: \"_allowResizing\",\n    value: function () {\n      return this._editing.allowResizing && !this._isAgenda();\n    }\n  }, {\n    key: \"_allowAllDayResizing\",\n    value: function () {\n      return this._editing.allowResizing && this._supportAllDayResizing();\n    }\n  }, {\n    key: \"_supportAllDayResizing\",\n    value: function () {\n      return \"day\" !== this._getCurrentViewType() || this._currentView.intervalCount > 1;\n    }\n  }, {\n    key: \"_isAllDayExpanded\",\n    value: function (items) {\n      return this.option(\"showAllDayPanel\") && this._appointmentModel.hasAllDayAppointments(items, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"));\n    }\n  }, {\n    key: \"_getTimezoneOffsetByOption\",\n    value: function (date) {\n      return _utils.default.calculateTimezoneByValue(this.option(\"timeZone\"), date);\n    }\n  }, {\n    key: \"_filterAppointmentsByDate\",\n    value: function () {\n      var dateRange = this._workSpace.getDateRange();\n\n      this._appointmentModel.filterByDate(dateRange[0], dateRange[1], this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"));\n    }\n  }, {\n    key: \"_loadResources\",\n    value: function () {\n      var groups = this._getCurrentViewOption(\"groups\");\n\n      var result = new _deferred.Deferred();\n\n      this._resourcesManager.loadResources(groups).done(function (resources) {\n        this._loadedResources = resources;\n        result.resolve(resources);\n      }.bind(this));\n\n      return result.promise();\n    }\n  }, {\n    key: \"_reloadDataSource\",\n    value: function () {\n      var result = new _deferred.Deferred();\n\n      if (this._dataSource) {\n        this._dataSource.load().done(function () {\n          (0, _ui3.hide)();\n\n          this._fireContentReadyAction(result);\n        }.bind(this)).fail(function () {\n          (0, _ui3.hide)();\n          result.reject();\n        });\n\n        this._dataSource.isLoading() && (0, _ui3.show)({\n          container: this.$element(),\n          position: {\n            of: this.$element()\n          }\n        });\n      } else {\n        this._fireContentReadyAction(result);\n      }\n\n      return result.promise();\n    }\n  }, {\n    key: \"_fireContentReadyAction\",\n    value: function (result) {\n      var contentReadyBase = _get(_getPrototypeOf(Scheduler.prototype), \"_fireContentReadyAction\", this).bind(this);\n\n      var fireContentReady = function () {\n        contentReadyBase();\n        null === result || void 0 === result ? void 0 : result.resolve();\n      };\n\n      if (this._workSpaceRecalculation) {\n        var _this$_workSpaceRecal;\n\n        null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(function () {\n          fireContentReady();\n        });\n      } else {\n        fireContentReady();\n      }\n    }\n  }, {\n    key: \"_dimensionChanged\",\n    value: function () {\n      var filteredItems = this.getFilteredItems();\n\n      this._toggleSmallClass();\n\n      if (!this._isAgenda() && filteredItems && this._isVisible()) {\n        this._workSpace._cleanAllowedPositions();\n\n        this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(filteredItems));\n\n        this._workSpace._dimensionChanged();\n\n        var appointments = this._layoutManager.createAppointmentsMap(filteredItems);\n\n        this._appointments.option(\"items\", appointments);\n      }\n\n      this.hideAppointmentTooltip();\n\n      this._appointmentPopup.triggerResize();\n\n      this._appointmentPopup.updatePopupFullScreenMode();\n    }\n  }, {\n    key: \"_clean\",\n    value: function () {\n      this._cleanPopup();\n\n      _get(_getPrototypeOf(Scheduler.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_toggleSmallClass\",\n    value: function () {\n      var width = (0, _position.getBoundingRect)(this.$element().get(0)).width;\n      this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH);\n    }\n  }, {\n    key: \"_toggleAdaptiveClass\",\n    value: function () {\n      this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"));\n    }\n  }, {\n    key: \"_visibilityChanged\",\n    value: function (visible) {\n      visible && this._dimensionChanged();\n    }\n  }, {\n    key: \"_dataSourceOptions\",\n    value: function () {\n      return {\n        paginate: false\n      };\n    }\n  }, {\n    key: \"_init\",\n    value: function () {\n      var _this3 = this;\n\n      this._initExpressions({\n        startDate: this.option(\"startDateExpr\"),\n        endDate: this.option(\"endDateExpr\"),\n        startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\n        endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\n        allDay: this.option(\"allDayExpr\"),\n        text: this.option(\"textExpr\"),\n        description: this.option(\"descriptionExpr\"),\n        recurrenceRule: this.option(\"recurrenceRuleExpr\"),\n        recurrenceException: this.option(\"recurrenceExceptionExpr\"),\n        disabled: this.option(\"disabledExpr\")\n      });\n\n      _get(_getPrototypeOf(Scheduler.prototype), \"_init\", this).call(this);\n\n      this._initDataSource();\n\n      this._loadedResources = [];\n      this.$element().addClass(WIDGET_CLASS).toggleClass(WIDGET_WIN_NO_TOUCH_CLASS, !!(_browser.default.msie && _support.touch));\n\n      this._initEditing();\n\n      this._resourcesManager = new _uiScheduler4.default(this.option(\"resources\"));\n\n      var combinedDataAccessors = this._combineDataAccessors();\n\n      this._appointmentModel = new _uiScheduler2.default(this._dataSource, combinedDataAccessors, this.getAppointmentDurationInMinutes());\n\n      this._initActions();\n\n      this._compactAppointmentsHelper = new _compactAppointmentsHelper.CompactAppointmentsHelper(this);\n      this._asyncTemplatesTimers = [];\n      this._dataSourceLoadedCallback = (0, _callbacks.default)();\n      this._subscribes = _uiScheduler5.default;\n      this.timeZoneCalculator = new _timeZoneCalculator.TimeZoneCalculator({\n        getClientOffset: function (date) {\n          return _utils.default.getClientTimezoneOffset(date);\n        },\n        getCommonOffset: function (date, timeZone) {\n          return _utils.default.calculateTimezoneByValue(timeZone || _this3.option(\"timeZone\"), date);\n        },\n        getAppointmentOffset: function (date, appointmentTimezone) {\n          return _utils.default.calculateTimezoneByValue(appointmentTimezone, date);\n        }\n      });\n    }\n  }, {\n    key: \"_initTemplates\",\n    value: function () {\n      this._initAppointmentTemplate();\n\n      this._templateManager.addDefaultTemplates({\n        appointmentTooltip: new _empty_template.EmptyTemplate(),\n        dropDownAppointment: new _empty_template.EmptyTemplate()\n      });\n\n      _get(_getPrototypeOf(Scheduler.prototype), \"_initTemplates\", this).call(this);\n    }\n  }, {\n    key: \"_initAppointmentTemplate\",\n    value: function () {\n      var _this4 = this;\n\n      var expr = this._dataAccessors.expr;\n\n      var createGetter = function (property) {\n        return (0, _data.compileGetter)(\"appointmentData.\".concat(property));\n      };\n\n      this._templateManager.addDefaultTemplates(_defineProperty({}, \"item\", new _bindable_template.BindableTemplate(function ($container, data, model) {\n        _this4.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model);\n      }, [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\n        text: createGetter(expr.textExpr),\n        startDate: createGetter(expr.startDateExpr),\n        endDate: createGetter(expr.endDateExpr),\n        startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\n        endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\n        allDay: createGetter(expr.allDayExpr),\n        recurrenceRule: createGetter(expr.recurrenceRuleExpr)\n      })));\n    }\n  }, {\n    key: \"_combineDataAccessors\",\n    value: function () {\n      var resourcesDataAccessors = this._resourcesManager._dataAccessors;\n      var result = (0, _extend.extend)(true, {}, this._dataAccessors);\n      (0, _iterator.each)(resourcesDataAccessors, function (type, accessor) {\n        result[type].resources = accessor;\n      }.bind(this));\n      return result;\n    }\n  }, {\n    key: \"_renderContent\",\n    value: function () {\n      this._renderContentImpl();\n    }\n  }, {\n    key: \"_dataSourceChangedHandler\",\n    value: function (result) {\n      if (this._readyToRenderAppointments) {\n        this._workSpaceRecalculation.done(function () {\n          this._renderAppointments();\n\n          if (this._isAgenda()) {\n            this._workSpace._renderView();\n\n            this._dataSourceLoadedCallback.fireWith(this, [this.getFilteredItems()]);\n          }\n        }.bind(this));\n      }\n    }\n  }, {\n    key: \"isVirtualScrolling\",\n    value: function () {\n      var _this$getWorkSpace;\n\n      return null === (_this$getWorkSpace = this.getWorkSpace()) || void 0 === _this$getWorkSpace ? void 0 : _this$getWorkSpace.isVirtualScrolling();\n    }\n  }, {\n    key: \"_filterAppointments\",\n    value: function () {\n      var prerenderFilterName = this.isVirtualScrolling() ? \"prerenderFilterVirtual\" : \"prerenderFilter\";\n      return this.fire(prerenderFilterName);\n    }\n  }, {\n    key: \"_renderAppointments\",\n    value: function () {\n      this._filteredItems = this._filterAppointments();\n\n      this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(this._filteredItems));\n\n      if (this._isAgenda()) {\n        this.getRenderingStrategyInstance().calculateRows(this._filteredItems, 7, this.option(\"currentDate\"), true);\n      }\n\n      if (this._filteredItems.length && this._isVisible()) {\n        this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n\n        this._appointmentModel.cleanModelState();\n      } else {\n        this._appointments.option(\"items\", []);\n      }\n    }\n  }, {\n    key: \"_getAppointmentsToRepaint\",\n    value: function () {\n      var appointments = this._layoutManager.createAppointmentsMap(this._filteredItems);\n\n      return this._layoutManager.getRepaintedAppointments(appointments, this.getAppointmentsInstance().option(\"items\"));\n    }\n  }, {\n    key: \"_initExpressions\",\n    value: function (fields) {\n      var isDateField = function (field) {\n        return \"startDate\" === field || \"endDate\" === field;\n      };\n\n      if (!this._dataAccessors) {\n        this._dataAccessors = {\n          getter: {},\n          setter: {},\n          expr: {}\n        };\n      }\n\n      (0, _iterator.each)(fields, function (name, expr) {\n        if (expr) {\n          var getter = (0, _data.compileGetter)(expr);\n          var setter = (0, _data.compileSetter)(expr);\n          var dateGetter;\n          var dateSetter;\n\n          if (isDateField(name)) {\n            var that = this;\n\n            dateGetter = function () {\n              var value = getter.apply(this, arguments);\n\n              if ((0, _config.default)().forceIsoDateParsing) {\n                if (!that.option(\"dateSerializationFormat\")) {\n                  var format = _date_serialization.default.getDateSerializationFormat(value);\n\n                  if (format) {\n                    that.option(\"dateSerializationFormat\", format);\n                  }\n                }\n\n                value = _date_serialization.default.deserializeDate(value);\n              }\n\n              return value;\n            };\n\n            dateSetter = function (object, value) {\n              if ((0, _config.default)().forceIsoDateParsing || that.option(\"dateSerializationFormat\")) {\n                value = _date_serialization.default.serializeDate(value, that.option(\"dateSerializationFormat\"));\n              }\n\n              setter.call(this, object, value);\n            };\n          }\n\n          this._dataAccessors.getter[name] = dateGetter || getter;\n          this._dataAccessors.setter[name] = dateSetter || setter;\n          this._dataAccessors.expr[name + \"Expr\"] = expr;\n        } else {\n          delete this._dataAccessors.getter[name];\n          delete this._dataAccessors.setter[name];\n          delete this._dataAccessors.expr[name + \"Expr\"];\n        }\n      }.bind(this));\n    }\n  }, {\n    key: \"_updateExpression\",\n    value: function (name, value) {\n      var exprObj = {};\n      exprObj[name.replace(\"Expr\", \"\")] = value;\n\n      this._initExpressions(exprObj);\n    }\n  }, {\n    key: \"_initEditing\",\n    value: function () {\n      var editing = this.option(\"editing\");\n      this._editing = {\n        allowAdding: !!editing,\n        allowUpdating: !!editing,\n        allowDeleting: !!editing,\n        allowResizing: !!editing,\n        allowDragging: !!editing\n      };\n\n      if ((0, _type.isObject)(editing)) {\n        this._editing = (0, _extend.extend)(this._editing, editing);\n      }\n\n      this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\n      this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\n      this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly());\n    }\n  }, {\n    key: \"_isReadOnly\",\n    value: function () {\n      var result = true;\n      var editing = this._editing;\n\n      for (var prop in editing) {\n        if (Object.prototype.hasOwnProperty.call(editing, prop)) {\n          result = result && !editing[prop];\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_dispose\",\n    value: function () {\n      this._appointmentTooltip && this._appointmentTooltip.dispose();\n      this.hideAppointmentPopup();\n      this.hideAppointmentTooltip();\n\n      this._asyncTemplatesTimers.forEach(clearTimeout);\n\n      this._asyncTemplatesTimers = [];\n\n      _get(_getPrototypeOf(Scheduler.prototype), \"_dispose\", this).call(this);\n    }\n  }, {\n    key: \"_initActions\",\n    value: function () {\n      this._actions = {\n        onAppointmentAdding: this._createActionByOption(StoreEventNames.ADDING),\n        onAppointmentAdded: this._createActionByOption(StoreEventNames.ADDED),\n        onAppointmentUpdating: this._createActionByOption(StoreEventNames.UPDATING),\n        onAppointmentUpdated: this._createActionByOption(StoreEventNames.UPDATED),\n        onAppointmentDeleting: this._createActionByOption(StoreEventNames.DELETING),\n        onAppointmentDeleted: this._createActionByOption(StoreEventNames.DELETED),\n        onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\")\n      };\n    }\n  }, {\n    key: \"_getAppointmentRenderedAction\",\n    value: function () {\n      return this._createActionByOption(\"onAppointmentRendered\", {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      });\n    }\n  }, {\n    key: \"_renderFocusTarget\",\n    value: function () {\n      return (0, _common.noop)();\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function () {\n      _get(_getPrototypeOf(Scheduler.prototype), \"_initMarkup\", this).call(this);\n\n      this.fire(\"validateDayHours\");\n\n      this._validateCellDuration();\n\n      this._processCurrentView();\n\n      this._renderHeader();\n\n      this._layoutManager = new _uiSchedulerAppointments.default(this, this._getAppointmentsRenderingStrategy());\n      this._appointments = this._createComponent(\"<div>\", _uiScheduler.default, this._appointmentsConfig());\n\n      this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\n\n      this._appointmentTooltip = new (this.option(\"adaptivityEnabled\") ? _mobileTooltipStrategy.MobileTooltipStrategy : _desktopTooltipStrategy.DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\n      this._appointmentPopup = new _appointmentPopup.default(this);\n\n      if (this._isLoaded() || this._isDataSourceLoading()) {\n        this._initMarkupCore(this._loadedResources);\n\n        this._dataSourceChangedHandler(this._dataSource.items());\n\n        this._fireContentReadyAction();\n      } else {\n        this._loadResources().done(function (resources) {\n          this._initMarkupCore(resources);\n\n          this._reloadDataSource();\n        }.bind(this));\n      }\n    }\n  }, {\n    key: \"_getAppointmentTooltipOptions\",\n    value: function () {\n      var _this5 = this;\n\n      var that = this;\n      return {\n        createComponent: that._createComponent.bind(that),\n        container: that.$element(),\n        getScrollableContainer: that.getWorkSpaceScrollableContainer.bind(that),\n        addDefaultTemplates: that._templateManager.addDefaultTemplates.bind(that._templateManager),\n        getAppointmentTemplate: that._getAppointmentTemplate.bind(that),\n        showAppointmentPopup: that.showAppointmentPopup.bind(that),\n        checkAndDeleteAppointment: that.checkAndDeleteAppointment.bind(that),\n        isAppointmentInAllDayPanel: that.isAppointmentInAllDayPanel.bind(that),\n        createFormattedDateText: function (appointment, targetedAppointment, format) {\n          return _this5.fire(\"getTextAndFormatDate\", appointment, targetedAppointment, format);\n        },\n        getAppointmentDisabled: function (appointment) {\n          return _this5.createAppointmentAdapter(appointment).disabled;\n        }\n      };\n    }\n  }, {\n    key: \"checkAndDeleteAppointment\",\n    value: function (appointment, targetedAppointment) {\n      var _this6 = this;\n\n      var targetedAdapter = this.createAppointmentAdapter(targetedAppointment);\n\n      this._checkRecurringAppointment(appointment, targetedAppointment, targetedAdapter.startDate, function () {\n        _this6.deleteAppointment(appointment);\n      }, true);\n    }\n  }, {\n    key: \"_getExtraAppointmentTooltipOptions\",\n    value: function () {\n      return {\n        rtlEnabled: this.option(\"rtlEnabled\"),\n        focusStateEnabled: this.option(\"focusStateEnabled\"),\n        editing: this.option(\"editing\"),\n        offset: this.option(\"_appointmentTooltipOffset\")\n      };\n    }\n  }, {\n    key: \"isAppointmentInAllDayPanel\",\n    value: function (appointmentData) {\n      var workSpace = this._workSpace;\n      var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\n      return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\");\n    }\n  }, {\n    key: \"_initMarkupCore\",\n    value: function (resources) {\n      var _this7 = this;\n\n      this._readyToRenderAppointments = (0, _window.hasWindow)();\n      this._workSpace && this._cleanWorkspace();\n\n      this._renderWorkSpace(resources);\n\n      this._appointments.option({\n        fixedContainer: this._workSpace.getFixedContainer(),\n        allDayContainer: this._workSpace.getAllDayContainer()\n      });\n\n      this._waitAsyncTemplate(function () {\n        var _this7$_workSpaceReca;\n\n        return null === (_this7$_workSpaceReca = _this7._workSpaceRecalculation) || void 0 === _this7$_workSpaceReca ? void 0 : _this7$_workSpaceReca.resolve();\n      });\n\n      this._filterAppointmentsByDate();\n    }\n  }, {\n    key: \"_isLoaded\",\n    value: function () {\n      return this._isResourcesLoaded() && this._isDataSourceLoaded();\n    }\n  }, {\n    key: \"_isResourcesLoaded\",\n    value: function () {\n      return (0, _type.isDefined)(this._loadedResources);\n    }\n  }, {\n    key: \"_isDataSourceLoaded\",\n    value: function () {\n      return this._dataSource && this._dataSource.isLoaded();\n    }\n  }, {\n    key: \"_render\",\n    value: function () {\n      this._toggleSmallClass();\n\n      this._toggleAdaptiveClass();\n\n      _get(_getPrototypeOf(Scheduler.prototype), \"_render\", this).call(this);\n    }\n  }, {\n    key: \"_renderHeader\",\n    value: function () {\n      var $header = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\n      this._header = this._createComponent($header, _uiScheduler3.default, this._headerConfig());\n    }\n  }, {\n    key: \"_headerConfig\",\n    value: function () {\n      var _this8 = this;\n\n      var currentViewOptions = this._getCurrentViewOptions();\n\n      var countConfig = this._getViewCountConfig();\n\n      var result = (0, _extend.extend)({\n        isAdaptive: this.option(\"adaptivityEnabled\"),\n        firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n        currentView: this._currentView,\n        tabIndex: this.option(\"tabIndex\"),\n        focusStateEnabled: this.option(\"focusStateEnabled\"),\n        width: this.option(\"width\"),\n        rtlEnabled: this.option(\"rtlEnabled\"),\n        useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\n        _dropDownButtonIcon: this.option(\"_dropDownButtonIcon\"),\n        customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\")\n      }, currentViewOptions);\n      result.observer = this;\n      result.intervalCount = countConfig.intervalCount;\n      result.views = this.option(\"views\");\n      result.min = new Date(this._dateOption(\"min\"));\n      result.max = new Date(this._dateOption(\"max\"));\n      result.currentDate = _date.default.trimTime(new Date(this._dateOption(\"currentDate\")));\n\n      result.todayDate = function () {\n        var result = _this8.timeZoneCalculator.createDate(new Date(), {\n          path: \"toGrid\"\n        });\n\n        return result;\n      };\n\n      return result;\n    }\n  }, {\n    key: \"_appointmentsConfig\",\n    value: function () {\n      var that = this;\n      var config = {\n        observer: this,\n        onItemRendered: this._getAppointmentRenderedAction(),\n        onItemClick: this._createActionByOption(\"onAppointmentClick\"),\n        onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\n        onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\n        tabIndex: this.option(\"tabIndex\"),\n        focusStateEnabled: this.option(\"focusStateEnabled\"),\n        allowDrag: this._allowDragging(),\n        allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\n        allowResize: this._allowResizing(),\n        allowAllDayResize: this._allowAllDayResizing(),\n        rtlEnabled: this.option(\"rtlEnabled\"),\n        currentView: this.option(\"currentView\"),\n        onContentReady: function () {\n          that._workSpace && that._workSpace.option(\"allDayExpanded\", that._isAllDayExpanded(that.getFilteredItems()));\n        }\n      };\n      return config;\n    }\n  }, {\n    key: \"getCollectorOffset\",\n    value: function () {\n      if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\n        return this.option(\"_collectorOffset\");\n      } else {\n        return 0;\n      }\n    }\n  }, {\n    key: \"getAppointmentDurationInMinutes\",\n    value: function () {\n      return this._getCurrentViewOption(\"cellDuration\");\n    }\n  }, {\n    key: \"_processCurrentView\",\n    value: function () {\n      var views = this.option(\"views\");\n      var currentView = this.option(\"currentView\");\n      var that = this;\n      this._currentView = currentView;\n      (0, _iterator.each)(views, function (_, view) {\n        var isViewIsObject = (0, _type.isObject)(view);\n        var viewName = isViewIsObject ? view.name : view;\n        var viewType = view.type;\n\n        if (currentView === viewName || currentView === viewType) {\n          that._currentView = view;\n          return false;\n        }\n      });\n    }\n  }, {\n    key: \"_validateCellDuration\",\n    value: function () {\n      var endDayHour = this._getCurrentViewOption(\"endDayHour\");\n\n      var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n\n      var cellDuration = this._getCurrentViewOption(\"cellDuration\");\n\n      if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\n        _ui.default.log(\"W1015\");\n      }\n    }\n  }, {\n    key: \"_getCurrentViewType\",\n    value: function () {\n      return this._currentView.type || this._currentView;\n    }\n  }, {\n    key: \"_getAppointmentsRenderingStrategy\",\n    value: function () {\n      return VIEWS_CONFIG[this._getCurrentViewType()].renderingStrategy;\n    }\n  }, {\n    key: \"_renderWorkSpace\",\n    value: function (groups) {\n      this._readyToRenderAppointments && this._toggleSmallClass();\n      var $workSpace = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\n\n      var countConfig = this._getViewCountConfig();\n\n      var workSpaceComponent = VIEWS_CONFIG[this._getCurrentViewType()].workSpace;\n\n      var workSpaceConfig = this._workSpaceConfig(groups, countConfig);\n\n      this._workSpace = this._createComponent($workSpace, workSpaceComponent, workSpaceConfig);\n      this._allowDragging() && this._workSpace.initDragBehavior(this, this._all);\n\n      this._workSpace._attachTablesEvents();\n\n      this._workSpace.getWorkArea().append(this._appointments.$element());\n\n      this._recalculateWorkspace();\n\n      countConfig.startDate && this._header && this._header.option(\"currentDate\", this._workSpace._getHeaderDate());\n\n      this._appointments.option(\"_collectorOffset\", this.getCollectorOffset());\n    }\n  }, {\n    key: \"_getViewCountConfig\",\n    value: function () {\n      var currentView = this.option(\"currentView\");\n\n      var view = this._getViewByName(currentView);\n\n      var viewCount = view && view.intervalCount || 1;\n      var startDate = view && view.startDate || null;\n      return {\n        intervalCount: viewCount,\n        startDate: startDate\n      };\n    }\n  }, {\n    key: \"_getViewByName\",\n    value: function (name) {\n      var views = this.option(\"views\");\n\n      for (var i = 0; i < views.length; i++) {\n        if (views[i].name === name || views[i].type === name || views[i] === name) {\n          return views[i];\n        }\n      }\n    }\n  }, {\n    key: \"_recalculateWorkspace\",\n    value: function () {\n      var _this9 = this;\n\n      this._workSpaceRecalculation = new _deferred.Deferred();\n\n      this._waitAsyncTemplate(function () {\n        (0, _visibility_change.triggerResizeEvent)(_this9._workSpace.$element());\n\n        _this9._workSpace._refreshDateTimeIndication();\n      });\n    }\n  }, {\n    key: \"_workSpaceConfig\",\n    value: function (groups, countConfig) {\n      var _currentViewOptions$s,\n          _this10 = this;\n\n      var currentViewOptions = this._getCurrentViewOptions();\n\n      var scrolling = this.option(\"scrolling\");\n      var result = (0, _extend.extend)({\n        noDataText: this.option(\"noDataText\"),\n        firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n        startDayHour: this.option(\"startDayHour\"),\n        endDayHour: this.option(\"endDayHour\"),\n        tabIndex: this.option(\"tabIndex\"),\n        accessKey: this.option(\"accessKey\"),\n        focusStateEnabled: this.option(\"focusStateEnabled\"),\n        cellDuration: this.option(\"cellDuration\"),\n        showAllDayPanel: this.option(\"showAllDayPanel\"),\n        showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\n        indicatorTime: this.option(\"indicatorTime\"),\n        indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\n        shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\n        allDayExpanded: this._appointments.option(\"items\"),\n        crossScrollingEnabled: this.option(\"crossScrollingEnabled\"),\n        dataCellTemplate: this.option(\"dataCellTemplate\"),\n        timeCellTemplate: this.option(\"timeCellTemplate\"),\n        resourceCellTemplate: this.option(\"resourceCellTemplate\"),\n        dateCellTemplate: this.option(\"dateCellTemplate\"),\n        allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\n        selectedCellData: this.option(\"selectedCellData\"),\n        onSelectionChanged: function (args) {\n          _this10.option(\"selectedCellData\", args.selectedCellData);\n        },\n        groupByDate: this._getCurrentViewOption(\"groupByDate\"),\n        scrolling: scrolling,\n        renovateRender: this.option(\"renovateRender\") || \"virtual\" === scrolling.mode || \"virtual\" === (null === (_currentViewOptions$s = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s ? void 0 : _currentViewOptions$s.mode)\n      }, currentViewOptions);\n      result.observer = this;\n      result.intervalCount = countConfig.intervalCount;\n      result.startDate = countConfig.startDate;\n      result.groups = groups;\n      result.onCellClick = this._createActionByOption(\"onCellClick\");\n      result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\n      result.min = new Date(this._dateOption(\"min\"));\n      result.max = new Date(this._dateOption(\"max\"));\n      result.currentDate = _date.default.trimTime(new Date(this._dateOption(\"currentDate\")));\n      result.hoursInterval = result.cellDuration / 60;\n      result.allDayExpanded = this._isAllDayExpanded(this.getFilteredItems());\n      result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\n      result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\n      result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\n      result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\n      return result;\n    }\n  }, {\n    key: \"_waitAsyncTemplate\",\n    value: function (callback) {\n      if (this._options.silent(\"templatesRenderAsynchronously\")) {\n        var timer = setTimeout(function () {\n          callback();\n          clearTimeout(timer);\n        });\n\n        this._asyncTemplatesTimers.push(timer);\n      } else {\n        callback();\n      }\n    }\n  }, {\n    key: \"_getCurrentViewOptions\",\n    value: function () {\n      return this._currentView;\n    }\n  }, {\n    key: \"_getCurrentViewOption\",\n    value: function (optionName) {\n      var currentViewOptions = this._getCurrentViewOptions();\n\n      if (currentViewOptions && void 0 !== currentViewOptions[optionName]) {\n        return currentViewOptions[optionName];\n      }\n\n      return this.option(optionName);\n    }\n  }, {\n    key: \"_getAppointmentTemplate\",\n    value: function (optionName) {\n      var currentViewOptions = this._getCurrentViewOptions();\n\n      if (currentViewOptions && currentViewOptions[optionName]) {\n        return this._getTemplate(currentViewOptions[optionName]);\n      }\n\n      return this._getTemplateByOption(optionName);\n    }\n  }, {\n    key: \"_updateOption\",\n    value: function (viewName, optionName, value) {\n      var currentViewOptions = this._getCurrentViewOptions();\n\n      if (!currentViewOptions || !(0, _type.isDefined)(currentViewOptions[optionName])) {\n        this[\"_\" + viewName].option(optionName, value);\n      }\n    }\n  }, {\n    key: \"_refreshWorkSpace\",\n    value: function (groups) {\n      var _this11 = this;\n\n      this._cleanWorkspace();\n\n      delete this._workSpace;\n\n      this._renderWorkSpace(groups);\n\n      if (this._readyToRenderAppointments) {\n        this._appointments.option({\n          fixedContainer: this._workSpace.getFixedContainer(),\n          allDayContainer: this._workSpace.getAllDayContainer()\n        });\n\n        this._waitAsyncTemplate(function () {\n          return _this11._workSpaceRecalculation.resolve();\n        });\n      }\n    }\n  }, {\n    key: \"_cleanWorkspace\",\n    value: function () {\n      this._appointments.$element().detach();\n\n      this._workSpace._dispose();\n\n      this._workSpace.$element().remove();\n\n      this.option(\"selectedCellData\", []);\n    }\n  }, {\n    key: \"getWorkSpaceScrollable\",\n    value: function () {\n      return this._workSpace.getScrollable();\n    }\n  }, {\n    key: \"getWorkSpaceScrollableScrollTop\",\n    value: function (allDay) {\n      return this._workSpace.getGroupedScrollableScrollTop(allDay);\n    }\n  }, {\n    key: \"getWorkSpaceScrollableScrollLeft\",\n    value: function () {\n      return this._workSpace.getScrollableScrollLeft();\n    }\n  }, {\n    key: \"getWorkSpaceScrollableContainer\",\n    value: function () {\n      return this._workSpace.getScrollableContainer();\n    }\n  }, {\n    key: \"getWorkSpaceAllDayHeight\",\n    value: function () {\n      return this._workSpace.getAllDayHeight();\n    }\n  }, {\n    key: \"getWorkSpaceAllDayOffset\",\n    value: function () {\n      return this._workSpace.getAllDayOffset();\n    }\n  }, {\n    key: \"getWorkSpaceHeaderPanelHeight\",\n    value: function () {\n      return this._workSpace.getHeaderPanelHeight();\n    }\n  }, {\n    key: \"getWorkSpaceDateTableOffset\",\n    value: function () {\n      return !this.option(\"crossScrollingEnabled\") || this.option(\"rtlEnabled\") ? this._workSpace.getWorkSpaceLeftOffset() : 0;\n    }\n  }, {\n    key: \"getWorkSpace\",\n    value: function () {\n      return this._workSpace;\n    }\n  }, {\n    key: \"getAppointmentModel\",\n    value: function () {\n      return this._appointmentModel;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function () {\n      return this._header;\n    }\n  }, {\n    key: \"getMaxAppointmentsPerCell\",\n    value: function () {\n      return this._getCurrentViewOption(\"maxAppointmentsPerCell\");\n    }\n  }, {\n    key: \"_cleanPopup\",\n    value: function () {\n      this._appointmentPopup && this._appointmentPopup.dispose();\n    }\n  }, {\n    key: \"_checkRecurringAppointment\",\n    value: function (targetAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent) {\n      var _this12 = this;\n\n      delete this._updatedRecAppointment;\n      var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", targetAppointment);\n\n      if (!(0, _recurrence.getRecurrenceProcessor)().evalRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\n        callback();\n        return;\n      }\n\n      var editMode = this.option(\"recurrenceEditMode\");\n\n      switch (editMode) {\n        case \"series\":\n          callback();\n          break;\n\n        case \"occurrence\":\n          this._excludeAppointmentFromSeries(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n\n          break;\n\n        default:\n          if (dragEvent) {\n            dragEvent.cancel = new _deferred.Deferred();\n          }\n\n          this._showRecurrenceChangeConfirm(isDeleted).done(function (result) {\n            result && callback();\n            !result && _this12._excludeAppointmentFromSeries(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n          }).fail(function () {\n            return _this12._appointments.moveAppointmentBack(dragEvent);\n          });\n\n      }\n    }\n  }, {\n    key: \"_excludeAppointmentFromSeries\",\n    value: function (rawAppointment, newRawAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\n      var _this13 = this;\n\n      var appointment = this.createAppointmentAdapter(_objectSpread({}, rawAppointment));\n      var newAppointment = this.createAppointmentAdapter(newRawAppointment);\n      newAppointment.recurrenceRule = \"\";\n      newAppointment.recurrenceException = \"\";\n      var canCreateNewAppointment = !isDeleted && !isPopupEditing;\n\n      if (canCreateNewAppointment) {\n        var keyPropertyName = this._appointmentModel.keyName;\n        delete newRawAppointment[keyPropertyName];\n        this.addAppointment(newRawAppointment);\n      }\n\n      appointment.recurrenceException = this._createRecurrenceException(appointment, exceptionDate);\n\n      if (isPopupEditing) {\n        this._updatedRecAppointment = appointment.source();\n\n        this._appointmentPopup.show(newRawAppointment, true);\n\n        this._editAppointmentData = rawAppointment;\n      } else {\n        this._updateAppointment(rawAppointment, appointment.source(), function () {\n          _this13._appointments.moveAppointmentBack(dragEvent);\n        }, dragEvent);\n      }\n    }\n  }, {\n    key: \"_createRecurrenceException\",\n    value: function (appointment, exceptionDate) {\n      var result = [];\n\n      if (appointment.recurrenceException) {\n        result.push(appointment.recurrenceException);\n      }\n\n      result.push(this._getSerializedDate(exceptionDate, appointment.startDate, appointment.allDay));\n      return result.join();\n    }\n  }, {\n    key: \"_getSerializedDate\",\n    value: function (date, startDate, isAllDay) {\n      isAllDay && date.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds(), startDate.getMilliseconds());\n      return _date_serialization.default.serializeDate(date, UTC_FULL_DATE_FORMAT);\n    }\n  }, {\n    key: \"_showRecurrenceChangeConfirm\",\n    value: function (isDeleted) {\n      var message = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\n\n      var seriesText = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\n\n      var occurrenceText = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\n\n      return (0, _dialog.custom)({\n        messageHtml: message,\n        showCloseButton: true,\n        showTitle: true,\n        buttons: [{\n          text: seriesText,\n          onClick: function () {\n            return true;\n          }\n        }, {\n          text: occurrenceText,\n          onClick: function () {\n            return false;\n          }\n        }]\n      }).show();\n    }\n  }, {\n    key: \"_getUpdatedData\",\n    value: function (rawAppointment) {\n      var _this14 = this;\n\n      var getConvertedFromGrid = function (date) {\n        return date ? _this14.timeZoneCalculator.createDate(date, {\n          path: \"fromGrid\"\n        }) : void 0;\n      };\n\n      var isValidDate = function (date) {\n        return !isNaN(new Date(date).getTime());\n      };\n\n      var targetCell = this.getTargetCellData();\n      var appointment = this.createAppointmentAdapter(rawAppointment);\n      var cellStartDate = getConvertedFromGrid(targetCell.startDate);\n      var cellEndDate = getConvertedFromGrid(targetCell.endDate);\n      var appointmentStartDate = new Date(appointment.startDate);\n      var appointmentEndDate = new Date(appointment.endDate);\n      var resultedStartDate = cellStartDate || appointmentStartDate;\n\n      if (!isValidDate(appointmentStartDate)) {\n        appointmentStartDate = resultedStartDate;\n      }\n\n      if (!isValidDate(appointmentEndDate)) {\n        appointmentEndDate = cellEndDate;\n      }\n\n      var duration = appointmentEndDate.getTime() - appointmentStartDate.getTime();\n      var isKeepAppointmentHours = this._workSpace.keepOriginalHours() && isValidDate(appointment.startDate) && isValidDate(cellStartDate);\n\n      if (isKeepAppointmentHours) {\n        var trimTime = _date.default.trimTime;\n        var startDate = this.timeZoneCalculator.createDate(appointment.startDate, {\n          path: \"toGrid\"\n        });\n        var timeInMs = startDate.getTime() - trimTime(startDate).getTime();\n        resultedStartDate = new Date(trimTime(targetCell.startDate).getTime() + timeInMs);\n        resultedStartDate = this.timeZoneCalculator.createDate(resultedStartDate, {\n          path: \"fromGrid\"\n        });\n      }\n\n      var result = this.createAppointmentAdapter({});\n\n      if (void 0 !== targetCell.allDay) {\n        result.allDay = targetCell.allDay;\n      }\n\n      result.startDate = resultedStartDate;\n      var resultedEndDate = new Date(resultedStartDate.getTime() + duration);\n\n      if (this.appointmentTakesAllDay(rawAppointment) && !result.allDay && this._workSpace.supportAllDayRow()) {\n        resultedEndDate = this._workSpace.calculateEndDate(resultedStartDate);\n      }\n\n      if (appointment.allDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\n        var dateCopy = new Date(resultedStartDate);\n        dateCopy.setHours(0);\n        resultedEndDate = new Date(dateCopy.getTime() + duration);\n\n        if (0 !== resultedEndDate.getHours()) {\n          resultedEndDate.setHours(this._getCurrentViewOption(\"endDayHour\"));\n        }\n      }\n\n      var timeZoneOffset = _utils.default.getTimezoneOffsetChangeInMs(appointmentStartDate, appointmentEndDate, resultedStartDate, resultedEndDate);\n\n      result.endDate = new Date(resultedEndDate.getTime() - timeZoneOffset);\n      var rawResult = result.source();\n\n      this._resourcesManager.setResourcesToItem(rawResult, targetCell.groups);\n\n      return rawResult;\n    }\n  }, {\n    key: \"getTargetedAppointment\",\n    value: function (appointment, element) {\n      var settings = _utils2.default.dataAccessors.getAppointmentSettings(element);\n\n      var info = _utils2.default.dataAccessors.getAppointmentInfo(element);\n\n      var appointmentIndex = (0, _renderer.default)(element).data(this._appointments._itemIndexKey());\n      var adapter = this.createAppointmentAdapter(appointment);\n      var targetedAdapter = adapter.clone();\n\n      if (this._isAgenda() && adapter.isRecurrent) {\n        var getStartDate = this.getRenderingStrategyInstance().getAppointmentDataCalculator();\n        var newStartDate = getStartDate((0, _renderer.default)(element), adapter.startDate).startDate;\n        targetedAdapter.startDate = newStartDate;\n        targetedAdapter.endDate = new Date(newStartDate.getTime() + adapter.duration);\n      } else {\n        if (settings) {\n          targetedAdapter.startDate = info ? info.sourceAppointment.startDate : adapter.startDate;\n          targetedAdapter.endDate = info ? info.sourceAppointment.endDate : adapter.endDate;\n        }\n      }\n\n      var rawTargetedAppointment = targetedAdapter.source();\n\n      if (element) {\n        this.setTargetedAppointmentResources(rawTargetedAppointment, element, appointmentIndex);\n      }\n\n      return rawTargetedAppointment;\n    }\n  }, {\n    key: \"subscribe\",\n    value: function (subject, action) {\n      this._subscribes[subject] = _uiScheduler5.default[subject] = action;\n    }\n  }, {\n    key: \"fire\",\n    value: function (subject) {\n      var callback = this._subscribes[subject];\n      var args = Array.prototype.slice.call(arguments);\n\n      if (!(0, _type.isFunction)(callback)) {\n        throw _ui.default.Error(\"E1031\", subject);\n      }\n\n      return callback.apply(this, args.slice(1));\n    }\n  }, {\n    key: \"getTargetCellData\",\n    value: function () {\n      return this._workSpace.getDataByDroppableCell();\n    }\n  }, {\n    key: \"_updateAppointment\",\n    value: function (target, rawAppointment, onUpdatePrevented, dragEvent) {\n      var updatingOptions = {\n        newData: rawAppointment,\n        oldData: (0, _extend.extend)({}, target),\n        cancel: false\n      };\n\n      var performFailAction = function (err) {\n        if (onUpdatePrevented) {\n          onUpdatePrevented.call(this);\n        }\n\n        if (err && \"Error\" === err.name) {\n          throw err;\n        }\n      }.bind(this);\n\n      this._actions[StoreEventNames.UPDATING](updatingOptions);\n\n      if (dragEvent && !(0, _type.isDeferred)(dragEvent.cancel)) {\n        dragEvent.cancel = new _deferred.Deferred();\n      }\n\n      return this._processActionResult(updatingOptions, function (canceled) {\n        var _this15 = this;\n\n        var deferred = new _deferred.Deferred();\n\n        if (!canceled) {\n          this._expandAllDayPanel(rawAppointment);\n\n          try {\n            deferred = this._appointmentModel.update(target, rawAppointment).done(function () {\n              dragEvent && dragEvent.cancel.resolve(false);\n            }).always(function (storeAppointment) {\n              return _this15._onDataPromiseCompleted(StoreEventNames.UPDATED, rawAppointment, storeAppointment);\n            }).fail(function () {\n              return performFailAction();\n            });\n          } catch (err) {\n            performFailAction(err);\n            deferred.resolve();\n          }\n        } else {\n          performFailAction();\n          deferred.resolve();\n        }\n\n        return deferred.promise();\n      });\n    }\n  }, {\n    key: \"_processActionResult\",\n    value: function (actionOptions, callback) {\n      var _this16 = this;\n\n      var deferred = new _deferred.Deferred();\n\n      var resolveCallback = function (callbackResult) {\n        (0, _deferred.when)((0, _deferred.fromPromise)(callbackResult)).always(deferred.resolve);\n      };\n\n      if ((0, _type.isPromise)(actionOptions.cancel)) {\n        (0, _deferred.when)((0, _deferred.fromPromise)(actionOptions.cancel)).always(function (cancel) {\n          if (!(0, _type.isDefined)(cancel)) {\n            cancel = \"rejected\" === actionOptions.cancel.state();\n          }\n\n          resolveCallback(callback.call(_this16, cancel));\n        });\n      } else {\n        resolveCallback(callback.call(this, actionOptions.cancel));\n      }\n\n      return deferred.promise();\n    }\n  }, {\n    key: \"_expandAllDayPanel\",\n    value: function (appointment) {\n      if (!this._isAllDayExpanded(this.getFilteredItems()) && this.appointmentTakesAllDay(appointment)) {\n        this._workSpace.option(\"allDayExpanded\", true);\n      }\n    }\n  }, {\n    key: \"_onDataPromiseCompleted\",\n    value: function (handlerName, appointment, storeAppointment) {\n      var isDeletedOperation = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : false;\n      var args = {\n        appointmentData: appointment\n      };\n\n      if (storeAppointment instanceof Error) {\n        args.error = storeAppointment;\n      } else {\n        if (!isDeletedOperation) {\n          args.appointmentData = storeAppointment[0] || storeAppointment;\n        }\n\n        this._appointmentPopup.isVisible() && this._appointmentPopup.hide();\n      }\n\n      this._actions[handlerName](args);\n\n      this._fireContentReadyAction();\n    }\n  }, {\n    key: \"getAppointmentPopup\",\n    value: function () {\n      return this._appointmentPopup.getPopup();\n    }\n  }, {\n    key: \"getUpdatedAppointment\",\n    value: function () {\n      return this._appointmentModel.getUpdatedAppointment();\n    }\n  }, {\n    key: \"getUpdatedAppointmentKeys\",\n    value: function () {\n      return this._appointmentModel.getUpdatedAppointmentKeys();\n    }\n  }, {\n    key: \"getAppointmentsInstance\",\n    value: function () {\n      return this._appointments;\n    }\n  }, {\n    key: \"getResourceManager\",\n    value: function () {\n      return this._resourcesManager;\n    }\n  }, {\n    key: \"getLayoutManager\",\n    value: function () {\n      return this._layoutManager;\n    }\n  }, {\n    key: \"getRenderingStrategyInstance\",\n    value: function () {\n      return this._layoutManager.getRenderingStrategyInstance();\n    }\n  }, {\n    key: \"getFilteredItems\",\n    value: function () {\n      return this._filteredItems;\n    }\n  }, {\n    key: \"getActions\",\n    value: function () {\n      return this._actions;\n    }\n  }, {\n    key: \"appointmentTakesAllDay\",\n    value: function (appointment) {\n      return this._appointmentModel.appointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"));\n    }\n  }, {\n    key: \"_getRecurrenceException\",\n    value: function (rawAppointment) {\n      var appointment = this.createAppointmentAdapter(rawAppointment);\n      var recurrenceException = appointment.recurrenceException;\n\n      if (recurrenceException) {\n        var exceptions = recurrenceException.split(\",\");\n\n        for (var i = 0; i < exceptions.length; i++) {\n          exceptions[i] = this._convertRecurrenceException(exceptions[i], appointment.startDate);\n        }\n\n        return exceptions.join();\n      }\n\n      return recurrenceException;\n    }\n  }, {\n    key: \"_convertRecurrenceException\",\n    value: function (exceptionString, startDate) {\n      var _this17 = this;\n\n      exceptionString = exceptionString.replace(/\\s/g, \"\");\n\n      var getConvertedToTimeZone = function (date) {\n        return _this17.timeZoneCalculator.createDate(date, {\n          path: \"toGrid\"\n        });\n      };\n\n      var exceptionDate = _date_serialization.default.deserializeDate(exceptionString);\n\n      var convertedStartDate = getConvertedToTimeZone(startDate);\n      var convertedExceptionDate = getConvertedToTimeZone(exceptionDate);\n      convertedExceptionDate = _utils.default.correctRecurrenceExceptionByTimezone(convertedExceptionDate, convertedStartDate, this.option(\"timeZone\"));\n      exceptionString = _date_serialization.default.serializeDate(convertedExceptionDate, FULL_DATE_FORMAT);\n      return exceptionString;\n    }\n  }, {\n    key: \"dayHasAppointment\",\n    value: function (day, rawAppointment, trimTime) {\n      var _this18 = this;\n\n      var getConvertedToTimeZone = function (date) {\n        return _this18.timeZoneCalculator.createDate(date, {\n          path: \"toGrid\"\n        });\n      };\n\n      var appointment = this.createAppointmentAdapter(rawAppointment);\n      var startDate = new Date(appointment.startDate);\n      var endDate = new Date(appointment.endDate);\n      startDate = getConvertedToTimeZone(startDate);\n      endDate = getConvertedToTimeZone(endDate);\n\n      if (day.getTime() === endDate.getTime()) {\n        return startDate.getTime() === endDate.getTime();\n      }\n\n      if (trimTime) {\n        day = _date.default.trimTime(day);\n        startDate = _date.default.trimTime(startDate);\n        endDate = _date.default.trimTime(endDate);\n      }\n\n      var dayTimeStamp = day.getTime();\n      var startDateTimeStamp = startDate.getTime();\n      var endDateTimeStamp = endDate.getTime();\n      return (0, _array.inArray)(dayTimeStamp, [startDateTimeStamp, endDateTimeStamp]) > -1 || startDateTimeStamp < dayTimeStamp && endDateTimeStamp > dayTimeStamp;\n    }\n  }, {\n    key: \"setTargetedAppointmentResources\",\n    value: function (rawAppointment, element, appointmentIndex) {\n      var groups = this._getCurrentViewOption(\"groups\");\n\n      if (null !== groups && void 0 !== groups && groups.length) {\n        var resourcesSetter = this._resourcesManager._dataAccessors.setter;\n        var workSpace = this._workSpace;\n        var getGroups;\n        var setResourceCallback;\n\n        if (this._isAgenda()) {\n          getGroups = function () {\n            var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\n\n            return workSpace._getCellGroups(apptSettings[0].groupIndex);\n          };\n\n          setResourceCallback = function (_, group) {\n            resourcesSetter[group.name](rawAppointment, group.id);\n          };\n        } else {\n          getGroups = function () {\n            var setting = _utils2.default.dataAccessors.getAppointmentSettings(element) || {};\n            return workSpace.getCellDataByCoordinates({\n              left: setting.left,\n              top: setting.top\n            }).groups;\n          };\n\n          setResourceCallback = function (field, value) {\n            resourcesSetter[field](rawAppointment, value);\n          };\n        }\n\n        (0, _iterator.each)(getGroups.call(this), setResourceCallback);\n      }\n    }\n  }, {\n    key: \"getStartViewDate\",\n    value: function () {\n      return this._workSpace.getStartViewDate();\n    }\n  }, {\n    key: \"getEndViewDate\",\n    value: function () {\n      return this._workSpace.getEndViewDate();\n    }\n  }, {\n    key: \"showAppointmentPopup\",\n    value: function (rawAppointment, createNewAppointment, rawTargetedAppointment) {\n      var _this19 = this;\n\n      var appointment = this.createAppointmentAdapter(rawTargetedAppointment || rawAppointment);\n      var newTargetedAppointment = (0, _extend.extend)({}, rawAppointment, rawTargetedAppointment);\n\n      this._checkRecurringAppointment(rawAppointment, newTargetedAppointment, appointment.startDate, function () {\n        if (createNewAppointment || (0, _type.isEmptyObject)(rawAppointment)) {\n          delete _this19._editAppointmentData;\n          _this19._editing.allowAdding && _this19._appointmentPopup.show(rawAppointment, true);\n        } else {\n          _this19._editAppointmentData = rawAppointment;\n\n          _this19._appointmentPopup.show(rawAppointment, _this19._editing.allowUpdating);\n        }\n      }, false, true);\n    }\n  }, {\n    key: \"hideAppointmentPopup\",\n    value: function (saveChanges) {\n      if (this._appointmentPopup && this._appointmentPopup.isVisible()) {\n        saveChanges && this._appointmentPopup.saveChanges();\n\n        this._appointmentPopup.hide();\n      }\n    }\n  }, {\n    key: \"showAppointmentTooltip\",\n    value: function (appointment, target, targetedAppointment) {\n      if (appointment) {\n        var info = new _dataStructures.AppointmentTooltipInfo(appointment, targetedAppointment, this._appointments._tryGetAppointmentColor(target));\n        this.showAppointmentTooltipCore(target, [info]);\n      }\n    }\n  }, {\n    key: \"showAppointmentTooltipCore\",\n    value: function (target, data, options) {\n      if (this._appointmentTooltip.isAlreadyShown(target)) {\n        this.hideAppointmentTooltip();\n      } else {\n        this._appointmentTooltip.show(target, data, (0, _extend.extend)(this._getExtraAppointmentTooltipOptions(), options));\n      }\n    }\n  }, {\n    key: \"hideAppointmentTooltip\",\n    value: function () {\n      this._appointmentTooltip && this._appointmentTooltip.hide();\n    }\n  }, {\n    key: \"scrollToTime\",\n    value: function (hours, minutes, date) {\n      this._workSpace.scrollToTime(hours, minutes, date);\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function (date, groups, allDay) {\n      this._workSpace.scrollTo(date, groups, allDay);\n    }\n  }, {\n    key: \"addAppointment\",\n    value: function (rawAppointment) {\n      var _this20 = this;\n\n      var appointment = this.createAppointmentAdapter(rawAppointment);\n      appointment.text = appointment.text || \"\";\n      var serializedAppointment = appointment.source(true);\n      var addingOptions = {\n        appointmentData: serializedAppointment,\n        cancel: false\n      };\n\n      this._actions[StoreEventNames.ADDING](addingOptions);\n\n      return this._processActionResult(addingOptions, function (canceled) {\n        if (canceled) {\n          return new _deferred.Deferred().resolve();\n        }\n\n        _this20._expandAllDayPanel(serializedAppointment);\n\n        return _this20._appointmentModel.add(serializedAppointment).always(function (storeAppointment) {\n          return _this20._onDataPromiseCompleted(StoreEventNames.ADDED, serializedAppointment, storeAppointment);\n        });\n      });\n    }\n  }, {\n    key: \"updateAppointment\",\n    value: function (target, appointment) {\n      return this._updateAppointment(target, appointment);\n    }\n  }, {\n    key: \"deleteAppointment\",\n    value: function (rawAppointment) {\n      var deletingOptions = {\n        appointmentData: rawAppointment,\n        cancel: false\n      };\n\n      this._actions[StoreEventNames.DELETING](deletingOptions);\n\n      this._processActionResult(deletingOptions, function (canceled) {\n        var _this21 = this;\n\n        if (!canceled) {\n          this._appointmentModel.remove(rawAppointment).always(function (storeAppointment) {\n            return _this21._onDataPromiseCompleted(StoreEventNames.DELETED, rawAppointment, storeAppointment, true);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"focus\",\n    value: function () {\n      if (this._editAppointmentData) {\n        this._appointments.focus();\n      } else {\n        this._workSpace.focus();\n      }\n    }\n  }, {\n    key: \"getFirstDayOfWeek\",\n    value: function () {\n      return (0, _type.isDefined)(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : _date2.default.firstDayOfWeekIndex();\n    }\n  }, {\n    key: \"createAppointmentAdapter\",\n    value: function (rawAppointment) {\n      var _this22 = this;\n\n      var options = {\n        getField: function (rawAppointment, property) {\n          return _this22.fire(\"getField\", property, rawAppointment);\n        },\n        setField: function (rawAppointment, property, value) {\n          return _this22.fire(\"setField\", property, rawAppointment, value);\n        },\n        getTimeZoneCalculator: function () {\n          return _this22.timeZoneCalculator;\n        }\n      };\n      return new _appointmentAdapter.default(rawAppointment, options);\n    }\n  }]);\n\n  return Scheduler;\n}(_ui2.default);\n\nScheduler.include(_data_helper.default);\n(0, _component_registrator.default)(\"dxScheduler\", Scheduler);\nvar _default = Scheduler;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Users/hp/Downloads/quantumCode20082022/node_modules/devextreme/ui/scheduler/ui.scheduler.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","default","_component_registrator","_interopRequireDefault","require","_config","_devices","_renderer","_bindable_template","_empty_template","_array","_browser","_callbacks","_common","_data","_position","_date","_date_serialization","_deferred","_extend","_iterator","_support","_type","_window","_data_helper","_visibility_change","_date2","_message","_dialog","_themes","_ui","_ui2","_appointmentPopup","_compactAppointmentsHelper","_desktopTooltipStrategy","_mobileTooltipStrategy","_ui3","_uiScheduler","_uiSchedulerAppointments","_uiScheduler2","_uiScheduler3","_uiScheduler4","_uiScheduler5","_recurrence","_utils","_uiScheduler6","_uiScheduler7","_uiScheduler8","_uiScheduler9","_uiScheduler10","_uiScheduler11","_uiScheduler12","_uiScheduler13","_uiScheduler14","_appointmentAdapter","_timeZoneCalculator","_dataStructures","_appointmentSettingsGenerator","_utils2","__esModule","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","call","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","MINUTES_IN_HOUR","WIDGET_CLASS","WIDGET_SMALL_CLASS","concat","WIDGET_ADAPTIVE_CLASS","WIDGET_WIN_NO_TOUCH_CLASS","WIDGET_READONLY_CLASS","WIDGET_SMALL_WIDTH","FULL_DATE_FORMAT","UTC_FULL_DATE_FORMAT","VIEWS_CONFIG","day","workSpace","renderingStrategy","week","workWeek","month","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","agenda","StoreEventNames","ADDING","ADDED","DELETING","DELETED","UPDATING","UPDATED","Scheduler","_Widget","_super","defaultOptions","extend","views","currentView","currentDate","trimTime","min","max","dateSerializationFormat","firstDayOfWeek","groups","resources","dataSource","customizeDateNavigatorText","appointmentTemplate","dropDownAppointmentTemplate","appointmentCollectorTemplate","dataCellTemplate","timeCellTemplate","resourceCellTemplate","dateCellTemplate","startDayHour","endDayHour","editing","allowAdding","allowDeleting","allowDragging","allowResizing","allowUpdating","allowTimeZoneEditing","allowEditingTimeZones","showAllDayPanel","showCurrentTimeIndicator","shadeUntilCurrentTime","indicatorUpdateInterval","indicatorTime","recurrenceEditMode","cellDuration","maxAppointmentsPerCell","selectedCellData","groupByDate","onAppointmentRendered","onAppointmentClick","onAppointmentDblClick","onAppointmentContextMenu","onCellClick","onCellContextMenu","onAppointmentAdding","onAppointmentAdded","onAppointmentUpdating","onAppointmentUpdated","onAppointmentDeleting","onAppointmentDeleted","onAppointmentFormOpening","appointmentTooltipTemplate","appointmentPopupTemplate","crossScrollingEnabled","useDropDownViewSwitcher","startDateExpr","endDateExpr","textExpr","descriptionExpr","allDayExpr","recurrenceRuleExpr","recurrenceExceptionExpr","disabledExpr","remoteFiltering","timeZone","startDateTimeZoneExpr","endDateTimeZoneExpr","noDataText","format","adaptivityEnabled","allowMultipleCellSelection","scrolling","mode","renovateRender","_appointmentTooltipOffset","x","y","_appointmentTooltipButtonsPosition","_appointmentTooltipOpenButtonText","_dropDownButtonIcon","_appointmentCountPerCell","_collectorOffset","_appointmentOffset","integrationOptions","useDeferUpdateForTemplates","device","real","deviceType","isSimulator","options","focusStateEnabled","current","generic","isMaterial","data","index","element","text","split","span","addClass","append","_deprecatedOptions","since","message","alias","AppointmentSettingsGenerator","promise","postponedOperations","add","_reloadDataSource","bind","_this","whenLoaded","_loadResources","resolveCallbacks","Deferred","done","resolve","_postponeDataSourceLoading","args","_this2","name","_updateOption","_dateOption","option","_workSpace","_header","_getViewStartByOptions","_appointments","_filterAppointmentsByDate","_initDataSource","_appointmentModel","setDataSource","_dataSource","_postponeResourceLoading","_processCurrentView","_getCurrentViewOptions","repaint","fire","getLayoutManager","initRenderingStrategy","_getAppointmentsRenderingStrategy","_validateCellDuration","items","allowDrag","_allowDragging","allowResize","_allowResizing","itemTemplate","_getAppointmentTemplate","_refreshWorkSpace","_updateHeader","_resourcesManager","setResources","setDataAccessors","_combineDataAccessors","_actions","_createActionByOption","_getAppointmentRenderedAction","_readyToRenderAppointments","_getAppointmentsToRepaint","_dimensionChanged","_initEditing","_editing","_bringEditingModeToAppointments","hideAppointmentTooltip","_cleanPopup","_updateExpression","_initAppointmentTemplate","_toggleAdaptiveClass","fullName","viewCountConfig","_getViewCountConfig","intervalCount","_getCurrentViewOption","_currentView","optionName","optionValue","deserializeDate","isString","getDateSerializationFormat","editingConfig","allowDelete","_isAgenda","allowAllDayResize","_supportAllDayResizing","_getCurrentViewType","hasAllDayAppointments","date","calculateTimezoneByValue","dateRange","getDateRange","filterByDate","loadResources","_loadedResources","load","hide","_fireContentReadyAction","fail","reject","isLoading","show","container","$element","position","of","contentReadyBase","fireContentReady","_workSpaceRecalculation","_this$_workSpaceRecal","filteredItems","getFilteredItems","_toggleSmallClass","_isVisible","_cleanAllowedPositions","_isAllDayExpanded","appointments","_layoutManager","createAppointmentsMap","triggerResize","updatePopupFullScreenMode","width","getBoundingRect","toggleClass","visible","paginate","_this3","_initExpressions","startDate","endDate","startDateTimeZone","endDateTimeZone","allDay","description","recurrenceRule","recurrenceException","disabled","msie","touch","combinedDataAccessors","getAppointmentDurationInMinutes","_initActions","CompactAppointmentsHelper","_asyncTemplatesTimers","_dataSourceLoadedCallback","_subscribes","timeZoneCalculator","TimeZoneCalculator","getClientOffset","getClientTimezoneOffset","getCommonOffset","getAppointmentOffset","appointmentTimezone","_templateManager","addDefaultTemplates","appointmentTooltip","EmptyTemplate","dropDownAppointment","_this4","expr","_dataAccessors","createGetter","compileGetter","BindableTemplate","$container","model","getAppointmentsInstance","_renderAppointmentTemplate","resourcesDataAccessors","each","type","accessor","_renderContentImpl","_renderAppointments","_renderView","fireWith","_this$getWorkSpace","getWorkSpace","isVirtualScrolling","prerenderFilterName","_filteredItems","_filterAppointments","getRenderingStrategyInstance","calculateRows","cleanModelState","getRepaintedAppointments","fields","isDateField","field","getter","setter","compileSetter","dateGetter","dateSetter","that","forceIsoDateParsing","serializeDate","exprObj","replace","isObject","_isReadOnly","prop","_appointmentTooltip","dispose","hideAppointmentPopup","clearTimeout","excludeValidators","noop","_renderHeader","_createComponent","_appointmentsConfig","MobileTooltipStrategy","DesktopTooltipStrategy","_getAppointmentTooltipOptions","_isLoaded","_isDataSourceLoading","_initMarkupCore","_dataSourceChangedHandler","_this5","createComponent","getScrollableContainer","getWorkSpaceScrollableContainer","getAppointmentTemplate","showAppointmentPopup","checkAndDeleteAppointment","isAppointmentInAllDayPanel","createFormattedDateText","appointment","targetedAppointment","getAppointmentDisabled","createAppointmentAdapter","_this6","targetedAdapter","_checkRecurringAppointment","deleteAppointment","rtlEnabled","offset","appointmentData","itTakesAllDay","appointmentTakesAllDay","supportAllDayRow","_this7","hasWindow","_cleanWorkspace","_renderWorkSpace","fixedContainer","getFixedContainer","allDayContainer","getAllDayContainer","_waitAsyncTemplate","_this7$_workSpaceReca","_isResourcesLoaded","_isDataSourceLoaded","isDefined","isLoaded","$header","appendTo","_headerConfig","_this8","currentViewOptions","countConfig","isAdaptive","tabIndex","observer","todayDate","createDate","path","config","onItemRendered","onItemClick","onItemContextMenu","_allowAllDayResizing","onContentReady","needApplyCollectorOffset","_","view","isViewIsObject","viewName","viewType","log","$workSpace","workSpaceComponent","workSpaceConfig","_workSpaceConfig","initDragBehavior","_all","_attachTablesEvents","getWorkArea","_recalculateWorkspace","_getHeaderDate","getCollectorOffset","_getViewByName","viewCount","_this9","triggerResizeEvent","_refreshDateTimeIndication","_currentViewOptions$s","_this10","accessKey","allDayExpanded","onSelectionChanged","hoursInterval","_getTemplate","callback","_options","silent","timer","setTimeout","_getTemplateByOption","_this11","detach","_dispose","remove","getScrollable","getGroupedScrollableScrollTop","getScrollableScrollLeft","getAllDayHeight","getAllDayOffset","getHeaderPanelHeight","getWorkSpaceLeftOffset","targetAppointment","singleAppointment","exceptionDate","isDeleted","isPopupEditing","dragEvent","_this12","_updatedRecAppointment","getRecurrenceProcessor","evalRecurrenceRule","isValid","editMode","_excludeAppointmentFromSeries","cancel","_showRecurrenceChangeConfirm","moveAppointmentBack","rawAppointment","newRawAppointment","_this13","newAppointment","canCreateNewAppointment","keyPropertyName","keyName","addAppointment","_createRecurrenceException","_editAppointmentData","_updateAppointment","_getSerializedDate","join","isAllDay","setHours","getHours","getMinutes","getSeconds","getMilliseconds","seriesText","occurrenceText","custom","messageHtml","showCloseButton","showTitle","buttons","onClick","_this14","getConvertedFromGrid","isValidDate","isNaN","getTime","targetCell","getTargetCellData","cellStartDate","cellEndDate","appointmentStartDate","appointmentEndDate","resultedStartDate","duration","isKeepAppointmentHours","keepOriginalHours","timeInMs","resultedEndDate","calculateEndDate","dateCopy","timeZoneOffset","getTimezoneOffsetChangeInMs","rawResult","setResourcesToItem","settings","dataAccessors","getAppointmentSettings","info","getAppointmentInfo","appointmentIndex","_itemIndexKey","adapter","clone","isRecurrent","getStartDate","getAppointmentDataCalculator","newStartDate","sourceAppointment","rawTargetedAppointment","setTargetedAppointmentResources","subject","action","Array","slice","isFunction","Error","getDataByDroppableCell","onUpdatePrevented","updatingOptions","newData","oldData","performFailAction","err","isDeferred","_processActionResult","canceled","_this15","deferred","_expandAllDayPanel","update","always","storeAppointment","_onDataPromiseCompleted","actionOptions","_this16","resolveCallback","callbackResult","when","fromPromise","isPromise","state","handlerName","isDeletedOperation","error","isVisible","getPopup","getUpdatedAppointment","getUpdatedAppointmentKeys","exceptions","_convertRecurrenceException","exceptionString","_this17","getConvertedToTimeZone","convertedStartDate","convertedExceptionDate","correctRecurrenceExceptionByTimezone","_this18","dayTimeStamp","startDateTimeStamp","endDateTimeStamp","inArray","resourcesSetter","getGroups","setResourceCallback","apptSettings","_positionMap","_getCellGroups","groupIndex","group","id","setting","getCellDataByCoordinates","left","top","getStartViewDate","getEndViewDate","createNewAppointment","_this19","newTargetedAppointment","isEmptyObject","saveChanges","AppointmentTooltipInfo","_tryGetAppointmentColor","showAppointmentTooltipCore","isAlreadyShown","_getExtraAppointmentTooltipOptions","hours","minutes","scrollToTime","scrollTo","_this20","serializedAppointment","addingOptions","deletingOptions","_this21","focus","firstDayOfWeekIndex","_this22","getField","setField","getTimeZoneCalculator","include","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.default = void 0;\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _config = _interopRequireDefault(require(\"../../core/config\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\nvar _empty_template = require(\"../../core/templates/empty_template\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _position = require(\"../../core/utils/position\");\r\nvar _date = _interopRequireDefault(require(\"../../core/utils/date\"));\r\nvar _date_serialization = _interopRequireDefault(require(\"../../core/utils/date_serialization\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _support = require(\"../../core/utils/support\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _data_helper = _interopRequireDefault(require(\"../../data_helper\"));\r\nvar _visibility_change = require(\"../../events/visibility_change\");\r\nvar _date2 = _interopRequireDefault(require(\"../../localization/date\"));\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _dialog = require(\"../dialog\");\r\nvar _themes = require(\"../themes\");\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.errors\"));\r\nvar _ui2 = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _appointmentPopup = _interopRequireDefault(require(\"./appointmentPopup\"));\r\nvar _compactAppointmentsHelper = require(\"./compactAppointmentsHelper\");\r\nvar _desktopTooltipStrategy = require(\"./tooltip_strategies/desktopTooltipStrategy\");\r\nvar _mobileTooltipStrategy = require(\"./tooltip_strategies/mobileTooltipStrategy\");\r\nvar _ui3 = require(\"./ui.loading\");\r\nvar _uiScheduler = _interopRequireDefault(require(\"./ui.scheduler.appointments\"));\r\nvar _uiSchedulerAppointments = _interopRequireDefault(require(\"./ui.scheduler.appointments.layout_manager\"));\r\nvar _uiScheduler2 = _interopRequireDefault(require(\"./ui.scheduler.appointment_model\"));\r\nvar _uiScheduler3 = _interopRequireDefault(require(\"./ui.scheduler.header\"));\r\nvar _uiScheduler4 = _interopRequireDefault(require(\"./ui.scheduler.resource_manager\"));\r\nvar _uiScheduler5 = _interopRequireDefault(require(\"./ui.scheduler.subscribes\"));\r\nvar _recurrence = require(\"./recurrence\");\r\nvar _utils = _interopRequireDefault(require(\"./utils.timeZone\"));\r\nvar _uiScheduler6 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.agenda\"));\r\nvar _uiScheduler7 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_day\"));\r\nvar _uiScheduler8 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_month\"));\r\nvar _uiScheduler9 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_week\"));\r\nvar _uiScheduler10 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_work_week\"));\r\nvar _uiScheduler11 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_day\"));\r\nvar _uiScheduler12 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_month\"));\r\nvar _uiScheduler13 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_week\"));\r\nvar _uiScheduler14 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_work_week\"));\r\nvar _appointmentAdapter = _interopRequireDefault(require(\"./appointmentAdapter\"));\r\nvar _timeZoneCalculator = require(\"./timeZoneCalculator\");\r\nvar _dataStructures = require(\"./dataStructures\");\r\nvar _appointmentSettingsGenerator = require(\"./appointmentSettingsGenerator\");\r\nvar _utils2 = _interopRequireDefault(require(\"./utils\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction ownKeys(object, enumerableOnly) {\r\n    var keys = Object.keys(object);\r\n    if (Object.getOwnPropertySymbols) {\r\n        var symbols = Object.getOwnPropertySymbols(object);\r\n        if (enumerableOnly) {\r\n            symbols = symbols.filter(function(sym) {\r\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable\r\n            })\r\n        }\r\n        keys.push.apply(keys, symbols)\r\n    }\r\n    return keys\r\n}\r\n\r\nfunction _objectSpread(target) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n        var source = null != arguments[i] ? arguments[i] : {};\r\n        if (i % 2) {\r\n            ownKeys(Object(source), true).forEach(function(key) {\r\n                _defineProperty(target, key, source[key])\r\n            })\r\n        } else {\r\n            if (Object.getOwnPropertyDescriptors) {\r\n                Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\r\n            } else {\r\n                ownKeys(Object(source)).forEach(function(key) {\r\n                    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\r\n                })\r\n            }\r\n        }\r\n    }\r\n    return target\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (hasNativeReflectConstruct) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\nvar MINUTES_IN_HOUR = 60;\r\nvar WIDGET_CLASS = \"dx-scheduler\";\r\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\r\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\r\nvar WIDGET_WIN_NO_TOUCH_CLASS = \"\".concat(WIDGET_CLASS, \"-win-no-touch\");\r\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\r\nvar WIDGET_SMALL_WIDTH = 400;\r\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\r\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\r\nvar VIEWS_CONFIG = {\r\n    day: {\r\n        workSpace: _uiScheduler11.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    week: {\r\n        workSpace: _uiScheduler13.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    workWeek: {\r\n        workSpace: _uiScheduler14.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    month: {\r\n        workSpace: _uiScheduler12.default,\r\n        renderingStrategy: \"horizontalMonth\"\r\n    },\r\n    timelineDay: {\r\n        workSpace: _uiScheduler7.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWeek: {\r\n        workSpace: _uiScheduler9.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWorkWeek: {\r\n        workSpace: _uiScheduler10.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineMonth: {\r\n        workSpace: _uiScheduler8.default,\r\n        renderingStrategy: \"horizontalMonthLine\"\r\n    },\r\n    agenda: {\r\n        workSpace: _uiScheduler6.default,\r\n        renderingStrategy: \"agenda\"\r\n    }\r\n};\r\nvar StoreEventNames = {\r\n    ADDING: \"onAppointmentAdding\",\r\n    ADDED: \"onAppointmentAdded\",\r\n    DELETING: \"onAppointmentDeleting\",\r\n    DELETED: \"onAppointmentDeleted\",\r\n    UPDATING: \"onAppointmentUpdating\",\r\n    UPDATED: \"onAppointmentUpdated\"\r\n};\r\nvar Scheduler = function(_Widget) {\r\n    _inherits(Scheduler, _Widget);\r\n    var _super = _createSuper(Scheduler);\r\n\r\n    function Scheduler() {\r\n        _classCallCheck(this, Scheduler);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(Scheduler, [{\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            var defaultOptions = (0, _extend.extend)(_get(_getPrototypeOf(Scheduler.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                views: [\"day\", \"week\"],\r\n                currentView: \"day\",\r\n                currentDate: _date.default.trimTime(new Date),\r\n                min: void 0,\r\n                max: void 0,\r\n                dateSerializationFormat: void 0,\r\n                firstDayOfWeek: void 0,\r\n                groups: [],\r\n                resources: [],\r\n                dataSource: null,\r\n                customizeDateNavigatorText: void 0,\r\n                appointmentTemplate: \"item\",\r\n                dropDownAppointmentTemplate: \"dropDownAppointment\",\r\n                appointmentCollectorTemplate: \"appointmentCollector\",\r\n                dataCellTemplate: null,\r\n                timeCellTemplate: null,\r\n                resourceCellTemplate: null,\r\n                dateCellTemplate: null,\r\n                startDayHour: 0,\r\n                endDayHour: 24,\r\n                editing: {\r\n                    allowAdding: true,\r\n                    allowDeleting: true,\r\n                    allowDragging: true,\r\n                    allowResizing: true,\r\n                    allowUpdating: true,\r\n                    allowTimeZoneEditing: false,\r\n                    allowEditingTimeZones: false\r\n                },\r\n                showAllDayPanel: true,\r\n                showCurrentTimeIndicator: true,\r\n                shadeUntilCurrentTime: false,\r\n                indicatorUpdateInterval: 3e5,\r\n                indicatorTime: void 0,\r\n                recurrenceEditMode: \"dialog\",\r\n                cellDuration: 30,\r\n                maxAppointmentsPerCell: \"auto\",\r\n                selectedCellData: [],\r\n                groupByDate: false,\r\n                onAppointmentRendered: null,\r\n                onAppointmentClick: null,\r\n                onAppointmentDblClick: null,\r\n                onAppointmentContextMenu: null,\r\n                onCellClick: null,\r\n                onCellContextMenu: null,\r\n                onAppointmentAdding: null,\r\n                onAppointmentAdded: null,\r\n                onAppointmentUpdating: null,\r\n                onAppointmentUpdated: null,\r\n                onAppointmentDeleting: null,\r\n                onAppointmentDeleted: null,\r\n                onAppointmentFormOpening: null,\r\n                appointmentTooltipTemplate: \"appointmentTooltip\",\r\n                appointmentPopupTemplate: \"appointmentPopup\",\r\n                crossScrollingEnabled: false,\r\n                useDropDownViewSwitcher: false,\r\n                startDateExpr: \"startDate\",\r\n                endDateExpr: \"endDate\",\r\n                textExpr: \"text\",\r\n                descriptionExpr: \"description\",\r\n                allDayExpr: \"allDay\",\r\n                recurrenceRuleExpr: \"recurrenceRule\",\r\n                recurrenceExceptionExpr: \"recurrenceException\",\r\n                disabledExpr: \"disabled\",\r\n                remoteFiltering: false,\r\n                timeZone: \"\",\r\n                startDateTimeZoneExpr: \"startDateTimeZone\",\r\n                endDateTimeZoneExpr: \"endDateTimeZone\",\r\n                noDataText: _message.default.format(\"dxCollectionWidget-noDataText\"),\r\n                adaptivityEnabled: false,\r\n                allowMultipleCellSelection: true,\r\n                scrolling: {\r\n                    mode: \"standard\"\r\n                },\r\n                renovateRender: false,\r\n                _appointmentTooltipOffset: {\r\n                    x: 0,\r\n                    y: 0\r\n                },\r\n                _appointmentTooltipButtonsPosition: \"bottom\",\r\n                _appointmentTooltipOpenButtonText: _message.default.format(\"dxScheduler-openAppointment\"),\r\n                _dropDownButtonIcon: \"overflow\",\r\n                _appointmentCountPerCell: 2,\r\n                _collectorOffset: 0,\r\n                _appointmentOffset: 26\r\n            });\r\n            return (0, _extend.extend)(true, defaultOptions, {\r\n                integrationOptions: {\r\n                    useDeferUpdateForTemplates: false\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_defaultOptionsRules\",\r\n        value: function() {\r\n            return _get(_getPrototypeOf(Scheduler.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\r\n                device: function() {\r\n                    return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n                },\r\n                options: {\r\n                    focusStateEnabled: true\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return !_devices.default.current().generic\r\n                },\r\n                options: {\r\n                    useDropDownViewSwitcher: true,\r\n                    editing: {\r\n                        allowDragging: false,\r\n                        allowResizing: false\r\n                    }\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return (0, _themes.isMaterial)()\r\n                },\r\n                options: {\r\n                    useDropDownViewSwitcher: true,\r\n                    dateCellTemplate: function(data, index, element) {\r\n                        var text = data.text;\r\n                        text.split(\" \").forEach(function(text, index) {\r\n                            var span = (0, _renderer.default)(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\r\n                            (0, _renderer.default)(element).append(span);\r\n                            if (!index) {\r\n                                (0, _renderer.default)(element).append(\" \")\r\n                            }\r\n                        })\r\n                    },\r\n                    _appointmentTooltipOffset: {\r\n                        x: 0,\r\n                        y: 11\r\n                    },\r\n                    _appointmentTooltipButtonsPosition: \"top\",\r\n                    _appointmentTooltipOpenButtonText: null,\r\n                    _dropDownButtonIcon: \"chevrondown\",\r\n                    _appointmentCountPerCell: 1,\r\n                    _collectorOffset: 20,\r\n                    _appointmentOffset: 30\r\n                }\r\n            }])\r\n        }\r\n    }, {\r\n        key: \"_setDeprecatedOptions\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(Scheduler.prototype), \"_setDeprecatedOptions\", this).call(this);\r\n            (0, _extend.extend)(this._deprecatedOptions, {\r\n                dropDownAppointmentTemplate: {\r\n                    since: \"19.2\",\r\n                    message: \"appointmentTooltipTemplate\"\r\n                },\r\n                allowEditingTimeZones: {\r\n                    since: \"20.1\",\r\n                    alias: \"allowTimeZoneEditing\"\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getAppointmentSettingsGenerator\",\r\n        value: function() {\r\n            return new _appointmentSettingsGenerator.AppointmentSettingsGenerator(this)\r\n        }\r\n    }, {\r\n        key: \"_postponeDataSourceLoading\",\r\n        value: function(promise) {\r\n            this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise)\r\n        }\r\n    }, {\r\n        key: \"_postponeResourceLoading\",\r\n        value: function() {\r\n            var _this = this;\r\n            var whenLoaded = this.postponedOperations.add(\"_loadResources\", function() {\r\n                return _this._loadResources()\r\n            });\r\n            var resolveCallbacks = new _deferred.Deferred;\r\n            whenLoaded.done(function(resources) {\r\n                resolveCallbacks.resolve(resources)\r\n            });\r\n            this._postponeDataSourceLoading(whenLoaded);\r\n            return resolveCallbacks.promise()\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            var _this2 = this;\r\n            var value = args.value;\r\n            var name = args.name;\r\n            switch (args.name) {\r\n                case \"customizeDateNavigatorText\":\r\n                    this._updateOption(\"header\", name, value);\r\n                    break;\r\n                case \"firstDayOfWeek\":\r\n                    this._updateOption(\"workSpace\", name, value);\r\n                    this._updateOption(\"header\", name, value);\r\n                    break;\r\n                case \"currentDate\":\r\n                    value = this._dateOption(name);\r\n                    value = _date.default.trimTime(new Date(value));\r\n                    this.option(\"selectedCellData\", []);\r\n                    this._workSpace.option(name, new Date(value));\r\n                    this._header.option(name, new Date(value));\r\n                    this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\r\n                    this._appointments.option(\"items\", []);\r\n                    this._filterAppointmentsByDate();\r\n                    this._postponeDataSourceLoading();\r\n                    break;\r\n                case \"dataSource\":\r\n                    this._initDataSource();\r\n                    this._appointmentModel.setDataSource(this._dataSource);\r\n                    this._postponeResourceLoading().done(function(resources) {\r\n                        _this2._filterAppointmentsByDate();\r\n                        _this2._updateOption(\"workSpace\", \"showAllDayPanel\", _this2.option(\"showAllDayPanel\"))\r\n                    });\r\n                    break;\r\n                case \"min\":\r\n                case \"max\":\r\n                    value = this._dateOption(name);\r\n                    this._updateOption(\"header\", name, new Date(value));\r\n                    this._updateOption(\"workSpace\", name, new Date(value));\r\n                    break;\r\n                case \"views\":\r\n                    this._processCurrentView();\r\n                    if (this._getCurrentViewOptions()) {\r\n                        this.repaint()\r\n                    } else {\r\n                        this._header.option(name, value)\r\n                    }\r\n                    break;\r\n                case \"useDropDownViewSwitcher\":\r\n                    this._header.option(name, value);\r\n                    break;\r\n                case \"currentView\":\r\n                    this._processCurrentView();\r\n                    this.fire(\"validateDayHours\");\r\n                    this.getLayoutManager().initRenderingStrategy(this._getAppointmentsRenderingStrategy());\r\n                    this._validateCellDuration();\r\n                    this._appointments.option({\r\n                        items: [],\r\n                        allowDrag: this._allowDragging(),\r\n                        allowResize: this._allowResizing(),\r\n                        itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\r\n                    });\r\n                    this._postponeResourceLoading().done(function(resources) {\r\n                        _this2._refreshWorkSpace(resources);\r\n                        _this2._updateHeader();\r\n                        _this2._filterAppointmentsByDate();\r\n                        _this2._appointments.option(\"allowAllDayResize\", \"day\" !== value)\r\n                    });\r\n                    break;\r\n                case \"appointmentTemplate\":\r\n                    this._appointments.option(\"itemTemplate\", value);\r\n                    break;\r\n                case \"dateCellTemplate\":\r\n                case \"resourceCellTemplate\":\r\n                case \"dataCellTemplate\":\r\n                case \"timeCellTemplate\":\r\n                    this._updateOption(\"workSpace\", name, value);\r\n                    this.repaint();\r\n                    break;\r\n                case \"groups\":\r\n                    this._postponeResourceLoading().done(function(resources) {\r\n                        _this2._refreshWorkSpace(resources);\r\n                        _this2._filterAppointmentsByDate()\r\n                    });\r\n                    break;\r\n                case \"resources\":\r\n                    this._resourcesManager.setResources(this.option(\"resources\"));\r\n                    this._appointmentModel.setDataAccessors(this._combineDataAccessors());\r\n                    this._postponeResourceLoading().done(function(resources) {\r\n                        _this2._appointments.option(\"items\", []);\r\n                        _this2._refreshWorkSpace(resources);\r\n                        _this2._filterAppointmentsByDate()\r\n                    });\r\n                    break;\r\n                case \"startDayHour\":\r\n                case \"endDayHour\":\r\n                    this.fire(\"validateDayHours\");\r\n                    this._appointments.option(\"items\", []);\r\n                    this._updateOption(\"workSpace\", name, value);\r\n                    this._appointments.repaint();\r\n                    this._filterAppointmentsByDate();\r\n                    this._postponeDataSourceLoading();\r\n                    break;\r\n                case StoreEventNames.ADDING:\r\n                case StoreEventNames.ADDED:\r\n                case StoreEventNames.UPDATING:\r\n                case StoreEventNames.UPDATED:\r\n                case StoreEventNames.DELETING:\r\n                case StoreEventNames.DELETED:\r\n                case \"onAppointmentFormOpening\":\r\n                    this._actions[name] = this._createActionByOption(name);\r\n                    break;\r\n                case \"onAppointmentRendered\":\r\n                    this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\r\n                    break;\r\n                case \"onAppointmentClick\":\r\n                    this._appointments.option(\"onItemClick\", this._createActionByOption(name));\r\n                    break;\r\n                case \"onAppointmentDblClick\":\r\n                    this._appointments.option(name, this._createActionByOption(name));\r\n                    break;\r\n                case \"onAppointmentContextMenu\":\r\n                    this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\r\n                    break;\r\n                case \"noDataText\":\r\n                case \"allowMultipleCellSelection\":\r\n                case \"selectedCellData\":\r\n                case \"accessKey\":\r\n                case \"onCellClick\":\r\n                    this._workSpace.option(name, value);\r\n                    break;\r\n                case \"onCellContextMenu\":\r\n                    this._workSpace.option(name, value);\r\n                    break;\r\n                case \"crossScrollingEnabled\":\r\n                    this._postponeResourceLoading().done(function(resources) {\r\n                        _this2._appointments.option(\"items\", []);\r\n                        _this2._refreshWorkSpace(resources);\r\n                        if (_this2._readyToRenderAppointments) {\r\n                            _this2._appointments.option(\"items\", _this2._getAppointmentsToRepaint())\r\n                        }\r\n                    });\r\n                    break;\r\n                case \"cellDuration\":\r\n                    this._validateCellDuration();\r\n                    this._appointments.option(\"items\", []);\r\n                    if (this._readyToRenderAppointments) {\r\n                        this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\r\n                        this._appointments.option(\"items\", this._getAppointmentsToRepaint())\r\n                    }\r\n                    break;\r\n                case \"tabIndex\":\r\n                case \"focusStateEnabled\":\r\n                    this._updateOption(\"header\", name, value);\r\n                    this._updateOption(\"workSpace\", name, value);\r\n                    this._appointments.option(name, value);\r\n                    _get(_getPrototypeOf(Scheduler.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"width\":\r\n                    this._updateOption(\"header\", name, value);\r\n                    if (this.option(\"crossScrollingEnabled\")) {\r\n                        this._updateOption(\"workSpace\", \"width\", value)\r\n                    }\r\n                    _get(_getPrototypeOf(Scheduler.prototype), \"_optionChanged\", this).call(this, args);\r\n                    this._dimensionChanged();\r\n                    break;\r\n                case \"height\":\r\n                    _get(_getPrototypeOf(Scheduler.prototype), \"_optionChanged\", this).call(this, args);\r\n                    this._dimensionChanged();\r\n                    break;\r\n                case \"editing\":\r\n                    this._initEditing();\r\n                    var editing = this._editing;\r\n                    this._bringEditingModeToAppointments(editing);\r\n                    this.hideAppointmentTooltip();\r\n                    this._cleanPopup();\r\n                    break;\r\n                case \"showAllDayPanel\":\r\n                    this._postponeResourceLoading().done(function(resources) {\r\n                        _this2._filterAppointmentsByDate();\r\n                        _this2._updateOption(\"workSpace\", \"allDayExpanded\", value);\r\n                        _this2._updateOption(\"workSpace\", name, value)\r\n                    });\r\n                    break;\r\n                case \"showCurrentTimeIndicator\":\r\n                case \"indicatorTime\":\r\n                case \"indicatorUpdateInterval\":\r\n                case \"shadeUntilCurrentTime\":\r\n                case \"groupByDate\":\r\n                    this._updateOption(\"workSpace\", name, value);\r\n                    this.repaint();\r\n                    break;\r\n                case \"appointmentDragging\":\r\n                case \"appointmentTooltipTemplate\":\r\n                case \"appointmentPopupTemplate\":\r\n                case \"recurrenceEditMode\":\r\n                case \"remoteFiltering\":\r\n                case \"timeZone\":\r\n                case \"dropDownAppointmentTemplate\":\r\n                case \"appointmentCollectorTemplate\":\r\n                case \"_appointmentTooltipOffset\":\r\n                case \"_appointmentTooltipButtonsPosition\":\r\n                case \"_appointmentTooltipOpenButtonText\":\r\n                case \"_dropDownButtonIcon\":\r\n                case \"_appointmentCountPerCell\":\r\n                case \"_collectorOffset\":\r\n                case \"_appointmentOffset\":\r\n                    this.repaint();\r\n                    break;\r\n                case \"dateSerializationFormat\":\r\n                    break;\r\n                case \"maxAppointmentsPerCell\":\r\n                    break;\r\n                case \"startDateExpr\":\r\n                case \"endDateExpr\":\r\n                case \"startDateTimeZoneExpr\":\r\n                case \"endDateTimeZoneExpr\":\r\n                case \"textExpr\":\r\n                case \"descriptionExpr\":\r\n                case \"allDayExpr\":\r\n                case \"recurrenceRuleExpr\":\r\n                case \"recurrenceExceptionExpr\":\r\n                case \"disabledExpr\":\r\n                    this._updateExpression(name, value);\r\n                    this._appointmentModel.setDataAccessors(this._combineDataAccessors());\r\n                    this._initAppointmentTemplate();\r\n                    this.repaint();\r\n                    break;\r\n                case \"adaptivityEnabled\":\r\n                    this._toggleAdaptiveClass();\r\n                    this.repaint();\r\n                    break;\r\n                case \"scrolling\":\r\n                    this._updateOption(\"workSpace\", args.fullName, value);\r\n                    break;\r\n                case \"renovateRender\":\r\n                    this._updateOption(\"workSpace\", name, value);\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(Scheduler.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateHeader\",\r\n        value: function() {\r\n            var viewCountConfig = this._getViewCountConfig();\r\n            this._header.option(\"intervalCount\", viewCountConfig.intervalCount);\r\n            this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\r\n            this._header.option(\"min\", this._dateOption(\"min\"));\r\n            this._header.option(\"max\", this._dateOption(\"max\"));\r\n            this._header.option(\"currentDate\", this._dateOption(\"currentDate\"));\r\n            this._header.option(\"firstDayOfWeek\", this._getCurrentViewOption(\"firstDayOfWeek\"));\r\n            this._header.option(\"currentView\", this._currentView)\r\n        }\r\n    }, {\r\n        key: \"_dateOption\",\r\n        value: function(optionName) {\r\n            var optionValue = this._getCurrentViewOption(optionName);\r\n            return _date_serialization.default.deserializeDate(optionValue)\r\n        }\r\n    }, {\r\n        key: \"_getSerializationFormat\",\r\n        value: function(optionName) {\r\n            var value = this._getCurrentViewOption(optionName);\r\n            if (\"number\" === typeof value) {\r\n                return \"number\"\r\n            }\r\n            if (!(0, _type.isString)(value)) {\r\n                return\r\n            }\r\n            return _date_serialization.default.getDateSerializationFormat(value)\r\n        }\r\n    }, {\r\n        key: \"_bringEditingModeToAppointments\",\r\n        value: function(editing) {\r\n            var editingConfig = {\r\n                allowDelete: editing.allowUpdating && editing.allowDeleting\r\n            };\r\n            if (!this._isAgenda()) {\r\n                editingConfig.allowDrag = editing.allowDragging;\r\n                editingConfig.allowResize = editing.allowResizing;\r\n                editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing()\r\n            }\r\n            this._appointments.option(editingConfig);\r\n            this.repaint()\r\n        }\r\n    }, {\r\n        key: \"_isAgenda\",\r\n        value: function() {\r\n            return \"agenda\" === this._getAppointmentsRenderingStrategy()\r\n        }\r\n    }, {\r\n        key: \"_allowDragging\",\r\n        value: function() {\r\n            return this._editing.allowDragging && !this._isAgenda()\r\n        }\r\n    }, {\r\n        key: \"_allowResizing\",\r\n        value: function() {\r\n            return this._editing.allowResizing && !this._isAgenda()\r\n        }\r\n    }, {\r\n        key: \"_allowAllDayResizing\",\r\n        value: function() {\r\n            return this._editing.allowResizing && this._supportAllDayResizing()\r\n        }\r\n    }, {\r\n        key: \"_supportAllDayResizing\",\r\n        value: function() {\r\n            return \"day\" !== this._getCurrentViewType() || this._currentView.intervalCount > 1\r\n        }\r\n    }, {\r\n        key: \"_isAllDayExpanded\",\r\n        value: function(items) {\r\n            return this.option(\"showAllDayPanel\") && this._appointmentModel.hasAllDayAppointments(items, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"))\r\n        }\r\n    }, {\r\n        key: \"_getTimezoneOffsetByOption\",\r\n        value: function(date) {\r\n            return _utils.default.calculateTimezoneByValue(this.option(\"timeZone\"), date)\r\n        }\r\n    }, {\r\n        key: \"_filterAppointmentsByDate\",\r\n        value: function() {\r\n            var dateRange = this._workSpace.getDateRange();\r\n            this._appointmentModel.filterByDate(dateRange[0], dateRange[1], this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"))\r\n        }\r\n    }, {\r\n        key: \"_loadResources\",\r\n        value: function() {\r\n            var groups = this._getCurrentViewOption(\"groups\");\r\n            var result = new _deferred.Deferred;\r\n            this._resourcesManager.loadResources(groups).done(function(resources) {\r\n                this._loadedResources = resources;\r\n                result.resolve(resources)\r\n            }.bind(this));\r\n            return result.promise()\r\n        }\r\n    }, {\r\n        key: \"_reloadDataSource\",\r\n        value: function() {\r\n            var result = new _deferred.Deferred;\r\n            if (this._dataSource) {\r\n                this._dataSource.load().done(function() {\r\n                    (0, _ui3.hide)();\r\n                    this._fireContentReadyAction(result)\r\n                }.bind(this)).fail(function() {\r\n                    (0, _ui3.hide)();\r\n                    result.reject()\r\n                });\r\n                this._dataSource.isLoading() && (0, _ui3.show)({\r\n                    container: this.$element(),\r\n                    position: {\r\n                        of: this.$element()\r\n                    }\r\n                })\r\n            } else {\r\n                this._fireContentReadyAction(result)\r\n            }\r\n            return result.promise()\r\n        }\r\n    }, {\r\n        key: \"_fireContentReadyAction\",\r\n        value: function(result) {\r\n            var contentReadyBase = _get(_getPrototypeOf(Scheduler.prototype), \"_fireContentReadyAction\", this).bind(this);\r\n            var fireContentReady = function() {\r\n                contentReadyBase();\r\n                null === result || void 0 === result ? void 0 : result.resolve()\r\n            };\r\n            if (this._workSpaceRecalculation) {\r\n                var _this$_workSpaceRecal;\r\n                null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(function() {\r\n                    fireContentReady()\r\n                })\r\n            } else {\r\n                fireContentReady()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_dimensionChanged\",\r\n        value: function() {\r\n            var filteredItems = this.getFilteredItems();\r\n            this._toggleSmallClass();\r\n            if (!this._isAgenda() && filteredItems && this._isVisible()) {\r\n                this._workSpace._cleanAllowedPositions();\r\n                this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(filteredItems));\r\n                this._workSpace._dimensionChanged();\r\n                var appointments = this._layoutManager.createAppointmentsMap(filteredItems);\r\n                this._appointments.option(\"items\", appointments)\r\n            }\r\n            this.hideAppointmentTooltip();\r\n            this._appointmentPopup.triggerResize();\r\n            this._appointmentPopup.updatePopupFullScreenMode()\r\n        }\r\n    }, {\r\n        key: \"_clean\",\r\n        value: function() {\r\n            this._cleanPopup();\r\n            _get(_getPrototypeOf(Scheduler.prototype), \"_clean\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_toggleSmallClass\",\r\n        value: function() {\r\n            var width = (0, _position.getBoundingRect)(this.$element().get(0)).width;\r\n            this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH)\r\n        }\r\n    }, {\r\n        key: \"_toggleAdaptiveClass\",\r\n        value: function() {\r\n            this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"))\r\n        }\r\n    }, {\r\n        key: \"_visibilityChanged\",\r\n        value: function(visible) {\r\n            visible && this._dimensionChanged()\r\n        }\r\n    }, {\r\n        key: \"_dataSourceOptions\",\r\n        value: function() {\r\n            return {\r\n                paginate: false\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_init\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            this._initExpressions({\r\n                startDate: this.option(\"startDateExpr\"),\r\n                endDate: this.option(\"endDateExpr\"),\r\n                startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\r\n                endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\r\n                allDay: this.option(\"allDayExpr\"),\r\n                text: this.option(\"textExpr\"),\r\n                description: this.option(\"descriptionExpr\"),\r\n                recurrenceRule: this.option(\"recurrenceRuleExpr\"),\r\n                recurrenceException: this.option(\"recurrenceExceptionExpr\"),\r\n                disabled: this.option(\"disabledExpr\")\r\n            });\r\n            _get(_getPrototypeOf(Scheduler.prototype), \"_init\", this).call(this);\r\n            this._initDataSource();\r\n            this._loadedResources = [];\r\n            this.$element().addClass(WIDGET_CLASS).toggleClass(WIDGET_WIN_NO_TOUCH_CLASS, !!(_browser.default.msie && _support.touch));\r\n            this._initEditing();\r\n            this._resourcesManager = new _uiScheduler4.default(this.option(\"resources\"));\r\n            var combinedDataAccessors = this._combineDataAccessors();\r\n            this._appointmentModel = new _uiScheduler2.default(this._dataSource, combinedDataAccessors, this.getAppointmentDurationInMinutes());\r\n            this._initActions();\r\n            this._compactAppointmentsHelper = new _compactAppointmentsHelper.CompactAppointmentsHelper(this);\r\n            this._asyncTemplatesTimers = [];\r\n            this._dataSourceLoadedCallback = (0, _callbacks.default)();\r\n            this._subscribes = _uiScheduler5.default;\r\n            this.timeZoneCalculator = new _timeZoneCalculator.TimeZoneCalculator({\r\n                getClientOffset: function(date) {\r\n                    return _utils.default.getClientTimezoneOffset(date)\r\n                },\r\n                getCommonOffset: function(date, timeZone) {\r\n                    return _utils.default.calculateTimezoneByValue(timeZone || _this3.option(\"timeZone\"), date)\r\n                },\r\n                getAppointmentOffset: function(date, appointmentTimezone) {\r\n                    return _utils.default.calculateTimezoneByValue(appointmentTimezone, date)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_initTemplates\",\r\n        value: function() {\r\n            this._initAppointmentTemplate();\r\n            this._templateManager.addDefaultTemplates({\r\n                appointmentTooltip: new _empty_template.EmptyTemplate,\r\n                dropDownAppointment: new _empty_template.EmptyTemplate\r\n            });\r\n            _get(_getPrototypeOf(Scheduler.prototype), \"_initTemplates\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_initAppointmentTemplate\",\r\n        value: function() {\r\n            var _this4 = this;\r\n            var expr = this._dataAccessors.expr;\r\n            var createGetter = function(property) {\r\n                return (0, _data.compileGetter)(\"appointmentData.\".concat(property))\r\n            };\r\n            this._templateManager.addDefaultTemplates(_defineProperty({}, \"item\", new _bindable_template.BindableTemplate(function($container, data, model) {\r\n                _this4.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model)\r\n            }, [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\r\n                text: createGetter(expr.textExpr),\r\n                startDate: createGetter(expr.startDateExpr),\r\n                endDate: createGetter(expr.endDateExpr),\r\n                startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\r\n                endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\r\n                allDay: createGetter(expr.allDayExpr),\r\n                recurrenceRule: createGetter(expr.recurrenceRuleExpr)\r\n            })))\r\n        }\r\n    }, {\r\n        key: \"_combineDataAccessors\",\r\n        value: function() {\r\n            var resourcesDataAccessors = this._resourcesManager._dataAccessors;\r\n            var result = (0, _extend.extend)(true, {}, this._dataAccessors);\r\n            (0, _iterator.each)(resourcesDataAccessors, function(type, accessor) {\r\n                result[type].resources = accessor\r\n            }.bind(this));\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_renderContent\",\r\n        value: function() {\r\n            this._renderContentImpl()\r\n        }\r\n    }, {\r\n        key: \"_dataSourceChangedHandler\",\r\n        value: function(result) {\r\n            if (this._readyToRenderAppointments) {\r\n                this._workSpaceRecalculation.done(function() {\r\n                    this._renderAppointments();\r\n                    if (this._isAgenda()) {\r\n                        this._workSpace._renderView();\r\n                        this._dataSourceLoadedCallback.fireWith(this, [this.getFilteredItems()])\r\n                    }\r\n                }.bind(this))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"isVirtualScrolling\",\r\n        value: function() {\r\n            var _this$getWorkSpace;\r\n            return null === (_this$getWorkSpace = this.getWorkSpace()) || void 0 === _this$getWorkSpace ? void 0 : _this$getWorkSpace.isVirtualScrolling()\r\n        }\r\n    }, {\r\n        key: \"_filterAppointments\",\r\n        value: function() {\r\n            var prerenderFilterName = this.isVirtualScrolling() ? \"prerenderFilterVirtual\" : \"prerenderFilter\";\r\n            return this.fire(prerenderFilterName)\r\n        }\r\n    }, {\r\n        key: \"_renderAppointments\",\r\n        value: function() {\r\n            this._filteredItems = this._filterAppointments();\r\n            this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(this._filteredItems));\r\n            if (this._isAgenda()) {\r\n                this.getRenderingStrategyInstance().calculateRows(this._filteredItems, 7, this.option(\"currentDate\"), true)\r\n            }\r\n            if (this._filteredItems.length && this._isVisible()) {\r\n                this._appointments.option(\"items\", this._getAppointmentsToRepaint());\r\n                this._appointmentModel.cleanModelState()\r\n            } else {\r\n                this._appointments.option(\"items\", [])\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getAppointmentsToRepaint\",\r\n        value: function() {\r\n            var appointments = this._layoutManager.createAppointmentsMap(this._filteredItems);\r\n            return this._layoutManager.getRepaintedAppointments(appointments, this.getAppointmentsInstance().option(\"items\"))\r\n        }\r\n    }, {\r\n        key: \"_initExpressions\",\r\n        value: function(fields) {\r\n            var isDateField = function(field) {\r\n                return \"startDate\" === field || \"endDate\" === field\r\n            };\r\n            if (!this._dataAccessors) {\r\n                this._dataAccessors = {\r\n                    getter: {},\r\n                    setter: {},\r\n                    expr: {}\r\n                }\r\n            }(0, _iterator.each)(fields, function(name, expr) {\r\n                if (expr) {\r\n                    var getter = (0, _data.compileGetter)(expr);\r\n                    var setter = (0, _data.compileSetter)(expr);\r\n                    var dateGetter;\r\n                    var dateSetter;\r\n                    if (isDateField(name)) {\r\n                        var that = this;\r\n                        dateGetter = function() {\r\n                            var value = getter.apply(this, arguments);\r\n                            if ((0, _config.default)().forceIsoDateParsing) {\r\n                                if (!that.option(\"dateSerializationFormat\")) {\r\n                                    var format = _date_serialization.default.getDateSerializationFormat(value);\r\n                                    if (format) {\r\n                                        that.option(\"dateSerializationFormat\", format)\r\n                                    }\r\n                                }\r\n                                value = _date_serialization.default.deserializeDate(value)\r\n                            }\r\n                            return value\r\n                        };\r\n                        dateSetter = function(object, value) {\r\n                            if ((0, _config.default)().forceIsoDateParsing || that.option(\"dateSerializationFormat\")) {\r\n                                value = _date_serialization.default.serializeDate(value, that.option(\"dateSerializationFormat\"))\r\n                            }\r\n                            setter.call(this, object, value)\r\n                        }\r\n                    }\r\n                    this._dataAccessors.getter[name] = dateGetter || getter;\r\n                    this._dataAccessors.setter[name] = dateSetter || setter;\r\n                    this._dataAccessors.expr[name + \"Expr\"] = expr\r\n                } else {\r\n                    delete this._dataAccessors.getter[name];\r\n                    delete this._dataAccessors.setter[name];\r\n                    delete this._dataAccessors.expr[name + \"Expr\"]\r\n                }\r\n            }.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_updateExpression\",\r\n        value: function(name, value) {\r\n            var exprObj = {};\r\n            exprObj[name.replace(\"Expr\", \"\")] = value;\r\n            this._initExpressions(exprObj)\r\n        }\r\n    }, {\r\n        key: \"_initEditing\",\r\n        value: function() {\r\n            var editing = this.option(\"editing\");\r\n            this._editing = {\r\n                allowAdding: !!editing,\r\n                allowUpdating: !!editing,\r\n                allowDeleting: !!editing,\r\n                allowResizing: !!editing,\r\n                allowDragging: !!editing\r\n            };\r\n            if ((0, _type.isObject)(editing)) {\r\n                this._editing = (0,\r\n                    _extend.extend)(this._editing, editing)\r\n            }\r\n            this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\r\n            this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\r\n            this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly())\r\n        }\r\n    }, {\r\n        key: \"_isReadOnly\",\r\n        value: function() {\r\n            var result = true;\r\n            var editing = this._editing;\r\n            for (var prop in editing) {\r\n                if (Object.prototype.hasOwnProperty.call(editing, prop)) {\r\n                    result = result && !editing[prop]\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_dispose\",\r\n        value: function() {\r\n            this._appointmentTooltip && this._appointmentTooltip.dispose();\r\n            this.hideAppointmentPopup();\r\n            this.hideAppointmentTooltip();\r\n            this._asyncTemplatesTimers.forEach(clearTimeout);\r\n            this._asyncTemplatesTimers = [];\r\n            _get(_getPrototypeOf(Scheduler.prototype), \"_dispose\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_initActions\",\r\n        value: function() {\r\n            this._actions = {\r\n                onAppointmentAdding: this._createActionByOption(StoreEventNames.ADDING),\r\n                onAppointmentAdded: this._createActionByOption(StoreEventNames.ADDED),\r\n                onAppointmentUpdating: this._createActionByOption(StoreEventNames.UPDATING),\r\n                onAppointmentUpdated: this._createActionByOption(StoreEventNames.UPDATED),\r\n                onAppointmentDeleting: this._createActionByOption(StoreEventNames.DELETING),\r\n                onAppointmentDeleted: this._createActionByOption(StoreEventNames.DELETED),\r\n                onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getAppointmentRenderedAction\",\r\n        value: function() {\r\n            return this._createActionByOption(\"onAppointmentRendered\", {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_renderFocusTarget\",\r\n        value: function() {\r\n            return (0, _common.noop)()\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(Scheduler.prototype), \"_initMarkup\", this).call(this);\r\n            this.fire(\"validateDayHours\");\r\n            this._validateCellDuration();\r\n            this._processCurrentView();\r\n            this._renderHeader();\r\n            this._layoutManager = new _uiSchedulerAppointments.default(this, this._getAppointmentsRenderingStrategy());\r\n            this._appointments = this._createComponent(\"<div>\", _uiScheduler.default, this._appointmentsConfig());\r\n            this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\r\n            this._appointmentTooltip = new(this.option(\"adaptivityEnabled\") ? _mobileTooltipStrategy.MobileTooltipStrategy : _desktopTooltipStrategy.DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\r\n            this._appointmentPopup = new _appointmentPopup.default(this);\r\n            if (this._isLoaded() || this._isDataSourceLoading()) {\r\n                this._initMarkupCore(this._loadedResources);\r\n                this._dataSourceChangedHandler(this._dataSource.items());\r\n                this._fireContentReadyAction()\r\n            } else {\r\n                this._loadResources().done(function(resources) {\r\n                    this._initMarkupCore(resources);\r\n                    this._reloadDataSource()\r\n                }.bind(this))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getAppointmentTooltipOptions\",\r\n        value: function() {\r\n            var _this5 = this;\r\n            var that = this;\r\n            return {\r\n                createComponent: that._createComponent.bind(that),\r\n                container: that.$element(),\r\n                getScrollableContainer: that.getWorkSpaceScrollableContainer.bind(that),\r\n                addDefaultTemplates: that._templateManager.addDefaultTemplates.bind(that._templateManager),\r\n                getAppointmentTemplate: that._getAppointmentTemplate.bind(that),\r\n                showAppointmentPopup: that.showAppointmentPopup.bind(that),\r\n                checkAndDeleteAppointment: that.checkAndDeleteAppointment.bind(that),\r\n                isAppointmentInAllDayPanel: that.isAppointmentInAllDayPanel.bind(that),\r\n                createFormattedDateText: function(appointment, targetedAppointment, format) {\r\n                    return _this5.fire(\"getTextAndFormatDate\", appointment, targetedAppointment, format)\r\n                },\r\n                getAppointmentDisabled: function(appointment) {\r\n                    return _this5.createAppointmentAdapter(appointment).disabled\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"checkAndDeleteAppointment\",\r\n        value: function(appointment, targetedAppointment) {\r\n            var _this6 = this;\r\n            var targetedAdapter = this.createAppointmentAdapter(targetedAppointment);\r\n            this._checkRecurringAppointment(appointment, targetedAppointment, targetedAdapter.startDate, function() {\r\n                _this6.deleteAppointment(appointment)\r\n            }, true)\r\n        }\r\n    }, {\r\n        key: \"_getExtraAppointmentTooltipOptions\",\r\n        value: function() {\r\n            return {\r\n                rtlEnabled: this.option(\"rtlEnabled\"),\r\n                focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n                editing: this.option(\"editing\"),\r\n                offset: this.option(\"_appointmentTooltipOffset\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"isAppointmentInAllDayPanel\",\r\n        value: function(appointmentData) {\r\n            var workSpace = this._workSpace;\r\n            var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\r\n            return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\")\r\n        }\r\n    }, {\r\n        key: \"_initMarkupCore\",\r\n        value: function(resources) {\r\n            var _this7 = this;\r\n            this._readyToRenderAppointments = (0, _window.hasWindow)();\r\n            this._workSpace && this._cleanWorkspace();\r\n            this._renderWorkSpace(resources);\r\n            this._appointments.option({\r\n                fixedContainer: this._workSpace.getFixedContainer(),\r\n                allDayContainer: this._workSpace.getAllDayContainer()\r\n            });\r\n            this._waitAsyncTemplate(function() {\r\n                var _this7$_workSpaceReca;\r\n                return null === (_this7$_workSpaceReca = _this7._workSpaceRecalculation) || void 0 === _this7$_workSpaceReca ? void 0 : _this7$_workSpaceReca.resolve()\r\n            });\r\n            this._filterAppointmentsByDate()\r\n        }\r\n    }, {\r\n        key: \"_isLoaded\",\r\n        value: function() {\r\n            return this._isResourcesLoaded() && this._isDataSourceLoaded()\r\n        }\r\n    }, {\r\n        key: \"_isResourcesLoaded\",\r\n        value: function() {\r\n            return (0, _type.isDefined)(this._loadedResources)\r\n        }\r\n    }, {\r\n        key: \"_isDataSourceLoaded\",\r\n        value: function() {\r\n            return this._dataSource && this._dataSource.isLoaded()\r\n        }\r\n    }, {\r\n        key: \"_render\",\r\n        value: function() {\r\n            this._toggleSmallClass();\r\n            this._toggleAdaptiveClass();\r\n            _get(_getPrototypeOf(Scheduler.prototype), \"_render\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_renderHeader\",\r\n        value: function() {\r\n            var $header = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\r\n            this._header = this._createComponent($header, _uiScheduler3.default, this._headerConfig())\r\n        }\r\n    }, {\r\n        key: \"_headerConfig\",\r\n        value: function() {\r\n            var _this8 = this;\r\n            var currentViewOptions = this._getCurrentViewOptions();\r\n            var countConfig = this._getViewCountConfig();\r\n            var result = (0, _extend.extend)({\r\n                isAdaptive: this.option(\"adaptivityEnabled\"),\r\n                firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n                currentView: this._currentView,\r\n                tabIndex: this.option(\"tabIndex\"),\r\n                focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n                width: this.option(\"width\"),\r\n                rtlEnabled: this.option(\"rtlEnabled\"),\r\n                useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\r\n                _dropDownButtonIcon: this.option(\"_dropDownButtonIcon\"),\r\n                customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\")\r\n            }, currentViewOptions);\r\n            result.observer = this;\r\n            result.intervalCount = countConfig.intervalCount;\r\n            result.views = this.option(\"views\");\r\n            result.min = new Date(this._dateOption(\"min\"));\r\n            result.max = new Date(this._dateOption(\"max\"));\r\n            result.currentDate = _date.default.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n            result.todayDate = function() {\r\n                var result = _this8.timeZoneCalculator.createDate(new Date, {\r\n                    path: \"toGrid\"\r\n                });\r\n                return result\r\n            };\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_appointmentsConfig\",\r\n        value: function() {\r\n            var that = this;\r\n            var config = {\r\n                observer: this,\r\n                onItemRendered: this._getAppointmentRenderedAction(),\r\n                onItemClick: this._createActionByOption(\"onAppointmentClick\"),\r\n                onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\r\n                onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\r\n                tabIndex: this.option(\"tabIndex\"),\r\n                focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n                allowDrag: this._allowDragging(),\r\n                allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\r\n                allowResize: this._allowResizing(),\r\n                allowAllDayResize: this._allowAllDayResizing(),\r\n                rtlEnabled: this.option(\"rtlEnabled\"),\r\n                currentView: this.option(\"currentView\"),\r\n                onContentReady: function() {\r\n                    that._workSpace && that._workSpace.option(\"allDayExpanded\", that._isAllDayExpanded(that.getFilteredItems()))\r\n                }\r\n            };\r\n            return config\r\n        }\r\n    }, {\r\n        key: \"getCollectorOffset\",\r\n        value: function() {\r\n            if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\r\n                return this.option(\"_collectorOffset\")\r\n            } else {\r\n                return 0\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getAppointmentDurationInMinutes\",\r\n        value: function() {\r\n            return this._getCurrentViewOption(\"cellDuration\")\r\n        }\r\n    }, {\r\n        key: \"_processCurrentView\",\r\n        value: function() {\r\n            var views = this.option(\"views\");\r\n            var currentView = this.option(\"currentView\");\r\n            var that = this;\r\n            this._currentView = currentView;\r\n            (0, _iterator.each)(views, function(_, view) {\r\n                var isViewIsObject = (0, _type.isObject)(view);\r\n                var viewName = isViewIsObject ? view.name : view;\r\n                var viewType = view.type;\r\n                if (currentView === viewName || currentView === viewType) {\r\n                    that._currentView = view;\r\n                    return false\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_validateCellDuration\",\r\n        value: function() {\r\n            var endDayHour = this._getCurrentViewOption(\"endDayHour\");\r\n            var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n            var cellDuration = this._getCurrentViewOption(\"cellDuration\");\r\n            if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\r\n                _ui.default.log(\"W1015\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getCurrentViewType\",\r\n        value: function() {\r\n            return this._currentView.type || this._currentView\r\n        }\r\n    }, {\r\n        key: \"_getAppointmentsRenderingStrategy\",\r\n        value: function() {\r\n            return VIEWS_CONFIG[this._getCurrentViewType()].renderingStrategy\r\n        }\r\n    }, {\r\n        key: \"_renderWorkSpace\",\r\n        value: function(groups) {\r\n            this._readyToRenderAppointments && this._toggleSmallClass();\r\n            var $workSpace = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\r\n            var countConfig = this._getViewCountConfig();\r\n            var workSpaceComponent = VIEWS_CONFIG[this._getCurrentViewType()].workSpace;\r\n            var workSpaceConfig = this._workSpaceConfig(groups, countConfig);\r\n            this._workSpace = this._createComponent($workSpace, workSpaceComponent, workSpaceConfig);\r\n            this._allowDragging() && this._workSpace.initDragBehavior(this, this._all);\r\n            this._workSpace._attachTablesEvents();\r\n            this._workSpace.getWorkArea().append(this._appointments.$element());\r\n            this._recalculateWorkspace();\r\n            countConfig.startDate && this._header && this._header.option(\"currentDate\", this._workSpace._getHeaderDate());\r\n            this._appointments.option(\"_collectorOffset\", this.getCollectorOffset())\r\n        }\r\n    }, {\r\n        key: \"_getViewCountConfig\",\r\n        value: function() {\r\n            var currentView = this.option(\"currentView\");\r\n            var view = this._getViewByName(currentView);\r\n            var viewCount = view && view.intervalCount || 1;\r\n            var startDate = view && view.startDate || null;\r\n            return {\r\n                intervalCount: viewCount,\r\n                startDate: startDate\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getViewByName\",\r\n        value: function(name) {\r\n            var views = this.option(\"views\");\r\n            for (var i = 0; i < views.length; i++) {\r\n                if (views[i].name === name || views[i].type === name || views[i] === name) {\r\n                    return views[i]\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_recalculateWorkspace\",\r\n        value: function() {\r\n            var _this9 = this;\r\n            this._workSpaceRecalculation = new _deferred.Deferred;\r\n            this._waitAsyncTemplate(function() {\r\n                (0, _visibility_change.triggerResizeEvent)(_this9._workSpace.$element());\r\n                _this9._workSpace._refreshDateTimeIndication()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_workSpaceConfig\",\r\n        value: function(groups, countConfig) {\r\n            var _currentViewOptions$s, _this10 = this;\r\n            var currentViewOptions = this._getCurrentViewOptions();\r\n            var scrolling = this.option(\"scrolling\");\r\n            var result = (0, _extend.extend)({\r\n                noDataText: this.option(\"noDataText\"),\r\n                firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n                startDayHour: this.option(\"startDayHour\"),\r\n                endDayHour: this.option(\"endDayHour\"),\r\n                tabIndex: this.option(\"tabIndex\"),\r\n                accessKey: this.option(\"accessKey\"),\r\n                focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n                cellDuration: this.option(\"cellDuration\"),\r\n                showAllDayPanel: this.option(\"showAllDayPanel\"),\r\n                showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\r\n                indicatorTime: this.option(\"indicatorTime\"),\r\n                indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\r\n                shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\r\n                allDayExpanded: this._appointments.option(\"items\"),\r\n                crossScrollingEnabled: this.option(\"crossScrollingEnabled\"),\r\n                dataCellTemplate: this.option(\"dataCellTemplate\"),\r\n                timeCellTemplate: this.option(\"timeCellTemplate\"),\r\n                resourceCellTemplate: this.option(\"resourceCellTemplate\"),\r\n                dateCellTemplate: this.option(\"dateCellTemplate\"),\r\n                allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\r\n                selectedCellData: this.option(\"selectedCellData\"),\r\n                onSelectionChanged: function(args) {\r\n                    _this10.option(\"selectedCellData\", args.selectedCellData)\r\n                },\r\n                groupByDate: this._getCurrentViewOption(\"groupByDate\"),\r\n                scrolling: scrolling,\r\n                renovateRender: this.option(\"renovateRender\") || \"virtual\" === scrolling.mode || \"virtual\" === (null === (_currentViewOptions$s = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s ? void 0 : _currentViewOptions$s.mode)\r\n            }, currentViewOptions);\r\n            result.observer = this;\r\n            result.intervalCount = countConfig.intervalCount;\r\n            result.startDate = countConfig.startDate;\r\n            result.groups = groups;\r\n            result.onCellClick = this._createActionByOption(\"onCellClick\");\r\n            result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\r\n            result.min = new Date(this._dateOption(\"min\"));\r\n            result.max = new Date(this._dateOption(\"max\"));\r\n            result.currentDate = _date.default.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n            result.hoursInterval = result.cellDuration / 60;\r\n            result.allDayExpanded = this._isAllDayExpanded(this.getFilteredItems());\r\n            result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\r\n            result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\r\n            result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\r\n            result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_waitAsyncTemplate\",\r\n        value: function(callback) {\r\n            if (this._options.silent(\"templatesRenderAsynchronously\")) {\r\n                var timer = setTimeout(function() {\r\n                    callback();\r\n                    clearTimeout(timer)\r\n                });\r\n                this._asyncTemplatesTimers.push(timer)\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getCurrentViewOptions\",\r\n        value: function() {\r\n            return this._currentView\r\n        }\r\n    }, {\r\n        key: \"_getCurrentViewOption\",\r\n        value: function(optionName) {\r\n            var currentViewOptions = this._getCurrentViewOptions();\r\n            if (currentViewOptions && void 0 !== currentViewOptions[optionName]) {\r\n                return currentViewOptions[optionName]\r\n            }\r\n            return this.option(optionName)\r\n        }\r\n    }, {\r\n        key: \"_getAppointmentTemplate\",\r\n        value: function(optionName) {\r\n            var currentViewOptions = this._getCurrentViewOptions();\r\n            if (currentViewOptions && currentViewOptions[optionName]) {\r\n                return this._getTemplate(currentViewOptions[optionName])\r\n            }\r\n            return this._getTemplateByOption(optionName)\r\n        }\r\n    }, {\r\n        key: \"_updateOption\",\r\n        value: function(viewName, optionName, value) {\r\n            var currentViewOptions = this._getCurrentViewOptions();\r\n            if (!currentViewOptions || !(0, _type.isDefined)(currentViewOptions[optionName])) {\r\n                this[\"_\" + viewName].option(optionName, value)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_refreshWorkSpace\",\r\n        value: function(groups) {\r\n            var _this11 = this;\r\n            this._cleanWorkspace();\r\n            delete this._workSpace;\r\n            this._renderWorkSpace(groups);\r\n            if (this._readyToRenderAppointments) {\r\n                this._appointments.option({\r\n                    fixedContainer: this._workSpace.getFixedContainer(),\r\n                    allDayContainer: this._workSpace.getAllDayContainer()\r\n                });\r\n                this._waitAsyncTemplate(function() {\r\n                    return _this11._workSpaceRecalculation.resolve()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_cleanWorkspace\",\r\n        value: function() {\r\n            this._appointments.$element().detach();\r\n            this._workSpace._dispose();\r\n            this._workSpace.$element().remove();\r\n            this.option(\"selectedCellData\", [])\r\n        }\r\n    }, {\r\n        key: \"getWorkSpaceScrollable\",\r\n        value: function() {\r\n            return this._workSpace.getScrollable()\r\n        }\r\n    }, {\r\n        key: \"getWorkSpaceScrollableScrollTop\",\r\n        value: function(allDay) {\r\n            return this._workSpace.getGroupedScrollableScrollTop(allDay)\r\n        }\r\n    }, {\r\n        key: \"getWorkSpaceScrollableScrollLeft\",\r\n        value: function() {\r\n            return this._workSpace.getScrollableScrollLeft()\r\n        }\r\n    }, {\r\n        key: \"getWorkSpaceScrollableContainer\",\r\n        value: function() {\r\n            return this._workSpace.getScrollableContainer()\r\n        }\r\n    }, {\r\n        key: \"getWorkSpaceAllDayHeight\",\r\n        value: function() {\r\n            return this._workSpace.getAllDayHeight()\r\n        }\r\n    }, {\r\n        key: \"getWorkSpaceAllDayOffset\",\r\n        value: function() {\r\n            return this._workSpace.getAllDayOffset()\r\n        }\r\n    }, {\r\n        key: \"getWorkSpaceHeaderPanelHeight\",\r\n        value: function() {\r\n            return this._workSpace.getHeaderPanelHeight()\r\n        }\r\n    }, {\r\n        key: \"getWorkSpaceDateTableOffset\",\r\n        value: function() {\r\n            return !this.option(\"crossScrollingEnabled\") || this.option(\"rtlEnabled\") ? this._workSpace.getWorkSpaceLeftOffset() : 0\r\n        }\r\n    }, {\r\n        key: \"getWorkSpace\",\r\n        value: function() {\r\n            return this._workSpace\r\n        }\r\n    }, {\r\n        key: \"getAppointmentModel\",\r\n        value: function() {\r\n            return this._appointmentModel\r\n        }\r\n    }, {\r\n        key: \"getHeader\",\r\n        value: function() {\r\n            return this._header\r\n        }\r\n    }, {\r\n        key: \"getMaxAppointmentsPerCell\",\r\n        value: function() {\r\n            return this._getCurrentViewOption(\"maxAppointmentsPerCell\")\r\n        }\r\n    }, {\r\n        key: \"_cleanPopup\",\r\n        value: function() {\r\n            this._appointmentPopup && this._appointmentPopup.dispose()\r\n        }\r\n    }, {\r\n        key: \"_checkRecurringAppointment\",\r\n        value: function(targetAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent) {\r\n            var _this12 = this;\r\n            delete this._updatedRecAppointment;\r\n            var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", targetAppointment);\r\n            if (!(0, _recurrence.getRecurrenceProcessor)().evalRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\r\n                callback();\r\n                return\r\n            }\r\n            var editMode = this.option(\"recurrenceEditMode\");\r\n            switch (editMode) {\r\n                case \"series\":\r\n                    callback();\r\n                    break;\r\n                case \"occurrence\":\r\n                    this._excludeAppointmentFromSeries(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\r\n                    break;\r\n                default:\r\n                    if (dragEvent) {\r\n                        dragEvent.cancel = new _deferred.Deferred\r\n                    }\r\n                    this._showRecurrenceChangeConfirm(isDeleted).done(function(result) {\r\n                        result && callback();\r\n                        !result && _this12._excludeAppointmentFromSeries(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent)\r\n                    }).fail(function() {\r\n                        return _this12._appointments.moveAppointmentBack(dragEvent)\r\n                    })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_excludeAppointmentFromSeries\",\r\n        value: function(rawAppointment, newRawAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\r\n            var _this13 = this;\r\n            var appointment = this.createAppointmentAdapter(_objectSpread({}, rawAppointment));\r\n            var newAppointment = this.createAppointmentAdapter(newRawAppointment);\r\n            newAppointment.recurrenceRule = \"\";\r\n            newAppointment.recurrenceException = \"\";\r\n            var canCreateNewAppointment = !isDeleted && !isPopupEditing;\r\n            if (canCreateNewAppointment) {\r\n                var keyPropertyName = this._appointmentModel.keyName;\r\n                delete newRawAppointment[keyPropertyName];\r\n                this.addAppointment(newRawAppointment)\r\n            }\r\n            appointment.recurrenceException = this._createRecurrenceException(appointment, exceptionDate);\r\n            if (isPopupEditing) {\r\n                this._updatedRecAppointment = appointment.source();\r\n                this._appointmentPopup.show(newRawAppointment, true);\r\n                this._editAppointmentData = rawAppointment\r\n            } else {\r\n                this._updateAppointment(rawAppointment, appointment.source(), function() {\r\n                    _this13._appointments.moveAppointmentBack(dragEvent)\r\n                }, dragEvent)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createRecurrenceException\",\r\n        value: function(appointment, exceptionDate) {\r\n            var result = [];\r\n            if (appointment.recurrenceException) {\r\n                result.push(appointment.recurrenceException)\r\n            }\r\n            result.push(this._getSerializedDate(exceptionDate, appointment.startDate, appointment.allDay));\r\n            return result.join()\r\n        }\r\n    }, {\r\n        key: \"_getSerializedDate\",\r\n        value: function(date, startDate, isAllDay) {\r\n            isAllDay && date.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds(), startDate.getMilliseconds());\r\n            return _date_serialization.default.serializeDate(date, UTC_FULL_DATE_FORMAT)\r\n        }\r\n    }, {\r\n        key: \"_showRecurrenceChangeConfirm\",\r\n        value: function(isDeleted) {\r\n            var message = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\r\n            var seriesText = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\r\n            var occurrenceText = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\r\n            return (0, _dialog.custom)({\r\n                messageHtml: message,\r\n                showCloseButton: true,\r\n                showTitle: true,\r\n                buttons: [{\r\n                    text: seriesText,\r\n                    onClick: function() {\r\n                        return true\r\n                    }\r\n                }, {\r\n                    text: occurrenceText,\r\n                    onClick: function() {\r\n                        return false\r\n                    }\r\n                }]\r\n            }).show()\r\n        }\r\n    }, {\r\n        key: \"_getUpdatedData\",\r\n        value: function(rawAppointment) {\r\n            var _this14 = this;\r\n            var getConvertedFromGrid = function(date) {\r\n                return date ? _this14.timeZoneCalculator.createDate(date, {\r\n                    path: \"fromGrid\"\r\n                }) : void 0\r\n            };\r\n            var isValidDate = function(date) {\r\n                return !isNaN(new Date(date).getTime())\r\n            };\r\n            var targetCell = this.getTargetCellData();\r\n            var appointment = this.createAppointmentAdapter(rawAppointment);\r\n            var cellStartDate = getConvertedFromGrid(targetCell.startDate);\r\n            var cellEndDate = getConvertedFromGrid(targetCell.endDate);\r\n            var appointmentStartDate = new Date(appointment.startDate);\r\n            var appointmentEndDate = new Date(appointment.endDate);\r\n            var resultedStartDate = cellStartDate || appointmentStartDate;\r\n            if (!isValidDate(appointmentStartDate)) {\r\n                appointmentStartDate = resultedStartDate\r\n            }\r\n            if (!isValidDate(appointmentEndDate)) {\r\n                appointmentEndDate = cellEndDate\r\n            }\r\n            var duration = appointmentEndDate.getTime() - appointmentStartDate.getTime();\r\n            var isKeepAppointmentHours = this._workSpace.keepOriginalHours() && isValidDate(appointment.startDate) && isValidDate(cellStartDate);\r\n            if (isKeepAppointmentHours) {\r\n                var trimTime = _date.default.trimTime;\r\n                var startDate = this.timeZoneCalculator.createDate(appointment.startDate, {\r\n                    path: \"toGrid\"\r\n                });\r\n                var timeInMs = startDate.getTime() - trimTime(startDate).getTime();\r\n                resultedStartDate = new Date(trimTime(targetCell.startDate).getTime() + timeInMs);\r\n                resultedStartDate = this.timeZoneCalculator.createDate(resultedStartDate, {\r\n                    path: \"fromGrid\"\r\n                })\r\n            }\r\n            var result = this.createAppointmentAdapter({});\r\n            if (void 0 !== targetCell.allDay) {\r\n                result.allDay = targetCell.allDay\r\n            }\r\n            result.startDate = resultedStartDate;\r\n            var resultedEndDate = new Date(resultedStartDate.getTime() + duration);\r\n            if (this.appointmentTakesAllDay(rawAppointment) && !result.allDay && this._workSpace.supportAllDayRow()) {\r\n                resultedEndDate = this._workSpace.calculateEndDate(resultedStartDate)\r\n            }\r\n            if (appointment.allDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\r\n                var dateCopy = new Date(resultedStartDate);\r\n                dateCopy.setHours(0);\r\n                resultedEndDate = new Date(dateCopy.getTime() + duration);\r\n                if (0 !== resultedEndDate.getHours()) {\r\n                    resultedEndDate.setHours(this._getCurrentViewOption(\"endDayHour\"))\r\n                }\r\n            }\r\n            var timeZoneOffset = _utils.default.getTimezoneOffsetChangeInMs(appointmentStartDate, appointmentEndDate, resultedStartDate, resultedEndDate);\r\n            result.endDate = new Date(resultedEndDate.getTime() - timeZoneOffset);\r\n            var rawResult = result.source();\r\n            this._resourcesManager.setResourcesToItem(rawResult, targetCell.groups);\r\n            return rawResult\r\n        }\r\n    }, {\r\n        key: \"getTargetedAppointment\",\r\n        value: function(appointment, element) {\r\n            var settings = _utils2.default.dataAccessors.getAppointmentSettings(element);\r\n            var info = _utils2.default.dataAccessors.getAppointmentInfo(element);\r\n            var appointmentIndex = (0, _renderer.default)(element).data(this._appointments._itemIndexKey());\r\n            var adapter = this.createAppointmentAdapter(appointment);\r\n            var targetedAdapter = adapter.clone();\r\n            if (this._isAgenda() && adapter.isRecurrent) {\r\n                var getStartDate = this.getRenderingStrategyInstance().getAppointmentDataCalculator();\r\n                var newStartDate = getStartDate((0, _renderer.default)(element), adapter.startDate).startDate;\r\n                targetedAdapter.startDate = newStartDate;\r\n                targetedAdapter.endDate = new Date(newStartDate.getTime() + adapter.duration)\r\n            } else {\r\n                if (settings) {\r\n                    targetedAdapter.startDate = info ? info.sourceAppointment.startDate : adapter.startDate;\r\n                    targetedAdapter.endDate = info ? info.sourceAppointment.endDate : adapter.endDate\r\n                }\r\n            }\r\n            var rawTargetedAppointment = targetedAdapter.source();\r\n            if (element) {\r\n                this.setTargetedAppointmentResources(rawTargetedAppointment, element, appointmentIndex)\r\n            }\r\n            return rawTargetedAppointment\r\n        }\r\n    }, {\r\n        key: \"subscribe\",\r\n        value: function(subject, action) {\r\n            this._subscribes[subject] = _uiScheduler5.default[subject] = action\r\n        }\r\n    }, {\r\n        key: \"fire\",\r\n        value: function(subject) {\r\n            var callback = this._subscribes[subject];\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (!(0, _type.isFunction)(callback)) {\r\n                throw _ui.default.Error(\"E1031\", subject)\r\n            }\r\n            return callback.apply(this, args.slice(1))\r\n        }\r\n    }, {\r\n        key: \"getTargetCellData\",\r\n        value: function() {\r\n            return this._workSpace.getDataByDroppableCell()\r\n        }\r\n    }, {\r\n        key: \"_updateAppointment\",\r\n        value: function(target, rawAppointment, onUpdatePrevented, dragEvent) {\r\n            var updatingOptions = {\r\n                newData: rawAppointment,\r\n                oldData: (0, _extend.extend)({}, target),\r\n                cancel: false\r\n            };\r\n            var performFailAction = function(err) {\r\n                if (onUpdatePrevented) {\r\n                    onUpdatePrevented.call(this)\r\n                }\r\n                if (err && \"Error\" === err.name) {\r\n                    throw err\r\n                }\r\n            }.bind(this);\r\n            this._actions[StoreEventNames.UPDATING](updatingOptions);\r\n            if (dragEvent && !(0, _type.isDeferred)(dragEvent.cancel)) {\r\n                dragEvent.cancel = new _deferred.Deferred\r\n            }\r\n            return this._processActionResult(updatingOptions, function(canceled) {\r\n                var _this15 = this;\r\n                var deferred = new _deferred.Deferred;\r\n                if (!canceled) {\r\n                    this._expandAllDayPanel(rawAppointment);\r\n                    try {\r\n                        deferred = this._appointmentModel.update(target, rawAppointment).done(function() {\r\n                            dragEvent && dragEvent.cancel.resolve(false)\r\n                        }).always(function(storeAppointment) {\r\n                            return _this15._onDataPromiseCompleted(StoreEventNames.UPDATED, rawAppointment, storeAppointment)\r\n                        }).fail(function() {\r\n                            return performFailAction()\r\n                        })\r\n                    } catch (err) {\r\n                        performFailAction(err);\r\n                        deferred.resolve()\r\n                    }\r\n                } else {\r\n                    performFailAction();\r\n                    deferred.resolve()\r\n                }\r\n                return deferred.promise()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_processActionResult\",\r\n        value: function(actionOptions, callback) {\r\n            var _this16 = this;\r\n            var deferred = new _deferred.Deferred;\r\n            var resolveCallback = function(callbackResult) {\r\n                (0, _deferred.when)((0, _deferred.fromPromise)(callbackResult)).always(deferred.resolve)\r\n            };\r\n            if ((0, _type.isPromise)(actionOptions.cancel)) {\r\n                (0, _deferred.when)((0, _deferred.fromPromise)(actionOptions.cancel)).always(function(cancel) {\r\n                    if (!(0, _type.isDefined)(cancel)) {\r\n                        cancel = \"rejected\" === actionOptions.cancel.state()\r\n                    }\r\n                    resolveCallback(callback.call(_this16, cancel))\r\n                })\r\n            } else {\r\n                resolveCallback(callback.call(this, actionOptions.cancel))\r\n            }\r\n            return deferred.promise()\r\n        }\r\n    }, {\r\n        key: \"_expandAllDayPanel\",\r\n        value: function(appointment) {\r\n            if (!this._isAllDayExpanded(this.getFilteredItems()) && this.appointmentTakesAllDay(appointment)) {\r\n                this._workSpace.option(\"allDayExpanded\", true)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onDataPromiseCompleted\",\r\n        value: function(handlerName, appointment, storeAppointment) {\r\n            var isDeletedOperation = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : false;\r\n            var args = {\r\n                appointmentData: appointment\r\n            };\r\n            if (storeAppointment instanceof Error) {\r\n                args.error = storeAppointment\r\n            } else {\r\n                if (!isDeletedOperation) {\r\n                    args.appointmentData = storeAppointment[0] || storeAppointment\r\n                }\r\n                this._appointmentPopup.isVisible() && this._appointmentPopup.hide()\r\n            }\r\n            this._actions[handlerName](args);\r\n            this._fireContentReadyAction()\r\n        }\r\n    }, {\r\n        key: \"getAppointmentPopup\",\r\n        value: function() {\r\n            return this._appointmentPopup.getPopup()\r\n        }\r\n    }, {\r\n        key: \"getUpdatedAppointment\",\r\n        value: function() {\r\n            return this._appointmentModel.getUpdatedAppointment()\r\n        }\r\n    }, {\r\n        key: \"getUpdatedAppointmentKeys\",\r\n        value: function() {\r\n            return this._appointmentModel.getUpdatedAppointmentKeys()\r\n        }\r\n    }, {\r\n        key: \"getAppointmentsInstance\",\r\n        value: function() {\r\n            return this._appointments\r\n        }\r\n    }, {\r\n        key: \"getResourceManager\",\r\n        value: function() {\r\n            return this._resourcesManager\r\n        }\r\n    }, {\r\n        key: \"getLayoutManager\",\r\n        value: function() {\r\n            return this._layoutManager\r\n        }\r\n    }, {\r\n        key: \"getRenderingStrategyInstance\",\r\n        value: function() {\r\n            return this._layoutManager.getRenderingStrategyInstance()\r\n        }\r\n    }, {\r\n        key: \"getFilteredItems\",\r\n        value: function() {\r\n            return this._filteredItems\r\n        }\r\n    }, {\r\n        key: \"getActions\",\r\n        value: function() {\r\n            return this._actions\r\n        }\r\n    }, {\r\n        key: \"appointmentTakesAllDay\",\r\n        value: function(appointment) {\r\n            return this._appointmentModel.appointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"))\r\n        }\r\n    }, {\r\n        key: \"_getRecurrenceException\",\r\n        value: function(rawAppointment) {\r\n            var appointment = this.createAppointmentAdapter(rawAppointment);\r\n            var recurrenceException = appointment.recurrenceException;\r\n            if (recurrenceException) {\r\n                var exceptions = recurrenceException.split(\",\");\r\n                for (var i = 0; i < exceptions.length; i++) {\r\n                    exceptions[i] = this._convertRecurrenceException(exceptions[i], appointment.startDate)\r\n                }\r\n                return exceptions.join()\r\n            }\r\n            return recurrenceException\r\n        }\r\n    }, {\r\n        key: \"_convertRecurrenceException\",\r\n        value: function(exceptionString, startDate) {\r\n            var _this17 = this;\r\n            exceptionString = exceptionString.replace(/\\s/g, \"\");\r\n            var getConvertedToTimeZone = function(date) {\r\n                return _this17.timeZoneCalculator.createDate(date, {\r\n                    path: \"toGrid\"\r\n                })\r\n            };\r\n            var exceptionDate = _date_serialization.default.deserializeDate(exceptionString);\r\n            var convertedStartDate = getConvertedToTimeZone(startDate);\r\n            var convertedExceptionDate = getConvertedToTimeZone(exceptionDate);\r\n            convertedExceptionDate = _utils.default.correctRecurrenceExceptionByTimezone(convertedExceptionDate, convertedStartDate, this.option(\"timeZone\"));\r\n            exceptionString = _date_serialization.default.serializeDate(convertedExceptionDate, FULL_DATE_FORMAT);\r\n            return exceptionString\r\n        }\r\n    }, {\r\n        key: \"dayHasAppointment\",\r\n        value: function(day, rawAppointment, trimTime) {\r\n            var _this18 = this;\r\n            var getConvertedToTimeZone = function(date) {\r\n                return _this18.timeZoneCalculator.createDate(date, {\r\n                    path: \"toGrid\"\r\n                })\r\n            };\r\n            var appointment = this.createAppointmentAdapter(rawAppointment);\r\n            var startDate = new Date(appointment.startDate);\r\n            var endDate = new Date(appointment.endDate);\r\n            startDate = getConvertedToTimeZone(startDate);\r\n            endDate = getConvertedToTimeZone(endDate);\r\n            if (day.getTime() === endDate.getTime()) {\r\n                return startDate.getTime() === endDate.getTime()\r\n            }\r\n            if (trimTime) {\r\n                day = _date.default.trimTime(day);\r\n                startDate = _date.default.trimTime(startDate);\r\n                endDate = _date.default.trimTime(endDate)\r\n            }\r\n            var dayTimeStamp = day.getTime();\r\n            var startDateTimeStamp = startDate.getTime();\r\n            var endDateTimeStamp = endDate.getTime();\r\n            return (0, _array.inArray)(dayTimeStamp, [startDateTimeStamp, endDateTimeStamp]) > -1 || startDateTimeStamp < dayTimeStamp && endDateTimeStamp > dayTimeStamp\r\n        }\r\n    }, {\r\n        key: \"setTargetedAppointmentResources\",\r\n        value: function(rawAppointment, element, appointmentIndex) {\r\n            var groups = this._getCurrentViewOption(\"groups\");\r\n            if (null !== groups && void 0 !== groups && groups.length) {\r\n                var resourcesSetter = this._resourcesManager._dataAccessors.setter;\r\n                var workSpace = this._workSpace;\r\n                var getGroups;\r\n                var setResourceCallback;\r\n                if (this._isAgenda()) {\r\n                    getGroups = function() {\r\n                        var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\r\n                        return workSpace._getCellGroups(apptSettings[0].groupIndex)\r\n                    };\r\n                    setResourceCallback = function(_, group) {\r\n                        resourcesSetter[group.name](rawAppointment, group.id)\r\n                    }\r\n                } else {\r\n                    getGroups = function() {\r\n                        var setting = _utils2.default.dataAccessors.getAppointmentSettings(element) || {};\r\n                        return workSpace.getCellDataByCoordinates({\r\n                            left: setting.left,\r\n                            top: setting.top\r\n                        }).groups\r\n                    };\r\n                    setResourceCallback = function(field, value) {\r\n                        resourcesSetter[field](rawAppointment, value)\r\n                    }\r\n                }(0, _iterator.each)(getGroups.call(this), setResourceCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getStartViewDate\",\r\n        value: function() {\r\n            return this._workSpace.getStartViewDate()\r\n        }\r\n    }, {\r\n        key: \"getEndViewDate\",\r\n        value: function() {\r\n            return this._workSpace.getEndViewDate()\r\n        }\r\n    }, {\r\n        key: \"showAppointmentPopup\",\r\n        value: function(rawAppointment, createNewAppointment, rawTargetedAppointment) {\r\n            var _this19 = this;\r\n            var appointment = this.createAppointmentAdapter(rawTargetedAppointment || rawAppointment);\r\n            var newTargetedAppointment = (0, _extend.extend)({}, rawAppointment, rawTargetedAppointment);\r\n            this._checkRecurringAppointment(rawAppointment, newTargetedAppointment, appointment.startDate, function() {\r\n                if (createNewAppointment || (0, _type.isEmptyObject)(rawAppointment)) {\r\n                    delete _this19._editAppointmentData;\r\n                    _this19._editing.allowAdding && _this19._appointmentPopup.show(rawAppointment, true)\r\n                } else {\r\n                    _this19._editAppointmentData = rawAppointment;\r\n                    _this19._appointmentPopup.show(rawAppointment, _this19._editing.allowUpdating)\r\n                }\r\n            }, false, true)\r\n        }\r\n    }, {\r\n        key: \"hideAppointmentPopup\",\r\n        value: function(saveChanges) {\r\n            if (this._appointmentPopup && this._appointmentPopup.isVisible()) {\r\n                saveChanges && this._appointmentPopup.saveChanges();\r\n                this._appointmentPopup.hide()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"showAppointmentTooltip\",\r\n        value: function(appointment, target, targetedAppointment) {\r\n            if (appointment) {\r\n                var info = new _dataStructures.AppointmentTooltipInfo(appointment, targetedAppointment, this._appointments._tryGetAppointmentColor(target));\r\n                this.showAppointmentTooltipCore(target, [info])\r\n            }\r\n        }\r\n    }, {\r\n        key: \"showAppointmentTooltipCore\",\r\n        value: function(target, data, options) {\r\n            if (this._appointmentTooltip.isAlreadyShown(target)) {\r\n                this.hideAppointmentTooltip()\r\n            } else {\r\n                this._appointmentTooltip.show(target, data, (0, _extend.extend)(this._getExtraAppointmentTooltipOptions(), options))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"hideAppointmentTooltip\",\r\n        value: function() {\r\n            this._appointmentTooltip && this._appointmentTooltip.hide()\r\n        }\r\n    }, {\r\n        key: \"scrollToTime\",\r\n        value: function(hours, minutes, date) {\r\n            this._workSpace.scrollToTime(hours, minutes, date)\r\n        }\r\n    }, {\r\n        key: \"scrollTo\",\r\n        value: function(date, groups, allDay) {\r\n            this._workSpace.scrollTo(date, groups, allDay)\r\n        }\r\n    }, {\r\n        key: \"addAppointment\",\r\n        value: function(rawAppointment) {\r\n            var _this20 = this;\r\n            var appointment = this.createAppointmentAdapter(rawAppointment);\r\n            appointment.text = appointment.text || \"\";\r\n            var serializedAppointment = appointment.source(true);\r\n            var addingOptions = {\r\n                appointmentData: serializedAppointment,\r\n                cancel: false\r\n            };\r\n            this._actions[StoreEventNames.ADDING](addingOptions);\r\n            return this._processActionResult(addingOptions, function(canceled) {\r\n                if (canceled) {\r\n                    return (new _deferred.Deferred).resolve()\r\n                }\r\n                _this20._expandAllDayPanel(serializedAppointment);\r\n                return _this20._appointmentModel.add(serializedAppointment).always(function(storeAppointment) {\r\n                    return _this20._onDataPromiseCompleted(StoreEventNames.ADDED, serializedAppointment, storeAppointment)\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"updateAppointment\",\r\n        value: function(target, appointment) {\r\n            return this._updateAppointment(target, appointment);\r\n        }\r\n    }, {\r\n        key: \"deleteAppointment\",\r\n        value: function(rawAppointment) {\r\n            var deletingOptions = {\r\n                appointmentData: rawAppointment,\r\n                cancel: false\r\n            };\r\n            this._actions[StoreEventNames.DELETING](deletingOptions);\r\n            this._processActionResult(deletingOptions, function(canceled) {\r\n                var _this21 = this;\r\n                if (!canceled) {\r\n                    this._appointmentModel.remove(rawAppointment).always(function(storeAppointment) {\r\n                        return _this21._onDataPromiseCompleted(StoreEventNames.DELETED, rawAppointment, storeAppointment, true)\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"focus\",\r\n        value: function() {\r\n            if (this._editAppointmentData) {\r\n                this._appointments.focus()\r\n            } else {\r\n                this._workSpace.focus()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getFirstDayOfWeek\",\r\n        value: function() {\r\n            return (0, _type.isDefined)(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : _date2.default.firstDayOfWeekIndex()\r\n        }\r\n    }, {\r\n        key: \"createAppointmentAdapter\",\r\n        value: function(rawAppointment) {\r\n            var _this22 = this;\r\n            var options = {\r\n                getField: function(rawAppointment, property) {\r\n                    return _this22.fire(\"getField\", property, rawAppointment)\r\n                },\r\n                setField: function(rawAppointment, property, value) {\r\n                    return _this22.fire(\"setField\", property, rawAppointment, value)\r\n                },\r\n                getTimeZoneCalculator: function() {\r\n                    return _this22.timeZoneCalculator\r\n                }\r\n            };\r\n            return new _appointmentAdapter.default(rawAppointment, options)\r\n        }\r\n    }]);\r\n    return Scheduler\r\n}(_ui2.default);\r\nScheduler.include(_data_helper.default);\r\n(0, _component_registrator.default)(\"dxScheduler\", Scheduler);\r\nvar _default = Scheduler;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}