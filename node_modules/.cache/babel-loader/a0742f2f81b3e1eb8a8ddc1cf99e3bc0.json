{"ast":null,"code":"/**\r\n * DevExtreme (ui/lookup.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _window = require(\"../core/utils/window\");\n\nvar _support = require(\"../core/utils/support\");\n\nvar _common = require(\"../core/utils/common\");\n\nvar _element = require(\"../core/element\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _utils = require(\"./widget/utils.ink_ripple\");\n\nvar _message = _interopRequireDefault(require(\"../localization/message\"));\n\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _index = require(\"../events/utils/index\");\n\nvar _ui = _interopRequireDefault(require(\"./drop_down_editor/ui.drop_down_list\"));\n\nvar _themes = require(\"./themes\");\n\nvar _click = require(\"../events/click\");\n\nvar _popover = _interopRequireDefault(require(\"./popover\"));\n\nvar _text_box = _interopRequireDefault(require(\"./text_box\"));\n\nvar _child_default_template = require(\"../core/templates/child_default_template\");\n\nvar _translator = require(\"../animation/translator\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _utils2 = require(\"./drop_down_editor/utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar window = (0, _window.getWindow)();\nvar LOOKUP_CLASS = \"dx-lookup\";\nvar LOOKUP_SEARCH_CLASS = \"dx-lookup-search\";\nvar LOOKUP_SEARCH_WRAPPER_CLASS = \"dx-lookup-search-wrapper\";\nvar LOOKUP_FIELD_CLASS = \"dx-lookup-field\";\nvar LOOKUP_ARROW_CLASS = \"dx-lookup-arrow\";\nvar LOOKUP_FIELD_WRAPPER_CLASS = \"dx-lookup-field-wrapper\";\nvar LOOKUP_POPUP_CLASS = \"dx-lookup-popup\";\nvar LOOKUP_POPUP_WRAPPER_CLASS = \"dx-lookup-popup-wrapper\";\nvar LOOKUP_POPUP_SEARCH_CLASS = \"dx-lookup-popup-search\";\nvar LOOKUP_POPOVER_MODE = \"dx-lookup-popover-mode\";\nvar LOOKUP_EMPTY_CLASS = \"dx-lookup-empty\";\nvar LOOKUP_POPOVER_FLIP_VERTICAL_CLASS = \"dx-popover-flipped-vertical\";\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\nvar LIST_ITEM_CLASS = \"dx-list-item\";\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\nvar GROUP_LIST_HEADER_CLASS = \"dx-list-group-header\";\nvar MATERIAL_LOOKUP_LIST_ITEMS_COUNT = 5;\nvar MATERIAL_LOOKUP_LIST_PADDING = 8;\n\nvar Lookup = _ui.default.inherit({\n  _supportedKeys: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      space: function (e) {\n        e.preventDefault();\n\n        this._validatedOpening();\n      },\n      enter: function () {\n        this._validatedOpening();\n      }\n    });\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      placeholder: _message.default.format(\"Select\"),\n      searchPlaceholder: _message.default.format(\"Search\"),\n      searchEnabled: true,\n      cleanSearchOnOpening: true,\n      showCancelButton: true,\n      showClearButton: false,\n      clearButtonText: _message.default.format(\"Clear\"),\n      applyButtonText: _message.default.format(\"OK\"),\n      pullRefreshEnabled: false,\n      useNativeScrolling: true,\n      pullingDownText: _message.default.format(\"dxList-pullingDownText\"),\n      pulledDownText: _message.default.format(\"dxList-pulledDownText\"),\n      refreshingText: _message.default.format(\"dxList-refreshingText\"),\n      pageLoadingText: _message.default.format(\"dxList-pageLoadingText\"),\n      onScroll: null,\n      onPullRefresh: null,\n      onPageLoading: null,\n      pageLoadMode: \"scrollBottom\",\n      nextButtonText: _message.default.format(\"dxList-nextButtonText\"),\n      grouped: false,\n      groupTemplate: \"group\",\n      usePopover: false,\n      showDropDownButton: false,\n      focusStateEnabled: false,\n      animation: {},\n      dropDownOptions: {\n        showTitle: true,\n        width: function () {\n          return .8 * (0, _renderer.default)(window).width();\n        },\n        height: function () {\n          return .8 * (0, _renderer.default)(window).height();\n        },\n        shading: true,\n        closeOnOutsideClick: false,\n        position: void 0,\n        animation: {},\n        title: \"\",\n        titleTemplate: \"title\",\n        onTitleRendered: null,\n        fullScreen: false\n      },\n      dropDownCentered: false,\n      _scrollToSelectedItemEnabled: false,\n      useHiddenSubmitElement: true\n    });\n  },\n  _defaultOptionsRules: function () {\n    var _this = this;\n\n    var themeName = (0, _themes.current)();\n    return this.callBase().concat([{\n      device: function () {\n        return !_support.nativeScrolling;\n      },\n      options: {\n        useNativeScrolling: false\n      }\n    }, {\n      device: function (_device) {\n        return !_devices.default.isSimulator() && \"desktop\" === _devices.default.real().deviceType && \"generic\" === _device.platform;\n      },\n      options: {\n        usePopover: true,\n        dropDownOptions: {\n          height: \"auto\"\n        }\n      }\n    }, {\n      device: {\n        platform: \"ios\",\n        phone: true\n      },\n      options: {\n        dropDownOptions: {\n          fullScreen: true\n        }\n      }\n    }, {\n      device: {\n        platform: \"ios\",\n        tablet: true\n      },\n      options: {\n        dropDownOptions: {\n          width: function () {\n            return .4 * Math.min((0, _renderer.default)(window).width(), (0, _renderer.default)(window).height());\n          },\n          height: \"auto\"\n        },\n        usePopover: true,\n        useInkRipple: false\n      }\n    }, {\n      device: function () {\n        return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function () {\n        return (0, _themes.isMaterial)(themeName);\n      },\n      options: {\n        usePopover: false,\n        searchEnabled: false,\n        showCancelButton: false,\n        dropDownCentered: true,\n        _scrollToSelectedItemEnabled: true,\n        dropDownOptions: {\n          closeOnOutsideClick: true,\n          width: function () {\n            return (0, _utils2.getElementWidth)(_this.$element());\n          },\n          height: function () {\n            return this._getPopupHeight();\n          }.bind(this),\n          showTitle: false,\n          shading: false\n        }\n      }\n    }]);\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initActions();\n  },\n  _initActions: function () {\n    this.callBase();\n\n    this._initScrollAction();\n\n    this._initPageLoadingAction();\n\n    this._initPullRefreshAction();\n  },\n  _initPageLoadingAction: function () {\n    this._pageLoadingAction = this._createActionByOption(\"onPageLoading\");\n  },\n  _initPullRefreshAction: function () {\n    this._pullRefreshAction = this._createActionByOption(\"onPullRefresh\");\n  },\n  _initScrollAction: function () {\n    this._scrollAction = this._createActionByOption(\"onScroll\");\n  },\n  _scrollHandler: function (e) {\n    this._scrollAction(e);\n  },\n  _pullRefreshHandler: function (e) {\n    this._pullRefreshAction(e);\n  },\n  _pageLoadingHandler: function (e) {\n    this._pageLoadingAction(e);\n  },\n  _initTemplates: function () {\n    this.callBase();\n\n    this._templateManager.addDefaultTemplates({\n      group: new _child_default_template.ChildDefaultTemplate(\"group\"),\n      title: new _child_default_template.ChildDefaultTemplate(\"title\")\n    });\n  },\n  _initMarkup: function () {\n    this.$element().addClass(LOOKUP_CLASS).toggleClass(LOOKUP_POPOVER_MODE, this.option(\"usePopover\"));\n    this.callBase();\n  },\n  _inputWrapper: function () {\n    return this.$element().find(\".\" + LOOKUP_FIELD_WRAPPER_CLASS);\n  },\n  _dataSourceOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      paginate: true\n    });\n  },\n  _fireContentReadyAction: _common.noop,\n  _popupWrapperClass: function () {\n    return \"\";\n  },\n  _renderInput: function () {\n    var _this2 = this;\n\n    var fieldClickAction = this._createAction(function () {\n      _this2._toggleOpenState();\n    });\n\n    this._$field = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_FIELD_CLASS);\n\n    _events_engine.default.on(this._$field, (0, _index.addNamespace)(_click.name, this.NAME), function (e) {\n      fieldClickAction({\n        event: e\n      });\n    });\n\n    var $arrow = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_ARROW_CLASS);\n    this._$fieldWrapper = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_FIELD_WRAPPER_CLASS).append(this._$field).append($arrow).appendTo(this.$element());\n    this.option(\"useInkRipple\") && this._renderInkRipple();\n  },\n  _getInputContainer: function () {\n    return this._$fieldWrapper;\n  },\n  _renderInkRipple: function () {\n    this._inkRipple = (0, _utils.render)();\n  },\n  _toggleOpenState: function () {\n    this.callBase();\n\n    if (!this.option(\"dropDownOptions.fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._setPopupPosition();\n    }\n  },\n  _toggleActiveState: function ($element, value, e) {\n    this.callBase.apply(this, arguments);\n\n    if (!this._inkRipple) {\n      return;\n    }\n\n    var config = {\n      element: this._inputWrapper(),\n      event: e\n    };\n\n    if (value) {\n      this._inkRipple.showWave(config);\n    } else {\n      this._inkRipple.hideWave(config);\n    }\n  },\n  _renderField: function () {\n    var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\n\n    if (fieldTemplate && this.option(\"fieldTemplate\")) {\n      this._renderFieldTemplate(fieldTemplate);\n\n      return;\n    }\n\n    var displayValue = this.option(\"displayValue\");\n\n    this._updateField((0, _type.isDefined)(displayValue) && String(displayValue) || this.option(\"placeholder\"));\n\n    this.$element().toggleClass(LOOKUP_EMPTY_CLASS, !this.option(\"selectedItem\"));\n  },\n  _renderDisplayText: function (text) {\n    if (this._input().length) {\n      this.callBase(text);\n    } else {\n      this._updateField(text);\n    }\n  },\n  _updateField: function (text) {\n    this._$field.text(text);\n  },\n  _renderFieldTemplate: function (template) {\n    this._$field.empty();\n\n    var data = this._fieldRenderData();\n\n    template.render({\n      model: data,\n      container: (0, _element.getPublicElement)(this._$field)\n    });\n  },\n  _fieldRenderData: function () {\n    return this.option(\"selectedItem\");\n  },\n  _popupShowingHandler: function () {\n    this.callBase.apply(this, arguments);\n\n    if (this.option(\"cleanSearchOnOpening\")) {\n      if (this.option(\"searchEnabled\") && this._searchBox.option(\"value\")) {\n        this._searchBox.option(\"value\", \"\");\n\n        this._searchCanceled();\n      }\n\n      this._list && this._list.option(\"focusedElement\", null);\n    }\n\n    if (this.option(\"dropDownOptions.fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._popup.option(\"position\").of = (0, _renderer.default)(window);\n    }\n  },\n  _scrollToSelectedItem: function () {\n    var selectedIndex = this._list.option(\"selectedIndex\");\n\n    var listItems = this._list.option(\"items\");\n\n    var itemsCount = listItems.length;\n\n    if (0 !== itemsCount) {\n      if (this._list.option(\"grouped\")) {\n        this._list.scrollToItem({\n          group: itemsCount - 1,\n          item: listItems[itemsCount - 1].items.length - 1\n        });\n      } else {\n        this._list.scrollToItem(itemsCount - 1);\n      }\n\n      this._list.scrollToItem(selectedIndex);\n    }\n  },\n  _getDifferenceOffsets: function (selectedListItem) {\n    return selectedListItem.offset().top - (0, _renderer.default)(this.element()).offset().top;\n  },\n  _isCenteringEnabled: function (index, count) {\n    return 1 < index && index < count - 2;\n  },\n  _getPopupOffset: function () {\n    var listItemsCount = this._listItemElements().length;\n\n    if (0 === listItemsCount) {\n      return;\n    }\n\n    var selectedListItem = (0, _renderer.default)(this._list.element()).find(\".\" + LIST_ITEM_SELECTED_CLASS);\n\n    var selectedIndex = this._listItemElements().index(selectedListItem);\n\n    var differenceOfHeights = (selectedListItem.height() - (0, _renderer.default)(this.element()).height()) / 2;\n    var lookupOffset = (0, _renderer.default)(this._list.element()).offset().top;\n    var dropDownHeightOption = this.option(\"dropDownOptions.height\");\n    var popupHeight = \"function\" === typeof dropDownHeightOption ? dropDownHeightOption() : dropDownHeightOption;\n    var windowHeight = (0, _renderer.default)(window).height();\n    var offsetTop = 0;\n\n    if (selectedIndex !== -1) {\n      if (this._isCenteringEnabled(selectedIndex, listItemsCount)) {\n        this._scrollToSelectedItem();\n\n        var scrollOffsetTop = (popupHeight - selectedListItem.height()) / 2 - this._getDifferenceOffsets(selectedListItem);\n\n        this._list.scrollTo(this._list.scrollTop() + MATERIAL_LOOKUP_LIST_PADDING / 2 - scrollOffsetTop);\n\n        offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\n\n        if (lookupOffset < offsetTop && selectedIndex !== listItemsCount - 3) {\n          this._list.scrollTo(this._list.scrollTop() + this._getDifferenceOffsets(selectedListItem) / 2);\n\n          offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\n        }\n      } else {\n        if (selectedIndex <= 1) {\n          this._list.scrollTo(0);\n\n          offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\n        } else {\n          if (selectedIndex >= listItemsCount - 2) {\n            this._scrollToSelectedItem();\n\n            offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\n          }\n        }\n      }\n\n      if (lookupOffset < offsetTop) {\n        this._scrollToSelectedItem();\n\n        offsetTop = differenceOfHeights + MATERIAL_LOOKUP_LIST_PADDING;\n      }\n    }\n\n    var offsetBottom = popupHeight - offsetTop - (0, _renderer.default)(this.element()).height();\n\n    if (windowHeight - lookupOffset < offsetBottom) {\n      this._list.scrollTo(this._list.scrollTop() + differenceOfHeights - offsetBottom);\n\n      offsetTop = popupHeight - (0, _renderer.default)(this.element()).height() - MATERIAL_LOOKUP_LIST_PADDING;\n    }\n\n    return offsetTop;\n  },\n  _setPopupPosition: function () {\n    if (!this.option(\"dropDownCentered\")) {\n      return;\n    }\n\n    var flipped = this._popup._$wrapper.hasClass(LOOKUP_POPOVER_FLIP_VERTICAL_CLASS);\n\n    if (flipped) {\n      return;\n    }\n\n    var popupContentParent = (0, _renderer.default)(this._popup.content()).parent();\n\n    var popupOffset = this._getPopupOffset();\n\n    var position = (0, _translator.locate)(popupContentParent);\n    (0, _translator.move)(popupContentParent, {\n      top: position.top - popupOffset\n    });\n  },\n  _listItemGroupedElements: function () {\n    var groups = this._list._itemContainer().children();\n\n    var items = [];\n    groups.each(function (_, group) {\n      items.push((0, _renderer.default)(group).find(\".\" + GROUP_LIST_HEADER_CLASS)[0]);\n      var groupedItems = (0, _renderer.default)(group).find(\".\" + LIST_ITEM_CLASS);\n      groupedItems.each(function (_, item) {\n        items.push(item);\n      });\n    });\n    return (0, _renderer.default)(items);\n  },\n  _calculateListHeight: function (grouped) {\n    var listItems = grouped ? this._listItemGroupedElements() : this._listItemElements();\n    var selectedListItem = (0, _renderer.default)(\".\" + LIST_ITEM_SELECTED_CLASS);\n    var selectedIndex = listItems.index(selectedListItem);\n    var listHeight = 0;\n    var requireListItems = [];\n\n    if (0 === listItems.length) {\n      listHeight += MATERIAL_LOOKUP_LIST_PADDING;\n    } else {\n      if (listItems.length < MATERIAL_LOOKUP_LIST_ITEMS_COUNT) {\n        listItems.each(function (_, item) {\n          listHeight += (0, _renderer.default)(item).outerHeight();\n        });\n      } else {\n        if (selectedIndex <= 1) {\n          requireListItems = listItems.slice(0, MATERIAL_LOOKUP_LIST_ITEMS_COUNT);\n        } else {\n          if (this._isCenteringEnabled(selectedIndex, listItems.length)) {\n            requireListItems = listItems.slice(selectedIndex - 2, selectedIndex + 3);\n          } else {\n            requireListItems = listItems.slice(listItems.length - MATERIAL_LOOKUP_LIST_ITEMS_COUNT, listItems.length);\n          }\n        }\n\n        requireListItems.each(function (_, item) {\n          listHeight += (0, _renderer.default)(item).outerHeight();\n        });\n      }\n    }\n\n    return listHeight + (grouped ? MATERIAL_LOOKUP_LIST_PADDING : 2 * MATERIAL_LOOKUP_LIST_PADDING);\n  },\n  _getPopupHeight: function () {\n    if (this._list && this._list.itemElements()) {\n      return this._calculateListHeight(this.option(\"grouped\")) + (this._$searchWrapper ? this._$searchWrapper.outerHeight() : 0) + (this._popup._$bottom ? this._popup._$bottom.outerHeight() : 0) + (this._popup._$title ? this._popup._$title.outerHeight() : 0);\n    } else {\n      return \"auto\";\n    }\n  },\n  _renderPopup: function () {\n    if (this.option(\"usePopover\") && !this.option(\"dropDownOptions.fullScreen\")) {\n      if (this.option(\"_scrollToSelectedItemEnabled\")) {\n        this.callBase();\n      } else {\n        this._renderPopover();\n      }\n    } else {\n      this.callBase();\n    }\n\n    this._$popup.addClass(LOOKUP_POPUP_CLASS);\n\n    this._popup._wrapper().addClass(LOOKUP_POPUP_WRAPPER_CLASS);\n  },\n  _renderPopover: function () {\n    this._popup = this._createComponent(this._$popup, _popover.default, (0, _extend.extend)(this._popupConfig(), this._options.cache(\"dropDownOptions\"), {\n      showEvent: null,\n      hideEvent: null,\n      target: this.$element(),\n      _fixedPosition: false,\n      fullScreen: false,\n      shading: false,\n      closeOnTargetScroll: true,\n      width: this._isInitialOptionValue(\"dropDownOptions.width\") ? function () {\n        return this.$element().outerWidth();\n      }.bind(this) : this._popupConfig().width\n    }));\n\n    this._popup.on({\n      showing: this._popupShowingHandler.bind(this),\n      shown: this._popupShownHandler.bind(this),\n      hiding: this._popupHidingHandler.bind(this),\n      hidden: this._popupHiddenHandler.bind(this),\n      contentReady: this._contentReadyHandler.bind(this)\n    });\n\n    if (this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._popup._$arrow.remove();\n    }\n\n    this._setPopupContentId(this._popup.$content());\n\n    this._contentReadyHandler();\n  },\n  _popupHidingHandler: function () {\n    this.callBase();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _popupHiddenHandler: function () {\n    this.callBase();\n\n    if (this.option(\"_scrollToSelectedItemEnabled\")) {\n      (0, _translator.resetPosition)((0, _renderer.default)(this._popup.content()).parent());\n    }\n  },\n  _preventFocusOnPopup: _common.noop,\n  _popupConfig: function () {\n    var _this3 = this;\n\n    var result = (0, _extend.extend)(this.callBase(), {\n      toolbarItems: this._getPopupToolbarItems(),\n      closeOnTargetScroll: false,\n      onPositioned: null,\n      maxHeight: function () {\n        return (0, _renderer.default)(window).height();\n      },\n      showTitle: this.option(\"dropDownOptions.showTitle\"),\n      title: this.option(\"dropDownOptions.title\"),\n      titleTemplate: this._getTemplateByOption(\"dropDownOptions.titleTemplate\"),\n      onTitleRendered: this.option(\"dropDownOptions.onTitleRendered\"),\n      fullScreen: this.option(\"dropDownOptions.fullScreen\"),\n      shading: this.option(\"dropDownOptions.shading\"),\n      closeOnOutsideClick: this.option(\"dropDownOptions.closeOnOutsideClick\")\n    });\n    delete result.animation;\n    delete result.position;\n\n    if (this.option(\"_scrollToSelectedItemEnabled\")) {\n      result.position = this.option(\"dropDownCentered\") ? {\n        my: \"left top\",\n        at: \"left top\",\n        of: this.element()\n      } : {\n        my: \"left top\",\n        at: \"left bottom\",\n        of: this.element()\n      };\n    }\n\n    (0, _iterator.each)([\"position\", \"animation\", \"width\", \"height\"], function (_, optionName) {\n      var popupOptionValue = _this3.option(\"dropDownOptions.\".concat(optionName));\n\n      if (void 0 !== popupOptionValue) {\n        result[optionName] = popupOptionValue;\n      }\n    });\n    return result;\n  },\n  _getPopupToolbarItems: function () {\n    var buttonsConfig = \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\n\n    var cancelButton = this._getCancelButtonConfig();\n\n    if (cancelButton) {\n      buttonsConfig.push(cancelButton);\n    }\n\n    var clearButton = this._getClearButtonConfig();\n\n    if (clearButton) {\n      buttonsConfig.push(clearButton);\n    }\n\n    return this._applyButtonsLocation(buttonsConfig);\n  },\n  _popupToolbarItemsConfig: function () {\n    return [{\n      shortcut: \"done\",\n      options: {\n        onClick: this._applyButtonHandler.bind(this),\n        text: this.option(\"applyButtonText\")\n      }\n    }];\n  },\n  _getCancelButtonConfig: function () {\n    var _this4 = this;\n\n    return this.option(\"showCancelButton\") ? {\n      shortcut: \"cancel\",\n      onClick: this._cancelButtonHandler.bind(this),\n      options: {\n        onInitialized: function (e) {\n          e.component.registerKeyHandler(\"escape\", _this4.close.bind(_this4));\n        },\n        text: this.option(\"cancelButtonText\")\n      }\n    } : null;\n  },\n  _getClearButtonConfig: function () {\n    return this.option(\"showClearButton\") ? {\n      shortcut: \"clear\",\n      onClick: this._resetValue.bind(this),\n      options: {\n        text: this.option(\"clearButtonText\")\n      }\n    } : null;\n  },\n  _applyButtonHandler: function () {\n    this.option(\"value\", this._valueGetter(this._currentSelectedItem()));\n    this.callBase();\n  },\n  _cancelButtonHandler: function () {\n    this._refreshSelected();\n\n    this.callBase();\n  },\n  _refreshPopupVisibility: function () {\n    if (this.option(\"opened\")) {\n      this._updatePopupDimensions();\n    }\n  },\n  _dimensionChanged: function () {\n    if (this.option(\"usePopover\") && !this.option(\"dropDownOptions.width\")) {\n      this.option(\"dropDownOptions.width\", this.$element().width());\n    }\n\n    this._popup && this._updatePopupDimensions();\n  },\n  _input: function () {\n    return this._$searchBox || this.callBase();\n  },\n  _renderPopupContent: function () {\n    this.callBase();\n\n    this._renderSearch();\n  },\n  _renderSearch: function () {\n    var _this5 = this;\n\n    var isSearchEnabled = this.option(\"searchEnabled\");\n\n    this._toggleSearchClass(isSearchEnabled);\n\n    if (isSearchEnabled) {\n      var $searchWrapper = this._$searchWrapper = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_SEARCH_WRAPPER_CLASS);\n      var $searchBox = this._$searchBox = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_SEARCH_CLASS).appendTo($searchWrapper);\n\n      var currentDevice = _devices.default.current();\n\n      var searchMode = currentDevice.android && currentDevice.version[0] >= 5 ? \"text\" : \"search\";\n      var isKeyboardListeningEnabled = false;\n      this._searchBox = this._createComponent($searchBox, _text_box.default, {\n        onDisposing: function () {\n          return isKeyboardListeningEnabled = false;\n        },\n        onFocusIn: function () {\n          return isKeyboardListeningEnabled = true;\n        },\n        onFocusOut: function () {\n          return isKeyboardListeningEnabled = false;\n        },\n        onKeyboardHandled: function (opts) {\n          return isKeyboardListeningEnabled && _this5._list._keyboardHandler(opts);\n        },\n        mode: searchMode,\n        showClearButton: true,\n        valueChangeEvent: this.option(\"valueChangeEvent\"),\n        onValueChanged: this._searchHandler.bind(this)\n      });\n\n      this._registerSearchKeyHandlers();\n\n      $searchWrapper.insertBefore(this._$list);\n\n      this._setSearchPlaceholder();\n    }\n  },\n  _removeSearch: function () {\n    this._$searchWrapper && this._$searchWrapper.remove();\n    delete this._$searchWrapper;\n    this._$searchBox && this._$searchBox.remove();\n    delete this._$searchBox;\n    delete this._searchBox;\n  },\n  _selectListItemHandler: function (e) {\n    var $itemElement = (0, _renderer.default)(this._list.option(\"focusedElement\"));\n\n    if (!$itemElement.length) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this._saveValueChangeEvent(e);\n\n    this._selectListItem(e.itemData, $itemElement);\n  },\n  _registerSearchKeyHandlers: function () {\n    this._searchBox.registerKeyHandler(\"escape\", this.close.bind(this));\n\n    this._searchBox.registerKeyHandler(\"enter\", this._selectListItemHandler.bind(this));\n\n    this._searchBox.registerKeyHandler(\"space\", this._selectListItemHandler.bind(this));\n\n    this._searchBox.registerKeyHandler(\"end\", _common.noop);\n\n    this._searchBox.registerKeyHandler(\"home\", _common.noop);\n  },\n  _toggleSearchClass: function (isSearchEnabled) {\n    if (this._popup) {\n      this._popup._wrapper().toggleClass(LOOKUP_POPUP_SEARCH_CLASS, isSearchEnabled);\n    }\n  },\n  _setSearchPlaceholder: function () {\n    if (!this._$searchBox) {\n      return;\n    }\n\n    var minSearchLength = this.option(\"minSearchLength\");\n    var placeholder = this.option(\"searchPlaceholder\");\n\n    if (minSearchLength && placeholder === _message.default.format(\"Search\")) {\n      placeholder = _message.default.getFormatter(\"dxLookup-searchPlaceholder\")(minSearchLength);\n    }\n\n    this._searchBox.option(\"placeholder\", placeholder);\n  },\n  _setAriaTargetForList: _common.noop,\n  _renderList: function () {\n    var _this6 = this;\n\n    this.callBase();\n\n    this._list.registerKeyHandler(\"escape\", function () {\n      _this6.close();\n    });\n  },\n  _listConfig: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      tabIndex: 0,\n      grouped: this.option(\"grouped\"),\n      groupTemplate: this._getTemplateByOption(\"groupTemplate\"),\n      pullRefreshEnabled: this.option(\"pullRefreshEnabled\"),\n      useNativeScrolling: this.option(\"useNativeScrolling\"),\n      pullingDownText: this.option(\"pullingDownText\"),\n      pulledDownText: this.option(\"pulledDownText\"),\n      refreshingText: this.option(\"refreshingText\"),\n      pageLoadingText: this.option(\"pageLoadingText\"),\n      onScroll: this._scrollHandler.bind(this),\n      onPullRefresh: this._pullRefreshHandler.bind(this),\n      onPageLoading: this._pageLoadingHandler.bind(this),\n      pageLoadMode: this.option(\"pageLoadMode\"),\n      nextButtonText: this.option(\"nextButtonText\"),\n      indicateLoading: this.option(\"searchEnabled\"),\n      onSelectionChanged: this._getSelectionChangedHandler()\n    });\n  },\n  _getSelectionChangedHandler: function () {\n    return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : _common.noop;\n  },\n  _listContentReadyHandler: function () {\n    this.callBase.apply(this, arguments);\n\n    this._refreshSelected();\n  },\n  _setFocusPolicy: function () {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    if (this.option(\"searchEnabled\")) {\n      this._searchBox.focus();\n    } else {\n      _events_engine.default.trigger(this._$list, \"focus\");\n    }\n  },\n  _focusTarget: function () {\n    return this._$field;\n  },\n  _keyboardEventBindingTarget: function () {\n    return this._$field;\n  },\n  _listItemClickHandler: function (e) {\n    this._saveValueChangeEvent(e.event);\n\n    this._selectListItem(e.itemData, e.event.currentTarget);\n  },\n  _selectListItem: function (itemData, target) {\n    this._list.selectItem(target);\n\n    if (\"instantly\" === this.option(\"applyValueMode\")) {\n      this._applyButtonHandler();\n    }\n  },\n  _currentSelectedItem: function () {\n    return this.option(\"grouped\") ? this._list.option(\"selectedItems[0]\").items[0] : this._list.option(\"selectedItems[0]\");\n  },\n  _resetValue: function (e) {\n    this._saveValueChangeEvent(e.event);\n\n    this.option(\"value\", null);\n    this.option(\"opened\", false);\n  },\n  _searchValue: function () {\n    return this.option(\"searchEnabled\") && this._searchBox ? this._searchBox.option(\"value\") : \"\";\n  },\n  _renderInputValue: function () {\n    var _this7 = this;\n\n    return this.callBase().always(function () {\n      _this7._refreshSelected();\n    });\n  },\n  _renderPlaceholder: function () {\n    if (0 === this.$element().find(\".\" + TEXTEDITOR_INPUT_CLASS).length) {\n      return;\n    }\n\n    this.callBase();\n  },\n  _clean: function () {\n    this._$fieldWrapper.remove();\n\n    this._$searchBox = null;\n    delete this._inkRipple;\n    this.callBase();\n  },\n  _setDeprecatedOptions: function () {\n    this.callBase();\n    (0, _extend.extend)(this._deprecatedOptions, {\n      title: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.title\"\n      },\n      titleTemplate: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.titleTemplate\"\n      },\n      onTitleRendered: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.onTitleRendered\"\n      },\n      fullScreen: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.fullScreen\"\n      },\n      popupWidth: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.width\"\n      },\n      popupHeight: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.height\"\n      },\n      shading: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.shading\"\n      },\n      closeOnOutsideClick: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.closeOnOutsideClick\"\n      },\n      position: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.position\"\n      },\n      animation: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.animation\"\n      }\n    });\n  },\n  _optionChanged: function (args) {\n    var name = args.name;\n    var value = args.value;\n\n    switch (name) {\n      case \"dataSource\":\n        this.callBase.apply(this, arguments);\n\n        this._renderField();\n\n        break;\n\n      case \"searchEnabled\":\n        if (this._popup) {\n          this._removeSearch();\n\n          this._renderSearch();\n        }\n\n        break;\n\n      case \"searchPlaceholder\":\n        this._setSearchPlaceholder();\n\n        break;\n\n      case \"minSearchLength\":\n        this._setSearchPlaceholder();\n\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"title\":\n      case \"titleTemplate\":\n      case \"onTitleRendered\":\n      case \"shading\":\n      case \"animation\":\n      case \"position\":\n      case \"closeOnOutsideClick\":\n      case \"fullScreen\":\n        this._setPopupOption(name, value);\n\n        break;\n\n      case \"usePopover\":\n      case \"placeholder\":\n        this._invalidate();\n\n        break;\n\n      case \"clearButtonText\":\n      case \"showClearButton\":\n      case \"showCancelButton\":\n        this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\n\n        break;\n\n      case \"applyValueMode\":\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"popupWidth\":\n        this._setPopupOption(\"width\", \"auto\" === value ? this.initialOption(\"dropDownOptions\").width : value);\n\n        break;\n\n      case \"popupHeight\":\n        this._setPopupOption(\"height\", \"auto\" === value ? this.initialOption(\"dropDownOptions\").height : value);\n\n        break;\n\n      case \"onPageLoading\":\n        this._initPageLoadingAction();\n\n        break;\n\n      case \"onPullRefresh\":\n        this._initPullRefreshAction();\n\n        break;\n\n      case \"pullRefreshEnabled\":\n      case \"useNativeScrolling\":\n      case \"pullingDownText\":\n      case \"pulledDownText\":\n      case \"refreshingText\":\n      case \"pageLoadingText\":\n      case \"nextButtonText\":\n      case \"grouped\":\n      case \"groupTemplate\":\n        this._setListOption(name);\n\n        break;\n\n      case \"onScroll\":\n        this._initScrollAction();\n\n        break;\n\n      case \"pageLoadMode\":\n        this._setListOption(\"pageLoadMode\", this.option(\"pageLoadMode\"));\n\n        break;\n\n      case \"cleanSearchOnOpening\":\n      case \"_scrollToSelectedItemEnabled\":\n        break;\n\n      case \"dropDownCentered\":\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\n          this.option(\"dropDownOptions.position\", void 0);\n\n          this._renderPopup();\n        }\n\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  focus: function () {\n    this.option(\"opened\") ? this._setFocusPolicy() : _events_engine.default.trigger(this._focusTarget(), \"focus\");\n  },\n  field: function () {\n    return this._$field;\n  }\n});\n\n(0, _component_registrator.default)(\"dxLookup\", Lookup);\nvar _default = Lookup;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["E:/newfrontend/webfe/node_modules/devextreme/ui/lookup.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_window","_support","_common","_element","_iterator","_extend","_utils","_message","_devices","_component_registrator","_index","_ui","_themes","_click","_popover","_text_box","_child_default_template","_translator","_type","_utils2","obj","__esModule","window","getWindow","LOOKUP_CLASS","LOOKUP_SEARCH_CLASS","LOOKUP_SEARCH_WRAPPER_CLASS","LOOKUP_FIELD_CLASS","LOOKUP_ARROW_CLASS","LOOKUP_FIELD_WRAPPER_CLASS","LOOKUP_POPUP_CLASS","LOOKUP_POPUP_WRAPPER_CLASS","LOOKUP_POPUP_SEARCH_CLASS","LOOKUP_POPOVER_MODE","LOOKUP_EMPTY_CLASS","LOOKUP_POPOVER_FLIP_VERTICAL_CLASS","TEXTEDITOR_INPUT_CLASS","LIST_ITEM_CLASS","LIST_ITEM_SELECTED_CLASS","GROUP_LIST_HEADER_CLASS","MATERIAL_LOOKUP_LIST_ITEMS_COUNT","MATERIAL_LOOKUP_LIST_PADDING","Lookup","inherit","_supportedKeys","extend","callBase","space","e","preventDefault","_validatedOpening","enter","_getDefaultOptions","placeholder","format","searchPlaceholder","searchEnabled","cleanSearchOnOpening","showCancelButton","showClearButton","clearButtonText","applyButtonText","pullRefreshEnabled","useNativeScrolling","pullingDownText","pulledDownText","refreshingText","pageLoadingText","onScroll","onPullRefresh","onPageLoading","pageLoadMode","nextButtonText","grouped","groupTemplate","usePopover","showDropDownButton","focusStateEnabled","animation","dropDownOptions","showTitle","width","height","shading","closeOnOutsideClick","position","title","titleTemplate","onTitleRendered","fullScreen","dropDownCentered","_scrollToSelectedItemEnabled","useHiddenSubmitElement","_defaultOptionsRules","_this","themeName","current","concat","device","nativeScrolling","options","_device","isSimulator","real","deviceType","platform","phone","tablet","Math","min","useInkRipple","isMaterial","getElementWidth","$element","_getPopupHeight","bind","_init","_initActions","_initScrollAction","_initPageLoadingAction","_initPullRefreshAction","_pageLoadingAction","_createActionByOption","_pullRefreshAction","_scrollAction","_scrollHandler","_pullRefreshHandler","_pageLoadingHandler","_initTemplates","_templateManager","addDefaultTemplates","group","ChildDefaultTemplate","_initMarkup","addClass","toggleClass","option","_inputWrapper","find","_dataSourceOptions","paginate","_fireContentReadyAction","noop","_popupWrapperClass","_renderInput","_this2","fieldClickAction","_createAction","_toggleOpenState","_$field","on","addNamespace","name","NAME","event","$arrow","_$fieldWrapper","append","appendTo","_renderInkRipple","_getInputContainer","_inkRipple","render","_setPopupPosition","_toggleActiveState","value","apply","arguments","config","element","showWave","hideWave","_renderField","fieldTemplate","_getTemplateByOption","_renderFieldTemplate","displayValue","_updateField","isDefined","String","_renderDisplayText","text","_input","length","template","empty","data","_fieldRenderData","model","container","getPublicElement","_popupShowingHandler","_searchBox","_searchCanceled","_list","_popup","of","_scrollToSelectedItem","selectedIndex","listItems","itemsCount","scrollToItem","item","items","_getDifferenceOffsets","selectedListItem","offset","top","_isCenteringEnabled","index","count","_getPopupOffset","listItemsCount","_listItemElements","differenceOfHeights","lookupOffset","dropDownHeightOption","popupHeight","windowHeight","offsetTop","scrollOffsetTop","scrollTo","scrollTop","offsetBottom","flipped","_$wrapper","hasClass","popupContentParent","content","parent","popupOffset","locate","move","_listItemGroupedElements","groups","_itemContainer","children","each","_","push","groupedItems","_calculateListHeight","listHeight","requireListItems","outerHeight","slice","itemElements","_$searchWrapper","_$bottom","_$title","_renderPopup","_renderPopover","_$popup","_wrapper","_createComponent","_popupConfig","_options","cache","showEvent","hideEvent","target","_fixedPosition","closeOnTargetScroll","_isInitialOptionValue","outerWidth","showing","shown","_popupShownHandler","hiding","_popupHidingHandler","hidden","_popupHiddenHandler","contentReady","_contentReadyHandler","_$arrow","remove","_setPopupContentId","$content","focus","resetPosition","_preventFocusOnPopup","_this3","result","toolbarItems","_getPopupToolbarItems","onPositioned","maxHeight","my","at","optionName","popupOptionValue","buttonsConfig","_popupToolbarItemsConfig","cancelButton","_getCancelButtonConfig","clearButton","_getClearButtonConfig","_applyButtonsLocation","shortcut","onClick","_applyButtonHandler","_this4","_cancelButtonHandler","onInitialized","component","registerKeyHandler","close","_resetValue","_valueGetter","_currentSelectedItem","_refreshSelected","_refreshPopupVisibility","_updatePopupDimensions","_dimensionChanged","_$searchBox","_renderPopupContent","_renderSearch","_this5","isSearchEnabled","_toggleSearchClass","$searchWrapper","$searchBox","currentDevice","searchMode","android","version","isKeyboardListeningEnabled","onDisposing","onFocusIn","onFocusOut","onKeyboardHandled","opts","_keyboardHandler","mode","valueChangeEvent","onValueChanged","_searchHandler","_registerSearchKeyHandlers","insertBefore","_$list","_setSearchPlaceholder","_removeSearch","_selectListItemHandler","$itemElement","_saveValueChangeEvent","_selectListItem","itemData","minSearchLength","getFormatter","_setAriaTargetForList","_renderList","_this6","_listConfig","tabIndex","indicateLoading","onSelectionChanged","_getSelectionChangedHandler","_selectionChangeHandler","_listContentReadyHandler","_setFocusPolicy","trigger","_focusTarget","_keyboardEventBindingTarget","_listItemClickHandler","currentTarget","selectItem","_searchValue","_renderInputValue","_this7","always","_renderPlaceholder","_clean","_setDeprecatedOptions","_deprecatedOptions","since","alias","popupWidth","_optionChanged","args","_setPopupOption","_invalidate","initialOption","_setListOption","field","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/lookup.js)\r\n * Version: 20.2.5\r\n * Build date: Fri Jan 15 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _window = require(\"../core/utils/window\");\r\nvar _support = require(\"../core/utils/support\");\r\nvar _common = require(\"../core/utils/common\");\r\nvar _element = require(\"../core/element\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _utils = require(\"./widget/utils.ink_ripple\");\r\nvar _message = _interopRequireDefault(require(\"../localization/message\"));\r\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _index = require(\"../events/utils/index\");\r\nvar _ui = _interopRequireDefault(require(\"./drop_down_editor/ui.drop_down_list\"));\r\nvar _themes = require(\"./themes\");\r\nvar _click = require(\"../events/click\");\r\nvar _popover = _interopRequireDefault(require(\"./popover\"));\r\nvar _text_box = _interopRequireDefault(require(\"./text_box\"));\r\nvar _child_default_template = require(\"../core/templates/child_default_template\");\r\nvar _translator = require(\"../animation/translator\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _utils2 = require(\"./drop_down_editor/utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar LOOKUP_CLASS = \"dx-lookup\";\r\nvar LOOKUP_SEARCH_CLASS = \"dx-lookup-search\";\r\nvar LOOKUP_SEARCH_WRAPPER_CLASS = \"dx-lookup-search-wrapper\";\r\nvar LOOKUP_FIELD_CLASS = \"dx-lookup-field\";\r\nvar LOOKUP_ARROW_CLASS = \"dx-lookup-arrow\";\r\nvar LOOKUP_FIELD_WRAPPER_CLASS = \"dx-lookup-field-wrapper\";\r\nvar LOOKUP_POPUP_CLASS = \"dx-lookup-popup\";\r\nvar LOOKUP_POPUP_WRAPPER_CLASS = \"dx-lookup-popup-wrapper\";\r\nvar LOOKUP_POPUP_SEARCH_CLASS = \"dx-lookup-popup-search\";\r\nvar LOOKUP_POPOVER_MODE = \"dx-lookup-popover-mode\";\r\nvar LOOKUP_EMPTY_CLASS = \"dx-lookup-empty\";\r\nvar LOOKUP_POPOVER_FLIP_VERTICAL_CLASS = \"dx-popover-flipped-vertical\";\r\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\r\nvar LIST_ITEM_CLASS = \"dx-list-item\";\r\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\r\nvar GROUP_LIST_HEADER_CLASS = \"dx-list-group-header\";\r\nvar MATERIAL_LOOKUP_LIST_ITEMS_COUNT = 5;\r\nvar MATERIAL_LOOKUP_LIST_PADDING = 8;\r\nvar Lookup = _ui.default.inherit({\r\n    _supportedKeys: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            space: function(e) {\r\n                e.preventDefault();\r\n                this._validatedOpening()\r\n            },\r\n            enter: function() {\r\n                this._validatedOpening()\r\n            }\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            placeholder: _message.default.format(\"Select\"),\r\n            searchPlaceholder: _message.default.format(\"Search\"),\r\n            searchEnabled: true,\r\n            cleanSearchOnOpening: true,\r\n            showCancelButton: true,\r\n            showClearButton: false,\r\n            clearButtonText: _message.default.format(\"Clear\"),\r\n            applyButtonText: _message.default.format(\"OK\"),\r\n            pullRefreshEnabled: false,\r\n            useNativeScrolling: true,\r\n            pullingDownText: _message.default.format(\"dxList-pullingDownText\"),\r\n            pulledDownText: _message.default.format(\"dxList-pulledDownText\"),\r\n            refreshingText: _message.default.format(\"dxList-refreshingText\"),\r\n            pageLoadingText: _message.default.format(\"dxList-pageLoadingText\"),\r\n            onScroll: null,\r\n            onPullRefresh: null,\r\n            onPageLoading: null,\r\n            pageLoadMode: \"scrollBottom\",\r\n            nextButtonText: _message.default.format(\"dxList-nextButtonText\"),\r\n            grouped: false,\r\n            groupTemplate: \"group\",\r\n            usePopover: false,\r\n            showDropDownButton: false,\r\n            focusStateEnabled: false,\r\n            animation: {},\r\n            dropDownOptions: {\r\n                showTitle: true,\r\n                width: function() {\r\n                    return .8 * (0, _renderer.default)(window).width()\r\n                },\r\n                height: function() {\r\n                    return .8 * (0, _renderer.default)(window).height()\r\n                },\r\n                shading: true,\r\n                closeOnOutsideClick: false,\r\n                position: void 0,\r\n                animation: {},\r\n                title: \"\",\r\n                titleTemplate: \"title\",\r\n                onTitleRendered: null,\r\n                fullScreen: false\r\n            },\r\n            dropDownCentered: false,\r\n            _scrollToSelectedItemEnabled: false,\r\n            useHiddenSubmitElement: true\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        var _this = this;\r\n        var themeName = (0, _themes.current)();\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !_support.nativeScrolling\r\n            },\r\n            options: {\r\n                useNativeScrolling: false\r\n            }\r\n        }, {\r\n            device: function(_device) {\r\n                return !_devices.default.isSimulator() && \"desktop\" === _devices.default.real().deviceType && \"generic\" === _device.platform\r\n            },\r\n            options: {\r\n                usePopover: true,\r\n                dropDownOptions: {\r\n                    height: \"auto\"\r\n                }\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"ios\",\r\n                phone: true\r\n            },\r\n            options: {\r\n                dropDownOptions: {\r\n                    fullScreen: true\r\n                }\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"ios\",\r\n                tablet: true\r\n            },\r\n            options: {\r\n                dropDownOptions: {\r\n                    width: function() {\r\n                        return .4 * Math.min((0, _renderer.default)(window).width(), (0, _renderer.default)(window).height())\r\n                    },\r\n                    height: \"auto\"\r\n                },\r\n                usePopover: true,\r\n                useInkRipple: false\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return (0, _themes.isMaterial)(themeName)\r\n            },\r\n            options: {\r\n                usePopover: false,\r\n                searchEnabled: false,\r\n                showCancelButton: false,\r\n                dropDownCentered: true,\r\n                _scrollToSelectedItemEnabled: true,\r\n                dropDownOptions: {\r\n                    closeOnOutsideClick: true,\r\n                    width: function() {\r\n                        return (0, _utils2.getElementWidth)(_this.$element())\r\n                    },\r\n                    height: function() {\r\n                        return this._getPopupHeight()\r\n                    }.bind(this),\r\n                    showTitle: false,\r\n                    shading: false\r\n                }\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initActions()\r\n    },\r\n    _initActions: function() {\r\n        this.callBase();\r\n        this._initScrollAction();\r\n        this._initPageLoadingAction();\r\n        this._initPullRefreshAction()\r\n    },\r\n    _initPageLoadingAction: function() {\r\n        this._pageLoadingAction = this._createActionByOption(\"onPageLoading\")\r\n    },\r\n    _initPullRefreshAction: function() {\r\n        this._pullRefreshAction = this._createActionByOption(\"onPullRefresh\")\r\n    },\r\n    _initScrollAction: function() {\r\n        this._scrollAction = this._createActionByOption(\"onScroll\")\r\n    },\r\n    _scrollHandler: function(e) {\r\n        this._scrollAction(e)\r\n    },\r\n    _pullRefreshHandler: function(e) {\r\n        this._pullRefreshAction(e)\r\n    },\r\n    _pageLoadingHandler: function(e) {\r\n        this._pageLoadingAction(e)\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._templateManager.addDefaultTemplates({\r\n            group: new _child_default_template.ChildDefaultTemplate(\"group\"),\r\n            title: new _child_default_template.ChildDefaultTemplate(\"title\")\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(LOOKUP_CLASS).toggleClass(LOOKUP_POPOVER_MODE, this.option(\"usePopover\"));\r\n        this.callBase()\r\n    },\r\n    _inputWrapper: function() {\r\n        return this.$element().find(\".\" + LOOKUP_FIELD_WRAPPER_CLASS)\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            paginate: true\r\n        })\r\n    },\r\n    _fireContentReadyAction: _common.noop,\r\n    _popupWrapperClass: function() {\r\n        return \"\"\r\n    },\r\n    _renderInput: function() {\r\n        var _this2 = this;\r\n        var fieldClickAction = this._createAction(function() {\r\n            _this2._toggleOpenState()\r\n        });\r\n        this._$field = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_FIELD_CLASS);\r\n        _events_engine.default.on(this._$field, (0, _index.addNamespace)(_click.name, this.NAME), function(e) {\r\n            fieldClickAction({\r\n                event: e\r\n            })\r\n        });\r\n        var $arrow = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_ARROW_CLASS);\r\n        this._$fieldWrapper = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_FIELD_WRAPPER_CLASS).append(this._$field).append($arrow).appendTo(this.$element());\r\n        this.option(\"useInkRipple\") && this._renderInkRipple()\r\n    },\r\n    _getInputContainer: function() {\r\n        return this._$fieldWrapper\r\n    },\r\n    _renderInkRipple: function() {\r\n        this._inkRipple = (0, _utils.render)()\r\n    },\r\n    _toggleOpenState: function() {\r\n        this.callBase();\r\n        if (!this.option(\"dropDownOptions.fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            this._setPopupPosition()\r\n        }\r\n    },\r\n    _toggleActiveState: function($element, value, e) {\r\n        this.callBase.apply(this, arguments);\r\n        if (!this._inkRipple) {\r\n            return\r\n        }\r\n        var config = {\r\n            element: this._inputWrapper(),\r\n            event: e\r\n        };\r\n        if (value) {\r\n            this._inkRipple.showWave(config)\r\n        } else {\r\n            this._inkRipple.hideWave(config)\r\n        }\r\n    },\r\n    _renderField: function() {\r\n        var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\r\n        if (fieldTemplate && this.option(\"fieldTemplate\")) {\r\n            this._renderFieldTemplate(fieldTemplate);\r\n            return\r\n        }\r\n        var displayValue = this.option(\"displayValue\");\r\n        this._updateField((0, _type.isDefined)(displayValue) && String(displayValue) || this.option(\"placeholder\"));\r\n        this.$element().toggleClass(LOOKUP_EMPTY_CLASS, !this.option(\"selectedItem\"))\r\n    },\r\n    _renderDisplayText: function(text) {\r\n        if (this._input().length) {\r\n            this.callBase(text)\r\n        } else {\r\n            this._updateField(text)\r\n        }\r\n    },\r\n    _updateField: function(text) {\r\n        this._$field.text(text)\r\n    },\r\n    _renderFieldTemplate: function(template) {\r\n        this._$field.empty();\r\n        var data = this._fieldRenderData();\r\n        template.render({\r\n            model: data,\r\n            container: (0, _element.getPublicElement)(this._$field)\r\n        })\r\n    },\r\n    _fieldRenderData: function() {\r\n        return this.option(\"selectedItem\")\r\n    },\r\n    _popupShowingHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        if (this.option(\"cleanSearchOnOpening\")) {\r\n            if (this.option(\"searchEnabled\") && this._searchBox.option(\"value\")) {\r\n                this._searchBox.option(\"value\", \"\");\r\n                this._searchCanceled()\r\n            }\r\n            this._list && this._list.option(\"focusedElement\", null)\r\n        }\r\n        if (this.option(\"dropDownOptions.fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            this._popup.option(\"position\").of = (0, _renderer.default)(window)\r\n        }\r\n    },\r\n    _scrollToSelectedItem: function() {\r\n        var selectedIndex = this._list.option(\"selectedIndex\");\r\n        var listItems = this._list.option(\"items\");\r\n        var itemsCount = listItems.length;\r\n        if (0 !== itemsCount) {\r\n            if (this._list.option(\"grouped\")) {\r\n                this._list.scrollToItem({\r\n                    group: itemsCount - 1,\r\n                    item: listItems[itemsCount - 1].items.length - 1\r\n                })\r\n            } else {\r\n                this._list.scrollToItem(itemsCount - 1)\r\n            }\r\n            this._list.scrollToItem(selectedIndex)\r\n        }\r\n    },\r\n    _getDifferenceOffsets: function(selectedListItem) {\r\n        return selectedListItem.offset().top - (0, _renderer.default)(this.element()).offset().top\r\n    },\r\n    _isCenteringEnabled: function(index, count) {\r\n        return 1 < index && index < count - 2\r\n    },\r\n    _getPopupOffset: function() {\r\n        var listItemsCount = this._listItemElements().length;\r\n        if (0 === listItemsCount) {\r\n            return\r\n        }\r\n        var selectedListItem = (0, _renderer.default)(this._list.element()).find(\".\" + LIST_ITEM_SELECTED_CLASS);\r\n        var selectedIndex = this._listItemElements().index(selectedListItem);\r\n        var differenceOfHeights = (selectedListItem.height() - (0, _renderer.default)(this.element()).height()) / 2;\r\n        var lookupOffset = (0, _renderer.default)(this._list.element()).offset().top;\r\n        var dropDownHeightOption = this.option(\"dropDownOptions.height\");\r\n        var popupHeight = \"function\" === typeof dropDownHeightOption ? dropDownHeightOption() : dropDownHeightOption;\r\n        var windowHeight = (0, _renderer.default)(window).height();\r\n        var offsetTop = 0;\r\n        if (selectedIndex !== -1) {\r\n            if (this._isCenteringEnabled(selectedIndex, listItemsCount)) {\r\n                this._scrollToSelectedItem();\r\n                var scrollOffsetTop = (popupHeight - selectedListItem.height()) / 2 - this._getDifferenceOffsets(selectedListItem);\r\n                this._list.scrollTo(this._list.scrollTop() + MATERIAL_LOOKUP_LIST_PADDING / 2 - scrollOffsetTop);\r\n                offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\r\n                if (lookupOffset < offsetTop && selectedIndex !== listItemsCount - 3) {\r\n                    this._list.scrollTo(this._list.scrollTop() + this._getDifferenceOffsets(selectedListItem) / 2);\r\n                    offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem)\r\n                }\r\n            } else {\r\n                if (selectedIndex <= 1) {\r\n                    this._list.scrollTo(0);\r\n                    offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem)\r\n                } else {\r\n                    if (selectedIndex >= listItemsCount - 2) {\r\n                        this._scrollToSelectedItem();\r\n                        offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem)\r\n                    }\r\n                }\r\n            }\r\n            if (lookupOffset < offsetTop) {\r\n                this._scrollToSelectedItem();\r\n                offsetTop = differenceOfHeights + MATERIAL_LOOKUP_LIST_PADDING\r\n            }\r\n        }\r\n        var offsetBottom = popupHeight - offsetTop - (0, _renderer.default)(this.element()).height();\r\n        if (windowHeight - lookupOffset < offsetBottom) {\r\n            this._list.scrollTo(this._list.scrollTop() + differenceOfHeights - offsetBottom);\r\n            offsetTop = popupHeight - (0, _renderer.default)(this.element()).height() - MATERIAL_LOOKUP_LIST_PADDING\r\n        }\r\n        return offsetTop\r\n    },\r\n    _setPopupPosition: function() {\r\n        if (!this.option(\"dropDownCentered\")) {\r\n            return\r\n        }\r\n        var flipped = this._popup._$wrapper.hasClass(LOOKUP_POPOVER_FLIP_VERTICAL_CLASS);\r\n        if (flipped) {\r\n            return\r\n        }\r\n        var popupContentParent = (0, _renderer.default)(this._popup.content()).parent();\r\n        var popupOffset = this._getPopupOffset();\r\n        var position = (0, _translator.locate)(popupContentParent);\r\n        (0, _translator.move)(popupContentParent, {\r\n            top: position.top - popupOffset\r\n        })\r\n    },\r\n    _listItemGroupedElements: function() {\r\n        var groups = this._list._itemContainer().children();\r\n        var items = [];\r\n        groups.each(function(_, group) {\r\n            items.push((0, _renderer.default)(group).find(\".\" + GROUP_LIST_HEADER_CLASS)[0]);\r\n            var groupedItems = (0, _renderer.default)(group).find(\".\" + LIST_ITEM_CLASS);\r\n            groupedItems.each(function(_, item) {\r\n                items.push(item)\r\n            })\r\n        });\r\n        return (0, _renderer.default)(items)\r\n    },\r\n    _calculateListHeight: function(grouped) {\r\n        var listItems = grouped ? this._listItemGroupedElements() : this._listItemElements();\r\n        var selectedListItem = (0, _renderer.default)(\".\" + LIST_ITEM_SELECTED_CLASS);\r\n        var selectedIndex = listItems.index(selectedListItem);\r\n        var listHeight = 0;\r\n        var requireListItems = [];\r\n        if (0 === listItems.length) {\r\n            listHeight += MATERIAL_LOOKUP_LIST_PADDING\r\n        } else {\r\n            if (listItems.length < MATERIAL_LOOKUP_LIST_ITEMS_COUNT) {\r\n                listItems.each(function(_, item) {\r\n                    listHeight += (0, _renderer.default)(item).outerHeight()\r\n                })\r\n            } else {\r\n                if (selectedIndex <= 1) {\r\n                    requireListItems = listItems.slice(0, MATERIAL_LOOKUP_LIST_ITEMS_COUNT)\r\n                } else {\r\n                    if (this._isCenteringEnabled(selectedIndex, listItems.length)) {\r\n                        requireListItems = listItems.slice(selectedIndex - 2, selectedIndex + 3)\r\n                    } else {\r\n                        requireListItems = listItems.slice(listItems.length - MATERIAL_LOOKUP_LIST_ITEMS_COUNT, listItems.length)\r\n                    }\r\n                }\r\n                requireListItems.each(function(_, item) {\r\n                    listHeight += (0, _renderer.default)(item).outerHeight()\r\n                })\r\n            }\r\n        }\r\n        return listHeight + (grouped ? MATERIAL_LOOKUP_LIST_PADDING : 2 * MATERIAL_LOOKUP_LIST_PADDING)\r\n    },\r\n    _getPopupHeight: function() {\r\n        if (this._list && this._list.itemElements()) {\r\n            return this._calculateListHeight(this.option(\"grouped\")) + (this._$searchWrapper ? this._$searchWrapper.outerHeight() : 0) + (this._popup._$bottom ? this._popup._$bottom.outerHeight() : 0) + (this._popup._$title ? this._popup._$title.outerHeight() : 0)\r\n        } else {\r\n            return \"auto\"\r\n        }\r\n    },\r\n    _renderPopup: function() {\r\n        if (this.option(\"usePopover\") && !this.option(\"dropDownOptions.fullScreen\")) {\r\n            if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n                this.callBase()\r\n            } else {\r\n                this._renderPopover()\r\n            }\r\n        } else {\r\n            this.callBase()\r\n        }\r\n        this._$popup.addClass(LOOKUP_POPUP_CLASS);\r\n        this._popup._wrapper().addClass(LOOKUP_POPUP_WRAPPER_CLASS)\r\n    },\r\n    _renderPopover: function() {\r\n        this._popup = this._createComponent(this._$popup, _popover.default, (0, _extend.extend)(this._popupConfig(), this._options.cache(\"dropDownOptions\"), {\r\n            showEvent: null,\r\n            hideEvent: null,\r\n            target: this.$element(),\r\n            _fixedPosition: false,\r\n            fullScreen: false,\r\n            shading: false,\r\n            closeOnTargetScroll: true,\r\n            width: this._isInitialOptionValue(\"dropDownOptions.width\") ? function() {\r\n                return this.$element().outerWidth()\r\n            }.bind(this) : this._popupConfig().width\r\n        }));\r\n        this._popup.on({\r\n            showing: this._popupShowingHandler.bind(this),\r\n            shown: this._popupShownHandler.bind(this),\r\n            hiding: this._popupHidingHandler.bind(this),\r\n            hidden: this._popupHiddenHandler.bind(this),\r\n            contentReady: this._contentReadyHandler.bind(this)\r\n        });\r\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            this._popup._$arrow.remove()\r\n        }\r\n        this._setPopupContentId(this._popup.$content());\r\n        this._contentReadyHandler()\r\n    },\r\n    _popupHidingHandler: function() {\r\n        this.callBase();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        this.callBase();\r\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            (0, _translator.resetPosition)((0, _renderer.default)(this._popup.content()).parent())\r\n        }\r\n    },\r\n    _preventFocusOnPopup: _common.noop,\r\n    _popupConfig: function() {\r\n        var _this3 = this;\r\n        var result = (0, _extend.extend)(this.callBase(), {\r\n            toolbarItems: this._getPopupToolbarItems(),\r\n            closeOnTargetScroll: false,\r\n            onPositioned: null,\r\n            maxHeight: function() {\r\n                return (0, _renderer.default)(window).height()\r\n            },\r\n            showTitle: this.option(\"dropDownOptions.showTitle\"),\r\n            title: this.option(\"dropDownOptions.title\"),\r\n            titleTemplate: this._getTemplateByOption(\"dropDownOptions.titleTemplate\"),\r\n            onTitleRendered: this.option(\"dropDownOptions.onTitleRendered\"),\r\n            fullScreen: this.option(\"dropDownOptions.fullScreen\"),\r\n            shading: this.option(\"dropDownOptions.shading\"),\r\n            closeOnOutsideClick: this.option(\"dropDownOptions.closeOnOutsideClick\")\r\n        });\r\n        delete result.animation;\r\n        delete result.position;\r\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            result.position = this.option(\"dropDownCentered\") ? {\r\n                my: \"left top\",\r\n                at: \"left top\",\r\n                of: this.element()\r\n            } : {\r\n                my: \"left top\",\r\n                at: \"left bottom\",\r\n                of: this.element()\r\n            }\r\n        }(0, _iterator.each)([\"position\", \"animation\", \"width\", \"height\"], function(_, optionName) {\r\n            var popupOptionValue = _this3.option(\"dropDownOptions.\".concat(optionName));\r\n            if (void 0 !== popupOptionValue) {\r\n                result[optionName] = popupOptionValue\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    _getPopupToolbarItems: function() {\r\n        var buttonsConfig = \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\r\n        var cancelButton = this._getCancelButtonConfig();\r\n        if (cancelButton) {\r\n            buttonsConfig.push(cancelButton)\r\n        }\r\n        var clearButton = this._getClearButtonConfig();\r\n        if (clearButton) {\r\n            buttonsConfig.push(clearButton)\r\n        }\r\n        return this._applyButtonsLocation(buttonsConfig)\r\n    },\r\n    _popupToolbarItemsConfig: function() {\r\n        return [{\r\n            shortcut: \"done\",\r\n            options: {\r\n                onClick: this._applyButtonHandler.bind(this),\r\n                text: this.option(\"applyButtonText\")\r\n            }\r\n        }]\r\n    },\r\n    _getCancelButtonConfig: function() {\r\n        var _this4 = this;\r\n        return this.option(\"showCancelButton\") ? {\r\n            shortcut: \"cancel\",\r\n            onClick: this._cancelButtonHandler.bind(this),\r\n            options: {\r\n                onInitialized: function(e) {\r\n                    e.component.registerKeyHandler(\"escape\", _this4.close.bind(_this4))\r\n                },\r\n                text: this.option(\"cancelButtonText\")\r\n            }\r\n        } : null\r\n    },\r\n    _getClearButtonConfig: function() {\r\n        return this.option(\"showClearButton\") ? {\r\n            shortcut: \"clear\",\r\n            onClick: this._resetValue.bind(this),\r\n            options: {\r\n                text: this.option(\"clearButtonText\")\r\n            }\r\n        } : null\r\n    },\r\n    _applyButtonHandler: function() {\r\n        this.option(\"value\", this._valueGetter(this._currentSelectedItem()));\r\n        this.callBase()\r\n    },\r\n    _cancelButtonHandler: function() {\r\n        this._refreshSelected();\r\n        this.callBase()\r\n    },\r\n    _refreshPopupVisibility: function() {\r\n        if (this.option(\"opened\")) {\r\n            this._updatePopupDimensions()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        if (this.option(\"usePopover\") && !this.option(\"dropDownOptions.width\")) {\r\n            this.option(\"dropDownOptions.width\", this.$element().width())\r\n        }\r\n        this._popup && this._updatePopupDimensions()\r\n    },\r\n    _input: function() {\r\n        return this._$searchBox || this.callBase()\r\n    },\r\n    _renderPopupContent: function() {\r\n        this.callBase();\r\n        this._renderSearch()\r\n    },\r\n    _renderSearch: function() {\r\n        var _this5 = this;\r\n        var isSearchEnabled = this.option(\"searchEnabled\");\r\n        this._toggleSearchClass(isSearchEnabled);\r\n        if (isSearchEnabled) {\r\n            var $searchWrapper = this._$searchWrapper = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_SEARCH_WRAPPER_CLASS);\r\n            var $searchBox = this._$searchBox = (0, _renderer.default)(\"<div>\").addClass(LOOKUP_SEARCH_CLASS).appendTo($searchWrapper);\r\n            var currentDevice = _devices.default.current();\r\n            var searchMode = currentDevice.android && currentDevice.version[0] >= 5 ? \"text\" : \"search\";\r\n            var isKeyboardListeningEnabled = false;\r\n            this._searchBox = this._createComponent($searchBox, _text_box.default, {\r\n                onDisposing: function() {\r\n                    return isKeyboardListeningEnabled = false\r\n                },\r\n                onFocusIn: function() {\r\n                    return isKeyboardListeningEnabled = true\r\n                },\r\n                onFocusOut: function() {\r\n                    return isKeyboardListeningEnabled = false\r\n                },\r\n                onKeyboardHandled: function(opts) {\r\n                    return isKeyboardListeningEnabled && _this5._list._keyboardHandler(opts)\r\n                },\r\n                mode: searchMode,\r\n                showClearButton: true,\r\n                valueChangeEvent: this.option(\"valueChangeEvent\"),\r\n                onValueChanged: this._searchHandler.bind(this)\r\n            });\r\n            this._registerSearchKeyHandlers();\r\n            $searchWrapper.insertBefore(this._$list);\r\n            this._setSearchPlaceholder()\r\n        }\r\n    },\r\n    _removeSearch: function() {\r\n        this._$searchWrapper && this._$searchWrapper.remove();\r\n        delete this._$searchWrapper;\r\n        this._$searchBox && this._$searchBox.remove();\r\n        delete this._$searchBox;\r\n        delete this._searchBox\r\n    },\r\n    _selectListItemHandler: function(e) {\r\n        var $itemElement = (0, _renderer.default)(this._list.option(\"focusedElement\"));\r\n        if (!$itemElement.length) {\r\n            return\r\n        }\r\n        e.preventDefault();\r\n        this._saveValueChangeEvent(e);\r\n        this._selectListItem(e.itemData, $itemElement)\r\n    },\r\n    _registerSearchKeyHandlers: function() {\r\n        this._searchBox.registerKeyHandler(\"escape\", this.close.bind(this));\r\n        this._searchBox.registerKeyHandler(\"enter\", this._selectListItemHandler.bind(this));\r\n        this._searchBox.registerKeyHandler(\"space\", this._selectListItemHandler.bind(this));\r\n        this._searchBox.registerKeyHandler(\"end\", _common.noop);\r\n        this._searchBox.registerKeyHandler(\"home\", _common.noop)\r\n    },\r\n    _toggleSearchClass: function(isSearchEnabled) {\r\n        if (this._popup) {\r\n            this._popup._wrapper().toggleClass(LOOKUP_POPUP_SEARCH_CLASS, isSearchEnabled)\r\n        }\r\n    },\r\n    _setSearchPlaceholder: function() {\r\n        if (!this._$searchBox) {\r\n            return\r\n        }\r\n        var minSearchLength = this.option(\"minSearchLength\");\r\n        var placeholder = this.option(\"searchPlaceholder\");\r\n        if (minSearchLength && placeholder === _message.default.format(\"Search\")) {\r\n            placeholder = _message.default.getFormatter(\"dxLookup-searchPlaceholder\")(minSearchLength)\r\n        }\r\n        this._searchBox.option(\"placeholder\", placeholder)\r\n    },\r\n    _setAriaTargetForList: _common.noop,\r\n    _renderList: function() {\r\n        var _this6 = this;\r\n        this.callBase();\r\n        this._list.registerKeyHandler(\"escape\", function() {\r\n            _this6.close()\r\n        })\r\n    },\r\n    _listConfig: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            tabIndex: 0,\r\n            grouped: this.option(\"grouped\"),\r\n            groupTemplate: this._getTemplateByOption(\"groupTemplate\"),\r\n            pullRefreshEnabled: this.option(\"pullRefreshEnabled\"),\r\n            useNativeScrolling: this.option(\"useNativeScrolling\"),\r\n            pullingDownText: this.option(\"pullingDownText\"),\r\n            pulledDownText: this.option(\"pulledDownText\"),\r\n            refreshingText: this.option(\"refreshingText\"),\r\n            pageLoadingText: this.option(\"pageLoadingText\"),\r\n            onScroll: this._scrollHandler.bind(this),\r\n            onPullRefresh: this._pullRefreshHandler.bind(this),\r\n            onPageLoading: this._pageLoadingHandler.bind(this),\r\n            pageLoadMode: this.option(\"pageLoadMode\"),\r\n            nextButtonText: this.option(\"nextButtonText\"),\r\n            indicateLoading: this.option(\"searchEnabled\"),\r\n            onSelectionChanged: this._getSelectionChangedHandler()\r\n        })\r\n    },\r\n    _getSelectionChangedHandler: function() {\r\n        return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : _common.noop\r\n    },\r\n    _listContentReadyHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._refreshSelected()\r\n    },\r\n    _setFocusPolicy: function() {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        if (this.option(\"searchEnabled\")) {\r\n            this._searchBox.focus()\r\n        } else {\r\n            _events_engine.default.trigger(this._$list, \"focus\")\r\n        }\r\n    },\r\n    _focusTarget: function() {\r\n        return this._$field\r\n    },\r\n    _keyboardEventBindingTarget: function() {\r\n        return this._$field\r\n    },\r\n    _listItemClickHandler: function(e) {\r\n        this._saveValueChangeEvent(e.event);\r\n        this._selectListItem(e.itemData, e.event.currentTarget)\r\n    },\r\n    _selectListItem: function(itemData, target) {\r\n        this._list.selectItem(target);\r\n        if (\"instantly\" === this.option(\"applyValueMode\")) {\r\n            this._applyButtonHandler()\r\n        }\r\n    },\r\n    _currentSelectedItem: function() {\r\n        return this.option(\"grouped\") ? this._list.option(\"selectedItems[0]\").items[0] : this._list.option(\"selectedItems[0]\")\r\n    },\r\n    _resetValue: function(e) {\r\n        this._saveValueChangeEvent(e.event);\r\n        this.option(\"value\", null);\r\n        this.option(\"opened\", false)\r\n    },\r\n    _searchValue: function() {\r\n        return this.option(\"searchEnabled\") && this._searchBox ? this._searchBox.option(\"value\") : \"\"\r\n    },\r\n    _renderInputValue: function() {\r\n        var _this7 = this;\r\n        return this.callBase().always(function() {\r\n            _this7._refreshSelected()\r\n        })\r\n    },\r\n    _renderPlaceholder: function() {\r\n        if (0 === this.$element().find(\".\" + TEXTEDITOR_INPUT_CLASS).length) {\r\n            return\r\n        }\r\n        this.callBase()\r\n    },\r\n    _clean: function() {\r\n        this._$fieldWrapper.remove();\r\n        this._$searchBox = null;\r\n        delete this._inkRipple;\r\n        this.callBase()\r\n    },\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._deprecatedOptions, {\r\n            title: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.title\"\r\n            },\r\n            titleTemplate: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.titleTemplate\"\r\n            },\r\n            onTitleRendered: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.onTitleRendered\"\r\n            },\r\n            fullScreen: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.fullScreen\"\r\n            },\r\n            popupWidth: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.width\"\r\n            },\r\n            popupHeight: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.height\"\r\n            },\r\n            shading: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.shading\"\r\n            },\r\n            closeOnOutsideClick: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.closeOnOutsideClick\"\r\n            },\r\n            position: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.position\"\r\n            },\r\n            animation: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.animation\"\r\n            }\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        var value = args.value;\r\n        switch (name) {\r\n            case \"dataSource\":\r\n                this.callBase.apply(this, arguments);\r\n                this._renderField();\r\n                break;\r\n            case \"searchEnabled\":\r\n                if (this._popup) {\r\n                    this._removeSearch();\r\n                    this._renderSearch()\r\n                }\r\n                break;\r\n            case \"searchPlaceholder\":\r\n                this._setSearchPlaceholder();\r\n                break;\r\n            case \"minSearchLength\":\r\n                this._setSearchPlaceholder();\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"title\":\r\n            case \"titleTemplate\":\r\n            case \"onTitleRendered\":\r\n            case \"shading\":\r\n            case \"animation\":\r\n            case \"position\":\r\n            case \"closeOnOutsideClick\":\r\n            case \"fullScreen\":\r\n                this._setPopupOption(name, value);\r\n                break;\r\n            case \"usePopover\":\r\n            case \"placeholder\":\r\n                this._invalidate();\r\n                break;\r\n            case \"clearButtonText\":\r\n            case \"showClearButton\":\r\n            case \"showCancelButton\":\r\n                this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\r\n                break;\r\n            case \"applyValueMode\":\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"popupWidth\":\r\n                this._setPopupOption(\"width\", \"auto\" === value ? this.initialOption(\"dropDownOptions\").width : value);\r\n                break;\r\n            case \"popupHeight\":\r\n                this._setPopupOption(\"height\", \"auto\" === value ? this.initialOption(\"dropDownOptions\").height : value);\r\n                break;\r\n            case \"onPageLoading\":\r\n                this._initPageLoadingAction();\r\n                break;\r\n            case \"onPullRefresh\":\r\n                this._initPullRefreshAction();\r\n                break;\r\n            case \"pullRefreshEnabled\":\r\n            case \"useNativeScrolling\":\r\n            case \"pullingDownText\":\r\n            case \"pulledDownText\":\r\n            case \"refreshingText\":\r\n            case \"pageLoadingText\":\r\n            case \"nextButtonText\":\r\n            case \"grouped\":\r\n            case \"groupTemplate\":\r\n                this._setListOption(name);\r\n                break;\r\n            case \"onScroll\":\r\n                this._initScrollAction();\r\n                break;\r\n            case \"pageLoadMode\":\r\n                this._setListOption(\"pageLoadMode\", this.option(\"pageLoadMode\"));\r\n                break;\r\n            case \"cleanSearchOnOpening\":\r\n            case \"_scrollToSelectedItemEnabled\":\r\n                break;\r\n            case \"dropDownCentered\":\r\n                if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n                    this.option(\"dropDownOptions.position\", void 0);\r\n                    this._renderPopup()\r\n                }\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    focus: function() {\r\n        this.option(\"opened\") ? this._setFocusPolicy() : _events_engine.default.trigger(this._focusTarget(), \"focus\")\r\n    },\r\n    field: function() {\r\n        return this._$field\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxLookup\", Lookup);\r\nvar _default = Lookup;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}